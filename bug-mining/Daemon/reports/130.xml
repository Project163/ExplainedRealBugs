<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:46:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DAEMON-463] Daemon fails to build on macOS with XCode 15.3</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-463</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;When building jsvc on macOS with XCode 15.3 (for Homebrew), the build fails with the following error:&lt;br/&gt;
&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 jsvc-unix.c:1311:20: error: incompatible function pointer types assigning to &lt;span class=&quot;code-quote&quot;&gt;&apos;void (*)(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;)&apos;&lt;/span&gt; from &lt;span class=&quot;code-quote&quot;&gt;&apos;void (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, siginfo_t *, void *)&apos;&lt;/span&gt; (aka &lt;span class=&quot;code-quote&quot;&gt;&apos;void (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, struct __siginfo *, void *)&apos;&lt;/span&gt;) [-Wincompatible-function-pointer-types]    90  act.sa_handler = controller;    91  ^ ~~~~~~~~~~ &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;For more details see: &lt;a href=&quot;https://github.com/Homebrew/homebrew-core/actions/runs/8967899390/job/24626304630&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Homebrew/homebrew-core/actions/runs/8967899390/job/24626304630&lt;/a&gt;&lt;br/&gt;
&#160;&lt;/p&gt;</description>
                <environment>&lt;p&gt;&#160;&lt;br/&gt;
Clang: 15.0.0 build 1500&lt;br/&gt;
macOS: 14.4.1-arm64 &lt;br/&gt;
CLT: 15.3.0.0.1.1708646388 &lt;br/&gt;
Xcode: 15.3 &lt;br/&gt;
Rosetta 2: false&lt;/p&gt;</environment>
        <key id="13578785">DAEMON-463</key>
            <summary>Daemon fails to build on macOS with XCode 15.3</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="michael-o">Michael Osipov</assignee>
                                    <reporter username="smillernl">Sean Molenaar</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 May 2024 17:50:33 +0000</created>
                <updated>Wed, 15 May 2024 09:04:28 +0000</updated>
                            <resolved>Wed, 15 May 2024 09:04:28 +0000</resolved>
                                    <version>1.3.4</version>
                                    <fixVersion>1.4.0</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17845279" author="michael-o" created="Fri, 10 May 2024 09:54:54 +0000"  >&lt;p&gt;I can confirm the issue on:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ make
(cd native; make  all)
cc -g -O2 -DOS_FREEBSD -DDSO_DLFCN -D_THREAD_SAFE -pthread -DCPU=\&quot;amd64\&quot; -Wall -Wstrict-prototypes   -I/usr/local/openjdk8/include -I/usr/local/openjdk8/include/freebsd -c jsvc-unix.c -o jsvc-unix.o
jsvc-unix.c:1311:20: error: incompatible function pointer types assigning to &apos;void (*)(int)&apos; from &apos;void (int, siginfo_t *, void *)&apos; (aka &apos;void (int, struct __siginfo *, void *)&apos;) [-Wincompatible-function-pointer-types]
 1311 |     act.sa_handler = controller;
      |                    ^ ~~~~~~~~~~
1 error generated.
*** Error code 1

Stop.
make[1]: stopped in /tmp/commons-daemon/src/native/unix/native
*** Error code 1

Stop.
make: stopped in /tmp/commons-daemon/src/native/unix
osipovmi@deblndw011x:/tmp/commons-daemon/src/native/unix (master =)
$ cc --version
FreeBSD clang version 17.0.6 (https://github.com/llvm/llvm-project.git llvmorg-17.0.6-0-g6009708b4367)
Target: x86_64-unknown-freebsd13.3
Thread model: posix
InstalledDir: /usr/bin
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17845280" author="michael-o" created="Fri, 10 May 2024 09:56:33 +0000"  >&lt;p&gt;Temporary fix: &lt;a href=&quot;https://github.com/freebsd/freebsd-ports/blob/e8c3e827f61838b8bd8509e3d4a6d39dfbadfdd1/devel/apache-commons-daemon/Makefile#L32-L34&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/freebsd/freebsd-ports/blob/e8c3e827f61838b8bd8509e3d4a6d39dfbadfdd1/devel/apache-commons-daemon/Makefile#L32-L34&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17845281" author="michael-o" created="Fri, 10 May 2024 10:06:54 +0000"  >&lt;p&gt;This does work:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ git diff
diff --git a/src/native/unix/native/jsvc-unix.c b/src/native/unix/native/jsvc-unix.c
index e331a0f..187e404 100644
--- a/src/native/unix/native/jsvc-unix.c
+++ b/src/native/unix/native/jsvc-unix.c
@@ -1308,7 +1308,7 @@ static int run_controller(arg_data *args, home_data *data, uid_t uid, gid_t gid)
      * These will be replaced in the child process.
      */
     memset(&amp;amp;act, &apos;\0&apos;, sizeof(act));
-    act.sa_handler = controller;
+    act.sa_sigaction = controller;
     sigemptyset(&amp;amp;act.sa_mask);
     act.sa_flags = SA_RESTART | SA_NOCLDSTOP | SA_SIGINFO;
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but I have no clue how to test/comply with: If the SA_SIGINFO flag is set in the sa_flags field, and the implementation supports the Realtime Signals Extension option or the XSI Extension option, the sa_sigaction field specifies a signal-catching function. &lt;span class=&quot;error&quot;&gt;&amp;#91;Option End&amp;#93;&lt;/span&gt;&lt;br/&gt;
from &lt;a href=&quot;https://pubs.opengroup.org/onlinepubs/009696699/functions/sigaction.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://pubs.opengroup.org/onlinepubs/009696699/functions/sigaction.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17845282" author="michael-o" created="Fri, 10 May 2024 10:12:00 +0000"  >&lt;p&gt;Looking at the definition of &lt;tt&gt;siginfo_t&lt;/tt&gt; from &lt;a href=&quot;https://pubs.opengroup.org/onlinepubs/009696699/basedefs/signal.h.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://pubs.opengroup.org/onlinepubs/009696699/basedefs/signal.h.html&lt;/a&gt; we already use &lt;tt&gt;si_pid&lt;/tt&gt; from the extended runtime code, so maybe it is already safe to use it?&lt;/p&gt;</comment>
                            <comment id="17846213" author="michael-o" created="Tue, 14 May 2024 07:50:39 +0000"  >&lt;p&gt;FYI: &lt;a href=&quot;https://github.com/apache/commons-daemon/pull/170&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-daemon/pull/170&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                                                <inwardlinks description="is fixed by">
                                        <issuelink>
            <issuekey id="13579183">DAEMON-464</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13579183">DAEMON-464</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://github.com/Homebrew/homebrew-core/pull/168294]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 25 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1p508:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>