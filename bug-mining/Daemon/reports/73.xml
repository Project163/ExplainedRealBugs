<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:45:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DAEMON-322] Missing Windows 2012 R2 support</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-322</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Tomcat uses Procrun to install a Windows service.&lt;/p&gt;

&lt;p&gt;I opened a bug at the tomcat tracker (&lt;a href=&quot;https://issues.apache.org/bugzilla/show_bug.cgi?id=56929&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://issues.apache.org/bugzilla/show_bug.cgi?id=56929&lt;/a&gt;) and was pointed out to open it here. Windows 8.1 is probably also affected too.&lt;/p&gt;

&lt;p&gt;Here is the Tomcat bug:&lt;/p&gt;

&lt;p&gt;The server information while running as a Windows service on 2012 R2 is wrong.&lt;/p&gt;

&lt;p&gt;The system is identified as:&lt;br/&gt;
 OS Name: Windows Server 2012&lt;br/&gt;
 OS Version: 6.2&lt;/p&gt;

&lt;p&gt;It is correct when starting tomcat with startup.bat:&lt;br/&gt;
 OS Name: Windows Server 2012 R2&lt;br/&gt;
 OS Version: 6.3&lt;/p&gt;

&lt;p&gt;How to reproduce:&lt;/p&gt;

&lt;p&gt;1. Install the Windows service from apache-tomcat-7.0.55\bin&lt;br/&gt;
   service.bat install Test&lt;br/&gt;
2. Activate the configuration for the /manager/ access in conf\tomcat-users.xml&lt;br/&gt;
3. Start the service&lt;br/&gt;
4. Navigate to the /manager/status page&lt;br/&gt;
5. The &quot;Server Information&quot; contains the wrong OS Version&lt;br/&gt;
6. Stop the Windows service&lt;br/&gt;
7. Start the tomcat with the startup.bat script&lt;br/&gt;
8. Check the /manager/status page again which now contains the correct version&lt;/p&gt;

&lt;p&gt;The issue could be related due too the service binary which needs to be recompiled for:&lt;br/&gt;
&lt;a href=&quot;http://msdn.microsoft.com/en-us/library/windows/desktop/ms724832%28v=vs.85%29.aspx&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://msdn.microsoft.com/en-us/library/windows/desktop/ms724832%28v=vs.85%29.aspx&lt;/a&gt;&lt;br/&gt;
and the link inside it for:&lt;br/&gt;
&lt;a href=&quot;http://msdn.microsoft.com/en-us/library/windows/desktop/dn481241%28v=vs.85%29.aspx&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://msdn.microsoft.com/en-us/library/windows/desktop/dn481241%28v=vs.85%29.aspx&lt;/a&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 2012 R2&lt;br/&gt;
Tomcat 7.0.55&lt;br/&gt;
Java 7u67&lt;/p&gt;</environment>
        <key id="12740085">DAEMON-322</key>
            <summary>Missing Windows 2012 R2 support</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bernd2">Bernd Ernesti</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Sep 2014 08:29:29 +0000</created>
                <updated>Mon, 30 Oct 2017 13:07:23 +0000</updated>
                            <resolved>Mon, 30 Oct 2017 13:07:23 +0000</resolved>
                                    <version>1.0.15</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14127049" author="sebb@apache.org" created="Tue, 9 Sep 2014 14:46:26 +0000"  >&lt;p&gt;It looks like Tomcat Manager uses Java properties to report the OS version information.&lt;/p&gt;

&lt;p&gt;However DAEMON appears to use GetVersion&lt;span class=&quot;error&quot;&gt;&amp;#91;Ex&amp;#93;&lt;/span&gt;&lt;br/&gt;
These are now deprecated; there does not appear to be an official way to get the actual OS version going forward from 8.1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;It looks like the intention is to stop applications from using the OS version for feature detection. This breaks version display.&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;I assume that Java has code that is able to set the system property correctly.&lt;br/&gt;
Is this documented anywhere?&lt;/p&gt;</comment>
                            <comment id="14127863" author="b.eckenfels" created="Wed, 10 Sep 2014 00:36:58 +0000"  >&lt;p&gt;The Java logic is here, and it still uses GetVersionEx (and a manifest):&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://hg.openjdk.java.net/jdk8/jdk8/jdk/rev/40221b09812f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hg.openjdk.java.net/jdk8/jdk8/jdk/rev/40221b09812f&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/40221b09812f/src/windows/native/java/lang/java_props_md.c#l353&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/40221b09812f/src/windows/native/java/lang/java_props_md.c#l353&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14128706" author="sebb@apache.org" created="Wed, 10 Sep 2014 16:47:50 +0000"  >&lt;p&gt;Thanks very much.&lt;/p&gt;

&lt;p&gt;Seems a very fragile way of obtaining such basic information about the OS.&lt;br/&gt;
Looks like every binary that uses GetVersion will have to be updated for every new release.&lt;br/&gt;
So much for upwards compatibility.&lt;/p&gt;

&lt;p&gt;Unless DAEMON actually needs to display the version, it could just use the feature support API instead.&lt;br/&gt;
And/or maybe it can use the Java binary implementation somehow.&lt;/p&gt;</comment>
                            <comment id="14128750" author="b.eckenfels" created="Wed, 10 Sep 2014 17:16:11 +0000"  >&lt;p&gt;BTW: it looks like in the openjdk tracker contains also a case where JVM itself calculates the wrong os properties when jvm.dll and custom launchers are used.&lt;/p&gt;

&lt;p&gt;So I am not sure what this bug is talking about, but if it is the calculation of system properties it could actually be the very same bug:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://bugs.openjdk.java.net/browse/JDK-8057122&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.java.net/browse/JDK-8057122&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;There it looks like there is a combination of upstream(backported) fixes and a correct manifest needed to make the custom launcher work. I am afraid this is needed to &quot;fix&quot; JVM behavior, so we should allign the manifests of the daemons launcher with jdk launcher.&lt;/p&gt;</comment>
                            <comment id="14144808" author="bernd2" created="Tue, 23 Sep 2014 13:54:07 +0000"  >&lt;p&gt;See the latest posting in that thread, where a manifest solved this issue:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://bugs.openjdk.java.net/browse/JDK-8057122?focusedCommentId=13556218&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13556218&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.java.net/browse/JDK-8057122?focusedCommentId=13556218&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13556218&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14248203" author="bernd2" created="Tue, 16 Dec 2014 12:47:10 +0000"  >&lt;p&gt;Is there any update for this issue?&lt;/p&gt;</comment>
                            <comment id="16224888" author="markt" created="Mon, 30 Oct 2017 13:07:23 +0000"  >&lt;p&gt;Testing shows that this is a JVM issue, not a Commons Daemon or Tomcat issue.&lt;/p&gt;

&lt;p&gt;I can repeat these results on Windows Server 2012 R2 with Java 7u65 and 7u80. I get the correct results if I switch to Java 8u144.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 2 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ztrb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>