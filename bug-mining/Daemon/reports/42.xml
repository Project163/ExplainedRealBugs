<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:45:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DAEMON-178] jsvc process does not take the umask of the running user. It is always 077</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-178</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;1) create a simple implementation of the Daemon interface that writes &quot;hello world&quot; log files&lt;br/&gt;
2) compile jsvc as described in the documentation&lt;br/&gt;
3) verify that your linux user has umask != 077, by typing &quot;umask&quot;&lt;br/&gt;
4) start jsvc with all the required CP args as described in the documentation&lt;br/&gt;
5) look the log file permissions&lt;/p&gt;

&lt;p&gt;Expected: The permissions are not 700.&lt;br/&gt;
Actual: They are 700.&lt;/p&gt;

&lt;p&gt;6) Modify commons-daemon/src/native/unix/native/jsvc-unix.c, replacing 077 with 022&lt;br/&gt;
7) recompile jsvc&lt;br/&gt;
8) repeat 4-5&lt;/p&gt;

&lt;p&gt;Expected: The permissions are 755.&lt;br/&gt;
Actual: The permissions are 755.&lt;/p&gt;

&lt;p&gt;Conclusion: The jsvc process uses a hard-coded value, instead of adopting the running user&apos;s umask, as expected.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu Hardy 8.0.4, jdk1.6.2&lt;/p&gt;</environment>
        <key id="12477509">DAEMON-178</key>
            <summary>jsvc process does not take the umask of the running user. It is always 077</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="pbuser">J Miller</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Oct 2010 21:11:58 +0000</created>
                <updated>Sat, 15 Oct 2011 16:22:06 +0000</updated>
                            <resolved>Tue, 19 Oct 2010 18:38:54 +0000</resolved>
                                    <version>1.0.3</version>
                                    <fixVersion>1.0.4</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12921658" author="mturk@apache.org" created="Sat, 16 Oct 2010 09:39:19 +0000"  >&lt;p&gt;The 077 umask is deliberate and this won&apos;t change because of security reasons.&lt;br/&gt;
If you wish to shoot yourself in the foot, there are much better ways of doing that &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12921678" author="mturk@apache.org" created="Sat, 16 Oct 2010 11:25:06 +0000"  >&lt;p&gt;Added support to specify the umask at compile time.&lt;br/&gt;
Eg.&lt;/p&gt;

&lt;p&gt;make EXTRA_CFLAGS=&quot;-DJSVC_UMASK=022&quot; will use umask(022)&lt;br/&gt;
It is even possible to&lt;br/&gt;
make EXTRA_CFLAGS=&quot;-DJSVC_UMASK=002&quot;&lt;/p&gt;

&lt;p&gt;In that case the following will appear in the log:&lt;br/&gt;
NOTICE: jsvc umask of 002 allows write permission to group and/or other&lt;/p&gt;

&lt;p&gt;This is similar technique Apache suexec is using.&lt;/p&gt;
</comment>
                            <comment id="12922657" author="sebb@apache.org" created="Tue, 19 Oct 2010 18:38:54 +0000"  >&lt;p&gt;Partially implemented&lt;/p&gt;</comment>
                            <comment id="13086236" author="jdbenavent" created="Wed, 17 Aug 2011 10:52:27 +0000"  >&lt;p&gt;Thank you, J Miller&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_up.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;

&lt;p&gt;I had turned mad wondering why the TOMCAT_USER &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/lightbulb.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; was not granted read permission to the &lt;b&gt;catalina.out&lt;/b&gt; log file.&lt;br/&gt;
It is required, for example, to check error messages when an app is deployed.&lt;/p&gt;

&lt;p&gt;I downloaded release 6.0.29 which includes &lt;b&gt;commons-daemon-1.0.2-native-src&lt;/b&gt;, i.e, version 1.0.2 is affected too.&lt;/p&gt;</comment>
                            <comment id="13128233" author="michael-o" created="Sat, 15 Oct 2011 16:20:49 +0000"  >&lt;p&gt;Cannot this be made easier by providing simply a -umask option in the jsvc binary? It is cumbersome to recompile the source over and over again.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37627</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 6 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tjtz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170522</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>