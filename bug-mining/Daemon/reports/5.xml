<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:44:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DAEMON-98] make fails for jsvc on OS X</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-98</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;With both jsvc.tar.gz from tomcat 6.0.10 and the daemon-1.0.1.tar.gz sources from the commons project, when I try to configure/compile jsvc on OS X, I get the following:&lt;/p&gt;


&lt;p&gt;arthur:/usr/local/apache-tomcat-6.0.10/bin/daemon-1.0.1/src/native/unix root# ./configure &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;Current host ***&lt;br/&gt;
checking build system type... i386-apple-darwin8.9.1&lt;br/&gt;
checking host system type... i386-apple-darwin8.9.1&lt;br/&gt;
checking cached host system type... ok&lt;/li&gt;
			&lt;li&gt;C-Language compilation tools ***&lt;br/&gt;
checking for gcc... gcc&lt;br/&gt;
checking for C compiler default output file name... a.out&lt;br/&gt;
checking whether the C compiler works... yes&lt;br/&gt;
checking whether we are cross compiling... no&lt;br/&gt;
checking for suffix of executables... &lt;br/&gt;
checking for suffix of object files... o&lt;br/&gt;
checking whether we are using the GNU C compiler... yes&lt;br/&gt;
checking whether gcc accepts -g... yes&lt;br/&gt;
checking for gcc option to accept ANSI C... none needed&lt;br/&gt;
checking for ranlib... ranlib&lt;/li&gt;
			&lt;li&gt;Host support ***&lt;br/&gt;
checking C flags dependant on host system type... ok&lt;/li&gt;
			&lt;li&gt;Java compilation tools ***&lt;br/&gt;
checking for javac... /System/Library/Frameworks/JavaVM.framework/Home/bin/javac&lt;br/&gt;
checking wether the Java compiler (/System/Library/Frameworks/JavaVM.framework/Home/bin/javac) works... yes&lt;br/&gt;
checking for jar... /System/Library/Frameworks/JavaVM.framework/Home/bin/jar&lt;br/&gt;
gcc flags added&lt;/li&gt;
			&lt;li&gt;Writing output files ***&lt;br/&gt;
configure: creating ./config.status&lt;br/&gt;
config.status: creating Makefile&lt;br/&gt;
config.status: creating Makedefs&lt;br/&gt;
config.status: creating native/Makefile&lt;/li&gt;
			&lt;li&gt;All done ***&lt;br/&gt;
Now you can issue &quot;make&quot;&lt;br/&gt;
arthur:/usr/local/apache-tomcat-6.0.10/bin/daemon-1.0.1/src/native/unix root# make&lt;br/&gt;
make -C native all&lt;br/&gt;
gcc -g -O2 -DOS_DARWIN -DDSO_DYLD -DCPU=\&quot;i386\&quot; -I/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Headers -Wall -Wstrict-prototypes -c jsvc-unix.c -o jsvc-unix.o&lt;br/&gt;
gcc -g -O2 -DOS_DARWIN -DDSO_DYLD -DCPU=\&quot;i386\&quot; -I/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Headers -Wall -Wstrict-prototypes -c arguments.c -o arguments.o&lt;br/&gt;
arguments.c: In function &apos;arguments&apos;:&lt;br/&gt;
arguments.c:251: warning: unused variable &apos;temp&apos;&lt;br/&gt;
gcc -g -O2 -DOS_DARWIN -DDSO_DYLD -DCPU=\&quot;i386\&quot; -I/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Headers -Wall -Wstrict-prototypes -c debug.c -o debug.o&lt;br/&gt;
gcc -g -O2 -DOS_DARWIN -DDSO_DYLD -DCPU=\&quot;i386\&quot; -I/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Headers -Wall -Wstrict-prototypes -c dso-dlfcn.c -o dso-dlfcn.o&lt;br/&gt;
gcc -g -O2 -DOS_DARWIN -DDSO_DYLD -DCPU=\&quot;i386\&quot; -I/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Headers -Wall -Wstrict-prototypes -c dso-dyld.c -o dso-dyld.o&lt;br/&gt;
dso-dyld.c:54: error: conflicting types for &apos;dso_init&apos;&lt;br/&gt;
dso.h:24: error: previous declaration of &apos;dso_init&apos; was here&lt;br/&gt;
dso-dyld.c: In function &apos;dso_link&apos;:&lt;br/&gt;
dso-dyld.c:69: warning: &apos;NSAddLibrary&apos; is deprecated (declared at /usr/include/mach-o/dyld.h:224)&lt;br/&gt;
dso-dyld.c: At top level:&lt;br/&gt;
dso-dyld.c:76: error: conflicting types for &apos;dso_unlink&apos;&lt;br/&gt;
dso.h:26: error: previous declaration of &apos;dso_unlink&apos; was here&lt;br/&gt;
dso-dyld.c: In function &apos;dso_symbol&apos;:&lt;br/&gt;
dso-dyld.c:109: warning: operation on &apos;x&apos; may be undefined&lt;br/&gt;
dso-dyld.c:113: warning: &apos;NSLookupAndBindSymbol&apos; is deprecated (declared at /usr/include/mach-o/dyld.h:158)&lt;br/&gt;
dso-dyld.c: At top level:&lt;br/&gt;
dso-dyld.c:127: warning: function declaration isn&apos;t a prototype&lt;br/&gt;
make&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;: *** &lt;span class=&quot;error&quot;&gt;&amp;#91;dso-dyld.o&amp;#93;&lt;/span&gt; Error 1&lt;br/&gt;
make: *** &lt;span class=&quot;error&quot;&gt;&amp;#91;native/all&amp;#93;&lt;/span&gt; Error 2&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment>&lt;p&gt;OS X 10.4.9 Server on i386&lt;br/&gt;
Darwin Kernel Version 8.9.1: Thu Feb 22 20:55:00 PST 2007; root:xnu-792.18.15~1/RELEASE_I386 i386 i386&lt;br/&gt;
java version &quot;1.5.0_07&quot;&lt;br/&gt;
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_07-164)&lt;br/&gt;
Java HotSpot(TM) Server VM (build 1.5.0_07-87, mixed mode)&lt;/p&gt;</environment>
        <key id="12367597">DAEMON-98</key>
            <summary>make fails for jsvc on OS X</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ahayes">Amos Hayes</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Apr 2007 19:26:38 +0000</created>
                <updated>Fri, 26 Feb 2010 16:57:53 +0000</updated>
                            <resolved>Thu, 11 Feb 2010 19:23:28 +0000</resolved>
                                    <version>1.0</version>
                    <version>1.0.1</version>
                                    <fixVersion>1.0.2</fixVersion>
                                        <due></due>
                            <votes>2</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12491011" author="ahayes" created="Mon, 23 Apr 2007 18:06:46 +0000"  >&lt;p&gt;The attached osx_patch.txt file solves the problem.&lt;/p&gt;</comment>
                            <comment id="12608917" author="jmalis" created="Fri, 27 Jun 2008 21:12:55 +0000"  >&lt;p&gt;Patch to compile on OS X 10.5 Leopard&lt;/p&gt;</comment>
                            <comment id="12660949" author="markt" created="Mon, 5 Jan 2009 22:04:51 +0000"  >&lt;p&gt;I have applied these patches to trunk. Many thanks for your efforts.&lt;/p&gt;

&lt;p&gt;If you can help out with testing of earlier OS X versions please see the thread on the dev list.&lt;/p&gt;</comment>
                            <comment id="12701787" author="christianr" created="Thu, 23 Apr 2009 02:40:05 +0000"  >&lt;p&gt;The patch does not work on &lt;b&gt;Mac OS X 10.5&lt;/b&gt; (&lt;em&gt;Leopard&lt;/em&gt;), I am using &lt;b&gt;Xcode 3.1.2&lt;/b&gt;.&lt;br/&gt;
I get following output:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[04:11 christianr@Procyon] sh ./configure
*** Current host ***
checking build system type... i386-apple-darwin9.6.0
checking host system type... i386-apple-darwin9.6.0
checking cached host system type... ok
*** C-Language compilation tools ***
checking for gcc... gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables... 
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking for ranlib... ranlib
*** Host support ***
checking C flags dependant on host system type... ok
*** Java compilation tools ***
checking for javac... /System/Library/Frameworks/JavaVM.framework/Versions/1.6/Home/bin/javac
checking wether the Java compiler (/System/Library/Frameworks/JavaVM.framework/Versions/1.6/Home/bin/javac) works... yes
checking for jar... /System/Library/Frameworks/JavaVM.framework/Versions/1.6/Home/bin/jar
gcc flags added
*** Writing output files ***
configure: creating ./config.status
config.status: creating Makefile
config.status: creating Makedefs
config.status: creating native/Makefile
*** All done ***
Now you can issue &quot;make&quot;
[04:11 christianr@Procyon] make
make -C native all
gcc -g -O2 -DOS_DARWIN -DDSO_DLFCN -DCPU=\&quot;i386\&quot; -I/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Headers -Wall -Wstrict-prototypes -c dso-dyld.c -o dso-dyld.o
gcc -g -O2 -DOS_DARWIN -DDSO_DLFCN -DCPU=\&quot;i386\&quot; -I/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Headers -Wall -Wstrict-prototypes -c help.c -o help.o
gcc -g -O2 -DOS_DARWIN -DDSO_DLFCN -DCPU=\&quot;i386\&quot; -I/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Headers -Wall -Wstrict-prototypes -c home.c -o home.o
gcc -g -O2 -DOS_DARWIN -DDSO_DLFCN -DCPU=\&quot;i386\&quot; -I/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Headers -Wall -Wstrict-prototypes -c java.c -o java.o
java.c:49: warning: function declaration isn&apos;t a prototype
java.c: In function &apos;java_init&apos;:
java.c:122: warning: implicit declaration of function &apos;dso_error&apos;
gcc -g -O2 -DOS_DARWIN -DDSO_DLFCN -DCPU=\&quot;i386\&quot; -I/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Headers -Wall -Wstrict-prototypes -c location.c -o location.o
gcc -g -O2 -DOS_DARWIN -DDSO_DLFCN -DCPU=\&quot;i386\&quot; -I/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Headers -Wall -Wstrict-prototypes -c replace.c -o replace.o
gcc -g -O2 -DOS_DARWIN -DDSO_DLFCN -DCPU=\&quot;i386\&quot; -I/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Headers -Wall -Wstrict-prototypes -c signals.c -o signals.o
ar cr libservice.a arguments.o debug.o dso-dlfcn.o dso-dyld.o help.o home.o java.o location.o replace.o signals.o
ranlib: file: libservice.a(dso-dlfcn.o) has no symbols
ranlib: file: libservice.a(dso-dyld.o) has no symbols
ranlib: file: libservice.a(signals.o) has no symbols
ranlib libservice.a
ranlib: file: libservice.a(dso-dlfcn.o) has no symbols
ranlib: file: libservice.a(dso-dyld.o) has no symbols
ranlib: file: libservice.a(signals.o) has no symbols
gcc  jsvc-unix.o libservice.a -o ../jsvc
Undefined symbols:
  &quot;_dso_link&quot;, referenced from:
      _java_init in libservice.a(java.o)
      _java_init in libservice.a(java.o)
  &quot;_dso_symbol&quot;, referenced from:
      _java_init in libservice.a(java.o)
      _java_init in libservice.a(java.o)
  &quot;_dso_init&quot;, referenced from:
      _java_init in libservice.a(java.o)
  &quot;_dso_error&quot;, referenced from:
      _java_init in libservice.a(java.o)
ld: symbol(s) not found
collect2: ld returned 1 exit status
make[1]: *** [jsvc] Error 1
make: *** [native/all] Error 2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Up to this link &lt;a href=&quot;http://www.malisphoto.com/tips/tomcatonosx.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.malisphoto.com/tips/tomcatonosx.html&lt;/a&gt; I should use &lt;b&gt;Xcode 3.0&lt;/b&gt; and not &lt;b&gt;Xcode 3.1&lt;/b&gt;. However the switch is not that easy. How can I proceed?&lt;br/&gt;
Thanks for you help.&lt;/p&gt;</comment>
                            <comment id="12707713" author="awsmith" created="Sat, 9 May 2009 21:24:31 +0000"  >&lt;p&gt;I had success with the osx-leopard.txt patch.  This patch file affects 2 files:&lt;/p&gt;

&lt;p&gt;jsvc.h&lt;br/&gt;
apsupport.m4&lt;/p&gt;

&lt;p&gt;I created 2 separate patch files based on osx-leopard.txt and patched individually.&lt;/p&gt;

&lt;p&gt;${CATALINA_HOME}/bin/jsvc-src/native/jsvc.h.672378.patch&lt;br/&gt;
${CATALINA_HOME}/bin/jsvc-src/support/apsupport.m4.672378.patch&lt;/p&gt;

&lt;p&gt;&amp;gt; cd ${CATALINA_HOME}/bin/jsvc-src/native&lt;br/&gt;
&amp;gt; patch jsvc.h jsvc.h.672378.patch&lt;br/&gt;
&amp;gt; cd ${CATALINA_HOME}/bin/jsvc-src/support&lt;br/&gt;
&amp;gt; patch apsupport.m4 apsupport.m4.672378.patch&lt;br/&gt;
&amp;gt; cd ${CATALINA_HOME}/bin/jsvc-src&lt;br/&gt;
&amp;gt; ./configure&lt;br/&gt;
&amp;gt; make&lt;/p&gt;

&lt;p&gt;If you look in osx-leopard.txt attached to this issue you can easily see where each patch begins.&lt;/p&gt;

&lt;p&gt;After applying patches and re-running configure + make, build was successful.  Thanks!&lt;/p&gt;

&lt;p&gt;My environment:&lt;br/&gt;
ProductName:    Mac OS X&lt;br/&gt;
ProductVersion: 10.5.6&lt;br/&gt;
BuildVersion:   9G55&lt;/p&gt;

&lt;p&gt;Xcode 3.1&lt;br/&gt;
Apache Tomcat 5.5.26&lt;br/&gt;
Java 1.5&lt;/p&gt;

&lt;p&gt;I&apos;m guessing the problem in the above comment is that apsupport.m4 was not patched?&lt;/p&gt;</comment>
                            <comment id="12712719" author="christianr" created="Mon, 25 May 2009 13:30:43 +0000"  >&lt;p&gt;Looks a lot better! I did it the way you just suggested and it worked like a charm. Thanks a lot.&lt;/p&gt;</comment>
                            <comment id="12832651" author="mturk@apache.org" created="Thu, 11 Feb 2010 19:23:28 +0000"  >&lt;p&gt;Already resolved inside SVN, but seems the JIRA wasn&apos;t updated&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12384868" name="osx-leopard.txt" size="873" author="jmalis" created="Fri, 27 Jun 2008 21:12:55 +0000"/>
                            <attachment id="12356077" name="osx_patch.txt" size="361" author="ahayes" created="Mon, 23 Apr 2007 18:06:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37707</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 41 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tjw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170532</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>