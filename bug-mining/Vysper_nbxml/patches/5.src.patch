diff --git a/nbxml/src/main/java/org/apache/vysper/xml/decoder/XMLElementListener.java b/nbxml/src/main/java/org/apache/vysper/xml/decoder/XMLElementListener.java
index f4eb235d..ac81f1cc 100644
--- a/nbxml/src/main/java/org/apache/vysper/xml/decoder/XMLElementListener.java
+++ b/nbxml/src/main/java/org/apache/vysper/xml/decoder/XMLElementListener.java
@@ -23,4 +23,5 @@ import org.apache.vysper.xml.fragment.XMLElement;
 
 public interface XMLElementListener {
     void element(XMLElement element);
+    void close();
 }
\ No newline at end of file
diff --git a/nbxml/src/main/java/org/apache/vysper/xml/decoder/XMPPContentHandler.java b/nbxml/src/main/java/org/apache/vysper/xml/decoder/XMPPContentHandler.java
index e2a4d0d2..1767922b 100644
--- a/nbxml/src/main/java/org/apache/vysper/xml/decoder/XMPPContentHandler.java
+++ b/nbxml/src/main/java/org/apache/vysper/xml/decoder/XMPPContentHandler.java
@@ -139,7 +139,7 @@ public class XMPPContentHandler implements ContentHandler {
      * End of the XMPP stream. Tell the XML listener we're done.
      */
     public void endDocument() throws SAXException { 
-        /* nothing to do */
+    	this.listener.close();
     }
 
     /**
diff --git a/nbxml/src/test/java/org/apache/vysper/xml/sax/impl/XMPPContentHandlerTestCase.java b/nbxml/src/test/java/org/apache/vysper/xml/sax/impl/XMPPContentHandlerTestCase.java
index 1603082f..547c0efa 100644
--- a/nbxml/src/test/java/org/apache/vysper/xml/sax/impl/XMPPContentHandlerTestCase.java
+++ b/nbxml/src/test/java/org/apache/vysper/xml/sax/impl/XMPPContentHandlerTestCase.java
@@ -39,10 +39,19 @@ public class XMPPContentHandlerTestCase extends TestCase {
 
     private static class TestListener implements XMLElementListener {
         public List<XMLElement> elements = new ArrayList<XMLElement>();
+        private boolean closed = false;
 
         public void element(XMLElement element) {
             elements.add(element);
         }
+        
+        public void close() {
+        	closed = true;
+        }
+        
+        public boolean isClosed() {
+        	return closed;
+        }
     }
 
     public void test() throws Exception {
@@ -63,6 +72,7 @@ public class XMPPContentHandlerTestCase extends TestCase {
         assertEquals("stanza", actual.next().getName());
         assertEquals("message", actual.next().getName());
         assertEquals("iq", actual.next().getName());
+        assertEquals(true, listener.isClosed());
     }
 
     private void parse(NonBlockingXMLReader reader, String xml) throws Exception {
diff --git a/nbxml/src/test/java/org/apache/vysper/xml/sax/perf/PerfRunner.java b/nbxml/src/test/java/org/apache/vysper/xml/sax/perf/PerfRunner.java
index fd6b9dee..add24dcd 100644
--- a/nbxml/src/test/java/org/apache/vysper/xml/sax/perf/PerfRunner.java
+++ b/nbxml/src/test/java/org/apache/vysper/xml/sax/perf/PerfRunner.java
@@ -39,6 +39,8 @@ public class PerfRunner {
         public void element(XMLElement element) {
             counter++;
         }
+        
+        public void close() {}
     }
 
     private static final String SINGLE_LEVEL_XML = "<child att='foo' att2='bar'></child>";
