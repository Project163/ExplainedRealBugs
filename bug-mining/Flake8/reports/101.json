{"url":"https://api.github.com/repos/PyCQA/flake8/issues/1372","repository_url":"https://api.github.com/repos/PyCQA/flake8","labels_url":"https://api.github.com/repos/PyCQA/flake8/issues/1372/labels{/name}","comments_url":"https://api.github.com/repos/PyCQA/flake8/issues/1372/comments","events_url":"https://api.github.com/repos/PyCQA/flake8/issues/1372/events","html_url":"https://github.com/PyCQA/flake8/issues/1372","id":967856142,"node_id":"MDU6SXNzdWU5Njc4NTYxNDI=","number":1372,"title":"AttributeError on Python 3.10","user":{"login":"jaraco","id":308610,"node_id":"MDQ6VXNlcjMwODYxMA==","avatar_url":"https://avatars.githubusercontent.com/u/308610?v=4","gravatar_id":"","url":"https://api.github.com/users/jaraco","html_url":"https://github.com/jaraco","followers_url":"https://api.github.com/users/jaraco/followers","following_url":"https://api.github.com/users/jaraco/following{/other_user}","gists_url":"https://api.github.com/users/jaraco/gists{/gist_id}","starred_url":"https://api.github.com/users/jaraco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaraco/subscriptions","organizations_url":"https://api.github.com/users/jaraco/orgs","repos_url":"https://api.github.com/users/jaraco/repos","events_url":"https://api.github.com/users/jaraco/events{/privacy}","received_events_url":"https://api.github.com/users/jaraco/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"sigmavirus24","id":240830,"node_id":"MDQ6VXNlcjI0MDgzMA==","avatar_url":"https://avatars.githubusercontent.com/u/240830?v=4","gravatar_id":"","url":"https://api.github.com/users/sigmavirus24","html_url":"https://github.com/sigmavirus24","followers_url":"https://api.github.com/users/sigmavirus24/followers","following_url":"https://api.github.com/users/sigmavirus24/following{/other_user}","gists_url":"https://api.github.com/users/sigmavirus24/gists{/gist_id}","starred_url":"https://api.github.com/users/sigmavirus24/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sigmavirus24/subscriptions","organizations_url":"https://api.github.com/users/sigmavirus24/orgs","repos_url":"https://api.github.com/users/sigmavirus24/repos","events_url":"https://api.github.com/users/sigmavirus24/events{/privacy}","received_events_url":"https://api.github.com/users/sigmavirus24/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"sigmavirus24","id":240830,"node_id":"MDQ6VXNlcjI0MDgzMA==","avatar_url":"https://avatars.githubusercontent.com/u/240830?v=4","gravatar_id":"","url":"https://api.github.com/users/sigmavirus24","html_url":"https://github.com/sigmavirus24","followers_url":"https://api.github.com/users/sigmavirus24/followers","following_url":"https://api.github.com/users/sigmavirus24/following{/other_user}","gists_url":"https://api.github.com/users/sigmavirus24/gists{/gist_id}","starred_url":"https://api.github.com/users/sigmavirus24/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sigmavirus24/subscriptions","organizations_url":"https://api.github.com/users/sigmavirus24/orgs","repos_url":"https://api.github.com/users/sigmavirus24/repos","events_url":"https://api.github.com/users/sigmavirus24/events{/privacy}","received_events_url":"https://api.github.com/users/sigmavirus24/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/PyCQA/flake8/milestones/39","html_url":"https://github.com/PyCQA/flake8/milestone/39","labels_url":"https://api.github.com/repos/PyCQA/flake8/milestones/39/labels","id":6666722,"node_id":"MDk6TWlsZXN0b25lNjY2NjcyMg==","number":39,"title":"4.0.0","description":"","creator":{"login":"asottile","id":1810591,"node_id":"MDQ6VXNlcjE4MTA1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1810591?v=4","gravatar_id":"","url":"https://api.github.com/users/asottile","html_url":"https://github.com/asottile","followers_url":"https://api.github.com/users/asottile/followers","following_url":"https://api.github.com/users/asottile/following{/other_user}","gists_url":"https://api.github.com/users/asottile/gists{/gist_id}","starred_url":"https://api.github.com/users/asottile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asottile/subscriptions","organizations_url":"https://api.github.com/users/asottile/orgs","repos_url":"https://api.github.com/users/asottile/repos","events_url":"https://api.github.com/users/asottile/events{/privacy}","received_events_url":"https://api.github.com/users/asottile/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":16,"state":"closed","created_at":"2021-04-16T03:43:33Z","updated_at":"2021-10-11T12:33:26Z","due_on":null,"closed_at":"2021-10-11T12:33:26Z"},"comments":3,"created_at":"2021-08-12T02:20:28Z","updated_at":"2021-10-11T01:56:46Z","closed_at":"2021-08-15T22:28:44Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Checking a file with a syntax error on Python 3.10rc1 causes flake8 to crash with an AttributeError:\r\n\r\n```\r\n$ cat > foo.py\r\nbad python:\r\n^D\r\npmxbot main $ python3.10 -m pip-run flake8 -- -m flake8 foo.py\r\nCollecting flake8\r\n  Using cached flake8-3.9.2-py2.py3-none-any.whl (73 kB)\r\nCollecting pycodestyle<2.8.0,>=2.7.0\r\n  Using cached pycodestyle-2.7.0-py2.py3-none-any.whl (41 kB)\r\nCollecting mccabe<0.7.0,>=0.6.0\r\n  Using cached mccabe-0.6.1-py2.py3-none-any.whl (8.6 kB)\r\nCollecting pyflakes<2.4.0,>=2.3.0\r\n  Using cached pyflakes-2.3.1-py2.py3-none-any.whl (68 kB)\r\nInstalling collected packages: pyflakes, pycodestyle, mccabe, flake8\r\nSuccessfully installed flake8-3.9.2 mccabe-0.6.1 pycodestyle-2.7.0 pyflakes-2.3.1\r\nTraceback (most recent call last):\r\n  File \"/Users/jaraco/.local/pipx/venvs/flake8/lib/python3.10/site-packages/flake8/checker.py\", line 478, in run_ast_checks\r\n    ast = self.processor.build_ast()\r\n  File \"/Users/jaraco/.local/pipx/venvs/flake8/lib/python3.10/site-packages/flake8/processor.py\", line 225, in build_ast\r\n    return ast.parse(\"\".join(self.lines))\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/ast.py\", line 50, in parse\r\n    return compile(source, filename, mode, flags,\r\n  File \"<unknown>\", line 1\r\n    bad python:\r\n    ^^^^^^^^^^\r\nSyntaxError: invalid syntax. Perhaps you forgot a comma?\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/Users/jaraco/.local/bin/flake8\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/Users/jaraco/.local/pipx/venvs/flake8/lib/python3.10/site-packages/flake8/main/cli.py\", line 22, in main\r\n    app.run(argv)\r\n  File \"/Users/jaraco/.local/pipx/venvs/flake8/lib/python3.10/site-packages/flake8/main/application.py\", line 363, in run\r\n    self._run(argv)\r\n  File \"/Users/jaraco/.local/pipx/venvs/flake8/lib/python3.10/site-packages/flake8/main/application.py\", line 351, in _run\r\n    self.run_checks()\r\n  File \"/Users/jaraco/.local/pipx/venvs/flake8/lib/python3.10/site-packages/flake8/main/application.py\", line 264, in run_checks\r\n    self.file_checker_manager.run()\r\n  File \"/Users/jaraco/.local/pipx/venvs/flake8/lib/python3.10/site-packages/flake8/checker.py\", line 323, in run\r\n    self.run_serial()\r\n  File \"/Users/jaraco/.local/pipx/venvs/flake8/lib/python3.10/site-packages/flake8/checker.py\", line 307, in run_serial\r\n    checker.run_checks()\r\n  File \"/Users/jaraco/.local/pipx/venvs/flake8/lib/python3.10/site-packages/flake8/checker.py\", line 589, in run_checks\r\n    self.run_ast_checks()\r\n  File \"/Users/jaraco/.local/pipx/venvs/flake8/lib/python3.10/site-packages/flake8/checker.py\", line 480, in run_ast_checks\r\n    row, column = self._extract_syntax_information(e)\r\n  File \"/Users/jaraco/.local/pipx/venvs/flake8/lib/python3.10/site-packages/flake8/checker.py\", line 465, in _extract_syntax_information\r\n    lines = physical_line.rstrip(\"\\n\").split(\"\\n\")\r\nAttributeError: 'int' object has no attribute 'rstrip'\r\n```\r\n\r\nChecking the same file on Python 3.9 passes just fine:\r\n\r\n```\r\npmxbot main $ python3.9 -m pip-run -q flake8 -- -m flake8 foo.py\r\nWARNING: You are using pip version 21.2.2; however, version 21.2.3 is available.\r\nYou should consider upgrading via the '/Library/Frameworks/Python.framework/Versions/3.9/bin/python3.9 -m pip install --upgrade pip' command.\r\nfoo.py:1:5: E999 SyntaxError: invalid syntax\r\n```","closed_by":{"login":"asottile","id":1810591,"node_id":"MDQ6VXNlcjE4MTA1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1810591?v=4","gravatar_id":"","url":"https://api.github.com/users/asottile","html_url":"https://github.com/asottile","followers_url":"https://api.github.com/users/asottile/followers","following_url":"https://api.github.com/users/asottile/following{/other_user}","gists_url":"https://api.github.com/users/asottile/gists{/gist_id}","starred_url":"https://api.github.com/users/asottile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asottile/subscriptions","organizations_url":"https://api.github.com/users/asottile/orgs","repos_url":"https://api.github.com/users/asottile/repos","events_url":"https://api.github.com/users/asottile/events{/privacy}","received_events_url":"https://api.github.com/users/asottile/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/PyCQA/flake8/issues/1372/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PyCQA/flake8/issues/1372/timeline","performed_via_github_app":null,"state_reason":"completed"}