{"url":"https://api.github.com/repos/PyCQA/flake8/issues/52","repository_url":"https://api.github.com/repos/PyCQA/flake8","labels_url":"https://api.github.com/repos/PyCQA/flake8/issues/52/labels{/name}","comments_url":"https://api.github.com/repos/PyCQA/flake8/issues/52/comments","events_url":"https://api.github.com/repos/PyCQA/flake8/issues/52/events","html_url":"https://github.com/PyCQA/flake8/issues/52","id":849553536,"node_id":"MDU6SXNzdWU4NDk1NTM1MzY=","number":52,"title":"flake8 >= 2.2.0 fails with pep8 1.5.7 due to pkg_resources.VersionConflict with mysterious empty list","user":{"login":"asottile","id":1810591,"node_id":"MDQ6VXNlcjE4MTA1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1810591?v=4","gravatar_id":"","url":"https://api.github.com/users/asottile","html_url":"https://github.com/asottile","followers_url":"https://api.github.com/users/asottile/followers","following_url":"https://api.github.com/users/asottile/following{/other_user}","gists_url":"https://api.github.com/users/asottile/gists{/gist_id}","starred_url":"https://api.github.com/users/asottile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asottile/subscriptions","organizations_url":"https://api.github.com/users/asottile/orgs","repos_url":"https://api.github.com/users/asottile/repos","events_url":"https://api.github.com/users/asottile/events{/privacy}","received_events_url":"https://api.github.com/users/asottile/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2021-04-03T01:45:21Z","updated_at":"2021-04-03T01:45:37Z","closed_at":"2021-04-03T01:45:37Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"In GitLab by @dolphm on Oct 21, 2014, 06:09\n\nI'm hoping this is a bug in setuptools or something, but I'm stumped. I've nuked my Python install on OS X (using homebrew), re-installed pip, setuptools, flake8, and pep8 from scratch (using brew-installed pip), and this is easily reproduced. It's been ongoing for over a week, perhaps since the release of https://pypi.python.org/pypi/setuptools/6.1 which has a related fix https://bitbucket.org/pypa/setuptools/issue/268 -- but reverting to setuptools 6.0.2 does not resolve the issue (also tried a much older setuptools==5.8 without success).\r\n\r\nTo reproduce (on my system, anyway):\r\n\r\n    $ pip install --upgrade setuptools flake8\r\n    Requirement already up-to-date: setuptools in /usr/local/lib/python2.7/site-packages\r\n    Downloading/unpacking flake8 from https://pypi.python.org/packages/source/f/flake8/flake8-2.2.5.tar.gz#md5=6dea927949b94c9d9495ab24bcdf9cf0\r\n    Using download cache from /Users/dolph/.pip/cache/https%3A%2F%2Fpypi.python.org%2Fpackages%2Fsource%2Ff%2Fflake8%2Fflake8-2.2.5.tar.gz\r\n    Running setup.py (path:/private/var/folders/n5/s3phyknn2p18ls0ml6s4wm640000gn/T/pip_build_dolph/flake8/setup.py) egg_info for package flake8\r\n        \r\n    Requirement already up-to-date: pyflakes>=0.8.1 in /usr/local/lib/python2.7/site-packages (from flake8)\r\n    Downloading/unpacking pep8>=1.5.7 (from flake8)\r\n    Using download cache from /Users/dolph/.pip/cache/https%3A%2F%2Fpypi.python.org%2Fpackages%2F3.3%2Fp%2Fpep8%2Fpep8-1.5.7-py2.py3-none-any.whl\r\n    Requirement already up-to-date: mccabe>=0.2.1 in /usr/local/lib/python2.7/site-packages (from flake8)\r\n    Installing collected packages: flake8, pep8\r\n    Found existing installation: flake8 2.1.0\r\n        Uninstalling flake8:\r\n        Successfully uninstalled flake8\r\n    Running setup.py install for flake8\r\n        \r\n        Installing flake8 script to /usr/local/bin\r\n    Found existing installation: pep8 1.5.6\r\n        Uninstalling pep8:\r\n        Successfully uninstalled pep8\r\n    Successfully installed flake8 pep8\r\n    Cleaning up...\r\n\r\nAnd the subsequent error:\r\n\r\n    $ flake8 --version\r\n    Traceback (most recent call last):\r\n    File \"/usr/local/bin/flake8\", line 9, in <module>\r\n        load_entry_point('flake8==2.2.5', 'console_scripts', 'flake8')()\r\n    File \"/usr/local/lib/python2.7/site-packages/flake8/main.py\", line 24, in main\r\n        flake8_style = get_style_guide(parse_argv=True, config_file=DEFAULT_CONFIG)\r\n    File \"/usr/local/lib/python2.7/site-packages/flake8/engine.py\", line 102, in get_style_guide\r\n        kwargs['parser'], options_hooks = get_parser()\r\n    File \"/usr/local/lib/python2.7/site-packages/flake8/engine.py\", line 55, in get_parser\r\n        (extensions, parser_hooks, options_hooks) = _register_extensions()\r\n    File \"/usr/local/lib/python2.7/site-packages/flake8/engine.py\", line 28, in _register_extensions\r\n        checker = entry.load()\r\n    File \"/usr/local/lib/python2.7/site-packages/pkg_resources.py\", line 2182, in load\r\n        self.require(env, installer)\r\n    File \"/usr/local/lib/python2.7/site-packages/pkg_resources.py\", line 2196, in require\r\n        items = working_set.resolve(reqs, env, installer)\r\n    File \"/usr/local/lib/python2.7/site-packages/pkg_resources.py\", line 632, in resolve\r\n        raise VersionConflict(tmpl % args)\r\n    pkg_resources.VersionConflict: pep8 1.5.7 is installed but pep8==1.5.6 is required by []\r\n\r\n(pep8==1.5.6 is required by WHAT?!)\r\n\r\nThe only workaround I can find is installing flake8==2.1.0 and pep8==1.5.6 (shown below):\r\n\r\n    $ pip install --upgrade setuptools \"flake8==2.1.0\" \"pep8==1.5.6\"\r\n    Downloading/unpacking setuptools from https://pypi.python.org/packages/3.4/s/setuptools/setuptools-7.0-py2.py3-none-any.whl#md5=918e7e5ea108507e1ffbbdfccc3496b1\r\n    Using download cache from /Users/dolph/.pip/cache/https%3A%2F%2Fpypi.python.org%2Fpackages%2F3.4%2Fs%2Fsetuptools%2Fsetuptools-7.0-py2.py3-none-any.whl\r\n    Downloading/unpacking flake8==2.1.0\r\n    Using download cache from /Users/dolph/.pip/cache/https%3A%2F%2Fpypi.python.org%2Fpackages%2Fsource%2Ff%2Fflake8%2Fflake8-2.1.0.tar.gz\r\n    Running setup.py (path:/private/var/folders/n5/s3phyknn2p18ls0ml6s4wm640000gn/T/pip_build_dolph/flake8/setup.py) egg_info for package flake8\r\n\r\n    Downloading/unpacking pep8==1.5.6\r\n    Using download cache from /Users/dolph/.pip/cache/https%3A%2F%2Fpypi.python.org%2Fpackages%2F3.3%2Fp%2Fpep8%2Fpep8-1.5.6-py2.py3-none-any.whl\r\n    Requirement already up-to-date: pyflakes>=0.7.3 in /usr/local/lib/python2.7/site-packages (from flake8==2.1.0)\r\n    Requirement already up-to-date: mccabe>=0.2.1 in /usr/local/lib/python2.7/site-packages (from flake8==2.1.0)\r\n    Installing collected packages: setuptools, flake8, pep8\r\n    Found existing installation: setuptools 5.8\r\n        Uninstalling setuptools:\r\n        Successfully uninstalled setuptools\r\n    Found existing installation: flake8 2.2.5\r\n        Uninstalling flake8:\r\n        Successfully uninstalled flake8\r\n    Running setup.py install for flake8\r\n\r\n        Installing flake8 script to /usr/local/bin\r\n    Found existing installation: pep8 1.5.7\r\n        Uninstalling pep8:\r\n        Successfully uninstalled pep8\r\n    Successfully installed setuptools flake8 pep8\r\n    Cleaning up...\r\n\r\nThis combo works:\r\n\r\n    $ flake8 --version\r\n    2.1.0 (pep8: 1.5.6, pyflakes: 0.8.1, GitCheckCommitTitleBug: 0.0.1, GitCheckCommitTitleLength: 0.0.1, GitCheckCommitTitlePeriodEnding: 0.0.1, hacking.core: 0.0.1, ProxyChecker: 0.0.1, mccabe: 0.2.1) CPython 2.7.8 on Darwin\r\n\r\nFor funsies:\r\n\r\n    $ python -c \"import setuptools; print(setuptools.__version__)\"\r\n    7.0","closed_by":{"login":"asottile","id":1810591,"node_id":"MDQ6VXNlcjE4MTA1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1810591?v=4","gravatar_id":"","url":"https://api.github.com/users/asottile","html_url":"https://github.com/asottile","followers_url":"https://api.github.com/users/asottile/followers","following_url":"https://api.github.com/users/asottile/following{/other_user}","gists_url":"https://api.github.com/users/asottile/gists{/gist_id}","starred_url":"https://api.github.com/users/asottile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asottile/subscriptions","organizations_url":"https://api.github.com/users/asottile/orgs","repos_url":"https://api.github.com/users/asottile/repos","events_url":"https://api.github.com/users/asottile/events{/privacy}","received_events_url":"https://api.github.com/users/asottile/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/PyCQA/flake8/issues/52/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/PyCQA/flake8/issues/52/timeline","performed_via_github_app":null,"state_reason":"completed"}