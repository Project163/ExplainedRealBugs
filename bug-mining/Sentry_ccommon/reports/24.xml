<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:34:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SENTRY-2146] Add better error handling to ResourceAuthorizationProvider and improve logging in related classes</title>
                <link>https://issues.apache.org/jira/browse/SENTRY-2146</link>
                <project id="12314720" key="SENTRY">Sentry (Retired)</project>
                    <description>&lt;p&gt;Targeted changes are: &lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Separate input and output privileges hierarchy list  from authorization checks&lt;/li&gt;
	&lt;li&gt;Log all relevant outputs for pre and post analyze at DEBUG level&lt;/li&gt;
	&lt;li&gt;KeyValue constructor threw exceptions earlier without any information. Add more information about attributes to it&lt;/li&gt;
	&lt;li&gt;Finally in ResourceAuthorizationProvider which deals with doing the authorization comparison, we never gracefully handled exceptions and the hive command would end abruptly. Handling this exception and throwing it back to the client will prompt a better log message on the client side&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment></environment>
        <key id="13141518">SENTRY-2146</key>
            <summary>Add better error handling to ResourceAuthorizationProvider and improve logging in related classes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="arjunmishra13">Arjun Mishra</assignee>
                                    <reporter username="arjunmishra13">Arjun Mishra</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Feb 2018 12:51:21 +0000</created>
                <updated>Thu, 2 Jan 2020 17:07:46 +0000</updated>
                            <resolved>Sun, 10 Feb 2019 15:11:44 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.2.0</fixVersion>
                                    <component>Sentry</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16382446" author="hadoopqa" created="Thu, 1 Mar 2018 18:49:26 +0000"  >&lt;p&gt;Here are the results of testing the latest attachment&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12912628/SENTRY-2146.02.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12912628/SENTRY-2146.02.patch&lt;/a&gt; against master.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall:&lt;/font&gt; -1 due to 2 errors&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; mvn test exited 1&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; Failed: org.apache.sentry.provider.db.generic.service.persistent.TestPrivilegeOperatePersistence&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SENTRY-Build/3679/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SENTRY-Build/3679/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16383827" author="linaataustin" created="Fri, 2 Mar 2018 17:15:46 +0000"  >&lt;p&gt;attach patch&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SENTRY-2146&quot; title=&quot;Add better error handling to ResourceAuthorizationProvider and improve logging in related classes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SENTRY-2146&quot;&gt;&lt;del&gt;SENTRY-2146&lt;/del&gt;&lt;/a&gt;.002.patch to trigger the test run.&lt;/p&gt;</comment>
                            <comment id="16384019" author="hadoopqa" created="Fri, 2 Mar 2018 19:19:09 +0000"  >&lt;p&gt;Here are the results of testing the latest attachment&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12912798/SENTRY-2146.002.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12912798/SENTRY-2146.002.patch&lt;/a&gt; against master.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall:&lt;/font&gt; +1 all checks pass&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; all tests passed&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SENTRY-Build/3680/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SENTRY-Build/3680/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16401947" author="hadoopqa" created="Fri, 16 Mar 2018 14:04:53 +0000"  >&lt;p&gt;Here are the results of testing the latest attachment&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12914849/SENTRY-2146.03.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12914849/SENTRY-2146.03.patch&lt;/a&gt; against master.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall:&lt;/font&gt; +1 all checks pass&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; all tests passed&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SENTRY-Build/3702/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SENTRY-Build/3702/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16503755" author="kkalyan" created="Wed, 6 Jun 2018 19:05:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arjunmishra13&quot; class=&quot;user-hover&quot; rel=&quot;arjunmishra13&quot;&gt;arjunmishra13&lt;/a&gt; I understand that we are trying to improve logging but adding changes to specific class might not cover things at breadth.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Instead, it would be better to scenario&apos;s. Here are some of them&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Granting Privilege&lt;/li&gt;
	&lt;li&gt;Revoke Privilege&lt;/li&gt;
	&lt;li&gt;Authorization Request&lt;/li&gt;
	&lt;li&gt;HMS Fullsnapshot&lt;/li&gt;
	&lt;li&gt;HDFS Full Update&lt;/li&gt;
	&lt;li&gt;HMS notification fetch/processing&lt;/li&gt;
	&lt;li&gt;Delta Updates to NN plug-in&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16503957" author="hadoopqa" created="Wed, 6 Jun 2018 21:52:18 +0000"  >&lt;p&gt;Here are the results of testing the latest attachment&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12914849/SENTRY-2146.03.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12914849/SENTRY-2146.03.patch&lt;/a&gt; against master.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall:&lt;/font&gt; +1 all checks pass&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; all tests passed&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SENTRY-Build/3864/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SENTRY-Build/3864/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16762343" author="hadoopqa" created="Thu, 7 Feb 2019 04:14:29 +0000"  >&lt;p&gt;Here are the results of testing the latest attachment&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12957839/SENTRY-2146.04.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12957839/SENTRY-2146.04.patch&lt;/a&gt; against master.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall:&lt;/font&gt; +1 all checks pass&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; all tests passed&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SENTRY-Build/4368/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SENTRY-Build/4368/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16763849" author="kkalyan" created="Fri, 8 Feb 2019 19:37:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arjunmishra13&quot; class=&quot;user-hover&quot; rel=&quot;arjunmishra13&quot;&gt;arjunmishra13&lt;/a&gt;Can you explain the cases where this patch would improve the logging?&lt;/p&gt;</comment>
                            <comment id="16763854" author="arjunmishra13" created="Fri, 8 Feb 2019 19:44:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kkalyan&quot; class=&quot;user-hover&quot; rel=&quot;kkalyan&quot;&gt;kkalyan&lt;/a&gt; Its for authorization checks. Better separation for input and output. Better error handling logs. &lt;/p&gt;</comment>
                            <comment id="16763873" author="kkalyan" created="Fri, 8 Feb 2019 20:46:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arjunmishra13&quot; class=&quot;user-hover&quot; rel=&quot;arjunmishra13&quot;&gt;arjunmishra13&lt;/a&gt; here are my comments.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;have the comment simple. You can just call it Operation Scope&lt;/b&gt;&lt;br/&gt;
LOG.debug(&quot;stmtAuthObject.getOperationScope() = &quot; + stmtAuthObject.getOperationScope()); &lt;/p&gt;

&lt;p&gt;LOG.debug(&quot;preAnalyze: For Token Type={}; &quot; + this, ast.getToken().getType()); &lt;br/&gt;
 &lt;b&gt;You can change it to preAnalyze: For OperationL{}, on &quot; + this, ast.getToken().getType())&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;      throw new IllegalArgumentException(&quot;kvList=&quot; + kvList + &quot;, Key cannot be empty&quot;);&lt;br/&gt;
    } else if (value.isEmpty()) &lt;/p&gt;
{
      throw new IllegalArgumentException(&quot;kvList=&quot; + kvList + &quot;, Value cannot be empty&quot;);
    }
&lt;p&gt; &lt;br/&gt;
&lt;b&gt;Print the keyValue which unparsed.&lt;/b&gt;&lt;/p&gt;</comment>
                            <comment id="16763930" author="arjunmishra13" created="Fri, 8 Feb 2019 22:41:05 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kkalyan&quot; class=&quot;user-hover&quot; rel=&quot;kkalyan&quot;&gt;kkalyan&lt;/a&gt;. Just FYI this change was deleted not added&lt;br/&gt;
LOG.debug(&quot;stmtAuthObject.getOperationScope() = &quot; + stmtAuthObject.getOperationScope());&lt;/p&gt;
</comment>
                            <comment id="16764034" author="hadoopqa" created="Sat, 9 Feb 2019 02:19:09 +0000"  >&lt;p&gt;Here are the results of testing the latest attachment&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12958098/SENTRY-2146.05.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12958098/SENTRY-2146.05.patch&lt;/a&gt; against master.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall:&lt;/font&gt; -1 due to 2 errors&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; mvn test exited 1&lt;br/&gt;
&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; Failed: org.apache.sentry.tests.e2e.hdfs.TestHDFSIntegrationWithHA&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SENTRY-Build/4371/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SENTRY-Build/4371/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16764343" author="hadoopqa" created="Sun, 10 Feb 2019 08:42:03 +0000"  >&lt;p&gt;Here are the results of testing the latest attachment&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12958155/SENTRY-2146.005.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12958155/SENTRY-2146.005.patch&lt;/a&gt; against master.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall:&lt;/font&gt; +1 all checks pass&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; all tests passed&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SENTRY-Build/4372/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SENTRY-Build/4372/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12912798" name="SENTRY-2146.002.patch" size="12769" author="linaataustin" created="Fri, 2 Mar 2018 17:15:10 +0000"/>
                            <attachment id="12958155" name="SENTRY-2146.005.patch" size="10752" author="arjunmishra13" created="Sun, 10 Feb 2019 05:13:47 +0000"/>
                            <attachment id="12912589" name="SENTRY-2146.01.patch" size="11887" author="arjunmishra13" created="Thu, 1 Mar 2018 11:36:20 +0000"/>
                            <attachment id="12912628" name="SENTRY-2146.02.patch" size="12541" author="arjunmishra13" created="Thu, 1 Mar 2018 18:19:31 +0000"/>
                            <attachment id="12914849" name="SENTRY-2146.03.patch" size="10397" author="arjunmishra13" created="Fri, 16 Mar 2018 11:01:51 +0000"/>
                            <attachment id="12957839" name="SENTRY-2146.04.patch" size="10539" author="arjunmishra13" created="Wed, 6 Feb 2019 23:05:09 +0000"/>
                            <attachment id="12958098" name="SENTRY-2146.05.patch" size="10752" author="arjunmishra13" created="Fri, 8 Feb 2019 22:49:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 39 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3qp33:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>