<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:53:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DOSGI-254] ServiceInvocationHandler does not handle checked super-interface exceptions correctly</title>
                <link>https://issues.apache.org/jira/browse/DOSGI-254</link>
                <project id="12311031" key="DOSGI">CXF Distributed OSGi (Retired)</project>
                    <description>&lt;p&gt;If a remote service interface is composed of an interface hierarchy, the ServiceInvocationHandler (in org.apache.cxf.dosgi.dsw.handlers package on 1.7.0)  only handles correctly the checked exceptions of the interface the service directly implements/exports (the lowest level interface of the hierarchy). The checked exceptions of the superinterface methods are thrown as generic ServiceExceptions (which are RuntimeExceptions). &lt;/p&gt;

&lt;p&gt;For example below, the IOException thrown by the throwBaseException method gets converted to ServiceException while the URISyntaxException thrown by the throwSubException method remains correctly as URISyntaxException. The service is exported as a TestSubInterface service.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; TestBaseInterface {
        void throwBaseException() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException;
    }
    
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; TestSubInterface &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; TestBaseInterface {
        void throwSubException() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; URISyntaxException;
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;TestClass &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; TestSubInterface {
        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void throwBaseException() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(&lt;span class=&quot;code-quote&quot;&gt;&quot;expected baseinterface exception&quot;&lt;/span&gt;);
        }

        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void throwSubException() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; URISyntaxException {
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URISyntaxException(&lt;span class=&quot;code-quote&quot;&gt;&quot;some input&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;expected subinterface exception&quot;&lt;/span&gt;);
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I have been using DOSGi 1.7.0 but I also checked version 2.0.0 and ServiceInvocationHandler (now in org.apache.cxf.dosgi.common.proxy package) seems the same as in previous releases.&lt;/p&gt;

&lt;p&gt;The problem seems to be in ServiceInvocationHandler in the method&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void introspectType(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;?&amp;gt; iType) {
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Method m : iType.getDeclaredMethods()) {
            &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;?&amp;gt; excType : m.getExceptionTypes()) {
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (Exception.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;isAssignableFrom(excType)) {
                    List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;?&amp;gt;&amp;gt; types = exceptionsMap.get(m);
                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (types == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                        types = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;?&amp;gt;&amp;gt;();
                        exceptionsMap.put(m, types);
                    }
                    types.add(excType);
                }
            }
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;for which the javadocs of  iType.getDeclaredMethods() say &quot;Returns an array of Method objects reflecting all the methods declared by the class or interface represented by this Class object. This includes public, protected, default (package) access, and private methods, &lt;b&gt;but excludes inherited methods&lt;/b&gt;.&quot; &lt;/p&gt;

&lt;p&gt;The introspectType method should be changed so that it also processes at least the public methods of the superinterfaces/classes. This can be achieved e.g. with iType.getMethods().&lt;/p&gt;</description>
                <environment></environment>
        <key id="13036532">DOSGI-254</key>
            <summary>ServiceInvocationHandler does not handle checked super-interface exceptions correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cschneider">Christian Schneider</assignee>
                                    <reporter username="hamapa">Panu H&#228;m&#228;l&#228;inen</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Jan 2017 11:44:05 +0000</created>
                <updated>Tue, 11 Jul 2017 09:32:50 +0000</updated>
                            <resolved>Tue, 11 Jul 2017 09:32:50 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.3.0</fixVersion>
                                    <component>common</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10061"><![CDATA[Novice]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 43 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i38zk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>