diff --git a/src/main/groovy/lang/GroovyClassLoader.java b/src/main/groovy/lang/GroovyClassLoader.java
index 5eeadd8b38..610d4d64eb 100644
--- a/src/main/groovy/lang/GroovyClassLoader.java
+++ b/src/main/groovy/lang/GroovyClassLoader.java
@@ -553,7 +553,8 @@ public class GroovyClassLoader extends URLClassLoader {
 
     private URL getSourceFile(String name) {
         String filename = name.replace('.', '/') + config.getDefaultScriptExtension();
-        return getResource(filename);
+        URL ret = getResource(filename);
+        return ret;
     }
 
     protected boolean isSourceNewer(URL source, Class cls) throws IOException {
@@ -575,7 +576,8 @@ public class GroovyClassLoader extends URLClassLoader {
 
     public void addClasspath(String path) {
         try {
-            URL newURL = new URL("file://"+path);
+            File f = new File(path);
+            URL newURL = f.toURI().toURL();
             URL[] urls = getURLs();
             for (int i=0; i<urls.length; i++) {
                 if (urls[i].equals(newURL)) return;
diff --git a/src/main/org/codehaus/groovy/control/ResolveVisitor.java b/src/main/org/codehaus/groovy/control/ResolveVisitor.java
index 05b290a4ff..a01161e4e3 100644
--- a/src/main/org/codehaus/groovy/control/ResolveVisitor.java
+++ b/src/main/org/codehaus/groovy/control/ResolveVisitor.java
@@ -467,10 +467,16 @@ public class ResolveVisitor extends CodeVisitorSupport implements ExpressionTran
         } catch (ClassNotFoundException cnfe) {
             cachedClasses.put(name,SCRIPT);
             return false;
-        } catch (NoClassDefFoundError ncdfe) {
+        } 
+        //TODO: the case of a NoClassDefFoundError needs a bit more research
+        // a simple recompilation is not possible it seems. The current class
+        // we are searching for is there, so we should mark that somehow. 
+        // Basically the missing class needs to be completly compiled before
+        // we can again search for the current name.
+        /*catch (NoClassDefFoundError ncdfe) {
             cachedClasses.put(name,SCRIPT);
             return false;
-        }
+        }*/
         if (cls==null) return false;
         cachedClasses.put(name,cls);
         setClass(type,cls);
@@ -517,8 +523,9 @@ public class ResolveVisitor extends CodeVisitorSupport implements ExpressionTran
                 }
                 name= ve.getName()+"."+name;
                 break;
-            }
-            // anything other than PropertyExpressions and VariableExpressions will stop resolving
+            } 
+            // anything other than PropertyExpressions, ClassExpression or
+            // VariableExpressions will stop resolving
             else if (!(it instanceof PropertyExpression)) {
                 return null;
             } else {
diff --git a/src/main/org/codehaus/groovy/tools/RootLoader.java b/src/main/org/codehaus/groovy/tools/RootLoader.java
index 03c4358e87..a521935032 100644
--- a/src/main/org/codehaus/groovy/tools/RootLoader.java
+++ b/src/main/org/codehaus/groovy/tools/RootLoader.java
@@ -172,7 +172,7 @@ public class RootLoader extends ClassLoader {
      */
     public URL getResource(String name) {
         URL url = inner.getResource(name);
-        url = super.getResource(name);
+        if (url==null) url = super.getResource(name);
         return url;
     }    
     
