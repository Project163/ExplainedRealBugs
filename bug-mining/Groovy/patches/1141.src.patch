diff --git a/src/main/groovy/lang/GroovyCodeSource.java b/src/main/groovy/lang/GroovyCodeSource.java
index 86e826ebe1..1823401544 100644
--- a/src/main/groovy/lang/GroovyCodeSource.java
+++ b/src/main/groovy/lang/GroovyCodeSource.java
@@ -175,6 +175,16 @@ public class GroovyCodeSource {
 		}
 		this.name = url.toExternalForm();
 		this.codeSource = new CodeSource(url, (java.security.cert.Certificate[])null);
+		try {
+			String contentEncoding = url.openConnection().getContentEncoding();
+			if(contentEncoding != null) {
+				this.scriptText = DefaultGroovyMethods.getText(url, contentEncoding);
+			} else {
+				this.scriptText = DefaultGroovyMethods.getText(url); // falls-back on default encoding
+			}
+		} catch (IOException e) {
+			throw new RuntimeException("Impossible to read the text content from " + name, e);
+		}
 	}
 	
 	CodeSource getCodeSource() {
diff --git a/src/test/groovy/bugs/GROOVY3934Helper.groovy b/src/test/groovy/bugs/GROOVY3934Helper.groovy
new file mode 100644
index 0000000000..ff04e0d8cf
--- /dev/null
+++ b/src/test/groovy/bugs/GROOVY3934Helper.groovy
@@ -0,0 +1 @@
+return 'GROOVY3934Helper script called'
\ No newline at end of file
diff --git a/src/test/groovy/lang/GroovyShellTest.java b/src/test/groovy/lang/GroovyShellTest.java
index 5c1d70edcb..b6f2727fae 100644
--- a/src/test/groovy/lang/GroovyShellTest.java
+++ b/src/test/groovy/lang/GroovyShellTest.java
@@ -41,6 +41,8 @@ import junit.textui.TestRunner;
 import org.codehaus.groovy.control.CompilerConfiguration;
 
 import java.io.ByteArrayInputStream;
+import java.io.File;
+import java.net.URL;
 import java.util.HashMap;
 import java.util.Map;
 
@@ -119,4 +121,18 @@ public class GroovyShellTest extends GroovyTestCase {
         shell.evaluate(script);
      
     }
+
+    public void testWithGCSWithURL() throws Exception {
+    	String scriptFileName = "src/test/groovy/bugs/GROOVY3934Helper.groovy";
+    	File helperScript = new File(scriptFileName);
+    	if(!helperScript.exists()) {
+    		fail("File " + scriptFileName + " does not exist");
+    	} else {
+        	URL url = helperScript.toURL();
+        	GroovyCodeSource gcs = new GroovyCodeSource(url);
+        	GroovyShell shell = new GroovyShell();
+            Object result = shell.evaluate(gcs);
+            assertEquals("GROOVY3934Helper script called", result);
+    	}
+    }
 }
