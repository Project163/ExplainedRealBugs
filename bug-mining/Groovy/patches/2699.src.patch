diff --git a/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingSupport.java b/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingSupport.java
index e3de4e5c31..75b52067ad 100644
--- a/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingSupport.java
+++ b/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingSupport.java
@@ -1832,9 +1832,9 @@ public abstract class StaticTypeCheckingSupport {
                     scanner.scanClasspathModules();
                     cachedMethods = getDGMMethods(modules);
                     origin = new WeakReference<ClassLoader>(loader);
+                    lock.readLock().lock();
                 } finally {
                     lock.writeLock().unlock();
-                    lock.readLock().lock();
                 }
             }
             try {
