diff --git a/src/main/java/org/codehaus/groovy/classgen/FinalVariableAnalyzer.java b/src/main/java/org/codehaus/groovy/classgen/FinalVariableAnalyzer.java
index 141daa6bde..924a76e776 100644
--- a/src/main/java/org/codehaus/groovy/classgen/FinalVariableAnalyzer.java
+++ b/src/main/java/org/codehaus/groovy/classgen/FinalVariableAnalyzer.java
@@ -43,6 +43,7 @@ import java.lang.reflect.Modifier;
 import java.util.Deque;
 import java.util.HashMap;
 import java.util.HashSet;
+import java.util.Iterator;
 import java.util.LinkedList;
 import java.util.Map;
 import java.util.Set;
@@ -189,10 +190,25 @@ public class FinalVariableAnalyzer extends ClassCodeVisitorSupport {
     public void visitClosureExpression(final ClosureExpression expression) {
         boolean old = inAssignment;
         inAssignment = false;
+        Map<Variable, VariableState> origState = new StateMap();
+        origState.putAll(getState());
         super.visitClosureExpression(expression);
+        cleanLocalVars(origState, getState());
         inAssignment = old;
     }
 
+    private void cleanLocalVars(Map<Variable, VariableState> origState, Map<Variable, VariableState> state) {
+        // clean local vars added during visit of closure
+        for (Iterator<Map.Entry<Variable, VariableState>> iter = state.entrySet().iterator(); iter.hasNext(); ) {
+            Map.Entry<Variable, VariableState> next = iter.next();
+            Variable key = next.getKey();
+            if (key instanceof VariableExpression && ((VariableExpression)key).getAccessedVariable() == key && !origState.containsKey(key)) {
+                // remove local variable
+                iter.remove();
+            }
+        }
+    }
+
     @Override
     public void visitPrefixExpression(final PrefixExpression expression) {
         inAssignment = expression.getExpression() instanceof VariableExpression;
diff --git a/src/test/org/codehaus/groovy/classgen/FinalVariableAnalyzerTest.groovy b/src/test/org/codehaus/groovy/classgen/FinalVariableAnalyzerTest.groovy
index c5a8cd7f7d..44a3a2f20d 100644
--- a/src/test/org/codehaus/groovy/classgen/FinalVariableAnalyzerTest.groovy
+++ b/src/test/org/codehaus/groovy/classgen/FinalVariableAnalyzerTest.groovy
@@ -111,12 +111,6 @@ class FinalVariableAnalyzerTest extends GroovyTestCase {
         '''
     }
 
-    void testVariableDeclaredInsideClosureShouldBeFinal() {
-        assertFinals x: true, '''
-            def cl = { def x = 1 }
-        '''
-    }
-
     void testParameterShouldBeConsideredFinal() {
         assertFinals x: true, '''
             def foo(int x) { x+1 }
@@ -452,6 +446,20 @@ class FinalVariableAnalyzerTest extends GroovyTestCase {
         ''')
     }
 
+    // GROOVY-8093
+    void testLocalVarsInClosureOnlyCheckedWithinClosure() {
+        assertScript '''
+            class Foo {
+                public Closure bar = {
+                    final RANKINGS = ["year": 0, "month": 10]
+                    RANKINGS.size()
+                }
+            }
+
+            assert new Foo().bar() == 2
+        '''
+    }
+
     @CompileStatic
     private static class AssertionFinalVariableAnalyzer extends FinalVariableAnalyzer {
 
