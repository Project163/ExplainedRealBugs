diff --git a/src/main/java/groovy/grape/GrabAnnotationTransformation.java b/src/main/java/groovy/grape/GrabAnnotationTransformation.java
index b7d9e0a9f7..fb318126e2 100644
--- a/src/main/java/groovy/grape/GrabAnnotationTransformation.java
+++ b/src/main/java/groovy/grape/GrabAnnotationTransformation.java
@@ -210,7 +210,12 @@ public class GrabAnnotationTransformation extends ClassCodeVisitorSupport implem
             grapesAnnotations       = new ArrayList<>();
             grabResolverAnnotations = new ArrayList<>();
 
-            visitClass(classNode);
+            if (classNode.getOuterClass() == null) {
+                visitClass(classNode);
+            } else { // GROOVY-11409
+                visitAnnotations(classNode);
+                classNode.visitContents(this);
+            }
 
             List<Statement> grabResolverInitializers = new ArrayList<>();
 
