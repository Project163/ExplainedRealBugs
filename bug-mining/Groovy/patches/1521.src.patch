diff --git a/src/main/org/codehaus/groovy/vmplugin/v5/Java5.java b/src/main/org/codehaus/groovy/vmplugin/v5/Java5.java
index 735fca1493..1fccbfc51e 100644
--- a/src/main/org/codehaus/groovy/vmplugin/v5/Java5.java
+++ b/src/main/org/codehaus/groovy/vmplugin/v5/Java5.java
@@ -322,7 +322,9 @@ public class Java5 implements VMPlugin {
         Field[] fields = clazz.getDeclaredFields();
         for (Field f : fields) {
             ClassNode ret = makeClassNode(compileUnit, f.getGenericType(), f.getType());
-            classNode.addField(f.getName(), f.getModifiers(), ret, null);
+            FieldNode fn = new FieldNode(f.getName(), f.getModifiers(), ret, classNode, null);
+            setAnnotationMetaData(f.getAnnotations(), fn);
+            classNode.addField(fn);
         }
         Method[] methods = clazz.getDeclaredMethods();
         for (Method m : methods) {
diff --git a/src/test/gls/annotations/AnnotationTest.groovy b/src/test/gls/annotations/AnnotationTest.groovy
index e73b8ba056..ebbff70f03 100644
--- a/src/test/gls/annotations/AnnotationTest.groovy
+++ b/src/test/gls/annotations/AnnotationTest.groovy
@@ -1,5 +1,5 @@
 /*
- * Copyright 2003-2009 the original author or authors.
+ * Copyright 2003-2011 the original author or authors.
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
@@ -22,6 +22,7 @@ import gls.CompilableTestSupport
  *
  * @author Jochen Theodorou
  * @author Guillaume Laforge
+ * @author Paul King
  */
 class AnnotationTest extends CompilableTestSupport {
 
@@ -79,444 +80,474 @@ class AnnotationTest extends CompilableTestSupport {
         """
     }
 
-  void testPrimitiveDefault() {
-    // NOTE: for int anything else than a plain number will fail.
-    // For example 1l will fail too, even if it could be converted.
-    // If this should be changed, then further discussion is needed.
-    shouldNotCompile """
-@interface X {
-  int x() default "1" // must be integer
-}
-    """
+    void testPrimitiveDefault() {
+        // NOTE: for int anything else than a plain number will fail.
+        // For example 1l will fail too, even if it could be converted.
+        // If this should be changed, then further discussion is needed.
+        shouldNotCompile """
+            @interface X {
+                int x() default "1" // must be integer
+            }
+        """
 
-    shouldCompile """
-@interface X {
-  int x() default 1
-}
-    """
-  }
-
-  void testConstant() {
-    assertScript """
-    class Baz {
-        // static final int OTHER = 5
-        // below we would like to but can't use:
-        // constant field expressions, e.g. OTHER, or
-        // constant property expressions, e.g. Short.MAX_VALUE
-        @Foo(5) void run() {
-            assert Baz.class.getMethod('run').annotations[0].value() == 5
-        }
+        shouldCompile """
+            @interface X {
+                int x() default 1
+            }
+        """
     }
 
-    import java.lang.annotation.*
-    @Retention(RetentionPolicy.RUNTIME)
-    @Target(ElementType.METHOD)
-    @interface Foo {
-        int value() default -3
+    void testConstant() {
+        assertScript """
+            class Baz {
+                // static final int OTHER = 5
+                // below we would like to but can't use:
+                // constant field expressions, e.g. OTHER, or
+                // constant property expressions, e.g. Short.MAX_VALUE
+                @Foo(5) void run() {
+                    assert Baz.class.getMethod('run').annotations[0].value() == 5
+                }
+            }
+
+            import java.lang.annotation.*
+            @Retention(RetentionPolicy.RUNTIME)
+            @Target(ElementType.METHOD)
+            @interface Foo {
+                int value() default -3
+            }
+
+            new Baz().run()
+        """
     }
 
-    new Baz().run()
-    """
-  }
+    void testArrayDefault() {
+        shouldNotCompile """
+            @interface X {
+                String[] x() default "1" // must be list
+            }
+        """
 
-  void testArrayDefault() {
-    shouldNotCompile """
-@interface X {
-   String[] x() default "1" // must be list
-}
-    """
+        shouldNotCompile """
+            @interface X {
+                String[] x() default ["1",2] // list must contain elements of correct type
+            }
+        """
 
-    shouldNotCompile """
-@interface X {
-   String[] x() default ["1",2] // list must contain elements of correct type
-}
-    """
+        shouldCompile """
+            @interface X {
+                String[] x() default ["a","b"]
+            }
+        """
+    }
 
-    shouldCompile """
-@interface X {
-   String[] x() default ["a","b"]
-}
-    """
-  }
+    void testClassDefault() {
+        shouldNotCompile """
+            @interface X {
+                Class x() default "1" // must be list
+            }
+        """
 
-  void testClassDefault() {
-    shouldNotCompile """
-@interface X {
-   Class x() default "1" // must be list
-}
-    """
+        shouldCompile """
+            @interface X {
+                Class x() default Number.class // class with .class
+            }
+        """
 
-    shouldCompile """
-@interface X {
-   Class x() default Number.class // class with .class
-}
-    """
+        shouldCompile """
+            @interface X {
+                Class x() default Number
+            }
+        """
+    }
 
-    shouldCompile """
-@interface X {
-   Class x() default Number
-}
-    """
-  }
+    void testEnumDefault() {
+        shouldNotCompile """
+            @interface X {
+                ElementType x() default "1" // must be Enum
+            }
+        """
 
-  void testEnumDefault() {
-    shouldNotCompile """
-@interface X {
-   ElementType x() default "1" // must be Enum
-}
-    """
+        shouldNotCompile """
+            @interface X {
+                ElementType x() default Target.TYPE // must be Enum of correct type
+            }
+        """
 
-    shouldNotCompile """
-@interface X {
-   ElementType x() default Target.TYPE // must be Enum of correct type
-}
-    """
+        shouldCompile """
+            import java.lang.annotation.*
 
-    shouldCompile """
-import java.lang.annotation.*
+            @interface X {
+                ElementType x() default ElementType.METHOD
+            }
+        """
+    }
 
-@interface X {
-   ElementType x() default ElementType.METHOD
-}
-    """
-  }
+    void testAnnotationDefault() {
+        shouldNotCompile """
+            import java.lang.annotation.*
+            @interface X {
+                Target x() default "1" // must be Annotation
+            }
+        """
 
-  void testAnnotationDefault() {
-    shouldNotCompile """
-import java.lang.annotation.*
-@interface X {
-   Target x() default "1" // must be Annotation
-}
-    """
+        shouldNotCompile """
+            import java.lang.annotation.*
 
-    shouldNotCompile """
-import java.lang.annotation.*
+            @interface X {
+                Target x() default @Retentention // must be correct type
+            }
+        """
 
-@interface X {
-   Target x() default @Retentention // must be correct type
-}
-    """
+        shouldCompile """
+            import java.lang.annotation.*
+            @interface X {
+                Target x() default @Target([ElementType.TYPE])
+            }
+        """
+    }
 
-    shouldCompile """
-import java.lang.annotation.*
-@interface X {
-   Target x() default @Target([ElementType.TYPE])
-}
-    """
-  }
+    void testSelfReference() {
+        shouldNotCompile """
+            @interface X {
+                X x() default @X // self reference must not work
+            }
+        """
+    }
 
-  void testSelfReference() {
-    shouldNotCompile """
-@interface X {
-   X x() default @X // self reference must not work
-}
-    """
-  }
+    void testCyclicReference() {
+        shouldNotCompile """
+            @interface X {
+                Y x() default @Y
+            }
 
-  void testCyclicReference() {
-    shouldNotCompile """
-@interface X {
-   Y x() default @Y
-}
+            @interface Y {
+                X x() default @X
+            }
+        """
+    }
 
-@interface Y {
-   X x() default @X
-}
-    """
-  }
+    void testParameter() {
+        shouldNotCompile """
+            @interface X {
+                String x(int x) default "" // annotation members can't have parameters
+            }
+        """
+    }
 
-  void testParameter() {
-    shouldNotCompile """
-@interface X {
-   String x(int x) default "" // annotation members can't have parameters
-}
-    """
-  }
+    void testThrowsClause() {
+        shouldNotCompile """
+            @interface X {
+                String x() throws IOException // annotation members can't have exceptions
+            }
+        """
+    }
 
-  void testThrowsClause() {
-    shouldNotCompile """
-@interface X {
-   String x() throws IOException // annotation members can't have exceptions
-}
-    """
-  }
+    void testExtends() {
+        shouldNotCompile """
+            @interface X extends Serializable{}
+            // annotation members can't extend
+        """
+    }
 
-  void testExtends() {
-    shouldNotCompile """
-@interface X extends Serializable{}
-// annotation members can't extend
-    """
-  }
+    void testInvalidMemberType() {
+        shouldNotCompile """
+            @interface X {
+                Object x() // Object is no type for constants
+            }
+        """
+    }
 
-  void testInvalidMemberType() {
-    shouldNotCompile """
-@interface X {
-   Object x() // Object is no type for constants
-}
-    """
-  }
+    void testNull() {
+        shouldNotCompile """
+            @interface X {
+                String x() default null // null is no constant for annotations
+            }
+        """
+    }
 
-  void testNull() {
-    shouldNotCompile """
-@interface X {
-   String x() default null // null is no constant for annotations
-}
-    """
-  }
-
-  void testUsage() {
-    assertScript """
-import java.lang.annotation.*
-
-// a random annnotation type
-@Retention(RetentionPolicy.RUNTIME)
-@interface MyAnnotation {
-  String stringValue()
-  int intValue()
-  int defaultInt() default 1
-  String defaultString() default ""
-  Class defaultClass() default Integer.class
-  ElementType defaultEnum() default ElementType.TYPE
-  Target defaultAnnotation() default @Target([ElementType.TYPE])
-}
+    void testUsage() {
+        assertScript """
+            import java.lang.annotation.*
 
+            // a random annnotation type
+            @Retention(RetentionPolicy.RUNTIME)
+            @interface MyAnnotation {
+                String stringValue()
+                int intValue()
+                int defaultInt() default 1
+                String defaultString() default ""
+                Class defaultClass() default Integer.class
+                ElementType defaultEnum() default ElementType.TYPE
+                Target defaultAnnotation() default @Target([ElementType.TYPE])
+            }
 
-@MyAnnotation(stringValue = "for class", intValue = 100)
-class Foo {}
 
-Annotation[] annotations = Foo.class.annotations
-assert annotations.size() == 1
-MyAnnotation my = annotations[0]
-assert my.stringValue() == "for class"
-assert my.intValue() == 100
-assert my.defaultInt() == 1
-assert my.defaultString() == ""
-assert my.defaultClass() == Integer
+            @MyAnnotation(stringValue = "for class", intValue = 100)
+            class Foo {}
 
-assert my.defaultEnum() == ElementType.TYPE
-assert my.defaultAnnotation() instanceof Target
-    """
-  }
+            Annotation[] annotations = Foo.class.annotations
+            assert annotations.size() == 1
+            MyAnnotation my = annotations[0]
+            assert my.stringValue() == "for class"
+            assert my.intValue() == 100
+            assert my.defaultInt() == 1
+            assert my.defaultString() == ""
+            assert my.defaultClass() == Integer
 
-  void testJavaAnnotationUsageWithGroovyKeyword() {
-    assertScript """
-package gls.annotations
-import java.lang.annotation.*
-@JavaAnnotation(in = 3)
-class Foo {}
-
-Annotation[] annotations = Foo.class.annotations
-assert annotations.size() == 1
-JavaAnnotation my = annotations[0]
-assert my.in() == 3
-    """
-  }
+            assert my.defaultEnum() == ElementType.TYPE
+            assert my.defaultAnnotation() instanceof Target
+        """
+    }
+
+    void testJavaAnnotationUsageWithGroovyKeyword() {
+        assertScript """
+            package gls.annotations
+            import java.lang.annotation.*
+            @JavaAnnotation(in = 3)
+            class Foo {}
+
+            Annotation[] annotations = Foo.class.annotations
+            assert annotations.size() == 1
+            JavaAnnotation my = annotations[0]
+            assert my.in() == 3
+        """
+    }
 
-  void testUsageOnClass() {
-    assertScript """
-import java.lang.annotation.*
+    void testUsageOnClass() {
+        assertScript """
+            import java.lang.annotation.*
 
-@Deprecated
-class Foo{}
+            @Deprecated
+            class Foo{}
 
-assert Foo.class.annotations.size() == 1
-  """
-  }
+            assert Foo.class.annotations.size() == 1
+        """
+    }
 
-  void testSingletonArrayUsage() {
-    assertScript """
-import java.lang.annotation.*
+    void testFieldAndPropertyRuntimeRetention() {
+        assertScript """
+            import org.codehaus.groovy.ast.ClassNode
+            import java.lang.annotation.*
 
-// a random annnotation type
-@Retention(RetentionPolicy.RUNTIME)
-@interface MyAnnotation {
-  String[] things()
-}
+            @Retention(RetentionPolicy.RUNTIME)
+            @interface Annotation1 {}
 
-@MyAnnotation(things = "x")
-class Foo {}
+            @Annotation1 class A {
+                @Annotation1 method1(){}
+                @Annotation1 public field1
+                @Annotation1 prop1
+            }
 
-Annotation[] annotations = Foo.class.annotations
-assert annotations.size() == 1
-MyAnnotation my = annotations[0]
-assert my.things().size() == 1
-assert my.things()[0] == "x"
-    """
-  }
+            new ClassNode(A).with {
+                assert annotations: "ClassNode for class 'A' has an annotation as it should"
+                getMethod('method1').with {
+                    assert annotations: "Annotation on 'method1' not found"
+                }
+                getField('field1').with {
+                    assert annotations: "Annotation on 'field1' not found"
+                }
+                getField('prop1').with {
+                    assert annotations: "Annotation on 'property1' not found"
+                }
+            }
+        """
+    }
 
-  void testSettingAnnotationMemberTwice() {
-    shouldNotCompile """
-package gls.annotations
+    void testSingletonArrayUsage() {
+        assertScript """
+            import java.lang.annotation.*
+
+            // a random annnotation type
+            @Retention(RetentionPolicy.RUNTIME)
+            @interface MyAnnotation {
+                String[] things()
+            }
+
+            @MyAnnotation(things = "x")
+            class Foo {}
+
+            Annotation[] annotations = Foo.class.annotations
+            assert annotations.size() == 1
+            MyAnnotation my = annotations[0]
+            assert my.things().size() == 1
+            assert my.things()[0] == "x"
+        """
+    }
+
+    void testSettingAnnotationMemberTwice() {
+        shouldNotCompile """
+        package gls.annotations
 
-@JavaAnnotation(in = 1, in = 2) 
-class Foo {}
+        @JavaAnnotation(in = 1, in = 2)
+        class Foo {}
     """
-  }
+    }
 
-  void testGetterCallWithSingletonAnnotation() {
-      assertScript """
-          @Singleton class MyService3410{}
-          assert MyService3410.instance != null     
-          assert MyService3410.getInstance() != null
+    void testGetterCallWithSingletonAnnotation() {
+        assertScript """
+            @Singleton class MyService3410{}
+            assert MyService3410.instance != null
+            assert MyService3410.getInstance() != null
       """
-      println "testGetterCallWithSingletonAnnotation Done" 
-  }
+    }
 
     void testAttributePropertyConstants() {
         assertScript """
-        import java.lang.annotation.*
-        import static Constants.*
-
-        @Retention(RetentionPolicy.RUNTIME)
-        @Target(ElementType.FIELD)
-        @interface Anno {
-            double value() default 0.0d
-            String[] array() default []
-        }
-
-        class Constants {
-            public static final String BAR = "bar"
-            public static final APPROX_PI = 3.14d
-        }
-
-        interface IConstants {
-            String FOO = "foo"
-        }
-
-        class ClassWithAnnotationUsingConstant {
-            @Anno(array = [IConstants.FOO, BAR, groovy.inspect.Inspector.GROOVY])
-            public annotatedStrings
-
-            @Anno(Math.PI)
-            public annotatedMath1
-            @Anno(APPROX_PI)
-            public annotatedMath2
-        }
-
-        assert ClassWithAnnotationUsingConstant.getDeclaredField('annotatedStrings').annotations[0].array() == ['foo', 'bar', "GROOVY"]
-        assert ClassWithAnnotationUsingConstant.getDeclaredField('annotatedMath1').annotations[0].value() == Math.PI
-        assert ClassWithAnnotationUsingConstant.getDeclaredField('annotatedMath2').annotations[0].value() == Constants.APPROX_PI
-      """
+            import java.lang.annotation.*
+            import static Constants.*
+
+            @Retention(RetentionPolicy.RUNTIME)
+            @Target(ElementType.FIELD)
+            @interface Anno {
+                double value() default 0.0d
+                String[] array() default []
+            }
+
+            class Constants {
+                public static final String BAR = "bar"
+                public static final APPROX_PI = 3.14d
+            }
+
+            interface IConstants {
+                String FOO = "foo"
+            }
+
+            class ClassWithAnnotationUsingConstant {
+                @Anno(array = [IConstants.FOO, BAR, groovy.inspect.Inspector.GROOVY])
+                public annotatedStrings
+
+                @Anno(Math.PI)
+                public annotatedMath1
+                @Anno(APPROX_PI)
+                public annotatedMath2
+            }
+
+            assert ClassWithAnnotationUsingConstant.getDeclaredField('annotatedStrings').annotations[0].array() == ['foo', 'bar', "GROOVY"]
+            assert ClassWithAnnotationUsingConstant.getDeclaredField('annotatedMath1').annotations[0].value() == Math.PI
+            assert ClassWithAnnotationUsingConstant.getDeclaredField('annotatedMath2').annotations[0].value() == Constants.APPROX_PI
+        """
     }
 
     void testNestedAttributePropertyConstants() {
         assertScript """
-        import java.lang.annotation.*
-        import static Constants.*
-
-        @Retention(RetentionPolicy.RUNTIME)
-        @Target(ElementType.FIELD)
-        @interface Outer {
-            Inner value()
-            String[] array() default []
-        }
-
-        @Retention(RetentionPolicy.RUNTIME)
-        @Target(ElementType.FIELD)
-        @interface Inner {
-            String[] value() default []
-        }
-
-        class Constants {
-            public static final String BAR = "bar"
-            public static final String BAZ = "baz"
-        }
-
-        interface IConstants {
-            String FOO = "foo"
-            String FOOBAR = "foobar"
-        }
-
-        class ClassWithNestedAnnotationUsingConstant {
-            @Outer(value = @Inner([IConstants.FOOBAR, BAR, groovy.inspect.Inspector.GROOVY]),
-                   array = [IConstants.FOO, groovy.inspect.Inspector.GROOVY, BAZ])
-            public outer
-        }
-
-        assert ClassWithNestedAnnotationUsingConstant.getDeclaredField('outer').annotations[0].array() == ['foo', 'GROOVY', 'baz']
-        assert ClassWithNestedAnnotationUsingConstant.getDeclaredField('outer').annotations[0].value().value() == ['foobar', 'bar', 'GROOVY']
-      """
+            import java.lang.annotation.*
+            import static Constants.*
+
+            @Retention(RetentionPolicy.RUNTIME)
+            @Target(ElementType.FIELD)
+            @interface Outer {
+                Inner value()
+                String[] array() default []
+            }
+
+            @Retention(RetentionPolicy.RUNTIME)
+            @Target(ElementType.FIELD)
+            @interface Inner {
+                String[] value() default []
+            }
+
+            class Constants {
+                public static final String BAR = "bar"
+                public static final String BAZ = "baz"
+            }
+
+            interface IConstants {
+                String FOO = "foo"
+                String FOOBAR = "foobar"
+            }
+
+            class ClassWithNestedAnnotationUsingConstant {
+                @Outer(value = @Inner([IConstants.FOOBAR, BAR, groovy.inspect.Inspector.GROOVY]),
+                       array = [IConstants.FOO, groovy.inspect.Inspector.GROOVY, BAZ])
+                public outer
+            }
+
+            assert ClassWithNestedAnnotationUsingConstant.getDeclaredField('outer').annotations[0].array() == ['foo', 'GROOVY', 'baz']
+            assert ClassWithNestedAnnotationUsingConstant.getDeclaredField('outer').annotations[0].value().value() == ['foobar', 'bar', 'GROOVY']
+        """
     }
 
     void testRuntimeRetentionAtAllLevels() {
         assertScript """
-        import java.lang.annotation.*
+            import java.lang.annotation.*
 
-        @Retention(RetentionPolicy.RUNTIME)
-        @Target([ElementType.TYPE, ElementType.METHOD, ElementType.PARAMETER, ElementType.CONSTRUCTOR, ElementType.FIELD])
-        @interface MyAnnotation {
-            String value() default ""
-        }
+            @Retention(RetentionPolicy.RUNTIME)
+            @Target([ElementType.TYPE, ElementType.METHOD, ElementType.PARAMETER, ElementType.CONSTRUCTOR, ElementType.FIELD])
+            @interface MyAnnotation {
+                String value() default ""
+            }
 
-        @MyAnnotation('class')
-        class MyClass {
-            @MyAnnotation('field')
-            public myField
+            @MyAnnotation('class')
+            class MyClass {
+                @MyAnnotation('field')
+                public myField
 
-            @MyAnnotation('constructor')
-            MyClass(@MyAnnotation('constructor param') arg){}
+                @MyAnnotation('constructor')
+                MyClass(@MyAnnotation('constructor param') arg){}
 
-            @MyAnnotation('method')
-            def myMethod(@MyAnnotation('method param') arg) {}
-        }
+                @MyAnnotation('method')
+                def myMethod(@MyAnnotation('method param') arg) {}
+            }
 
-        def c1 = new MyClass()
-        assert c1.class.annotations[0].value() == 'class'
+            def c1 = new MyClass()
+            assert c1.class.annotations[0].value() == 'class'
 
-        def field = c1.class.fields.find{ it.name == 'myField' }
-        assert field.annotations[0].value() == 'field'
+            def field = c1.class.fields.find{ it.name == 'myField' }
+            assert field.annotations[0].value() == 'field'
 
-        def method = c1.class.methods.find{ it.name == 'myMethod' }
-        assert method.annotations[0].value() == 'method'
-        assert method.parameterAnnotations[0][0].value() == 'method param'
+            def method = c1.class.methods.find{ it.name == 'myMethod' }
+            assert method.annotations[0].value() == 'method'
+            assert method.parameterAnnotations[0][0].value() == 'method param'
 
-        def constructor = c1.class.constructors[0]
-        assert constructor.annotations[0].value() == 'constructor'
-        assert constructor.parameterAnnotations[0][0].value() == 'constructor param'
+            def constructor = c1.class.constructors[0]
+            assert constructor.annotations[0].value() == 'constructor'
+            assert constructor.parameterAnnotations[0][0].value() == 'constructor param'
         """
     }
 
     void testAnnotationWithValuesNotGivenForAttributesWithoutDefaults() {
-      def scriptStr
-      scriptStr = """
-        import java.lang.annotation.Retention
-        import java.lang.annotation.RetentionPolicy
-        
-        @Retention(RetentionPolicy.RUNTIME)
-        @interface Annot3454V1 {
-          String x()
-        }
-        
-        @Annot3454V1
-        class Bar {}
-      """
-      // compiler should not allow this, because there is no default value for x
-      shouldNotCompile(scriptStr)
-      
-      scriptStr = """
+        def scriptStr
+        scriptStr = """
+            import java.lang.annotation.Retention
+            import java.lang.annotation.RetentionPolicy
+
+            @Retention(RetentionPolicy.RUNTIME)
+            @interface Annot3454V1 {
+                String x()
+            }
+
+            @Annot3454V1
+            class Bar {}
+        """
+
+        // compiler should not allow this, because there is no default value for x
+        shouldNotCompile(scriptStr)
+
+        scriptStr = """
             import java.lang.annotation.Retention
             import java.lang.annotation.RetentionPolicy
             
             @Retention(RetentionPolicy.RUNTIME)
             @interface Annot3454V2 {
-              String x() default 'xxx'
-              String y()
+                String x() default 'xxx'
+                String y()
             }
             
             @Annot3454V2
             class Bar {}
         """
+
         // compiler should not allow this, because there is no default value for y
         shouldNotCompile(scriptStr)
-      
+
         scriptStr = """
             import java.lang.annotation.Retention
             import java.lang.annotation.RetentionPolicy
             
             @Retention(RetentionPolicy.RUNTIME)
             @interface Annot3454V3 {
-              String x() default 'xxx'
-              String y()
+                String x() default 'xxx'
+                String y()
             }
             
             @Annot3454V3(y = 'yyy')
@@ -532,40 +563,40 @@ class Foo {}
 
     void testAllowedTargetsCheckAlsoWorksForAnnotationTypesDefinedOutsideThisCompilationUnit() {
         shouldCompile """
-@java.lang.annotation.Documented
-@interface Foo {}
+            @java.lang.annotation.Documented
+            @interface Foo {}
         """
 
         shouldNotCompile """
-@java.lang.annotation.Documented
-class Foo {
-    def bar
-}
+            @java.lang.annotation.Documented
+            class Foo {
+                def bar
+            }
         """
 
         shouldNotCompile """
-class Foo {
-    @java.lang.annotation.Documented
-    def bar
-}
+            class Foo {
+                @java.lang.annotation.Documented
+                def bar
+            }
         """
 
         shouldCompile """
-import org.junit.*
+            import org.junit.*
 
-class Foo {
-    @Test
-    void foo() {}
-}
+            class Foo {
+                @Test
+                void foo() {}
+            }
         """
 
         shouldNotCompile """
-import org.junit.*
+            import org.junit.*
 
-@Test
-class Foo {
-    void foo() {}
-}
+            @Test
+            class Foo {
+                void foo() {}
+            }
         """
     }
 }
