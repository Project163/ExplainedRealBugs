diff --git a/src/main/org/codehaus/groovy/classgen/VariableScopeVisitor.java b/src/main/org/codehaus/groovy/classgen/VariableScopeVisitor.java
index aeb13d7f4a..44de114689 100644
--- a/src/main/org/codehaus/groovy/classgen/VariableScopeVisitor.java
+++ b/src/main/org/codehaus/groovy/classgen/VariableScopeVisitor.java
@@ -332,7 +332,7 @@ public class VariableScopeVisitor extends ClassCodeVisitorSupport {
         ifElse.getElseBlock().visit(this);
         popState();
     }
-    
+
     public void visitDeclarationExpression(DeclarationExpression expression) {
         // visit right side first to avoid the usage of a
         // variable before its declaration
@@ -564,6 +564,7 @@ public class VariableScopeVisitor extends ClassCodeVisitorSupport {
                     VariableExpression vexp = (VariableExpression) expression;
                     if (vexp.getAccessedVariable() instanceof Parameter) {
                         // workaround for GROOVY-6834: accessing a parameter which is not yet seen in scope
+                        popState();
                         continue;
                     }
                 }
diff --git a/src/test/groovy/util/logging/Slf4jTest.groovy b/src/test/groovy/util/logging/Slf4jTest.groovy
index ac5f75074d..b53e265965 100644
--- a/src/test/groovy/util/logging/Slf4jTest.groovy
+++ b/src/test/groovy/util/logging/Slf4jTest.groovy
@@ -264,6 +264,30 @@ class Slf4jTest extends GroovyTestCase {
         assert appender.getEvents().size() == 1
     }
 
+    void testGroovy6873Regression() {
+        Class clazz = new GroovyClassLoader().parseClass("""
+            @groovy.util.logging.Slf4j
+            class Channel {
+
+                private void someMethod(String folder)  {
+                  final includeHidden = false
+                   new Runnable() {
+
+                            @Override
+                            public void run() {
+                                if (includeHidden) {
+                                }
+                            }
+
+                        }
+                }
+
+                void otherMethod() {
+                    def folder
+                }
+            }""")
+    }
+
     void testCustomCategory() {
         LogbackInterceptingAppender appenderForCustomCategory = new LogbackInterceptingAppender()
         appenderForCustomCategory.setOutputStream(new ByteArrayOutputStream())
