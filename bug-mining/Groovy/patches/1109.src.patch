diff --git a/src/main/org/codehaus/groovy/classgen/ReturnAdder.java b/src/main/org/codehaus/groovy/classgen/ReturnAdder.java
index 631482842a..2a08a19a79 100644
--- a/src/main/org/codehaus/groovy/classgen/ReturnAdder.java
+++ b/src/main/org/codehaus/groovy/classgen/ReturnAdder.java
@@ -38,6 +38,7 @@ public class ReturnAdder {
         else if (!node.isAbstract()) {
             if (!(statement instanceof BytecodeSequence)) {
                 BlockStatement newBlock = new BlockStatement();
+                newBlock.setVariableScope(node.getVariableScope());
                 if (statement instanceof BlockStatement) {
                     newBlock.addStatements(((BlockStatement)statement).getStatements());
                 } else {
diff --git a/src/test/groovy/bugs/Groovy3863Bug.groovy b/src/test/groovy/bugs/Groovy3863Bug.groovy
new file mode 100644
index 0000000000..e05c2a9f34
--- /dev/null
+++ b/src/test/groovy/bugs/Groovy3863Bug.groovy
@@ -0,0 +1,14 @@
+package groovy.bugs
+
+class Groovy3863Bug extends GroovyTestCase {
+    void testClassNameAccessInMainMethod() {
+        assertScript """
+            class Foo3863 {
+                static main(args) {
+                    println this.name
+                    assert this.name.contains('Foo3863') == true
+                }
+            }
+        """
+    }
+}
\ No newline at end of file
