diff --git a/src/main/groovy/lang/MetaClassImpl.java b/src/main/groovy/lang/MetaClassImpl.java
index b1f9d61d0f..4b23403e38 100644
--- a/src/main/groovy/lang/MetaClassImpl.java
+++ b/src/main/groovy/lang/MetaClassImpl.java
@@ -2294,15 +2294,6 @@ public class MetaClassImpl implements MetaClass, MutableMetaClass {
         //----------------------------------------------------------------------
         if (newValue instanceof Wrapper) newValue = ((Wrapper) newValue).unwrap();
 
-        //----------------------------------------------------------------------
-        // turn setProperty on a Map to put on the Map itself
-        //----------------------------------------------------------------------
-        if (!isStatic && this.isMap) {
-            ((Map) object).put(name, newValue);
-            return;
-        }
-
-
         MetaMethod method = null;
         Object[] arguments = null;
 
@@ -2403,6 +2394,14 @@ public class MetaClassImpl implements MetaClass, MutableMetaClass {
             return;
         }
 
+        //----------------------------------------------------------------------
+        // turn setProperty on a Map to put on the Map itself
+        //----------------------------------------------------------------------
+        if (!isStatic && this.isMap) {
+            ((Map) object).put(name, newValue);
+            return;
+        }
+
         //----------------------------------------------------------------------
         // error due to missing method/field
         //----------------------------------------------------------------------
diff --git a/src/test/org/codehaus/groovy/transform/DelegateTransformTest.groovy b/src/test/org/codehaus/groovy/transform/DelegateTransformTest.groovy
index 95adeb59a7..6fdfeea360 100644
--- a/src/test/org/codehaus/groovy/transform/DelegateTransformTest.groovy
+++ b/src/test/org/codehaus/groovy/transform/DelegateTransformTest.groovy
@@ -119,4 +119,13 @@ class DelegateTransformTest extends GroovyShellTestCase {
         Foo
       """
     }
+
+    /** fix for GROOVY-3471 */
+    void testDelegateOnAMapTypeFieldWithInitializationUsingConstructorProperties() {
+        assertScript """
+            class Test3471 { @Delegate Map mp }
+            def t = new Test3471(mp: new HashMap()) // this was resulting in a NPE due to MetaClassImpl's special handling of Map
+            assert t.keySet().size() == 0
+        """
+    }
 }
\ No newline at end of file
