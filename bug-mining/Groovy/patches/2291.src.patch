diff --git a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/Parser.groovy b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/Parser.groovy
index 7eb6d3c1fa..fff5f05ddc 100644
--- a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/Parser.groovy
+++ b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/Parser.groovy
@@ -1,5 +1,5 @@
 /*
- * Copyright 2003-2007 the original author or authors.
+ * Copyright 2003-20013 the original author or authors.
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
@@ -36,7 +36,6 @@ interface Parsing {
 /**
  * Provides a facade over the parser to recognize valid Groovy syntax.
  *
- * @version $Id$
  * @author <a href="mailto:jason@planet57.com">Jason Dillon</a>
  */
 class Parser
@@ -165,23 +164,10 @@ final class RigidParser implements Parsing
             //
 
             if (parser.errorCollector.errorCount > 1 || !parser.failedWithUnexpectedEOF()) {
-                //
-                // HACK: Super insane hack... if we detect a syntax error, but the last line of the
-                //       buffer ends with a {, [, ''', """ or \ then ignore...
-                //       and pretend its okay, cause it might be...
-                //
-                //       This seems to get around the problem with things like:
-                //
-                //       class a { def b() {
-                //
-
-                String tmp = buffer[-1].trim()
-
-                if (tmp.endsWith('{')
-                    || tmp.endsWith('[')
-                    || tmp.endsWith("'''")
-                    || tmp.endsWith('"""')
-                    || tmp.endsWith('\\')) {
+ 
+                // HACK: Super insane hack... we detect a syntax error, but might still ignore
+                // it depending on the line ending
+                if (ignoreSyntaxErrorForLineEnding(buffer[-1].trim())) {
                     log.debug("Ignoring parse failure; might be valid: $e")
                 }
                 else {
@@ -204,6 +190,14 @@ final class RigidParser implements Parsing
             return new ParseStatus(ParseCode.INCOMPLETE)
         }
     }
+    
+    private boolean ignoreSyntaxErrorForLineEnding(String line) {
+        boolean ignore = false
+        ['{', '[', '(', ',', '.', '-', '+', '/', '*', '%', '&', '|', '?', '<', '>', '=', ':', "'''", '"""', '\\'].each {
+            if(line.endsWith(it)) ignore = true
+        }
+        return ignore
+    }
 }
 
 /**
