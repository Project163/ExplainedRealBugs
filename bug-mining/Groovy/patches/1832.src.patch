diff --git a/src/main/org/codehaus/groovy/classgen/AsmClassGenerator.java b/src/main/org/codehaus/groovy/classgen/AsmClassGenerator.java
index 95f7e74f14..a6fb58d2c9 100644
--- a/src/main/org/codehaus/groovy/classgen/AsmClassGenerator.java
+++ b/src/main/org/codehaus/groovy/classgen/AsmClassGenerator.java
@@ -92,7 +92,6 @@ public class AsmClassGenerator extends ClassGenerator {
     public static final boolean CREATE_LINE_NUMBER_INFO = true;
     public static final boolean ASM_DEBUG = false; // add marker in the bytecode to show source-bytecode relationship
 
-    private int lineNumber = -1;
     private ASTNode currentASTNode = null;
     private Map genericParameterNames = null;
     private SourceUnit source;
@@ -250,8 +249,8 @@ public class AsmClassGenerator extends ClassGenerator {
     }
 
     protected void visitConstructorOrMethod(MethodNode node, boolean isConstructor) {
-        lineNumber = -1;
-        Parameter[] parameters = node.getParameters();
+        controller.resetLineNumber();
+    	Parameter[] parameters = node.getParameters();
         String methodType = BytecodeHelper.getMethodDescriptor(node.getReturnType(), parameters);
         String signature = BytecodeHelper.getGenericsMethodSignature(node);
         int modifiers = node.getModifiers();
@@ -2068,9 +2067,9 @@ public class AsmClassGenerator extends ClassGenerator {
         this.currentASTNode = statement;
 
         if (line < 0) return;
-        if (!ASM_DEBUG && line==lineNumber) return;
+        if (!ASM_DEBUG && line==controller.getLineNumber()) return;
 
-        lineNumber = line;
+        controller.setLineNumber(line);
         if (mv != null) {
             Label l = new Label();
             mv.visitLabel(l);
diff --git a/src/main/org/codehaus/groovy/classgen/asm/WriterController.java b/src/main/org/codehaus/groovy/classgen/asm/WriterController.java
index 300d37fe08..2edf6036b0 100644
--- a/src/main/org/codehaus/groovy/classgen/asm/WriterController.java
+++ b/src/main/org/codehaus/groovy/classgen/asm/WriterController.java
@@ -69,7 +69,8 @@ public class WriterController {
     private StatementWriter statementWriter;
     private boolean fastPath = false;
     private TypeChooser typeChooser;
-    private int bytecodeVersion = Opcodes.V1_5; 
+    private int bytecodeVersion = Opcodes.V1_5;
+    private int lineNumber = -1;
 
     public void init(AsmClassGenerator asmClassGenerator, GeneratorContext gcon, ClassVisitor cv, ClassNode cn) {
         Map<String,Boolean> optOptions = cn.getCompileUnit().getConfig().getOptimizationOptions();
@@ -331,10 +332,12 @@ public class WriterController {
 
     public void switchToFastPath() {
         fastPath = true;
+        resetLineNumber();
     }
 
     public void switchToSlowPath() {
         fastPath = false;
+        resetLineNumber();
     }
 
     public boolean isFastPath() {
@@ -344,4 +347,16 @@ public class WriterController {
     public int getBytecodeVersion() {
         return bytecodeVersion;
     }
+    
+    public int getLineNumber() {
+        return lineNumber;
+    }
+    
+    public void setLineNumber(int n) {
+    	lineNumber = n;
+    }
+
+	public void resetLineNumber() {
+		setLineNumber(-1);
+	}
 }
