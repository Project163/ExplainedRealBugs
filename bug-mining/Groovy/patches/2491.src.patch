diff --git a/src/main/org/codehaus/groovy/antlr/groovy.g b/src/main/org/codehaus/groovy/antlr/groovy.g
index 327fec3a68..74d57f8b4c 100644
--- a/src/main/org/codehaus/groovy/antlr/groovy.g
+++ b/src/main/org/codehaus/groovy/antlr/groovy.g
@@ -3629,7 +3629,12 @@ options {
     protected GroovyRecognizer parser;  // little-used link; TODO: get rid of
     private void require(boolean z, String problem, String solution) throws SemanticException {
         // TODO: Direct to a common error handler, rather than through the parser.
-        if (!z)  parser.requireFailed(problem, solution);
+        if (!z && parser!=null)  parser.requireFailed(problem, solution);
+        if (!z) {
+            int lineNum = inputState.getLine(), colNum = inputState.getColumn();
+            throw new SemanticException(problem + ";\n   solution: " + solution,
+                                        getFilename(), lineNum, colNum);
+        }
     }
 }
 
diff --git a/src/test/org/codehaus/groovy/antlr/GStringEndTest.groovy b/src/test/org/codehaus/groovy/antlr/GStringEndTest.groovy
index 2a72035c5e..74a09c21ad 100644
--- a/src/test/org/codehaus/groovy/antlr/GStringEndTest.groovy
+++ b/src/test/org/codehaus/groovy/antlr/GStringEndTest.groovy
@@ -1,4 +1,23 @@
+/*
+ * Copyright 2003-2014 the original author or authors.
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
 import org.codehaus.groovy.control.*
+import org.codehaus.groovy.antlr.parser.GroovyLexer
+
+import antlr.TokenStreamRecognitionException;
 
 class GStringEndTest extends GroovyTestCase {
     void testInvalidEndContainsLineNumber(){
@@ -10,5 +29,17 @@ class GStringEndTest extends GroovyTestCase {
             def text = mcee.toString();
             assert text.contains("line 2, column 41")
         }
-  }
+    }
+
+    void testErrorReportOnStringEndWithOutParser() {
+        // GROOVY-6608: the code did throw a NPE
+        def s = '''
+def scanFolders()
+{ doThis( ~"(?i)^sometext$", 
+'''
+        def lexer = new GroovyLexer(new StringReader(s))
+        try {
+            while (lexer.nextToken()!=null) {}
+        } catch (antlr.TokenStreamRecognitionException se) {}
+    }
 }
\ No newline at end of file
