diff --git a/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java b/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java
index ce605fbfb1..4810093049 100644
--- a/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java
+++ b/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java
@@ -406,7 +406,8 @@ public class StaticTypeCheckingVisitor extends ClassCodeVisitorSupport {
                 }
 
                 // if we are in an if/else branch, keep track of assignment
-                if (ifElseForWhileAssignmentTracker != null && leftExpression instanceof VariableExpression) {
+                if (ifElseForWhileAssignmentTracker != null && leftExpression instanceof VariableExpression
+                        && !isNullConstant(rightExpression)) {
                     Variable accessedVariable = ((VariableExpression) leftExpression).getAccessedVariable();
                     if (accessedVariable instanceof VariableExpression) {
                         VariableExpression var = (VariableExpression) accessedVariable;
diff --git a/src/test/groovy/transform/stc/STCAssignmentTest.groovy b/src/test/groovy/transform/stc/STCAssignmentTest.groovy
index 074d05bd6c..1db6f74909 100644
--- a/src/test/groovy/transform/stc/STCAssignmentTest.groovy
+++ b/src/test/groovy/transform/stc/STCAssignmentTest.groovy
@@ -742,5 +742,18 @@ class STCAssignmentTest extends StaticTypeCheckingTestCase {
         ''', 'Inconvertible types: cannot cast [Ljava.lang.String; to [Ljava.util.Set;'
     }
 
+    // GROOVY-5535
+    void testAssignToNullInsideIf() {
+        assertScript '''
+            Date foo() {
+                Date result = new Date()
+                if (true) {
+                    result = null
+                }
+                return result
+            }
+            assert foo() == null
+        '''
+    }
 }
 
