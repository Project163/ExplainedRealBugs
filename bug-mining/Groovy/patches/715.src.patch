diff --git a/build.xml b/build.xml
index 65509360ff..0ad2ade157 100644
--- a/build.xml
+++ b/build.xml
@@ -492,16 +492,10 @@ Not found: ${groovyJar14path}
     <target name="-makeManifest">
         <mkdir dir="${mainClassesDirectory}/META-INF"/>
         <copy todir="${mainClassesDirectory}/META-INF" file="LICENSE.txt"/>
-    	<makemanifest dependencies="antlr,
-org.objectweb.asm,
-org.apache.ant;resolution:=optional,
-org.apache.commons.cli;resolution:=optional,
-org.junit;resolution:=optional" file="${mainClassesDirectory}/META-INF/MANIFEST.MF"/>
+    	<makemanifest file="${mainClassesDirectory}/META-INF/MANIFEST.MF"/>
 	</target>
 
-    <!-- TODO: investigate whether we can generate package list not hard-code it -->
     <macrodef name="makemanifest">
-        <attribute name="dependencies"/>
     	<attribute name="file"/>
         <sequential>
             <manifest file="@{file}">
@@ -515,69 +509,12 @@ org.junit;resolution:=optional" file="${mainClassesDirectory}/META-INF/MANIFEST.
                 <attribute name="Implementation-Vendor" value="The Codehaus"/>
                 <attribute name="Bundle-ManifestVersion" value="2" />
                 <attribute name="Bundle-Name" value="Groovy Runtime" />
+                <attribute name="Bundle-Description" value="Groovy Runtime" />
                 <attribute name="Bundle-SymbolicName" value="org.codehaus.groovy" />
                 <attribute name="Bundle-Version" value="${groovyBundleVersion}" />
                 <attribute name="Bundle-Vendor" value="The Codehaus" />
                 <attribute name="Bundle-ClassPath" value="." />
                 <attribute name="Bundle-RequiredExecutionEnvironment" value="J2SE-1.4" />
-                <attribute name="Import-Package" value="@{dependencies}" />
-                <attribute name="Export-Package" value="groovy.inspect,
-groovy.inspect.swingui,
-groovy.io,
-groovy.lang,
-groovy.mock,
-groovy.mock.interceptor,
-groovy.model,
-groovy.security,
-groovy.servlet,
-groovy.sql,
-groovy.swing,
-groovy.swing.binding,
-groovy.swing.factory,
-groovy.swing.impl,
-groovy.text,
-groovy.time,
-groovy.ui,
-groovy.ui.icons,
-groovy.ui.text,
-groovy.ui.view,
-groovy.util,
-groovy.util.slurpersupport,
-groovy.xml,
-groovy.xml.dom,
-groovy.xml.streamingmarkupsupport,
-org.codehaus.groovy,
-org.codehaus.groovy.ant,
-org.codehaus.groovy.antlr,
-org.codehaus.groovy.antlr.java,
-org.codehaus.groovy.antlr.parser,
-org.codehaus.groovy.antlr.treewalker,
-org.codehaus.groovy.ast,
-org.codehaus.groovy.ast.expr,
-org.codehaus.groovy.ast.stmt,
-org.codehaus.groovy.binding,
-org.codehaus.groovy.bsf,
-org.codehaus.groovy.classgen,
-org.codehaus.groovy.control,
-org.codehaus.groovy.control.io,
-org.codehaus.groovy.control.messages,
-org.codehaus.groovy.groovydoc,
-org.codehaus.groovy.reflection,
-org.codehaus.groovy.runtime,
-org.codehaus.groovy.runtime.metaclass,
-org.codehaus.groovy.runtime.typehandling,
-org.codehaus.groovy.runtime.wrappers,
-org.codehaus.groovy.syntax,
-org.codehaus.groovy.tools,
-org.codehaus.groovy.tools.groovydoc,
-org.codehaus.groovy.tools.javac,
-org.codehaus.groovy.tools.shell,
-org.codehaus.groovy.tools.shell.commands,
-org.codehaus.groovy.tools.shell.util,
-org.codehaus.groovy.tools.xml,
-org.codehaus.groovy.vmplugin,
-org.codehaus.groovy.vmplugin.v4,
-org.codehaus.groovy.vmplugin.v5" />
                 <attribute name="Eclipse-BuddyPolicy" value="dependent"/>
                 <attribute name="Eclipse-LazyStart" value="true"/>
             </manifest>
@@ -617,7 +554,7 @@ org.codehaus.groovy.vmplugin.v5" />
     </target>
 
     <target name="-createBaseJar" unless="testFailed">
-        <jar destfile="${targetDistDirectory}/groovy-${groovyVersion}.jar" basedir="${mainClassesDirectory}"
+        <jar destfile="${targetDistDirectory}/groovy.jar" basedir="${mainClassesDirectory}"
              excludes="*.groovy" manifest="${mainClassesDirectory}/META-INF/MANIFEST.MF"/>
         <jar destfile="${targetDistDirectory}/groovy-${groovyVersion}-sources.jar" basedir="${mainSourceDirectory}"/>
         <antcall target="-createBaseJarRetro"/>
@@ -650,7 +587,7 @@ org.codehaus.groovy.vmplugin.v5" />
         </unzip>
         <unzip dest="${stagingDirectory}">
             <fileset dir="${targetDistDirectory}">
-                <include name="groovy-${groovyVersion}.jar"/>
+                <include name="groovy.jar"/>
             </fileset>
         </unzip>
         <copy toDir="${stagingDirectory}/META-INF">
@@ -669,18 +606,37 @@ org.codehaus.groovy.vmplugin.v5" />
                 <include name="commons-cli-*.jar"/>
             </fileset>
         </unzip>
-    	<makemanifest dependencies="org.apache.ant;resolution:=optional,
-org.junit;resolution:=optional" file="${stagingDirectory}/META-INF/MANIFEST.MF"/>
+    	<makemanifest file="${stagingDirectory}/META-INF/MANIFEST.MF"/>
         <!-- TODO try to make use of jarjar keep ability -->
-        <jarjar jarfile="${targetDistDirectory}/groovy-all-${groovyVersion}.jar"
+        <jarjar jarfile="${targetDistDirectory}/groovy-all.jar"
                 manifest="${stagingDirectory}/META-INF/MANIFEST.MF">
             <fileset dir="${stagingDirectory}" excludes="groovy/util/CliBuilder*.class,groovy/util/OptionAccessor*.class"/>
             <rule pattern="antlr.**" result="groovyjarjarantlr.@1"/>
             <rule pattern="org.objectweb.**" result="groovyjarjarasm.@1"/>
             <rule pattern="org.apache.commons.cli.**" result="groovyjarjarcommonscli.@1"/>
         </jarjar>
-        <jar destfile="${targetDistDirectory}/groovy-all-${groovyVersion}.jar" update="true"
+        <jar destfile="${targetDistDirectory}/groovy-all.jar" update="true"
              basedir="${stagingDirectory}" includes="groovy/util/CliBuilder*.class,groovy/util/OptionAccessor*.class"/>
+
+        <!-- wrap jars for osgi usage -->
+        <taskdef resource="aQute/bnd/ant/taskdef.properties" classpathref="toolsPath"/>
+        <copy todir="${targetDistDirectory}">
+            <fileset dir="config/bnd" includes="groovy*.bnd"/>
+            <filterset>
+                <filter token="GROOVY_BUNDLE_VERSION" value="${groovyBundleVersion}"/>
+            </filterset>
+        </copy>
+        <property name="jarsToWrap" value="groovy.jar,groovy-all.jar" />
+        <bndwrap definitions="${targetDistDirectory}" output="${targetDistDirectory}">
+            <fileset dir="${targetDistDirectory}" includes="${jarsToWrap}"/>
+        </bndwrap>
+        <delete dir="${targetDistDirectory}" includes="${jarsToWrap}"/>
+        <move file="${targetDistDirectory}/groovy.bar"
+              tofile="${targetDistDirectory}/groovy-${groovyVersion}.jar"/>
+        <move file="${targetDistDirectory}/groovy-all.bar"
+              tofile="${targetDistDirectory}/groovy-all-${groovyVersion}.jar"/>
+        <delete dir="${targetDistDirectory}" includes="groovy*.bnd"/>
+
         <copy file="${targetDistDirectory}/groovy-${groovyVersion}-sources.jar"
               tofile="${targetDistDirectory}/groovy-all-${groovyVersion}-sources.jar"/>
         <delete dir="${stagingDirectory}" quiet="true"/>
diff --git a/config/bnd/groovy-all.bnd b/config/bnd/groovy-all.bnd
new file mode 100644
index 0000000000..116d74ce75
--- /dev/null
+++ b/config/bnd/groovy-all.bnd
@@ -0,0 +1,4 @@
+version= @GROOVY_BUNDLE_VERSION@
+-nouses= true
+Export-Package= *;version=${version}
+Import-Package= *;resolution:=optional
diff --git a/config/bnd/groovy.bnd b/config/bnd/groovy.bnd
new file mode 100644
index 0000000000..7c5c268e50
--- /dev/null
+++ b/config/bnd/groovy.bnd
@@ -0,0 +1,4 @@
+version= @GROOVY_BUNDLE_VERSION@
+-nouses= true
+Export-Package= *;version=${version}
+Import-Package= antlr, org.objectweb.asm, *;resolution:=optional
diff --git a/config/maven/groovy-tools.pom b/config/maven/groovy-tools.pom
index 80c1ecae87..d6e5137356 100644
--- a/config/maven/groovy-tools.pom
+++ b/config/maven/groovy-tools.pom
@@ -73,5 +73,16 @@
             <artifactId>retrotranslator-runtime</artifactId>
             <version>1.2.4</version>
         </dependency>
+        <dependency>
+            <groupId>biz.aQute</groupId>
+            <artifactId>bnd</artifactId>
+            <version>0.0.258</version>
+        </dependency>
     </dependencies>
+    <repositories>
+        <repository>
+            <id>aQute</id>
+            <url>http://www.aQute.biz/repo</url>
+        </repository>
+    </repositories>
 </project>
diff --git a/src/main/org/codehaus/groovy/classgen/genArrayAccess.groovy b/src/main/org/codehaus/groovy/classgen/genArrayAccess.groovy
index f4dc4cfa14..dc998827a4 100644
--- a/src/main/org/codehaus/groovy/classgen/genArrayAccess.groovy
+++ b/src/main/org/codehaus/groovy/classgen/genArrayAccess.groovy
@@ -1,3 +1,5 @@
+package org.codehaus.groovy.classgen
+
 println """
 package org.codehaus.groovy.runtime.dgmimpl;
 
diff --git a/src/main/org/codehaus/groovy/classgen/genArrays.groovy b/src/main/org/codehaus/groovy/classgen/genArrays.groovy
index fb7ee7e6ed..ec86a8832f 100644
--- a/src/main/org/codehaus/groovy/classgen/genArrays.groovy
+++ b/src/main/org/codehaus/groovy/classgen/genArrays.groovy
@@ -1,3 +1,5 @@
+package org.codehaus.groovy.classgen
+
 print """
 
 public class ArrayUtil {
diff --git a/src/main/org/codehaus/groovy/classgen/genDgmMath.groovy b/src/main/org/codehaus/groovy/classgen/genDgmMath.groovy
index 66095518da..425b562169 100644
--- a/src/main/org/codehaus/groovy/classgen/genDgmMath.groovy
+++ b/src/main/org/codehaus/groovy/classgen/genDgmMath.groovy
@@ -1,3 +1,5 @@
+package org.codehaus.groovy.classgen
+
 def types = ["Integer", "Long", "Float", "Double"]
 
 def getMath (a,b) {
diff --git a/src/main/org/codehaus/groovy/classgen/genMathModification.groovy b/src/main/org/codehaus/groovy/classgen/genMathModification.groovy
index de580709ee..71c8e41c5c 100644
--- a/src/main/org/codehaus/groovy/classgen/genMathModification.groovy
+++ b/src/main/org/codehaus/groovy/classgen/genMathModification.groovy
@@ -1,3 +1,5 @@
+package org.codehaus.groovy.classgen
+
 def ops = [
         "plus",
         "minus",
diff --git a/src/main/org/codehaus/groovy/reflection/handlegen.groovy b/src/main/org/codehaus/groovy/reflection/handlegen.groovy
index 806bcf8d5d..e12c5d6701 100644
--- a/src/main/org/codehaus/groovy/reflection/handlegen.groovy
+++ b/src/main/org/codehaus/groovy/reflection/handlegen.groovy
@@ -1,3 +1,4 @@
+package org.codehaus.groovy.reflection
 
 def types = [
         "boolean",
