diff --git a/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java b/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java
index fd587435a1..d050db0989 100644
--- a/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java
+++ b/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java
@@ -2553,7 +2553,7 @@ public class StaticTypeCheckingVisitor extends ClassCodeVisitorSupport {
                 return Number_TYPE;
             } else if (isBitOperator(op)) {
                 if (isIntCategory(leftRedirect) && isIntCategory(rightRedirect)) return int_TYPE;
-                if (isLongCategory(leftRedirect) && isLongCategory(rightRedirect)) return Long_TYPE;
+                if (isLongCategory(leftRedirect) && isLongCategory(rightRedirect)) return long_TYPE;
                 if (isBigIntCategory(leftRedirect) && isBigIntCategory(rightRedirect)) return BigInteger_TYPE;
             } else if (isCompareToBoolean(op) || op == COMPARE_EQUAL) {
                 return boolean_TYPE;
diff --git a/src/test/org/codehaus/groovy/classgen/asm/sc/BugsStaticCompileTest.groovy b/src/test/org/codehaus/groovy/classgen/asm/sc/BugsStaticCompileTest.groovy
index 0fcf66df5e..f0e96baf3e 100644
--- a/src/test/org/codehaus/groovy/classgen/asm/sc/BugsStaticCompileTest.groovy
+++ b/src/test/org/codehaus/groovy/classgen/asm/sc/BugsStaticCompileTest.groovy
@@ -814,5 +814,70 @@ import groovy.transform.TypeCheckingMode
             assert bar == false
         '''
     }
+
+    // GROOVY-5921
+    void testShouldHandleLongArray() {
+        assertScript '''
+            class Groovy5921 {
+              long[] data = [1L]
+
+              void doSomething() {
+                data[ 0 ] |= 0x7ffffffl
+              }
+            }
+
+            def b = new Groovy5921()
+            b.doSomething()
+
+        '''
+    }
+
+    void testShouldHandleLongArrayWithUnboxing() {
+        assertScript '''
+            class Groovy5921 {
+              long[] data = [1L]
+
+              void doSomething() {
+                data[ 0 ] |= Long.valueOf(0x7ffffffl)
+              }
+            }
+
+            def b = new Groovy5921()
+            b.doSomething()
+
+        '''
+    }
+
+    void testShouldHandleBoxedLongArray() {
+        assertScript '''
+            class Groovy5921 {
+              Long[] data = [1L]
+
+              void doSomething() {
+                data[ 0 ] |= Long.valueOf(0x7ffffffl)
+              }
+            }
+
+            def b = new Groovy5921()
+            b.doSomething()
+
+        '''
+    }
+
+    void testShouldHandleBoxedLongArrayWithBoxing() {
+        assertScript '''
+            class Groovy5921 {
+              Long[] data = [1L]
+
+              void doSomething() {
+                data[ 0 ] |= 0x7ffffffl
+              }
+            }
+
+            def b = new Groovy5921()
+            b.doSomething()
+
+        '''
+    }
 }
 
