diff --git a/src/main/groovy/util/ConfigSlurper.groovy b/src/main/groovy/util/ConfigSlurper.groovy
index 312f507b90..f49275626e 100644
--- a/src/main/groovy/util/ConfigSlurper.groovy
+++ b/src/main/groovy/util/ConfigSlurper.groovy
@@ -214,8 +214,8 @@ class ConfigSlurper {
                     }
                 } else {
                     def co
-                    if(config.get(name) instanceof ConfigObject) {
-                        co = config.get(name)
+                    if (stack.last.get(name) instanceof ConfigObject) {
+                        co = stack.last.get(name)
                     }
                     else {
                         co = new ConfigObject()
diff --git a/src/test/groovy/util/ConfigSlurperTest.groovy b/src/test/groovy/util/ConfigSlurperTest.groovy
index f07e58a727..6d790b13fe 100644
--- a/src/test/groovy/util/ConfigSlurperTest.groovy
+++ b/src/test/groovy/util/ConfigSlurperTest.groovy
@@ -472,5 +472,12 @@ log4j {
         assertEquals("false", props.get("catalog.prov"))
         assertEquals("sa", props.get("catalog.prov.db.user"))
     }
+    
+    public void testSameElementNestingWithoutDuplication() {
+        def cfg = " a { b { a { foo = 1 } } } "
+        ConfigObject c = new ConfigSlurper().parse(cfg)
+        assert c.a.b.a.foo == 1
+        assert c.a != c.a.b.a
+    }
 
 }
