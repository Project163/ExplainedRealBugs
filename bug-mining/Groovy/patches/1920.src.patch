diff --git a/src/main/org/codehaus/groovy/classgen/asm/InvocationWriter.java b/src/main/org/codehaus/groovy/classgen/asm/InvocationWriter.java
index 95bd949f17..a41805202d 100644
--- a/src/main/org/codehaus/groovy/classgen/asm/InvocationWriter.java
+++ b/src/main/org/codehaus/groovy/classgen/asm/InvocationWriter.java
@@ -125,9 +125,11 @@ public class InvocationWriter {
                 mv.visitIntInsn(ALOAD,0);
             }
         }
-        
+
+        int stackSize = operandStack.getStackLength();
         loadArguments(args.getExpressions(), target.getParameters());
 
+
         String owner = BytecodeHelper.getClassInternalName(target.getDeclaringClass());
         String desc = BytecodeHelper.getMethodDescriptor(target.getReturnType(), target.getParameters());
         mv.visitMethodInsn(opcode, owner, methodName, desc);
@@ -136,7 +138,7 @@ public class InvocationWriter {
             ret = ClassHelper.OBJECT_TYPE;
             mv.visitInsn(ACONST_NULL);
         }
-        argumentsToRemove += args.getExpressions().size();
+        argumentsToRemove += (operandStack.getStackLength()-stackSize);
         controller.getOperandStack().remove(argumentsToRemove);
         controller.getOperandStack().push(ret);
         return true;
diff --git a/src/test/org/codehaus/groovy/classgen/asm/sc/BugsStaticCompileTest.groovy b/src/test/org/codehaus/groovy/classgen/asm/sc/BugsStaticCompileTest.groovy
index fff745815c..edfef4e1ba 100644
--- a/src/test/org/codehaus/groovy/classgen/asm/sc/BugsStaticCompileTest.groovy
+++ b/src/test/org/codehaus/groovy/classgen/asm/sc/BugsStaticCompileTest.groovy
@@ -324,5 +324,19 @@ class BugsStaticCompileTest extends BugsSTCTest {
             assert initPlugins(true) == true
         '''
     }
+
+    // GROOVY-5657
+    void testShouldNotPopEmptyStackWithDefaultParameters() {
+        assertScript '''
+            class EntityTransformation {
+                void visit() {
+                    addStaticDelegatedMethod([:])
+                }
+                public String addStaticDelegatedMethod(Map params, String returnType = 'foo') { returnType }
+            }
+            def et = new EntityTransformation()
+            assert et.addStaticDelegatedMethod([:]) == 'foo'
+        '''
+    }
 }
 
