diff --git a/subprojects/groovy-groovydoc/src/main/java/org/codehaus/groovy/tools/groovydoc/SimpleGroovyRootDoc.java b/subprojects/groovy-groovydoc/src/main/java/org/codehaus/groovy/tools/groovydoc/SimpleGroovyRootDoc.java
index d3eb4fcff9..96ab3a41a3 100644
--- a/subprojects/groovy-groovydoc/src/main/java/org/codehaus/groovy/tools/groovydoc/SimpleGroovyRootDoc.java
+++ b/subprojects/groovy-groovydoc/src/main/java/org/codehaus/groovy/tools/groovydoc/SimpleGroovyRootDoc.java
@@ -45,9 +45,9 @@ public class SimpleGroovyRootDoc extends SimpleGroovyDoc implements GroovyRootDo
             int lastSlashIdx = key.lastIndexOf('/');
             if (lastSlashIdx > 0) {
                 String shortKey = key.substring(lastSlashIdx + 1);
-                String fullPathName = groovyClassDoc.getFullPathName();
+                String fullPathName = groovyClassDoc != null ? groovyClassDoc.getFullPathName() : null;
 
-                boolean hasPackage = fullPathName.lastIndexOf('/') > 0;
+                boolean hasPackage = (fullPathName != null && fullPathName.lastIndexOf('/') > 0);
                 if (hasPackage) fullPathName = fullPathName.substring(0, fullPathName.lastIndexOf('/'));
 
                 if (shortKey.equals(name) && (!hasPackage || key.startsWith(fullPathName))) {
diff --git a/subprojects/groovy-groovydoc/src/test/groovy/org/codehaus/groovy/tools/groovydoc/SimpleGroovyRootDocTests.groovy b/subprojects/groovy-groovydoc/src/test/groovy/org/codehaus/groovy/tools/groovydoc/SimpleGroovyRootDocTests.groovy
new file mode 100644
index 0000000000..9e576bfc84
--- /dev/null
+++ b/subprojects/groovy-groovydoc/src/test/groovy/org/codehaus/groovy/tools/groovydoc/SimpleGroovyRootDocTests.groovy
@@ -0,0 +1,34 @@
+/*
+ * Copyright 2003-2013 the original author or authors.
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+package org.codehaus.groovy.tools.groovydoc
+
+/**
+ * @author Andre Steingress
+ */
+class SimpleGroovyRootDocTests extends GroovyTestCase {
+
+    // GROOVY-6017
+    void testClassNamedWithNullGroovyDocClass() {
+
+        final expectedResult = new SimpleGroovyClassDoc([], 'Foo')
+
+        def root = new SimpleGroovyRootDoc('Test')
+        root.putAllClasses([Foo: expectedResult])
+
+        assert expectedResult == root.classNamed(null, 'Foo')
+    }
+}
