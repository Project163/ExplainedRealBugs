diff --git a/src/main/java/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java b/src/main/java/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java
index ca522fa09a..4b37a96627 100644
--- a/src/main/java/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java
+++ b/src/main/java/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java
@@ -3106,7 +3106,10 @@ public class StaticTypeCheckingVisitor extends ClassCodeVisitorSupport {
 
             ClassNode[] paramTypes = expression.getNodeMetaData(CLOSURE_ARGUMENTS);
             if (paramTypes == null) {
-                ClassNode targetType = applyGenericsContext(context, target.getType());
+                ClassNode targetType = target.getType();
+                if (targetType != null && targetType.isGenericsPlaceHolder())
+                    targetType = getCombinedBoundType(targetType.getGenericsTypes()[0]);
+                targetType = applyGenericsContext(context, targetType); // fill place-holders
                 ClassNode[] samParamTypes = GenericsUtils.parameterizeSAM(targetType).getV1();
 
                 int n; Parameter[] p = expression.getParameters();
diff --git a/src/test/groovy/transform/stc/MethodReferenceTest.groovy b/src/test/groovy/transform/stc/MethodReferenceTest.groovy
index 3be60aeffb..c0f3df696f 100644
--- a/src/test/groovy/transform/stc/MethodReferenceTest.groovy
+++ b/src/test/groovy/transform/stc/MethodReferenceTest.groovy
@@ -286,6 +286,23 @@ final class MethodReferenceTest {
         '''
     }
 
+    @Test // instance::instanceMethod -- GROOVY-11020
+    void testConsumerII2() {
+        assertScript shell, '''
+            def <C extends Consumer<String>> void m(C c) {
+                c.accept('string')
+            }
+
+            @CompileStatic
+            void test(ArrayDeque<String> strings) {
+                m(strings::addFirst) // NPE in STC
+                assert strings.contains('string')
+            }
+
+            test(new ArrayDeque<>())
+        '''
+    }
+
     @Test // instance::instanceMethod -- GROOVY-9813
     void testFunctionII() {
         String asList = '''
