diff --git a/src/main/org/codehaus/groovy/classgen/asm/BinaryExpressionMultiTypeDispatcher.java b/src/main/org/codehaus/groovy/classgen/asm/BinaryExpressionMultiTypeDispatcher.java
index 46aee222df..09f7cd3171 100644
--- a/src/main/org/codehaus/groovy/classgen/asm/BinaryExpressionMultiTypeDispatcher.java
+++ b/src/main/org/codehaus/groovy/classgen/asm/BinaryExpressionMultiTypeDispatcher.java
@@ -254,8 +254,7 @@ public class BinaryExpressionMultiTypeDispatcher extends BinaryExpressionHelper
             int operationType = getOperandConversionType(leftType,rightType);
             BinaryExpressionWriter bew = binExpWriter[operationType];
             
-            if (   (operation==LEFT_SHIFT || operation==RIGHT_SHIFT) && 
-                    bew.write(operation, true)) 
+            if ( isShiftOperation(operation) && bew.write(operation, true)) 
             {
                 leftExp.visit(acg);
                 os.doGroovyCast(bew.getNormalOpResultType());
@@ -280,6 +279,12 @@ public class BinaryExpressionMultiTypeDispatcher extends BinaryExpressionHelper
         }
     }
     
+    private boolean isShiftOperation(int operation) {
+        return  operation==LEFT_SHIFT   || 
+                operation==RIGHT_SHIFT  ||
+                operation==RIGHT_SHIFT_UNSIGNED;
+    }
+
     private boolean isAssignmentToArray(BinaryExpression binExp) {
         Expression leftExpression = binExp.getLeftExpression();
         if (!(leftExpression instanceof BinaryExpression)) return false;
diff --git a/src/main/org/codehaus/groovy/classgen/asm/OperandStack.java b/src/main/org/codehaus/groovy/classgen/asm/OperandStack.java
index b77b2aaa8c..2e33203dfa 100644
--- a/src/main/org/codehaus/groovy/classgen/asm/OperandStack.java
+++ b/src/main/org/codehaus/groovy/classgen/asm/OperandStack.java
@@ -372,6 +372,27 @@ public class OperandStack {
         controller.getMethodVisitor().visitInsn(convertCode);
         return true;
     }
+    
+    private boolean convertFromLong(ClassNode target) {
+        MethodVisitor mv = controller.getMethodVisitor();
+        if (target==ClassHelper.int_TYPE){
+            mv.visitInsn(L2I);
+            return true;
+        } else if ( target==ClassHelper.char_TYPE ||
+                    target==ClassHelper.byte_TYPE ||
+                    target==ClassHelper.short_TYPE)
+        {
+            mv.visitInsn(L2I);
+            return convertFromInt(target);
+        } else if (target==ClassHelper.double_TYPE){
+            mv.visitInsn(L2D);
+            return true;
+        } else if (target==ClassHelper.float_TYPE){
+            mv.visitInsn(L2F);
+            return true;
+        } 
+        return false;
+    }
 
     private boolean convertFromDouble(ClassNode target) {
         MethodVisitor mv = controller.getMethodVisitor();
@@ -429,6 +450,8 @@ public class OperandStack {
             return convertFromFloat(target);
         } else if ( top==ClassHelper.double_TYPE) {
             return convertFromDouble(target);
+        } else if ( top==ClassHelper.long_TYPE) {
+            return convertFromLong(target);
         }
         return false;
     }
diff --git a/src/test/org/codehaus/groovy/classgen/asm/MethodPatternsTest.groovy b/src/test/org/codehaus/groovy/classgen/asm/MethodPatternsTest.groovy
index 6337fd1ab5..260e1ef2cc 100644
--- a/src/test/org/codehaus/groovy/classgen/asm/MethodPatternsTest.groovy
+++ b/src/test/org/codehaus/groovy/classgen/asm/MethodPatternsTest.groovy
@@ -128,4 +128,33 @@ class MethodPatternsTest extends AbstractBytecodeTestCase {
             'GOTO L14'
         ])
     }
+    
+    void testRoghtShiftUnsignedWithLongArgument() {
+        assert compile(method:"hashCode", '''
+            class X{
+                long _tagReservationDate
+                String userId, partnerItemId, trackingTag
+                public int hashCode() {
+                    final int prime = 31;
+                    int result = 1;
+                    result = prime * result + (partnerItemId?.hashCode() ?: 0)
+                    result = prime * result + (int) (_tagReservationDate ^ (_tagReservationDate >>> 32))
+                    result = prime * result + (trackingTag?.hashCode() ?: 0)
+                    result = prime * result + (userId?.hashCode() ?: 0)
+                    return result;
+                }
+            }
+        ''').hasSequence ([
+            'IMUL',
+            'ALOAD 0',
+            'GETFIELD X._tagReservationDate : J',
+            'ALOAD 0',
+            'GETFIELD X._tagReservationDate : J',
+            'LDC 32',
+            'LUSHR',
+            'LXOR',
+            'L2I',
+            'IADD',
+        ])
+    }
 }
\ No newline at end of file
