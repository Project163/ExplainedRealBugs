diff --git a/subprojects/groovy-servlet/src/main/java/groovy/servlet/AbstractHttpServlet.java b/subprojects/groovy-servlet/src/main/java/groovy/servlet/AbstractHttpServlet.java
index 664d405b06..bba0c6de8d 100644
--- a/subprojects/groovy-servlet/src/main/java/groovy/servlet/AbstractHttpServlet.java
+++ b/subprojects/groovy-servlet/src/main/java/groovy/servlet/AbstractHttpServlet.java
@@ -20,6 +20,8 @@ import groovy.util.ResourceException;
 
 import java.io.File;
 import java.io.IOException;
+import java.net.MalformedURLException;
+import java.net.URI;
 import java.net.URL;
 import java.net.URLConnection;
 import java.util.regex.Matcher;
@@ -166,8 +168,13 @@ public abstract class AbstractHttpServlet extends HttpServlet implements Resourc
      * Interface method for ResourceContainer. This is used by the GroovyScriptEngine.
      */
     public URLConnection getResourceConnection(String name) throws ResourceException {
-        String basePath = servletContext.getRealPath("/");
-        if (name.startsWith(basePath)) name = name.substring(basePath.length());
+        URI uri = new File(servletContext.getRealPath("/")).toURI();
+        try {
+            String basePath = uri.toURL().toExternalForm();
+            if (name.startsWith(basePath)) name = name.substring(basePath.length());
+        } catch (MalformedURLException e) {
+            throw new ResourceException("Malformed URL for base path '"+ uri + "'", e);
+        }
 
         name = name.replaceAll("\\\\", "/");
 
diff --git a/subprojects/groovy-servlet/src/main/java/groovy/servlet/GroovyServlet.java b/subprojects/groovy-servlet/src/main/java/groovy/servlet/GroovyServlet.java
index 5c84bb3886..8b257e7b4f 100644
--- a/subprojects/groovy-servlet/src/main/java/groovy/servlet/GroovyServlet.java
+++ b/subprojects/groovy-servlet/src/main/java/groovy/servlet/GroovyServlet.java
@@ -137,7 +137,7 @@ public class GroovyServlet extends AbstractHttpServlet {
              * Null cause?!
              */
             if (e == null) {
-                error.append(" Script processing failed.");
+                error.append(" Script processing failed.\n");
                 error.append(runtimeException.getMessage());
                 if (runtimeException.getStackTrace().length > 0)
                     error.append(runtimeException.getStackTrace()[0].toString());
