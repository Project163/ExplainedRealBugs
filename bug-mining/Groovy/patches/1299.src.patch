diff --git a/src/main/org/codehaus/groovy/classgen/AsmClassGenerator.java b/src/main/org/codehaus/groovy/classgen/AsmClassGenerator.java
index cdd75fda5c..5a57327e81 100644
--- a/src/main/org/codehaus/groovy/classgen/AsmClassGenerator.java
+++ b/src/main/org/codehaus/groovy/classgen/AsmClassGenerator.java
@@ -1317,8 +1317,13 @@ public class AsmClassGenerator extends ClassGenerator {
         BlockRecorder fb = new BlockRecorder(finallyPart);
         fb.startRange(synchronizedStart);
         compileStack.pushBlockRecorder(fb);
+        
         statement.getCode().visit(this);
 
+        fb.closeRange(catchAll);
+        compileStack.writeExceptionTable(fb, catchAll, null);
+        compileStack.pop(); //pop fb
+        
         finallyPart.run();
         mv.visitJumpInsn(GOTO, synchronizedEnd);
         mv.visitLabel(catchAll);
@@ -1326,9 +1331,6 @@ public class AsmClassGenerator extends ClassGenerator {
         mv.visitInsn(ATHROW);
 
         mv.visitLabel(synchronizedEnd);
-        fb.closeRange(synchronizedEnd);
-        compileStack.writeExceptionTable(fb, catchAll, null);
-        compileStack.pop(); //pop fb
     }
 
     public void visitThrowStatement(ThrowStatement statement) {
diff --git a/src/test/groovy/bugs/SynchronizedBytecodeBug.groovy b/src/test/groovy/bugs/SynchronizedBytecodeBug.groovy
index ea048deca3..ef0db4deba 100644
--- a/src/test/groovy/bugs/SynchronizedBytecodeBug.groovy
+++ b/src/test/groovy/bugs/SynchronizedBytecodeBug.groovy
@@ -99,6 +99,20 @@ class SynchronizedBytecodeBug extends GroovyTestCase {
     c()
     checkNotHavingAMonitor(lock)
   }
+
+  // GROOVY-4159
+  void testExceptionInSynchronized() {
+    def obj = 1
+    try {
+      synchronized(obj) {
+        obj.e
+      }
+      assert false
+    } catch (MissingPropertyException e) {
+      assert true
+    }
+    checkNotHavingAMonitor(obj) 
+  }
   
   def checkNotHavingAMonitor(Object lock){
     // if we call notify* or wait without having the
@@ -110,4 +124,4 @@ class SynchronizedBytecodeBug extends GroovyTestCase {
       assert true
     }
   }
-}
\ No newline at end of file
+}
