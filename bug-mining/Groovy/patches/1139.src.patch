diff --git a/src/main/org/codehaus/groovy/antlr/AntlrParserPlugin.java b/src/main/org/codehaus/groovy/antlr/AntlrParserPlugin.java
index 529066d0e5..90fa62dc60 100644
--- a/src/main/org/codehaus/groovy/antlr/AntlrParserPlugin.java
+++ b/src/main/org/codehaus/groovy/antlr/AntlrParserPlugin.java
@@ -38,12 +38,10 @@ import java.io.*;
 import java.security.AccessController;
 import java.security.PrivilegedAction;
 import java.util.ArrayList;
-import java.util.HashMap;
 import java.util.HashSet;
 import java.util.Iterator;
 import java.util.LinkedList;
 import java.util.List;
-import java.util.Map;
 import java.util.Set;
 
 /**
@@ -959,7 +957,6 @@ public class AntlrParserPlugin extends ASTHelper implements ParserPlugin, Groovy
 
         boolean access = false;
         int answer = 0;
-        Map<ClassNode, AnnotationNode> tmpAnnotations = new HashMap<ClassNode, AnnotationNode>();
 
         for (AST node = modifierNode.getFirstChild(); node != null; node = node.getNextSibling()) {
             int type = node.getType();
@@ -970,13 +967,7 @@ public class AntlrParserPlugin extends ASTHelper implements ParserPlugin, Groovy
 
                     // annotations
                 case ANNOTATION:
-                    AnnotationNode annNode = annotation(node);
-                    AnnotationNode anyPrevAnnNode = tmpAnnotations.put(annNode.getClassNode(), annNode);
-                    if(anyPrevAnnNode != null) {
-                        throw new ASTRuntimeException(modifierNode, 
-                                "Cannot specify duplicate annotation on the same member : " + annNode.getClassNode().getName());
-                    }
-                    annotations.add(annNode);
+                	annotations.add(annotation(node));
                     break;
 
                     // core access scope modifiers
diff --git a/src/main/org/codehaus/groovy/control/ResolveVisitor.java b/src/main/org/codehaus/groovy/control/ResolveVisitor.java
index 02936952f8..585608b027 100644
--- a/src/main/org/codehaus/groovy/control/ResolveVisitor.java
+++ b/src/main/org/codehaus/groovy/control/ResolveVisitor.java
@@ -30,6 +30,8 @@ import org.objectweb.asm.Opcodes;
 
 import java.io.File;
 import java.io.IOException;
+import java.lang.annotation.Retention;
+import java.lang.annotation.RetentionPolicy;
 import java.net.MalformedURLException;
 import java.net.URL;
 import java.net.URLConnection;
@@ -1034,16 +1036,29 @@ public class ResolveVisitor extends ClassCodeExpressionTransformer {
     public void visitAnnotations(AnnotatedNode node) {
         List<AnnotationNode> annotations = node.getAnnotations();
         if (annotations.isEmpty()) return;
+        Map<String, AnnotationNode> tmpAnnotations = new HashMap<String, AnnotationNode>();
+        ClassNode annType;
         for (AnnotationNode an : annotations) {
             // skip built-in properties
             if (an.isBuiltIn()) continue;
-            resolveOrFail(an.getClassNode(), ",  unable to find class for annotation", an);
+            annType = an.getClassNode();
+            resolveOrFail(annType, ",  unable to find class for annotation", an);
             for (Map.Entry<String, Expression> member : an.getMembers().entrySet()) {
                 Expression newValue = transform(member.getValue());
                 newValue = transformInlineConstants(newValue);
                 member.setValue(newValue);
                 checkAnnotationMemberValue(newValue);
             }
+            if(annType.isResolved()) {
+            	Class annTypeClass = annType.getTypeClass();
+            	Retention retAnn = (Retention) annTypeClass.getAnnotation(Retention.class);
+            	if (retAnn != null && retAnn.value().equals(RetentionPolicy.RUNTIME)) {
+            		AnnotationNode anyPrevAnnNode = tmpAnnotations.put(annTypeClass.getName(), an);
+            		if(anyPrevAnnNode != null) {
+            			addError("Cannot specify duplicate annotation on the same member : " + annType.getName(), an);
+            		}
+            	}
+            }
         }
     }
 
diff --git a/src/test/groovy/bugs/Groovy3852Bug.groovy b/src/test/groovy/bugs/Groovy3852Bug.groovy
index 865310f8a6..9be7a40b39 100644
--- a/src/test/groovy/bugs/Groovy3852Bug.groovy
+++ b/src/test/groovy/bugs/Groovy3852Bug.groovy
@@ -21,10 +21,10 @@ class Groovy3852Bug extends CompilableTestSupport {
     void testDuplicationAnnotationOnClassWithParams() {
         try {
             gcl.parseClass """
-                @Newify(auto=false, value=Integer)
-                @Newify(auto=false, value=Integer)
-                @Newify(auto=false, value=Integer)
-                class TooDeprecatedGroovy3852V2 {}
+                import java.lang.annotation.*
+                @Retention(value=RetentionPolicy.CLASS)
+                @Retention(value=RetentionPolicy.CLASS)
+                @interface TooDeprecatedGroovy3852V2 {}
             """
             fail('The class compilation should have failed as it has duplication annotations')
         }catch(ex) {
@@ -61,4 +61,16 @@ class Groovy3852Bug extends CompilableTestSupport {
             assertTrue ex.message.contains('Cannot specify duplicate annotation')
         }
     }
+    
+    void testDuplicationNonRuntimeRetentionPolicyAnnotations() {
+         try {
+            gcl.parseClass """
+                @Newify(auto=false, value=String)
+                @Newify(auto=false, value=String)
+                class Groovy3930 {}
+            """
+        }catch(ex) {
+            fail('The class compilation should have succeeded as it has duplication annotations but with retention policy not at RUNTIME')
+        }
+    }
 }
\ No newline at end of file
