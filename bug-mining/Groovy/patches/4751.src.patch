diff --git a/src/main/java/org/codehaus/groovy/ast/expr/BitwiseNegationExpression.java b/src/main/java/org/codehaus/groovy/ast/expr/BitwiseNegationExpression.java
index 2f54b7d6b7..c9f5fb322f 100644
--- a/src/main/java/org/codehaus/groovy/ast/expr/BitwiseNegationExpression.java
+++ b/src/main/java/org/codehaus/groovy/ast/expr/BitwiseNegationExpression.java
@@ -18,6 +18,7 @@
  */
 package org.codehaus.groovy.ast.expr;
 
+import org.codehaus.groovy.ast.ClassHelper;
 import org.codehaus.groovy.ast.ClassNode;
 import org.codehaus.groovy.ast.GroovyCodeVisitor;
 
@@ -25,7 +26,7 @@ public class BitwiseNegationExpression extends Expression {
 
     private final Expression expression;
 
-    public BitwiseNegationExpression(Expression expression) {
+    public BitwiseNegationExpression(final Expression expression) {
         this.expression = expression;
     }
 
@@ -34,26 +35,32 @@ public class BitwiseNegationExpression extends Expression {
     }
 
     @Override
-    public void visit(GroovyCodeVisitor visitor) {
-        visitor.visitBitwiseNegationExpression(this);
+    public String getText() {
+        return "~(" + getExpression().getText() + ")";
     }
 
+    /**
+     * @see org.codehaus.groovy.runtime.InvokerHelper#bitwiseNegate(Object)
+     */
     @Override
-    public Expression transformExpression(ExpressionTransformer transformer) {
-        Expression ret = new BitwiseNegationExpression(transformer.transform(expression));
-        ret.setSourcePosition(this);
-        ret.copyNodeMetaData(this);
-        return ret;
+    public ClassNode getType() {
+        ClassNode type = getExpression().getType();
+        if (ClassHelper.isStringType(type) || ClassHelper.isGStringType(type)) {
+            type = ClassHelper.PATTERN_TYPE; // GROOVY-10936
+        }
+        return type;
     }
 
     @Override
-    public String getText() {
-        return expression.getText();
+    public Expression transformExpression(final ExpressionTransformer transformer) {
+        Expression ret = new BitwiseNegationExpression(transformer.transform(getExpression()));
+        ret.setSourcePosition(this);
+        ret.copyNodeMetaData(this);
+        return ret;
     }
 
     @Override
-    public ClassNode getType() {
-        return expression.getType();
+    public void visit(final GroovyCodeVisitor visitor) {
+        visitor.visitBitwiseNegationExpression(this);
     }
-
 }
diff --git a/src/main/java/org/codehaus/groovy/ast/expr/PostfixExpression.java b/src/main/java/org/codehaus/groovy/ast/expr/PostfixExpression.java
index 496c81a4d4..5953377e06 100644
--- a/src/main/java/org/codehaus/groovy/ast/expr/PostfixExpression.java
+++ b/src/main/java/org/codehaus/groovy/ast/expr/PostfixExpression.java
@@ -30,49 +30,48 @@ public class PostfixExpression extends Expression {
     private final Token operation;
     private Expression expression;
 
-    public PostfixExpression(Expression expression, Token operation) {
+    public PostfixExpression(final Expression expression, final Token operation) {
         this.operation = operation;
-        this.expression = expression;
+        setExpression(expression);
     }
 
-    @Override
-    public String toString() {
-        return super.toString() + "[" + expression + operation + "]";
+    public void setExpression(final Expression expression) {
+        this.expression = expression;
     }
 
-    @Override
-    public void visit(GroovyCodeVisitor visitor) {
-        visitor.visitPostfixExpression(this);
+    public Expression getExpression() {
+        return expression;
     }
 
-    @Override
-    public Expression transformExpression(ExpressionTransformer transformer) {
-        Expression ret = new PostfixExpression(transformer.transform(expression), operation);
-        ret.setSourcePosition(this);
-        ret.copyNodeMetaData(this);
-        return ret;
+    public Token getOperation() {
+        return operation;
     }
 
-    public void setExpression(Expression expression) {
-        this.expression = expression;
+    @Override
+    public String getText() {
+        return "(" + getExpression().getText() + getOperation().getText() + ")";
     }
 
-    public Token getOperation() {
-        return operation;
+    @Override
+    public ClassNode getType() {
+        return getExpression().getType();
     }
 
-    public Expression getExpression() {
-        return expression;
+    @Override
+    public String toString() {
+        return super.toString() + "[" + getExpression() + getOperation() + "]";
     }
 
     @Override
-    public String getText() {
-        return "(" + expression.getText() + operation.getText() + ")";
+    public Expression transformExpression(final ExpressionTransformer transformer) {
+        Expression ret = new PostfixExpression(transformer.transform(getExpression()), getOperation());
+        ret.setSourcePosition(this);
+        ret.copyNodeMetaData(this);
+        return ret;
     }
 
     @Override
-    public ClassNode getType() {
-        return expression.getType();
+    public void visit(final GroovyCodeVisitor visitor) {
+        visitor.visitPostfixExpression(this);
     }
-
 }
diff --git a/src/main/java/org/codehaus/groovy/ast/expr/PrefixExpression.java b/src/main/java/org/codehaus/groovy/ast/expr/PrefixExpression.java
index 2e44e71091..f063ec35ec 100644
--- a/src/main/java/org/codehaus/groovy/ast/expr/PrefixExpression.java
+++ b/src/main/java/org/codehaus/groovy/ast/expr/PrefixExpression.java
@@ -30,49 +30,48 @@ public class PrefixExpression extends Expression {
     private final Token operation;
     private Expression expression;
 
-    public PrefixExpression(Token operation, Expression expression) {
+    public PrefixExpression(final Token operation, final Expression expression) {
         this.operation = operation;
-        this.expression = expression;
+        setExpression(expression);
     }
 
-    @Override
-    public String toString() {
-        return super.toString() + "[" + operation + expression + "]";
+    public void setExpression(final Expression expression) {
+        this.expression = expression;
     }
 
-    @Override
-    public void visit(GroovyCodeVisitor visitor) {
-        visitor.visitPrefixExpression(this);
+    public Expression getExpression() {
+        return expression;
     }
 
-    @Override
-    public Expression transformExpression(ExpressionTransformer transformer) {
-        Expression ret = new PrefixExpression(operation, transformer.transform(expression)); 
-        ret.setSourcePosition(this);
-        ret.copyNodeMetaData(this);
-        return ret;
+    public Token getOperation() {
+        return operation;
     }
 
-    public void setExpression(Expression expression) {
-        this.expression = expression;
+    @Override
+    public String getText() {
+        return "(" + getOperation().getText() + getExpression().getText() + ")";
     }
 
-    public Token getOperation() {
-        return operation;
+    @Override
+    public ClassNode getType() {
+        return getExpression().getType();
     }
 
-    public Expression getExpression() {
-        return expression;
+    @Override
+    public String toString() {
+        return super.toString() + "[" + getOperation() + getExpression() + "]";
     }
 
     @Override
-    public String getText() {
-        return "(" + operation.getText() + expression.getText() + ")";
+    public Expression transformExpression(final ExpressionTransformer transformer) {
+        Expression ret = new PrefixExpression(getOperation(), transformer.transform(getExpression()));
+        ret.setSourcePosition(this);
+        ret.copyNodeMetaData(this);
+        return ret;
     }
 
     @Override
-    public ClassNode getType() {
-        return expression.getType();
+    public void visit(final GroovyCodeVisitor visitor) {
+        visitor.visitPrefixExpression(this);
     }
-
 }
diff --git a/src/main/java/org/codehaus/groovy/ast/expr/SpreadExpression.java b/src/main/java/org/codehaus/groovy/ast/expr/SpreadExpression.java
index 25af602bed..06884ed6cd 100644
--- a/src/main/java/org/codehaus/groovy/ast/expr/SpreadExpression.java
+++ b/src/main/java/org/codehaus/groovy/ast/expr/SpreadExpression.java
@@ -29,7 +29,7 @@ public class SpreadExpression extends Expression {
 
     private final Expression expression;
 
-    public SpreadExpression(Expression expression) {
+    public SpreadExpression(final Expression expression) {
         this.expression = expression;
     }
 
@@ -38,25 +38,25 @@ public class SpreadExpression extends Expression {
     }
 
     @Override
-    public void visit(GroovyCodeVisitor visitor) {
-        visitor.visitSpreadExpression(this);
+    public String getText() {
+        return "*" + getExpression().getText();
     }
 
     @Override
-    public Expression transformExpression(ExpressionTransformer transformer) {
-        Expression ret = new SpreadExpression(transformer.transform(expression));
-        ret.setSourcePosition(this);
-        ret.copyNodeMetaData(this);
-        return ret;
+    public ClassNode getType() {
+        return getExpression().getType();
     }
 
     @Override
-    public String getText() {
-        return "*" + expression.getText();
+    public Expression transformExpression(final ExpressionTransformer transformer) {
+        Expression ret = new SpreadExpression(transformer.transform(getExpression()));
+        ret.setSourcePosition(this);
+        ret.copyNodeMetaData(this);
+        return ret;
     }
 
     @Override
-    public ClassNode getType() {
-        return expression.getType();
+    public void visit(final GroovyCodeVisitor visitor) {
+        visitor.visitSpreadExpression(this);
     }
 }
diff --git a/src/main/java/org/codehaus/groovy/ast/expr/SpreadMapExpression.java b/src/main/java/org/codehaus/groovy/ast/expr/SpreadMapExpression.java
index a548ee056e..15ab74db38 100644
--- a/src/main/java/org/codehaus/groovy/ast/expr/SpreadMapExpression.java
+++ b/src/main/java/org/codehaus/groovy/ast/expr/SpreadMapExpression.java
@@ -25,13 +25,12 @@ import org.codehaus.groovy.ast.GroovyCodeVisitor;
  * Represents a spread map expression *:m
  * in the map expression [1, *:m, 2, "c":100]
  * or in the method invoke expression func(1, *:m, 2, "c":100).
- *
  */
 public class SpreadMapExpression extends Expression {
 
     private final Expression expression;
 
-    public SpreadMapExpression(Expression expression) {
+    public SpreadMapExpression(final Expression expression) {
         this.expression = expression;
     }
 
@@ -40,25 +39,25 @@ public class SpreadMapExpression extends Expression {
     }
 
     @Override
-    public void visit(GroovyCodeVisitor visitor) {
-        visitor.visitSpreadMapExpression(this);
+    public String getText() {
+        return "*:" + getExpression().getText();
     }
 
     @Override
-    public Expression transformExpression(ExpressionTransformer transformer) {
-        Expression ret = new SpreadMapExpression(transformer.transform(expression));
-        ret.setSourcePosition(this);
-        ret.copyNodeMetaData(this);
-        return ret;
+    public ClassNode getType() {
+        return getExpression().getType();
     }
 
     @Override
-    public String getText() {
-        return "*:" + expression.getText();
+    public Expression transformExpression(final ExpressionTransformer transformer) {
+        Expression ret = new SpreadMapExpression(transformer.transform(getExpression()));
+        ret.setSourcePosition(this);
+        ret.copyNodeMetaData(this);
+        return ret;
     }
 
     @Override
-    public ClassNode getType() {
-        return expression.getType();
+    public void visit(final GroovyCodeVisitor visitor) {
+        visitor.visitSpreadMapExpression(this);
     }
 }
diff --git a/src/main/java/org/codehaus/groovy/ast/expr/TernaryExpression.java b/src/main/java/org/codehaus/groovy/ast/expr/TernaryExpression.java
index 80589e3c37..cc9911e541 100644
--- a/src/main/java/org/codehaus/groovy/ast/expr/TernaryExpression.java
+++ b/src/main/java/org/codehaus/groovy/ast/expr/TernaryExpression.java
@@ -18,9 +18,9 @@
  */
 package org.codehaus.groovy.ast.expr;
 
-import org.codehaus.groovy.ast.ClassHelper;
 import org.codehaus.groovy.ast.ClassNode;
 import org.codehaus.groovy.ast.GroovyCodeVisitor;
+import org.codehaus.groovy.ast.tools.WideningCategories;
 
 /**
  * Represents a ternary expression (booleanExpression) ? expression : expression
@@ -28,62 +28,60 @@ import org.codehaus.groovy.ast.GroovyCodeVisitor;
 public class TernaryExpression extends Expression {
 
     private final BooleanExpression booleanExpression;
-    private final Expression trueExpression;
+    private final Expression truthExpression;
     private final Expression falseExpression;
 
-    public TernaryExpression(
-        BooleanExpression booleanExpression,
-        Expression trueExpression,
-        Expression falseExpression) {
+    public TernaryExpression(final BooleanExpression booleanExpression,
+            final Expression truthExpression, final Expression falseExpression) {
         this.booleanExpression = booleanExpression;
-        this.trueExpression = trueExpression;
+        this.truthExpression = truthExpression;
         this.falseExpression = falseExpression;
     }
-    @Override
-    public void visit(GroovyCodeVisitor visitor) {
-        visitor.visitTernaryExpression(this);
+
+    public BooleanExpression getBooleanExpression() {
+        return booleanExpression;
     }
 
-    @Override
-    public Expression transformExpression(ExpressionTransformer transformer) {
-        Expression ret = new TernaryExpression(
-                (BooleanExpression) transformer.transform(booleanExpression),
-                transformer.transform(trueExpression),
-                transformer.transform(falseExpression)); 
-        ret.setSourcePosition(this);
-        ret.copyNodeMetaData(this);
-        return ret; 
+    public Expression getTrueExpression() {
+        return truthExpression;
     }
 
-    @Override
-    public String toString() {
-        return super.toString() +"[" + booleanExpression + " ? " + trueExpression + " : " + falseExpression + "]";
+    public Expression getFalseExpression() {
+        return falseExpression;
     }
 
-    public BooleanExpression getBooleanExpression() {
-        return booleanExpression;
+    @Override
+    public String getText() {
+        return "(" + getBooleanExpression().getText() + ") ? " + getTrueExpression().getText() + " : " + getFalseExpression().getText();
     }
 
-    public Expression getFalseExpression() {
-        return falseExpression;
+    /**
+     * @see org.codehaus.groovy.classgen.asm.BinaryExpressionHelper#evaluateTernaryExpression(TernaryExpression)
+     */
+    @Override
+    public ClassNode getType() {
+        return WideningCategories.lowestUpperBound(getTrueExpression().getType(), getFalseExpression().getType());
     }
 
-    public Expression getTrueExpression() {
-        return trueExpression;
+    @Override
+    public String toString() {
+        return super.toString() + "[" + getBooleanExpression() + " ? " + getTrueExpression() + " : " + getFalseExpression() + "]";
     }
 
     @Override
-    public String getText() {
-        return "("
-            + booleanExpression.getText()
-            + ") ? "
-            + trueExpression.getText()
-            + " : "
-            + falseExpression.getText();
+    public Expression transformExpression(final ExpressionTransformer transformer) {
+        Expression ret = new TernaryExpression(
+                (BooleanExpression) transformer.transform(getBooleanExpression()),
+                                    transformer.transform(getTrueExpression()),
+                                    transformer.transform(getFalseExpression())
+        );
+        ret.setSourcePosition(this);
+        ret.copyNodeMetaData(this);
+        return ret;
     }
 
     @Override
-    public ClassNode getType() {
-        return ClassHelper.OBJECT_TYPE;
+    public void visit(final GroovyCodeVisitor visitor) {
+        visitor.visitTernaryExpression(this);
     }
 }
diff --git a/src/main/java/org/codehaus/groovy/ast/expr/UnaryMinusExpression.java b/src/main/java/org/codehaus/groovy/ast/expr/UnaryMinusExpression.java
index 7dedb4a8ef..b5a5ec378a 100644
--- a/src/main/java/org/codehaus/groovy/ast/expr/UnaryMinusExpression.java
+++ b/src/main/java/org/codehaus/groovy/ast/expr/UnaryMinusExpression.java
@@ -25,7 +25,7 @@ public class UnaryMinusExpression extends Expression {
 
     private final Expression expression;
 
-    public UnaryMinusExpression(Expression expression) {
+    public UnaryMinusExpression(final Expression expression) {
         this.expression = expression;
     }
 
@@ -33,31 +33,31 @@ public class UnaryMinusExpression extends Expression {
         return expression;
     }
 
-    @Override
-    public void visit(GroovyCodeVisitor visitor) {
-        visitor.visitUnaryMinusExpression(this);
-    }
-
-    @Override
-    public Expression transformExpression(ExpressionTransformer transformer) {
-        Expression ret = new UnaryMinusExpression(transformer.transform(expression));
-        ret.setSourcePosition(this);
-        ret.copyNodeMetaData(this);
-        return ret;
-    }
-
     @Override
     public String getText() {
-        return expression.getText();
+        return "-(" + getExpression().getText() + ")";
     }
 
     @Override
     public ClassNode getType() {
-        return expression.getType();
+        return getExpression().getType();
     }
 
+    @Deprecated
     public boolean isDynamic() {
         return false;
     }
 
+    @Override
+    public Expression transformExpression(final ExpressionTransformer transformer) {
+        Expression ret = new UnaryMinusExpression(transformer.transform(getExpression()));
+        ret.setSourcePosition(this);
+        ret.copyNodeMetaData(this);
+        return ret;
+    }
+
+    @Override
+    public void visit(final GroovyCodeVisitor visitor) {
+        visitor.visitUnaryMinusExpression(this);
+    }
 }
diff --git a/src/main/java/org/codehaus/groovy/ast/expr/UnaryPlusExpression.java b/src/main/java/org/codehaus/groovy/ast/expr/UnaryPlusExpression.java
index f5d4e9dcc9..6092f04d60 100644
--- a/src/main/java/org/codehaus/groovy/ast/expr/UnaryPlusExpression.java
+++ b/src/main/java/org/codehaus/groovy/ast/expr/UnaryPlusExpression.java
@@ -25,7 +25,7 @@ public class UnaryPlusExpression extends Expression {
 
     private final Expression expression;
 
-    public UnaryPlusExpression(Expression expression) {
+    public UnaryPlusExpression(final Expression expression) {
         this.expression = expression;
     }
 
@@ -33,31 +33,31 @@ public class UnaryPlusExpression extends Expression {
         return expression;
     }
 
-    @Override
-    public void visit(GroovyCodeVisitor visitor) {
-        visitor.visitUnaryPlusExpression(this);
-    }
-
-    @Override
-    public Expression transformExpression(ExpressionTransformer transformer) {
-        Expression ret = new UnaryPlusExpression(transformer.transform(expression));
-        ret.setSourcePosition(this);
-        ret.copyNodeMetaData(this);
-        return ret;
-    }
-
     @Override
     public String getText() {
-        return expression.getText();
+        return "+(" + getExpression().getText() + ")";
     }
 
     @Override
     public ClassNode getType() {
-        return expression.getType();
+        return getExpression().getType(); // TODO: promote byte, char and short to int
     }
 
+    @Deprecated
     public boolean isDynamic() {
         return false;
     }
 
-}
\ No newline at end of file
+    @Override
+    public Expression transformExpression(final ExpressionTransformer transformer) {
+        Expression ret = new UnaryPlusExpression(transformer.transform(getExpression()));
+        ret.setSourcePosition(this);
+        ret.copyNodeMetaData(this);
+        return ret;
+    }
+
+    @Override
+    public void visit(final GroovyCodeVisitor visitor) {
+        visitor.visitUnaryPlusExpression(this);
+    }
+}
diff --git a/src/test/groovy/bugs/TernaryOperatorTest.groovy b/src/test/groovy/bugs/TernaryOperatorTest.groovy
deleted file mode 100644
index fd740d6f7e..0000000000
--- a/src/test/groovy/bugs/TernaryOperatorTest.groovy
+++ /dev/null
@@ -1,29 +0,0 @@
-/*
- *  Licensed to the Apache Software Foundation (ASF) under one
- *  or more contributor license agreements.  See the NOTICE file
- *  distributed with this work for additional information
- *  regarding copyright ownership.  The ASF licenses this file
- *  to you under the Apache License, Version 2.0 (the
- *  "License"); you may not use this file except in compliance
- *  with the License.  You may obtain a copy of the License at
- *
- *    http://www.apache.org/licenses/LICENSE-2.0
- *
- *  Unless required by applicable law or agreed to in writing,
- *  software distributed under the License is distributed on an
- *  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
- *  KIND, either express or implied.  See the License for the
- *  specific language governing permissions and limitations
- *  under the License.
- */
-package groovy.bugs
-
-import groovy.test.GroovyTestCase
-
-class TernaryOperatorBugTest extends GroovyTestCase {
-    void testTernaryOperator() {
-        assertScript '''
-            Class dsClass = true ? LinkedHashSet : HashSet
-        '''
-    }
-}
diff --git a/src/test/groovy/operator/TernaryOperatorsTest.groovy b/src/test/groovy/operator/TernaryOperatorsTest.groovy
index 59e24d9b98..edb90b580b 100644
--- a/src/test/groovy/operator/TernaryOperatorsTest.groovy
+++ b/src/test/groovy/operator/TernaryOperatorsTest.groovy
@@ -18,33 +18,37 @@
  */
 package groovy.operator
 
-import groovy.test.GroovyTestCase
+import org.junit.Test
 
-class TernaryOperatorsTest extends GroovyTestCase {
+import java.util.regex.Pattern
 
+final class TernaryOperatorsTest {
+
+    @Test
     void testSimpleUse() {
         def y = 5
 
         def x = (y > 1) ? "worked" : "failed"
         assert x == "worked"
 
-
-        x = (y < 4) ? "failed" : "worked"
+            x = (y < 4) ? "failed" : "worked"
         assert x == "worked"
     }
 
+    @Test
     void testUseInParameterCalling() {
         def z = 123
         assertCalledWithFoo(z > 100 ? "foo" : "bar")
         assertCalledWithFoo(z < 100 ? "bar" : "foo")
-       }
+    }
 
-    def assertCalledWithFoo(param) {
+    void assertCalledWithFoo(param) {
         println "called with param ${param}"
         assert param == "foo"
     }
 
-    void testWithBoolean(){
+    @Test
+    void testWithBoolean() {
         def a = 1
         def x = a!=null ? a!=2 : a!=1
         assert x == true
@@ -52,6 +56,7 @@ class TernaryOperatorsTest extends GroovyTestCase {
         assert y == false
     }
 
+    @Test
     void testElvisOperator() {
         def a = 1
         def x = a?:2
@@ -74,12 +79,14 @@ class TernaryOperatorsTest extends GroovyTestCase {
         assert ret2 == 'b'
     }
 
+    @Test
     void testForType() {
         boolean b = false
         int anInt = b ? 100 : 100 / 3
         assert anInt.class == Integer
     }
 
+    @Test
     void testBytecodeRegisters() {
         // this code will blow up if the true and false parts
         // are not handled correctly in regards to the registers.
@@ -88,6 +95,7 @@ class TernaryOperatorsTest extends GroovyTestCase {
         assert true
     }
 
+    @Test
     void testLineBreaks() {
         def bar = 0 ? "moo" : "cow"
         assert bar == 'cow'
@@ -119,4 +127,25 @@ class TernaryOperatorsTest extends GroovyTestCase {
                 : "cow"
         assert bar == 'cow'
     }
+
+    // GROOVY-10936
+    @Test
+    void testCommonType() {
+        def random = new Random()
+
+        def staticPatternSlashy = ~/some static pattern \w+/
+        def staticPatternString = ~"some static pattern \\w+"
+        def dynamicPatternSlashy = (random.nextInt() % 2 == 0) ? ~/pattern one \w+/  : ~/pattern two \w+/
+        def dynamicPatternString = (random.nextInt() % 2 == 0) ? ~"pattern one \\w+" : ~"pattern two \\w+"
+
+        assert staticPatternSlashy  instanceof Pattern
+        assert staticPatternString  instanceof Pattern
+        assert dynamicPatternSlashy instanceof Pattern
+        assert dynamicPatternString instanceof Pattern
+    }
+
+    @Test // see StatementMetaTypeChooser#resolveType
+    void testClassExpressionIsJavaLangClassNotLiteralType() {
+        Class dsClass = true ? LinkedHashSet : HashSet
+    }
 }
