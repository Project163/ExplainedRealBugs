diff --git a/src/test/groovy/StringTest.groovy b/src/test/groovy/StringTest.groovy
index 56cb2d7b4d..7d70733ce9 100644
--- a/src/test/groovy/StringTest.groovy
+++ b/src/test/groovy/StringTest.groovy
@@ -231,6 +231,16 @@ foo
     void testDollarEscaping() {
         def text = $/a/b\c$$ $//$
         assert text == 'a/b\\c$ /'
+
+        //GROOVY-8171
+        text = $/$$//$
+        assert text == '$/'
+
+        text = $/$$$$//$
+        assert text == '$$/'
+
+        text = $/$$$$$//$
+        assert text == '$$/'
     }
 
     void testSplit() {
diff --git a/subprojects/parser-antlr4/src/main/java/org/apache/groovy/parser/antlr4/util/StringUtils.java b/subprojects/parser-antlr4/src/main/java/org/apache/groovy/parser/antlr4/util/StringUtils.java
index 7b5d376128..b674734da4 100644
--- a/subprojects/parser-antlr4/src/main/java/org/apache/groovy/parser/antlr4/util/StringUtils.java
+++ b/subprojects/parser-antlr4/src/main/java/org/apache/groovy/parser/antlr4/util/StringUtils.java
@@ -108,8 +108,8 @@ public class StringUtils {
 			}
 
 			if (slashyType == DOLLAR_SLASHY) {
-				text = replace(text,"$$", "$");
 				text = replace(text,"$/", "/");
+				text = replace(text,"$$", "$");
 			}
 
 		} else if (slashyType == NONE_SLASHY) {
