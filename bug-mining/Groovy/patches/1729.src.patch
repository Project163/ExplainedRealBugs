diff --git a/src/main/groovy/xml/dom/DOMCategory.java b/src/main/groovy/xml/dom/DOMCategory.java
index fe666b35f5..79716999fe 100644
--- a/src/main/groovy/xml/dom/DOMCategory.java
+++ b/src/main/groovy/xml/dom/DOMCategory.java
@@ -260,7 +260,12 @@ public class DOMCategory {
     }
 
     public static void setValue(Element self, String value) {
-        self.getFirstChild().setNodeValue(value);
+        Node firstChild = self.getFirstChild();
+        if (firstChild == null) {
+            firstChild = self.getOwnerDocument().createTextNode(value);
+            self.appendChild(firstChild);
+        }
+        firstChild.setNodeValue(value);
     }
 
     public static void putAt(Element self, String property, Object value) {
diff --git a/src/test/groovy/util/XmlParserTest.groovy b/src/test/groovy/util/XmlParserTest.groovy
index d999d885a8..a9c4d150a1 100644
--- a/src/test/groovy/util/XmlParserTest.groovy
+++ b/src/test/groovy/util/XmlParserTest.groovy
@@ -199,6 +199,7 @@ p() {
     }
 
     void testElement() {
+        GpathSyntaxTestSupport.checkUpdateElementValue(getRoot)
         GpathSyntaxTestSupport.checkElement(getRoot)
         GpathSyntaxTestSupport.checkFindElement(getRoot)
         GpathSyntaxTestSupport.checkElementTypes(getRoot)
diff --git a/src/test/groovy/util/XmlSlurperTest.groovy b/src/test/groovy/util/XmlSlurperTest.groovy
index f01f03dc44..36984e6d2e 100644
--- a/src/test/groovy/util/XmlSlurperTest.groovy
+++ b/src/test/groovy/util/XmlSlurperTest.groovy
@@ -53,6 +53,8 @@ class XmlSlurperTest extends GroovyTestCase {
     }
 
     void testElement() {
+        // can't update value directly with XmlSlurper, use replaceNode instead
+        // GpathSyntaxTestSupport.checkUpdateElementValue(getRoot)
         GpathSyntaxTestSupport.checkElement(getRoot)
         GpathSyntaxTestSupport.checkFindElement(getRoot)
         GpathSyntaxTestSupport.checkElementTypes(getRoot)
diff --git a/src/test/groovy/xml/GpathSyntaxTestSupport.groovy b/src/test/groovy/xml/GpathSyntaxTestSupport.groovy
index 7ff26696f3..3b22102371 100644
--- a/src/test/groovy/xml/GpathSyntaxTestSupport.groovy
+++ b/src/test/groovy/xml/GpathSyntaxTestSupport.groovy
@@ -47,6 +47,26 @@ class GpathSyntaxTestSupport {
 </root>
 '''
 
+    static void checkUpdateElementValue(Closure getRoot) {
+        def root = getRoot('<root><a>foo</a><b/></root>')
+        assert root != null
+        def a = root.a[0]
+        def b = root.b[0]
+        a.value = a.text() + 'bar'
+        b.value = 'baz'
+        String actual = XmlUtil.serialize(root)
+        def expected = '''\
+<?xml version="1.0" encoding="UTF-8"?>
+<root>
+  <a>foobar</a>
+  <b>baz</b>
+</root>
+'''
+        XMLUnit.ignoreWhitespace = true
+        def xmlDiff = new Diff(actual, expected)
+        assert xmlDiff.similar(), xmlDiff.toString()
+    }
+
     static void checkElement(Closure getRoot) {
         def root = getRoot(sampleXml)
         assert root != null
diff --git a/src/test/groovy/xml/dom/DOMCategoryTest.groovy b/src/test/groovy/xml/dom/DOMCategoryTest.groovy
index 7d9e5a054f..779e4e028b 100644
--- a/src/test/groovy/xml/dom/DOMCategoryTest.groovy
+++ b/src/test/groovy/xml/dom/DOMCategoryTest.groovy
@@ -45,6 +45,7 @@ class DOMCategoryTest extends GroovyTestCase {
 
     void testElement() {
         use(DOMCategory) {
+            GpathSyntaxTestSupport.checkUpdateElementValue(getRoot)
             GpathSyntaxTestSupport.checkElement(getRoot)
             GpathSyntaxTestSupport.checkFindElement(getRoot)
             GpathSyntaxTestSupport.checkElementTypes(getRoot)
