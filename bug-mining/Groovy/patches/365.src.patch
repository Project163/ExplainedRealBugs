diff --git a/src/main/org/codehaus/groovy/runtime/DefaultGroovyMethods.java b/src/main/org/codehaus/groovy/runtime/DefaultGroovyMethods.java
index 1169dfd9c2..f76f4c80c2 100644
--- a/src/main/org/codehaus/groovy/runtime/DefaultGroovyMethods.java
+++ b/src/main/org/codehaus/groovy/runtime/DefaultGroovyMethods.java
@@ -6355,8 +6355,11 @@ public class DefaultGroovyMethods {
     public static void withWriter(Writer writer, Closure closure) throws IOException {
         try {
             closure.call(writer);
-            writer.flush();
-
+            try {
+                writer.flush();
+            } catch(IOException e) {
+                // try to continue even in case of error
+            }
             Writer temp = writer;
             writer = null;
             temp.close();
diff --git a/src/test/org/codehaus/groovy/runtime/WithResourceStreamClosedTest.groovy b/src/test/org/codehaus/groovy/runtime/WithResourceStreamClosedTest.groovy
new file mode 100644
index 0000000000..d48ce47b2c
--- /dev/null
+++ b/src/test/org/codehaus/groovy/runtime/WithResourceStreamClosedTest.groovy
@@ -0,0 +1,34 @@
+package org.codehaus.groovy.runtime;
+
+/** 
+ * Test withWriter with inner loop closing the stream
+ * in advance.
+ * Some methods e.g. transformChar() close the streams.
+ * If used inside a withWriter(), it must not lead to 
+ * problems
+ * 
+ * @author Joachim Baumann</a>
+ * @version $Revision$
+ */
+
+class WithResourceStreamClosedTest extends GroovyTestCase {
+
+	void testWithWriterStreamClosed() {
+
+	    def outer = new StringWriter()
+	    def reader = new StringReader("Hallo Welt")
+
+	    outer.withWriter { writer ->
+	        reader.transformChar(writer) { it }
+	      
+	    }
+		assert outer.toString() == "Hallo Welt"
+	}
+	void testWithOutputStreamClosed() {
+	    def os = new ByteArrayOutputStream()
+	    os.withStream { out ->
+	        os.close()     
+	    }
+	}
+
+}
