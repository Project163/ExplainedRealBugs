diff --git a/src/main/org/codehaus/groovy/classgen/asm/OperandStack.java b/src/main/org/codehaus/groovy/classgen/asm/OperandStack.java
index a1b98eabd1..2a64e23d58 100644
--- a/src/main/org/codehaus/groovy/classgen/asm/OperandStack.java
+++ b/src/main/org/codehaus/groovy/classgen/asm/OperandStack.java
@@ -669,6 +669,7 @@ public class OperandStack {
         ClassNode type = variable.getType();
         // value is on stack
         if (variable.isHolder()) {
+            doGroovyCast(type);
             box();
             mv.visitVarInsn(ALOAD, idx);
             mv.visitTypeInsn(CHECKCAST, "groovy/lang/Reference");
diff --git a/src/test/gls/types/OperationsResultTypeTest.groovy b/src/test/gls/types/OperationsResultTypeTest.groovy
index a35fb22ee0..6d48d9249b 100644
--- a/src/test/gls/types/OperationsResultTypeTest.groovy
+++ b/src/test/gls/types/OperationsResultTypeTest.groovy
@@ -14,4 +14,16 @@ public class OperationsResultTypeTest extends gls.CompilableTestSupport {
           }
       """
   }
-}
\ No newline at end of file
+
+  void testDeclaredTypeIsKeptForSharedVariable() {
+    assertScript '''
+        float myFloat = 40f
+        myFloat -= 20f
+        assert myFloat.class == Float
+        println "$myFloat"
+        (0..1).each { i ->
+            assert myFloat.class == Float
+        }
+    '''
+  }
+}
