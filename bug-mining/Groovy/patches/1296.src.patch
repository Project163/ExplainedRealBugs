diff --git a/src/main/org/codehaus/groovy/ast/ModuleNode.java b/src/main/org/codehaus/groovy/ast/ModuleNode.java
index 3a662e84b9..1dbf896ca7 100644
--- a/src/main/org/codehaus/groovy/ast/ModuleNode.java
+++ b/src/main/org/codehaus/groovy/ast/ModuleNode.java
@@ -236,7 +236,10 @@ public class ModuleNode extends ASTNode implements Opcodes {
     }
 
     public ClassNode getScriptClassDummy() {
-        if (scriptDummy!=null) return scriptDummy;
+        if (scriptDummy!=null) {
+        	setScriptBaseClassFromConfig(scriptDummy);
+        	return scriptDummy;
+        }
         
         String name = getPackageName();
         if (name == null) {
@@ -248,20 +251,12 @@ public class ModuleNode extends ASTNode implements Opcodes {
         }
         name += extractClassFromFileDescription();
 
-        String baseClassName = null;
-        if (unit != null) baseClassName = unit.getConfig().getScriptBaseClass();
-        ClassNode baseClass = null;
-        if (baseClassName!=null) {
-            baseClass = ClassHelper.make(baseClassName);
-        }
-        if (baseClass == null) {
-            baseClass = ClassHelper.SCRIPT_TYPE;
-        }
         ClassNode classNode;
         if (isPackageInfo()) {
             classNode = new ClassNode(name, ACC_ABSTRACT | ACC_INTERFACE, ClassHelper.OBJECT_TYPE);
         } else {
-            classNode = new ClassNode(name, ACC_PUBLIC, baseClass);
+            classNode = new ClassNode(name, ACC_PUBLIC, ClassHelper.SCRIPT_TYPE);
+            setScriptBaseClassFromConfig(classNode);
             classNode.setScript(true);
             classNode.setScriptBody(true);
         }
@@ -270,6 +265,18 @@ public class ModuleNode extends ASTNode implements Opcodes {
         return classNode;
     }
     
+    private void setScriptBaseClassFromConfig(ClassNode cn) {
+        if (unit != null) {
+            String baseClassName = null;
+        	baseClassName = unit.getConfig().getScriptBaseClass();
+        	if(baseClassName != null) {
+            	if(!cn.getSuperClass().getName().equals(baseClassName)) {
+            		cn.setSuperClass(ClassHelper.make(baseClassName));
+            	}
+        	}
+        }
+    }
+    
     protected ClassNode createStatementsClass() {
         ClassNode classNode = getScriptClassDummy();
         if (classNode.getName().endsWith("package-info")) {
diff --git a/src/test/groovy/bugs/Groovy4243Bug.groovy b/src/test/groovy/bugs/Groovy4243Bug.groovy
new file mode 100644
index 0000000000..fc14e46a76
--- /dev/null
+++ b/src/test/groovy/bugs/Groovy4243Bug.groovy
@@ -0,0 +1,31 @@
+package groovy.bugs
+
+import org.codehaus.groovy.control.*
+
+class Groovy4243Bug extends GroovyTestCase {
+    void testScriptBaseClassWithAnonymousInnerClass() {
+        def configuration = new CompilerConfiguration()
+        configuration.scriptBaseClass = TestScript4243.name
+        def classLoader = new GroovyClassLoader(getClass().classLoader, configuration)
+
+        // This works
+        def scriptClass = classLoader.parseClass('''
+            def r = new TestRunnable()
+            class TestRunnable implements Runnable {
+                public void run() {}
+            }
+        ''')
+        assert TestScript4243.isAssignableFrom(scriptClass)
+
+        // This does not work
+        scriptClass = classLoader.parseClass('''
+            def r = new Runnable() {
+                public void run() { }
+            }
+        ''')
+        assert Script.isAssignableFrom(scriptClass)
+        assert TestScript4243.isAssignableFrom(scriptClass) // <-- fails here    
+    }
+}
+
+abstract class TestScript4243 extends Script { }
\ No newline at end of file
