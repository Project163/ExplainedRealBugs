diff --git a/src/main/org/codehaus/groovy/classgen/ClassGenerator.java b/src/main/org/codehaus/groovy/classgen/ClassGenerator.java
index 7ccbf13724..d6fff25ffb 100644
--- a/src/main/org/codehaus/groovy/classgen/ClassGenerator.java
+++ b/src/main/org/codehaus/groovy/classgen/ClassGenerator.java
@@ -2819,7 +2819,9 @@ public class ClassGenerator extends CodeVisitorSupport implements GroovyClassVis
     protected void onLineNumber(ASTNode statement) {
         int number = statement.getLineNumber();
         if (number >= 0 && cv != null) {
-            cv.visitLineNumber(number, new Label());
+            Label l = new Label();
+            cv.visitLabel(l);
+            cv.visitLineNumber(number, l);
         }
     }
 
