diff --git a/src/main/groovy/lang/GroovyClassLoader.java b/src/main/groovy/lang/GroovyClassLoader.java
index 04fb5d9d9e..44bb734a2c 100644
--- a/src/main/groovy/lang/GroovyClassLoader.java
+++ b/src/main/groovy/lang/GroovyClassLoader.java
@@ -34,7 +34,9 @@
  */
 package groovy.lang;
 
+import java.io.File;
 import java.io.FileInputStream;
+import java.io.FileOutputStream;
 import java.io.IOException;
 import java.io.InputStream;
 
@@ -54,6 +56,7 @@ import org.objectweb.asm.ClassWriter;
 public class GroovyClassLoader extends ClassLoader {
 
     private Class generatedClass = null;
+	private String outputDir;
 
     public GroovyClassLoader() {
         this(Thread.currentThread().getContextClassLoader());
@@ -61,6 +64,7 @@ public class GroovyClassLoader extends ClassLoader {
 
     public GroovyClassLoader(ClassLoader loader) {
         super(loader);
+		outputDir = System.getProperty("groovy.output.dir");
     }
 
     /**
@@ -104,7 +108,7 @@ public class GroovyClassLoader extends ClassLoader {
     protected void onClassNode(ClassWriter classWriter, ClassNode classNode) {
         byte[] code = classWriter.toByteArray();
 
-        //System.out.println("About to load class: " + classNode.getName());
+		debugWriteClassfile(classNode, code);
 
         Class theClass = defineClass(classNode.getName(), code, 0, code.length);
 
@@ -113,11 +117,37 @@ public class GroovyClassLoader extends ClassLoader {
         }
     }
 
-    protected CompilerFacade createCompiler(CompileUnit unit) {
+    private void debugWriteClassfile(ClassNode classNode, byte[] code) {
+		if (outputDir != null) {
+			String filename = classNode.getName().replace('.', File.separatorChar) + ".class";
+			System.err.println("Writing: " + filename);
+			int index = filename.lastIndexOf(File.separator);
+			String dirname;
+			if (index != -1) {
+				dirname = filename.substring(0, index);
+			} else {
+				dirname = "";
+			}
+			File outputFile = new File(new File(outputDir), filename);
+			System.err.println("Writing: " + outputFile);
+			try {
+				new File(new File(outputDir), dirname).mkdirs();
+				FileOutputStream fos = new FileOutputStream(outputFile);
+				fos.write(code, 0, code.length);
+				fos.close();
+			} catch (IOException ioe) {
+				ioe.printStackTrace();
+			}
+		}
+	}
+
+	protected CompilerFacade createCompiler(CompileUnit unit) {
         return new CompilerFacade(this, unit) {
             protected void onClass(ClassWriter classWriter, ClassNode classNode) {
                 onClassNode(classWriter, classNode);
             }
         };
     }
+
+
 }
diff --git a/src/main/groovy/lang/MetaClassRegistry.java b/src/main/groovy/lang/MetaClassRegistry.java
index 421997e763..b37b586695 100644
--- a/src/main/groovy/lang/MetaClassRegistry.java
+++ b/src/main/groovy/lang/MetaClassRegistry.java
@@ -46,14 +46,12 @@
 package groovy.lang;
 
 import java.beans.IntrospectionException;
-import java.lang.reflect.Method;
 import java.util.Collections;
 import java.util.HashMap;
 import java.util.Map;
 
 import org.codehaus.groovy.runtime.DefaultGroovyMethods;
 import org.codehaus.groovy.runtime.InvokerException;
-import org.codehaus.groovy.runtime.MethodHelper;
 
 /**
  * A registery of MetaClass instances which caches introspection & 
diff --git a/src/main/groovy/servlet/GroovyServlet.java b/src/main/groovy/servlet/GroovyServlet.java
index ca310a356a..33e01e571b 100644
--- a/src/main/groovy/servlet/GroovyServlet.java
+++ b/src/main/groovy/servlet/GroovyServlet.java
@@ -1,8 +1,33 @@
 /*
- * Created on Nov 21, 2003
+ * Copyright 2003 (C) Sam Pullara. All Rights Reserved.
  * 
- * To change the template for this generated file go to Window - Preferences -
- * Java - Code Generation - Code and Comments
+ * Redistribution and use of this software and associated documentation
+ * ("Software"), with or without modification, are permitted provided that the
+ * following conditions are met: 1. Redistributions of source code must retain
+ * copyright statements and notices. Redistributions must also contain a copy
+ * of this document. 2. Redistributions in binary form must reproduce the above
+ * copyright notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the distribution. 3.
+ * The name "groovy" must not be used to endorse or promote products derived
+ * from this Software without prior written permission of The Codehaus. For
+ * written permission, please contact info@codehaus.org. 4. Products derived
+ * from this Software may not be called "groovy" nor may "groovy" appear in
+ * their names without prior written permission of The Codehaus. "groovy" is a
+ * registered trademark of The Codehaus. 5. Due credit should be given to The
+ * Codehaus - http://groovy.codehaus.org/
+ * 
+ * THIS SOFTWARE IS PROVIDED BY THE CODEHAUS AND CONTRIBUTORS ``AS IS'' AND ANY
+ * EXPRESSED OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED. IN NO EVENT SHALL THE CODEHAUS OR ITS CONTRIBUTORS BE LIABLE FOR
+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
+ * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
+ * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
+ * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
+ * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
+ * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
+ * DAMAGE.
+ *  
  */
 package groovy.servlet;
 
diff --git a/src/main/org/codehaus/groovy/ast/CodeVisitorSupport.java b/src/main/org/codehaus/groovy/ast/CodeVisitorSupport.java
index f38b72b01e..e3512f8ff4 100644
--- a/src/main/org/codehaus/groovy/ast/CodeVisitorSupport.java
+++ b/src/main/org/codehaus/groovy/ast/CodeVisitorSupport.java
@@ -62,6 +62,7 @@ import org.codehaus.groovy.ast.expr.ListExpression;
 import org.codehaus.groovy.ast.expr.MapEntryExpression;
 import org.codehaus.groovy.ast.expr.MapExpression;
 import org.codehaus.groovy.ast.expr.MethodCallExpression;
+import org.codehaus.groovy.ast.expr.NotExpression;
 import org.codehaus.groovy.ast.expr.PropertyExpression;
 import org.codehaus.groovy.ast.expr.RangeExpression;
 import org.codehaus.groovy.ast.expr.RegexExpression;
@@ -161,9 +162,13 @@ public abstract class CodeVisitorSupport implements GroovyCodeVisitor {
         expression.getRightExpression().visit(this);
     }
 
-    public void visitBooleanExpression(BooleanExpression expression) {
-        expression.getExpression().visit(this);
-    }
+	public void visitBooleanExpression(BooleanExpression expression) {
+		expression.getExpression().visit(this);
+	}
+
+	public void visitNotExpression(NotExpression expression) {
+		expression.getExpression().visit(this);
+	}
 
     public void visitClosureExpression(ClosureExpression expression) {
         expression.getCode().visit(this);
diff --git a/src/main/org/codehaus/groovy/ast/GroovyCodeVisitor.java b/src/main/org/codehaus/groovy/ast/GroovyCodeVisitor.java
index 1bdebf95b1..e9d4fc266a 100644
--- a/src/main/org/codehaus/groovy/ast/GroovyCodeVisitor.java
+++ b/src/main/org/codehaus/groovy/ast/GroovyCodeVisitor.java
@@ -91,4 +91,5 @@ public interface GroovyCodeVisitor {
     public void visitRegexExpression(RegexExpression expression);
     public void visitGStringExpression(GStringExpression expression);
     public void visitArrayExpression(ArrayExpression expression);
+	public void visitNotExpression(NotExpression expression);
 }
diff --git a/src/main/org/codehaus/groovy/ast/expr/NotExpression.java b/src/main/org/codehaus/groovy/ast/expr/NotExpression.java
new file mode 100644
index 0000000000..9a8fea926a
--- /dev/null
+++ b/src/main/org/codehaus/groovy/ast/expr/NotExpression.java
@@ -0,0 +1,52 @@
+/*
+ * Copyright 2003 (C) Sam Pullara. All Rights Reserved.
+ * 
+ * Redistribution and use of this software and associated documentation
+ * ("Software"), with or without modification, are permitted provided that the
+ * following conditions are met: 1. Redistributions of source code must retain
+ * copyright statements and notices. Redistributions must also contain a copy
+ * of this document. 2. Redistributions in binary form must reproduce the above
+ * copyright notice, this list of conditions and the following disclaimer in
+ * the documentation and/or other materials provided with the distribution. 3.
+ * The name "groovy" must not be used to endorse or promote products derived
+ * from this Software without prior written permission of The Codehaus. For
+ * written permission, please contact info@codehaus.org. 4. Products derived
+ * from this Software may not be called "groovy" nor may "groovy" appear in
+ * their names without prior written permission of The Codehaus. "groovy" is a
+ * registered trademark of The Codehaus. 5. Due credit should be given to The
+ * Codehaus - http://groovy.codehaus.org/
+ * 
+ * THIS SOFTWARE IS PROVIDED BY THE CODEHAUS AND CONTRIBUTORS ``AS IS'' AND ANY
+ * EXPRESSED OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED. IN NO EVENT SHALL THE CODEHAUS OR ITS CONTRIBUTORS BE LIABLE FOR
+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
+ * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
+ * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
+ * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
+ * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
+ * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
+ * DAMAGE.
+ *  
+ */
+package org.codehaus.groovy.ast.expr;
+
+import org.codehaus.groovy.ast.GroovyCodeVisitor;
+
+/**
+ * @author sam
+ *
+ * To change the template for this generated type comment go to
+ * Window - Preferences - Java - Code Generation - Code and Comments
+ */
+public class NotExpression extends BooleanExpression {
+
+	public NotExpression(Expression expression) {
+		super(expression);
+	}
+
+	public void visit(GroovyCodeVisitor visitor) {
+		visitor.visitNotExpression(this);
+	}
+
+}
diff --git a/src/main/org/codehaus/groovy/classgen/ClassGenerator.java b/src/main/org/codehaus/groovy/classgen/ClassGenerator.java
index 40f7b081d4..7e968455db 100644
--- a/src/main/org/codehaus/groovy/classgen/ClassGenerator.java
+++ b/src/main/org/codehaus/groovy/classgen/ClassGenerator.java
@@ -69,6 +69,7 @@ import org.codehaus.groovy.ast.expr.ListExpression;
 import org.codehaus.groovy.ast.expr.MapEntryExpression;
 import org.codehaus.groovy.ast.expr.MapExpression;
 import org.codehaus.groovy.ast.expr.MethodCallExpression;
+import org.codehaus.groovy.ast.expr.NotExpression;
 import org.codehaus.groovy.ast.expr.PropertyExpression;
 import org.codehaus.groovy.ast.expr.RangeExpression;
 import org.codehaus.groovy.ast.expr.RegexExpression;
@@ -134,6 +135,8 @@ public class ClassGenerator implements GroovyClassVisitor, GroovyCodeVisitor, Co
     MethodCaller setPropertyMethod = MethodCaller.newStatic(InvokerHelper.class, "setProperty");
     MethodCaller asIteratorMethod = MethodCaller.newStatic(InvokerHelper.class, "asIterator");
     MethodCaller asBool = MethodCaller.newStatic(InvokerHelper.class, "asBool");
+	MethodCaller notBoolean = MethodCaller.newStatic(InvokerHelper.class, "notBoolean");
+	MethodCaller notObject = MethodCaller.newStatic(InvokerHelper.class, "notObject");
 
     MethodCaller compareIdenticalMethod = MethodCaller.newStatic(InvokerHelper.class, "compareIdentical");
     MethodCaller compareEqualMethod = MethodCaller.newStatic(InvokerHelper.class, "compareEqual");
@@ -836,12 +839,25 @@ public class ClassGenerator implements GroovyClassVisitor, GroovyCodeVisitor, Co
         }
     }
 
+    public void visitNotExpression(NotExpression expression) {
+		Expression subExpression = expression.getExpression();
+		subExpression.visit(this);
+
+		// This is not the best way to do this.  Javac does it by reversing the underlying expressions but that proved
+		// fairly complicated for not much gain.  Instead we'll just use a utility function for now.
+		if (comparisonExpression(expression.getExpression())) {
+			notBoolean.call(cv);
+		} else {
+			notObject.call(cv);
+		}
+	}
+    
     public void visitBooleanExpression(BooleanExpression expression) {
         expression.getExpression().visit(this);
 
-        if (!comparisonExpression(expression.getExpression())) {
-            asBool.call(cv);
-        }
+		if (!comparisonExpression(expression.getExpression())) {
+			asBool.call(cv);
+		}
     }
 
     public void visitMethodCallExpression(MethodCallExpression call) {
diff --git a/src/main/org/codehaus/groovy/classgen/CodeVisitor.java b/src/main/org/codehaus/groovy/classgen/CodeVisitor.java
index 730404b62e..975880d46e 100644
--- a/src/main/org/codehaus/groovy/classgen/CodeVisitor.java
+++ b/src/main/org/codehaus/groovy/classgen/CodeVisitor.java
@@ -15,6 +15,7 @@ import org.codehaus.groovy.ast.expr.ListExpression;
 import org.codehaus.groovy.ast.expr.MapEntryExpression;
 import org.codehaus.groovy.ast.expr.MapExpression;
 import org.codehaus.groovy.ast.expr.MethodCallExpression;
+import org.codehaus.groovy.ast.expr.NotExpression;
 import org.codehaus.groovy.ast.expr.PropertyExpression;
 import org.codehaus.groovy.ast.expr.RangeExpression;
 import org.codehaus.groovy.ast.expr.RegexExpression;
@@ -85,9 +86,13 @@ public class CodeVisitor implements GroovyCodeVisitor {
         right.visit(this);
     }
 
-    public void visitBooleanExpression(BooleanExpression expression) {
-        expression.getExpression().visit(this);
-    }
+	public void visitBooleanExpression(BooleanExpression expression) {
+		expression.getExpression().visit(this);
+	}
+
+	public void visitNotExpression(NotExpression expression) {
+		expression.getExpression().visit(this);
+	}
 
     public void visitClosureExpression(ClosureExpression expression) {
     }
diff --git a/src/main/org/codehaus/groovy/runtime/InvokerHelper.java b/src/main/org/codehaus/groovy/runtime/InvokerHelper.java
index ee18d0b793..1110b15ff3 100644
--- a/src/main/org/codehaus/groovy/runtime/InvokerHelper.java
+++ b/src/main/org/codehaus/groovy/runtime/InvokerHelper.java
@@ -132,6 +132,14 @@ public class InvokerHelper {
         return false;
     }
 
+	public static boolean notObject(Object object) {
+		return !asBool(object);
+	}
+
+	public static boolean notBoolean(boolean bool) {
+		return !bool;
+	}
+	
     public static boolean compareIdentical(Object left, Object right) {
         return left == right;
     }
diff --git a/src/main/org/codehaus/groovy/syntax/parser/ASTBuilder.java b/src/main/org/codehaus/groovy/syntax/parser/ASTBuilder.java
index 8c7c70dad0..1c1c6afc0a 100644
--- a/src/main/org/codehaus/groovy/syntax/parser/ASTBuilder.java
+++ b/src/main/org/codehaus/groovy/syntax/parser/ASTBuilder.java
@@ -679,12 +679,22 @@ public class ASTBuilder
             {
                 return newExpression( expressionRoot );
             }
+            case ( Token.NOT ):
+            {
+            	return notExpression( expressionRoot );
+            }
         }
 
         throw new RuntimeException( expressionRoot.getToken().getStartLine() + ": cannot create expression for node: " + expressionRoot );
     }
 
-    protected GStringExpression compositeStringExpression(CSTNode expressionRoot)
+	protected Expression notExpression(CSTNode expressionRoot) throws ParserException {
+		Expression notExpression = new NotExpression( expression( expressionRoot.getChild( 0 ) ));
+		
+		return notExpression;
+	}
+
+	protected GStringExpression compositeStringExpression(CSTNode expressionRoot)
         throws ParserException
     {
         GStringExpression expr = new GStringExpression( expressionRoot.getToken().getText() );
diff --git a/src/main/org/codehaus/groovy/syntax/parser/Parser.java b/src/main/org/codehaus/groovy/syntax/parser/Parser.java
index a2b94bdc0c..b305bd4756 100644
--- a/src/main/org/codehaus/groovy/syntax/parser/Parser.java
+++ b/src/main/org/codehaus/groovy/syntax/parser/Parser.java
@@ -1016,6 +1016,7 @@ public class Parser
 
         switch ( lt() )
         {
+			case ( Token.NOT ):
             case ( Token.PLUS_PLUS ):
             case ( Token.PLUS ):
             case ( Token.MINUS_MINUS ):
diff --git a/src/test/groovy/AssertTest.groovy b/src/test/groovy/AssertTest.groovy
index 2f593c985a..53bcf6404b 100644
--- a/src/test/groovy/AssertTest.groovy
+++ b/src/test/groovy/AssertTest.groovy
@@ -16,9 +16,11 @@ class AssertTest extends GroovyTestCase {
         
         assert x.equals("abc")
         
-        /** @todo parser
         assert !x.equals("def")
-        */
+        assert !false
+        assert !(1==2)
+        assert !(1>3)
+        assert !(1!=1)
 	}
 	
 	void testAssertFail() {
