diff --git a/src/main/groovy/util/GroovyTestCase.java b/src/main/groovy/util/GroovyTestCase.java
index 2c0c3ffc4d..815c7cc6b5 100644
--- a/src/main/groovy/util/GroovyTestCase.java
+++ b/src/main/groovy/util/GroovyTestCase.java
@@ -233,4 +233,15 @@ public class GroovyTestCase extends TestCase {
         }
         assertTrue("Closure " + code + " should have failed", failed);
     }
+
+
+
+    /**
+     *  Returns a copy of a string in which all EOLs are \n.
+     */
+
+    protected String fixEOLs( String value )
+    {
+        return value.replaceAll( "(\\r\\n?)|\n", "\n" );
+    }
 }
diff --git a/src/main/org/codehaus/groovy/syntax/parser/Parser.java b/src/main/org/codehaus/groovy/syntax/parser/Parser.java
index 7c0310645b..2a7f7d231a 100644
--- a/src/main/org/codehaus/groovy/syntax/parser/Parser.java
+++ b/src/main/org/codehaus/groovy/syntax/parser/Parser.java
@@ -2969,10 +2969,7 @@ public class Parser
                     }
 
 
-                    if( checkAgain )
-                    {
-                        continue;                             // <<< LOOP CONTROL <<<<<<<<<
-                    }
+                    continue;                                 // <<< LOOP CONTROL <<<<<<<<<
                 }
 
 
@@ -3414,7 +3411,7 @@ public class Parser
 
             if( lt() == Types.LEFT_CURLY_BRACE )
             {
-                if( lt(2) == Types.PIPE )
+                if( lt(2) == Types.PIPE || lt(2) == Types.DOUBLE_PIPE )
                 {
                     parameters.add( closureExpression() );
                 }
diff --git a/src/test/groovy/VerbatimGStringTest.groovy b/src/test/groovy/VerbatimGStringTest.groovy
index 26cb0e2db9..361dd20ba2 100644
--- a/src/test/groovy/VerbatimGStringTest.groovy
+++ b/src/test/groovy/VerbatimGStringTest.groovy
@@ -44,7 +44,7 @@ hello
 EOS
         string = template.toString()
         
-        assert string == "Bob hey,\nhello"
+        assert fixEOLs(string) == "Bob hey,\nhello"
     }
 
     void testWithJustVariable() {
@@ -67,7 +67,7 @@ EOS
 EOSEOSEO
 EOSEOSEOS
 
-		assert name == "Bob\nEOS\nEOSEOSEO"
+		assert fixEOLs(name) == "Bob\nEOS\nEOSEOSEO"
 		
 		perl = <<<__END__
 Sam
