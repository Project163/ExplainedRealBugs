diff --git a/src/main/org/codehaus/groovy/classgen/asm/sc/StaticTypesCallSiteWriter.java b/src/main/org/codehaus/groovy/classgen/asm/sc/StaticTypesCallSiteWriter.java
index 4327c3b188..2ccec49913 100644
--- a/src/main/org/codehaus/groovy/classgen/asm/sc/StaticTypesCallSiteWriter.java
+++ b/src/main/org/codehaus/groovy/classgen/asm/sc/StaticTypesCallSiteWriter.java
@@ -88,6 +88,22 @@ public class StaticTypesCallSiteWriter extends CallSiteWriter implements Opcodes
             receiverType = receiverType.getGenericsTypes()[0].getType();
         }
         MethodVisitor mv = controller.getMethodVisitor();
+
+        boolean isStaticProperty = receiver instanceof ClassExpression
+                && (receiverType.isDerivedFrom(receiver.getType()) || receiverType.implementsInterface(receiver.getType()));
+
+        if (!isStaticProperty) {
+            if (receiverType.implementsInterface(ClassHelper.MAP_TYPE)) {
+                // for maps, replace map.foo with map.get('foo')
+                receiver.visit(controller.getAcg()); // load receiver
+                mv.visitLdcInsn(methodName); // load property name
+                mv.visitMethodInsn(INVOKEINTERFACE, "java/util/Map", "get", "(Ljava/lang/Object;)Ljava/lang/Object;");
+                controller.getOperandStack().replace(ClassHelper.OBJECT_TYPE);
+                return;
+            }
+
+        }
+
         if (receiverType.isArray() && methodName.equals("length")) {
             receiver.visit(controller.getAcg());
             mv.visitInsn(ARRAYLENGTH);
diff --git a/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java b/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java
index 7dc4eca247..f582de9c6e 100644
--- a/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java
+++ b/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java
@@ -769,8 +769,9 @@ public class StaticTypeCheckingVisitor extends ClassCodeVisitorSupport {
         String capName = MetaClassHelper.capitalize(propertyName);
         boolean isAttributeExpression = pexp instanceof AttributeExpression;
         for (ClassNode testClass : tests) {
+            boolean isStaticProperty = pexp.getObjectExpression() instanceof ClassExpression && implementsInterfaceOrIsSubclassOf(testClass, pexp.getObjectExpression().getType());
             // maps and lists have special handling for property expressions
-            if (!implementsInterfaceOrIsSubclassOf(testClass, MAP_TYPE) && !implementsInterfaceOrIsSubclassOf(testClass, LIST_TYPE)) {
+            if (isStaticProperty || (!implementsInterfaceOrIsSubclassOf(testClass, MAP_TYPE) && !implementsInterfaceOrIsSubclassOf(testClass, LIST_TYPE))) {
                 ClassNode current = testClass;
                 while (current != null) {
                     current = current.redirect();
diff --git a/src/test/groovy/transform/stc/FieldsAndPropertiesSTCTest.groovy b/src/test/groovy/transform/stc/FieldsAndPropertiesSTCTest.groovy
index 89763b832c..ab75bca85e 100644
--- a/src/test/groovy/transform/stc/FieldsAndPropertiesSTCTest.groovy
+++ b/src/test/groovy/transform/stc/FieldsAndPropertiesSTCTest.groovy
@@ -243,6 +243,23 @@ class FieldsAndPropertiesSTCTest extends StaticTypeCheckingTestCase {
         ''', 'Incompatible generic argument types. Cannot assign groovy.lang.Closure <java.lang.Long> to: groovy.lang.Closure <List>'
     }
 
+    // GROOVY-5517
+    void testShouldFindStaticPropertyEvenIfObjectImplementsMap() {
+        assertScript '''
+            class MyHashMap extends HashMap {
+                public static int version = 666
+            }
+            def map = new MyHashMap()
+            map['foo'] = 123
+            Object value = map.foo
+            assert value == 123
+            value = map['foo']
+            assert value == 123
+            int v = MyHashMap.version
+            assert v == 666
+        '''
+    }
+
     public static class BaseClass {
         int x
     }
