diff --git a/src/main/groovy/ui/InteractiveShell.java b/src/main/groovy/ui/InteractiveShell.java
index ce4fc21297..6aef02fdf7 100644
--- a/src/main/groovy/ui/InteractiveShell.java
+++ b/src/main/groovy/ui/InteractiveShell.java
@@ -499,7 +499,8 @@ public class InteractiveShell {
     }
     
     private void resetLoadedClasses() {
-        shell.resetLoadedClasses();
+        // GroovyShell.resetLoadedClasses() is not implemented yet.
+        // shell.resetLoadedClasses();
         out.println("all former unbound class definitions are discarded");
     }
 }
diff --git a/src/main/org/codehaus/groovy/antlr/groovy.g b/src/main/org/codehaus/groovy/antlr/groovy.g
index 8a994f4426..428e01f615 100644
--- a/src/main/org/codehaus/groovy/antlr/groovy.g
+++ b/src/main/org/codehaus/groovy/antlr/groovy.g
@@ -2877,7 +2877,9 @@ SL_COMMENT
         :       "//"
                 (
                         options {  greedy = true;  }:
-                        ~('\n'|'\r')
+                        // '\uffff' means the EOF character.
+			// This will fix the issue GROOVY-766 (infinite loop).
+                        ~('\n'|'\r'|'\uffff')
                 )*
                 {$setType(Token.SKIP);}
                 //This might be significant, so don't swallow it inside the comment:
