diff --git a/src/main/groovy/util/ConfigObject.groovy b/src/main/groovy/util/ConfigObject.groovy
index 4a8651c1a5..c77ba89cfa 100644
--- a/src/main/groovy/util/ConfigObject.groovy
+++ b/src/main/groovy/util/ConfigObject.groovy
@@ -162,42 +162,44 @@ class ConfigObject extends LinkedHashMap implements Writable {
 
 
 			if(value instanceof ConfigObject) {
-                def dotsInKeys = value.find { entry -> entry.key.indexOf('.') > -1 }
-                def configSize = value.size()
-                def firstKey = value.keySet().iterator().next()
-                def firstValue = value.values().iterator().next()
-                def firstSize
-                if(firstValue instanceof ConfigObject){
-                    firstSize = firstValue.size()
+                if(!value.isEmpty()) {
+                  def dotsInKeys = value.find { entry -> entry.key.indexOf('.') > -1 }
+                  def configSize = value.size()
+                  def firstKey = value.keySet().iterator().next()
+                  def firstValue = value.values().iterator().next()
+                  def firstSize
+                  if(firstValue instanceof ConfigObject){
+                      firstSize = firstValue.size()
+                  }
+                  else { firstSize = 1 }
+                  if(configSize == 1|| dotsInKeys )  {
+
+                      if(firstSize == 1 && firstValue instanceof ConfigObject) {
+                          key = KEYWORDS.contains(key) ? key.inspect() : key
+                          def writePrefix = "${prefix}${key}.${firstKey}."
+                          writeConfig(writePrefix, firstValue, out, tab, true)
+                      }
+                      else if(!dotsInKeys && firstValue instanceof ConfigObject) {
+                          writeNode(key, space, tab,value, out)
+                      }  else {
+                          for(j in value.keySet()) {
+                              def v2 = value.get(j)
+                              def k2 = j.indexOf('.') > -1 ? j.inspect() : j
+                              if(v2 instanceof ConfigObject) {
+                                  key = KEYWORDS.contains(key) ? key.inspect() : key
+                                  writeConfig("${prefix}${key}", v2, out, tab, false)
+                              }
+                              else {
+                                  writeValue("${key}.${k2}", space, prefix, v2, out)
+                              }
+                          }
+                      }
+
+                  }
+                  else {
+                      writeNode(key, space,tab, value, out)
+                  }                  
                 }
-                else { firstSize = 1 }
-				if(configSize == 1|| dotsInKeys )  {
-
-                    if(firstSize == 1 && firstValue instanceof ConfigObject) {
-                        key = KEYWORDS.contains(key) ? key.inspect() : key
-                        def writePrefix = "${prefix}${key}.${firstKey}."
-                        writeConfig(writePrefix, firstValue, out, tab, true)
-                    }
-                    else if(!dotsInKeys && firstValue instanceof ConfigObject) {
-                        writeNode(key, space, tab,value, out)
-                    }  else {
-                        for(j in value.keySet()) {
-                            def v2 = value.get(j)
-                            def k2 = j.indexOf('.') > -1 ? j.inspect() : j
-                            if(v2 instanceof ConfigObject) {
-                                key = KEYWORDS.contains(key) ? key.inspect() : key
-                                writeConfig("${prefix}${key}", v2, out, tab, false)
-                            }
-                            else {
-                                writeValue("${key}.${k2}", space, prefix, v2, out)
-                            }
-                        }
-                    }
-
-				}
-				else {
-                    writeNode(key, space,tab, value, out)
-				}
 			}
 			else {
 
diff --git a/src/main/groovy/util/ConfigSlurper.groovy b/src/main/groovy/util/ConfigSlurper.groovy
index aec7f63487..1cb52007bf 100644
--- a/src/main/groovy/util/ConfigSlurper.groovy
+++ b/src/main/groovy/util/ConfigSlurper.groovy
@@ -217,7 +217,13 @@ class ConfigSlurper {
                         stack.pop()
                     }
                 } else {
-                    def co = new ConfigObject()
+                    def co
+                    if(config.get(name) instanceof ConfigObject) {
+                        co = config.get(name)
+                    }
+                    else {
+                        co = new ConfigObject()
+                    }
                     assignName.call(name, co)
                     pushStack.call(co)
                     args[0].call()
diff --git a/src/test/groovy/util/ConfigSlurperTest.groovy b/src/test/groovy/util/ConfigSlurperTest.groovy
index ab9ed7aa55..f07e58a727 100644
--- a/src/test/groovy/util/ConfigSlurperTest.groovy
+++ b/src/test/groovy/util/ConfigSlurperTest.groovy
@@ -26,8 +26,24 @@ package groovy.util
  */
 
 class  ConfigSlurperTest extends GroovyTestCase {
+    void testConsecutiveSlurperValues() {
+      def config = new ConfigSlurper().parse('''
+grails.views.default.codec="none"
+grails {
+	mail {
+		host = "smtp.foo.com"
+     	port = 25
+     	username = "foo"
+     	password = "bar"
+  }
+}
+''')
 
 
+      assertEquals "none", config.grails.views.default.codec
+      assertEquals "smtp.foo.com", config.grails.mail.host
+    }
+
     void testConfigSlurperNestedValues() {
         def config = new ConfigSlurper().parse('''
 foo {
