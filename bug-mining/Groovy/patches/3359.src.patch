diff --git a/build.gradle b/build.gradle
index 0ea74ed8e9..a194a74e4e 100644
--- a/build.gradle
+++ b/build.gradle
@@ -126,14 +126,6 @@ task(copyTestResources, type: Copy)
         .include('**/*.txt', '**/*.xml', '**/*.properties', '**/*.png', '**/*.html', '**/*.gif', '**/*.ico', '**/*.css')
 test.dependsOn(copyTestResources)
 
-allprojects {
-    task sourceJar(type: Jar) {
-        classifier = 'sources'
-        duplicatesStrategy = DuplicatesStrategy.EXCLUDE
-        from sourceSets.main.allSource
-    }
-}
-
 repositories {
     // todo Some repos are needed only for some configs. Declare them just for the configuration once Gradle allows this.
     maven { url 'http://repository.jboss.org/nexus/content/groups/m2-release-proxy' } // examples, tools
@@ -285,6 +277,11 @@ sourceSets {
             srcDirs = ['src/resources']
         }
     }
+    antlr2 {
+        resources {
+            srcDirs = ['src/main/antlr2']
+        }
+    }
     test {
         groovy {
             srcDirs = ['src/test']
@@ -312,6 +309,21 @@ sourceSets {
     }
 }
 
+task sourceJar(type: Jar) {
+    classifier = 'sources'
+    duplicatesStrategy = DuplicatesStrategy.EXCLUDE
+    from sourceSets.main.allSource
+    from sourceSets.antlr2.allSource
+}
+
+subprojects {
+    task sourceJar(type: Jar) {
+        classifier = 'sources'
+        duplicatesStrategy = DuplicatesStrategy.EXCLUDE
+        from sourceSets.main.allSource
+    }
+}
+
 apply from: 'subprojects/parser-antlr4/build.gradle'
 
 // make sure examples can be compiled, even if we don't run them
