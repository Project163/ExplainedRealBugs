diff --git a/src/main/org/codehaus/groovy/classgen/AsmClassGenerator2.java b/src/main/org/codehaus/groovy/classgen/AsmClassGenerator2.java
index e66b1a72c1..aa2ec3c3eb 100644
--- a/src/main/org/codehaus/groovy/classgen/AsmClassGenerator2.java
+++ b/src/main/org/codehaus/groovy/classgen/AsmClassGenerator2.java
@@ -2577,18 +2577,13 @@ public class AsmClassGenerator2 extends ClassGenerator {
      */
     protected String checkForQualifiedClass(PropertyExpression expression) {
         String text = expression.getText();
+        if (text != null && text.endsWith(".class")) {
+            text = text.substring(0, text.length() - 6);
+        }
         try {
             return resolveClassName(text);
         }
         catch (Exception e) {
-            if (text.endsWith(".class")) {
-                text = text.substring(0, text.length() - 6);
-                try {
-                    return resolveClassName(text);
-                }
-                catch (Exception e2) {
-                }
-            }
             return null;
         }
     }
diff --git a/src/test/UberTestCase2.java b/src/test/UberTestCase2.java
index b04746173b..dcadc66d38 100644
--- a/src/test/UberTestCase2.java
+++ b/src/test/UberTestCase2.java
@@ -18,6 +18,7 @@ public class UberTestCase2 extends TestCase {
         suite.addTestSuite(groovy.bugs.Groovy278_Bug.class);
         suite.addTestSuite(groovy.bugs.Groovy303_Bug.class);
         suite.addTestSuite(groovy.bugs.Groovy308_Bug.class);
+        suite.addTestSuite(groovy.bugs.Groovy558_616_Bug.class);
         suite.addTestSuite(groovy.bugs.Groovy666_Bug.class);
         suite.addTestSuite(groovy.bugs.IanMaceysBug.class);
         suite.addTestSuite(groovy.bugs.InterfaceImplBug.class);
diff --git a/src/test/groovy/bugs/Groovy558_616_Bug.groovy b/src/test/groovy/bugs/Groovy558_616_Bug.groovy
new file mode 100644
index 0000000000..4444292c5b
--- /dev/null
+++ b/src/test/groovy/bugs/Groovy558_616_Bug.groovy
@@ -0,0 +1,45 @@
+package groovy.bugs
+
+import groovy.util.Dummy
+
+/**
+  * Fixes GROOVY-558 and GROOVY-616.
+  * A fully qualified class name ending with .class or not were not recognized properly.
+  *
+  * @author Jochen Theodorou
+  * @author Guillaume Laforge
+  */
+class Groovy558_616_Bug extends GroovyTestCase {
+
+    void testListClass() {
+        assert java.util.ArrayList.class == ArrayList.class
+        assert java.util.ArrayList.class == ArrayList
+        assert ArrayList != Class
+        list = new ArrayList()
+        assert list.class == ArrayList
+    }
+
+    void testStringClass() {
+        assert java.lang.String.class == String.class
+        assert java.lang.String.class == String
+        assert String != Class
+        st = ""
+        assert st.class == String
+    }
+
+    void testDummyClass() {
+        assert groovy.util.Dummy.class == Dummy.class
+        assert groovy.util.Dummy.class == Dummy
+        assert Dummy != Class
+        dum = new Dummy()
+        assert dum.class == Dummy
+    }
+
+    void testFooClass() {
+        assert groovy.bugs.Groovy558_616_Bug.class == Groovy558_616_Bug
+        assert Groovy558_616_Bug != Class
+        f = new Groovy558_616_Bug()
+        assert f.class == Groovy558_616_Bug
+    }
+}
+
