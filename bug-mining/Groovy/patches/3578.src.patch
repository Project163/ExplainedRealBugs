diff --git a/src/main/groovy/groovy/ui/GroovyMain.java b/src/main/groovy/groovy/ui/GroovyMain.java
index e6702e4ea9..d227357c60 100644
--- a/src/main/groovy/groovy/ui/GroovyMain.java
+++ b/src/main/groovy/groovy/ui/GroovyMain.java
@@ -281,7 +281,7 @@ public class GroovyMain {
             }
 
             if (indy) {
-                CompilerConfiguration.DEFAULT.getOptimizationOptions().put("indy", true);
+                System.setProperty("groovy.target.indy", "true");
                 main.conf.getOptimizationOptions().put("indy", true);
             }
 
