diff --git a/src/main/org/codehaus/groovy/classgen/AsmClassGenerator2.java b/src/main/org/codehaus/groovy/classgen/AsmClassGenerator2.java
index c61affb901..8aacc834a4 100644
--- a/src/main/org/codehaus/groovy/classgen/AsmClassGenerator2.java
+++ b/src/main/org/codehaus/groovy/classgen/AsmClassGenerator2.java
@@ -4578,6 +4578,12 @@ public class AsmClassGenerator2 extends ClassGenerator {
                 answer.setHolder(true);
             }
             variableStack.put(name, answer);
+            if (isDoubleSizeVariable(type)) {
+                // lets put a dummy veriable on the stack to increase the next variable size
+                String generatedName = createVariableName("doubleSizeVariablePadding");
+                variableStack.put(generatedName, answer);
+            }
+
             Label startLabel  = new Label();
             answer.setStartLabel(startLabel);
             if (define) {
@@ -4618,6 +4624,10 @@ public class AsmClassGenerator2 extends ClassGenerator {
         return answer;
     }
 
+    private boolean isDoubleSizeVariable(Type type) {
+        return "long".equals(type.getName()) || "double".equals(type.getName());
+    }
+
     private int getNextVariableID() {
         //return Math.max(lastVariableIndex + 1, variableStack.size());
         return variableStack.size(); // todo : rework
diff --git a/src/test/UberTestCase2.java b/src/test/UberTestCase2.java
index b8f2c045f4..df9fe61bdb 100644
--- a/src/test/UberTestCase2.java
+++ b/src/test/UberTestCase2.java
@@ -15,6 +15,7 @@ public class UberTestCase2 extends TestCase {
         suite.addTestSuite(groovy.bugs.ClosuresInScriptBug.class);
         suite.addTestSuite(groovy.bugs.ClosureWithStaticVariablesBug.class);
         suite.addTestSuite(groovy.bugs.ConstructorParameterBug.class);
+        suite.addTestSuite(groovy.bugs.DoubleSizeParametersBug.class);
         suite.addTestSuite(groovy.bugs.Groovy278_Bug.class);
         suite.addTestSuite(groovy.bugs.Groovy303_Bug.class);
         suite.addTestSuite(groovy.bugs.Groovy308_Bug.class);
diff --git a/src/test/groovy/bugs/DoubleSizeParametersBug.groovy b/src/test/groovy/bugs/DoubleSizeParametersBug.groovy
new file mode 100644
index 0000000000..a13aa8422c
--- /dev/null
+++ b/src/test/groovy/bugs/DoubleSizeParametersBug.groovy
@@ -0,0 +1,70 @@
+/*
+ $Id$
+
+ Copyright 2003 (C) James Strachan and Bob Mcwhirter. All Rights Reserved.
+
+ Redistribution and use of this software and associated documentation
+ ("Software"), with or without modification, are permitted provided
+ that the following conditions are met:
+
+ 1. Redistributions of source code must retain copyright
+    statements and notices.  Redistributions must also contain a
+    copy of this document.
+
+ 2. Redistributions in binary form must reproduce the
+    above copyright notice, this list of conditions and the
+    following disclaimer in the documentation and/or other
+    materials provided with the distribution.
+
+ 3. The name "groovy" must not be used to endorse or promote
+    products derived from this Software without prior written
+    permission of The Codehaus.  For written permission,
+    please contact info@codehaus.org.
+
+ 4. Products derived from this Software may not be called "groovy"
+    nor may "groovy" appear in their names without prior written
+    permission of The Codehaus. "groovy" is a registered
+    trademark of The Codehaus.
+
+ 5. Due credit should be given to The Codehaus -
+    http://groovy.codehaus.org/
+
+ THIS SOFTWARE IS PROVIDED BY THE CODEHAUS AND CONTRIBUTORS
+ ``AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES, INCLUDING, BUT
+ NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
+ FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL
+ THE CODEHAUS OR ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
+ INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
+ (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
+ SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
+ HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
+ STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
+ ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
+ OF THE POSSIBILITY OF SUCH DAMAGE.
+
+ */
+
+package groovy.bugs;
+
+import org.codehaus.groovy.classgen.TestSupport;
+
+
+/**
+ * @author <a href="mailto:jstrachan@protique.com">James Strachan</a>
+ * @version $Revision$
+ */
+class DoubleSizeParametersBug extends TestSupport {
+
+    void testBug() {
+        assertScript( """
+def foo(double x, y) {
+   println "x: "+x
+   println "y: "+y
+}
+
+foo(10.0d, 0)
+""" );
+    }
+}
+
+
