diff --git a/src/main/org/codehaus/groovy/classgen/asm/BinaryExpressionHelper.java b/src/main/org/codehaus/groovy/classgen/asm/BinaryExpressionHelper.java
index 2a3a4aac97..818e534314 100644
--- a/src/main/org/codehaus/groovy/classgen/asm/BinaryExpressionHelper.java
+++ b/src/main/org/codehaus/groovy/classgen/asm/BinaryExpressionHelper.java
@@ -314,7 +314,19 @@ public class BinaryExpressionHelper {
                 rhsType = ClassHelper.getWrapper(rhsType);
                 operandStack.box();
             }
+            
             ClassNode lhsType = controller.getTypeChooser().resolveType(var, controller.getClassNode());
+            // ensure we try to unbox null to cause a runtime NPE in case we assign 
+            // null to a primitive typed variable, even if it is used only in boxed 
+            // form as it is closure shared
+            if (var.isClosureSharedVariable() && ClassHelper.isPrimitiveType(var.getOriginType()) && isNull(rightExpression)) {
+                operandStack.doGroovyCast(var.getOriginType());
+                // these two are never reached in bytecode and only there 
+                // to avoid verifyerrors and compiler infrastructure hazzle
+                operandStack.box(); 
+                operandStack.doGroovyCast(lhsType);
+            }
+            // normal type transformation 
             if (!ClassHelper.isPrimitiveType(lhsType) && isNull(rightExpression)) {
                 operandStack.replace(lhsType);
             } else {
diff --git a/src/test/gls/statements/DeclarationTest.groovy b/src/test/gls/statements/DeclarationTest.groovy
index 33d6dcb6ce..af03d36da8 100644
--- a/src/test/gls/statements/DeclarationTest.groovy
+++ b/src/test/gls/statements/DeclarationTest.groovy
@@ -22,4 +22,11 @@ public class DeclarationTest extends CompilableTestSupport {
           Integer x = null
       """
   }
+  
+  public void testNullAssignmentToPrimitiveForSharedVariable() {
+      shouldFail(org.codehaus.groovy.runtime.typehandling.GroovyCastException, """
+          int i = null
+          def c = {i}
+      """)
+  }
 }
\ No newline at end of file
