diff --git a/src/main/java/org/codehaus/groovy/transform/stc/StaticTypeCheckingSupport.java b/src/main/java/org/codehaus/groovy/transform/stc/StaticTypeCheckingSupport.java
index dc93213ad2..8c2716caee 100644
--- a/src/main/java/org/codehaus/groovy/transform/stc/StaticTypeCheckingSupport.java
+++ b/src/main/java/org/codehaus/groovy/transform/stc/StaticTypeCheckingSupport.java
@@ -490,7 +490,7 @@ public abstract class StaticTypeCheckingSupport {
         }
         // GROOVY-10067: unresolved argument like "N extends Number" for parameter like "Integer"
         if (type.isGenericsPlaceHolder() && type.getUnresolvedName().charAt(0) == '#') {
-            return type.getGenericsTypes()[0].isCompatibleWith(toBeAssignedTo);
+            return type.asGenericsType().isCompatibleWith(toBeAssignedTo);
         }
         return (type.isDerivedFrom(CLOSURE_TYPE) && isSAMType(toBeAssignedTo));
     }
diff --git a/src/test/groovy/transform/stc/MethodReferenceTest.groovy b/src/test/groovy/transform/stc/MethodReferenceTest.groovy
index 1fa2185903..00692446b6 100644
--- a/src/test/groovy/transform/stc/MethodReferenceTest.groovy
+++ b/src/test/groovy/transform/stc/MethodReferenceTest.groovy
@@ -831,16 +831,16 @@ final class MethodReferenceTest {
 
     @Test // class::staticMethod
     void testFunctionCS2() {
-        assertScript shell, '''
-            @CompileStatic
-            void test() {
-                List<String> list = ['x','y','z']
-                def map = list.stream().collect(Collectors.toMap(Function.identity(), Collections::singletonList))
-                assert map == [x: ['x'], y: ['y'], z: ['z']]
-            }
+        for (makeList in ['Collections::singletonList','List::of']) {
+            assertScript shell, """
+                @CompileStatic
+                def test(List<String> list) {
+                    list.stream().collect(Collectors.toMap(Function.identity(), $makeList))
+                }
 
-            test()
-        '''
+                assert test(['x','y','z']) == [x: ['x'], y: ['y'], z: ['z']]
+            """
+        }
     }
 
     @Test // class::staticMethod -- GROOVY-9799
