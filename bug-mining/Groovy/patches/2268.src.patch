diff --git a/src/main/org/codehaus/groovy/ast/GenericsType.java b/src/main/org/codehaus/groovy/ast/GenericsType.java
index e95c60a43d..b024918dcb 100644
--- a/src/main/org/codehaus/groovy/ast/GenericsType.java
+++ b/src/main/org/codehaus/groovy/ast/GenericsType.java
@@ -210,10 +210,12 @@ public class GenericsType extends ASTNode {
          * @return true iff the classnode is compatible with this generics specification
          */
         public boolean matches(ClassNode classNode) {
+            GenericsType[] genericsTypes = classNode.getGenericsTypes();
+            // diamond always matches
+            if (genericsTypes!=null && genericsTypes.length==0) return true;
             if (classNode.isGenericsPlaceHolder()) {
                 // if the classnode we compare to is a generics placeholder (like <E>) then we
                 // only need to check that the names are equal
-                GenericsType[] genericsTypes = classNode.getGenericsTypes();
                 if (genericsTypes==null) return true;
                 if (isWildcard()) {
                     if (lowerBound!=null) return genericsTypes[0].getName().equals(lowerBound.getUnresolvedName());
diff --git a/src/test/groovy/transform/stc/GenericsSTCTest.groovy b/src/test/groovy/transform/stc/GenericsSTCTest.groovy
index 64eb37f312..bb543773b9 100644
--- a/src/test/groovy/transform/stc/GenericsSTCTest.groovy
+++ b/src/test/groovy/transform/stc/GenericsSTCTest.groovy
@@ -1133,7 +1133,18 @@ class GenericsSTCTest extends StaticTypeCheckingTestCase {
             map.put('bar', new Date())
         '''
     }
-
+    
+    // GROOVY-6232
+    void testDiamond() {
+        assertScript '''
+            class Foo<T>{  Foo(T a, T b){} }
+            def bar() {
+                Foo<Object> f = new Foo<>("a",new Object())
+            }
+            bar()
+        '''
+    }
+    
     static class MyList extends LinkedList<String> {}
 
     public static class ClassA<T> {
