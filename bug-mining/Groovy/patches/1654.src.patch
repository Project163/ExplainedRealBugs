diff --git a/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingSupport.java b/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingSupport.java
index e79cfd20fb..588647666a 100644
--- a/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingSupport.java
+++ b/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingSupport.java
@@ -496,6 +496,8 @@ abstract class StaticTypeCheckingSupport {
             //TODO: in case of the array we could maybe make a partial check
             if (leftRedirect.isArray() && rightRedirect.isArray()) {
                 return checkCompatibleAssignmentTypes(leftRedirect.getComponentType(), rightRedirect.getComponentType());
+            } else if (rightRedirect.isArray() && !leftRedirect.isArray()) {
+                return false;
             }
             return true;
         }
diff --git a/src/test/groovy/transform/stc/ArraysAndCollectionsSTCTest.groovy b/src/test/groovy/transform/stc/ArraysAndCollectionsSTCTest.groovy
index 30eda9a33f..e93eebc33a 100644
--- a/src/test/groovy/transform/stc/ArraysAndCollectionsSTCTest.groovy
+++ b/src/test/groovy/transform/stc/ArraysAndCollectionsSTCTest.groovy
@@ -204,5 +204,20 @@ class ArraysAndCollectionsSTCTest extends StaticTypeCheckingTestCase {
             }
         '''
     }
+
+    // GROOVY-5177
+    void testShouldNotAllowArrayAssignment() {
+        shouldFailWithMessages '''
+            class Foo {
+                def say() {
+                    FooAnother foo1 = new Foo[13] // but FooAnother foo1 = new Foo() reports a STC                        Error
+                }
+            }
+            class FooAnother {
+
+            }
+        ''', 'Cannot assign value of type Foo[] to variable of type FooAnother'
+    }
+
 }
 
