diff --git a/src/main/org/codehaus/groovy/control/ResolveVisitor.java b/src/main/org/codehaus/groovy/control/ResolveVisitor.java
index 5a46fa0e09..153bef624e 100644
--- a/src/main/org/codehaus/groovy/control/ResolveVisitor.java
+++ b/src/main/org/codehaus/groovy/control/ResolveVisitor.java
@@ -1238,6 +1238,8 @@ public class ResolveVisitor extends ClassCodeExpressionTransformer {
 
     public void visitClass(ClassNode node) {
         ClassNode oldNode = currentClass;
+        Map<String, GenericsType> oldPNames = genericParameterNames;
+        genericParameterNames = new HashMap<String, GenericsType>(genericParameterNames);
         currentClass = node;
 
         resolveGenericsHeader(node.getGenericsTypes());
@@ -1293,6 +1295,8 @@ public class ResolveVisitor extends ClassCodeExpressionTransformer {
         
         super.visitClass(node);
 
+        genericParameterNames = oldPNames;
+
         currentClass = oldNode;
     }
     
diff --git a/src/test/groovy/bugs/Groovy4457GenericTypeDeclarationLeakTest.groovy b/src/test/groovy/bugs/Groovy4457GenericTypeDeclarationLeakTest.groovy
new file mode 100644
index 0000000000..c126697ce2
--- /dev/null
+++ b/src/test/groovy/bugs/Groovy4457GenericTypeDeclarationLeakTest.groovy
@@ -0,0 +1,34 @@
+package groovy.bugs
+
+/**
+ * @author Guillaume Laforge
+ */
+class Groovy4457GenericTypeDeclarationLeakTest extends GroovyTestCase {
+
+    void testLeak() {
+        assertScript """
+            class A<String> {}
+
+            class B {
+                void foo(String s) {}
+            }
+
+            // use the name to check the class, since the error was that String was seen as
+            // a symbol resolved to Object, not as the class String, thus a ... == String would
+            // not have failed
+            assert B.declaredMethods.find { it.name == "foo" }.parameterTypes[0].name.contains("String")
+        """
+    }
+
+    void testLeakWithInnerClass() {
+        assertScript """
+            class A<String> {
+                static class B {
+                    void foo(String s) {}
+                }
+            }
+
+            assert A.B.declaredMethods.find { it.name == "foo" }.parameterTypes[0].name.contains("String")
+        """
+    }
+}
