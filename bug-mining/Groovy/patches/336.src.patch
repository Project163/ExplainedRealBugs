diff --git a/src/main/org/codehaus/groovy/classgen/CompileStack.java b/src/main/org/codehaus/groovy/classgen/CompileStack.java
index 5b978547b1..42afd5ff7c 100644
--- a/src/main/org/codehaus/groovy/classgen/CompileStack.java
+++ b/src/main/org/codehaus/groovy/classgen/CompileStack.java
@@ -451,6 +451,7 @@ public class CompileStack implements Opcodes {
         int index = currentVariableIndex;
         if (methodParameterUsedInClosure) {
             index = localVariableOffset++;
+            type = ClassHelper.getWrapper(type);
         }
         Variable answer = new Variable(index, type, name);
         usedVariables.add(answer);
@@ -480,15 +481,15 @@ public class CompileStack implements Opcodes {
         for (int i = 0; i < paras.length; i++) {
             String name = paras[i].getName();
             Variable answer;
+            ClassNode type = paras[i].getType();
             if (paras[i].isClosureSharedVariable()) {
-                answer = defineVar(name, ClassHelper.getWrapper(paras[i].getType()), true);
-                ClassNode type = paras[i].getType();
+                answer = defineVar(name, type, true);
                 helper.load(type,currentVariableIndex);
                 helper.box(type);
                 createReference(answer);
                 hasHolder = true;
             } else {
-                answer = defineVar(name,paras[i].getType(),false);
+                answer = defineVar(name,type,false);
             }
             answer.setStartLabel(startLabel);
             stackVariables.put(name, answer);
diff --git a/src/test/groovy/MethodParameterAccessWithinClosureTest.groovy b/src/test/groovy/MethodParameterAccessWithinClosureTest.groovy
index a5db1ad927..04bbf025ad 100644
--- a/src/test/groovy/MethodParameterAccessWithinClosureTest.groovy
+++ b/src/test/groovy/MethodParameterAccessWithinClosureTest.groovy
@@ -31,6 +31,10 @@ class MethodParameterAccessWithinClosureTest extends GroovyTestCase {
         assert null == vendor4()
     }
     
+    void testDoubleParameterAndsingleParameterUsedInClosure() {
+         assert vendor5(5.0d,2) == 7.0d
+    }
+    
     private String vendor1(cheese) {
         cheese
     }
@@ -47,4 +51,9 @@ class MethodParameterAccessWithinClosureTest extends GroovyTestCase {
     private vendor4(aCheese=cheese) {
         shop.find() {it == aCheese}
     }
+    
+    private vendor5(double a, int b) {
+        b.times {a++}
+        return a
+    }
 }
\ No newline at end of file
