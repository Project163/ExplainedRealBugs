diff --git a/src/main/org/codehaus/groovy/ast/ASTNode.java b/src/main/org/codehaus/groovy/ast/ASTNode.java
index 911036fb90..1d5bd7de55 100644
--- a/src/main/org/codehaus/groovy/ast/ASTNode.java
+++ b/src/main/org/codehaus/groovy/ast/ASTNode.java
@@ -18,6 +18,8 @@ package org.codehaus.groovy.ast;
 import org.codehaus.groovy.GroovyBugError;
 import org.codehaus.groovy.util.ListHashMap;
 
+import java.util.HashMap;
+import java.util.Map;
 import java.util.Set;
 
 /**
@@ -48,7 +50,7 @@ public class ASTNode {
     private int columnNumber = -1;
     private int lastLineNumber = -1;
     private int lastColumnNumber = -1;
-    private ListHashMap metaDataMap = new ListHashMap(); 
+    private ListHashMap metaDataMap = new ListHashMap();
 
     public void visit(GroovyCodeVisitor visitor) {
         throw new RuntimeException("No visit() method implemented for class: " + getClass().getName());
diff --git a/src/main/org/codehaus/groovy/util/ListHashMap.java b/src/main/org/codehaus/groovy/util/ListHashMap.java
index 1d6053c232..6afb1d8c6b 100644
--- a/src/main/org/codehaus/groovy/util/ListHashMap.java
+++ b/src/main/org/codehaus/groovy/util/ListHashMap.java
@@ -84,7 +84,7 @@ public class ListHashMap<K,V> implements Map<K,V> {
     
     public Set<java.util.Map.Entry<K, V>> entrySet() {
         Map m;
-        if (size>maxListFill) {
+        if (size>=maxListFill) {
             m = innerMap;
         } else {
             m = makeMap();
diff --git a/src/test/groovy/transform/stc/BugsSTCTest.groovy b/src/test/groovy/transform/stc/BugsSTCTest.groovy
index a0f3ec9410..57c7d82e48 100644
--- a/src/test/groovy/transform/stc/BugsSTCTest.groovy
+++ b/src/test/groovy/transform/stc/BugsSTCTest.groovy
@@ -13,4 +13,21 @@ class BugsSTCTest extends StaticTypeCheckingTestCase {
             def bar() { foo { it / 2 } }
         ''', 'Cannot find matching method java.lang.Object#div(int)'
     }
+
+    void testGroovy5444() {
+        assertScript '''
+                def curr = { System.currentTimeMillis() }
+
+                5.times {
+                    @ASTTest(phase=INSTRUCTION_SELECTION, value= {
+                        assert node.getNodeMetaData(DECLARATION_INFERRED_TYPE) == long_TYPE
+                    })
+                    def t0 = curr()
+                    100000.times {
+                        "echo"
+                    }
+                    println (curr() - t0)
+                }'''
+
+    }
 }
