diff --git a/src/main/org/codehaus/groovy/transform/CategoryASTTransformation.java b/src/main/org/codehaus/groovy/transform/CategoryASTTransformation.java
index 683e77623e..d9265589ed 100644
--- a/src/main/org/codehaus/groovy/transform/CategoryASTTransformation.java
+++ b/src/main/org/codehaus/groovy/transform/CategoryASTTransformation.java
@@ -23,6 +23,7 @@ import org.codehaus.groovy.transform.ASTTransformation;
 import org.codehaus.groovy.transform.GroovyASTTransformation;
 import org.codehaus.groovy.ast.expr.*;
 import org.codehaus.groovy.ast.stmt.BlockStatement;
+import org.codehaus.groovy.ast.stmt.ExpressionStatement;
 import org.codehaus.groovy.ast.*;
 import org.codehaus.groovy.syntax.SyntaxException;
 import org.objectweb.asm.Opcodes;
@@ -92,6 +93,15 @@ public class CategoryASTTransformation implements ASTTransformation, Opcodes {
                 super.visitDeclarationExpression(expression);
             }
 
+            public void visitExpressionStatement(ExpressionStatement es) {
+            	// GROOVY-3543: visit the declaration expressions so that declaration variables get added on the varStack
+            	Expression exp = es.getExpression();
+            	if(exp instanceof DeclarationExpression) {
+            		exp.visit(this);
+            	}
+                super.visitExpressionStatement(es);
+            }    
+
             public Expression transform(Expression exp) {
                 if (exp instanceof VariableExpression) {
                     VariableExpression ve = (VariableExpression) exp;
diff --git a/src/test/groovy/CategoryTest.groovy b/src/test/groovy/CategoryTest.groovy
index d5e9f0e0fd..84a5ad9024 100644
--- a/src/test/groovy/CategoryTest.groovy
+++ b/src/test/groovy/CategoryTest.groovy
@@ -131,6 +131,36 @@ class CategoryTest extends GroovyTestCase {
       """
     }
     
+    void testCategoryMethodsHavingDeclarationStatements() {
+    	// GROOVY-3543: Declaration statements in category class' methods were not being visited by 
+    	// CategoryASTTransformation's expressionTransformer resulting in declaration variables not being 
+    	// defined on varStack resulting in compilation errors later
+    	assertScript """
+	    	@Category(Test)
+	    	class TestCategory {
+	    	    String getSuperName() { 
+	    	        String myname = "" // 
+	    	        return myname + "hi from category" 
+	    	    }
+	    	}
+	
+	    	interface Test { 
+	    	    String getName() 
+	    	}
+	
+	    	class MyTest implements Test {
+	    	    String getName() {
+	    	        return "hi"
+	    	    }
+	    	}
+	
+	    	def onetest = new MyTest()
+	    	assert onetest.getName() == "hi"
+	    	use(TestCategory) { 
+	    	    assert onetest.getSuperName() == "hi from category" 
+	    	}
+    	"""
+    }
 }
 
 class StringCategory {
