diff --git a/src/main/org/codehaus/groovy/transform/ImmutableASTTransformation.java b/src/main/org/codehaus/groovy/transform/ImmutableASTTransformation.java
index 812e2cceec..5c411214ca 100644
--- a/src/main/org/codehaus/groovy/transform/ImmutableASTTransformation.java
+++ b/src/main/org/codehaus/groovy/transform/ImmutableASTTransformation.java
@@ -227,7 +227,7 @@ public class ImmutableASTTransformation implements ASTTransformation, Opcodes {
 
     private Statement returnFalseIfWrongType(ClassNode cNode, Expression other) {
         return new IfStatement(
-                identicalExpr(new ClassExpression(cNode), new ClassExpression(other.getType())),
+                notEqualClasses(cNode, other),
                 new ReturnStatement(ConstantExpression.FALSE),
                 new EmptyStatement()
         );
@@ -507,6 +507,11 @@ public class ImmutableASTTransformation implements ASTTransformation, Opcodes {
         return new BooleanExpression(new BinaryExpression(self, COMPARE_IDENTICAL, other));
     }
 
+    private BooleanExpression notEqualClasses(ClassNode cNode, Expression other) {
+        return new BooleanExpression(new BinaryExpression(new ClassExpression(cNode), COMPARE_NOT_EQUAL,
+                new MethodCallExpression(other, "getClass", MethodCallExpression.NO_ARGUMENTS)));
+    }
+
     private Expression findArg(String fName) {
         return new PropertyExpression(new VariableExpression("args"), fName);
     }
