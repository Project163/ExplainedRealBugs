diff --git a/build.gradle b/build.gradle
index 3e2936911f..d78e9ce4f9 100644
--- a/build.gradle
+++ b/build.gradle
@@ -17,6 +17,35 @@ allprojects {
         mavenCentral()
     }
 
+    // todo: when we get rid of the Ant build, it will be much cleaner to use
+    // the conventional "resources" directory for classpath resources
+    task(copyResources, type: Copy) {
+        destinationDir = file("$buildDir/classes")
+        // text files requiring filtering
+        into("main") {
+            from('src/main/groovy')
+            from('src/main/java')
+            include('**/*.txt', '**/*.xml', '**/*.properties', '**/*.html')
+            filter(rootProject.propertiesFilter, org.apache.tools.ant.filters.ReplaceTokens)
+        }
+        // other resources
+        into("main") {
+            from 'src/main/groovy'
+            from 'src/main/java'
+            include('**/*.png', '**/*.gif', '**/*.ico', '**/*.css')
+        }
+    }
+
+    compileJava.dependsOn(copyResources)
+
+    task(copyTestResources, type: Copy)
+            .from('src/test/groovy')
+            .from('src/test/java')
+            .into("$buildDir/classes/test")
+            .include('**/*.txt', '**/*.xml', '**/*.properties', '**/*.png', '**/*.html', '**/*.gif', '**/*.ico', '**/*.css')
+
+    compileTestJava.dependsOn(copyTestResources)
+
     task sourceJar(type: Jar) {
         classifier = 'sources'
         from sourceSets.main.allSource
@@ -80,55 +109,6 @@ allprojects {
 
 }
 
-// todo: use the conventional "resources" directory for classpath resources
-task(copyResources, type: Copy) {
-    destinationDir = file("$buildDir/classes")
-    // text files requiring filtering
-    into("main") {
-        from('src/main')
-        include('**/*.txt', '**/*.xml', '**/*.properties', '**/*.html')
-        filter(rootProject.propertiesFilter, org.apache.tools.ant.filters.ReplaceTokens)
-    }
-    // other resources
-    into("main") {
-        from 'src/main'
-        include('**/*.png', '**/*.gif', '**/*.ico', '**/*.css')
-    }
-}
-compileJava.dependsOn(copyResources)
-task(copyTestResources, type: Copy)
-        .from('src/test')
-        .into("$buildDir/classes/test")
-        .include('**/*.txt', '**/*.xml', '**/*.properties', '**/*.png', '**/*.html', '**/*.gif', '**/*.ico', '**/*.css')
-compileTestJava.dependsOn(copyTestResources)
-
-subprojects {
-    // todo: use the conventional "resources" directory for classpath resources
-    task(copyResources, type: Copy) {
-        destinationDir = file("$buildDir/classes")
-        // text files requiring filtering
-        into("main") {
-            from('src/main/groovy')
-            from('src/main/java')
-            include('**/*.txt', '**/*.xml', '**/*.properties', '**/*.html')
-            filter(rootProject.propertiesFilter, org.apache.tools.ant.filters.ReplaceTokens)
-        }
-        // other resources
-        into("main") {
-            from 'src/main/groovy'
-            from 'src/main/java'
-            include('**/*.png', '**/*.gif', '**/*.ico', '**/*.css')
-        }
-    }
-    compileJava.dependsOn(copyResources)
-    task(copyTestResources, type: Copy)
-            .from('src/test/groovy')
-            .from('src/test/java')
-            .into("$buildDir/classes/test")
-            .include('**/*.txt', '**/*.xml', '**/*.properties', '**/*.png', '**/*.html', '**/*.gif', '**/*.ico', '**/*.css')
-    compileTestJava.dependsOn(copyTestResources)
-}
-
 repositories {
     // todo Some repos are needed only for some configs. Declare them just for the configuration once Gradle allows this.
 //    mavenCentral() // default, tools
@@ -167,7 +147,7 @@ dependencies {
     compilerCompile("org.apache.ivy:ivy:2.2.0") {
         transitive = false
     }
-    groovy files(configurations.compilerCompile)
+    groovy files("$buildDir/classes/compiler")
     groovy "antlr:antlr:2.7.7"
     groovy "org.ow2.asm:asm:4.0"
     groovy "org.ow2.asm:asm-analysis:4.0"
@@ -301,6 +281,7 @@ sourceSets {
                     "org/codehaus/groovy/tools/groovydoc/gstringTemplates/**/*.*",
                     "org/codehaus/groovy/tools/groovy.ico"
         }
+        output.classesDir = "$buildDir/classes" as File
     }
     test {
         groovy {
@@ -398,28 +379,27 @@ ext.modules = this.&modules()
 
 task dgmConverter(type: JavaExec, dependsOn: 'classes') {
     description = 'Generates DGM info file required for faster startup.'
-    ext.classesDir = sourceSets.main.output.classesDir
-    classpath = files(classesDir) + configurations.compile
+    classpath = files(file('target/classes')) + configurations.compile
     main = 'org.codehaus.groovy.tools.DgmConverter'
-    args = ['--info', classesDir]
+    args = ['--info']
     doFirst {
-        file("$classesDir/META-INF").mkdirs()
+        file('target/classes/META-INF').mkdirs()
     }
     inputs.files fileTree(dir: projectDir, includes: ['src/**/*GroovyMethods.java'])
-    outputs.file file("$classesDir/META-INF/dgminfo")
+    outputs.file file('target/classes/META-INF/dgminfo')
 }
 
 task compilerDgmConverter(type: JavaExec) {
     description = 'Generates DGM info file for the bootstrap compiler'
-    ext.compilerClassesDir = sourceSets.compiler.output.classesDir
-    classpath = files(compilerClassesDir) + configurations.compilerCompile
+    classpath = files(file('target/classes/compiler')) + configurations.compilerCompile
     main = 'org.codehaus.groovy.tools.DgmConverter'
-    args = ['--info', compilerClassesDir]
+    ext.compilerDirPath = file('target/classes/compiler').absolutePath
+    args = ['--info', compilerDirPath]
     doFirst {
-        file("$compilerClassesDir/META-INF").mkdirs()
+        file('target/classes/compiler/META-INF').mkdirs()
     }
     inputs.files fileTree(dir: projectDir, includes: ['src/**/*GroovyMethods.java'])
-    outputs.file file("$compilerClassesDir/META-INF/dgminfo")
+    outputs.file file('target/classes/compiler/META-INF/dgminfo')
 }
 
 compileCompilerJava {
diff --git a/gradle/assemble.gradle b/gradle/assemble.gradle
index ba306ab318..a15cb4889e 100644
--- a/gradle/assemble.gradle
+++ b/gradle/assemble.gradle
@@ -95,7 +95,7 @@ jar {
         }
         manifest groovyOsgiManifest
     }
-    exclude '**/package-info.class', 'META-INF/groovy-release-info.properties'
+    exclude '**/package-info.class', 'compiler', 'META-INF/groovy-release-info.properties', 'main'
 }
 
 subprojects {
@@ -113,7 +113,7 @@ subprojects {
             }
             manifest subprojectOsgiManifest
         }
-        exclude '**/package-info.class', 'META-INF/groovy-release-info.properties'
+        exclude '**/package-info.class', 'compiler', 'META-INF/groovy-release-info.properties', 'main'
     }
 }
 
@@ -219,6 +219,7 @@ allprojects {
     }
 }
 
+
 task jarAllWithIndy(type: GradleBuild) {
     onlyIf rootProject.indyCapable
     description = 'Triggers an external build generating the indy jarAll'
@@ -271,6 +272,7 @@ task groovydocAllJar(type: Jar, dependsOn: groovydocAll) {
     from groovydocAll.destinationDir
 }
 
+
 ext.distSpec = copySpec {
     from("$projectDir") {
         include "LICENSE.txt", "NOTICE.txt"
@@ -293,6 +295,7 @@ ext.distSpec = copySpec {
             }
         }
     }
+
     into("conf") {
         from "src/conf"
     }
diff --git a/subprojects/groovy-console/build.gradle b/subprojects/groovy-console/build.gradle
index c8de7fdd8e..41b929e43e 100644
--- a/subprojects/groovy-console/build.gradle
+++ b/subprojects/groovy-console/build.gradle
@@ -4,7 +4,6 @@ dependencies {
     compile project(':')
     groovy project(':')
     compile project(':groovy-swing')
-    compile project(':groovy-templates')
     testCompile project(':groovy-swing').sourceSets.test.runtimeClasspath
 }
 
