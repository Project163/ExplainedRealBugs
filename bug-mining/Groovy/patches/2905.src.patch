diff --git a/src/main/org/codehaus/groovy/classgen/AsmClassGenerator.java b/src/main/org/codehaus/groovy/classgen/AsmClassGenerator.java
index 3104e81bb8..2874f987af 100644
--- a/src/main/org/codehaus/groovy/classgen/AsmClassGenerator.java
+++ b/src/main/org/codehaus/groovy/classgen/AsmClassGenerator.java
@@ -461,36 +461,40 @@ public class AsmClassGenerator extends ClassGenerator {
             ClassNode closureClass = controller.getClosureWriter().getOrAddClosureClass((ClosureExpression) exp, ACC_PUBLIC);
             Type t = Type.getType(BytecodeHelper.getTypeDescription(closureClass));
             av.visit(null, t);
-       } else if (type.isArray()) {
-           ListExpression list = (ListExpression) exp;
-           AnnotationVisitor avl = av.visitArray(null);
-           ClassNode componentType = type.getComponentType();
-           for (Expression lExp : list.getExpressions()) {
-               visitAnnotationDefaultExpression(avl, componentType, lExp);
-           }
-       } else if (ClassHelper.isPrimitiveType(type) || type.equals(ClassHelper.STRING_TYPE)) {
-           ConstantExpression constExp = (ConstantExpression) exp;
-           av.visit(null, constExp.getValue());
-       } else if (ClassHelper.CLASS_Type.equals(type)) {
-           ClassNode clazz = exp.getType();
-           Type t = Type.getType(BytecodeHelper.getTypeDescription(clazz));
-           av.visit(null, t);
-       } else if (type.isDerivedFrom(ClassHelper.Enum_Type)) {
-           PropertyExpression pExp = (PropertyExpression) exp;
-           ClassExpression cExp = (ClassExpression) pExp.getObjectExpression();
-           String desc = BytecodeHelper.getTypeDescription(cExp.getType());
-           String name = pExp.getPropertyAsString();
-           av.visitEnum(null, desc, name);
-       } else if (type.implementsInterface(ClassHelper.Annotation_TYPE)) {
-           AnnotationConstantExpression avExp = (AnnotationConstantExpression) exp;
-           AnnotationNode value = (AnnotationNode) avExp.getValue();
-           AnnotationVisitor avc = av.visitAnnotation(null, BytecodeHelper.getTypeDescription(avExp.getType()));
-           visitAnnotationAttributes(value,avc);
-       } else {
-           throw new GroovyBugError("unexpected annotation type " + type.getName());
-       }
-       av.visitEnd();
-   }
+        } else if (type.isArray()) {
+            AnnotationVisitor avl = av.visitArray(null);
+            ClassNode componentType = type.getComponentType();
+            if (exp instanceof ListExpression) {
+                ListExpression list = (ListExpression) exp;
+                for (Expression lExp : list.getExpressions()) {
+                    visitAnnotationDefaultExpression(avl, componentType, lExp);
+                }
+            } else {
+                visitAnnotationDefaultExpression(avl, componentType, exp);
+            }
+        } else if (ClassHelper.isPrimitiveType(type) || type.equals(ClassHelper.STRING_TYPE)) {
+            ConstantExpression constExp = (ConstantExpression) exp;
+            av.visit(null, constExp.getValue());
+        } else if (ClassHelper.CLASS_Type.equals(type)) {
+            ClassNode clazz = exp.getType();
+            Type t = Type.getType(BytecodeHelper.getTypeDescription(clazz));
+            av.visit(null, t);
+        } else if (type.isDerivedFrom(ClassHelper.Enum_Type)) {
+            PropertyExpression pExp = (PropertyExpression) exp;
+            ClassExpression cExp = (ClassExpression) pExp.getObjectExpression();
+            String desc = BytecodeHelper.getTypeDescription(cExp.getType());
+            String name = pExp.getPropertyAsString();
+            av.visitEnum(null, desc, name);
+        } else if (type.implementsInterface(ClassHelper.Annotation_TYPE)) {
+            AnnotationConstantExpression avExp = (AnnotationConstantExpression) exp;
+            AnnotationNode value = (AnnotationNode) avExp.getValue();
+            AnnotationVisitor avc = av.visitAnnotation(null, BytecodeHelper.getTypeDescription(avExp.getType()));
+            visitAnnotationAttributes(value, avc);
+        } else {
+            throw new GroovyBugError("unexpected annotation type " + type.getName());
+        }
+        av.visitEnd();
+    }
 
     private void visitAnnotationDefault(MethodNode node, MethodVisitor mv) {
         if (!node.hasAnnotationDefault()) return;
diff --git a/src/test/gls/annotations/AnnotationTest.groovy b/src/test/gls/annotations/AnnotationTest.groovy
index 465d9c0577..fd84b8ac9a 100644
--- a/src/test/gls/annotations/AnnotationTest.groovy
+++ b/src/test/gls/annotations/AnnotationTest.groovy
@@ -124,11 +124,21 @@ class AnnotationTest extends CompilableTestSupport {
     }
 
     void testArrayDefault() {
-        shouldNotCompile """
-            @interface X {
-                String[] x() default "1" // must be list
+        // GROOVY-4811
+        assertScript '''
+            import java.lang.annotation.*
+
+            @Retention(RetentionPolicy.RUNTIME)
+            @Target(ElementType.TYPE)
+            @interface Temp {
+                String[] bar() default '1' // coerced to list as per Java but must be correct type
             }
-        """
+
+            @Temp
+            class Bar {}
+
+            assert Bar.getAnnotation(Temp).bar() == ['1']
+        '''
 
         shouldNotCompile """
             @interface X {
