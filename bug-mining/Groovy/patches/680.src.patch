diff --git a/src/main/org/codehaus/groovy/antlr/groovy.g b/src/main/org/codehaus/groovy/antlr/groovy.g
index 8681c5297d..0aa3cc47a6 100644
--- a/src/main/org/codehaus/groovy/antlr/groovy.g
+++ b/src/main/org/codehaus/groovy/antlr/groovy.g
@@ -719,9 +719,9 @@ int currentLtLevel = 0;}
 // this gobbles up *some* amount of '>' characters, and counts how many
 // it gobbled.
 protected typeArgumentsOrParametersEnd
-    :   GT! {ltCounter-=1;} nls!
-    |   SR! {ltCounter-=2;} nls!
-    |   BSR! {ltCounter-=3;} nls!
+    :   GT! {ltCounter-=1;}
+    |   SR! {ltCounter-=2;}
+    |   BSR! {ltCounter-=3;}
     ;
 
 // Restriction on wildcard types based on super class or derrived class
@@ -942,7 +942,7 @@ if (modifiers != null) {
     :   "class" IDENT nls!
        { currentClass = #IDENT; }
         // it _might_ have type paramaters
-        (tp:typeParameters)?
+        (tp:typeParameters nls!)?
         // it _might_ have a superclass...
         sc:superClassClause
         // it might implement some interfaces...
diff --git a/src/test/gls/generics/vm5/GenericsTest.groovy b/src/test/gls/generics/vm5/GenericsTest.groovy
index 97d853b371..d8de6cb93c 100644
--- a/src/test/gls/generics/vm5/GenericsTest.groovy
+++ b/src/test/gls/generics/vm5/GenericsTest.groovy
@@ -242,4 +242,31 @@ class GenericsTest extends GenericsTestBase {
         assert "x" == new CallableTask().call();
 	  """
 	}
+
+	void testGenericsInAsType() {
+	  // this is to ensure no regression to GROOVY-2725 will happen
+      // "as ThreadLocal<Integer>\n" did not compile because the nls
+      // was swallowed and could not be used to end the expression
+	   assertScript """
+import java.util.concurrent.atomic.AtomicInteger
+
+ public class ThreadId
+ {
+  private static final AtomicInteger nextId = new AtomicInteger(0)
+  private static final ThreadLocal<Integer> threadId = [
+                  initialValue: { return nextId.getAndIncrement() }
+                  ] as ThreadLocal<Integer>
+
+  public static int get()
+  {
+      System.out.println( "Thread ID: " + threadId.get());
+      return threadId.get();
+  }
+
+ }
+ // we do not actually want to execute something, just
+ // ensure this compiles, so we do a dummy command here
+ assert ThreadId!=null
+	   """
+	}
 }
