diff --git a/build.xml b/build.xml
index 159182a7a2..351fff867a 100644
--- a/build.xml
+++ b/build.xml
@@ -747,8 +747,15 @@ Use the shiny new groovyc fork mode :-)
         </copy>
     </target>
 
-    <target name="groovydoc" depends="-docInit,-includeGroovyDocTemplates,docGDK"
-            description="Create the groovydoc documentation.">
+    <target name="groovydoc" depends="-docInit,-includeGroovyDocTemplates,docGDK">
+        <path id="groovydocpath">
+            <path path="${mainClassesDirectory}"/>
+            <path refid="runtimePath"/>
+        </path>
+        <antforked target="realgroovydoc" maxmemory="512m" classpathref="groovydocpath"/>
+    </target>
+
+    <target name="realgroovydoc">
         <taskdef name="groovydoc" classname="org.codehaus.groovy.ant.Groovydoc">
             <classpath>
                 <path path="${mainClassesDirectory}"/>
diff --git a/config/ant/build-setup.xml b/config/ant/build-setup.xml
index 83ee2b237b..499b087d54 100644
--- a/config/ant/build-setup.xml
+++ b/config/ant/build-setup.xml
@@ -59,9 +59,11 @@ $Date: 2007-03-11 19:14:07 +1000 (Sun, 11 Mar 2007) $
 
     <macrodef name="antforked">
         <attribute name="target"/>
+        <attribute name="maxmemory" default="256m"/>
+        <attribute name="classpathref" default="runtimePath"/>
         <sequential>
-            <java classname="org.apache.tools.ant.launch.Launcher" fork="true" maxmemory="256m" failonerror="true">
-                <classpath refid="runtimePath"/>
+            <java classname="org.apache.tools.ant.launch.Launcher" fork="true" maxmemory="@{maxmemory}" failonerror="true">
+                <classpath refid="@{classpathref}"/>
                 <arg value="@{target}"/>
             </java>
         </sequential>
