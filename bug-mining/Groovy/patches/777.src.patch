diff --git a/src/main/org/codehaus/groovy/classgen/AsmClassGenerator.java b/src/main/org/codehaus/groovy/classgen/AsmClassGenerator.java
index 10bbaa6588..48dbdbef10 100644
--- a/src/main/org/codehaus/groovy/classgen/AsmClassGenerator.java
+++ b/src/main/org/codehaus/groovy/classgen/AsmClassGenerator.java
@@ -812,8 +812,23 @@ public class AsmClassGenerator extends ClassGenerator {
         Label breakLabel = compileStack.getBreakLabel();
 
         mv.visitLabel(continueLabel);
-        loop.getBooleanExpression().visit(this);
-        mv.visitJumpInsn(IFEQ, breakLabel);
+        Expression bool = loop.getBooleanExpression();
+        boolean boolHandled = false;
+        if (bool instanceof ConstantExpression) {
+            ConstantExpression constant = (ConstantExpression) bool;
+            if (constant.getValue()==Boolean.TRUE) {
+                boolHandled = true;
+                // do nothing
+            } else if (constant.getValue()==Boolean.FALSE) {
+                boolHandled = true;
+                mv.visitJumpInsn(GOTO, breakLabel);
+            }
+        }
+        
+        if(!boolHandled) {
+            bool.visit(this);
+            mv.visitJumpInsn(IFEQ, breakLabel);
+        }
 
         loop.getLoopBlock().visit(this);
 
@@ -3586,7 +3601,10 @@ public class AsmClassGenerator extends ClassGenerator {
             parameters = Parameter.EMPTY_ARRAY;
         } else if (parameters.length == 0) {
             // let's create a default 'it' parameter
-            parameters = new Parameter[]{new Parameter(ClassHelper.OBJECT_TYPE, "it", ConstantExpression.NULL)};
+            Parameter it = new Parameter(ClassHelper.OBJECT_TYPE, "it", ConstantExpression.NULL);
+            parameters = new Parameter[]{it};
+            org.codehaus.groovy.ast.Variable ref = expression.getVariableScope().getDeclaredVariable("it");
+            if (ref!=null) it.setClosureSharedVariable(ref.isClosureSharedVariable());
         }
 
         Parameter[] localVariableParams = getClosureSharedVariables(expression);
diff --git a/src/test/gls/scope/BlockScopeVisibilityTest.groovy b/src/test/gls/scope/BlockScopeVisibilityTest.groovy
index 8d167ee428..e67ec1fde5 100644
--- a/src/test/gls/scope/BlockScopeVisibilityTest.groovy
+++ b/src/test/gls/scope/BlockScopeVisibilityTest.groovy
@@ -14,13 +14,18 @@ class BlockScopeVisibilityTest extends CompilableTestSupport {
     shouldFail(MissingPropertyException) {    
         try {
             throw new RuntimeException("not important");
-        } catch(AssertionError e) {
+        } catch (AssertionError e) {
            // here e is defined
-        } catch(Throwable t) {
+        } catch (Throwable t) {
            // here e should not be accessible
            println e 
         }
     }
   }
+  
+  public void testInnerClosureCanAccessImplicitItOfOuterClosure() {
+    def c = { {-> it}} 
+    assert c(1)() == 1
+  }
 
 }
\ No newline at end of file
