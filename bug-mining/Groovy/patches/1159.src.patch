diff --git a/src/main/org/codehaus/groovy/tools/gse/DependencyTracker.java b/src/main/org/codehaus/groovy/tools/gse/DependencyTracker.java
index 92c36294f8..b6fd442cd0 100644
--- a/src/main/org/codehaus/groovy/tools/gse/DependencyTracker.java
+++ b/src/main/org/codehaus/groovy/tools/gse/DependencyTracker.java
@@ -41,6 +41,7 @@ public class DependencyTracker extends ClassCodeVisitorSupport {
     public void visitClass(ClassNode node) {
         Set<String> old = current;
         current = cache.get(node.getName());
+        addToCache(node);
         addToCache(node.getSuperClass());
         addToCache(node.getInterfaces());
         super.visitClass(node);
diff --git a/src/test/org/codehaus/groovy/tools/gse/DependencyTest.java b/src/test/org/codehaus/groovy/tools/gse/DependencyTest.java
index 8ed0779312..b7187ddf10 100644
--- a/src/test/org/codehaus/groovy/tools/gse/DependencyTest.java
+++ b/src/test/org/codehaus/groovy/tools/gse/DependencyTest.java
@@ -43,20 +43,20 @@ public class DependencyTest extends GroovyTestCase {
                 "class A3 {C1 foo(C2 x){new C3()}}\n"
         ));
         cu.compile(Phases.CLASS_GENERATION);
-        assertEquals(cache.get("C1").size(),0);
-        assertEquals(cache.get("C2").size(),0);
-        assertEquals(cache.get("C3").size(),0);
+        assertEquals(cache.get("C1").size(),1);
+        assertEquals(cache.get("C2").size(),1);
+        assertEquals(cache.get("C3").size(),1);
         
         Set<String> dep = cache.get("A1");
-        assertEquals(dep.size(),1);
+        assertEquals(dep.size(),2);
         assertTrue(dep.contains("C1"));
         
         dep = cache.get("A2");
-        assertEquals(dep.size(),1);
+        assertEquals(dep.size(),2);
         assertTrue(dep.contains("C2"));
         
         dep = cache.get("A3");
-        assertEquals(dep.size(),3);
+        assertEquals(dep.size(),4);
         assertTrue(dep.contains("C1"));
         assertTrue(dep.contains("C2"));
         assertTrue(dep.contains("C3"));
@@ -72,14 +72,14 @@ public class DependencyTest extends GroovyTestCase {
         cache.makeTransitiveHull();
          
         Set<String> dep = cache.get("A1");
-        assertEquals(dep.size(),0);
+        assertEquals(dep.size(),1);
         
         dep = cache.get("A2");
-        assertEquals(dep.size(),1);
+        assertEquals(dep.size(),2);
         assertTrue(dep.contains("A1"));
         
         dep = cache.get("A3");
-        assertEquals(dep.size(),2);
+        assertEquals(dep.size(),3);
         assertTrue(dep.contains("A1"));
         assertTrue(dep.contains("A2"));
     }
