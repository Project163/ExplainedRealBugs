diff --git a/src/main/groovy/util/GroovyTestCase.java b/src/main/groovy/util/GroovyTestCase.java
index 13cec9734f..b6a8a80c37 100644
--- a/src/main/groovy/util/GroovyTestCase.java
+++ b/src/main/groovy/util/GroovyTestCase.java
@@ -41,6 +41,8 @@ public class GroovyTestCase extends TestCase {
 
     protected static Logger log = Logger.getLogger(GroovyTestCase.class.getName());
     private static int counter;
+    public static final String TEST_SCRIPT_NAME_PREFIX = "TestScript";
+
     private boolean useAgileDoxNaming = false;
 
     public GroovyTestCase() {
@@ -205,7 +207,7 @@ public class GroovyTestCase extends TestCase {
     }
 
     protected String getTestClassName() {
-        return "TestScript" + getMethodName() + (counter++) + ".groovy";
+        return TEST_SCRIPT_NAME_PREFIX + getMethodName() + (counter++) + ".groovy";
     }
 
     /**
diff --git a/src/test/groovy/bugs/BadLineNumberOnExceptionBugTest.groovy b/src/test/groovy/bugs/BadLineNumberOnExceptionBugTest.groovy
new file mode 100644
index 0000000000..8c05a3e34f
--- /dev/null
+++ b/src/test/groovy/bugs/BadLineNumberOnExceptionBugTest.groovy
@@ -0,0 +1,57 @@
+package groovy.bugs
+
+/**
+ * Ensure that the correct line information is reported when an exception is thrown.
+ * <p>
+ * This test covers: <ul>
+ * <li><a href="http://jira.codehaus.org/browse/GROOVY-3067">GROOVY-3067</a></li>
+ * <li><a href="http://jira.codehaus.org/browse/GROOVY-2983">GROOVY-2983</a></li>
+ *
+ * @author Guillaume Laforge
+ */
+class BadLineNumberOnExceptionBugTest extends GroovyTestCase {
+
+    void testGroovy3067() {
+        assertScript """
+            class Foo {
+                boolean hello() { true }
+            }
+
+            try {
+                foo = new Foo()
+
+                if(foo.hello()()) { // line 9
+                    println "do"
+                    println "do"
+                    println "do"
+                    println "do"
+                }
+
+                assert false
+            } catch (MissingMethodException e) {
+                def scriptTraceElement = e.stackTrace.find { it.declaringClass.startsWith(GroovyTestCase.TEST_SCRIPT_NAME_PREFIX) }
+                assert 9 == scriptTraceElement.lineNumber
+            }
+        """
+    }
+
+    void testGroovy2983() {
+        assertScript """
+            def foo() {
+                integer.metaClass = null // line 3
+                integer.metaClass = null
+                integer.metaClass = null
+                integer.metaClass = null
+            }
+            
+            try {
+                foo()
+
+                assert false
+            } catch (MissingPropertyException e) {
+                def scriptTraceElement = e.stackTrace.find { it.declaringClass.startsWith(GroovyTestCase.TEST_SCRIPT_NAME_PREFIX) }
+                assert 3 == scriptTraceElement.lineNumber
+            }
+        """
+    }
+}
\ No newline at end of file
