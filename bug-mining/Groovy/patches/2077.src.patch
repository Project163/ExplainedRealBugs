diff --git a/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java b/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java
index d1f6112e0a..231a00d458 100644
--- a/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java
+++ b/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java
@@ -2577,7 +2577,7 @@ public class StaticTypeCheckingVisitor extends ClassCodeVisitorSupport {
                 // not in a closure
                 ClassNode parent = receiver;
                 while (parent instanceof InnerClassNode && !parent.isStaticClass()) {
-                    parent = receiver.getOuterClass();
+                    parent = parent.getOuterClass();
                     methods.addAll(parent.getMethods(name));
                 }
             }
diff --git a/src/test/groovy/transform/stc/BugsSTCTest.groovy b/src/test/groovy/transform/stc/BugsSTCTest.groovy
index 4ebfab7218..4bc09bfa85 100644
--- a/src/test/groovy/transform/stc/BugsSTCTest.groovy
+++ b/src/test/groovy/transform/stc/BugsSTCTest.groovy
@@ -298,4 +298,17 @@ class BugsSTCTest extends StaticTypeCheckingTestCase {
             List other = (List) tmp // should not complain because source and target are interfaces
         '''
     }
+
+    // GROOVY-5889
+    void testShouldNotGoIntoInfiniteLoop() {
+        assertScript '''
+        class Enclosing {
+            static class FMessage {
+                static enum LogLevel { finest, finer, fine, config, info, warning, severe }
+                LogLevel logLevel
+            }
+        }
+        new Enclosing()
+        '''
+    }
 }
