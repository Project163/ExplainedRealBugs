diff --git a/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java b/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java
index ea6191b52f..4a09e8d1fb 100644
--- a/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java
+++ b/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java
@@ -3535,7 +3535,7 @@ public class StaticTypeCheckingVisitor extends ClassCodeVisitorSupport {
                     }
                     if (property != null) {
                         ClassNode type = property.getOriginType();
-                        if (implementsInterfaceOrIsSubclassOf(args[0], type)) {
+                        if (implementsInterfaceOrIsSubclassOf(wrapTypeIfNecessary(args[0]), wrapTypeIfNecessary(type))) {
                             MethodNode node = new MethodNode(name, Opcodes.ACC_PUBLIC, VOID_TYPE, new Parameter[]{
                                     new Parameter(type, "arg")
                             }, ClassNode.EMPTY_ARRAY, GENERATED_EMPTY_STATEMENT);
diff --git a/src/test/org/codehaus/groovy/classgen/asm/sc/BugsStaticCompileTest.groovy b/src/test/org/codehaus/groovy/classgen/asm/sc/BugsStaticCompileTest.groovy
index 6970b7ad1d..73ba721a40 100644
--- a/src/test/org/codehaus/groovy/classgen/asm/sc/BugsStaticCompileTest.groovy
+++ b/src/test/org/codehaus/groovy/classgen/asm/sc/BugsStaticCompileTest.groovy
@@ -1295,5 +1295,46 @@ println someInt
     assert o.test() == 'ok'
     '''
     }
+
+    // GROOVY-6876
+    void testSetterOfPrimitiveType() {
+        assertScript '''
+            class Foo {
+                long bar
+                def method() {
+                    setBar(-1L)
+                    bar
+                }
+            }
+            assert new Foo().method() == -1L
+            '''
+
+        assertScript '''
+            class Foo {
+                long bar
+                def method(Long v) {
+                    setBar(v)
+                    bar
+                }
+            }
+            assert new Foo().method(-1L) == -1L
+        '''
+
+        assertScript '''
+            class Foo {
+                long rankOrderingOrId
+                void setRankOrderingOrId(long rankOrderingOrId) {
+                    this.rankOrderingOrId = rankOrderingOrId < 0 ? -1 : rankOrderingOrId
+                }
+            }
+            def f = new Foo()
+            f.setRankOrderingOrId(1L)
+            assert f.getRankOrderingOrId() == 1L
+            assert f.rankOrderingOrId == 1L
+            f.rankOrderingOrId = 2L
+            assert f.getRankOrderingOrId() == 2L
+            assert f.rankOrderingOrId == 2L
+        '''
+    }
 }
 
