diff --git a/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java b/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java
index 02e9e8cc3f..b0e1c2e0bc 100644
--- a/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java
+++ b/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java
@@ -1237,9 +1237,15 @@ public class StaticTypeCheckingVisitor extends ClassCodeVisitorSupport {
             resultType = PATTERN_TYPE;
         } else if (typeRe == ArrayList_TYPE) {
             resultType = ArrayList_TYPE;
+        } else if (typeRe.equals(PATTERN_TYPE)) {
+            resultType = PATTERN_TYPE;
         } else {
             MethodNode mn = findMethodOrFail(expression, type, "bitwiseNegate");
-            resultType = mn.getReturnType();
+            if (mn!=null) {
+                resultType = mn.getReturnType();
+            } else {
+                resultType = OBJECT_TYPE;
+            }
         }
         storeType(expression, resultType);
     }
diff --git a/src/test/groovy/transform/stc/UnaryOperatorSTCTest.groovy b/src/test/groovy/transform/stc/UnaryOperatorSTCTest.groovy
index be7addbbc4..6474e0fcf5 100644
--- a/src/test/groovy/transform/stc/UnaryOperatorSTCTest.groovy
+++ b/src/test/groovy/transform/stc/UnaryOperatorSTCTest.groovy
@@ -289,5 +289,18 @@ class UnaryOperatorSTCTest extends StaticTypeCheckingTestCase {
             def y = -x
         '''
     }
+
+    // GROOVY-5834
+    void testCreatePatternInField() {
+        assertScript '''
+            class Sample {
+                def pattern = ~'foo|bar'
+                void test() {
+                    assert pattern instanceof java.util.regex.Pattern
+                }
+            }
+            new Sample().test()
+        '''
+    }
 }
 
