diff --git a/src/main/org/codehaus/groovy/classgen/asm/sc/StaticTypesClosureWriter.java b/src/main/org/codehaus/groovy/classgen/asm/sc/StaticTypesClosureWriter.java
index 854ebd033c..4ad941c2bd 100644
--- a/src/main/org/codehaus/groovy/classgen/asm/sc/StaticTypesClosureWriter.java
+++ b/src/main/org/codehaus/groovy/classgen/asm/sc/StaticTypesClosureWriter.java
@@ -24,6 +24,7 @@ import org.codehaus.groovy.ast.expr.ClosureExpression;
 import org.codehaus.groovy.ast.expr.MethodCallExpression;
 import org.codehaus.groovy.classgen.asm.ClosureWriter;
 import org.codehaus.groovy.classgen.asm.WriterController;
+import org.codehaus.groovy.classgen.asm.WriterControllerFactory;
 import org.codehaus.groovy.control.SourceUnit;
 import org.codehaus.groovy.transform.sc.StaticCompilationMetadataKeys;
 import org.codehaus.groovy.transform.stc.StaticTypesMarker;
@@ -52,10 +53,11 @@ public class StaticTypesClosureWriter extends ClosureWriter {
         for (MethodNode method : methods) {
             visitor.visitMethod(method);
         }
-        closureClass.setNodeMetaData(StaticCompilationMetadataKeys.WITH_CLOSURE, expression.getNodeMetaData(StaticCompilationMetadataKeys.WITH_CLOSURE));
+        closureClass.putNodeMetaData(StaticCompilationMetadataKeys.WITH_CLOSURE, expression.getNodeMetaData(StaticCompilationMetadataKeys.WITH_CLOSURE));
+        closureClass.putNodeMetaData(StaticCompilationMetadataKeys.STATIC_COMPILE_NODE, Boolean.TRUE);
         return closureClass;
     }
-    
+
     private static class MethodTargetCompletionVisitor extends ClassCodeVisitorSupport {
 
         private final MethodNode doCallMethod;
diff --git a/src/main/org/codehaus/groovy/classgen/asm/sc/StaticTypesWriterController.java b/src/main/org/codehaus/groovy/classgen/asm/sc/StaticTypesWriterController.java
index b8e389261c..e857f0ef30 100644
--- a/src/main/org/codehaus/groovy/classgen/asm/sc/StaticTypesWriterController.java
+++ b/src/main/org/codehaus/groovy/classgen/asm/sc/StaticTypesWriterController.java
@@ -19,6 +19,7 @@ import org.codehaus.groovy.ast.*;
 import org.codehaus.groovy.classgen.AsmClassGenerator;
 import org.codehaus.groovy.classgen.GeneratorContext;
 import org.codehaus.groovy.classgen.asm.*;
+import org.codehaus.groovy.transform.sc.StaticCompilationMetadataKeys;
 import org.codehaus.groovy.transform.sc.StaticCompilationVisitor;
 import org.objectweb.asm.ClassVisitor;
 
@@ -71,7 +72,9 @@ public class StaticTypesWriterController extends DelegatingController {
             node = classNode.getOuterClass();
         }
 
-        isInStaticallyCheckedMethod = mn != null && StaticCompilationVisitor.isStaticallyCompiled(node);
+        isInStaticallyCheckedMethod = mn != null && (
+                StaticCompilationVisitor.isStaticallyCompiled(node)
+                        || classNode.getNodeMetaData(StaticCompilationMetadataKeys.STATIC_COMPILE_NODE)!=null);
 
 /*      if (isInStaticallyCheckedMethod) {
             System.out.println("Entering statically compiled method: "+mn.getDeclaringClass()+"#"+mn);
diff --git a/src/main/org/codehaus/groovy/transform/sc/StaticCompilationVisitor.java b/src/main/org/codehaus/groovy/transform/sc/StaticCompilationVisitor.java
index 1c2f5a2918..ae0cab2fdb 100644
--- a/src/main/org/codehaus/groovy/transform/sc/StaticCompilationVisitor.java
+++ b/src/main/org/codehaus/groovy/transform/sc/StaticCompilationVisitor.java
@@ -209,7 +209,7 @@ public class StaticCompilationVisitor extends StaticTypeCheckingVisitor {
         if (StaticTypeCheckingSupport.isWithCall(call.getMethodAsString(), call.getArguments())) {
             // no check is required, ensured by isWithCall
             ClosureExpression closure = (ClosureExpression) ((ArgumentListExpression) call.getArguments()).getExpression(0);
-            closure.setNodeMetaData(StaticCompilationMetadataKeys.WITH_CLOSURE, Boolean.TRUE);
+            closure.putNodeMetaData(StaticCompilationMetadataKeys.WITH_CLOSURE, Boolean.TRUE);
         }
     }
 
diff --git a/src/test/org/codehaus/groovy/classgen/asm/sc/BugsStaticCompileTest.groovy b/src/test/org/codehaus/groovy/classgen/asm/sc/BugsStaticCompileTest.groovy
index a1e55e9ee5..a0fb93c79e 100644
--- a/src/test/org/codehaus/groovy/classgen/asm/sc/BugsStaticCompileTest.groovy
+++ b/src/test/org/codehaus/groovy/classgen/asm/sc/BugsStaticCompileTest.groovy
@@ -86,5 +86,31 @@ class BugsStaticCompileTest extends BugsSTCTest {
             }
         '''
     }
+
+    // GROOVY-5529
+    void testStaticCompilationOfClosureWhenSingleMethodAnnotated() {
+        new GroovyShell().evaluate '''import groovy.transform.ASTTest
+        import static org.codehaus.groovy.control.CompilePhase.*
+
+        interface Row {
+            int getKey()
+        }
+
+        class RowImpl implements Row {
+            int getKey() { 1 }
+        }
+
+        @groovy.transform.CompileStatic
+        def test() {
+            def rows = [new RowImpl(), new RowImpl(), new RowImpl()]
+
+            rows.each { Row row ->
+                println row.key
+            }
+        }
+
+        test()
+        '''
+    }
 }
 
