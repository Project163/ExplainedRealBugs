diff --git a/src/main/groovy/util/XmlNodePrinter.java b/src/main/groovy/util/XmlNodePrinter.java
index 1f1e314c36..c8b10e8850 100644
--- a/src/main/groovy/util/XmlNodePrinter.java
+++ b/src/main/groovy/util/XmlNodePrinter.java
@@ -227,7 +227,7 @@ public class XmlNodePrinter {
 
     protected void printSimpleItem(Object value) {
         if (!preserveWhitespace) printLineBegin();
-        printEscaped(InvokerHelper.toString(value));
+        printEscaped(InvokerHelper.toString(value), false);
         if (!preserveWhitespace) printLineEnd();
     }
 
@@ -297,9 +297,9 @@ public class XmlNodePrinter {
             Object value = entry.getValue();
             out.print(quote);
             if (value instanceof String) {
-                printEscaped((String) value);
+                printEscaped((String) value, true);
             } else {
-                printEscaped(InvokerHelper.toString(value));
+                printEscaped(InvokerHelper.toString(value), true);
             }
             out.print(quote);
             printNamespace(entry.getKey(), ctx);
@@ -340,7 +340,7 @@ public class XmlNodePrinter {
 
     // For ' and " we only escape if needed. As far as XML is concerned,
     // we could always escape if we wanted to.
-    private void printEscaped(String s) {
+    private void printEscaped(String s, boolean isAttributeValue) {
         for (int i = 0; i < s.length(); i++) {
             char c = s.charAt(i);
             switch (c) {
@@ -365,6 +365,18 @@ public class XmlNodePrinter {
                     else
                         out.print(c);
                     break;
+                case '\n':
+                    if (isAttributeValue)
+                        out.print("&#10;");
+                    else
+                        out.print(c);
+                    break;
+                case '\r':
+                    if (isAttributeValue)
+                        out.print("&#13;");
+                    else
+                        out.print(c);
+                    break;
                 default:
                     out.print(c);
             }
diff --git a/src/test/groovy/util/XmlNodePrinterTest.groovy b/src/test/groovy/util/XmlNodePrinterTest.groovy
index ccf54e4563..1f1d68d732 100644
--- a/src/test/groovy/util/XmlNodePrinterTest.groovy
+++ b/src/test/groovy/util/XmlNodePrinterTest.groovy
@@ -60,6 +60,9 @@ class XmlNodePrinterTest extends GroovyTestCase {
     def tagWithSpecialCharsInput = """<Field>&lt;&amp;&gt;</Field>"""
     def tagWithSpecialCharsOutput = """<Field>\n  &lt;&amp;&gt;\n</Field>\n"""
 
+    def attributeWithNewlineInput = "<Field Text=\"Some&#10;Text&#10;&#13;\"/>"
+    def attributeWithNewlineExpectedOutput = "<Field Text=\"Some&#10;Text&#10;&#13;\"/>\n"
+
     protected void setUp() {
         writer = new StringWriter()
         pw = new PrintWriter(writer)
@@ -126,6 +129,10 @@ class XmlNodePrinterTest extends GroovyTestCase {
         checkRoundtrip attributeInput, attributeExpectedOutputApos
     }
 
+    void testAttributeWithNewline() {
+        checkRoundtrip attributeWithNewlineInput, attributeWithNewlineExpectedOutput
+    }
+
     void testContentWithSpecialSymbols() {
         printer = new XmlNodePrinter(pw, "  ", "'")
         checkRoundtrip tagWithSpecialCharsOutput, tagWithSpecialCharsOutput
