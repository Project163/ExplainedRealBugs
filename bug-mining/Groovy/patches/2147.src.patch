diff --git a/src/main/org/codehaus/groovy/control/AnnotationConstantsVisitor.java b/src/main/org/codehaus/groovy/control/AnnotationConstantsVisitor.java
index a9479d1d06..983fddc68f 100644
--- a/src/main/org/codehaus/groovy/control/AnnotationConstantsVisitor.java
+++ b/src/main/org/codehaus/groovy/control/AnnotationConstantsVisitor.java
@@ -23,6 +23,7 @@ import org.codehaus.groovy.ast.MethodNode;
 import org.codehaus.groovy.ast.expr.CastExpression;
 import org.codehaus.groovy.ast.expr.ConstantExpression;
 import org.codehaus.groovy.ast.expr.Expression;
+import org.codehaus.groovy.ast.stmt.ExpressionStatement;
 import org.codehaus.groovy.ast.stmt.ReturnStatement;
 import org.codehaus.groovy.ast.stmt.Statement;
 import org.codehaus.groovy.classgen.Verifier;
@@ -53,8 +54,13 @@ public class AnnotationConstantsVisitor extends ClassCodeVisitorSupport {
 
     private void visitStatement(Statement statement, ClassNode returnType) {
         if (statement instanceof ReturnStatement) {
+            // normal path
             ReturnStatement rs = (ReturnStatement) statement;
             rs.setExpression(transformConstantExpression(rs.getExpression(), returnType));
+        } else if (statement instanceof ExpressionStatement) {
+            // path for JavaStubGenerator
+            ExpressionStatement es = (ExpressionStatement) statement;
+            es.setExpression(transformConstantExpression(es.getExpression(), returnType));
         }
     }
 
@@ -85,11 +91,11 @@ public class AnnotationConstantsVisitor extends ClassCodeVisitorSupport {
     }
 
     private Expression revertType(Expression val, ClassNode returnWrapperType) {
-        ClassNode valWrapperType = ClassHelper.getWrapper(val.getType());
         ConstantExpression ce = (ConstantExpression) val;
         if (ClassHelper.Character_TYPE.equals(returnWrapperType) && ClassHelper.STRING_TYPE.equals(val.getType())) {
             return configure(val, Verifier.transformToPrimitiveConstantIfPossible((ConstantExpression) val));
         }
+        ClassNode valWrapperType = ClassHelper.getWrapper(val.getType());
         if (ClassHelper.Integer_TYPE.equals(valWrapperType)) {
             Integer i = (Integer) ce.getValue();
             if (ClassHelper.Character_TYPE.equals(returnWrapperType)) {
diff --git a/src/main/org/codehaus/groovy/tools/javac/JavaAwareCompilationUnit.java b/src/main/org/codehaus/groovy/tools/javac/JavaAwareCompilationUnit.java
index 3c3381e349..1e8fe080cb 100644
--- a/src/main/org/codehaus/groovy/tools/javac/JavaAwareCompilationUnit.java
+++ b/src/main/org/codehaus/groovy/tools/javac/JavaAwareCompilationUnit.java
@@ -65,6 +65,8 @@ public class JavaAwareCompilationUnit extends CompilationUnit {
                     VariableScopeVisitor scopeVisitor = new VariableScopeVisitor(source);
                     scopeVisitor.visitClass(node);
                     new JavaAwareResolveVisitor(JavaAwareCompilationUnit.this).startResolving(node, source);
+                    AnnotationConstantsVisitor acv = new AnnotationConstantsVisitor();
+                    acv.visitClass(node, source);
                 }
             }
         }, Phases.CONVERSION);
diff --git a/src/main/org/codehaus/groovy/tools/javac/JavaStubGenerator.java b/src/main/org/codehaus/groovy/tools/javac/JavaStubGenerator.java
index 9645450666..1e8f585026 100644
--- a/src/main/org/codehaus/groovy/tools/javac/JavaStubGenerator.java
+++ b/src/main/org/codehaus/groovy/tools/javac/JavaStubGenerator.java
@@ -359,6 +359,10 @@ public class JavaStubGenerator {
         out.println(";");
     }
 
+    private String formatChar(String ch) {
+        return "'" + escapeSpecialChars("" + ch.charAt(0)) + "'";
+    }
+
     private String formatString(String s) {
         return "\"" + escapeSpecialChars(s) + "\"";
     }
@@ -565,9 +569,10 @@ public class JavaStubGenerator {
             if (re instanceof ConstantExpression) {
                 ConstantExpression ce = (ConstantExpression) re;
                 Object value = ce.getValue();
-                // TODO handle other primitive types (short, byte, char - supported?)
                 if (ClassHelper.STRING_TYPE.equals(ce.getType())) {
                     out.print(formatString((String)value));
+                } else if (ClassHelper.char_TYPE.equals(ce.getType()) || ClassHelper.Character_TYPE.equals(ce.getType())) {
+                    out.print(formatChar(value.toString()));
                 } else if (ClassHelper.long_TYPE.equals(ce.getType())) {
                     out.print("" + value + "L");
                 } else if (ClassHelper.float_TYPE.equals(ce.getType())) {
diff --git a/src/test/org/codehaus/groovy/tools/stubgenerator/AnnotationDefaultValuesStubTest.groovy b/src/test/org/codehaus/groovy/tools/stubgenerator/AnnotationDefaultValuesStubTest.groovy
index 67d692447a..79de636c38 100644
--- a/src/test/org/codehaus/groovy/tools/stubgenerator/AnnotationDefaultValuesStubTest.groovy
+++ b/src/test/org/codehaus/groovy/tools/stubgenerator/AnnotationDefaultValuesStubTest.groovy
@@ -31,10 +31,15 @@ class AnnotationDefaultValuesStubTest extends StringSourcesStubTestCase {
                 @interface Tx {
                     String value() default 'def'
                     int i() default 3
-                    boolean b() default false
+                    boolean bool() default false
                     float f() default 3.0f
                     double d() default 3.0d
                     long l() default 3l
+                    byte me() default 3
+                    short s() default 3
+                    char c1() default 65
+                    char c2() default 'A' as char
+                    char c3() default (char)'A'
                     Class clazz() default String
                     Color color() default Color.RED
                     String[] values() default ['def']
@@ -63,10 +68,15 @@ class AnnotationDefaultValuesStubTest extends StringSourcesStubTestCase {
         def stubSource = stubJavaSourceFor('Tx')
         assert stubSource.contains('java.lang.String value() default "def";')
         assert stubSource.contains('int i() default 3;')
-        assert stubSource.contains('boolean b() default false;')
+        assert stubSource.contains('boolean bool() default false;')
         assert stubSource.contains('float f() default 3.0f;')
         assert stubSource.contains('double d() default 3.0d;')
         assert stubSource.contains('long l() default 3L;')
+        assert stubSource.contains('byte me() default 3;')
+        assert stubSource.contains('short s() default 3;')
+        assert stubSource.contains("char c1() default 'A';")
+        assert stubSource.contains("char c2() default 'A';")
+        assert stubSource.contains("char c3() default 'A';")
         assert stubSource.contains('java.lang.Class clazz() default String.class;')
         assert stubSource.contains('Color color() default Color.RED;')
         assert stubSource.contains('String[] values() default { "def" };')
