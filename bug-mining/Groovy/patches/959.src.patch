diff --git a/src/main/org/codehaus/groovy/runtime/typehandling/DefaultTypeTransformation.java b/src/main/org/codehaus/groovy/runtime/typehandling/DefaultTypeTransformation.java
index 5809241ef7..a9cc906933 100644
--- a/src/main/org/codehaus/groovy/runtime/typehandling/DefaultTypeTransformation.java
+++ b/src/main/org/codehaus/groovy/runtime/typehandling/DefaultTypeTransformation.java
@@ -113,6 +113,11 @@ public class DefaultTypeTransformation {
     }
     
     public static Number castToNumber(Object object) {
+    	// default to Number class in exception details, else use the specified Number subtype.
+    	return castToNumber(object, Number.class);
+    }
+    
+    public static Number castToNumber(Object object, Class type) {
         if (object instanceof Number)
             return (Number) object;
         if (object instanceof Character) {
@@ -124,10 +129,10 @@ public class DefaultTypeTransformation {
                 return Integer.valueOf(c.charAt(0));
             }
             else {
-                throw new GroovyCastException(c,Integer.class);
+                throw new GroovyCastException(c, type);
             }
         }
-        throw new GroovyCastException(object,Number.class);
+        throw new GroovyCastException(object, type);
     }
     
     public static boolean castToBoolean(Object object) {
@@ -253,7 +258,7 @@ public class DefaultTypeTransformation {
         } else if (type == Class.class) {
             return castToClass(object);
         } else if (Number.class.isAssignableFrom(type)) {
-            Number n = castToNumber(object);
+            Number n = castToNumber(object, type);
             if (type == Byte.class) {
                 return new Byte(n.byteValue());
             } else if (type == Character.class) {
diff --git a/src/test/groovy/bugs/Groovy3511Bug.groovy b/src/test/groovy/bugs/Groovy3511Bug.groovy
new file mode 100644
index 0000000000..8755126f79
--- /dev/null
+++ b/src/test/groovy/bugs/Groovy3511Bug.groovy
@@ -0,0 +1,37 @@
+package groovy.bugs
+
+import org.codehaus.groovy.runtime.typehandling.DefaultTypeTransformation
+
+class Groovy3511Bug extends GroovyTestCase {
+    final SHOULD_HAVE_FAILED = "The conversion above should have failed"
+    void testExceptionMessageStringToNumberConversion() {
+        try {
+            Double test = "Hello" 
+            fail(SHOULD_HAVE_FAILED)
+        } catch (ex) {
+            verifyExceptionMsg(ex, Double.class.name)
+        }
+        try {
+            Float test = "Hello" 
+            fail(SHOULD_HAVE_FAILED)
+        } catch (ex) {
+            verifyExceptionMsg(ex, Float.class.name)
+        }
+        try {
+            DefaultTypeTransformation.castToNumber("Hello", Long.class) 
+            fail(SHOULD_HAVE_FAILED)
+        } catch (ex) {
+            verifyExceptionMsg(ex, Long.class.name)
+        }
+        try {
+            DefaultTypeTransformation.castToNumber("Hello") 
+            fail(SHOULD_HAVE_FAILED)
+        } catch (ex) {
+            verifyExceptionMsg(ex, Number.class.name)
+        }
+    }
+    
+    def verifyExceptionMsg(ex, className) {
+        assertTrue ex.message.contains(className)       
+    }
+}
