diff --git a/src/main/org/codehaus/groovy/classgen/asm/InvocationWriter.java b/src/main/org/codehaus/groovy/classgen/asm/InvocationWriter.java
index 9e8cf407a5..5076f9a4b3 100644
--- a/src/main/org/codehaus/groovy/classgen/asm/InvocationWriter.java
+++ b/src/main/org/codehaus/groovy/classgen/asm/InvocationWriter.java
@@ -417,7 +417,9 @@ public class InvocationWriter {
         // are we a local variable?
         // it should not be an explicitly "this" qualified method call
         // and the current class should have a possible method
-        ClassNode classNode = controller.getClassNode();
+
+        // GROOVY-6522
+        ClassNode classNode = controller.isInClosure() ? controller.getOutermostClass() : controller.getClassNode();
         String methodName = call.getMethodAsString();
         if (methodName==null) return false;
         if (!call.isImplicitThis()) return false;
diff --git a/src/test/org/codehaus/groovy/classgen/asm/sc/ClosuresStaticCompileTest.groovy b/src/test/org/codehaus/groovy/classgen/asm/sc/ClosuresStaticCompileTest.groovy
index 742d302141..839992bc46 100644
--- a/src/test/org/codehaus/groovy/classgen/asm/sc/ClosuresStaticCompileTest.groovy
+++ b/src/test/org/codehaus/groovy/classgen/asm/sc/ClosuresStaticCompileTest.groovy
@@ -67,5 +67,52 @@ class ClosuresStaticCompileTest extends ClosuresSTCTest {
             bar()
         '''
     }
+
+    // GROOVY-6522
+    void testShouldCallClosure() {
+        assertScript '''
+class Sample {
+
+    Closure formatFirstName
+    Closure formatLastName
+
+    void doStuff (String fname, String lname, Closure callback) {
+        formatFirstName(fname) { String fnameError, String formattedFname ->
+            formatLastName(lname) { String lnameError, String formattedLname ->
+                String errors = "${fnameError ? "${fnameError}, " : ''}${lnameError ?: ''}"
+                callback(errors, formattedFname, formattedLname)
+            }
+        }
+    }
+
+}
+
+Closure ffn = { String fname, Closure callback ->
+    String firstInitial = fname?.substring(0,1)
+
+    if (!firstInitial)
+        callback('invalid first name', null)
+    else
+        callback(null, firstInitial.toLowerCase())
+}
+
+Closure fln = { String lname, Closure callback ->
+    String lastPrefix = lname?.size() > 2 ? lname.substring(0,3) : null
+
+    if (!lastPrefix)
+        callback('invalid last name', null)
+    else
+        callback(null, lastPrefix.toLowerCase())
+}
+
+Sample sample = new Sample(formatFirstName: ffn, formatLastName: fln)
+
+sample.doStuff('John', 'Doe') { String errors, String formattedFname, String formattedLname ->
+    if (errors)
+        println errors
+    else
+        println "${formattedFname}.${formattedLname}"
+}'''
+    }
 }
 
