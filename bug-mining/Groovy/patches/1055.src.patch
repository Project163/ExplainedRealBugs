diff --git a/src/main/org/codehaus/groovy/control/ResolveVisitor.java b/src/main/org/codehaus/groovy/control/ResolveVisitor.java
index c480657c25..81b792ab16 100644
--- a/src/main/org/codehaus/groovy/control/ResolveVisitor.java
+++ b/src/main/org/codehaus/groovy/control/ResolveVisitor.java
@@ -231,8 +231,8 @@ public class ResolveVisitor extends ClassCodeExpressionTransformer {
     }
 
     private boolean resolve(ClassNode type, boolean testModuleImports, boolean testDefaultImports, boolean testStaticInnerClasses) {
-        if (type.isResolved() || type.isPrimaryClassNode()) return true;
         resolveGenericsTypes(type.getGenericsTypes());
+        if (type.isResolved() || type.isPrimaryClassNode()) return true;
         if (type.isArray()) {
             ClassNode element = type.getComponentType();
             boolean resolved = resolve(element, testModuleImports, testDefaultImports, testStaticInnerClasses);
@@ -1146,6 +1146,6 @@ public class ResolveVisitor extends ClassCodeExpressionTransformer {
             resolveOrFail(genericsType.getLowerBound(), genericsType);
         }
         resolveGenericsTypes(type.getGenericsTypes());
-        genericsType.setResolved(true);
+        genericsType.setResolved(genericsType.getType().isResolved());
     }
 }
diff --git a/src/test/org/codehaus/groovy/ast/LineColumnChecker.java b/src/test/org/codehaus/groovy/ast/LineColumnChecker.java
index 30e97571a3..5f1d073ed2 100644
--- a/src/test/org/codehaus/groovy/ast/LineColumnChecker.java
+++ b/src/test/org/codehaus/groovy/ast/LineColumnChecker.java
@@ -114,6 +114,7 @@ class LineCheckVisitor extends ClassCodeVisitorSupport {
 	protected void visitGenerics(ClassNode node) {
 		if (node.isUsingGenerics()) {
 			GenericsType[] generics = node.getGenericsTypes();
+			if(generics == null) return;
             for (GenericsType genericType : generics) {
                 visitNode(genericType);
                 visitType(genericType.getType());
