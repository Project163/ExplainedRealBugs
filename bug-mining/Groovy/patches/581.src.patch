diff --git a/src/main/groovy/xml/StreamingMarkupBuilder.groovy b/src/main/groovy/xml/StreamingMarkupBuilder.groovy
index eaa31514cd..bf01bdcecc 100644
--- a/src/main/groovy/xml/StreamingMarkupBuilder.groovy
+++ b/src/main/groovy/xml/StreamingMarkupBuilder.groovy
@@ -45,9 +45,9 @@ class StreamingMarkupBuilder extends AbstractStreamingBuilder {
         }
     }
     def declarationClosure = {doc, pendingNamespaces, namespaces, namespaceSpecificTags, prefix, attrs, body, out ->
-        out.unescaped() << '<?xml version="1.0" encoding="'
-        out.escaped() << "${out.encoding}"
-        out.unescaped() << '"?>\n'
+        out.unescaped() << '<?xml version="1.0"'
+        if (out.encodingKnown) out.escaped() << " encoding=\"${out.encoding}\""
+        out.unescaped() << '?>\n'
     }
     def noopClosure = {doc, pendingNamespaces, namespaces, namespaceSpecificTags, prefix, attrs, body, out ->
         body.each {
diff --git a/src/main/groovy/xml/streamingmarkupsupport/StreamingMarkupWriter.java b/src/main/groovy/xml/streamingmarkupsupport/StreamingMarkupWriter.java
index 786194e82b..9c7658da3f 100644
--- a/src/main/groovy/xml/streamingmarkupsupport/StreamingMarkupWriter.java
+++ b/src/main/groovy/xml/streamingmarkupsupport/StreamingMarkupWriter.java
@@ -24,11 +24,12 @@ import java.nio.charset.CharsetEncoder;
 
 public class StreamingMarkupWriter extends Writer {
 	protected final Writer writer;
-    protected final String encoding;
-    protected final CharsetEncoder encoder;
-    protected boolean writingAttribute = false;
-    protected boolean haveHighSurrogate = false;
-    protected StringBuffer surrogatePair = new StringBuffer(2);
+  protected final String encoding;
+  protected boolean encodingKnown;
+  protected final CharsetEncoder encoder;
+  protected boolean writingAttribute = false;
+  protected boolean haveHighSurrogate = false;
+  protected StringBuffer surrogatePair = new StringBuffer(2);
 	private final Writer escapedWriter =  new Writer() {
 											/* (non-Javadoc)
 											 * @see java.io.Writer#close()
@@ -86,10 +87,13 @@ public class StreamingMarkupWriter extends Writer {
         
         if (encoding != null) {
             this.encoding = encoding;
+            this.encodingKnown = true;
         } else if (writer instanceof OutputStreamWriter) {
             this.encoding = ((OutputStreamWriter)writer).getEncoding();
+            this.encodingKnown = true;
         } else {
             this.encoding = "US-ASCII";
+            this.encodingKnown = false;
         }
         
         this.encoder = Charset.forName(this.encoding).newEncoder();
@@ -179,4 +183,8 @@ public class StreamingMarkupWriter extends Writer {
     public String getEncoding() {
         return this.encoding;
     }
+    
+    public boolean getEncodingKnown() {
+      return this.encodingKnown;
+    }
 }
diff --git a/src/test/groovy/bugs/Groovy_2473Bug.groovy b/src/test/groovy/bugs/Groovy_2473Bug.groovy
new file mode 100755
index 0000000000..3a2bf40834
--- /dev/null
+++ b/src/test/groovy/bugs/Groovy_2473Bug.groovy
@@ -0,0 +1,28 @@
+package groovy.bugs
+
+import groovy.xml.StreamingMarkupBuilder
+
+class Groovy_2473Bug extends GroovyTestCase {
+	void testBug() {
+      def w = new StringWriter()
+      def b = new StreamingMarkupBuilder()
+    
+      w << b.bind() {
+        mkp.xmlDeclaration()
+        a("\u0083")
+      }
+  
+      assertEquals('<?xml version="1.0"?>\n<a>&#x83;</a>', w.toString())
+      
+      b.encoding = "UTF-8"
+      
+      w = new StringWriter()
+      
+      w << b.bind() {
+        mkp.xmlDeclaration()
+        a("\u0083")
+      }
+  
+      assertEquals('<?xml version="1.0" encoding="UTF-8"?>\n<a>\u0083</a>', w.toString())
+    }
+}
\ No newline at end of file
