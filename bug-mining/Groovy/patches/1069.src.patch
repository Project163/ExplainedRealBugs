diff --git a/src/main/org/codehaus/groovy/classgen/ReturnAdder.java b/src/main/org/codehaus/groovy/classgen/ReturnAdder.java
index cc05c1d845..631482842a 100644
--- a/src/main/org/codehaus/groovy/classgen/ReturnAdder.java
+++ b/src/main/org/codehaus/groovy/classgen/ReturnAdder.java
@@ -84,10 +84,14 @@ public class ReturnAdder {
             return ifs;
         }
 
-//        if (statement instanceof SwitchStatement) {
-//            SwitchStatement swi = (SwitchStatement) statement;
-//            return swi;
-//        }
+        if (statement instanceof SwitchStatement) {
+            SwitchStatement swi = (SwitchStatement) statement;
+            for (CaseStatement caseStatement : swi.getCaseStatements()) {
+                caseStatement.setCode(adjustSwitchCaseCode(caseStatement.getCode(), scope));
+            }
+            swi.setDefaultStatement(adjustSwitchCaseCode(swi.getDefaultStatement(), scope)); 
+            return swi;
+        }
 
         if (statement instanceof TryCatchStatement) {
             TryCatchStatement trys = (TryCatchStatement) statement;
@@ -131,6 +135,21 @@ public class ReturnAdder {
         }
     }
 
+    private static Statement adjustSwitchCaseCode(Statement statement, VariableScope scope) {
+        if(statement instanceof BlockStatement) {
+            final List list = ((BlockStatement)statement).getStatements();
+            if (!list.isEmpty()) {
+                int idx = list.size() - 1;
+                Statement last = (Statement) list.get(idx);
+                if(last instanceof BreakStatement) {
+                    list.remove(idx);
+                    return addReturnsIfNeeded(statement, scope);
+                }
+            }
+        }
+        return statement;
+    }
+
     private static boolean statementReturns(Statement last) {
         return (
                 last instanceof ReturnStatement ||
diff --git a/src/test/groovy/bugs/Groovy3789Bug.groovy b/src/test/groovy/bugs/Groovy3789Bug.groovy
new file mode 100644
index 0000000000..b897eda3f5
--- /dev/null
+++ b/src/test/groovy/bugs/Groovy3789Bug.groovy
@@ -0,0 +1,19 @@
+package groovy.bugs
+
+class Groovy3789Bug extends GroovyTestCase {
+    void testAddReturnWhenLastStatementIsSwitch() {
+        def ifClosure = { ->
+            if ( 0 ) { 10 }
+            else { 20 }
+        }
+        def switchClosure = { ->
+            switch ( 0 ) {
+                case 0 : 10 ; break
+                default : 20 ; break
+            }
+        }
+        
+        assert ifClosure() == 20
+        assert switchClosure() == 10
+    }
+}
