diff --git a/src/main/org/codehaus/groovy/reflection/CachedClass.java b/src/main/org/codehaus/groovy/reflection/CachedClass.java
index 92ce04a919..3413707810 100644
--- a/src/main/org/codehaus/groovy/reflection/CachedClass.java
+++ b/src/main/org/codehaus/groovy/reflection/CachedClass.java
@@ -19,6 +19,7 @@ import groovy.lang.*;
 
 import org.codehaus.groovy.classgen.asm.BytecodeHelper;
 import org.codehaus.groovy.runtime.callsite.CallSiteClassLoader;
+import org.codehaus.groovy.runtime.metaclass.ClosureMetaClass;
 import org.codehaus.groovy.util.LazyReference;
 import org.codehaus.groovy.util.FastArray;
 import org.codehaus.groovy.util.ReferenceBundle;
@@ -456,6 +457,10 @@ public class CachedClass {
         res.addAll(Arrays.asList(classInfo.newMetaMethods));
         res.addAll(arr);
         classInfo.newMetaMethods = res.toArray(new MetaMethod[res.size()]);
+        Class theClass = classInfo.getCachedClass().getTheClass();
+        if (theClass==Closure.class || theClass==Class.class) {
+            ClosureMetaClass.resetCachedMetaClasses();
+        }
     }
 
     public boolean isAssignableFrom(Class argument) {
diff --git a/src/main/org/codehaus/groovy/runtime/m12n/ExtensionModule.java b/src/main/org/codehaus/groovy/runtime/m12n/ExtensionModule.java
index 2a17a34367..e6d82c38a6 100644
--- a/src/main/org/codehaus/groovy/runtime/m12n/ExtensionModule.java
+++ b/src/main/org/codehaus/groovy/runtime/m12n/ExtensionModule.java
@@ -47,4 +47,12 @@ public abstract class ExtensionModule {
 
     public abstract List<MetaMethod> getMetaMethods();
 
+    @Override
+    public String toString() {
+        final StringBuilder sb = new StringBuilder("ExtensionModule{");
+        sb.append("name='").append(name).append('\'');
+        sb.append(", version='").append(version).append('\'');
+        sb.append('}');
+        return sb.toString();
+    }
 }
diff --git a/src/main/org/codehaus/groovy/runtime/metaclass/ClosureMetaClass.java b/src/main/org/codehaus/groovy/runtime/metaclass/ClosureMetaClass.java
index 798ab15ccc..2a128f67bd 100644
--- a/src/main/org/codehaus/groovy/runtime/metaclass/ClosureMetaClass.java
+++ b/src/main/org/codehaus/groovy/runtime/metaclass/ClosureMetaClass.java
@@ -57,15 +57,29 @@ public final class ClosureMetaClass extends MetaClassImpl {
     private MethodChooser chooser;
     private volatile boolean attributeInitDone = false;
 
-    private static final MetaClassImpl CLOSURE_METACLASS;
+    private static MetaClassImpl CLOSURE_METACLASS;
     private static MetaClassImpl classMetaClass;
     private static final Object[] EMPTY_ARGUMENTS = {};
     private static final String CLOSURE_CALL_METHOD = "call";
     private static final String CLOSURE_DO_CALL_METHOD = "doCall";
 
     static {
-        CLOSURE_METACLASS = new MetaClassImpl(Closure.class);
-        CLOSURE_METACLASS.initialize();
+        resetCachedMetaClasses();
+    }
+
+    public static void resetCachedMetaClasses() {
+        MetaClassImpl temp = new MetaClassImpl(Closure.class);
+        temp.initialize();
+        synchronized (ClosureMetaClass.class) {
+            CLOSURE_METACLASS = temp;
+        }
+        if (classMetaClass!=null) {
+            temp = new MetaClassImpl(Class.class);
+            temp.initialize();
+            synchronized (ClosureMetaClass.class) {
+                classMetaClass = temp;
+            }
+        }
     }
 
     private static synchronized MetaClass getStaticMetaClass() {
diff --git a/src/test/META-INF/services/org.codehaus.groovy.runtime.ExtensionModule b/src/test-resources/META-INF/services/org.codehaus.groovy.runtime.ExtensionModule
similarity index 100%
rename from src/test/META-INF/services/org.codehaus.groovy.runtime.ExtensionModule
rename to src/test-resources/META-INF/services/org.codehaus.groovy.runtime.ExtensionModule
diff --git a/src/test/META-INF/services/org.codehaus.groovy.source.Extensions b/src/test-resources/META-INF/services/org.codehaus.groovy.source.Extensions
similarity index 100%
rename from src/test/META-INF/services/org.codehaus.groovy.source.Extensions
rename to src/test-resources/META-INF/services/org.codehaus.groovy.source.Extensions
diff --git a/src/test-resources/jars/module-test/module-test/1.0.7225-test/module-test-1.0.7225-test.jar b/src/test-resources/jars/module-test/module-test/1.0.7225-test/module-test-1.0.7225-test.jar
new file mode 100644
index 0000000000..d08e03ccf4
Binary files /dev/null and b/src/test-resources/jars/module-test/module-test/1.0.7225-test/module-test-1.0.7225-test.jar differ
diff --git a/src/test/jars/module-test/module-test/1.2-test/module-test-1.2-test.jar b/src/test-resources/jars/module-test/module-test/1.2-test/module-test-1.2-test.jar
similarity index 100%
rename from src/test/jars/module-test/module-test/1.2-test/module-test-1.2-test.jar
rename to src/test-resources/jars/module-test/module-test/1.2-test/module-test-1.2-test.jar
diff --git a/src/test/jars/module-test/module-test/1.0.7225-test/module-test-1.0.7225-test.jar b/src/test/jars/module-test/module-test/1.0.7225-test/module-test-1.0.7225-test.jar
deleted file mode 100644
index dadd4d28b2..0000000000
Binary files a/src/test/jars/module-test/module-test/1.0.7225-test/module-test-1.0.7225-test.jar and /dev/null differ
diff --git a/src/test/org/codehaus/groovy/runtime/m12n/ExtensionModuleHelperForTests.groovy b/src/test/org/codehaus/groovy/runtime/m12n/ExtensionModuleHelperForTests.groovy
index 13c56550b4..a087781d9f 100644
--- a/src/test/org/codehaus/groovy/runtime/m12n/ExtensionModuleHelperForTests.groovy
+++ b/src/test/org/codehaus/groovy/runtime/m12n/ExtensionModuleHelperForTests.groovy
@@ -42,8 +42,20 @@ public class ExtensionModuleHelperForTests {
                 throw new RuntimeException("Unable to find class loader")
             }
         }
-        def cp = ((URLClassLoader)cl).URLs.collect{ new File(it.toURI()).absolutePath}
+        Set<String> cp = ((URLClassLoader)cl).URLs.collect{ new File(it.toURI()).absolutePath}
         cp << baseDir.absolutePath
+        Set<String> additionalJars = []
+        cp.each {
+            def file = new File(it)
+            if (file.directory) {
+                file.eachFileRecurse {
+                    if (it.name.startsWith('testclasspath') && !cp.contains(it.absolutePath)) {
+                        additionalJars << it.absolutePath
+                    }
+                }
+            }
+        }
+        cp.addAll(additionalJars)
         def ant = new AntBuilder()
         try {
             ant.with {
@@ -67,10 +79,9 @@ public class ExtensionModuleHelperForTests {
             String err = ant.project.properties.err
             baseDir.deleteDir()
             if (err) {
-                throw new RuntimeException(err)
-            }
-            else if ( ! out.contains("OK")) {
-                throw new RuntimeException(out)
+                throw new RuntimeException("$err\nClasspath: ${cp.join('\n')}")
+            } else if ( ! out.contains("OK")) {
+                throw new RuntimeException("$out\nClasspath: ${cp.join('\n')}")
             }
         }
     }
diff --git a/src/test/org/codehaus/groovy/runtime/m12n/ExtensionModuleTest.groovy b/src/test/org/codehaus/groovy/runtime/m12n/ExtensionModuleTest.groovy
index 865aa608fd..7403e042ca 100644
--- a/src/test/org/codehaus/groovy/runtime/m12n/ExtensionModuleTest.groovy
+++ b/src/test/org/codehaus/groovy/runtime/m12n/ExtensionModuleTest.groovy
@@ -106,7 +106,8 @@ class ExtensionModuleTest extends GroovyTestCase {
             @Grab(value='module-test:module-test:1.0.7225-test', changing='true')
             import org.codehaus.groovy.runtime.m12n.*
 
-            assert {}.groovy7225() == '{"field":"value"}'
+            assert 'test'.groovy7225() == 'test: ok'
+            assert {->}.groovy7225() == '{"field":"value"}'
             """
         '''
     }
