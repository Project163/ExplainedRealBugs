diff --git a/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java b/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java
index 4685425ce8..31cff6917a 100644
--- a/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java
+++ b/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java
@@ -3093,8 +3093,12 @@ public class StaticTypeCheckingVisitor extends ClassCodeVisitorSupport {
             if (firstGenericsType.isWildcard()) {
                 // ? extends Foo
                 // ? super Foo
+                // ?
                 if (firstGenericsType.getLowerBound() != null) return firstGenericsType.getLowerBound();
                 ClassNode[] upperBounds = firstGenericsType.getUpperBounds();
+                if (upperBounds==null) { // case "?"
+                    return OBJECT_TYPE;
+                }
                 if (upperBounds.length == 1) return upperBounds[0];
                 return new UnionTypeClassNode(upperBounds);
             }
diff --git a/src/test/groovy/transform/stc/GenericsSTCTest.groovy b/src/test/groovy/transform/stc/GenericsSTCTest.groovy
index 5b43a01425..dab00db3e2 100644
--- a/src/test/groovy/transform/stc/GenericsSTCTest.groovy
+++ b/src/test/groovy/transform/stc/GenericsSTCTest.groovy
@@ -1056,6 +1056,13 @@ class GenericsSTCTest extends StaticTypeCheckingTestCase {
         '''
     }
 
+    void testReturnTypeInferenceWithMethodUsingWildcard() {
+        assertScript '''
+            public Object createInstance(Class<?> projectComponentClass, String foo) { projectComponentClass.newInstance() }
+            createInstance(LinkedList, 'a')
+        '''
+    }
+
     static class MyList extends LinkedList<String> {}
 
     public static class ClassA<T> {
