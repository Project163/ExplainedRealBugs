diff --git a/src/main/org/codehaus/groovy/control/ResolveVisitor.java b/src/main/org/codehaus/groovy/control/ResolveVisitor.java
index fe1a01afa8..fdcd69c1a8 100644
--- a/src/main/org/codehaus/groovy/control/ResolveVisitor.java
+++ b/src/main/org/codehaus/groovy/control/ResolveVisitor.java
@@ -1222,10 +1222,15 @@ public class ResolveVisitor extends ClassCodeExpressionTransformer {
 
     public void visitClass(ClassNode node) {
         ClassNode oldNode = currentClass;
-        Map<String, GenericsType> oldPNames = genericParameterNames;
-        genericParameterNames = new HashMap<String, GenericsType>(genericParameterNames);
-        currentClass = node;
 
+        if (node instanceof InnerClassNode) {
+            if (Modifier.isStatic(node.getModifiers())) {
+                genericParameterNames = new HashMap<String, GenericsType>();
+            }
+        } else {
+            genericParameterNames = new HashMap<String, GenericsType>();
+        }
+        currentClass = node;
         resolveGenericsHeader(node.getGenericsTypes());
 
         ModuleNode module = node.getModule();
@@ -1278,8 +1283,6 @@ public class ResolveVisitor extends ClassCodeExpressionTransformer {
         
         super.visitClass(node);
 
-        genericParameterNames = oldPNames;
-
         currentClass = oldNode;
     }
     
diff --git a/src/test/groovy/bugs/Groovy4457GenericTypeDeclarationLeakTest.groovy b/src/test/groovy/bugs/Groovy4457GenericTypeDeclarationLeakTest.groovy
index c126697ce2..1595b9d0b7 100644
--- a/src/test/groovy/bugs/Groovy4457GenericTypeDeclarationLeakTest.groovy
+++ b/src/test/groovy/bugs/Groovy4457GenericTypeDeclarationLeakTest.groovy
@@ -31,4 +31,17 @@ class Groovy4457GenericTypeDeclarationLeakTest extends GroovyTestCase {
             assert A.B.declaredMethods.find { it.name == "foo" }.parameterTypes[0].name.contains("String")
         """
     }
+
+    void testNonStaticInnerClassGenerics() {
+        assertScript '''
+            class A<T> {
+                void bar(T s) {}
+                class B {
+                  void foo(T s) {}
+                }
+            }
+            assert A.class.methods.find{it.name=="bar"}.parameterTypes[0].name.contains("java.lang.Object")
+            assert A.B.class.methods.find{it.name=="foo"}.parameterTypes[0].name.contains("java.lang.Object")
+        '''
+    }
 }
