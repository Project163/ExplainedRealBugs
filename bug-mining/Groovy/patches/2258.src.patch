diff --git a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/EditCommand.groovy b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/EditCommand.groovy
index d6c3f16e58..4e5a6dd571 100644
--- a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/EditCommand.groovy
+++ b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/EditCommand.groovy
@@ -82,13 +82,21 @@ class EditCommand
 
             log.debug("Editor contents: ${file.text}")
             
-            // Load the new lines...
-            file.eachLine { String line ->
-                shell << line as String
-            }
+            replaceCurrentBuffer(file.readLines())
         }
         finally {
             file.delete()
         }
     }
+    
+    void replaceCurrentBuffer(List contents) {
+        // clear current buffer contents
+        shell.buffers.clearSelected()       
+        
+        // load editor contents into current buffer
+        for (line in contents) {
+            shell << line as String
+        }
+    }
+    
 }
diff --git a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/EditCommandTest.groovy b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/EditCommandTest.groovy
index 3a5e8ca66e..1e4b1f7bab 100644
--- a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/EditCommandTest.groovy
+++ b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/EditCommandTest.groovy
@@ -41,4 +41,43 @@ class EditCommandTest
     }
 
 
+    void testEditorCompletingGroovyExpression() {
+        String partialExpression1 = 'x = {'
+        String partialExpression2 = '  println 2+2'
+        String partialExpression3 = '}'
+        
+        def mockEdit = new EditCommand(shell)
+        
+        // type an incomplete groovy expression
+        shell << partialExpression1
+        
+        // simulate a user launching an editor and completing the expression
+        List<String> mockEditorContents = [partialExpression1, partialExpression2, partialExpression3]
+        mockEdit.replaceCurrentBuffer(mockEditorContents)
+
+        // assert the buffer is empty because the expression was parsed and executed on editor close
+        assertEquals([], shell.buffers.current())
+    }
+    
+    
+    void testEditorReplacingPartialGroovyExpression() {
+        String partialExpression1 = 'x = {'
+        String partialExpression2 = '  println 2+2'
+        String partialExpression3 = '}'
+        
+        def mockEdit = new EditCommand(shell)
+        
+        // type an incomplete groovy expression
+        shell << partialExpression1
+        
+        // simulate a user launching an editor and adding to, but not completing, the expression
+        List<String> mockEditorContents = [partialExpression1, partialExpression2]
+        mockEdit.replaceCurrentBuffer(mockEditorContents)
+
+        // assert the buffer has been replaced with the editor's contents
+        assertEquals(mockEditorContents, shell.buffers.current())
+    }
+    
+    
+
 }
