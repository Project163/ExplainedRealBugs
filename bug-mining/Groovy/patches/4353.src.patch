diff --git a/src/main/java/groovy/lang/IntRange.java b/src/main/java/groovy/lang/IntRange.java
index cb5d172fe0..b7fffea023 100644
--- a/src/main/java/groovy/lang/IntRange.java
+++ b/src/main/java/groovy/lang/IntRange.java
@@ -227,7 +227,7 @@ public class IntRange extends AbstractList<Integer> implements Range<Integer>, S
      * @since 2.5.0
      */
     public <T extends Number & Comparable> NumberRange by(T stepSize) {
-        return new NumberRange(NumberRange.comparableNumber((Number)from), NumberRange.comparableNumber((Number)to), stepSize, inclusiveRight);
+        return new NumberRange(getFrom(), getTo(), stepSize, true, true); // GROOVY-10496
     }
 
     private void checkSize() {
diff --git a/src/main/java/org/codehaus/groovy/transform/sc/transformers/RangeExpressionTransformer.java b/src/main/java/org/codehaus/groovy/transform/sc/transformers/RangeExpressionTransformer.java
index 2505376d5c..7d8eafff75 100644
--- a/src/main/java/org/codehaus/groovy/transform/sc/transformers/RangeExpressionTransformer.java
+++ b/src/main/java/org/codehaus/groovy/transform/sc/transformers/RangeExpressionTransformer.java
@@ -24,16 +24,15 @@ import org.codehaus.groovy.ast.ClassNode;
 import org.codehaus.groovy.ast.ConstructorNode;
 import org.codehaus.groovy.ast.MethodNode;
 import org.codehaus.groovy.ast.Parameter;
-import org.codehaus.groovy.ast.expr.ArgumentListExpression;
-import org.codehaus.groovy.ast.expr.ConstantExpression;
-import org.codehaus.groovy.ast.expr.ConstructorCallExpression;
 import org.codehaus.groovy.ast.expr.Expression;
 import org.codehaus.groovy.ast.expr.RangeExpression;
 import org.codehaus.groovy.transform.stc.StaticTypesMarker;
 
 import java.util.List;
 
-import static org.codehaus.groovy.ast.ClassHelper.isPrimitiveBoolean;
+import static org.codehaus.groovy.ast.tools.GeneralUtils.args;
+import static org.codehaus.groovy.ast.tools.GeneralUtils.constX;
+import static org.codehaus.groovy.ast.tools.GeneralUtils.ctorX;
 
 /**
  * This transformer focuses on ranges to produce optimized bytecode.
@@ -47,7 +46,9 @@ public class RangeExpressionTransformer {
         ConstructorNode target = null;
         for (ConstructorNode constructor : declaredConstructors) {
             final Parameter[] parameters = constructor.getParameters();
-            if (parameters.length==3 && isPrimitiveBoolean(parameters[0].getOriginType())) {
+            if (parameters.length == 4
+                    && ClassHelper.isPrimitiveBoolean(parameters[0].getOriginType())
+                    && ClassHelper.isPrimitiveBoolean(parameters[1].getOriginType())) {
                 target = constructor;
                 break;
             }
@@ -61,14 +62,14 @@ public class RangeExpressionTransformer {
         this.transformer = transformer;
     }
 
-    public Expression transformRangeExpression(RangeExpression range) {
-        final ClassNode inferred = range.getNodeMetaData(StaticTypesMarker.INFERRED_TYPE);
-        if (INTRANGE_TYPE.equals(inferred)) {
-            ArgumentListExpression bounds = new ArgumentListExpression(new ConstantExpression(range.isInclusive(),true),range.getFrom(), range.getTo());
-            ConstructorCallExpression cce = new ConstructorCallExpression(INTRANGE_TYPE, bounds);
-            cce.setSourcePosition(range);
+    public Expression transformRangeExpression(final RangeExpression range) {
+        if (INTRANGE_TYPE.equals(range.getNodeMetaData(StaticTypesMarker.INFERRED_TYPE))) {
+            Expression inclLeft = constX(!range.isExclusiveLeft(),true), inclRight = constX(!range.isExclusiveRight(),true);
+            Expression cce = ctorX(INTRANGE_TYPE, args(inclLeft, inclRight, range.getFrom(), range.getTo()));
             cce.putNodeMetaData(StaticTypesMarker.DIRECT_METHOD_CALL_TARGET, INTRANGE_CTOR);
             cce.putNodeMetaData(StaticTypesMarker.INFERRED_TYPE, INTRANGE_TYPE);
+            cce.setSourcePosition(range);
+
             return transformer.transform(cce);
         }
         return transformer.superTransform(range);
diff --git a/src/test/groovy/lang/IntRangeTest.groovy b/src/test/groovy/lang/IntRangeTest.groovy
index ec68b91da6..267180ed29 100644
--- a/src/test/groovy/lang/IntRangeTest.groovy
+++ b/src/test/groovy/lang/IntRangeTest.groovy
@@ -19,15 +19,16 @@
 package groovy.lang
 
 import groovy.test.GroovyTestCase;
+import groovy.transform.CompileStatic
 
 /**
  * Provides unit tests for the <code>IntRange</code> class.
  */
-class IntRangeTest extends GroovyTestCase {
+final class IntRangeTest extends GroovyTestCase {
 
     void testCreateTooBigRange() {
+        assert new IntRange(1, Integer.MAX_VALUE).size() == Integer.MAX_VALUE // biggest allowed
         try {
-            assert new IntRange(1, Integer.MAX_VALUE).size() == Integer.MAX_VALUE // biggest allowed
             new IntRange(0, Integer.MAX_VALUE) // too big
             fail("too large range accepted")
         }
@@ -202,14 +203,6 @@ class IntRangeTest extends GroovyTestCase {
         assert bs[20<..<-8].toString() == '{1, 2}'
     }
 
-    void testHashCode(){
-        def maxRange = new IntRange(1,Integer.MAX_VALUE)
-        def rangeWithName = [:]
-        rangeWithName.put(maxRange, "maxRange")
-        def dupRange = new IntRange(1,Integer.MAX_VALUE)
-        assertEquals(rangeWithName.get(dupRange), "maxRange")
-    }
-
     // GROOVY-8704
     void testSerialization() {
         def baos = new ByteArrayOutputStream()
@@ -218,6 +211,14 @@ class IntRangeTest extends GroovyTestCase {
         bais.withObjectInputStream { ois -> assert ois.readObject() == [4..1, 2..<5] }
     }
 
+    void testHashCode() {
+        def maxRange = new IntRange(1,Integer.MAX_VALUE)
+        def rangeWithName = [:]
+        rangeWithName.put(maxRange, "maxRange")
+        def dupRange = new IntRange(1,Integer.MAX_VALUE)
+        assertEquals(rangeWithName.get(dupRange), "maxRange")
+    }
+
     void testEquals() {
         IntRange r1 = new IntRange(0, 10)
         IntRange r2 = new IntRange(0, 10)
@@ -255,4 +256,27 @@ class IntRangeTest extends GroovyTestCase {
         assert !r1.equals(r2)
         assert !r2.equals(r1)
     }
+
+    // GROOVY-10496
+    void testBy() {
+        IntRange ir = new IntRange(5, 10)
+        assert ir == [5, 6, 7, 8, 9, 10]
+        assert ir.step(2) == [5, 7, 9]
+
+        NumberRange nr = ir.by(2)
+        assert nr == [5, 7, 9]
+
+        ir = new IntRange(false, false, 5, 10)
+        assert ir == [6, 7, 8, 9]
+
+        nr = ir.by(2)
+        nr == [6, 8, 10]
+    }
+
+    // GROOVY-10496
+    @CompileStatic
+    void testSC() {
+        IntRange ir = 1<..<5
+        assert ir == [2, 3, 4]
+    }
 }
