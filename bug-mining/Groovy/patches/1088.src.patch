diff --git a/src/main/org/codehaus/groovy/antlr/AntlrParserPlugin.java b/src/main/org/codehaus/groovy/antlr/AntlrParserPlugin.java
index 514db829bc..cdd5eb678c 100644
--- a/src/main/org/codehaus/groovy/antlr/AntlrParserPlugin.java
+++ b/src/main/org/codehaus/groovy/antlr/AntlrParserPlugin.java
@@ -495,11 +495,16 @@ public class AntlrParserPlugin extends ASTHelper implements ParserPlugin, Groovy
         classNode.setGenericsTypes(genericsType);
         configureAST(classNode, classDef);
 
+        // we put the class already in output to avoid the most inner classes
+        // will be used as first class later in the loader. The first class
+        // there determines what GCL#parseClass for example will return, so we
+        // have here to ensure it won't be the inner class
+        output.addClass(classNode);
+
         int oldClassCount = innerClassCounter;
         
         assertNodeType(OBJBLOCK, node);
         objectBlock(node);
-        output.addClass(classNode);
         
         classNode = outerClass;
         innerClassCounter = oldClassCount;
diff --git a/src/test/gls/innerClass/InnerClassTest.groovy b/src/test/gls/innerClass/InnerClassTest.groovy
index 0a930fbcfe..aa9e23a514 100644
--- a/src/test/gls/innerClass/InnerClassTest.groovy
+++ b/src/test/gls/innerClass/InnerClassTest.groovy
@@ -285,5 +285,21 @@ class InnerClassTest extends CompilableTestSupport {
             assert bar.foo() == 1
         """
     }
+    
+    void testClassOutputOrdering() {
+        // this does actually not do much, but before this
+        // change the inner class was tried to be executed
+        // because a class ordering bug. The main method 
+        // makes the Foo class executeable, but Foo$Bar is 
+        // not. So if Foo$Bar is returned, asserScript will
+        // fail. If Foo is returned, asserScript will not
+        // fail.
+        assertScript """
+            class Foo {
+                static class Bar{}
+                static main(args){}
+            }
+        """
+    }
 
 } 
