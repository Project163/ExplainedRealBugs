diff --git a/src/main/groovy/util/GroovyScriptEngine.java b/src/main/groovy/util/GroovyScriptEngine.java
index 8e6f591cf0..2a09b639d3 100644
--- a/src/main/groovy/util/GroovyScriptEngine.java
+++ b/src/main/groovy/util/GroovyScriptEngine.java
@@ -449,7 +449,7 @@ public class GroovyScriptEngine implements ResourceConnector {
      */
     public Class loadScriptByName(String scriptName) throws ResourceException, ScriptException {
         URLConnection conn = rc.getResourceConnection(scriptName);
-        String path = conn.getURL().getPath();
+        String path = conn.getURL().toExternalForm();
         ScriptCacheEntry entry = scriptCache.get(path);
         Class clazz = null;
         if (entry != null) clazz = entry.scriptClass;
diff --git a/src/main/org/codehaus/groovy/control/SourceUnit.java b/src/main/org/codehaus/groovy/control/SourceUnit.java
index 1427f54f4a..30369d354b 100644
--- a/src/main/org/codehaus/groovy/control/SourceUnit.java
+++ b/src/main/org/codehaus/groovy/control/SourceUnit.java
@@ -108,7 +108,7 @@ public class SourceUnit extends ProcessingUnit {
      * Initializes the SourceUnit from the specified URL.
      */
     public SourceUnit(URL source, CompilerConfiguration configuration, GroovyClassLoader loader, ErrorCollector er) {
-        this(source.getPath(), new URLReaderSource(source, configuration), configuration, loader, er);
+        this(source.toExternalForm(), new URLReaderSource(source, configuration), configuration, loader, er);
     }
 
     /**
