diff --git a/src/main/groovy/xml/XmlUtil.java b/src/main/groovy/xml/XmlUtil.java
index 6d32ee8740..a950e2cc78 100644
--- a/src/main/groovy/xml/XmlUtil.java
+++ b/src/main/groovy/xml/XmlUtil.java
@@ -204,6 +204,7 @@ public class XmlUtil {
         // little bit of hackery to avoid Groovy dependency in this file
         try {
             Object builder = ((Class) Class.forName("groovy.xml.StreamingMarkupBuilder")).newInstance();
+            InvokerHelper.setProperty(builder, "encoding", "UTF-8");
             Writable w = (Writable) InvokerHelper.invokeMethod(builder, "bindNode", node);
             return "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n" + w.toString();
         } catch (Exception e) {
diff --git a/src/test/groovy/xml/XmlAssert.java b/src/test/groovy/xml/XmlAssert.java
new file mode 100644
index 0000000000..b8f124723c
--- /dev/null
+++ b/src/test/groovy/xml/XmlAssert.java
@@ -0,0 +1,16 @@
+package groovy.xml;
+
+import org.custommonkey.xmlunit.Diff;
+import org.custommonkey.xmlunit.XMLUnit;
+import org.junit.Assert;
+
+/**
+ * Helper class for checking XML tests.
+ */
+public class XmlAssert {
+    public static void assertXmlEquals(String expected, String actual) throws Exception {
+        XMLUnit.setIgnoreWhitespace(true);
+        Diff diff = new Diff(expected, actual);
+        Assert.assertTrue(diff.toString(), diff.similar());
+    }
+}
diff --git a/src/test/groovy/xml/XmlUtilTest.groovy b/src/test/groovy/xml/XmlUtilTest.groovy
new file mode 100644
index 0000000000..444d80792a
--- /dev/null
+++ b/src/test/groovy/xml/XmlUtilTest.groovy
@@ -0,0 +1,35 @@
+/*
+* Copyright 2003-2012 the original author or authors.
+*
+* Licensed under the Apache License, Version 2.0 (the "License");
+* you may not use this file except in compliance with the License.
+* You may obtain a copy of the License at
+*
+*     http://www.apache.org/licenses/LICENSE-2.0
+*
+* Unless required by applicable law or agreed to in writing, software
+* distributed under the License is distributed on an "AS IS" BASIS,
+* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+* See the License for the specific language governing permissions and
+* limitations under the License.
+*/
+package groovy.xml
+
+import static groovy.xml.XmlAssert.assertXmlEquals
+
+/**
+ * @author Paul King
+ */
+class XmlUtilTest extends GroovyTestCase {
+    def xml = """\
+    <?xml version="1.0" encoding="UTF-8"?>
+    <Schlssel>
+    text content
+    </Schlssel>
+    """.stripIndent()
+
+    // GROOVY-5158
+    void testSerializeOfGPathResultShouldRoundTrip() {
+        assertXmlEquals(xml, XmlUtil.serialize(new XmlSlurper().parseText(xml)))
+    }
+}
