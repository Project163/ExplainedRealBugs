diff --git a/subprojects/groovy-templates/src/main/groovy/groovy/text/markup/BaseTemplate.java b/subprojects/groovy-templates/src/main/groovy/groovy/text/markup/BaseTemplate.java
index 852ce551b8..5ebb6a7884 100644
--- a/subprojects/groovy-templates/src/main/groovy/groovy/text/markup/BaseTemplate.java
+++ b/subprojects/groovy-templates/src/main/groovy/groovy/text/markup/BaseTemplate.java
@@ -422,7 +422,9 @@ public abstract class BaseTemplate implements Writable {
             run();
             return out;
         } finally {
-            this.out.flush();
+            if (this.out!=null) {
+                this.out.flush();
+            }
             this.out = null;
         }
     }
