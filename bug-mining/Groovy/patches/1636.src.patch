diff --git a/src/main/org/codehaus/groovy/classgen/asm/BytecodeHelper.java b/src/main/org/codehaus/groovy/classgen/asm/BytecodeHelper.java
index 71ff31a0bd..899761c1f3 100644
--- a/src/main/org/codehaus/groovy/classgen/asm/BytecodeHelper.java
+++ b/src/main/org/codehaus/groovy/classgen/asm/BytecodeHelper.java
@@ -36,6 +36,7 @@ public class BytecodeHelper implements Opcodes {
 
     public static String getClassInternalName(ClassNode t) {
         if (t.isPrimaryClassNode()) {
+            if (t.isArray()) return "[L"+getClassInternalName(t.getComponentType())+";";
             return getClassInternalName(t.getName());
         }
         return getClassInternalName(t.getTypeClass());
diff --git a/src/test/groovy/bugs/Groovy5152Bug.groovy b/src/test/groovy/bugs/Groovy5152Bug.groovy
new file mode 100644
index 0000000000..39521312d2
--- /dev/null
+++ b/src/test/groovy/bugs/Groovy5152Bug.groovy
@@ -0,0 +1,10 @@
+package groovy.bugs
+
+class Groovy5152Bug extends GroovyTestCase {
+    void testShouldNotThrowClassFormatError() {
+        assertScript '''
+            class MyObject{}
+            assert !("" instanceof MyObject[])
+        '''
+    }
+}
