diff --git a/src/main/java/org/codehaus/groovy/control/ResolveVisitor.java b/src/main/java/org/codehaus/groovy/control/ResolveVisitor.java
index 1b3ec1ab45..2f7bcd70c4 100644
--- a/src/main/java/org/codehaus/groovy/control/ResolveVisitor.java
+++ b/src/main/java/org/codehaus/groovy/control/ResolveVisitor.java
@@ -1456,6 +1456,7 @@ public class ResolveVisitor extends ClassCodeExpressionTransformer {
         if (types == null) return;
         currentClass.setUsingGenerics(true);
         List<Tuple2<ClassNode, GenericsType>> upperBoundsWithGenerics = new LinkedList<>();
+        List<Tuple2<ClassNode, ClassNode>> upperBoundsToResolve = new LinkedList<>();
         for (GenericsType type : types) {
             if (level > 0 && type.getName().equals(rootType.getName())) {
                 continue;
@@ -1478,9 +1479,9 @@ public class ResolveVisitor extends ClassCodeExpressionTransformer {
                                 classNode.setRedirect(upperBound);
                                 nameAdded = true;
                             }
-
                         }
-                        resolveOrFail(upperBound, classNode);
+
+                        upperBoundsToResolve.add(new Tuple2<>(upperBound, classNode));
                     }
 
                     if (asBoolean(upperBound.isUsingGenerics())) {
@@ -1504,6 +1505,12 @@ public class ResolveVisitor extends ClassCodeExpressionTransformer {
             }
         }
 
+        for (Tuple2<ClassNode, ClassNode> tp : upperBoundsToResolve) {
+            ClassNode upperBound = tp.getFirst();
+            ClassNode classNode = tp.getSecond();
+            resolveOrFail(upperBound, classNode);
+        }
+
         for (Tuple2<ClassNode, GenericsType> tp : upperBoundsWithGenerics) {
             ClassNode upperBound = tp.getFirst();
             GenericsType gt = tp.getSecond();
diff --git a/src/test/groovy/bugs/Groovy6171Bug.groovy b/src/test/groovy/bugs/Groovy6167Bug.groovy
similarity index 98%
rename from src/test/groovy/bugs/Groovy6171Bug.groovy
rename to src/test/groovy/bugs/Groovy6167Bug.groovy
index 0d0d6d1bc4..16573606c1 100644
--- a/src/test/groovy/bugs/Groovy6171Bug.groovy
+++ b/src/test/groovy/bugs/Groovy6167Bug.groovy
@@ -20,8 +20,8 @@ package groovy.bugs
 
 import gls.CompilableTestSupport
 
-class Groovy6171Bug extends CompilableTestSupport {
-    void testGroovy6171() {
+class Groovy6167Bug extends CompilableTestSupport {
+    void testGroovy6167() {
         shouldCompile '''
         public class Foo<T extends List<X>, X extends Number> {}
         '''
