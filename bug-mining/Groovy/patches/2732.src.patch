diff --git a/src/main/org/codehaus/groovy/tools/javac/JavaAwareCompilationUnit.java b/src/main/org/codehaus/groovy/tools/javac/JavaAwareCompilationUnit.java
index ca5e059966..e44ccd1ae4 100644
--- a/src/main/org/codehaus/groovy/tools/javac/JavaAwareCompilationUnit.java
+++ b/src/main/org/codehaus/groovy/tools/javac/JavaAwareCompilationUnit.java
@@ -22,6 +22,7 @@ import org.codehaus.groovy.ast.ModuleNode;
 import org.codehaus.groovy.classgen.GeneratorContext;
 import org.codehaus.groovy.classgen.VariableScopeVisitor;
 import org.codehaus.groovy.control.*;
+import org.codehaus.groovy.transform.ASTTransformationCollectorCodeVisitor;
 
 import java.io.File;
 import java.io.FileNotFoundException;
@@ -71,6 +72,13 @@ public class JavaAwareCompilationUnit extends CompilationUnit {
                 }
             }
         }, Phases.CONVERSION);
+        addPhaseOperation(new CompilationUnit.PrimaryClassNodeOperation() {
+            public void call(SourceUnit source, GeneratorContext context, ClassNode classNode) throws CompilationFailedException {
+                ASTTransformationCollectorCodeVisitor collector =
+                        new ASTTransformationCollectorCodeVisitor(source, JavaAwareCompilationUnit.this.getTransformLoader());
+                collector.visitClass(classNode);
+            }
+        }, Phases.SEMANTIC_ANALYSIS);
 
         addPhaseOperation(new PrimaryClassNodeOperation() {
             public void call(SourceUnit source, GeneratorContext context, ClassNode classNode) throws CompilationFailedException {
diff --git a/src/test/org/codehaus/groovy/tools/stubgenerator/AnnotationCollectorStubTest.groovy b/src/test/org/codehaus/groovy/tools/stubgenerator/AnnotationCollectorStubTest.groovy
new file mode 100644
index 0000000000..7de417bef7
--- /dev/null
+++ b/src/test/org/codehaus/groovy/tools/stubgenerator/AnnotationCollectorStubTest.groovy
@@ -0,0 +1,67 @@
+/*
+ * Copyright 2003-2014 the original author or authors.
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+package org.codehaus.groovy.tools.stubgenerator
+
+import groovy.transform.AnnotationCollector
+
+import java.lang.annotation.Retention
+import java.lang.annotation.RetentionPolicy
+
+class AnnotationCollectorStubTest extends StringSourcesStubTestCase {
+
+    Map<String, String> provideSources() {
+        [
+                'foo/Main.java'    : '''
+                    package foo;
+
+                    public class Main {}
+                ''',
+                'bar/GroovyClass.groovy': '''
+                    package bar
+                    import org.codehaus.groovy.tools.stubgenerator.*
+
+                    @TheSuperGroovyHeroes
+                    class GroovyClass {}
+                '''
+        ]
+    }
+
+    void verifyStubs() {
+        def stubSource = stubJavaSourceFor('bar.GroovyClass')
+        assert !stubSource.contains('AnnotationCollector')
+    }
+}
+
+@Retention(RetentionPolicy.RUNTIME)
+@interface GroovyCoreTeam {
+    GroovyDeveloper[] value()
+}
+
+@Retention(RetentionPolicy.RUNTIME)
+@interface GroovyDeveloper {
+    String value() default "";
+}
+
+@GroovyCoreTeam([
+        @GroovyDeveloper('Paul'),
+        @GroovyDeveloper('Cedric'),
+        @GroovyDeveloper('Jochen'),
+        @GroovyDeveloper('Guillaume')
+])
+@AnnotationCollector
+@interface TheSuperGroovyHeroes {}
+
