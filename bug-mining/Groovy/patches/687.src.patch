diff --git a/src/main/org/codehaus/groovy/tools/shell/commands/EditCommand.groovy b/src/main/org/codehaus/groovy/tools/shell/commands/EditCommand.groovy
index efa033a74b..be4c63d3a4 100644
--- a/src/main/org/codehaus/groovy/tools/shell/commands/EditCommand.groovy
+++ b/src/main/org/codehaus/groovy/tools/shell/commands/EditCommand.groovy
@@ -18,6 +18,7 @@ package org.codehaus.groovy.tools.shell.commands
 
 import org.codehaus.groovy.tools.shell.CommandSupport
 import org.codehaus.groovy.tools.shell.Shell
+import org.codehaus.groovy.tools.shell.util.Preferences
 
 /**
  * The 'edit' command.
@@ -33,13 +34,11 @@ class EditCommand
     }
     
     private String getEditorCommand() {
-        def editor = System.getenv('EDITOR')
-        
+        def editor = Preferences.editor;
+
+        log.debug("Using editor: $editor")
+
         if (!editor) {
-            //
-            // TODO: Maybe popup a Swing editor here?  Or look for other env vars?  Or use notepad on winblows?
-            //
-            
             fail("Unable to determine which editor to use; check \$EDITOR") // TODO: i18n
         }
         
diff --git a/src/main/org/codehaus/groovy/tools/shell/util/Preferences.java b/src/main/org/codehaus/groovy/tools/shell/util/Preferences.java
index 2c695dba08..ee84a6b1e1 100644
--- a/src/main/org/codehaus/groovy/tools/shell/util/Preferences.java
+++ b/src/main/org/codehaus/groovy/tools/shell/util/Preferences.java
@@ -64,10 +64,22 @@ public class Preferences
         });
     }
 
-    public static boolean showLastResult = STORE.getBoolean("show-last-result", true);
+    public static boolean getShowLastResult() {
+        return STORE.getBoolean("show-last-result", true);
+    }
+
+    public static boolean getSanitizeStackTrace() {
+        return STORE.getBoolean("sanitize-stack-trace", true);
+    }
 
-    public static boolean sanitizeStackTrace = STORE.getBoolean("sanitize-stack-trace", true);
+    public static String getEditor() {
+        return STORE.get("editor", System.getenv("EDITOR"));
+    }
 
+    //
+    // Store Access
+    //
+    
     public static String[] keys() throws BackingStoreException {
         return STORE.keys();
     }
