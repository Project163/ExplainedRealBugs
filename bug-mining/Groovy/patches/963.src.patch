diff --git a/src/main/groovy/lang/GroovyShell.java b/src/main/groovy/lang/GroovyShell.java
index 31b5c14ef2..29f71cab3b 100644
--- a/src/main/groovy/lang/GroovyShell.java
+++ b/src/main/groovy/lang/GroovyShell.java
@@ -239,6 +239,9 @@ public class GroovyShell extends GroovyObjectSupport {
         if (scriptClass == null) {
             return null;
         }
+        System.err.println(scriptClass +" ? "+(Script.class.isAssignableFrom(scriptClass)));
+        System.err.println(scriptClass.getSuperclass());
+        System.err.println(java.util.Arrays.toString(scriptClass.getInterfaces()));
         try {
             if (Script.class.isAssignableFrom(scriptClass)) {
                 // treat it just like a script if it is one
@@ -251,6 +254,7 @@ public class GroovyShell extends GroovyObjectSupport {
                    // ignore instaintiations errors, try to do main
                 }
                 if (script != null) {
+                    System.err.println(script);
                     script.setBinding(context);
                     script.setProperty("args", args);
                     return script.run();
@@ -488,6 +492,7 @@ public class GroovyShell extends GroovyObjectSupport {
      */
     public Object evaluate(GroovyCodeSource codeSource) throws CompilationFailedException {
         Script script = parse(codeSource);
+        script.setBinding(context);
         return script.run();
     }
 
@@ -558,6 +563,7 @@ public class GroovyShell extends GroovyObjectSupport {
         Script script = null;
         try {
             script = parse(in, fileName);
+            script.setBinding(context);
             return script.run();
         } finally {
             if (script != null) {
diff --git a/src/main/groovy/swing/SwingBuilder.groovy b/src/main/groovy/swing/SwingBuilder.groovy
index d58719ceff..8a7c35b296 100644
--- a/src/main/groovy/swing/SwingBuilder.groovy
+++ b/src/main/groovy/swing/SwingBuilder.groovy
@@ -471,17 +471,20 @@ public class SwingBuilder extends FactoryBuilderSupport {
         if( !actionKey ) actionKey = "Action"+Math.abs(random.nextLong())
 
         def keyStroke = attributes.remove("keyStroke")
-        // accept String, KeyStroke, List<String>, List<KeyStroke>
+        // accept String, Number, KeyStroke, List<String>, List<Number>, List<KeyStroke>
         def action = attributes.remove("action")
 
-        if( keyStroke instanceof String ) keyStroke = [keyStroke]
+        if( keyStroke instanceof String || KeyStroke instanceof Number ) keyStroke = [keyStroke]
         keyStroke.each { ks ->
             switch(ks) {
                 case KeyStroke:
                     component.getInputMap(condition).put(ks, actionKey)
                     break
                 case String:
-                    component.getInputMap(condition).put(shortcut(ks), actionKey)
+                    component.getInputMap(condition).put(KeyStroke.getKeyStroke(ks), actionKey)
+                    break
+                case Number:
+                    component.getInputMap(condition).put(KeyStroke.getKeyStroke(ks.intValue()), actionKey)
                     break
                 default:
                     throw new RuntimeException("Cannot apply ${ks} as a KeyStroke value.")
diff --git a/src/main/groovy/ui/Console.groovy b/src/main/groovy/ui/Console.groovy
index 153b5f9a7f..af71ed94eb 100644
--- a/src/main/groovy/ui/Console.groovy
+++ b/src/main/groovy/ui/Console.groovy
@@ -134,6 +134,7 @@ class Console implements CaretListener, HyperlinkListener {
 
     // Running scripts
     GroovyShell shell
+    Binding initBinding
     int scriptNameCounter = 0
     SystemOutputInterceptor systemOutInterceptor
     Thread runThread = null
@@ -168,6 +169,7 @@ class Console implements CaretListener, HyperlinkListener {
     }
 
     Console(ClassLoader parent, Binding binding) {
+        this.initBinding = binding ?: new Binding()
         newScript(parent, binding);
         try {
             System.setProperty("groovy.full.stacktrace",
@@ -181,7 +183,8 @@ class Console implements CaretListener, HyperlinkListener {
     }
 
     void newScript(ClassLoader parent, Binding binding) {
-        shell = new GroovyShell(parent, binding)
+        def bindingCopy = new Binding(new HashMap(binding.variables))
+        shell = new GroovyShell(parent, bindingCopy)
     }
 
     static def frameConsoleDelegates = [
@@ -705,7 +708,7 @@ class Console implements CaretListener, HyperlinkListener {
     }
 
     void clearContext(EventObject evt = null) {
-        newScript(null, new Binding())
+        newScript(null, initBinding)
     }
 
     private void runScriptImpl(boolean selected) {
diff --git a/src/test/groovy/swing/SwingBuilderTest.groovy b/src/test/groovy/swing/SwingBuilderTest.groovy
index 0f86ce3039..f91d6f42a7 100644
--- a/src/test/groovy/swing/SwingBuilderTest.groovy
+++ b/src/test/groovy/swing/SwingBuilderTest.groovy
@@ -1903,6 +1903,7 @@ class SwingBuilderTest extends GroovySwingTestCase {
             actionKey: "asValue",
             keyStroke: "V",
             action: noop)
+        assert button.getInputMap(JComponent.WHEN_FOCUSED).get(KeyStroke.getKeyStroke("V")) == "asValue"
         assert button.actionMap.get("asValue") == noop
 
         // component as property
@@ -1910,6 +1911,7 @@ class SwingBuilderTest extends GroovySwingTestCase {
             actionKey: "asProperty",
             keyStroke: "P",
             action: noop)
+        assert button.getInputMap(JComponent.WHEN_FOCUSED).get(KeyStroke.getKeyStroke("P")) == "asProperty"
         assert button.actionMap.get("asProperty") == noop
 
         // nested in component
@@ -1918,7 +1920,17 @@ class SwingBuilderTest extends GroovySwingTestCase {
                keyStroke: "N",
                action: noop)
         }
+        assert button.getInputMap(JComponent.WHEN_FOCUSED).get(KeyStroke.getKeyStroke("N")) == "nested"
         assert button.actionMap.get("nested") == noop
+
+        // nested in component + shortcut
+        button = swing.button {
+            keyStrokeAction(actionKey: "nested_shortcut",
+               keyStroke: shortcut("N"),
+               action: noop)
+        }
+        assert button.getInputMap(JComponent.WHEN_FOCUSED).get(swing.shortcut("N")) == "nested_shortcut"
+        assert button.actionMap.get("nested_shortcut") == noop
       }
     }
 }
