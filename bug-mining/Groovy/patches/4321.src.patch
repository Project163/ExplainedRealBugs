diff --git a/src/main/java/org/apache/groovy/parser/antlr4/AstBuilder.java b/src/main/java/org/apache/groovy/parser/antlr4/AstBuilder.java
index 690547c4ab..ae248a8b20 100644
--- a/src/main/java/org/apache/groovy/parser/antlr4/AstBuilder.java
+++ b/src/main/java/org/apache/groovy/parser/antlr4/AstBuilder.java
@@ -1555,6 +1555,8 @@ public class AstBuilder extends GroovyParserBaseVisitor<Object> {
                                 .map(ClassExpression::new)
                                 .collect(Collectors.toList()));
                 sealedAnnotationNode.setMember("permittedSubclasses", permittedSubclassesListExpression);
+                configureAST(sealedAnnotationNode, ctx.PERMITS());
+                sealedAnnotationNode.setNodeMetaData("permits", true);
             }
             classNode.addAnnotation(sealedAnnotationNode);
         } else if (isNonSealed) {
diff --git a/src/main/java/org/codehaus/groovy/transform/SealedASTTransformation.java b/src/main/java/org/codehaus/groovy/transform/SealedASTTransformation.java
index 04fda04e55..31dee5e285 100644
--- a/src/main/java/org/codehaus/groovy/transform/SealedASTTransformation.java
+++ b/src/main/java/org/codehaus/groovy/transform/SealedASTTransformation.java
@@ -43,6 +43,7 @@ import static org.codehaus.groovy.ast.ClassHelper.make;
 public class SealedASTTransformation extends AbstractASTTransformation {
 
     private static final Class<?> SEALED_CLASS = Sealed.class;
+    private static final String SEALED_NAME = "@" + SEALED_CLASS.getSimpleName();
     private static final ClassNode SEALED_TYPE = make(SEALED_CLASS);
     private static final ClassNode SEALED_OPTIONS_TYPE = make(SealedOptions.class);
     public static final String SEALED_ALWAYS_ANNOTATE = "groovy.transform.SealedOptions.alwaysAnnotate";
@@ -57,11 +58,11 @@ public class SealedASTTransformation extends AbstractASTTransformation {
         if (parent instanceof ClassNode) {
             ClassNode cNode = (ClassNode) parent;
             if (cNode.isEnum()) {
-                addError("@" + SEALED_CLASS.getSimpleName() + " not allowed for enum", cNode);
+                addError(SEALED_NAME + " not allowed for enum", cNode);
                 return;
             }
             if (cNode.isAnnotationDefinition()) {
-                addError("@" + SEALED_CLASS.getSimpleName() + " not allowed for annotation definition", cNode);
+                addError(SEALED_NAME + " not allowed for annotation definition", cNode);
                 return;
             }
             cNode.putNodeMetaData(SEALED_CLASS, Boolean.TRUE);
@@ -89,6 +90,11 @@ public class SealedASTTransformation extends AbstractASTTransformation {
             }
             List<ClassNode> newSubclasses = getMemberClassList(anno, "permittedSubclasses");
             if (newSubclasses != null) {
+                newSubclasses.forEach(subnode -> {
+                    if (subnode.equals(cNode)) {
+                        addError("Illegal self-reference: a sealed class cannot have itself as a permitted subclass", anno);
+                    }
+                });
                 cNode.getPermittedSubclasses().addAll(newSubclasses);
             }
         }
diff --git a/src/test/org/codehaus/groovy/transform/SealedTransformTest.groovy b/src/test/org/codehaus/groovy/transform/SealedTransformTest.groovy
index b375a8be28..7e2307357d 100644
--- a/src/test/org/codehaus/groovy/transform/SealedTransformTest.groovy
+++ b/src/test/org/codehaus/groovy/transform/SealedTransformTest.groovy
@@ -222,4 +222,15 @@ class SealedTransformTest {
         ''')
         assert shapeClass.getAnnotation(Sealed) == null
     }
+
+    @Test
+    void testSealedSelfReference() {
+        def expected = "Illegal self-reference: a sealed class cannot have itself as a permitted subclass"
+        assert shouldFail(MultipleCompilationErrorsException, '''
+            @groovy.transform.Sealed(permittedSubclasses=Shape) class Shape { }
+        ''').message.contains(expected)
+        assert shouldFail(MultipleCompilationErrorsException, '''
+            sealed class Other permits Other { }
+        ''').message.contains(expected)
+    }
 }
