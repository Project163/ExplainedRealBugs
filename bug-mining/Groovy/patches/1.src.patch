diff --git a/src/main/org/codehaus/groovy/syntax/parser/ASTBuilder.java b/src/main/org/codehaus/groovy/syntax/parser/ASTBuilder.java
index 7c48bb0a02..02643f97aa 100644
--- a/src/main/org/codehaus/groovy/syntax/parser/ASTBuilder.java
+++ b/src/main/org/codehaus/groovy/syntax/parser/ASTBuilder.java
@@ -75,7 +75,14 @@ public class ASTBuilder
 
     protected String packageDeclaration(CSTNode packageRoot)
     {
-        return qualifiedName( packageRoot.getChild( 0 ) );
+        CSTNode nameRoot = packageRoot.getChild( 0 );
+
+        if ( nameRoot.getToken() == null )
+        {
+            return null;
+        }
+             
+        return qualifiedName( nameRoot );
     }
 
     protected void importStatements(CSTNode importsRoot)
@@ -317,7 +324,20 @@ public class ASTBuilder
             interfaceNames = resolvedQualifiedNames( classRoot.getChild( 3 ).getChildren() );
         }
 
-        ClassNode classNode = new ClassNode( packageName + "." + className,
+        String fqClassName = null;
+
+        if ( packageName == null
+             ||
+             packageName.trim().equals( "" ) )
+        {
+            fqClassName = className;
+        }
+        else
+        {
+            fqClassName = packageName.trim() + "." + className;
+        }
+
+        ClassNode classNode = new ClassNode( fqClassName,
                                              modifiers,
                                              superClassName,
                                              interfaceNames );
diff --git a/src/main/org/codehaus/groovy/syntax/parser/Parser.java b/src/main/org/codehaus/groovy/syntax/parser/Parser.java
index 445ce08a11..074544a7dc 100644
--- a/src/main/org/codehaus/groovy/syntax/parser/Parser.java
+++ b/src/main/org/codehaus/groovy/syntax/parser/Parser.java
@@ -34,9 +34,23 @@ public class Parser
     {
         CSTNode compilationUnit = new CSTNode();
 
-        compilationUnit.addChild( packageDeclaration() );
-        optionalSemicolon();
-        //consume( Token.SEMICOLON );
+        CSTNode packageDeclaration = null;
+
+        if ( lt() == Token.KEYWORD_PACKAGE )
+        {
+            packageDeclaration = packageDeclaration();
+            optionalSemicolon();
+        }
+        else
+        {
+            packageDeclaration = new CSTNode( Token.keyword( -1,
+                                                             -1,
+                                                             "package" ) );
+
+            packageDeclaration.addChild( new CSTNode() );
+        }
+
+        compilationUnit.addChild( packageDeclaration );
 
         CSTNode imports = new CSTNode();
 
diff --git a/src/test/groovy/NoPackageTest.groovy b/src/test/groovy/NoPackageTest.groovy
new file mode 100644
index 0000000000..755f3aac7a
--- /dev/null
+++ b/src/test/groovy/NoPackageTest.groovy
@@ -0,0 +1,9 @@
+
+class NoPackageTest
+	extends GroovyTestCase
+{
+    void testClassDef()
+    {
+        assert getClass().equals( Class.forName( "NoPackageTest" ) );
+    }
+}
