diff --git a/src/main/org/codehaus/groovy/classgen/AsmClassGenerator.java b/src/main/org/codehaus/groovy/classgen/AsmClassGenerator.java
index af1304cde3..d293b70212 100644
--- a/src/main/org/codehaus/groovy/classgen/AsmClassGenerator.java
+++ b/src/main/org/codehaus/groovy/classgen/AsmClassGenerator.java
@@ -822,7 +822,9 @@ public class AsmClassGenerator extends ClassGenerator {
             compileStack.pushFinallyBlock(
                     new Runnable() {
                         public void run() {
+                            compileStack.pushFinallyBlockVisit(this);
                             finallyStatement.visit(AsmClassGenerator.this);
+                            compileStack.popFinallyBlockVisit(this);
                         }
                     }
             );
diff --git a/src/main/org/codehaus/groovy/classgen/CompileStack.java b/src/main/org/codehaus/groovy/classgen/CompileStack.java
index d3594dfb4c..7083d9cf7e 100644
--- a/src/main/org/codehaus/groovy/classgen/CompileStack.java
+++ b/src/main/org/codehaus/groovy/classgen/CompileStack.java
@@ -598,7 +598,6 @@ public class CompileStack implements Opcodes {
         for (Iterator iter = blocks.iterator(); iter.hasNext();) {
             Runnable block = (Runnable) iter.next();
             if (visitedBlocks.contains(block)) continue;
-            visitedBlocks.add(block);
             block.run();
         }     
     }
@@ -620,4 +619,12 @@ public class CompileStack implements Opcodes {
         popState();
         finallyBlocks.removeFirst();
     }
+
+    public void pushFinallyBlockVisit(Runnable block) {
+        visitedBlocks.add(block);
+    }
+    
+    public void popFinallyBlockVisit(Runnable block) {
+        visitedBlocks.remove(block);
+    }
 }
diff --git a/src/main/org/codehaus/groovy/runtime/ScriptBytecodeAdapter.java b/src/main/org/codehaus/groovy/runtime/ScriptBytecodeAdapter.java
index 256bca304b..9d6f71ad0e 100644
--- a/src/main/org/codehaus/groovy/runtime/ScriptBytecodeAdapter.java
+++ b/src/main/org/codehaus/groovy/runtime/ScriptBytecodeAdapter.java
@@ -16,7 +16,6 @@
 package org.codehaus.groovy.runtime;
 
 import groovy.lang.*;
-import org.codehaus.groovy.GroovyException;
 import org.codehaus.groovy.runtime.typehandling.DefaultTypeTransformation;
 import org.codehaus.groovy.runtime.wrappers.GroovyObjectWrapper;
 import org.codehaus.groovy.runtime.wrappers.PojoWrapper;
diff --git a/src/test/groovy/FinallyTest.groovy b/src/test/groovy/FinallyTest.groovy
index d36f44728c..60ce434730 100644
--- a/src/test/groovy/FinallyTest.groovy
+++ b/src/test/groovy/FinallyTest.groovy
@@ -116,4 +116,18 @@ class FinallyTest extends GroovyTestCase{
     }
     return calls
   }
+  
+  def multipleReturn() {
+    try { 
+        if (0 == 1) return 1
+        return 2
+    }
+    finally { 
+        return 3
+    }
+  }
+  
+  void testMultipleReturn(){
+    assert multipleReturn() == 3
+  }
 }
\ No newline at end of file
