diff --git a/src/main/groovy/util/GroovyScriptEngine.java b/src/main/groovy/util/GroovyScriptEngine.java
index be50edaef0..5dfbfc37ed 100644
--- a/src/main/groovy/util/GroovyScriptEngine.java
+++ b/src/main/groovy/util/GroovyScriptEngine.java
@@ -249,7 +249,20 @@ public class GroovyScriptEngine implements ResourceConnector {
             ScriptCacheEntry origEntry = scriptCache.get(codeSource.getName());
             Set<String> origDep = null;
             if (origEntry != null) origDep = origEntry.dependencies;
-            if (origDep != null) cache.put(".", origDep);
+            if (origDep != null) {
+                HashSet<String> newDep = new HashSet<String>(origDep.size());
+                for (String depName : origDep) {
+                    ScriptCacheEntry dep = scriptCache.get(depName);
+                    try{
+                        if (origEntry==dep || GroovyScriptEngine.this.isSourceNewer(dep)) {
+                            newDep.add(depName);
+                        }
+                    } catch (ResourceException re) {
+                        
+                    }
+                }
+                cache.put(".", newDep);
+            }
 
             Class answer = super.parseClass(codeSource, false);
 
@@ -581,8 +594,7 @@ public class GroovyScriptEngine implements ResourceConnector {
         URLConnection conn = rc.getResourceConnection(scriptName);
         long lastMod = 0;
         try {
-            // getLastModified() truncates up to 999 ms from the true modification time, let's fix that
-            lastMod = ((conn.getLastModified() / 1000) + 1) * 1000 - 1;
+            lastMod = conn.getLastModified();
         } finally {
             // getResourceConnection() opening the inputstream, let's ensure all streams are closed
             forceClose(conn);
@@ -596,13 +608,17 @@ public class GroovyScriptEngine implements ResourceConnector {
         long mainEntryLastCheck = entry.lastCheck;
         long now = 0;
 
+        boolean returnValue = false;
         for (String scriptName : entry.dependencies) {
             ScriptCacheEntry depEntry = scriptCache.get(scriptName);
             if (depEntry.sourceNewer) return true;
 
             // check if maybe dependency was recompiled, but this one here not
-            if (mainEntryLastCheck<depEntry.lastModified) return true;
-            
+            if (mainEntryLastCheck<depEntry.lastModified) {
+                returnValue = true;
+                continue;
+            }
+
             if (now==0) now = getCurrentTime();
             long nextSourceCheck = depEntry.lastCheck + config.getMinimumRecompilationInterval();
             if (nextSourceCheck > now) continue;
@@ -611,14 +627,14 @@ public class GroovyScriptEngine implements ResourceConnector {
             if (depEntry.lastModified < lastMod) {
                 depEntry = new ScriptCacheEntry(depEntry, lastMod, true);
                 scriptCache.put(scriptName, depEntry);
-                return true;
+                returnValue = true;
             } else {
                 depEntry = new ScriptCacheEntry(depEntry, now, false);
                 scriptCache.put(scriptName, depEntry);
             }
         }
 
-        return false;
+        return returnValue;
     }
 
     /**
diff --git a/src/test/groovy/util/GroovyScriptEngineReloadingTest.groovy b/src/test/groovy/util/GroovyScriptEngineReloadingTest.groovy
index cc5fb1a95b..0a81da5cab 100644
--- a/src/test/groovy/util/GroovyScriptEngineReloadingTest.groovy
+++ b/src/test/groovy/util/GroovyScriptEngineReloadingTest.groovy
@@ -75,13 +75,14 @@ class GroovyScriptEngineReloadingTest extends GroovyTestCase {
     }
 
     public void testReloadWith2ScriptsDependentOnSameBeanAndReloadForSecond() {
-        gse.config.minimumRecompilationInterval = 1
+        gse.config.minimumRecompilationInterval = 1000
         writeBean(1)
         writeScript(1)
 
         def val1 = gse.run("script1.groovy", "")
         assert val1 =='1', "script1 should have returned 1"
 
+        sleep 1
         writeBean(2)
         writeScript(2)
         val1 = gse.run("script1.groovy", "")
@@ -105,8 +106,8 @@ class GroovyScriptEngineReloadingTest extends GroovyTestCase {
         def val2 = gse.run("script1.groovy", "")
         assert val2 == '1', "script1 should have returned 1"
 
-        writeBean(2)
         sleep 10000
+        writeBean(2)
 
         def val3 = gse.run("script1.groovy", "")
         assert val3 == '2', "script1 should have returned 2 after bean was modified but returned $val3"
@@ -114,6 +115,37 @@ class GroovyScriptEngineReloadingTest extends GroovyTestCase {
         def val4 = gse.run("script2.groovy", "")
         assert val4 == '2', "script2 should have returned 2 after bean was modified but returned $val4"
     }
+    
+    private void writeClassBean() {
+        def s = """
+            class Bean {
+                def getVal(){this.class.hashCode()}
+            }
+        """
+        MapFileSystem.instance.modFile("Bean.groovy", s, gse.@time)
+    }
+    
+    void testDependencyReloadNotTooOften() {
+        gse.config.minimumRecompilationInterval = 1
+        writeClassBean()
+        writeScript(1)
+        writeScript(2)
+
+        def beanClass1 = gse.run("script2.groovy", "")
+        def beanClass2 = gse.run("script1.groovy", "")
+        assert beanClass1 == beanClass2, "bean class should have been compiled only once"
+        def oldBeanClass = beanClass1
+
+        sleep 10000
+        writeClassBean()
+        writeScript(1)
+        writeScript(2)
+
+        beanClass1 = gse.run("script2.groovy", "")
+        beanClass2 = gse.run("script1.groovy", "")
+        assert beanClass1 == beanClass2, "bean class should have been compiled only once"
+        assert beanClass1 != oldBeanClass, "bean class was not recompiled"
+    }
 
     public void testReloadWhenModifyingAllScripts() {
         gse.config.minimumRecompilationInterval = 1
@@ -138,8 +170,8 @@ class GroovyScriptEngineReloadingTest extends GroovyTestCase {
         assert val2 == '1', "script1 should have returned 1"
 
         // Modify Bean to return new value
-        writeBean(2)
         sleep 10000
+        writeBean(2)
 
         def val3 = gse.run("script1.groovy", "")
         assert val3 == '2', "script1 should have returned 2 after bean was modified but returned $val3"
@@ -333,7 +365,7 @@ class GroovyScriptEngineReloadingTest extends GroovyTestCase {
 
    /** GROOVY-2811 and GROOVY-4286  */
    void testReloadingInterval() {
-       gse.config.minimumRecompilationInterval = 2000
+       gse.config.minimumRecompilationInterval = 1500
        def binding = new Binding([:])
        def scriptName = "gse.groovy"
 
