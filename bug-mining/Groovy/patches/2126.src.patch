diff --git a/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java b/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java
index 31cff6917a..a594fd1dab 100644
--- a/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java
+++ b/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java
@@ -2821,7 +2821,10 @@ public class StaticTypeCheckingVisitor extends ClassCodeVisitorSupport {
             if (variable instanceof Parameter) {
                 Parameter parameter = (Parameter) variable;
                 ClassNode type = typeCheckingContext.controlStructureVariables.get(parameter);
-                if (type != null) return type;
+                if (type != null) {
+                    storeType((VariableExpression)exp, type);
+                    return type;
+                }
             }
         } else if (exp instanceof PropertyExpression) {
             PropertyExpression pexp = (PropertyExpression) exp;
diff --git a/src/test/org/codehaus/groovy/classgen/asm/sc/ArraysAndCollectionsStaticCompileTest.groovy b/src/test/org/codehaus/groovy/classgen/asm/sc/ArraysAndCollectionsStaticCompileTest.groovy
index f6f3316b3d..3c1a1dcdf1 100644
--- a/src/test/org/codehaus/groovy/classgen/asm/sc/ArraysAndCollectionsStaticCompileTest.groovy
+++ b/src/test/org/codehaus/groovy/classgen/asm/sc/ArraysAndCollectionsStaticCompileTest.groovy
@@ -64,5 +64,22 @@ class ArraysAndCollectionsStaticCompileTest extends ArraysAndCollectionsSTCTest
             assert m.abcd == 1234
         '''
     }
+
+    // GROOVY-5988
+    void testMapArraySetPropertyAssignment() {
+        assertScript '''
+            Map<String, String> props(Object p) {
+                Map<String, Object> props = [:]
+
+                for(String property in p.properties.keySet()){
+                    props[property] = 'TEST'
+                    // I need to use calling put directy to make it work
+                    // props.put property, 'TEST'
+                }
+                props
+            }
+            assert props('SOME RANDOM STRING') == [class: 'TEST', bytes: 'TEST', empty: 'TEST']
+        '''
+    }
 }
 
