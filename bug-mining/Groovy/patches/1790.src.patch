diff --git a/src/main/groovy/sql/Sql.java b/src/main/groovy/sql/Sql.java
index 06a685523b..0a44bbe891 100644
--- a/src/main/groovy/sql/Sql.java
+++ b/src/main/groovy/sql/Sql.java
@@ -233,7 +233,7 @@ public class Sql {
 
     private static final List<Object> EMPTY_LIST = Collections.emptyList();
 
-    private static final Pattern NAMED_QUERY_PATTERN = Pattern.compile("(?::|\\?(\\d?)\\.?)(\\w*)");
+    private static final Pattern NAMED_QUERY_PATTERN = Pattern.compile("(?<!:)(:)(\\w+)|\\?(\\d*)(?:\\.(\\w+))?");
 
     private DataSource dataSource;
 
@@ -4200,9 +4200,11 @@ public class Sql {
             while (matcher.find()) {
                 newSql.append(sql.substring(txtIndex, matcher.start())).append('?');
                 String indexStr = matcher.group(1);
-                int index = (indexStr == null || indexStr.length() == 0) ? 0 : new Integer(indexStr) - 1;
+                if (indexStr == null) indexStr = matcher.group(3);
+                int index = (indexStr == null || indexStr.length() == 0 || ":".equals(indexStr)) ? 0 : new Integer(indexStr) - 1;
                 String prop = matcher.group(2);
-                indexPropList.add(new Tuple(new Object[]{index, prop.length() == 0 ? "<this>" : prop}));
+                if (prop == null) prop = matcher.group(4);
+                indexPropList.add(new Tuple(new Object[]{index, prop == null || prop.length() == 0 ? "<this>" : prop}));
                 txtIndex = matcher.end();
             }
             newSql.append(sql.substring(txtIndex)); // append ending SQL after last param.
diff --git a/src/test/groovy/sql/SqlCompleteTest.groovy b/src/test/groovy/sql/SqlCompleteTest.groovy
index d81f3f95ce..bfb05701aa 100644
--- a/src/test/groovy/sql/SqlCompleteTest.groovy
+++ b/src/test/groovy/sql/SqlCompleteTest.groovy
@@ -128,6 +128,10 @@ class SqlCompleteTest extends TestHelper {
         assert results == ["Bob": "Mcwhirter"]
     }
 
+    void testCastingNotConfusedWithNamedParameters_5111() {
+        assert !sql.preCheckForNamedParams("select * from TABLE where TEXTFIELD::integer = 3")
+    }
+
     void testEachRowWithNamedOrdinalParams() {
         def lastPatHolder = new Expando()
         lastPatHolder.lastPat = '%a%'
