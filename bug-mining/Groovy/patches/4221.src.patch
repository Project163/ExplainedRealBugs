diff --git a/src/main/java/org/codehaus/groovy/classgen/InnerClassVisitor.java b/src/main/java/org/codehaus/groovy/classgen/InnerClassVisitor.java
index fe7e95a447..8fd2cd4ce1 100644
--- a/src/main/java/org/codehaus/groovy/classgen/InnerClassVisitor.java
+++ b/src/main/java/org/codehaus/groovy/classgen/InnerClassVisitor.java
@@ -260,30 +260,37 @@ public class InnerClassVisitor extends InnerClassVisitorHelper {
 
     // this is the counterpart of addThisReference(). To non-static inner classes, outer this should be
     // passed as the first argument implicitly.
-    private void passThisReference(ConstructorCallExpression call) {
+    private void passThisReference(final ConstructorCallExpression call) {
         ClassNode cn = call.getType().redirect();
         if (!shouldHandleImplicitThisForInnerClass(cn)) return;
 
-        boolean isInStaticContext = true;
+        boolean isInStaticContext;
         if (currentMethod != null)
-            isInStaticContext = currentMethod.getVariableScope().isInStaticContext();
+            isInStaticContext = currentMethod.isStatic();
         else if (currentField != null)
             isInStaticContext = currentField.isStatic();
-        else if (processingObjInitStatements)
-            isInStaticContext = false;
+        else
+            isInStaticContext = !processingObjInitStatements;
+
+        // GROOVY-10289
+        ClassNode enclosing = classNode;
+        while (!isInStaticContext && !enclosing.equals(cn.getOuterClass())) {
+            isInStaticContext = (enclosing.getModifiers() & ACC_STATIC) != 0;
+            // TODO: if enclosing is a local type, also test field or method
+            enclosing = enclosing.getOuterClass();
+            if (enclosing == null) break;
+        }
 
-        // if constructor call is not in static context, return
         if (isInStaticContext) {
             // constructor call is in static context and the inner class is non-static - 1st arg is supposed to be
             // passed as enclosing "this" instance
-            //
             Expression args = call.getArguments();
             if (args instanceof TupleExpression && ((TupleExpression) args).getExpressions().isEmpty()) {
                 addError("No enclosing instance passed in constructor call of a non-static inner class", call);
             }
-            return;
+        } else {
+            insertThis0ToSuperCall(call, cn);
         }
-        insertThis0ToSuperCall(call, cn);
     }
 
     private void insertThis0ToSuperCall(final ConstructorCallExpression call, final ClassNode cn) {
diff --git a/src/test/gls/innerClass/InnerClassTest.groovy b/src/test/gls/innerClass/InnerClassTest.groovy
index c879798791..b5d5d9d4db 100644
--- a/src/test/gls/innerClass/InnerClassTest.groovy
+++ b/src/test/gls/innerClass/InnerClassTest.groovy
@@ -1031,6 +1031,90 @@ final class InnerClassTest {
         '''
     }
 
+    @Test
+    void testUsageOfOuterType() {
+        assertScript '''
+            class Foo {
+                class Bar {
+                    def test() {
+                        new Baz()
+                    }
+                }
+                class Baz {
+                }
+            }
+            def baz = new Foo().new Foo.Bar().test()
+            assert baz instanceof Foo.Baz
+        '''
+    }
+
+    @Test
+    void testUsageOfOuterType2() {
+        assertScript '''
+            class Foo {
+                static class Bar {
+                    static test() {
+                        new Baz()
+                    }
+                }
+                static class Baz {
+                }
+            }
+            def baz = Foo.Bar.test()
+            assert baz instanceof Foo.Baz
+        '''
+    }
+
+    @Test
+    void testUsageOfOuterType3() {
+        def err = shouldFail '''
+            class Foo {
+                static class Bar {
+                    static test() {
+                        new Baz()
+                    }
+                }
+                class Baz {
+                }
+            }
+        '''
+        assert err =~ /No enclosing instance passed in constructor call of a non-static inner class/
+    }
+
+    @Test // GROOVY-10289
+    void testUsageOfOuterType4() {
+        def err = shouldFail '''
+            class Foo {
+                static class Bar {
+                    def test() {
+                        new Baz()
+                    }
+                }
+                class Baz {
+                }
+            }
+        '''
+        assert err =~ /No enclosing instance passed in constructor call of a non-static inner class/
+    }
+
+    @Test
+    void testUsageOfOuterType5() {
+        def err = shouldFail '''
+            class Foo {
+                static class Bar {
+                    class Baz {
+                        def test() {
+                            new Foo.Baz()
+                        }
+                    }
+                }
+                class Baz {
+                }
+            }
+        '''
+        assert err =~ /No enclosing instance passed in constructor call of a non-static inner class/
+    }
+
     @Test
     void testClassOutputOrdering() {
         // this does actually not do much, but before this
