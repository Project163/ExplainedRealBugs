diff --git a/src/main/org/codehaus/groovy/transform/ImmutableASTTransformation.java b/src/main/org/codehaus/groovy/transform/ImmutableASTTransformation.java
index b793499f33..6af5c7bcc6 100644
--- a/src/main/org/codehaus/groovy/transform/ImmutableASTTransformation.java
+++ b/src/main/org/codehaus/groovy/transform/ImmutableASTTransformation.java
@@ -348,7 +348,7 @@ public class ImmutableASTTransformation extends AbstractASTTransformation {
             if (fNode.isPublic()) continue; // public fields will be rejected elsewhere
             if (cNode.getProperty(fNode.getName()) != null) continue; // a property
             if (fNode.isFinal() && fNode.isStatic()) continue;
-            if (fNode.getName().contains("$")) continue; // internal field
+            if (fNode.getName().contains("$") || fNode.isSynthetic()) continue; // internal field
             if (fNode.isFinal() && fNode.getInitialExpression() != null)
                 body.addStatement(checkFinalArgNotOverridden(cNode, fNode));
             body.addStatement(createConstructorStatementDefault(fNode));
diff --git a/src/test/org/codehaus/groovy/tools/stubgenerator/ImmutableWithJointCompilationGroovy6836StubTest.groovy b/src/test/org/codehaus/groovy/tools/stubgenerator/ImmutableWithJointCompilationGroovy6836StubTest.groovy
new file mode 100644
index 0000000000..3f4548b524
--- /dev/null
+++ b/src/test/org/codehaus/groovy/tools/stubgenerator/ImmutableWithJointCompilationGroovy6836StubTest.groovy
@@ -0,0 +1,54 @@
+/*
+ * Copyright 2003-2014 the original author or authors.
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.codehaus.groovy.tools.stubgenerator
+
+/**
+ * Checks that {@code @Immutable} classes work correctly with stubs.
+ *
+ * @author Paul King
+ */
+class ImmutableWithJointCompilationGroovy6836StubTest extends StringSourcesStubTestCase {
+
+    Map<String, String> provideSources() {
+        [
+                'foo/JavaFoo.java': '''package foo;
+                    public final class JavaFoo {}
+                ''',
+                'foo/ImmutableBean.groovy': '''package foo
+                    @groovy.transform.Immutable(knownImmutables=['id'])
+                    @groovy.transform.CompileStatic // do NOT remove this
+                    class ImmutableBean { JavaFoo id }
+                ''',
+                'foo/ImmutableTest.groovy': '''package foo
+                    def map = [id:new JavaFoo()]
+                    def mc = map.getMetaClass()
+                    mc.blah = { 123 }
+                    assert map.blah() == 123
+                    def bean = new ImmutableBean(map)
+                    def beanMc = bean.getMetaClass()
+                    // now this is where it gets funny
+                    int hash = bean.hashCode() // will trigger call to getProperty, which will use the wrong metaclass
+                    Set set = []
+                    set.add(bean) // same, internally calls .hashCode() and .equals()
+                '''
+        ]
+    }
+
+    void verifyStubs() {
+        def test = loader.loadClass('foo.ImmutableTest').newInstance()
+        test.run()
+    }
+}
diff --git a/src/test/org/codehaus/groovy/tools/stubgenerator/StubTestCase.groovy b/src/test/org/codehaus/groovy/tools/stubgenerator/StubTestCase.groovy
index fafc739602..4569eddf68 100644
--- a/src/test/org/codehaus/groovy/tools/stubgenerator/StubTestCase.groovy
+++ b/src/test/org/codehaus/groovy/tools/stubgenerator/StubTestCase.groovy
@@ -60,6 +60,7 @@ abstract class StubTestCase extends GroovyTestCase {
 
     protected JavaDocBuilder qdox = new JavaDocBuilder()
 
+    protected GroovyClassLoader loader
     protected CompilerConfiguration config = new CompilerConfiguration()
 
     protected boolean debug = false;
@@ -91,6 +92,8 @@ abstract class StubTestCase extends GroovyTestCase {
             targetDir.deleteDir()
             stubDir.deleteDir()
         }
+        loader = null
+        config = null
         super.tearDown()
     }
 
@@ -209,7 +212,7 @@ abstract class StubTestCase extends GroovyTestCase {
      * @param sources the sources to be compiled
      */
     protected void compile(List<File> sources) {
-        def loader = new GroovyClassLoader(this.class.classLoader)
+        loader = new GroovyClassLoader(this.class.classLoader)
         def cu = new JavaAwareCompilationUnit(config, loader)
         cu.addSources(sources as File[])
         try {
