diff --git a/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java b/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java
index b6d24b2784..890c28e541 100644
--- a/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java
+++ b/src/main/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java
@@ -1807,6 +1807,20 @@ public class StaticTypeCheckingVisitor extends ClassCodeVisitorSupport {
         extension.afterVisitMethod(node);
     }
 
+    @Override
+    public void visitConstructor(final ConstructorNode node) {
+        if (shouldSkipMethodNode(node)) {
+            // method has already been visited by a static type checking visitor
+            return;
+        }
+        for (Parameter parameter : node.getParameters()) {
+            if (parameter.getInitialExpression()!=null) {
+                parameter.getInitialExpression().visit(this);
+            }
+        }
+        super.visitConstructor(node);
+    }
+
     protected void startMethodInference(final MethodNode node, ErrorCollector collector) {
         if (isSkipMode(node)) return;
 
diff --git a/src/test/org/codehaus/groovy/classgen/asm/sc/BugsStaticCompileTest.groovy b/src/test/org/codehaus/groovy/classgen/asm/sc/BugsStaticCompileTest.groovy
index 45aef6fa5c..6970b7ad1d 100644
--- a/src/test/org/codehaus/groovy/classgen/asm/sc/BugsStaticCompileTest.groovy
+++ b/src/test/org/codehaus/groovy/classgen/asm/sc/BugsStaticCompileTest.groovy
@@ -1159,6 +1159,31 @@ assert it.next() == 1G
     '''
     }
 
+    // GROOVY-6851
+    void testShouldNotThrowNPEIfElvisOperatorIsUsedInDefaultArgumentValue() {
+        assertScript '''import org.codehaus.groovy.ast.expr.MethodCallExpression
+
+class GrailsHomeWorkspaceReader {
+    @ASTTest(phase=INSTRUCTION_SELECTION,value={
+        def defaultValue = node.parameters[0].initialExpression
+        assert defaultValue instanceof MethodCallExpression
+        def target = defaultValue.getNodeMetaData(DIRECT_METHOD_CALL_TARGET)
+        assert target != null
+    })
+    GrailsHomeWorkspaceReader(String grailsHome = System.getProperty('grails.home')) {
+    }
+}
+new GrailsHomeWorkspaceReader()
+'''
+        assertScript '''
+class GrailsHomeWorkspaceReader {
+    GrailsHomeWorkspaceReader(String grailsHome = System.getProperty('grails.home') ?: System.getenv('GRAILS_HOME')) {
+    }
+}
+new GrailsHomeWorkspaceReader()
+'''
+    }
+
     // GROOVY-6342
     void testShouldNotThrowNPEIfElvisOperatorIsUsedInsideTernary() {
         assertScript '''class Inner {
