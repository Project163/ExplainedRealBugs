diff --git a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/Groovysh.groovy b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/Groovysh.groovy
index d4da569f9a..6f5df4f94b 100644
--- a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/Groovysh.groovy
+++ b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/Groovysh.groovy
@@ -22,6 +22,8 @@ import jline.TerminalFactory
 import jline.console.history.FileHistory
 import org.codehaus.groovy.runtime.InvokerHelper
 import org.codehaus.groovy.runtime.StackTraceUtils
+import org.codehaus.groovy.tools.shell.commands.LoadCommand
+import org.codehaus.groovy.tools.shell.commands.RecordCommand
 import org.codehaus.groovy.tools.shell.util.*
 import org.fusesource.jansi.AnsiRenderer
 
@@ -280,13 +282,17 @@ class Groovysh extends Shell {
         return dir.canonicalFile
     }
 
-    private void loadUserScript(final String filename) {
+    /**
+     * Loads file from within user groovy state directory
+     * @param filename
+     */
+    protected void loadUserScript(final String filename) {
         assert filename
         
-        def file = new File(userStateDirectory, filename)
+        File file = new File(getUserStateDirectory(), filename)
         
         if (file.exists()) {
-            Command command = registry['load'] as Command
+            Command command = registry[LoadCommand.COMMAND_NAME] as Command
 
             if (command) {
                 log.debug("Loading user-script: $file")
@@ -302,9 +308,8 @@ class Groovysh extends Shell {
                     // Restore the result hook
                     resultHook = previousHook
                 }
-            }
-            else {
-                log.error("Unable to load user-script, missing 'load' command")
+            } else {
+                log.error("Unable to load user-script, missing '$LoadCommand.COMMAND_NAME' command")
             }
         }
     }
@@ -314,7 +319,7 @@ class Groovysh extends Shell {
     //
 
     private void maybeRecordInput(final String line) {
-        def record = registry['record']
+        def record = registry[RecordCommand.COMMAND_NAME]
 
         if (record != null) {
             record.recordInput(line)
@@ -322,7 +327,7 @@ class Groovysh extends Shell {
     }
 
     private void maybeRecordResult(final Object result) {
-        def record = registry['record']
+        def record = registry[RecordCommand.COMMAND_NAME]
 
         if (record != null) {
             record.recordResult(result)
@@ -330,7 +335,7 @@ class Groovysh extends Shell {
     }
 
     private void maybeRecordError(Throwable cause) {
-        def record = registry['record']
+        def record = registry[RecordCommand.COMMAND_NAME]
 
         if (record != null) {
             boolean sanitize = Preferences.sanitizeStackTrace
diff --git a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/AliasCommand.groovy b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/AliasCommand.groovy
index d44c8c1317..5dac689c4c 100644
--- a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/AliasCommand.groovy
+++ b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/AliasCommand.groovy
@@ -32,8 +32,10 @@ import org.codehaus.groovy.tools.shell.util.SimpleCompletor
 class AliasCommand
     extends CommandSupport
 {
+    public static final String COMMAND_NAME = ':alias'
+
     AliasCommand(final Groovysh shell) {
-        super(shell, ':alias', ':a', )
+        super(shell, COMMAND_NAME, ':a', )
     }
 
     protected List createCompleters() {
diff --git a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/ClearCommand.groovy b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/ClearCommand.groovy
index aefaae0741..ab1f6204df 100644
--- a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/ClearCommand.groovy
+++ b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/ClearCommand.groovy
@@ -28,8 +28,10 @@ import org.codehaus.groovy.tools.shell.Groovysh
 class ClearCommand
     extends CommandSupport
 {
+    public static final String COMMAND_NAME = ':clear'
+
     ClearCommand(final Groovysh shell) {
-        super(shell, ':clear', ':c')
+        super(shell, COMMAND_NAME, ':c')
     }
     
     Object execute(final List<String> args) {
diff --git a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/DisplayCommand.groovy b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/DisplayCommand.groovy
index b6c070d8bd..d63688d1df 100644
--- a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/DisplayCommand.groovy
+++ b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/DisplayCommand.groovy
@@ -28,8 +28,10 @@ import org.codehaus.groovy.tools.shell.Groovysh
 class DisplayCommand
     extends CommandSupport
 {
+    public static final String COMMAND_NAME = ':display'
+
     DisplayCommand(final Groovysh shell) {
-        super(shell, ':display', ':d')
+        super(shell, COMMAND_NAME, ':d')
     }
 
     Object execute(final List<String> args) {
diff --git a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/DocCommand.groovy b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/DocCommand.groovy
index a1f3c46b1a..73e97f378b 100644
--- a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/DocCommand.groovy
+++ b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/DocCommand.groovy
@@ -36,6 +36,8 @@ import org.codehaus.groovy.tools.shell.commands.ImportCompleter
  */
 class DocCommand extends CommandSupport {
 
+    public static final String COMMAND_NAME = ':doc'
+
     private static final String ENV_BROWSER = "BROWSER"
     private static final String ENV_BROWSER_GROOVYSH = "GROOVYSH_BROWSER"
 
@@ -65,7 +67,7 @@ class DocCommand extends CommandSupport {
     }
 
     DocCommand(final Groovysh shell) {
-        super(shell, ':doc', ':D')
+        super(shell, COMMAND_NAME, ':D')
     }
 
     @Override
diff --git a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/EditCommand.groovy b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/EditCommand.groovy
index 9427b7dbd4..7e2acafdca 100644
--- a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/EditCommand.groovy
+++ b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/EditCommand.groovy
@@ -29,8 +29,10 @@ import org.codehaus.groovy.tools.shell.util.Preferences
 class EditCommand
     extends CommandSupport
 {
+    public static final String COMMAND_NAME = ':edit'
+
     EditCommand(final Groovysh shell) {
-        super(shell, ':edit', ':e')
+        super(shell, COMMAND_NAME, ':e')
     }
 
     ProcessBuilder getEditorProcessBuilder(String editCommand, String tempFilename) {
diff --git a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/ExitCommand.groovy b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/ExitCommand.groovy
index 117ffa94d4..97b6c57b42 100644
--- a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/ExitCommand.groovy
+++ b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/ExitCommand.groovy
@@ -29,8 +29,10 @@ import org.codehaus.groovy.tools.shell.ExitNotification
 class ExitCommand
     extends CommandSupport
 {
+    public static final String COMMAND_NAME = ':exit'
+
     ExitCommand(final Groovysh shell) {
-        super(shell, ':exit', ':x')
+        super(shell, COMMAND_NAME, ':x')
 
         alias(':quit', ':q')
     }
diff --git a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/HelpCommand.groovy b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/HelpCommand.groovy
index 439e1c7796..e87a96dedd 100644
--- a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/HelpCommand.groovy
+++ b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/HelpCommand.groovy
@@ -32,8 +32,11 @@ import org.codehaus.groovy.tools.shell.util.SimpleCompletor
 class HelpCommand
     extends CommandSupport
 {
+
+    public static final String COMMAND_NAME = ':help'
+
     HelpCommand(final Groovysh shell) {
-        super(shell, ':help', ':h')
+        super(shell, COMMAND_NAME, ':h')
 
         alias('?', ':?')
     }
diff --git a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/HistoryCommand.groovy b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/HistoryCommand.groovy
index 0dc1cfe2f0..60e6ca92d3 100644
--- a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/HistoryCommand.groovy
+++ b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/HistoryCommand.groovy
@@ -30,8 +30,11 @@ import org.codehaus.groovy.tools.shell.util.SimpleCompletor
 class HistoryCommand
     extends ComplexCommandSupport
 {
+
+    public static final String COMMAND_NAME = ':history'
+
     HistoryCommand(final Groovysh shell) {
-        super(shell, ':history', ':H', [ 'show', 'clear', 'flush', 'recall' ], 'show')
+        super(shell, COMMAND_NAME, ':H', [ 'show', 'clear', 'flush', 'recall' ], 'show')
     }
 
     protected List createCompleters() {
diff --git a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/InspectCommand.groovy b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/InspectCommand.groovy
index d67b4d8802..d8833bf492 100644
--- a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/InspectCommand.groovy
+++ b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/InspectCommand.groovy
@@ -34,8 +34,10 @@ import org.codehaus.groovy.tools.shell.util.SimpleCompletor
 class InspectCommand
     extends CommandSupport
 {
+    public static final String COMMAND_NAME = ':inspect'
+
     InspectCommand(final Groovysh shell) {
-        super(shell, ':inspect', ':n')
+        super(shell, COMMAND_NAME, ':n')
     }
     
     def lafInitialized = false
diff --git a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/LoadCommand.groovy b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/LoadCommand.groovy
index 9cdc198704..39683a2ef7 100644
--- a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/LoadCommand.groovy
+++ b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/LoadCommand.groovy
@@ -29,8 +29,10 @@ import org.codehaus.groovy.tools.shell.Groovysh
 class LoadCommand
     extends CommandSupport
 {
+    public static final String COMMAND_NAME = ':load'
+
     LoadCommand(final Groovysh shell) {
-        super(shell, ':load', ':l')
+        super(shell, COMMAND_NAME, ':l')
 
         alias('.', ':.')
     }
@@ -43,7 +45,7 @@ class LoadCommand
         assert args != null
         
         if (args.size() == 0) {
-            fail("Command 'load' requires at least one argument") // TODO: i18n
+            fail("Command '$COMMAND_NAME' requires at least one argument") // TODO: i18n
         }
 
         for (source in args) {
diff --git a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/PurgeCommand.groovy b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/PurgeCommand.groovy
index 19f456f2a2..ace0e72fb0 100644
--- a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/PurgeCommand.groovy
+++ b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/PurgeCommand.groovy
@@ -29,8 +29,10 @@ import org.codehaus.groovy.tools.shell.util.Preferences
 class PurgeCommand
     extends ComplexCommandSupport
 {
+    public static final String COMMAND_NAME = ':purge'
+
     PurgeCommand(final Groovysh shell) {
-        super(shell, ':purge', ':p', [ 'variables', 'classes', 'imports', 'preferences', 'all' ])
+        super(shell, COMMAND_NAME, ':p', [ 'variables', 'classes', 'imports', 'preferences', 'all' ])
     }
     
     def do_variables = {
diff --git a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/RecordCommand.groovy b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/RecordCommand.groovy
index 48436f1fd2..d5ff648c1d 100644
--- a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/RecordCommand.groovy
+++ b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/RecordCommand.groovy
@@ -29,8 +29,10 @@ import org.codehaus.groovy.tools.shell.Groovysh
 class RecordCommand
     extends ComplexCommandSupport
 {
+    public static final String COMMAND_NAME = ':record'
+
     RecordCommand(final Groovysh shell) {
-        super(shell, ':record', ':r', [ 'start', 'stop', 'status' ], 'status')
+        super(shell, COMMAND_NAME, ':r', [ 'start', 'stop', 'status' ], 'status')
 
         addShutdownHook {
             if (isRecording()) {
diff --git a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/RegisterCommand.groovy b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/RegisterCommand.groovy
index 7ef9a1a0cc..db92c2dfc0 100644
--- a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/RegisterCommand.groovy
+++ b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/RegisterCommand.groovy
@@ -31,15 +31,17 @@ import org.codehaus.groovy.tools.shell.Command
 class RegisterCommand
     extends CommandSupport
 {
+    public static final String COMMAND_NAME = ':register'
+
     RegisterCommand(final Groovysh shell) {
-        super(shell, ":register", ":rc")
+        super(shell, COMMAND_NAME, ":rc")
     }
 
     public Object execute(List<String> args) {
         assert args != null
 
         if (args.size() < 1) {
-            fail("Command 'register' requires at least 1 arguments") // TODO: i18n
+            fail("Command '$COMMAND_NAME' requires at least 1 arguments") // TODO: i18n
         }
 
         String classname = args.get(0)
diff --git a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/SaveCommand.groovy b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/SaveCommand.groovy
index d47cd1be6a..4ec2c63389 100644
--- a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/SaveCommand.groovy
+++ b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/SaveCommand.groovy
@@ -29,8 +29,10 @@ import org.codehaus.groovy.tools.shell.Groovysh
 class SaveCommand
     extends CommandSupport
 {
+    public static final String COMMAND_NAME = ':save'
+
     SaveCommand(final Groovysh shell) {
-        super(shell, ':save', ':s')
+        super(shell, COMMAND_NAME, ':s')
     }
 
     protected List createCompleters() {
@@ -44,7 +46,7 @@ class SaveCommand
         assert args != null
         
         if (args.size() != 1) {
-            fail("Command 'save' requires a single file argument") // TODO: i18n
+            fail("Command '$COMMAND_NAME' requires a single file argument") // TODO: i18n
         }
 
         if (buffer.isEmpty()) {
diff --git a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/SetCommand.groovy b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/SetCommand.groovy
index 3f667749b9..76a12a0b2a 100644
--- a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/SetCommand.groovy
+++ b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/SetCommand.groovy
@@ -31,8 +31,10 @@ import org.codehaus.groovy.tools.shell.util.Preferences
 class SetCommand
     extends CommandSupport
 {
+    public static final String COMMAND_NAME = ':set'
+
     SetCommand(final Groovysh shell) {
-        super(shell, ':set', ':=')
+        super(shell, COMMAND_NAME, ':=')
     }
 
     protected List createCompleters() {
diff --git a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/ShadowCommand.groovy b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/ShadowCommand.groovy
index 845e50e0b7..cfedcd4030 100644
--- a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/ShadowCommand.groovy
+++ b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/ShadowCommand.groovy
@@ -30,8 +30,10 @@ import org.codehaus.groovy.tools.shell.util.Preferences
 class ShadowCommand
     extends ComplexCommandSupport
 {
+    public static final String COMMAND_NAME = ':shadow'
+
     ShadowCommand(final Groovysh shell) {
-        super(shell, ':shadow', ':&', [ 'debug', 'verbose', 'info', 'this' ])
+        super(shell, COMMAND_NAME, ':&', [ 'debug', 'verbose', 'info', 'this' ])
         
         this.hidden = true
     }
diff --git a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/ShowCommand.groovy b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/ShowCommand.groovy
index 730465e824..ba3e209143 100644
--- a/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/ShowCommand.groovy
+++ b/subprojects/groovy-groovysh/src/main/groovy/org/codehaus/groovy/tools/shell/commands/ShowCommand.groovy
@@ -32,8 +32,10 @@ import org.codehaus.groovy.tools.shell.util.Preferences
 class ShowCommand
     extends ComplexCommandSupport
 {
+    public static final String COMMAND_NAME = ':show'
+
     ShowCommand(final Groovysh shell) {
-        super(shell, ':show', ':S', [ 'variables', 'classes', 'imports', 'preferences', 'all' ])
+        super(shell, COMMAND_NAME, ':S', [ 'variables', 'classes', 'imports', 'preferences', 'all' ])
     }
     
     def do_variables = {
diff --git a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/AllCompletorsTest.groovy b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/AllCompletorsTest.groovy
index 703d1c2274..03fbc1b65a 100644
--- a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/AllCompletorsTest.groovy
+++ b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/AllCompletorsTest.groovy
@@ -18,6 +18,14 @@ package org.codehaus.groovy.tools.shell
 
 import jline.console.completer.Completer
 import jline.console.history.FileHistory
+import org.codehaus.groovy.tools.shell.commands.DocCommand
+import org.codehaus.groovy.tools.shell.commands.EditCommand
+import org.codehaus.groovy.tools.shell.commands.ExitCommand
+import org.codehaus.groovy.tools.shell.commands.HelpCommand
+import org.codehaus.groovy.tools.shell.commands.InspectCommand
+import org.codehaus.groovy.tools.shell.commands.PurgeCommand
+import org.codehaus.groovy.tools.shell.commands.SetCommand
+import org.codehaus.groovy.tools.shell.commands.ShowCommand
 
 
 /**
@@ -94,18 +102,18 @@ class AllCompletorsTest extends GroovyTestCase {
 
     void testEmpty() {
         def result = complete("", 0)
-        assertTrue(':help' in result[0])
-        assertTrue(':exit' in result[0])
+        assertTrue(HelpCommand.COMMAND_NAME in result[0])
+        assertTrue(ExitCommand.COMMAND_NAME in result[0])
         assertTrue('import' in result[0])
-        assertTrue(':show' in result[0])
-        assertTrue(':set' in result[0])
-        assertTrue(':inspect' in result[0])
-        assertTrue(':doc' in result[0])
+        assertTrue(ShowCommand.COMMAND_NAME in result[0])
+        assertTrue(SetCommand.COMMAND_NAME in result[0])
+        assertTrue(InspectCommand.COMMAND_NAME in result[0])
+        assertTrue(DocCommand.COMMAND_NAME in result[0])
         assert 0 == result[1]
     }
 
     void testExitEdit() {
-        assert [[":exit ", ":e", ":edit"], 0] == complete(":e", 0)
+        assert [["${ExitCommand.COMMAND_NAME} ", ":e", EditCommand.COMMAND_NAME], 0] == complete(":e", 0)
     }
 
     void testShow() {
@@ -114,12 +122,12 @@ class AllCompletorsTest extends GroovyTestCase {
     }
 
     void testShowV() {
-        String prompt = ":show v"
+        String prompt = ShowCommand.COMMAND_NAME + " v"
         assert [["variables "], prompt.length() - 1] == complete(prompt, prompt.length())
     }
 
     void testShowVariables() {
-        String prompt = ":show variables "
+        String prompt = ShowCommand.COMMAND_NAME + " variables "
         assertNull(complete(prompt, prompt.length()))
     }
 
@@ -134,7 +142,7 @@ class AllCompletorsTest extends GroovyTestCase {
 
     void testShowVariablesJava() {
         // tests against interaction with ReflectionCompleter
-        String prompt = "show variables java"
+        String prompt = ShowCommand.COMMAND_NAME + " variables java"
         assertNull(complete(prompt, prompt.length()))
     }
 
@@ -147,15 +155,15 @@ class AllCompletorsTest extends GroovyTestCase {
     void testCommandAndKeyword() {
         // tests against interaction with ReflectionCompleter
         String prompt = ":pu" // purge, public
-        assert [[":purge "], 0] == complete(prompt, prompt.length())
+        assert [["${PurgeCommand.COMMAND_NAME} "], 0] == complete(prompt, prompt.length())
     }
 
     void testDoc() {
-        String prompt = ":doc j"
+        String prompt = DocCommand.COMMAND_NAME + " j"
         def result = complete(prompt, prompt.length())
         assert result
         assert prompt.length() - 1 == result[1]
         assertTrue(result.toString() ,"java." in result[0])
     }
 
-}
\ No newline at end of file
+}
diff --git a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/CommandCompletorTest.groovy b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/CommandCompletorTest.groovy
index d767d53a30..fc5da6a049 100644
--- a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/CommandCompletorTest.groovy
+++ b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/CommandCompletorTest.groovy
@@ -16,13 +16,7 @@
 
 package org.codehaus.groovy.tools.shell
 
-import groovy.mock.interceptor.MockFor
-import org.codehaus.groovy.tools.shell.commands.AliasCommand
-import org.codehaus.groovy.tools.shell.commands.ClearCommand
-import org.codehaus.groovy.tools.shell.commands.ImportCommand
-import org.codehaus.groovy.tools.shell.commands.SaveCommand
-import org.codehaus.groovy.tools.shell.commands.SetCommand
-import org.codehaus.groovy.tools.shell.commands.ShowCommand
+import org.codehaus.groovy.tools.shell.commands.*
 import org.codehaus.groovy.tools.shell.util.Preferences
 
 class CommandCompletorTest
@@ -49,10 +43,10 @@ extends CompletorTestSupport {
             completor.refresh()
 
             assert 0 == completor.complete(":a", ":a".length(), candidates)
-            assert [':a', ':alias'] == candidates
+            assert [':a', AliasCommand.COMMAND_NAME] == candidates
             candidates = []
             assert 3 == completor.complete(":a ", ":a ".length(), candidates)
-            assert [':=', ':S', ':set', ':show'] == candidates
+            assert [':=', ':S', SetCommand.COMMAND_NAME, ShowCommand.COMMAND_NAME] == candidates
         }
     }
 
@@ -68,9 +62,10 @@ extends CompletorTestSupport {
             completor.refresh()
 
             assert 0 == completor.complete(":s", ":s".length(), candidates)
-            assert [':set '] == candidates
+            String buffer = SetCommand.COMMAND_NAME + ' '
+            assert [buffer] == candidates
             candidates = []
-            assert 5 == completor.complete(":set ", ":set ".length(), candidates)
+            assert 5 == completor.complete(buffer, buffer.length(), candidates)
         }
         assert Groovysh.AUTOINDENT_PREFERENCE_KEY in candidates
         assert Groovysh.COLORS_PREFERENCE_KEY in candidates
@@ -92,9 +87,10 @@ extends CompletorTestSupport {
             completor.refresh()
 
             assert 0 == completor.complete(":s", ":s".length(), candidates)
-            assert [':s', ':save'] == candidates
+            assert [':s', SaveCommand.COMMAND_NAME] == candidates
             candidates = []
-            assert 6 == completor.complete(":save ", ":save ".length(), candidates)
+            String buffer = SaveCommand.COMMAND_NAME + ' '
+            assert 6 == completor.complete(buffer, buffer.length(), candidates)
             assert candidates.size() > 0 // completes filenames from testing dir
         }
     }
@@ -108,7 +104,7 @@ extends CompletorTestSupport {
             completor.refresh()
 
             assert 0 == completor.complete(":c", ":c".length(), candidates)
-            assert [':c', ':clear'] == candidates
+            assert [':c', ClearCommand.COMMAND_NAME] == candidates
             candidates = []
             assert -1 == completor.complete(":c ", ":c ".length(), candidates)
             assert [] == candidates
@@ -132,9 +128,10 @@ extends CompletorTestSupport {
             completor.refresh()
 
             assert 0 == completor.complete(":s", ":s".length(), candidates)
-            assert [':s', ':save', ':set ', ':show '] == candidates
+            assert [':s', SaveCommand.COMMAND_NAME, SetCommand.COMMAND_NAME + ' ', ShowCommand.COMMAND_NAME + ' '] == candidates
             candidates = []
-            assert 6 == completor.complete(":save ", ":save ".length(), candidates)
+            String buffer = SaveCommand.COMMAND_NAME + ' '
+            assert 6 == completor.complete(buffer, buffer.length(), candidates)
             assert ! candidates.contains('all')
             candidates = []
             assert 3 == completor.complete(":s ", ":s ".length(), candidates)
@@ -143,4 +140,4 @@ extends CompletorTestSupport {
         }
 
     }
-}
\ No newline at end of file
+}
diff --git a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/GroovyshTest.groovy b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/GroovyshTest.groovy
index 571e8c535b..d776166c71 100644
--- a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/GroovyshTest.groovy
+++ b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/GroovyshTest.groovy
@@ -223,7 +223,28 @@ class GroovyshTest extends GroovyTestCase {
         groovysh.buffers.buffers.add(["Foo {{"])
         groovysh.buffers.select(2)
         assert " " * groovysh.indentSize * 2 == groovysh.getIndentPrefix()
+    }
+
+    void testLoadUserScript() {
+        final File file = createTemporaryGroovyScriptFile('1 / 0')
+        Groovysh groovysh = new Groovysh(testio) {
+            @Override
+            File getUserStateDirectory() {
+                return file.getParentFile()
+            }
+        }
+        try {
+            groovysh.loadUserScript(file.getName())
+            fail('Expected ArithmeticException')
+        } catch (ArithmeticException e) {}
+    }
 
+    File createTemporaryGroovyScriptFile(content) {
+        String testName = "GroovyshTest" + System.currentTimeMillis()
+        File groovyCode = new File(System.getProperty("java.io.tmpdir"), testName)
+        groovyCode.write(content)
+        groovyCode.deleteOnExit()
+        return groovyCode
     }
 }
 
diff --git a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/AliasCommandTest.groovy b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/AliasCommandTest.groovy
index d686666885..db588cf8f4 100644
--- a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/AliasCommandTest.groovy
+++ b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/AliasCommandTest.groovy
@@ -25,8 +25,8 @@ class AliasCommandTest
     extends CommandTestSupport
 {
     void testAlias() {
-        shell.execute(':alias')
-        shell.execute(':alias foo bar')
-        shell.execute(':alias history foo') // cannot rebind
+        shell.execute(AliasCommand.COMMAND_NAME)
+        shell.execute(AliasCommand.COMMAND_NAME + ' foo bar')
+        shell.execute(AliasCommand.COMMAND_NAME + ' history foo') // cannot rebind
     }
 }
diff --git a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/ClearCommandTest.groovy b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/ClearCommandTest.groovy
index 68ee841705..0c68d56aab 100644
--- a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/ClearCommandTest.groovy
+++ b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/ClearCommandTest.groovy
@@ -25,10 +25,10 @@ class ClearCommandTest
     extends CommandTestSupport
 {
     void testClear() {
-        shell << ':clear'
+        shell.execute(ClearCommand.COMMAND_NAME)
     }
 
     void testClearWithArgs() {
-        shell << ':clear foo'
+        shell.execute(ClearCommand.COMMAND_NAME + ' foo')
     }
-}
\ No newline at end of file
+}
diff --git a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/DisplayCommandTest.groovy b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/DisplayCommandTest.groovy
index 1b61b04295..38caf095b0 100644
--- a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/DisplayCommandTest.groovy
+++ b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/DisplayCommandTest.groovy
@@ -25,10 +25,10 @@ class DisplayCommandTest
     extends CommandTestSupport
 {
     void testDisplay() {
-        shell << ':display'
+        shell.execute(DisplayCommand.COMMAND_NAME)
     }
 
     void testDisplayWithArgs() {
-        shell << ':display foo'
+        shell.execute(DisplayCommand.COMMAND_NAME + ' foo')
     }
-}
\ No newline at end of file
+}
diff --git a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/ExitCommandTest.groovy b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/ExitCommandTest.groovy
index c98a91faf4..bec2d54136 100644
--- a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/ExitCommandTest.groovy
+++ b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/ExitCommandTest.groovy
@@ -28,7 +28,7 @@ class ExitCommandTest
 {
     void testWithNoArgs() {
         try {
-            shell << ':exit'
+            shell.execute(ExitCommand.COMMAND_NAME)
             fail()
         }
         catch (ExitNotification e) {
diff --git a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/HelpCommandTest.groovy b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/HelpCommandTest.groovy
index 875d68ebf4..230e97f0c5 100644
--- a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/HelpCommandTest.groovy
+++ b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/HelpCommandTest.groovy
@@ -25,14 +25,14 @@ class HelpCommandTest
     extends CommandTestSupport
 {
     void testList() {
-        shell << ':help'
+        shell.execute(HelpCommand.COMMAND_NAME)
     }
     
     void testCommandHelp() {
-        shell << ':help exit'
+        shell.execute(HelpCommand.COMMAND_NAME + ' exit')
     }
     
     void testCommandHelpInvalidCommand() {
-        shell << ':help no-such-command'
+        shell.execute(HelpCommand.COMMAND_NAME + ' no-such-command')
     }
 }
diff --git a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/HistoryCommandTest.groovy b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/HistoryCommandTest.groovy
index a8cf94c9f5..7e5c6b8b5e 100644
--- a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/HistoryCommandTest.groovy
+++ b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/HistoryCommandTest.groovy
@@ -28,11 +28,11 @@ import org.codehaus.groovy.tools.shell.Groovysh
 class HistoryCommandTest extends CommandTestSupport
 {
     void testHistory() {
-        shell << ':history nocommandhere'
+        shell.execute(HistoryCommand.COMMAND_NAME + ' nocommandhere')
     }
 
     void testHistoryNoArg() {
-        shell << ':history'
+        shell.execute(HistoryCommand.COMMAND_NAME)
     }
 }
 
@@ -137,4 +137,4 @@ class HistoryCommandIntegrationTest extends CompletorTestSupport
         }
     }
 
-}
\ No newline at end of file
+}
diff --git a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/InspectCommandTest.groovy b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/InspectCommandTest.groovy
index d46949330c..ef4332d27f 100644
--- a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/InspectCommandTest.groovy
+++ b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/InspectCommandTest.groovy
@@ -25,6 +25,6 @@ class InspectCommandTest
     extends CommandTestSupport
 {
     void testInspect() {
-        shell << ':inspect'
+        shell.execute(InspectCommand.COMMAND_NAME)
     }
 }
diff --git a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/LoadCommandTest.groovy b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/LoadCommandTest.groovy
index f16fff748e..7b2979ef46 100644
--- a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/LoadCommandTest.groovy
+++ b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/LoadCommandTest.groovy
@@ -25,6 +25,6 @@ class LoadCommandTest
     extends CommandTestSupport
 {
     void testLoad() {
-        shell << ':load'
+        shell.execute(LoadCommand.COMMAND_NAME)
     }
 }
diff --git a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/PurgeCommandTest.groovy b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/PurgeCommandTest.groovy
index db2f7d5edd..ad5755241b 100644
--- a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/PurgeCommandTest.groovy
+++ b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/PurgeCommandTest.groovy
@@ -25,22 +25,22 @@ class PurgeCommandTest
     extends CommandTestSupport
 {
     void testPurgeVariables() {
-        shell << ':purge variables'
+        shell.execute(PurgeCommand.COMMAND_NAME + ' variables')
     }
 
     void testPurgeClasses() {
-        shell << ':purge classes'
+        shell.execute(PurgeCommand.COMMAND_NAME + ' classes')
     }
 
     void testPurgeImports() {
-        shell << ':purge imports'
+        shell.execute(PurgeCommand.COMMAND_NAME + ' imports')
     }
 
     void testPurgePreferences() {
-        shell << ':purge preferences'
+        shell.execute(PurgeCommand.COMMAND_NAME + ' preferences')
     }
 
     void testPurgeAll() {
-        shell << ':purge all'
+        shell.execute(PurgeCommand.COMMAND_NAME + ' all')
     }
-}
\ No newline at end of file
+}
diff --git a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/RecordCommandTest.groovy b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/RecordCommandTest.groovy
index 2147c0c71c..1b0b0744db 100644
--- a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/RecordCommandTest.groovy
+++ b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/RecordCommandTest.groovy
@@ -27,15 +27,15 @@ class RecordCommandTest
     extends CommandTestSupport
 {
     void testStopNotStarted() {
-        shell << ':record stop'
+        shell.execute(RecordCommand.COMMAND_NAME + ' stop')
     }
 
     void testStartAlreadyStarted() {
-        shell << ':record start'
+        shell.execute(RecordCommand.COMMAND_NAME + ' start')
 
-        shell << ':record start'
+        shell.execute(RecordCommand.COMMAND_NAME + ' start')
 
-        File file = shell << ':record stop'
+        File file = shell.execute(RecordCommand.COMMAND_NAME + ' stop')
 
         file.delete()
     }
@@ -45,10 +45,10 @@ class RecordCommandTest
 
         try {
             // too many args
-            command.do_start([1, 2, 3])
+            command.do_start(['1', '2', '3'])
             fail()
         } catch (CommandException e) {
             // pass
         }
     }
-}
\ No newline at end of file
+}
diff --git a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/RegisterCommandTest.groovy b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/RegisterCommandTest.groovy
index ab769a4810..e4243cdb9c 100644
--- a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/RegisterCommandTest.groovy
+++ b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/RegisterCommandTest.groovy
@@ -28,21 +28,21 @@ class RegisterCommandTest
     extends CommandTestSupport
 {
     void testRegister() {
-        shell << ':register org.codehaus.groovy.tools.shell.commands.EchoCommand'
+        shell.execute(RegisterCommand.COMMAND_NAME + ' org.codehaus.groovy.tools.shell.commands.EchoCommand')
     }
 
     void testRegisterDupes() {
-        shell << ':register org.codehaus.groovy.tools.shell.commands.EchoCommand'
-        shell << ':register org.codehaus.groovy.tools.shell.commands.EchoCommand echo2 \\e2'
+        shell.execute(RegisterCommand.COMMAND_NAME + ' org.codehaus.groovy.tools.shell.commands.EchoCommand')
+        shell.execute(RegisterCommand.COMMAND_NAME + ' org.codehaus.groovy.tools.shell.commands.EchoCommand echo2 \\e2')
     }
 
     void testRegisterDupesFail() {
-        shell << ':register org.codehaus.groovy.tools.shell.commands.EchoCommand'
-        shell << ':register org.codehaus.groovy.tools.shell.commands.EchoCommand'
+        shell.execute(RegisterCommand.COMMAND_NAME + ' org.codehaus.groovy.tools.shell.commands.EchoCommand')
+        shell.execute(RegisterCommand.COMMAND_NAME + ' org.codehaus.groovy.tools.shell.commands.EchoCommand')
     }
 
     void testRegisterFail() {
-            shell << ':register'
+            shell.execute(RegisterCommand.COMMAND_NAME)
         }
 }
 
diff --git a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/SaveCommandTest.groovy b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/SaveCommandTest.groovy
index 6f17b2582f..7dc1d7dcb2 100644
--- a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/SaveCommandTest.groovy
+++ b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/SaveCommandTest.groovy
@@ -25,7 +25,6 @@ class SaveCommandTest
     extends CommandTestSupport
 {
     void testSave() {
-        shell << ':save'
-
+        shell.execute(SaveCommand.COMMAND_NAME)
     }
 }
diff --git a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/SetCommandTest.groovy b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/SetCommandTest.groovy
index 0c6fd0b1bf..f3925ab21e 100644
--- a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/SetCommandTest.groovy
+++ b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/SetCommandTest.groovy
@@ -30,7 +30,7 @@ class SetCommandTest
     extends CommandTestSupport
 {
     void testSet() {
-        shell << ':set'
+        shell.execute(SetCommand.COMMAND_NAME)
     }
 
     void testComplete() {
diff --git a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/ShowCommandTest.groovy b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/ShowCommandTest.groovy
index 281a7473ac..824e94ae22 100644
--- a/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/ShowCommandTest.groovy
+++ b/subprojects/groovy-groovysh/src/test/groovy/org/codehaus/groovy/tools/shell/commands/ShowCommandTest.groovy
@@ -25,6 +25,6 @@ class ShowCommandTest
     extends CommandTestSupport
 {
     void testShow() {
-        shell << ':show nocommandhere'
+        shell.execute(ShowCommand.COMMAND_NAME + ' nocommandhere')
     }
 }
