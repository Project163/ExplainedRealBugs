diff --git a/src/main/org/codehaus/groovy/classgen/asm/OperandStack.java b/src/main/org/codehaus/groovy/classgen/asm/OperandStack.java
index 8b9aee9d1a..b77b2aaa8c 100644
--- a/src/main/org/codehaus/groovy/classgen/asm/OperandStack.java
+++ b/src/main/org/codehaus/groovy/classgen/asm/OperandStack.java
@@ -131,18 +131,31 @@ public class OperandStack {
      * type needs to be a primitive type (not checked) 
      */
     private void primitive2b(MethodVisitor mv, ClassNode type) {
+        Label trueLabel = new Label();
+        Label falseLabel = new Label();
+        // for the various types we make first a 
+        // kind of conversion to int using a compare
+        // operation and then handle the result common
+        // for all cases. In case of long that is LCMP,
+        // for int nothing is to be done
         if (type==ClassHelper.double_TYPE) {
-            mv.visitInsn(D2I);
-            mv.visitInsn(I2B);
+            mv.visitInsn(DCONST_0);
+            mv.visitInsn(DCMPL);
         } else if (type==ClassHelper.long_TYPE) {
-            mv.visitInsn(L2I);
-            mv.visitInsn(I2B);
+            mv.visitInsn(LCONST_0);
+            mv.visitInsn(LCMP);
         } else if (type==ClassHelper.float_TYPE) {
-            mv.visitInsn(F2I);
-            mv.visitInsn(I2B);
+            mv.visitInsn(FCONST_0);
+            mv.visitInsn(FCMPL);
         } else if (type==ClassHelper.int_TYPE) {
-            mv.visitInsn(I2B);
-        } 
+            // nothing, see comment above
+        }
+        mv.visitJumpInsn(IFEQ, falseLabel);
+        mv.visitInsn(ICONST_1);
+        mv.visitJumpInsn(GOTO, trueLabel);
+        mv.visitLabel(falseLabel);
+        mv.visitInsn(ICONST_0);
+        mv.visitLabel(trueLabel);
         // other cases can be used directly
     }
     
diff --git a/src/test/gls/types/BooleanExpressionConversionTest.groovy b/src/test/gls/types/BooleanExpressionConversionTest.groovy
new file mode 100644
index 0000000000..01aa2e292d
--- /dev/null
+++ b/src/test/gls/types/BooleanExpressionConversionTest.groovy
@@ -0,0 +1,88 @@
+package gls.types
+
+public class BooleanExpressionConversionTest extends gls.CompilableTestSupport {
+    void testInt() {
+        assertScript """
+            boolean foo(int i){
+                if (i) return true
+                return false
+            }
+            assert !foo(0)
+            assert foo(1)
+            assert foo(256)
+        """
+    }
+    
+    void testLong() {
+        assertScript """
+            boolean foo(long i){
+                if (i) return true
+                return false
+            }
+            assert !foo(0)
+            assert foo(1)
+            assert foo(256)
+        """
+    }
+    
+    void testFloat() {
+        assertScript """
+            boolean foo(float i){
+                if (i) return true
+                return false
+            }
+            assert !foo(0)
+            assert foo(1)
+            assert foo(256)
+        """
+    }
+    
+    void testDouble() {
+        assertScript """
+            boolean foo(double i){
+                if (i) return true
+                return false
+            }
+            assert !foo(0)
+            assert foo(1)
+            assert foo(256)
+        """
+    }
+    
+    void testChar() {
+        assertScript """
+            boolean foo(char i){
+                if (i) return true
+                return false
+            }
+            assert !foo((char)0)
+            assert foo((char)1)
+            assert foo((char)256)
+        """
+    }
+    
+    void testByte() {
+        assertScript """
+            boolean foo(byte i){
+                if (i) return true
+                return false
+            }
+            assert !foo((byte)0)
+            assert foo((byte)1)
+            assert !foo((byte)256)
+        """
+    }
+    
+    void testShort() {
+        assertScript """
+            boolean foo(short i){
+                if (i) return true
+                return false
+            }
+            assert !foo((short)0)
+            assert foo((short)1)
+            assert foo((short)256)
+        """
+    }
+    
+}
\ No newline at end of file
