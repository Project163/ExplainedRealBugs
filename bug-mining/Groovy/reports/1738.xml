<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:25:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-4841] Null BigDecimals converted to String with add operator</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-4841</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Using the add operator on null BigDecimal objects concatenates them as Strings&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  @Test
  void testNullBigDecimalAddOperator() {
    BigDecimal a = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
    BigDecimal b = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; == a+b
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Assertion failed: 

assert null == a+b
            |  |||
            |  ||null
            |  |nullnull
            |  null
            false
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I would expect a NullPointer would be thrown as the divide operator behaves. &lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  @Test(expected=NullPointerException)
  void testNullBigDecimalDivOperator() {
    BigDecimal a = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
    BigDecimal b = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; == a/b
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.NullPointerException: Cannot invoke method div() on null object
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12815699">GROOVY-4841</key>
            <summary>Null BigDecimals converted to String with add operator</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blackdrag">Jochen Theodorou</assignee>
                                    <reporter username="mcantrell">Mike Cantrell</reporter>
                        <labels>
                            <label>breaking</label>
                    </labels>
                <created>Tue, 24 May 2011 15:15:30 +0000</created>
                <updated>Tue, 7 Feb 2012 06:32:23 +0000</updated>
                            <resolved>Tue, 7 Feb 2012 06:32:22 +0000</resolved>
                                    <version>1.7.10</version>
                                    <fixVersion>2.0-beta-3</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14471274" author="blackdrag" created="Tue, 24 May 2011 15:24:15 +0000"  >&lt;p&gt;at the time of invocation of the plus method it does not matter what type you statically declared for the types. We always take the runtime types and since null has none really, we take NullObject instead. So this issue is not about BigDecimal#plus, but about NullObject#plus. This method now basically does: &quot;null&quot;+b leading to the &quot;nullnull&quot; you have observed.&lt;br/&gt;
We can of course do a special case for null+null, but you actually want a NPE for the cases of any of the operands null, or not? That would break code.&lt;br/&gt;
So I kind of tend to close this issue as &quot;Won&apos;t Fix&quot;.&lt;/p&gt;</comment>
                            <comment id="14471226" author="mcantrell" created="Tue, 24 May 2011 17:24:41 +0000"  >&lt;p&gt;I think you&apos;re correct. A NPE probably wouldn&apos;t be the best option. I still think that the conversion to a string is problematic. Maybe null + null = null would be better?&lt;/p&gt;</comment>
                            <comment id="14471320" author="mcantrell" created="Tue, 24 May 2011 20:45:26 +0000"  >&lt;p&gt;I think a better testcase would be &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  @Test
  void testNullBigDecimalAddOperator() {
    BigDecimal a = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
    BigDecimal b = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
    BigDecimal c = a+b
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;panelContent&quot;&gt;
&lt;p&gt;GroovyCastException: Cannot cast object &apos;nullnull&apos; with class &apos;java.lang.String&apos; to class &apos;java.math.BigDecimal&apos;&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14472097" author="dirkw" created="Wed, 9 Nov 2011 15:41:17 +0000"  >&lt;p&gt;I&apos;ve added a bugfix and opened a pull-request in github. The solution will extend the plus-method of NullObject: if another NullObject has been passed, a null-reference will be returned. Also added the test of Mike Cantrell to NullObjectTest.&lt;/p&gt;</comment>
                            <comment id="14472367" author="blackdrag" created="Tue, 31 Jan 2012 09:29:42 +0000"  >&lt;p&gt;I have been thinking about this one for a while and I think we should go a different way. Why is there a plus(String) method? It is there because we want null+&quot;X&quot; return something for us useful. But since it is the only plus method it will be called even if that null value is supposed to be a BigDecimal. This is surely not what we want. The alternative solution would be to provide a plus(Object) method, which then for example throws an NullPointerException. Then Mike&apos;s example would cause a NPE instead of producing a strange String. It would also cause a+b not to work anymore if both are supposed to be String. But maybe that is not too bad.&lt;/p&gt;</comment>
                            <comment id="14472339" author="blackdrag" created="Mon, 6 Feb 2012 03:31:30 +0000"  >&lt;p&gt;since the nature of the change I am going to do has a potential to break 1.8 code I will do this fix for 2.0 only.&lt;/p&gt;</comment>
                            <comment id="14472443" author="blackdrag" created="Tue, 7 Feb 2012 06:32:23 +0000"  >&lt;p&gt;I implemented it that way now&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 42 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2cn2f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>