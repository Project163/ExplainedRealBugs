<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:11:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-3175] Some generated fields not marked as synthetic</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-3175</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Some generated fields that should be marked as synthetic are not.&lt;/p&gt;

&lt;p&gt;Given:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MyService {
   def thing
   def something() { }
   def anotherSomething() { &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We see:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;MyService.getDeclaredFields().grep {  it.synthetic }
==&amp;gt;
[&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; MyService.$ownClass, &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; MyService.$&lt;span class=&quot;code-keyword&quot;&gt;class$&lt;/span&gt;java$lang$&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;, 
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; MyService.$&lt;span class=&quot;code-keyword&quot;&gt;class$&lt;/span&gt;groovy$lang$MetaClass, 
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; MyService.$&lt;span class=&quot;code-keyword&quot;&gt;class$&lt;/span&gt;MyService, &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; java.lang.ref.SoftReference MyService.$callSiteArray]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;MyService.getDeclaredFields().grep {  !it.synthetic }
==&amp;gt;
[&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; MyService.thing, &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; org.codehaus.groovy.reflection.ClassInfo MyService.$staticClassInfo, 
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;transient&lt;/span&gt; groovy.lang.MetaClass MyService.metaClass, &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; java.lang.&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt; MyService.__timeStamp, 
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; java.lang.&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt; MyService.__timeStamp__239_neverHappen1227930452630]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The only non-synthetic field should be MyService.thing, the rest are synthetic.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12814461">GROOVY-3175</key>
            <summary>Some generated fields not marked as synthetic</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blackdrag">Jochen Theodorou</assignee>
                                    <reporter username="jimwhite">James P. White</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Nov 2008 21:57:56 +0000</created>
                <updated>Tue, 6 Jan 2009 12:56:46 +0000</updated>
                            <resolved>Mon, 5 Jan 2009 09:11:13 +0000</resolved>
                                    <version>1.6-beta-1</version>
                    <version>1.6-beta-2</version>
                                    <fixVersion>1.6-rc-2</fixVersion>
                    <fixVersion>1.7-beta-1</fixVersion>
                                    <component>bytecode</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14466131" author="blackdrag" created="Mon, 5 Jan 2009 09:11:13 +0000"  >&lt;p&gt;on further investigation I found, that the property field needs to be synthetic or else the compiler won&apos;t be able to replace the filed in case the user gives an additional field. If the synthetic flag is not set the compiler is unable to see if the existing field is given by the user or not. As a result the test above will now return no fields that are not synthetic&lt;/p&gt;</comment>
                            <comment id="14466099" author="jimwhite" created="Tue, 6 Jan 2009 01:32:31 +0000"  >&lt;p&gt;Good. I thought the field should be synthetic (it is a JavaBean property by virtue of the getter/setter which is what the user defines with the def, and so the field is internal implementation) but the groovy-dev discussion said otherwise.&lt;/p&gt;

&lt;p&gt;Problem now though is that the build is broken for retro, even with your workaround attempt.  I tried all kinds of things trying to make it work, but I suspect a bug somewhere.&lt;/p&gt;</comment>
                            <comment id="14466197" author="blackdrag" created="Tue, 6 Jan 2009 10:39:52 +0000"  >&lt;p&gt;well, I think the flag is not set pre java5. So even if I know the value, I cannot ask for it, because the JVM does not fill that flag in for Field.getModifiers(). The only solution seems to be to move the test into a vm5 package.&lt;/p&gt;</comment>
                            <comment id="14466158" author="jimwhite" created="Tue, 6 Jan 2009 11:53:42 +0000"  >&lt;p&gt;Synthetic has has been a modifier since JDK 1.1:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://java.sun.com/docs/books/jvms/second_edition/html/ClassFile.doc.html#88570&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://java.sun.com/docs/books/jvms/second_edition/html/ClassFile.doc.html#88570&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The &lt;tt&gt;Member.isSynthetic&lt;/tt&gt; method is JDK 1.5, which your change to testing for the bit would resolve.&lt;/p&gt;

&lt;p&gt;The problem is that we get this error for {{...getDeclaredMethods().grep &lt;/p&gt;
{ ...}
&lt;p&gt;}}:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://bamboo.ci.codehaus.org/build/viewBuildResultsFailedTests.action?buildKey=GROOVY-CORE14&amp;amp;buildNumber=1800&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bamboo.ci.codehaus.org/build/viewBuildResultsFailedTests.action?buildKey=GROOVY-CORE14&amp;amp;buildNumber=1800&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I tried all kinds of changes to the code (using &lt;tt&gt;findAll&lt;/tt&gt;, converting to List, not using &lt;tt&gt;assertScript&lt;/tt&gt;...) and always get that &quot;&amp;lt;not implemented yet...&quot; error.&lt;/p&gt;

&lt;p&gt;I did most of adding a &lt;tt&gt;vm5&lt;/tt&gt; for the test case, but then it would become the only vm5 &lt;tt&gt;UberTestCaseBugs&lt;/tt&gt;.  I think there is some sort of compiler bug or something like that rather than an issue with the test case itself.&lt;/p&gt;
</comment>
                            <comment id="14466229" author="blackdrag" created="Tue, 6 Jan 2009 12:18:05 +0000"  >&lt;p&gt;sure, synthetic exists since early times in java as modifier in the bytecode. But that does not mean that modifier is accessible through the reflection API. You will find that isSythetic() is not part of the API before 1.5, so it is very legal for a VM to not to provide the value of that flag. The VM doesn&apos;t need this value anyway.&lt;/p&gt;

&lt;p&gt;That &quot;&amp;lt;not implemented yet...&quot; is not the error, it is part of the error message, that would have to write out how the closure looks like. You can save the value of the left side in a variable and then compare the results, but the assert will still fail, because the synthetic flag is not accessible. As a result the grep/findAll will return too many entries. In other words: with only reflection this can&apos;t work on Java4.&lt;/p&gt;

&lt;p&gt;I am very sure there is no compiler bug with this test&lt;/p&gt;</comment>
                            <comment id="14466249" author="jimwhite" created="Tue, 6 Jan 2009 12:56:46 +0000"  >&lt;p&gt;You&apos;re right.  Reflection on JDK 1.4 does not set the synthetic modifier.&lt;/p&gt;

&lt;p&gt;Test case disabled when JDK &amp;lt; 1.5.&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 47 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2cl6v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>