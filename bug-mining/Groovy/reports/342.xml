<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:59:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-1945] getting character encoding from command line is failed</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-1945</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;I wrote a groovy script like,&lt;/p&gt;

&lt;p&gt;----HelloUtf8.groovy (saved with UTF8)&lt;br/&gt;
println &quot;&amp;#12371;&amp;#12435;&amp;#12395;&amp;#12385;&amp;#12399;&quot;;&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;then, executed this and it resulted like,&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;$ groovy -c UTF8 HelloUtf8.groovy&lt;br/&gt;
Caught: BUG! exception in phase &apos;parsing&apos; in source unit &apos;HelloUtf8.groovy&apos; char&lt;br/&gt;
setName&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;so, I checked &quot;GROOVY_1_0/src/main/groovy/ui/GroovyMain.java&quot;&lt;br/&gt;
 where getting encoding from command line.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;@@ -241,7 +244,9 @@&lt;/p&gt;

&lt;p&gt;         // add the ability to parse scripts with a specified encoding&lt;br/&gt;
         if (line.hasOption(&apos;c&apos;)) &lt;/p&gt;
{
-            main.conf.setSourceEncoding(line.getOptionValue(&quot;encoding&quot;));
+            main.conf.setSourceEncoding(line.getOptionValue(&apos;c&apos;));
+            System.out.println(&quot;GroovyMain:encoding:&quot; +
+                main.conf.getSourceEncoding());
         }
&lt;hr /&gt;
&lt;p&gt;It&apos;s found that &apos;main.conf.setSourceEncoding(line.getOptionValue(&quot;encoding&quot;))&apos; returned null, &lt;br/&gt;
and &apos;main.conf.setSourceEncoding(line.getOptionValue(&apos;c&apos;))&apos; returned &quot;UTF-8&quot;.&lt;/p&gt;
</description>
                <environment>$ uname -a&lt;br/&gt;
CYGWIN_NT-6.0 hrk-PC 1.5.24(0.156/4/2) 2007-01-31 10:57 i686 Cygwin&lt;br/&gt;
java version &amp;quot;1.5.0_11&amp;quot;&lt;br/&gt;
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_11-b03)&lt;br/&gt;
Java HotSpot(TM) Client VM (build 1.5.0_11-b03, mixed mode, sharing)</environment>
        <key id="12813690">GROOVY-1945</key>
            <summary>getting character encoding from command line is failed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blackdrag">Jochen Theodorou</assignee>
                                    <reporter username="hrktir">Hiroki Taira</reporter>
                        <labels>
                    </labels>
                <created>Sun, 17 Jun 2007 01:50:33 +0000</created>
                <updated>Sun, 1 Jul 2007 08:12:02 +0000</updated>
                            <resolved>Sun, 1 Jul 2007 08:12:02 +0000</resolved>
                                    <version>1.0</version>
                                    <fixVersion>1.1-beta-2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14462880" author="hrktir" created="Sun, 17 Jun 2007 02:00:02 +0000"  >&lt;p&gt;sorry. following statements are not collect.&lt;/p&gt;

&lt;p&gt;It&apos;s found that &apos;main.conf.setSourceEncoding(line.getOptionValue(&quot;encoding&quot;))&apos; returned null, &lt;br/&gt;
and &apos;main.conf.setSourceEncoding(line.getOptionValue(&apos;c&apos;))&apos; returned &quot;UTF-8&quot;.&lt;/p&gt;

&lt;p&gt;they have to be fixed ,&lt;/p&gt;

&lt;p&gt;It was found that &apos;line.getOptionValue(&quot;encoding&quot;)&apos; returned null, &lt;br/&gt;
and &apos;line.getOptionValue(&apos;c&apos;)&apos; returned &quot;UTF-8&quot;.&lt;/p&gt;</comment>
                            <comment id="14462871" author="blackdrag" created="Sun, 1 Jul 2007 08:12:02 +0000"  >&lt;p&gt;should be fixed now... I had strange problem with the encoding options... on linux --encoding=UTF8 was correctly recognized, on windows groovy thought I wanted to open a file named UTF8. But this seems not to be a bug in Groovy, but in commons-cli. &lt;/p&gt;

&lt;p&gt;Anyway I got it working by doing the following: &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;I set the file.encoding property to UTF8&lt;/li&gt;
	&lt;li&gt;I started groovy with &apos;groovy --encoding=UTF8 HelloUtf8.groovy &amp;gt; out.txt&apos;&lt;/li&gt;
	&lt;li&gt;I used Firefox to view out.txt and set the encoding to UTF8 to verify the characters there look like these in HelloUtf8.groovy&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;If you wonder why I do it that complicated... it is really like hell telling windows to use UTF8 correctly on the console. In the end I gave up, because I found no font displaying japanese characters. I have one for chinese using the encoding gb2312, but that&apos;s no of much help here. It was much more easy using Firefox. &lt;/p&gt;

&lt;p&gt;So I mark it as fixed for now&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12721308" name="HelloUtf8.groovy" size="27" author="hrktir" created="Sun, 17 Jun 2007 01:50:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 22 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2c35r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>