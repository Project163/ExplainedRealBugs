<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:16:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-4285] XmlUtil.serialize doesn&apos;t seem to pick right method for GPathResult</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-4285</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;The following gives an error:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.xml.XmlUtil
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.xml.StreamingMarkupBuilder

def xmlStr = &lt;span class=&quot;code-quote&quot;&gt;&quot;&quot;&quot;&amp;lt;?xml version=&quot;&lt;/span&gt;1.0&lt;span class=&quot;code-quote&quot;&gt;&quot; encoding=&quot;&lt;/span&gt;UTF-8&quot;?&amp;gt;
&amp;lt;stuff ver=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt;&amp;gt;
  &amp;lt;properties&amp;gt;
    &amp;lt;foo&amp;gt;bar&amp;lt;/foo&amp;gt;
  &amp;lt;/properties&amp;gt;
&amp;lt;/stuff&amp;gt;&quot;&quot;&quot;

def gpr = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; XmlSlurper().parseText( xmlStr )
println XmlUtil.serialize( gpr )
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Gives the following error:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[Fatal Error] :1:1: Content is not allowed in prolog.
ERROR:  &lt;span class=&quot;code-quote&quot;&gt;&apos;Content is not allowed in prolog.&apos;&lt;/span&gt;
&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;?&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However if we change the println to:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;println XmlUtil.serialize( (groovy.util.slurpersupport.GPathResult)gpr )
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We get the correct output:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;?&amp;gt;
&amp;lt;stuff ver=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt;&amp;gt;
  &amp;lt;properties&amp;gt;
    &amp;lt;foo&amp;gt;bar&amp;lt;/foo&amp;gt;
  &amp;lt;/properties&amp;gt;
&amp;lt;/stuff&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Looks like Groovy is picking the wrong method somewhere... (though I can&apos;t see how)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12815229">GROOVY-4285</key>
            <summary>XmlUtil.serialize doesn&apos;t seem to pick right method for GPathResult</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="roshandawrani">Roshan Dawrani</assignee>
                                    <reporter username="tim_yates">Tim Yates</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 Jul 2010 02:33:39 +0000</created>
                <updated>Thu, 22 Jul 2010 17:32:25 +0000</updated>
                            <resolved>Thu, 1 Jul 2010 08:44:32 +0000</resolved>
                                    <version>1.7.3</version>
                                    <fixVersion>1.7.4</fixVersion>
                    <fixVersion>1.8-beta-1</fixVersion>
                                    <component>groovy-jdk</component>
                    <component>XML Processing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14469753" author="roshandawrani" created="Thu, 1 Jul 2010 05:03:02 +0000"  >&lt;p&gt;The issue is that groovy.util.slurpersupport.Node#writeTo(Writable) does not generate the String form of the nodes correctly.&lt;/p&gt;

&lt;p&gt;Where it should generate &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;stuff ver=&apos;1.0&apos;&amp;gt;&amp;lt;properties&amp;gt;&amp;lt;foo&amp;gt;bar&amp;lt;/foo&amp;gt;&amp;lt;/properties&amp;gt;&amp;lt;/stuff&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;it generates&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;bar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And then with the xml string going simply as &quot;bar&quot;, it throws the &quot;Content is not allowed in prolog.&quot; error correctly.&lt;/p&gt;</comment>
                            <comment id="14469767" author="roshandawrani" created="Thu, 1 Jul 2010 05:16:28 +0000"  >&lt;p&gt;Apart from the issue highlighted in the previous comment, there also seems to be some method selection bug in here.&lt;/p&gt;

&lt;p&gt;Here are 2 snippets that highlight the difference in method selections made by groovy:&lt;br/&gt;
1)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; I {}

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;C &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; I {}

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Methods {
    def foo(I i) {
        println &lt;span class=&quot;code-quote&quot;&gt;&quot;foo(Interface) called&quot;&lt;/span&gt;
    }
    def foo(C i) {
        println &lt;span class=&quot;code-quote&quot;&gt;&quot;foo(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;) called&quot;&lt;/span&gt;
    }
} 

&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Methods().foo(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; C())
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;results in &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;foo(Class) called
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;2) But if I have a slight variant&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; I {}

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;P &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; I {}
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;C &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; P {}

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Methods {
    def foo(I i) {
        println &lt;span class=&quot;code-quote&quot;&gt;&quot;foo(Interface) called&quot;&lt;/span&gt;
    }
    def foo(P p) {
        println &lt;span class=&quot;code-quote&quot;&gt;&quot;foo(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;) called&quot;&lt;/span&gt;
    }
} 

&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Methods().foo(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; C())
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;now the method selection is different and it outputs&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;foo(Interface) called
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Because of this method selection bug, it chooses &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; serialize(Writable writable)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;over&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; serialize(GPathResult writable)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and goes into the buggy method.&lt;/p&gt;</comment>
                            <comment id="14469698" author="roshandawrani" created="Thu, 1 Jul 2010 08:44:32 +0000"  >&lt;p&gt;Discussed the method selection with Jochen and the difference highlighted in comments above is by design and desired in other scenarios. &lt;/p&gt;

&lt;p&gt;So fixed the serialization bit in XMLUtil.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 21 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bv9j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>