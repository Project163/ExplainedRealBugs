<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:13:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-4320] Joint compiler + @Delegate fail to recognize method signature with default value</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-4320</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Spotted this problem when upgrading Griffon to Groovy 1.7.4.&lt;/p&gt;

&lt;p&gt;Start with a base contract defined in java&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.List;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; IApp {
    void event(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name);
    void event(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name, List params);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Implement said contract in Groovy&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;BaseApp &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; IApp {
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; IApp appDelegate
    BaseApp(IApp app) {
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.appDelegate = app
    }
    void event(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name, List params = []) {
        &lt;span class=&quot;code-comment&quot;&gt;// empty
&lt;/span&gt;    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now create a Groovy class where the previous will be used as delegate&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;RealApp {
    @Delegate BaseApp _base
    RealApp() {
        _base = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BaseApp(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;)
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Compile the code&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;groovyc IApp.java BaseApp.groovy RealApp.groovy
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With Groovy 1.7.3 you get the following method signatures&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ javap BaseApp | grep event
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void event(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, java.util.List);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void event(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;);
$ javap RealApp | grep event
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void event(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void event(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, java.util.List);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However 1.7.4 fails to recognize that the second argument to event() has a default value&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ groovy -version
Groovy Version: 1.7.4 JVM: 1.6.0_17
$ groovyc IApp.java BaseApp.groovy RealApp.groovy 
org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:
RealApp.groovy: 1: Can&lt;span class=&quot;code-quote&quot;&gt;&apos;t have an &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; method in a non-&lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; class. The class &apos;&lt;/span&gt;RealApp&lt;span class=&quot;code-quote&quot;&gt;&apos; must be declared &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; or the method &apos;&lt;/span&gt;void event(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;)&apos; must be implemented.
 @ line 1, column 1.
   &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;RealApp {
   ^

1 error
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>MacOSX Snow Leopard, Groovy 1.7.4, Java 1.6.0_17</environment>
        <key id="12811716">GROOVY-4320</key>
            <summary>Joint compiler + @Delegate fail to recognize method signature with default value</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="aalmiray">Andres Almiray</reporter>
                        <labels>
                    </labels>
                <created>Fri, 23 Jul 2010 09:09:04 +0000</created>
                <updated>Tue, 22 Feb 2022 03:12:26 +0000</updated>
                            <resolved>Tue, 18 May 2021 00:42:10 +0000</resolved>
                                    <version>1.7.4</version>
                                    <fixVersion>4.0.0-beta-1</fixVersion>
                    <fixVersion>2.5.16</fixVersion>
                    <fixVersion>3.0.10</fixVersion>
                                    <component>Compiler</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14469852" author="paulk" created="Fri, 23 Jul 2010 17:21:57 +0000"  >&lt;p&gt;related to or overlaps with or duplicates &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-3683&quot; title=&quot;groovyc can&amp;#39;t joint compile a Java class that uses a delegate method from a Groovy class with an @Delegate property annotation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-3683&quot;&gt;GROOVY-3683&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="14469888" author="guillaume" created="Sat, 24 Jul 2010 17:34:47 +0000"  >&lt;p&gt;A patch representing this scenario leveraging the stub generator test infrastructure.&lt;br/&gt;
This adds the 3 sample classes, and exhibits the behaviour encountered by Andres.&lt;/p&gt;

&lt;p&gt;(of course, I&apos;m not committing this, as it would break the build till we fix the issue)&lt;/p&gt;</comment>
                            <comment id="14469808" author="guillaume" created="Sun, 25 Jul 2010 03:09:15 +0000"  >&lt;p&gt;Be careful with the patch, the BaseStubTest class was renamed to StubTestCase, so the patch will have to be updated.&lt;/p&gt;</comment>
                            <comment id="14473473" author="aalmiray" created="Thu, 22 Nov 2012 05:11:48 +0000"  >&lt;p&gt;New error when compiling the code with 2.0.5&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:
RealApp.groovy: -1: The method with &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; parameters &lt;span class=&quot;code-quote&quot;&gt;&quot;void event(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, java.util.List)&quot;&lt;/span&gt; defines a method &lt;span class=&quot;code-quote&quot;&gt;&quot;void event(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;)&quot;&lt;/span&gt; that is already defined.
. At [-1:-1]  @ line -1, column -1.
1 error
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310260">
                    <name>Related</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12811593">GROOVY-3683</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12722445" name="GROOVY-4320.patch" size="3031" author="guillaume" created="Sat, 24 Jul 2010 17:34:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ciof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>