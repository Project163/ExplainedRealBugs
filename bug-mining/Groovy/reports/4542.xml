<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:20:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-7164] @CompileStatic transform gives unexpected result for default constructor</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-7164</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;The following snippet reproduces a type checking error&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.CompileStatic

@CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Test {
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; timestamp
    
    Date getTimestamp() {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; timestamp ? &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Date(timestamp) : &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
    }
    
    void setTimestamp (Date timestamp) {
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.timestamp = timestamp.time
    }
    
    def main() {
        &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Test(timestamp: &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Date())
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:
test.groovy: 16: [Static type checking] - Cannot assign value of type java.util.Date to variable of type long
 @ line 16, column 27.
           new Test(timestamp: new Date())
                             ^

1 error
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is quite unexpected it should use the type of the getter and setter for the validation since they are used later on to assign the value and not the type of the underlying field.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12817909">GROOVY-7164</key>
            <summary>@CompileStatic transform gives unexpected result for default constructor</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="melix">C&#233;dric Champeau</assignee>
                                    <reporter username="damokles">Leonard Br&#252;nings</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Nov 2014 03:56:44 +0000</created>
                <updated>Mon, 19 Oct 2015 16:05:13 +0000</updated>
                            <resolved>Sun, 13 Sep 2015 09:39:44 +0000</resolved>
                                    <version>2.3.7</version>
                    <version>2.4.0-rc-1</version>
                                    <fixVersion>2.4.5</fixVersion>
                                    <component>Static compilation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14703367" author="shils" created="Wed, 19 Aug 2015 17:03:03 +0000"  >&lt;p&gt;In your case I think the behavior is expected since field assignment within the owning class isn&apos;t delegated to a setter. However, the exception you posted also occurs when invoking the constructor from an external class.&lt;/p&gt;

&lt;p&gt;EDIT:&lt;br/&gt;
I was wrong; the default constructor uses setters within the declaring class as well. I&apos;ve updated my pull request accordingly.&lt;/p&gt;</comment>
                            <comment id="14703713" author="githubbot" created="Wed, 19 Aug 2015 20:42:55 +0000"  >&lt;p&gt;GitHub user shils opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/90&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/90&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7164&quot; title=&quot;@CompileStatic transform gives unexpected result for default constructor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7164&quot;&gt;&lt;del&gt;GROOVY-7164&lt;/del&gt;&lt;/a&gt; Check constructor map args on setter parameter type when &#8230;&lt;/p&gt;

&lt;p&gt;    &#8230;outside of declaring class&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/shils/incubator-groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/shils/incubator-groovy&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7164&quot; title=&quot;@CompileStatic transform gives unexpected result for default constructor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7164&quot;&gt;&lt;del&gt;GROOVY-7164&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/90.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/90.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #90&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 2ab8214fbc7323fd79a025502e5afa7fc9ea1e8c&lt;br/&gt;
Author: Shil Sinha &amp;lt;shil.sinha@gmail.com&amp;gt;&lt;br/&gt;
Date:   2015-08-19T20:40:15Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7164&quot; title=&quot;@CompileStatic transform gives unexpected result for default constructor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7164&quot;&gt;&lt;del&gt;GROOVY-7164&lt;/del&gt;&lt;/a&gt; Check constructor map args on setter parameter type when outside of declaring class&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14742423" author="githubbot" created="Sun, 13 Sep 2015 09:39:37 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/90&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/90&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14742424" author="melix" created="Sun, 13 Sep 2015 09:39:44 +0000"  >&lt;p&gt;Thanks for the PR!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 10 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2cd3j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>