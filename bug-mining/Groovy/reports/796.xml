<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:08:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-2746] Static import of method with default parameter value: MissingMethodException</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-2746</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;A static method with a default parameter is not found, when it is imported statically and called without prefixing his class:&lt;/p&gt;

&lt;p&gt;=== test.groovy ===&lt;/p&gt;

&lt;p&gt;import static Settings.*&lt;br/&gt;
import static ConsoleUI.*&lt;/p&gt;

&lt;p&gt;class Settings&lt;br/&gt;
{&lt;br/&gt;
    static void initialize() &lt;/p&gt;
{
        writeln(&quot;working&quot;, 100)
        writeln(&quot;failing&quot;)
    }
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;class ConsoleUI&lt;br/&gt;
{&lt;br/&gt;
    static void writeln(String s, int delay = 0) &lt;/p&gt;
{
        sleep delay
        println s
    }
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;Settings.initialize()&lt;/p&gt;

&lt;p&gt;=== Output ===&lt;/p&gt;

&lt;p&gt;working&lt;br/&gt;
Caught: groovy.lang.MissingMethodException: No signature of method: static Settings.writeln() is applicable for argument types: (java.lang.String) values: &lt;/p&gt;
{&quot;failing&quot;}
&lt;p&gt;	at Settings.initialize(test.groovy:8)&lt;br/&gt;
	at test.run(test.groovy:20)&lt;br/&gt;
	at test.main(test.groovy)&lt;/p&gt;

&lt;p&gt;Exited: 256&lt;/p&gt;</description>
                <environment>Java 1.6, Ubuntu and Windows XP</environment>
        <key id="12814118">GROOVY-2746</key>
            <summary>Static import of method with default parameter value: MissingMethodException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blackdrag">Jochen Theodorou</assignee>
                                    <reporter username="dolvich">Ivan Dolvich</reporter>
                        <labels>
                    </labels>
                <created>Sat, 12 Apr 2008 16:22:44 +0000</created>
                <updated>Mon, 3 Jan 2011 00:36:32 +0000</updated>
                            <resolved>Thu, 27 Nov 2008 11:34:21 +0000</resolved>
                                    <version>1.5.4</version>
                                    <fixVersion>1.6-rc-1</fixVersion>
                    <fixVersion>1.5.8</fixVersion>
                    <fixVersion>1.7-beta-1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14465528" author="roshandawrani" created="Tue, 11 Nov 2008 12:27:49 +0000"  >&lt;p&gt;Hi,&lt;br/&gt;
I am attaching a zip that has patches for all 3 affected groovy versions for this issue.&lt;br/&gt;
The patch has changes to the following 2 files:&lt;/p&gt;

&lt;p&gt;1) src/main/org/codehaus/groovy/ast/ClassNode.java - Its hasPossibleStaticMethod() now handles finding the static methods having parameters with default values. &lt;/p&gt;

&lt;p&gt;2) src/test/groovy/StaticImportTest.groovy - Added a few test cases for this issue.&lt;/p&gt;

&lt;p&gt;Hope it helps.&lt;br/&gt;
Roshan&lt;/p&gt;</comment>
                            <comment id="14465689" author="blackdrag" created="Fri, 21 Nov 2008 06:42:46 +0000"  >&lt;p&gt;say.. if I have foo() and a static foo(x,y=1,z=2){}, then this patch would select the method, because it has default arguments. If that were a precompiled class, then we would have three foo methods, but none of them would be selected, because there is no exact match in the number of parameters and arguments. See ClassNode:1160&lt;/p&gt;

&lt;p&gt;so I think a small modification to the patch is needed&lt;/p&gt;</comment>
                            <comment id="14465706" author="roshandawrani" created="Fri, 21 Nov 2008 10:16:34 +0000"  >&lt;p&gt;I am not sure if I understand your scenario correctly. So, let me confirm:&lt;/p&gt;

&lt;p&gt;So, let&apos;s say, there is the following class ConsoleUI and it is pre-compiled&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ConsoleUI
{
     &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void foo(x, y = 1, z = 2) {}
     /*
      When pre-compiled, 3 foo() are generated in the &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;file:
      1) foo(x, y, z) {}
      2) foo(x, y) { &lt;span class=&quot;code-comment&quot;&gt;/* invokes foo(x, y, 2) */&lt;/span&gt;}
      3) foo(x) { &lt;span class=&quot;code-comment&quot;&gt;/* invokes foo(x, 1, 2) */&lt;/span&gt;}
     */
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and there is another class like &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; ConsoleUI.*
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Settings
{
    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void initialize() { 
           foo(&lt;span class=&quot;code-quote&quot;&gt;&quot;valX&quot;&lt;/span&gt;) &lt;span class=&quot;code-comment&quot;&gt;// goes through and invokes version 3 of foo above
&lt;/span&gt;           foo() &lt;span class=&quot;code-comment&quot;&gt;// is not supposed to go through
&lt;/span&gt;    }
}

Settings.initialize()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So, now what is reported in current bug is that a call like foo(&quot;valX&quot;) does not go through. That goes through with the patch I have supplied. It invokes version 3 of foo() mentioned above. It matches that version of foo.&lt;/p&gt;

&lt;p&gt;You have mentioned a foo() in your comment. If that is what you are expecting to go through, I don&apos;t think that is correct because ConsoleUI.foo() has a parameter &quot;x&quot; without a default value, so that method needs to be called with at least one parameter.&lt;/p&gt;

&lt;p&gt;If I have not understood your comment, please elaborate the scenario and I will be glad to look into it.&lt;/p&gt;

&lt;p&gt;rgds,&lt;br/&gt;
Roshan&lt;/p&gt;</comment>
                            <comment id="14465652" author="blackdrag" created="Fri, 21 Nov 2008 10:58:41 +0000"  >&lt;p&gt;better let us use the example&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;X {
  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; foo(x,y,z=1) {1}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which produces foo(x,y,z) and foo(x,y)&lt;/p&gt;
{foo(x,y,1)}
&lt;p&gt;. If I have now:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; X.*
foo(1,2)
foo(1)
foo()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;then before the your patch none of these foo methods would have worked if X was not precompiled. With your patch each of these methods is linked to X. If X is precompiled, then only foo(1,2) is linked to X, because for the other two we won&apos;t find a method with a matching number of arguments. Your patch does not change anything here, because in a precompiled class there will be no default value. &lt;/p&gt;

&lt;p&gt;That means with your patch foo(1,2) and addiionally foo(1) and foo() will be linked to X if X is not precompiled. If X is prcompiled then it is only foo(1,2). &lt;/p&gt;

&lt;p&gt;This is a mismatch. so right, foo(1) and foo() are not supposed to go throughin the sense, that it will fail with a MissingMethodException. But if X is precompiled, then the exception would report ScriptXY#foo(int) and ScriptXY#foo() could not be found, while if the X is not precompiled it will report X#foo(int) and X#foo(). I think that shouldn&apos;t happen.&lt;/p&gt;

&lt;p&gt;I suggest you remove the number of default parameters from the number of overall parameters and check that the resulting number is lower than count. If parameters.length&amp;gt;count and count&amp;gt;nonDefaultParameters, then it is a match, because there will be a method with the matching number of arguments.&lt;/p&gt;

</comment>
                            <comment id="14465660" author="roshandawrani" created="Fri, 21 Nov 2008 13:17:17 +0000"  >&lt;p&gt;I tested my patch with both pre-compiled and not pre-compiled versions of the X and it seems to be working fine. Have you tested and reported the mismatch in the previous comments or is it a code review kind of comment? If it is a code review kind of comment, you may have misread ( ! ..)  conditions.&lt;/p&gt;

&lt;p&gt;Just to make sure that we are on the same page version-wise - I am first trying to look into your comments with version 1.5.8. Are you also reporting it from the same version?&lt;/p&gt;

&lt;p&gt;Now coming to details of why the patch is working, the check it performs is :-&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (method.isStatic() &amp;amp;&amp;amp; count &amp;lt; method.getParameters().length) {
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; countOfParamsNotPassed = method.getParameters().length - count;
    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; foundAParamWithNoDefualtVal = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
    &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; all arguments that have not been passed have &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; values, it is still a match
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = count; i &amp;lt;= method.getParameters().length - 1; i++) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(!method.getParameters()[i].hasInitialExpression()) foundAParamWithNoDefualtVal = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
    }
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(!foundAParamWithNoDefualtVal) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For the call foo(1), this block sets foundAParamWithNoDefualtVal = true both in case of pre-compiled and not-pre-compiled cases and hence it does not report foo(1) as a match in either case (if foundAParamWithNoDefualtVal is true, it does not return true to report a match).&lt;/p&gt;

&lt;p&gt;For pre-compiled X, is has no initial expression for 2nd parameter and hence foundAParamWithNoDefualtVal = true (pre-compiled classes have no default value/initial expression)&lt;/p&gt;

&lt;p&gt;For not pre-compiled X also, 2nd param has no initial expression (foo(x,y,z=1)) and hence it also sets foundAParamWithNoDefualtVal = true.&lt;/p&gt;

&lt;p&gt;Same explanation applies to foo() also. Also, I didn&apos;t notice any difference in the compiler errors it throws for pre-compiled X and not pre-compiled X.&lt;/p&gt;

&lt;p&gt;rgds,&lt;br/&gt;
Roshan&lt;/p&gt;</comment>
                            <comment id="14465640" author="blackdrag" created="Mon, 24 Nov 2008 05:56:24 +0000"  >&lt;p&gt;Roshan, may I suggest for the future, that you change your code style a little bit to avoid &quot;if (&lt;span class=&quot;error&quot;&gt;Unable to render embedded object: File (&amp;quot;. Because this is at last the second time I did misread the patch... Just remove a bit negation. I mean, your have &amp;quot;foundAParamWithNoDefualtVal&amp;quot; containing a &amp;quot;No&amp;quot;, you have if(!method.getParameters()[i].hasInitialExpression()) containing the &amp;quot;if() not found.&lt;/span&gt;&quot;, that is sometimes hard to read and if(&lt;span class=&quot;error&quot;&gt;Unable to render embedded object: File (foundAParamWithNoDefualtVal) return true;, which is a double problem, because again you have &amp;quot;if() not found.&lt;/span&gt;&quot; and then you simply return a boolean constant value... You could have done for example &quot;return !foundAParamWithNoDefualtVal;&quot; instead, but that still looks like having a strange negation. Then there is another part in your code style that is a bit problematic &quot;i &amp;lt;= method.getParameters().length - 1;&quot; usually that is written as &quot;i &amp;lt; method.getParameters().length ;&quot;&lt;/p&gt;

&lt;p&gt;And yes, it was just from the review, not from actually trying it out... and I looked at 1.7 only. Ok, let me review that again....&lt;/p&gt;

&lt;p&gt;I did also overlook that we start with i=count and not i=0... sigh... ok, then let me show you this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Y {
  def foo(x=100,y,z) {x+y+z}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; Y.*
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; foo(10,1) == 111
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;this code will still produce two methods, but this time it is not the last parameter that has a default, but the first parameter. If I did read your patch right this time, then you skip the first two parameters and so you will never know that there is a default value. Instead you will skip x and also y, because count is 2 and then check only z, which has no default value. So for this case your code won&apos;t work.&lt;/p&gt;</comment>
                            <comment id="14465723" author="roshandawrani" created="Mon, 24 Nov 2008 06:07:35 +0000"  >&lt;p&gt;Ok, I will change the patch to take care of the code review comments and re-send them.&lt;/p&gt;

&lt;p&gt;The example code that you have shown now has default values for parameters and then more parameters without default values. I did not know that it was allowed. I thought it was like varargs and default values could be supplied for only parameters at the end and no parameter without the default value could come after ones with default value. Hence I coded it the way I coded it. Thanks for correcting that assumption.&lt;/p&gt;

&lt;p&gt;I will correct the patches for these 2 things and re-send.&lt;/p&gt;

</comment>
                            <comment id="14465686" author="roshandawrani" created="Mon, 24 Nov 2008 12:40:35 +0000"  >&lt;p&gt;Attaching the newer set of patches with the following changes based on the comments:&lt;/p&gt;

&lt;p&gt;1)  Conditions modified to not use negation.&lt;/p&gt;

&lt;p&gt;2)  No assumption that parameters with default values will only be specified at the end in parameter list of a static method.&lt;/p&gt;

&lt;p&gt;rgds,&lt;br/&gt;
Roshan&lt;/p&gt;</comment>
                            <comment id="14465735" author="blackdrag" created="Mon, 24 Nov 2008 14:04:01 +0000"  >&lt;p&gt;much better now &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14465746" author="roshandawrani" created="Mon, 24 Nov 2008 14:07:46 +0000"  >&lt;p&gt;Thank you. Trying negation had a side-advantage though. I have some insider information on one thing that you can get wrong in reviewing code &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14465675" author="roshandawrani" created="Mon, 24 Nov 2008 14:16:38 +0000"  >&lt;p&gt;I had moved duplicate isStatic() calls to one place in hasPossibleStaticMethod. Missed doing that in 1.7 patch. So, just re-attaching that patch. &lt;/p&gt;

&lt;p&gt;Sorry for a little clutter.&lt;/p&gt;</comment>
                            <comment id="14465799" author="blackdrag" created="Thu, 27 Nov 2008 11:34:21 +0000"  >&lt;p&gt;patch applied&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12816435">GROOVY-4613</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12722016" name="2746_v15x_v2.diff" size="1836" author="roshandawrani" created="Mon, 24 Nov 2008 12:40:35 +0000"/>
                            <attachment id="12721349" name="2746_v16x_v2.diff" size="1801" author="roshandawrani" created="Mon, 24 Nov 2008 12:40:35 +0000"/>
                            <attachment id="12721489" name="2746_v17x_v2.diff" size="1801" author="roshandawrani" created="Mon, 24 Nov 2008 14:16:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ca1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>