<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:27:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-5572] Invalid behaviour of ?: operator within an &apos;if&apos; statement in closure</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-5572</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;The invalid result appears only in 2.0.0 version of Groovy:&lt;/p&gt;

&lt;p&gt;dm@dmc:~/bin/groovy-2.0.0/bin&amp;gt; ./groovysh&lt;br/&gt;
Groovy Shell (2.0.0, JVM: 1.6.0_29)&lt;br/&gt;
Type &apos;help&apos; or &apos;\h&apos; for help.&lt;br/&gt;
---------------------------------------------&lt;br/&gt;
groovy:000&amp;gt; def c = &lt;/p&gt;
{def s; if (it.y == null) s = true; else s = it.z &amp;lt; it.x - 1 ? null : true; s}
&lt;p&gt;; c(z: 0, y: 2, x: 3)&lt;br/&gt;
===&amp;gt; false&lt;br/&gt;
groovy:000&amp;gt;&lt;/p&gt;

&lt;p&gt;In Groovy 1.8.6 the result is correct.&lt;/p&gt;

&lt;p&gt;dm@dmc:~/bin/groovy-1.8.6/bin&amp;gt; ./groovysh&lt;br/&gt;
Groovy Shell (1.8.6, JVM: 1.6.0_29)&lt;br/&gt;
Type &apos;help&apos; or &apos;\h&apos; for help.&lt;br/&gt;
----------------------------------------------&lt;br/&gt;
groovy:000&amp;gt; def c = &lt;/p&gt;
{def s; if (it.y == null) s = true; else s = it.z &amp;lt; it.x - 1 ? null : true; s}
&lt;p&gt;; c(z: 0, y: 2, x: 3)&lt;br/&gt;
===&amp;gt; null&lt;br/&gt;
groovy:000&amp;gt; &lt;/p&gt;

&lt;p&gt;It can be fixed by replacing the ternary operator with &apos;else if&apos; and &apos;else&apos;.&lt;/p&gt;</description>
                <environment>OpenSUSE 11.4 x86_64, Oracle Java SE 1.6 Update 29</environment>
        <key id="12816397">GROOVY-5572</key>
            <summary>Invalid behaviour of ?: operator within an &apos;if&apos; statement in closure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="melix">C&#233;dric Champeau</assignee>
                                    <reporter username="dmovchinn">Dmitry Ovchinnikov</reporter>
                        <labels>
                            <label>closure</label>
                            <label>if</label>
                            <label>operator</label>
                            <label>ternary</label>
                    </labels>
                <created>Tue, 3 Jul 2012 07:11:24 +0000</created>
                <updated>Thu, 26 Jul 2012 16:49:38 +0000</updated>
                            <resolved>Tue, 10 Jul 2012 09:36:13 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.1</fixVersion>
                                    <component>ast builder</component>
                    <component>Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14473006" author="blackdrag" created="Tue, 3 Jul 2012 13:46:38 +0000"  >&lt;p&gt;to make it more clear... the problem is not a wrongly taken branch in there somewhere, but that in 1.8.6 returns a null and in 2.0.0 false, which is most probably Groovy truth applied on the null.&lt;/p&gt;</comment>
                            <comment id="14472873" author="dmovchinn" created="Tue, 3 Jul 2012 22:58:18 +0000"  >&lt;p&gt;Groovy is a dynamic language, therefore the types of variables are not defined at the moment of compilation. So, Groovy doesn&apos;t know a type of the variable &apos;s&apos; within my closure. There are no annotations @CompileStatic or new features such as a type inference in my code. That&apos;s why I don&apos;t see a &apos;truth&apos; applied on the null. However, that behavior of the ternary operator within the &apos;if&apos; statement can affect the code targeted to older versions of Groovy that breaks the backward compatibility.&lt;/p&gt;</comment>
                            <comment id="14472986" author="dmovchinn" created="Tue, 10 Jul 2012 02:29:35 +0000"  >&lt;p&gt;Another simplified example: &lt;tt&gt;true ? null : true&lt;/tt&gt; produce &lt;tt&gt;false&lt;/tt&gt; instead of &lt;tt&gt;null&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="14473032" author="melix" created="Tue, 10 Jul 2012 08:26:40 +0000"  >&lt;p&gt;Raising priority&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12722170" name="testCase.groovy" size="107" author="dmovchinn" created="Tue, 3 Jul 2012 07:11:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 20 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bp7r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>