<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:18:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-4715] StreamingMarkupBuilder can produce invalid xml</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-4715</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;ul&gt;
	&lt;li&gt;From #&lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-4115&quot; title=&quot;StreamingMarkupBuilder should provide an option for using double quotes around attributes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-4115&quot;&gt;&lt;del&gt;GROOVY-4115&lt;/del&gt;&lt;/a&gt;, StreamingMarkupBuilder provides option for using double quotes around attributes. But if we use this option, it can output invalid xml:
	&lt;ul&gt;
		&lt;li&gt;For example:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;def builder = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StreamingMarkupBuilder(useDoubleQuotes: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
builder.bind (
  {
    div(onmouseover:&lt;span class=&quot;code-quote&quot;&gt;&apos;foo(&lt;span class=&quot;code-quote&quot;&gt;&quot;some text&quot;&lt;/span&gt;)&apos;&lt;/span&gt;)
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
		&lt;li&gt;Produce the following output, which is invalid.
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;div onmouseout=&lt;span class=&quot;code-quote&quot;&gt;&quot;foo(&quot;&lt;/span&gt;some text&lt;span class=&quot;code-quote&quot;&gt;&quot;)&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
		&lt;li&gt;Another example:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;def builder = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StreamingMarkupBuilder(useDoubleQuotes: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
builder.bind (
   {
     div(onmouseover:&lt;span class=&quot;code-quote&quot;&gt;&quot;foo(&lt;span class=&quot;code-quote&quot;&gt;&apos;some text&apos;&lt;/span&gt;)&quot;&lt;/span&gt;)
   }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
		&lt;li&gt;Produce the following output
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;div onmouseout=&lt;span class=&quot;code-quote&quot;&gt;&quot;foo(&amp;amp;apos;some text&amp;amp;apos;)&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
		&lt;li&gt;However, it should produce
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;div onmouseout=&lt;span class=&quot;code-quote&quot;&gt;&quot;foo(&lt;span class=&quot;code-quote&quot;&gt;&apos;some text&apos;&lt;/span&gt;)&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;As far as we know, MarkupBuilder will escape the apostrophe if the value is for an attribute, as opposed to element content, and if the builder is configured to surround attribute values with single quotes.
	&lt;ul&gt;
		&lt;li&gt;So if we use the MarkupBuilder to build the above html block:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;def builder = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MarkupBuilder();
builder.setDoubleQuotes(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
		&lt;li&gt;It will produce the similar xml as the above, except the apostrophe entity
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;...
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;div onmouseout= &lt;span class=&quot;code-quote&quot;&gt;&quot;foo(&lt;span class=&quot;code-quote&quot;&gt;&apos;some text&apos;&lt;/span&gt;)&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;The single-quote should be displayed instead of the entity ( &amp;amp;apos; ) in both of the builders when attributes are surrounded by double quotes. It appears that StreamingMarkupBuilder is not communicating &lt;b&gt;useDoubleQuotes&lt;/b&gt; to StreamingMarkupWriter.  One solution we can think of is passing in &lt;b&gt;useDoubleQuotes&lt;/b&gt; to the StreamingMarkupWriter from the StreamingMarkupBuilder in the constructor and changing StreamingMarkupWriter to use similar logic to MarkupBuilder when checking attribute value for quotes to escape.
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;StreamingMarkupBuilder.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; bind(closure) {
...
out = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StreamingMarkupWriter(out, enc, useDoubleQuotes)
...
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;StreamingMarkupWriter&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void write(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; c) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
   ...
   &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(c == &lt;span class=&quot;code-quote&quot;&gt;&apos;\&apos;&lt;/span&gt;&apos; &amp;amp;&amp;amp; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.writingAttribute &amp;amp;&amp;amp; !useDoubleQuotes) {
       &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.writer.write(&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;amp;apos;&quot;&lt;/span&gt;);
   }
   &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(c == &lt;span class=&quot;code-quote&quot;&gt;&apos;&quot;&apos;&lt;/span&gt; &amp;amp;&amp;amp; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.writingAttribute &amp;amp;&amp;amp; useDoubleQuotes) {
       &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.writer.write(&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;amp;quot;&quot;&lt;/span&gt;);
   }
   ...
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Thanks&lt;/p&gt;</description>
                <environment>Windows and Linux</environment>
        <key id="12817781">GROOVY-4715</key>
            <summary>StreamingMarkupBuilder can produce invalid xml</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="ttrung.vo">Tony Trung Thanh Vo</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Mar 2011 16:58:21 +0000</created>
                <updated>Wed, 13 Apr 2011 14:33:37 +0000</updated>
                            <resolved>Sat, 12 Mar 2011 00:43:46 +0000</resolved>
                                    <version>1.7.8</version>
                                    <fixVersion>1.8-rc-2</fixVersion>
                    <fixVersion>1.7.10</fixVersion>
                                    <component>XML Processing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14479461" author="paulk" created="Wed, 9 Mar 2011 07:39:44 +0000"  >&lt;p&gt;Thanks for the suggestion, fixed.&lt;/p&gt;</comment>
                            <comment id="14471019" author="ttrung.vo" created="Fri, 11 Mar 2011 14:26:55 +0000"  >&lt;p&gt;Hi Paul,&lt;/p&gt;

&lt;p&gt;Adam (my colleague) and me upgraded groovy to version 1.7.9 and the fix is not included in 1.7.9 version. However, we do see the fix is included in version 1.8.0-rc-2. So it seems that you can deploy the version 1.7.9 again or you need to include this fix in 1.7.10. You also need to make sure that the release notes of v1.7.10 include the this bug (#&lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-4715&quot; title=&quot;StreamingMarkupBuilder can produce invalid xml&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-4715&quot;&gt;&lt;del&gt;GROOVY-4715&lt;/del&gt;&lt;/a&gt;), since this bug (#&lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-4715&quot; title=&quot;StreamingMarkupBuilder can produce invalid xml&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-4715&quot;&gt;&lt;del&gt;GROOVY-4715&lt;/del&gt;&lt;/a&gt;) is already included in the release-notes of v1.7.9&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;

&lt;p&gt;PS: Thanks for using our suggestion, Adam and especially I are so proud of this. Today is the super awesome day &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14479466" author="paulk" created="Fri, 11 Mar 2011 16:00:55 +0000"  >&lt;p&gt;We always appreciate feedback and especially ones with well-considered suggestions. Thanks for spotting the problem with 1.7.9. The fix was targeted for that release but there was a glitch during the release and it didn&apos;t make it. We will probably do a 1.7.10 shortly to fix up the glitch and we&apos;ll update the version numbering in the issue to reflect the change. Thanks again!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 37 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2cjdz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>