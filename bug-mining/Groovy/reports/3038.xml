<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:50:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-7826] Infinite recursion in genericTypeAsString</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-7826</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;The following two Java classes C1 and C2 cause Groovy to enter infinite recursion in genericTypeAsString when a method that takes a C1 is declared:&lt;/p&gt;

&lt;p&gt;C1.java:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;C1 &amp;lt;T2 &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; C2&amp;lt;T2,T1&amp;gt;,T1 &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; C1&amp;lt;T2,T1&amp;gt;&amp;gt; { }
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;C2&amp;lt;T2 &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; C2&amp;lt;T2, T1&amp;gt;, T1 &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; C1&amp;lt;T2, T1&amp;gt;&amp;gt; { }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;repro.groovy&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;def f(C1 c1) { }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This is reduced from actual code in Jenkins, where Run and Job have type parameters like this.&lt;/p&gt;</description>
                <environment>Groovy Version: 2.4.6 JVM: 1.8.0_91 Vendor: Oracle Corporation OS: Linux</environment>
        <key id="12961578">GROOVY-7826</key>
            <summary>Infinite recursion in genericTypeAsString</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pascalschumacher">Pascal Schumacher</assignee>
                                    <reporter username="magnus.reftel">Magnus Reftel</reporter>
                        <labels>
                            <label>regresion</label>
                    </labels>
                <created>Fri, 22 Apr 2016 09:13:30 +0000</created>
                <updated>Sun, 12 Jun 2016 08:45:15 +0000</updated>
                            <resolved>Wed, 18 May 2016 19:13:30 +0000</resolved>
                                    <version>2.2.0-beta-2</version>
                                    <fixVersion>2.4.7</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="15270478" author="magnus.reftel" created="Wed, 4 May 2016 11:02:53 +0000"  >&lt;p&gt;This is a regression, as it works fine with&lt;/p&gt;

&lt;p&gt;Groovy Version: 1.8.6 JVM: 1.8.0_31 Vendor: Oracle Corporation OS: Linux&lt;/p&gt;</comment>
                            <comment id="15270490" author="magnus.reftel" created="Wed, 4 May 2016 11:25:49 +0000"  >&lt;p&gt;Tested with a couple of different versions, and it seems like the problem was introduced in 2.2.0-beta-2, as all tested versions up to and including 2.2.0-beta-1 works. &lt;/p&gt;

&lt;p&gt;Log follows:&lt;/p&gt;

&lt;p&gt;$ for a in ~/opt/groovy-*; do echo `basename $a`; $a/bin/groovy -cp . repro.groovy; done&lt;br/&gt;
groovy-1.8.9&lt;br/&gt;
groovy-2.1.9&lt;br/&gt;
groovy-2.2.0&lt;br/&gt;
Caught: java.lang.StackOverflowError&lt;br/&gt;
java.lang.StackOverflowError&lt;br/&gt;
groovy-2.2.0-beta-1&lt;br/&gt;
groovy-2.2.0-beta-2&lt;br/&gt;
Caught: java.lang.StackOverflowError&lt;br/&gt;
java.lang.StackOverflowError&lt;br/&gt;
groovy-2.2.0-rc-1&lt;br/&gt;
Caught: java.lang.StackOverflowError&lt;br/&gt;
java.lang.StackOverflowError&lt;br/&gt;
groovy-2.2.0-rc-3&lt;br/&gt;
Caught: java.lang.StackOverflowError&lt;br/&gt;
java.lang.StackOverflowError&lt;br/&gt;
groovy-2.2.1&lt;br/&gt;
Caught: java.lang.StackOverflowError&lt;br/&gt;
java.lang.StackOverflowError&lt;br/&gt;
groovy-2.2.2&lt;br/&gt;
Caught: java.lang.StackOverflowError&lt;br/&gt;
java.lang.StackOverflowError&lt;br/&gt;
groovy-2.3.11&lt;br/&gt;
Caught: java.lang.StackOverflowError&lt;br/&gt;
java.lang.StackOverflowError&lt;br/&gt;
groovy-2.4.6&lt;br/&gt;
Caught: java.lang.StackOverflowError&lt;br/&gt;
java.lang.StackOverflowError&lt;br/&gt;
$&lt;/p&gt;</comment>
                            <comment id="15270496" author="blackdrag" created="Wed, 4 May 2016 11:35:18 +0000"  >&lt;p&gt;it is not really a regression since 2,2.0 was the first version to not to ignore that code. Still has to be fixed&lt;/p&gt;</comment>
                            <comment id="15282399" author="paulk" created="Fri, 13 May 2016 04:57:57 +0000"  >&lt;p&gt;I also get the problem on the 2_4_X branch but not on master. Needs further investigation to see if some fix has already been applied and whether the fix can be backported onto the 2_4_X branch. I haven&apos;t done a git bisect as yet&lt;/p&gt;</comment>
                            <comment id="15286341" author="daniel.spilker@hamburg.de" created="Tue, 17 May 2016 10:03:49 +0000"  >&lt;p&gt;See &lt;a href=&quot;https://github.com/apache/groovy/pull/333&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR #333&lt;/a&gt; for a reproducer. As far as I could see in the debugger, on master the ClassNodes of the generic type bounds are &lt;tt&gt;org.codehaus.groovy.ast.decompiled.DecompiledClassNode&lt;/tt&gt; which do not carry the generic type information. And that breaks the recursion. When disabling ASM resolving, the problem can be reproduced on master.&lt;/p&gt;

&lt;p&gt;It would be great if this could be fixed in 2.4. I backported my fix to 2.4 and testing this Jenkins (&lt;a href=&quot;https://issues.jenkins-ci.org/browse/JENKINS-34751&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JENKINS-34751&lt;/a&gt;) has been successful.&lt;/p&gt;</comment>
                            <comment id="15286399" author="blackdrag" created="Tue, 17 May 2016 10:59:00 +0000"  >&lt;p&gt;I feel bad about the change in PR #333. If DecompiledClassNode misses the  generic type information it is actually a bug, unless the information is invalid, then this needs to be fixed. if the information is valid, then of course it should not cause a problem.  Comparing the generics information when C1 is in Java and when it is in Groovy should reveal the problem.&lt;/p&gt;</comment>
                            <comment id="15286645" author="daniel.spilker@hamburg.de" created="Tue, 17 May 2016 13:48:09 +0000"  >&lt;p&gt;DecompiledClassNode should be fixed if that behavior is not expected. But ClassNode#toString needs to fixed in any case.&lt;/p&gt;

&lt;p&gt;What is bad about the fix in PR #333? Are the redirects for type arguments really important for #toString? What is the expected behavior for #toString?&lt;/p&gt;

&lt;p&gt;This is the computed value with the fix:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;C1 -&amp;gt; C1 &amp;lt;T2 &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; C2 &amp;lt;T2, T1&amp;gt;, T1 &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; C1&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is the computed value without the fix and with ASM resolving enabled:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;C1 -&amp;gt; C1 &amp;lt;T2 &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; C2 &amp;lt;T2, T1&amp;gt; -&amp;gt; C2, T1 &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; C1&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Without the fix and without ASM resolving, the computation never stops:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;C1 -&amp;gt; C1 &amp;lt;T2 &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; C2 &amp;lt;T2, T1&amp;gt; -&amp;gt; C2 &amp;lt;T2 &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; C2, T1 &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; C1 &amp;lt;T2, T1&amp;gt; -&amp;gt; C1 &amp;lt;T2 &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; C2 &amp;lt;T2, T1&amp;gt; -&amp;gt; C2 &amp;lt;T2 &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; C2, T1 &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; C1 &amp;lt;T2, T1&amp;gt; -&amp;gt; ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is the same ouput as above without the fix and with ASM resolving enabled, but I added (class.name@identityHashCode) to the type name to show the instances:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;C1(org.codehaus.groovy.ast.ClassNode@12e335ef) -&amp;gt; C1(org.codehaus.groovy.ast.decompiled.DecompiledClassNode@2e9e799) &amp;lt;T2 &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; C2(org.codehaus.groovy.ast.ClassNode@4a63ef4d) &amp;lt;T2, T1&amp;gt; -&amp;gt; C2(org.codehaus.groovy.ast.decompiled.DecompiledClassNode@66f3ce62), T1 &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; C1&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;... and with ASM resolving disabled:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;C1(org.codehaus.groovy.ast.ClassNode@7c91f442) -&amp;gt; C1(org.codehaus.groovy.ast.ClassNode@523b58f2) &amp;lt;T2 &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; C2(org.codehaus.groovy.ast.ClassNode@364ca20b) &amp;lt;T2, T1&amp;gt; -&amp;gt; C2(org.codehaus.groovy.ast.ClassNode@61229c06) &amp;lt;T2 &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; C2, T1 &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; C1(org.codehaus.groovy.ast.ClassNode@27317fbc) &amp;lt;T2, T1&amp;gt; -&amp;gt; C1(org.codehaus.groovy.ast.ClassNode@523b58f2) &amp;lt;T2 ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;PS: I removed the &lt;tt&gt;org.codehaus.groovy.ast.Groovy7862Bug$&lt;/tt&gt; prefix for the names of C1 and C2 for brevity.&lt;/p&gt;

&lt;p&gt;PPS: Shouldn&apos;t the expected value should be this?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;C1 -&amp;gt; C1&amp;lt;T2 &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; C2&amp;lt;T2, T1&amp;gt;, T1 &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; C1&amp;lt;T2, T1&amp;gt;&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15288489" author="blackdrag" created="Wed, 18 May 2016 06:02:34 +0000"  >&lt;p&gt;thanks for taking the time to explain the problem in more detail. Actually I was misunderstanding something and not really understanding the issue. But the recursive use of C2 is indeed something that can be solved with your patch. And since we need to break the toString somewhere I think you have chosen a good place for that.&lt;/p&gt;</comment>
                            <comment id="15289616" author="githubbot" created="Wed, 18 May 2016 19:13:17 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/333&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/333&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15289617" author="pascalschumacher" created="Wed, 18 May 2016 19:13:30 +0000"  >&lt;p&gt;Pull request merged. Thanks!&lt;/p&gt;</comment>
                            <comment id="15293259" author="daniel.spilker@hamburg.de" created="Fri, 20 May 2016 12:28:17 +0000"  >&lt;p&gt;The problem has been (indirectly) introduced in 2.2.0-beta-2 by commit &lt;a href=&quot;https://github.com/apache/groovy/commit/74089c1156d6c296d64e68e766575e86c4119c67&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;74089c1&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Can someone please update the &quot;Affects Version&quot; field?&lt;/p&gt;</comment>
                            <comment id="15293313" author="blackdrag" created="Fri, 20 May 2016 12:57:31 +0000"  >&lt;p&gt;see also &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7840&quot; title=&quot;Verifier#makeDescriptorWithoutReturnType uses ClassNode#toString with generics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7840&quot;&gt;&lt;del&gt;GROOVY-7840&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12800188" name="groovy-7826.zip" size="828" author="magnus.reftel" created="Fri, 22 Apr 2016 09:16:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 26 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2wkuv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>