<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:31:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-5925] Casting map as Random results in java.lang.VerifyError</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-5925</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;When trying to cast a map as &lt;tt&gt;Random&lt;/tt&gt; such as: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Random random = [nextInt: { x -&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 0 }] as Random
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the following exception is thrown:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;WARNING: Sanitizing stacktrace:
java.lang.VerifyError: (class: Random1_groovyProxy, method: &amp;lt;init&amp;gt; signature: (JLjava/util/Map;)V) Register 2 contains wrong type
	at java.lang.Class.getDeclaredConstructors0(Native Method)
	at java.lang.Class.privateGetDeclaredConstructors(Class.java:2404)
	at java.lang.Class.getConstructor0(Class.java:2714)
	at java.lang.Class.getConstructor(Class.java:1674)
	at org.codehaus.groovy.runtime.ProxyGeneratorAdapter.&amp;lt;init&amp;gt;(ProxyGeneratorAdapter.java:167)
	at groovy.util.ProxyGenerator.instantiateAggregate(ProxyGenerator.java:161)
	at groovy.util.ProxyGenerator.instantiateAggregateFromBaseClass(ProxyGenerator.java:117)
	at groovy.util.ProxyGenerator.instantiateAggregateFromBaseClass(ProxyGenerator.java:103)
	at org.codehaus.groovy.runtime.DefaultGroovyMethods.asType(DefaultGroovyMethods.java:7511)
	at org.codehaus.groovy.runtime.dgm$48.doMethodInvoke(Unknown Source)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1076)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:906)
	at org.codehaus.groovy.runtime.InvokerHelper.invokePojoMethod(InvokerHelper.java:836)
	at org.codehaus.groovy.runtime.InvokerHelper.invokeMethod(InvokerHelper.java:827)
	at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.invokeMethodN(ScriptBytecodeAdapter.java:164)
	at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.asType(ScriptBytecodeAdapter.java:587)
	at ConsoleScript2.run(ConsoleScript2:1)
	at groovy.lang.GroovyShell.runScriptOrMainOrTestOrRunnable(GroovyShell.java:257)
	at groovy.lang.GroovyShell.run(GroovyShell.java:481)
	at groovy.lang.GroovyShell.run(GroovyShell.java:163)
	at groovy.lang.GroovyShell$run.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:45)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:124)
	at groovy.ui.Console$_runScriptImpl_closure17.doCall(Console.groovy:951)
	at groovy.ui.Console$_runScriptImpl_closure17.doCall(Console.groovy)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
	at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
	at org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:272)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:906)
	at groovy.lang.Closure.call(Closure.java:412)
	at groovy.lang.Closure.call(Closure.java:406)
	at groovy.lang.Closure.run(Closure.java:490)
	at java.lang.Thread.run(Thread.java:722)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This worked in versions earlier than groovy 2.0.0&lt;/p&gt;</description>
                <environment>Mac OSX 10.8.2, Java 1.7.0_08-ea</environment>
        <key id="12816706">GROOVY-5925</key>
            <summary>Casting map as Random results in java.lang.VerifyError</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="mecameron">Michael Cameron</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Jan 2013 09:31:19 +0000</created>
                <updated>Fri, 18 Jan 2013 16:06:53 +0000</updated>
                            <resolved>Fri, 18 Jan 2013 03:54:38 +0000</resolved>
                                    <version>2.0.0</version>
                    <version>2.0.1</version>
                    <version>2.0.2</version>
                    <version>2.0.4</version>
                    <version>2.0.5</version>
                    <version>2.0.6</version>
                    <version>2.1.0-rc-1</version>
                                    <fixVersion>2.1.0-rc-2</fixVersion>
                    <fixVersion>2.1.0</fixVersion>
                    <fixVersion>2.0.7</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14480126" author="paulk" created="Thu, 17 Jan 2013 23:54:41 +0000"  >&lt;p&gt;A slightly tweaked version of your example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ProxyGenerator.INSTANCE.debug = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
Random random = [nextInt: { x -&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 0 }] as Random
println random.nextInt()   &lt;span class=&quot;code-comment&quot;&gt;// =&amp;gt; 0
&lt;/span&gt;println random.nextInt(5)  &lt;span class=&quot;code-comment&quot;&gt;// =&amp;gt; 0&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;On 1.8.8 it outputs the 0&apos;s as noted above and spits out some debug source for the generated proxy.&lt;/p&gt;

&lt;p&gt;We tweaked the ProxyGenerator in 2.0 and perhaps did not have an example similar to yours in our test suite of &quot;like-for-like&quot; examples.&lt;/p&gt;</comment>
                            <comment id="14473750" author="andre.steingress" created="Fri, 18 Jan 2013 03:14:20 +0000"  >&lt;p&gt;The problem is that double/long are 64-bit values and therefore 2 registers are needed. Thus the computation of the index variable for &quot;putField&quot; needed to be adjusted.&lt;/p&gt;

&lt;p&gt;Here is the pull request: &lt;a href=&quot;https://github.com/groovy/groovy-core/pull/114&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/groovy/groovy-core/pull/114&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14473967" author="paulk" created="Fri, 18 Jan 2013 03:54:38 +0000"  >&lt;p&gt;pull request merged - love your work - many thanks!&lt;/p&gt;</comment>
                            <comment id="14473929" author="andre.steingress" created="Fri, 18 Jan 2013 04:08:43 +0000"  >&lt;p&gt;Thanks! It&apos;s an honor to hear that from you &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 44 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2crsv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>