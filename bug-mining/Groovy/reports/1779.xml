<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:26:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-5377] CLONE - Incomprehensible Error Message Passing Partial Evaluated Lambda Function (improved error message for normal closure not on classpath case)</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-5377</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;When executing the code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;#! /usr/bin/env groovy

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.sql.DataSet
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.sql.Sql

@Grab ( &lt;span class=&quot;code-quote&quot;&gt;&apos;org.xerial:sqlite-jdbc:3.7.2&apos;&lt;/span&gt; )
@GrabConfig ( systemClassLoader = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; )
def database
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; words = [ ]
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
  database = Sql.newInstance ( &lt;span class=&quot;code-quote&quot;&gt;&apos;jdbc:sqlite:database.db&apos;&lt;/span&gt; , &lt;span class=&quot;code-quote&quot;&gt;&apos;org.sqlite.JDBC&apos;&lt;/span&gt; )
  &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; wordsTable = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DataSet ( database , &lt;span class=&quot;code-quote&quot;&gt;&apos;words&apos;&lt;/span&gt; )
  ( 0 ..&amp;lt; 4 ).each { i -&amp;gt;
    words &amp;lt;&amp;lt; wordsTable.findAll ( { j , item -&amp;gt; item.id == j }.curry ( i ) ).firstRow ( ).word
  }
}
&lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
  database?.close ( )
}
println words.join ( &apos;&apos; )
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the result is the error:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Caught: groovy.lang.GroovyRuntimeException: Could not find the ClassNode for MetaClass: groovy.lang.MetaClassImpl@6c1826dc&lt;span class=&quot;error&quot;&gt;&amp;#91;class org.codehaus.groovy.runtime.CurriedClosure&amp;#93;&lt;/span&gt;&lt;br/&gt;
groovy.lang.GroovyRuntimeException: Could not find the ClassNode for MetaClass: groovy.lang.MetaClassImpl@6c1826dc&lt;span class=&quot;error&quot;&gt;&amp;#91;class org.codehaus.groovy.runtime.CurriedClosure&amp;#93;&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;which doesn&apos;t really tell the programmer anything useful about the executed code they wrote.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12816166">GROOVY-5377</key>
            <summary>CLONE - Incomprehensible Error Message Passing Partial Evaluated Lambda Function (improved error message for normal closure not on classpath case)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="russel">Dr. Russel Winder</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Mar 2012 03:00:33 +0000</created>
                <updated>Fri, 4 May 2012 23:58:47 +0000</updated>
                            <resolved>Fri, 4 May 2012 23:58:47 +0000</resolved>
                                                    <fixVersion>2.0-beta-3</fixVersion>
                    <fixVersion>1.8.7</fixVersion>
                                    <component>SQL processing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14479885" author="paulk" created="Wed, 21 Mar 2012 06:42:53 +0000"  >&lt;p&gt;So, I was going to propose the current error message changes as per the example below. Assume you have some closure where the source is not available:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;def closure = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GroovyShell().evaluate(&lt;span class=&quot;code-quote&quot;&gt;&quot;def c = { p -&amp;gt; p.lastname == &lt;span class=&quot;code-quote&quot;&gt;&apos;Smith&apos;&lt;/span&gt; }; c&quot;&lt;/span&gt;)
println people.findAll(closure).sql
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which currently reports the following error:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Could not find the ClassNode for MetaClass: org.codehaus.groovy.runtime.metaclass.ClosureMetaClass@1fe571f[class Script1$_run_closure1]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I propose it would become:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;DataSet unable to evaluate expression. AST not available for closure: Script1$_run_closure1. Is the source code on the classpath?
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14472620" author="blackdrag" created="Wed, 21 Mar 2012 07:42:02 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14472662" author="russel" created="Wed, 21 Mar 2012 08:07:03 +0000"  >&lt;p&gt;As an error message it certainly works better.&lt;/p&gt;

&lt;p&gt;Is there any way of avoiding this situation being a thing Groovy cannot cope with?&lt;/p&gt;</comment>
                            <comment id="14472700" author="paulk" created="Wed, 21 Mar 2012 14:35:30 +0000"  >&lt;p&gt;We have tried various ways of storing away the AST and the simple ways run into problems like 64K String limitations and such. I am sure it can be done and it is something we&apos;d like to do but it hasn&apos;t yielded to simple solutions so far. (I thought there was an existing Jira issue but couldn&apos;t find it just now with a very quick search.)&lt;/p&gt;</comment>
                            <comment id="14472644" author="paulk" created="Wed, 21 Mar 2012 17:59:31 +0000"  >&lt;p&gt;error message added&lt;/p&gt;</comment>
                            <comment id="14472621" author="russel" created="Fri, 23 Mar 2012 02:46:11 +0000"  >&lt;p&gt;Seems to works as anticipated.&lt;/p&gt;</comment>
                            <comment id="14472840" author="paulk" created="Fri, 4 May 2012 23:58:47 +0000"  >&lt;p&gt;added &quot;Component&quot; to improve future searching ease&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310260">
                    <name>Related</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12818152">GROOVY-5376</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 29 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bonr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>