<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:12:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-3570] Causes application to crash due to too many files being open</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-3570</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description></description>
                <environment>Ubuntu 8.10</environment>
        <key id="12814736">GROOVY-3570</key>
            <summary>Causes application to crash due to too many files being open</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="guillaume">Guillaume Sauthier</assignee>
                                    <reporter username="kuganb">Kugan Baladevan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Jun 2009 00:05:23 +0000</created>
                <updated>Sun, 5 Apr 2015 14:44:16 +0000</updated>
                            <resolved>Wed, 9 Nov 2011 05:21:37 +0000</resolved>
                                    <version>1.6.3</version>
                                    <fixVersion>1.6.4</fixVersion>
                    <fixVersion>1.7.3</fixVersion>
                    <fixVersion>1.8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14467141" author="kuganb" created="Tue, 9 Jun 2009 00:29:46 +0000"  >&lt;p&gt;Environment:&lt;/p&gt;

&lt;p&gt;Ubuntu 8.10&lt;br/&gt;
$ uname -a&lt;br/&gt;
Linux ... 2.6.27-11-generic #1 SMP Thu Jan 29 19:24:39 UTC 2009 i686 GNU/Linux&lt;/p&gt;

&lt;p&gt;$ java -version&lt;br/&gt;
java version &quot;1.6.0_10&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.6.0_10-b33)&lt;br/&gt;
Java HotSpot(TM) Server VM (build 11.0-b15, mixed mode)&lt;/p&gt;


&lt;p&gt;Usage:&lt;/p&gt;

&lt;p&gt;We are executing a Groovy script at regular intervals using the same instance of GroovyScriptEngine. The number of open files (as reported by the &apos;lsof&apos; command) keeps increasing every time the script is executed until the number of files the user is allowed to have open is exhaused and a FileNotFoundException (Too many open files) is thrown.&lt;/p&gt;

&lt;p&gt;The cause seems to be the URLConnections being opened by the updateCacheEntry method of GroovyScriptEngine.&lt;/p&gt;

&lt;p&gt;In the following case, the script being executed is &apos;execute.script&apos; and this script in turn executes &apos;request.script&apos;.&lt;/p&gt;

&lt;p&gt;lsof -p 7394&lt;br/&gt;
...&lt;br/&gt;
java    7394 kugan.baladevan  121r   REG      8,2     3252   928217 /tmp/jar_cache19005.tmp (deleted)&lt;br/&gt;
java    7394 kugan.baladevan  122r   REG      8,2     4234  5947467 /.../execute.script&lt;br/&gt;
java    7394 kugan.baladevan  123r   REG      8,2      348  5947460 /.../request.script&lt;br/&gt;
java    7394 kugan.baladevan  124r   REG      8,2     4234  5947467 /.../execute.script&lt;br/&gt;
java    7394 kugan.baladevan  125r   REG      8,2      348  5947460 /.../request.script&lt;br/&gt;
java    7394 kugan.baladevan  126u   REG      8,2     4234  5947467 /.../execute.script&lt;br/&gt;
java    7394 kugan.baladevan  127r   REG      8,2      348  5947460 /.../request.script&lt;br/&gt;
java    7394 kugan.baladevan  128r   REG      8,2     4234  5947467 /.../execute.script&lt;br/&gt;
java    7394 kugan.baladevan  129r   REG      8,2      348  5947460 /.../request.script&lt;br/&gt;
java    7394 kugan.baladevan  130r   REG      8,2     4234  5947467 /.../execute.script&lt;br/&gt;
java    7394 kugan.baladevan  131r   REG      8,2      348  5947460 /.../request.script&lt;br/&gt;
...&lt;/p&gt;

&lt;p&gt;Getting the InputStream of the URLConnection and closing it seems to fix this issue. The attached svn diff shows the changes.&lt;/p&gt;</comment>
                            <comment id="14478550" author="paulk" created="Wed, 10 Jun 2009 02:57:20 +0000"  >&lt;p&gt;The patch has been applied in trunk but will likely be rolled back as Jochen has a brand new version of GSE arriving on trunk shortly.&lt;br/&gt;
But if you like to live dangerously, grab a copy of the jar of one of the CI build servers now. I will put the patch on the 1_6_X branch, so it should make it into 1.6.4.&lt;/p&gt;</comment>
                            <comment id="14478530" author="paulk" created="Wed, 10 Jun 2009 07:15:50 +0000"  >&lt;p&gt;Patch applied to 1_6_X branch. Reverted from trunk pending newer version of GSE.&lt;/p&gt;</comment>
                            <comment id="14469394" author="roshandawrani" created="Wed, 2 Jun 2010 11:50:35 +0000"  >&lt;p&gt;Paul, any plan to port the fix to 1.7.x + as well? (I see your comment from that time that says &quot;revert patch for time being - awaiting new version of this file&quot;)&lt;/p&gt;</comment>
                            <comment id="14479168" author="paulk" created="Thu, 3 Jun 2010 01:11:02 +0000"  >&lt;p&gt;So the thinking was perhaps the new version of GSE that was reworked for 1.7 might make this not a problem or need to have a slightly different solution at least. I think Jochen was thinking that the stream would be closed elsewhere. But that was a while ago - I suspect given feedback that some issue does remain even with new GSE. I just haven&apos;t found time to properly investigate yet.&lt;/p&gt;</comment>
                            <comment id="14469461" author="roshandawrani" created="Thu, 3 Jun 2010 01:19:34 +0000"  >&lt;p&gt;May be either this one or &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-4218&quot; title=&quot;Causes application to crash due to too many files being open&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-4218&quot;&gt;&lt;del&gt;GROOVY-4218&lt;/del&gt;&lt;/a&gt; should be closed. They both remain about this issue being present on the new GSE anyway.&lt;/p&gt;</comment>
                            <comment id="14469531" author="guillaume" created="Thu, 3 Jun 2010 10:51:07 +0000"  >&lt;p&gt;I&apos;ve committed some changes to close streams.&lt;br/&gt;
I hope it covers the various cases where we left streams opened.&lt;br/&gt;
A snapshot of Groovy 1.7.3 will be deployed automatically in a couple hours or so here:&lt;br/&gt;
&lt;a href=&quot;http://snapshots.repository.codehaus.org/org/codehaus/groovy/groovy-all/1.7.3-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://snapshots.repository.codehaus.org/org/codehaus/groovy/groovy-all/1.7.3-SNAPSHOT/&lt;/a&gt;&lt;br/&gt;
(current snapshot dated 03-Jun-2010 04:55, the one with the fix should be older than that)&lt;/p&gt;

&lt;p&gt;Kugan, could you please try it in your context and tell us if it improves the situation?&lt;br/&gt;
Thanks in advance.&lt;/p&gt;</comment>
                            <comment id="14479169" author="paulk" created="Thu, 3 Jun 2010 11:05:18 +0000"  >&lt;p&gt;I believe it is there now&lt;/p&gt;</comment>
                            <comment id="14469546" author="roshandawrani" created="Fri, 4 Jun 2010 07:35:10 +0000"  >&lt;p&gt;Fix versions should be 1.6.9 / 1.7.3?&lt;/p&gt;</comment>
                            <comment id="14469485" author="guillaume" created="Fri, 4 Jun 2010 07:50:46 +0000"  >&lt;p&gt;The initial fix committed by Paul in 1.6.x was there when 1.6.4 was released, if I&apos;m not mistaken, hence why I&apos;ve set the fix for 1.6.4 and 1.7.3.&lt;/p&gt;</comment>
                            <comment id="14469507" author="roshandawrani" created="Fri, 4 Jun 2010 07:56:08 +0000"  >&lt;p&gt;Sorry, forgot the history part of it.&lt;/p&gt;</comment>
                            <comment id="14469510" author="guillaume" created="Tue, 8 Jun 2010 10:12:04 +0000"  >&lt;p&gt;Please reopen if there are some further / missing files kept open.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310260">
                    <name>Related</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12815183">GROOVY-4218</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12721374" name="GroovyScriptEngine.diff" size="2428" author="kuganb" created="Tue, 9 Jun 2009 00:05:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 25 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2c627:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>