<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:47:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-7644] ExternalizeMethods generates incorrect bytecode for statically compiled nested classes</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-7644</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;When @AutoExternalize and @CompileStatic are both applied to a nested (static) class, the generated writeExternal and readExternal methods call writeObject/readObject on &apos;this&apos; rather than on their arguments. This results in IncompatibleClassChange errors at runtime. Example:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Person {
    @groovy.transform.ToString(includePackage=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)
    @groovy.transform.AutoExternalize
    @groovy.transform.CompileStatic
    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;AddressCS {
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; street, town
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The bytecode generated for the Person.AddressCS.writeExternal method is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; writeExternal(Ljava/io/ObjectOutput;)V &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; java/io/IOException 
   L0
    ALOAD 0
    ALOAD 0
    GETFIELD Person$AddressCS.street : Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;;
    INVOKEINTERFACE java/io/ObjectOutput.writeObject (Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;)V
    ACONST_NULL
    POP
    ALOAD 0
    ALOAD 0
    GETFIELD Person$AddressCS.town : Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;;
    INVOKEINTERFACE java/io/ObjectOutput.writeObject (Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;)V
    ACONST_NULL
    POP
   L1
    RETURN
    LOCALVARIABLE &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; LPerson$AddressCS; L0 L1 0
    LOCALVARIABLE out Ljava/io/ObjectOutput; L0 L1 1
    MAXSTACK = 2
    MAXLOCALS = 2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This seems to occur because the writeObject method call expressions within writeExternal have implicitThis set to true. &lt;/p&gt;

&lt;p&gt;The problem is essentially the same for generated readExternal methods.&lt;/p&gt;
</description>
                <environment>OSX 10.10, JDK 1.8</environment>
        <key id="12907262">GROOVY-7644</key>
            <summary>ExternalizeMethods generates incorrect bytecode for statically compiled nested classes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="melix">C&#233;dric Champeau</assignee>
                                    <reporter username="shils">Shil Sinha</reporter>
                        <labels>
                    </labels>
                <created>Fri, 23 Oct 2015 01:08:30 +0000</created>
                <updated>Mon, 22 Feb 2016 20:48:42 +0000</updated>
                            <resolved>Wed, 28 Oct 2015 00:44:15 +0000</resolved>
                                    <version>2.4.5</version>
                                    <fixVersion>2.4.6</fixVersion>
                                    <component>Static compilation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14970243" author="githubbot" created="Fri, 23 Oct 2015 01:19:11 +0000"  >&lt;p&gt;GitHub user shils opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/157&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/157&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7644&quot; title=&quot;ExternalizeMethods generates incorrect bytecode for statically compiled nested classes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7644&quot;&gt;&lt;del&gt;GROOVY-7644&lt;/del&gt;&lt;/a&gt; ExternalizeMethods generates incorrect bytecode for stati&#8230;&lt;/p&gt;

&lt;p&gt;    &#8230;cally compiled nested classes&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/shils/incubator-groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/shils/incubator-groovy&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7644&quot; title=&quot;ExternalizeMethods generates incorrect bytecode for statically compiled nested classes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7644&quot;&gt;&lt;del&gt;GROOVY-7644&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/157.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/157.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #157&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 8b1107aa24fedad567d5f72e3dcb0cdfae84ca5e&lt;br/&gt;
Author: Shil Sinha &amp;lt;shils@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-10-23T01:16:49Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7644&quot; title=&quot;ExternalizeMethods generates incorrect bytecode for statically compiled nested classes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7644&quot;&gt;&lt;del&gt;GROOVY-7644&lt;/del&gt;&lt;/a&gt; ExternalizeMethods generates incorrect bytecode for statically compiled nested classes&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14972508" author="githubbot" created="Sat, 24 Oct 2015 09:44:24 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/157&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/157&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 4 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2netb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>