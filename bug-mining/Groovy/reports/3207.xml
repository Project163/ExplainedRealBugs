<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:55:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-8131] Statement continued onto next line is flagged when first character is &quot;=&quot;</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-8131</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Source code attached (grbug.java).&lt;/p&gt;

&lt;p&gt;`javac` v8 compiles variable declarations s1, s2, and s3 successfully.&lt;/p&gt;

&lt;p&gt;`groovyc` flags s3:&lt;br/&gt;
&quot;unexpected token: = @ line 9, column 3.&quot;&lt;/p&gt;</description>
                <environment>Ubuntu Linux&lt;br/&gt;
&lt;br/&gt;
`uname -a`:&lt;br/&gt;
Linux biostar 4.4.0-69-generic #90-Ubuntu SMP Thu Mar 16 16:52:31 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux</environment>
        <key id="13059016">GROOVY-8131</key>
            <summary>Statement continued onto next line is flagged when first character is &quot;=&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daniel_sun">Daniel Sun</assignee>
                                    <reporter username="texadactyl">Richard Elkins</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Mar 2017 20:04:10 +0000</created>
                <updated>Tue, 6 Mar 2018 23:25:29 +0000</updated>
                            <resolved>Tue, 2 May 2017 02:12:05 +0000</resolved>
                                    <version>2.4.5</version>
                                    <fixVersion>2.6.0-alpha-1</fixVersion>
                                    <component>Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15942150" author="paulk" created="Sun, 26 Mar 2017 05:29:40 +0000"  >&lt;p&gt;Currently, this is by design rather than a bug. Groovy treats the semicolon as a statement separator not statement terminator like in Java.&lt;/p&gt;

&lt;p&gt;As another example, inside the collect below, there is an expression returning 4 then an expression returning the result +3 (which is just 3) and for Groovy there is an implicit return of the last expression:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; [3] == [1].collect {
  4
  + 3
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Having said that, we do look ahead for closure left curly braces inside builders for instance. In theory we could enhance the grammar to handle additional cases like the equals but obviously not for all symbols (e.g. changing the &apos;+&apos; as per the above example would break existing code).&lt;/p&gt;</comment>
                            <comment id="15942331" author="texadactyl" created="Sun, 26 Mar 2017 16:24:35 +0000"  >&lt;p&gt;To me, the following two executable statements are semantically identical:&lt;/p&gt;

&lt;p&gt;     static final SimpleDateFormat s2 = &lt;br/&gt;
		new SimpleDateFormat( &quot;yyyy-MM-dd_hh:mm:ss&quot; );&lt;/p&gt;

&lt;p&gt;     static final SimpleDateFormat s3&lt;br/&gt;
		= new SimpleDateFormat( &quot;yyyy-MM-dd_hh:mm:ss&quot; );&lt;/p&gt;

&lt;p&gt;When I was a compiler constructor, newline characters (line continuation) was treated as whitespace (0x20).  It doesn&apos;t matter whether the scanner employs a terminator or the scanner simply recognizes the end of a valid statement.&lt;/p&gt;

&lt;p&gt;When one escapes the newline character in the 1st line of the s3 declaration, then `groovyc` compiles the 2-line statement successfully.&lt;/p&gt;

&lt;p&gt;     static final SimpleDateFormat s3m \&lt;br/&gt;
		= new SimpleDateFormat( &quot;yyyy-MM-dd_hh:mm:ss&quot; );&lt;/p&gt;

&lt;p&gt;If the newline is a statement separator (like semicolon), then why weren&apos;t both the s2 and s3m declarations flagged?&lt;br/&gt;
     1. They are declared as final yet they have no declared initialization before statement separation.&lt;br/&gt;
     2. The 2nd line should be a syntax error as they are assignments with nothing to assign to.&lt;/p&gt;

&lt;p&gt;Answer guess: Full statements are recognized semantically (terminate implicitly), regardless of the number of lines the statement occupies.&lt;/p&gt;

&lt;p&gt;I still think that the original report is against an undesirable feature of the `groovyc` scanner.  If both lines are recognized as part of a single executable statement, then it should not matter where the &apos;=&apos; character falls on (line 1 or line 2).  Semantically, the s2 and s3 declarations are identical.  &lt;/p&gt;

&lt;p&gt;Am I missing some subtle philosophical point of Groovy?&lt;/p&gt;

&lt;p&gt;I can catch these types of differences in my Java source code fairly easily, hence, the report was classified as &quot;minor&quot;.&lt;/p&gt;
</comment>
                            <comment id="15942356" author="blackdrag" created="Sun, 26 Mar 2017 17:36:21 +0000"  >&lt;p&gt;When you make newline treated as whitespace, you cannot make it part of the syntax of the language. That is why for example in Java you have to use the semicolon to tell the compiler the statement is done. In Groovy the semicolon is optional, thus the newline character significant and you cannot treat it as whitespace anymore and it becomes a possible terminator. But it is still no terminator like the semicolon. That means &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; SimpleDateFormat s3
= &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SimpleDateFormat( &lt;span class=&quot;code-quote&quot;&gt;&quot;yyyy-MM-dd_hh:mm:ss&quot;&lt;/span&gt; );
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;has a valid final  first line. That is why in Groovy we suggested the logic that the code line should end with the operator to be more easily be able to tell the compiler that the next line belongs to the same statement.  Such operators are for the compiler = and of course \ too. Which is why s2 and s3m are no problem. &lt;br/&gt;
So terminate implicitly sounds right to me, even though I would not call that semantic recognition, since it is still only the parser that tells the compiler if a statement ends or not. We are for example not having both lines as possibly valid by their own in the parser and then combine them into a single statement somehow.&lt;/p&gt;

&lt;p&gt;Anyway... I think this kind of bug can be fixed in the antlr grammar&lt;/p&gt;</comment>
                            <comment id="15942422" author="texadactyl" created="Sun, 26 Mar 2017 19:33:54 +0000"  >&lt;p&gt;Jochen,&lt;/p&gt;

&lt;p&gt;How can &quot;static final SimpleDateFormat s3&quot; be valid if the variable has been declared final but has no value assigned?  Without the token &quot;final&quot;, I would agree with you.&lt;/p&gt;

&lt;p&gt;Newline (\n) part of the syntax of a language?  Why would you want to make an invisible character (text line terminator) part of a language?  Python did it with tab characters (\t) and drives everyone crazy.&lt;/p&gt;

&lt;p&gt;You might be thinking that I am picky or Johnny-come-lately with respect to Groovy.  Both true.  Just started compiling older Java to Groovy as part of self-education.&lt;/p&gt;</comment>
                            <comment id="15942478" author="paulk" created="Sun, 26 Mar 2017 22:54:01 +0000"  >&lt;p&gt;If you compile your static final example with the latest snapshot versions of Groovy you will get:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;The variable [s3] may be uninitialized
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;But in some sense that isn&apos;t what your main point is, so I won&apos;t dwell on that.&lt;/p&gt;

&lt;p&gt;Perhaps if you think of newline as a statement terminator, that will explain the current behavior. We do some but not very much lookahead. You are right that we could do smarter lookahead within the grammar but it isn&apos;t trivial.&lt;/p&gt;

&lt;p&gt;As an example, Groovy allows this statement:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;multiply 4 by 5
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which is the same as:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;multiply(4).by(5)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;With an implementation like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;def multiply(multiplicand) { [by: { multiplier -&amp;gt; multiplicand * multiplier }] }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Where as this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;multiply 4
by 5
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Are these two valid statements:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;multiply(4)
by(5)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15942491" author="blackdrag" created="Sun, 26 Mar 2017 23:49:02 +0000"  >&lt;p&gt;&quot;static final SimpleDateFormat s3&quot; is legal if you have a static initializer block, that sets the variable. But you need to put some semantics into the evaluation to determine that, which is why lexer and parser see that as valid statement.&lt;/p&gt;

&lt;p&gt;Why would we make newline part of the language? Well because the semicolon is annoying &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Seriously, if you did Groovy for a while and then go to Java, the semicolon becomes extremely annoying.&lt;/p&gt;</comment>
                            <comment id="15943454" author="texadactyl" created="Mon, 27 Mar 2017 15:23:26 +0000"  >&lt;p&gt;Jochen,&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&quot;static final SimpleDateFormat s3&quot; is legal if you have a static initializer block, that sets the variable.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;But, I did not.  See the attachment.  That is why I wondered why it wasn&apos;t flagged.&lt;/p&gt;

&lt;p&gt;One person&apos;s annoyance (&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; is another person&apos;s point of clarity.&lt;/p&gt;</comment>
                            <comment id="15943462" author="texadactyl" created="Mon, 27 Mar 2017 15:27:38 +0000"  >&lt;p&gt;Paul &amp;amp; Jochen,&lt;/p&gt;

&lt;p&gt;I am not trying to drag out what you two may feel is being argumentative.  Given that this is currently a feature, perhaps the Groovy documentation could highlight this and include some examples similar to mine.&lt;/p&gt;

&lt;p&gt;Richard&lt;/p&gt;</comment>
                            <comment id="15948688" author="paulk" created="Thu, 30 Mar 2017 08:50:45 +0000"  >&lt;p&gt;Yes, improving the documentation is always a good thing. I found a brief reference in Groovy in Action but couldn&apos;t see any equivalent in the online documentation. PRs welcome! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15952301" author="daniel_sun" created="Sat, 1 Apr 2017 16:49:23 +0000"  >&lt;blockquote&gt;&lt;p&gt;Anyway... I think this kind of bug can be fixed in the antlr grammar&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Jochen, I think the new parser Parrot can be refined to support some code like &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;def a
= 1 + 2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but I am not going to make Parrot support&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;def a = 1
+ 2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In other words, the first token in second line should be invalid for the statement.&lt;/p&gt;</comment>
                            <comment id="15952308" author="daniel_sun" created="Sat, 1 Apr 2017 17:26:23 +0000"  >&lt;p&gt;I&apos;ve tried to fix it in the groovy-parser project: &lt;a href=&quot;https://github.com/danielsun1106/groovy-parser/commit/68d791de2b88693febdfe15896ed8aea2dee9ed1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/danielsun1106/groovy-parser/commit/68d791de2b88693febdfe15896ed8aea2dee9ed1&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15952422" author="blackdrag" created="Sat, 1 Apr 2017 21:16:50 +0000"  >&lt;p&gt;nice&lt;/p&gt;</comment>
                            <comment id="15952492" author="daniel_sun" created="Sun, 2 Apr 2017 01:43:50 +0000"  >&lt;p&gt;Fixed in the parrot branch.&lt;/p&gt;</comment>
                            <comment id="15952610" author="daniel_sun" created="Sun, 2 Apr 2017 10:01:13 +0000"  >&lt;p&gt;Besides &lt;tt&gt;=&lt;/tt&gt;, I have refined the Parrot parser to support more expressions span rows:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/groovy/commit/929bf81114a2f0ea4fa231e283ac3e3b4b2bc5d4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/929bf81114a2f0ea4fa231e283ac3e3b4b2bc5d4&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ps: you can find that the first token in the new line is invalid for the statement.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12860434" name="grbug.java" size="364" author="texadactyl" created="Fri, 24 Mar 2017 20:04:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 33 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3crrr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>