<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:19:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-4801] Thrown exception not accessable inside catch block when class has @Category transformation applied</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-4801</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;When implementing a Category to handle exceptions, I find that the thrown exception is not available within the catch block when the class is annotated with the @Category AST transformation. Removing the @Category AST transformation gives the correct behaviour.&lt;/p&gt;

&lt;p&gt;Example:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;// Define exception handling category
&lt;/span&gt;@Category(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ExceptionHandler {
  def handled(Closure block) {
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; { block.call() }
    &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Throwable t) { println t }
  }
}

&lt;span class=&quot;code-comment&quot;&gt;// Define a &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;which mixes in &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; category
&lt;/span&gt;@Mixin(ExceptionHandler)
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Caller {
  def thrower() { handled { 1/0 } }
}

&lt;span class=&quot;code-comment&quot;&gt;// Test the exception handling
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Caller().thrower()
&lt;span class=&quot;code-comment&quot;&gt;// --&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;ERROR groovy.lang.MissingPropertyException: No such property: t &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; class: Caller&quot;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, if the ExceptionHandler category is defined without using the @Category AST transformation:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ExceptionHandler {
  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; def handled(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; self, Closure block) {
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; { block.call() }
    &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Throwable t) { println t }
  }
}

@Mixin(ExceptionHandler)
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Caller {
  def thrower() { handled { 1/0 } }
}

&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Caller().thrower()
&lt;span class=&quot;code-comment&quot;&gt;// --&amp;gt; prints &lt;span class=&quot;code-quote&quot;&gt;&quot;java.lang.ArithmeticException: Division by zero&quot;&lt;/span&gt;, as expected&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This behaviour is observed both in the groovy shell, and in compiled code.  Also, the erroneous behaviour is not due to the @Mixin AST transformation, as I observe the same behaviour when I replace the @Mixin AST transformation with the static initialization block {{&lt;/p&gt;
{Caller.mixin ExceptionHandler}
&lt;p&gt;}} in the Caller class.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12815639">GROOVY-4801</key>
            <summary>Thrown exception not accessable inside catch block when class has @Category transformation applied</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="bunglefeet">Ewan Dawson</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Apr 2011 06:08:11 +0000</created>
                <updated>Tue, 7 Apr 2015 19:13:12 +0000</updated>
                            <resolved>Thu, 28 Apr 2011 08:24:53 +0000</resolved>
                                    <version>1.7.10</version>
                                    <fixVersion>1.8.1</fixVersion>
                                    <component>ast builder</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14479518" author="paulk" created="Thu, 28 Apr 2011 07:05:00 +0000"  >&lt;p&gt;The transformed code for &lt;tt&gt;println t&lt;/tt&gt; is incorrectly looking like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.println( $&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; .t)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14479495" author="paulk" created="Thu, 28 Apr 2011 07:28:14 +0000"  >&lt;p&gt;Adding something like this to CategoryASTTransformation seems to fix the problem:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@Override
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void visitCatchStatement(CatchStatement statement) {
    varStack.getLast().add(statement.getVariable().getName());
    &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.visitCatchStatement(statement);
    varStack.getLast().remove(statement.getVariable().getName());
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14479536" author="paulk" created="Thu, 28 Apr 2011 08:24:53 +0000"  >&lt;p&gt;Thanks for spotting and reporting the issue. It should be fixed in the trunk and 1.8.1 snapshot jars. If you could test it out a little more, that would be great.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 30 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2clnj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>