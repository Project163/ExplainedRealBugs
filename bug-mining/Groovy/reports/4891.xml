<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:25:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-11508] Multiple traits with related generic types cannot be used</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-11508</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;When updating Grails from Groovy 3.x to 4.x we discovered that &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-5106&quot; title=&quot;Same interface can be implemented with two different generic types&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-5106&quot;&gt;&lt;del&gt;GROOVY-5106&lt;/del&gt;&lt;/a&gt; prevents us from updating to Groovy 4 for the &lt;a href=&quot;https://github.com/grails/grails-data-mapping&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;grails-data-mapping&lt;/a&gt; (GORM) project.&#160; Groovy-5106 does not take into account relationships between generic types and groovy does not support inheritance in generic types on traits so we have no workable solution for using Groovy 4.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;For example, the following is not possible in Groovy 4:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Parent &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; GormEntity&amp;lt;Parent&amp;gt; {

}

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Child &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; GormEntity&amp;lt;Child&amp;gt; {

} 

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;GormEntity&amp;lt;? &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; GormEntity&amp;gt; { &lt;span class=&quot;code-comment&quot;&gt;// ? &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; GormEntity is not allowed
&lt;/span&gt;
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;We have documented the impacts of this issue on the grails-data-mapping project here: &#160;&lt;a href=&quot;https://github.com/grails/grails-data-mapping/issues/1811&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/grails/grails-data-mapping/issues/1811&lt;/a&gt; &#160; We have discovered that the original change could be reverted and continue to work with the latest Java &amp;amp; Groovy.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;For Grails Data Mapping (GORM), there is support for inheritance between a Parent &amp;amp; Child domain object.&#160; This is often implemented like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Parent &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; GormEntity&amp;lt;Parent&amp;gt; {

}

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Child &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; GormEntity&amp;lt;Child&amp;gt; {

}

trait GormEntity&amp;lt;D&amp;gt; { &lt;span class=&quot;code-comment&quot;&gt;// Simplified &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; ticket
&lt;/span&gt;&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; D get(Serializable id)
   
    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; List&amp;lt;D&amp;gt; getAll()
}
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This allows someone to do the following in code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Parent.get(1L) &lt;span class=&quot;code-comment&quot;&gt;// Will find either a Child or Parent
&lt;/span&gt;Child.get(1L) &lt;span class=&quot;code-comment&quot;&gt;// Will find only child types&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Since Groovy-5106 does not take into account inheritance, can this change be reverted or changed to a warning until inheritance is taken into account?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13596625">GROOVY-11508</key>
            <summary>Multiple traits with related generic types cannot be used</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="jdaugherty">James Daugherty</reporter>
                        <labels>
                    </labels>
                <created>Thu, 24 Oct 2024 15:41:02 +0000</created>
                <updated>Tue, 22 Apr 2025 17:55:59 +0000</updated>
                            <resolved>Fri, 25 Oct 2024 17:55:24 +0000</resolved>
                                    <version>4.0.0</version>
                                    <fixVersion>4.0.24</fixVersion>
                                    <component>Compiler</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17892625" author="jdaugherty" created="Thu, 24 Oct 2024 22:00:18 +0000"  >&lt;p&gt;James Fredley put together a simple change that shows how logging this initially as a warning would work:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/jamesfredley/groovy/commit/22ad87622e0c03bb7327124ba472cac20b6203c4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jamesfredley/groovy/commit/22ad87622e0c03bb7327124ba472cac20b6203c4&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;He also confirmed this fixes our issues on the Groovy 4 upgrade.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17892642" author="emilles" created="Thu, 24 Oct 2024 23:53:22 +0000"  >&lt;p&gt;The examples do not indicate any relationship between Parent and Child&lt;/p&gt;</comment>
                            <comment id="17892643" author="emilles" created="Fri, 25 Oct 2024 00:05:32 +0000"  >&lt;p&gt;Also, type vars do not apply to static members, so I don&#8217;t know what this is supposed to do. &lt;/p&gt;</comment>
                            <comment id="17892647" author="jdaugherty" created="Fri, 25 Oct 2024 02:13:23 +0000"  >&lt;p&gt;I realized I didn&apos;t extend Parent, here&apos;s the full example.&#160; This works on groovy 3.x, but not on 4.x:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.Map
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.List

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;DatastoreHolder {
    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, List&amp;gt; datastore = [:].withDefault { [] }
}

trait GormEntity&amp;lt;D&amp;gt; {
    &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getEntityName()

    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; List&amp;lt;D&amp;gt; getAll() {
        DatastoreHolder.datastore.get(getEntityName())
    }
}

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Parent &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; GormEntity&amp;lt;Parent&amp;gt; {
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name

    Parent() {
        DatastoreHolder.datastore.get(&lt;span class=&quot;code-quote&quot;&gt;&quot;Parent&quot;&lt;/span&gt;).add(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;)
    }

    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getEntityName() {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;Parent&quot;&lt;/span&gt;
    }
}

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Child &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Parent &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; GormEntity&amp;lt;Child&amp;gt; {
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; otherField

    Child() {
        &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;()
        DatastoreHolder.datastore.get(&lt;span class=&quot;code-quote&quot;&gt;&quot;Child&quot;&lt;/span&gt;).add(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;)
    }

    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getEntityName() {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;Child&quot;&lt;/span&gt;
    }
}

Parent p = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Parent()
Child c = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Child()

&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; expected = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;( Parent.getAll().size() != 2) {
        expected = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Parent not expected: ${Parent.getAll()}&quot;&lt;/span&gt;)
}

&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(Child.getAll().size() != 1) {
        expected = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Child not expected: ${Child.getAll()[0]} vs ${c}&quot;&lt;/span&gt;)
}

&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(expected) {
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Expected&quot;&lt;/span&gt;)
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17892649" author="jdaugherty" created="Fri, 25 Oct 2024 02:16:20 +0000"  >&lt;p&gt;As for static, the same issue will exist with non-static methods:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.Map
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.List

trait GormEntity&amp;lt;D&amp;gt; {
    D refresh() {
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;
    }
}

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Parent &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; GormEntity&amp;lt;Parent&amp;gt; {
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name
}

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Child &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Parent &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; GormEntity&amp;lt;Child&amp;gt; {
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; otherField
}

Parent p = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Parent()
Child c = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Child()

&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(p.refresh() != p) {
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Unexpected&quot;&lt;/span&gt;)
}

&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(c.refresh() != c) {
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Unexpected&quot;&lt;/span&gt;)
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17892651" author="jdaugherty" created="Fri, 25 Oct 2024 02:24:05 +0000"  >&lt;p&gt;As for static example, the class file that&apos;s generated in 3.x shows:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Child Class:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Child &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Parent &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; GormEntity&amp;lt;Child&amp;gt; {
    &lt;span class=&quot;code-comment&quot;&gt;// Only including the getAll method() &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; discussion purposes
&lt;/span&gt; &#160; &#160;@TraitBridge(
    traitClass = GormEntity.class,
    desc = &lt;span class=&quot;code-quote&quot;&gt;&quot;()Ljava/util/List;&quot;&lt;/span&gt;
    )  
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; List&amp;lt;Child&amp;gt; getAll() {
        CallSite[] var0 = $getCallSiteArray();
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (List)ScriptBytecodeAdapter.castToType(var0[4].call(GormEntity$Trait$Helper.class, Child.class), List.class);
    }
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Parent Class&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Parent &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; GormEntity&amp;lt;Parent&amp;gt;, GroovyObject {
 &#160; &#160; &lt;span class=&quot;code-comment&quot;&gt;// Only including the getAll method() &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; discussion purposes
&lt;/span&gt; &#160; &#160; @TraitBridge(
    traitClass = GormEntity.class,
    desc = &lt;span class=&quot;code-quote&quot;&gt;&quot;()Ljava/util/List;&quot;&lt;/span&gt; 
    )
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; List&amp;lt;Parent&amp;gt; getAll() {
        CallSite[] var0 = $getCallSiteArray();
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (List)ScriptBytecodeAdapter.castToType(var0[4].call(GormEntity$Trait$Helper.class, Parent.class), List.class);
    }
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Groovy 3 chose the method from the last declared trait per the docs (&lt;a href=&quot;https://docs.groovy-lang.org/latest/html/documentation#_default_conflict_resolution&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.groovy-lang.org/latest/html/documentation#_default_conflict_resolution&lt;/a&gt;).&#160;&#160; This resolution logic seems to apply regardless if a method is static.&#160; The data mapping project in Grails took advantage of this so that a child would invoke the child specific code, while a parent would invoke the parent one.&lt;/p&gt;</comment>
                            <comment id="17892652" author="jdaugherty" created="Fri, 25 Oct 2024 02:33:15 +0000"  >&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;As for the static method behavior, given this code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.Map
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.List

trait GormEntity&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; {
    &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getEntityName()

    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; getAll() {
        [3]
    }
}

trait GormEntity2&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; {
    &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getEntityName()

    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; getAll() {
        [2]
    }
}

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Parent &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; GormEntity, GormEntity2 {
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name
}

Parent p = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Parent() &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Groovy 3 generates this code on the parent class for the getAll() method:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@TraitBridge(
    traitClass = GormEntity2.class,
    desc = &lt;span class=&quot;code-quote&quot;&gt;&quot;()Ljava/util/List;&quot;&lt;/span&gt;
)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; getAll() {
    CallSite[] var0 = $getCallSiteArray();
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (List)ScriptBytecodeAdapter.castToType(var0[2].call(GormEntity2$Trait$Helper.class, Parent.class), List.class);
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Groovy 4 generates this code on the parent class for the getAll() method:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@TraitBridge(
    traitClass = GormEntity2.class,
    desc = &lt;span class=&quot;code-quote&quot;&gt;&quot;()Ljava/util/List;&quot;&lt;/span&gt;
)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; getAll() {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ((&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;)GormEntity2$Trait$Helper.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;invoke&amp;lt;invokedynamic&amp;gt;(GormEntity2$Trait$Helper.class, Parent.class)).&lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt;&amp;lt;invokedynamic&amp;gt;(GormEntity2$Trait$Helper.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;invoke&amp;lt;invokedynamic&amp;gt;(GormEntity2$Trait$Helper.class, Parent.class));
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So it seems that v3 &amp;amp; v4 are consistent with copying the last declared trait&apos;s static method to the class.&lt;/p&gt;</comment>
                            <comment id="17892777" author="emilles" created="Fri, 25 Oct 2024 12:44:05 +0000"  >&lt;p&gt;This is java:&lt;br/&gt;
 &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13072429/13072429_screenshot-1.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;/p&gt;

&lt;p&gt;And here is what I see for your trait:&lt;br/&gt;
 &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13072430/13072430_screenshot-2.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;/p&gt;

&lt;p&gt;And &lt;tt&gt;getEntityName()&lt;/tt&gt; says illegal combination of modifiers.&lt;/p&gt;

&lt;p&gt;So, there is a lot to unpack here.&lt;/p&gt;</comment>
                            <comment id="17892779" author="emilles" created="Fri, 25 Oct 2024 12:47:07 +0000"  >&lt;p&gt;A typical case of self-referential type args looks like ths:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;trait&lt;/span&gt; T&amp;lt;SELF &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; T&amp;lt;SELF&amp;gt;&amp;gt; {
  SELF getSelf() { &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; }
}
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;C &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; T&amp;lt;C&amp;gt; {
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13072431/13072431_screenshot-3.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;/p&gt;

&lt;p&gt;This could be further extended with a bridge method:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;D &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; C {
  @Override
  D getSelf() {
    &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.getSelf()
  }
}

&lt;span class=&quot;code-keyword&quot;&gt;def&lt;/span&gt; d = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; D().self
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17892781" author="emilles" created="Fri, 25 Oct 2024 12:52:04 +0000"  >&lt;p&gt;Probably a more fitting version of this for your case:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;trait&lt;/span&gt; T&amp;lt;U&amp;gt; {
  U getSelf() { &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; }
}
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;C&amp;lt;SELF &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; C&amp;lt;SELF&amp;gt;&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; T&amp;lt;SELF&amp;gt; {
}
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;D &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; C&amp;lt;D&amp;gt; {
}

&lt;span class=&quot;code-keyword&quot;&gt;def&lt;/span&gt; c = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; C().self
&lt;span class=&quot;code-keyword&quot;&gt;def&lt;/span&gt; d = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; D().self
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17892803" author="githubbot" created="Fri, 25 Oct 2024 13:43:05 +0000"  >&lt;p&gt;jamesfredley opened a new pull request, #2117:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/2117&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/2117&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-11508&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/GROOVY-11508&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   This PR converts the `RuntimeParserException`, which stops compilation, to a more detailed warning about using a `Trait` or `Interface` with more than one generic type parameter via inheritance.  &lt;/p&gt;

&lt;p&gt;   Resolves &lt;a href=&quot;https://github.com/grails/grails-data-mapping/issues/1811&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/grails/grails-data-mapping/issues/1811&lt;/a&gt; which is a significant open issue for the Groovy 3.0.x to 4.0.x upgrade in preparation for Grails 7.  Grails 6 and lower were still on Groovy 3.0.x.&lt;/p&gt;

&lt;p&gt;   Precise simplified example of the code which results in the exception with Groovy 4.0.x compiler:  &lt;a href=&quot;https://github.com/grails/grails-data-mapping/issues/1811#issue-2481317054&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/grails/grails-data-mapping/issues/1811#issue-2481317054&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   &lt;a href=&quot;https://github.com/grails/grails-data-mapping/issues/1811#issuecomment-2419515195&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/grails/grails-data-mapping/issues/1811#issuecomment-2419515195&lt;/a&gt; - the decompiled Grails Domain Classes, compiled with Groovy 4.0.23, after changing the exception to a warning.   These Grails Domains, with inheritance, compile and run without issue once the exception is removed during pre-compilation verification.   &lt;/p&gt;

&lt;p&gt;   In each instance the `Trait` or `Interface` which is implemented with 2+ generic types via inheritance, have generic types which are compatible and extend in a lineage hierarchy.  &lt;/p&gt;

&lt;p&gt;   The Groovy 4 compiler only copies the lowest level Trait or Interface methods into the class, before compiling, which was the approach in Groovy 3 and same and expected approach in Groovy 4.&lt;/p&gt;

&lt;p&gt;   Example output after restoring Domain Inheritance and Inheritance tests on &lt;a href=&quot;https://github.com/grails/grails-data-mapping/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/grails/grails-data-mapping/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   ```&lt;br/&gt;
   &amp;gt; Task :grails-datastore-gorm-tck:compileGroovy&lt;br/&gt;
   Warning:  on grails.gorm.tests.City the interface GormEntity was implemented more than once with different arguments: org.grails.datastore.gorm.GormEntity&amp;lt;grails.gorm.tests.City&amp;gt; and org.grails.datastore.gorm.GormEntity&amp;lt;grails.gorm.tests.Location&amp;gt;,  grails.gorm.tests.City will only implement the lowest level GormEntity&lt;br/&gt;
   Warning:  on grails.gorm.tests.City the interface GormEntityApi was implemented more than once with different arguments: org.grails.datastore.gorm.GormEntityApi&amp;lt;grails.gorm.tests.City&amp;gt; and org.grails.datastore.gorm.GormEntityApi&amp;lt;grails.gorm.tests.Location&amp;gt;,  grails.gorm.tests.City will only implement the lowest level GormEntityApi&lt;br/&gt;
   Warning:  on grails.gorm.tests.City the interface Entity was implemented more than once with different arguments: grails.gorm.Entity&amp;lt;grails.gorm.tests.City&amp;gt; and grails.gorm.Entity&amp;lt;grails.gorm.tests.Location&amp;gt;,  grails.gorm.tests.City will only implement the lowest level Entity&lt;br/&gt;
   Warning:  on grails.gorm.tests.Country the interface GormEntity was implemented more than once with different arguments: org.grails.datastore.gorm.GormEntity&amp;lt;grails.gorm.tests.Country&amp;gt; and org.grails.datastore.gorm.GormEntity&amp;lt;grails.gorm.tests.Location&amp;gt;,  grails.gorm.tests.Country will only implement the lowest level GormEntity&lt;br/&gt;
   Warning:  on grails.gorm.tests.Country the interface GormEntityApi was implemented more than once with different arguments: org.grails.datastore.gorm.GormEntityApi&amp;lt;grails.gorm.tests.Country&amp;gt; and org.grails.datastore.gorm.GormEntityApi&amp;lt;grails.gorm.tests.Location&amp;gt;,  grails.gorm.tests.Country will only implement the lowest level GormEntityApi&lt;br/&gt;
   Warning:  on grails.gorm.tests.Country the interface Entity was implemented more than once with different arguments: grails.gorm.Entity&amp;lt;grails.gorm.tests.Country&amp;gt; and grails.gorm.Entity&amp;lt;grails.gorm.tests.Location&amp;gt;,  grails.gorm.tests.Country will only implement the lowest level Entity&lt;br/&gt;
   ```&lt;/p&gt;


</comment>
                            <comment id="17892810" author="jdaugherty" created="Fri, 25 Oct 2024 13:50:04 +0000"  >&lt;p&gt;Concerning this example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
trait T&amp;lt;U&amp;gt; {
  U getSelf() { &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; }
}
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;C&amp;lt;SELF &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; C&amp;lt;SELF&amp;gt;&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; T&amp;lt;SELF&amp;gt; {
}
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;D &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; C&amp;lt;D&amp;gt; {
}

def c = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; C().self
def d = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; D().self &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This doesn&apos;t work for our case since the method isn&apos;t generated on the Child as an overload like in Groovy 3.x - it only exists on the trait.&#160; This means there&apos;s only 1 method that returns only the parent type.&#160; The ORM we&apos;re implementing multiple inheritance for allows querying on the shared types (Parent + Child) or&#160; Child based on which method is called.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;As for Java example, Java also doesn&apos;t support multiple inheritance, while Groovy has historically.&#160; The issue on our side is the copy method behavior was relied on to implement behavior &amp;amp; is documented in the groovy docs.&#160; One of our proposals was to make this a warning or add a compiler flag to opt-in to this behavior given how Groovy has handled this historically.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17892811" author="emilles" created="Fri, 25 Oct 2024 13:50:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8864&quot; title=&quot;Backwards compatibility of traits&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8864&quot;&gt;&lt;del&gt;GROOVY-8864&lt;/del&gt;&lt;/a&gt; touches on this briefly.  It appears to be the only test for static member making use of type vars.&lt;/p&gt;

&lt;p&gt;I&apos;m not quite ready for a PR as I&apos;m trying to understand the situation.&lt;/p&gt;</comment>
                            <comment id="17892851" author="jdaugherty" created="Fri, 25 Oct 2024 15:33:26 +0000"  >&lt;p&gt;This quote from &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8864&quot; title=&quot;Backwards compatibility of traits&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8864&quot;&gt;&lt;del&gt;GROOVY-8864&lt;/del&gt;&lt;/a&gt; is why this ticket is so painful: &quot;However, a trait isn&apos;t a class but rather a mechanism for creating classes.&quot;&#160;&#160; The trait is copying methods down to the implementing class and grails-data-mapping relied on this copy behavior.&#160;&lt;/p&gt;

&lt;p&gt;If we weren&apos;t using generics, we could traditionally implement this by creating a trait per class:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
trait GormEntityParent {
&#160; &#160; Parent myMethod() {
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;
&#160; &#160; }
}

trait GormEntityChild {
&#160; &#160; Child myMethod() {
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;&#160;
&#160; &#160; }
}
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Parent &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; GormEntityParent {
&#160; &#160;&#160;
}

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Child &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Parent &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; GormEntityChild {
&#160; &#160;&#160;
}&#160;

Parent p = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Parent()
&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(p.myMethod())

Child c = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Child()
&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(c.myMethod())&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This compiles in Groovy 4.&#160; If you view the trait as a mechanism for creating classes, then Introducing a generic allows us to not have to create a trait per implementation because of the copy strategy mentioned in the documentation.&#160;&lt;/p&gt;

&lt;p&gt;Also, since &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-5106&quot; title=&quot;Same interface can be implemented with two different generic types&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-5106&quot;&gt;&lt;del&gt;GROOVY-5106&lt;/del&gt;&lt;/a&gt; breaks backwards compatibility with Groovy 3.x, it would make sense for this to be a warning in Groovy 4 &amp;amp; a restriction in Groovy 5 instead.&lt;/p&gt;</comment>
                            <comment id="17892860" author="blackdrag" created="Fri, 25 Oct 2024 16:11:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdaugherty&quot; class=&quot;user-hover&quot; rel=&quot;jdaugherty&quot;&gt;jdaugherty&lt;/a&gt;&lt;br/&gt;
I think that we are talking about a trait is a bit of a false flag in the end. This code here&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; GormEntity&amp;lt;D&amp;gt; {}
    &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Child &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; GormEntity&amp;lt;Child&amp;gt; {}
    &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Parent &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Child &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; GormEntity&amp;lt;Parent&amp;gt; {}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Has no traits, no (static) methods nothing, still the Java compiler does not accept this. The connection to traits comes in play if you do not forget that there is the trait GormEntity for Groovy, but for the JVM this consists of the interface of the same name and some helper classes. Which means we get exactly the above situation, even if you remove all the otherwise generated code.&lt;br/&gt;
And for the reasoning behind this I have this here &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8030724&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.org/browse/JDK-8030724&lt;/a&gt; as an interesting read.&lt;/p&gt;

&lt;p&gt;Then there is the issue with the injected method getAll. In case of&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
trait GormEntity&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; {
    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; getAll() {&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;}
}
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Parent &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; GormEntity {}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Here Integer is not the class Integer, it is the generics placeholder like you normally use T:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
trait GormEntity&amp;lt;D&amp;gt; {
    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; List&amp;lt;D&amp;gt; getAll() {&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;}
}
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Parent &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; GormEntity {}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Since the base type for D is Object using GormEntity is equal to GormEntity&amp;lt;Object&amp;gt;&lt;/p&gt;

&lt;p&gt;Now coming back to the original problem.... According to &lt;a href=&quot;http://docs.groovy-lang.org/docs/groovy-2.3.0/html/documentation/core-traits.html#_default_conflict_resolution&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.groovy-lang.org/docs/groovy-2.3.0/html/documentation/core-traits.html#_default_conflict_resolution&lt;/a&gt; we have a conflict resolution specified in case of two traits providing a method with equal signature. That means in case of X implements GormEntity&amp;lt;String&amp;gt;, GormEntity&amp;lt;Integer&amp;gt; we would have a getAll returning List&amp;lt;Integer&amp;gt; and in the reverse case List&amp;lt;String&amp;gt;. Let us assume we have&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
trait GormEntity&amp;lt;D1&amp;gt; {
     List&amp;lt;D1&amp;gt; getAll() {&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;}
}
trait GormEntity2&amp;lt;D2&amp;gt; {
     List&amp;lt;D2&amp;gt; getAll() {&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;}
}
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Child &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; GormEntity&amp;lt;Child&amp;gt;{}
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Parent &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Child &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; GormEntity2&amp;lt;Parent&amp;gt; {}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So without the static modifier. Then we get a List&amp;lt;Child&amp;gt;, that looks like List&amp;lt;Object&amp;gt; in Child and a List&amp;lt;Parent&amp;gt;, that looks like List&amp;lt;Object&amp;gt; in Parent, overriding the one in child, because the method signatures are equal after type erasure. That means Parent will have the method from GormEntity2. Now assume this in Java:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Parent parent = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Parent()
Child child = parent
List&amp;lt;Child&amp;gt; lc = child.getAll()
List&amp;lt;Parent&amp;gt; ld = parent.getAll()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;How can calling the same method produce one time List&amp;lt;Child&amp;gt; and another time List&amp;lt;Parent&amp;gt;? It cannot, and the Java compiler would refuse compiling the line for lc.. Therefore I am not really too keen on allowing the implementation of multiple parametrized interfaces of same name with different parameter configurations. In theory it could be allowed unless there is a conflict, but then there is the recompilation issue... feels like a can of worms to reopen here.&lt;/p&gt;

&lt;p&gt;Which means for me that the case of a static modifier is actually something where we have to take different aspects into consideration. One of them being that static methods are not really inherited like in the last variant. Parent.getAll() can call a different method than Child.getAll(). And &lt;a href=&quot;http://docs.groovy-lang.org/docs/groovy-2.3.0/html/documentation/core-traits.html#_static_methods_properties_and_fields&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.groovy-lang.org/docs/groovy-2.3.0/html/documentation/core-traits.html#_static_methods_properties_and_fields&lt;/a&gt; states that static methods are experimental.&lt;/p&gt;

&lt;p&gt;My suggestion would be to modify the way static aspects work by add an annotation preventing the trait interface to be added to the class receiving the trait.&lt;/p&gt;

&lt;p&gt;This would solve the problem for the static methods by simply putting them in a trait and use the annotation for the marker interface to not be used. Looking at &lt;a href=&quot;https://github.com/grails/grails-data-mapping/blob/9.0.x/grails-datastore-gorm/src/main/groovy/org/grails/datastore/gorm/GormEntity.groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/grails/grails-data-mapping/blob/9.0.x/grails-datastore-gorm/src/main/groovy/org/grails/datastore/gorm/GormEntity.groovy&lt;/a&gt;  I see two more groups of methods though... MOP related methods without generics, which are no problem... but then also methods like save(). Or as you mentioned already, refresh().&lt;/p&gt;

&lt;p&gt;There would be in theory a solution using extension methods. Of course that means they are not callable from Java, not normally.&lt;/p&gt;</comment>
                            <comment id="17892868" author="githubbot" created="Fri, 25 Oct 2024 16:34:05 +0000"  >&lt;p&gt;eric-milles closed pull request #2117: &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-11508&quot; title=&quot;Multiple traits with related generic types cannot be used&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-11508&quot;&gt;&lt;del&gt;GROOVY-11508&lt;/del&gt;&lt;/a&gt;: change exception to detailed warning&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/2117&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/2117&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="17892869" author="githubbot" created="Fri, 25 Oct 2024 16:34:06 +0000"  >&lt;p&gt;eric-milles commented on PR #2117:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/2117#issuecomment-2438278862&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/2117#issuecomment-2438278862&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   I relaxed from an error to a warning for traits:&lt;/p&gt;

&lt;p&gt;   &lt;a href=&quot;https://github.com/apache/groovy/commit/9d0d67197eb8cd333e973b08d4d0f4b7f3f41475&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/9d0d67197eb8cd333e973b08d4d0f4b7f3f41475&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="17892871" author="jdaugherty" created="Fri, 25 Oct 2024 16:42:16 +0000"  >&lt;p&gt;The java compiler does accept this implementation:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ParentJava {
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; ParentJava parentMethod() {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
    }
}

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ChildJava &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; ParentJava {
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; ChildJava parentMethod() {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
    }
}
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The trait was being used for a way to copy the method behavior to the class.&#160; From the last comment on the java ticket: &quot;javac supports covariant return types&quot;.&#160; That&apos;s the situation we&apos;re wanting to implement with trait generics but &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-5106&quot; title=&quot;Same interface can be implemented with two different generic types&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-5106&quot;&gt;&lt;del&gt;GROOVY-5106&lt;/del&gt;&lt;/a&gt; breaks.&#160; The generated code is still valid java since they have covariant return types.&lt;/p&gt;</comment>
                            <comment id="17892872" author="emilles" created="Fri, 25 Oct 2024 16:49:36 +0000"  >&lt;p&gt;&quot;Also, since &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-5106&quot; title=&quot;Same interface can be implemented with two different generic types&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-5106&quot;&gt;&lt;del&gt;GROOVY-5106&lt;/del&gt;&lt;/a&gt; breaks backwards compatibility with Groovy 3.x, it would make sense for this to be a warning in Groovy 4 &amp;amp; a restriction in Groovy 5 instead.&quot;&lt;/p&gt;

&lt;p&gt;Since this checking was introduced in 4.0.0, the error was the correct choice IMO.  There have been 23 point fixes since...  So I have a different take on the criticality.&lt;/p&gt;

&lt;p&gt;I will have a look at &quot;abstract static&quot; methods and static members referencing type vars in traits for Eclipse IDE integration.  Not too sure how I can represent these things to the Java model &amp;#8211; the parallel would be the stubs that the Groovy compiler generates in joint compilation mode.&lt;/p&gt;</comment>
                            <comment id="17892876" author="githubbot" created="Fri, 25 Oct 2024 17:08:56 +0000"  >&lt;p&gt;eric-milles commented on PR #2117:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/2117#issuecomment-2438361044&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/2117#issuecomment-2438361044&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   This should stop the errors for `Entity` and `GormEntity`.  However, you may still get an error for the interface `GormEntityApi` per your example.  You can try out the snapshot build and let me know: &lt;a href=&quot;https://groovy.apache.org/snapshots.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://groovy.apache.org/snapshots.html&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="17892877" author="jdaugherty" created="Fri, 25 Oct 2024 17:11:48 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=emilles&quot; class=&quot;user-hover&quot; rel=&quot;emilles&quot;&gt;emilles&lt;/a&gt; , James Fredley is going to test it out.&lt;/p&gt;</comment>
                            <comment id="17892964" author="githubbot" created="Fri, 25 Oct 2024 17:41:49 +0000"  >&lt;p&gt;jamesfredley commented on PR #2117:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/2117#issuecomment-2438428975&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/2117#issuecomment-2438428975&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   @eric-milles Thank you for the quick turnaround.  We converted `GormEntityApi` to a `Trait` and are able to move forward.&lt;/p&gt;

&lt;p&gt;   &lt;a href=&quot;https://github.com/grails/grails-data-mapping/pull/1834&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/grails/grails-data-mapping/pull/1834&lt;/a&gt;&lt;/p&gt;

</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="12815789">GROOVY-5106</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13195315">GROOVY-8864</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13072429" name="screenshot-1.png" size="16177" author="emilles" created="Fri, 25 Oct 2024 12:39:47 +0000"/>
                            <attachment id="13072430" name="screenshot-2.png" size="19665" author="emilles" created="Fri, 25 Oct 2024 12:41:46 +0000"/>
                            <attachment id="13072431" name="screenshot-3.png" size="15220" author="emilles" created="Fri, 25 Oct 2024 12:47:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>groovy</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1s6xc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>