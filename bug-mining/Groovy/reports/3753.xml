<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:05:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-9452] Multiple Repeatable Annotations Container generated if an explicit container is present and an implicit one required</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-9452</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Given:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;an annotation&#160;&lt;tt&gt;A&lt;/tt&gt; with&#160;&lt;tt&gt;String&lt;/tt&gt;&#160;&lt;tt&gt;value&lt;/tt&gt; which is repeatable with container annotation &lt;tt&gt;As&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;If you in Java write&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@A(&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;)
@As({
  @A(&lt;span class=&quot;code-quote&quot;&gt;&quot;c&quot;&lt;/span&gt;)
  @A(&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;)
}) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;this is transported 1:1 to the byte code and if you use &lt;tt&gt;getAnnotationsByType(A.class)&lt;/tt&gt; you properly get all three annotations.&lt;/p&gt;

&lt;p&gt;If you in Java write&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@A(&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;)
@A(&lt;span class=&quot;code-quote&quot;&gt;&quot;b&quot;&lt;/span&gt;)
@As({
  @A(&lt;span class=&quot;code-quote&quot;&gt;&quot;c&quot;&lt;/span&gt;)
  @A(&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;)
}) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;you get a compile error saying that this does not work.&lt;/p&gt;

&lt;p&gt;If you in Groovy write&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@A(&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;)
@As([
  @A(&lt;span class=&quot;code-quote&quot;&gt;&quot;c&quot;&lt;/span&gt;)
  @A(&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;)
]) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;this is transported 1:1 to the byte code and if you use &lt;tt&gt;getAnnotationsByType(A.class)&lt;/tt&gt; you properly get all three annotations.&lt;br/&gt;
All ok.&lt;/p&gt;

&lt;p&gt;But now comes the issue.&lt;br/&gt;
If you in Groovy write&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@A(&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;)
@A(&lt;span class=&quot;code-quote&quot;&gt;&quot;b&quot;&lt;/span&gt;)
@As([
  @A(&lt;span class=&quot;code-quote&quot;&gt;&quot;c&quot;&lt;/span&gt;)
  @A(&lt;span class=&quot;code-quote&quot;&gt;&quot;d&quot;&lt;/span&gt;)
]) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;you end up with two &lt;tt&gt;@As&lt;/tt&gt; annotations in the final class file.&lt;br/&gt;
If you then try to read annotations for example at runtime, you get&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.annotation.AnnotationFormatError: Duplicate annotation &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; class: &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; As: @As(value=[@A(value=&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;), @A(value=&lt;span class=&quot;code-quote&quot;&gt;&quot;b&quot;&lt;/span&gt;)])
	at sun.reflect.annotation.AnnotationParser.parseAnnotations2(AnnotationParser.java:125)
	at sun.reflect.annotation.AnnotationParser.parseAnnotations(AnnotationParser.java:72)
	at java.lang.reflect.Executable.declaredAnnotations(Executable.java:599)
	at java.lang.reflect.Executable.declaredAnnotations(Executable.java:597)
	at java.lang.reflect.Executable.getAnnotation(Executable.java:570)
	at java.lang.reflect.Method.getAnnotation(Method.java:622)
        ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So the Groovy compiler should probably also refuse to go on if there are mutliple single instances of a repeatable annotation if the respective container annotation is already present.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13290559">GROOVY-9452</key>
            <summary>Multiple Repeatable Annotations Container generated if an explicit container is present and an implicit one required</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="vampire">Bj&#246;rn Kautler</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Mar 2020 15:02:45 +0000</created>
                <updated>Wed, 11 Nov 2020 02:00:58 +0000</updated>
                            <resolved>Sat, 4 Apr 2020 05:49:35 +0000</resolved>
                                    <version>2.5.8</version>
                    <version>3.0.0</version>
                                    <fixVersion>4.0.0-alpha-1</fixVersion>
                    <fixVersion>3.0.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="2400">40m</timespent>
                                <comments>
                            <comment id="17055272" author="paulk" created="Mon, 9 Mar 2020 17:59:30 +0000"  >&lt;p&gt;That does indeed sound like the right thing to do - certainly for runtime and class annotations, but possibly doesn&apos;t matter for source only annotations. There might be @Grab/@Grapes duplicates in the wild already.&lt;/p&gt;</comment>
                            <comment id="17075038" author="paulk" created="Sat, 4 Apr 2020 05:49:35 +0000"  >&lt;p&gt;Proposed PR merged.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 32 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0cbzc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>