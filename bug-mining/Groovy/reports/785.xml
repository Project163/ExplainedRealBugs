<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:08:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-3054] ClassFormatError: Illegal class name Exception when running a script from a folder with dot in its name</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-3054</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;To reproduce this error just generate a folder with the name &quot;test-7.2&quot;&lt;br/&gt;
and generate in it an easy script file named Test:&lt;/p&gt;

&lt;p&gt;//script file&lt;br/&gt;
println &apos;foo&apos;&lt;/p&gt;

&lt;p&gt;When you run this script the following Exception is thrown:&lt;br/&gt;
Caught: java.lang.ClassFormatError: Illegal class name &quot;test-7&quot; in class file test-7&lt;/p&gt;

&lt;p&gt;If you rename the file to something with a dot extension (e.g. Test.groovy or Test.test) it works.&lt;/p&gt;</description>
                <environment>Ubuntu 7.10&lt;br/&gt;
SunOS 5.10</environment>
        <key id="12818363">GROOVY-3054</key>
            <summary>ClassFormatError: Illegal class name Exception when running a script from a folder with dot in its name</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="mszalbach">Marcel Szalbach</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Sep 2008 05:57:04 +0000</created>
                <updated>Wed, 16 Sep 2009 16:19:03 +0000</updated>
                            <resolved>Sun, 16 Nov 2008 00:53:37 +0000</resolved>
                                    <version>1.5.6</version>
                                    <fixVersion>1.6-rc-1</fixVersion>
                    <fixVersion>1.5.8</fixVersion>
                    <fixVersion>1.7-beta-1</fixVersion>
                                    <component>bytecode</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14478325" author="paulk" created="Fri, 14 Nov 2008 16:17:36 +0000"  >&lt;p&gt;Doesn&apos;t appear to be a problem on Windows on trunk using the batch startup script&lt;/p&gt;</comment>
                            <comment id="14465531" author="blackdrag" created="Fri, 14 Nov 2008 18:46:23 +0000"  >&lt;p&gt;the environment is Ubuntu, so it is the shell scripts for linux. We source the startGroovy script using &quot;.&quot;, maybe that is the reason.. I think there is an alternative way to do that.... on the other hand I don&apos;t see a direct relation&lt;/p&gt;</comment>
                            <comment id="14478333" author="mszalbach" created="Sat, 15 Nov 2008 08:25:26 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;thanks for the reply and the hint with the sourcing with the dot.&lt;br/&gt;
I did some debugging and testing with the linux commands. &lt;/p&gt;

&lt;p&gt;Here are some points I found out:&lt;/p&gt;

&lt;p&gt;I changed the &quot;groovy&quot; script to a bash function and use the source command, to test if its a problem of sh only, but it also occurs.&lt;/p&gt;

&lt;p&gt;I checked the parameters given to the java command and the end of the startGroovy script.  They are the same for a groovy script in an folder with dot in its name and not and for a script ending with .groovy in a dot folder (which will also work).&lt;/p&gt;

&lt;p&gt;I also tested this behavior on Windows Vista and the problem occurs also with  groovy 1.5.6.&lt;/p&gt;

&lt;p&gt;Mr King could you please test it again with windows and the following settings:&lt;br/&gt;
Folder name: &quot;test-7.2&quot;&lt;br/&gt;
File name: &quot;Test&quot;&lt;br/&gt;
It is important that the file has no file extension (check if maybe your Windows hides the extensions, because this is default setting)&lt;br/&gt;
The script should not have any class definition in it, just:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;Test&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;//script file
&lt;/span&gt;println &lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;From this tests I would say that the problem is not related to Linux or the start shell scripts. The Problem lies in the conversion from a classless groovy script to a java class file. I also think this problem affects Windows XP ( I did not test it, but if you wish, I can deliver test results for this too.)&lt;/p&gt;


&lt;p&gt;Currently the only workaround I have found is to give the file an extension(&quot;.groovy&quot;, &quot;.script&quot; etc.) or to define a class in the groovy file:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;Test&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Script{
  def main( args ) {
      println &lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt;
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="14478334" author="paulk" created="Sat, 15 Nov 2008 13:59:28 +0000"  >&lt;p&gt;Interesting. I was using &lt;tt&gt;test.7&lt;/tt&gt; as my folder name before. I just tried these names:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;C:\temp&amp;gt; groovy test.7.2\Script
Sun Nov 16 05:39:51 EST 2008

C:\temp&amp;gt; groovy test-7-2\Script
Sun Nov 16 05:39:57 EST 2008

C:\temp&amp;gt; groovy test.7-2\Script
Sun Nov 16 05:43:48 EST 2008

C:\temp&amp;gt; groovy test-7.2\Script
Caught: java.lang.ClassFormatError: Illegal class name &quot;test-7&quot; in class file test-7
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then when I try &lt;tt&gt;groovyc&lt;/tt&gt; instead of &lt;tt&gt;groovy&lt;/tt&gt; I notice that the &lt;tt&gt;test.7.2&lt;/tt&gt; variation creates a directory &lt;tt&gt;test&lt;/tt&gt; containing a class &lt;tt&gt;7.class&lt;/tt&gt; which I can run while the &lt;tt&gt;test-7.2&lt;/tt&gt; variation creates a class called &lt;tt&gt;test-7.class&lt;/tt&gt; in the current directory which I can&apos;t run. I assumed that &apos;-&apos; was the problem in the name but it seems to have replaced that under the covers. The internal name is &lt;tt&gt;test_2D_7&lt;/tt&gt; and it appears to find it but then stops with:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception in thread &quot;main&quot; java.lang.ClassFormatError: Field &quot;this&quot; in class test-7 has illegal signature &quot;Ltest-7;&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14478326" author="paulk" created="Sat, 15 Nov 2008 14:48:37 +0000"  >&lt;p&gt;OK, I have a fix for this. Will commit soon.&lt;/p&gt;</comment>
                            <comment id="14478340" author="paulk" created="Sun, 16 Nov 2008 00:53:37 +0000"  >&lt;p&gt;fixed&lt;/p&gt;</comment>
                            <comment id="14467695" author="dillera" created="Wed, 16 Sep 2009 16:19:03 +0000"  >&lt;p&gt;This is broken in Mac OSX 10.6 with Groovy Shell (1.6.4, JVM: 1.6.0_15)&lt;/p&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;DIVWL-9KQHK92:~/work/local_src [508]$ groovy tc-info.groovy 
Caught: java.lang.ClassFormatError: Illegal class name &quot;groovyx/net/http/tc-info&quot; in class file groovyx/net/http/tc-info
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 10 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ctcv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>