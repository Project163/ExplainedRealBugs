<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:15:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-4061] Error trying to configure GroovyServlet to point to single groovy file for all URLs</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-4061</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;When trying to configure the GroovyServlet to direct all request to a single groovy script to be able to have dynamic RESTful URLs, a java.lang.StackOverflowError is thrown. What seems to be happening is something is recursively calling the getResource() method on the AbstractHttpServlet over and over always appending BeanInfo onto the name of the file. I&apos;ve attached a simple war file that demonstrates this. I&apos;ve also included the log file as well.&lt;/p&gt;</description>
                <environment>Tomcat 6 / JDK 6</environment>
        <key id="12815076">GROOVY-4061</key>
            <summary>Error trying to configure GroovyServlet to point to single groovy file for all URLs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="roshandawrani">Roshan Dawrani</assignee>
                                    <reporter username="tcomer">Tom Comer</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Feb 2010 15:09:56 +0000</created>
                <updated>Wed, 7 Apr 2010 23:47:07 +0000</updated>
                            <resolved>Wed, 17 Feb 2010 01:17:41 +0000</resolved>
                                    <version>1.7.0</version>
                                    <fixVersion>1.7.1</fixVersion>
                    <fixVersion>1.8-beta-1</fixVersion>
                                    <component>Groovlet / GSP</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14468914" author="roshandawrani" created="Mon, 15 Feb 2010 23:28:47 +0000"  >&lt;p&gt;What is happening here is that for the first access GroovyServlet/AbstractHttpServlet map &quot;/&quot; to &quot;rest.groovy&quot; and compiles rest.groovy fine. After that it tries to create a MetaClass object for the new class and in the MC init(), it tries to lookup its bean-info class (restBeanInfo.groovy) through the call to Introspector.getBeanInfo(Class&amp;lt;rest&amp;gt;). This look-up again goes through GroovyScriptEngine$ScriptClassLoader(), which again applies the resource-name-matching and now maps it &quot;/restBeanInfo.groovy&quot; to &quot;/rest.groovy&quot;, and this keeps happening recursively.&lt;/p&gt;

&lt;p&gt;Any suggestions on how to handle this special case?&lt;/p&gt;</comment>
                            <comment id="14468901" author="blackdrag" created="Tue, 16 Feb 2010 02:34:25 +0000"  >&lt;p&gt;I think it is impossible to support this directly with GSE. The URLs GSE looksup are not page requests in the first place, they are lookups for groovy sources and classes. The compiler will always ask for classes that may not exist, but giving an error page here is wrong, since that is not what GSE needs. I think it would be better to make a gateway servlet, that redirects the requests to GroovyServlet by changing the name into the script name or by directly extending AbstractServlet and do a service method that calls the method correctly&lt;/p&gt;</comment>
                            <comment id="14468948" author="tcomer" created="Tue, 16 Feb 2010 10:45:40 +0000"  >&lt;p&gt;I think I may have fixed the issue by modifying where the regex gets applied. Instead of doing it in the getResourceConnection() method, I moved the logic to the getScriptUri() method. When doing this, it makes 2 test cases fail, testGetResourceConnection_Replace1stFooWithBar() and testGetResourceConnection_ReplaceAllFooWithBar(), but that would be expected since the getResourceConnection() is no longer responsible for the regex replacement. I&apos;ve attached the new AbstractHttpServlet for review.&lt;/p&gt;</comment>
                            <comment id="14468915" author="roshandawrani" created="Tue, 16 Feb 2010 11:05:13 +0000"  >&lt;p&gt;I like the approach of the patch.&lt;/p&gt;

&lt;p&gt;In getScriptUri(), shouldn&apos;t it also cover the pattern matching when the request is coming from RequestDispatcher.include() case (first &quot;return uri;&quot; case in getScriptUri())?&lt;/p&gt;</comment>
                            <comment id="14468931" author="tcomer" created="Tue, 16 Feb 2010 12:12:49 +0000"  >&lt;p&gt;Good call. I&apos;ve updated the AbstractHttpServlet to account for this.&lt;/p&gt;</comment>
                            <comment id="14468869" author="roshandawrani" created="Tue, 16 Feb 2010 12:33:19 +0000"  >&lt;p&gt;Anyone sees any other issue with the patch? If not, I can apply it.&lt;/p&gt;</comment>
                            <comment id="14468997" author="guillaume" created="Tue, 16 Feb 2010 13:58:20 +0000"  >&lt;p&gt;I haven&apos;t tried the patch with Gaelyk (the issue was coming from there initially), but I bet Tom has tried it and it solves his issue.&lt;br/&gt;
So no objection for applying the patch, on the contrary!&lt;/p&gt;</comment>
                            <comment id="14468902" author="tcomer" created="Tue, 16 Feb 2010 19:11:38 +0000"  >&lt;p&gt;Yup, I tried it tonight with Gaelyk and it works just fine for me now.&lt;/p&gt;</comment>
                            <comment id="14468974" author="roshandawrani" created="Wed, 17 Feb 2010 01:17:41 +0000"  >&lt;p&gt;Applied the patch. Thanks for providing it.&lt;/p&gt;

&lt;p&gt;Pls let me know if the fix needs to be backported to 1.6.8 as well.&lt;/p&gt;</comment>
                            <comment id="14468891" author="guillaume" created="Wed, 17 Feb 2010 02:50:20 +0000"  >&lt;p&gt;Excellent, Tom, thanks a lot for your contribution, this is very much appreciated!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12722311" name="AbstractHttpServlet.java" size="16393" author="tcomer" created="Tue, 16 Feb 2010 12:13:46 +0000"/>
                            <attachment id="12722500" name="localhost.2010-02-15.log" size="186919" author="tcomer" created="Mon, 15 Feb 2010 15:09:56 +0000"/>
                            <attachment id="12722501" name="test.war" size="4511851" author="tcomer" created="Mon, 15 Feb 2010 15:12:36 +0000"/>
                            <attachment id="12722616" name="web.xml" size="964" author="tcomer" created="Mon, 15 Feb 2010 15:12:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 40 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2cbtr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>