<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:56:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-8213] Closures are maybe not Threadsafe</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-8213</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;I just upgraded our Gradle build from 1.12 (including Groovy 1.8.6) to 3.5 (including Groovy 2.4.10).&lt;br/&gt;
Now I get a very strange behavior for stuff that is there for years already and it looks to me as if this is a Groovy bug, maybe a non-threadsafeness of Closures.&lt;/p&gt;

&lt;p&gt;I have a custom task that contains the following code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;      def sourceFilesSize = getSourceFiles().files.size()
      def poolSize = &lt;span class=&quot;code-object&quot;&gt;Runtime&lt;/span&gt;.runtime.availableProcessors()
      def executor = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ThreadPoolExecutor(poolSize, poolSize, 0, SECONDS, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayBlockingQueue&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Runnable&lt;/span&gt;&amp;gt;([sourceFilesSize, 1].max()))
      def tasks = []
      inputs.outOfDate { toTransform -&amp;gt;
         tasks.add executor.submit {
            project.exec {
               &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (gscPath) { &lt;span class=&quot;code-comment&quot;&gt;// here starts com.empic.build.tasks.Ghostscript$_exec_closure8$_closure11
&lt;/span&gt;                  environment &lt;span class=&quot;code-quote&quot;&gt;&apos;GSC&apos;&lt;/span&gt;, gscPath
                  def tempDir = &lt;span class=&quot;code-quote&quot;&gt;&quot;$temporaryDir/${&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.currentThread().name}&quot;&lt;/span&gt;
                  project.file(tempDir).mkdirs()
                  environment &lt;span class=&quot;code-quote&quot;&gt;&apos;TEMP&apos;&lt;/span&gt;, tempDir
               }
               executable executablePath

               def arguments = [toTransform.file.absolutePath]
               &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((sourceFilesSize == 1) &amp;amp;&amp;amp; getDestinationFile()) {
                  arguments &amp;lt;&amp;lt; getDestinationFile().absolutePath
               } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (destinationDirectory) {
                  arguments &amp;lt;&amp;lt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(destinationDirectory, fileNameMapping(toTransform.file.name)).absolutePath
               } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                  arguments &amp;lt;&amp;lt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(toTransform.file.parentFile, fileNameMapping(toTransform.file.name)).absolutePath
               }
               args arguments &lt;span class=&quot;code-comment&quot;&gt;// here ends com.empic.build.tasks.Ghostscript$_exec_closure8$_closure11
&lt;/span&gt;            }
         }
      }
      executor.shutdown()
      executor.awaitTermination 1, HOURS
      tasks*.get() &lt;span class=&quot;code-comment&quot;&gt;// here is line 137&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When this task is executed e. g. with five source files, sometimes all works fine, sometime the build fails with&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;...
Caused by: java.util.concurrent.ExecutionException: java.lang.IllegalStateException: initialize must be called for meta class of class com.empic.build.tasks.Ghostscript$_exec_closure8$_closure11(class org.codehaus.groovy.runtime.metaclass.ClosureMetaClass) to complete initialisation process before any invocation or field/property access can be done
        at com.empic.build.tasks.Ghostscript.exec(Ghostscript.groovy:137)
        at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:73)
        ... 80 more
Caused by: java.lang.IllegalStateException: initialize must be called for meta class of class com.empic.build.tasks.Ghostscript$_exec_closure8$_closure11(class org.codehaus.groovy.runtime.metaclass.ClosureMetaClass) to complete initialisation process before any invocation or field/property access can be done
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Actually I was not able to reproduce the problem locally, but if I run the build on our CI server and attach a debugger, I indeed was able to reproduce the problem with a relatively high reproduction rate. (as in every second to third build approximately, opposed to once every 100 builds)&lt;/p&gt;

&lt;p&gt;I logged the current thread when the &lt;tt&gt;initialized&lt;/tt&gt; property is set to &lt;tt&gt;true&lt;/tt&gt; and when it is requested with non-suspending breakpoints, but this seems to have caused the timing to change enough already that I was not able to reproduce the error within approximately the first two dozens of tries.&lt;/p&gt;

&lt;p&gt;I was able to successfully break at the throwing of the &lt;tt&gt;IllegalStateException&lt;/tt&gt; though. This happens in &lt;tt&gt;groovy.lang.MetaClassImpl.checkInitalised&lt;/tt&gt;.&lt;br/&gt;
The stacktrace at this point is:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&quot;pool-2-thread-3@10709&quot; prio=5 tid=0x47 nid=NA runnable
  java.lang.Thread.State: RUNNABLE
	  at groovy.lang.MetaClassImpl.checkInitalised(MetaClassImpl.java:1647)
	  at org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:257)
	  at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1027)
	  at groovy.lang.Closure.call(Closure.java:414)
	  at groovy.lang.Closure.call(Closure.java:408)
	  at groovy.lang.Closure.run(Closure.java:495)
	  at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	  at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	  at java.lang.Thread.run(Thread.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;with the closure for which we are at the &lt;tt&gt;ClosureMetaClass&lt;/tt&gt; in the topmost frame being the mentioned &lt;tt&gt;com.empic.build.tasks.Ghostscript$_exec_closure8$_closure11&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment>Gradle 3.5</environment>
        <key id="13076497">GROOVY-8213</key>
            <summary>Closures are maybe not Threadsafe</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="vampire">Bj&#246;rn Kautler</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 Jun 2017 11:47:00 +0000</created>
                <updated>Thu, 13 Feb 2020 01:17:07 +0000</updated>
                            <resolved>Thu, 13 Feb 2020 01:17:07 +0000</resolved>
                                    <version>2.4.10</version>
                                    <fixVersion>2.4.13</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16125099" author="jwagenleitner" created="Mon, 14 Aug 2017 00:23:11 +0000"  >&lt;p&gt;I have not been able to reproduce the issue.  My suspicion would be the &lt;tt&gt;initialized&lt;/tt&gt; variable.  It is updated in synchronized blocks but has a non-synchronized accessor method.  Looking at the history of it (and its counterpart in &lt;tt&gt;MetaClassImpl&lt;/tt&gt;) it does appear that one time it was synchronized.  Since it&apos;s not &lt;tt&gt;volatile&lt;/tt&gt; it may be possible that the &lt;tt&gt;ClosureMetaClass#isInitialized&lt;/tt&gt; method may return a stale value.  Having a standalone reproducible test would be helpful.&lt;/p&gt;</comment>
                            <comment id="16126369" author="blackdrag" created="Mon, 14 Aug 2017 20:48:50 +0000"  >&lt;p&gt;I agree. If Thread T1 creates and initializes the meta class and Thread T2 then tries to call a method using this meta class, then it is possible that T2 will not see the initialized=true. &lt;/p&gt;

&lt;p&gt;We could think of just making it volatile, which is a performance penalty for every invokeMethod, setProperty and getProperty, that goes through a meta class, especially bad for Closure. So maybe we should invest more effort and recheck if initialized is false using a synchronized block.&lt;/p&gt;

&lt;p&gt;Now the question is what will happen when we change from initialized=true to false (for example in EMC) and the other Thread is not notified? If that means that T2 may or may not see the modification, then this is fine with me. Such causes are supposed to require user-side synchronization. &lt;/p&gt;</comment>
                            <comment id="16187262" author="jwagenleitner" created="Sun, 1 Oct 2017 01:37:23 +0000"  >&lt;p&gt;I created a JMH benchmark to test a volatile read vs a recheck and sync, &lt;a href=&quot;https://github.com/jwagenleitner/testing-groovy/tree/master/issues/groovy8213&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jwagenleitner/testing-groovy/tree/master/issues/groovy8213&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Based on my runs the volatile read is very close to a normal read. Doing a branched check (without needing to sync) was actually worse in terms of performance. Based on those benchmarks I&apos;d suggest making &lt;tt&gt;initialized&lt;/tt&gt; volatile in both &lt;tt&gt;ClosureMetaClass&lt;/tt&gt; and also in &lt;tt&gt;MetaClassImpl&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16187269" author="jwagenleitner" created="Sun, 1 Oct 2017 03:01:55 +0000"  >&lt;p&gt;A related Gradle issue is &lt;a href=&quot;https://github.com/gradle/gradle/issues/1420&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/gradle/gradle/issues/1420&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;While I do believe the publication of the &lt;tt&gt;initialized&lt;/tt&gt; variable could be an issue and should be addressed, another possible cause of this could be related to the way the &lt;tt&gt;respondTo&lt;/tt&gt; methods are implemented by unsetting the &lt;tt&gt;initialized&lt;/tt&gt; variable during a call to &lt;tt&gt;super.initialize()&lt;/tt&gt; in the &lt;tt&gt;loadMetaInfo()&lt;/tt&gt; method.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/blob/7b101dd98ffc04b1bfd2447bbe277340d8954add/src/main/org/codehaus/groovy/runtime/metaclass/ClosureMetaClass.java#L724-L740&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/blob/7b101dd98ffc04b1bfd2447bbe277340d8954add/src/main/org/codehaus/groovy/runtime/metaclass/ClosureMetaClass.java#L724-L740&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;But in this case and the Gradle issue I&apos;m not sure the &lt;tt&gt;respondTo&lt;/tt&gt; methods are in play.&lt;/p&gt;</comment>
                            <comment id="16187270" author="githubbot" created="Sun, 1 Oct 2017 03:06:43 +0000"  >&lt;p&gt;GitHub user jwagenleitner opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/609&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/609&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8213&quot; title=&quot;Closures are maybe not Threadsafe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8213&quot;&gt;&lt;del&gt;GROOVY-8213&lt;/del&gt;&lt;/a&gt;: Closures are maybe not Threadsafe&lt;/p&gt;

&lt;p&gt;    To address @blackdrag &apos;s comment in the JIRA I created a JMH benchmark to test a volatile read vs a recheck and sync, &lt;a href=&quot;https://github.com/jwagenleitner/testing-groovy/tree/master/issues/groovy8213&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jwagenleitner/testing-groovy/tree/master/issues/groovy8213&lt;/a&gt;.&lt;br/&gt;
     Based on my runs the volatile read is very close to a normal read. Doing a branched check (without needing to sync) was actually worse in terms of performance.&lt;/p&gt;

&lt;p&gt;    It seems with the `--parallel` feature in Gradle and builds being run on large many core servers this problem seems to be coming up more frequently. See &lt;a href=&quot;https://github.com/gradle/gradle/issues/1420&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/gradle/gradle/issues/1420&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;    While I do believe the publication of the `initialized` variable is an issue and should be addressed, another possible cause of this sort of problem could be related to the way the &lt;span class=&quot;error&quot;&gt;&amp;#91;`respondTo` methods are implemented by unsetting the `initialized` variable during a call to `super.initialize()` in the `loadMetaInfo() ` method&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/apache/groovy/blob/7b101dd98ffc04b1bfd2447bbe277340d8954add/src/main/org/codehaus/groovy/runtime/metaclass/ClosureMetaClass.java#L724-L740&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/blob/7b101dd98ffc04b1bfd2447bbe277340d8954add/src/main/org/codehaus/groovy/runtime/metaclass/ClosureMetaClass.java#L724-L740&lt;/a&gt;). But in this case and the referenced Gradle issue I&apos;m not sure the `respondTo` methods are in play.&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/jwagenleitner/groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jwagenleitner/groovy&lt;/a&gt; 8213-Closure-Init-Threadsafe&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/609.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/609.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #609&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 01946dbf2bdd11bb1fa402131ba50fef26f889eb&lt;br/&gt;
Author: John Wagenleitner &amp;lt;jwagenleitner@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-10-01T02:31:16Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8213&quot; title=&quot;Closures are maybe not Threadsafe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8213&quot;&gt;&lt;del&gt;GROOVY-8213&lt;/del&gt;&lt;/a&gt;: Closures are maybe not Threadsafe&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16187273" author="paulk" created="Sun, 1 Oct 2017 03:56:02 +0000"  >&lt;p&gt;I haven&apos;t thought through whether there are any scenarios not covered by your tests John, but it seems from the results that in many cases there will be negligible performance degradation and improved stability, seems like a no-brainer to include this.&lt;/p&gt;</comment>
                            <comment id="16187281" author="githubbot" created="Sun, 1 Oct 2017 04:48:39 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/609&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/609&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16187282" author="jwagenleitner" created="Sun, 1 Oct 2017 05:04:15 +0000"  >&lt;p&gt;I went ahead and merged the &lt;tt&gt;volatile&lt;/tt&gt; change. Thanks for reporting the issue. Not sure how easy this will be to test with 2.4 snapshots, but if possible would like to get feedback on whether this fixes the issue you were seeing on the CI server.&lt;/p&gt;</comment>
                            <comment id="16187338" author="blackdrag" created="Sun, 1 Oct 2017 10:36:05 +0000"  >&lt;p&gt;when  I spoke of a performance penalty, then I did not mean the pure field read, I did mean method inlining. If the method you are calling is guarded by a volatile check, then inlining will not happen.... unless hotspot changed here in the meantime. The expected effect of this change is for me that no inlining is going to happen anymore in purely dynamic Groovy without primopts, indy or compilestatic. So you may not notice immediately. But I would wish for a benchmark in this direction. And just to make the point more understandable.. I actually made such a test back before Groovy 1.8 and later for primitive optimizations. And got exactly that result.&lt;/p&gt;</comment>
                            <comment id="16187573" author="jwagenleitner" created="Sun, 1 Oct 2017 23:13:50 +0000"  >&lt;p&gt;I am not sure how to craft a benchmark that you wish for.  I can revert the change or maybe the following would be acceptable logic after removing the &lt;tt&gt;volatile&lt;/tt&gt; modifier?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isInitialized() {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (initialized) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
    }
    &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; initialized;
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Since the normal state is to be initialized this only rechecks if false.&lt;/p&gt;</comment>
                            <comment id="16901077" author="vampire" created="Tue, 6 Aug 2019 13:52:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jwagenleitner&quot; class=&quot;user-hover&quot; rel=&quot;jwagenleitner&quot;&gt;jwagenleitner&lt;/a&gt; are you sure this is fixed?&lt;br/&gt;
 According to &lt;a href=&quot;https://github.com/gradle/gradle/issues/1420#issuecomment-431588379&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;the last comment in the Gradle issue you mentioned&lt;/a&gt;,&lt;br/&gt;
 this also happened with Gradle 4.10.2 which includes Groovy 2.4.15.&lt;/p&gt;

&lt;p&gt;I cannot say whether behavior changed for me as I outsourced the problematic code into a Java file to work-around this issue.&lt;br/&gt;
 &#160;&lt;br/&gt;
&#160;&lt;/p&gt;</comment>
                            <comment id="16901218" author="vampire" created="Tue, 6 Aug 2019 16:13:08 +0000"  >&lt;p&gt;Actually I now tried to revert my work-around with Gradle 4.10.3 and now it even failed locally, not only on CI with two out of two tries so far,&lt;br/&gt;
so this issue needs to be reopened, it is not fixed.&lt;/p&gt;</comment>
                            <comment id="16901222" author="vampire" created="Tue, 6 Aug 2019 16:13:53 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.gradle.api.tasks.TaskExecutionException: Execution failed for task &apos;:doc:en:db-model:transformDbModelDocuImagesToPs2&apos;.
        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:110)
        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:77)
        at org.gradle.api.internal.tasks.execution.OutputDirectoryCreatingTaskExecuter.execute(OutputDirectoryCreatingTaskExecuter.java:51)
        at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:59)
        at org.gradle.api.internal.tasks.execution.ResolveTaskOutputCachingStateExecuter.execute(ResolveTaskOutputCachingStateExecuter.java:54)
        at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:59)
        at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:101)
        at org.gradle.api.internal.tasks.execution.FinalizeInputFilePropertiesTaskExecuter.execute(FinalizeInputFilePropertiesTaskExecuter.java:44)
        at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:91)
        at org.gradle.api.internal.tasks.execution.ResolveTaskArtifactStateTaskExecuter.execute(ResolveTaskArtifactStateTaskExecuter.java:62)
        at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:59)
        at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:54)
        at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:43)
        at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:34)
        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.run(EventFiringTaskExecuter.java:51)
        at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:301)
        at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:293)
        at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:175)
        at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:91)
        at org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)
        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:46)
        at org.gradle.execution.taskgraph.LocalTaskInfoExecutor.execute(LocalTaskInfoExecutor.java:42)
        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareWorkItemExecutor.execute(DefaultTaskExecutionGraph.java:277)
        at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareWorkItemExecutor.execute(DefaultTaskExecutionGraph.java:262)
        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker$1.execute(DefaultTaskPlanExecutor.java:135)
        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker$1.execute(DefaultTaskPlanExecutor.java:130)
        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker.execute(DefaultTaskPlanExecutor.java:200)
        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker.executeWithWork(DefaultTaskPlanExecutor.java:191)
        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker.run(DefaultTaskPlanExecutor.java:130)
        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
        at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)
        at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
Caused by: org.gradle.internal.UncheckedException: java.util.concurrent.ExecutionException: java.lang.IllegalStateException: initialize must be called for meta class of class com.empic.build.tasks.Graphviz$_exec_closure6$_closure9(class org.codehaus.groovy.runtime.metaclass.ClosureMetaClass) to complete initialisation process before any invocation or field/property access can be done
        at org.gradle.internal.UncheckedException.throwAsUncheckedException(UncheckedException.java:63)
        at org.gradle.internal.UncheckedException.throwAsUncheckedException(UncheckedException.java:40)
        at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:76)
        at org.gradle.api.internal.project.taskfactory.IncrementalTaskAction.doExecute(IncrementalTaskAction.java:50)
        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:39)
        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:26)
        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$1.run(ExecuteActionsTaskExecuter.java:131)
        at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:301)
        at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:293)
        at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:175)
        at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:91)
        at org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)
        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:120)
        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:99)
        ... 31 more
Caused by: java.util.concurrent.ExecutionException: java.lang.IllegalStateException: initialize must be called for meta class of class com.empic.build.tasks.Graphviz$_exec_closure6$_closure9(class org.codehaus.groovy.runtime.metaclass.ClosureMetaClass) to complete initialisation process before any invocation or field/property access can be done
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at com.empic.build.tasks.Graphviz.exec(Graphviz.groovy:131)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:73)
        ... 42 more
Caused by: java.lang.IllegalStateException: initialize must be called for meta class of class com.empic.build.tasks.Graphviz$_exec_closure6$_closure9(class org.codehaus.groovy.runtime.metaclass.ClosureMetaClass) to complete initialisation process before any invocation or field/property access can be done
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17035837" author="paulk" created="Thu, 13 Feb 2020 01:17:07 +0000"  >&lt;p&gt;Closing to indicate partially fixed. Further investigations should happen in the cloned issue.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="13284949">GROOVY-9397</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 39 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3fqy7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>