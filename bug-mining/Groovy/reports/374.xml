<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:59:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-2096] Regression: Method calls in nested closures started fail</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-2096</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Basically the problem seems to affect only &lt;b&gt;certain&lt;/b&gt; method calls that take place in nested (2nd-level) closures. This text is mostly cut and paste from the ML so where you read Grails, replace it with Groovy 1.1-beta-3.&lt;/p&gt;

&lt;p&gt;(ML thread: &lt;a href=&quot;http://www.nabble.com/Fwd%3A-Method-calls-in-nested-closures---recent-change-in-behavior--tf4379730.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.nabble.com/Fwd%3A-Method-calls-in-nested-closures---recent-change-in-behavior--tf4379730.html&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;This code produces different results in Groovy 1.1-beta-2&apos;s console and beta-3&apos;s:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.xml.*

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Builder {
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; build() {
        def writer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StringWriter()
        def mkp = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; groovy.xml.MarkupBuilder(writer)
        def self = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;
        mkp.&lt;span class=&quot;code-quote&quot;&gt;&quot;envelope&quot;&lt;/span&gt; {
            body {
                def r = doSomething(&lt;span class=&quot;code-quote&quot;&gt;&quot;one&quot;&lt;/span&gt;, [:], &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
                &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; r &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;
                def attributes = transformMap([:])
                &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; attributes &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; Map
            }
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; writer.toString()
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; transformMap(arg) {
        println &lt;span class=&quot;code-quote&quot;&gt;&quot;transformMap called&quot;&lt;/span&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; arg
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; doSomething(str, map, whatever) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;abc&quot;&lt;/span&gt;
    }
}

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;BuilderTest {
    def ownMethodCount = 0
    def test() {
        def b = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Builder()
        b.build()
    }
}

def t = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BuilderTest()
println t.test()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;(I&apos;m only using XmlBuilder since that&apos;s what my &lt;b&gt;real&lt;/b&gt; code uses, but I don&apos;t think it&apos;s limited to XmlBuilder.)&lt;/p&gt;

&lt;p&gt;In Groovy 1.1-beta-2 console I get:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;transformMap called
&amp;lt;envelope&amp;gt;
  &amp;lt;body /&amp;gt;
&amp;lt;/envelope&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In Grails&apos;s console I get:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception thrown: java.lang.AssertionError : Expression: (attributes instanceof java.util.Map). Values: attributes = transformMap

java.lang.AssertionError: Expression: (attributes instanceof java.util.Map). Values: attributes = transformMap
    at org.codehaus.groovy.runtime.InvokerHelper.assertFailed (InvokerHelper.java:370)
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.assertFailed(ScriptBytecodeAdapter.java:691)
    at Builder$_build_closure1_closure2.doCall(Script6:13)
    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke (Method.java:585)
    at org.codehaus.groovy.runtime.metaclass.ReflectionMetaMethod.invoke(ReflectionMetaMethod.java:58)
    at org.codehaus.groovy.runtime.MetaClassHelper.doMethodInvoke(MetaClassHelper.java:678)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:689)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:894)
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.invokeMethodOnCurrentN (ScriptBytecodeAdapter.java:67)
    at Builder$_build_closure1_closure2.doCall(Script6)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java :39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at org.codehaus.groovy.runtime.metaclass.ReflectionMetaMethod.invoke (ReflectionMetaMethod.java:58)
    at org.codehaus.groovy.runtime.MetaClassHelper.doMethodInvoke(MetaClassHelper.java:678)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:689)
    at groovy.lang.ExpandoMetaClass.invokeMethod (ExpandoMetaClass.java:894)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:531)
    at groovy.lang.Closure.call(Closure.java:290)
    at groovy.lang.Closure.call(Closure.java:285)
    at groovy.util.BuilderSupport.doInvokeMethod (BuilderSupport.java:148)
    at groovy.util.BuilderSupport.invokeMethod(BuilderSupport.java:64)
    at groovy.lang.MetaClassImpl.invokeMethodOnGroovyObject(MetaClassImpl.java:721)
    at groovy.lang.MetaClassImpl.invokeMethod (MetaClassImpl.java:638)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:894)
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.invokeMethodOnCurrentN(ScriptBytecodeAdapter.java:67)
    at Builder$_build_closure1.doCall(Script6:9)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at org.codehaus.groovy.runtime.metaclass.ReflectionMetaMethod.invoke(ReflectionMetaMethod.java:58)
    at org.codehaus.groovy.runtime.MetaClassHelper.doMethodInvoke (MetaClassHelper.java:678)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:689)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:894)
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.invokeMethodOnCurrentN (ScriptBytecodeAdapter.java:67)
    at Builder$_build_closure1.doCall(Script6)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java :39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at org.codehaus.groovy.runtime.metaclass.ReflectionMetaMethod.invoke (ReflectionMetaMethod.java:58)
    at org.codehaus.groovy.runtime.MetaClassHelper.doMethodInvoke(MetaClassHelper.java:678)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:689)
    at groovy.lang.ExpandoMetaClass.invokeMethod (ExpandoMetaClass.java:894)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:531)
    at groovy.lang.Closure.call(Closure.java:290)
    at groovy.lang.Closure.call(Closure.java:285)
    at groovy.util.BuilderSupport.doInvokeMethod (BuilderSupport.java:148)
    at groovy.util.BuilderSupport.invokeMethod(BuilderSupport.java:64)
    at org.codehaus.groovy.runtime.Invoker.invokePogoMethod(Invoker.java:119)
    at org.codehaus.groovy.runtime.Invoker.invokeMethod (Invoker.java:81)
    at org.codehaus.groovy.runtime.InvokerHelper.invokeMethod(InvokerHelper.java:85)
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.invokeMethodN(ScriptBytecodeAdapter.java:159)
    at Builder.build(Script6:8)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at org.codehaus.groovy.runtime.metaclass.ReflectionMetaMethod.invoke(ReflectionMetaMethod.java:58)
    at org.codehaus.groovy.runtime.MetaClassHelper.doMethodInvoke (MetaClassHelper.java:678)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:689)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:894)
    at groovy.lang.MetaClassImpl.invokeMethod (MetaClassImpl.java:531)
    at org.codehaus.groovy.runtime.Invoker.invokePogoMethod(Invoker.java:115)
    at org.codehaus.groovy.runtime.Invoker.invokeMethod(Invoker.java:81)
    at org.codehaus.groovy.runtime.InvokerHelper.invokeMethod (InvokerHelper.java:85)
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.invokeMethodN(ScriptBytecodeAdapter.java:159)
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.invokeMethod0(ScriptBytecodeAdapter.java :202)
    at BuilderTest.test(Script6:33)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at org.codehaus.groovy.runtime.metaclass.ReflectionMetaMethod.invoke(ReflectionMetaMethod.java:58)
    at org.codehaus.groovy.runtime.MetaClassHelper.doMethodInvoke (MetaClassHelper.java:678)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:689)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:894)
    at groovy.lang.MetaClassImpl.invokeMethod (MetaClassImpl.java:531)
    at org.codehaus.groovy.runtime.Invoker.invokePogoMethod(Invoker.java:115)
    at org.codehaus.groovy.runtime.Invoker.invokeMethod(Invoker.java:81)
    at org.codehaus.groovy.runtime.InvokerHelper.invokeMethod (InvokerHelper.java:85)
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.invokeMethodN(ScriptBytecodeAdapter.java:159)
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.invokeMethod0(ScriptBytecodeAdapter.java :202)
    at Script6.run(Script6:38)
    at groovy.lang.GroovyShell.evaluate(GroovyShell.java:459)
    at groovy.lang.GroovyShell.evaluate(GroovyShell.java:400)
    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke (Method.java:585)
    at org.codehaus.groovy.runtime.metaclass.ReflectionMetaMethod.invoke(ReflectionMetaMethod.java:58)
    at org.codehaus.groovy.runtime.MetaClassHelper.doMethodInvoke(MetaClassHelper.java:678)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:689)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:894)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:531)
    at org.codehaus.groovy.runtime.Invoker.invokePogoMethod(Invoker.java:115)
    at org.codehaus.groovy.runtime.Invoker.invokeMethod(Invoker.java:81)
    at org.codehaus.groovy.runtime.InvokerHelper.invokeMethod (InvokerHelper.java:85)
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.invokeMethodN(ScriptBytecodeAdapter.java:159)
    at groovy.ui.Console$_runScript_closure10.doCall(Console.groovy:675)
    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke (Method.java:585)
    at org.codehaus.groovy.runtime.metaclass.ReflectionMetaMethod.invoke(ReflectionMetaMethod.java:58)
    at org.codehaus.groovy.runtime.MetaClassHelper.doMethodInvoke(MetaClassHelper.java:678)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:689)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:894)
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.invokeMethodOnCurrentN (ScriptBytecodeAdapter.java:67)
    at groovy.ui.Console$_runScript_closure10.doCall(Console.groovy)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at org.codehaus.groovy.runtime.metaclass.ReflectionMetaMethod.invoke (ReflectionMetaMethod.java:58)
    at org.codehaus.groovy.runtime.MetaClassHelper.doMethodInvoke(MetaClassHelper.java:678)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:689)
    at groovy.lang.ExpandoMetaClass.invokeMethod (ExpandoMetaClass.java:894)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:531)
    at groovy.lang.Closure.call(Closure.java:290)
    at groovy.lang.Closure.call(Closure.java:285)
    at groovy.lang.Closure.run (Closure.java:366)
    at java.lang.Thread.run(Thread.java:595)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Some observations I have made by modifying the code for beta-3:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;it can be fixed by qualifying the call to &quot;transformMap&quot; with a rerfence to class instance, eg: self.transformMap (self is already defined above for this purpose). But why don&apos;t I need to qualify the call to &quot;doSomething&quot;?&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;comment out the inner &quot;body&quot; method and closure opening bracket and closing bracket, like:&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        mkp.&quot;envelope&quot; {
//            body {
                def r = doSomething(&quot;one&quot;, [:], null)
                assert r instanceof String
                def attributes = transformMap(null)
                assert attributes instanceof Map
//            }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;well of course the result is wrong, but this time the &quot;transformMap&quot; method is called:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;transformMap called
&amp;lt;envelope /&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
	&lt;li&gt;If I change the private methods to closures, like:&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    private transformMap = { arg -&amp;gt;
        println &quot;transformMap called&quot;
        return [:]
    }

    private doSomething = { str, map, whatever -&amp;gt;
        return &quot;abc&quot;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;it still works ok in Groovy 1.1-beta-2 but I get a different error with Grails:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.NullPointerException
    at groovy.xml.MarkupBuilder.createNode(MarkupBuilder.java :125)
    at groovy.util.BuilderSupport.doInvokeMethod(BuilderSupport.java:87)
    at groovy.util.BuilderSupport.invokeMethod(BuilderSupport.java:64)
    at groovy.lang.MetaClassImpl.invokeMethodOnGroovyObject(MetaClassImpl.java :721)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:638)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:894)
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.invokeMethodOnCurrentN (ScriptBytecodeAdapter.java:67)
    at Builder$_build_closure3_closure4.doCall(Script14:12)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java :39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at org.codehaus.groovy.runtime.metaclass.ReflectionMetaMethod.invoke (ReflectionMetaMethod.java:58)
    at org.codehaus.groovy.runtime.MetaClassHelper.doMethodInvoke(MetaClassHelper.java:678)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:689)
    at groovy.lang.ExpandoMetaClass.invokeMethod (ExpandoMetaClass.java:894)
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.invokeMethodOnCurrentN(ScriptBytecodeAdapter.java:67)
    at Builder$_build_closure3_closure4.doCall(Script14)
    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke (Method.java:585)
    at org.codehaus.groovy.runtime.metaclass.ReflectionMetaMethod.invoke(ReflectionMetaMethod.java:58)
    at org.codehaus.groovy.runtime.MetaClassHelper.doMethodInvoke(MetaClassHelper.java:678)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:689)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:894)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:531)
    at groovy.lang.Closure.call(Closure.java:290)
    at groovy.lang.Closure.call(Closure.java:285)
    at groovy.util.BuilderSupport.doInvokeMethod(BuilderSupport.java:148)
    at groovy.util.BuilderSupport.invokeMethod (BuilderSupport.java:64)
    at groovy.lang.MetaClassImpl.invokeMethodOnGroovyObject(MetaClassImpl.java:721)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:638)
    at groovy.lang.ExpandoMetaClass.invokeMethod (ExpandoMetaClass.java:894)
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.invokeMethodOnCurrentN(ScriptBytecodeAdapter.java:67)
    at Builder$_build_closure3.doCall(Script14:9)
    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke (Method.java:585)
    at org.codehaus.groovy.runtime.metaclass.ReflectionMetaMethod.invoke(ReflectionMetaMethod.java:58)
    at org.codehaus.groovy.runtime.MetaClassHelper.doMethodInvoke(MetaClassHelper.java:678)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:689)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:894)
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.invokeMethodOnCurrentN (ScriptBytecodeAdapter.java:67)
    at Builder$_build_closure3.doCall(Script14)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java :39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at org.codehaus.groovy.runtime.metaclass.ReflectionMetaMethod.invoke (ReflectionMetaMethod.java:58)
    at org.codehaus.groovy.runtime.MetaClassHelper.doMethodInvoke(MetaClassHelper.java:678)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:689)
    at groovy.lang.ExpandoMetaClass.invokeMethod (ExpandoMetaClass.java:894)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:531)
    at groovy.lang.Closure.call(Closure.java:290)
    at groovy.lang.Closure.call(Closure.java:285)
    at groovy.util.BuilderSupport.doInvokeMethod (BuilderSupport.java:148)
    at groovy.util.BuilderSupport.invokeMethod(BuilderSupport.java:64)
    at org.codehaus.groovy.runtime.Invoker.invokePogoMethod(Invoker.java:119)
    at org.codehaus.groovy.runtime.Invoker.invokeMethod (Invoker.java:81)
    at org.codehaus.groovy.runtime.InvokerHelper.invokeMethod(InvokerHelper.java:85)
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.invokeMethodN(ScriptBytecodeAdapter.java:159)
    at Builder.build(Script14:8)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at org.codehaus.groovy.runtime.metaclass.ReflectionMetaMethod.invoke(ReflectionMetaMethod.java:58)
    at org.codehaus.groovy.runtime.MetaClassHelper.doMethodInvoke (MetaClassHelper.java:678)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:689)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:894)
    at groovy.lang.MetaClassImpl.invokeMethod (MetaClassImpl.java:531)
    at org.codehaus.groovy.runtime.Invoker.invokePogoMethod(Invoker.java:115)
    at org.codehaus.groovy.runtime.Invoker.invokeMethod(Invoker.java:81)
    at org.codehaus.groovy.runtime.InvokerHelper.invokeMethod (InvokerHelper.java:85)
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.invokeMethodN(ScriptBytecodeAdapter.java:159)
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.invokeMethod0(ScriptBytecodeAdapter.java :202)
    at BuilderTest.test(Script14:33)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at org.codehaus.groovy.runtime.metaclass.ReflectionMetaMethod.invoke(ReflectionMetaMethod.java:58)
    at org.codehaus.groovy.runtime.MetaClassHelper.doMethodInvoke (MetaClassHelper.java:678)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:689)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:894)
    at groovy.lang.MetaClassImpl.invokeMethod (MetaClassImpl.java:531)
    at org.codehaus.groovy.runtime.Invoker.invokePogoMethod(Invoker.java:115)
    at org.codehaus.groovy.runtime.Invoker.invokeMethod(Invoker.java:81)
    at org.codehaus.groovy.runtime.InvokerHelper.invokeMethod (InvokerHelper.java:85)
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.invokeMethodN(ScriptBytecodeAdapter.java:159)
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.invokeMethod0(ScriptBytecodeAdapter.java :202)
    at Script14.run(Script14:38)
    at groovy.lang.GroovyShell.evaluate(GroovyShell.java:459)
    at groovy.lang.GroovyShell.evaluate(GroovyShell.java:400)
    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke (Method.java:585)
    at org.codehaus.groovy.runtime.metaclass.ReflectionMetaMethod.invoke(ReflectionMetaMethod.java:58)
    at org.codehaus.groovy.runtime.MetaClassHelper.doMethodInvoke(MetaClassHelper.java:678)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:689)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:894)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:531)
    at org.codehaus.groovy.runtime.Invoker.invokePogoMethod(Invoker.java:115)
    at org.codehaus.groovy.runtime.Invoker.invokeMethod(Invoker.java:81)
    at org.codehaus.groovy.runtime.InvokerHelper.invokeMethod (InvokerHelper.java:85)
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.invokeMethodN(ScriptBytecodeAdapter.java:159)
    at groovy.ui.Console$_runScript_closure10.doCall(Console.groovy:675)
    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke (Method.java:585)
    at org.codehaus.groovy.runtime.metaclass.ReflectionMetaMethod.invoke(ReflectionMetaMethod.java:58)
    at org.codehaus.groovy.runtime.MetaClassHelper.doMethodInvoke(MetaClassHelper.java:678)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:689)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:894)
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.invokeMethodOnCurrentN (ScriptBytecodeAdapter.java:67)
    at groovy.ui.Console$_runScript_closure10.doCall(Console.groovy)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at org.codehaus.groovy.runtime.metaclass.ReflectionMetaMethod.invoke (ReflectionMetaMethod.java:58)
    at org.codehaus.groovy.runtime.MetaClassHelper.doMethodInvoke(MetaClassHelper.java:678)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:689)
    at groovy.lang.ExpandoMetaClass.invokeMethod (ExpandoMetaClass.java:894)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:531)
    at groovy.lang.Closure.call(Closure.java:290)
    at groovy.lang.Closure.call(Closure.java:285)
    at groovy.lang.Closure.run (Closure.java:366)
    at java.lang.Thread.run(Thread.java:595)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12813740">GROOVY-2096</key>
            <summary>Regression: Method calls in nested closures started fail</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blackdrag">Jochen Theodorou</assignee>
                                    <reporter username="maurice.nicholson">Maurice Nicholson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Sep 2007 01:53:21 +0000</created>
                <updated>Wed, 5 Sep 2007 19:59:45 +0000</updated>
                            <resolved>Wed, 5 Sep 2007 19:59:45 +0000</resolved>
                                                    <fixVersion>1.1-beta-3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14463014" author="blackdrag" created="Wed, 5 Sep 2007 19:59:45 +0000"  >&lt;p&gt;fixed. Looks like Paul accidently used resolveStrategy&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 12 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2cgtr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>