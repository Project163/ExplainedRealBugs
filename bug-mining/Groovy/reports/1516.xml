<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:21:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-4825] Compiler Errors for @Immutable</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-4825</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@Immutable
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;X {
  &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; a	
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Leads to (groovy 1.7.10, executed using gradle)&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.RuntimeException: Explicit constructors not allowed for @Immutable class: X
	at org.codehaus.groovy.transform.ImmutableASTTransformation.createConstructor(ImmutableASTTransformation.java:308)
	at org.codehaus.groovy.transform.ImmutableASTTransformation.visit(ImmutableASTTransformation.java:117)
	at org.codehaus.groovy.transform.ASTTransformationVisitor.visitClass(ASTTransformationVisitor.java:129)
	at org.codehaus.groovy.transform.ASTTransformationVisitor$2.call(ASTTransformationVisitor.java:172)
	at org.codehaus.groovy.control.CompilationUnit.applyToPrimaryClassNodes(CompilationUnit.java:942)
	at org.codehaus.groovy.control.CompilationUnit.doPhaseOperation(CompilationUnit.java:519)
	at org.codehaus.groovy.control.CompilationUnit.processPhaseOperations(CompilationUnit.java:497)
	at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:474)
	at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:453)
	at org.codehaus.groovy.tools.FileSystemCompiler.compile(FileSystemCompiler.java:67)
	at org.codehaus.groovy.tools.FileSystemCompiler.doCompilation(FileSystemCompiler.java:180)
	at org.codehaus.groovy.tools.FileSystemCompiler.commandLineCompile(FileSystemCompiler.java:148)
	at org.codehaus.groovy.tools.FileSystemCompiler.main(FileSystemCompiler.java:162)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@Immutable
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;X {
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Leads to (groovy 1.7.8.xx-20110426-1500-e36, eclipse)&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Duplicate method X() in type X
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Y {
  X x
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Leads to (groovy 1.7.8.xx-20110426-1500-e36, eclipse)&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;General error during canonicalization: @Immutable processor doesn&apos;t know how to handle field &apos;x&apos; of type &apos;playground.X&apos; while compiling class playground.Y.
@Immutable classes currently only support properties with known immutable types or types where special handling achieves immutable behavior, including:
- Strings, primitive types, wrapper types, BigInteger and BigDecimal, enums
- other @Immutable classes and known immutables (java.awt.Color, java.net.URI)
- Cloneable classes, collections, maps and arrays, and other classes with special handling (java.util.Date)
Other restrictions apply, please see the groovydoc for @Immutable for further details
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

</description>
                <environment>Mac OS X</environment>
        <key id="12818407">GROOVY-4825</key>
            <summary>Compiler Errors for @Immutable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="peter.rietzler@smarter-ecommerce.com">Peter Rietzler</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 May 2011 04:02:07 +0000</created>
                <updated>Thu, 4 Aug 2011 15:51:48 +0000</updated>
                            <resolved>Thu, 4 Aug 2011 15:51:48 +0000</resolved>
                                    <version>1.7.8</version>
                    <version>1.7.10</version>
                    <version>1.8.0</version>
                                    <fixVersion>1.8.1</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14479555" author="paulk" created="Mon, 16 May 2011 07:30:03 +0000"  >&lt;p&gt;The following works fine for me in the GroovyConsole for 1.7.11-SNAPSHOT:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@Immutable
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;X {
  &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; a
}

@Immutable
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Y {
  X x
}

println &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Y(x:&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; X(a: 3))
&lt;span class=&quot;code-comment&quot;&gt;// =&amp;gt; Y(x:X(a:3))&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Can you try the above? I am trying to reproduce the issue and suspect it is either version related or environment related but can&apos;t tell for sure just yet.&lt;/p&gt;</comment>
                            <comment id="14471261" author="aalmiray" created="Fri, 20 May 2011 09:53:06 +0000"  >&lt;p&gt;None of those cases fail with 1.8.0 (groovyConsole) nor with the groovy intepreter.&lt;/p&gt;</comment>
                            <comment id="14471206" author="blackdrag" created="Fri, 20 May 2011 13:41:33 +0000"  >&lt;p&gt;I close the issue unless Peter finds the problem still exists and can provide a reproducable issue&lt;/p&gt;</comment>
                            <comment id="14479520" author="peter.rietzler@smarter-ecommerce.com" created="Mon, 23 May 2011 01:00:56 +0000"  >&lt;p&gt;in the meantime we&apos;ve switched our complete environment to 1.8.0 where everything works fine&lt;/p&gt;</comment>
                            <comment id="14471439" author="graemerocher" created="Fri, 1 Jul 2011 06:39:46 +0000"  >&lt;p&gt;There is an example that reproduces the issue in this Grails JIRA:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://jira.grails.org/browse/GRAILS-7205&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jira.grails.org/browse/GRAILS-7205&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It still impacts 1.8.0&lt;/p&gt;

&lt;p&gt;Download the attach app and run it with Grails to see the error. If you wish to debug create a remote debugger and run &apos;grails-debug&apos;. From my debugging the ClassNode is returning a constructor of &quot;&amp;lt;init&amp;gt;&quot; as being present which results in the exception being thrown.&lt;/p&gt;</comment>
                            <comment id="14479622" author="paulk" created="Fri, 1 Jul 2011 10:22:13 +0000"  >&lt;p&gt;Grails compilation uses the Joint compiler. Currently, not all transforms are guaranteed to work with joint compilation. I have tweaked stub generation to not interfere with (the constructor creation part of) @Immutable. If you can test this out, that would be great. Only in 1.7.11-SNAPSHOT for now. Committed in subversion and should be available as a jar once the CI build finishes.&lt;/p&gt;</comment>
                            <comment id="14479609" author="paulk" created="Sat, 2 Jul 2011 06:56:15 +0000"  >&lt;p&gt;Also merged into 1.8.1 and trunk&lt;/p&gt;</comment>
                            <comment id="14471471" author="graemerocher" created="Tue, 5 Jul 2011 03:30:39 +0000"  >&lt;p&gt;Thanks will test it out&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 21 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2c7jb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>