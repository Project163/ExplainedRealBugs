<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:15:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-10055] STC does not support self bounded types</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-10055</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Some popular libraries use self bounded types for creating builder hierarchies. For example, &lt;br/&gt;
 PostgreSQLContainer (from Tescontainers library) is declared as&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;PostgreSQLContainer&amp;lt;SELF &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; PostgreSQLContainer&amp;lt;SELF&amp;gt;&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; JdbcDatabaseContainer&amp;lt;SELF&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;where JdbcDatabaseContainer is declared as&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;JdbcDatabaseContainer&amp;lt;SELF &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; JdbcDatabaseContainer&amp;lt;SELF&amp;gt;&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; GenericContainer&amp;lt;SELF&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; LinkableContainer
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and so on.&lt;/p&gt;

&lt;p&gt;In the following example (tested with Groovy Console), I&apos;m trying to create and modify such an object with its corresponding fluent API:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.testcontainers.containers.PostgreSQLContainer
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.CompileStatic

@Grab(&lt;span class=&quot;code-quote&quot;&gt;&quot;org.testcontainers:testcontainers:1.15.3&quot;&lt;/span&gt;)
@Grab(&lt;span class=&quot;code-quote&quot;&gt;&quot;org.testcontainers:postgresql:1.15.3&quot;&lt;/span&gt;)
@CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;TestcontainersTester {
  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void testSome() {
    PostgreSQLContainer postgresqlServer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PostgreSQLContainer&amp;lt;&amp;gt;()
        .withExposedPorts(5432)
        .withEnv([&lt;span class=&quot;code-quote&quot;&gt;&quot;TZ&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Europe/Paris&quot;&lt;/span&gt;])
        .withDatabaseName(&lt;span class=&quot;code-quote&quot;&gt;&quot;my_database&quot;&lt;/span&gt;)
        .withUsername(&lt;span class=&quot;code-quote&quot;&gt;&quot;user&quot;&lt;/span&gt;)
        .withPassword(&lt;span class=&quot;code-quote&quot;&gt;&quot;pass&quot;&lt;/span&gt;)

&lt;span class=&quot;code-comment&quot;&gt;// Working alternative 1
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;//    PostgreSQLContainer postgresqlServer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PostgreSQLContainer&amp;lt;PostgreSQLContainer&amp;lt;PostgreSQLContainer&amp;lt;PostgreSQLContainer&amp;lt;PostgreSQLContainer&amp;gt;&amp;gt;&amp;gt;&amp;gt;()
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;//        .withExposedPorts(5432)
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;//        .withEnv([&lt;span class=&quot;code-quote&quot;&gt;&quot;TZ&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Europe/Paris&quot;&lt;/span&gt;])
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;//        .withDatabaseName(&lt;span class=&quot;code-quote&quot;&gt;&quot;my_database&quot;&lt;/span&gt;)
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;//        .withUsername(&lt;span class=&quot;code-quote&quot;&gt;&quot;user&quot;&lt;/span&gt;)
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;//        .withPassword(&lt;span class=&quot;code-quote&quot;&gt;&quot;pass&quot;&lt;/span&gt;)
&lt;/span&gt;
&lt;span class=&quot;code-comment&quot;&gt;// Working alternative 2
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;//    PostgreSQLContainer postgresqlServer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PostgreSQLContainer&amp;lt;&amp;gt;()
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;//    postgresqlServer.withExposedPorts(5432)
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;//    postgresqlServer.withEnv([&lt;span class=&quot;code-quote&quot;&gt;&quot;TZ&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Europe/Paris&quot;&lt;/span&gt;])
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;//    postgresqlServer.withDatabaseName(&lt;span class=&quot;code-quote&quot;&gt;&quot;my_database&quot;&lt;/span&gt;)
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;//    postgresqlServer.withUsername(&lt;span class=&quot;code-quote&quot;&gt;&quot;user&quot;&lt;/span&gt;)
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;//    postgresqlServer.withPassword(&lt;span class=&quot;code-quote&quot;&gt;&quot;pass&quot;&lt;/span&gt;)
&lt;/span&gt;
    println postgresqlServer
  }
}

TestcontainersTester.testSome();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Unfortunately, STC complains with several errors:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
4 compilation errors:

[Static type checking] - Cannot call SELF#withEnv(java.util.Map &amp;lt;java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;) with arguments [java.util.LinkedHashMap &amp;lt;java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;] 
 at line: 11, column: 17

[Static type checking] - Cannot find matching method java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;#withDatabaseName(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;). Please check &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the declared type is correct and &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the method exists.
 at line: 12, column: 26

[Static type checking] - Cannot find matching method java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;#withUsername(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;). Please check &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the declared type is correct and &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the method exists.
 at line: 13, column: 22

[Static type checking] - Cannot find matching method java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;#withPassword(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;). Please check &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the declared type is correct and &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the method exists.
 at line: 9, column: 44
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;There are two working alternatives in the example. &quot;Alternative 1&quot; is not really practical, but maybe it can help with solving the issue. &quot;Alternative 2&quot; is an actual practical workaround that can be further improved by using the &quot;with&quot; method.&lt;/p&gt;

&lt;p&gt;Tnx&lt;/p&gt;</description>
                <environment></environment>
        <key id="13374785">GROOVY-10055</key>
            <summary>STC does not support self bounded types</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="dmurat">Damir Murat</reporter>
                        <labels>
                    </labels>
                <created>Sat, 24 Apr 2021 07:32:55 +0000</created>
                <updated>Tue, 24 Oct 2023 15:30:14 +0000</updated>
                            <resolved>Mon, 18 Oct 2021 18:19:11 +0000</resolved>
                                    <version>3.0.8</version>
                                    <fixVersion>4.0.0-beta-2</fixVersion>
                    <fixVersion>3.0.20</fixVersion>
                                    <component>Static compilation</component>
                    <component>Static Type Checker</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17333326" author="emilles" created="Tue, 27 Apr 2021 15:02:24 +0000"  >&lt;p&gt;You are using &lt;tt&gt;PostgreSQLContainer&lt;/tt&gt; as a raw type, so there is no explicit argument assigned to the &lt;tt&gt;SELF&lt;/tt&gt; type parameter.  Looks like the &quot;fully-resolve&quot; code that tries to get a concrete type to work with (aka &lt;tt&gt;StaticTypeCheckingVisitor#inferReturnTypeGenerics&lt;/tt&gt;) is getting Object in the current codebase.&lt;/p&gt;

&lt;p&gt;If each of the &quot;with&quot; methods are returning &quot;this&quot; and not a new instance, your grooviest workaround would be:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;def&lt;/span&gt; postgreSqlServer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PostgreSQLContainer().tap {
  withExposedPorts(5432)
  withEnv(TZ: &lt;span class=&quot;code-quote&quot;&gt;&quot;Europe/Paris&quot;&lt;/span&gt;)
  withDatabaseName(&lt;span class=&quot;code-quote&quot;&gt;&quot;my_database&quot;&lt;/span&gt;)
  withUsername(&lt;span class=&quot;code-quote&quot;&gt;&quot;user&quot;&lt;/span&gt;)
  withPassword(&lt;span class=&quot;code-quote&quot;&gt;&quot;pass&quot;&lt;/span&gt;)
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17348713" author="szpak" created="Thu, 20 May 2021 19:47:21 +0000"  >&lt;p&gt;I believe have bumped into the same problem with:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
WebClient.create(getBaseHttpUrl())
 .get()
 .uri(&lt;span class=&quot;code-quote&quot;&gt;&quot;/path&quot;&lt;/span&gt;)
 .accept(MediaType.APPLICATION_JSON)
 .header(&lt;span class=&quot;code-quote&quot;&gt;&quot;Authorization&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;any&quot;&lt;/span&gt;) 

Groovyc: [Static type checking] - Cannot call S#header(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[]) with arguments [java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, groovy.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;accept() is defined as:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; RequestHeadersSpec&amp;lt;S &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; RequestHeadersSpec&amp;lt;S&amp;gt;&amp;gt; {
    S accept(MediaType... acceptableMediaTypes);
    ... &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;When I explicitly cast the result of accept() to a typed class (RequestHeadersSpec&amp;lt;RequestHeadersSpec&amp;gt;) the compilation passes.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;It worked fine with 3.0.7 (Spock 2.0 final uses 3.0.8 which generates the problem)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17415894" author="jhunovis" created="Thu, 16 Sep 2021 05:59:24 +0000"  >&lt;p&gt;This seems to be another instance which compiles fine with Groovy version 3.0.7 but fails in versions 3.0.8 and 3.0.9:&lt;br/&gt;
&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.ToString
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.assertj.core.util.BigDecimalComparator
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.junit.jupiter.api.Test

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; static org.assertj.core.api.Assertions.assertThat

@CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;CompileStaticAssertJFailure {

  @Test
  void assertFails() {
    &lt;span class=&quot;code-keyword&quot;&gt;def&lt;/span&gt; pojo = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Pojo(text: &lt;span class=&quot;code-quote&quot;&gt;&apos;A&apos;&lt;/span&gt;, number: 1.00)

    assertThat(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Pojo(text: &lt;span class=&quot;code-quote&quot;&gt;&apos;A&apos;&lt;/span&gt;, number: 1.0))
        .usingRecursiveComparison()
        .withComparatorForType(BigDecimalComparator.BIG_DECIMAL_COMPARATOR, BigDecimal)
        .isEqualTo(pojo)
  }

  @ToString
  private static &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Pojo {
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; text
    BigDecimal number
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It produces: &lt;span class=&quot;error&quot;&gt;&amp;#91;Static type checking&amp;#93;&lt;/span&gt; - Cannot call SELF#isEqualTo(java.lang.Object) with arguments &lt;span class=&quot;error&quot;&gt;&amp;#91;java.lang.Object&amp;#93;&lt;/span&gt; &lt;/p&gt;</comment>
                            <comment id="17427268" author="emilles" created="Mon, 11 Oct 2021 17:32:28 +0000"  >&lt;p&gt;Fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-10234&quot; title=&quot;Groovyc throws Stackoverflow error on generic class with lower bound&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-10234&quot;&gt;&lt;del&gt;GROOVY-10234&lt;/del&gt;&lt;/a&gt; improves the disposition for self-referential types where the actual declaration is a raw type.  Can you retest using latest snapshot?&lt;/p&gt;</comment>
                            <comment id="17429615" author="dmurat" created="Sat, 16 Oct 2021 20:51:34 +0000"  >&lt;p&gt;I fixed my example in the original report, where empty generic brackets were missing for the constructor.&lt;/p&gt;

&lt;p&gt;I checked with both 3.0.10 and 4.0.0 snapshots, and from what I can see, the situation is still the same.&lt;/p&gt;</comment>
                            <comment id="17430128" author="emilles" created="Mon, 18 Oct 2021 18:19:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/commit/5946717d13b6f8df8b6dfbc3edff902126304587&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/5946717d13b6f8df8b6dfbc3edff902126304587&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17534307" author="jhunovis" created="Tue, 10 May 2022 12:01:17 +0000"  >&lt;p&gt;This is still not fixed up to Groovy 4.0.2!  &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; de.jhunovis.fluentapi

@Grab(&lt;span class=&quot;code-quote&quot;&gt;&apos;org.springframework.boot:spring-boot-starter-webflux:2.6.7&apos;&lt;/span&gt;)

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.junit.jupiter.api.Test
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.springframework.core.ParameterizedTypeReference
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.springframework.http.MediaType
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.springframework.web.reactive.function.client.WebClient

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.time.Duration

@CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;WebFluxFluentApiBugTest {

  private static final ParameterizedTypeReference&amp;lt;List&amp;lt;BigDecimal&amp;gt;&amp;gt; TYPE_TAG
    = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ParameterizedTypeReference&amp;lt;List&amp;lt;BigDecimal&amp;gt;&amp;gt;() {}

  private static final Duration MAX_DURATION = Duration.ofSeconds(8)

  private final WebClient webClient

  List&amp;lt;BigDecimal&amp;gt; flux() {
    &lt;span class=&quot;code-keyword&quot;&gt;def&lt;/span&gt; response = webClient.get()
      .uri(&lt;span class=&quot;code-quote&quot;&gt;&apos;/something?id={id}&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;id&apos;&lt;/span&gt;)
      .accept(MediaType.APPLICATION_JSON)
      .retrieve()
      .toEntity(TYPE_TAG)
      .block(MAX_DURATION)
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; response.getBody() ?: []
  }

  @Test
  void webflux() {
    flux()
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It produces:&lt;/p&gt;



&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;gt; groovy src/test/groovy/de/jhunovis/fluentapi/WebFluxFluentApiBugTest.groovy
org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:
/home/jh/Code/groovy-bugs/src/test/groovy/de/jhunovis/fluentapi/WebFluxFluentApiBugTest.groovy: 27: [Static type checking] - Cannot find matching method S#retrieve(). Please check if the declared type is correct and if the method exists.
 @ line 27, column 16.
         .retrieve()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Please re-open and fix this. &lt;/p&gt;</comment>
                            <comment id="17534422" author="emilles" created="Tue, 10 May 2022 15:44:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jhunovis&quot; class=&quot;user-hover&quot; rel=&quot;jhunovis&quot;&gt;jhunovis&lt;/a&gt; This is a bit of a different case.&lt;/p&gt;

&lt;p&gt;The original example is declared like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;PostgreSQLContainer&amp;lt;SELF &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; PostgreSQLContainer&amp;lt;SELF&amp;gt;&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; JdbcDatabaseContainer&amp;lt;SELF&amp;gt; {
	SELF withDatabaseName(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; databaseName) { ...; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; self(); }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So &lt;tt&gt;SELF&lt;/tt&gt; needed to be resolved back to &lt;tt&gt;PostgreSQLContainer&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Spring&apos;s web client is declared this way:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; WebClient {
	WebClient.RequestHeadersUriSpec&amp;lt;?&amp;gt; get() { ... }
	&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; WebClient.RequestHeadersSpec&amp;lt;S &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; WebClient.RequestHeadersSpec&amp;lt;S&amp;gt;&amp;gt; {
	}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So &lt;tt&gt;RequestHeadersUriSpec&amp;lt;?&amp;gt;&lt;/tt&gt; is a bit different.  It is &lt;tt&gt;StaticTypeCheckingSupport#boundUnboundedWildcards&lt;/tt&gt; that fills in for &lt;tt&gt;?&lt;/tt&gt;.  &lt;del&gt;Can you create a separate issue for this new example?&lt;/del&gt; See &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-10619&quot; title=&quot;STC: fix support for unbounded wildcard references to self-bounded type parameters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-10619&quot;&gt;&lt;del&gt;GROOVY-10619&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                            <outwardlinks description="fixes">
                                        <issuelink>
            <issuekey id="12916423">GROOVY-7690</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13444217">GROOVY-10619</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13513369">GROOVY-10868</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 27 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0qem8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>