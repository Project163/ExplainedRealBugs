<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:19:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-10710] operator == is slow when comparing primitive arrays and lists</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-10710</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;To perform checks like&#160; a == b groovy runtime invokes method DefaultTypeTransformation.compareEqual(Object left, Object right).&lt;/p&gt;

&lt;p&gt;This method is OK if both the left side and the right side are arrays. But it is utterly broken if only one side of the comparison is an array:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;There are calls to primitiveArrayToList() &lt;b&gt;before&lt;/b&gt; making sure whether this is really necessary. This results in creation of most likely unnecessary objects (lists). It is much better to perform more checks like &apos;whether the other operand is a collection or array&apos; and &apos;if so whether both left and right operand have the same size&apos;.&lt;/li&gt;
	&lt;li&gt;The conversion with primitiveArrayToList() might also a break normal equals() implementation which compareEqual(Object left, Object right) falls back to if operands do not fall into the special cases. This is because the original operands &lt;b&gt;are replaced&lt;/b&gt; with results of primitiveArrayToList() and equals() is invoked not on the original objects.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;This problem is present in the current 3.X, 4.X and 5.X versions of groovy.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13474188">GROOVY-10710</key>
            <summary>operator == is slow when comparing primitive arrays and lists</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="klv_m72">L</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Jul 2022 10:53:27 +0000</created>
                <updated>Fri, 10 Feb 2023 21:40:05 +0000</updated>
                            <resolved>Thu, 25 Aug 2022 10:11:01 +0000</resolved>
                                                    <fixVersion>4.0.5</fixVersion>
                                    <component>groovy-runtime</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17573178" author="paulk" created="Fri, 29 Jul 2022 22:45:34 +0000"  >&lt;p&gt;It would certainly be possible to do a few more up-front checks. Can you give an example (failing case) where you think the behavior is broken?&lt;br/&gt;
Perhaps some kind of adapter backed by the original array would be better than creating a new list(s). It would need to be smart enough to handle multi-dimensional primitive arrays.&lt;/p&gt;</comment>
                            <comment id="17573374" author="blackdrag" created="Sun, 31 Jul 2022 09:56:14 +0000"  >&lt;p&gt;I think this is more about performance and memory consumption. Creating a list when not needed burns memory and CPU&lt;/p&gt;</comment>
                            <comment id="17573438" author="klv_m72" created="Sun, 31 Jul 2022 14:22:17 +0000"  >&lt;p&gt;Yes, it is in fact more of memory and performance related issue. At least this is how we got hit by it: we had quite a large byte[] that sort of by mistake ended up used in == comparison with a different object (not an array or collection). Sure we have fixed our code after we have realized why our script was failing so spectacularly. But this is a very easy mistake to make.&lt;/p&gt;

&lt;p&gt;So using an adapter/wrapper class is really a good idea.&lt;/p&gt;

&lt;p&gt;The second part of the issue (broken &quot;equals&quot;) is not what we have experienced. This is what I have concluded just by studying &quot;compareEqual&quot; method. Surely this also have to be fixed.&lt;/p&gt;</comment>
                            <comment id="17573495" author="paulk" created="Sun, 31 Jul 2022 22:34:35 +0000"  >&lt;p&gt;Yes, we can look into an adapter. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=klv_m72&quot; class=&quot;user-hover&quot; rel=&quot;klv_m72&quot;&gt;klv_m72&lt;/a&gt; can you give me a failing test case that meets your conclusion of failing?&lt;/p&gt;</comment>
                            <comment id="17577206" author="klv_m72" created="Tue, 9 Aug 2022 06:57:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulk&quot; class=&quot;user-hover&quot; rel=&quot;paulk&quot;&gt;paulk&lt;/a&gt; : &lt;/p&gt;

&lt;p&gt;It is always difficult to reliably test memory or performance related expectations.&lt;/p&gt;

&lt;p&gt;I have attached test1.groovy that tests both problems mentioned in the description, see comments in the test code.&lt;/p&gt;</comment>
                            <comment id="17577379" author="paulk" created="Tue, 9 Aug 2022 12:05:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=klv_m72&quot; class=&quot;user-hover&quot; rel=&quot;klv_m72&quot;&gt;klv_m72&lt;/a&gt; It seems the part 2 aspect in the attachment doesn&apos;t show any failing functionality over and above it wasn&apos;t what you expected as per what you&apos;ve mentioned previously. In any case, it seems the focus should be on fixing the part 1 aspect.&lt;/p&gt;</comment>
                            <comment id="17577395" author="klv_m72" created="Tue, 9 Aug 2022 12:35:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulk&quot; class=&quot;user-hover&quot; rel=&quot;paulk&quot;&gt;paulk&lt;/a&gt; : sorry, but I think 4000-5000 times slowdown is clearly a problem. &lt;/p&gt;

&lt;p&gt;I have&#160; changed the script locally: increased arrays sizes from 100000 to 1000000.&lt;/p&gt;

&lt;p&gt;Then I have run the test with additional JVM options: -XX:+UnlockExperimentalVMOptions -XX:+UseEpsilonGC&lt;/p&gt;

&lt;p&gt;testArray == testArray2 case worked perfectly. And it still worked with 100000 iterations.&lt;/p&gt;

&lt;p&gt;But testArray == cmp has failed with OOM, clearly indicating that the comparison performed a lot of &lt;span class=&quot;error&quot;&gt;&amp;#91;useless&amp;#93;&lt;/span&gt; allocations.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17577673" author="paulk" created="Wed, 10 Aug 2022 00:04:45 +0000"  >&lt;p&gt;I think everyone fully agrees with you on the performance aspect (part 1). I have two fixes in mind that should cover that off. The fixes I have in mind don&apos;t address your point 2. I was just trying to see if I could also address that but perhaps it is best I go ahead with the initial fixes and then we can start the discussion again.&lt;/p&gt;</comment>
                            <comment id="17579390" author="githubbot" created="Sun, 14 Aug 2022 13:35:49 +0000"  >&lt;p&gt;paulk-asert opened a new pull request, #1765:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/1765&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1765&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   &#8230; lists&lt;/p&gt;

</comment>
                            <comment id="17579400" author="githubbot" created="Sun, 14 Aug 2022 14:28:03 +0000"  >&lt;p&gt;paulk-asert commented on PR #1765:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/1765#issuecomment-1214389544&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1765#issuecomment-1214389544&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Applies the same treatment also to some primitive toSet operations which were double copying.&lt;/p&gt;

</comment>
                            <comment id="17579404" author="githubbot" created="Sun, 14 Aug 2022 14:36:54 +0000"  >&lt;p&gt;sonatype-lift&lt;span class=&quot;error&quot;&gt;&amp;#91;bot&amp;#93;&lt;/span&gt; commented on code in PR #1765:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/1765#discussion_r945299722&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1765#discussion_r945299722&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
src/main/java/org/codehaus/groovy/runtime/typehandling/DefaultTypeTransformation.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -562,6 +565,181 @@ public static List primitiveArrayToList(Object array) &lt;/p&gt;
{
         return list;
     }

&lt;p&gt;+    /**&lt;br/&gt;
+     * Allows conversion of arrays into an immutable List view&lt;br/&gt;
+     *&lt;br/&gt;
+     * @param array an array&lt;br/&gt;
+     * @return a List view of the array&lt;br/&gt;
+     */&lt;br/&gt;
+    public static List primitiveArrayToUnmodifiableList(Object array) &lt;/p&gt;
{
+        return new ArrayToUnmodifiableListAdapter(array);
+    }
&lt;p&gt;+&lt;br/&gt;
+    static class ArrayToUnmodifiableListAdapter implements List {&lt;br/&gt;
+        private Object delegate;&lt;br/&gt;
+&lt;br/&gt;
+        public ArrayToUnmodifiableListAdapter(Object delegate) &lt;/p&gt;
{
+            Objects.requireNonNull(delegate);
+            this.delegate = delegate;
+        }
&lt;p&gt;+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public int size() &lt;/p&gt;
{
+            return Array.getLength(delegate);
+        }
&lt;p&gt;+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public boolean isEmpty() &lt;/p&gt;
{
+            return size() == 0;
+        }
&lt;p&gt;+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public boolean contains(Object o) {&lt;br/&gt;
+            for (Object next : this) &lt;/p&gt;
{
+                if (next.equals(o)) return true;
+            }
&lt;p&gt;+            return false;&lt;br/&gt;
+        }&lt;br/&gt;
+&lt;br/&gt;
+        private class Itr implements Iterator {&lt;br/&gt;
+            private int idx = 0;&lt;br/&gt;
+&lt;br/&gt;
+            @Override&lt;br/&gt;
+            public boolean hasNext() &lt;/p&gt;
{
+                return idx &amp;lt; size();
+            }
&lt;p&gt;+&lt;br/&gt;
+            @Override&lt;br/&gt;
+            public Object next() &lt;/p&gt;
{
+                return get(idx++);
+            }
&lt;p&gt;+        }&lt;br/&gt;
+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public Iterator iterator() &lt;/p&gt;
{
+            return new Itr();
+        }
&lt;p&gt;+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public Object get(int index) {&lt;br/&gt;
+            Object item = Array.get(delegate, index);&lt;br/&gt;
+            if (item != null &amp;amp;&amp;amp; item.getClass().isArray() &amp;amp;&amp;amp; item.getClass().getComponentType().isPrimitive()) &lt;/p&gt;
{
+                item = primitiveArrayToUnmodifiableList(item);
+            }
&lt;p&gt;+            return item;&lt;br/&gt;
+        }&lt;br/&gt;
+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public int indexOf(Object o) {&lt;br/&gt;
+            int idx = 0;&lt;br/&gt;
+            boolean found = false;&lt;br/&gt;
+            while (!found &amp;amp;&amp;amp; idx &amp;lt; size()) &lt;/p&gt;
{
+                found = get(idx).equals(o);
+                if (!found) idx++;
+            }
&lt;p&gt;+            return found ? idx : -1;&lt;br/&gt;
+        }&lt;br/&gt;
+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public int lastIndexOf(Object o) {&lt;br/&gt;
+            int idx = size() - 1;&lt;br/&gt;
+            boolean found = false;&lt;br/&gt;
+            while (!found &amp;amp;&amp;amp; idx &amp;gt;= 0) {&lt;br/&gt;
+                found = get(idx).equals(o);&lt;/p&gt;

&lt;p&gt;Review Comment:&lt;br/&gt;
   &#128172; 2 similar findings have been found in this PR&lt;/p&gt;

&lt;p&gt;   &amp;#8212;&lt;/p&gt;

&lt;p&gt;   &lt;b&gt;NULL_DEREFERENCE:&lt;/b&gt;  object returned by `get(idx)` could be null and is dereferenced at line 648.&lt;/p&gt;

&lt;p&gt;   &amp;#8212;&lt;/p&gt;

&lt;p&gt;   &amp;lt;details&amp;gt;&amp;lt;summary&amp;gt;&amp;lt;b&amp;gt;Expand here to view all instances of this finding&amp;lt;/b&amp;gt;&amp;lt;/summary&amp;gt;&amp;lt;br/&amp;gt;&lt;/p&gt;

&lt;p&gt;   &amp;lt;div align=&quot;center&quot;&amp;gt;&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; *&lt;b&gt;File Path&lt;/b&gt;* &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; *&lt;b&gt;Line Number&lt;/b&gt;* &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; -----------&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17579470" author="githubbot" created="Mon, 15 Aug 2022 00:23:49 +0000"  >&lt;p&gt;paulk-asert commented on code in PR #1765:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/1765#discussion_r945363666&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1765#discussion_r945363666&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
src/main/java/org/codehaus/groovy/runtime/typehandling/DefaultTypeTransformation.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -562,6 +565,181 @@ public static List primitiveArrayToList(Object array) &lt;/p&gt;
{
         return list;
     }

&lt;p&gt;+    /**&lt;br/&gt;
+     * Allows conversion of arrays into an immutable List view&lt;br/&gt;
+     *&lt;br/&gt;
+     * @param array an array&lt;br/&gt;
+     * @return a List view of the array&lt;br/&gt;
+     */&lt;br/&gt;
+    public static List primitiveArrayToUnmodifiableList(Object array) &lt;/p&gt;
{
+        return new ArrayToUnmodifiableListAdapter(array);
+    }
&lt;p&gt;+&lt;br/&gt;
+    static class ArrayToUnmodifiableListAdapter implements List {&lt;br/&gt;
+        private Object delegate;&lt;br/&gt;
+&lt;br/&gt;
+        public ArrayToUnmodifiableListAdapter(Object delegate) &lt;/p&gt;
{
+            Objects.requireNonNull(delegate);
+            this.delegate = delegate;
+        }
&lt;p&gt;+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public int size() &lt;/p&gt;
{
+            return Array.getLength(delegate);
+        }
&lt;p&gt;+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public boolean isEmpty() &lt;/p&gt;
{
+            return size() == 0;
+        }
&lt;p&gt;+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public boolean contains(Object o) {&lt;br/&gt;
+            for (Object next : this) &lt;/p&gt;
{
+                if (next.equals(o)) return true;
+            }
&lt;p&gt;+            return false;&lt;br/&gt;
+        }&lt;br/&gt;
+&lt;br/&gt;
+        private class Itr implements Iterator {&lt;br/&gt;
+            private int idx = 0;&lt;br/&gt;
+&lt;br/&gt;
+            @Override&lt;br/&gt;
+            public boolean hasNext() &lt;/p&gt;
{
+                return idx &amp;lt; size();
+            }
&lt;p&gt;+&lt;br/&gt;
+            @Override&lt;br/&gt;
+            public Object next() &lt;/p&gt;
{
+                return get(idx++);
+            }
&lt;p&gt;+        }&lt;br/&gt;
+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public Iterator iterator() &lt;/p&gt;
{
+            return new Itr();
+        }
&lt;p&gt;+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public Object get(int index) {&lt;br/&gt;
+            Object item = Array.get(delegate, index);&lt;br/&gt;
+            if (item != null &amp;amp;&amp;amp; item.getClass().isArray() &amp;amp;&amp;amp; item.getClass().getComponentType().isPrimitive()) &lt;/p&gt;
{
+                item = primitiveArrayToUnmodifiableList(item);
+            }
&lt;p&gt;+            return item;&lt;br/&gt;
+        }&lt;br/&gt;
+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public int indexOf(Object o) {&lt;br/&gt;
+            int idx = 0;&lt;br/&gt;
+            boolean found = false;&lt;br/&gt;
+            while (!found &amp;amp;&amp;amp; idx &amp;lt; size()) &lt;/p&gt;
{
+                found = get(idx).equals(o);
+                if (!found) idx++;
+            }
&lt;p&gt;+            return found ? idx : -1;&lt;br/&gt;
+        }&lt;br/&gt;
+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public int lastIndexOf(Object o) {&lt;br/&gt;
+            int idx = size() - 1;&lt;br/&gt;
+            boolean found = false;&lt;br/&gt;
+            while (!found &amp;amp;&amp;amp; idx &amp;gt;= 0) {&lt;br/&gt;
+                found = get(idx).equals(o);&lt;/p&gt;

&lt;p&gt;Review Comment:&lt;br/&gt;
   @sonatype-lift ignoreall&lt;/p&gt;


</comment>
                            <comment id="17579471" author="githubbot" created="Mon, 15 Aug 2022 00:23:55 +0000"  >&lt;p&gt;sonatype-lift&lt;span class=&quot;error&quot;&gt;&amp;#91;bot&amp;#93;&lt;/span&gt; commented on code in PR #1765:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/1765#discussion_r945363680&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1765#discussion_r945363680&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
src/main/java/org/codehaus/groovy/runtime/typehandling/DefaultTypeTransformation.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -562,6 +565,181 @@ public static List primitiveArrayToList(Object array) &lt;/p&gt;
{
         return list;
     }

&lt;p&gt;+    /**&lt;br/&gt;
+     * Allows conversion of arrays into an immutable List view&lt;br/&gt;
+     *&lt;br/&gt;
+     * @param array an array&lt;br/&gt;
+     * @return a List view of the array&lt;br/&gt;
+     */&lt;br/&gt;
+    public static List primitiveArrayToUnmodifiableList(Object array) &lt;/p&gt;
{
+        return new ArrayToUnmodifiableListAdapter(array);
+    }
&lt;p&gt;+&lt;br/&gt;
+    static class ArrayToUnmodifiableListAdapter implements List {&lt;br/&gt;
+        private Object delegate;&lt;br/&gt;
+&lt;br/&gt;
+        public ArrayToUnmodifiableListAdapter(Object delegate) &lt;/p&gt;
{
+            Objects.requireNonNull(delegate);
+            this.delegate = delegate;
+        }
&lt;p&gt;+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public int size() &lt;/p&gt;
{
+            return Array.getLength(delegate);
+        }
&lt;p&gt;+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public boolean isEmpty() &lt;/p&gt;
{
+            return size() == 0;
+        }
&lt;p&gt;+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public boolean contains(Object o) {&lt;br/&gt;
+            for (Object next : this) &lt;/p&gt;
{
+                if (next.equals(o)) return true;
+            }
&lt;p&gt;+            return false;&lt;br/&gt;
+        }&lt;br/&gt;
+&lt;br/&gt;
+        private class Itr implements Iterator {&lt;br/&gt;
+            private int idx = 0;&lt;br/&gt;
+&lt;br/&gt;
+            @Override&lt;br/&gt;
+            public boolean hasNext() &lt;/p&gt;
{
+                return idx &amp;lt; size();
+            }
&lt;p&gt;+&lt;br/&gt;
+            @Override&lt;br/&gt;
+            public Object next() &lt;/p&gt;
{
+                return get(idx++);
+            }
&lt;p&gt;+        }&lt;br/&gt;
+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public Iterator iterator() &lt;/p&gt;
{
+            return new Itr();
+        }
&lt;p&gt;+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public Object get(int index) {&lt;br/&gt;
+            Object item = Array.get(delegate, index);&lt;br/&gt;
+            if (item != null &amp;amp;&amp;amp; item.getClass().isArray() &amp;amp;&amp;amp; item.getClass().getComponentType().isPrimitive()) &lt;/p&gt;
{
+                item = primitiveArrayToUnmodifiableList(item);
+            }
&lt;p&gt;+            return item;&lt;br/&gt;
+        }&lt;br/&gt;
+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public int indexOf(Object o) {&lt;br/&gt;
+            int idx = 0;&lt;br/&gt;
+            boolean found = false;&lt;br/&gt;
+            while (!found &amp;amp;&amp;amp; idx &amp;lt; size()) &lt;/p&gt;
{
+                found = get(idx).equals(o);
+                if (!found) idx++;
+            }
&lt;p&gt;+            return found ? idx : -1;&lt;br/&gt;
+        }&lt;br/&gt;
+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public int lastIndexOf(Object o) {&lt;br/&gt;
+            int idx = size() - 1;&lt;br/&gt;
+            boolean found = false;&lt;br/&gt;
+            while (!found &amp;amp;&amp;amp; idx &amp;gt;= 0) {&lt;br/&gt;
+                found = get(idx).equals(o);&lt;/p&gt;

&lt;p&gt;Review Comment:&lt;br/&gt;
   The *&lt;b&gt;ignoreall&lt;/b&gt;* command is active on this PR, all the existing Lift issues are ignored.&lt;/p&gt;


</comment>
                            <comment id="17580273" author="githubbot" created="Tue, 16 Aug 2022 11:44:27 +0000"  >&lt;p&gt;paulk-asert merged PR #1765:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/1765&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1765&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="17582092" author="paulk" created="Sat, 20 Aug 2022 00:48:08 +0000"  >&lt;p&gt;I have added a fix. Currently in master and GROOVY_4_0_X. If you can try a snapshot and let me know if you think this resolves your concerns, that would be great.&lt;/p&gt;</comment>
                            <comment id="17584711" author="klv_m72" created="Thu, 25 Aug 2022 08:30:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulk&quot; class=&quot;user-hover&quot; rel=&quot;paulk&quot;&gt;paulk&lt;/a&gt; : I have tested it. Yes, it now works. Funny enough comparing an array to an instance of some class is now faster than comparing two arrays of different sizes.&lt;/p&gt;</comment>
                            <comment id="17584749" author="paulk" created="Thu, 25 Aug 2022 10:11:01 +0000"  >&lt;p&gt;Thanks for spotting the issue. Proposed PR merged.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13047914" name="test1.groovy" size="1768" author="klv_m72" created="Tue, 9 Aug 2022 06:56:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 11 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z17b54:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>