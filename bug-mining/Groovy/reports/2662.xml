<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:42:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-6873] Invalid compiler error: &quot;The current scope already contains a variable of the name xxx&quot;</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-6873</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;The attached source reports the following invalid compiler errors &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;/Users/pditommaso/workspace/groovy_2_3/src/main/groovy/Channel.groovy: 113: The current scope already contains a variable of the name folder
 @ line 113, column 13.
           def folder
               ^

/Users/pditommaso/workspace/groovy_2_3/src/main/groovy/Channel.groovy: 114: The current scope already contains a variable of the name pattern
 @ line 114, column 13.
           def pattern
               ^

2 errors
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Removing the @Slf4j annotation the code is compiled successfully &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.nio.file.FileVisitOption
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.nio.file.FileVisitResult
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.nio.file.Files
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.nio.file.Path
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.nio.file.SimpleFileVisitor
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.nio.file.attribute.BasicFileAttributes

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.PackageScope
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.util.logging.Slf4j
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovyx.gpars.dataflow.DataflowChannel
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovyx.gpars.dataflow.DataflowQueue
/**
 * Channel factory object
 *
 * @author Paolo Di Tommaso &amp;lt;paolo.ditommaso@gmail.com&amp;gt;
 */
@Slf4j
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Channel {

    /**
     * Implement the logic &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; files matching
     *
     * @param syntax The &lt;span class=&quot;code-quote&quot;&gt;&quot;syntax&quot;&lt;/span&gt; to match file names, either {@code regex} or {@code glob}
     * @param folder The parent folder
     * @param pattern The file name pattern
     * @param skipHidden Whenever skip the hidden files
     * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; A dataflow channel instance emitting the file matching the specified criteria
     */
    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; DataflowChannel&amp;lt;Path&amp;gt; pathImpl( &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; syntax, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; folder, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; pattern, Map options )  {
        &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; syntax in [&lt;span class=&quot;code-quote&quot;&gt;&apos;regex&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;glob&apos;&lt;/span&gt;]

        &lt;span class=&quot;code-comment&quot;&gt;// verify that the &lt;span class=&quot;code-quote&quot;&gt;&apos;type&apos;&lt;/span&gt; parameter has a valid value
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;//CheckHelper.checkParamsMap( &lt;span class=&quot;code-quote&quot;&gt;&apos;path&apos;&lt;/span&gt;, options, VALID_PATH_PARAMS )
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; type = options?.type ?: &lt;span class=&quot;code-quote&quot;&gt;&apos;file&apos;&lt;/span&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; walkOptions = options?.followLinks == &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; ? EnumSet.noneOf(FileVisitOption.class) : EnumSet.of(FileVisitOption.FOLLOW_LINKS)
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; maxDepth = options?.maxDepth ? options.maxDepth as &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; : &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.MAX_VALUE
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; includeHidden = options?.hidden as &lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt; ?: pattern.startsWith(&lt;span class=&quot;code-quote&quot;&gt;&apos;.&apos;&lt;/span&gt;)

        &lt;span class=&quot;code-comment&quot;&gt;// now apply glob file search
&lt;/span&gt;        def path = folder as Path
        def rule = &lt;span class=&quot;code-quote&quot;&gt;&quot;$syntax:${folder}${pattern}&quot;&lt;/span&gt;
        def matcher = path.getFileSystem().getPathMatcher(rule)
        def channel = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DataflowQueue&amp;lt;Path&amp;gt;()
        &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; includeDir = type in [&lt;span class=&quot;code-quote&quot;&gt;&apos;dir&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;any&apos;&lt;/span&gt;]
        &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; includeFile = type in [&lt;span class=&quot;code-quote&quot;&gt;&apos;file&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;any&apos;&lt;/span&gt;]

        &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.start {

            Files.walkFileTree(path, walkOptions, maxDepth, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SimpleFileVisitor&amp;lt;Path&amp;gt;() {

                @Override
                &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; FileVisitResult preVisitDirectory(Path dir, BasicFileAttributes attrs) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException
                {
                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (includeDir &amp;amp;&amp;amp; matcher.matches(dir) &amp;amp;&amp;amp; ( includeHidden || !Files.isHidden(dir) )) {
                        channel.bind(dir.toAbsolutePath())
                    }
                    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; FileVisitResult.CONTINUE;
                }

                @Override
                &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; FileVisitResult visitFile(Path file, BasicFileAttributes attr) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (includeFile &amp;amp;&amp;amp; matcher.matches(file) &amp;amp;&amp;amp; ( includeHidden || !Files.isHidden(file) ) &amp;amp;&amp;amp; !Files.isDirectory(file)) {
                        channel.bind(file.toAbsolutePath())
                    }
                    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; FileVisitResult.CONTINUE;
                }

                @Override
                &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; FileVisitResult visitFileFailed(Path file, IOException exc) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
                    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; FileVisitResult.CONTINUE;
                }
            })

        }

        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; channel
    }

    @PackageScope
    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; getFolderAndPattern( &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; filePattern ) {

        def scheme = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = filePattern.indexOf(&lt;span class=&quot;code-quote&quot;&gt;&apos;:&lt;span class=&quot;code-comment&quot;&gt;//&apos;&lt;/span&gt;)
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;( i != -1 ) {
            scheme = filePattern.substring(0, i+3)
            filePattern = filePattern.substring(i+3)
        }

        def folder
        def pattern
        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; p = filePattern.indexOf(&lt;span class=&quot;code-quote&quot;&gt;&apos;*&apos;&lt;/span&gt;)
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;( p != -1 ) {
            i = filePattern.substring(0,p).lastIndexOf(&lt;span class=&quot;code-quote&quot;&gt;&apos;/&apos;&lt;/span&gt;)
        }
        &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            i = filePattern.lastIndexOf(&lt;span class=&quot;code-quote&quot;&gt;&apos;/&apos;&lt;/span&gt;)
        }

        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;( i != -1 ) {
            folder = filePattern.substring(0,i+1)
            pattern = filePattern.substring(i+1)
        }
        &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            folder = &lt;span class=&quot;code-quote&quot;&gt;&apos;./&apos;&lt;/span&gt;
            pattern = filePattern
        }

        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;( scheme ) {
            folder = scheme + folder
        }

        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; [ folder, pattern ]

    }


}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

</description>
                <environment></environment>
        <key id="12817615">GROOVY-6873</key>
            <summary>Invalid compiler error: &quot;The current scope already contains a variable of the name xxx&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="melix">C&#233;dric Champeau</assignee>
                                    <reporter username="pablo72">paolo di tommaso</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Jun 2014 13:13:25 +0000</created>
                <updated>Tue, 8 Jul 2014 15:28:42 +0000</updated>
                            <resolved>Sun, 22 Jun 2014 08:30:33 +0000</resolved>
                                    <version>2.3.3</version>
                                    <fixVersion>2.3.4</fixVersion>
                                    <component>Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14476042" author="blackdrag" created="Thu, 19 Jun 2014 13:52:15 +0000"  >&lt;p&gt;This strongly suggest the variable scope of the method  before is not popped in VariableScopeVisitor&lt;/p&gt;</comment>
                            <comment id="14476094" author="melix" created="Sun, 22 Jun 2014 07:40:20 +0000"  >&lt;p&gt;Reduced example:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@Grab(group=&lt;span class=&quot;code-quote&quot;&gt;&apos;org.slf4j&apos;&lt;/span&gt;, module=&lt;span class=&quot;code-quote&quot;&gt;&apos;slf4j-simple&apos;&lt;/span&gt;, version=&lt;span class=&quot;code-quote&quot;&gt;&apos;1.6.1&apos;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.util.logging.Slf4j

@Slf4j
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Channel {

    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void someMethod(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; folder)  {
      &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; includeHidden = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
       &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Runnable&lt;/span&gt;() {

                @Override
                &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void run() {
                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (includeHidden) {
                    }
                }

            }
    }

    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void otherMethod() {
        def folder
    }


}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14476043" author="melix" created="Sun, 22 Jun 2014 08:01:40 +0000"  >&lt;p&gt;I suspect this to be a regression caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-6373&quot; title=&quot;&amp;#39;log&amp;#39; field introduced via @Slf4j not accessible in inner class of @CompileStatic class&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-6373&quot;&gt;&lt;del&gt;GROOVY-6373&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 22 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2chbz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>