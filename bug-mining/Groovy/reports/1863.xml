<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:28:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-5587] Map.Entry&lt;K,V&gt;#key and #value fail to infer type correctly under @StaticCompile</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-5587</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.CompileStatic
@CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;BrokenCompileStaticTest &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; GroovyTestCase {
  void testMapForEachAttribute() {
    def result = &quot;&quot;
    def sum = 0
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; ( Map.Entry&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; it in [a:1, b:3].entrySet() ) {
       result += it.key
       sum += it.value
    }
    &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; result == &lt;span class=&quot;code-quote&quot;&gt;&quot;ab&quot;&lt;/span&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; sum == 4
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;fails to infer the type of Map.Entry#key and #value, regardless of the proper generic type in the for-in loop definition.&lt;/p&gt;

&lt;p&gt;Message:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:
/home/steven/BrokenCompileStaticTest.groovy: 9: [Static type checking] - Cannot find matching method &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;#plus(java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; &amp;lt;V&amp;gt;)
 @ line 9, column 8.
          sum += it.value
          ^

1 error
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Also, shouldn&apos;t groovy report both static type errors, instead of just the first?&lt;/p&gt;</description>
                <environment>Ubuntu 12.04, Oracle JVM 1.7.0_05</environment>
        <key id="12818124">GROOVY-5587</key>
            <summary>Map.Entry&lt;K,V&gt;#key and #value fail to infer type correctly under @StaticCompile</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="melix">C&#233;dric Champeau</assignee>
                                    <reporter username="blendmaster">Steven Ruppert</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Jul 2012 10:57:13 +0000</created>
                <updated>Thu, 26 Jul 2012 16:49:39 +0000</updated>
                            <resolved>Thu, 12 Jul 2012 06:55:59 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.1</fixVersion>
                                    <component>Static compilation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14472983" author="blendmaster" created="Wed, 11 Jul 2012 10:59:15 +0000"  >&lt;p&gt;Oh, on second look, groovy only fails to infer the type of Map.Entry#value. weird.&lt;/p&gt;</comment>
                            <comment id="14473011" author="melix" created="Wed, 11 Jul 2012 12:42:54 +0000"  >&lt;p&gt;Change &lt;tt&gt;def result=&quot;&quot;&lt;/tt&gt; to &lt;tt&gt;int result=0&lt;/tt&gt; and you will see that the type checker fails in both cases. It&apos;s just that in the first case, anything can be assigned to a &lt;tt&gt;String&lt;/tt&gt; so it works.&lt;/p&gt;</comment>
                            <comment id="14473089" author="blendmaster" created="Wed, 11 Jul 2012 21:42:47 +0000"  >&lt;p&gt;so {{result += }} coerces its argument to a string? I suppose that can be useful, but it doesn&apos;t really help with the missing #key and #value types.&lt;/p&gt;</comment>
                            <comment id="14472954" author="melix" created="Thu, 12 Jul 2012 01:51:57 +0000"  >&lt;p&gt;Steven, my comment was there to say there wasn&apos;t a difference between the treatment of &lt;tt&gt;key&lt;/tt&gt; and &lt;tt&gt;value&lt;/tt&gt;, nothing more &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12816300">GROOVY-5594</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12816367">GROOVY-5595</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12722998" name="BrokenCompileStaticTest.groovy" size="354" author="blendmaster" created="Wed, 11 Jul 2012 10:57:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 19 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ck5r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>