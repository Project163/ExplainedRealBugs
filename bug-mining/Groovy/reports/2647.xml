<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:41:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-6830] Calling Closure from within inner static class fails in 2.1.7+</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-6830</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;One of the fellows on my team ran into what we think is an issue with the way that closures are handled post 2.1.7.&lt;/p&gt;

&lt;p&gt;The following test case illustrates the issue&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Foo {
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;InnerFoo {
      &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; InnerFoo() {
            bar()
      }  
 
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; bar() {
      (1..10).each {
            baz(it)
      }
   }
 
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; baz(output) {
      println output
   }
 }

}
&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Foo.InnerFoo ()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This code seems to be ok in 2.1.6. &lt;/p&gt;

&lt;p&gt;I had a quick email chat with Andres Almiray and he dug a bit further into this example. He noticed the following:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Hi Todd,&lt;/p&gt;

&lt;p&gt;As far as I can tell the problem appears in Groovy 2.1.7 and has not been fixed in 2.3.1.&lt;br/&gt;
There&apos;s indeed a compilation difference between 2.1.6 and 2.1.7 as seen here&lt;/p&gt;

&lt;p&gt;2.1.6:&lt;br/&gt;
total 56&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 aalmiray  wheel  6291 May 27 11:13 Foo$InnerFoo.class&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 aalmiray  wheel  2571 May 27 11:13 Foo$_InnerFoo_bar_closure1.class&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 aalmiray  wheel  4654 May 27 11:13 Foo.class&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 aalmiray  wheel  5964 May 27 11:13 shawn.class&lt;/p&gt;

&lt;p&gt;2.1.7:&lt;br/&gt;
total 56&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 aalmiray  wheel  6291 May 27 11:13 Foo$InnerFoo.class&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 aalmiray  wheel  2562 May 27 11:13 Foo$_InnerFoo_bar_closure1.class&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 aalmiray  wheel  4654 May 27 11:13 Foo.class&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-  1 aalmiray  wheel  5964 May 27 11:13 shawn.class&lt;/p&gt;

&lt;p&gt;There are 9 missing bytes since 2.1.7. I think it&apos;s best if you file a bug and ping @cedricchampeau as this might be related to some typing optimizations.&lt;/p&gt;

&lt;p&gt;Cheers,&lt;br/&gt;
Andres&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I can appreciate this is not a typical case and likely why it hasn&apos;t been noticed yet. Our specific case where we bumped into this was in a Jenkins Test Runner that uses this idiom. &lt;/p&gt;

&lt;p&gt;Let me know if we can provide any further information. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12818311">GROOVY-6830</key>
            <summary>Calling Closure from within inner static class fails in 2.1.7+</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="todd.costella">Todd Costella</reporter>
                        <labels>
                    </labels>
                <created>Tue, 27 May 2014 09:30:47 +0000</created>
                <updated>Tue, 8 Jul 2014 15:28:39 +0000</updated>
                            <resolved>Thu, 12 Jun 2014 04:14:15 +0000</resolved>
                                    <version>2.1.7</version>
                                    <fixVersion>2.3.4</fixVersion>
                    <fixVersion>2.4.0-beta-2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14475897" author="melix" created="Tue, 27 May 2014 13:48:42 +0000"  >&lt;p&gt;Still a problem with latest sources (&lt;tt&gt;master&lt;/tt&gt; and &lt;tt&gt;GROOVY_2_3_X&lt;/tt&gt;. Interestingly, adding &lt;tt&gt;@CompileStatic&lt;/tt&gt; fixes the problem.&lt;/p&gt;</comment>
                            <comment id="14476012" author="aalmiray" created="Wed, 28 May 2014 03:48:25 +0000"  >&lt;p&gt;FYI Groovy 2.3.2 still has the problem. Due to a newer version of ASM all generated bytecode sizes have changed&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;-rw-r--r--  1 aalmiray  wheel  6311 May 28 10:48 Foo$InnerFoo.class
-rw-r--r--  1 aalmiray  wheel  2619 May 28 10:48 Foo$_InnerFoo_bar_closure1.class
-rw-r--r--  1 aalmiray  wheel  4805 May 28 10:48 Foo.class
-rw-r--r--  1 aalmiray  wheel  6115 May 28 10:48 shawn.class
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14476028" author="melix" created="Wed, 28 May 2014 03:50:31 +0000"  >&lt;p&gt;Yup, that&apos;s what my previous comment meant &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14476099" author="paulk" created="Thu, 12 Jun 2014 04:13:51 +0000"  >&lt;p&gt;see:&lt;br/&gt;
&lt;a href=&quot;https://github.com/groovy/groovy-core/pull/443&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/groovy/groovy-core/pull/443&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14476080" author="paulk" created="Thu, 12 Jun 2014 04:14:15 +0000"  >&lt;p&gt;Fixed. Thanks for spotting the issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 23 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2c0dz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>