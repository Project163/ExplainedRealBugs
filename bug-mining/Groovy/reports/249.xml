<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:57:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-1205] GStringTemplateEngine does not always parse single line comments &apos;//&apos; within &lt;% and %&gt; sections correctly</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-1205</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;This bug affects groovy.text.GStringTemplateEngine.  SimpleTemplateEngine seems to be immune.&lt;br/&gt;
If you put a single line comment (using double forward slashes &apos;//&apos;) within a scriptlet section (enclosed in &amp;lt;% and %&amp;gt;), it will cause a parse error if there is no new line between the end of the comment and the closing &apos;%&amp;gt;&apos; sequence.  This is often done to place comments into a template that the developer does not want showing up in the output.  For example:&lt;/p&gt;

&lt;p&gt;  &amp;lt;tag1 attr=&quot;someValue&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;% // Some comment that I don&apos;t want showing up in the output %&amp;gt;&lt;br/&gt;
    &amp;lt;tag2/&amp;gt;&lt;br/&gt;
  &amp;lt;/tag1&amp;gt;&lt;/p&gt;

&lt;p&gt;The above will cause a parse error.  However, this will not:&lt;/p&gt;

&lt;p&gt;  &amp;lt;tag1 attr=&quot;someValue&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;% // Some comment that I don&apos;t want showing up in the output&lt;br/&gt;
    %&amp;gt;&lt;br/&gt;
    &amp;lt;tag2/&amp;gt;&lt;br/&gt;
  &amp;lt;/tag1&amp;gt;&lt;/p&gt;

&lt;p&gt;Further debugging indicates that this is because GStringTemplateEngine does not place a newline in the resulting Groovy script code after outputting code enclosed in a &amp;lt;% %&amp;gt; section.  (It currently places the characters &quot;; &quot; after the scriptlet code).  For example, the following template:&lt;/p&gt;

&lt;p&gt;        &amp;lt;% // This is a comment that will be filtered from output %&amp;gt;&lt;br/&gt;
        Hello World!&lt;/p&gt;

&lt;p&gt;Produces this Groovy script:&lt;/p&gt;

&lt;p&gt;package groovy.tmp.templates&lt;br/&gt;
 def getTemplate() { return &lt;/p&gt;
{ out -&amp;gt; delegate = new Binding(delegate); out &amp;lt;&amp;lt; 
&quot;&quot;&quot;&quot;&quot;&quot;;  // This is a comment that will be filtered from output ; out &amp;lt;&amp;lt; &quot;&quot;&quot;
Hello World!&quot;&quot;&quot;}
&lt;p&gt;.asWritable()}&lt;/p&gt;

&lt;p&gt;Notice that GStringTemplateEngine appended &quot;; &quot; to the end of the comment &apos;//&apos;, but since it did not append a newline after the &quot;; &quot;, the following &quot;out &amp;lt;&amp;lt; ...&quot; code is considered part of the comment and so completely borks the parsing.&lt;/p&gt;

&lt;p&gt;I&apos;ve attached a very simple TestCase that contains a failing unit test to reproduce the problem.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12816505">GROOVY-1205</key>
            <summary>GStringTemplateEngine does not always parse single line comments &apos;//&apos; within &lt;% and %&gt; sections correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tug">John Wilson</assignee>
                                    <reporter username="adepue">Andy DePue</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Jan 2006 15:26:54 +0000</created>
                <updated>Fri, 30 Nov 2007 06:23:32 +0000</updated>
                            <resolved>Thu, 12 Jan 2006 03:57:09 +0000</resolved>
                                    <version>1.0-JSR-3</version>
                                                    <component>Groovlet / GSP</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                            <attachment id="12721089" name="SimpleGStringTemplateEngineTest.java" size="675" author="adepue" created="Wed, 11 Jan 2006 15:26:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 years, 46 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2co1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>