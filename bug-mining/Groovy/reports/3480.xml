<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:59:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-8778] Cast short-hand breaks for empty map</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-8778</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;We support:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
println Date[time:0]
def map = [time:0]
println Date[*:map]
map = [:]
println Date[*:map]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but not:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
println Date[:]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This is a breaking change since we currently support printing an empty map without brackets but would require them after this change:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
println [:]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;would need to be:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
println([:])
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;But we require the brackets for lists (empty and non-empty) and non-empty maps already.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13183583">GROOVY-8778</key>
            <summary>Cast short-hand breaks for empty map</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="paulk">Paul King</reporter>
                        <labels>
                            <label>breaking</label>
                    </labels>
                <created>Fri, 7 Sep 2018 08:19:17 +0000</created>
                <updated>Wed, 16 Jan 2019 12:08:21 +0000</updated>
                            <resolved>Sat, 8 Sep 2018 22:14:21 +0000</resolved>
                                    <version>3.0.0-alpha-3</version>
                                    <fixVersion>3.0.0-alpha-4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16607810" author="githubbot" created="Sat, 8 Sep 2018 00:23:47 +0000"  >&lt;p&gt;GitHub user paulk-asert opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/792&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/792&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8778&quot; title=&quot;Cast short-hand breaks for empty map&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8778&quot;&gt;&lt;del&gt;GROOVY-8778&lt;/del&gt;&lt;/a&gt;: Cast short-hand breaks for empty map&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/paulk-asert/groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/paulk-asert/groovy&lt;/a&gt; groovy8778&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/792.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/792.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #792&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 921fbda4568592691fcda60919a90f93caf39135&lt;br/&gt;
Author: Paul King &amp;lt;paulk@...&amp;gt;&lt;br/&gt;
Date:   2018-09-08T00:22:37Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8778&quot; title=&quot;Cast short-hand breaks for empty map&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8778&quot;&gt;&lt;del&gt;GROOVY-8778&lt;/del&gt;&lt;/a&gt;: Cast short-hand breaks for empty map&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16607812" author="githubbot" created="Sat, 8 Sep 2018 00:28:45 +0000"  >&lt;p&gt;Github user danielsun1106 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/792#discussion_r216113948&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/792#discussion_r216113948&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: subprojects/parser-antlr4/src/main/java/org/apache/groovy/parser/antlr4/AstBuilder.java &amp;#8212;&lt;br/&gt;
    @@ -2337,14 +2337,11 @@ public Expression visitPathElement(PathElementContext ctx) {&lt;br/&gt;
                         this.visitNamedPropertyArgs(ctx.namedPropertyArgs());&lt;/p&gt;

&lt;p&gt;                 Expression right;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (mapEntryExpressionList.size() == 1) {&lt;/li&gt;
	&lt;li&gt;MapEntryExpression mapEntryExpression = mapEntryExpressionList.get(0);&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;if (mapEntryExpression.getKeyExpression() instanceof SpreadMapExpression) 
{
    -                    right = mapEntryExpression.getKeyExpression();
    -                }
&lt;p&gt; else &lt;/p&gt;
{
    -                    right = mapEntryExpression;
    -                }
&lt;p&gt;    +            if (mapEntryExpressionList.size() == 0) {&lt;br/&gt;
    +                // expecting list of MapEntryExpressions later so use SpreadMap to smuggle empty MapExpression to later stages&lt;br/&gt;
    +                right = new SpreadMapExpression(configureAST(new MapExpression(), ctx.namedPropertyArgs()));&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    It&apos;s better to `configureAST` the instance of `SpreadMapExpression` too, or its node position will be missing.&lt;/p&gt;</comment>
                            <comment id="16607840" author="githubbot" created="Sat, 8 Sep 2018 01:04:51 +0000"  >&lt;p&gt;Github user paulk-asert commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/792#discussion_r216115626&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/792#discussion_r216115626&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: subprojects/parser-antlr4/src/main/java/org/apache/groovy/parser/antlr4/AstBuilder.java &amp;#8212;&lt;br/&gt;
    @@ -2337,14 +2337,11 @@ public Expression visitPathElement(PathElementContext ctx) {&lt;br/&gt;
                         this.visitNamedPropertyArgs(ctx.namedPropertyArgs());&lt;/p&gt;

&lt;p&gt;                 Expression right;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (mapEntryExpressionList.size() == 1) {&lt;/li&gt;
	&lt;li&gt;MapEntryExpression mapEntryExpression = mapEntryExpressionList.get(0);&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;if (mapEntryExpression.getKeyExpression() instanceof SpreadMapExpression) 
{
    -                    right = mapEntryExpression.getKeyExpression();
    -                }
&lt;p&gt; else &lt;/p&gt;
{
    -                    right = mapEntryExpression;
    -                }
&lt;p&gt;    +            if (mapEntryExpressionList.size() == 0) {&lt;br/&gt;
    +                // expecting list of MapEntryExpressions later so use SpreadMap to smuggle empty MapExpression to later stages&lt;br/&gt;
    +                right = new SpreadMapExpression(configureAST(new MapExpression(), ctx.namedPropertyArgs()));&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I had that originally but we throw that expression away in resolve visitor.&lt;/p&gt;</comment>
                            <comment id="16607856" author="githubbot" created="Sat, 8 Sep 2018 01:19:10 +0000"  >&lt;p&gt;Github user danielsun1106 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/792#discussion_r216116090&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/792#discussion_r216116090&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: subprojects/parser-antlr4/src/main/java/org/apache/groovy/parser/antlr4/AstBuilder.java &amp;#8212;&lt;br/&gt;
    @@ -2337,14 +2337,11 @@ public Expression visitPathElement(PathElementContext ctx) {&lt;br/&gt;
                         this.visitNamedPropertyArgs(ctx.namedPropertyArgs());&lt;/p&gt;

&lt;p&gt;                 Expression right;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (mapEntryExpressionList.size() == 1) {&lt;/li&gt;
	&lt;li&gt;MapEntryExpression mapEntryExpression = mapEntryExpressionList.get(0);&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;if (mapEntryExpression.getKeyExpression() instanceof SpreadMapExpression) 
{
    -                    right = mapEntryExpression.getKeyExpression();
    -                }
&lt;p&gt; else &lt;/p&gt;
{
    -                    right = mapEntryExpression;
    -                }
&lt;p&gt;    +            if (mapEntryExpressionList.size() == 0) {&lt;br/&gt;
    +                // expecting list of MapEntryExpressions later so use SpreadMap to smuggle empty MapExpression to later stages&lt;br/&gt;
    +                right = new SpreadMapExpression(configureAST(new MapExpression(), ctx.namedPropertyArgs()));&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    The implementation of parser should not decouple with back end(i.e. not rely on the implementation of back end). &lt;br/&gt;
    If the implementation of resolve visitor changes in the future, the expression is not thrown away, the node position is missing.&lt;/p&gt;</comment>
                            <comment id="16607876" author="githubbot" created="Sat, 8 Sep 2018 02:35:54 +0000"  >&lt;p&gt;Github user paulk-asert commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/792#discussion_r216118264&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/792#discussion_r216118264&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: subprojects/parser-antlr4/src/main/java/org/apache/groovy/parser/antlr4/AstBuilder.java &amp;#8212;&lt;br/&gt;
    @@ -2337,14 +2337,11 @@ public Expression visitPathElement(PathElementContext ctx) {&lt;br/&gt;
                         this.visitNamedPropertyArgs(ctx.namedPropertyArgs());&lt;/p&gt;

&lt;p&gt;                 Expression right;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (mapEntryExpressionList.size() == 1) {&lt;/li&gt;
	&lt;li&gt;MapEntryExpression mapEntryExpression = mapEntryExpressionList.get(0);&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;if (mapEntryExpression.getKeyExpression() instanceof SpreadMapExpression) 
{
    -                    right = mapEntryExpression.getKeyExpression();
    -                }
&lt;p&gt; else &lt;/p&gt;
{
    -                    right = mapEntryExpression;
    -                }
&lt;p&gt;    +            if (mapEntryExpressionList.size() == 0) {&lt;br/&gt;
    +                // expecting list of MapEntryExpressions later so use SpreadMap to smuggle empty MapExpression to later stages&lt;br/&gt;
    +                right = new SpreadMapExpression(configureAST(new MapExpression(), ctx.namedPropertyArgs()));&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Yes, you are right - if we ever do support getAt(Map) more generally, we would need to process that differently, so best it is correct to start with.&lt;/p&gt;</comment>
                            <comment id="16608222" author="githubbot" created="Sat, 8 Sep 2018 22:13:32 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/792&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/792&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 10 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xu1z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>