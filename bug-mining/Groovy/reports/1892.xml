<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:28:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-5590] Caused by: org.codehaus.groovy.runtime.InvokerInvocationException: java.io.IOException: Cannot run program &quot;find&quot;: java.io.IOException: error=24, Too many open files</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-5590</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;A script I wrote starts many processes but all within a common GPars pool so no more than a few are running at a time. It fails with the following error:&lt;/p&gt;

&lt;p&gt;Caught: java.util.concurrent.ExecutionException: org.codehaus.groovy.runtime.InvokerInvocationException: org.codehaus.groovy.runtime.InvokerInvocationException: java.io.IOException: Cannot run program &quot;find&quot;: java.io.IOException: error=24, Too many open files&lt;/p&gt;

&lt;p&gt;I verified that the problem is fixed by calling process.out.close() after every Process finishes. However, this solution is undesirable for a few two reasons. First, it adds an extra possibly avoidable line. Second, it prevents usage of convenience methods like getText(), where the Process might not have been exposed.&lt;/p&gt;

&lt;p&gt;The fix works because the Process remains open as long as STDIN is open. I see that STDOUT and STDERR are closed already so probably someone tried to fix this problem in the past but closed the wrong streams. To fix the problem, I propose that the STDIN (out) stream be closed as well where those streams are already closed. Additionally, I propose adding the close() calls to getText() as well.&lt;/p&gt;

&lt;p&gt;I&apos;ve attached a diff with the change for review. I rebuilt Groovy and verified that the script no longer fails with these changes. A unit test is still needed but haven&apos;t delved into that part of Groovy source quite yet &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12811898">GROOVY-5590</key>
            <summary>Caused by: org.codehaus.groovy.runtime.InvokerInvocationException: java.io.IOException: Cannot run program &quot;find&quot;: java.io.IOException: error=24, Too many open files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="guillaume">Guillaume Sauthier</assignee>
                                    <reporter username="balor123">Uri Moszkowicz</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Jul 2012 15:29:56 +0000</created>
                <updated>Sun, 5 Apr 2015 14:43:51 +0000</updated>
                            <resolved>Fri, 27 Jul 2012 23:47:00 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.2</fixVersion>
                    <fixVersion>2.1.0-beta-1</fixVersion>
                                    <component>groovy-jdk</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14479992" author="paulk" created="Sun, 22 Jul 2012 17:23:26 +0000"  >&lt;p&gt;Just reopening to remind myself to fix up the comments to reflect the latest code changes - I&apos;m not online at the moment or would have done it directly.&lt;/p&gt;

&lt;p&gt;The other nagging feeling I have is that the STDIN (out) stream wasn&apos;t closed on purpose as it was causing IOExceptions (either Stream Closed or Broken Pipe) when piping between processes on some platforms. A consequence of this decision was that you did indeed need to close the stream in the first (last?) process in your pipeline by hand. But I can&apos;t remember all the details to reproduce in the time I had available to play just now. I imagine this also impacts getText().&lt;/p&gt;

&lt;p&gt;I am not saying that a change isn&apos;t desirable or indeed that the proposed change isn&apos;t the correct one but I am flagging that we have had problems in this area before that might not be covered by unit tests and that I can&apos;t remember all the specifics of.&lt;/p&gt;</comment>
                            <comment id="14473066" author="guillaume" created="Mon, 23 Jul 2012 02:18:53 +0000"  >&lt;p&gt;Should we revert back the changes for now?&lt;/p&gt;</comment>
                            <comment id="14479988" author="paulk" created="Mon, 23 Jul 2012 03:34:47 +0000"  >&lt;p&gt;Let&apos;s leave it for now, I will continue trying to find time to reproduce the problem - it may only occur on old legacy platforms/versions of Java?&lt;/p&gt;</comment>
                            <comment id="14479993" author="paulk" created="Fri, 27 Jul 2012 23:47:00 +0000"  >&lt;p&gt;The change was in 2.0.1 and I haven&apos;t been able to replicate the problem I was worried about. I have updated the javadoc in 2.0.2 to match the code change. We will no doubt have another jira raised if the problem does indeed surface again.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12722652" name="diff.log" size="1904" author="balor123" created="Wed, 11 Jul 2012 15:29:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 17 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bqfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>