<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:03:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-8775] Bug joint compilation in ant task groovyc: classpath not set</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-8775</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Bug joint compilation in ant task groovyc: package does not exist&lt;/p&gt;

&lt;p&gt;javac compiles normally java-files.&lt;br/&gt;
 groovyc compiles normally groovy-files only.&lt;br/&gt;
 groovyc with nested element javac - error: package does not exist&lt;/p&gt;

&lt;p&gt;java 10.0.2&lt;br/&gt;
 groovy 2.5.2&lt;br/&gt;
 OS Windows 7&lt;/p&gt;

&lt;p&gt;On java 8 - all ok&lt;/p&gt;

&lt;p&gt;Example project in attachments&lt;/p&gt;

&lt;p&gt;Prepare:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
mvn dependency:copy-dependencies
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Error compile:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ant build.joint
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Normal compile:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ant build.java
ant build.groovy
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13183296">GROOVY-8775</key>
            <summary>Bug joint compilation in ant task groovyc: classpath not set</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="gkraser">Sergey Kravchenko</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Sep 2018 06:00:14 +0000</created>
                <updated>Mon, 9 Dec 2019 21:36:12 +0000</updated>
                            <resolved>Fri, 15 Nov 2019 11:02:25 +0000</resolved>
                                    <version>2.5.2</version>
                                    <fixVersion>2.5.9</fixVersion>
                    <fixVersion>3.0.0-rc-2</fixVersion>
                                    <component>Ant integration</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3600">1h</timespent>
                                <comments>
                            <comment id="16612857" author="paulk" created="Wed, 12 Sep 2018 23:31:31 +0000"  >&lt;p&gt;Just for completeness, what versions of ant and maven are you using? I&apos;ll try to replicate with latest of each.&lt;/p&gt;</comment>
                            <comment id="16612923" author="gkraser" created="Thu, 13 Sep 2018 01:27:22 +0000"  >&lt;p&gt;Maven 3.1.1&lt;/p&gt;

&lt;p&gt;mvn -v&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Apache Maven 3.1.1 (0728685237757ffbf44136acec0402957f723d9a; 2013-09-17 21:22:22+0600)
Maven home: w:\pf\maven\bin\..
Java version: 10.0.2, vendor: Oracle Corporation
Java home: d:\pf\jdk10
Default locale: ru_RU, platform encoding: Cp1251
OS name: &lt;span class=&quot;code-quote&quot;&gt;&quot;windows 7&quot;&lt;/span&gt;, version: &lt;span class=&quot;code-quote&quot;&gt;&quot;6.1&quot;&lt;/span&gt;, arch: &lt;span class=&quot;code-quote&quot;&gt;&quot;amd64&quot;&lt;/span&gt;, family: &lt;span class=&quot;code-quote&quot;&gt;&quot;dos&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Ant 1.10.5&lt;/p&gt;

&lt;p&gt;ant -version&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Apache Ant(TM) version 1.10.5 compiled on July 10 2018
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16613244" author="githubbot" created="Thu, 13 Sep 2018 09:31:27 +0000"  >&lt;p&gt;GitHub user paulk-asert opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/796&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/796&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8775&quot; title=&quot;Bug joint compilation in ant task groovyc: classpath not set&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8775&quot;&gt;&lt;del&gt;GROOVY-8775&lt;/del&gt;&lt;/a&gt;: Bug joint compilation in ant task groovyc: classpath not set&lt;/p&gt;

&lt;p&gt;    This doesn&apos;t fix the issue but enables a workaround until we fix fully&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/paulk-asert/groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/paulk-asert/groovy&lt;/a&gt; groovy8775&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/796.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/796.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #796&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 483af893cd4306a3770c12e8689fb17e0d8add1a&lt;br/&gt;
Author: Paul King &amp;lt;paulk@...&amp;gt;&lt;br/&gt;
Date:   2018-09-13T09:27:24Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8775&quot; title=&quot;Bug joint compilation in ant task groovyc: classpath not set&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8775&quot;&gt;&lt;del&gt;GROOVY-8775&lt;/del&gt;&lt;/a&gt;: Bug joint compilation in ant task groovyc: package does not exist&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16613268" author="githubbot" created="Thu, 13 Sep 2018 09:50:15 +0000"  >&lt;p&gt;Github user paulk-asert closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/796&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/796&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16613271" author="paulk" created="Thu, 13 Sep 2018 09:52:35 +0000"  >&lt;p&gt;Thanks, yes I could replicate also with Maven 3.5.4. This is something we haven&apos;t fixed for JDK9+ yet but there is a workaround.&lt;/p&gt;

&lt;p&gt;Details: we create the classpath for javac based on all the jars that the groovyc classloader knows about. That way it covers jars that might have been @Grab&apos;d and/or potentially added via a custom compilation configuration script. We do it by walking up the classloader hierarchy and extract jars from URLClassloaders. This has changed in JDK9 where URLClassloaders aren&apos;t returned any more and for a full solution we&apos;d need to potentially traverse all modules on the module path as well as the classpath. We are still working on that.&lt;/p&gt;

&lt;p&gt;In the meantime, you can provide an explicit classpath setting to javac and we don&apos;t do the above process:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
...
&amp;lt;javac encoding=&lt;span class=&quot;code-quote&quot;&gt;&quot;utf-8&quot;&lt;/span&gt; debug=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;&amp;gt;
    &amp;lt;compilerarg value=&lt;span class=&quot;code-quote&quot;&gt;&quot;-Jclasspath=${toString:compile-lib}&quot;&lt;/span&gt;/&amp;gt;
&amp;lt;/javac&amp;gt;
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16613272" author="paulk" created="Thu, 13 Sep 2018 09:54:36 +0000"  >&lt;p&gt;Lowered priority since there is a known workaround.&lt;/p&gt;</comment>
                            <comment id="16972531" author="emilles" created="Tue, 12 Nov 2019 15:32:01 +0000"  >&lt;p&gt;See also &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-9197&quot; title=&quot;Groovyc fails to correctly propagate classpath entries to javac when run under JDK 11&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-9197&quot;&gt;&lt;del&gt;GROOVY-9197&lt;/del&gt;&lt;/a&gt; and&#160;&lt;a href=&quot;https://github.com/apache/groovy/pull/1080&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1080&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12938597" name="groovyc-ant-bugs.zip" size="12152" author="gkraser" created="Thu, 6 Sep 2018 05:59:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 1 week ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xsav:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>