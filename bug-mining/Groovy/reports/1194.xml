<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:15:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-3922] finally block executed twice if exception throw in this block</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-3922</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;With following code, the finally block is executed twice:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
    &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException()
}
&lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Throwable t) {
}
&lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
    println &lt;span class=&quot;code-quote&quot;&gt;&quot;in &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException()
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Output:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;in finally
in finally
Exception thrown

java.lang.RuntimeException
	at ConsoleScript3.run(ConsoleScript3:8)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12818383">GROOVY-3922</key>
            <summary>finally block executed twice if exception throw in this block</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blackdrag">Jochen Theodorou</assignee>
                                    <reporter username="mguillemot@yahoo.fr">Marc Guillemot</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Dec 2009 08:56:03 +0000</created>
                <updated>Tue, 6 Apr 2010 11:59:24 +0000</updated>
                            <resolved>Tue, 6 Apr 2010 11:59:24 +0000</resolved>
                                    <version>1.7-rc-1</version>
                    <version>1.6.7</version>
                    <version>1.6.8</version>
                                    <fixVersion>1.7.2</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14468280" author="roshandawrani" created="Thu, 3 Dec 2009 11:36:44 +0000"  >&lt;p&gt;Let me add a bit to its weirdness:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
	def x = 0
}
&lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Throwable t) {
}
&lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; { 
	println &lt;span class=&quot;code-quote&quot;&gt;&quot;in &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt;&quot;&lt;/span&gt; 
	&lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException() 
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;executes the finally block 3 times:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;in finally
in finally
in finally
Caught: java.lang.RuntimeException
        at Try.run(Try.groovy:8)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14468260" author="blackdrag" created="Fri, 4 Dec 2009 05:56:41 +0000"  >&lt;p&gt;I get the feeling this is related to let try-catch return a value.&lt;/p&gt;</comment>
                            <comment id="14468388" author="roshandawrani" created="Fri, 4 Dec 2009 06:17:15 +0000"  >&lt;p&gt;So, taking the code example from my comment, if I a try block like &quot;def x = 0&quot; at the end of which instructions of the finally block get appended -&amp;gt; if the last statement of the finally does a &quot;throw&quot; instruction and after that we still do &quot;return&quot; instruction (say that is the mistake), do u mean that return instruction will still be reached after &quot;throw&quot;&lt;/p&gt;

&lt;p&gt;I thought once it reaches &quot;throw&quot;, it will switch execution path and not do the &quot;return&quot;.&lt;/p&gt;</comment>
                            <comment id="14468412" author="blackdrag" created="Wed, 9 Dec 2009 06:01:29 +0000"  >&lt;p&gt;I have confirmed the issue has to do with how we generate the exceptions tables in bytecode. The include the inlined finall blocks, which they should not. But fixing this will require several changes in ACG, too much to do before 1.7.0 I think. &lt;/p&gt;

&lt;p&gt;So I am scheduling this issue as a blocker for 1.7.1 and 1.8-beta-1&lt;/p&gt;</comment>
                            <comment id="14478763" author="mguillemot@yahoo.fr" created="Wed, 9 Dec 2009 06:55:54 +0000"  >&lt;p&gt;Is it really a blocker if it can be moved to a later release? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14468370" author="blackdrag" created="Wed, 9 Dec 2009 09:18:39 +0000"  >&lt;p&gt;it is a blocker for that release menaing the release should not happen without that fix. &lt;/p&gt;</comment>
                            <comment id="14468787" author="roshandawrani" created="Sat, 23 Jan 2010 05:39:50 +0000"  >&lt;p&gt;Shouldn&apos;t its priority be raised to blocker as mentioned in the comments - so that it doesn&apos;t get missed out before 1.7.1 / 1.8-beta-1?&lt;/p&gt;</comment>
                            <comment id="14468684" author="guillaume" created="Mon, 25 Jan 2010 05:01:54 +0000"  >&lt;p&gt;Yup, feel free to up the priority to be sure we fix it for the next releases.&lt;/p&gt;</comment>
                            <comment id="14468831" author="roshandawrani" created="Mon, 25 Jan 2010 05:08:06 +0000"  >&lt;p&gt;I am more interested in seeing this problem&apos;s solution actually. I want to see how current exception table entries are split up to exclude the exceptions thrown from the inlined finally block instruction ranges so that they don&apos;t get caught by the catch blocks.&lt;/p&gt;

&lt;p&gt;Higher the priority, more the chances of me seeing the solution soon &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, but I will let Jochen raise the priority, if he wants.&lt;/p&gt;</comment>
                            <comment id="14468996" author="blackdrag" created="Wed, 17 Feb 2010 16:05:02 +0000"  >&lt;p&gt;should be fixed now... it was only a matter of excluding the catch for the finally&lt;/p&gt;</comment>
                            <comment id="14478906" author="paulk" created="Mon, 22 Feb 2010 06:36:08 +0000"  >&lt;p&gt;Roshan&apos;s example still runs finally twice for me&lt;/p&gt;</comment>
                            <comment id="14468977" author="roshandawrani" created="Thu, 25 Feb 2010 12:01:06 +0000"  >&lt;p&gt;Since, in my example, the finally block is still getting executed twice, I am re-opening this issue.&lt;/p&gt;</comment>
                            <comment id="14478930" author="paulk" created="Fri, 5 Mar 2010 02:35:52 +0000"  >&lt;p&gt;Bump fix version due to reopen&lt;/p&gt;</comment>
                            <comment id="14479006" author="paulk" created="Sun, 4 Apr 2010 22:01:16 +0000"  >&lt;p&gt;add code tags&lt;/p&gt;</comment>
                            <comment id="14479045" author="paulk" created="Sun, 4 Apr 2010 22:10:19 +0000"  >&lt;p&gt;Just checking on the status of this. It seems to be fixed in trunk and 1_7_X (I assume merged) but not in 1_6_X?&lt;/p&gt;</comment>
                            <comment id="14469183" author="blackdrag" created="Tue, 6 Apr 2010 11:59:24 +0000"  >&lt;p&gt;I fixed it on trunk and 1.7.x. The files differ too much to port the fix to 1.6&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 34 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bmnr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>