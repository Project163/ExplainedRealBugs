<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:18:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-4505] Rogue line number for method declarations confuses IDE debuggers</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-4505</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Do a javap -l on the following code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Runner {
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void printit() {
		x(&lt;span class=&quot;code-quote&quot;&gt;&quot;III&quot;&lt;/span&gt;)
		x(&lt;span class=&quot;code-quote&quot;&gt;&quot;III&quot;&lt;/span&gt;)
 	}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and the printit method will look something like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void printit();
  LineNumberTable: 
   line 2: 4
   line 3: 4
   line 4: 17
  LocalVariableTable: 
   Start  Length  Slot  Name   Signature
   0      31      0    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;       LRunner;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Notice that the LineNumberTable has 3 entries, but the original method has only 2 instruction lines of code.  The first, rogue line number corresponds to the method&apos;s block statement.&lt;/p&gt;

&lt;p&gt;The problem is that there are 2 entries corresponding to the #4 instruction.  This occasionally confuses the debugger when it is trying to install the breakpoint on a running app (ie- sometimes it works and sometimes it does not).&lt;/p&gt;

&lt;p&gt;I tracked the problem down to AsmClassGenerator.visitBlockStatement(), which calls the onLineNumber method and (incorrectly, it seems) adds a line number entry for the start of the block statement.  Simply commenting this line out (line 721 on version 1.7.5) appears to work for me.&lt;/p&gt;

&lt;p&gt;Is there any reason why we should not go ahead with the fix?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12815405">GROOVY-4505</key>
            <summary>Rogue line number for method declarations confuses IDE debuggers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="guillaume">Guillaume Sauthier</assignee>
                                    <reporter username="werdna">Andrew Eisenberg</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Nov 2010 17:43:05 +0000</created>
                <updated>Wed, 15 Dec 2010 16:56:51 +0000</updated>
                            <resolved>Mon, 29 Nov 2010 09:54:42 +0000</resolved>
                                    <version>1.7.5</version>
                                    <fixVersion>1.7.6</fixVersion>
                    <fixVersion>1.8-beta-3</fixVersion>
                                    <component>bytecode</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14470329" author="guillaume" created="Fri, 5 Nov 2010 18:28:29 +0000"  >&lt;p&gt;When visiting a block statetement, it can be nice to not have to go through all the statements when you only need to know when the block start and ends.&lt;br/&gt;
For example in the AST viewer, in the Groovy Console, I think you see the whole block highlighted when it&apos;s selected, because you&apos;ve got those line informations for that block.&lt;/p&gt;</comment>
                            <comment id="14470422" author="werdna" created="Fri, 5 Nov 2010 19:01:52 +0000"  >&lt;p&gt;As far as I can tell, the behavior in the AST view is no different with or without that extra line number in the class file.  Selecting the method will highlight the entire method.  Selecting the block statement will highlight the first statement in that block.&lt;/p&gt;

&lt;p&gt;Also, doesn&apos;t the AST viewer work off of the source, and uses the antlr attributes for line numbers?  These line numbers that I am describing only affect things that read the byte code.&lt;/p&gt;</comment>
                            <comment id="14470267" author="guillaume" created="Sat, 6 Nov 2010 05:20:10 +0000"  >&lt;p&gt;Indeed, I just tried and it seems the blocks are still correctly highlighted.&lt;/p&gt;</comment>
                            <comment id="14470444" author="werdna" created="Tue, 23 Nov 2010 15:05:00 +0000"  >&lt;p&gt;I am re-opening this issue because there is an additional place where rogue line numbers are cropping up.&lt;/p&gt;

&lt;p&gt;In AsmClassGenerator.visitTryCatchFinally(), the first statement is onLineNumber(block, &quot;visitBlockStatement&quot;);&lt;/p&gt;

&lt;p&gt;This should be commented out as well.  See &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-892&quot; title=&quot;refactor groovy.inspector.Inspector to be in a different package; either groovy.lang. or groovy.util.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-892&quot;&gt;&lt;del&gt;GROOVY-892&lt;/del&gt;&lt;/a&gt; for this bugs manifestation in Groovy-Eclipse.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 1 week ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2c7tr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>