<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:53:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-7940] Inconsistent handling of undocumented primitive data types at the @Lazy annotation under use of extends</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-7940</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;&lt;b&gt;Documentation:&lt;/b&gt; &lt;a href=&quot;http://docs.groovy-lang.org/latest/html/gapi/groovy/lang/Lazy.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.groovy-lang.org/latest/html/gapi/groovy/lang/Lazy.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The documentations describes the usage of &lt;em&gt;@Lazy&lt;/em&gt; like:&lt;br/&gt;
&lt;tt&gt;@Lazy T x&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;I&apos;m aware of that &lt;em&gt;T&lt;/em&gt; means no primitive data types, but groovy allows it and generates the code - so why not.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Super {
    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; aBoolean = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; aInt = 5
}

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Testing &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Super {

    @Lazy
    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; aBoolean = { &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; }()
    
    @Lazy
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; aInt = { 5 * 5 }()

}

println &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Testing().isaBoolean()
println &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Testing().getaBoolean()
println &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Testing().getaInt()
println &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Testing().aBoolean
println &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Testing().aInt
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Result:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
25
&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
25
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The behavior is inconsistent.&lt;br/&gt;
boolean: results are from the super class&lt;br/&gt;
int: results are from the child class&lt;/p&gt;


&lt;p&gt;&lt;del&gt;Please fix it or throw a &lt;em&gt;&apos;RuntimeException&apos;&lt;/em&gt; when primitive data types are used.&lt;/del&gt;&lt;br/&gt;
&lt;b&gt;Update:&lt;/b&gt;&lt;br/&gt;
Please let &lt;em&gt;@Lazy&lt;/em&gt; implement &amp;#95;is&amp;#95;Boolean() instead of &amp;#95;get&amp;#95;Boolean() when using primitive data type boolean and document it or just throw a &lt;em&gt;&apos;RuntimeException&apos;&lt;/em&gt;.&lt;/p&gt;</description>
                <environment>Any</environment>
        <key id="13004867">GROOVY-7940</key>
            <summary>Inconsistent handling of undocumented primitive data types at the @Lazy annotation under use of extends</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jwagenleitner">John Wagenleitner</assignee>
                                    <reporter username="MaikIgloffstein">Maik Igloffstein</reporter>
                        <labels>
                            <label>data</label>
                            <label>extends</label>
                            <label>lazy</label>
                            <label>primitives</label>
                            <label>super</label>
                            <label>types</label>
                    </labels>
                <created>Wed, 14 Sep 2016 12:45:27 +0000</created>
                <updated>Wed, 1 Feb 2017 23:18:59 +0000</updated>
                            <resolved>Sun, 18 Sep 2016 05:33:36 +0000</resolved>
                                    <version>2.4.5</version>
                                    <fixVersion>2.4.8</fixVersion>
                                    <component>groovy-jdk</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15490373" author="blackdrag" created="Wed, 14 Sep 2016 12:56:49 +0000"  >&lt;p&gt;The problem is more that @Lazy adds a getaBoolean Method and not isaBoolean method. And that isaBoolean() is preferred over getaBoolean(). If you change your test to use getaBoolean it will look different&lt;/p&gt;</comment>
                            <comment id="15490417" author="maikigloffstein" created="Wed, 14 Sep 2016 13:17:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blackdrag&quot; class=&quot;user-hover&quot; rel=&quot;blackdrag&quot;&gt;blackdrag&lt;/a&gt; - thx for your input, I changed the description.&lt;/p&gt;</comment>
                            <comment id="15491883" author="githubbot" created="Thu, 15 Sep 2016 00:27:42 +0000"  >&lt;p&gt;GitHub user jwagenleitner opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/420&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/420&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7940&quot; title=&quot;Inconsistent handling of undocumented primitive data types at the @Lazy annotation under use of extends&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7940&quot;&gt;&lt;del&gt;GROOVY-7940&lt;/del&gt;&lt;/a&gt;: @Lazy not generating &quot;is&quot; property accessor for booleans&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/jwagenleitner/groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jwagenleitner/groovy&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7940&quot; title=&quot;Inconsistent handling of undocumented primitive data types at the @Lazy annotation under use of extends&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7940&quot;&gt;&lt;del&gt;GROOVY-7940&lt;/del&gt;&lt;/a&gt;-lazy-booleans&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/420.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/420.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #420&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit afdbc4b07fbad1d0596ed714a1f844faba870893&lt;br/&gt;
Author: John Wagenleitner &amp;lt;jwagenleitner@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-09-15T00:26:11Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7940&quot; title=&quot;Inconsistent handling of undocumented primitive data types at the @Lazy annotation under use of extends&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7940&quot;&gt;&lt;del&gt;GROOVY-7940&lt;/del&gt;&lt;/a&gt;: @Lazy not generating &quot;is&quot; property accessor for booleans&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15499719" author="githubbot" created="Sat, 17 Sep 2016 21:26:40 +0000"  >&lt;p&gt;Github user paulk-asert commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/420#discussion_r79292382&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/420#discussion_r79292382&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/main/org/codehaus/groovy/transform/LazyASTTransformation.java &amp;#8212;&lt;br/&gt;
    @@ -156,8 +156,11 @@ private static void addNonThreadSafeBody(BlockStatement body, FieldNode fieldNod&lt;br/&gt;
         private static void addMethod(FieldNode fieldNode, BlockStatement body, ClassNode type) {&lt;br/&gt;
             int visibility = ACC_PUBLIC;&lt;br/&gt;
             if (fieldNode.isStatic()) visibility |= ACC_STATIC;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;final String name = &quot;get&quot; + MetaClassHelper.capitalize(fieldNode.getName().substring(1));&lt;/li&gt;
	&lt;li&gt;fieldNode.getDeclaringClass().addMethod(name, visibility, type, Parameter.EMPTY_ARRAY, ClassNode.EMPTY_ARRAY, body);&lt;br/&gt;
    +        String propName = MetaClassHelper.capitalize(fieldNode.getName().substring(1));&lt;br/&gt;
    +        fieldNode.getDeclaringClass().addMethod(&quot;get&quot; + propName, visibility, type, Parameter.EMPTY_ARRAY, ClassNode.EMPTY_ARRAY, body);&lt;br/&gt;
    +        if (ClassHelper.boolean_TYPE.equals(type)) {&lt;br/&gt;
    +            fieldNode.getDeclaringClass().addMethod(&quot;is&quot; + propName, visibility, type, Parameter.EMPTY_ARRAY, ClassNode.EMPTY_ARRAY, body);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I&apos;d probably use &apos;stmt(callThisX(&quot;get&quot; + propName))&apos; instead of &apos;body&apos;. That should give a slightly smaller class.&lt;/p&gt;</comment>
                            <comment id="15499830" author="githubbot" created="Sat, 17 Sep 2016 22:59:29 +0000"  >&lt;p&gt;Github user jwagenleitner commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/420#discussion_r79293601&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/420#discussion_r79293601&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/main/org/codehaus/groovy/transform/LazyASTTransformation.java &amp;#8212;&lt;br/&gt;
    @@ -156,8 +156,11 @@ private static void addNonThreadSafeBody(BlockStatement body, FieldNode fieldNod&lt;br/&gt;
         private static void addMethod(FieldNode fieldNode, BlockStatement body, ClassNode type) {&lt;br/&gt;
             int visibility = ACC_PUBLIC;&lt;br/&gt;
             if (fieldNode.isStatic()) visibility |= ACC_STATIC;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;final String name = &quot;get&quot; + MetaClassHelper.capitalize(fieldNode.getName().substring(1));&lt;/li&gt;
	&lt;li&gt;fieldNode.getDeclaringClass().addMethod(name, visibility, type, Parameter.EMPTY_ARRAY, ClassNode.EMPTY_ARRAY, body);&lt;br/&gt;
    +        String propName = MetaClassHelper.capitalize(fieldNode.getName().substring(1));&lt;br/&gt;
    +        fieldNode.getDeclaringClass().addMethod(&quot;get&quot; + propName, visibility, type, Parameter.EMPTY_ARRAY, ClassNode.EMPTY_ARRAY, body);&lt;br/&gt;
    +        if (ClassHelper.boolean_TYPE.equals(type)) {&lt;br/&gt;
    +            fieldNode.getDeclaringClass().addMethod(&quot;is&quot; + propName, visibility, type, Parameter.EMPTY_ARRAY, ClassNode.EMPTY_ARRAY, body);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Thanks, I&apos;ve updated so it delegates to the getter as suggested.&lt;/p&gt;</comment>
                            <comment id="15500224" author="githubbot" created="Sun, 18 Sep 2016 04:25:19 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/420&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/420&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15500316" author="jwagenleitner" created="Sun, 18 Sep 2016 05:33:36 +0000"  >&lt;p&gt;Thanks for reporting the issue!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 9 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33m73:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>