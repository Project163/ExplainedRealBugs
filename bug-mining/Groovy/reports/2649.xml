<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:41:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-6617] joint compiler fails to compile groovy class implemented java interface</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-6617</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;When groovy class implements java interface located in other package with method returning array of java objects (not primitive), joint compilation fails with org.codehaus.groovy.control.MultipleCompilationErrorsException&lt;/p&gt;

&lt;p&gt;Running joint compiler again compiles this groovy class successfully.&lt;/p&gt;

&lt;p&gt;Attached file contains example files and script to run groovyc in joint compiler mode. &lt;br/&gt;
Run ./joint-compile.sh - MultipleCompilationErrorsException&lt;br/&gt;
Run it again - success.&lt;/p&gt;

&lt;p&gt;To reproduce please remove created *.class files&lt;br/&gt;
Reproduced - always.&lt;/p&gt;

&lt;p&gt;Workaround: add package name of returned java class to groovy method &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; foo.JavaDataObject[] ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>linux x86-64&lt;br/&gt;
oracle jdk 1.6.0.45, oracle jdk 1.8.0.121</environment>
        <key id="12817321">GROOVY-6617</key>
            <summary>joint compiler fails to compile groovy class implemented java interface</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="potter_ru">Igor E. Poteryaev</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Mar 2014 16:49:59 +0000</created>
                <updated>Thu, 23 Nov 2017 07:43:34 +0000</updated>
                            <resolved>Tue, 2 May 2017 02:00:50 +0000</resolved>
                                    <version>1.8.6</version>
                    <version>2.2.2</version>
                    <version>2.3.0</version>
                    <version>2.3.1</version>
                    <version>2.3.2</version>
                    <version>2.3.3</version>
                    <version>2.3.4</version>
                    <version>2.3.5</version>
                    <version>2.3.6</version>
                    <version>2.3.7</version>
                    <version>2.4.6</version>
                    <version>2.4.8</version>
                    <version>2.4.9</version>
                    <version>2.4.10</version>
                    <version>2.4.11</version>
                    <version>2.4.12</version>
                    <version>2.4.13</version>
                                    <fixVersion>2.5.0-alpha-1</fixVersion>
                                    <component>Stub generator / Joint compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14475861" author="potter_ru" created="Tue, 6 May 2014 05:58:58 +0000"  >&lt;p&gt;test case attachment was updated.&lt;/p&gt;</comment>
                            <comment id="14480600" author="paulk" created="Thu, 12 Jun 2014 15:11:42 +0000"  >&lt;p&gt;Error message:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:
src\groovy\bar\GroovyLangService.groovy: 11: The return type of foo.JavaDataObject[] makeArray() in bar.GroovyLangService is incompatible with [Lfoo.JavaDataObject; in foo.JavaApi
. At [11:5]  @ line 11, column 5.
       public JavaDataObject[] makeArray () {
       ^

1 error
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Stub:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; bar;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.lang.*;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.*;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.net.*;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.*;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.lang.*;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.util.*;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;GroovyLangService
  &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;  &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt;
    foo.JavaApi,    groovy.lang.GroovyObject {
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;  groovy.lang.MetaClass getMetaClass() { &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (groovy.lang.MetaClass)&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;}
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;  void setMetaClass(groovy.lang.MetaClass mc) { }
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;  java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; invokeMethod(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; method, java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; arguments) { &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;}
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;  java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; getProperty(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; property) { &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;}
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;  void setProperty(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; property, java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; value) { }
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;  java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; getTransactional() { &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;}
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt;  void setTransactional(java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; value) { }
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;  foo.JavaDataObject[] makeArray() { &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (foo.JavaDataObject[])&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;}
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;  java.util.List&amp;lt;foo.JavaDataObject&amp;gt; makeList() { &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (java.util.List&amp;lt;foo.JavaDataObject&amp;gt;)&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14480558" author="paulk" created="Thu, 12 Jun 2014 20:05:41 +0000"  >&lt;p&gt;Should be fixed. Thanks greatly for your attachment. It now seems to build correctly. If you get a chance to test out the snapshot build to confirm on your actual project, that would also be great.&lt;/p&gt;</comment>
                            <comment id="14476076" author="potter_ru" created="Fri, 13 Jun 2014 06:20:58 +0000"  >&lt;p&gt;Thanks Paul,&lt;/p&gt;

&lt;p&gt;I confirm that your fix works for me.&lt;/p&gt;

&lt;p&gt;I took changes made by you in the commit: &lt;a href=&quot;https://github.com/groovy/groovy-core/commit/ef13700e77d6aa32c578ead9926ffbda6bad2849&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/groovy/groovy-core/commit/ef13700e77d6aa32c578ead9926ffbda6bad2849&lt;/a&gt; (Verifier.java), and applied them to groovy-1.8.6 (I need exactly this version for Grails-2.0.3).&lt;/p&gt;</comment>
                            <comment id="14476529" author="potter_ru" created="Thu, 9 Oct 2014 14:48:18 +0000"  >&lt;p&gt;Joint compiler fails again when function has array of objects parameter.&lt;/p&gt;

&lt;p&gt;Compilation error is different:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Can&apos;t have an abstract method in a non-abstract class. The class &apos;bar.GroovyLangService&apos; must be declared abstract or the method &apos;[Lfoo.JavaDataObject; makeArrayFromParams(foo.JavaDataObject[])&apos; must be implemented.
 @ line 7, column 1.
   public class GroovyLangService implements JavaApi {
   ^

1 error
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Workaround is the same - add full package name of returned java class to groovy method&lt;/p&gt;</comment>
                            <comment id="14476472" author="potter_ru" created="Thu, 9 Oct 2014 14:49:04 +0000"  >&lt;p&gt;updated test case is attached&lt;/p&gt;</comment>
                            <comment id="15317974" author="potter_ru" created="Tue, 7 Jun 2016 06:41:05 +0000"  >&lt;p&gt;The problem take place in 2.4.6 version of groovy. Please, try to find time to fix it.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="15318203" author="paulk" created="Tue, 7 Jun 2016 09:23:17 +0000"  >&lt;p&gt;From my tests, this still fails on the 2_4_X branch but passes on master.&lt;/p&gt;</comment>
                            <comment id="15318281" author="paulk" created="Tue, 7 Jun 2016 10:48:33 +0000"  >&lt;p&gt;I added the augmented passing test into master. Obviously it would be nice to back-port the fix to the 2_4_X branch so I&apos;ll leave this open but I lowered the priority.&lt;/p&gt;</comment>
                            <comment id="15823694" author="potter_ru" created="Mon, 16 Jan 2017 09:45:24 +0000"  >&lt;p&gt;Sorry to say, but the bug still exists in 2.4.8 release.&lt;br/&gt;
Could be reproduced using the previous test case.&lt;br/&gt;
Please see the groovy-joint-compiler-bug-again.tar attachment.&lt;/p&gt;

&lt;p&gt;Thanks and regards,&lt;br/&gt;
Igor&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="13068301">GROOVY-8172</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12723107" name="groovy-joint-compiler-bug-again.tar" size="10240" author="potter_ru" created="Thu, 9 Oct 2014 14:49:04 +0000"/>
                            <attachment id="12723242" name="groovy-joint-compiler-bug.tar" size="10240" author="potter_ru" created="Tue, 6 May 2014 06:00:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 44 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bsh3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>