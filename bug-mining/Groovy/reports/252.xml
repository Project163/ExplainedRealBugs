<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:57:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-1180] GroovyScriptEngine fails to load scripts that exist on file:// roots if they only exist on a root that is not the last root </title>
                <link>https://issues.apache.org/jira/browse/GROOVY-1180</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;If you add two root URLs to a GroovyScriptEngine, say:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;file://home/marc/scripts&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file://home/marc/scripts&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;file://home/marc/anotherdir/morescripts&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file://home/marc/anotherdir/morescripts&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;...if you have a file located at&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;file://home/marc/scripts/test.groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file://home/marc/scripts/test.groovy&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If you try to call gse.run(&quot;test.groovy&quot;) it will fail saying it cannot find:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;file://home/marc/anotherdir/morescripts/test.groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file://home/marc/anotherdir/morescripts/test.groovy&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This is because the code only calls openConnection which succeeds for file URLs. Also it does not break out on the first successful openConnection, so always uses the last and all the previous checks are pointless.&lt;/p&gt;

&lt;p&gt;Suggestion is to fix this to find the FIRST that does not throw an exception from urlconn.getInputStream().&lt;/p&gt;

&lt;p&gt;Code will be attached as comment shortly.&lt;/p&gt;


</description>
                <environment>Mac OSX 1.4 / JDK 1.5</environment>
        <key id="12816289">GROOVY-1180</key>
            <summary>GroovyScriptEngine fails to load scripts that exist on file:// roots if they only exist on a root that is not the last root </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="guillaume">Guillaume Sauthier</assignee>
                                    <reporter username="marc@anyware.co.uk">Marc Palmer</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Dec 2005 10:02:50 +0000</created>
                <updated>Wed, 18 Jan 2006 10:44:14 +0000</updated>
                            <resolved>Wed, 18 Jan 2006 10:44:14 +0000</resolved>
                                    <version>1.0-JSR-4</version>
                                    <fixVersion>1.0-JSR-5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14477178" author="marc@anyware.co.uk" created="Fri, 9 Dec 2005 10:23:20 +0000"  >&lt;p&gt;	public URLConnection getResourceConnection(String resourceName) throws ResourceException {&lt;br/&gt;
		// Get the URLConnection&lt;br/&gt;
		URLConnection groovyScriptConn = null;&lt;/p&gt;

&lt;p&gt;		ResourceException se = null;&lt;br/&gt;
		for (int i = 0; i &amp;lt; roots.length; i++) {&lt;br/&gt;
			URL scriptURL = null;&lt;br/&gt;
			try &lt;/p&gt;
{
				scriptURL = new URL(roots[i], resourceName);

				groovyScriptConn = scriptURL.openConnection();

                // Make sure we can open it, if we can&apos;t it doesn&apos;t exist.
                // Could be very slow if there are any non-file:// URLs in there
                groovyScriptConn.getInputStream();

				break; // Now this is a bit unusual

			}
&lt;p&gt; catch (MalformedURLException e) {&lt;br/&gt;
				String message = &quot;Malformed URL: &quot; + roots&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt; + &quot;, &quot; + resourceName;&lt;br/&gt;
				if (se == null) &lt;/p&gt;
{
					se = new ResourceException(message);
				} else {
					se = new ResourceException(message, se);
				}&lt;br/&gt;
			} catch (IOException e1) {&lt;br/&gt;
				String message = &quot;Cannot open URL: &quot; + scriptURL;&lt;br/&gt;
				if (se == null) {					se = new ResourceException(message);				}
&lt;p&gt; else &lt;/p&gt;
{
					se = new ResourceException(message, se);
				}
&lt;p&gt;			}&lt;/p&gt;

&lt;p&gt;		}&lt;/p&gt;

&lt;p&gt;		// If we didn&apos;t find anything, report on all the exceptions that&lt;br/&gt;
		// occurred.&lt;br/&gt;
		if (groovyScriptConn == null) &lt;/p&gt;
{
			throw se;
		}

&lt;p&gt;		return groovyScriptConn;&lt;br/&gt;
	}&lt;/p&gt;</comment>
                            <comment id="14461714" author="guillaume" created="Wed, 18 Jan 2006 10:44:14 +0000"  >&lt;p&gt;Patch applied, thanks Marc.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 years, 45 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bvzj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>