<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:57:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-8386] Final variable analysis broken with try/catch/finally</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-8386</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;In this code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; begin
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
  begin = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Date()
} &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
  println &lt;span class=&quot;code-quote&quot;&gt;&apos;done&apos;&lt;/span&gt;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The current error is:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;The variable [begin] may be uninitialized
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;But this should only happen if begin is used in the catch or finally blocks or prior to the first assignment.&lt;/p&gt;

&lt;p&gt;This impacts Spock usage since it converts the following into something similar to above:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Grab(&lt;span class=&quot;code-quote&quot;&gt;&apos;org.spockframework:spock-core:1.1-groovy-2.4-SNAPSHOT&apos;&lt;/span&gt;)
@GrabExclude(&lt;span class=&quot;code-quote&quot;&gt;&apos;org.codehaus.groovy:groovy-all&apos;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; spock.lang.Specification

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;DummySpec &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Specification {
    def &lt;span class=&quot;code-quote&quot;&gt;&apos;FVA when using Spock&apos;&lt;/span&gt;() {
        given:
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; begin = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Date()

        cleanup:
        println &lt;span class=&quot;code-quote&quot;&gt;&apos;done&apos;&lt;/span&gt;
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13119482">GROOVY-8386</key>
            <summary>Final variable analysis broken with try/catch/finally</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="paulk">Paul King</reporter>
                        <labels>
                    </labels>
                <created>Sun, 19 Nov 2017 12:25:08 +0000</created>
                <updated>Thu, 27 Feb 2020 11:04:43 +0000</updated>
                            <resolved>Sun, 24 Dec 2017 06:37:06 +0000</resolved>
                                    <version>2.5.x</version>
                                    <fixVersion>2.5.0-beta-3</fixVersion>
                                    <component>Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16301054" author="githubbot" created="Fri, 22 Dec 2017 07:14:30 +0000"  >&lt;p&gt;GitHub user paulk-asert opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/646&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/646&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8386&quot; title=&quot;Final variable analysis broken with try/catch/finally&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8386&quot;&gt;&lt;del&gt;GROOVY-8386&lt;/del&gt;&lt;/a&gt;/&lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8094&quot; title=&quot;Final variable analysis giving incorrect message within nested if&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8094&quot;&gt;&lt;del&gt;GROOVY-8094&lt;/del&gt;&lt;/a&gt;: Final variable analysis broken with try/catc&#8230;&lt;/p&gt;

&lt;p&gt;    &#8230;h/finally and if/then/else&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/paulk-asert/groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/paulk-asert/groovy&lt;/a&gt; fva&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/646.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/646.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #646&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit be854b73091a1b284efb7682a19df843f09e6df5&lt;br/&gt;
Author: paulk &amp;lt;paulk@...&amp;gt;&lt;br/&gt;
Date:   2017-12-22T07:11:51Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8386&quot; title=&quot;Final variable analysis broken with try/catch/finally&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8386&quot;&gt;&lt;del&gt;GROOVY-8386&lt;/del&gt;&lt;/a&gt;/&lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8094&quot; title=&quot;Final variable analysis giving incorrect message within nested if&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8094&quot;&gt;&lt;del&gt;GROOVY-8094&lt;/del&gt;&lt;/a&gt;: Final variable analysis broken with try/catch/finally and if/then/else&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16302698" author="githubbot" created="Sun, 24 Dec 2017 06:32:04 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/646&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/646&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16302707" author="paulk" created="Sun, 24 Dec 2017 06:37:06 +0000"  >&lt;p&gt;Proposed PR #464 applied.&lt;/p&gt;</comment>
                            <comment id="17046364" author="zman0900" created="Thu, 27 Feb 2020 09:05:33 +0000"  >&lt;p&gt;This is still broken with 2.5.9:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.nio.file.Files
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.nio.file.Path

@CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Test {
    static void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;... args) {
        &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Test().run()
    }

    void run() {
        &lt;span class=&quot;code-comment&quot;&gt;// Removing &lt;span class=&quot;code-quote&quot;&gt;&apos;final&apos;&lt;/span&gt; prevents error
&lt;/span&gt;        final Path x
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            x = Files.createTempDirectory(&lt;span class=&quot;code-quote&quot;&gt;&apos;delete-me&apos;&lt;/span&gt;)
            println &lt;span class=&quot;code-quote&quot;&gt;&quot;Created temp dir: $x&quot;&lt;/span&gt;
            &lt;span class=&quot;code-comment&quot;&gt;// Some stuff with x that might &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt;
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(&lt;span class=&quot;code-quote&quot;&gt;&apos;poo&apos;&lt;/span&gt;)
        } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
            println &lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt;&apos;&lt;/span&gt;
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (x) {
                &lt;span class=&quot;code-comment&quot;&gt;// This works without println below. Maybe because it&apos;s a groovy-added method?
&lt;/span&gt;                x.deleteDir()
                &lt;span class=&quot;code-comment&quot;&gt;// Error on &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; println
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// When removed, no error and code runs to completion
&lt;/span&gt;                println &lt;span class=&quot;code-quote&quot;&gt;&quot;Deleted temp dir: $x&quot;&lt;/span&gt;
            }
            println &lt;span class=&quot;code-quote&quot;&gt;&apos;done&apos;&lt;/span&gt;
        }
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Error message:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:
/tmp/Test.groovy: 26: The variable [x] may be uninitialized
. At [26:45]  @ line 26, column 45.
     println &quot;Deleted temp dir: $x&quot;
                                 ^

1 error
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

</comment>
                            <comment id="17046494" author="paulk" created="Thu, 27 Feb 2020 11:04:43 +0000"  >&lt;p&gt;This was debated quite a bit and we eventually went with Java semantics here as per screenshot:&lt;br/&gt;
 &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12994761/12994761_screenshot-1.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12994761" name="screenshot-1.png" size="13053" author="paulk" created="Thu, 27 Feb 2020 11:03:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 37 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3myzb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>