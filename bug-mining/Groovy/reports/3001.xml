<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:48:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-7627] Property calls are not correctly type checked if the setter parameter type or getter return type are not the field type</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-7627</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;If a class defines a property but also explicitly provides a getter or setter, property style get/set calls are type checked using the underlying field type rather than the getter return type/setter parameter type.&lt;/p&gt;

&lt;p&gt;Setter example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Foo {
    Bar bar;

    void setBar(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; x) {
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.bar = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Bar(x: x)
    }
}

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Bar {
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; x
}

@groovy.transform.TypeChecked
void test() {
    Foo foo = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Foo()
    foo.bar = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Bar()
}

test()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The code above will pass STC and throw a GroovyCastException at runtime. Conversely, code like &lt;tt&gt;foo.bar = 1&lt;/tt&gt; will not pass STC.  The case for getters with return type different from the field type is similar.&lt;/p&gt;</description>
                <environment>JDK 1.8.0_60</environment>
        <key id="12904437">GROOVY-7627</key>
            <summary>Property calls are not correctly type checked if the setter parameter type or getter return type are not the field type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shils">Shil Sinha</assignee>
                                    <reporter username="shils">Shil Sinha</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Oct 2015 05:03:49 +0000</created>
                <updated>Mon, 22 Feb 2016 20:48:43 +0000</updated>
                            <resolved>Tue, 26 Jan 2016 05:25:52 +0000</resolved>
                                    <version>2.4.5</version>
                                    <fixVersion>2.4.6</fixVersion>
                                    <component>Static Type Checker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14954533" author="githubbot" created="Tue, 13 Oct 2015 07:16:58 +0000"  >&lt;p&gt;GitHub user shils opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/139&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/139&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7627&quot; title=&quot;Property calls are not correctly type checked if the setter parameter type or getter return type are not the field type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7627&quot;&gt;&lt;del&gt;GROOVY-7627&lt;/del&gt;&lt;/a&gt; Property calls are not correctly type checked if the sett&#8230;&lt;/p&gt;

&lt;p&gt;    &#8230;er parameter type or getter return type are different from the underlying field type&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/shils/incubator-groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/shils/incubator-groovy&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7627&quot; title=&quot;Property calls are not correctly type checked if the setter parameter type or getter return type are not the field type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7627&quot;&gt;&lt;del&gt;GROOVY-7627&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/139.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/139.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #139&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 211f7426f4fe31aa360fc48bb5af15cee6ea9e3d&lt;br/&gt;
Author: Shil S &amp;lt;shil.sinha@gmail.com&amp;gt;&lt;br/&gt;
Date:   2015-10-13T07:03:55Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7627&quot; title=&quot;Property calls are not correctly type checked if the setter parameter type or getter return type are not the field type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7627&quot;&gt;&lt;del&gt;GROOVY-7627&lt;/del&gt;&lt;/a&gt; Property calls are not correctly type checked if the setter parameter type or getter return type are different from the underlying field type&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14954535" author="githubbot" created="Tue, 13 Oct 2015 07:19:46 +0000"  >&lt;p&gt;Github user shils commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/139#discussion_r41833604&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/139#discussion_r41833604&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/test/groovy/transform/stc/GenericsSTCTest.groovy &amp;#8212;&lt;br/&gt;
    @@ -1613,6 +1613,8 @@ assert result == &apos;ok&apos;&lt;br/&gt;
                 class ComponentFixture&amp;lt;T extends Component&amp;gt; {}&lt;br/&gt;
                 class JButtonFixture extends ComponentFixture&amp;lt;JButton&amp;gt; {}&lt;br/&gt;
                 class ContainerFixture&amp;lt;T extends Container&amp;gt; extends ComponentFixture&amp;lt;T&amp;gt; {}&lt;br/&gt;
    +&lt;br/&gt;
    +            @groovy.transform.TypeChecked(groovy.transform.TypeCheckingMode.SKIP)&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    This class wasn&apos;t type checked in the example in the issue (&lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-5981&quot; title=&quot;@TypedChecked error when using generics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-5981&quot;&gt;&lt;del&gt;GROOVY-5981&lt;/del&gt;&lt;/a&gt;), so this should be ok.&lt;/p&gt;</comment>
                            <comment id="14954778" author="githubbot" created="Tue, 13 Oct 2015 10:58:29 +0000"  >&lt;p&gt;Github user blackdrag commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/139#discussion_r41852510&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/139#discussion_r41852510&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/test/groovy/transform/stc/GenericsSTCTest.groovy &amp;#8212;&lt;br/&gt;
    @@ -1613,6 +1613,8 @@ assert result == &apos;ok&apos;&lt;br/&gt;
                 class ComponentFixture&amp;lt;T extends Component&amp;gt; {}&lt;br/&gt;
                 class JButtonFixture extends ComponentFixture&amp;lt;JButton&amp;gt; {}&lt;br/&gt;
                 class ContainerFixture&amp;lt;T extends Container&amp;gt; extends ComponentFixture&amp;lt;T&amp;gt; {}&lt;br/&gt;
    +&lt;br/&gt;
    +            @groovy.transform.TypeChecked(groovy.transform.TypeCheckingMode.SKIP)&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    you mean the compilation of that class would fail without this?&lt;/p&gt;</comment>
                            <comment id="14955100" author="githubbot" created="Tue, 13 Oct 2015 15:16:17 +0000"  >&lt;p&gt;Github user shils commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/139#discussion_r41879861&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/139#discussion_r41879861&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/test/groovy/transform/stc/GenericsSTCTest.groovy &amp;#8212;&lt;br/&gt;
    @@ -1613,6 +1613,8 @@ assert result == &apos;ok&apos;&lt;br/&gt;
                 class ComponentFixture&amp;lt;T extends Component&amp;gt; {}&lt;br/&gt;
                 class JButtonFixture extends ComponentFixture&amp;lt;JButton&amp;gt; {}&lt;br/&gt;
                 class ContainerFixture&amp;lt;T extends Container&amp;gt; extends ComponentFixture&amp;lt;T&amp;gt; {}&lt;br/&gt;
    +&lt;br/&gt;
    +            @groovy.transform.TypeChecked(groovy.transform.TypeCheckingMode.SKIP)&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Yes, I thought it may have been the case that that class should not have compiled with STC in the first place. After you commented, I took another look and realized that it was an actual regression - pseudo property calls within the owning class would break with STC. I&apos;ve updated my pull request accordingly. &lt;/p&gt;

&lt;p&gt;    I also created a simpler unit test for pseudo property calls with STC, but that&apos;s probably better off in a separate pr/commit.&lt;/p&gt;</comment>
                            <comment id="14957266" author="shils" created="Wed, 14 Oct 2015 16:56:41 +0000"  >&lt;p&gt;Background for the problem and the fix:&lt;/p&gt;

&lt;p&gt;If a PropertyNode exists for a given PropertyExpression, StaticTypeCheckingVisitor.existsProperty currently sets the expression&apos;s inferred type to the type of the node, without considering the return type of an explicit getter for the property in case of reads, or the parameter type of an explicit setter for the property in case of writes. &lt;/p&gt;

&lt;p&gt;If we are outside (in the type checking context sense) of a candidate receiver type for the property, we should consider any existing getter/setters prior to looking at the property node to determine the expression&apos;s type.&lt;/p&gt;</comment>
                            <comment id="15116676" author="githubbot" created="Tue, 26 Jan 2016 04:42:50 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/139&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/139&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 43 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2mxjz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>