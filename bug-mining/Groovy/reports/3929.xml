<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:09:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-9796] Static type checker doesn&apos;t backtrack when solving generics</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-9796</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;When a method pipeline involves generics, the static type checker is greedy and tends to be overly specific, producing errors when the correct answer involves relaxing to a common bound.&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
@CompileStatic
&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; returnANumber() {
  &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; number = Optional.of(1234 &lt;span class=&quot;code-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;) &lt;span class=&quot;code-comment&quot;&gt;// should infer Optional&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;&amp;gt;
&lt;/span&gt;    orElse(42.0 &lt;span class=&quot;code-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;)
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[Static type checking] - Cannot find matching method java.util.Optional#orElse(java.lang.&lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;). Please check &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the declared type is correct and &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the method exists.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Explicitly inserting a type witness &lt;tt&gt;Optional.&amp;lt;Number&amp;gt;of&lt;/tt&gt; works.&lt;/p&gt;

&lt;p&gt;Note: This &lt;em&gt;might&lt;/em&gt; be a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8103&quot; title=&quot;STC: matching return type of one static method to parameter type of another&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8103&quot;&gt;&lt;del&gt;GROOVY-8103&lt;/del&gt;&lt;/a&gt;, but I&apos;m unable to tell precisely. 3.0.6 was released one week after it was marked resolved. &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8961&quot; title=&quot;Cannot pass generic list into explicit setter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8961&quot;&gt;&lt;del&gt;GROOVY-8961&lt;/del&gt;&lt;/a&gt; is marked fixed in 3.0.6, but I&apos;m having the problem there.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13337745">GROOVY-9796</key>
            <summary>Static type checker doesn&apos;t backtrack when solving generics</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="chrylis">Christopher Smith</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Oct 2020 20:50:58 +0000</created>
                <updated>Thu, 12 Nov 2020 21:30:38 +0000</updated>
                                            <version>3.0.6</version>
                                                    <component>Static Type Checker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17223001" author="emilles" created="Thu, 29 Oct 2020 16:22:31 +0000"  >&lt;p&gt;This is what I see for the same scenario in a Java source:&lt;br/&gt;
 &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13014363/13014363_screenshot-1.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;/p&gt;</comment>
                            <comment id="17223072" author="chrylis" created="Thu, 29 Oct 2020 17:22:18 +0000"  >&lt;p&gt;Bah; I can confirm the Java version in HotSpot javac 11 (though I&apos;ll note that you&apos;re triggering an autoboxing fight; happens also with a boxed Double); I&apos;ll check the Java version against ecj shortly.&lt;/p&gt;

&lt;p&gt;In the original case, the types involved were business types, and I reduced this for an MCVE. Nevertheless, this&#160;&lt;em&gt;is&lt;/em&gt; a bug in both, as the existence of a type witness that solves the inference problem demonstrates that it &lt;em&gt;should&lt;/em&gt; work. Specifically, it appears that the solver should be treating the original &lt;tt&gt;Optional.of&lt;/tt&gt; as a &lt;a href=&quot;https://docs.oracle.com/javase/specs/jls/se11/html/jls-18.html#jls-18.5.2.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;poly expression&lt;/a&gt;&#160;but isn&apos;t.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13014363" name="screenshot-1.png" size="28926" author="emilles" created="Thu, 29 Oct 2020 16:21:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 2 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0k3ig:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>