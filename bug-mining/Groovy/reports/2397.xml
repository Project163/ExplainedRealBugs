<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:37:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-5385] StackOverflow Exception when calling super.method, which returns an instance of the corresponding class. </title>
                <link>https://issues.apache.org/jira/browse/GROOVY-5385</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;You get a StackOverflow Exception when running following code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;A.groovy&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;A {
    A attach(){
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println( &lt;span class=&quot;code-quote&quot;&gt;&quot;A does something &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;;
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;B.groovy&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;B &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; A {
    @Override
    B attach(){
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;B does something &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (B) &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.attach();
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;C.groovy&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;C &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; B {
    @Override
    C attach(){
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;C does something &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (C) &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.attach();
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;Test.groovy&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;C c = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; C(); c.attach();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This bug only occurs when the depth of the class hierarchy exceeds two classes.&lt;br/&gt;
Moreover this bug seems depend on the method name! If you try &lt;tt&gt;attachMe()&lt;/tt&gt; as method name the Stackoverflow Exception won&apos;t be raised.&lt;br/&gt;
The whole ErrorOutput can be found attached.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;Error.output&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;C does something &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
C does something &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
C does something &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
C does something &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.StackOverflowError
	at groovy.lang.MetaClassImpl.getMetaProperty(MetaClassImpl.java:2441)
	at groovy.lang.MetaClassImpl.getMetaProperty(MetaClassImpl.java:2415)
	at groovy.lang.MetaClassImpl.getProperty(MetaClassImpl.java:1510)
	at groovy.lang.MetaClassImpl.getProperty(MetaClassImpl.java:3308)
	at org.codehaus.groovy.runtime.callsite.ClassMetaClassGetPropertySite.getProperty(ClassMetaClassGetPropertySite.java:48)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callGetProperty(AbstractCallSite.java:227)
	at C.attach(C.groovy:20)
	at C.attach(C.groovy)
	at B.attach(B.groovy)
	at C.&lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;$3$attach(C.groovy)
	at sun.reflect.GeneratedMethodAccessor1.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
	at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1047)
	at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.invokeMethodOnSuperN(ScriptBytecodeAdapter.java:128)
	at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.invokeMethodOnSuper0(ScriptBytecodeAdapter.java:148)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;



</description>
                <environment>Windows 7, IntelliJ IDEA</environment>
        <key id="12818155">GROOVY-5385</key>
            <summary>StackOverflow Exception when calling super.method, which returns an instance of the corresponding class. </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blackdrag">Jochen Theodorou</assignee>
                                    <reporter username="stefan_leo">Stefan Leonhartsberger</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Mar 2012 05:51:40 +0000</created>
                <updated>Thu, 15 Oct 2015 18:19:59 +0000</updated>
                            <resolved>Wed, 20 Nov 2013 08:09:08 +0000</resolved>
                                    <version>1.7.10</version>
                    <version>2.0-beta-2</version>
                    <version>1.8.6</version>
                                    <fixVersion>2.2.1</fixVersion>
                                    <component>groovy-jdk</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14479879" author="paulk" created="Thu, 29 Mar 2012 23:18:32 +0000"  >&lt;p&gt;Had a quick look at this. Groovy is creating bridge methods for each covariant return type, e.g. for class C, the methods &quot;A attach()&quot;, &quot;B attach()&quot; are added in addition to the one in the class itself, i.e. &quot;C attach()&quot;. Depending on the order these are placed in the file, you will get strange behaviour. The workaround is to have A as your return type everywhere for the &quot;attach&quot; method.&lt;/p&gt;</comment>
                            <comment id="14472634" author="stefan_leo" created="Fri, 30 Mar 2012 07:57:04 +0000"  >&lt;p&gt;Thank you for the reply.&lt;br/&gt;
We already make use of this workaround. Nevertheless we do not want to force the users of our classes to work with explicit casts everytime.&lt;br/&gt;
Will this one be fixed?&lt;/p&gt;</comment>
                            <comment id="14472701" author="paulk" created="Sun, 1 Apr 2012 14:50:41 +0000"  >&lt;p&gt;Yes, the intention is to fix it - it may overlap with &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-5352&quot; title=&quot;Covariant return types on overridden methods cause StackOverflowError&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-5352&quot;&gt;&lt;del&gt;GROOVY-5352&lt;/del&gt;&lt;/a&gt;, so fixing one might fix the other if we do the fix right.&lt;/p&gt;</comment>
                            <comment id="14475160" author="blackdrag" created="Tue, 19 Nov 2013 09:47:49 +0000"  >&lt;p&gt;I compared with Java and Java also creates those two bridge methods. So it must be something else.&lt;/p&gt;</comment>
                            <comment id="14475093" author="blackdrag" created="Tue, 19 Nov 2013 10:10:50 +0000"  >&lt;p&gt;looking at this more the problem is the following: C.super$3$attach does INVOKESPECIAL B.attach ()LA; and B.attach()LA; is correctly doing an invokevirtual for attach, which will pick up the version of C. The super$3$attach method has instead to invoke B.attach()LB;, never the bridge method. Then the stack overflow will not happen&lt;/p&gt;</comment>
                            <comment id="14475234" author="blackdrag" created="Wed, 20 Nov 2013 08:09:08 +0000"  >&lt;p&gt;fixed&lt;/p&gt;</comment>
                            <comment id="14475998" author="evox" created="Sat, 24 May 2014 11:22:29 +0000"  >&lt;p&gt;Hi guys,&lt;/p&gt;

&lt;p&gt;I have exactly the same issue by using Groovy 2.2.2.. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12722605" name="erroroutput.txt" size="68161" author="stefan_leo" created="Thu, 29 Mar 2012 05:51:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 26 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ca93:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>