<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:46:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-7018] GroovyClassLoader addClasspath RegexPattern issue</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-7018</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;When adding Groovy Files from the file system to the GroovyClassLoader&apos;s classpath grabbed from a default java properties file (&quot;/&quot; instead of &quot;\&quot;))&lt;br/&gt;
Then the addClasspath() method uses a simple URL instead of the File URL&lt;/p&gt;

&lt;p&gt;This is due to a simple mistake in this mentioned method:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void addClasspath(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; path) {
....
     &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!URI_PATTERN.matcher(path).matches()) {
          newURI = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(path).toURI();
     } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
          newURI = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URI(path);
     }
}

&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Pattern URI_PATTERN = Pattern.compile(&lt;span class=&quot;code-quote&quot;&gt;&quot;\\p{Alpha}[-+.\\p{Alnum}]*:[^\\\\]*&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The URI_PATTERN which should match &quot;URIs but not Windows filenames&quot; doesn&apos;t work as expected.&lt;br/&gt;
It matches i.e. C:/xxx/file.ext &lt;br/&gt;
This is related to using forward instead of backslashes - which souldn&apos;t matter.&lt;/p&gt;

&lt;p&gt;This was i.e. NOT the case for Groovy 2.1.3&lt;/p&gt;</description>
                <environment>JDK 1.7u51</environment>
        <key id="12817764">GROOVY-7018</key>
            <summary>GroovyClassLoader addClasspath RegexPattern issue</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pascalschumacher">Pascal Schumacher</assignee>
                                    <reporter username="stefan_leo">Stefan Leonhartsberger</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Aug 2014 06:00:49 +0000</created>
                <updated>Tue, 21 Jul 2015 10:29:59 +0000</updated>
                            <resolved>Thu, 2 Jul 2015 19:23:39 +0000</resolved>
                                    <version>2.3.6</version>
                                    <fixVersion>2.4.4</fixVersion>
                                    <component>GroovyScriptEngine</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14476784" author="ocroquette" created="Mon, 19 Jan 2015 06:25:59 +0000"  >&lt;p&gt;One of our builds was broken after we updated from Groovy 2.2.1 to 2.3.9. It looks like it&apos;s related to this issue.&lt;/p&gt;

&lt;p&gt;There are 2 symptoms:&lt;/p&gt;

&lt;p&gt;Symptom 1:&lt;/p&gt;

&lt;p&gt;Script path with backslashes:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;c:\Program Files (x86)\Groovy\Groovy-2.2.1\bin\groovy&quot;&lt;/span&gt; -d C:\Users\...\PrintClassPath.groovy
&lt;span class=&quot;code-quote&quot;&gt;&quot;c:\Program Files (x86)\Groovy\Groovy-2.3.9\bin\groovy&quot;&lt;/span&gt; -d C:\Users\...\PrintClassPath.groovy
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;=&amp;gt; Both OK&lt;/p&gt;

&lt;p&gt;Script path with forward slashes, Groovy 2.2.1:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;c:\Program Files (x86)\Groovy\Groovy-2.2.1\bin\groovy&quot;&lt;/span&gt; -d C:/Users/.../PrintClassPath.groovy
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;=&amp;gt; OK&lt;/p&gt;

&lt;p&gt;Script path with forward slashes, Groovy 2.3.9:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;c:\Program Files (x86)\Groovy\Groovy-2.3.9\bin\groovy&quot;&lt;/span&gt; -d C:/Users/.../PrintClassPath.groovy
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;=&amp;gt; NOK&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Caught: java.net.MalformedURLException: unknown protocol: c
java.net.MalformedURLException: unknown protocol: c
        at java.net.URL.&amp;lt;init&amp;gt;(URL.java:592)
        at java.net.URL.&amp;lt;init&amp;gt;(URL.java:482)
        at java.net.URL.&amp;lt;init&amp;gt;(URL.java:431)
        at java.net.URI.toURL(URI.java:1096)
        at groovy.lang.GroovyCodeSource.&amp;lt;init&amp;gt;(GroovyCodeSource.java:162)
        at groovy.ui.GroovyMain.getScriptSource(GroovyMain.java:450)
        at groovy.ui.GroovyMain.processOnce(GroovyMain.java:650)
        at groovy.ui.GroovyMain.run(GroovyMain.java:381)
        at groovy.ui.GroovyMain.process(GroovyMain.java:367)
        at groovy.ui.GroovyMain.processArgs(GroovyMain.java:126)
        at groovy.ui.GroovyMain.main(GroovyMain.java:106)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:606)
        at org.codehaus.groovy.tools.GroovyStarter.rootLoader(GroovyStarter.java:106)
        at org.codehaus.groovy.tools.GroovyStarter.main(GroovyStarter.java:128)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This happens only if the path doesn&apos;t contain &lt;b&gt;any&lt;/b&gt; backslash.&lt;/p&gt;



&lt;p&gt;Symptom 2 (now tracked in &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7260&quot; title=&quot;-classpath argument is truncated when using groovy.bat&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7260&quot;&gt;GROOVY-7260&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;Only the first component of the classpath provided on the command line is taken in consideration. I don&apos;t know if it&apos;s the same root cause.&lt;br/&gt;
Edit: not the same root cause, issue now tracked in &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7260&quot; title=&quot;-classpath argument is truncated when using groovy.bat&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7260&quot;&gt;GROOVY-7260&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;c:\Program Files (x86)\Groovy\Groovy-2.2.1\bin\groovy&quot;&lt;/span&gt; -classpath c:\dummy\dummy-2.jar;c:\dummy\dummy.jar -d PrintClassPath.groovy | findstr dummy
- file:/c:/dummy/dummy-2.jar
- file:/c:/dummy/dummy.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;c:\Program Files (x86)\Groovy\Groovy-2.3.9\bin\groovy&quot;&lt;/span&gt; -classpath c:\dummy\dummy-2.jar;c:\dummy\dummy.jar -d PrintClassPath.groovy | findstr dummy
- file:/c:/dummy/dummy-2.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(both JAR files have to exist for the test to work)&lt;/p&gt;


&lt;p&gt;Content of PrintClassPath.groovy:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;def printClassPath(classLoader) {
  println &lt;span class=&quot;code-quote&quot;&gt;&quot;From classload $classLoader&quot;&lt;/span&gt;
  classLoader.getURLs().each {url-&amp;gt;
     println &lt;span class=&quot;code-quote&quot;&gt;&quot;- ${url.toString()}&quot;&lt;/span&gt;
  }
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (classLoader.parent) {
     printClassPath(classLoader.parent)
  }
}
printClassPath &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;classLoader
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14476808" author="ocroquette" created="Mon, 19 Jan 2015 06:30:16 +0000"  >&lt;p&gt;Just an idea for the fix: reuse the functionality to parse URL&apos;s:&lt;/p&gt;

&lt;p&gt;Before:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;     &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!URI_PATTERN.matcher(path).matches()) {
          newURI = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(path).toURI();
     } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
          newURI = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URI(path);
     }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
          newURI = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URI(path);
     }
     &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (MalformedURLException e) {
          &lt;span class=&quot;code-comment&quot;&gt;// fall back to simple path
&lt;/span&gt;          newURI = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(path).toURI();
     }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This way URI_PATTERN is not required anymore.&lt;/p&gt;</comment>
                            <comment id="14476876" author="ocroquette" created="Mon, 19 Jan 2015 06:31:07 +0000"  >&lt;p&gt;Related commits:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/groovy/groovy-core/commit/e2ea2700fe640bbf604154fad7e553da4a630245&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/groovy/groovy-core/commit/e2ea2700fe640bbf604154fad7e553da4a630245&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/groovy/groovy-core/commit/644ddc5f49517701cbe753e29a8f67da0ac75b66&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/groovy/groovy-core/commit/644ddc5f49517701cbe753e29a8f67da0ac75b66&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="14480781" author="paulk" created="Mon, 19 Jan 2015 07:47:28 +0000"  >&lt;p&gt;We might need to do something like the try ... catch. If you go to Jim&apos;s original changes, you&apos;ll see he was trying to avoid that:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/groovy/groovy-core/commit/60a7cd4637fc11766f0b394b880ac0c1b9176d84&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/groovy/groovy-core/commit/60a7cd4637fc11766f0b394b880ac0c1b9176d84&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/groovy/groovy-core/commit/8ca9a44c93eb06a44b023c66dcbf7d2c40818621&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/groovy/groovy-core/commit/8ca9a44c93eb06a44b023c66dcbf7d2c40818621&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;See the wording around &quot;... doesn&apos;t hurt file-only classpath &lt;span class=&quot;error&quot;&gt;&amp;#91;entries&amp;#93;&lt;/span&gt; ...&quot;.&lt;/p&gt;

&lt;p&gt;My changes fixed some of the File scenarios but as you point out, obviously not all. Obviously, correct behavior is more important than efficiency but I&apos;m wondering whether a combination approach might be best. Perhaps we could attempt to minimize the overhead associated with the extra exception by looking for backslashes or no colon. Use the file logic for those cases as well as in the catch clause.&lt;/p&gt;

&lt;p&gt;Then again, I&apos;m not sure what Jim had in mind with his &quot;... a possibly better approach ...&quot;. That might be worth exploring also/instead.&lt;/p&gt;</comment>
                            <comment id="14480776" author="paulk" created="Mon, 19 Jan 2015 08:02:40 +0000"  >&lt;p&gt;Olivier, wrt Symptom 1, what happens if you use a proper URI for your files, e.g.:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;groovy -d file:C:/some/path/to/MyFile.groovy
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14480770" author="paulk" created="Mon, 19 Jan 2015 08:04:37 +0000"  >&lt;p&gt;Changing priority to &quot;Major&quot; since I think the workaround is to prepend file: to windows paths not using windows syntax.&lt;/p&gt;</comment>
                            <comment id="14480780" author="paulk" created="Mon, 19 Jan 2015 08:35:34 +0000"  >&lt;p&gt;I believe the workaround for Symptom 2 is to set the CLASSPATH environment variable, e.g.:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;set CLASSPATH=c:\dummy\dummy-2.jar;c:\dummy\dummy.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I believe Symptom 2 is to do with .bat file processing limitations in windows rather than the URI issue. Can you check whether you are using the .bat or .exe file when using 2.2.1? I just tried 2.1.9 and that failed for me with the same error when using the groovy.bat file.&lt;/p&gt;</comment>
                            <comment id="14476856" author="pschumacher" created="Mon, 19 Jan 2015 10:49:02 +0000"  >&lt;p&gt;probably &lt;a href=&quot;http://groovy.329449.n5.nabble.com/Simple-Groovy-SQL-script-fails-moving-from-2-2-2-to-2-3-8-td5722161.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;related problem from mailing list&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14476894" author="ocroquette" created="Tue, 20 Jan 2015 05:20:17 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Olivier, wrt Symptom 1, what happens if you use a proper URI for your files, e.g.:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;groovy -d file:C:/some/path/to/MyFile.groovy
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;
&lt;p&gt;That works&lt;/p&gt;</comment>
                            <comment id="14476809" author="ocroquette" created="Tue, 20 Jan 2015 05:34:22 +0000"  >&lt;blockquote&gt;
&lt;p&gt;I believe Symptom 2 is to do with .bat file processing limitations in windows rather than the URI issue. Can you check whether you are using the .bat or .exe file when using 2.2.1? I just tried 2.1.9 and that failed for me with the same error when using the groovy.bat file.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;You are right, thanks. I opened a dedicated ticket for the symptom 2: &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7260&quot; title=&quot;-classpath argument is truncated when using groovy.bat&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7260&quot;&gt;GROOVY-7260&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14587887" author="persi" created="Tue, 16 Jun 2015 11:16:49 +0000"  >&lt;p&gt;We have got the same problem as mentioned by Oliver Croquette with Symptom 1. So I tried to create a small fix in the 2 above mentioned Groovy classes GroovyMain and GroovyClassLoader.&lt;/p&gt;

&lt;p&gt;It looks like the following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;GroovyMain#getScriptSource&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; GroovyCodeSource getScriptSource(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isScriptFile, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; script) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException, URISyntaxException {
  &lt;span class=&quot;code-comment&quot;&gt;//check the script is currently valid before starting a server against the script
&lt;/span&gt;  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isScriptFile) {
     &lt;span class=&quot;code-comment&quot;&gt;// search &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the file and &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; it exists don&apos;t &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; to use URIs ...
&lt;/span&gt;     File scriptFile = huntForTheScriptFile(script);
     &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!scriptFile.exists() &amp;amp;&amp;amp; uriPattern.matcher(script).matches()) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GroovyCodeSource(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URI(script));
     }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GroovyCodeSource(scriptFile);
  }
  &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GroovyCodeSource(script, &lt;span class=&quot;code-quote&quot;&gt;&quot;script_from_command_line&quot;&lt;/span&gt;, GroovyShell.DEFAULT_CODE_BASE);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;GroovyClassloader#addClasspath&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; File file = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(path);
&lt;span class=&quot;code-comment&quot;&gt;// search &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the file and &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; it exists don&apos;t &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; to use URIs ...
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ( file.exists() ) {
  newURI = file.toURI();
} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
  newURI = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URI(path);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For our scripts this works for both cases Oliver mentioned above.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure if this fits all problems, but if it does i would create a pull request.&lt;/p&gt;</comment>
                            <comment id="14598113" author="pascalschumacher" created="Tue, 23 Jun 2015 18:18:36 +0000"  >&lt;p&gt;Please create a pull request, that makes reviewing easier/merging. Thanks! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14599332" author="githubbot" created="Wed, 24 Jun 2015 12:41:12 +0000"  >&lt;p&gt;GitHub user Persi opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/43&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/43&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7018&quot; title=&quot;GroovyClassLoader addClasspath RegexPattern issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7018&quot;&gt;&lt;del&gt;GROOVY-7018&lt;/del&gt;&lt;/a&gt; GroovyClassLoader addClasspath RegexPattern issue&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/Persi/incubator-groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Persi/incubator-groovy&lt;/a&gt; master&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/43.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/43.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #43&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 6cf17e1d171503b5e86f5e29098d0cb619e94959&lt;br/&gt;
Author: Persi &amp;lt;the_hammer1@freenet.de&amp;gt;&lt;br/&gt;
Date:   2015-06-24T09:09:35Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7018&quot; title=&quot;GroovyClassLoader addClasspath RegexPattern issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7018&quot;&gt;&lt;del&gt;GROOVY-7018&lt;/del&gt;&lt;/a&gt; GroovyClassLoader addClasspath RegexPattern issue&lt;/p&gt;

&lt;p&gt;    GroovyMain and GroovyClassLoader had problems in Cygwin environments&lt;br/&gt;
    with finding Scripts.&lt;/p&gt;

&lt;p&gt;commit cdcb16930bf5ef63b6c6eff9f50f644353c85d0e&lt;br/&gt;
Author: Persi &amp;lt;the_hammer1@freenet.de&amp;gt;&lt;br/&gt;
Date:   2015-06-24T09:15:53Z&lt;/p&gt;

&lt;p&gt;    Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7018&quot; title=&quot;GroovyClassLoader addClasspath RegexPattern issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7018&quot;&gt;&lt;del&gt;GROOVY-7018&lt;/del&gt;&lt;/a&gt; GroovyClassLoader addClasspath RegexPattern issue&quot;&lt;/p&gt;

&lt;p&gt;    This reverts commit 6cf17e1d171503b5e86f5e29098d0cb619e94959.&lt;/p&gt;

&lt;p&gt;commit 6495a83e5f047719fc85d6f09a4334c8ad94eccb&lt;br/&gt;
Author: Persi &amp;lt;the_hammer1@freenet.de&amp;gt;&lt;br/&gt;
Date:   2015-06-24T09:20:16Z&lt;/p&gt;

&lt;p&gt;    Revert &quot;Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7018&quot; title=&quot;GroovyClassLoader addClasspath RegexPattern issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7018&quot;&gt;&lt;del&gt;GROOVY-7018&lt;/del&gt;&lt;/a&gt; GroovyClassLoader addClasspath RegexPattern issue&quot;&quot;&lt;/p&gt;

&lt;p&gt;    This reverts commit cdcb16930bf5ef63b6c6eff9f50f644353c85d0e.&lt;/p&gt;

&lt;p&gt;commit c86f4a54ab282b84ea9aabd67721894b93e9d093&lt;br/&gt;
Author: Persi &amp;lt;the_hammer1@freenet.de&amp;gt;&lt;br/&gt;
Date:   2015-06-24T12:40:12Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7018&quot; title=&quot;GroovyClassLoader addClasspath RegexPattern issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7018&quot;&gt;&lt;del&gt;GROOVY-7018&lt;/del&gt;&lt;/a&gt; GroovyClassLoader addClasspath RegexPattern issue&lt;/p&gt;

&lt;p&gt;    GroovyClassLoaderTest is now running succesfully with the new&lt;br/&gt;
    ClassLoaderCode.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14599336" author="persi" created="Wed, 24 Jun 2015 12:45:56 +0000"  >&lt;p&gt;Hello Pascal,&lt;/p&gt;

&lt;p&gt;I&apos;ve created a pull request:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/43&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/43&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14609204" author="githubbot" created="Tue, 30 Jun 2015 22:45:26 +0000"  >&lt;p&gt;Github user paulk-asert commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/43#discussion_r33632554&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/43#discussion_r33632554&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/main/groovy/ui/GroovyMain.java &amp;#8212;&lt;br/&gt;
    @@ -391,17 +391,16 @@ public String getText(String uriOrFilename) throws IOException {&lt;br/&gt;
         protected GroovyCodeSource getScriptSource(boolean isScriptFile, String script) throws IOException, URISyntaxException {&lt;br/&gt;
             //check the script is currently valid before starting a server against the script&lt;br/&gt;
             if (isScriptFile) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (uriPattern.matcher(script).matches()) {&lt;br/&gt;
    +            // search for the file and if it exists don&apos;t try to use URIs ...&lt;br/&gt;
    +            File scriptFile = huntForTheScriptFile(script);&lt;br/&gt;
    +            if (!scriptFile.exists() &amp;amp;&amp;amp; uriPattern.matcher(script).matches()) 
{
                     return new GroovyCodeSource(new URI(script));
    -            }
&lt;p&gt; else &lt;/p&gt;
{
    -                return new GroovyCodeSource(huntForTheScriptFile(script));
                 }&lt;/li&gt;
	&lt;li&gt;} else {&lt;/li&gt;
	&lt;li&gt;return new GroovyCodeSource(script, &quot;script_from_command_line&quot;, GroovyShell.DEFAULT_CODE_BASE);&lt;br/&gt;
    +            return new GroovyCodeSource(huntForTheScriptFile(script));
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    can&apos;t you just use &quot;scriptFile&quot; instead of the second call to &quot;huntForTheScriptFile&quot;?&lt;/p&gt;</comment>
                            <comment id="14609643" author="githubbot" created="Wed, 1 Jul 2015 06:52:45 +0000"  >&lt;p&gt;Github user Persi commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/43#discussion_r33652610&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/43#discussion_r33652610&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/main/groovy/ui/GroovyMain.java &amp;#8212;&lt;br/&gt;
    @@ -391,17 +391,16 @@ public String getText(String uriOrFilename) throws IOException {&lt;br/&gt;
         protected GroovyCodeSource getScriptSource(boolean isScriptFile, String script) throws IOException, URISyntaxException {&lt;br/&gt;
             //check the script is currently valid before starting a server against the script&lt;br/&gt;
             if (isScriptFile) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (uriPattern.matcher(script).matches()) {&lt;br/&gt;
    +            // search for the file and if it exists don&apos;t try to use URIs ...&lt;br/&gt;
    +            File scriptFile = huntForTheScriptFile(script);&lt;br/&gt;
    +            if (!scriptFile.exists() &amp;amp;&amp;amp; uriPattern.matcher(script).matches()) 
{
                     return new GroovyCodeSource(new URI(script));
    -            }
&lt;p&gt; else &lt;/p&gt;
{
    -                return new GroovyCodeSource(huntForTheScriptFile(script));
                 }&lt;/li&gt;
	&lt;li&gt;} else {&lt;/li&gt;
	&lt;li&gt;return new GroovyCodeSource(script, &quot;script_from_command_line&quot;, GroovyShell.DEFAULT_CODE_BASE);&lt;br/&gt;
    +            return new GroovyCodeSource(huntForTheScriptFile(script));
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Hello Paul,&lt;/p&gt;

&lt;p&gt;    indeed I could reduce the calls to &quot;huntForTheScriptFile&quot; to one.&lt;/p&gt;

&lt;p&gt;    I&apos;ll commit it.&lt;/p&gt;
</comment>
                            <comment id="14612405" author="githubbot" created="Thu, 2 Jul 2015 19:22:23 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/43&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/43&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12811444">GROOVY-7097</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12817773">GROOVY-7022</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 20 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bx5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>