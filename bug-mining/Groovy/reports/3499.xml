<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:00:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-8871] Long Constants Defined in Groovy 2.5.3 Under OpenJDK 11 Cause an IllegalAccessError</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-8871</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;The following groovy code:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;SomeBadClass {
 SomeBadClass() {
 &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt; a = 1_457_366_400_000L
 }
}

&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SomeBadClass()&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;causes the following exception to be thrown:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.IllegalAccessError: Update to &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; field com.example.SomeBadClass.$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$0 attempted from a different method (__$swapInit) than the initializer method &amp;lt;clinit&amp;gt; 

   at com.example.SomeBadClass.__$swapInit(SomeBadClass.groovy)
   at com.example.SomeBadClass.&amp;lt;clinit&amp;gt;(SomeBadClass.groovy)
   at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
   at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
   at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
   at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)
   at org.codehaus.groovy.reflection.CachedConstructor.invoke(CachedConstructor.java:83)
   at org.codehaus.groovy.runtime.callsite.ConstructorSite$ConstructorSiteNoUnwrapNoCoerce.callConstructor(ConstructorSite.java:105)
   at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallConstructor(CallSiteArray.java:59)
   at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callConstructor(AbstractCallSite.java:237)
   at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callConstructor(AbstractCallSite.java:241)
   at com.example.SomeClassFailsTest_3.testSomething(SomeClassFailsTest_3.groovy:37)
   at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
   at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
   at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
   at java.base/java.lang.reflect.Method.invoke(Method.java:566)
   at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
   at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
   at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
   at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
   at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
   at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
   at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
   at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
   at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
   at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
   at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
   at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
   at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
   at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
   at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
   at org.junit.runners.Suite.runChild(Suite.java:128)
   at org.junit.runners.Suite.runChild(Suite.java:27)
   at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
   at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
   at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
   at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
   at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
   at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
   at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
   at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)
   at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)
   at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)
   at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I created a small sample project to show this happening (using gradle 4.10.2):  &lt;a href=&quot;https://github.com/silentkevin/example-for-groovy-long-bug&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/silentkevin/example-for-groovy-long-bug&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The example project builds a docker image that can be run to easily show the issue:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
docker run silentkevin/example-&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;-groovy-&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;-bug
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Versions:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Runtime: Oracle OpenJDK 11.0.1 (tried on MacOSX 10.14 and on Debian Linux using official openjdk docker image 11.0.1-jdk)&lt;/li&gt;
	&lt;li&gt;Groovy: 2.5.3&lt;/li&gt;
	&lt;li&gt;Gradle: 4.10.2&lt;/li&gt;
	&lt;li&gt;JUnit: 4.12&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Links:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Sample project:  &lt;a href=&quot;https://github.com/silentkevin/example-for-groovy-long-bug&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/silentkevin/example-for-groovy-long-bug&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;build.gradle:  &lt;a href=&quot;https://github.com/silentkevin/example-for-groovy-long-bug/blob/master/build.gradle&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/silentkevin/example-for-groovy-long-bug/blob/master/build.gradle&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;Dockerfile:  &lt;a href=&quot;https://github.com/silentkevin/example-for-groovy-long-bug/blob/master/docker/Dockerfile&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/silentkevin/example-for-groovy-long-bug/blob/master/docker/Dockerfile&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;Broken class:  &lt;a href=&quot;https://github.com/silentkevin/example-for-groovy-long-bug/blob/master/src/main/groovy/com/example/SomeBadClass.groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/silentkevin/example-for-groovy-long-bug/blob/master/src/main/groovy/com/example/SomeBadClass.groovy&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;Broken test 1:  &lt;a href=&quot;https://github.com/silentkevin/example-for-groovy-long-bug/blob/master/src/test/groovy/com/example/SomeClassFailsTest_1.groovy#L41&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/silentkevin/example-for-groovy-long-bug/blob/master/src/test/groovy/com/example/SomeClassFailsTest_1.groovy#L41&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;Broken test 2:  &lt;a href=&quot;https://github.com/silentkevin/example-for-groovy-long-bug/blob/master/src/test/groovy/com/example/SomeClassFailsTest_2.groovy#L42&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/silentkevin/example-for-groovy-long-bug/blob/master/src/test/groovy/com/example/SomeClassFailsTest_2.groovy#L42&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;Broken test 3:  &lt;a href=&quot;https://github.com/silentkevin/example-for-groovy-long-bug/blob/master/src/test/groovy/com/example/SomeClassFailsTest_3.groovy#L37&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/silentkevin/example-for-groovy-long-bug/blob/master/src/test/groovy/com/example/SomeClassFailsTest_3.groovy#L37&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;Test that works fine (just to show the whole project isn&apos;t borked):  &lt;a href=&quot;https://github.com/silentkevin/example-for-groovy-long-bug/blob/master/src/test/groovy/com/example/SomeClassSucceedsTest.groovy#L41&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/silentkevin/example-for-groovy-long-bug/blob/master/src/test/groovy/com/example/SomeClassSucceedsTest.groovy#L41&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Comments:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Everything appears to work fine under OpenJDK10 with the exact same code (after changing the source and target compatibility to JDK10 in build.gradle)&lt;/li&gt;
	&lt;li&gt;CompileStatic or not doesn&apos;t seem to matter&lt;/li&gt;
	&lt;li&gt;To compile and run groovy under JDK11 version 2.5.3 of groovy is absolutely required so I can&apos;t really test with a different version of groovy&lt;/li&gt;
	&lt;li&gt;If anyone has any ideas on where to look I&apos;ll be glad to look into this myself.  I&apos;ve been using groovy for over 5 years and might be able to make some headway with a suggestion or two.&lt;/li&gt;
&lt;/ul&gt;

</description>
                <environment>OpenJDK11 on MacOSX 10.14 and Debian Linux (through docker)</environment>
        <key id="13196923">GROOVY-8871</key>
            <summary>Long Constants Defined in Groovy 2.5.3 Under OpenJDK 11 Cause an IllegalAccessError</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="silentkevin">Kevin Brown</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Nov 2018 20:31:10 +0000</created>
                <updated>Thu, 13 Dec 2018 10:04:33 +0000</updated>
                            <resolved>Thu, 8 Nov 2018 21:26:16 +0000</resolved>
                                    <version>2.5.3</version>
                                    <fixVersion>3.0.0-alpha-4</fixVersion>
                    <fixVersion>2.5.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16678749" author="silentkevin" created="Wed, 7 Nov 2018 20:35:48 +0000"  >&lt;p&gt;Attached the example project as a zip just in case github links aren&apos;t working for some.&lt;/p&gt;</comment>
                            <comment id="16678814" author="silentkevin" created="Wed, 7 Nov 2018 21:39:28 +0000"  >&lt;p&gt;Output from docker run showing 3 failing tests (and one succeeding):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+ docker run --name example-&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;-groovy-&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;-bug example-&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;-groovy-&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;-bug:latest
+ ls -lah
total 40K
drwxr-xr-x 1 root root 4.0K Nov  7 21:38 .
drwxr-xr-x 1 root root 4.0K Nov  7 19:56 ..
drwxr-xr-x 5 root root 4.0K Nov  7 21:37 .gradle
-rw-r--r-- 1 root root  362 Nov  7 20:08 build.gradle
drwxr-xr-x 1 root root 4.0K Nov  7 21:37 gradle
-rwxr-xr-x 1 root root 5.2K Nov  7 21:37 gradlew
-rw-r--r-- 1 root root 2.3K Nov  7 21:38 gradlew.bat
-rw-r--r-- 1 root root   45 Nov  7 18:17 settings.gradle
drwxr-xr-x 4 root root 4.0K Nov  7 21:38 src
/opt/example
+ pwd
+ export
+ sort
declare -x HOME=&lt;span class=&quot;code-quote&quot;&gt;&quot;/root&quot;&lt;/span&gt;
declare -x HOSTNAME=&lt;span class=&quot;code-quote&quot;&gt;&quot;d9586374f19d&quot;&lt;/span&gt;
declare -x JAVA_DEBIAN_VERSION=&lt;span class=&quot;code-quote&quot;&gt;&quot;11.0.1+13-2&quot;&lt;/span&gt;
declare -x JAVA_HOME=&lt;span class=&quot;code-quote&quot;&gt;&quot;/docker-java-home&quot;&lt;/span&gt;
declare -x JAVA_VERSION=&lt;span class=&quot;code-quote&quot;&gt;&quot;11.0.1&quot;&lt;/span&gt;
declare -x LANG=&lt;span class=&quot;code-quote&quot;&gt;&quot;C.UTF-8&quot;&lt;/span&gt;
declare -x OLDPWD
declare -x PATH=&lt;span class=&quot;code-quote&quot;&gt;&quot;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;&lt;/span&gt;
declare -x PWD=&lt;span class=&quot;code-quote&quot;&gt;&quot;/opt/example&quot;&lt;/span&gt;
declare -x SHLVL=&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;
+ ./gradlew --no-daemon --info build test check
Initialized &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt; services in: /root/.gradle/&lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;
Using 4 worker leases.
A locale sensitive service provider returned &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; a localized objects,  which should not happen.  provider: sun.util.cldr.CLDRCalendarDataProviderImpl@702ed190 locale: en
A locale sensitive service provider returned &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; a localized objects,  which should not happen.  provider: sun.util.cldr.CLDRCalendarDataProviderImpl@702ed190 locale: en
A locale sensitive service provider returned &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; a localized objects,  which should not happen.  provider: sun.util.cldr.CLDRCalendarDataProviderImpl@702ed190 locale: en
A locale sensitive service provider returned &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; a localized objects,  which should not happen.  provider: sun.util.cldr.CLDRCalendarDataProviderImpl@702ed190 locale: en
Starting Build
WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.codehaus.groovy.reflection.CachedClass (file:/root/.gradle/wrapper/dists/gradle-4.10.2-all/9fahxiiecdb76a5g3aw9oi8rv/gradle-4.10.2/lib/groovy-all-2.4.15.jar) to method java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.finalize()
WARNING: Please consider reporting &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; to the maintainers of org.codehaus.groovy.reflection.CachedClass
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; release
Settings evaluated using settings file &lt;span class=&quot;code-quote&quot;&gt;&apos;/opt/example/settings.gradle&apos;&lt;/span&gt;.
Projects loaded. Root project using build file &lt;span class=&quot;code-quote&quot;&gt;&apos;/opt/example/build.gradle&apos;&lt;/span&gt;.
Included projects: [root project &lt;span class=&quot;code-quote&quot;&gt;&apos;example-&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;-groovy-bug&apos;&lt;/span&gt;]

&amp;gt; Configure project :
Evaluating root project &lt;span class=&quot;code-quote&quot;&gt;&apos;example-&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;-groovy-bug&apos;&lt;/span&gt; using build file &lt;span class=&quot;code-quote&quot;&gt;&apos;/opt/example/build.gradle&apos;&lt;/span&gt;.
All projects evaluated.
Selected primary task &lt;span class=&quot;code-quote&quot;&gt;&apos;build&apos;&lt;/span&gt; from project :
Selected primary task &lt;span class=&quot;code-quote&quot;&gt;&apos;test&apos;&lt;/span&gt; from project :
Selected primary task &lt;span class=&quot;code-quote&quot;&gt;&apos;check&apos;&lt;/span&gt; from project :
Tasks to be executed: [task &lt;span class=&quot;code-quote&quot;&gt;&apos;:compileJava&apos;&lt;/span&gt;, task &lt;span class=&quot;code-quote&quot;&gt;&apos;:compileGroovy&apos;&lt;/span&gt;, task &lt;span class=&quot;code-quote&quot;&gt;&apos;:processResources&apos;&lt;/span&gt;, task &lt;span class=&quot;code-quote&quot;&gt;&apos;:classes&apos;&lt;/span&gt;, task &lt;span class=&quot;code-quote&quot;&gt;&apos;:jar&apos;&lt;/span&gt;, task &lt;span class=&quot;code-quote&quot;&gt;&apos;:assemble&apos;&lt;/span&gt;, task &lt;span class=&quot;code-quote&quot;&gt;&apos;:compileTestJava&apos;&lt;/span&gt;, task &lt;span class=&quot;code-quote&quot;&gt;&apos;:compileTestGroovy&apos;&lt;/span&gt;, task &lt;span class=&quot;code-quote&quot;&gt;&apos;:processTestResources&apos;&lt;/span&gt;, task &lt;span class=&quot;code-quote&quot;&gt;&apos;:testClasses&apos;&lt;/span&gt;, task &lt;span class=&quot;code-quote&quot;&gt;&apos;:test&apos;&lt;/span&gt;, task &lt;span class=&quot;code-quote&quot;&gt;&apos;:check&apos;&lt;/span&gt;, task &lt;span class=&quot;code-quote&quot;&gt;&apos;:build&apos;&lt;/span&gt;]
:compileJava (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[main,5,main]) started.

&amp;gt; Task :compileJava NO-SOURCE
file or directory &lt;span class=&quot;code-quote&quot;&gt;&apos;/opt/example/src/main/java&apos;&lt;/span&gt;, not found
Skipping task &lt;span class=&quot;code-quote&quot;&gt;&apos;:compileJava&apos;&lt;/span&gt; as it has no source files and no previous output files.
:compileJava (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[main,5,main]) completed. Took 0.124 secs.
:compileGroovy (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[main,5,main]) started.

&amp;gt; Task :compileGroovy
Task &lt;span class=&quot;code-quote&quot;&gt;&apos;:compileGroovy&apos;&lt;/span&gt; is not up-to-date because:
  No history is available.
Starting process &lt;span class=&quot;code-quote&quot;&gt;&apos;Gradle Worker Daemon 1&apos;&lt;/span&gt;. Working directory: /root/.gradle/workers Command: /usr/lib/jvm/java-11-openjdk-amd64/bin/java @/tmp/gradle-worker-classpath16071586600000065208txt -Dfile.encoding=UTF-8 -Duser.country -Duser.language=en -Duser.variant worker.org.gradle.process.internal.worker.GradleWorkerMain &lt;span class=&quot;code-quote&quot;&gt;&apos;Gradle Worker Daemon 1&apos;&lt;/span&gt;
Successfully started process &lt;span class=&quot;code-quote&quot;&gt;&apos;Gradle Worker Daemon 1&apos;&lt;/span&gt;
Started Gradle worker daemon (0.738 secs) with fork options DaemonForkOptions{executable=/usr/lib/jvm/java-11-openjdk-amd64/bin/java, minHeapSize=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, maxHeapSize=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, jvmArgs=[], classpath=[/root/.gradle/caches/modules-2/files-2.1/org.codehaus.groovy/groovy-ant/2.5.3/e32a424938134cf9d022cbc53fca44abe14d1623/groovy-ant-2.5.3.jar, /root/.gradle/caches/modules-2/files-2.1/org.codehaus.groovy/groovy/2.5.3/b69558cc55b4679f6c401dfd1b54a8a5ffbd06b1/groovy-2.5.3.jar, /root/.gradle/caches/modules-2/files-2.1/org.apache.ant/ant-junit/1.9.13/618f3aac074fabfea4712db2635409a592da9ecd/ant-junit-1.9.13.jar, /root/.gradle/caches/modules-2/files-2.1/org.apache.ant/ant/1.9.13/7aff87f91ffda6916751e39bb5688f0a53710ec4/ant-1.9.13.jar, /root/.gradle/caches/modules-2/files-2.1/org.codehaus.groovy/groovy-groovydoc/2.5.3/521d7813331dcad662086c4bfeae6d1eb74eb5ec/groovy-groovydoc-2.5.3.jar, /root/.gradle/caches/modules-2/files-2.1/org.apache.ant/ant-launcher/1.9.13/24cf1a899bb4b69373dc4cd000bb52a9f46c459d/ant-launcher-1.9.13.jar, /root/.gradle/caches/modules-2/files-2.1/org.apache.ant/ant-antlr/1.9.13/d5b701718c6de5620fa78e0aedb64cdcae1336cf/ant-antlr-1.9.13.jar, /root/.gradle/wrapper/dists/gradle-4.10.2-all/9fahxiiecdb76a5g3aw9oi8rv/gradle-4.10.2/lib/ant-1.9.11.jar, /root/.gradle/wrapper/dists/gradle-4.10.2-all/9fahxiiecdb76a5g3aw9oi8rv/gradle-4.10.2/lib/ant-launcher-1.9.11.jar], keepAliveMode=SESSION}.

This JVM does not support getting OS memory, so no OS memory status updates will be broadcast
Initialized &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt; services in: /root/.gradle/&lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;

&amp;gt; Task :compileGroovy
WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.codehaus.groovy.vmplugin.v7.Java7$1 (file:/root/.gradle/caches/modules-2/files-2.1/org.codehaus.groovy/groovy/2.5.3/b69558cc55b4679f6c401dfd1b54a8a5ffbd06b1/groovy-2.5.3.jar) to constructor java.lang.invoke.MethodHandles$Lookup(java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;,&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;)
WARNING: Please consider reporting &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; to the maintainers of org.codehaus.groovy.vmplugin.v7.Java7$1
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; release
:compileGroovy (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[main,5,main]) completed. Took 5.143 secs.
:processResources (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[main,5,main]) started.

&amp;gt; Task :processResources NO-SOURCE
file or directory &lt;span class=&quot;code-quote&quot;&gt;&apos;/opt/example/src/main/resources&apos;&lt;/span&gt;, not found
Skipping task &lt;span class=&quot;code-quote&quot;&gt;&apos;:processResources&apos;&lt;/span&gt; as it has no source files and no previous output files.
:processResources (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[main,5,main]) completed. Took 0.002 secs.
:classes (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[main,5,main]) started.

&amp;gt; Task :classes
Skipping task &lt;span class=&quot;code-quote&quot;&gt;&apos;:classes&apos;&lt;/span&gt; as it has no actions.
:classes (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[main,5,main]) completed. Took 0.0 secs.
:jar (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[main,5,main]) started.

&amp;gt; Task :jar
Task &lt;span class=&quot;code-quote&quot;&gt;&apos;:jar&apos;&lt;/span&gt; is not up-to-date because:
  No history is available.
:jar (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[main,5,main]) completed. Took 0.048 secs.
:assemble (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[main,5,main]) started.

&amp;gt; Task :assemble
Skipping task &lt;span class=&quot;code-quote&quot;&gt;&apos;:assemble&apos;&lt;/span&gt; as it has no actions.
:assemble (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[main,5,main]) completed. Took 0.0 secs.
:compileTestJava (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[main,5,main]) started.

&amp;gt; Task :compileTestJava NO-SOURCE
file or directory &lt;span class=&quot;code-quote&quot;&gt;&apos;/opt/example/src/test/java&apos;&lt;/span&gt;, not found
Skipping task &lt;span class=&quot;code-quote&quot;&gt;&apos;:compileTestJava&apos;&lt;/span&gt; as it has no source files and no previous output files.
:compileTestJava (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[main,5,main]) completed. Took 0.002 secs.
:compileTestGroovy (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[main,5,main]) started.

&amp;gt; Task :compileTestGroovy
Task &lt;span class=&quot;code-quote&quot;&gt;&apos;:compileTestGroovy&apos;&lt;/span&gt; is not up-to-date because:
  No history is available.
:compileTestGroovy (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[main,5,main]) completed. Took 1.011 secs.
:processTestResources (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[main,5,main]) started.

&amp;gt; Task :processTestResources NO-SOURCE
file or directory &lt;span class=&quot;code-quote&quot;&gt;&apos;/opt/example/src/test/resources&apos;&lt;/span&gt;, not found
Skipping task &lt;span class=&quot;code-quote&quot;&gt;&apos;:processTestResources&apos;&lt;/span&gt; as it has no source files and no previous output files.
:processTestResources (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[main,5,main]) completed. Took 0.001 secs.
:testClasses (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[main,5,main]) started.

&amp;gt; Task :testClasses
Skipping task &lt;span class=&quot;code-quote&quot;&gt;&apos;:testClasses&apos;&lt;/span&gt; as it has no actions.
:testClasses (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[main,5,main]) completed. Took 0.0 secs.
:test (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[main,5,main]) started.
Gradle Test Executor 2 started executing tests.
Gradle Test Executor 2 finished executing tests.

&amp;gt; Task :test FAILED
Task &lt;span class=&quot;code-quote&quot;&gt;&apos;:test&apos;&lt;/span&gt; is not up-to-date because:
  No history is available.
Starting process &lt;span class=&quot;code-quote&quot;&gt;&apos;Gradle Test Executor 2&apos;&lt;/span&gt;. Working directory: /opt/example Command: /usr/lib/jvm/java-11-openjdk-amd64/bin/java -Dorg.gradle.&lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; @/tmp/gradle-worker-classpath7953717775958581089txt -Dfile.encoding=UTF-8 -Duser.country -Duser.language=en -Duser.variant -ea worker.org.gradle.process.internal.worker.GradleWorkerMain &lt;span class=&quot;code-quote&quot;&gt;&apos;Gradle Test Executor 2&apos;&lt;/span&gt;
Successfully started process &lt;span class=&quot;code-quote&quot;&gt;&apos;Gradle Test Executor 2&apos;&lt;/span&gt;
WARNING: An illegal reflective access operation has occurred

com.example.SomeClassFailsTest_3 &amp;gt; testSomething STANDARD_OUT
    I am in the beforeWARNING: Illegal reflective access by org.codehaus.groovy.vmplugin.v7.Java7$1 (file:/root/.gradle/caches/modules-2/files-2.1/org.codehaus.groovy/groovy/2.5.3/b69558cc55b4679f6c401dfd1b54a8a5ffbd06b1/groovy-2.5.3.jar) to constructor java.lang.invoke.MethodHandles$Lookup(java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;,&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;)
WARNING: Please consider reporting &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; to the maintainers of org.codehaus.groovy.vmplugin.v7.Java7$1
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; release

    I am in the after

com.example.SomeClassFailsTest_3 &amp;gt; testSomething FAILED
    java.lang.IllegalAccessError: Update to &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; field com.example.SomeBadClass.$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$0 attempted from a different method (__$swapInit) than the initializer method &amp;lt;clinit&amp;gt;
        at com.example.SomeBadClass.__$swapInit(SomeBadClass.groovy)
        at com.example.SomeBadClass.&amp;lt;clinit&amp;gt;(SomeBadClass.groovy)
        at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
        at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
        at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)
        at org.codehaus.groovy.reflection.CachedConstructor.invoke(CachedConstructor.java:83)
        at org.codehaus.groovy.runtime.callsite.ConstructorSite$ConstructorSiteNoUnwrapNoCoerce.callConstructor(ConstructorSite.java:105)
        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallConstructor(CallSiteArray.java:59)
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callConstructor(AbstractCallSite.java:237)
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callConstructor(AbstractCallSite.java:241)
        at com.example.SomeClassFailsTest_3.testSomething(SomeClassFailsTest_3.groovy:37)

com.example.SomeClassSucceedsTest &amp;gt; testSomething STANDARD_OUT
    I am in the before
    I am being constructed com.example.SomeOKClass
    I am in the after

com.example.SomeClassFailsTest_1 &amp;gt; testSomething FAILED
    java.lang.IllegalAccessError: Update to &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; field com.example.SomeClassFailsTest_1.$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$0 attempted from a different method (__$swapInit) than the initializer method &amp;lt;clinit&amp;gt;
        at com.example.SomeClassFailsTest_1.__$swapInit(SomeClassFailsTest_1.groovy)
        at com.example.SomeClassFailsTest_1.&amp;lt;clinit&amp;gt;(SomeClassFailsTest_1.groovy)

com.example.SomeClassFailsTest_2 &amp;gt; testSomething FAILED
    java.lang.IllegalAccessError: Update to &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; field com.example.SomeClassFailsTest_2.$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$0 attempted from a different method (__$swapInit) than the initializer method &amp;lt;clinit&amp;gt;
4 tests completed, 3 failed

        at com.example.SomeClassFailsTest_2.__$swapInit(SomeClassFailsTest_2.groovy)
        at com.example.SomeClassFailsTest_2.&amp;lt;clinit&amp;gt;(SomeClassFailsTest_2.groovy)
Finished generating test XML results (0.022 secs) into: /opt/example/build/test-results/test
Generating HTML test report...
FAILURE: Build failed with an exception.
Finished generating test html results (0.034 secs) into: /opt/example/build/reports/tests/test
:test (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[main,5,main]) completed. Took 1.437 secs.


* What went wrong:
Execution failed &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; task &lt;span class=&quot;code-quote&quot;&gt;&apos;:test&apos;&lt;/span&gt;.
&amp;gt; There were failing tests. See the report at: file:&lt;span class=&quot;code-comment&quot;&gt;///opt/example/build/reports/tests/test/index.html
&lt;/span&gt;
* Try:
Run with --stacktrace option to get the stack trace. Run with --debug option to get more log output. Run with --scan to get full insights.

* Get more help at https:&lt;span class=&quot;code-comment&quot;&gt;//help.gradle.org
&lt;/span&gt;
BUILD FAILED in 12s4 actionable tasks: 4 executed
Stopped 1 worker daemon(s).
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16679165" author="paulk" created="Thu, 8 Nov 2018 01:47:28 +0000"  >&lt;p&gt;This is to do with the &lt;tt&gt;targetCompatibility&lt;/tt&gt; setting you have in your build file. Can you set that version to an earlier one while still running on JDK11? Also what happens when using primitive &apos;long&apos;?&lt;/p&gt;</comment>
                            <comment id="16680049" author="silentkevin" created="Thu, 8 Nov 2018 17:26:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulk&quot; class=&quot;user-hover&quot; rel=&quot;paulk&quot;&gt;paulk&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;When I set targetCompatibility to JavaVersion.VERSION_1_10 everything works fine while still running under JDK11 (both osx and linux/docker).&lt;/p&gt;

&lt;p&gt;Using the primitive long seems to have the same behavior:&lt;/p&gt;

&lt;p&gt;Doesn&apos;t work:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; doesntWork1 = 1_000L
        &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; doesntWork2 = 1_457_366_400_000L
        &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; doesntWork3 = 1_457_366_400_000
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Does work:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; doesWork1 = 1_000
        &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; doesWork2 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;(&lt;span class=&quot;code-quote&quot;&gt;&quot;1457366400000&quot;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Another note: if you notice creating the long from the string seems to work and could be a viable workaround for now (it worked in my actual code).&lt;/p&gt;</comment>
                            <comment id="16680411" author="paulk" created="Thu, 8 Nov 2018 21:26:16 +0000"  >&lt;p&gt;Your example works fine with 2.5.4-SNAPSHOT with the change I made. I&apos;ll close this off to include in the 2.5.4 release. I have more test coverage to add but I can create a separate issue for that.&lt;/p&gt;</comment>
                            <comment id="16680423" author="silentkevin" created="Thu, 8 Nov 2018 21:29:49 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulk&quot; class=&quot;user-hover&quot; rel=&quot;paulk&quot;&gt;paulk&lt;/a&gt;.  For reference can you point me to the commit that fixed this so I can learn what is going on here?&lt;/p&gt;</comment>
                            <comment id="16680470" author="paulk" created="Thu, 8 Nov 2018 22:06:25 +0000"  >&lt;p&gt;May not mean much without context:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/groovy/commit/7a41f0efd6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/7a41f0efd6&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12947273" name="example-for-groovy-long-bug.zip" size="301841" author="silentkevin" created="Wed, 7 Nov 2018 20:35:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s008p4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>