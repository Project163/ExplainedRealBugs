<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:20:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-7204] Static type checking and compilation fail when multiple generics in use</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-7204</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Consider the following interfaces:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;CrudRepository.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; f;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.Serializable;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; CrudRepository&amp;lt;T, S &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Serializable&amp;gt; {

	void delete(S arg);
	void delete(T arg);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;MyRepository.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; f;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; MyRepository &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; CrudRepository&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;&amp;gt; {
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The following implementation class:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;MyRepositoryImpl.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; f;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MyRepositoryImpl &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; MyRepository {

	@Override
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void delete(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; arg) {
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&quot;&lt;/span&gt;);
	}

	@Override
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void delete(&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt; arg) {
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;&quot;&lt;/span&gt;);
	}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And the following Groovy class:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;MyClass.groovy&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; f

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.CompileStatic;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.TypeChecked;

@TypeChecked
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MyClass {

	&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; MyRepository factory() {
		&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MyRepositoryImpl()
	}
	
	&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
		MyRepository r = factory()
		r.delete(&lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt;)
	}	
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Static type checking returns the following error:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;MyClass.groovy: 15: [Static type checking] - Cannot call f.MyRepository#delete(S) with arguments [java.lang.String]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The same applies if you use &lt;tt&gt;@CompileStatic&lt;/tt&gt; instead of &lt;tt&gt;@TypeChecked&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Note that if, In the previous code, you change the method &lt;tt&gt;main&lt;/tt&gt; by replacing:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;MyRepository r = factory()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;with: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;MyRepository r = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MyRepositoryImpl()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;compilation succeeds. However in real code this might not be possible (the &lt;tt&gt;MyRepository&lt;/tt&gt; instance may be injected and auto-generated, think of Spring Data for instance).&lt;/p&gt;

&lt;p&gt;The only workaround is (yet again...) to disable static type checking and static compilation.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12811464">GROOVY-7204</key>
            <summary>Static type checking and compilation fail when multiple generics in use</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daniel_sun">Daniel Sun</assignee>
                                    <reporter username="mauromol">Mauro Molinari</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Dec 2014 02:48:13 +0000</created>
                <updated>Fri, 11 Nov 2022 20:18:33 +0000</updated>
                            <resolved>Thu, 10 May 2018 08:02:18 +0000</resolved>
                                    <version>2.3.8</version>
                                    <fixVersion>3.0.0-alpha-3</fixVersion>
                    <fixVersion>2.5.0-rc-3</fixVersion>
                                    <component>Static compilation</component>
                    <component>Static Type Checker</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="16465359" author="daniel_sun" created="Mon, 7 May 2018 02:05:01 +0000"  >&lt;p&gt;There are many cases we should consider(See the PR#699). Here is the one of simplified cases:&lt;br/&gt;
&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.Serializable;

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Repository&amp;lt;T, S &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Serializable&amp;gt; {
    void delete(T arg) {}
    void delete(S arg) {} &lt;span class=&quot;code-comment&quot;&gt;// compilation passes &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the code is commented
&lt;/span&gt;}

@groovy.transform.TypeChecked
def test() {
    Repository&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;&amp;gt; r = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Repository&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;&amp;gt;()
    r.delete(&lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt;)
}

test()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16469179" author="githubbot" created="Wed, 9 May 2018 17:40:27 +0000"  >&lt;p&gt;GitHub user danielsun1106 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/699&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/699&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7204&quot; title=&quot;Static type checking and compilation fail when multiple generics in use&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7204&quot;&gt;&lt;del&gt;GROOVY-7204&lt;/del&gt;&lt;/a&gt;: Static type checking and compilation fail when multiple &#8230;&lt;/p&gt;

&lt;p&gt;    &#8230;generics in use&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/danielsun1106/groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/danielsun1106/groovy&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7204&quot; title=&quot;Static type checking and compilation fail when multiple generics in use&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7204&quot;&gt;&lt;del&gt;GROOVY-7204&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/699.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/699.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #699&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 1adb32dc73f13f07cc61124711d3bba92dd6ec82&lt;br/&gt;
Author: Daniel Sun &amp;lt;realbluesun@...&amp;gt;&lt;br/&gt;
Date:   2018-05-09T17:38:30Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7204&quot; title=&quot;Static type checking and compilation fail when multiple generics in use&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7204&quot;&gt;&lt;del&gt;GROOVY-7204&lt;/del&gt;&lt;/a&gt;: Static type checking and compilation fail when multiple generics in use&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16470028" author="githubbot" created="Thu, 10 May 2018 07:48:18 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/699&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/699&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16470038" author="daniel_sun" created="Thu, 10 May 2018 08:02:18 +0000"  >&lt;p&gt;Fixed by &lt;a href=&quot;https://github.com/apache/groovy/commit/6d5bc0db7a0e8c8c69911d7e4f064e9a27ba40a6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/6d5bc0db7a0e8c8c69911d7e4f064e9a27ba40a6&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/groovy/commit/e7766ffad4a70377a2e80b2a797261b0cb197ed4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/e7766ffad4a70377a2e80b2a797261b0cb197ed4&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/groovy/commit/62f5ce6ffe8d0dad30808944201723e02d3666fd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/62f5ce6ffe8d0dad30808944201723e02d3666fd&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/groovy/commit/795e2540c2b8d3d62594b5c91631427c708047f6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/795e2540c2b8d3d62594b5c91631427c708047f6&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;P.S. Feel free to revert them&lt;/p&gt;</comment>
                            <comment id="17632541" author="emilles" created="Fri, 11 Nov 2022 20:10:17 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Repository&amp;lt;T, S &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Serializable&amp;gt; {
  void delete(T arg) { &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; }
  void delete(S arg) { &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&apos;wrong method invoked&apos;&lt;/span&gt; }
}
@groovy.transform.CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;def&lt;/span&gt; test() {
  &lt;span class=&quot;code-keyword&quot;&gt;def&lt;/span&gt; r = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Repository&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;,&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;&amp;gt;()
  r.delete(&lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt;)
}
test()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This is a very interesting case.  I tried it in Java and it works as described: static selection of &lt;tt&gt;delete(T)&lt;/tt&gt; aka &lt;tt&gt;delete(String)&lt;/tt&gt;.  However the dynamic runtime selects &lt;tt&gt;delete(S)&lt;/tt&gt; because the erasure &lt;tt&gt;Serializable&lt;/tt&gt; is a closer match for &lt;tt&gt;String&lt;/tt&gt;.  I wonder if it would be better to have consistent behavior for SC and STC or to align SC with Java.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13500913">GROOVY-10820</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2c8r3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>