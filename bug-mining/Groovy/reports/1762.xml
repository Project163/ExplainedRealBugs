<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:25:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-4979] @ToString creates additional unneeded field</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-4979</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Using &lt;tt&gt;@ToString(includeNames = true)&lt;/tt&gt; inserts a field called &lt;tt&gt;$print$names&lt;/tt&gt; into the class. This field is neither transient nor static, which causes havoc when using XStream.&lt;/p&gt;

&lt;p&gt;Example XStream output:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[
  {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;amp;#12415; +()[]{}.mp3&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;size&quot;&lt;/span&gt;: 690037,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;outputSize&quot;&lt;/span&gt;: 0,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;format&quot;&lt;/span&gt;: {
      &lt;span class=&quot;code-quote&quot;&gt;&quot;codec&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;mp3&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;mp3&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;bitDepth&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;s16le&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;samplingRate&quot;&lt;/span&gt;: 44100,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;channels&quot;&lt;/span&gt;: 2,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;$print$names&quot;&lt;/span&gt;: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
    }
  }
]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I don&apos;t understand why the field is there in the first place since printNames is a compile-time thing.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12815679">GROOVY-4979</key>
            <summary>@ToString creates additional unneeded field</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="johann">Johann</reporter>
                        <labels>
                            <label>annotation</label>
                            <label>ast</label>
                            <label>toString</label>
                            <label>transform</label>
                    </labels>
                <created>Fri, 19 Aug 2011 14:36:02 +0000</created>
                <updated>Sun, 13 May 2012 03:30:06 +0000</updated>
                            <resolved>Sun, 19 Feb 2012 01:24:56 +0000</resolved>
                                    <version>1.8.0</version>
                                    <fixVersion>2.0-beta-3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14479665" author="paulk" created="Fri, 19 Aug 2011 23:07:53 +0000"  >&lt;p&gt;The reason for its existence is for legacy behavior of &lt;tt&gt;@Immutable&lt;/tt&gt; which calls through to &lt;tt&gt;@ToString&lt;/tt&gt;. With &lt;tt&gt;@Immutable&lt;/tt&gt; classes created using the named params constructor automatically print out with printNames true whereas ones created with a tuple constructor don&apos;t. Current thinking is that we may deprecate this behavior as we have had no feedback indicating that it is absolutely essential for some particular use case and it does add complexity.&lt;/p&gt;

&lt;p&gt;The field is marked &quot;synthetic&quot; and that is enough for some tools to ignore it - for XStream you would have to add an XStream annotation to ignore it or write your own convertor. CGLibConverter for example ignores synthetic fields I believe. This would be the workaround.&lt;/p&gt;

&lt;p&gt;You mention &quot;causes havoc&quot;. What exactly do you observe?&lt;/p&gt;</comment>
                            <comment id="14471591" author="johann" created="Sat, 20 Aug 2011 04:07:55 +0000"  >&lt;p&gt;How can I add an XStream annotation to a field generated during compiling? Or do you mean something like &lt;tt&gt;private transient boolean $print$names = true&lt;/tt&gt; would work?&lt;/p&gt;

&lt;p&gt;I agree, maybe havoc was the wrong word. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14479678" author="paulk" created="Tue, 23 Aug 2011 17:21:14 +0000"  >&lt;p&gt;I was hoping &lt;tt&gt;XStreamOmitField&lt;/tt&gt; could be placed on a class with a list of fields to omit but it isn&apos;t designed that way at all after checking. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14471722" author="roshandawrani" created="Tue, 13 Sep 2011 03:11:12 +0000"  >&lt;p&gt;Got interested in how to solve this problem, and documented a technique here as it could be useful to others as well: &lt;a href=&quot;http://roshandawrani.wordpress.com/2011/09/13/better-serialization-of-groovy-objects-using-xstream/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://roshandawrani.wordpress.com/2011/09/13/better-serialization-of-groovy-objects-using-xstream/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14471666" author="blackdrag" created="Tue, 13 Sep 2011 04:49:40 +0000"  >&lt;p&gt;What should we do about this issue then?&lt;/p&gt;</comment>
                            <comment id="14471601" author="roshandawrani" created="Tue, 13 Sep 2011 04:55:50 +0000"  >&lt;p&gt;I thought Paul&apos;s comment clarified that all Groovy can do is mark its internal fields &quot;synthetic&quot; and then let the libraries utilize that meta-data to ignore them (like CGLibConverter does). And now we have provided a XStream specific workaround as well.&lt;/p&gt;

&lt;p&gt;Let&apos;s still wait for a little while for Johann to share his views about it.&lt;/p&gt;</comment>
                            <comment id="14471787" author="paulk" created="Tue, 13 Sep 2011 19:22:10 +0000"  >&lt;p&gt;Yes, with Roshan&apos;s published workaround I would recommend closing the issue if Johann agrees. We might as a separate activity want to deprecate the use of &apos;$print$names&apos; but that is a separate issue.&lt;/p&gt;</comment>
                            <comment id="14471741" author="johann" created="Wed, 14 Sep 2011 13:50:49 +0000"  >&lt;p&gt;The issue I think about here is that of annotations creating non-static fields. People can say &quot;Groovy is slow&quot; and that&apos;s one (largely irrelevant) thing but if they say &quot;Groovy is slow and its memory usage is completely unpredictable and therefore, it cannot scale,&quot; that&apos;s unacceptable.&lt;/p&gt;

&lt;p&gt;In other words, if I didn&apos;t know it, I wouldn&apos;t expect Groovy to add fields to my classes. The fields it adds today are thankfully static so it&apos;s not really an issue but per-instance fields might be.&lt;/p&gt;</comment>
                            <comment id="14479760" author="paulk" created="Wed, 7 Dec 2011 04:04:53 +0000"  >&lt;p&gt;I&apos;m going to go ahead and close this issue. The internal $print$names field has been removed from Groovy 2.0 in any case. In general, annotations don&apos;t add fields (static or otherwise) without careful consideration. It would only be because such a field was required for the functionality of the annotation.&lt;/p&gt;</comment>
                            <comment id="14479813" author="paulk" created="Sat, 18 Feb 2012 21:43:29 +0000"  >&lt;p&gt;I just looked at the code changes I made for this for 2.0-beta-2 and they didn&apos;t seem to be committed - I presume I stuffed up the git command at this end. Re-applying shortly and I&apos;ll bump the fix version appropriately.&lt;/p&gt;</comment>
                            <comment id="14479826" author="paulk" created="Sun, 19 Feb 2012 01:24:56 +0000"  >&lt;p&gt;fixed glitch&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 40 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ctjr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>