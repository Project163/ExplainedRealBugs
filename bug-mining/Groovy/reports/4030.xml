<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:11:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-9882] STC: field or property with parameterized SAM-type and closure initializer</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-9882</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;In static mode, the compiler correctly coerces closures that match non-generic SAMs to their concrete type, but this breaks in the context of generics.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;Runnable&lt;/span&gt; doIt = { &lt;span class=&quot;code-quote&quot;&gt;&apos;123&apos;&lt;/span&gt; } &lt;span class=&quot;code-comment&quot;&gt;// works fine
&lt;/span&gt;Supplier&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; supplier = { &lt;span class=&quot;code-quote&quot;&gt;&apos;123&apos;&lt;/span&gt; } &lt;span class=&quot;code-comment&quot;&gt;// error&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The error is&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Cannot assign value of type groovy.lang.Closure &amp;lt;java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; to variable of type java.util.function.Supplier &amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Not sure if it&apos;s relevant that the generic in the second case is reported as bare &lt;tt&gt;&amp;lt;String&amp;gt;&lt;/tt&gt;. Replacing the type parameter with a literal &lt;tt&gt;&amp;lt;java.lang.String&amp;gt;&lt;/tt&gt; causes the error message to match but does not fix the error. Using &lt;tt&gt;&amp;lt;Function&amp;lt;String, String&amp;gt;&lt;/tt&gt; produces matching behavior, so it&apos;s not just a &quot;skip java.lang&quot;, and in the latter case the reported bound is the raw type &lt;tt&gt;Function&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13350614">GROOVY-9882</key>
            <summary>STC: field or property with parameterized SAM-type and closure initializer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="chrylis">Christopher Smith</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Jan 2021 08:15:36 +0000</created>
                <updated>Tue, 1 Mar 2022 21:25:41 +0000</updated>
                            <resolved>Tue, 2 Mar 2021 15:18:06 +0000</resolved>
                                    <version>2.5.14</version>
                    <version>3.0.7</version>
                    <version>4.0.0-alpha-2</version>
                                    <fixVersion>3.0.8</fixVersion>
                    <fixVersion>4.0.0-alpha-3</fixVersion>
                    <fixVersion>2.5.16</fixVersion>
                                    <component>Static Type Checker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17265317" author="emilles" created="Thu, 14 Jan 2021 21:25:31 +0000"  >&lt;p&gt;Can you provide some more context?  I run the following script with Groovy 3.0.7 (indy version) and it runs fine:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
@groovy.transform.CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;def&lt;/span&gt; test() {
    java.util.function.Supplier&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; supplier = { &lt;span class=&quot;code-quote&quot;&gt;&apos;123&apos;&lt;/span&gt; }
    supplier.get()
}
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; test() == &lt;span class=&quot;code-quote&quot;&gt;&apos;123&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17265404" author="chrylis" created="Thu, 14 Jan 2021 22:11:11 +0000"  >&lt;p&gt;Does it work if you drop the declarations into an explicit top-level class? I didn&apos;t include the &lt;tt&gt;class Groovy9882&lt;/tt&gt;, but just a bare class declaration around it was enough to trigger the errors for me.&lt;/p&gt;</comment>
                            <comment id="17265423" author="emilles" created="Thu, 14 Jan 2021 22:16:10 +0000"  >&lt;p&gt;Can you supply your complete example?&lt;/p&gt;</comment>
                            <comment id="17265669" author="chrylis" created="Fri, 15 Jan 2021 04:03:23 +0000"  >&lt;p&gt;This produces the error described above in both GRECLIPSE and groovyc (not using indy, by the way, just OOTB).&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; com.example

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.function.Supplier

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.CompileStatic

@CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Groovy9882 {
    &lt;span class=&quot;code-object&quot;&gt;Runnable&lt;/span&gt; doIt = { &lt;span class=&quot;code-quote&quot;&gt;&apos;123&apos;&lt;/span&gt; } &lt;span class=&quot;code-comment&quot;&gt;// works fine
&lt;/span&gt;    Supplier&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; supplier = { &lt;span class=&quot;code-quote&quot;&gt;&apos;123&apos;&lt;/span&gt; } &lt;span class=&quot;code-comment&quot;&gt;// error
&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17266100" author="emilles" created="Fri, 15 Jan 2021 15:16:36 +0000"  >&lt;p&gt;Oh, as a field/property initializer.  I will have a look and see why this fails but local variable case works.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 43 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0mb0w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>