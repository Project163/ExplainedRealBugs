<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:10:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-9707] TypeChecked: NoSuchMethodError: DefaultGroovyMethods.plus(java.lang.String, java.lang.Object)</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-9707</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Looking for advice around resolving a problem after upgrading Groovy from 2.5.9 to 3.0.5.&#160;&lt;/p&gt;

&lt;p&gt;Most of the @TypeChecked scripts start hitting NoSuchMethodError when concatenating two strings (&quot;a&quot; + &quot;b&quot;), which is resolved if @TypeChecked is removed... The removed method&apos;s deprecation java doc (in 2.4.7) says to &quot;Use the CharSequence version&quot;...&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.NoSuchMethodError: &apos;java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; org.codehaus.groovy.runtime.DefaultGroovyMethods.plus(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;May be I am missing something.. any advice will be appreciated...&lt;/p&gt;</description>
                <environment></environment>
        <key id="13325300">GROOVY-9707</key>
            <summary>TypeChecked: NoSuchMethodError: DefaultGroovyMethods.plus(java.lang.String, java.lang.Object)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="rivanov">Radoslav Ivanov</reporter>
                        <labels>
                    </labels>
                <created>Mon, 31 Aug 2020 09:09:40 +0000</created>
                <updated>Sun, 2 May 2021 09:16:38 +0000</updated>
                            <resolved>Tue, 2 Mar 2021 15:13:57 +0000</resolved>
                                    <version>3.0.5</version>
                                    <fixVersion>3.0.8</fixVersion>
                    <fixVersion>4.0.0-alpha-3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3600">1h</timespent>
                                <comments>
                            <comment id="17187612" author="paulk" created="Mon, 31 Aug 2020 09:53:20 +0000"  >&lt;p&gt;We&apos;d need to see a bit more how you are using it. You should normally now point to &lt;tt&gt;StringGroovyMethods#plus(CharSequence, Object)&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;I would not expect the &lt;tt&gt;NoSuchMethodError&lt;/tt&gt; unless you had a class compiled with &lt;tt&gt;@CompileStatic&lt;/tt&gt; from quite a few years ago on the classpath (an old plugin?) or perhaps a Java class compiled with an old Groovy and directly using the old DGM class. The &lt;tt&gt;StringGroovyMethods&lt;/tt&gt; version is about 8.5 years old.&lt;/p&gt;</comment>
                            <comment id="17187660" author="rivanov" created="Mon, 31 Aug 2020 11:31:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulk&quot; class=&quot;user-hover&quot; rel=&quot;paulk&quot;&gt;paulk&lt;/a&gt; thanks for your prompt response.&lt;/p&gt;

&lt;p&gt;Looks like we have @CompileStatic (I guess for security reasons, I will check that further) when creating CompileConfiguration and parsing a class:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
addCompilationCustomizers(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ASTTransformationCustomizer(CompileStatic.class));&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;What would be recommended in that case?&lt;/p&gt;</comment>
                            <comment id="17187668" author="paulk" created="Mon, 31 Aug 2020 11:51:38 +0000"  >&lt;p&gt;Leaving &lt;tt&gt;@CompileStatic&lt;/tt&gt; is fine but you must have some class compiled with an older Groovy on your classpath (I would guess 2.0.x or 2.1.x). Recompiling with a newer Groovy version should be all that you need to do. Or do you possibly have some old Groovy version duplicate in your classpath?&lt;/p&gt;</comment>
                            <comment id="17188953" author="rivanov" created="Wed, 2 Sep 2020 03:36:34 +0000"  >&lt;p&gt;Please find an example, which is reproducing the problem, and let me know what is wrong:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.lang.GroovyClassLoader;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.CompileStatic;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.codehaus.groovy.control.CompilerConfiguration;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.codehaus.groovy.control.customizers.ASTTransformationCustomizer;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.Arrays;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;NoSuchMethod {

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {

        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; script = &lt;span class=&quot;code-quote&quot;&gt;&quot;@groovy.transform.TypeChecked\n&quot;&lt;/span&gt; +
                        &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;NoSuchMethodTest {\n&quot;&lt;/span&gt; +
                        &lt;span class=&quot;code-quote&quot;&gt;&quot;    void invoke() {\n&quot;&lt;/span&gt; +
                        &lt;span class=&quot;code-quote&quot;&gt;&quot;         \&quot;&lt;/span&gt; a \&lt;span class=&quot;code-quote&quot;&gt;&quot; + \&quot;&lt;/span&gt; b \&lt;span class=&quot;code-quote&quot;&gt;&quot;\n&quot;&lt;/span&gt; +
                        &lt;span class=&quot;code-quote&quot;&gt;&quot;    }\n&quot;&lt;/span&gt; +
                        &lt;span class=&quot;code-quote&quot;&gt;&quot;}&quot;&lt;/span&gt;;

        CompilerConfiguration confiuration = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CompilerConfiguration();
        confiuration.addCompilationCustomizers(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ASTTransformationCustomizer(CompileStatic.class));

        GroovyClassLoader groovyClassLoader = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GroovyClassLoader(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.currentThread().getContextClassLoader(), confiuration);

        &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; scriptClass = groovyClassLoader.parseClass(script);

        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; scriptObject = scriptClass.getConstructor().newInstance();

        Arrays.stream(scriptClass.getMethods())
                .filter(m -&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;invoke&quot;&lt;/span&gt;.equals(m.getName()))
                .findFirst()
                .get()
                .invoke(scriptObject, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);

    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And that is the result:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.reflect.InvocationTargetException
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at NoSuchMethod.main(NoSuchMethod.java:32)
Caused by: java.lang.NoSuchMethodError: &lt;span class=&quot;code-quote&quot;&gt;&apos;java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; org.codehaus.groovy.runtime.DefaultGroovyMethods.plus(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;)&apos;&lt;/span&gt;
	at NoSuchMethodTest.invoke(Script_fd1940e6d51b34678c731fa8457de352.groovy:4)
	... 5 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17191231" author="paulk" created="Sun, 6 Sep 2020 09:34:04 +0000"  >&lt;p&gt;The following shorter Groovy script exhibits the problem:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.lang.GroovyClassLoader
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.codehaus.groovy.control.CompilerConfiguration
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.codehaus.groovy.control.customizers.ASTTransformationCustomizer

&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; script = &apos;&apos;&apos;@groovy.transform.TypeChecked
    &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;NoSuchMethodTest {
        void invoke() {
            &lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt; + &lt;span class=&quot;code-quote&quot;&gt;&apos;b&apos;&lt;/span&gt;
        }
    }
&apos;&apos;&apos;

def config = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CompilerConfiguration()
config.addCompilationCustomizers(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ASTTransformationCustomizer(CompileStatic))
def loader = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GroovyClassLoader(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.currentThread().contextClassLoader, config)
loader.parseClass(script).getConstructor().newInstance().invoke()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Removing the explicit &lt;tt&gt;TypeChecked&lt;/tt&gt; in the script (since it is not needed) or aligning it with what is added via compiler customization (to avoid the misalignment) fixes the problem but we shouldn&apos;t have this error even if the poor style is left as is.&lt;/p&gt;</comment>
                            <comment id="17191385" author="rivanov" created="Mon, 7 Sep 2020 00:01:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulk&quot; class=&quot;user-hover&quot; rel=&quot;paulk&quot;&gt;paulk&lt;/a&gt; yep, something like that.&lt;/p&gt;

&lt;p&gt;1) are you confirming that TypedChecked annotation is generating a bug in some cases? could there be a fix for that in the next patch version eventually?&lt;br/&gt;
 2) why TypedChecked is not needed any more?&lt;/p&gt;</comment>
                            <comment id="17191386" author="paulk" created="Mon, 7 Sep 2020 00:08:01 +0000"  >&lt;p&gt;Yes, there is a bug. Using &lt;tt&gt;CompileStatic&lt;/tt&gt; implies &lt;tt&gt;TypeChecked&lt;/tt&gt;, so you never need to have both.&lt;/p&gt;</comment>
                            <comment id="17191908" author="paulk" created="Tue, 8 Sep 2020 02:07:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rivanov&quot; class=&quot;user-hover&quot; rel=&quot;rivanov&quot;&gt;rivanov&lt;/a&gt; I unset the fix version. We use it to indicate the actual version in which a fix has been committed rather than any desired version.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 10 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0i7qw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>