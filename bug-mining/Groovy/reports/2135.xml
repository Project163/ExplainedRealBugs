<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:32:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-5802] Exception thrown in groovyConsole</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-5802</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Add the following snippet to an empty groovyConsole using Groovy 2.0.4:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; pkg1

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.TypeChecked


&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ExtendedList &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; ArrayList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;{    
}

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;SourceClass {
    @TypeChecked &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; ExtendedList createList() { 
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;; 
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Compile and then you get the following exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Exception thrown
Nov 16, 2012 9:21:19 AM org.codehaus.groovy.runtime.StackTraceUtils sanitize
WARNING: Sanitizing stacktrace:
java.lang.IllegalArgumentException: argument type mismatch
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
	at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
	at groovy.lang.MetaClassImpl.setProperty(MetaClassImpl.java:2402)
	at groovy.lang.MetaClassImpl.setProperty(MetaClassImpl.java:3330)
	at org.codehaus.groovy.runtime.InvokerHelper.setProperties(InvokerHelper.java:463)
	at org.codehaus.groovy.runtime.InvokerHelper.createScript(InvokerHelper.java:440)
	at groovy.lang.GroovyShell.parse(GroovyShell.java:625)
	at groovy.lang.GroovyShell.parse(GroovyShell.java:652)
	at groovy.lang.GroovyShell.parse(GroovyShell.java:643)
	at groovy.lang.GroovyShell$parse.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:45)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:116)
	at groovy.ui.Console$_compileScript_closure18.doCall(Console.groovy:997)
	at groovy.ui.Console$_compileScript_closure18.doCall(Console.groovy)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
	at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
	at org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:272)
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:904)
	at groovy.lang.Closure.call(Closure.java:415)
	at groovy.lang.Closure.call(Closure.java:409)
	at groovy.lang.Closure.run(Closure.java:493)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:680)

java.lang.IllegalArgumentException: argument type mismatch
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12816626">GROOVY-5802</key>
            <summary>Exception thrown in groovyConsole</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="werdna">Andrew Eisenberg</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Nov 2012 11:23:35 +0000</created>
                <updated>Wed, 10 Jul 2013 04:42:16 +0000</updated>
                            <resolved>Tue, 12 Mar 2013 19:22:18 +0000</resolved>
                                    <version>2.0.4</version>
                                    <fixVersion>2.2.0-beta-1</fixVersion>
                                    <component>Groovy Console</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14473518" author="werdna" created="Fri, 16 Nov 2012 11:27:16 +0000"  >&lt;p&gt;Originally found while exploring GRECLIPSE-1551.&lt;/p&gt;</comment>
                            <comment id="14473382" author="melix" created="Fri, 16 Nov 2012 11:37:18 +0000"  >&lt;p&gt;I&apos;m puzzled. &lt;tt&gt;@TypeChecked&lt;/tt&gt; is normally side-effect free and I cannot reproduce, neither with &lt;tt&gt;2.0.4&lt;/tt&gt; nor &lt;tt&gt;master&lt;/tt&gt;. Do you run the console using Eclipse?&lt;/p&gt;</comment>
                            <comment id="14473413" author="werdna" created="Fri, 16 Nov 2012 11:55:00 +0000"  >&lt;p&gt;No.  Not related to Eclipse.  It is run from the command line using a 2.0.4 distribution.  I am actually able to reproduce the exception using just this snippet:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ExtendedList &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; ArrayList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;{    
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But oddly, when I use this code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Other {}
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ExtendedList &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; ArrayList {    
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I get no exception.  What kind of information do you need from me?&lt;/p&gt;</comment>
                            <comment id="14473498" author="melix" created="Fri, 16 Nov 2012 11:58:11 +0000"  >&lt;p&gt;Weird. This could be a JDK version issue. What JDK are you using?&lt;/p&gt;</comment>
                            <comment id="14473453" author="werdna" created="Fri, 16 Nov 2012 11:59:59 +0000"  >&lt;blockquote&gt;
&lt;p&gt;$ java -version&lt;br/&gt;
java version &quot;1.6.0_37&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.6.0_37-b06-434-11M3909)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 20.12-b01-434, mixed mode)&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="14473368" author="melix" created="Fri, 16 Nov 2012 12:50:33 +0000"  >&lt;p&gt;Alright, I cannot reproduce even using the same JDK...&lt;/p&gt;</comment>
                            <comment id="14473519" author="werdna" created="Fri, 16 Nov 2012 13:06:11 +0000"  >&lt;p&gt;Very odd.  Are you on linux?  Maybe it is a macos thing.&lt;/p&gt;</comment>
                            <comment id="14473469" author="melix" created="Fri, 16 Nov 2012 13:08:10 +0000"  >&lt;p&gt;Yes I&apos;m on Linux. Maybe Guillaume could give it a try...&lt;/p&gt;</comment>
                            <comment id="14480056" author="paulk" created="Sat, 17 Nov 2012 01:05:13 +0000"  >&lt;p&gt;I couldn&apos;t replicate on Windows for master or 2.0.4.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Microsoft Windows [Version 6.1.7601]
java version &quot;1.7.0_10&quot;
Java(TM) SE Runtime Environment (build 1.7.0_10-b18)
Java HotSpot(TM) 64-Bit Server VM (build 23.6-b04, mixed mode)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14473650" author="pschumacher" created="Wed, 2 Jan 2013 08:07:59 +0000"  >&lt;p&gt;I can replicate this on Windows XP SP3 using Groovy 2.0.6 and JDK:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java version &lt;span class=&quot;code-quote&quot;&gt;&quot;1.7.0_09&quot;&lt;/span&gt;
Java(TM) SE &lt;span class=&quot;code-object&quot;&gt;Runtime&lt;/span&gt; Environment (build 1.7.0_09-b05)
Java HotSpot(TM) Client VM (build 23.5-b02, mixed mode, sharing)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14473840" author="melix" created="Wed, 9 Jan 2013 11:41:46 +0000"  >&lt;p&gt;Pascal, can you reproduce with master or 2.0.x ?&lt;/p&gt;</comment>
                            <comment id="14473693" author="pschumacher" created="Wed, 9 Jan 2013 14:23:46 +0000"  >&lt;p&gt;I can reproduce with master. I haven&apos;t tried with 2.0.x yet.&lt;/p&gt;</comment>
                            <comment id="14473871" author="melix" created="Wed, 9 Jan 2013 14:26:19 +0000"  >&lt;p&gt;Thanks. This one is a bit puzzling!&lt;/p&gt;</comment>
                            <comment id="14474024" author="jwagenleitner" created="Thu, 7 Feb 2013 13:38:06 +0000"  >&lt;p&gt;Seems like the problem occurs anytime the first statement in the Groovy Console is a class that extends from some List implementation.&lt;/p&gt;

&lt;p&gt;For example, the following will cause the exception if you paste into Groovy Console and then select &quot;Script &amp;gt; Compile&quot; (or Ctrl+L), at least for me on Groovy 2.1.0 and JDK 1.7 or 1.6:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Foo &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; ArrayList { }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Foo &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; ArrayList { }
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Bar { }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But does not occur in the following cases:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Foo &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; ArrayList { }
f = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Foo()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Bar { }
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Foo &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; ArrayList { }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Foo &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; HashMap { }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14480161" author="paulk" created="Thu, 7 Feb 2013 18:34:20 +0000"  >&lt;p&gt;It fails trying to set &quot;_outputTransforms&quot;. I still have to investigate but I presume the metaclass for list is a little special and is doing unexpected things.&lt;/p&gt;</comment>
                            <comment id="14480170" author="paulk" created="Thu, 7 Feb 2013 19:15:23 +0000"  >&lt;p&gt;Hmmm... setting the properties on the script instead of the wrapped class makes the problem go away and the build passes but I haven&apos;t analysed if it has any further impact:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Index: src/main/org/codehaus/groovy/runtime/InvokerHelper.java
===================================================================
--- src/main/org/codehaus/groovy/runtime/InvokerHelper.java	(revision 3e1261ccfdbb7c1253d8d2d6598a839c86d8cc48)
+++ src/main/org/codehaus/groovy/runtime/InvokerHelper.java	(revision )
@@ -436,7 +436,7 @@
                             &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
                         }
                     };
-                    setProperties(object, context.getVariables());
+                    setProperties(script, context.getVariables());
                 }
             } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
                 &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GroovyRuntimeException(
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14480186" author="paulk" created="Thu, 14 Feb 2013 19:45:49 +0000"  >&lt;p&gt;I have a pull request here:&lt;br/&gt;
&lt;a href=&quot;https://github.com/groovy/groovy-core/pull/140&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/groovy/groovy-core/pull/140&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It makes two changes:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;for the case of scripts consisting of a single class we wrap the class into a script and call setProperties which allows the class to be populated with values from the binding - I have made variables beginning with underscore now be set on the script not the wrapped object - we use &quot;_&lt;em&gt;&quot;, &quot;&lt;/em&gt;__&quot; and &quot;_outputTransforms&quot; as special variables in the context of a script&lt;/li&gt;
	&lt;li&gt;when trying to set properties into a list, we get an IllegalArgumentException for the case of a missing property having the value of a list when the class we are dealing with is itself a list - now that case is treated the same as other missing properties and ignored&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="14480223" author="paulk" created="Tue, 12 Mar 2013 19:22:18 +0000"  >&lt;p&gt;I have applied pull request #140 - just to master so far as there is a very minute chance of backwards compatibility issues for anyone relying on the current bug in InvokerHelper. If this is important for 2_1_X or earlier versions let me know.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 37 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2c60v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>