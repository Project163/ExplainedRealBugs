<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:20:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-10109] IllegalAccessError with package-access base class</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-10109</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;It seems that the Groovy compiler is running afoul of an interaction glitch &lt;a href=&quot;https://stackoverflow.com/q/36100552/1189885&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;similar to that which appeared around the introduction of JDK 9&lt;/a&gt;: when a public class extends a package-access base class that declares public methods, the static compiler permits calling &lt;tt&gt;Derived#inheritedPublicMethod()&lt;/tt&gt;, but an &lt;tt&gt;IllegalAccessError&lt;/tt&gt; is produced at runtime.&lt;/p&gt;

&lt;p&gt;Specifically, I&apos;m trying to use the (abandoned) Overpasser library, and I&apos;m tripping on &lt;a href=&quot;https://github.com/zsoltk/overpasser/blob/master/library/src/main/java/hu/supercluster/overpasser/library/query/OverpassFilterQuery.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;OverpassFilterQuery#end()&lt;/tt&gt;&lt;/a&gt;, which is the &quot;done with this section&quot; method of the DSL. Using it compiles fine but results in&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.IllegalAccessError: failed to access &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;hu.supercluster.overpasser.library.query.AbstractOverpassSubQuery from &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;com.example.ThingDoer$_run_closure6 (hu.supercluster.overpasser.library.query.AbstractOverpassSubQuery and com.example.ThingDoer$_run_closure6 are in unnamed module of loader &lt;span class=&quot;code-quote&quot;&gt;&apos;app&apos;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13380411">GROOVY-10109</key>
            <summary>IllegalAccessError with package-access base class</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="chrylis">Christopher Smith</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 May 2021 22:21:49 +0000</created>
                <updated>Sun, 30 Apr 2023 14:27:55 +0000</updated>
                            <resolved>Mon, 24 Oct 2022 20:58:05 +0000</resolved>
                                    <version>3.0.8</version>
                    <version>2.5.19</version>
                    <version>4.0.6</version>
                                    <fixVersion>3.0.14</fixVersion>
                    <fixVersion>2.5.20</fixVersion>
                    <fixVersion>4.0.7</fixVersion>
                                    <component>Compiler</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17620363" author="emilles" created="Wed, 19 Oct 2022 13:35:55 +0000"  >&lt;p&gt;Groovy 2.5.19 picked up this bug.  Our example using &lt;tt&gt;StringBuilder&lt;/tt&gt; and &lt;tt&gt;AbstractStringBuilder&lt;/tt&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
@groovy.transform.CompileStatic
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; test(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; string) {
  &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StringBuilder().with {
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; len = length()
    append(string)
    toString()
  }
}
print test(&lt;span class=&quot;code-quote&quot;&gt;&apos;x&apos;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&quot;IllegalAccessError: tried to access class java.lang.AbstractStringBuilder from class Scratch$_test_closure1&quot;&lt;/p&gt;

&lt;p&gt;In this case, &lt;tt&gt;StringBuilder#length()&lt;/tt&gt; is a synthetic, bridge method.  That is why this script started to exhibit the error in 2.5.19 &amp;#8211; see &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8638&quot; title=&quot;CompileStatic fails with Guava Multimap#asMap&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8638&quot;&gt;&lt;del&gt;GROOVY-8638&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-10120&quot; title=&quot;STC: Guava Multimap#asMap bridge method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-10120&quot;&gt;&lt;del&gt;GROOVY-10120&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17623262" author="emilles" created="Mon, 24 Oct 2022 16:02:05 +0000"  >&lt;p&gt;In the case of &lt;tt&gt;StringBuilder&lt;/tt&gt; a public bridge method was created by the Java compiler so there is an accessible method to invoke.  In the case of &lt;tt&gt;OverpassFilterQuery&lt;/tt&gt;, the method &lt;tt&gt;end()&lt;/tt&gt; is declared final in the parent class, so no such override can be created.&lt;/p&gt;

&lt;p&gt;Action items:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/zsoltk/overpasser&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Overpasser&lt;/a&gt; needs to remove final modifier from declaration of &lt;a href=&quot;https://github.com/zsoltk/overpasser/blob/master/library/src/main/java/hu/supercluster/overpasser/library/query/AbstractOverpassSubQuery.java#L16&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;end()&lt;/tt&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;Groovy type-checker should incorporate bridge checks in method selection&lt;/li&gt;
	&lt;li&gt;Groovy compiler should create such public bridge methods if it encounters a similar scenario:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
@PackageScope abstract &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;A {
  void proc() {}
}
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;C &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; A {
  &lt;span class=&quot;code-comment&quot;&gt;// public synthetic bridge void proc()
&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="17623415" author="emilles" created="Mon, 24 Oct 2022 20:58:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/commit/63515db24581d2c516f21b58e253bcce6d9d130d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/63515db24581d2c516f21b58e253bcce6d9d130d&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13418858">GROOVY-10429</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13441228">GROOVY-10594</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13534426">GROOVY-11035</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13381493">GROOVY-10120</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 3 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rda8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>