<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:19:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-10704] Random order of TraitBridge methods breaks cachability</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-10704</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;The build tools such as Gradle compares the class files and JARs containing them to determine if there is a need of recompiling the projects. Any randomness in generated classes breaks the cachablity.&lt;/p&gt;

&lt;p&gt;It seems to me that the order of methods generated from traits is not deterministic therefore compiling the same source code generates different class file. This can be observed for example with Grails entities.&lt;/p&gt;

&lt;p&gt;1. generate a fresh Grails project &lt;tt&gt;curl -O &lt;a href=&quot;https://start.grails.org/myapp.zip&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://start.grails.org/myapp.zip&lt;/a&gt;&lt;/tt&gt;&lt;br/&gt;
2. unzip the project&lt;br/&gt;
3. create a Groovy entity inside &lt;tt&gt;myapp/grails-app/domain/myapp/Person.groovy&lt;/tt&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Person {
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name
    &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; age
    Date lastVisit
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;4. compile the project &lt;tt&gt;./grailsw clean classes&lt;/tt&gt;&lt;br/&gt;
5. save the content of compiled class file in &lt;tt&gt;build/classes/groovy/main/myapp/Person.class&lt;/tt&gt;&lt;br/&gt;
6. recompile the project &lt;tt&gt;./grailsw clean classes&lt;/tt&gt;&lt;br/&gt;
7. compare the regenerated class file with the original one &lt;tt&gt;build/classes/groovy/main/myapp/Person.class&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;You may need to repeat the step 6 and 7 couple of times but eventually you will see there is a difference in the order of the methods annotated with &lt;tt&gt;@TraitBridge&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13047156/13047156_Sni%CC%81mek+obrazovky+2022-07-25+v%C2%A07.23.20.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13473170">GROOVY-10704</key>
            <summary>Random order of TraitBridge methods breaks cachability</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="musketyr">Vladim&#237;r Oran&#253;</reporter>
                        <labels>
                    </labels>
                <created>Mon, 25 Jul 2022 05:33:45 +0000</created>
                <updated>Fri, 10 Feb 2023 21:39:59 +0000</updated>
                            <resolved>Wed, 27 Jul 2022 05:14:43 +0000</resolved>
                                    <version>3.0.7</version>
                                    <fixVersion>4.0.5</fixVersion>
                    <fixVersion>3.0.13</fixVersion>
                                    <component>bytecode</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17570703" author="musketyr" created="Mon, 25 Jul 2022 07:09:57 +0000"  >&lt;p&gt;I would expect that this behavior is linked to &lt;tt&gt;GETTER_FIRST_COMPARATOR&lt;/tt&gt; from&#160;&lt;tt&gt;TraitComposer&lt;/tt&gt;&#160;class.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/groovy/groovy-core/blob/01309f9d4be34ddf93c4a9943b5a97843bff6181/src/main/org/codehaus/groovy/transform/trait/TraitComposer.java#L87-L92&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/groovy/groovy-core/blob/01309f9d4be34ddf93c4a9943b5a97843bff6181/src/main/org/codehaus/groovy/transform/trait/TraitComposer.java#L87-L92&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=melix&quot; class=&quot;user-hover&quot; rel=&quot;melix&quot;&gt;melix&lt;/a&gt; I guess it&apos;s too long time to remember why this change was introduced, right?&lt;/p&gt;</comment>
                            <comment id="17571222" author="musketyr" created="Tue, 26 Jul 2022 06:33:29 +0000"  >&lt;p&gt;I have created two PRs from which you can choose the preferred solution&lt;/p&gt;

&lt;p&gt;Persisting the order of method everywhere: &lt;a href=&quot;https://github.com/apache/groovy/pull/1752&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1752&lt;/a&gt;&lt;br/&gt;
Sorting the methods when generating the traits: &lt;a href=&quot;https://github.com/apache/groovy/pull/1753&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1753&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17571736" author="musketyr" created="Wed, 27 Jul 2022 05:19:26 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulk&quot; class=&quot;user-hover&quot; rel=&quot;paulk&quot;&gt;paulk&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13047156" name="Sni&#769;mek obrazovky 2022-07-25 v&#160;7.23.20.png" size="478390" author="musketyr" created="Mon, 25 Jul 2022 05:40:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 15 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z174uw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>