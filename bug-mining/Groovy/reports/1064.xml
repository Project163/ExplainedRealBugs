<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:13:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-3770] Curried closure does not refer get/setResolveStrategy or getDelegate to parent</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-3770</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;When you call setDelegate() on a curried closure, this acts to set the delegate of the underlying base closure.  However, even after the delegate has been changed in this way, getDelegate still returns the original delegate (typically the containing scope of the .curry() call).&lt;/p&gt;

&lt;p&gt;Also, CurriedClosure does not pass setResolveStrategy or getResolveStrategy to the base closure.  This can lead to unexpected behaviour:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;void hello(who) {
  println &lt;span class=&quot;code-quote&quot;&gt;&quot;Hello $who&quot;&lt;/span&gt;
}

def c = { x -&amp;gt;
  hello(x)
}

c.call(&lt;span class=&quot;code-quote&quot;&gt;&quot;Ian&quot;&lt;/span&gt;) &lt;span class=&quot;code-comment&quot;&gt;// prints &lt;span class=&quot;code-quote&quot;&gt;&quot;Hello Ian&quot;&lt;/span&gt;
&lt;/span&gt;
c.delegate = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
c.resolveStrategy = Closure.DELEGATE_ONLY
c.call(&lt;span class=&quot;code-quote&quot;&gt;&quot;Ian&quot;&lt;/span&gt;) &lt;span class=&quot;code-comment&quot;&gt;// MissingMethodException (as expected)&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Constrast this with:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;void hello(who) {
  println &lt;span class=&quot;code-quote&quot;&gt;&quot;Hello $who&quot;&lt;/span&gt;
}

def c = { x -&amp;gt;
  hello(x)
}

def d = c.curry(&lt;span class=&quot;code-quote&quot;&gt;&quot;Ian&quot;&lt;/span&gt;)
d.call() &lt;span class=&quot;code-comment&quot;&gt;// prints &lt;span class=&quot;code-quote&quot;&gt;&quot;Hello Ian&quot;&lt;/span&gt;
&lt;/span&gt;
d.delegate = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; d.delegate != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;code-comment&quot;&gt;// succeeds!
&lt;/span&gt;d.resolveStrategy = Closure.DELEGATE_ONLY
d.call() &lt;span class=&quot;code-comment&quot;&gt;// Also prints &lt;span class=&quot;code-quote&quot;&gt;&quot;Hello Ian&quot;&lt;/span&gt; - no MME&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Is this behaviour a design decision or is it something that can be changed?&lt;/p&gt;

&lt;p&gt;The particular case that drew my attention to this problem was using curried closures for actions in a Grails web flow, but any DSL that manipulates the resolveStrategy would be affected in a similar way.&lt;/p&gt;

&lt;p&gt;NB I&apos;ve tested this with groovy 1.6.3 (as supplied by grails 1.1.1) but CurriedClosure still looks the same in the latest svn head so I presume its behaviour is unchanged.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12818501">GROOVY-3770</key>
            <summary>Curried closure does not refer get/setResolveStrategy or getDelegate to parent</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="roshandawrani">Roshan Dawrani</assignee>
                                    <reporter username="button_boxer">Ian Roberts</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Sep 2009 04:12:49 +0000</created>
                <updated>Thu, 15 Oct 2009 17:15:34 +0000</updated>
                            <resolved>Mon, 21 Sep 2009 10:00:52 +0000</resolved>
                                    <version>1.6.3</version>
                                    <fixVersion>1.6.5</fixVersion>
                    <fixVersion>1.7-beta-2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14467755" author="roshandawrani" created="Mon, 21 Sep 2009 06:33:16 +0000"  >&lt;p&gt;Attaching a patch that is fixing the reported issue and is not breaking any existing groovy test.&lt;/p&gt;

&lt;p&gt;Anyone sees any other issues with it?&lt;/p&gt;</comment>
                            <comment id="14467745" author="guillaume" created="Mon, 21 Sep 2009 07:53:01 +0000"  >&lt;p&gt;Looks good to me.&lt;/p&gt;</comment>
                            <comment id="14467770" author="roshandawrani" created="Mon, 21 Sep 2009 10:00:52 +0000"  >&lt;p&gt;Fixed&lt;/p&gt;</comment>
                            <comment id="14467793" author="blackdrag" created="Mon, 21 Sep 2009 21:55:12 +0000"  >&lt;p&gt;shouldn&apos;t we think about cloning the closure we curry too? If the closure for example is used in different builder, then this most probably will cause quite big problems as it is now.&lt;/p&gt;</comment>
                            <comment id="14467746" author="roshandawrani" created="Mon, 21 Sep 2009 22:13:20 +0000"  >&lt;p&gt;Can that be a separate JIRA with a breaking test?&lt;/p&gt;

&lt;p&gt;So, you are saying that instead of changing the delegate and resolveStrategy on the primary uncurried closure, we make effects of such changes local to curried closure by cloning the uncurried closure - so that outside the curry context, it doesn&apos;t carry these side effects?&lt;/p&gt;</comment>
                            <comment id="14467788" author="guillaume" created="Tue, 22 Sep 2009 00:07:48 +0000"  >&lt;p&gt;Good point about cloning + making the change on the curried closure rather than touching the parent.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12722351" name="v16x_Patch.txt" size="912" author="roshandawrani" created="Mon, 21 Sep 2009 06:33:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 10 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2cgn3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>