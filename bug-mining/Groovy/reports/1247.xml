<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:15:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-4139] Assigning with empty String as hash key (i.e. a[&apos;&apos;]=t) yields StringIndexOutOfBoundsException</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-4139</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;This is a bizarre one - and I can&apos;t always get it to replicate; but where it fails, it ALWAYS fails.  (e.g. in my IDE, it works fine.  In a standalone Tomcat instance, it reliably seems to bomb on two different machines - even though the IDE is using the exact same version of Tomcat.  Seems OK when I run it on the command line - no failure.&lt;/p&gt;

&lt;p&gt;The line looks about like this :&lt;/p&gt;

&lt;p&gt;topics&lt;span class=&quot;error&quot;&gt;&amp;#91;id&amp;#93;&lt;/span&gt; = t&lt;br/&gt;
where id.getClass() is java.lang.String and id==&apos;&apos;&lt;br/&gt;
t is a complex class, with various fields.&lt;br/&gt;
i.e. topics&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;&amp;#39;&amp;#93;&lt;/span&gt; = t&lt;/p&gt;

&lt;p&gt;It&apos;s the &apos;&apos; that seems to throw it.  (other assignments using non-empty strings work fine).&lt;/p&gt;

&lt;p&gt;At the bottom is the stack trace, with the topics&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;&amp;#39;&amp;#93;&lt;/span&gt;=t line on the very bottom.  (it goes down further, and I will gladly provide it if needed, but I don&apos;t think that part is probably useful).&lt;/p&gt;

&lt;p&gt;A few other bizarre details: &lt;/p&gt;

&lt;p&gt;1) after this error occurs (if I catch it and keep going) &apos;topics&apos; will contain the key/value pair, but groovy will not be able to fetch them by key.  However, by casting &apos;topics&apos; as a map and going from java (or jsp) I can use topics.get(&quot;&quot;) to successfully retrieve the correct value.&lt;/p&gt;

&lt;p&gt;2) at this same point (after the error), java can see the entry by enumerating the values; but groovy cannot see the &apos;&apos; when it enumerates the keys (using keySet())&lt;/p&gt;

&lt;p&gt;My question is, regarding the below stack trace, why the hell is doing all this crap just to put a value into a hash?  I count 15 stack frames, most of which involve groovy classes.  Shouldn&apos;t it just be map.put(key,value) ???&lt;/p&gt;

&lt;p&gt;Whatever.  It bombed.&lt;/p&gt;

&lt;p&gt;If I find out more, I&apos;ll post it here.&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;from catalina.out&amp;#93;&lt;/span&gt;:------------------------------------&lt;/p&gt;

&lt;p&gt;id is &apos;&apos;&lt;br/&gt;
GroovyServlet Error:  script: &apos;/index.groovy&apos;:  Script processing failed.String index out of range: -1java.lang.String.substring(String.java:1938)&lt;br/&gt;
java.lang.StringIndexOutOfBoundsException: String index out of range: -1&lt;br/&gt;
        at java.lang.String.substring(String.java:1938)&lt;br/&gt;
        at java.lang.String.substring(String.java:1905)&lt;br/&gt;
        at org.codehaus.groovy.runtime.MetaClassHelper.capitalize(MetaClassHelper.java:453)&lt;br/&gt;
        at groovy.lang.MetaClassImpl.setProperty(MetaClassImpl.java:2312)&lt;br/&gt;
        at groovy.lang.MetaClassImpl.setProperty(MetaClassImpl.java:3306)&lt;br/&gt;
        at org.codehaus.groovy.runtime.InvokerHelper.setProperty(InvokerHelper.java:183)&lt;br/&gt;
        at org.codehaus.groovy.runtime.DefaultGroovyMethods.putAt(DefaultGroovyMethods.java:185)&lt;br/&gt;
        at org.codehaus.groovy.runtime.dgm$504.doMethodInvoke(Unknown Source)&lt;br/&gt;
        at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1058)&lt;br/&gt;
        at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:886)&lt;br/&gt;
        at org.codehaus.groovy.runtime.callsite.PojoMetaClassSite.call(PojoMetaClassSite.java:44)&lt;br/&gt;
        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:40)&lt;br/&gt;
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:117)&lt;br/&gt;
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:129)&lt;br/&gt;
        at kb.TopList$_refresh_closure1.doCall(TopList.groovy:58)&lt;/p&gt;
</description>
                <environment>SuSE Linux 10 / JDK 1.6 / Tomcat 6.0.20</environment>
        <key id="12815126">GROOVY-4139</key>
            <summary>Assigning with empty String as hash key (i.e. a[&apos;&apos;]=t) yields StringIndexOutOfBoundsException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="roshandawrani">Roshan Dawrani</assignee>
                                    <reporter username="mlzarathustra">miles zarathustra</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Apr 2010 03:17:08 +0000</created>
                <updated>Wed, 7 Apr 2010 23:45:20 +0000</updated>
                            <resolved>Fri, 2 Apr 2010 06:35:14 +0000</resolved>
                                    <version>1.7.1</version>
                                    <fixVersion>1.7.2</fixVersion>
                    <fixVersion>1.8-beta-1</fixVersion>
                                    <component>Groovlet / GSP</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14469186" author="roshandawrani" created="Fri, 2 Apr 2010 05:13:10 +0000"  >&lt;p&gt;Reproducible using&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;use (groovy.time.TimeCategory) {
    topics = [:]
    topics[&apos;&apos;] = 1
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 34 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2c3wn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>