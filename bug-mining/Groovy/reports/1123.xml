<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:14:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-3868] &quot;as&quot; and &quot;asType()&quot; produce different results when converting Strings to primitive types</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-3868</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Try it out:&lt;/p&gt;

&lt;p&gt;println &quot;0&quot; as int&lt;br/&gt;
println &quot;0&quot;.asType(int.class)&lt;/p&gt;

&lt;p&gt;I get this output:&lt;br/&gt;
0&lt;br/&gt;
48&lt;/p&gt;

&lt;p&gt;This happens for all the primitives: byte, short, int, long, float, double&lt;/p&gt;

&lt;p&gt;Using the non-primitive types yields the correct result, i.e.:&lt;br/&gt;
println &quot;0&quot; as Integer&lt;br/&gt;
println &quot;0&quot;.asType(Integer.class)&lt;/p&gt;

&lt;p&gt;gives:&lt;br/&gt;
0&lt;br/&gt;
0&lt;/p&gt;</description>
                <environment></environment>
        <key id="12814913">GROOVY-3868</key>
            <summary>&quot;as&quot; and &quot;asType()&quot; produce different results when converting Strings to primitive types</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="roshandawrani">Roshan Dawrani</assignee>
                                    <reporter username="paradoxbomb">Ethan Larson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Nov 2009 20:11:17 +0000</created>
                <updated>Wed, 9 Dec 2009 18:16:44 +0000</updated>
                            <resolved>Sat, 14 Nov 2009 06:52:15 +0000</resolved>
                                    <version>1.6.5</version>
                                    <fixVersion>1.6.6</fixVersion>
                    <fixVersion>1.7-rc-1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14468201" author="roshandawrani" created="Fri, 13 Nov 2009 11:24:28 +0000"  >&lt;p&gt;Just wanted to confirm, if all 4 cases below are expected to produce &quot;0&quot; as the output:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;println &lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt; as &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;
println &lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt; as &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;
println &lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;.asType(&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.class)
println &lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;.asType(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;.class) &lt;span class=&quot;code-comment&quot;&gt;// currently produces &lt;span class=&quot;code-quote&quot;&gt;&quot;48&quot;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Or, does anyone defend the output of the last case where it is producing &quot;48&quot; as the output?&lt;/p&gt;

&lt;p&gt;I ask because DefaultTypeTransformation#castToNumber(Object, Class) tries to do return the ascii value of the first character of the string passed - Integer.valueOf(c.charAt(0)).&lt;/p&gt;

&lt;p&gt;So the confusion is whether &quot;48&quot; is incorrect or &quot;0&quot;? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14468187" author="roshandawrani" created="Sat, 14 Nov 2009 03:53:16 +0000"  >&lt;p&gt;We can&apos;t solve this by making a general change that when class expressions are visited by ACG, all primitive types should be replaced by their wrapper types, right?&lt;/p&gt;

&lt;p&gt;What about making DGM#asType(String, Class) have the same conversion for int/Integer, long/Long, as below?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; asType(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; self, &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; c) {
.....
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (c == &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.class || c == &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.TYPE) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; toInteger(self);
.....
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Any suggestions?&lt;/p&gt;</comment>
                            <comment id="14468186" author="blackdrag" created="Sat, 14 Nov 2009 04:48:21 +0000"  >&lt;p&gt;that looks good&lt;/p&gt;</comment>
                            <comment id="14468111" author="roshandawrani" created="Sat, 14 Nov 2009 06:52:15 +0000"  >&lt;p&gt;Fixed&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 2 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2cst3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>