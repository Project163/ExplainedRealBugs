<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:21:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-6144] Confusing treatment of m[&apos;foo&apos;], m.get(&apos;foo&apos;), m.foo, m.getFoo() for Maps</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-6144</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;See the following example for some Map-related quirks that have bitten me a few times. I think it&apos;s crucial to iron out these inconsistencies in order to prevent the grooviness of maps from being a liability.&lt;/p&gt;

&lt;p&gt;I think the rules should be:&lt;/p&gt;

&lt;p&gt;1. subscript operator always uses map interface (for both get and set/put)&lt;br/&gt;
2. property access always prefers setFoo(bar) over set(&apos;foo&apos;, bar)&lt;br/&gt;
3. existence of setFoo() or getFoo() prevents use of map interface for property access, whether reading or writing (to avoid inconsistency between x = m.foo and m.foo = x)&lt;/p&gt;

&lt;p&gt;I guess that accessing m.&apos;foo&apos; should be equivalent to accessing m.foo, but maybe it should be equivalent to m&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;foo&amp;#39;&amp;#93;&lt;/span&gt;. I can see arguments for both.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
def m = [:]
&lt;span class=&quot;code-comment&quot;&gt;// 1. as expected, accessing a map by subscript
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; m[&lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt;] == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; m[&lt;span class=&quot;code-quote&quot;&gt;&apos;metaClass&apos;&lt;/span&gt;] == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;

&lt;span class=&quot;code-comment&quot;&gt;// 2. which of these should pass? I think the current behaviour is questionable:
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// getters should be preferred over map members &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; syntax.
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// I would expect these to pass instead: 
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; m.class == m.getClass()
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; m.metaClass == m.getMetaClass()
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; m.class == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;code-comment&quot;&gt;// WRONG
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; m.&lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt; == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;code-comment&quot;&gt;// WRONG (?)
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; m.metaClass == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;code-comment&quot;&gt;// WRONG
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; m.&lt;span class=&quot;code-quote&quot;&gt;&apos;metaClass&apos;&lt;/span&gt; == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;code-comment&quot;&gt;// WRONG (?)
&lt;/span&gt; 
&lt;span class=&quot;code-comment&quot;&gt;// 3. as expected, using map &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; method
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; m.get(&lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt;) == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;

&lt;span class=&quot;code-comment&quot;&gt;// 4. as expected, using getter
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; m.getClass() &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;

&lt;span class=&quot;code-comment&quot;&gt;// 5. as expected, accessing map by subscript
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; (m[&lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt;] = &lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt;) == &lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt;

&lt;span class=&quot;code-comment&quot;&gt;// 6. &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is unexpected, and it is inconsistent with (1) and (5). I would expect the following to pass, 
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// since we&apos;re using the subscript &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;:
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; (m[&lt;span class=&quot;code-quote&quot;&gt;&apos;metaClass&apos;&lt;/span&gt;] = &lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt;) == &lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; { m[&lt;span class=&quot;code-quote&quot;&gt;&apos;metaClass&apos;&lt;/span&gt;] = &lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt;; &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (ClassCastException e) { } &lt;span class=&quot;code-comment&quot;&gt;// WRONG
&lt;/span&gt;
&lt;span class=&quot;code-comment&quot;&gt;// 7. &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is consistent with (2), but I would argue that &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; should fail by the same logic: 
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// Maps have a getClass(), therefore it has a property &lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt;. 
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// Attempting to set the property should attempt to invoke setClass(), which doesn&apos;t exist.
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// It should therefore &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; a MissingMethodException &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; setClass()
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; (m.class = &lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt;) == &lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt; &lt;span class=&quot;code-comment&quot;&gt;// WRONG
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; (m.&lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt;) == &lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt; &lt;span class=&quot;code-comment&quot;&gt;// WRONG (?)
&lt;/span&gt;
&lt;span class=&quot;code-comment&quot;&gt;// 8. I think &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is doing the right thing - preferring the property over map semantics - but it is inconsistent with (2)
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; { m.metaClass = &lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt;; &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (ClassCastException e) { }
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; { m.&lt;span class=&quot;code-quote&quot;&gt;&apos;metaClass&apos;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt;; &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (ClassCastException e) { }

&lt;span class=&quot;code-comment&quot;&gt;// 9. as expected, looking &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; setter, none exists
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; { m.setClass(&lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt;); &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (MissingMethodException e) { }

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12816970">GROOVY-6144</key>
            <summary>Confusing treatment of m[&apos;foo&apos;], m.get(&apos;foo&apos;), m.foo, m.getFoo() for Maps</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="rattigan">Richard Rattigan</reporter>
                        <labels>
                            <label>breaking</label>
                    </labels>
                <created>Sat, 4 May 2013 13:47:00 +0000</created>
                <updated>Wed, 23 Aug 2023 09:11:22 +0000</updated>
                            <resolved>Tue, 25 Jan 2022 18:21:37 +0000</resolved>
                                                    <fixVersion>5.0.0-alpha-1</fixVersion>
                                    <component>groovy-runtime</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17476832" author="emilles" created="Sun, 16 Jan 2022 16:59:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/pull/1674&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1674&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Note that &quot;class&quot; and &quot;empty&quot; and &quot;metaClass&quot; still have special handling and are not routed to the accessors to avoid too much breakage.  If you want to be certain that you are using the accessor method, use method call syntax.&lt;/p&gt;</comment>
                            <comment id="17482026" author="emilles" created="Tue, 25 Jan 2022 18:21:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/commit/051d3cf3ef29a521137b9d6b71cb8097d077d46b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/051d3cf3ef29a521137b9d6b71cb8097d077d46b&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/groovy/commit/bbbff15b867157d8ed9f05207265a5ea80357ba6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/bbbff15b867157d8ed9f05207265a5ea80357ba6&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12817165">GROOVY-5001</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 42 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2cp0n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>