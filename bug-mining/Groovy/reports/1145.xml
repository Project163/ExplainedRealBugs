<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:14:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-3712] @Delegate produces invalid class file</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-3712</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;org/spockframework/Foob.groovy:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; org.spockframework

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Foob {
  def doit() { println &lt;span class=&quot;code-quote&quot;&gt;&quot;foob&quot;&lt;/span&gt; }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;org/spockframework/compiler/Barb.groovy:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; org.spockframework.compiler

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.spockframework.Foob

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Barb {
  @Delegate Foob foob

  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
    &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Barb().barb()
  }

  def barb() {
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.doit()
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When I run the main method, I get:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception in thread &quot;main&quot; java.lang.ClassFormatError: Repetitive method name/signature in class file org/spockframework/compiler/Barb
	at java.lang.ClassLoader.defineClass1(Native Method)
	at java.lang.ClassLoader.defineClass(ClassLoader.java:675)
	at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)
	at java.net.URLClassLoader.defineClass(URLClassLoader.java:260)
	at java.net.URLClassLoader.access$100(URLClassLoader.java:56)
	at java.net.URLClassLoader$1.run(URLClassLoader.java:195)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:316)
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:280)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:251)
	at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:374)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When I change &lt;tt&gt;this.doit()&lt;/tt&gt; to &lt;tt&gt;doit()&lt;/tt&gt;, I get:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke method doit() on null object
	at org.codehaus.groovy.runtime.NullObject.invokeMethod(NullObject.java:77)
	at org.codehaus.groovy.runtime.InvokerHelper.invokePogoMethod(InvokerHelper.java:751)
	at org.codehaus.groovy.runtime.InvokerHelper.invokeMethod(InvokerHelper.java:728)
	at org.codehaus.groovy.runtime.callsite.NullCallSite.call(NullCallSite.java:17)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:40)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:117)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:121)
	at org.spockframework.compiler.Barb.doit(Barb.groovy)
	at org.spockframework.compiler.Barb$doit.callCurrent(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:44)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:143)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:147)
	at org.spockframework.compiler.Barb.barb(Barb.groovy:28)
	at org.spockframework.compiler.Barb$barb.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:40)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:117)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:121)
	at org.spockframework.compiler.Barb.main(Barb.groovy:24)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>Mac OS 10.5.8&lt;br/&gt;
Java 1.5.0_19</environment>
        <key id="12814829">GROOVY-3712</key>
            <summary>@Delegate produces invalid class file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="roshandawrani">Roshan Dawrani</assignee>
                                    <reporter username="pniederw">Peter Niederwieser</reporter>
                        <labels>
                    </labels>
                <created>Sat, 29 Aug 2009 06:59:38 +0000</created>
                <updated>Wed, 7 Apr 2010 23:47:10 +0000</updated>
                            <resolved>Fri, 18 Dec 2009 11:02:17 +0000</resolved>
                                    <version>1.7-rc-2</version>
                                    <fixVersion>1.6.8</fixVersion>
                    <fixVersion>1.7.1</fixVersion>
                    <fixVersion>1.8-beta-1</fixVersion>
                                    <component>Compiler</component>
                        <due></due>
                            <votes>7</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14467454" author="pniederw" created="Sat, 29 Aug 2009 07:19:52 +0000"  >&lt;p&gt;Here is the class file that contains duplicated methods. I should also note that I used IDEA to compile it (#10666).&lt;/p&gt;</comment>
                            <comment id="14467594" author="roshandawrani" created="Sat, 29 Aug 2009 11:34:34 +0000"  >&lt;p&gt;I tried on trunk (on Eclipse) but did not get the ClassFormatError. I will try again with 1.6.4 and see if I am able to reproduce the error.&lt;/p&gt;

&lt;p&gt;2 small questions:&lt;/p&gt;

&lt;p&gt;1) In the attached Barb.class, I did not notice any duplicate methods (I checked the synthetic methods too). Is the right class file attached? Which method do you see duplicated?&lt;/p&gt;

&lt;p&gt;2) Regarding the NPE - isn&apos;t that correct because you have not set the delegate instance &quot;foob&quot; anywhere in your code?&lt;/p&gt;

&lt;p&gt;If I change&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
    &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Barb().barb()
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
    &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Barb(foob: &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Foob()).barb()
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;then, of-course the NPE goes away as now there a non-null delegate to delegate to.&lt;/p&gt;</comment>
                            <comment id="14467580" author="pniederw" created="Sat, 29 Aug 2009 11:47:53 +0000"  >&lt;p&gt;ad 1. The class file is correct. Examples of duplicated methods are &quot;super$1$wait&quot; (all overloads) and &quot;super$1$equals&quot;. I used jclasslib to check this.&lt;br/&gt;
ad 2. You are right, I just forgot to instantiate the delegate.&lt;/p&gt;</comment>
                            <comment id="14467545" author="roshandawrani" created="Sat, 29 Aug 2009 12:04:36 +0000"  >&lt;p&gt;Yes, I can also see those super#xxx methods duplicated. I overlooked them earlier looking more at doIt(), barb() and getters/setters, etc.&lt;/p&gt;

&lt;p&gt;So, just to make a note here that NPE is not the issue.&lt;/p&gt;

&lt;p&gt;I will try with 1.6.4 and see if I can reproduce the ClassFormatError issue with it.&lt;/p&gt;</comment>
                            <comment id="14467494" author="roshandawrani" created="Sun, 30 Aug 2009 21:23:34 +0000"  >&lt;p&gt;Tested with 1.6.4, 1.6.x and trunk but couldn&apos;t reproduce the duplicate methods (ClassFormatError) issue anywhere. With the delegate instantiated correctly,&lt;br/&gt;
both the calls doIt() and this.doIt() work just fine.&lt;/p&gt;

&lt;p&gt;Environment I have: java version &quot;1.5.0_04&quot; / windows XP / Eclipse 3.4&lt;/p&gt;</comment>
                            <comment id="14467712" author="aalmiray" created="Tue, 22 Sep 2009 11:45:42 +0000"  >&lt;p&gt;I&apos;ve found this issue as well, when creating a subclass of IGriffonApplication using a BaseGriffonApplication as @Delegate.&lt;br/&gt;
I get duplicated entries for super$xyz methods where xyz belong to the Object class. Inspecting the bytecode with javap -c yields that both the @Delegate&apos;s methods and the superclass methods are inserted in the class&apos; bytecode.&lt;/p&gt;

&lt;p&gt;Happens with 1.6.4, jvm 1.6.0_u16 on cmd line.&lt;/p&gt;</comment>
                            <comment id="14468431" author="aalmiray" created="Tue, 15 Dec 2009 20:03:13 +0000"  >&lt;p&gt;Bumping to Critical (I leave to the project despots to consider this a blocker).&lt;/p&gt;

&lt;p&gt;This issue causes quite the problem with Griffon. We use @Delegate to generate base implementations of IGriffonApplication. There are two basic implementations that work just fine (SwingApplication and GriffonApplet) when compiled within the Griffon build (uses joint compilation btw). But it fails catastrophically when invoked from outside.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;App {
    @Delegate &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; griffon.util.BaseGriffonApplication _base
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;groovyc -cp griffon-rt-0.3-SNAPSHOT.jar App.groovy&lt;br/&gt;
javap App | sort | less&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Compiled from &lt;span class=&quot;code-quote&quot;&gt;&quot;App.groovy&quot;&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;App &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; griffon.util.IGriffonApplication,groovy.lang.GroovyObject{
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; groovy.lang.MetaClass $getStaticMetaClass();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; App();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;$1$equals(java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;$1$equals(java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; griffon.util.IGriffonApplication getAppDelegate();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; groovy.lang.Binding getBindings();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; groovy.lang.MetaClass getMetaClass();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; groovy.util.ConfigObject getBuilderConfig();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; groovy.util.ConfigObject getConfig();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;$1$hashCode();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;$1$hashCode();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; getBuilderClass();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; getConfigClass();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; getEventsClass();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;$1$getClass();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;$1$getClass();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; createApplicationContainer();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; getEventsConfig();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; getProperty(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; invokeMethod(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;$1$clone();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;$1$clone();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;$dist$get$2(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;$dist$invoke$2(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;$1$toString();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;$1$toString();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; java.util.Map getAddonPrefixes();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; java.util.Map getAddons();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; java.util.Map getBuilders();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; java.util.Map getControllers();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; java.util.Map getGroups();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; java.util.Map getModels();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; java.util.Map getMvcGroups();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; java.util.Map getViews();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; java.util.Properties getApplicationProperties();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; java.lang.&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt; __timeStamp;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; java.lang.&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt; __timeStamp__239_neverHappen1260928491861;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void addApplicationEventListener(java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void addApplicationEventListener(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, groovy.lang.Closure);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void addMvcGroup(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, java.util.Map);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void event(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void event(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, java.util.List);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void initialize();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void ready();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void removeApplicationEventListener(java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void removeApplicationEventListener(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, groovy.lang.Closure);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setAddonPrefixes(java.util.Map);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setAddons(java.util.Map);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setApplicationProperties(java.util.Properties);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setBindings(groovy.lang.Binding);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setBuilderConfig(groovy.util.ConfigObject);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setBuilders(java.util.Map);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setConfig(groovy.util.ConfigObject);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setControllers(java.util.Map);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setEventsConfig(java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setGroups(java.util.Map);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setMetaClass(groovy.lang.MetaClass);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setModels(java.util.Map);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setMvcGroups(java.util.Map);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setProperty(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setViews(java.util.Map);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void shutdown();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void startup();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;$1$finalize();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;$1$finalize();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;$1$notify();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;$1$notify();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;$1$notifyAll();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;$1$notifyAll();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;$1$wait();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;$1$wait();
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;$1$wait(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;$1$wait(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;$1$wait(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;$1$wait(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;$dist$set$2(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; {};
    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; class$(java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Reproducible with groovy 1.7-rc-2&lt;/p&gt;</comment>
                            <comment id="14468417" author="roshandawrani" created="Tue, 15 Dec 2009 22:44:34 +0000"  >&lt;p&gt;Attaching a patch that does not generate duplicate MOP calls. &lt;/p&gt;

&lt;p&gt;I have also attached the &quot;javap App&quot; output after the patch to confirm that no duplicate MOP methods are being generated.&lt;/p&gt;</comment>
                            <comment id="14468445" author="aalmiray" created="Wed, 16 Dec 2009 01:26:15 +0000"  >&lt;p&gt;Attached patch solves the problem. DelegateASTTransformation failed to recognize synthetic methods and skip them. Alex proposed the solution and I was able to verify it on my environment.&lt;/p&gt;</comment>
                            <comment id="14468267" author="roshandawrani" created="Wed, 16 Dec 2009 01:43:43 +0000"  >&lt;p&gt;I also wanted to skip the synthetic methods there but I couldn&apos;t be sure whether skipping all the synthetic methods was safe enough or whether it would interfere with any groovy MC infrastructure. So I put the duplicate skipping logic at the place where it was affecting the least - just the synthetic MOP methods that were getting duplicated.&lt;/p&gt;

&lt;p&gt;Skipping duplicates in DelegateASTTransformation is certainly better, if it is safe. The smaller check there will be faster.&lt;/p&gt;</comment>
                            <comment id="14468304" author="blackdrag" created="Wed, 16 Dec 2009 03:05:58 +0000"  >&lt;p&gt;Just to get the problem fully... @Delegate adds all non public and non static methods to the class, including the MOP methods. Since they are special to the other class this makes obviously no sense. Ok... but why are they duplicated? That means that most probably Verifier adds those methods ignoring that they may already exist. I think we should add a check in Verifier that ensures the MOP methods are added only if the methods are not already there. If that is the case, then it should cause a compilation error. This way other transforms won&apos;t make the same mistake. Checking for duplicated methods in ACG is IMHO not such a good idea, because ACG should not do any checks, it should just output the bytecode. If there are dulpicated methods at this point, then it needs to be solved on an more early point. &lt;/p&gt;

&lt;p&gt;But I think the problem here is, that the MOP methods are added in ACG... only... if they are added by ACG, then why is it that @Delegate even sees them? That is maybe only if the other class is precompiled... is that possible?&lt;/p&gt;

&lt;p&gt;I assume, that then  a check in @Delegate alone would be good enough... but we should maybe think about adding an additional check for MOP methods in Verifier.&lt;/p&gt;</comment>
                            <comment id="14468406" author="roshandawrani" created="Wed, 16 Dec 2009 03:12:48 +0000"  >&lt;p&gt;Duplicate methods are not added by verifier - in fact those super$1$equals kind of methods are not added as MethodNode(s) to ClassNode at all. ACG directly writes them in the bytecode when it visits the class. That&apos;s why doing the check in Verifier is not possible - as duplicates don&apos;t even exist then. We can do the check only in ACG or if filtering all synthetic methods in DelegateASTTransformation is enough, then that probably is better.&lt;/p&gt;</comment>
                            <comment id="14468381" author="blackdrag" created="Wed, 16 Dec 2009 03:33:33 +0000"  >&lt;p&gt;what we can do in Verifier is to check if there are MOP methods in the class already. This prevents ACG from adding duplicated methods.&lt;/p&gt;</comment>
                            <comment id="14468338" author="roshandawrani" created="Wed, 16 Dec 2009 03:43:37 +0000"  >&lt;p&gt;No, we cannot do that. The duplicate methods get introduced only when ACG is reached. When we are in Verifier, there are no duplictae MOP methods anywhere.&lt;/p&gt;</comment>
                            <comment id="14468373" author="blackdrag" created="Wed, 16 Dec 2009 03:52:03 +0000"  >&lt;p&gt;you don&apos;t get me et I think... If we check in Verifier fi there are MOP methods already (not about duplicates!) and cause a compile error here, then ACG cannot add duplicated methods, because it won&apos;t reach ACG. If it goes through, then there are no MOP methods till ACG adds them, which means there will be no duplicaes either.&lt;/p&gt;</comment>
                            <comment id="14468354" author="roshandawrani" created="Wed, 16 Dec 2009 03:58:13 +0000"  >&lt;p&gt;Oh, I see - just check for their presence when we are in Verifier. Yes, that will also do. It is just a choice between a new compilation error (solution # 3) or avoiding duplicate MOP methods silently (solution # 1, 2). &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14468418" author="guillaume" created="Wed, 16 Dec 2009 14:43:53 +0000"  >&lt;p&gt;A bit late in the game to have it fixed in 1.7.0 final.&lt;br/&gt;
It&apos;ll have to wait for 1.7.1 &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14468447" author="roshandawrani" created="Thu, 17 Dec 2009 21:24:27 +0000"  >&lt;p&gt;Attaching a patch that has both Alex and Jochen&apos;s solutions (in my handwriting &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;).&lt;/p&gt;

&lt;p&gt;DelegateASTTransformation now skips adding synthetic methods.&lt;/p&gt;

&lt;p&gt;Verifier has a compile check as an additional safety measure and now rejects the class if it finds MOP methods to be already present. This should avoid other, future AST transformation to make the same mistake and suck synthetic MOP methods from other classes too.&lt;/p&gt;</comment>
                            <comment id="14468306" author="blackdrag" created="Fri, 18 Dec 2009 02:06:05 +0000"  >&lt;p&gt;Roshan, that patch looks very good.&lt;/p&gt;

&lt;p&gt;The issue has many watchers... I wonder why that is.&lt;/p&gt;</comment>
                            <comment id="14468446" author="pniederw" created="Fri, 18 Dec 2009 07:17:11 +0000"  >&lt;p&gt;I can confirm that the @Delegate usage in our codebase works fine with trunk.&lt;/p&gt;</comment>
                            <comment id="14468374" author="roshandawrani" created="Fri, 18 Dec 2009 11:02:17 +0000"  >&lt;p&gt;Fixed.&lt;/p&gt;</comment>
                            <comment id="14468420" author="pniederw" created="Fri, 18 Dec 2009 11:07:50 +0000"  >&lt;p&gt;Thanks Roshan. This won&apos;t go into 1.7.0?! I have yet to see a real-world usage of @Delegate that works without this fix.&lt;/p&gt;</comment>
                            <comment id="14468405" author="roshandawrani" created="Fri, 18 Dec 2009 11:11:26 +0000"  >&lt;p&gt;Guillaume said no for it to go in 1.7.0 in one of the comments here. &lt;/p&gt;

&lt;p&gt;So I did it on all the branches except that.&lt;/p&gt;</comment>
                            <comment id="14468448" author="blackdrag" created="Sat, 19 Dec 2009 05:58:56 +0000"  >&lt;p&gt;it should work fine if the class you delegate to was written in Java or if it is not precompiled Groovy... for example compiling both from source at the same time should not impose a problem&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12722486" name="18Dec_3712_17x_Patch.txt" size="2803" author="roshandawrani" created="Thu, 17 Dec 2009 21:24:27 +0000"/>
                            <attachment id="12722298" name="3712_17x_Patch.txt" size="2965" author="roshandawrani" created="Tue, 15 Dec 2009 22:44:34 +0000"/>
                            <attachment id="12722418" name="AfterPatch_JavapOutput.txt" size="3493" author="roshandawrani" created="Tue, 15 Dec 2009 22:44:34 +0000"/>
                            <attachment id="12721517" name="Barb.class" size="6832" author="pniederw" created="Sat, 29 Aug 2009 07:19:52 +0000"/>
                            <attachment id="12722299" name="groovy_3712.patch" size="931" author="aalmiray" created="Wed, 16 Dec 2009 01:26:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 49 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ces7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>