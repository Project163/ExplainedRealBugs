<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:28:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-5125] GroovyScriptEngine load from  jarURL fail</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-5125</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;GroovyScriptEngine loadScriptByName from jarURL, first time is ok, second time fail, GroovyScriptEngine attempts to load from a fileURL.&lt;br/&gt;
For fix this, change this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; path = conn.getURL().getPath();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; path = conn.getURL().toString();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12815793">GROOVY-5125</key>
            <summary>GroovyScriptEngine load from  jarURL fail</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blackdrag">Jochen Theodorou</assignee>
                                    <reporter username="wonder365">lwh</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Nov 2011 08:09:09 +0000</created>
                <updated>Tue, 11 Sep 2012 01:15:14 +0000</updated>
                            <resolved>Tue, 14 Aug 2012 06:51:54 +0000</resolved>
                                    <version>1.8.0</version>
                    <version>1.8.4</version>
                                    <fixVersion>1.8.8</fixVersion>
                    <fixVersion>2.0.2</fixVersion>
                                    <component>GroovyScriptEngine</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14479746" author="paulk" created="Tue, 20 Dec 2011 15:01:08 +0000"  >&lt;p&gt;I presume you are talking about &lt;tt&gt;GroovyScriptEngine#loadScriptByName&lt;/tt&gt; around about line 449?&lt;/p&gt;

&lt;p&gt;Can you describe in a little more detail an example that shows the failure?&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="14472228" author="wonder365" created="Wed, 21 Dec 2011 02:22:17 +0000"  >&lt;p&gt;for management, we put groovy scripts in jars. but when gse.loadScriptByName these scripts , failed.&lt;br/&gt;
the code like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;List&amp;lt;URL&amp;gt; GSEROOTS = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;URL&amp;gt;();
URL jarURL = GroovyScriptUtils.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getClassLoader().getResource(&lt;span class=&quot;code-quote&quot;&gt;&quot;com/abc/bcd/scripts/&quot;&lt;/span&gt;);
GSEROOTS.add(jarURL);
URL fileUrl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;c:\scripts&quot;&lt;/span&gt;).toURI().toURL();
GSEROOTS.add(fileUrl);
gse = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GroovyScriptEngine(urlroots);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;then:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;gse.loadScriptByName(&lt;span class=&quot;code-quote&quot;&gt;&apos;a.groovy&apos;&lt;/span&gt;) &lt;span class=&quot;code-comment&quot;&gt;//a.groovy in a jar &lt;span class=&quot;code-quote&quot;&gt;&quot;com/abc/bcd/scripts/&quot;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;this is ok, do this again:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;gse.loadScriptByName(&lt;span class=&quot;code-quote&quot;&gt;&apos;a.groovy&apos;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;failed, I traced the gse code, gse seek a.groovy in a path not in a jar. because &quot;String path = conn.getURL().getPath();&quot; only return a path, the protocol is lost.&lt;/p&gt;
</comment>
                            <comment id="14472510" author="blackdrag" created="Thu, 16 Feb 2012 07:39:46 +0000"  >&lt;p&gt;lwh, I was not able to reproduce the issue with your example. That your test can&apos;t be right is also shown by GSE not having a list based constructor. Could you please give a test case that fails at least under 1.8.6 and master?&lt;/p&gt;</comment>
                            <comment id="14472516" author="wonder365" created="Fri, 24 Feb 2012 23:02:04 +0000"  >&lt;p&gt;I&apos;ve tested in 1.8.6, it fails. the code is.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.lang.Binding;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.util.GroovyScriptEngine;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.util.ResourceException;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.util.ScriptException;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.net.MalformedURLException;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.net.URL;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;TestGSE {

	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; ResourceException,
			ScriptException, InterruptedException, MalformedURLException {

		URL jarURL = TestGSE.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getClassLoader().getResource(&lt;span class=&quot;code-quote&quot;&gt;&quot;com/test/&quot;&lt;/span&gt;);  &lt;span class=&quot;code-comment&quot;&gt;//test.groovy is in a jar. (like a test.zip contains com/test/test.groovy)
&lt;/span&gt;		URL[] urlroots = {jarURL};
		GroovyScriptEngine gse = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GroovyScriptEngine(urlroots);
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;roots=&quot;&lt;/span&gt;+jarURL);
		&lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is ok
&lt;/span&gt;		gse.run(&lt;span class=&quot;code-quote&quot;&gt;&quot;test.groovy&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Binding());
		&lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; will fail:  groovy.util.ResourceException: Cannot open URL: file:/C:/test.zip!/com/test/test.groovy
&lt;/span&gt;		gse.run(&lt;span class=&quot;code-quote&quot;&gt;&quot;test.groovy&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Binding());
	}
}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14472718" author="mmayer" created="Thu, 5 Apr 2012 10:02:40 +0000"  >&lt;p&gt;I have exactly the same problem in 1.8.5.&lt;/p&gt;</comment>
                            <comment id="14473143" author="blackdrag" created="Mon, 13 Aug 2012 10:29:49 +0000"  >&lt;p&gt;Iwh, sorry for getting back to this so late... The test case you gave works for me. The question now is why does it not for you? I can only assume that getPath() behaves different for you and me. Assuming this is the case toString() or toExternalForm() might be a better choice, yes.&lt;/p&gt;</comment>
                            <comment id="14473171" author="blackdrag" created="Tue, 14 Aug 2012 06:51:55 +0000"  >&lt;p&gt;I made that change as well as another similar change in SourceUnit. I hope this issue is then fixed&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 15 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2cs67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>