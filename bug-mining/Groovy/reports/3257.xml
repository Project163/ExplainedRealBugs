<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:56:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-8208] VariableExpressionTransformer does not set source position on property expressions</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-8208</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Two paths in VariableExpressionTransformer create PropertyExpression nodes to stand in for unresolved variable references. Neither case sets the exp source position onto the new node. Other paths through this method transfer position info.&lt;br/&gt;
The fix is simple:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Expression tryTransformDelegateToProperty(VariableExpression expr) {
        &lt;span class=&quot;code-comment&quot;&gt;// we need to transform variable expressions that go to a delegate
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// to a property expression, as ACG would loose the information
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// in processClassVariable before it reaches any makeCall, that could
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// handle it
&lt;/span&gt;        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; val = expr.getNodeMetaData(StaticTypesMarker.IMPLICIT_RECEIVER);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (val == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        VariableExpression implicitThis = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; VariableExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;&quot;&lt;/span&gt;);
        PropertyExpression pexp = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PropertyExpression(implicitThis, expr.getName());
        pexp.copyNodeMetaData(expr);
        pexp.setImplicitThis(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
        &lt;span class=&quot;code-comment&quot;&gt;// GRECLIPSE add
&lt;/span&gt;        pexp.getProperty().setSourcePosition(expr);
        &lt;span class=&quot;code-comment&quot;&gt;// GRECLIPSE end
&lt;/span&gt;        ClassNode owner = expr.getNodeMetaData(StaticCompilationMetadataKeys.PROPERTY_OWNER);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (owner != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            implicitThis.putNodeMetaData(StaticTypesMarker.INFERRED_TYPE, owner);
            implicitThis.putNodeMetaData(StaticTypesMarker.IMPLICIT_RECEIVER, val);
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; pexp;
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Expression tryTransformPrivateFieldAccess(VariableExpression expr) {
        FieldNode field = expr.getNodeMetaData(StaticTypesMarker.PV_FIELDS_ACCESS);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (field == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            field = expr.getNodeMetaData(StaticTypesMarker.PV_FIELDS_MUTATION);
        }
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (field != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-comment&quot;&gt;// access to a &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; field from a section of code that normally doesn&apos;t have access to it, like a
&lt;/span&gt;            &lt;span class=&quot;code-comment&quot;&gt;// closure or an &lt;span class=&quot;code-keyword&quot;&gt;inner&lt;/span&gt; class
&lt;/span&gt;            VariableExpression receiver = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; VariableExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;&quot;&lt;/span&gt;);
            PropertyExpression pexp = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PropertyExpression(
                    receiver,
                    expr.getName()
            );
            pexp.setImplicitThis(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
            &lt;span class=&quot;code-comment&quot;&gt;// GRECLIPSE add
&lt;/span&gt;            pexp.getProperty().setSourcePosition(expr);
            &lt;span class=&quot;code-comment&quot;&gt;// GRECLIPSE end
&lt;/span&gt;            &lt;span class=&quot;code-comment&quot;&gt;// put the receiver inferred type so that the &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;writer knows that it will have to call a bridge method
&lt;/span&gt;            receiver.putNodeMetaData(StaticTypesMarker.INFERRED_TYPE, field.getDeclaringClass());
            &lt;span class=&quot;code-comment&quot;&gt;// add inferred type information
&lt;/span&gt;            pexp.putNodeMetaData(StaticTypesMarker.INFERRED_TYPE, field.getOriginType());
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; pexp;
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The first method affects code like&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@groovy.transform.CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;E {
    D d = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; D()
    void doSomething() {
        d.with { &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt; and &lt;span class=&quot;code-quote&quot;&gt;&apos;bar&apos;&lt;/span&gt; VariableExpressions are xformed to PropertyExpressions
&lt;/span&gt;            foo = &lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt;
            bar = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; D()
            bar.foo = &lt;span class=&quot;code-quote&quot;&gt;&apos;bar&apos;&lt;/span&gt;
        }
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The second method affects code like&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@groovy.transform.CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;X {
  &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; id
  @Lazy &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; thing = { -&amp;gt;
    Directory.lookup(id) &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-quote&quot;&gt;&apos;id&apos;&lt;/span&gt; is transformed from a VariableExpression to a PropertyExpression
&lt;/span&gt;  }()
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13075192">GROOVY-8208</key>
            <summary>VariableExpressionTransformer does not set source position on property expressions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jwagenleitner">John Wagenleitner</assignee>
                                    <reporter username="emilles">Eric Milles</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 May 2017 15:09:25 +0000</created>
                <updated>Tue, 6 Mar 2018 23:25:35 +0000</updated>
                            <resolved>Sun, 13 Aug 2017 05:43:46 +0000</resolved>
                                                    <fixVersion>2.4.13</fixVersion>
                                    <component>xforms</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16124796" author="githubbot" created="Sun, 13 Aug 2017 04:44:41 +0000"  >&lt;p&gt;GitHub user jwagenleitner opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/581&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/581&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8208&quot; title=&quot;VariableExpressionTransformer does not set source position on property expressions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8208&quot;&gt;&lt;del&gt;GROOVY-8208&lt;/del&gt;&lt;/a&gt;: VariableExpressionTransformer does not set source positi&#8230;&lt;/p&gt;

&lt;p&gt;    &#8230;on on property expressions&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/jwagenleitner/groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jwagenleitner/groovy&lt;/a&gt; 8208-varxform&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/581.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/581.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #581&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 48ce82bce883ee8bcba777a831ad1ee98b70bf45&lt;br/&gt;
Author: John Wagenleitner &amp;lt;jwagenleitner@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-08-13T04:43:06Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8208&quot; title=&quot;VariableExpressionTransformer does not set source position on property expressions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8208&quot;&gt;&lt;del&gt;GROOVY-8208&lt;/del&gt;&lt;/a&gt;: VariableExpressionTransformer does not set source position on property expressions&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16124811" author="githubbot" created="Sun, 13 Aug 2017 05:31:01 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/581&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/581&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16124820" author="jwagenleitner" created="Sun, 13 Aug 2017 05:43:46 +0000"  >&lt;p&gt;Thanks for reporting the issue and providing the patch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 14 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3fiw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>