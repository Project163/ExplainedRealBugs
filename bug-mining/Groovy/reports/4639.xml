<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:21:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-11019] joint compilation:  public static final string does not compile</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-11019</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;I haven&apos;t managed to reproduce this in a simple example, but as I&apos;m upgrading my application from groovy 3 to 4 I have run into this situation.&#160; I have a class that defines a public static final string like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;PublicStaticString { 
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; NONE = &lt;span class=&quot;code-quote&quot;&gt;&quot;None&quot;&lt;/span&gt; 
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Its java stub fails to compile with:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;error: no suitable constructor found for String(Object)
public static final java.lang.String NONE = new java.lang.String((java.lang.Object)null);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I can remove the &quot;public&quot; from the declaration and the class/stub will compile, but now any java class that references that field will fail to compile with:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;error: NONE has private access in PublicStaticString
 &#160; &#160; &#160; &#160; selectNoneButton.setText(PublicStaticString.NONE);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The only way I know to fix this is to convert the java class to groovy.&lt;/p&gt;</description>
                <environment>OpenJDK Runtime Environment Temurin-11.0.16.1+1 (build 11.0.16.1+1)</environment>
        <key id="13532949">GROOVY-11019</key>
            <summary>joint compilation:  public static final string does not compile</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="jasongarrett">Jason Garrett</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Apr 2023 21:14:07 +0000</created>
                <updated>Wed, 23 Aug 2023 09:07:55 +0000</updated>
                            <resolved>Tue, 18 Apr 2023 19:00:47 +0000</resolved>
                                    <version>4.0.11</version>
                                    <fixVersion>3.0.18</fixVersion>
                    <fixVersion>4.0.12</fixVersion>
                                    <component>Stub generator / Joint compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17713718" author="emilles" created="Tue, 18 Apr 2023 18:59:57 +0000"  >&lt;p&gt;If your string field is initialized with an expression that the groovy compiler cannot convert to an inline constant (one single string literal) then it uses &quot;new java.lang.String(null)&quot; as the value so that javac cannot inline the value.  There is a bug where it casts null to java.lang.Object not java.lang.String.&lt;/p&gt;

&lt;p&gt;If you can find the initial expression that does this, you may be able to rewrite it so that it inlines properly.  If you move the initialization to a static block, it sets the value as &quot;null&quot; which is a bug too, so don&apos;t do that.&lt;/p&gt;

&lt;p&gt;I have a fix for both paths.&lt;/p&gt;</comment>
                            <comment id="17713720" author="emilles" created="Tue, 18 Apr 2023 19:00:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/commit/1df378cf833598d1c86f776a40c34faa98d6fabc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/1df378cf833598d1c86f776a40c34faa98d6fabc&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17713745" author="jasongarrett" created="Tue, 18 Apr 2023 19:50:11 +0000"  >&lt;p&gt;Thank you for the suggested workaround and for the fixes.&lt;/p&gt;

&lt;p&gt;I didn&apos;t encounter any joint compilation issues while upgrading my application from groovy 2.4.x to 3, but going from 3 to 4 I&apos;ve hit this and the existing issue that @Delegate doesn&apos;t work with joint compilation.&#160; Is groovy 4 creating more java stubs than previous versions did?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13518307">GROOVY-10902</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 30 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1hcbs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>