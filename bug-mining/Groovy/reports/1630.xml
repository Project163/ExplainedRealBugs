<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:23:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-5063] Cannot set &quot;-Werror&quot; javac option when using Groovyc ant task.</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-5063</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;When trying to configure the joint compiler to treat java compile warnings as errors I tried to set the following javac args:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;-Xlint:all&lt;/li&gt;
	&lt;li&gt;-Werror&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I found that -Xlint:all worked, but -Werror gave me an error saying that it was an unrecognised option. After some digging it seems that the joint compiler prefixes all options bound for javac with -F, which means the lint option was transformed to &quot;-FXlint:all&quot; but the -Werror option didn&apos;t get this same transformation. If I manually added the &quot;-F&quot; making it &quot;-FWerror&quot;&#160;everything worked as it should.&lt;/p&gt;

&lt;p&gt;I went looking for whereabouts this prefixing gets applied to try and determine why it wasn&apos;t happening to &quot;-Werror&quot; but couldn&apos;t find it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12815706">GROOVY-5063</key>
            <summary>Cannot set &quot;-Werror&quot; javac option when using Groovyc ant task.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="roshandawrani">Roshan Dawrani</assignee>
                                    <reporter username="ldaley">Luke Daley</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Oct 2011 05:46:19 +0000</created>
                <updated>Sat, 24 Dec 2011 03:08:05 +0000</updated>
                            <resolved>Mon, 28 Nov 2011 04:54:47 +0000</resolved>
                                                    <fixVersion>1.8.5</fixVersion>
                    <fixVersion>2.0-beta-2</fixVersion>
                                    <component>Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14471900" author="roshandawrani" created="Tue, 4 Oct 2011 12:39:48 +0000"  >&lt;p&gt;-X options become -FX in joint compilation here: &lt;a href=&quot;https://github.com/groovy/groovy-core/blob/GROOVY_1_9_BETA_3/src/main/org/codehaus/groovy/ant/Groovyc.java#L751&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/groovy/groovy-core/blob/GROOVY_1_9_BETA_3/src/main/org/codehaus/groovy/ant/Groovyc.java#L751&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14471936" author="roshandawrani" created="Tue, 4 Oct 2011 12:47:21 +0000"  >&lt;p&gt;javac -help doesn&apos;t show -W options. Is &quot;-Werror&quot; an officially supported option?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://weblogs.java.net/blog/tball/archive/2006/11/get_medieval_on.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://weblogs.java.net/blog/tball/archive/2006/11/get_medieval_on.html&lt;/a&gt; calls &apos;Werror&apos; a hidden option.&lt;/p&gt;

&lt;p&gt;Although, it should probably do no harm to allow it if Ant allows it.&lt;/p&gt;</comment>
                            <comment id="14471918" author="roshandawrani" created="Tue, 4 Oct 2011 12:54:51 +0000"  >&lt;p&gt;If no one has any objection, I can add &lt;tt&gt;jointOptions.add(optionStr.replace(&quot;-W&quot;, &quot;-FW&quot;));&lt;/tt&gt; to support -Werror in joint compilation.&lt;/p&gt;</comment>
                            <comment id="14471837" author="blackdrag" created="Tue, 4 Oct 2011 13:27:40 +0000"  >&lt;p&gt;what -W options do exist?&lt;/p&gt;</comment>
                            <comment id="14471950" author="roshandawrani" created="Tue, 4 Oct 2011 14:35:19 +0000"  >&lt;p&gt;&amp;gt;&amp;gt; what -W options do exist?&lt;/p&gt;

&lt;p&gt;Looking at JDK make files, I can see options like:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;-Wno-unused 
-Wno-parentheses
-Werror
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But why? Does the decision depend on what options are there? Or is it more like being a pass through to Javac like Ant, and not bother about the specifics of the options?&lt;/p&gt;</comment>
                            <comment id="14471965" author="blackdrag" created="Tue, 4 Oct 2011 14:54:07 +0000"  >&lt;p&gt;The amount was interesting to me to see if we do that for a general thing or for just a few options. -X is used with in many combinations, so it is really worth it. -W options is partly undocumented and kind of non-official. Also there exists a way to get this working.&lt;/p&gt;

&lt;p&gt;Roshan and Luke, you guys think this is really worth it?&lt;/p&gt;</comment>
                            <comment id="14471980" author="blackdrag" created="Tue, 4 Oct 2011 15:00:03 +0000"  >&lt;p&gt;One more thing to say... I actually think this kind of forwarding is a bit problematic for us. Adding -W as a forwarding means we cannot use it ourselves. I actually would have been against the -X version, but I missed that issue I think. The only reason I am considering this here at all, is because we have -X. Which makes it a bit a weak argumentation chain for me.&lt;/p&gt;</comment>
                            <comment id="14471884" author="ldaley" created="Tue, 4 Oct 2011 15:09:48 +0000"  >&lt;p&gt;Jochen: so are you proposing that we do nothing and require users to prefix the args themselves?&lt;/p&gt;</comment>
                            <comment id="14471811" author="blackdrag" created="Tue, 4 Oct 2011 15:14:51 +0000"  >&lt;p&gt;I am not yet proposing, I want more to see your opinions on this&lt;/p&gt;</comment>
                            <comment id="14471871" author="ldaley" created="Tue, 4 Oct 2011 15:18:57 +0000"  >&lt;p&gt;Anything short of being able to just specify the same args I would specify to javac is going to be confusing. It would just be implementation detail leaking through.&lt;/p&gt;</comment>
                            <comment id="14471901" author="blackdrag" created="Tue, 4 Oct 2011 15:49:15 +0000"  >&lt;p&gt;but two things speak against that argumentation:&lt;br/&gt;
(1) not all java compilers support that option&lt;br/&gt;
(2) you give this option to the groovy compiler in the first place, not the java compiler. Controlling the java compiler is supposed to work with -F and -J. &lt;/p&gt;</comment>
                            <comment id="14471937" author="ldaley" created="Tue, 4 Oct 2011 16:52:02 +0000"  >&lt;p&gt;Not sure that (1) is relevant, if the Java compiler doesn&apos;t support it should complain and not Groovy.&lt;/p&gt;

&lt;p&gt;As for (2), how so? If I nest a &amp;lt;javac&amp;gt; element I would expect as a user for it to be the same as a regular &amp;lt;javac&amp;gt; element. The fact that it behaves  differently because it is nested inside &amp;lt;groovyc&amp;gt; is not obvious at all (and shouldn&apos;t be).&lt;/p&gt;</comment>
                            <comment id="14471967" author="roshandawrani" created="Tue, 4 Oct 2011 21:21:23 +0000"  >&lt;p&gt;I also happen to think that Groovy should not block -W options in reaching javac from nested &amp;lt;javac&amp;gt; elements. &lt;/p&gt;

&lt;p&gt;It seems inconsistent that in joint compilation, a user can pass one option to javac as &amp;lt;compilerarg value=&quot;-Xlint:all&quot;&amp;gt;, and for other, he needs to do &amp;lt;compilerarg value=&quot;-FWerror&quot;&amp;gt;.&lt;/p&gt;</comment>
                            <comment id="14471883" author="blackdrag" created="Wed, 5 Oct 2011 06:35:57 +0000"  >&lt;p&gt;Sorry, guys, I did totally oversee that this is for the ant task, not for the command line. &lt;/p&gt;

&lt;p&gt;But then there should be actually a more general approach. Not only the -W and -X options should be given through, but everything. For example the -g variants. Only problem in that is we would have to check for an assignment, to then use -J, or -F if there is none. The Jikes compiler for example has +K options. Though I think the javac element we have does not support a jikes in fork mode.&lt;/p&gt;

&lt;p&gt;What do you think Roshan, Luke?&lt;/p&gt;</comment>
                            <comment id="14471946" author="ldaley" created="Tue, 18 Oct 2011 10:34:19 +0000"  >&lt;p&gt;I guess there&apos;s not many other options than just amending the list as new args are found.&lt;/p&gt;</comment>
                            <comment id="14472119" author="roshandawrani" created="Sun, 27 Nov 2011 06:06:30 +0000"  >&lt;p&gt;+1 to Luke&apos;s suggestion. Otherwise it is un-necessarily stuck holding even the options that we know about.&lt;/p&gt;</comment>
                            <comment id="14472085" author="blackdrag" created="Sun, 27 Nov 2011 09:14:06 +0000"  >&lt;p&gt;ok then.. Roshan, you want to take the issue?&lt;/p&gt;</comment>
                            <comment id="14472036" author="roshandawrani" created="Mon, 28 Nov 2011 04:54:47 +0000"  >&lt;p&gt;Done. In joint compilation, -W options are now passed to javac like -X options.&lt;/p&gt;</comment>
                            <comment id="14472202" author="ldaley" created="Tue, 6 Dec 2011 12:35:17 +0000"  >&lt;p&gt;Nice one Roshan, thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 51 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bp27:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>