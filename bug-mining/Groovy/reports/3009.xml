<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:48:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-7773] Enum constructor with value throws &quot;unexpected token&quot; error</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-7773</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;First time submitter to this JIRA so let me know if I&apos;ve specified anything incorrectly. I just upgraded from 2.4.4 to 2.4.6 and now declaring an enum constructor accepting a value as follows:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;UsStates.groovy&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;enum&lt;/span&gt; UsState {
  
  ID(&lt;span class=&quot;code-quote&quot;&gt;&apos;Idaho&apos;&lt;/span&gt;),
  IL(&lt;span class=&quot;code-quote&quot;&gt;&apos;Illinois&apos;&lt;/span&gt;),
  IN(&lt;span class=&quot;code-quote&quot;&gt;&apos;Indiana&apos;&lt;/span&gt;),
  
  UsState( &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; value ) { &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.value = value }

  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; value
  
  &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; toString() { &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; value }

}

println UsState.ID &lt;span class=&quot;code-comment&quot;&gt;//Idaho&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;throws the following compile error:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:
C:\svn_qa\jenkins_trunk\scripts\UsStates.groovy: 7: unexpected token: &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; @ line 7, column 29.
     UsState( &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; value ) { &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.value = value }
                               ^

1 error
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;No such error occurred in 2.4.4, nor does it happen in 2.4.5. Here are a few contrasting things that do seem to work in 2.4.6:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;UsStatesBoring.groovy&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;enum&lt;/span&gt; UsState {
  
  ID,
  IL,
  IN,

}

println UsState.ID &lt;span class=&quot;code-comment&quot;&gt;//ID&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;UsStatesNoEnum.groovy&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;UsState {
  
  UsState( &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; value ) { &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.value = value }

  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; value
  
  &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; toString() { &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; value }

}

&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; idaho = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; UsState(&lt;span class=&quot;code-quote&quot;&gt;&apos;Idaho&apos;&lt;/span&gt;)
println idaho &lt;span class=&quot;code-comment&quot;&gt;//Idaho&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Though this seems higher priority than Minor, I can work around it by simply downgrading to 2.4.5. I wish there was a Medium priority.&lt;/p&gt;</description>
                <environment>Windows 7 Professional&lt;br/&gt;
JDK 1.8.0_45</environment>
        <key id="12946219">GROOVY-7773</key>
            <summary>Enum constructor with value throws &quot;unexpected token&quot; error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="brianeray">Brian Ray</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Mar 2016 18:07:20 +0000</created>
                <updated>Mon, 28 Oct 2024 21:36:35 +0000</updated>
                            <resolved>Mon, 7 Mar 2016 06:49:54 +0000</resolved>
                                    <version>2.4.6</version>
                                    <fixVersion>2.4.7</fixVersion>
                                    <component>Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15176771" author="paulk" created="Thu, 3 Mar 2016 00:10:37 +0000"  >&lt;p&gt;We did do a slight tweak to the grammar for enums (851fd58). Perhaps it is related to that. If you remove the last comma (i.e. after IN) then your example works. So, I think the priority is fine at least until we look into it more and decide which variations we want to support. Java would require a semicolon after such a dangling comma but we don&apos;t support that either. I suspect though that this edge case wasn&apos;t noted as a breaking change, I&apos;ll mark it as such once I confirm.&lt;/p&gt;</comment>
                            <comment id="15176845" author="brianeray" created="Thu, 3 Mar 2016 00:46:48 +0000"  >&lt;p&gt;That change is a good suspect. Dangling commas are handy for adding new list items but deleting that comma is a much better workaround than downgrading. Thanks for looking into this.&lt;/p&gt;</comment>
                            <comment id="15177382" author="paulk" created="Thu, 3 Mar 2016 07:06:48 +0000"  >&lt;p&gt;Agreed, we would like to support the dangling case as we did previously but the change I mentioned earlier was made for a reason, so we just need to check whether we can support both. It could just be that the previous fix just needs a little bit of finessing or it could end up being a limitation because of Groovy&apos;s support for removing semicolons. I imagine as a minimum we could (and should) support having the semicolon straight after the dangling comma.&lt;/p&gt;</comment>
                            <comment id="15179307" author="paulk" created="Fri, 4 Mar 2016 04:39:25 +0000"  >&lt;p&gt;I have cloned this issue. Firstly, I think we should at least support Java&apos;s syntax in this case (to be covered by this issue) by allowing a semi-colon to close off the constant declarations (with or without the dangling comma - but optional for the non-dangling case). Secondly, in the cloned issue, we can explore whether it is possible to tweak the grammar to remove that need, i.e. make it optional for the dangling case too if possible.&lt;/p&gt;</comment>
                            <comment id="15179313" author="githubbot" created="Fri, 4 Mar 2016 04:44:45 +0000"  >&lt;p&gt;GitHub user paulk-asert opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/279&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/279&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7773&quot; title=&quot;Enum constructor with value throws &amp;quot;unexpected token&amp;quot; error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7773&quot;&gt;&lt;del&gt;GROOVY-7773&lt;/del&gt;&lt;/a&gt;: Enum constructor with value throws &quot;unexpected token&quot; er&#8230;&lt;/p&gt;

&lt;p&gt;    &#8230;ror (closes #279)&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/paulk-asert/groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/paulk-asert/groovy&lt;/a&gt; groovy7773&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/279.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/279.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #279&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 5b5a166c9e7cd89a7064bef369dbd96f599e5e7a&lt;br/&gt;
Author: paulk &amp;lt;paulk@asert.com.au&amp;gt;&lt;br/&gt;
Date:   2016-03-04T04:41:11Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7773&quot; title=&quot;Enum constructor with value throws &amp;quot;unexpected token&amp;quot; error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7773&quot;&gt;&lt;del&gt;GROOVY-7773&lt;/del&gt;&lt;/a&gt;: Enum constructor with value throws &quot;unexpected token&quot; error (closes #279)&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15180136" author="brianeray" created="Fri, 4 Mar 2016 16:55:23 +0000"  >&lt;p&gt;Thank you.&lt;/p&gt;</comment>
                            <comment id="15182654" author="githubbot" created="Mon, 7 Mar 2016 06:49:15 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/279&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/279&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15182656" author="paulk" created="Mon, 7 Mar 2016 06:49:54 +0000"  >&lt;p&gt;PR merged&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="12946878">GROOVY-7778</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>groovy</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 37 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2u1jb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>