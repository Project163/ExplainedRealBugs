<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:25:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-11581] byte array casted to array list when calling parent method from nested class</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-11581</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Foo {
&#160; &#160; void test() {
&#160; &#160; &#160; &#160; def byteArr = &lt;span class=&quot;code-quote&quot;&gt;&apos;FOO&apos;&lt;/span&gt;.bytes
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; NestedFoo().printClass byteArr
&#160; &#160; }
&#160; &#160;&#160;
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; bar(val, apple) {
&#160; &#160; &#160; &#160; println &lt;span class=&quot;code-quote&quot;&gt;&quot;bar class: ${val.getClass()}&quot;&lt;/span&gt; &lt;span class=&quot;code-comment&quot;&gt;// prints array list &#160; 
&lt;/span&gt;    }
&#160; &#160;&#160;
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; baz(val) {
&#160; &#160; &#160; &#160; println &lt;span class=&quot;code-quote&quot;&gt;&quot;baz class: ${val.getClass()}&quot;&lt;/span&gt; &lt;span class=&quot;code-comment&quot;&gt;// prints &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; array
&lt;/span&gt;&#160; &#160; }&#160; &#160; 

    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;NestedFoo {
&#160; &#160; &#160; &#160; def printClass(val) {
&#160; &#160; &#160; &#160; &#160; &#160; println &lt;span class=&quot;code-quote&quot;&gt;&quot;nestedFoo class: ${val.getClass()}&quot;&lt;/span&gt;
&#160; &#160; &#160; &#160; &#160; &#160; bar val, &apos;&apos;
&#160; &#160; &#160; &#160; &#160; &#160; baz val
&#160; &#160; &#160; &#160; }
&#160; &#160; }
}

&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Foo().test() &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Byte arrays are being casted to an array list when calling a parent method from a dynamically compiled nested class.&#160; In the code above the call to bar will cast the byte array to an array list. This does not happen in the call to baz. It seems like this only happens when the method called takes more than one arg. I was able to reproduce this in groovy 4.0.9, I have not tested this in earlier versions.&lt;/p&gt;

&lt;p&gt;To reproduce&lt;/p&gt;

&lt;p&gt;1) Nested class must be compiled dynamically&lt;br/&gt;
2) The parent method being called must take at least two arguments.&#160; It does not get casted when the method takes a single argument.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13611602">GROOVY-11581</key>
            <summary>byte array casted to array list when calling parent method from nested class</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="wl32">Wilson Leung</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Mar 2025 15:44:43 +0000</created>
                <updated>Wed, 4 Jun 2025 14:45:18 +0000</updated>
                            <resolved>Thu, 13 Mar 2025 02:15:16 +0000</resolved>
                                    <version>4.0.9</version>
                    <version>4.0.26</version>
                                    <fixVersion>5.0.0-beta-1</fixVersion>
                    <fixVersion>3.0.25</fixVersion>
                    <fixVersion>4.0.27</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17935036" author="emilles" created="Thu, 13 Mar 2025 01:27:58 +0000"  >&lt;p&gt;When invoking the call &quot;bar(val,&apos;&apos;)&quot; on the outer class, the arguments are packed into an array as part of the method missing MOP and are later spread back out.  The de-spread makes the conversion to a list: &lt;a href=&quot;https://github.com/apache/groovy/blob/a3c59394977fd9feb5220812f62b6fd0b60a0739/src/main/java/org/codehaus/groovy/runtime/ScriptBytecodeAdapter.java#L952&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/blob/a3c59394977fd9feb5220812f62b6fd0b60a0739/src/main/java/org/codehaus/groovy/runtime/ScriptBytecodeAdapter.java#L952&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17935042" author="emilles" created="Thu, 13 Mar 2025 02:15:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/commit/0359be36eb61a211ff3a18fbb177ddf4f7171970&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/0359be36eb61a211ff3a18fbb177ddf4f7171970&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12811914">GROOVY-4843</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13552210">GROOVY-11182</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13155102">GROOVY-8560</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>groovy</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            34 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1uqig:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>