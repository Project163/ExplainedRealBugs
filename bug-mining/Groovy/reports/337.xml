<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:58:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-1956] null&apos;s in lists are not handled correctly for unique(), sort()</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-1956</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;For this list:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;def x = [1, 2, 3, 1, 2, 3, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Both these throw NPE:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;println x.unique()
println x.sort()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12812466">GROOVY-1956</key>
            <summary>null&apos;s in lists are not handled correctly for unique(), sort()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="paulk">Paul King</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Jun 2007 05:57:23 +0000</created>
                <updated>Tue, 7 Apr 2015 19:06:55 +0000</updated>
                            <resolved>Thu, 28 Jun 2007 07:26:41 +0000</resolved>
                                    <version>1.1-beta-1</version>
                                    <fixVersion>1.1-beta-2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14462816" author="codex22" created="Thu, 28 Jun 2007 06:23:40 +0000"  >&lt;p&gt;In DefaultGroovyMethods.java, locate the inner class NumberComparator.&lt;/p&gt;

&lt;p&gt;Instead of &lt;br/&gt;
        public int compare(Object o1, Object o2) {&lt;br/&gt;
            if (o1 instanceof Number &amp;amp;&amp;amp; o2 instanceof Number) {&lt;br/&gt;
               ...&lt;/p&gt;

&lt;p&gt;check for null first:&lt;/p&gt;

&lt;p&gt;        public int compare(Object o1, Object o2) {&lt;br/&gt;
            if (o1 == null) &lt;/p&gt;
{
              return o2==null?0:-1;
            }
&lt;p&gt; else if (o2 == null) &lt;/p&gt;
{
              return 1;
            }
&lt;p&gt; else if (o1 instanceof Number &amp;amp;&amp;amp; o2 instanceof Number) {&lt;br/&gt;
               ...&lt;/p&gt;

&lt;p&gt;This solves the NPE problem.&lt;/p&gt;</comment>
                            <comment id="14462860" author="codex22" created="Thu, 28 Jun 2007 06:27:45 +0000"  >&lt;p&gt;Just discovered the code tag ...&lt;/p&gt;

&lt;p&gt;In DefaultGroovyMethods.java, locate the inner class NumberComparator.&lt;/p&gt;

&lt;p&gt;Instead of&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; compare(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o1, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o2) {
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (o1 &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; &amp;amp;&amp;amp; o2 &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;) {
    ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;check for null first:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; compare(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o1, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o2) {
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (o1 == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) { 
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; o2==&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;?0:-1; 
  } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (o2 == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 1; 
  } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (o1 &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; &amp;amp;&amp;amp; o2 &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;) {
    ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This solves the NPE problem.&lt;/p&gt;</comment>
                            <comment id="14477389" author="paulk" created="Thu, 28 Jun 2007 07:26:41 +0000"  >&lt;p&gt;Patch and tests added.&lt;/p&gt;</comment>
                            <comment id="14469390" author="samu0030" created="Mon, 17 May 2010 10:39:22 +0000"  >&lt;p&gt;I believe this is broken again.  I had a list that held objects whose properties (which I&apos;m sorting on) could be null and received a NPE.  ie-&amp;gt;&lt;br/&gt;
class test{&lt;br/&gt;
   String name&lt;br/&gt;
   Integer sortValue&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;My collection would contain 10 test objects, some with a sortValue, some without.  When I sort by this value, I get an NPE at the first null value.  Shouldn&apos;t the nulls float to the end?&lt;/p&gt;</comment>
                            <comment id="14469420" author="blackdrag" created="Mon, 17 May 2010 10:51:33 +0000"  >&lt;p&gt;null is the smallest value, so having it at the beginning is ok I think&lt;/p&gt;</comment>
                            <comment id="14469476" author="paulk" created="Mon, 17 May 2010 18:11:55 +0000"  >&lt;p&gt;There is a little bit more we could do to get rid of a NPE here. I&apos;ll investigate.&lt;/p&gt;</comment>
                            <comment id="14479153" author="paulk" created="Mon, 17 May 2010 18:47:59 +0000"  >&lt;p&gt;An additional edge case is now covered and will appear in 1.7.3.&lt;/p&gt;</comment>
                            <comment id="14479136" author="paulk" created="Mon, 17 May 2010 18:51:37 +0000"  >&lt;p&gt;Workaround in the meantime is to use the spaceship operator version, i.e. instead of:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;list.sort{ it?.sortValue }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;use:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;list.sort{ a, b -&amp;gt; a?.sortValue &amp;lt;=&amp;gt; b?.sortValue }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 28 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2br33:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>