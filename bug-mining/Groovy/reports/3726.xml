<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:05:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-9413] Groovy 3.0 seem to have a problem with &lt;?&gt;, can&apos;t handle it in Java interface method when called from Groovy.</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-9413</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;With the following code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; APSBusRouter {
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; send( @NotNull &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; target, @NotNull Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; message, @Optional @Nullable APSHandler&amp;lt;APSResult&amp;lt;?&amp;gt;&amp;gt; resultHandler );
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
void send( @NotNull &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; target, @NotNull Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; message,
               @Optional @Nullable APSHandler&amp;lt;APSResult&amp;lt;?&amp;gt;&amp;gt; resultHandler ) {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ( validateBaseMessageStructure( message ) ) {
        &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; valid = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.routerTracker.withAllAvailableServices() { APSBusRouter apsBusRouter, @NotUsed &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[] args -&amp;gt;
     ---&amp;gt;   &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ( apsBusRouter.send( target.trim(), message, resultHandler ) ) {
                    valid = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
                }
        }
        ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;There will be a compilation error:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Error:(236, 22) Groovyc: [Static type checking] - Cannot call se.natusoft.osgi.aps.api.messaging.APSBusRouter#send(java.lang.String, java.util.Map &amp;lt;java.lang.String, java.lang.Object&amp;gt;, se.natusoft.osgi.aps.types.APSHandler &amp;lt;se.natusoft.osgi.aps.types.APSResult&amp;gt;) with arguments [java.lang.String, java.util.Map &amp;lt;String, Object&amp;gt;, se.natusoft.osgi.aps.types.APSHandler &amp;lt;APSResult&amp;gt;]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This because the resultHandler in the interface &lt;tt&gt;APSBusRouter&lt;/tt&gt;  for send method  is declared identical to the argument of same name in method, and this argument is just passed on. Here the Groovy compiler cannot find the send method called.&lt;/p&gt;

&lt;p&gt;But if the APSBusRouter interface is changed  and the &amp;lt;?&amp;gt; part after APSResult is removed (making IDEA complain and correctly so !!) then this compiles perfectly! This even though the passed resultHandler in this case is not identical to the APSBusRouter.send(...) declaration of the resultHandler argument. &lt;/p&gt;

&lt;p&gt;Example on github:&lt;br/&gt;
APSBusRouter.java: &lt;a href=&quot;https://github.com/tombensve/APS/blob/4a0e5d56d61d218e55c1eb3b5edec1c6d44a40ba/APS-APIs/src/main/java/se/natusoft/osgi/aps/api/messaging/APSBusRouter.java#L106&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tombensve/APS/blob/4a0e5d56d61d218e55c1eb3b5edec1c6d44a40ba/APS-APIs/src/main/java/se/natusoft/osgi/aps/api/messaging/APSBusRouter.java#L106&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;APSBusProvider.groovy:  &lt;a href=&quot;https://github.com/tombensve/APS/blob/4a0e5d56d61d218e55c1eb3b5edec1c6d44a40ba/APS-Libraries/APSCoreLib/src/main/groovy/se/natusoft/osgi/aps/core/service/APSBusProvider.groovy#L227&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tombensve/APS/blob/4a0e5d56d61d218e55c1eb3b5edec1c6d44a40ba/APS-Libraries/APSCoreLib/src/main/groovy/se/natusoft/osgi/aps/core/service/APSBusProvider.groovy#L227&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Both of these links are on Branch &quot;Groovy-3_0_1-Issue&quot;. Ignore the annotations in methods, they are purely for documentation purpose, and yes there is clearly a bug in this method &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, but it has nothing to do with this issue.&lt;/p&gt;

&lt;p&gt;The workaround for this is to remove the &amp;lt;?&amp;gt; part in APSBusRouter.send(...) method declaration.&lt;/p&gt;

&lt;p&gt;Personally I&apos;m starting to think that maybe it is the &quot;&amp;lt;?&amp;gt;&quot; expression Groovy has a problem with. The interface is in this case done in Java! But then again in APSBusProvider.groovy it does allow this in the send(...) method declaration. Maybe Groovy sees &amp;lt;?&amp;gt; differently than Java ? That is, Groovy code accepts this, but it does not mean the same thing as in Java ?&lt;/p&gt;

</description>
                <environment>OSX Crapalina</environment>
        <key id="13286281">GROOVY-9413</key>
            <summary>Groovy 3.0 seem to have a problem with &lt;?&gt;, can&apos;t handle it in Java interface method when called from Groovy.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="tombensve">Tommy Svensson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 Feb 2020 17:09:26 +0000</created>
                <updated>Thu, 10 Mar 2022 22:06:54 +0000</updated>
                            <resolved>Tue, 3 Mar 2020 02:07:45 +0000</resolved>
                                    <version>3.0.1</version>
                                    <fixVersion>3.0.2</fixVersion>
                    <fixVersion>2.5.17</fixVersion>
                                    <component>Compiler</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17040614" author="paulk" created="Thu, 20 Feb 2020 04:11:15 +0000"  >&lt;p&gt;added code tags&lt;/p&gt;</comment>
                            <comment id="17040615" author="paulk" created="Thu, 20 Feb 2020 04:18:12 +0000"  >&lt;p&gt;We have been improving the static compiler to pick up more errors but some edge cases have slipped through. This looks like one of them. Hopefully we can fix soon.&lt;/p&gt;</comment>
                            <comment id="17049739" author="emilles" created="Mon, 2 Mar 2020 23:14:01 +0000"  >&lt;p&gt;One note, you do not need to add &lt;tt&gt;@CompileStatic&lt;/tt&gt; and &lt;tt&gt;@TypeChecked&lt;/tt&gt; to your Groovy classes.  Static compilation includes static type checking.&lt;/p&gt;</comment>
                            <comment id="17050247" author="tombensve" created="Tue, 3 Mar 2020 14:22:48 +0000"  >&lt;p&gt;&quot;One note, you do not need to add @CompileStatic and @TypeChecked to your Groovy classes. Static compilation includes static type checking.&quot;&lt;/p&gt;

&lt;p&gt;That actually makes sense! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. Thanks for pointing it out!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13432610">GROOVY-10525</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 37 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0bnww:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>