<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:18:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-4742] Documentation for Collection.sort(Comparator comparator) is wrong</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-4742</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;The documentation for &lt;tt&gt;Collection.sort(Comparator comparator)&lt;/tt&gt; at &lt;a href=&quot;http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html#sort%28java.util.Comparator%29&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html#sort%28java.util.Comparator%29&lt;/a&gt; states&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Sorts the Collection using the given comparator. The elements are sorted into a new list, and the existing collection is unchanged. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;However, it does seem to mutate the original list &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12815579">GROOVY-4742</key>
            <summary>Documentation for Collection.sort(Comparator comparator) is wrong</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="tim_yates">Tim Yates</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Mar 2011 10:55:11 +0000</created>
                <updated>Fri, 12 Apr 2013 16:55:16 +0000</updated>
                            <resolved>Wed, 20 Mar 2013 15:09:11 +0000</resolved>
                                                    <fixVersion>1.8.1</fixVersion>
                                    <component>groovy-jdk</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14470987" author="donal" created="Tue, 22 Mar 2011 11:23:25 +0000"  >&lt;p&gt;Here&apos;s a test case&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ISO3LangComparator &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Comparator&amp;lt;Locale&amp;gt; {

    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; compare(Locale locale1, Locale locale2) {
        locale1.ISO3Language &amp;lt;=&amp;gt; locale2.ISO3Language
    }
}

List&amp;lt;Locale&amp;gt; locales = [Locale.FRENCH, Locale.ENGLISH]
def sortedLocales = locales.sort(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ISO3LangComparator())

&lt;span class=&quot;code-comment&quot;&gt;// This assertion fails
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; locales[0] == frenchLocale
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14479480" author="paulk" created="Tue, 22 Mar 2011 20:24:32 +0000"  >&lt;p&gt;Potential patch attached. Fixes Javadoc but also proposes a few new overloaded methods which allow a boolean to be provided to turn off any mutating.&lt;/p&gt;</comment>
                            <comment id="14479474" author="paulk" created="Tue, 22 Mar 2011 20:27:07 +0000"  >&lt;p&gt;Same additions could be made for the Array versions of the methods. There is also the possibility of using a Map instead of the boolean to allow &lt;tt&gt;sort(mutate: true)&lt;/tt&gt; etc.&lt;/p&gt;</comment>
                            <comment id="14471114" author="tim_yates" created="Wed, 23 Mar 2011 03:46:49 +0000"  >&lt;p&gt;Trying to come up with a patch for &lt;tt&gt;unique&lt;/tt&gt; as well&lt;/p&gt;</comment>
                            <comment id="14471083" author="tim_yates" created="Wed, 23 Mar 2011 05:54:28 +0000"  >&lt;p&gt;Attached a patch which hopefully should add the &lt;tt&gt;mutate&lt;/tt&gt; flag to &lt;tt&gt;Collection.unique&lt;/tt&gt; as well&lt;/p&gt;

&lt;p&gt;Included test cases which should (I think) cover the new code.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;Iterator.unique&lt;/tt&gt; does not require the flag, as it wraps the &lt;tt&gt;Iterator&lt;/tt&gt; wth &lt;tt&gt;asList&lt;/tt&gt; before the unique call is made, so the original &lt;tt&gt;Collection&lt;/tt&gt; should remain untouched.&lt;/p&gt;

&lt;p&gt;Hope it&apos;s ok!&lt;/p&gt;</comment>
                            <comment id="14471043" author="tim_yates" created="Wed, 23 Mar 2011 08:09:11 +0000"  >&lt;p&gt;Sorry, I had &lt;tt&gt;unique(Collection, Closure, boolean)&lt;/tt&gt; rather than &lt;tt&gt;unique(Collection, boolean, Closure)&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Doing it boolean first means you can have:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;def list = [ 1, 2, 3, 2, 1 ]
list.unique( &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; ) { it % 2 }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The other way round is clunky and non-ideomatic&lt;/p&gt;</comment>
                            <comment id="14479488" author="paulk" created="Thu, 24 Mar 2011 07:39:48 +0000"  >&lt;p&gt;Extended sort patch to cover arrays plus merged in unique patch from Tim. Only considered the boolean variant as I believe the map variant could be autogenerated at a later point.&lt;/p&gt;

&lt;p&gt;Now we can consider whether we should extend this approach for:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;addAll, removeAll, retainAll (which are modify semantics by default)
	&lt;ul&gt;
		&lt;li&gt;for these I think we can refer to their copy semantics counterparts in the javadoc and vice versa (i.e. plus and findAll/grep)&lt;/li&gt;
		&lt;li&gt;in addition we will need a plus variant that takes an index&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;reverse (which is copy semantics by default in DGM but modify in Collections)
	&lt;ul&gt;
		&lt;li&gt;another boolean would allow both semantics in this case&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14479483" author="paulk" created="Sat, 26 Mar 2011 00:09:32 +0000"  >&lt;p&gt;Also worth pointing out that for legacy reasons, we have the following slightly annoying discrepancy (I believe created for ease of implementation rather than a specific requirement):&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;sort(T[] self, Closure closure) has copy semantics&lt;/li&gt;
	&lt;li&gt;all other sort variants (without the boolean mutate flag) have modify semantics&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The boolean variants allow this discrepancy to be worked around but I am wondering whether this should be considered a bug and all variations should be aligned.&lt;/p&gt;</comment>
                            <comment id="14479481" author="paulk" created="Sat, 26 Mar 2011 05:19:47 +0000"  >&lt;p&gt;There is also another consideration which arises that is related to earlier points. For methods which imply ordering and have modify semantics (such as &lt;tt&gt;sort&lt;/tt&gt;), we currently perform them in place for lists (which by their nature are also ordered) but convert to a new list (indirectly giving copy semantics) for non-list collections, e.g. &lt;tt&gt;Set&lt;/tt&gt;. However there are non-list collection types which are ordered, e.g. &lt;tt&gt;LinkedHashSet&lt;/tt&gt;. Perhaps we should retain the modify semantics for such types. I.e. instead of using &lt;tt&gt;asList&lt;/tt&gt; we should make a new &lt;tt&gt;asOrderedCollection&lt;/tt&gt; method which catered for things like &lt;tt&gt;LinkedHashSet&lt;/tt&gt; and possibly &lt;tt&gt;Queue&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="14471031" author="paulk" created="Sat, 26 Mar 2011 05:33:22 +0000"  >&lt;p&gt;A version of above patch has been applied in trunk for review. It doesn&apos;t attempt to fix the sort discrepancy or cater for &lt;tt&gt;LinkedHashSet&lt;/tt&gt; etc. &lt;/p&gt;</comment>
                            <comment id="14479522" author="paulk" created="Wed, 13 Apr 2011 03:16:52 +0000"  >&lt;p&gt;The javadoc parts from trunk (and two non-contentious methods) have been merged into the 1.8 branches.&lt;/p&gt;

&lt;p&gt;The variants with the mutate boolean (covering sort and unique) are still pending finalization and potential merging for 1.8.1.&lt;/p&gt;</comment>
                            <comment id="14473451" author="pschumacher" created="Sun, 11 Nov 2012 06:02:16 +0000"  >&lt;p&gt;Any updates on this?&lt;/p&gt;</comment>
                            <comment id="14474233" author="pschumacher" created="Wed, 20 Mar 2013 15:09:11 +0000"  >&lt;p&gt;I took a look at the doc and it seems like the unique and sort methods with boolean mutate were added with 1.8.1. Therefore I&apos;m closing this issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12722790" name="groovy4742_mutationImprovements.patch" size="28770" author="paulk" created="Thu, 24 Mar 2011 07:39:48 +0000"/>
                            <attachment id="12722742" name="groovy4742_sortImprovements.patch" size="10702" author="paulk" created="Tue, 22 Mar 2011 20:24:32 +0000"/>
                            <attachment id="12722788" name="groovy4742_uniqueImprovements.patch" size="10944" author="tim_yates" created="Wed, 23 Mar 2011 08:09:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 35 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2co7r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>