<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:24:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-11311] Groovy Closure not retaining param annotations, but only for the default single object param case</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-11311</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;In trying to process Groovy closure param annotations, via Java reflection, I realized that there is one narrow case where the param annotations are not preserved in the generated call method.&lt;/p&gt;

&lt;p&gt;This happens only for the case of a single Object param type. All other variations retain the annotation, it can be a single param of a different type, or multiple params of Object type. I think this may have something to do with handling the default &apos;it&apos; param&lt;/p&gt;

&lt;p&gt;ex:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{@TESTANNO def x-&amp;gt; } &lt;span class=&quot;code-comment&quot;&gt;//wont retain @TESTANNO&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{@TESTANNO &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; x-&amp;gt; } &lt;span class=&quot;code-comment&quot;&gt;//wont retain @TESTANNO&#160;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{@TESTANNO &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; x-&amp;gt; } &lt;span class=&quot;code-comment&quot;&gt;//will retain @TESTANNO&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{@TESTANNO def x, @TESTANNO def y-&amp;gt; }&lt;span class=&quot;code-comment&quot;&gt;//will retain @TESTANNO on both x and y&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Attached a basic groovy script to demonstrate.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13568344">GROOVY-11311</key>
            <summary>Groovy Closure not retaining param annotations, but only for the default single object param case</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="val235">Val E</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Feb 2024 19:12:26 +0000</created>
                <updated>Tue, 5 Mar 2024 01:53:29 +0000</updated>
                            <resolved>Mon, 26 Feb 2024 18:50:10 +0000</resolved>
                                    <version>3.0.8</version>
                    <version>4.0.4</version>
                                    <fixVersion>5.0.0-alpha-6</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17817182" author="blackdrag" created="Tue, 13 Feb 2024 23:10:28 +0000"  >&lt;p&gt;I am a bit surprised because you check the call method. I was under the impression we generate only a doCall method, which I am sure is happening... yes, verified that. &lt;/p&gt;

&lt;p&gt;Dow anyone remember why we decided to create call-methods additionally to the doCall-methods? &lt;/p&gt;</comment>
                            <comment id="17817191" author="JIRAUSER296342" created="Wed, 14 Feb 2024 00:44:16 +0000"  >&lt;p&gt;Heh. Thanks. So checking doCall (instead of call) works perfectly fine and correctly for my purposes, it retains the annotations in all cases,&#160; even on that corner case described above.&#160; As far as I&apos;m concerned this is a non-issue for me. I reduced the priority to minor, if you guys want to close this one out without dealing with &apos;call&apos; inconsistency that&apos;s fine by me as well.&#160;&lt;/p&gt;</comment>
                            <comment id="17820495" author="emilles" created="Sun, 25 Feb 2024 17:19:54 +0000"  >&lt;p&gt;When a closure parameter or its type is annotated, what expectation should we have for the generated methods like &lt;tt&gt;call&lt;/tt&gt; and &lt;tt&gt;doCall&lt;/tt&gt;.  Similarly for an annotated shared variable, should its annotations pass along to the generated field or accessor?  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blackdrag&quot; class=&quot;user-hover&quot; rel=&quot;blackdrag&quot;&gt;blackdrag&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulk&quot; class=&quot;user-hover&quot; rel=&quot;paulk&quot;&gt;paulk&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17820498" author="emilles" created="Sun, 25 Feb 2024 17:29:56 +0000"  >&lt;p&gt;There is no &lt;tt&gt;call&lt;/tt&gt; method generated for the case of one &lt;tt&gt;Object&lt;/tt&gt; parameter.  You must be getting the super class method in that case.&lt;/p&gt;</comment>
                            <comment id="17820629" author="blackdrag" created="Mon, 26 Feb 2024 08:27:43 +0000"  >&lt;p&gt;From a dynamic Groovy only perspective the call methods are usually not even called for generated closures. Instead we call directly the doCall methods. The call methods are just helpers for calls made from Java. So I expect all important information to be on them.&lt;/p&gt;

&lt;p&gt;From a static Groovy perspective we know at compile time of course only the call methods call(), call(Object) and call(Object[]). They may do dynamic method calls to the real doCall methods. Of course this does not provide any type safety because for &lt;/p&gt;
{int i -&amp;gt;i}
&lt;p&gt; we have a doCall(int) method, but also a call() method, which would fail if called. for &lt;/p&gt;
{int i=1 -&amp;gt;i}
&lt;p&gt; we have of course two doCall methods doCall() and doCall(int), now call() is ok. call(&quot;foo&quot;) or call(1,2,3) is of course still not ok and will fail at runtime. We can overwrite the call methods to do direct method calls and safe the dynamic invocation, but I would still not add the annotation decorators there.&lt;/p&gt;</comment>
                            <comment id="17820815" author="emilles" created="Mon, 26 Feb 2024 18:50:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/commit/c5b5f81907a15393f3d32edbdc6bbf72d95e579a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/c5b5f81907a15393f3d32edbdc6bbf72d95e579a&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13066702" name="ClosureAnnotationsTest.groovy" size="1510" author="val235" created="Tue, 13 Feb 2024 19:11:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 37 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1ndk8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>