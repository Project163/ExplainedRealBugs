<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:02:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-9127] Cannot set protected field from subclass</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-9127</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Consider the following code &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Foo {

    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; field1

    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getField1() {
        field1
    }
}

@CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Bar &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Foo {

    void changeField1()  {
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.field1 = &lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt;
    }

    @Override
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getField1() { &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;bar command&apos;&lt;/span&gt; }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It fails to compile with the following error message: &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[Static type checking] - Cannot set read-only property: field1
 @ line 29, column 9.
           &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.field1 = &lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt;
           ^
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Which does not make much sense to me because protected field should be accessible to subclasses by definition. Tested also with 2.5.8-SNAPSHOT reporting the same issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13234390">GROOVY-9127</key>
            <summary>Cannot set protected field from subclass</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="pablo72">paolo di tommaso</reporter>
                        <labels>
                    </labels>
                <created>Mon, 20 May 2019 20:13:16 +0000</created>
                <updated>Mon, 10 Apr 2023 22:54:15 +0000</updated>
                            <resolved>Fri, 28 Jun 2019 17:30:42 +0000</resolved>
                                    <version>2.5.6</version>
                                    <fixVersion>3.0.0-beta-2</fixVersion>
                    <fixVersion>2.5.19</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3600">1h</timespent>
                                <comments>
                            <comment id="16848284" author="emilles" created="Sat, 25 May 2019 21:39:52 +0000"  >&lt;p&gt;&lt;tt&gt;StaticTypeCheckingVisitor.existsProperty&lt;/tt&gt; is looking for a setter, finds none and then finds a getter, so it indicates that the property is read-only. This block could look for accessible field. Or&#160;&lt;tt&gt;typeCheckAssignment&lt;/tt&gt; could check for accessible field in case of assignment and read-only property.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
                ...
                FieldNode field = current.getDeclaredField(propertyName); &lt;span class=&quot;code-comment&quot;&gt;// could check parent &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; accessible field...
&lt;/span&gt;                field = allowStaticAccessToMember(field, staticOnly);
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (storeField(field, isAttributeExpression, pexp, current, visitor, receiver.getData(), !readMode))
                    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
                ...
                } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!readMode &amp;amp;&amp;amp; checkGetterOrSetter) {
                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!setters.isEmpty()) {
                        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (visitor != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (field != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                                visitor.visitField(field);
                            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                                &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (MethodNode setter : setters) {
                                    ClassNode setterType = setter.getParameters()[0].getOriginType();
                                    FieldNode virtual = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FieldNode(propertyName, 0, setterType, current, EmptyExpression.INSTANCE);
                                    visitor.visitField(virtual);
                                }
                            }
                        }
                        &lt;span class=&quot;code-comment&quot;&gt;//TODO: apply generics on parameter[0]?
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;//                                storeType(pexp, setter.getParameters()[0].getType());
&lt;/span&gt;                        SetterInfo info = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SetterInfo(current, setterName, setters);
                        BinaryExpression enclosingBinaryExpression = typeCheckingContext.getEnclosingBinaryExpression();
                        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (enclosingBinaryExpression != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                            putSetterInfo(enclosingBinaryExpression.getLeftExpression(), info);
                        }
                        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; delegationData = receiver.getData();
                        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (delegationData != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                            pexp.putNodeMetaData(StaticTypesMarker.IMPLICIT_RECEIVER, delegationData);
                        }
                        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
                    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (getter != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; propertyNode == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                        pexp.putNodeMetaData(StaticTypesMarker.READONLY_PROPERTY, &lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;.TRUE); &lt;span class=&quot;code-comment&quot;&gt;// gets here!
&lt;/span&gt;                    }
                }


    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void typeCheckAssignment(
            &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; BinaryExpression assignmentExpression,
            &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Expression leftExpression,
            &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ClassNode leftExpressionType,
            &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Expression rightExpression,
            &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ClassNode inferredRightExpressionTypeOrig) {
        ClassNode inferredRightExpressionType = inferredRightExpressionTypeOrig;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!typeCheckMultipleAssignmentAndContinue(leftExpression, rightExpression)) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;

        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (leftExpression &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; VariableExpression
                &amp;amp;&amp;amp; ((VariableExpression) leftExpression).getAccessedVariable() &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; FieldNode) {
            checkOrMarkPrivateAccess(leftExpression, (FieldNode) ((VariableExpression) leftExpression).getAccessedVariable(), &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
        }

        &lt;span class=&quot;code-comment&quot;&gt;//TODO: need errors &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; write-only too!
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (addedReadOnlyPropertyError(leftExpression)) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;; &lt;span class=&quot;code-comment&quot;&gt;// error recorded here!&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16875084" author="daniel_sun" created="Fri, 28 Jun 2019 17:30:42 +0000"  >&lt;p&gt;The proposed PR was merged. Thanks.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/commit/a44cfc5ac24ff6bc0b31a59759e6148909fece3d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/a44cfc5ac24ff6bc0b31a59759e6148909fece3d&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17584978" author="emilles" created="Thu, 25 Aug 2022 18:39:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/commit/47821d27aaa6d3a36a352ce54370d5aa4ad1441c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/47821d27aaa6d3a36a352ce54370d5aa4ad1441c&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13531910">GROOVY-11005</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 11 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z02vds:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>