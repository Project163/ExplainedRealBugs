<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:11:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-7128] Generic method declaration should see the super class</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-7128</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@groovy.transform.CompileStatic
void test() {
    List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;&amp;gt; list = [1]
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;C:\Users\Yu\Desktop\test.groovy: 3: [Static type checking] - Incompatible &lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt; argument types. Cannot assign java.util.List &amp;lt;java.lang.&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; to: java.util.List &amp;lt;&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;&amp;gt;
 @ line 3, column 25.
       List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;&amp;gt; list = [1]
                           ^
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12817871">GROOVY-7128</key>
            <summary>Generic method declaration should see the super class</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="yukoba">Yu Kobayashi</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Oct 2014 08:04:11 +0000</created>
                <updated>Thu, 26 Jan 2023 22:22:05 +0000</updated>
                            <resolved>Sun, 28 Mar 2021 18:39:06 +0000</resolved>
                                    <version>2.3.7</version>
                    <version>2.4.0-beta-3</version>
                                    <fixVersion>4.0.0-alpha-3</fixVersion>
                    <fixVersion>3.0.15</fixVersion>
                    <fixVersion>2.5.22</fixVersion>
                                    <component>Static Type Checker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14476555" author="melix" created="Fri, 24 Oct 2014 08:14:56 +0000"  >&lt;p&gt;The code should actually be:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;List&amp;lt;? &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;&amp;gt; list = [1]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;or&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; list = [1]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="14476533" author="yukoba" created="Fri, 24 Oct 2014 08:27:18 +0000"  >&lt;p&gt;Java can compile this code, but Groovy fails this code.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;&amp;gt; list = Arrays.asList(1);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;



</comment>
                            <comment id="14476735" author="melix" created="Thu, 30 Oct 2014 07:30:38 +0000"  >&lt;p&gt;Yes, Java can compile this, but it will also fail this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; l1 = Arrays.asList(1,2,3); &lt;span class=&quot;code-comment&quot;&gt;// sure, I can &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;!
&lt;/span&gt;List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;&amp;gt; l2 = Arrays.asList(1,2,3); &lt;span class=&quot;code-comment&quot;&gt;// no problem
&lt;/span&gt;l2 = l1; &lt;span class=&quot;code-comment&quot;&gt;// ah, no, you can&apos;t, List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; is not List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So to be honest, I find the behavior of Java a bit inconsistent.&lt;/p&gt;</comment>
                            <comment id="14476650" author="yukoba" created="Thu, 30 Oct 2014 08:32:57 +0000"  >&lt;p&gt;The problem is not there. Arrays.asList() is defined as such.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &amp;lt;T&amp;gt; List&amp;lt;T&amp;gt; asList(T... a) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&amp;lt;T&amp;gt; is a generic method declaration.&lt;/p&gt;

&lt;p&gt;Therefore, &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;&amp;gt; list = Arrays.asList(1);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;means&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;&amp;gt; list = Arrays.asList((&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;) 1);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;There are two problems here.&lt;br/&gt;
1. Groovy should implement the generic method declaration &amp;lt;T&amp;gt; correctly.&lt;br/&gt;
2. [] and [:] should also use the generic method declaration semantics.&lt;/p&gt;

&lt;p&gt;For example, this fails too.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Test {
    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void test() {
        List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;&amp;gt; list = test2(1)
    }

    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &amp;lt;T&amp;gt; List&amp;lt;T&amp;gt; test2(T t) {
        [t]
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Also this is OK in Java,&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Test {
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void test() {
        test2(Arrays.asList(1));
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void test2(List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;&amp;gt; list) {}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but this fails in Groovy.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Test {
    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void test() {
        test2([1])
    }

    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void test2(List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;&amp;gt; list) {}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14476632" author="melix" created="Thu, 30 Oct 2014 08:36:34 +0000"  >&lt;p&gt;The problem is more that List&amp;lt;Number&amp;gt; list = .... uses target typing while &lt;span class=&quot;error&quot;&gt;&amp;#91;xxx&amp;#93;&lt;/span&gt; is a list literal, inferred by its own.&lt;/p&gt;
</comment>
                            <comment id="14476724" author="yukoba" created="Sun, 2 Nov 2014 03:38:45 +0000"  >&lt;p&gt;Theoretically, if you replace [1, 2] to createList(1, 2), you can infer the type.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &amp;lt;T&amp;gt; List&amp;lt;T&amp;gt; createList(T... args) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&amp;gt;(Arrays.asList(args));
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14476610" author="melix" created="Sun, 2 Nov 2014 03:46:07 +0000"  >&lt;p&gt;It is the same problem. The type inference engine of Groovy doesn&apos;t use target typing. So consider this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;def list = [1,2] &lt;span class=&quot;code-comment&quot;&gt;// inferred as List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;
&lt;/span&gt;def list = [1, 2d] &lt;span class=&quot;code-comment&quot;&gt;// inferred as List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;+Seriaizable&amp;gt;
&lt;/span&gt;def list = Arrays.asList(1,2) &lt;span class=&quot;code-comment&quot;&gt;// inferred as List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;
&lt;/span&gt;def list = Arrays.asList(2, 2d)  &lt;span class=&quot;code-comment&quot;&gt;// inferred as List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;+Seriaizable&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This shows that Groovy does &lt;b&gt;not&lt;/b&gt; rely on the declaration type, in order to provide flow typing. This is a difference from Java, which also makes it a bit stricter, but it also makes it IMHO more understandable (as shown in the example from a previous comment, it will fail in both direct and indirect assignments). I understand it behaves differently from Java, but it makes sense because of LUB inference and flow typing.&lt;/p&gt;</comment>
                            <comment id="14476634" author="yukoba" created="Sun, 2 Nov 2014 04:08:20 +0000"  >&lt;p&gt;I think this problem is how to implement generic method inference at Groovy.&lt;/p&gt;

&lt;p&gt;I also strongly agree that these should keep as such.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;def list = [1,2] &lt;span class=&quot;code-comment&quot;&gt;// inferred as List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;
&lt;/span&gt;def list = [1, 2d] &lt;span class=&quot;code-comment&quot;&gt;// inferred as List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;+Seriaizable&amp;gt;
&lt;/span&gt;def list = Arrays.asList(1,2) &lt;span class=&quot;code-comment&quot;&gt;// inferred as List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;
&lt;/span&gt;def list = Arrays.asList(2, 2d)  &lt;span class=&quot;code-comment&quot;&gt;// inferred as List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;+Seriaizable&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But is it impossible to infer these order?&lt;br/&gt;
1. Limit the argument and return value types by generic method inference.&lt;br/&gt;
2. Infer the type from the object itself. Follow the original flow typing.&lt;/p&gt;

&lt;p&gt;This means,&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;&amp;gt; list = Arrays.asList(1, 2)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;first translate to &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;&amp;gt; list = (List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;&amp;gt;) Arrays.asList((&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;) 1, (&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;) 2)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and keep compiling as the original.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 3 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2co2f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>