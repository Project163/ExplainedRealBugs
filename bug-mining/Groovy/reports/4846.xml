<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:24:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-10359] STC misses type error when involving a variable with a char a declared type</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-10359</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;I have the following program&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Test {
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
    &lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt; f = (&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;h3&gt;&lt;a name=&quot;Actualbehaviour&quot;&gt;&lt;/a&gt;Actual behaviour&lt;/h3&gt;

&lt;p&gt;groovyc compiles this program&lt;/p&gt;

&lt;h3&gt;&lt;a name=&quot;Expectedbehaviour.&quot;&gt;&lt;/a&gt;Expected behaviour.&lt;/h3&gt;

&lt;p&gt;groovyc should have rejected this program with an error of the form: &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
error: incompatible types: &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; cannot be converted to &lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13411069">GROOVY-10359</key>
            <summary>STC misses type error when involving a variable with a char a declared type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="theosot">Thodoris Sotiropoulos</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Nov 2021 13:17:13 +0000</created>
                <updated>Tue, 12 Nov 2024 11:40:07 +0000</updated>
                            <resolved>Tue, 9 Jul 2024 17:17:17 +0000</resolved>
                                                    <fixVersion>5.0.0-alpha-10</fixVersion>
                                    <component>Static Type Checker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17862586" author="emilles" created="Tue, 2 Jul 2024 20:31:51 +0000"  >&lt;p&gt;Groovy supports numeric conversion to and from &lt;tt&gt;char&lt;/tt&gt;.  Here is an example: &lt;a href=&quot;https://github.com/apache/groovy/blob/08e1e8d5903db572283abd0f514f05ec60757f58/src/main/groovy/org/codehaus/groovy/util/StringUtil.groovy#L65&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/blob/08e1e8d5903db572283abd0f514f05ec60757f58/src/main/groovy/org/codehaus/groovy/util/StringUtil.groovy#L65&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;As a consequence, &lt;tt&gt;null&lt;/tt&gt; may be encountered.  Maybe a type-checking extension could be more stringent.&lt;/p&gt;

&lt;p&gt;Direct assignment of &lt;tt&gt;null&lt;/tt&gt; produces a type-checking error: &lt;tt&gt;char c = null&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Array assignment also produces a type-checking error: &lt;tt&gt;char[] c = new Character&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&lt;/tt&gt; (see &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-11371&quot; title=&quot;unsafe conversion of array of reference type to an array of primitive type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-11371&quot;&gt;&lt;del&gt;GROOVY-11371&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="17862590" author="emilles" created="Tue, 2 Jul 2024 20:50:16 +0000"  >&lt;p&gt;I&apos;ll have to dig up the spec on this as I&apos;m seeing mixed results.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
@TypeChecked test(&lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt; ch) {
  &lt;span class=&quot;code-object&quot;&gt;Character&lt;/span&gt;  c = ch 
  BigInteger b = ch 
  &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;    i = ch
  &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt;     n = ch
  ch = c
  ch = b
  ch = i
  ch = n
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17864222" author="emilles" created="Tue, 9 Jul 2024 13:51:09 +0000"  >&lt;p&gt;I created this script to understand the scope of number conversion.  TL;DR is Groovy converts between numbers and primitives with no error or warning.&lt;/p&gt;

&lt;p&gt;You can change the type of &quot;b&quot; from &quot;byte&quot; to any of the other types below and the dynamic runtime happily makes a conversion.  With type-checking enabled, there are errors for possible loss of precision for &lt;tt&gt;short&lt;/tt&gt;, &lt;tt&gt;int&lt;/tt&gt;, &lt;tt&gt;long&lt;/tt&gt;, &lt;tt&gt;float&lt;/tt&gt;, &lt;tt&gt;double&lt;/tt&gt; and their wrapper types.  Why not &lt;tt&gt;char&lt;/tt&gt;?  It also states that &lt;tt&gt;Character&lt;/tt&gt; is inconvertible.  Lastly it says &lt;tt&gt;BigInteger&lt;/tt&gt;, &lt;tt&gt;BigDecimal&lt;/tt&gt; and &lt;tt&gt;AtomicInteger&lt;/tt&gt; are not assignment compatible.  (Groovy 3)&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; b = 0
b = (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;) 1
println(b)
println(b.class)
b = (&lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt;) 2
println(b)
println(b.class)
b = (&lt;span class=&quot;code-object&quot;&gt;short&lt;/span&gt;) 3
println(b)
println(b.class)
b = (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) 4
println(b)
println(b.class)
b = (&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;) 5
println(b)
println(b.class)
b = (&lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt;) 6
println(b)
println(b.class)
b = (&lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;) 7
println(b)
println(b.class)

println()

b = (&lt;span class=&quot;code-object&quot;&gt;Byte&lt;/span&gt;) 1
println(b)
println(b.class)
b = (&lt;span class=&quot;code-object&quot;&gt;Character&lt;/span&gt;) 2
println(b)
println(b.class)
b = (&lt;span class=&quot;code-object&quot;&gt;Short&lt;/span&gt;) 3
println(b)
println(b.class)
b = (&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;) 4
println(b)
println(b.class)
b = (&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;) 5
println(b)
println(b.class)
b = (&lt;span class=&quot;code-object&quot;&gt;Float&lt;/span&gt;) 6
println(b)
println(b.class)
b = (&lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;) 7
println(b)
println(b.class)

b = (BigInteger) 8
println(b)
println(b.class)
b = (BigDecimal) 9.0
println(b)
println(b.class)
b = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; java.util.concurrent.atomic.AtomicInteger(10)
println(b)
println(b.class)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17864224" author="emilles" created="Tue, 9 Jul 2024 14:01:23 +0000"  >&lt;p&gt;I think STC is missing &lt;tt&gt;char&lt;/tt&gt; in the loss of precision checking:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
@TypeChecked test() {
  &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; b = 0
  println(b)
  b = (&lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt;)1000
  println(b) &lt;span class=&quot;code-comment&quot;&gt;// prints &lt;span class=&quot;code-quote&quot;&gt;&quot;-24&quot;&lt;/span&gt;
&lt;/span&gt;  println(b.class)
}
test()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It does not allow cast from number to &lt;tt&gt;Character&lt;/tt&gt;, which the runtime does support:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
@TypeChecked test() {
  print((&lt;span class=&quot;code-object&quot;&gt;Character&lt;/span&gt;) 2)
}
test()

And there is no warning about the possibility of &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;:
{code:groovy}
@TypeChecked test(&lt;span class=&quot;code-object&quot;&gt;Byte&lt;/span&gt; bb) {
  &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; b = bb
}
test()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blackdrag&quot; class=&quot;user-hover&quot; rel=&quot;blackdrag&quot;&gt;blackdrag&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulk&quot; class=&quot;user-hover&quot; rel=&quot;paulk&quot;&gt;paulk&lt;/a&gt; Any thoughts on changing one or more of these in STC?&lt;/p&gt;</comment>
                            <comment id="17864303" author="emilles" created="Tue, 9 Jul 2024 17:17:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/commit/95e4dbfbeaf0f6bb59222a596c4b5408aacc6d51&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/95e4dbfbeaf0f6bb59222a596c4b5408aacc6d51&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It seems most in keeping with the current separation between char and numbers to prevent number to char assignment rather than open up char as another number type in STC.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13578749">GROOVY-11371</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13377599">GROOVY-10079</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13378299">GROOVY-10087</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13379122">GROOVY-10095</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>groovy</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0wm48:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>