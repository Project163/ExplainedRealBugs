<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:15:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-4086] ClassCastException on every() </title>
                <link>https://issues.apache.org/jira/browse/GROOVY-4086</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;The following code throws a ClassCastException &lt;/p&gt;

&lt;p&gt;int[] a = [ 2, 2, 2, 2, 2]&lt;/p&gt;

&lt;p&gt;println (1..4.every &lt;/p&gt;
{ a[it] == a[0] }
&lt;p&gt; )&lt;/p&gt;</description>
                <environment></environment>
        <key id="12815024">GROOVY-4086</key>
            <summary>ClassCastException on every() </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="xjia">Xiaoping Jia</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Mar 2010 10:08:01 +0000</created>
                <updated>Tue, 7 Apr 2015 19:12:48 +0000</updated>
                            <resolved>Sat, 6 Mar 2010 07:06:19 +0000</resolved>
                                    <version>1.7.1</version>
                                    <fixVersion>1.7.2</fixVersion>
                                    <component>Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14469032" author="roshandawrani" created="Thu, 4 Mar 2010 20:16:02 +0000"  >&lt;p&gt;Range operator has a lower precedence here, so your code is becoming println (1..(4.every &lt;/p&gt;
{ a[it] == a[0] }) ), which in turn becomes println (1..true), which is not correct.&lt;br/&gt;
&lt;br/&gt;
You need to use parentheses around the range and make it
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;br/&gt;
int[] a = [ 2, 2, 2, 2, 2]&lt;br/&gt;
println ((1..4).every { a[it] == a[0] }
&lt;p&gt; )&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For some relevant details of range operator precedence, see &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-254&quot; title=&quot;range precedence should be fixed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-254&quot;&gt;&lt;del&gt;GROOVY-254&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14469094" author="paulk" created="Sat, 6 Mar 2010 07:05:00 +0000"  >&lt;p&gt;While on the one hand there is nothing to fix, it might be useful to improve our error message for this case.&lt;/p&gt;</comment>
                            <comment id="14478931" author="paulk" created="Sat, 6 Mar 2010 07:06:19 +0000"  >&lt;p&gt;Now the example given wraps original error within the following slightly more informative exception:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.IllegalArgumentException: Unable to create range due to incompatible types: Integer..Boolean (possible missing brackets around range?)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14478933" author="paulk" created="Sat, 6 Mar 2010 07:13:19 +0000"  >&lt;p&gt;It is worth noting that this improved error message doesn&apos;t help in certain cases, e.g.:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;[] a = [2, 2, 2, 2, 2]
1..4.each { println a[it] == a[0] }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Here {{4.each &lt;/p&gt;
{ println a[it] == a[0] }
&lt;p&gt;}} will loop once for the value 4 then return 4 as the result.&lt;br/&gt;
Then 1..4 will create a range of size 4.&lt;br/&gt;
So, there will be no error but the behavior may not be as naively expected.&lt;/p&gt;</comment>
                            <comment id="14469065" author="roshandawrani" created="Sat, 6 Mar 2010 07:21:15 +0000"  >&lt;p&gt;Yes, the new error message makes the situation much clearer.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 38 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ch2v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>