<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:12:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-3518] closer calls with array as argument fail</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-3518</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;def doSomething={ list -&amp;gt;
    println list
}

&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] x=[&lt;span class=&quot;code-quote&quot;&gt;&quot;hello&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;world&quot;&lt;/span&gt;]
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] y=[&lt;span class=&quot;code-quote&quot;&gt;&quot;hello&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;world&quot;&lt;/span&gt;]

doSomething(x as &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[]) &lt;span class=&quot;code-comment&quot;&gt;//works
&lt;/span&gt;doSomething(y) &lt;span class=&quot;code-comment&quot;&gt;//fails with Exception thrown: No signature of method: ConsoleScript15$_run_closure1.call() is applicable &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; argument types: (java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;) values: [hello, world]&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>Windows and Linux&lt;br/&gt;
Groovy Version: 1.6.2 JVM: 1.5.0_16</environment>
        <key id="12814677">GROOVY-3518</key>
            <summary>closer calls with array as argument fail</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blackdrag">Jochen Theodorou</assignee>
                                    <reporter username="dariusan">dariusan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 May 2009 08:11:29 +0000</created>
                <updated>Thu, 14 May 2009 06:18:56 +0000</updated>
                            <resolved>Thu, 14 May 2009 06:18:56 +0000</resolved>
                                    <version>1.6.2</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14466931" author="dariusan" created="Tue, 12 May 2009 08:16:25 +0000"  >&lt;p&gt;I did not want to put emoticon, so i try again:&lt;/p&gt;

&lt;p&gt;def doSomething={ list -&amp;gt;&lt;br/&gt;
    println list&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;String[] x=&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;hello&amp;quot;, &amp;quot;world&amp;quot;&amp;#93;&lt;/span&gt;&lt;br/&gt;
String[] y=&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;hello&amp;quot;, &amp;quot;world&amp;quot;&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;doSomething(x as String[]) //works&lt;br/&gt;
doSomething( y ) //fails with Exception thrown: No signature of method: ConsoleScript15$_run_closure1.call() is applicable for argument types: (java.lang.String, java.lang.String) values: &lt;span class=&quot;error&quot;&gt;&amp;#91;hello, world&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="14467016" author="roshandawrani" created="Tue, 12 May 2009 11:25:16 +0000"  >&lt;p&gt;Seems to have been caused by the array unwrapping logic introduced in the fix of &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-2266&quot; title=&quot;closure called by using the call method handles arrays incorrectly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-2266&quot;&gt;&lt;del&gt;GROOVY-2266&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;The array unwrapping should not happen if argument passed is an array that contains more than 1 element. Because then there is no call() / doCall() that can take more than 1 arg, which is what is happening in this JIRA. &lt;/p&gt;
{&quot;hello&quot;, &quot;world&quot;}
&lt;p&gt; array gets unwrapped as 2 individual elements and then there is no closure call()/doCall() to handle that call with 2 args.&lt;/p&gt;</comment>
                            <comment id="14466982" author="roshandawrani" created="Tue, 12 May 2009 11:55:40 +0000"  >&lt;p&gt;Not so sure about the previous comment now, because unwrapping the array when it contains more than 1 element helps in the following scenario:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;def doSomething = { elem1, elem2 -&amp;gt;  println &lt;span class=&quot;code-quote&quot;&gt;&quot;$elem1, $elem2&quot;&lt;/span&gt; }
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] x = [&lt;span class=&quot;code-quote&quot;&gt;&quot;hello&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;world&quot;&lt;/span&gt;]
def foo = doSomething(x)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;where the array elemets automatically get mapped to arg1, arg2, etc.&lt;/p&gt;

&lt;p&gt;Does that mean that ClosureMetaClass should look at the number of arguments that doCall()/call() of the closure can take before deciding whether to unwrap or not?&lt;/p&gt;</comment>
                            <comment id="14466862" author="dariusan" created="Tue, 12 May 2009 13:51:35 +0000"  >&lt;p&gt;I would expect the beviour you describe using the *-operator&lt;/p&gt;

&lt;p&gt;def doSomething={ a,b -&amp;gt;&lt;br/&gt;
   println &quot;${a} ${b}&quot;&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;String[] x=&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;hello&amp;quot;, &amp;quot;world&amp;quot;&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;doSomething( *x ) //does not throw exception but does not print &quot;hello world&quot; either&lt;/p&gt;

&lt;p&gt;So the functionality seems to be totally broken!&lt;/p&gt;
</comment>
                            <comment id="14466883" author="roshandawrani" created="Tue, 12 May 2009 14:07:24 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;def doSomething={ a,b -&amp;gt;
    println &lt;span class=&quot;code-quote&quot;&gt;&quot;${a} ${b}&quot;&lt;/span&gt;
}
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] x=[&lt;span class=&quot;code-quote&quot;&gt;&quot;hello&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;world&quot;&lt;/span&gt;]
doSomething( *x )
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;prints &quot;hello world&quot; for me. Tried locally as well as on &lt;a href=&quot;http://groovyconsole.appspot.com&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://groovyconsole.appspot.com&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Not sure about correctness of doSomething( x ) also printing &quot;hello world&quot; though. Whether that is as designed or another bug there.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;def doSomething={ a,b -&amp;gt;
    println &lt;span class=&quot;code-quote&quot;&gt;&quot;${a} ${b}&quot;&lt;/span&gt;
}
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] x=[&lt;span class=&quot;code-quote&quot;&gt;&quot;hello&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;world&quot;&lt;/span&gt;]
doSomething( x )
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14466999" author="dariusan" created="Tue, 12 May 2009 14:39:40 +0000"  >&lt;p&gt;Yes you are right, it prints out &quot;hello world&quot;. I was trying it out on a local groovyConsole with &quot;Capture Standard Output&quot; disabled and did not check the terminal.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
def doSomething={ list -&amp;gt;  println list }

&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] x=[&lt;span class=&quot;code-quote&quot;&gt;&quot;hello&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;world&quot;&lt;/span&gt;]
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] y=[&lt;span class=&quot;code-quote&quot;&gt;&quot;hello&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;world&quot;&lt;/span&gt;]

doSomething(x as &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[]) &lt;span class=&quot;code-comment&quot;&gt;//works
&lt;/span&gt;doSomething( y ) &lt;span class=&quot;code-comment&quot;&gt;//fails
&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Semantically both calls are the same to me. Why should one call pass and the other fail by design?&lt;/p&gt;</comment>
                            <comment id="14467031" author="roshandawrani" created="Wed, 13 May 2009 00:58:17 +0000"  >&lt;p&gt;Yes, that is the original issue you reported, which still holds good. That behavior is not correct.&lt;/p&gt;

&lt;p&gt;doSomething(x as String[]) // this explicit conversion should not be needed as x is already of type String[]&lt;br/&gt;
doSomething( y ) // this should  and this is the issue to solve. I gave it a try but ran into some other issues on the solution I tried but the issue is valid and someone will solve it.&lt;/p&gt;

&lt;p&gt;The design point that I mentioned was related to doSomething( x ) and doSomething( *x ) both expanding the array x into 2 separate parameters resulting in a successful call to &lt;/p&gt;
{a, b -&amp;gt; ....}</comment>
                            <comment id="14466981" author="blackdrag" created="Thu, 14 May 2009 06:18:56 +0000"  >&lt;p&gt;here was an error in ClosureMetaClass. A check there tried to make an invalid transformation of that argument array in case the method name was &quot;call&quot;. This is now fixed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 28 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bstz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>