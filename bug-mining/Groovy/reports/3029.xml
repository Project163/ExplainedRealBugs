<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:49:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-7793] Compiler compiles class with private abstract method</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-7793</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Using Groovy and JDBI in following class:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;ItemDAO.groovy&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ItemDAO {
    @SqlUpdate(&lt;span class=&quot;code-quote&quot;&gt;&quot;...&quot;&lt;/span&gt;)
    @GetGeneratedKeys
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; insertItem(@BindBean Item item)
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When class is used JDBI will create proxy-implementation based on the the abstract class (or interface).&lt;/p&gt;

&lt;p&gt;It will compile without any issues, but running it causes (shown below) class-loading/verify error. This is programmers fault to have &quot;private abstract&quot; methods, but I guess Groovy-compiler should not let this thru? Maybe IntelliJ Idea groovy-plugin should say it&apos;s illegal as well?&lt;/p&gt;

&lt;p&gt;I haven&apos;t tried this with the latest Groovy-version but unless it has been specifically fixed it might still occur?&lt;/p&gt;

&lt;p&gt;&amp;#8212;&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; java.lang.ClassFormatError: Method insertDish in class com/company/ItemDAO has illegal modifiers: 0x402&lt;br/&gt;
	at java.lang.ClassLoader.defineClass1(Native Method)&lt;br/&gt;
	at java.lang.ClassLoader.defineClass(ClassLoader.java:760)&lt;br/&gt;
	at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)&lt;br/&gt;
	at java.net.URLClassLoader.defineClass(URLClassLoader.java:467)&lt;br/&gt;
	at java.net.URLClassLoader.access$100(URLClassLoader.java:73)&lt;br/&gt;
	at java.net.URLClassLoader$1.run(URLClassLoader.java:368)&lt;br/&gt;
	at java.net.URLClassLoader$1.run(URLClassLoader.java:362)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at java.net.URLClassLoader.findClass(URLClassLoader.java:361)&lt;br/&gt;
	at java.lang.ClassLoader.loadClass(ClassLoader.java:424)&lt;br/&gt;
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)&lt;br/&gt;
	at java.lang.ClassLoader.loadClass(ClassLoader.java:357)&lt;br/&gt;
	at java.lang.Class.getDeclaredMethods0(Native Method)&lt;br/&gt;
	at java.lang.Class.privateGetDeclaredMethods(Class.java:2701)&lt;br/&gt;
	at java.lang.Class.getDeclaredMethods(Class.java:1975)&lt;br/&gt;
	at org.codehaus.groovy.reflection.CachedClass$3$1.run(CachedClass.java:85)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at org.codehaus.groovy.reflection.CachedClass$3.initValue(CachedClass.java:82)&lt;br/&gt;
	at org.codehaus.groovy.reflection.CachedClass$3.initValue(CachedClass.java:80)&lt;br/&gt;
	at org.codehaus.groovy.util.LazyReference.getLocked(LazyReference.java:46)&lt;br/&gt;
	at org.codehaus.groovy.util.LazyReference.get(LazyReference.java:33)&lt;br/&gt;
	at org.codehaus.groovy.reflection.CachedClass.getMethods(CachedClass.java:251)&lt;br/&gt;
	at groovy.lang.MetaClassImpl.populateMethods(MetaClassImpl.java:390)&lt;br/&gt;
	at groovy.lang.MetaClassImpl.fillMethodIndex(MetaClassImpl.java:340)&lt;br/&gt;
	at groovy.lang.MetaClassImpl.initialize(MetaClassImpl.java:3224)&lt;br/&gt;
	at org.codehaus.groovy.reflection.ClassInfo.getMetaClassUnderLock(ClassInfo.java:222)&lt;br/&gt;
	at org.codehaus.groovy.reflection.ClassInfo.getMetaClass(ClassInfo.java:253)&lt;br/&gt;
	at org.codehaus.groovy.runtime.metaclass.MetaClassRegistryImpl.getMetaClass(MetaClassRegistryImpl.java:255)&lt;br/&gt;
	at org.codehaus.groovy.runtime.InvokerHelper.getMetaClass(InvokerHelper.java:859)&lt;br/&gt;
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.createCallConstructorSite(CallSiteArray.java:84)&lt;br/&gt;
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallConstructor(CallSiteArray.java:57)&lt;br/&gt;
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callConstructor(AbstractCallSite.java:182)&lt;br/&gt;
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callConstructor(AbstractCallSite.java:194)&lt;/p&gt;</description>
                <environment>- OS X&lt;br/&gt;
- Java(TM) SE Runtime Environment (build 1.8.0_66-b17)&lt;br/&gt;
- IntelliJ Idea 14 CE \w Groovy plugin&lt;br/&gt;
- Gradle 2.2</environment>
        <key id="12951236">GROOVY-7793</key>
            <summary>Compiler compiles class with private abstract method</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pascalschumacher">Pascal Schumacher</assignee>
                                    <reporter username="situokko">Simo Tuokko</reporter>
                        <labels>
                            <label>ClassFormatError</label>
                    </labels>
                <created>Thu, 17 Mar 2016 15:03:05 +0000</created>
                <updated>Sun, 22 May 2022 16:03:17 +0000</updated>
                            <resolved>Sat, 7 May 2016 17:49:54 +0000</resolved>
                                    <version>2.3.11</version>
                                    <fixVersion>2.4.7</fixVersion>
                                    <component>bytecode</component>
                    <component>Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15272125" author="githubbot" created="Thu, 5 May 2016 09:35:42 +0000"  >&lt;p&gt;GitHub user andresteingress opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/328&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/328&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7793&quot; title=&quot;Compiler compiles class with private abstract method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7793&quot;&gt;&lt;del&gt;GROOVY-7793&lt;/del&gt;&lt;/a&gt;: Compiler compiles class with private abstract method&lt;/p&gt;

&lt;p&gt;    This PR adds some logic to the class completion verifier that adds an error to the error collector when private abstract methods are detected in abstract classes or enums (for interfaces such a check is already available).&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/andresteingress/groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/andresteingress/groovy&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7793&quot; title=&quot;Compiler compiles class with private abstract method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7793&quot;&gt;&lt;del&gt;GROOVY-7793&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/328.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/328.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #328&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 81945cb177a588bb6d7ff0a5868691ed92d89260&lt;br/&gt;
Author: Andre Steingress &amp;lt;me@andresteingress.com&amp;gt;&lt;br/&gt;
Date:   2016-05-04T21:17:03Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7793&quot; title=&quot;Compiler compiles class with private abstract method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7793&quot;&gt;&lt;del&gt;GROOVY-7793&lt;/del&gt;&lt;/a&gt;: Compiler compiles class with private abstract method&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15275228" author="githubbot" created="Sat, 7 May 2016 13:14:40 +0000"  >&lt;p&gt;Github user PascalSchumacher commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/328#discussion_r62416234&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/328#discussion_r62416234&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/test/org/codehaus/groovy/classgen/ClassCompletionVerifierTest.java &amp;#8212;&lt;br/&gt;
    @@ -73,13 +73,22 @@&lt;br/&gt;
                 &quot;Method &apos;prom&apos; is protected but should be public in interface &apos;zzz&apos;.&quot;;&lt;br/&gt;
         private static final String EXPECTED_PRIVATE_METHOD_ERROR_MESSAGE =&lt;br/&gt;
                 &quot;Method &apos;prim&apos; is private but should be public in interface &apos;zzz&apos;.&quot;;&lt;br/&gt;
    +    private static final String EXPECTED_ABSTRACT_PRIVATE_METHOD_ERROR_MESSAGE =&lt;br/&gt;
    +            &quot;Method &apos;y&apos; from class &apos;X&apos; must not be private as it is declared as abstract method.&quot;;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Should this be &quot;... as an abstract method&quot;?&lt;/p&gt;</comment>
                            <comment id="15275298" author="githubbot" created="Sat, 7 May 2016 16:43:34 +0000"  >&lt;p&gt;Github user andresteingress commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/328#discussion_r62419225&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/328#discussion_r62419225&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/test/org/codehaus/groovy/classgen/ClassCompletionVerifierTest.java &amp;#8212;&lt;br/&gt;
    @@ -73,13 +73,22 @@&lt;br/&gt;
                 &quot;Method &apos;prom&apos; is protected but should be public in interface &apos;zzz&apos;.&quot;;&lt;br/&gt;
         private static final String EXPECTED_PRIVATE_METHOD_ERROR_MESSAGE =&lt;br/&gt;
                 &quot;Method &apos;prim&apos; is private but should be public in interface &apos;zzz&apos;.&quot;;&lt;br/&gt;
    +    private static final String EXPECTED_ABSTRACT_PRIVATE_METHOD_ERROR_MESSAGE =&lt;br/&gt;
    +            &quot;Method &apos;y&apos; from class &apos;X&apos; must not be private as it is declared as abstract method.&quot;;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Yes, &quot;as an&quot; sounds more correct, I will fix it.&lt;/p&gt;</comment>
                            <comment id="15275323" author="githubbot" created="Sat, 7 May 2016 17:48:18 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/328&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/328&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15275324" author="pascalschumacher" created="Sat, 7 May 2016 17:49:54 +0000"  >&lt;p&gt;Pull request merged. Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 28 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2utzz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>