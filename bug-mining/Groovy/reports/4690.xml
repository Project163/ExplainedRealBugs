<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:22:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-11123] JsonLexer fails to parse number without trailing space</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-11123</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Reproducer:&lt;br/&gt;
&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
reader = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StringReader(&lt;span class=&quot;code-quote&quot;&gt;&apos;-123.456e78&apos;&lt;/span&gt;)
lexer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; groovy.json.JsonLexer(reader)
lexer.nextToken()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Expected:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-123.456e78
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Actual:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;br/&gt;
I found JsonLexerTest.groovy contains tests for plain numbers which are &lt;em&gt;surrounded by spaces&lt;/em&gt; but I wonder why this should be required?&lt;/p&gt;

&lt;p&gt;At least it&apos;s unexpected for users like the developers of &lt;a href=&quot;https://rest-assured.io/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;REST-assured&lt;/a&gt; who pass json content from http responses without added spaces into JsonLexer (they use &lt;a href=&quot;https://github.com/rest-assured/rest-assured/blob/master/json-path/src/main/groovy/io/restassured/internal/path/json/ConfigurableJsonSlurper.groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;their own slurper&lt;/a&gt;). This makes REST-assured fail to support plain number responses.&lt;/p&gt;

&lt;p&gt;One more note: Groovy&apos;s own JsonSlurper successfully parses the above example, so the behaviour is inconsistent at least.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13543140">GROOVY-11123</key>
            <summary>JsonLexer fails to parse number without trailing space</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="jekkel">J&#246;rg Eichhorn</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Jul 2023 11:38:09 +0000</created>
                <updated>Wed, 23 Aug 2023 09:06:56 +0000</updated>
                            <resolved>Fri, 14 Jul 2023 13:01:03 +0000</resolved>
                                    <version>4.0.11</version>
                    <version>4.0.12</version>
                    <version>4.0.13</version>
                                    <fixVersion>4.0.14</fixVersion>
                                    <component>JSON</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17741958" author="githubbot" created="Tue, 11 Jul 2023 11:42:16 +0000"  >&lt;p&gt;jekkel opened a new pull request, #1914:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/1914&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1914&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-11123&quot; title=&quot;JsonLexer fails to parse number without trailing space&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-11123&quot;&gt;&lt;del&gt;GROOVY-11123&lt;/del&gt;&lt;/a&gt; by faking EOL as space.&lt;/p&gt;

</comment>
                            <comment id="17741988" author="paulk" created="Tue, 11 Jul 2023 12:54:20 +0000"  >&lt;p&gt;The current behavior of JsonLexer is mostly targeted at use from JsonSlurper where whole JSON payloads would be parsed, so EOF couldn&apos;t happen straight after a number. Having said that, your suggested enhancement does seem reasonable.&lt;br/&gt;
It would also be possible for the custom slurper in REST-assured to follow the same assumptions that Groovy&apos;s slurper does, but as stated earlier, I see no harm in Groovy also handling that case directly in JsonLexer.&lt;/p&gt;</comment>
                            <comment id="17742022" author="JIRAUSER301298" created="Tue, 11 Jul 2023 13:58:10 +0000"  >&lt;p&gt;Thanks for taking a look! I don&apos;t really get the point of &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt; whole JSON payloads would be parsed. &lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&quot;. As far as I can tell the following:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;12345
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;is a completely valid &quot;JSON text&quot; conforming to the mimetype &quot;application/json&quot; as defined in &lt;a href=&quot;https://www.rfc-editor.org/rfc/rfc8259.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;RFC 8259&lt;/a&gt; section 2. JSON Grammar:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;A JSON text is a sequence of tokens. The set of tokens includes six&lt;br/&gt;
structural characters, strings, numbers, and three literal names.&lt;/p&gt;

&lt;p&gt;A JSON text is a serialized value. Note that certain previous&lt;br/&gt;
specifications of JSON constrained a JSON text to be an object or an&lt;br/&gt;
array. Implementations that generate only objects or arrays where a&lt;br/&gt;
JSON text is called for will be interoperable in the sense that all&lt;br/&gt;
implementations will accept these as conforming JSON texts.&lt;/p&gt;

&lt;p&gt;JSON-text = ws value ws&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;With &quot;value&quot; defined in section 3. as&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&#160; &#160; &#160; value = false / null / true / object / array / number / string&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;With &quot;ws&quot; defined as insignificant whitespace (might occur zero times).&lt;/p&gt;

&lt;p&gt;And a parser (section 9):&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&#160; &#160;A JSON parser transforms a JSON text into another representation. &#160;A&lt;br/&gt;
&#160; &#160;JSON parser MUST accept all texts that conform to the JSON grammar.&lt;br/&gt;
&#160; &#160;A JSON parser MAY accept non-JSON forms or extensions.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I analyzed usages and found the JsonLexer to be used only in JsonSlurperClassic and JsonOutput. From my point of view this means right now JsonSlurperClassis isn&apos;t a JSON parser by the definition of RFC 8259 and JsonOutput also fails to properly accept all possible JSON values.&lt;/p&gt;

&lt;p&gt;Again, thanks for the quick review and assessment, I am looking forward to a fixed REST-assured &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17742032" author="paulk" created="Tue, 11 Jul 2023 14:21:47 +0000"  >&lt;p&gt;By full payload, I meant arrays or objects as per the previous spec. This is JsonLexer/JsonSlurperClassic. It was a while ago and I&apos;d forgotten about the classic vs new slurper. The &quot;new&quot; JsonSlurper also handles the other cases:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;def&lt;/span&gt; jsonSlurper = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JsonSlurper()
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; jsonSlurper.parseText(&lt;span class=&quot;code-quote&quot;&gt;&apos;-123.456e78&apos;&lt;/span&gt;) == -123.456e78G
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;JsonLexer is somewhat outdated technology which we kept around in case there were differences (that folks relied upon) between the classic slurper and the (then) new slurper. Having said that, since we have never deprecated/removed it, we might as well make it as useful as possible.&lt;/p&gt;

&lt;p&gt;So, the workaround is to use JsonSlurper instead of JsonLexer. But as stated previously, your suggestion looks good to me. If I receive no further comments in the next day or so, I&apos;ll merge your PR.&lt;/p&gt;

&lt;p&gt;For Groovy 5, we were also going to potentially explore additional JSON parsing options, but that&apos;s a topic for another issue.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17742771" author="githubbot" created="Thu, 13 Jul 2023 11:44:50 +0000"  >&lt;p&gt;paulk-asert merged PR #1914:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/1914&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1914&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="17742791" author="JIRAUSER301298" created="Thu, 13 Jul 2023 12:36:01 +0000"  >&lt;p&gt;Awesome! May I ask for a pointer how the release process is going to work? Is there anything to be done to make this appear in an upcoming patch release? Can an estimation about the release be made at this point at all?&lt;/p&gt;</comment>
                            <comment id="17742977" author="paulk" created="Thu, 13 Jul 2023 23:22:25 +0000"  >&lt;p&gt;No release date is officially planned but I was thinking of a 4.0.14 release in the next week or two and a 5.0.0-alpha-1 release next month.&lt;/p&gt;

&lt;p&gt;This has yet to be merged into the 4_0_X branch but I&apos;ll do that in the coming days and resolve/update the issue accordingly.&lt;/p&gt;</comment>
                            <comment id="17743146" author="paulk" created="Fri, 14 Jul 2023 13:01:03 +0000"  >&lt;p&gt;Proposed PR merged! Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 17 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1j2t4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>