<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:21:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-10807] STC seems to lose type information through method references</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-10807</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;This compiles in Groovy 3.0.11, but it does not compile in Groovy 3.0.12 or 3.0.13.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.CompileStatic

@CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;NoticeRenderer {
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Comparator&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; COMPARATOR = Comparator&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;.comparing(NoticeRenderer::getComponentDisplayName)
   
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getComponentDisplayName(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; component) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; component;
    }
} 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;The error is&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Failed to find the expected method&lt;span class=&quot;error&quot;&gt;&amp;#91;getComponentDisplayName(java.lang.Object)&amp;#93;&lt;/span&gt; in the type&lt;span class=&quot;error&quot;&gt;&amp;#91;NoticeRenderer&amp;#93;&lt;/span&gt; at line: 5, column: 79&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think something is going sideways when inferring the types to comparing.&lt;/p&gt;

&lt;p&gt;Removing the type bound on the Comparator doesn&apos;t change the error.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;private static final Comparator&amp;lt;String&amp;gt; COMPARATOR = Comparator.comparing(NoticeRenderer::getComponentDisplayName)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The type bound could be on the method itself. This produces the same error.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;private static final Comparator&amp;lt;String&amp;gt; COMPARATOR = Comparator.&amp;lt;String&amp;gt;comparing(NoticeRenderer::getComponentDisplayName)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;But comparing actually has two type parameters, so it&apos;s a little weird that the above doesn&apos;t complain. Specifying both type parameters still produces the same error.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;private static final Comparator&amp;lt;String&amp;gt; COMPARATOR = Comparator.&amp;lt;String, String&amp;gt;comparing(NoticeRenderer::getComponentDisplayName)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If I mistakenly put the type bounds on Comparator, I don&apos;t expect this to work, but it produces BUG! output:&lt;br/&gt;
private static final Comparator&amp;lt;String&amp;gt; COMPARATOR = Comparator&amp;lt;String, String&amp;gt;.comparing(NoticeRenderer::getComponentDisplayName)&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;BUG! exception in phase &apos;instruction selection&apos; in source unit &apos;ConsoleScript34&apos; Expected earlier checking to detect generics parameter arity mismatch&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Expected: java.util.Comparator&amp;lt;T&amp;gt; &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Supplied: java.util.Comparator&amp;lt;java.lang.String,java.lang.String&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In Java, you don&apos;t need the type information at all:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;private static final Comparator&amp;lt;String&amp;gt; COMPARATOR = Comparator.comparing(NoticeRenderer::getComponentDisplayName);&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If you wanted to be verbose in Java, you could specify the bounds:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;private static final Comparator&amp;lt;String&amp;gt; COMPARATOR = Comparator.&amp;lt;String, String&amp;gt;comparing(NoticeRenderer::getComponentDisplayName);&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;As a workaround...&lt;br/&gt;
If I avoid the use of the method reference, I can make something pass the static compiler:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;private static final Comparator&amp;lt;String&amp;gt; COMPARATOR = Comparator.&amp;lt;String&amp;gt;comparing( { String it -&amp;gt; getComponentDisplayName(it) })&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I need both the type bound on comparing and the type of the parameter.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13494180">GROOVY-10807</key>
            <summary>STC seems to lose type information through method references</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="big-guy">Sterling Greene</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Nov 2022 22:49:08 +0000</created>
                <updated>Fri, 10 Feb 2023 21:40:10 +0000</updated>
                            <resolved>Fri, 4 Nov 2022 18:33:31 +0000</resolved>
                                    <version>3.0.12</version>
                    <version>3.0.13</version>
                    <version>4.0.6</version>
                                    <fixVersion>3.0.14</fixVersion>
                    <fixVersion>4.0.7</fixVersion>
                                    <component>Static compilation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17629068" author="emilles" created="Fri, 4 Nov 2022 16:09:07 +0000"  >&lt;p&gt;I&apos;m still investigating &quot;Comparator.comparing(NoticeRenderer::getComponentDisplayName)&quot;.  The type parameters of &lt;tt&gt;comparing(Function)&lt;/tt&gt; are the source of the issue.&lt;/p&gt;

&lt;p&gt;I do have a fix so you can write:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
Comparator&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; COMPARATOR =
  Comparator.&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;,&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;comparing(NoticeRenderer::getComponentDisplayName)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For now you can also write:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
Comparator&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; COMPARATOR =
  Comparator.comparing((Function&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;,&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;) NoticeRenderer::getComponentDisplayName)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17629103" author="emilles" created="Fri, 4 Nov 2022 16:48:02 +0000"  >&lt;p&gt;So &quot;Comparator.comparing(NoticeRenderer::getComponentDisplayName)&quot; fails even for 3.0.11.  It is &quot;Comparator&amp;lt;String&amp;gt;.comparing(NoticeRenderer::getComponentDisplayName)&quot; that worked; I opened &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-10812&quot; title=&quot;Expect parse error for angle brackets on left side of dot in method call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-10812&quot;&gt;GROOVY-10812&lt;/a&gt; for the illegal syntax.&lt;/p&gt;</comment>
                            <comment id="17629153" author="emilles" created="Fri, 4 Nov 2022 18:33:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/commit/7e3091985f72c6dd1350259bdf189cc231c2a642&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/7e3091985f72c6dd1350259bdf189cc231c2a642&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17648776" author="emilles" created="Fri, 16 Dec 2022 19:56:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/commit/02816f2c93954684469a3b7f2ee9aafcdd582251&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/02816f2c93954684469a3b7f2ee9aafcdd582251&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 47 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1aprc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>