<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:18:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-4219] Error during class generation for simple java/groovy program</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-4219</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Reported against groovy eclipse but appears to be a groovy problem.  Similar stack to &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-3613&quot; title=&quot;Need to supply hand-crafted constructor for enum having &amp;gt;1 field&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-3613&quot;&gt;&lt;del&gt;GROOVY-3613&lt;/del&gt;&lt;/a&gt;, but wasn&apos;t clear what was happening in that bug.&lt;/p&gt;

&lt;p&gt;Zip is attached.  Compile with: &lt;br/&gt;
groovyc -j de\brazzy\nikki\Texts.java de\brazzy\nikki\model\Image.groovy de\brazzy\nikki\model\ImageSortField.groovy&lt;/p&gt;

&lt;p&gt;produces&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;gt;&amp;gt;&amp;gt; a serious error occurred: BUG! exception in phase &lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;generation&apos;&lt;/span&gt; in source unit &apos;de\brazzy\nikki\model\ImageSortField.groovy
&apos; MapEntryExpression should not be visited here
&amp;gt;&amp;gt;&amp;gt; stacktrace:
BUG! exception in phase &lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;generation&apos;&lt;/span&gt; in source unit &lt;span class=&quot;code-quote&quot;&gt;&apos;de\brazzy\nikki\model\ImageSortField.groovy&apos;&lt;/span&gt; MapEntryExpression should no
t be visited here
        at org.codehaus.groovy.classgen.AsmClassGenerator.visitMapEntryExpression(AsmClassGenerator.java:3123)
        at org.codehaus.groovy.ast.expr.MapEntryExpression.visit(MapEntryExpression.java:37)
        at org.codehaus.groovy.classgen.AsmClassGenerator.visitAndAutoboxBoolean(AsmClassGenerator.java:4078)
        at org.codehaus.groovy.classgen.AsmClassGenerator.makeCallSite(AsmClassGenerator.java:2148)
        at org.codehaus.groovy.classgen.AsmClassGenerator.makeCall(AsmClassGenerator.java:1982)
        at org.codehaus.groovy.classgen.AsmClassGenerator.makeCall(AsmClassGenerator.java:1968)
        at org.codehaus.groovy.classgen.AsmClassGenerator.visitStaticMethodCallExpression(AsmClassGenerator.java:2376)
        at org.codehaus.groovy.ast.expr.StaticMethodCallExpression.visit(StaticMethodCallExpression.java:43)
        at org.codehaus.groovy.classgen.AsmClassGenerator.visitAndAutoboxBoolean(AsmClassGenerator.java:4078)
        at org.codehaus.groovy.classgen.AsmClassGenerator.visitCastExpression(AsmClassGenerator.java:1891)
        at org.codehaus.groovy.classgen.AsmClassGenerator.assignmentCastAndVisit(AsmClassGenerator.java:4017)
        at org.codehaus.groovy.classgen.AsmClassGenerator.evaluateEqual(AsmClassGenerator.java:3969)
        at org.codehaus.groovy.classgen.AsmClassGenerator.visitBinaryExpression(AsmClassGenerator.java:1446)
        at org.codehaus.groovy.ast.expr.BinaryExpression.visit(BinaryExpression.java:49)
        at org.codehaus.groovy.classgen.AsmClassGenerator.visitAndAutoboxBoolean(AsmClassGenerator.java:4078)
        at org.codehaus.groovy.classgen.AsmClassGenerator.visitExpressionStatement(AsmClassGenerator.java:1427)
        at org.codehaus.groovy.ast.stmt.ExpressionStatement.visit(ExpressionStatement.java:40)
        at org.codehaus.groovy.ast.CodeVisitorSupport.visitBlockStatement(CodeVisitorSupport.java:35)
        at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitBlockStatement(ClassCodeVisitorSupport.java:165)
        at org.codehaus.groovy.classgen.AsmClassGenerator.visitBlockStatement(AsmClassGenerator.java:700)
        at org.codehaus.groovy.ast.stmt.BlockStatement.visit(BlockStatement.java:51)
        at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitClassCodeContainer(ClassCodeVisitorSupport.java:101)
        at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitConstructorOrMethod(ClassCodeVisitorSupport.java:112)
        at org.codehaus.groovy.classgen.AsmClassGenerator.visitStdMethod(AsmClassGenerator.java:587)
        at org.codehaus.groovy.classgen.AsmClassGenerator.visitConstructorOrMethod(AsmClassGenerator.java:562)
        at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitMethod(ClassCodeVisitorSupport.java:123)
        at org.codehaus.groovy.classgen.AsmClassGenerator.visitMethod(AsmClassGenerator.java:657)
        at org.codehaus.groovy.ast.ClassNode.visitContents(ClassNode.java:1039)
        at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitClass(ClassCodeVisitorSupport.java:50)
        at org.codehaus.groovy.classgen.AsmClassGenerator.visitClass(AsmClassGenerator.java:275)
        at org.codehaus.groovy.control.CompilationUnit$11.call(CompilationUnit.java:751)
        at org.codehaus.groovy.control.CompilationUnit.applyToPrimaryClassNodes(CompilationUnit.java:958)
        at org.codehaus.groovy.control.CompilationUnit.doPhaseOperation(CompilationUnit.java:517)
        at org.codehaus.groovy.control.CompilationUnit.processPhaseOperations(CompilationUnit.java:495)
        at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:472)
        at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:456)
        at org.codehaus.groovy.tools.FileSystemCompiler.compile(FileSystemCompiler.java:57)
        at org.codehaus.groovy.tools.FileSystemCompiler.doCompilation(FileSystemCompiler.java:170)
        at org.codehaus.groovy.tools.FileSystemCompiler.commandLineCompile(FileSystemCompiler.java:138)
        at org.codehaus.groovy.tools.FileSystemCompiler.main(FileSystemCompiler.java:152)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.groovy.tools.GroovyStarter.rootLoader(GroovyStarter.java:108)
        at org.codehaus.groovy.tools.GroovyStarter.main(GroovyStarter.java:130)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12815188">GROOVY-4219</key>
            <summary>Error during class generation for simple java/groovy program</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blackdrag">Jochen Theodorou</assignee>
                                    <reporter username="aclement">Andy Clement</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 May 2010 16:58:17 +0000</created>
                <updated>Tue, 14 Dec 2010 10:03:23 +0000</updated>
                            <resolved>Tue, 14 Dec 2010 10:03:23 +0000</resolved>
                                    <version>1.7.2</version>
                                    <fixVersion>1.7.6</fixVersion>
                    <fixVersion>1.8-beta-3</fixVersion>
                                    <component>Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14479154" author="paulk" created="Fri, 21 May 2010 17:49:29 +0000"  >&lt;p&gt;Is related to map-based part of &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-3613&quot; title=&quot;Need to supply hand-crafted constructor for enum having &amp;gt;1 field&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-3613&quot;&gt;&lt;del&gt;GROOVY-3613&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14479135" author="paulk" created="Fri, 21 May 2010 21:36:27 +0000"  >&lt;p&gt;Possible potential patch attached - perhaps stepping stone towards full support of automatic map style support.&lt;/p&gt;

&lt;p&gt;The patch gets rid of the error BUG error message and instead at least complains about missing a user provided Map constructor.&lt;/p&gt;

&lt;p&gt;Test case:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;enum&lt;/span&gt; T {
  ALPHA(x:1, y:2),
  BETA(3, y:4),
  GAMMA(5, 6)

  def T(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[] args) {
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.y = args[0].y
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.x = args[1]
  }

  T(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; x, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; y) {
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.x = x
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.y = y
  }

  T(Map m) {
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.x = m.x
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.y = m.y
  }

  def x, y

  @Override &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; toString() { &lt;span class=&quot;code-quote&quot;&gt;&quot;T[x: $x, y: $y]&quot;&lt;/span&gt; }
}
    
println T.ALPHA
println T.BETA
println T.GAMMA
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Output:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;T[x: 1, y: 2]
T[x: 3, y: 4]
T[x: 5, y: 6]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If you leave out the Map and Object[] constructors you will get something like:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;groovy.lang.GroovyRuntimeException: Could not find matching constructor for: T(java.lang.String, java.lang.Integer, java.util.LinkedHashMap)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The error message includes the implicit params for enums but that is what we do elsewhere too at the moment.&lt;/p&gt;

&lt;p&gt;The patch isn&apos;t perfect. Unfortunately, at the moment if you leave in the Object[] constructor but provide the plain Map style usage you get something like:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.ClassCastException: java.util.LinkedHashMap cannot be cast to [Ljava.lang.Object;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14469569" author="roshandawrani" created="Wed, 16 Jun 2010 08:57:50 +0000"  >&lt;p&gt;I think, until we can support it fully, it may be better to reject the unhandled code at compilation time instead of letting it compile and then fail at runtime with GroovyRuntimeException or ClassCastException depending on what constructors have or have not been provided.&lt;/p&gt;

&lt;p&gt;What about giving a clear error message that tells the user to provide the expected constructors, if they are not?&lt;/p&gt;</comment>
                            <comment id="14469613" author="blackdrag" created="Thu, 17 Jun 2010 10:13:24 +0000"  >&lt;p&gt;the correct way for the runtime to react if there is a Object[] is to wrap the LinkedHashMap in a Object[] and then call the Object[] constructor with it. If additionally a Map based constructor is provided, then this one is to take. A Bug! message is not acceptable. And the runtime message after Paul&apos;s patch isn&apos;t that good either. &lt;/p&gt;

&lt;p&gt;So for the beginning I think that making it fail at compile time is a good choice. But I would not close this issue for this.&lt;/p&gt;</comment>
                            <comment id="14470557" author="blackdrag" created="Tue, 14 Dec 2010 10:03:23 +0000"  >&lt;p&gt;The issue is now fixed with a new error message, that will ensure there won&apos;t be any BUG! error message. For implementing the feature itself I created &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-4582&quot; title=&quot;allow named argument list expressions for enum field init code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-4582&quot;&gt;&lt;del&gt;GROOVY-4582&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310260">
                    <name>Related</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12814589">GROOVY-3613</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12722276" name="bug.zip" size="1354" author="aclement" created="Fri, 21 May 2010 16:58:17 +0000"/>
                            <attachment id="12722431" name="groovy4219_enumMapConstructor.patch" size="1470" author="paulk" created="Fri, 21 May 2010 21:36:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 50 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2crpz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>