<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:17:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-4441] method File.eachFile is not returning full directory content</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-4441</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;We have got a weird issue. A directory contains several files having extended chars in their filenames due to some changes made on the server back and forth.&lt;/p&gt;

&lt;p&gt;When trying to loop of those files with the method File.eachFile(Closure), we will get only the files with names made of ascii chars only, not the others.&lt;/p&gt;

&lt;p&gt;We have found a workaround with File.traverse which gives us the full content of the directory.&lt;/p&gt;

&lt;p&gt;Can you confirm there is a bug with File.eachFile(Closure) ?&lt;/p&gt;

&lt;p&gt;Thx&lt;/p&gt;</description>
                <environment>Linux almach.cc.cec.eu.int 2.6.18-194.3.1.el5 #1 SMP Sun May 2 04:17:42 EDT 2010 x86_64 x86_64 x86_64 GNU/Linux&lt;br/&gt;
Red Hat Enterprise Linux Server release 5.5 (Tikanga)&lt;br/&gt;
Groovy Version: 1.7.3 JVM: 1.6.0_20</environment>
        <key id="12815357">GROOVY-4441</key>
            <summary>method File.eachFile is not returning full directory content</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="guillaume">Guillaume Sauthier</assignee>
                                    <reporter username="gorisis">Issa Gorissen</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Sep 2010 10:02:05 +0000</created>
                <updated>Wed, 15 Dec 2010 16:57:02 +0000</updated>
                            <resolved>Thu, 30 Sep 2010 09:34:37 +0000</resolved>
                                    <version>1.7.3</version>
                                    <fixVersion>1.7.6</fixVersion>
                    <fixVersion>1.8-beta-3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14470141" author="guillaume" created="Tue, 28 Sep 2010 10:15:27 +0000"  >&lt;p&gt;Looking at File#eachFile, I don&apos;t see anything that would lead me to think we&apos;re not iterating over all the files. We&apos;re calling Java&apos;s file.listFiles() which I&apos;d expect to return the full list of files.&lt;/p&gt;</comment>
                            <comment id="14470179" author="gorisis" created="Tue, 28 Sep 2010 10:19:54 +0000"  >&lt;p&gt;Ok, but can you compare File.traverse and File.eachFile.&lt;/p&gt;

&lt;p&gt;There mus be a diff between the two, as on our case, File.traverse successfully reports all the files...&lt;/p&gt;</comment>
                            <comment id="14470197" author="blackdrag" created="Tue, 28 Sep 2010 16:58:13 +0000"  >&lt;p&gt;comparing them is not so easy, the traverse version is very complex... let us look at eachFile...&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;checkDir(self);
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; File[] files = self.listFiles();
&lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; check because of http://bugs.sun.com/bugdatabase/view_bug.&lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt;?bug_id=4803836
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (files == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (File file : files) {
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((fileType != FileType.FILES &amp;amp;&amp;amp; file.isDirectory()) ||
      (fileType != FileType.DIRECTORIES &amp;amp;&amp;amp; file.isFile())){
    closure.call(file);
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;let us reduce that to this version:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void eachFile(File self) {
  &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; File[] files = self.listFiles();
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (files == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
  &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (File file : files) {
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(file);
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Issa, I suggest you try out if this little piece of code does show you all the files or not. If it does, then the only possible error I see is in the if-statement. This way we can maybe pinpoint the problem fast.&lt;/p&gt;</comment>
                            <comment id="14470209" author="gorisis" created="Wed, 29 Sep 2010 09:07:46 +0000"  >&lt;p&gt;Yes, the 2nd version is working fine...&lt;/p&gt;</comment>
                            <comment id="14470178" author="guillaume" created="Wed, 29 Sep 2010 10:30:31 +0000"  >&lt;p&gt;In the loop, could you print &quot;File ${file} Dir? ${file.isDirectory()} File? ${file.isFile()}&quot; and tell us what it gives?&lt;br/&gt;
It looks like some files which aren&apos;t directories are not considered &quot;files&quot; by Java.&lt;/p&gt;</comment>
                            <comment id="14470029" author="gorisis" created="Wed, 29 Sep 2010 10:36:26 +0000"  >&lt;p&gt;Right on the spot, the files which method eachFile is not working for are returning both false for the two tests (neither file nor directory).&lt;/p&gt;

&lt;p&gt;I guess I should open a bug at Oracle then ?&lt;/p&gt;</comment>
                            <comment id="14470125" author="blackdrag" created="Wed, 29 Sep 2010 10:37:23 +0000"  >&lt;p&gt;is it a normal file you can open?&lt;/p&gt;</comment>
                            <comment id="14470142" author="blackdrag" created="Wed, 29 Sep 2010 10:38:45 +0000"  >&lt;p&gt;we can still &quot;fix&quot; this issue by testing explicitly for FileType.ANY and then skip the other tests&lt;/p&gt;</comment>
                            <comment id="14470198" author="blackdrag" created="Wed, 29 Sep 2010 10:41:47 +0000"  >&lt;p&gt;the if would then be &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;(fileType == FileType.ANY ||
 fileType != FileType.FILES &amp;amp;&amp;amp; file.isDirectory() ||
 fileType != FileType.DIRECTORIES &amp;amp;&amp;amp; file.isFile())
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

</comment>
                            <comment id="14470163" author="gorisis" created="Wed, 29 Sep 2010 10:42:07 +0000"  >&lt;p&gt;Here are some outputs&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;(CITnet-Acc1@COMREF-107) $ ll
total 388
-rwxrwxrwx 1 studio users 62976 Sep 10 13:15 45521_[EACEA] Autorisation d&apos;acc&#195;&#168;s pour NOTIS.msg
-rwxrwxrwx 1 studio users 57856 Sep 10 13:15 45522_[EAHC] Autorisation d&apos;acc&#195;&#168;s pour NOTIS.msg
-rwxrwxrwx 1 studio users 97280 Sep 10 13:15 45523_[ERC] Autorisation d&apos;acc?s pour NOTIS.msg
-rwxrwxrwx 1 studio users 65536 Sep 10 13:15 45524_[REA] Autorisation d&apos;acc?s pour NOTIS.msg
-rwxrwxrwx 1 studio users 68096 Sep 10 13:15 45525_[TENEA] Autorisation d&apos;acc?s pour NOTIS.msg
-rw-r--r-- 1 studio users    71 Sep 29 11:45 48730_New&#195;&#169;&#195;&#160;&#195;&#167;&#195;&#160;&#195;&#168;.txt
-rwxrwxrwx 1 studio users  1419 Sep 27 17:10 ls.class
-rwxrwxrwx 1 studio users   355 Sep 29 17:33 ls.groovy
-rwxrwxrwx 1 studio users  1054 Sep 27 17:10 ls.java
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;(CITnet-Acc1@COMREF-107) $ groovy ls.groovy
45521_[EACEA] Autorisation d&apos;acc&#195;&#168;s pour NOTIS.msg
48730_New&#195;&#169;&#195;&#160;&#195;&#167;&#195;&#160;&#195;&#168;.txt
ls.java
45522_[EAHC] Autorisation d&apos;acc&#195;&#168;s pour NOTIS.msg
ls.groovy
ls.&lt;span class=&quot;code-keyword&quot;&gt;class
&lt;/span&gt;File /ec/acc/server/citnet/jira/data/jira3/attachments/attachments/COMREF/COMREF-107/45521_[EACEA] Autorisation d&apos;acc&#195;&#168;s pour NOTIS.msg Dir? &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; File? &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
File /ec/acc/server/citnet/jira/data/jira3/attachments/attachments/COMREF/COMREF-107/48730_New&#195;&#169;&#195;&#160;&#195;&#167;&#195;&#160;&#195;&#168;.txt Dir? &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; File? &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
File /ec/acc/server/citnet/jira/data/jira3/attachments/attachments/COMREF/COMREF-107/ls.java Dir? &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; File? &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
File /ec/acc/server/citnet/jira/data/jira3/attachments/attachments/COMREF/COMREF-107/45524_[REA] Autorisation d&apos;acc&#239;&#191;&#189;s pour NOTIS.msg Dir? &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; File? &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
File /ec/acc/server/citnet/jira/data/jira3/attachments/attachments/COMREF/COMREF-107/45522_[EAHC] Autorisation d&apos;acc&#195;&#168;s pour NOTIS.msg Dir? &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; File? &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
File /ec/acc/server/citnet/jira/data/jira3/attachments/attachments/COMREF/COMREF-107/45523_[ERC] Autorisation d&apos;acc&#239;&#191;&#189;s pour NOTIS.msg Dir? &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; File? &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
File /ec/acc/server/citnet/jira/data/jira3/attachments/attachments/COMREF/COMREF-107/ls.groovy Dir? &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; File? &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
File /ec/acc/server/citnet/jira/data/jira3/attachments/attachments/COMREF/COMREF-107/ls.&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Dir? &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; File? &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
File /ec/acc/server/citnet/jira/data/jira3/attachments/attachments/COMREF/COMREF-107/45525_[TENEA] Autorisation d&apos;acc&#239;&#191;&#189;s pour NOTIS.msg Dir? &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; File? &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;(CITnet-Acc1@COMREF-107) $ cat ls.groovy
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.File;

        &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.getProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;user.dir&quot;&lt;/span&gt;)).eachFile { File att -&amp;gt;
                println att.name
        }
self = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.getProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;user.dir&quot;&lt;/span&gt;))
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; File[] files = self.listFiles();
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (files == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
  &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (File file : files) {
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;File ${file} Dir? ${file.isDirectory()} File? ${file.isFile()}&quot;&lt;/span&gt;);
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14470221" author="gorisis" created="Wed, 29 Sep 2010 10:45:50 +0000"  >&lt;p&gt;I have made the test in pure Java, and there is definitely a problem inside the JVM. We&apos;re talking about version java version &quot;1.6.0_20&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.6.0_20-b02)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 16.3-b01, mixed mode)&lt;/p&gt;


&lt;p&gt;I will open a issue at Oracle&apos;s and see.&lt;/p&gt;

&lt;p&gt;Thank for your support!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 8 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bwo7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>