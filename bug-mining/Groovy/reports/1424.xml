<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:18:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-4237] LocalVariableTable index attributes aren&apos;t consecutive</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-4237</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;The background: &lt;a href=&quot;http://media.io&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;media.io&lt;/a&gt; is built on Groovy and Pico Web Remoting (PWR). I was observing in one case that PicoContainer would not pick up the URL parameters correctly, i.e. you would have&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Keks {
void blorb(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; rofl) {
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and calling &lt;tt&gt;&lt;a href=&quot;http://bla.bla/Keks/blorb?rofl=copter&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bla.bla/Keks/blorb?rofl=copter&lt;/a&gt;&lt;/tt&gt; would result in PicoContainer not finding the right method.&lt;br/&gt;
PicoContainer uses &lt;a href=&quot;http://paranamer.codehaus.org/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Paranamer&lt;/a&gt; which in turn is based on ASM. I found that the generated class files have a LocalVariableTable with non-consecutive index values.&lt;br/&gt;
Paranamer expects consecutive index values in the LocalVariableTable and so is unable to find them for the method.&lt;br/&gt;
I&apos;m attaching a screenshot of what this looks like in jclasslib.&lt;br/&gt;
I don&apos;t really know if this is legal as per the class file spec &amp;#8211; if it is, close this.&lt;br/&gt;
I&apos;ll try to get a patch done for Paranamer, too.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12815171">GROOVY-4237</key>
            <summary>LocalVariableTable index attributes aren&apos;t consecutive</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blackdrag">Jochen Theodorou</assignee>
                                    <reporter username="johann">Johann</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Jun 2010 14:42:06 +0000</created>
                <updated>Tue, 14 Dec 2010 08:37:44 +0000</updated>
                            <resolved>Tue, 14 Dec 2010 08:31:16 +0000</resolved>
                                    <version>1.7.0</version>
                    <version>1.7.2</version>
                                    <fixVersion>1.7.6</fixVersion>
                    <fixVersion>1.8-beta-3</fixVersion>
                                    <component>bytecode</component>
                    <component>class generator</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14469495" author="blackdrag" created="Sat, 5 Jun 2010 14:06:02 +0000"  >&lt;p&gt;actually your comment is abit surprising for me. On the first parameters we have no influence. The first parameters are &quot;this&quot;, if the method is not static (always index 0) and then, in a consecutive way, all the parameters. Only after that the local variables do follow. I am pretty sure &quot;rofl&quot; in your example has the index 1. The local variable table does not define the local variables. Instead it says, that if that an that index is used in that and that line, it means it is that and that variable. It is for example perfectly right to use index x firts for the variable &quot;foo&quot; and later for the variable &quot;bar&quot;. Also the index does not have to be consecutive, we don&apos;t even have to &quot;declare&quot; all variables we use there. The first purpose of this table is so that a debugger can use the information to display values under a name. The standard does not really limit how the indexes are used. Only that the first few are for &quot;this&quot; and the method parameters is predefined. Ah yes, if I use a long or double, then this &quot;variable&quot; would need two index places. A consecutive with the next index being the one before+1 would be an impossible requirement then. So I strongly assume PicoContainer gets confused internally. &lt;/p&gt;

&lt;p&gt;I haven&apos;t closed this yet, because your example still is puzzling me a bit. Can you confirm the index for the first parameter is 1? Because if it is... why does PicoContainer even care?&lt;/p&gt;</comment>
                            <comment id="14469578" author="johann" created="Sat, 5 Jun 2010 14:15:54 +0000"  >&lt;p&gt;If you say that the index order isn&apos;t specified (apart from the &lt;tt&gt;this&lt;/tt&gt; parameter you mentioned), that&apos;s fine with me. The problem then exists in Paranamer (which I&apos;m already trying to patch).&lt;/p&gt;

&lt;p&gt;On Groovy classes that PWR works fine with, the first parameter is assigned index 1. Only in this class, the indices are different and start at 3. And that throws off Paranamer and in turn PWR.&lt;/p&gt;

&lt;p&gt;PicoContainer itself doesn&apos;t care, Pico Web Remoting (PWR) does. Pico Web Remoting uses Paranamer to extract the parameter names from classes so you can do the &lt;tt&gt;&lt;a href=&quot;http://bla.bla/Keks/blorb?rofl=copter&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bla.bla/Keks/blorb?rofl=copter&lt;/a&gt;&lt;/tt&gt; style URLs mentioned above.&lt;/p&gt;</comment>
                            <comment id="14469474" author="blackdrag" created="Sat, 5 Jun 2010 14:30:42 +0000"  >&lt;p&gt;No I said the prder is specified for &quot;this&quot; and the parameter. And with that I mean that index 0 is (in a non static method) &quot;this&quot; and the first parameter starts always at 1. If that is reflected in the local variable table or not, is a different thing. There is one case where this could differ. If a parameter is used in a closure, then it is very possible the parameter is wrapped in a groovy.lang.Reference and this one will use the the name of the parameter with of course a different index. Can you verify this is the case? If it is, then it should be good enough to add the parameter to the variable table for the very small part that it is not wrapped in a Reference. &lt;/p&gt;</comment>
                            <comment id="14469562" author="johann" created="Sun, 6 Jun 2010 07:24:23 +0000"  >&lt;p&gt;You are right about closures changing the behaviour. When I use method parameters in a closure, the indexes aren&apos;t 0, 1, 2 but 0, 3, 4 as you can see in the screenshot.&lt;/p&gt;</comment>
                            <comment id="14469509" author="blackdrag" created="Mon, 7 Jun 2010 02:06:23 +0000"  >&lt;p&gt;To summarize: the &quot;bug&quot; would be, that PicoContainer cannot find the parameter name, because for this parameter we have no local variablte table entry anymore, and instead we use a local varibale, which is not a parameter as replacement. The fix would be to let the parameter have a LocalVariableTable entry for the time it is used (which is not much), before the wrapping happens.&lt;/p&gt;</comment>
                            <comment id="14470537" author="blackdrag" created="Tue, 14 Dec 2010 08:31:16 +0000"  >&lt;p&gt;should be fixed now&lt;/p&gt;</comment>
                            <comment id="14470576" author="johann" created="Tue, 14 Dec 2010 08:37:44 +0000"  >&lt;p&gt;Thanks Jochen, will give it a try. This should make my classes look really clean again because the workaround was quite ugly.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12722630" name="Screenshot.png" size="53224" author="johann" created="Fri, 4 Jun 2010 14:42:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 50 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2cfyf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>