<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:22:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-11068] VerifyError when using generic container in closure</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-11068</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;The following code produces a &lt;tt&gt;VerifyError&lt;/tt&gt;. It appears to this amateur eye that the code in the closure actually performs an &lt;tt&gt;invokedynamic&lt;/tt&gt; on the nested method reference and &lt;em&gt;then&lt;/em&gt; calls the Iterable&apos;s &lt;tt&gt;forEach&lt;/tt&gt;, when I would expect it to push a reference to the method handle somehow and then let that be passed to &lt;tt&gt;forEach&lt;/tt&gt;.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
@Grab(&lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.pdfbox:pdfbox:2.0.28&apos;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.pdfbox.pdmodel.*
@Grab(&lt;span class=&quot;code-quote&quot;&gt;&apos;io.vavr:vavr:0.10.4&apos;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; io.vavr.control.Try
@CompileStatic
@POJO
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Bug {
    public static void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;... args) {
        PDDocument doc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PDDocument()
        extraPages().forEach {
            it.forEach(doc::addPage)
        }
    }
    static Try&amp;lt;Iterable&amp;lt;PDPage&amp;gt;&amp;gt; extraPages() {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Try.success([&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;]) &lt;span class=&quot;code-comment&quot;&gt;// value present only to cause the iteration to proceed; NPE is the expected outcome here
&lt;/span&gt;    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.VerifyError: Bad type on operand stack
Exception Details:
  Location:
    Bug$_main_closure1.doCall(Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;)Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Void&lt;/span&gt;; @11: invokedynamic
  Reason:
    Type &lt;span class=&quot;code-quote&quot;&gt;&apos;java/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&apos;&lt;/span&gt; (current frame, stack[1]) is not assignable to &lt;span class=&quot;code-quote&quot;&gt;&apos;org/apache/pdfbox/pdmodel/PDDocument&apos;&lt;/span&gt;
  Current Frame:
    bci: @11
    flags: { }
    locals: { &lt;span class=&quot;code-quote&quot;&gt;&apos;Bug$_main_closure1&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;java/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&apos;&lt;/span&gt; }
    stack: { &lt;span class=&quot;code-quote&quot;&gt;&apos;java/lang/Iterable&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;java/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&apos;&lt;/span&gt; }
  Bytecode:
    0000000: 2bc0 0024 2ab4 001c b600 2aba 003f 0000
    0000010: b900 4302 0001 ba00 5000 00b0          

	at Bug.main(Bug.groovy:16)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; java.lang.&lt;span class=&quot;code-object&quot;&gt;Void&lt;/span&gt; doCall(java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;);
    descriptor: (Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;)Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Void&lt;/span&gt;;
    flags: (0x0001) ACC_PUBLIC
    Code:
      stack=2, locals=2, args_size=2
         0: aload_1
         1: checkcast     #36                 &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;java/lang/Iterable
&lt;/span&gt;         4: aload_0
         5: getfield      #28                 &lt;span class=&quot;code-comment&quot;&gt;// Field doc:Lgroovy/lang/Reference;
&lt;/span&gt;         8: invokevirtual #42                 &lt;span class=&quot;code-comment&quot;&gt;// Method groovy/lang/Reference.get:()Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;
&lt;/span&gt;        11: invokedynamic #63,  0             &lt;span class=&quot;code-comment&quot;&gt;// InvokeDynamic #0:accept:(Lorg/apache/pdfbox/pdmodel/PDDocument;)Ljava/util/function/Consumer;
&lt;/span&gt;        16: invokeinterface #67,  2           &lt;span class=&quot;code-comment&quot;&gt;// InterfaceMethod java/lang/Iterable.forEach:(Ljava/util/function/Consumer;)V
&lt;/span&gt;        21: aconst_null
        22: invokedynamic #80,  0             &lt;span class=&quot;code-comment&quot;&gt;// InvokeDynamic #1:&lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt;:(Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;)Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Void&lt;/span&gt;;
&lt;/span&gt;        27: areturn
      LineNumberTable:
        line 17: 0
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
            0      28     0  &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;   LBug$_main_closure1;
            0      28     1    it   Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;
    MethodParameters:
      Name                           Flags
      it
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13537373">GROOVY-11068</key>
            <summary>VerifyError when using generic container in closure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="chrylis">Christopher Smith</reporter>
                        <labels>
                            <label>VerifyError</label>
                    </labels>
                <created>Tue, 23 May 2023 17:00:26 +0000</created>
                <updated>Fri, 6 Sep 2024 16:48:28 +0000</updated>
                            <resolved>Sun, 28 May 2023 14:54:01 +0000</resolved>
                                    <version>4.0.12</version>
                                    <fixVersion>3.0.18</fixVersion>
                    <fixVersion>4.0.13</fixVersion>
                                    <component>Static compilation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17726944" author="emilles" created="Sun, 28 May 2023 14:54:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/commit/40231c26be588c971a3fc36061f8ea88feeb0d2f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/40231c26be588c971a3fc36061f8ea88feeb0d2f&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/groovy/commit/cfc22e46ce02ffde86fbd8401ba2b71e9dc71a48&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/cfc22e46ce02ffde86fbd8401ba2b71e9dc71a48&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13538650">GROOVY-11079</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13591186">GROOVY-11471</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 24 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1i3dc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>