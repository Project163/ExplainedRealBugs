<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:59:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-8806] Immutable classes break in groovy 2.5.2</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-8806</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;We&apos;ve being running tests of gradle plugins with latest gradle nightly release which upgraded to groovy 2.5.2&lt;/p&gt;

&lt;p&gt;Since then, we&apos;ve seen multiple plugins breaking with errors around immutability:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;gt; Unsupported type (org.ajoberstar.grgit.Branch) found &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; field &lt;span class=&quot;code-quote&quot;&gt;&apos;trackingBranch&apos;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; constructing immutable &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.ajoberstar.grgit.Branch.
Immutable classes only support properties with effectively immutable types including:
- Strings, primitive types, wrapper types, &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;, BigInteger and BigDecimal, enums
- classes annotated with @KnownImmutable and known immutables (java.awt.Color, java.net.URI)
- &lt;span class=&quot;code-object&quot;&gt;Cloneable&lt;/span&gt; classes, collections, maps and arrays, and other classes with special handling
(java.util.Date and various java.time.* classes and interfaces)
Other restrictions apply, please see the groovydoc &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; ImmutableOptions &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; further details&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I was wondering if this change is related to &lt;a href=&quot;https://github.com/apache/groovy/commit/3471f55ea5839ab3c9dfa51cdca081bc7b4c020e#diff-8f745c460bc1abf332f21067b21ec551R754&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/3471f55ea5839ab3c9dfa51cdca081bc7b4c020e#diff-8f745c460bc1abf332f21067b21ec551R754&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;And also,&#160; looks like gradle plugins that use the gradleApi and are compiled with groovy 2.4 could break with groovy 2.5 with usages like this one&lt;/p&gt;</description>
                <environment></environment>
        <key id="13186712">GROOVY-8806</key>
            <summary>Immutable classes break in groovy 2.5.2</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="rpalcolea">Roberto Perez Alcolea</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 Sep 2018 19:53:22 +0000</created>
                <updated>Thu, 13 Dec 2018 10:05:31 +0000</updated>
                            <resolved>Thu, 4 Oct 2018 03:50:40 +0000</resolved>
                                    <version>2.5.2</version>
                                    <fixVersion>3.0.0-alpha-4</fixVersion>
                    <fixVersion>2.5.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16636494" author="githubbot" created="Wed, 3 Oct 2018 06:01:08 +0000"  >&lt;p&gt;GitHub user paulk-asert opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/803&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/803&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8806&quot; title=&quot;Immutable classes break in groovy 2.5.2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8806&quot;&gt;&lt;del&gt;GROOVY-8806&lt;/del&gt;&lt;/a&gt;: Immutable classes break in groovy 2.5.2&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/paulk-asert/groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/paulk-asert/groovy&lt;/a&gt; groovy8806&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/803.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/803.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #803&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit baeb7c05e58e8163646a7d4bf1cfc18eadea4a76&lt;br/&gt;
Author: Paul King &amp;lt;paulk@...&amp;gt;&lt;br/&gt;
Date:   2018-10-03T00:30:16Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8806&quot; title=&quot;Immutable classes break in groovy 2.5.2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8806&quot;&gt;&lt;del&gt;GROOVY-8806&lt;/del&gt;&lt;/a&gt;: Immutable classes break in groovy 2.5.2&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16636538" author="paulk" created="Wed, 3 Oct 2018 07:10:08 +0000"  >&lt;p&gt;I have sent an email to the dev list but to re-iterate:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I have a potential fix for this issue. I&apos;d appreciate if anyone who has had issues could apply the PR and see if it fixes their problems:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/pull/803&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/803&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;For anyone who has dived into the current implementation, they will know that currently a collector annotation definition is converted into a helper class of sorts containing the serialized annotation data so that pre-compiled meta-annotations can be processed.&lt;br/&gt;
Basically the fix allows the original annotation to be left in the codebase and instead creates an inner helper class with the serialized data and a reference to the class in an annotation attribute called serializeClass on AnnotationCollector.&lt;br/&gt;
I don&apos;t face the issue described in &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8806&quot; title=&quot;Immutable classes break in groovy 2.5.2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8806&quot;&gt;&lt;del&gt;GROOVY-8806&lt;/del&gt;&lt;/a&gt; when using Groovy 2.5.2 normally with asmResolving in place, I only see it when using classloader resolution. The proposed fix works for either and is backwards compatible with 2.4.x and 2.5.2 and earlier.&lt;br/&gt;
My cross version testcase which isn&apos;t covered by existing tests is to create an immutable class in 2.5.3-SNAPSHOT that references a property with a 2.4.15 compiled @Immutable type and another with a 2.5.2 compiled @Immutable type and compile it up with asmResolving set to false.&lt;/p&gt;

&lt;p&gt;Normally, serializeClass is set automatically for you as part of AnnotationCollector processing but there is also a fallback to the existing behavior by explicitly setting the serializeClass to the collector annotation. So in the following example, Foo will use the new approach and Bar the current one as per 2.5.2.&lt;/p&gt;

&lt;p&gt;@AnnotationCollector&lt;br/&gt;
@ToString&lt;br/&gt;
@interface Foo { }&lt;/p&gt;

&lt;p&gt;@AnnotationCollector(serializeClass=Bar)&lt;br/&gt;
@EqualsAndHashCode&lt;br/&gt;
@interface Bar { }&lt;/p&gt;

&lt;p&gt;Currently, the proposal makes the new approach the default. Any feedback welcome.&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="16637589" author="rpalcolea" created="Wed, 3 Oct 2018 22:59:36 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulk&quot; class=&quot;user-hover&quot; rel=&quot;paulk&quot;&gt;paulk&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks for the quick fix&lt;/p&gt;

&lt;p&gt;I was able to reproduce in 2.5.2 with:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Grab(group=&lt;span class=&quot;code-quote&quot;&gt;&apos;org.ajoberstar&apos;&lt;/span&gt;, module=&lt;span class=&quot;code-quote&quot;&gt;&apos;grgit&apos;&lt;/span&gt;, version=&lt;span class=&quot;code-quote&quot;&gt;&apos;1.9.3&apos;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.ajoberstar.grgit.Branch

Branch branch = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Branch(trackingBranch: &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Branch())
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I pulled your branch and ran the same against the same code and it works.&lt;/p&gt;

&lt;p&gt;Do you think this will be released soon? are there any timing plans for 2.5.3?&#160;&lt;/p&gt;</comment>
                            <comment id="16637684" author="githubbot" created="Thu, 4 Oct 2018 01:27:47 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/803&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/803&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16637780" author="paulk" created="Thu, 4 Oct 2018 03:50:40 +0000"  >&lt;p&gt;Proposed PR merged.&lt;/p&gt;</comment>
                            <comment id="16637781" author="paulk" created="Thu, 4 Oct 2018 03:51:20 +0000"  >&lt;p&gt;I plan to kick off voting in the next 24 hrs pending any further feedback in the meantime.&lt;/p&gt;</comment>
                            <comment id="16640113" author="rpalcolea" created="Fri, 5 Oct 2018 17:29:12 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulk&quot; class=&quot;user-hover&quot; rel=&quot;paulk&quot;&gt;paulk&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Is there a open Roadmap where we can see potential release dates for this? Really appreciate the quick fix! this will save thousands of gradle builds!&lt;/p&gt;</comment>
                            <comment id="16640447" author="paulk" created="Fri, 5 Oct 2018 23:03:57 +0000"  >&lt;p&gt;Voting on a release candidate with this change included is currently under way. As per Apache guidelines, voting is held open for 3 days.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://lists.apache.org/thread.html/917109f3ee3685caccdf9d52766732dcf71267e2d1774eae613785d2@%3Cdev.groovy.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/917109f3ee3685caccdf9d52766732dcf71267e2d1774eae613785d2@%3Cdev.groovy.apache.org%3E&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="16645528" author="rpalcolea" created="Wed, 10 Oct 2018 21:00:08 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulk&quot; class=&quot;user-hover&quot; rel=&quot;paulk&quot;&gt;paulk&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Did the vote got approved? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 5 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3yd8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>