<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:59:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-7362] Can&apos;t compile Java class extending Groovy abstract class with explicit GroovyObject interface</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-7362</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;That&apos;s a more advanced version of &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-3877&quot; title=&quot;problem trying to extend an abstract groovy class with a java class&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-3877&quot;&gt;&lt;del&gt;GROOVY-3877&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Compile classes.groovy:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;AbstractClass &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; ConcreteClass &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; GroovyObject {}

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ConcreteClass {}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then compile JavaClass.java:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;JavaClass &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; AbstractClass {}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You get:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;JavaClass.java:1: error: JavaClass is not abstract and does not override abstract method setMetaClass(MetaClass) in GroovyObject&lt;br/&gt;
public class JavaClass extends AbstractClass {&lt;br/&gt;
       ^&lt;br/&gt;
1 error&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That&apos;s likely because setMetaClass is added as a synthetic method in ConcreteClass and not overridden in AbstractClass.&lt;/p&gt;

&lt;p&gt;This also happens without explicit GroovyObject interface when using joint compilation (&lt;a href=&quot;https://youtrack.jetbrains.com/issue/IDEA-137722#comment=27-952814&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://youtrack.jetbrains.com/issue/IDEA-137722#comment=27-952814&lt;/a&gt;). Before generating stubs, &quot;implements GroovyObject&quot; is added to Groovy classes, and if it so happens that AbstractClass is visited before ConcreteClass, then &quot;implements GroovyObject&quot; will be added to both Groovy classes, but the (synthetic) implementations somehow end up being only in ConcreteClass.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12811558">GROOVY-7362</key>
            <summary>Can&apos;t compile Java class extending Groovy abstract class with explicit GroovyObject interface</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="gromopetr">Peter Gromov</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Mar 2015 03:12:11 +0000</created>
                <updated>Wed, 16 Jan 2019 12:08:19 +0000</updated>
                            <resolved>Sat, 15 Sep 2018 03:07:03 +0000</resolved>
                                    <version>2.4.0</version>
                                    <fixVersion>3.0.0-alpha-4</fixVersion>
                                    <component>Compiler</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14480805" author="gillius" created="Fri, 27 Mar 2015 10:05:23 +0000"  >&lt;p&gt;I can confirm that if in the abstract class I override every method of GroovyObject (in my case I just called super in each), the compiler errors from javac go away.&lt;/p&gt;</comment>
                            <comment id="14509005" author="gillius" created="Thu, 23 Apr 2015 13:12:57 +0000"  >&lt;p&gt;I thought this worked for me before, but now I just tried to put it into actual use, and while it compiled I got a stack overflow when running getMetaClass. In dynamic mode, the call is delgated to ScriptBytecodeAdapter to call invokeMethodOnSuperN, but the first thing this does is call getMetaClass so it can call invokeMethod with isCallToSuper true. This actually sort of makes sense, since every function call in Groovy goes through the Metaclass.&lt;/p&gt;

&lt;p&gt;I annotated all of the GroovyObject override methods with @CompileStatic and it worked, since it generates in bytecode a call directly to parent class.&lt;/p&gt;</comment>
                            <comment id="14509148" author="gillius" created="Thu, 23 Apr 2015 14:33:07 +0000"  >&lt;p&gt;I have to report that the override method and @CompileStatic doesn&apos;t work consistently. Depending on how the project is built (whether clean build or not) and what system you are on, I get different results. Any of the following might happen:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;It works&lt;/li&gt;
	&lt;li&gt;Class fails to load because a bytecode verifier error about an illegal invokeVirtual call in one of the overridden methods&lt;/li&gt;
	&lt;li&gt;Class compiles and loads, but compiler generated call to GroovyDefaultMethods.getMetaClass instead of the super&apos;s method, which causes a stack overflow&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;In my case I had an abstract class extending a concrete one, and since the concrete base class was never instantiated, I could make it abstract. Making both the classes abstract so far has been working for me and is less intrusive than overriding all GroovyObject methods.&lt;/p&gt;</comment>
                            <comment id="16615574" author="paulk" created="Sat, 15 Sep 2018 03:07:03 +0000"  >&lt;p&gt;The given example seems to have been fixed by other issues - I imagine related issues as per comments are covered by &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8495&quot; title=&quot;GroovyObject method implementations are marked with ACC_SYNTHETIC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8495&quot;&gt;&lt;del&gt;GROOVY-8495&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16645938" author="paulk" created="Thu, 11 Oct 2018 04:01:54 +0000"  >&lt;p&gt;Removing 2_5_X fix version for now since &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8495&quot; title=&quot;GroovyObject method implementations are marked with ACC_SYNTHETIC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8495&quot;&gt;&lt;del&gt;GROOVY-8495&lt;/del&gt;&lt;/a&gt; was removed for now from 2_5_X. We can add a 2.5.x fix version if/when we backport &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8495&quot; title=&quot;GroovyObject method implementations are marked with ACC_SYNTHETIC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8495&quot;&gt;&lt;del&gt;GROOVY-8495&lt;/del&gt;&lt;/a&gt; to 2_5_X.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13143134">GROOVY-8495</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 5 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2csfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>