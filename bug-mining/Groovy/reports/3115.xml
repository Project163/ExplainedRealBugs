<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:53:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-7927] Static type checking</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-7927</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;I have a problem running this code: &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;Test.groovy&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.CompileStatic 
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.function.Function 
  
@CompileStatic 
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Test { 
        &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) { 
               &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; code fails 
&lt;/span&gt;                Function&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; fct = { &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; n -&amp;gt; 
                        -n 
                } 
  
                &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; one works but it is too verbose 
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// Function&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; fct = ({ &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; n -&amp;gt; 
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// -n 
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// } as Function&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;) 
&lt;/span&gt;  
                println fct.apply(10) 
        } 
} 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Error: &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Test.groovy: 9: &lt;span class=&quot;error&quot;&gt;&amp;#91;Static type checking&amp;#93;&lt;/span&gt; - Incompatible generic argument types. Cannot assign java.util.function.Function &amp;lt;java.lang.Integer, groovy.lang.Closure&amp;gt; to: java.util.function.Function &amp;lt;Integer, Integer&amp;gt;&lt;br/&gt;
 @ line 9, column 36. &lt;br/&gt;
   	Function&amp;lt;Integer, Integer&amp;gt; fct = { Integer n -&amp;gt; &lt;br/&gt;
                                      ^ &lt;br/&gt;
1 error &lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="13002443">GROOVY-7927</key>
            <summary>Static type checking</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blackdrag">Jochen Theodorou</assignee>
                                    <reporter username="cazacugmihai">Cazacu Mihai</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Sep 2016 19:04:46 +0000</created>
                <updated>Wed, 1 Feb 2017 23:18:43 +0000</updated>
                            <resolved>Sat, 3 Sep 2016 10:50:25 +0000</resolved>
                                    <version>2.4.7</version>
                                    <fixVersion>2.4.8</fixVersion>
                                    <component>Static compilation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15459399" author="cazacugmihai" created="Fri, 2 Sep 2016 19:38:08 +0000"  >&lt;p&gt;Can you estimate a ETA for this issue, please? I have hundreds of classes that are negatively impacted by it and I&apos;m in a situation where I have to think if switching back to Java is an alternative in order to keep the deadline of the project. Using &quot;as&quot; in each of these classes it makes the code too ugly.&lt;/p&gt;

&lt;p&gt;Thank you!&lt;/p&gt;</comment>
                            <comment id="15459866" author="blackdrag" created="Fri, 2 Sep 2016 23:19:47 +0000"  >&lt;p&gt;does this mean this issue is a regression? Because I don&#180;t think this worked in any 2.4 or 2.3 version of Groovy. Did you automatically convert those hundreds of classes from Java to Groovy? And can you be a bit more clear about an appropriate ETA for your case?&lt;/p&gt;</comment>
                            <comment id="15460559" author="cazacugmihai" created="Sat, 3 Sep 2016 07:01:42 +0000"  >&lt;p&gt;No, it is not a regression. We recently switched (manually modified hundreds of classes) from synchronous to async calls and we had to use a lot of this kind of code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Function&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, Future&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;&amp;gt; asyncFct1 = { ... }
Function&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, Future&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;&amp;gt; asyncFct2 = { ... }
Function&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, Future&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;&amp;gt; asyncFct3 = { ... }
chain(asyncFct1, asyncFct2, asyncFct3) { ... } 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;IntellijIdea did not find any syntax problems in code until we run it. If we remove &lt;em&gt;@CompileStatic&lt;/em&gt; annotation everything it works fine but I prefer do not do this.&lt;/p&gt;

&lt;p&gt;About ETA, it will be nice to have it ASAP. Until then we can comment that &lt;em&gt;@CompileStatic&lt;/em&gt;. But, if you think that the fix of this issue will take some significant time, we will port our code (only the affected one) to Java (because of the performance reason).&lt;/p&gt;

&lt;p&gt;Thank you!&lt;/p&gt;</comment>
                            <comment id="15460879" author="blackdrag" created="Sat, 3 Sep 2016 10:50:26 +0000"  >&lt;p&gt;fixed&lt;/p&gt;</comment>
                            <comment id="15460896" author="cazacugmihai" created="Sat, 3 Sep 2016 11:05:50 +0000"  >&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I&apos;ll test it now. Thank you so much!&lt;/p&gt;</comment>
                            <comment id="15461105" author="cazacugmihai" created="Sat, 3 Sep 2016 13:28:37 +0000"  >&lt;p&gt;It works. Thanks again!&lt;/p&gt;</comment>
                            <comment id="15461676" author="cazacugmihai" created="Sat, 3 Sep 2016 20:49:01 +0000"  >&lt;p&gt;@&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blackdrag&quot; class=&quot;user-hover&quot; rel=&quot;blackdrag&quot;&gt;blackdrag&lt;/a&gt;: Using the latest version of groovy (built from &lt;a href=&quot;https://github.com/apache/groovy.git&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;source&lt;/a&gt;) I have another static compilation issue (which doesn&apos;t exist in &amp;lt;= 2.4.7). The reproducer can be found &lt;a href=&quot;https://github.com/cazacugmihai/groovy_static_bug&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;. Please clone the project and try to run &lt;em&gt;GroovyTest&lt;/em&gt; class. &lt;/p&gt;

&lt;p&gt;Do you consider that I should open another issue for this one? Thanks!&lt;/p&gt;</comment>
                            <comment id="15462703" author="blackdrag" created="Sun, 4 Sep 2016 10:27:47 +0000"  >&lt;p&gt;I tried &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.*
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.elasticsearch.index.query.QueryBuilder

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; org.elasticsearch.index.query.QueryBuilders.rangeQuery

@Grapes(
        @Grab(group=&lt;span class=&quot;code-quote&quot;&gt;&apos;org.elasticsearch&apos;&lt;/span&gt;, module=&lt;span class=&quot;code-quote&quot;&gt;&apos;elasticsearch&apos;&lt;/span&gt;, version=&lt;span class=&quot;code-quote&quot;&gt;&apos;1.5.2&apos;&lt;/span&gt;)
)
@CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;GroovyTest {

    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void addHandler(List&amp;lt;QueryBuilder&amp;gt; filters) {
        filters &amp;lt;&amp;lt; rangeQuery(&lt;span class=&quot;code-quote&quot;&gt;&apos;test&apos;&lt;/span&gt;)
        &lt;span class=&quot;code-comment&quot;&gt;// but &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; one works:
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// filters &amp;lt;&amp;lt; (QueryBuilder) rangeQuery(&lt;span class=&quot;code-quote&quot;&gt;&apos;test&apos;&lt;/span&gt;)
&lt;/span&gt;    }

    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
        List&amp;lt;QueryBuilder&amp;gt; list = []
        addHandler(list)
        list.each { println(it) }
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and this compiles and executes&lt;/p&gt;</comment>
                            <comment id="15462725" author="cazacugmihai" created="Sun, 4 Sep 2016 10:44:56 +0000"  >&lt;p&gt;Using the latest version of groovy (master branch) from Github? I know, it is not related to this issue but I just wanted you to know.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12936647">GROOVY-7748</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 11 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3378v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>