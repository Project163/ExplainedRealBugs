<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:26:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-11615] Groovy has trouble type inferencing for Collections. The offender is Collectors.asBlah set of methods. It needs the generic type &lt;A.Y.X&gt; to be added explicitly</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-11615</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Interfaces {
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; myThing() {
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; myArray = Arrays.asList(&lt;span class=&quot;code-quote&quot;&gt;&quot;123&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;1354&quot;&lt;/span&gt;);
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; mySet = myArray.stream().collect(Collectors.toSet());
&#160; &#160; &#160; &#160;&#160;
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-comment&quot;&gt;// This call will fail
&lt;/span&gt;&#160; &#160; &#160; &#160; &lt;span class=&quot;code-comment&quot;&gt;// &#160; &#160; &#160;Failed to find &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;method &lt;span class=&quot;code-quote&quot;&gt;&apos;getBytes(java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;)&apos;&lt;/span&gt; or
&lt;/span&gt;&#160; &#160; &#160; &#160; &lt;span class=&quot;code-comment&quot;&gt;// &#160; &#160; &#160;instance method &lt;span class=&quot;code-quote&quot;&gt;&apos;getBytes()&apos;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the type: java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;
&lt;/span&gt;&#160; &#160; &#160; &#160; &lt;span class=&quot;code-comment&quot;&gt;// To make it work change the previous line to
&lt;/span&gt;&#160; &#160; &#160; &#160; &lt;span class=&quot;code-comment&quot;&gt;// &#160; &#160; &#160;&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; mySet = myArray.stream().collect(Collectors.&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;toSet());
&lt;/span&gt;&#160; &#160; &#160; &#160; mySet.forEach(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;::getBytes);
&#160; &#160; }
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Most Collectors.&amp;lt;methods&amp;gt; need a fully qualified type for the generic parameter, without which the compile will fail (sometimes detect an Object type instead of the right one)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13615099">GROOVY-11615</key>
            <summary>Groovy has trouble type inferencing for Collections. The offender is Collectors.asBlah set of methods. It needs the generic type &lt;A.Y.X&gt; to be added explicitly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="chavan77">Saravanan</reporter>
                        <labels>
                    </labels>
                <created>Sun, 13 Apr 2025 07:26:54 +0000</created>
                <updated>Wed, 18 Jun 2025 19:55:23 +0000</updated>
                            <resolved>Tue, 22 Apr 2025 18:02:34 +0000</resolved>
                                    <version>4.0.24</version>
                                                    <component>Static compilation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17943916" author="emilles" created="Sun, 13 Apr 2025 12:24:54 +0000"  >&lt;p&gt;This works in Groovy 5 with the addition of &quot;@TypeChecked&quot; or &quot;@CompileStatic&quot;.  Can you test with that?&lt;/p&gt;</comment>
                            <comment id="17944963" author="chavan77" created="Wed, 16 Apr 2025 07:06:15 +0000"  >&lt;p&gt;You are right, it works in 5.x, but this does not work (I am not able to figure out a pattern here, sorry)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; com.google.common.collect.ImmutableMap;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.stream.Collectors;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Interfaces {
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; myThing() {
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; myArray = ImmutableMap.of(&lt;span class=&quot;code-quote&quot;&gt;&quot;123&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;1354&quot;&lt;/span&gt;);
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-comment&quot;&gt;// This call will fail.
&lt;/span&gt;&#160; &#160; &#160; &#160; &lt;span class=&quot;code-comment&quot;&gt;// &#160; &#160;Incompatible &lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt; argument types. Cannot assign java.util.Map&amp;lt;java.lang.&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;
&lt;/span&gt;&#160; &#160; &#160; &#160; &lt;span class=&quot;code-comment&quot;&gt;// &#160; &#160;to: java.util.Map&amp;lt;java.lang.&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;
&lt;/span&gt;&#160; &#160; &#160; &#160; &lt;span class=&quot;code-comment&quot;&gt;// To make it work change it to explicitly define the toMap generics
&lt;/span&gt;&#160; &#160; &#160; &#160; &lt;span class=&quot;code-comment&quot;&gt;// &#160; &#160;Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; mySet = myArray.entrySet().stream().map(entry -&amp;gt;
&lt;/span&gt;&#160; &#160; &#160; &#160; &lt;span class=&quot;code-comment&quot;&gt;// &#160; &#160; &#160; &#160;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.format(entry.getKey() + &lt;span class=&quot;code-quote&quot;&gt;&quot;-&quot;&lt;/span&gt; + entry.getValue())
&lt;/span&gt;&#160; &#160; &#160; &#160; &lt;span class=&quot;code-comment&quot;&gt;// &#160; &#160;).collect(Collectors.&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;toMap(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;::length, value -&amp;gt; value));
&lt;/span&gt;&#160; &#160; &#160; &#160; Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; mySet = myArray.entrySet().stream().map(entry -&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.format(entry.getKey() + &lt;span class=&quot;code-quote&quot;&gt;&quot;-&quot;&lt;/span&gt; + entry.getValue())
&#160; &#160; &#160; &#160; ).collect(Collectors.toMap(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;::length, value -&amp;gt; value));
&#160; &#160; }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17944981" author="paulk" created="Wed, 16 Apr 2025 07:58:26 +0000"  >&lt;p&gt;Just adding a self-contained runnable example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Grab(&lt;span class=&quot;code-quote&quot;&gt;&apos;com.google.guava:guava:33.4.8-jre&apos;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; com.google.common.collect.ImmutableMap
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.stream.Collectors

@groovy.transform.CompileStatic
def method() {
  &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; orig = ImmutableMap.of(&lt;span class=&quot;code-quote&quot;&gt;&apos;123&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;1354&apos;&lt;/span&gt;)
  &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; orig.collectEntries{ k, v -&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;$k-$v&quot;&lt;/span&gt;.with{ [it.size(), it] }} == [8: &lt;span class=&quot;code-quote&quot;&gt;&apos;123-1354&apos;&lt;/span&gt;]
  &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; orig
    .entrySet()
    .stream()
    .map(entry -&amp;gt; entry.key + &lt;span class=&quot;code-quote&quot;&gt;&apos;-&apos;&lt;/span&gt; + entry.value)
    .collect(Collectors.toMap(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;::length, value -&amp;gt; value)) == [8: &lt;span class=&quot;code-quote&quot;&gt;&apos;123-1354&apos;&lt;/span&gt;]
}

method()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17946498" author="emilles" created="Tue, 22 Apr 2025 18:02:34 +0000"  >&lt;p&gt;I&apos;m going to close this as a duplicate.  10054 tracks a number of test cases and the link back to this can be used to check on these as well.&lt;/p&gt;</comment>
                            <comment id="17951781" author="emilles" created="Thu, 15 May 2025 14:50:31 +0000"  >&lt;p&gt;The specific case given in the description works under Groovy 5.  The order of operations was changed slightly for method call checking.  Closures and lambdas were visited after finding the candidate method(s).  This was extended to method pointer and references, so that all functional elements get the same treatment.&lt;/p&gt;

&lt;p&gt;This order change allows for more information to reduce the set of candidate methods for &quot;getBytes&quot;.  Groovy 5 is able to work out a single method and record String instead of Object as the expected argument metadata.&lt;/p&gt;

&lt;p&gt;The other examples that describe a weakness in the inferencing algorithm around collectors is represented in 10054.&lt;/p&gt;</comment>
                            <comment id="17982797" author="emilles" created="Wed, 18 Jun 2025 19:55:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/pull/2255/commits/47c8e448eab32500b55772df2437c9f81be6ad96&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/2255/commits/47c8e448eab32500b55772df2437c9f81be6ad96&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13374680">GROOVY-10054</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>groovy</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            20 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1vc2o:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>