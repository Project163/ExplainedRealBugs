<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:20:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-8737] STC Method resolution fails if other methods with more parameters exist</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-8737</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Given two classes as follows&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@groovy.transform.CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;A {
&#160;&#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; msg( &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; key, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[] args ) { &lt;span class=&quot;code-quote&quot;&gt;&quot;key=$key, args=$args&quot;&lt;/span&gt; }
&#160;&#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; msg( &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; key, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[] args, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[] parts ) { &lt;span class=&quot;code-quote&quot;&gt;&quot;key=$key, args=$args, parts=$parts&quot;&lt;/span&gt; }
&#160;&#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; msg( &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; key, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[] args, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] names ) { &lt;span class=&quot;code-quote&quot;&gt;&quot;key=$key, args=$args, names=$names&quot;&lt;/span&gt; }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@groovy.transform.CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;B {
&#160;&#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main( &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args ) {
&#160;&#160;&#160;&#160;&#160; println A.msg( &lt;span class=&quot;code-quote&quot;&gt;&apos;hello&apos;&lt;/span&gt;, [ &lt;span class=&quot;code-quote&quot;&gt;&apos;world&apos;&lt;/span&gt; ] as &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[] )
&#160;&#160; }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;will not compile with the error&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;B.groovy: 4: [Static type checking] - Reference to method is ambiguous. Cannot choose between [java.lang.String A#msg(java.lang.String, java.lang.Object[], java.lang.Object[]), java.lang.String A#msg(java.lang.String, java.lang.Object[], java.lang.String[])]
&#160;@ line 4, column 15.
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; println A.msg( &apos;hello&apos;, [ &apos;world&apos; ] as Object[] )
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Though there&apos;s a perfect match for the called method, it tries to choose one of the longer signatures.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13177938">GROOVY-8737</key>
            <summary>STC Method resolution fails if other methods with more parameters exist</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="patric42">Patric Bechtel</reporter>
                        <labels>
                            <label>varargs</label>
                    </labels>
                <created>Thu, 9 Aug 2018 10:20:35 +0000</created>
                <updated>Fri, 10 Feb 2023 21:40:08 +0000</updated>
                            <resolved>Tue, 23 Aug 2022 15:59:31 +0000</resolved>
                                    <version>2.4.15</version>
                    <version>3.0.0-alpha-3</version>
                    <version>2.5.1</version>
                                    <fixVersion>4.0.5</fixVersion>
                    <fixVersion>2.5.19</fixVersion>
                    <fixVersion>3.0.13</fixVersion>
                                    <component>Static compilation</component>
                    <component>Static Type Checker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16574703" author="paulk" created="Thu, 9 Aug 2018 11:14:56 +0000"  >&lt;p&gt;Groovy allows you to use an array to indicate varargs. It&apos;s something from JDK 1.4 days in fact but has so far always been kept for backwards compatibility. And with varargs you can have no supplied args hence they fall back to the same signature.&lt;/p&gt;</comment>
                            <comment id="16574721" author="patric42" created="Thu, 9 Aug 2018 11:44:37 +0000"  >&lt;p&gt;I always understood that (useful) feature as looking at the very last parameter and only if there&apos;s more parameters in the call than the method has.&lt;/p&gt;

&lt;p&gt;This case is reverse IMHO: There&apos;s two parameters given, and groovy is trying to match more to put zero-sized arrays there. Which is weird.&lt;/p&gt;</comment>
                            <comment id="16574727" author="paulk" created="Thu, 9 Aug 2018 11:48:00 +0000"  >&lt;p&gt;Well, both scenarios apply. With varargs, I can supply 0 parts for the second variant 0 names for the 3rd variant. In that scenario all three methods would match.&lt;/p&gt;</comment>
                            <comment id="16574740" author="patric42" created="Thu, 9 Aug 2018 11:58:56 +0000"  >&lt;p&gt;Yeah, ok &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;But given the principle of least surprise, this is quite surprising.&lt;/p&gt;

&lt;p&gt;I didn&apos;t know that anyone was using multiple varargs - wasn&apos;t it constrained to the last parameter?&lt;/p&gt;</comment>
                            <comment id="16574749" author="paulk" created="Thu, 9 Aug 2018 12:12:14 +0000"  >&lt;p&gt;Yes, parts and names are the last parameter for those variants.&lt;/p&gt;</comment>
                            <comment id="16574810" author="patric42" created="Thu, 9 Aug 2018 12:58:35 +0000"  >&lt;p&gt;Couldn&apos;t we just stop trying vararg variants if we &lt;b&gt;have&lt;/b&gt; a perfect match already?&lt;/p&gt;</comment>
                            <comment id="16575606" author="paulk" created="Fri, 10 Aug 2018 00:33:53 +0000"  >&lt;p&gt;It&apos;s trickier than it looks. For your example, the two param variant actually has Object[] for its last argument so varargs would apply to that as well, so is it a perfect match?&lt;/p&gt;</comment>
                            <comment id="16575992" author="patric42" created="Fri, 10 Aug 2018 09:12:34 +0000"  >&lt;p&gt;Why search for a longer parameter set if we find one which satisfies the call? If the first method in A wasn&apos;t there, I would understand the behaviour.&lt;/p&gt;

&lt;p&gt;The easiest argument is to use CompileDynamic on B - it&apos;ll just work the way I expected it. It&apos;s just STC which doesn&apos;t.&lt;/p&gt;</comment>
                            <comment id="17583664" author="emilles" created="Tue, 23 Aug 2022 14:52:32 +0000"  >&lt;p&gt;When multiple variadic methods match the argument-parameter checks, the distance for vargs is smaller for longer parameter lists.  So &lt;tt&gt;msg(String key, Object[] args)&lt;/tt&gt; is dropped as an option.&lt;/p&gt;</comment>
                            <comment id="17583717" author="emilles" created="Tue, 23 Aug 2022 15:59:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/commit/50026f1feee51c7bdf5f340100ff801d486f08e9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/50026f1feee51c7bdf5f340100ff801d486f08e9&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/groovy/commit/7824bd62fc4cc21e1a6b6b376f4835f6f6049d1a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/7824bd62fc4cc21e1a6b6b376f4835f6f6049d1a&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 12 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3wvh3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>