<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:03:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-569] java.lang.ClassFormatError running groovy script from shell (bash)</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-569</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Tried to run a very simple (print &quot;helloWorld&quot;) script.  Runs fine using groovy compiler, groovysh, but throws exception when trying to run as standalone script.&lt;br/&gt;
Script, exception, compiler output, script output, env and groovysh output below:&lt;/p&gt;

&lt;p&gt;% cat helloWorld&lt;br/&gt;
#!/usr/bin/env groovy&lt;br/&gt;
print &quot;helloWorld&quot;&lt;/p&gt;

&lt;p&gt;% ./helloWorld&lt;br/&gt;
Exception in thread &quot;main&quot; java.lang.ClassFormatError:  (Illegal Class name &quot;&quot;)&lt;br/&gt;
        at java.lang.ClassLoader.defineClass0(Native Method)&lt;br/&gt;
        at java.lang.ClassLoader.defineClass(ClassLoader.java:537)&lt;br/&gt;
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:123)&lt;br/&gt;
        at groovy.lang.GroovyClassLoader.access$100(GroovyClassLoader.java:78)&lt;br/&gt;
        at groovy.lang.GroovyClassLoader$ClassCollector.onClassNode(GroovyClassLoader.java:470)&lt;br/&gt;
        at groovy.lang.GroovyClassLoader$ClassCollector.call(GroovyClassLoader.java:480)&lt;br/&gt;
        at org.codehaus.groovy.control.CompilationUnit$5.call(CompilationUnit.java:674)&lt;br/&gt;
        at org.codehaus.groovy.control.CompilationUnit.applyToPrimaryClassNodes(CompilationUnit.java:932)&lt;br/&gt;
        at org.codehaus.groovy.control.CompilationUnit.classgen(CompilationUnit.java:591)&lt;br/&gt;
        at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:485)&lt;br/&gt;
        at groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:226)&lt;br/&gt;
        at groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:154)&lt;br/&gt;
        at groovy.lang.GroovyShell$2.run(GroovyShell.java:212)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
        at groovy.lang.GroovyShell.run(GroovyShell.java:210)&lt;br/&gt;
        at groovy.lang.GroovyShell.main(GroovyShell.java:94)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:324)&lt;br/&gt;
        at org.codehaus.classworlds.Launcher.launchStandard(Launcher.java:410)&lt;br/&gt;
        at org.codehaus.classworlds.Launcher.launch(Launcher.java:344)&lt;br/&gt;
        at org.codehaus.classworlds.Launcher.main(Launcher.java:461)&lt;/p&gt;

&lt;p&gt;% groovy helloWorld&lt;br/&gt;
helloWorld&lt;/p&gt;

&lt;p&gt;% env&lt;br/&gt;
KDE_MULTIHEAD=false&lt;br/&gt;
SSH_AGENT_PID=19891&lt;br/&gt;
HOSTNAME=darwin.triactive.com&lt;br/&gt;
JRUN_HOME=/dev/null&lt;br/&gt;
TERM=xterm&lt;br/&gt;
SHELL=/bin/bash&lt;br/&gt;
HISTSIZE=1000&lt;br/&gt;
GTK_RC_FILES=/etc/gtk/gtkrc:/home/fran/.gtkrc:/home/fran/.gtkrc-kde&lt;br/&gt;
CVSROOT=:pserver:fran@cvs:/usr/local/cvs&lt;br/&gt;
GS_LIB=/home/fran/.kde/share/fonts&lt;br/&gt;
OLDPWD=/home/fran/dev/groovy&lt;br/&gt;
QTDIR=/usr/lib/qt-3.1&lt;br/&gt;
JBOSS_HOME=/usr/local/jboss&lt;br/&gt;
USER=fran&lt;br/&gt;
LD_LIBRARY_PATH=/usr/local/lib&lt;br/&gt;
LS_COLORS=no=00:fi=00:di=00;34:ln=00;36:pi=40;33:so=00;35:bd=40;33;01:cd=40;33;01:or=01;05;37;41:mi=01;05;37;41:ex=00;32:&lt;b&gt;.cmd=00;32:&lt;/b&gt;.exe=00;32:&lt;b&gt;.com=00;32:&lt;/b&gt;.btm=00;32:&lt;b&gt;.bat=00;32:&lt;/b&gt;.sh=00;32:&lt;b&gt;.csh=00;32:&lt;/b&gt;.tar=00;31:&lt;b&gt;.tgz=00;31:&lt;/b&gt;.arj=00;31:&lt;b&gt;.taz=00;31:&lt;/b&gt;.lzh=00;31:&lt;b&gt;.zip=00;31:&lt;/b&gt;.z=00;31:&lt;b&gt;.Z=00;31:&lt;/b&gt;.gz=00;31:&lt;b&gt;.bz2=00;31:&lt;/b&gt;.bz=00;31:&lt;b&gt;.tz=00;31:&lt;/b&gt;.rpm=00;31:&lt;b&gt;.cpio=00;31:&lt;/b&gt;.jpg=00;35:&lt;b&gt;.gif=00;35:&lt;/b&gt;.bmp=00;35:&lt;b&gt;.xbm=00;35:&lt;/b&gt;.xpm=00;35:&lt;b&gt;.png=00;35:&lt;/b&gt;.tif=00;35:&lt;br/&gt;
SSH_AUTH_SOCK=/tmp/ssh-XXwRPpdo/agent.19848&lt;br/&gt;
SESSION_MANAGER=local/darwin.triactive.com:/tmp/.ICE-unix/19960&lt;br/&gt;
KONSOLE_DCOP=DCOPRef(konsole-19982,konsole)&lt;br/&gt;
MAVEN_HOME=/usr/local/src/maven-1.0-rc4&lt;br/&gt;
PATH=/home/fran/bin:/home/fran/dev/ant/bin:/usr/local/epsilon11/bin:/usr/local/groovy/bin:/home/fran/bin:/home/fran/dev/ant/bin:/usr/local/epsilon11/bin:/usr/local/groovy/bin:/usr/java/bin:/usr/local/resin/bin:/usr/local/jboss/bin:/usr/local/apache/bin:/usr/local/epsilon11/bin:/usr/local/bin:/usr/bin:/bin:/usr/X11R6/bin:/home/fran/bin:/usr/local/src/maven-1.0-rc4/bin:.&lt;br/&gt;
MAIL=/var/spool/mail/fran&lt;br/&gt;
KONSOLE_DCOP_SESSION=DCOPRef(konsole-19982,session-4)&lt;br/&gt;
PWD=/home/fran&lt;br/&gt;
INPUTRC=/etc/inputrc&lt;br/&gt;
XMODIFIERS=@im=none&lt;br/&gt;
JAVA_HOME=/usr/java&lt;br/&gt;
LANG=en_US.UTF-8&lt;br/&gt;
GDMSESSION=KDE&lt;br/&gt;
SSH_ASKPASS=/usr/libexec/openssh/gnome-ssh-askpass&lt;br/&gt;
SHLVL=3&lt;br/&gt;
HOME=/home/fran&lt;br/&gt;
LOGNAME=fran&lt;br/&gt;
GROOVY_HOME=/usr/local/groovy&lt;br/&gt;
RESIN_HOME=/usr/local/resin&lt;br/&gt;
PKG_CONFIG_PATH=/usr/local/lib/pkgconfig&lt;br/&gt;
LESSOPEN=|/usr/bin/lesspipe.sh %s&lt;br/&gt;
DISPLAY=:0&lt;br/&gt;
APACHE_HOME=/usr/local/apache&lt;br/&gt;
DEV=/home/fran/dev/&lt;br/&gt;
G_BROKEN_FILENAMES=1&lt;br/&gt;
COLORTERM=&lt;br/&gt;
XAUTHORITY=/home/fran/.Xauthority&lt;br/&gt;
_=/usr/bin/env&lt;/p&gt;

&lt;p&gt;% groovysh&lt;br/&gt;
Lets get Groovy!&lt;br/&gt;
================&lt;br/&gt;
Version: 1.0-beta-6-SNAPSHOT JVM: 1.4.2_04-b05&lt;br/&gt;
Type &apos;exit&apos; to terminate the shell&lt;br/&gt;
Type &apos;help&apos; for command help&lt;/p&gt;

&lt;p&gt;1&amp;gt; print &quot;helloWorld&quot;&lt;br/&gt;
2&amp;gt; go&lt;br/&gt;
helloWorld&lt;br/&gt;
1&amp;gt; quit&lt;br/&gt;
%&lt;/p&gt;</description>
                <environment>% uname -a&lt;br/&gt;
Linux darwin.triactive.com 2.4.20-8 #1 Thu Mar 13 17:54:28 EST 2003 i686 i686 i386 GNU/Linux</environment>
        <key id="12812674">GROOVY-569</key>
            <summary>java.lang.ClassFormatError running groovy script from shell (bash)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="frank">YunFeng Ma</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Jul 2004 11:59:00 +0000</created>
                <updated>Sat, 19 Jan 2008 03:06:14 +0000</updated>
                            <resolved>Fri, 18 Jan 2008 16:00:34 +0000</resolved>
                                    <version>1.1-rc-1</version>
                                    <fixVersion>1.5.2</fixVersion>
                    <fixVersion>1.6-rc-2</fixVersion>
                                        <due></due>
                            <votes>2</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14460533" author="johnstump" created="Wed, 21 Jul 2004 17:41:07 +0000"  >&lt;p&gt;The problem is that your file has no extension on it. Even adding a &quot;.&quot; on the end of the filename would work. Somewhere in the code it expects the filename to have an extension, and if it doesn&apos;t, it won&apos;t handle this condition. I tried to find it, but failed as it went deep into the bowels of the compiler. Someone else want to take a crack at it?&lt;/p&gt;

&lt;p&gt;This is yet another example documented on the web site that DOES NOT WORK!!&lt;/p&gt;</comment>
                            <comment id="14460617" author="guillaume" created="Thu, 9 Dec 2004 08:14:47 +0000"  >&lt;p&gt;There&apos;s a mandatory extension for groovy source files.&lt;/p&gt;</comment>
                            <comment id="14460704" author="dbdahl" created="Mon, 3 Jan 2005 11:20:49 +0000"  >&lt;p&gt;This is indeed a bug and the issue should not be closed.&lt;br/&gt;
The problem is a leading &quot;./&quot; when the executed script is in the current working directory.&lt;/p&gt;

&lt;p&gt;Consider the &quot;Hello World&quot; example at &lt;a href=&quot;http://groovy.codehaus.org/Running&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://groovy.codehaus.org/Running&lt;/a&gt;.  &lt;/p&gt;

&lt;p&gt;&amp;gt; #!/usr/bin/env groovy&lt;br/&gt;
&amp;gt; println(&quot;Hello world&quot;)&lt;br/&gt;
&amp;gt; for (a in this.args) &lt;/p&gt;
{
&amp;gt;   println(&quot;Argument: &quot; + a)
&amp;gt; }

&lt;p&gt;When executed as &quot;groovy helloWorld&quot;, everything is fine.&lt;/p&gt;

&lt;p&gt;When executed as &quot;groovy ./helloWorld&quot;, the exception occurs:&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; java.lang.ClassFormatError: Illegal class name &quot;&quot; in class file&lt;br/&gt;
        at java.lang.ClassLoader.defineClass1(Native Method)&lt;br/&gt;
        at java.lang.ClassLoader.defineClass(ClassLoader.java:620)&lt;br/&gt;
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)&lt;br/&gt;
        at groovy.lang.GroovyClassLoader.access$100(GroovyClassLoader.java:70)&lt;br/&gt;
        at groovy.lang.GroovyClassLoader$ClassCollector.onClassNode(GroovyClassLoader.java:478)&lt;br/&gt;
        at groovy.lang.GroovyClassLoader$ClassCollector.call(GroovyClassLoader.java:488)&lt;br/&gt;
        at org.codehaus.groovy.control.CompilationUnit$5.call(CompilationUnit.java:587)&lt;br/&gt;
        at org.codehaus.groovy.control.CompilationUnit.applyToPrimaryClassNodes(CompilationUnit.java:822)&lt;br/&gt;
        at org.codehaus.groovy.control.CompilationUnit.classgen(CompilationUnit.java:525)&lt;br/&gt;
        at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:432)&lt;br/&gt;
        at groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:234)&lt;br/&gt;
        at groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:203)&lt;br/&gt;
        at groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:153)&lt;br/&gt;
        at groovy.lang.GroovyShell$2.run(GroovyShell.java:221)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
        at groovy.lang.GroovyShell.run(GroovyShell.java:219)&lt;br/&gt;
        at groovy.lang.GroovyShell.run(GroovyShell.java:163)&lt;br/&gt;
        at groovy.ui.GroovyMain.processOnce(GroovyMain.java:366)&lt;br/&gt;
        at groovy.ui.GroovyMain.run(GroovyMain.java:232)&lt;br/&gt;
        at groovy.ui.GroovyMain.process(GroovyMain.java:218)&lt;br/&gt;
        at groovy.ui.GroovyMain.main(GroovyMain.java:122)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:585)&lt;br/&gt;
        at org.codehaus.classworlds.Launcher.launchStandard(Launcher.java:410)&lt;br/&gt;
        at org.codehaus.classworlds.Launcher.launch(Launcher.java:344)&lt;br/&gt;
        at org.codehaus.classworlds.Launcher.main(Launcher.java:461)&lt;/p&gt;</comment>
                            <comment id="14463384" author="russel" created="Mon, 29 Oct 2007 07:17:58 +0000"  >&lt;p&gt;I think it is not reasonable to assume that a file name has an extension in order to be used with a relative path.  &lt;/p&gt;</comment>
                            <comment id="14463320" author="russel" created="Mon, 29 Oct 2007 07:19:10 +0000"  >&lt;p&gt;Updating this issue to be the marker for a problem that affects relative path usage but not absolute path usage for executing scripts.&lt;/p&gt;</comment>
                            <comment id="14463406" author="russel" created="Fri, 2 Nov 2007 04:23:21 +0000"  >&lt;p&gt;Kicking this bug since it is a bug and it will affect all non-Windows users who write scripts &amp;#8211; since not having extensions on a file name is standard procedure.&lt;/p&gt;

&lt;p&gt;If we want to close this one and reopen &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-2081&quot; title=&quot;Script executes correctly when called with absolute path, but fails when called with relative path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-2081&quot;&gt;&lt;del&gt;GROOVY-2081&lt;/del&gt;&lt;/a&gt; instead as the marker for this problem, then that is fine.&lt;/p&gt;</comment>
                            <comment id="14477769" author="paulk" created="Fri, 11 Jan 2008 18:15:50 +0000"  >&lt;p&gt;I think this issue is solved but I don&apos;t have sufficient environments/platforms to test it on to be doubly sure. It appears that the need for an extension was removed some time ago but that in some unix environments there was a space being added to the script filename during command line parsing. I plan to mark this issue as closed in the coming days if I receive no further feedback.&lt;/p&gt;</comment>
                            <comment id="14464066" author="philwalk9" created="Fri, 18 Jan 2008 14:43:46 +0000"  >&lt;p&gt;This appears to be fixed in 1.5.1, based on a quick check ...&lt;/p&gt;</comment>
                            <comment id="14464152" author="russel" created="Sat, 19 Jan 2008 03:06:14 +0000"  >&lt;p&gt;The script:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;#! /usr/bin/env groovy
&lt;span class=&quot;code-comment&quot;&gt;// -*- mode:groovy encoding:UTF-8 -*-
&lt;/span&gt;
println ( &lt;span class=&quot;code-quote&quot;&gt;&apos;Hello World&apos;&lt;/span&gt; )
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;stored in a file GROOVY_569, without an extension and with the execute bit set, certainly executes fine on Ubuntu with Groovy Subversion HEAD as at 2008-01-18 using the commands:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;GROOVY_569
./GROOVY_569
/home/users/russel/Progs/OddsByLanguage/Groovy/GROOVY_569
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;There is a sever problem with the command line:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;../Groovy/GROOVY_569
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but this is the bug reported as &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-2081&quot; title=&quot;Script executes correctly when called with absolute path, but fails when called with relative path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-2081&quot;&gt;&lt;del&gt;GROOVY-2081&lt;/del&gt;&lt;/a&gt; so I have reopened that bug.  It seems it is right to have this bug marked as fixed and closed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12817191">GROOVY-2081</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 45 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2byhj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>