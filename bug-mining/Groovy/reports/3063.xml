<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:51:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-7870] Implicit returns of transformed binary expressions do not have line numbers when statically compiled</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-7870</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;If certain transformed binary expressions (&amp;lt;=&amp;gt;, ==, &amp;lt;&amp;lt;,  &amp;gt;&amp;gt;, &amp;gt;&amp;gt;&amp;gt;) are implicitly returned, their line numbers are not reported. Example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@groovy.transform.CompileStatic
def test() {
    def l = []
    l &amp;lt;&amp;lt; 3
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The code above is compiled to the following bytecode (as seen using GroovyConsole):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; test()Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;
   L0
    LINENUMBER 3 L0
    ICONST_0
    ANEWARRAY java/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;
    INVOKESTATIC org/codehaus/groovy/runtime/ScriptBytecodeAdapter.createList ([Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;)Ljava/util/List;
    ASTORE 1
   L1
    ALOAD 1
    POP
    ALOAD 1
    ICONST_3
    INVOKESTATIC java/lang/&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.valueOf (I)Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;;
    INVOKESTATIC org/codehaus/groovy/runtime/DefaultGroovyMethods.leftShift (Ljava/util/List;Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;)Ljava/util/List;
    ARETURN
   L2
    ACONST_NULL
    ARETURN
    LOCALVARIABLE &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; Lscript1466525199339; L0 L2 0
    LOCALVARIABLE l Ljava/util/List; L1 L2 1
    MAXSTACK = 2
    MAXLOCALS = 2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;There is no line number corresponding to L1, which includes the leftShift call (should be line number 4.)&lt;/p&gt;

&lt;p&gt;This is occurs because 1) BinaryExpressionTransformer does not copy the source position of the original expression to the transformed expression in some cases, and 2) ReturnAdder set the source position of the generated return for an expression statement with that of the expression.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12981399">GROOVY-7870</key>
            <summary>Implicit returns of transformed binary expressions do not have line numbers when statically compiled</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shils">Shil Sinha</assignee>
                                    <reporter username="shils">Shil Sinha</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Jun 2016 16:14:50 +0000</created>
                <updated>Wed, 1 Feb 2017 23:18:46 +0000</updated>
                            <resolved>Thu, 7 Jul 2016 02:58:04 +0000</resolved>
                                    <version>2.4.7</version>
                                    <fixVersion>2.4.8</fixVersion>
                                    <component>Static compilation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15345965" author="paulk" created="Thu, 23 Jun 2016 07:31:04 +0000"  >&lt;p&gt;Shil Sinha, were you planning on looking into this?&lt;/p&gt;</comment>
                            <comment id="15346592" author="shils" created="Thu, 23 Jun 2016 15:17:57 +0000"  >&lt;p&gt;I have code ready for a PR, but I haven&apos;t had a chance to push it yet. It should be up later today (eastern U.S. time.) &lt;/p&gt;</comment>
                            <comment id="15347362" author="paulk" created="Thu, 23 Jun 2016 22:48:31 +0000"  >&lt;p&gt;Cool! No rush at all. I was just wondering whether I should look at the issue. But seems you have it well in hand.&lt;/p&gt;</comment>
                            <comment id="15360217" author="githubbot" created="Sat, 2 Jul 2016 15:31:22 +0000"  >&lt;p&gt;GitHub user shils opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/362&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/362&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7870&quot; title=&quot;Implicit returns of transformed binary expressions do not have line numbers when statically compiled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7870&quot;&gt;&lt;del&gt;GROOVY-7870&lt;/del&gt;&lt;/a&gt;: BinaryExpressionTransformer: Set line numbers on transfo&#8230;&lt;/p&gt;

&lt;p&gt;    &#8230;rmed binary expressions&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/shils/groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/shils/groovy&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7870&quot; title=&quot;Implicit returns of transformed binary expressions do not have line numbers when statically compiled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7870&quot;&gt;&lt;del&gt;GROOVY-7870&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/362.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/362.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #362&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 388a6ca39a709e60c245baa5705efd82de305dd9&lt;br/&gt;
Author: Shil Sinha &amp;lt;shils@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-07-02T15:29:21Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7870&quot; title=&quot;Implicit returns of transformed binary expressions do not have line numbers when statically compiled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7870&quot;&gt;&lt;del&gt;GROOVY-7870&lt;/del&gt;&lt;/a&gt;: BinaryExpressionTransformer: Set line numbers on transformed binary expressions&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15365520" author="githubbot" created="Thu, 7 Jul 2016 02:55:14 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/362&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/362&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 19 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ztjb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>