<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:04:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-2747] Joint Compilation fails on the command line</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-2747</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;The -j option on the command line for groovy fails.&lt;/p&gt;

&lt;p&gt;The attached patch fixes it in svn trunk.  I&apos;ll let this bug set a few days for comments and then commit the patch to trunk and branches/GROOVY_1_5_X unless there is objection.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;C:\temp&amp;gt;groovyc -j Foo.java Bar.groovy
org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed, Compile error during compilation with javac.
C:\DOCUME~1\DANNO~1.FER\LOCALS~1\Temp\groovy-generated-46386-java-source\joint\Bar.java:3: package groovy.util does not exist
import groovy.util.*;
^
C:\DOCUME~1\DANNO~1.FER\LOCALS~1\Temp\groovy-generated-46386-java-source\joint\Bar.java:7: package groovy.lang does not exist
import groovy.lang.*;
^
C:\DOCUME~1\DANNO~1.FER\LOCALS~1\Temp\groovy-generated-46386-java-source\joint\Bar.java:12: package groovy.lang does not exist
    groovy.lang.GroovyObject {
               ^
C:\DOCUME~1\DANNO~1.FER\LOCALS~1\Temp\groovy-generated-46386-java-source\joint\Bar.java:13: package groovy.lang does not exist
groovy.lang.MetaClass metaClass;
           ^
C:\DOCUME~1\DANNO~1.FER\LOCALS~1\Temp\groovy-generated-46386-java-source\joint\Bar.java:15: package groovy.lang does not exist
public groovy.lang.MetaClass getMetaClass() { return (groovy.lang.MetaClass)null;}
                  ^
C:\DOCUME~1\DANNO~1.FER\LOCALS~1\Temp\groovy-generated-46386-java-source\joint\Bar.java:21: package groovy.lang does not exist
public void setMetaClass(groovy.lang.MetaClass value) { }
                                    ^
C:\DOCUME~1\DANNO~1.FER\LOCALS~1\Temp\groovy-generated-46386-java-source\joint\Bar.java:15: package groovy.lang does not exist
public groovy.lang.MetaClass getMetaClass() { return (groovy.lang.MetaClass)null;}
                                                                 ^
7 errors


1 error
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;Foo.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; joint;

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Foo {
  Bar baz;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;Bar.groovy&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; joint

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Bar {
  &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; s
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>cartesian join of [1.5.4, svn trunk]  [windows, ubuntu]</environment>
        <key id="12814207">GROOVY-2747</key>
            <summary>Joint Compilation fails on the command line</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="shemnon">Daniel Ferrin</reporter>
                        <labels>
                    </labels>
                <created>Sat, 12 Apr 2008 21:57:16 +0000</created>
                <updated>Sun, 27 Apr 2008 04:51:11 +0000</updated>
                            <resolved>Mon, 21 Apr 2008 21:56:23 +0000</resolved>
                                    <version>1.5.4</version>
                    <version>1.5.5</version>
                    <version>1.6-beta-1</version>
                                    <fixVersion>1.5.6</fixVersion>
                    <fixVersion>1.6-beta-1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14464599" author="blackdrag" created="Sun, 13 Apr 2008 08:26:40 +0000"  >&lt;p&gt;if this is a general problem, then why does it work one time and the other time it does not? I think it is interesting to note, that if Foo is an empty class, that the compilation will not fail then.&lt;/p&gt;</comment>
                            <comment id="14464617" author="shemnon" created="Sun, 13 Apr 2008 11:38:19 +0000"  >&lt;p&gt;The reason it works in ant is because the groovy runtime is explicitly added to the groovyc invocation, which is passed onto the javac process.  The command line in this bug passes in no classpath.  &lt;br/&gt;
As to why it works when the java classes have no dependency on the groovy classes has to do with how javac works.  Only the native java classes needing compilation are passed into the javac call, so whether or not foo is empty only Foo.java is passed in as an argument, not the Bar.groovy stub.  When compiling an empty or non-dependent foo javac never needs to look at any of the stubs, so it doesn&apos;t try.  But when we reference a stub class javac then trys to resolve the class or compile the stub.  Since the stubed Bar.java is in the sourcepath passed into javac in the expected palace, javac then tries to compile it.  Javac, however, only looks to the command line classpath to get classes.  Even though groovy is in the system classpath javac won&apos;t look there (unlike groovyc).  Hence the jar containing the groovy classes needs to be passed in the javac -classpath argument.&lt;/p&gt;

&lt;p&gt;We could require the user to do this, but this seems surprising to the user.  This is also difficult because the name of the groovy jar always changes between versions (unlike java&apos;s rt.jar), and the location may be quite inconvenient, depending on where you installed groovy.  Even worse, it may need to be the same version jar that groovyc is compiling against to insure API compatibility, since we don&apos;t support cross-version compilation..&lt;/p&gt;
</comment>
                            <comment id="14478119" author="paulk" created="Wed, 16 Apr 2008 19:45:24 +0000"  >&lt;p&gt;Danno, saw your commited (commented out) test case. Does your patch fix that test case?&lt;/p&gt;</comment>
                            <comment id="14464590" author="shemnon" created="Wed, 16 Apr 2008 22:44:11 +0000"  >&lt;p&gt;yes, but I got another patch that I think is better, let me spend some time writing a post to the dev list.  This test was submitted to get feedback to see if it fails elsewhere, such as on any g2one machine&lt;/p&gt;</comment>
                            <comment id="14478078" author="paulk" created="Mon, 21 Apr 2008 19:55:40 +0000"  >&lt;p&gt;add code tags&lt;/p&gt;</comment>
                            <comment id="14478070" author="paulk" created="Mon, 21 Apr 2008 20:13:34 +0000"  >&lt;p&gt;Confirming that I have the problem locally as mentioned here and the patches/commits fix this issue. I must admit though that I haven&apos;t had time to investigate further regarding the impact of the fix.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12721969" name="joint_patch.patch" size="6021" author="shemnon" created="Sat, 12 Apr 2008 21:57:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 32 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2c74v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>