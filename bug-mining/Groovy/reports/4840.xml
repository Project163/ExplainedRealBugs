<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:24:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-11375] Power binary expression finds incorrect type - currently uses declaration inferred type</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-11375</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;For this code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@groovy.transform.CompileStatic
def method() {
    &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; temp = &lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt;
    temp = temp.size()
    &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; temp ** temp == 27
}

method()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The compiler gives this error:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;BUG! exception in phase &apos;class generation&apos; in source unit &apos;ConsoleScript3&apos; At line 10 column 8
On receiver: temp with message: power and arguments: temp
This method should not have been called. Please try to create a simple example reproducing
this error and file a bug report at https://issues.apache.org/jira/browse/GROOVY

	at org.codehaus.groovy.classgen.asm.sc.StaticTypesCallSiteWriter.makeSingleArgumentCall(StaticTypesCallSiteWriter.java:582)

	at org.codehaus.groovy.classgen.asm.InvocationWriter.makeSingleArgumentCall(InvocationWriter.java:626)

	at org.codehaus.groovy.classgen.asm.BinaryExpressionHelper.evaluateBinaryExpression(BinaryExpressionHelper.java:602)

	at org.codehaus.groovy.classgen.asm.BinaryExpressionMultiTypeDispatcher.evaluateBinaryExpression(BinaryExpressionMultiTypeDispatcher.java:242)

	at org.codehaus.groovy.classgen.asm.BinaryExpressionHelper.eval(BinaryExpressionHelper.java:264)

	at org.codehaus.groovy.classgen.AsmClassGenerator.visitBinaryExpression(AsmClassGenerator.java:849)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We apply flow typing for the receiver but not the argument type. This looks like a case that should be handled where we currently have &quot;TODO: more cases ...&quot; in StaticTypesCallSiteWriter.&lt;/p&gt;

&lt;p&gt;The same situation occurs for the shift operators and plus etc., e.g.:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; temp &amp;lt;&amp;lt; temp == 24
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; temp + temp == 6
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13579006">GROOVY-11375</key>
            <summary>Power binary expression finds incorrect type - currently uses declaration inferred type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="paulk">Paul King</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 May 2024 04:06:39 +0000</created>
                <updated>Wed, 8 Oct 2025 18:23:22 +0000</updated>
                            <resolved>Thu, 27 Jun 2024 02:05:43 +0000</resolved>
                                    <version>5.0.0-alpha-8</version>
                    <version>4.0.21</version>
                                    <fixVersion>5.0.0-alpha-9</fixVersion>
                                    <component>Static compilation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17860298" author="emilles" created="Thu, 27 Jun 2024 02:05:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/commit/fb954ba5424facdd89ddfcb4ee08b733b019a1d8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/fb954ba5424facdd89ddfcb4ee08b733b019a1d8&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="18024601" author="githubbot" created="Fri, 3 Oct 2025 23:05:43 +0000"  >&lt;p&gt;eric-milles opened a new pull request, #2311:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/2311&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/2311&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   There may be some side effects from changing `StaticTypesTypeChooser` in this manner.  I cannot recall exactly why this was not ported to 4.x back in June 2024.&lt;/p&gt;

&lt;p&gt;   see also &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-9344&quot; title=&quot;CCE in closure shared variable assignment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-9344&quot;&gt;&lt;del&gt;GROOVY-9344&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-9607&quot; title=&quot;Class generation regression in 3.0.5-ss: This method should not have been called&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-9607&quot;&gt;&lt;del&gt;GROOVY-9607&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="18027907" author="githubbot" created="Mon, 6 Oct 2025 20:05:45 +0000"  >&lt;p&gt;eric-milles commented on PR #2311:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/2311#issuecomment-3373805680&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/2311#issuecomment-3373805680&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   One of the related problems from Grails (see GormEntityTransformation) is this:&lt;br/&gt;
   ```groovy&lt;br/&gt;
   if (classNode instanceof InnerClassNode || classNode.isEnum())&lt;br/&gt;
   ```&lt;/p&gt;

&lt;p&gt;   The second occurrence of `classNode` gets cast to `InnerClassNode` due to improper or handling (see &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7971&quot; title=&quot;@CS flow typing incorrectly casting to map at runtime&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7971&quot;&gt;GROOVY-7971&lt;/a&gt;).&lt;/p&gt;

</comment>
                            <comment id="18028281" author="githubbot" created="Wed, 8 Oct 2025 07:05:51 +0000"  >&lt;p&gt;paulk-asert commented on PR #2311:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/2311#issuecomment-3380050688&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/2311#issuecomment-3380050688&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   I am happy for this to be merged but we still need to sort out &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7971&quot; title=&quot;@CS flow typing incorrectly casting to map at runtime&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7971&quot;&gt;GROOVY-7971&lt;/a&gt;. I might try to relook at that again soon.&lt;/p&gt;

</comment>
                            <comment id="18028435" author="githubbot" created="Wed, 8 Oct 2025 18:23:22 +0000"  >&lt;p&gt;eric-milles commented on PR #2311:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/2311#issuecomment-3382724018&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/2311#issuecomment-3382724018&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   I&apos;m reluctant to merge myself because &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-11769&quot; title=&quot;@CompileStatic incorrectly generates dynamic call for a cast guarded by an instanceof check&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-11769&quot;&gt;GROOVY-11769&lt;/a&gt; is about bytecode optimization, not failing functionality.  And &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-11375&quot; title=&quot;Power binary expression finds incorrect type - currently uses declaration inferred type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-11375&quot;&gt;&lt;del&gt;GROOVY-11375&lt;/del&gt;&lt;/a&gt; was not strong enough on its own to make this change earlier.&lt;/p&gt;

</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13630585">GROOVY-11769</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>groovy</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1p6d4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>