<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:00:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-8766] Groovy packages not compatible with OSGi (ServiceLoader Capability)</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-8766</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Groovy modules are heavily using ServiceLoader Feature. Those capabilities are not exported for OSGi usage causing errors like:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: java.lang.RuntimeException: Unable to load FastStringService
 at org.apache.groovy.json.internal.FastStringUtils.getService(FastStringUtils.java:57) ~[24:groovy:2.5.2]
 at org.apache.groovy.json.internal.FastStringUtils.toCharArray(FastStringUtils.java:67) ~[24:groovy:2.5.2]
 at org.apache.groovy.json.internal.BaseJsonParser.parse(BaseJsonParser.java:112) ~[24:groovy:2.5.2]
 at groovy.json.JsonSlurper.parseText(JsonSlurper.java:205) ~[24:groovy:2.5.2]
 at groovy.json.JsonSlurper$parseText.call(Unknown Source) ~[?:?]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Have look on:&#160;&lt;a href=&quot;https://blog.osgi.org/2013/02/javautilserviceloader-in-osgi.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://blog.osgi.org/2013/02/javautilserviceloader-in-osgi.html&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13181397">GROOVY-8766</key>
            <summary>Groovy packages not compatible with OSGi (ServiceLoader Capability)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="graben">Benjamin Graf</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Aug 2018 15:46:38 +0000</created>
                <updated>Thu, 13 Dec 2018 10:04:35 +0000</updated>
                            <resolved>Wed, 7 Nov 2018 11:38:17 +0000</resolved>
                                    <version>2.5.2</version>
                                    <fixVersion>3.0.0-alpha-4</fixVersion>
                    <fixVersion>2.5.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16594297" author="paulk" created="Mon, 27 Aug 2018 22:29:19 +0000"  >&lt;p&gt;I guess we&apos;d be looking at the approach described in the &quot;ServiceLoader consumer&quot; section. Modifying the manifest shouldn&apos;t be too hard but since it uses &quot;byte code instrumentation&quot;, we&apos;d need to do some thorough testing. A PR or some steps to help test whether changes we make did the right thing would be very helpful and I guess we&apos;ll need to check across JDK8-11.&lt;/p&gt;</comment>
                            <comment id="16596687" author="graben" created="Wed, 29 Aug 2018 18:26:07 +0000"  >&lt;p&gt;I did some prototyping for the groovy-json fragment. It seems you only need the provider capabilities to get it working:&lt;/p&gt;

&lt;p&gt;e.g.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Require-Capability: osgi.extender;
 filter:=&lt;span class=&quot;code-quote&quot;&gt;&quot;(osgi.extender=osgi.serviceloader.registrar)&quot;&lt;/span&gt;,
 osgi.ee;filter:=&lt;span class=&quot;code-quote&quot;&gt;&quot;(&amp;amp;(osgi.ee=JavaSE)(version=1.7))&quot;&lt;/span&gt;
Provide-Capability: osgi.serviceloader;
 osgi.serviceloader=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.groovy.json.FastStringServiceFactory&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Since everything goes into the same bundle (groovy + fragments) it seems to work without consumer capabilities. Might be a bug in Aries Spifly or not!?&lt;/p&gt;</comment>
                            <comment id="16597763" author="githubbot" created="Thu, 30 Aug 2018 18:30:16 +0000"  >&lt;p&gt;GitHub user graben opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/790&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/790&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8766&quot; title=&quot;Groovy packages not compatible with OSGi (ServiceLoader Capability)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8766&quot;&gt;&lt;del&gt;GROOVY-8766&lt;/del&gt;&lt;/a&gt;: Add manifest capability entries for OSGi spifly&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/graben/groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/graben/groovy&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8766&quot; title=&quot;Groovy packages not compatible with OSGi (ServiceLoader Capability)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8766&quot;&gt;&lt;del&gt;GROOVY-8766&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/790.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/790.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #790&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit ec829d0a5e5050bde7e4f3ca451611d6f33092ad&lt;br/&gt;
Author: Benjamin Graf &amp;lt;benjamin.graf@...&amp;gt;&lt;br/&gt;
Date:   2018-08-30T18:28:53Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8766&quot; title=&quot;Groovy packages not compatible with OSGi (ServiceLoader Capability)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8766&quot;&gt;&lt;del&gt;GROOVY-8766&lt;/del&gt;&lt;/a&gt;: Add manifest capability entries for OSGi spifly&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16677834" author="graben" created="Wed, 7 Nov 2018 08:34:40 +0000"  >&lt;p&gt;Hi&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulk&quot; class=&quot;user-hover&quot; rel=&quot;paulk&quot;&gt;paulk&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;any chance to get this patch into 2.5.4?&lt;/p&gt;

&lt;p&gt;Regards&lt;/p&gt;

&lt;p&gt;Benjamin&lt;/p&gt;</comment>
                            <comment id="16678084" author="githubbot" created="Wed, 7 Nov 2018 11:34:31 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/790&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/790&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16678089" author="paulk" created="Wed, 7 Nov 2018 11:38:17 +0000"  >&lt;p&gt;Thanks for reporting the issue and your PR! It has been merged!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 1 week, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xgrj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>