<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:03:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-399] Groovy Template quote escape problem</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-399</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;The SimpleTemplateEngine got a problem with escaping quotes inside GStrings.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;&quot;&lt;/span&gt; is tricky: ${hello + &lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt; + hello}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;will be parsed to&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;out.print(&lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;\&lt;span class=&quot;code-quote&quot;&gt;&quot; is tricky: ${hello + \&quot;&lt;/span&gt; \&lt;span class=&quot;code-quote&quot;&gt;&quot; + hello}&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which is a problem for the current lexer as a GString must be a valid groovy statement.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12812549">GROOVY-399</key>
            <summary>Groovy Template quote escape problem</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="maniax">Thomas Heller</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Apr 2004 11:20:25 +0000</created>
                <updated>Sat, 21 Mar 2015 07:18:34 +0000</updated>
                            <resolved>Fri, 13 Mar 2015 15:37:26 +0000</resolved>
                                                                    <component>Templating</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14460115" author="maniax" created="Fri, 16 Apr 2004 11:21:22 +0000"  >&lt;p&gt;patch diff to be applied from groovy/groovy-core&lt;/p&gt;</comment>
                            <comment id="14460009" author="cpoirier" created="Fri, 16 Apr 2004 15:53:28 +0000"  >&lt;p&gt;Thomas: I&apos;m not clear on the purpose of that test &amp;#8211; that GString expression will be expanded during initial parsing (and will fail, due to the first backslash).  Is that what you wanted?  If not, you need to escape it:&lt;br/&gt;
    String source = &quot;\&quot;this\&quot; is tricky: \${hello + \&quot; \&quot; + hello}&quot;;&lt;/p&gt;</comment>
                            <comment id="14460138" author="maniax" created="Fri, 16 Apr 2004 20:04:38 +0000"  >&lt;p&gt;If you have a Groovy Template (from groovy.text.SimpleTemplateEngine) which contains (in a File for example)&lt;/p&gt;

&lt;p&gt;&quot;this&quot; is tricky: ${hello + &quot; &quot; + hello}&lt;/p&gt;

&lt;p&gt;it will be parsed by the Template impl to create to stated source which is causing an exception is you pass it into the groovy compiler.&lt;/p&gt;

&lt;p&gt;Now this creates:&lt;/p&gt;

&lt;p&gt;out.print(&quot;\&quot;this\&quot; is tricky: ${hello + \&quot; \&quot; + hello}&quot;);&lt;/p&gt;

&lt;p&gt;which is not a valid groovy statement (as of now). I think it should be but a GString is expected to be a plain groovy statement so&lt;/p&gt;

&lt;p&gt;out.print(&quot;\&quot;this\&quot; is tricky: ${hello + &quot; &quot; + hello}&quot;);&lt;/p&gt;

&lt;p&gt;would be correct. I think the lexer needs to handle that since the first statement is correct java while the second is not.&lt;/p&gt;</comment>
                            <comment id="14460254" author="cpoirier" created="Fri, 16 Apr 2004 21:37:00 +0000"  >&lt;p&gt;&amp;gt; I think the lexer needs to handle that since the first statement is correct java while the second is not.&lt;/p&gt;

&lt;p&gt;Yes, because regular Java doesn&apos;t do GStrings....  In order for GString expressions to be truly useful, they have to host real Groovy code, like closures, possibly with nesting strings, possibly with nested GString expressions.  How do you handle backslashes in nested GStrings?  The answer is not to try.  I think the handling currently in place is the correct thing to do.  Double quotes delimit a nested language.&lt;/p&gt;

&lt;p&gt;So can I assume that the intention of the attached test is to break the build?&lt;/p&gt;</comment>
                            <comment id="14460120" author="maniax" created="Wed, 21 Apr 2004 09:51:45 +0000"  >&lt;p&gt;Its not intended to break the build, its intended to show a bug.&lt;/p&gt;

&lt;p&gt;I&apos;m quite sure that you will see something like that in templates and either the lexer or the groovy template engine need to handle this case.&lt;/p&gt;

&lt;p&gt;I inlined the template text in this testcase to not depend on external files etc. But you are welcome to move the example &lt;/p&gt;

&lt;p&gt;${hello + &quot; &quot; + hello}&lt;/p&gt;

&lt;p&gt;into a file and let it run from there.&lt;/p&gt;

&lt;p&gt;I know that &lt;/p&gt;

&lt;p&gt;${hello} ${hello}&lt;/p&gt;

&lt;p&gt;is a better solution. But since GStrings are plain groovy statements its perfectly fine the run the &quot;broken&quot; example.&lt;/p&gt;</comment>
                            <comment id="14460141" author="cpoirier" created="Wed, 21 Apr 2004 15:24:13 +0000"  >&lt;p&gt;Agreed.  The SimpleTemplateEngine needs to be fixed.&lt;/p&gt;</comment>
                            <comment id="14460122" author="guillaume" created="Sat, 1 May 2004 08:40:03 +0000"  >&lt;p&gt;Sam, it looks like a problem for you.&lt;/p&gt;</comment>
                            <comment id="14460207" author="maniax" created="Thu, 6 May 2004 08:52:38 +0000"  >&lt;p&gt;A little more obvious problem:&lt;/p&gt;

&lt;p&gt;${someObj.withAMethod(&quot;hi&quot;)}&lt;/p&gt;

&lt;p&gt;won&apos;t work when used inside templates.&lt;/p&gt;</comment>
                            <comment id="14460445" author="niallg" created="Mon, 18 Oct 2004 12:13:54 +0000"  >&lt;p&gt;I have implemented a solution to this problem. The solution uses a cascading translator that converts &lt;/p&gt;

&lt;p&gt;${ hello + &quot; &quot; + hello} &lt;/p&gt;

&lt;p&gt;to &lt;/p&gt;

&lt;p&gt;&amp;lt;?= hello + &quot; &quot; + hello ?&amp;gt;&lt;/p&gt;

&lt;p&gt;and finally, to &lt;/p&gt;

&lt;p&gt;out.println( hello + &quot; &quot; + hello );&lt;/p&gt;

&lt;p&gt;which is a valid Groovy statement. I would like to contribute and/or maintain this code for Groovy.&lt;/p&gt;</comment>
                            <comment id="14460508" author="guillaume" created="Mon, 18 Oct 2004 14:35:25 +0000"  >&lt;p&gt;Niall, attach your patch to one of the issues, and we&apos;ll have a look at it.&lt;/p&gt;</comment>
                            <comment id="14460544" author="niallg" created="Tue, 19 Oct 2004 13:02:47 +0000"  >&lt;p&gt;The attached file is not exactly a patch but rather a rework of the parsing done for the templates. If it is reasonable at this stage to port the GStringTemplateEngine and SimpleTemplateEngine to this framework then I would be happy to do it. &lt;/p&gt;

&lt;p&gt;Attached you will find some test drivers and an example template with some &quot;tricky&quot; expressions. Don&apos;t know what licence to attach to these?&lt;/p&gt;</comment>
                            <comment id="14460473" author="niallg" created="Thu, 21 Oct 2004 07:57:54 +0000"  >&lt;p&gt;Whoops! in haste I did not attach a parser for the closure used by the GStringTemplateEngine. I have attached it on this upload. It produces an identical script to the one produced by the current GStringTemplateEngine, except it does not escape quotes within ${..} expressions. The following will generate the Groovy script from a template.&lt;/p&gt;

&lt;p&gt;java TestCascade template.groovy&lt;/p&gt;</comment>
                            <comment id="14461026" author="guillaume" created="Tue, 7 Jun 2005 07:50:01 +0000"  >&lt;p&gt;Oh Template and Groovlet master!!!&lt;/p&gt;</comment>
                            <comment id="14461315" author="sormuras" created="Fri, 22 Jul 2005 02:41:37 +0000"  >&lt;p&gt;Looking at &lt;a href=&quot;http://jira.codehaus.org/browse/GROOVY-399&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jira.codehaus.org/browse/GROOVY-399&lt;/a&gt; - we should write the test cases asap - before refactoring the whole parser stuff. After a first glimpse, it could help with all those char-by-char parser short-comings.&lt;/p&gt;</comment>
                            <comment id="14477775" author="paulk" created="Fri, 4 Jan 2008 18:41:49 +0000"  >&lt;p&gt;OK, I made a few changes to the existing code base so that the ugly problems with quotes inside (for now simple) GStrings goes away. Not as good as the other proposals listed here for a re-write but at least gets rid of the ugly cases for now.&lt;/p&gt;

&lt;p&gt;I also tried grafting in the current antlr GString parsing into the template codebase and made some progress but backed out as it was going to take a lot more time to finish than I have right now.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12812932">GROOVY-980</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12720908" name="patch.txt" size="1008" author="maniax" created="Fri, 16 Apr 2004 11:21:22 +0000"/>
                            <attachment id="12720988" name="test-closure.tar.gz" size="13438" author="niallg" created="Thu, 21 Oct 2004 07:57:54 +0000"/>
                            <attachment id="12721532" name="test.tar.gz" size="11768" author="niallg" created="Tue, 19 Oct 2004 13:02:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 47 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bot3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>