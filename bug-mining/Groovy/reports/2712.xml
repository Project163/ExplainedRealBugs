<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:42:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-6892] Oddity with Min function for Collections</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-6892</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Consider the following array:&lt;/p&gt;

&lt;p&gt;arr = &lt;span class=&quot;error&quot;&gt;&amp;#91;3,null,5&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Calling min() on this array results in the value 3.  However, using min with a closure as in...&lt;/p&gt;

&lt;p&gt;arr.min &lt;/p&gt;
{ it }

&lt;p&gt;will result in the value of 5.  Groovy basically ignores everything prior to and including the null.&lt;/p&gt;

&lt;p&gt;Someone first detected this problem a couple of years ago, but it still doesn&apos;t appear to be fixed.  Here is the original thread on this:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://groovy.329449.n5.nabble.com/Oddity-with-Groovy-Collection-min-when-using-a-closure-td5710629.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://groovy.329449.n5.nabble.com/Oddity-with-Groovy-Collection-min-when-using-a-closure-td5710629.html&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12817642">GROOVY-6892</key>
            <summary>Oddity with Min function for Collections</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="onevim">Vimal Gopal</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Jun 2014 00:36:40 +0000</created>
                <updated>Wed, 17 Dec 2014 13:25:39 +0000</updated>
                            <resolved>Fri, 1 Aug 2014 08:39:28 +0000</resolved>
                                                    <fixVersion>2.4.0-beta-3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14480651" author="paulk" created="Fri, 27 Jun 2014 06:42:14 +0000"  >&lt;p&gt;Proposed solution here:&lt;br/&gt;
&lt;a href=&quot;https://github.com/groovy/groovy-core/pull/464&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/groovy/groovy-core/pull/464&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It might be considered slightly controversial. To illustrate, consider your example above:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;def arr = [3,&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;,5]
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; arr.min() == 3                                       &lt;span class=&quot;code-comment&quot;&gt;// (1)
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; arr.min{ it } == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;                                &lt;span class=&quot;code-comment&quot;&gt;// (2)
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; arr.min{ it == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ? &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.MAX_VALUE : it } == 3  &lt;span class=&quot;code-comment&quot;&gt;// (3)
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; arr.grep().min{ it } == 3                            &lt;span class=&quot;code-comment&quot;&gt;// (4)&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;As you correctly point out, the current &lt;tt&gt;min()&lt;/tt&gt; function returns &lt;tt&gt;3&lt;/tt&gt; (see &amp;lt;1&amp;gt;).&lt;br/&gt;
I have implemented the Closure variant slightly differently so that it doesn&apos;t have the same null excluding behavior. This is more in line with the standard treatment of null values with comparators (see &lt;a href=&quot;http://stackoverflow.com/questions/2401606/comparator-with-null-values&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/questions/2401606/comparator-with-null-values&lt;/a&gt;). So with this in mind, the returned result is now &lt;tt&gt;null&lt;/tt&gt; (see &amp;lt;2&amp;gt;).&lt;br/&gt;
As per the SO reference, you normally want to handle null values in your Closure (see &amp;lt;3&amp;gt;) or remove the nulls beforehand (e.g. see &amp;lt;4&amp;gt;).&lt;/p&gt;</comment>
                            <comment id="14480645" author="paulk" created="Fri, 27 Jun 2014 06:43:58 +0000"  >&lt;p&gt;Note: I would also be in favor of the normal &lt;tt&gt;min()&lt;/tt&gt; function returning &lt;tt&gt;null&lt;/tt&gt; for your sample numbers (and perhaps adding a &lt;tt&gt;minNonNull()&lt;/tt&gt; or &lt;tt&gt;minResult()&lt;/tt&gt; function as well to give the existing behavior) but that would be an even more controversial breaking change.&lt;/p&gt;</comment>
                            <comment id="14476182" author="onevim" created="Sun, 29 Jun 2014 16:46:02 +0000"  >&lt;p&gt;I actually implemented the closure for my code exactly as you suggested in (3).  I looked at this as more of a work around initially, but if this is the expected way to do this, then my apologies for not knowing better! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  I liked your suggestion, but completely understand the controversy associated with that.  Perhaps it might be better to simply explain this particular nuance in the API docs?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 21 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bq9b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>