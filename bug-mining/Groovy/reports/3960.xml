<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:09:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-9076] Debugger Step Into doesn&apos;t work in Groovy-compiled classes</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-9076</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Please see &lt;a href=&quot;https://github.com/dovchinnikov/debug-groovy-bug&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/dovchinnikov/debug-groovy-bug&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;GC.groovy&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; foo.bar

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;GC {

    GC() {
        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 42
    }

    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; getStuff() {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 70
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;GMain.groovy&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; foo.bar

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;GMain {

    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
        &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GC().stuff &lt;span class=&quot;code-comment&quot;&gt;// set breakpoint here
&lt;/span&gt;    }
} 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This issue is reproducible with plain raw jdb:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ ./gradlew clean classes
$ jdb -classpath build/classes/groovy/main:&amp;lt;path to groovy-2.5.6.jar&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Inside jdb prompt:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;gt; sourcepath src/main/groovy
&amp;gt; exclude java.*,sun.*,com.sun.*,groovy.*,org.codehaus.groovy.*,org.apache.groovy.*
&amp;gt; stop in foo.bar.GMain.main
&amp;gt; run foo.bar.GMain
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Then &lt;tt&gt;step&lt;/tt&gt; until the end and observe the behaviour.&lt;/p&gt;</description>
                <environment>$ java -version&lt;br/&gt;
java version &amp;quot;1.8.0_211&amp;quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.8.0_211-b12)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 25.211-b12, mixed mode)</environment>
        <key id="13227539">GROOVY-9076</key>
            <summary>Debugger Step Into doesn&apos;t work in Groovy-compiled classes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="daniilo">Daniil Ovchinnikov</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Apr 2019 19:58:05 +0000</created>
                <updated>Sun, 2 May 2021 09:16:21 +0000</updated>
                            <resolved>Mon, 14 Dec 2020 19:56:53 +0000</resolved>
                                    <version>2.5.6</version>
                                    <fixVersion>2.4.22</fixVersion>
                    <fixVersion>2.5.15</fixVersion>
                    <fixVersion>3.0.8</fixVersion>
                    <fixVersion>4.0.0-alpha-3</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16822008" author="emilles" created="Fri, 19 Apr 2019 15:54:09 +0000"  >&lt;p&gt;How is the code compiled?  That is, what are the groovyc settings used?  I have found that using the &quot;indy&quot; option (or at least disabling the &quot;int&quot; optimization) instead of the default &quot;fast-path&quot; code generation yields simpler bytecode for the debugger to understand.  In the default mode, most methods have two paths through them and both paths get assigned the line number information of the method.  This tends to confuse the debugger.&lt;/p&gt;</comment>
                            <comment id="16822034" author="daniilo" created="Fri, 19 Apr 2019 16:36:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=emilles&quot; class=&quot;user-hover&quot; rel=&quot;emilles&quot;&gt;emilles&lt;/a&gt; the issue is reproducible with class files produced by &lt;tt&gt;gradle clean classes&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="16822044" author="daniilo" created="Fri, 19 Apr 2019 16:43:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=emilles&quot; class=&quot;user-hover&quot; rel=&quot;emilles&quot;&gt;emilles&lt;/a&gt; what&apos;s&#160;the &quot;int&quot; optimization and how to disable it?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16822047" author="emilles" created="Fri, 19 Apr 2019 16:46:19 +0000"  >&lt;p&gt;You can add a compiler config script with the following contents:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
configuration.optimizationOptions.&lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&apos;&lt;/span&gt; = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;span class=&quot;code-comment&quot;&gt;//configuration.optimizationOptions.indy = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Either line will disable the &quot;int&quot; optimization.&lt;/p&gt;


&lt;p&gt;Or you can disable directly in build.gradle:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
compileGroovy {
  groovyOptions.optimizationOptions.&lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&apos;&lt;/span&gt; = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;span class=&quot;code-comment&quot;&gt;//groovyOptions.optimizationOptions.indy = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;//groovyOptions.configurationScript = file(&lt;span class=&quot;code-quote&quot;&gt;&apos;src/groovyCompile/config.groovy&apos;&lt;/span&gt;)
&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

</comment>
                            <comment id="17249077" author="emilles" created="Mon, 14 Dec 2020 16:05:40 +0000"  >&lt;p&gt;I did a bit of testing on this issue as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-9373&quot; title=&quot;ASM: rework line numbers for blocks with fast-path, try/catch or return statement insertion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-9373&quot;&gt;&lt;del&gt;GROOVY-9373&lt;/del&gt;&lt;/a&gt;.  I noticed that &quot;indy&quot; enabled works fine and &quot;indy&quot; disabled (aka traditional call site caching) still has this issue.  As noted above, static compilation of the target class also steps properly in the debugger.  I am comparing these 3 different compilation results and I think I will be able to insert a bit of new bytecode before the call site array load instructions to help the debugger.  These changes would be specific to Groovy 2.5 and Groovy 3, since Groovy 4 has disabled the call site path.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12811888">GROOVY-4063</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 48 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z01p74:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>