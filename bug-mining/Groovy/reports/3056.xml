<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:51:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-7585] ObjectRange strange semantics for mismatched arguments</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-7585</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;in Object Range, String is a special case considered:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (from &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; || to &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;) {
           &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; start = from.toString();
           &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; end = to.toString();
           &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (start.length() &amp;gt; end.length()) {
                &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Incompatible Strings &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Range: starting &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; is longer than ending string&quot;&lt;/span&gt;);
            }
&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; length = &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.min(start.length(), end.length());
            &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i;
            &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (i = 0; i &amp;lt; length; i++) {
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (start.charAt(i) != end.charAt(i)) &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
            }
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (i &amp;lt; length - 1) {
                &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Incompatible Strings &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Range: &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;#next() will not reach the expected value&quot;&lt;/span&gt;);
            }
            ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;There are two semantic problems with that implementation. On the one hand this is plain buggy when the length of &apos;to&apos; is larger than the length of &apos;from&apos;, and two strings are passed:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;groovy:000&amp;gt; x = &lt;span class=&quot;code-quote&quot;&gt;&apos;aa&apos;&lt;/span&gt;..&lt;span class=&quot;code-quote&quot;&gt;&apos;aaa&apos;&lt;/span&gt;
===&amp;gt; [aa]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This is because stepping through the strings begins with &quot;ab&quot;, which is larger than &apos;aaa&apos; in the comparison of DefaultGroovyMethods.numberAwareCompareTo().&lt;br/&gt;
I assume from the rest of the code that the general assumption was that aa..aaa == &lt;span class=&quot;error&quot;&gt;&amp;#91;aa, ab, ac, ... &amp;lt;something&amp;gt; ..., aaa&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Next, the check would not be meaningful even if the comparison worked as intended:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&apos;aa&apos;&lt;/span&gt;..&lt;span class=&quot;code-quote&quot;&gt;&apos;aaa&apos;&lt;/span&gt; is an infinite sequence. Assuming &lt;span class=&quot;code-quote&quot;&gt;&apos;_&apos;&lt;/span&gt; represents &lt;span class=&quot;code-object&quot;&gt;Character&lt;/span&gt;.MAX_VALUE and ^ represents &lt;span class=&quot;code-object&quot;&gt;Character&lt;/span&gt;.MIN_VALUE:
 aa, ab, ac, ..., a_, a_^, ..., a_a, a_b, ... a__, a__^, ... 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;so &apos;aaa&apos; is never reached. So this could only possibly work it a longer &apos;to&apos; argument consisted of from&lt;span class=&quot;error&quot;&gt;&amp;#91;:-1&amp;#93;&lt;/span&gt; + Character.MAX_VALUE &amp;lt;n-times&amp;gt; + &lt;span class=&quot;error&quot;&gt;&amp;#91;a-z&amp;#93;&lt;/span&gt;. I don&apos;t think that is a relevant case any Groovy user relies on.&lt;/p&gt;

&lt;p&gt;So there are two &quot;bugs&quot; cancelling each other out somehow, preventing infinite String creation.&lt;/p&gt;

&lt;p&gt;There are more problems when mixing Types (via the unsafe constructor):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;groovy:000&amp;gt; x = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ObjectRange(&lt;span class=&quot;code-quote&quot;&gt;&apos;11&apos;&lt;/span&gt;, 11, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)
===&amp;gt; []
groovy:000&amp;gt; x = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ObjectRange(11, &lt;span class=&quot;code-quote&quot;&gt;&apos;11&apos;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)
===&amp;gt; [11, 12, 13, 14, 15 ..., 1567]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;There is some code almost handling this nicely&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (from.getClass() == to.getClass()) {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.from = from;
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.to = to;
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.from = normaliseStringType(from);
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.to = normaliseStringType(to);
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;But this merely turns Characters and single-char Strings into ints. I believe it would be nice here if after normalization (inside the else case!), if classes do not match, then this should throw an exception. Because when some non-Number, non-String Comparable is passed along with a single-char String ( new MyComparable()..&apos;1&apos;) then that string is normalized into it&apos;s int value, which IMO is not sane behavior. It&apos;s not documented anywhere that single-char Strings will be turned into ints for a range, this can be a convenience transformation when combined with numbers for scripting, but other than that it should just fail, instead of leading to unpredictable behavior anytime later in a system.&lt;/p&gt;

&lt;p&gt;It seems this has been like it is since the method was written/copied in 2005. So I suggest&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;changing the entry condition to AND: ( if (from instanceof String &amp;amp;&amp;amp; to instanceof String) {)&lt;/li&gt;
	&lt;li&gt;to throw an exception if the length of the strings is different&lt;/li&gt;
	&lt;li&gt;to throw an exception if after normalization &apos;from&apos; is a Number or String, but the class of &apos;to&apos; is not similar to that of &apos;from&apos;&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12862419">GROOVY-7585</key>
            <summary>ObjectRange strange semantics for mismatched arguments</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="tkruse">Thibault Kruse</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Sep 2015 14:01:10 +0000</created>
                <updated>Tue, 2 May 2017 02:03:18 +0000</updated>
                            <resolved>Tue, 28 Jun 2016 07:08:44 +0000</resolved>
                                                    <fixVersion>2.5.0-alpha-1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14735030" author="tkruse" created="Tue, 8 Sep 2015 15:53:07 +0000"  >&lt;p&gt;Also, I noticed that the size() method is used in several methods within ObjectRange, forcing to iterate once over the whole range. This can be a drag on runtime efficiency when the invoking code just wants to iterate from start to end. It&apos;s probably not a significant use-case though, so I did not do anything about it, just thought I&apos;d mention it here.&lt;/p&gt;</comment>
                            <comment id="14738702" author="tkruse" created="Thu, 10 Sep 2015 12:56:05 +0000"  >&lt;p&gt;Fixes are part of &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/109&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/109&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14954775" author="paulk" created="Tue, 13 Oct 2015 10:52:52 +0000"  >&lt;p&gt;I was hoping to have reviewed/applied this by now but haven&apos;t had enough free time lately, so I&apos;ll start comments on a few of the pieces.&lt;/p&gt;

&lt;p&gt;Firstly, re the comments around &quot;... semantic problems ...&quot; and &quot;... plain buggy ...&quot;. Both the old code and your proposed code reject different length strings such as:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
  &lt;span class=&quot;code-quote&quot;&gt;&apos;cat&apos;&lt;/span&gt;..&lt;span class=&quot;code-quote&quot;&gt;&apos;banana&apos;&lt;/span&gt;
} &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt;(ex) { println ex.message }
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
  &lt;span class=&quot;code-quote&quot;&gt;&apos;cat&apos;&lt;/span&gt;..&lt;span class=&quot;code-quote&quot;&gt;&apos;dingo&apos;&lt;/span&gt;
} &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt;(ex) { println ex.message }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So, not really a bug with the current code but certainly an inconsistency. The current code gives different error messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Incompatible Strings for Range: starting String is longer than ending string
Incompatible Strings for Range: String#next() will not reach the expected value
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Yours gives these more consistent variants instead:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Incompatible Strings for Range: different length
Incompatible Strings for Range: different length
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So, a breaking change if people were relying on the exact error message format, and not really fixing a bug, but an improvement in consistency, and I think we can go forward with this. Improved error messages should be something we care highly about.&lt;/p&gt;</comment>
                            <comment id="14954786" author="paulk" created="Tue, 13 Oct 2015 11:11:38 +0000"  >&lt;p&gt;Existing code handles:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;println &lt;span class=&quot;code-quote&quot;&gt;&apos;7&apos;&lt;/span&gt;..59  &lt;span class=&quot;code-comment&quot;&gt;// [55, 56, 57, 58, 59]&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but not&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;println 51..&lt;span class=&quot;code-quote&quot;&gt;&apos;7&apos;&lt;/span&gt; &lt;span class=&quot;code-comment&quot;&gt;// IllegalArgumentException&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but yours handles this second case:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;println 51..&lt;span class=&quot;code-quote&quot;&gt;&apos;7&apos;&lt;/span&gt; &lt;span class=&quot;code-comment&quot;&gt;// [51, 52, 53, 54, 55]&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but existing code handles this differently to yours:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;println &lt;span class=&quot;code-quote&quot;&gt;&apos;7&apos;&lt;/span&gt;..59.5 &lt;span class=&quot;code-comment&quot;&gt;// [55, 56, 57, 58, 59]&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;yours does:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[7, 8, 9, :, ;, &amp;lt;, =, &amp;gt;, ?, @, A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P, Q, R, S, T, U, V, W, X, Y, Z, [, \, ], ^, _, `, a, b, c, d, e, f, g, h, i, j, k]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Existing code doesn&apos;t handle this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;println 5.5..&lt;span class=&quot;code-quote&quot;&gt;&apos;7&apos;&lt;/span&gt; &lt;span class=&quot;code-comment&quot;&gt;// IllegalArgumentException&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Yours gives:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;println 5.5..&lt;span class=&quot;code-quote&quot;&gt;&apos;7&apos;&lt;/span&gt; &lt;span class=&quot;code-comment&quot;&gt;// [5.5, 6.5]&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I am still thinking about what we actually want here - but just listing the results for now, so we can examine and discuss and understand where the important breaking changes (might be)/are.&lt;/p&gt;</comment>
                            <comment id="14954814" author="tkruse" created="Tue, 13 Oct 2015 11:51:37 +0000"  >&lt;p&gt;The existing code has special semantics for strings having common prefixes. See my example &apos;aa&apos;..&apos;aaa&apos;, or &apos;cat&apos;..&apos;catastrophe&apos;. Else I agree.&lt;/p&gt;</comment>
                            <comment id="14954873" author="tkruse" created="Tue, 13 Oct 2015 12:52:36 +0000"  >&lt;p&gt;the new result of &apos;7&apos;..59.5 is a special kind of &quot;bug&quot;/quirk in ObjectRange.size(), which interprets &apos;7&apos; as the number 7, as opposed to the number 55 (ascii code of char &apos;7&apos;). I added a commit to fix that. Also iterator() should probably not use size() to iterate, as ranges can be infinite (brute force computation in size()). I will also fix that.&lt;/p&gt;</comment>
                            <comment id="14955186" author="pascalschumacher" created="Tue, 13 Oct 2015 16:04:00 +0000"  >&lt;p&gt;After reading your comment about iterator() and size() I remembered two bugs related to this &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-2972&quot; title=&quot;groovy.lang.ObjectRange.size() disobeys its contract for large ranges of Long values.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-2972&quot;&gt;&lt;del&gt;GROOVY-2972&lt;/del&gt;&lt;/a&gt;: groovy.lang.ObjectRange.size() disobeys its contract for large ranges of Long values&quot; and &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-5426&quot; title=&quot;ObjectRange.iterator() is reliant on size()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-5426&quot;&gt;&lt;del&gt;GROOVY-5426&lt;/del&gt;&lt;/a&gt;: ObjectRange.iterator() is reliant on size()&quot;.&lt;/p&gt;</comment>
                            <comment id="14955705" author="tkruse" created="Tue, 13 Oct 2015 21:22:08 +0000"  >&lt;p&gt;I started working a unified inner class for both step() and iterator that does not use size(). I will consider those other issues for that. But it is independent of this issue and the PR.&lt;/p&gt;</comment>
                            <comment id="14956257" author="pascalschumacher" created="Wed, 14 Oct 2015 04:51:01 +0000"  >&lt;p&gt;Sure, it&apos;s better to not to mix multiple issues in a single pull request. Thanks for taking the issues into consideration. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14956668" author="paulk" created="Wed, 14 Oct 2015 10:49:37 +0000"  >&lt;p&gt;Your latest additions look nice. Just summarizing a couple of differences (edge cases) I noticed below. I wasn&apos;t trying to be exhaustive&lt;/p&gt;

&lt;p&gt;Currently:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;def x = &lt;span class=&quot;code-quote&quot;&gt;&apos;5&apos;&lt;/span&gt;..60.5
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; x.toString() == &lt;span class=&quot;code-quote&quot;&gt;&apos;53..60.5&apos;&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; x.toList() == [53, 54, 55, 56, 57, 58, 59, 60]
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; x.toList().toString() == &lt;span class=&quot;code-quote&quot;&gt;&apos;[53, 54, 55, 56, 57, 58, 59, 60]&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;after the PR, we have this breaking change (albeit as already commented an edge case):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;def x = &lt;span class=&quot;code-quote&quot;&gt;&apos;5&apos;&lt;/span&gt;..60.5
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; x.toString() == &lt;span class=&quot;code-quote&quot;&gt;&apos;5..60.5&apos;&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; x.toList() == [53, 54, 55, 56, 57, 58, 59, 60]
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; x.toList().toString() == &lt;span class=&quot;code-quote&quot;&gt;&apos;[5, 6, 7, 8, 9, :, ;, &amp;lt;]&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Also currently:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;println 5.5..&lt;span class=&quot;code-quote&quot;&gt;&apos;7&apos;&lt;/span&gt; &lt;span class=&quot;code-comment&quot;&gt;// IllegalArgumentException&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but with the PR we have:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;def x = 5.5..&lt;span class=&quot;code-quote&quot;&gt;&apos;7&apos;&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; x.toString() == &lt;span class=&quot;code-quote&quot;&gt;&apos;5.5..7&apos;&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; x.toList()[0, 1, 2, &lt;span class=&quot;code-comment&quot;&gt;/* ... */&lt;/span&gt; -3, -2, -1] == [5.5, 6.5, 7.5, &lt;span class=&quot;code-comment&quot;&gt;/* ... */&lt;/span&gt; 52.5, 53.5, 54.5]
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; x.toList().toString()[0..15] == &lt;span class=&quot;code-quote&quot;&gt;&apos;[5.5, 6.5, 7.5, &apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So, an additional case covered (if we agree the new result is valid).&lt;/p&gt;</comment>
                            <comment id="14956876" author="tkruse" created="Wed, 14 Oct 2015 13:05:28 +0000"  >&lt;p&gt;Yes. Your output makes another great case for the pretty-printing of output, as the result of toString() here hides the type information in 5.5..7, as opposed to 5.5..&apos;7&apos;. But that is another issue (&lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7568&quot; title=&quot;Groovysh output should be more safe, verbose about types and String output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7568&quot;&gt;GROOVY-7568&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7569&quot; title=&quot;PowerAsserts should print results more verbosely and safer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7569&quot;&gt;&lt;del&gt;GROOVY-7569&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="14956922" author="tkruse" created="Wed, 14 Oct 2015 13:19:46 +0000"  >&lt;p&gt;I created PR #142 for only this issue, as #109 tried to solve multiple issues.&lt;/p&gt;</comment>
                            <comment id="14958495" author="tkruse" created="Thu, 15 Oct 2015 08:19:38 +0000"  >&lt;p&gt;I modified PR #142 to make the code a bit more clear (added a commit so you can trace change). That also changed behavior a bit, so the first edge case should not be same as before:&lt;br/&gt;
assert x.toList().toString() == &apos;&lt;span class=&quot;error&quot;&gt;&amp;#91;53, 54, 55, 56, 57, 58, 59, 60&amp;#93;&lt;/span&gt;&apos;&lt;/p&gt;

&lt;p&gt;Basically when normalizing String &apos;7&apos; to int 55 is successful in making the range sane, then the code now uses 55 instead of &apos;7&apos; as starting point.&lt;/p&gt;</comment>
                            <comment id="14958571" author="tkruse" created="Thu, 15 Oct 2015 09:22:05 +0000"  >&lt;p&gt;Actually, this is linked to the fact that direction may be computed by ScriptBytecodeAdapter.compareGreaterThan(from, to), which on cases of non-matching types falls back to DefaultTypeTransformation.compareToWithEqualityCheck(). And since that one uses some heuristics to compare Strings with numerics, ObjectRange has to follow those semantics (e.g. avoid interpreting &apos;7&apos; as int 7 in the context when DefaultTypeTransformation.compareToWithEqualityCheck decided that it has the value of 55 when compared to a number).&lt;/p&gt;

&lt;p&gt;An ideal solution would make the contract between ObjectRange and DefaultTypeTransformation.compareToWithEqualityCheck() explicit, so that both always agree on how to interpret 2 values in the context of comparing them.&lt;/p&gt;

&lt;p&gt;I changed the PR adding a large comment to ObjectRange to discuss that rationale for why ObjectRange should behave the way it does.&lt;/p&gt;</comment>
                            <comment id="15352498" author="paulk" created="Tue, 28 Jun 2016 07:08:44 +0000"  >&lt;p&gt;Latest PR merged. In summary: numerous inconsistencies with various edge cases have been made consistent.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 21 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jw1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>