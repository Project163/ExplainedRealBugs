<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:43:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-6989] .each{..} Closure With Parameter Typed As Object[] Makes Arguments Object[Object[]]</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-6989</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;When iterating over a List of Object[] in a .each closure and typing the parameter as &lt;em&gt;Object[]&lt;/em&gt;, the arguments in each iteration become an Object[] of Object[]. This does not happen if the parameter is &lt;em&gt;def&lt;/em&gt;.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[] arr = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[1]
arr[0] = &lt;span class=&quot;code-quote&quot;&gt;&apos;test&apos;&lt;/span&gt;
List list = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList()
list.add(arr)

list.each { def obj -&amp;gt;
    &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; obj[0] == &lt;span class=&quot;code-quote&quot;&gt;&apos;test&apos;&lt;/span&gt;
}

list.each { &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[] obj -&amp;gt;
    &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; obj[0] == &lt;span class=&quot;code-quote&quot;&gt;&apos;test&apos;&lt;/span&gt; &lt;span class=&quot;code-comment&quot;&gt;//fails. obj[0] is &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[]{&lt;span class=&quot;code-quote&quot;&gt;&apos;test&apos;&lt;/span&gt;} instead of just &lt;span class=&quot;code-quote&quot;&gt;&apos;test&apos;&lt;/span&gt;
&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This does &lt;b&gt;not&lt;/b&gt; happen if the parameter is typed as &lt;em&gt;String[]&lt;/em&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] arr = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[1]
arr[0] = &lt;span class=&quot;code-quote&quot;&gt;&apos;test&apos;&lt;/span&gt;
List list = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList()
list.add(arr)

list.each { def obj -&amp;gt;
    &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; obj[0] == &lt;span class=&quot;code-quote&quot;&gt;&apos;test&apos;&lt;/span&gt;
}

list.each { &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] obj -&amp;gt;
    &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; obj[0] == &lt;span class=&quot;code-quote&quot;&gt;&apos;test&apos;&lt;/span&gt; &lt;span class=&quot;code-comment&quot;&gt;// passes
&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I have included a more thorough test case that demonstrates this behavior. Note that this may also apply to .collect or various other methods.&lt;/p&gt;</description>
                <environment>Windows 7 x64 SP1 on JVM 1.7.0_17</environment>
        <key id="12811427">GROOVY-6989</key>
            <summary>.each{..} Closure With Parameter Typed As Object[] Makes Arguments Object[Object[]]</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blackdrag">Jochen Theodorou</assignee>
                                    <reporter username="nalandial">Alex Beardsley</reporter>
                        <labels>
                            <label>breaking</label>
                    </labels>
                <created>Wed, 30 Jul 2014 12:45:33 +0000</created>
                <updated>Thu, 15 Jan 2015 07:57:26 +0000</updated>
                            <resolved>Wed, 22 Oct 2014 09:51:00 +0000</resolved>
                                    <version>2.3.3</version>
                    <version>2.4.0-beta-1</version>
                    <version>2.3.4</version>
                    <version>2.3.5</version>
                    <version>2.3.6</version>
                                    <fixVersion>2.4.0-beta-4</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14476626" author="blackdrag" created="Wed, 22 Oct 2014 09:26:06 +0000"  >&lt;p&gt;Giving this the label &quot;breaking&quot; because the bug is originating from a generated call(Object[]) method on the open block, which wrongly forwards the call by a direct call with wrong logic. the chance should be low to actually break code though.&lt;/p&gt;</comment>
                            <comment id="14476531" author="nalandial" created="Wed, 22 Oct 2014 09:37:35 +0000"  >&lt;p&gt;It is a problem when performing a GORM query in Grails and selecting multiple properties:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;List results = Foo.createCriteria().list {
    projections {
        property(&lt;span class=&quot;code-quote&quot;&gt;&quot;bar&quot;&lt;/span&gt;)
	property(&lt;span class=&quot;code-quote&quot;&gt;&quot;baz&quot;&lt;/span&gt;)
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Trying to do a .each{} on that will not give you the correct results because it returns a List of Object[], where each array has the requested properties. Even though the workaround is simple (use a for loop, or simply type as not Object[]), it still sucked up a significant amount of time to figure that out.&lt;/p&gt;</comment>
                            <comment id="14476644" author="blackdrag" created="Wed, 22 Oct 2014 09:51:01 +0000"  >&lt;p&gt;because it is potentially breaking the change is 2.4 only&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310260">
                    <name>Related</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12815794">GROOVY-7254</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12723244" name="test.groovy" size="2091" author="nalandial" created="Wed, 30 Jul 2014 12:45:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 4 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2crdb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>