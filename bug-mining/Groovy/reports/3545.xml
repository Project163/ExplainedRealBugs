<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:01:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-7954] Equal Operator for Classes implementing Comparable not Working on Interfaces</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-7954</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Using the equal operator &quot;==&quot; on two instances A and B does not work correctly, when&lt;/p&gt;

&lt;p&gt;1) A and B implement the same interface I1 but are not the same class and&lt;br/&gt;
2) interface I1 extends the &quot;Comparable&quot; interface.&lt;/p&gt;

&lt;p&gt;The checking in DefaultTypeTransformation.compareToWithEqualityCheck(...) checks for assignable classes, and uses compareTo when assignable on class level (which is not the case for instance A and B). But it does not check on interface level.&lt;/p&gt;

&lt;p&gt;That way, calling the compareTo(..) method is not performed.&lt;br/&gt;
In my use case, class A and B are actually considered equal, even so their concrete implementation is different. And the compareTo(...) method would actually return 0. &lt;/p&gt;

&lt;p&gt;How about doing real equality checking instead of returning -1 close to the end of method DefaultTypeTransformation.compareToWithEqualityCheck(...):&lt;/p&gt;

&lt;p&gt;...&lt;br/&gt;
if (equalityCheckOnly) {&lt;br/&gt;
    return left.equals(right) ? 0 : -1;&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;throw new GroovyRuntimeException(&quot;Cannot compare &quot; + left.getClass().getName() + &quot; with value &apos;&quot; +&lt;br/&gt;
                left + &quot;&apos; and &quot; + right.getClass().getName() + &quot; with value &apos;&quot; + right + &quot;&apos;&quot;);&lt;/p&gt;

&lt;p&gt;Thanks for your effort.&lt;/p&gt;</description>
                <environment>Windows 10, Java 7</environment>
        <key id="13009507">GROOVY-7954</key>
            <summary>Equal Operator for Classes implementing Comparable not Working on Interfaces</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="jhasenbe">Josef</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Oct 2016 11:30:10 +0000</created>
                <updated>Tue, 6 Aug 2019 15:54:20 +0000</updated>
                            <resolved>Wed, 20 Mar 2019 13:09:42 +0000</resolved>
                                    <version>2.4.7</version>
                                    <fixVersion>3.0.0-beta-1</fixVersion>
                    <fixVersion>2.5.7</fixVersion>
                                    <component>groovy-runtime</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="5400">1.5h</timespent>
                                <comments>
                            <comment id="15548410" author="paulk" created="Wed, 5 Oct 2016 11:08:29 +0000"  >&lt;p&gt;Do you have a self-contained example illustrating something close to your situation?&lt;/p&gt;</comment>
                            <comment id="15551172" author="jhasenbe" created="Thu, 6 Oct 2016 07:27:02 +0000"  >&lt;p&gt;Please find attached a simple example project (main class: Example.groovy).&lt;br/&gt;
Thanks.&lt;/p&gt;</comment>
                            <comment id="15551175" author="jhasenbe" created="Thu, 6 Oct 2016 07:27:31 +0000"  >&lt;p&gt;Please find attached a simple example project (main class: Example.groovy)&lt;/p&gt;</comment>
                            <comment id="15656728" author="janarbeit" created="Fri, 11 Nov 2016 10:38:44 +0000"  >&lt;p&gt;I could reproduce the error with the provided example. Will the patch be complicated or could this be fixed easily?&lt;/p&gt;</comment>
                            <comment id="16790416" author="jan.wittig" created="Tue, 12 Mar 2019 10:23:43 +0000"  >&lt;p&gt;There is a new merge request that could fix this issue: &lt;a href=&quot;https://github.com/apache/groovy/pull/895&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/895&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16797151" author="paulk" created="Wed, 20 Mar 2019 13:09:42 +0000"  >&lt;p&gt;If the class on right is also Comparable, compareTo is now used in that additional case. We may want to use logic such as left.equals(right) in some scenarios but we are planning to revamp that in Groovy 4, so I refrained from making that change here for just some of the cases where we&apos;d like it to apply.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12831911" name="Example.zip" size="1801" author="jhasenbe" created="Thu, 6 Oct 2016 07:27:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 34 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34err:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>