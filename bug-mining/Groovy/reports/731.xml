<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:07:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-2905] File.eachLine reports line numbers starting with 1, 2,...</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-2905</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;file.eachLine &lt;/p&gt;
{ line, number -&amp;gt; assert number &amp;gt; 0 }

&lt;p&gt;Programmers would expect the line numbers to start with 0, 1,...&lt;/p&gt;

&lt;p&gt;Furthermore the current behaviour is incompatible with e.g. List.eachWithIndex what makes it difficult to write closures that work in both cases.&lt;/p&gt;
</description>
                <environment>any</environment>
        <key id="12814175">GROOVY-2905</key>
            <summary>File.eachLine reports line numbers starting with 1, 2,...</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="veita">Alexander Veit</reporter>
                        <labels>
                    </labels>
                <created>Sun, 15 Jun 2008 05:39:25 +0000</created>
                <updated>Sun, 12 Oct 2008 08:46:51 +0000</updated>
                            <resolved>Fri, 4 Jul 2008 22:42:26 +0000</resolved>
                                    <version>1.5.6</version>
                    <version>1.6-beta-1</version>
                                    <fixVersion>1.5.7</fixVersion>
                    <fixVersion>1.6-beta-2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14478218" author="paulk" created="Sun, 15 Jun 2008 06:33:49 +0000"  >&lt;p&gt;It depends on whether you expect to be able to open a file in an editor and move to the relevant line.&lt;/p&gt;</comment>
                            <comment id="14465010" author="veita" created="Sun, 15 Jun 2008 10:11:32 +0000"  >&lt;p&gt;Yes, user interfaces often have strange conventions to be more intuitive. Editors usually start with line=1, column=1 in the top left corner. From this point of view String.eachWithIndex should probably also start with index 1 &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14478220" author="paulk" created="Thu, 19 Jun 2008 00:35:04 +0000"  >&lt;p&gt;So, a way forward might be to have an overloaded version of the eachWithIndex style methods which takes the starting number, e.g.:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;file.eachLine(0) { line, number -&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; number &amp;gt;= 0 }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14464988" author="veita" created="Sun, 22 Jun 2008 07:30:48 +0000"  >&lt;p&gt;Personally, I would prefer to apply Ockham&apos;s razor:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;A simple eachLine without starting index would suffice. Line number offsets could be implemented otherwise.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Line numbers (indexes) should always start with the same number. Users presumably don&apos;t expect that starting indexes differ; a closure doesn&apos;t know what kind of object it operates on.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;It is more natural (not only in Peano&apos;s sense) to let these indexes start with zero, and many Groovy methods already do so.&lt;/p&gt;

&lt;p&gt;This is only my personal opinion, so please don&apos;t take it too seriously.&lt;/p&gt;</comment>
                            <comment id="14478226" author="paulk" created="Sun, 22 Jun 2008 14:49:33 +0000"  >&lt;p&gt;You have a valid argument but I don&apos;t see it being quite that simple:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;I don&apos;t know of any editors which report line numbers based on a zero starting value&lt;/li&gt;
	&lt;li&gt;I believe Groovy&apos;s file based numbering was zero based in some spots and issues were raised to make it like we see it today&lt;/li&gt;
	&lt;li&gt;Groovy reports 1-based line numbers from the compiler (I don&apos;t know any compiler that reports 0-based line numbers)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;If you want to have the same closure, can&apos;t you have a base number and use currying? Or is that still a pain?&lt;/p&gt;</comment>
                            <comment id="14464987" author="veita" created="Mon, 23 Jun 2008 17:26:58 +0000"  >&lt;p&gt;Paul,&lt;/p&gt;

&lt;p&gt;I&apos;m arguing from a purely theroretical point of view without a specific use case in mind.&lt;/p&gt;

&lt;p&gt;Yes, currying works in cases where the closure and the object the closure operates on are created in a joint context.&lt;/p&gt;</comment>
                            <comment id="14478251" author="paulk" created="Fri, 4 Jul 2008 22:42:26 +0000"  >&lt;p&gt;Resolved by adding an optional firstLine count parameter to the eachLine methods. I can&apos;t see a way to resolve this in a generic way. Too many tools count files with line 1 as the first line. Everywhere else, 0-based starting indexs are the norm.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 21 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2cnuf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>