<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:33:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-5898] Sql.java throws IllegalStateException(&quot;Failed to process query. Unterminated &apos; character?&quot;) when comments contain quotes</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-5898</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;In versions of Groovy since 1.8, when Groovy SQL prepares to execute a parameterized query, it checks the query SQL for unterminated single quotes (lines 4168 - 4188 of groovy.sql.Sql.java in the current trunk source). However, the current code doesn&apos;t recognize that when the SQL contains comments, and the comments include apostrophes or single quote characters, that the SQL is valid.&lt;/p&gt;

&lt;p&gt;For example, this code will result in an exception:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;def myQuery = &quot;&quot;&quot;
  select count(*), &lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt;(? as varchar(10))
  -- An &apos; apostrophe
  from art.option 
&quot;&quot;&quot;

sql.eachRow(myQuery.toString(), [&lt;span class=&quot;code-quote&quot;&gt;&apos;1.7.5&apos;&lt;/span&gt;]) 
{row -&amp;gt;
  println row
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Perhaps you could use a regex or string replace to remove or ignore everything found between &quot;--&quot; and &quot;\n&quot; or &quot;/&lt;b&gt;&quot; and &quot;&lt;/b&gt;/&quot; before testing for unterminated quotes?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12816725">GROOVY-5898</key>
            <summary>Sql.java throws IllegalStateException(&quot;Failed to process query. Unterminated &apos; character?&quot;) when comments contain quotes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="msinatl">Marc Silverboard</reporter>
                        <labels>
                            <label>sql</label>
                    </labels>
                <created>Thu, 10 Jan 2013 10:49:47 +0000</created>
                <updated>Wed, 10 Jul 2013 04:42:21 +0000</updated>
                            <resolved>Thu, 4 Jul 2013 00:24:25 +0000</resolved>
                                    <version>1.8.8</version>
                    <version>2.1.0-rc-1</version>
                                    <fixVersion>2.2.0-beta-1</fixVersion>
                                    <component>SQL processing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14474583" author="jwagenleitner" created="Fri, 28 Jun 2013 13:30:06 +0000"  >&lt;p&gt;I added a pull request for this issue, &lt;a href=&quot;https://github.com/groovy/groovy-core/pull/212&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/groovy/groovy-core/pull/212&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14474521" author="jwagenleitner" created="Sun, 30 Jun 2013 09:12:19 +0000"  >&lt;p&gt;Found a bug in handling of empty quotes in my original pull request, since it has been merged already I opened another PR with the fix, &lt;a href=&quot;https://github.com/groovy/groovy-core/pull/213&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/groovy/groovy-core/pull/213&lt;/a&gt;.  Sorry for the trouble Paul.&lt;/p&gt;</comment>
                            <comment id="14474623" author="paulk" created="Thu, 4 Jul 2013 00:24:25 +0000"  >&lt;p&gt;Added John&apos;s fix to master. This should be in 2.2.0 which should have a beta released shortly. We can backport (possibly without some non-crucial refactoring and a deprecation) to the 2_1_X branch if there is sufficient demand.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 20 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bt47:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>