<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:41:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-6775] GroovyDoc reports Exception: groovy.lang.ReadOnlyPropertyException: Cannot set readonly property: comparator for class: java.util.TreeMap</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-6775</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;When starting and creating our help with groovydoc within a gradle build we got the following exception:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;groovy.lang.ReadOnlyPropertyException: Cannot set readonly property: comparator for class: java.util.TreeMap
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As a result no index-all.html file is generated, so we have no index and overview at all.&lt;/p&gt;

&lt;p&gt;=&amp;gt; Stacktrace is attached&lt;/p&gt;

&lt;p&gt;Gradle code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;def javaDocForHelp = task javadocForHelp(type: JavaExec, group:&lt;span class=&quot;code-quote&quot;&gt;&quot;documentation&quot;&lt;/span&gt;) {
	description = &lt;span class=&quot;code-quote&quot;&gt;&quot;This creates the documentation of the facade classes from the XYZ engine&quot;&lt;/span&gt;
	&lt;span class=&quot;code-comment&quot;&gt;// beware, the Groovydoc tool behaves strangely in some cases; e.g. &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; you change the order
&lt;/span&gt;	&lt;span class=&quot;code-comment&quot;&gt;// of arguments or make a mistake, it might silently fail or ignore some parameters
&lt;/span&gt;	&lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; an explanation of the parameters, enter &lt;span class=&quot;code-quote&quot;&gt;&quot;groovydoc -help&quot;&lt;/span&gt; on the command line
&lt;/span&gt;	def scriptingEngineSourceDirs = project(&lt;span class=&quot;code-quote&quot;&gt;&quot;:XYZ-engine&quot;&lt;/span&gt;).sourceSets.main.groovy.srcDirs
	scriptingEngineSourceDirs.each { inputs.dir(it) }
	ext.javadocDir = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(docDir, &lt;span class=&quot;code-quote&quot;&gt;&quot;javadoc&quot;&lt;/span&gt;)
	outputs.dir(javadocDir)
	classpath configurations.compile.files
	main = &lt;span class=&quot;code-quote&quot;&gt;&quot;org.codehaus.groovy.tools.groovydoc.Main&quot;&lt;/span&gt;
	args &lt;span class=&quot;code-quote&quot;&gt;&quot;-sourcepath&quot;&lt;/span&gt;, scriptingEngineSourceDirs.join(File.pathSeparator)
	args &lt;span class=&quot;code-quote&quot;&gt;&quot;-d&quot;&lt;/span&gt;, javadocDir.path
	&lt;span class=&quot;code-comment&quot;&gt;// packages
&lt;/span&gt;	args &lt;span class=&quot;code-quote&quot;&gt;&quot;XYZ.scripting.facade&quot;&lt;/span&gt;
	args &lt;span class=&quot;code-quote&quot;&gt;&quot;XYZ.scripting.facade.security&quot;&lt;/span&gt;
	args &lt;span class=&quot;code-quote&quot;&gt;&quot;XYZ.scripting.facade.structure&quot;&lt;/span&gt;
	args &lt;span class=&quot;code-quote&quot;&gt;&quot;XYZ.utils&quot;&lt;/span&gt;
	doFirst {
		javadocDir.mkdirs()
	}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>Windows 7 Enterpirse 64 Bit, SP1, 16 GB RAM, Gradle 1.9</environment>
        <key id="12817521">GROOVY-6775</key>
            <summary>GroovyDoc reports Exception: groovy.lang.ReadOnlyPropertyException: Cannot set readonly property: comparator for class: java.util.TreeMap</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="michaeli">Michael Inden</reporter>
                        <labels>
                            <label>contrib</label>
                            <label>exception</label>
                            <label>help-requested</label>
                            <label>treemap</label>
                            <label>usertask</label>
                    </labels>
                <created>Fri, 9 May 2014 04:43:42 +0000</created>
                <updated>Wed, 28 May 2014 03:04:02 +0000</updated>
                            <resolved>Tue, 20 May 2014 06:40:46 +0000</resolved>
                                    <version>1.8.6</version>
                    <version>2.1.7</version>
                    <version>2.2.0</version>
                    <version>2.2.2</version>
                    <version>2.3.0</version>
                                    <fixVersion>2.3.2</fixVersion>
                                    <component>GroovyDoc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14480519" author="paulk" created="Fri, 9 May 2014 20:50:11 +0000"  >&lt;p&gt;add code tags&lt;/p&gt;</comment>
                            <comment id="14480525" author="paulk" created="Sat, 10 May 2014 00:00:45 +0000"  >&lt;p&gt;I was trying to replicate your issue. I used these build files against the groovy source tree:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;settings6775.gradle&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;rootProject.name = &lt;span class=&quot;code-quote&quot;&gt;&apos;groovy6775&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;build6775.gradle&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;apply plugin: &lt;span class=&quot;code-quote&quot;&gt;&apos;groovy&apos;&lt;/span&gt;

buildDir = &lt;span class=&quot;code-quote&quot;&gt;&apos;target&apos;&lt;/span&gt;

repositories {
    mavenCentral()
}

dependencies {
    compile &lt;span class=&quot;code-quote&quot;&gt;&quot;org.codehaus.groovy:groovy-all:2.3.0&quot;&lt;/span&gt;
    compile &lt;span class=&quot;code-quote&quot;&gt;&quot;org.fusesource.jansi:jansi:1.11&quot;&lt;/span&gt;
    compile &lt;span class=&quot;code-quote&quot;&gt;&quot;commons-cli:commons-cli:1.2&quot;&lt;/span&gt;
}

sourceSets {
    main {
        groovy {
            srcDirs = [
                    &lt;span class=&quot;code-quote&quot;&gt;&apos;subprojects/groovy-swing/src/main/groovy&apos;&lt;/span&gt;,
                    &lt;span class=&quot;code-quote&quot;&gt;&apos;subprojects/groovy-swing/src/main/java&apos;&lt;/span&gt;
            ]
        }
    }
}

task javadocForHelp(type: JavaExec, group:&lt;span class=&quot;code-quote&quot;&gt;&quot;documentation&quot;&lt;/span&gt;) {
    description = &lt;span class=&quot;code-quote&quot;&gt;&quot;This creates the documentation of some groovy swing classes&quot;&lt;/span&gt;
    def scriptingEngineSourceDirs = rootProject.sourceSets.main.groovy.srcDirs
    scriptingEngineSourceDirs.each { inputs.dir(it) }
    ext.javadocDir = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(buildDir, &lt;span class=&quot;code-quote&quot;&gt;&quot;javadoc&quot;&lt;/span&gt;)
    outputs.dir(javadocDir)
    classpath configurations.compile.files + sourceSets.main.runtimeClasspath
    main = &lt;span class=&quot;code-quote&quot;&gt;&quot;org.codehaus.groovy.tools.groovydoc.Main&quot;&lt;/span&gt;
    args &lt;span class=&quot;code-quote&quot;&gt;&quot;-sourcepath&quot;&lt;/span&gt;, scriptingEngineSourceDirs.join(File.pathSeparator)
    args &lt;span class=&quot;code-quote&quot;&gt;&quot;-d&quot;&lt;/span&gt;, javadocDir.path
    &lt;span class=&quot;code-comment&quot;&gt;// packages
&lt;/span&gt;    args &lt;span class=&quot;code-quote&quot;&gt;&quot;groovy.swing.binding&quot;&lt;/span&gt;
    args &lt;span class=&quot;code-quote&quot;&gt;&quot;groovy.swing.factory&quot;&lt;/span&gt;
    doFirst {
        javadocDir.mkdirs()
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;And ran this command:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;gt; gradlew -b groovy6775.gradle -c settings6775.gradle javadocForHelp
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;And it seems to run without problems. Also, gradle&apos;s built-in groovydoc functionality seems to work fine for the groovy build.&lt;/p&gt;

&lt;p&gt;Do you use any custom templates in your environment? Perhaps you are more familiar with the kind of thing that triggers the problem and can modify the standalone example above or prodice some alternative standalone example to help reproduce the problem?&lt;/p&gt;</comment>
                            <comment id="14475993" author="pschumacher" created="Sat, 17 May 2014 12:14:10 +0000"  >&lt;p&gt;@Michael Inden:&lt;/p&gt;

&lt;p&gt;It would be nice if you could answer Pauls questions. Thanks!&lt;/p&gt;</comment>
                            <comment id="14475870" author="michaeli" created="Mon, 19 May 2014 10:02:39 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;i tried it with your demo and it worked for me (with just a few tiny example classes).&lt;br/&gt;
Seems to be no groovy problem but an error in our project build?!&lt;/p&gt;

&lt;p&gt;There must by something strange in the preparation of the groovydoc task in our build.&lt;br/&gt;
I have to explore or ask one of our gradle gurus.The difference beetwen the plain example&lt;br/&gt;
an our project setup isn&apos;t obvious. I will post the reason as soon as i have got the solution.&lt;/p&gt;

&lt;p&gt;Kind regards&lt;br/&gt;
Michael&lt;/p&gt;</comment>
                            <comment id="14475932" author="michaeli" created="Tue, 20 May 2014 03:00:31 +0000"  >&lt;p&gt;Dear Groovy-Team,&lt;/p&gt;

&lt;p&gt;First of all we do use the default GString templates groovy comes along with.&lt;br/&gt;
We could figure out the problem when using a debugger and reaching out for the generated GStringTemplate code which is compiled to a groovy script later on.&lt;br/&gt;
After this pinpointing the problem down to the template file &quot;index-all.html&quot;.&lt;/p&gt;

&lt;p&gt;One of our classes has a property called &quot;comparator&quot;. &lt;br/&gt;
The groovydoc and the index-all.html file with the following line &lt;/p&gt;

&lt;p&gt;entries&lt;span class=&quot;error&quot;&gt;&amp;#91;classLower&amp;#93;&lt;/span&gt; = &quot;&quot;&quot; .... &quot;&quot;&quot;&lt;/p&gt;

&lt;p&gt;are producing the exception, because &quot;comparator&quot; ist used as &quot;classLower&quot; as porperty accesor instead&lt;br/&gt;
of an map access: When assigning via the supposed &quot;put&quot; &quot;entries&lt;span class=&quot;error&quot;&gt;&amp;#91;classLower&amp;#93;&lt;/span&gt; = &quot;, whereas entries is a &lt;br/&gt;
TreeMap, groovy obviously detects that &quot;comparator&quot; also is a private final field in TreeMap.&lt;br/&gt;
And here we go, groovy tries to set the &quot;property&quot; which is final and ends up in the described exception.&lt;/p&gt;



&lt;p&gt;Fix: Replace one single line in the index-all.html-Template-File in grrovy (and/or improve groovy property acces logic, so that&lt;br/&gt;
       private final properties aren&apos;t accessed, when a map access is appropriate)&lt;/p&gt;

&lt;p&gt;entries&lt;span class=&quot;error&quot;&gt;&amp;#91;classLower&amp;#93;&lt;/span&gt; = &quot;&quot;&quot;&lt;br/&gt;
&amp;lt;dt&amp;gt;&amp;lt;a href=&quot;${classDoc.fullPathName}.html&quot; title=&quot;${desc + packageOrInnerName}&quot;&amp;gt;&amp;lt;b&amp;gt;${classDoc.name()}&amp;lt;/b&amp;gt;&amp;lt;/a&amp;gt; - ${desc}&amp;lt;a href=&quot;./${packageName.replace(&apos;.&apos;, &apos;/&apos;)}/package-summary.html&quot;&amp;gt;${packageName}&amp;lt;/a&amp;gt;&lt;br/&gt;
&amp;lt;/dt&amp;gt;&amp;lt;dd&amp;gt;${classDoc.firstSentenceCommentText()}&amp;lt;/dd&amp;gt;&quot;&quot;&quot;&lt;/p&gt;

&lt;p&gt;===&amp;gt; &lt;/p&gt;

&lt;p&gt;entries.put(classLower, &quot;&quot;&quot;&lt;br/&gt;
&amp;lt;dt&amp;gt;&amp;lt;a href=&quot;${classDoc.fullPathName}.html&quot; title=&quot;${desc + packageOrInnerName}&quot;&amp;gt;&amp;lt;b&amp;gt;${classDoc.name()}&amp;lt;/b&amp;gt;&amp;lt;/a&amp;gt; - ${desc}&amp;lt;a href=&quot;./${packageName.replace(&apos;.&apos;, &apos;/&apos;)}/package-summary.html&quot;&amp;gt;${packageName}&amp;lt;/a&amp;gt;&lt;br/&gt;
&amp;lt;/dt&amp;gt;&amp;lt;dd&amp;gt;${classDoc.firstSentenceCommentText()}&amp;lt;/dd&amp;gt;&quot;&quot;&quot;)&lt;/p&gt;


&lt;p&gt;I think a temporary workaround would be to create copies of the default templates and use &quot;-stylesheetfile&quot;, correct?&lt;/p&gt;

&lt;p&gt;KInd regards&lt;br/&gt;
Christian &amp;amp; Michael&lt;/p&gt;</comment>
                            <comment id="14475949" author="paulk" created="Tue, 20 May 2014 05:19:33 +0000"  >&lt;p&gt;Yes, you can supply your own stylesheet files. Using put seems a worthwhile change. Do you want to create a PR or are you happy for one of us to do the change?&lt;/p&gt;</comment>
                            <comment id="14475956" author="michaeli" created="Tue, 20 May 2014 05:27:56 +0000"  >&lt;p&gt;Hi Paul,&lt;/p&gt;

&lt;p&gt;i tested this solution by proiding a jar file containg just the modified index-all.html and adding it to the classpath when generating help:&lt;/p&gt;

&lt;p&gt;classpath &quot;C:/temp/modified_help.jar&quot;&lt;/p&gt;

&lt;p&gt;I would prefer if you do the change to groovy &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Many thanx&lt;br/&gt;
Michael&lt;/p&gt;</comment>
                            <comment id="14480549" author="paulk" created="Tue, 20 May 2014 06:40:46 +0000"  >&lt;p&gt;Made the change. Should be in 2.3.2. Thanks for reporting the original issue and debugging the cause.&lt;/p&gt;</comment>
                            <comment id="14475871" author="michaeli" created="Tue, 20 May 2014 06:49:27 +0000"  >&lt;p&gt;Cool &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12723215" name="StacktraceGroovyDoc.txt" size="4612" author="michaeli" created="Fri, 9 May 2014 04:43:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 27 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2cmtz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>