<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:29:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-5751] Adding milliseconds with TimeCategory gives incorrect toString</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-5751</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;From &lt;a href=&quot;http://stackoverflow.com/questions/12833903/groovy-timecategory-bad-millseconds-addition&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this question&lt;/a&gt; on StackOverflow, doing:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;def a = use(groovy.time.TimeCategory) {
  800.millisecond + 300.millisecond
}
println a
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Gives the output:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;0.1100 seconds
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When it should show either:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;1100 milliseconds
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;or&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;1.1 seconds
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12816576">GROOVY-5751</key>
            <summary>Adding milliseconds with TimeCategory gives incorrect toString</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="tim_yates">Tim Yates</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Oct 2012 03:25:40 +0000</created>
                <updated>Sat, 22 Dec 2012 01:10:48 +0000</updated>
                            <resolved>Fri, 12 Oct 2012 04:26:31 +0000</resolved>
                                    <version>2.0.5</version>
                                    <fixVersion>2.0.6</fixVersion>
                    <fixVersion>2.1.0-beta-1</fixVersion>
                    <fixVersion>1.8.9</fixVersion>
                                    <component>groovy-jdk</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14473393" author="paulk" created="Fri, 12 Oct 2012 03:22:48 +0000"  >&lt;p&gt;OK, I have a patch for this. Just writing a test. The output for the example is now &quot;1.100 seconds&quot;.&lt;/p&gt;</comment>
                            <comment id="14473333" author="tim_yates" created="Fri, 12 Oct 2012 03:32:42 +0000"  >&lt;p&gt;I wrote a normalize method (which I posted in to that question) to take a TimeDuration and return a new instance with the wrapping figures handled:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;groovy.time.TimeDuration.metaClass.normalize = { -&amp;gt;
  def newdmap = [&lt;span class=&quot;code-quote&quot;&gt;&apos;days&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;hours&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;minutes&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;seconds&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;millis&apos;&lt;/span&gt;].collectEntries { 
    [ (it):delegate.&lt;span class=&quot;code-quote&quot;&gt;&quot;$it&quot;&lt;/span&gt; ]
  }.with { dmap -&amp;gt;
    [millis:1000,seconds:60,minutes:60,hours:24,days:-1].inject( [ dur:[ days:0, hours:0, minutes:0, seconds:0, millis:0 ], roll:0 ] ) { val, field -&amp;gt;
      val.dur.&lt;span class=&quot;code-quote&quot;&gt;&quot;$field.key&quot;&lt;/span&gt; = dmap.&lt;span class=&quot;code-quote&quot;&gt;&quot;$field.key&quot;&lt;/span&gt; + val.roll
      val.roll = val.dur.&lt;span class=&quot;code-quote&quot;&gt;&quot;$field.key&quot;&lt;/span&gt;.intdiv( field.value )
      val.dur.&lt;span class=&quot;code-quote&quot;&gt;&quot;$field.key&quot;&lt;/span&gt; = field.value &amp;lt; 0 ?
                               val.dur.&lt;span class=&quot;code-quote&quot;&gt;&quot;$field.key&quot;&lt;/span&gt; :
                               val.dur.&lt;span class=&quot;code-quote&quot;&gt;&quot;$field.key&quot;&lt;/span&gt; % field.value
      val
    }.dur
  }
  &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TimeDuration( newdmap.days, newdmap.hours, newdmap.minutes, newdmap.seconds, newdmap.millis )
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Not sure if it&apos;s something that could (or should) be written for TimeDuration? &amp;#8211; obviously, it would need Javaifying&lt;/p&gt;</comment>
                            <comment id="14480021" author="paulk" created="Fri, 12 Oct 2012 04:26:32 +0000"  >&lt;p&gt;Patch applied.&lt;/p&gt;

&lt;p&gt;Tim, I think normalize() or fromMilliseconds() or millis.asDuration() would be a useful addition - over and above this fix. BaseDuration also has months and years, so it might pay to cover those too. I am thinking just providing the method - and not trying to auto apply it after operations would be the way to go at this point.&lt;/p&gt;</comment>
                            <comment id="14473362" author="tim_yates" created="Fri, 12 Oct 2012 04:41:47 +0000"  >&lt;p&gt;Yeah, I stopped before months, as for days to roll into months, you&apos;d need to know what month you&apos;re representing, which isn&apos;t known by the Duration :-/&lt;/p&gt;

&lt;p&gt;Maybe a parameter specifying which year and month the duration is starting from for the normalize method?  But this feels like it might be more confusing than helpful?&lt;/p&gt;

&lt;p&gt;But then again, this method you could end up with 1 month, 90 days which I guess isn&apos;t very helpful either &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14473402" author="paulk" created="Fri, 12 Oct 2012 07:22:52 +0000"  >&lt;p&gt;I guess just the DatumDependentDuration would get months and years but I&apos;d have to check the code again to confirm there would be no issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 6 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2cs13:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>