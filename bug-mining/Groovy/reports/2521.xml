<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:39:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-6666] Unexpected NullPointerException</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-6666</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;While upgrading Grails to use Groovy 2.3.0-beta-1 I came across a scenario where a NullPointerException is being thrown in a scenario where I don&apos;t think it should be.  It seems that the null safety operator isn&apos;t working as it should.&lt;/p&gt;

&lt;p&gt;I have attached a simple sample app with the following code.  Running the test yields a NullPointerException.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;./gradlew test
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;src/main/groovy/com/demo/Widget.groovy&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; com.demo

@groovy.transform.CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Widget {
    def isValid(Map m) {
        &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isValid = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
        def dir = m.dir?.toString()
        def file = m.file?.toString()

        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(file) {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!(file.startsWith(&lt;span class=&quot;code-quote&quot;&gt;&apos;/&apos;&lt;/span&gt;) || dir?.endsWith(&lt;span class=&quot;code-quote&quot;&gt;&apos;/&apos;&lt;/span&gt;))) {
                isValid = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
            }
        }

        isValid
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;src/test/groovy/com/demo/WidgetSpec.groovy&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; com.demo

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; spock.lang.Specification

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;WidgetSpec &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Specification {
    void &lt;span class=&quot;code-quote&quot;&gt;&apos;test with file and no dir&apos;&lt;/span&gt;() {
        when:
        def widget = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Widget()
        def m = [file: &lt;span class=&quot;code-quote&quot;&gt;&apos;someFile&apos;&lt;/span&gt;]

        then:
        !widget.isValid(m)
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12817458">GROOVY-6666</key>
            <summary>Unexpected NullPointerException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blackdrag">Jochen Theodorou</assignee>
                                    <reporter username="brownj">Jeff Brown</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Apr 2014 15:11:01 +0000</created>
                <updated>Thu, 10 Apr 2014 17:16:59 +0000</updated>
                            <resolved>Mon, 7 Apr 2014 10:32:52 +0000</resolved>
                                    <version>2.3.0-beta-1</version>
                                    <fixVersion>2.3.0-beta-2</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14475569" author="brownj" created="Fri, 4 Apr 2014 15:12:40 +0000"  >&lt;p&gt;The use of @CompileStatic is important there.  The test passes if that is removed.&lt;/p&gt;</comment>
                            <comment id="14475645" author="kaendfinger" created="Fri, 4 Apr 2014 16:54:03 +0000"  >&lt;p&gt;This is for sure a bug, and is definitely not intended, unless I didn&apos;t read the code right. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/tongue.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I&apos;m sure an expert will see this issue and take care of it.&lt;/p&gt;</comment>
                            <comment id="14475670" author="melix" created="Mon, 7 Apr 2014 03:38:15 +0000"  >&lt;p&gt;Test case reduced to:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@groovy.transform.CompileStatic
def isValid() {
        &lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt; test = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; || test
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14475693" author="melix" created="Mon, 7 Apr 2014 03:41:51 +0000"  >&lt;p&gt;Assigning back to Jochen because the bug is not specific to static compilation. The code in the previous comment fails without &lt;tt&gt;@CompileStatic&lt;/tt&gt; too. It is a regression introduced by:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/groovy/groovy-core/commit/bc5a0c526e49ce56e971efe1100815fb5e0b8b3e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/groovy/groovy-core/commit/bc5a0c526e49ce56e971efe1100815fb5e0b8b3e&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14475694" author="blackdrag" created="Mon, 7 Apr 2014 10:32:52 +0000"  >&lt;p&gt;fixed now&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12723211" name="nullproblem.zip" size="52050" author="brownj" created="Fri, 4 Apr 2014 15:11:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 33 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2cedj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>