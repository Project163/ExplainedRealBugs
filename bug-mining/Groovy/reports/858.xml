<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:10:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-3248] String.replaceAll(String, Closure) should quote the replacement string</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-3248</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;String.replaceAll(String, Closure) is passing the stringified closure result directly to Matcher.appendReplacement.&lt;/p&gt;

&lt;p&gt;The consequence is that the resulting string is interpreted as a &quot;replacement string&quot; which treats &apos;$&apos; and &apos;\&apos; specially so that group replacements can be done.  For my purposes that definitely undesireable.&lt;/p&gt;

&lt;p&gt;The whole reason I see for the closure API is so that those substitutions are done in the closure and that the closure expects it&apos;s result string to be substituted literally.&lt;/p&gt;

&lt;p&gt;An example of the problem is like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;groovy&amp;gt; println &lt;span class=&quot;code-quote&quot;&gt;&apos;x123z45&apos;&lt;/span&gt;.replaceAll(/([^z]*)(z)/, { all, m, d -&amp;gt;  m })
x12345

groovy&amp;gt; println &lt;span class=&quot;code-quote&quot;&gt;&apos;$123z45&apos;&lt;/span&gt;.replaceAll(/([^z]*)(z)/, { all, m, d -&amp;gt;  m })

$1232345
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The fix is that quoteReplacement needs to be called on the result before appendReplacement is called.  This is similar to the problem we had with minus.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://jira.codehaus.org/browse/GROOVY-1637&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jira.codehaus.org/browse/GROOVY-1637&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Hmmm, there they avoided the problem that quoteReplacement is JDK 1.5 by not using replaceAll.  Looks like we need to implement RegexUtils.quoteReplacement after all. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12817970">GROOVY-3248</key>
            <summary>String.replaceAll(String, Closure) should quote the replacement string</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jimwhite">James P. White</assignee>
                                    <reporter username="jimwhite">James P. White</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Jan 2009 23:00:48 +0000</created>
                <updated>Thu, 22 Jan 2009 21:34:43 +0000</updated>
                            <resolved>Sat, 3 Jan 2009 02:23:45 +0000</resolved>
                                    <version>1.5.7</version>
                    <version>1.6-rc-1</version>
                                    <fixVersion>1.6-rc-2</fixVersion>
                    <fixVersion>1.5.8</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14466065" author="jimwhite" created="Fri, 2 Jan 2009 23:13:44 +0000"  >&lt;p&gt;Fix committed to trunk cs14758.&lt;/p&gt;</comment>
                            <comment id="14466111" author="jimwhite" created="Fri, 2 Jan 2009 23:37:40 +0000"  >&lt;p&gt;Fix includes another subtle problem.  The code was using String.valueOf on the result rather than InvokerHelper.toString.  That gets into another whole can of worms, but considering it was the only such usage in DGM it is an obvious fix to make it like the rest of the code.&lt;/p&gt;

&lt;p&gt;Commited to trunk cs14762.&lt;/p&gt;</comment>
                            <comment id="14466137" author="jimwhite" created="Sat, 3 Jan 2009 00:04:01 +0000"  >&lt;p&gt;Fixed in 1.5 branch cs14763.&lt;/p&gt;

&lt;p&gt;Noticed that there are a lot more RegularExpressionsTests in trunk.  They should probably be merged/converted to 1.5.&lt;/p&gt;</comment>
                            <comment id="14466052" author="jimwhite" created="Sat, 3 Jan 2009 02:23:45 +0000"  >&lt;p&gt;Really fixed 1.5 now (but not the merge of the additional tests beyond the new one for replaceAll(String, Closure)).&lt;/p&gt;

&lt;p&gt;Also merged to 1.6.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 47 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2c9jz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>