<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:16:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-4257] Collection.unique() method might remove not duplicate items</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-4257</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;list=[&lt;span class=&quot;error&quot;&gt;&amp;#91;3035, 26972&amp;#93;&lt;/span&gt;, &lt;span class=&quot;error&quot;&gt;&amp;#91;2795, 34412&amp;#93;&lt;/span&gt;]&lt;br/&gt;
list.unique()&lt;br/&gt;
println list&lt;/p&gt;

&lt;p&gt;Result: [&lt;span class=&quot;error&quot;&gt;&amp;#91;3035, 26972&amp;#93;&lt;/span&gt;]&lt;/p&gt;

&lt;p&gt;list=[&lt;span class=&quot;error&quot;&gt;&amp;#91;3035, 26972&amp;#93;&lt;/span&gt;, &lt;span class=&quot;error&quot;&gt;&amp;#91;2795, 34412&amp;#93;&lt;/span&gt;]&lt;br/&gt;
list.unique&lt;/p&gt;
{it}
&lt;p&gt;println list&lt;/p&gt;

&lt;p&gt;Result: [&lt;span class=&quot;error&quot;&gt;&amp;#91;3035, 26972&amp;#93;&lt;/span&gt;]&lt;/p&gt;

&lt;p&gt;Because the unique method use NumberAwareComparator&amp;lt;T&amp;gt; to compare elements in the collection, and NumberAwareComparator&amp;lt;T&amp;gt; will use object&apos;s hashCode to compare two object when the object doesn&apos;t have a compareTo method, then the two list &lt;span class=&quot;error&quot;&gt;&amp;#91;3035, 26972&amp;#93;&lt;/span&gt;, &lt;span class=&quot;error&quot;&gt;&amp;#91;2795, 34412&amp;#93;&lt;/span&gt; are considered to be duplicate(because they have the same hashCode).&lt;/p&gt;

&lt;p&gt;Will it be better to use equals method to decide whether two elements are duplicate? &lt;br/&gt;
As the document say:&lt;br/&gt;
&quot;A convenience method for making a collection unique using a Closure to determine duplicate (equal) items. If the closure takes a single parameter, the argument passed will be each element, and the closure should return a value used for comparison (either using &lt;/p&gt;
{@link Comparable#compareTo(Object)}
&lt;p&gt; or &lt;/p&gt;
{@link Object#equals(Object)}
&lt;p&gt;). If the closure takes two parameters, two items from the collection will be passed as arguments, and the closure should return an int value (with 0 indicating the items are not unique).&quot;&lt;/p&gt;</description>
                <environment>Windows XP, JDK 1.6.0_19, GROOVY 1.7.0</environment>
        <key id="12811795">GROOVY-4257</key>
            <summary>Collection.unique() method might remove not duplicate items</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="fangyixun">Yixun Fang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Jun 2010 01:54:23 +0000</created>
                <updated>Thu, 22 Jul 2010 17:33:15 +0000</updated>
                            <resolved>Wed, 23 Jun 2010 15:39:06 +0000</resolved>
                                                    <fixVersion>1.8-beta-1</fixVersion>
                                    <component>groovy-jdk</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14469673" author="fangyixun" created="Tue, 22 Jun 2010 02:06:20 +0000"  >&lt;p&gt;set=[&lt;span class=&quot;error&quot;&gt;&amp;#91;3035, 26972&amp;#93;&lt;/span&gt;, &lt;span class=&quot;error&quot;&gt;&amp;#91;2795, 34412&amp;#93;&lt;/span&gt;].asType(Set)&lt;br/&gt;
set.unique()&lt;br/&gt;
println set&lt;/p&gt;

&lt;p&gt;Result: [&lt;span class=&quot;error&quot;&gt;&amp;#91;2795, 34412&amp;#93;&lt;/span&gt;, &lt;span class=&quot;error&quot;&gt;&amp;#91;3035, 26972&amp;#93;&lt;/span&gt;]&lt;/p&gt;

&lt;p&gt;set=[&lt;span class=&quot;error&quot;&gt;&amp;#91;3035, 26972&amp;#93;&lt;/span&gt;, &lt;span class=&quot;error&quot;&gt;&amp;#91;2795, 34412&amp;#93;&lt;/span&gt;].asType(Set)&lt;br/&gt;
set.unique&lt;/p&gt;
{it}&lt;br/&gt;
println set&lt;br/&gt;
&lt;br/&gt;
Result: [&lt;span class=&quot;error&quot;&gt;&amp;#91;2795, 34412&amp;#93;&lt;/span&gt;]&lt;br/&gt;
&lt;br/&gt;
when the collection is a Set, unique() and unique{it}
&lt;p&gt; will return different results, because the unique() method will return self but unique&lt;/p&gt;
{it}
&lt;p&gt; method will convert self to a list before remove duplicate items.&lt;/p&gt;</comment>
                            <comment id="14479222" author="paulk" created="Tue, 22 Jun 2010 15:51:54 +0000"  >&lt;p&gt;Proposed patch attached&lt;/p&gt;</comment>
                            <comment id="14479199" author="paulk" created="Tue, 22 Jun 2010 19:44:50 +0000"  >&lt;p&gt;Patch applied currently to trunk (for 1.8).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12722680" name="groovy4257_SetUnique.patch" size="3221" author="paulk" created="Tue, 22 Jun 2010 15:51:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 23 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2c6xj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>