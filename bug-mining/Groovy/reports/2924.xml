<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:46:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-7526] Safe navigation broken on java fields with indy and @CompileStatic</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-7526</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Trying to directly access a native Java object field, from a Groovy class compiled with invokedynamic and @CompileStatic, causes a &quot;java.lang.VerifyError: Bad type on operand stack&quot; error.&lt;/p&gt;

&lt;p&gt;I have reproduced this on Linux with Groovy 2.4.3/2.4.4 and Java 1.7.0_80 (64bit).&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;~ $ cd /tmp/groovy_test/
/tmp/groovy_test $ rm -f com/*.class
/tmp/groovy_test $ javac com/*.java
/tmp/groovy_test $ /opt/groovy-2.4.4/bin/groovyc --indy --configscript config.groovyc com/*.groovy
/tmp/groovy_test $ java -cp .:/opt/groovy-2.4.4/lib/groovy-2.4.4.jar com.Test
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception in thread &quot;main&quot; java.lang.VerifyError: Bad type on operand stack
Exception Details:
  Location:
    com/Controller.run()V @55: invokedynamic
  Reason:
    Type &apos;java/lang/Object&apos; (current frame, stack[0]) is not assignable to &apos;java/lang/String&apos;
  Current Frame:
    bci: @55
    flags: { }
    locals: { &apos;com/Controller&apos;, &apos;com/GroovyTool$Data&apos;, &apos;com/GroovyTool$Data&apos;, &apos;com/JavaTool$Data&apos; }
    stack: { &apos;java/lang/Object&apos; }
  Bytecode:
    0000000: b800 224c 2b57 2b59 4dc6 000a 2cb6 0028
    0000010: a700 0401 ba00 3600 0099 000d b200 3c12
    0000020: 3eb6 0044 0157 b800 494e 2d57 2d59 c700
    0000030: 06a7 0006 b400 4fba 0036 0000 9900 0db2
    0000040: 003c 1251 b600 4401 57b1               
  Stackmap Table:
    append_frame(@19,Object[#36],Object[#36])
    same_locals_1_stack_item_frame(@20,Object[#87])
    same_frame(@38)
    full_frame(@52,{Object[#2],Object[#36],Object[#36],Object[#75]},{Object[#75]})
    same_locals_1_stack_item_frame(@55,Object[#4])
    same_frame(@73)

	at java.lang.Class.getDeclaredConstructors0(Native Method)
	at java.lang.Class.privateGetDeclaredConstructors(Class.java:2595)
	at java.lang.Class.getConstructor0(Class.java:2895)
	at java.lang.Class.newInstance(Class.java:354)
	at com.Test.loadController(Test.java:20)
	at com.Test.test(Test.java:30)
	at com.Test.main(Test.java:10)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Work arounds that I found:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Remove @CompileStatic&lt;/li&gt;
	&lt;li&gt;Disable --indy&lt;/li&gt;
	&lt;li&gt;Cast the safely navigated field to it&apos;s object type i.e. (String)data?.field&lt;/li&gt;
	&lt;li&gt;Define a getter method to use in lieu of the field.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12849413">GROOVY-7526</key>
            <summary>Safe navigation broken on java fields with indy and @CompileStatic</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blackdrag">Jochen Theodorou</assignee>
                                    <reporter username="SparkyBluefang">Matthew Turnbull</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Jul 2015 20:03:25 +0000</created>
                <updated>Tue, 2 May 2017 02:03:32 +0000</updated>
                            <resolved>Sat, 1 Aug 2015 20:45:47 +0000</resolved>
                                    <version>2.4.3</version>
                                                    <component>Static compilation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14643297" author="sparkybluefang" created="Mon, 27 Jul 2015 20:04:08 +0000"  >&lt;p&gt;Test case&lt;/p&gt;</comment>
                            <comment id="14646608" author="keegan" created="Wed, 29 Jul 2015 18:59:17 +0000"  >&lt;p&gt;I was able to reproduce this in both Gradle and Maven with GMavenPlus.  I&apos;m not sure yet if this is helpful, but the bytecode for &lt;tt&gt;Controller.run()&lt;/tt&gt; is&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; 0 invokestatic #34 &amp;lt;com/GroovyTool.getData&amp;gt;
 3 astore_1
 4 aload_1
 5 pop
 6 aload_1
 7 dup
 8 astore_2
 9 ifnull 19 (+10)
12 aload_2
13 invokevirtual #40 &amp;lt;com/GroovyTool$Data.getFieldData&amp;gt;
16 goto 20 (+4)
19 aconst_null
20 invokedynamic #54 &amp;lt;cast, BootstrapMethods #0&amp;gt;
25 ifeq 38 (+13)
28 getstatic #60 &amp;lt;java/lang/System.out&amp;gt;
31 ldc #62 &amp;lt;HAS JAVA TOOL DATA&amp;gt;
33 invokevirtual #68 &amp;lt;java/io/PrintStream.println&amp;gt;
36 aconst_null
37 pop
38 invokestatic #73 &amp;lt;com/JavaTool.getData&amp;gt;
41 astore_3
42 aload_3
43 pop
44 aload_3
45 dup
46 ifnonnull 52 (+6)
49 goto 55 (+6)
52 getfield #79 &amp;lt;com/JavaTool$Data.fieldData&amp;gt;
55 invokedynamic #54 &amp;lt;cast, BootstrapMethods #0&amp;gt;
60 ifeq 73 (+13)
63 getstatic #60 &amp;lt;java/lang/System.out&amp;gt;
66 ldc #81 &amp;lt;HAS GROOVY TOOL DATA&amp;gt;
68 invokevirtual #68 &amp;lt;java/io/PrintStream.println&amp;gt;
71 aconst_null
72 pop
73 return
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Without indy, but with CompileStatic:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; 0 invokestatic #34 &amp;lt;com/GroovyTool.getData&amp;gt;
 3 astore_1
 4 aload_1
 5 pop
 6 aload_1
 7 dup
 8 astore_2
 9 ifnull 19 (+10)
12 aload_2
13 invokevirtual #40 &amp;lt;com/GroovyTool$Data.getFieldData&amp;gt;
16 goto 20 (+4)
19 aconst_null
20 invokestatic #46 &amp;lt;org/codehaus/groovy/runtime/typehandling/DefaultTypeTransformation.booleanUnbox&amp;gt;
23 ifeq 36 (+13)
26 getstatic #52 &amp;lt;java/lang/System.out&amp;gt;
29 ldc #54 &amp;lt;HAS JAVA TOOL DATA&amp;gt;
31 invokevirtual #60 &amp;lt;java/io/PrintStream.println&amp;gt;
34 aconst_null
35 pop
36 invokestatic #65 &amp;lt;com/JavaTool.getData&amp;gt;
39 astore_3
40 aload_3
41 pop
42 aload_3
43 dup
44 ifnonnull 50 (+6)
47 goto 53 (+6)
50 getfield #71 &amp;lt;com/JavaTool$Data.fieldData&amp;gt;
53 invokestatic #46 &amp;lt;org/codehaus/groovy/runtime/typehandling/DefaultTypeTransformation.booleanUnbox&amp;gt;
56 ifeq 69 (+13)
59 getstatic #52 &amp;lt;java/lang/System.out&amp;gt;
62 ldc #73 &amp;lt;HAS GROOVY TOOL DATA&amp;gt;
64 invokevirtual #60 &amp;lt;java/io/PrintStream.println&amp;gt;
67 aconst_null
68 pop
69 return
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Without CompileStatic, but with indy&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; 0 ldc #30 &amp;lt;com/GroovyTool&amp;gt;
 2 invokedynamic #44 &amp;lt;invoke, BootstrapMethods #0&amp;gt;
 7 invokedynamic #50 &amp;lt;cast, BootstrapMethods #1&amp;gt;
12 astore_1
13 aload_1
14 pop
15 aload_1
16 invokedynamic #57 &amp;lt;getProperty, BootstrapMethods #2&amp;gt;
21 invokedynamic #60 &amp;lt;cast, BootstrapMethods #1&amp;gt;
26 ifeq 44 (+18)
29 ldc #62 &amp;lt;java/lang/System&amp;gt;
31 invokedynamic #66 &amp;lt;getProperty, BootstrapMethods #3&amp;gt;
36 ldc #68 &amp;lt;HAS JAVA TOOL DATA&amp;gt;
38 invokedynamic #73 &amp;lt;invoke, BootstrapMethods #4&amp;gt;
43 pop
44 ldc #75 &amp;lt;com/JavaTool&amp;gt;
46 invokedynamic #44 &amp;lt;invoke, BootstrapMethods #0&amp;gt;
51 invokedynamic #78 &amp;lt;cast, BootstrapMethods #1&amp;gt;
56 astore_2
57 aload_2
58 pop
59 aload_2
60 invokedynamic #81 &amp;lt;getProperty, BootstrapMethods #2&amp;gt;
65 invokedynamic #60 &amp;lt;cast, BootstrapMethods #1&amp;gt;
70 ifeq 88 (+18)
73 ldc #62 &amp;lt;java/lang/System&amp;gt;
75 invokedynamic #66 &amp;lt;getProperty, BootstrapMethods #3&amp;gt;
80 ldc #83 &amp;lt;HAS GROOVY TOOL DATA&amp;gt;
82 invokedynamic #73 &amp;lt;invoke, BootstrapMethods #4&amp;gt;
87 pop
88 return
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Neither CompileStatic or indy:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  0 invokestatic #23 &amp;lt;com/Controller.$getCallSiteArray&amp;gt;
  3 astore_1
  4 aload_1
  5 ldc #33 &amp;lt;0&amp;gt;
  7 aaload
  8 ldc #35 &amp;lt;com/GroovyTool&amp;gt;
 10 invokeinterface #41 &amp;lt;org/codehaus/groovy/runtime/callsite/CallSite.call&amp;gt; count 2
 15 ldc #43 &amp;lt;com/GroovyTool$Data&amp;gt;
 17 invokestatic #49 &amp;lt;org/codehaus/groovy/runtime/ScriptBytecodeAdapter.castToType&amp;gt;
 20 checkcast #43 &amp;lt;com/GroovyTool$Data&amp;gt;
 23 astore_2
 24 aload_2
 25 pop
 26 aload_1
 27 ldc #50 &amp;lt;1&amp;gt;
 29 aaload
 30 aload_2
 31 invokeinterface #53 &amp;lt;org/codehaus/groovy/runtime/callsite/CallSite.callGetPropertySafe&amp;gt; count 2
 36 invokestatic #59 &amp;lt;org/codehaus/groovy/runtime/typehandling/DefaultTypeTransformation.booleanUnbox&amp;gt;
 39 ifeq 65 (+26)
 42 aload_1
 43 ldc #60 &amp;lt;2&amp;gt;
 45 aaload
 46 aload_1
 47 ldc #61 &amp;lt;3&amp;gt;
 49 aaload
 50 ldc #63 &amp;lt;java/lang/System&amp;gt;
 52 invokeinterface #66 &amp;lt;org/codehaus/groovy/runtime/callsite/CallSite.callGetProperty&amp;gt; count 2
 57 ldc #68 &amp;lt;HAS JAVA TOOL DATA&amp;gt;
 59 invokeinterface #71 &amp;lt;org/codehaus/groovy/runtime/callsite/CallSite.call&amp;gt; count 3
 64 pop
 65 aload_1
 66 ldc #72 &amp;lt;4&amp;gt;
 68 aaload
 69 ldc #74 &amp;lt;com/JavaTool&amp;gt;
 71 invokeinterface #41 &amp;lt;org/codehaus/groovy/runtime/callsite/CallSite.call&amp;gt; count 2
 76 ldc #76 &amp;lt;com/JavaTool$Data&amp;gt;
 78 invokestatic #49 &amp;lt;org/codehaus/groovy/runtime/ScriptBytecodeAdapter.castToType&amp;gt;
 81 checkcast #76 &amp;lt;com/JavaTool$Data&amp;gt;
 84 astore_3
 85 aload_3
 86 pop
 87 aload_1
 88 ldc #77 &amp;lt;5&amp;gt;
 90 aaload
 91 aload_3
 92 invokeinterface #53 &amp;lt;org/codehaus/groovy/runtime/callsite/CallSite.callGetPropertySafe&amp;gt; count 2
 97 invokestatic #59 &amp;lt;org/codehaus/groovy/runtime/typehandling/DefaultTypeTransformation.booleanUnbox&amp;gt;
100 ifeq 126 (+26)
103 aload_1
104 ldc #78 &amp;lt;6&amp;gt;
106 aaload
107 aload_1
108 ldc #79 &amp;lt;7&amp;gt;
110 aaload
111 ldc #63 &amp;lt;java/lang/System&amp;gt;
113 invokeinterface #66 &amp;lt;org/codehaus/groovy/runtime/callsite/CallSite.callGetProperty&amp;gt; count 2
118 ldc #81 &amp;lt;HAS GROOVY TOOL DATA&amp;gt;
120 invokeinterface #71 &amp;lt;org/codehaus/groovy/runtime/callsite/CallSite.call&amp;gt; count 3
125 pop
126 return
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14647316" author="blackdrag" created="Thu, 30 Jul 2015 08:02:51 +0000"  >&lt;p&gt;A reduced example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;JavaTool {
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Data getData() {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Data(&lt;span class=&quot;code-quote&quot;&gt;&quot;fieldDataString&quot;&lt;/span&gt;)
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Data {
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; fieldData;

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Data(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; fieldData) {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.fieldData = fieldData
        }
    }
}

@CompileStatic
def foo() {
    JavaTool.Data jdata = JavaTool.getData()
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ( jdata?.fieldData ) {
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;HAS GROOVY TOOL DATA&quot;&lt;/span&gt;)
    }
}
foo()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If run with indy enabled it will produce the exception noted in the issue&lt;/p&gt;</comment>
                            <comment id="14647334" author="blackdrag" created="Thu, 30 Jul 2015 08:20:34 +0000"  >&lt;p&gt;The reduced bytecode of this is the following (using asm)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-comment&quot;&gt;// access flags 0x1
&lt;/span&gt;  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; foo()Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;
   L0
    INVOKESTATIC JavaTool.getData ()LJavaTool$Data;
    ASTORE 1
   L2
    ALOAD 1
    DUP
    IFNONNULL L3
    GOTO L4
   L3
   FRAME FULL [test JavaTool$Data] [JavaTool$Data]
    GETFIELD JavaTool$Data.fieldData : Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;;
   L4
   FRAME SAME1 java/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;
    INVOKEDYNAMIC &lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt;(Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;;)Z [...]
    IFEQ L5
   L6
    GETSTATIC java/lang/&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out : Ljava/io/PrintStream;
    LDC &lt;span class=&quot;code-quote&quot;&gt;&quot;HAS GROOVY TOOL DATA&quot;&lt;/span&gt;
    INVOKEVIRTUAL java/io/PrintStream.println (Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;;)V
    ACONST_NULL
    ARETURN
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The actual error is then to be found in the invokedynamic call for cast. The call expects a String on the stack, but the frame claims the stack element is of type Object. The @CompileStatic version does not have this problem since it will call booleanUnbox(Object)Z, then there is no type mismatch. But simulating this method call, will provoke the same error:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;JavaTool {
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Data getData() {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Data(&lt;span class=&quot;code-quote&quot;&gt;&quot;fieldDataString&quot;&lt;/span&gt;)
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Data {
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; fieldData;

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Data(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; fieldData) {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.fieldData = fieldData
        }
    }
}
&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; bar(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; s){&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;}

@CompileStatic
def foo() {
    JavaTool.Data jdata = JavaTool.getData()
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ( bar(jdata?.fieldData) ) {
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;HAS GROOVY TOOL DATA&quot;&lt;/span&gt;)
    }
}
foo()&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;now the method bar will make the boolean conversion and expect a String.  Without frame information this will then lead to &quot;java.lang.VerifyError: (class: test, method: foo signature: ()Ljava/lang/Object;&amp;#41; Incompatible argument to function&quot; and forcing higher bytecodes, by for example using groovy.target.bytecode=1.7, will produce &quot;java.lang.VerifyError: Bad type on operand stack&quot;. Since this is without indy I can identify this as a static compilation problem.&lt;/p&gt;</comment>
                            <comment id="14647337" author="blackdrag" created="Thu, 30 Jul 2015 08:22:51 +0000"  >&lt;p&gt;I have to add, that this problem might not be originally in compilestatic. It may be a general type propagation problem, that simply did not appear before&lt;/p&gt;</comment>
                            <comment id="14647367" author="blackdrag" created="Thu, 30 Jul 2015 09:09:17 +0000"  >&lt;p&gt;seems like the bytecode comes directly from StaticCallSiteWriter#makeGetField. So no type propagation problem&lt;br/&gt;
Looking at the bytecode in more detail, the part of interest is actually &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    ALOAD 1                                                                                   &lt;span class=&quot;code-comment&quot;&gt;// load jdata on stack
&lt;/span&gt;    DUP                                                                                          &lt;span class=&quot;code-comment&quot;&gt;// have 2 jdata on stack
&lt;/span&gt;    IFNONNULL L3                                                                        &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; top jdata==&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;goto&lt;/span&gt; L3 &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;goto&lt;/span&gt; L4. stack=jdata 
&lt;/span&gt;    GOTO L4
   L3
    GETFIELD JavaTool$Data.fieldData : Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;;         &lt;span class=&quot;code-comment&quot;&gt;// get field value, stack=&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;
&lt;/span&gt;   L4
    INVOKEDYNAMIC &lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt;(Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;;)Z [...]                     
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;so following the L3 branch we get to L4 with a String on the stack. Jumping directly to L4 we will have a jdata there instead.  We know that this jdata is null, but the type information the verifier has is not interested in that. Doing either a CHECKCAST, or simply poping the value and loading null, before GOTO L4 should solve the problem&lt;/p&gt;</comment>
                            <comment id="14650261" author="pascalschumacher" created="Sat, 1 Aug 2015 10:33:11 +0000"  >&lt;p&gt;I guess you fixed the issue: &lt;a href=&quot;https://github.com/apache/incubator-groovy/commit/b573d5ce4f44a70598c343db15db0278efbbe17d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/commit/b573d5ce4f44a70598c343db15db0278efbbe17d&lt;/a&gt;?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12747406" name="groovy_test.tar.gz" size="971" author="SparkyBluefang" created="Mon, 27 Jul 2015 20:04:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 16 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2hzfb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>