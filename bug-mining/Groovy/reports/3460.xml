<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:59:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-8669] Groovy class does not compile if the ValueType of an annotation is not on the classpath</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-8669</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;If a groovy class (Test.groovy) references a class (AnnotatedClass) which has an annotation (Annotation) with a value class (ValueClass), which is not on the classpath an NoClassDefFoundError is thrown.&lt;/p&gt;

&lt;p&gt;This does happen during Compilation. This did not happen in Groovy 2.4.15.&lt;br/&gt;
The stacktrace is:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: java.lang.NoClassDefFoundError: annos.ValueClass
&#160;&#160; &#160;at org.codehaus.groovy.ast.decompiled.AsmReferenceResolver.resolveClass(AsmReferenceResolver.java:48)
&#160;&#160; &#160;at org.codehaus.groovy.ast.decompiled.AsmReferenceResolver.resolveNonArrayType(AsmReferenceResolver.java:81)
&#160;&#160; &#160;at org.codehaus.groovy.ast.decompiled.AsmReferenceResolver.resolveType(AsmReferenceResolver.java:72)
&#160;&#160; &#160;at org.codehaus.groovy.ast.decompiled.Annotations.annotationValueToExpression(Annotations.java:58)
&#160;&#160; &#160;at org.codehaus.groovy.ast.decompiled.Annotations.createAnnotationNode(Annotations.java:51)
   ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think the class org.codehaus.groovy.ast.decompiled.Annotations should also ignore annotation nodes, if the values type is not resolvable. Like it is done if the annotation type itself is not resolvable, see line 43-46.&lt;/p&gt;

&lt;p&gt;I have attached a simple sample to reproduce the issue.&lt;br/&gt;
 1. Compile it with gradle build&lt;br/&gt;
 2. Open the jar file annos/build/libs/annos.jar&lt;br/&gt;
 3. Delete the classfile annos/ValueClass.class&lt;br/&gt;
 4. Compile it with gradle :client:build&lt;br/&gt;
 Now the exception is thrown.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13168637">GROOVY-8669</key>
            <summary>Groovy class does not compile if the ValueType of an annotation is not on the classpath</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="AndreasTu">Andreas Turban</reporter>
                        <labels>
                            <label>annotations</label>
                            <label>compile-error</label>
                    </labels>
                <created>Wed, 27 Jun 2018 13:56:23 +0000</created>
                <updated>Thu, 13 Dec 2018 10:05:31 +0000</updated>
                            <resolved>Sun, 19 Aug 2018 13:30:54 +0000</resolved>
                                    <version>2.5.0</version>
                                    <fixVersion>3.0.0-alpha-4</fixVersion>
                    <fixVersion>2.5.3</fixVersion>
                                    <component>class generator</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16582028" author="paulk" created="Thu, 16 Aug 2018 06:31:59 +0000"  >&lt;p&gt;I agree with your assessment.&lt;/p&gt;</comment>
                            <comment id="16582030" author="andreastu" created="Thu, 16 Aug 2018 06:33:00 +0000"  >&lt;p&gt;&#65279;&#65279;Danke f&#252;r Ihre E-Mail. Ich bin bis einschlie&#223;lich 2018-08-20 au&#223;er Haus. In dringenden F&#228;llen wenden Sie sich bitte an Tobias Lutz (Tel: +49 941 20865-428), &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;mailto:Tobias.Lutz@vector.com&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Tobias.Lutz@vector.com&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/mail_small.gif&quot; height=&quot;12&quot; width=&quot;13&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;. Bitte beachten Sie: Ihre E-Mail wird nicht weitergeleitet.&lt;/p&gt;

&lt;p&gt;Thank you for your e-mail. I am out of the office through 2018-08-20. In urgent matters please contact Tobias Lutz (Phone: +49 941 20865-428), &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;mailto:Tobias.Lutz@vector.com&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Tobias.Lutz@vector.com&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/mail_small.gif&quot; height=&quot;12&quot; width=&quot;13&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;. Please note: Your e-mail will not be forwarded.&lt;/p&gt;</comment>
                            <comment id="16585145" author="paulk" created="Sun, 19 Aug 2018 13:31:17 +0000"  >&lt;p&gt;Thanks for spotting the issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12929415" name="AnnoTest.zip" size="3484" author="AndreasTu" created="Wed, 27 Jun 2018 13:51:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 13 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3vap3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>