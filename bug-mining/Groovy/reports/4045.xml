<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:11:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-6610] &quot;Expecting to find object/array on stack&quot; VerifyError when passing static member as argument to chained ctor call</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-6610</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;The attached script causes the following syntax error when run with Groovy 2.2.2.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Caught: java.lang.VerifyError: (class: ReproBug$MyClass, method: &amp;lt;init&amp;gt; signature: ()V) Expecting to find object/array on stack&lt;br/&gt;
java.lang.VerifyError: (class: ReproBug$MyClass, method: &amp;lt;init&amp;gt; signature: ()V) Expecting to find object/array on stack&lt;br/&gt;
	at ReproBug.main(ReproBug.groovy:18)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The code compiles and runs fine as a Java class, which is why I think this is a bug in Groovy.&lt;/p&gt;

&lt;p&gt;The problem requires the conjunction of two things:&lt;br/&gt;
1) A constructor that invokes another constructor&lt;br/&gt;
2) Converting an integer to a string as a parameter to the constructor&lt;/p&gt;

&lt;p&gt;I encountered this during real-world scripting (although I used a integer literal), but was able to figure out the cause and work-around the problem.  As such, this does not personally impact me; I am reporting it because I like Groovy and this is an easy way to contribute.&lt;/p&gt;

&lt;p&gt;Since I don&apos;t know whether you prefer an attachment or an inline quote, here is the code.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ReproBug {

    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; MYINT = 4;
    
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MyClass {
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; value;

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; MyClass(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; string) {
            value = string;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; MyClass() {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;(MYINT.toString()); &lt;span class=&quot;code-comment&quot;&gt;// &amp;lt;--- causes problems
&lt;/span&gt;        }
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MyClass().value);
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I haven&apos;t figured out how to create a Groovy unit test case.  If someone can point me to an example where simply getting the script to compile is proof that the bug is fixed, I&apos;ll try to work the attached code into a Groovy unit test case.&lt;/p&gt;</description>
                <environment>GNU/Linux (x64 SUSE and x86 Fedora Core 18)</environment>
        <key id="12818290">GROOVY-6610</key>
            <summary>&quot;Expecting to find object/array on stack&quot; VerifyError when passing static member as argument to chained ctor call</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="david_costanzo">David Costanzo</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Mar 2014 20:46:51 +0000</created>
                <updated>Mon, 23 Sep 2024 20:05:31 +0000</updated>
                            <resolved>Fri, 19 Mar 2021 15:15:27 +0000</resolved>
                                    <version>2.2.2</version>
                    <version>2.4.0-rc-1</version>
                                    <fixVersion>2.5.15</fixVersion>
                    <fixVersion>3.0.8</fixVersion>
                    <fixVersion>4.0.0-alpha-3</fixVersion>
                                    <component>Compiler</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14475595" author="blackdrag" created="Tue, 11 Mar 2014 01:47:14 +0000"  >&lt;p&gt;the problem is not the conversion itself, it is getting the value for MYINT. It is done by a property lookup, that uses &quot;this&quot; at a time where &quot;this&quot; is not yet available, because it happens, before we call super&lt;/p&gt;</comment>
                            <comment id="14475577" author="david_costanzo" created="Tue, 11 Mar 2014 22:44:46 +0000"  >&lt;p&gt;Thanks for the explanation.  I&apos;ve updated the issue summary to reflect your insight.&lt;/p&gt;</comment>
                            <comment id="15030630" author="shils" created="Sat, 28 Nov 2015 19:18:02 +0000"  >&lt;p&gt;Note: this bug does not occur if ReproBug is statically compiled, since MYINT is accessed using a static bridge method in that case.&lt;/p&gt;</comment>
                            <comment id="17304964" author="emilles" created="Fri, 19 Mar 2021 15:15:27 +0000"  >&lt;p&gt;Dynamic case was fixed earlier.&#160; Static compilation case needed a small change to avoid an error for uninitialized &quot;this&quot; in Verifier.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13593002">GROOVY-11483</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12723209" name="ReproBug.groovy" size="424" author="david_costanzo" created="Thu, 6 Mar 2014 20:46:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 34 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2cb7r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>