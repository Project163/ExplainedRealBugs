<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:22:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-4944] Presence of &quot;assert&quot; unexpectedly changes program semantics (in Groovlet)</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-4944</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;In a Groovlet:&lt;/p&gt;

&lt;p&gt;We have a function to map &quot;stuff&quot; to a boolean:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; mapBoolean(def datum, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; defaultValue) {
   ......
   &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; res
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Immediately after the above in the Groovlet source, the function is tested:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; mapBoolean(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;) == &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; mapBoolean(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)  == &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;One would expect the compiler to generate an error as &apos;null&apos; cannot be passed as second parameter.&lt;/p&gt;

&lt;p&gt;But the asserts above are accepted and pass!&lt;/p&gt;

&lt;p&gt;If one removes the first assert and changes to solely&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; mapBoolean(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)  == &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;THEN the compiler generates an error:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;message GroovyServlet Error: script: &lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt;: Script processing failed.No signature of method: com.mplify.interact.InspectMsg.mapBoolean() is applicable &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; argument types: (&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) values: [&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;] Possible solutions: mapBoolean(java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;), asBoolean()org.codehaus.groovy.runtime.ScriptBytecodeAdapter.unwrap(ScriptBytecodeAdapter.java:54)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A totally bared-down test &quot;Simple.groovy&quot; would be:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; mapBoolean(def datum, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; defaultValue) {
   &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
}

&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (params[&lt;span class=&quot;code-quote&quot;&gt;&apos;run&apos;&lt;/span&gt;]) {
   &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; mapBoolean(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)  == &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
}

&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; mapBoolean(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) == &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;

html.html {
    head { title &lt;span class=&quot;code-quote&quot;&gt;&quot;Testing&quot;&lt;/span&gt; }
    body { div &lt;span class=&quot;code-quote&quot;&gt;&quot;PASSED&quot;&lt;/span&gt; }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Called with Simple.groovy?run=true ---&amp;gt; PASSED&lt;br/&gt;
Called with Simple.groovy          ---&amp;gt; Script processing failed.No signature of method: Simple.mapBoolean() is applicable for argument types: (null, null) &lt;/p&gt;</description>
                <environment>Red Hat Enterprise Linux Server release 5.6, Sun JDK build 1.6.0_26-b03</environment>
        <key id="12818509">GROOVY-4944</key>
            <summary>Presence of &quot;assert&quot; unexpectedly changes program semantics (in Groovlet)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blackdrag">Jochen Theodorou</assignee>
                                    <reporter username="yatima">David Tonhofer</reporter>
                        <labels>
                    </labels>
                <created>Mon, 25 Jul 2011 05:50:48 +0000</created>
                <updated>Mon, 25 Jul 2011 14:33:49 +0000</updated>
                            <resolved>Mon, 25 Jul 2011 12:27:05 +0000</resolved>
                                    <version>1.8.0</version>
                                    <fixVersion>1.8.2</fixVersion>
                    <fixVersion>1.9-beta-3</fixVersion>
                    <fixVersion>1.7.11</fixVersion>
                                    <component>Groovlet / GSP</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14471560" author="blackdrag" created="Mon, 25 Jul 2011 08:51:36 +0000"  >&lt;p&gt;David, we have not been able to reproduce this&lt;/p&gt;</comment>
                            <comment id="14479662" author="yatima" created="Mon, 25 Jul 2011 09:39:46 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;Ok, let&apos;s see what&apos;s different.&lt;/p&gt;

&lt;p&gt;Instead of a Groovlet, a script, same problem:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;// Script!
&lt;/span&gt;
&lt;span class=&quot;code-comment&quot;&gt;// This method shall be called and cause trouble
&lt;/span&gt;
&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; shaky(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; defaultValue) {
   &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
}

&lt;span class=&quot;code-comment&quot;&gt;// Pass &lt;span class=&quot;code-quote&quot;&gt;&quot;skip&quot;&lt;/span&gt; as first argument to skip the assertion
&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (args &amp;amp;&amp;amp; args[0] == &lt;span class=&quot;code-quote&quot;&gt;&apos;skip&apos;&lt;/span&gt;) {
   &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; shaky(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)  == &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
}

&lt;span class=&quot;code-comment&quot;&gt;// This assertion will cause a runtime error &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the previous assertion is not skipped
&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; shaky(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) == &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;

&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out &amp;lt;&amp;lt; &lt;span class=&quot;code-quote&quot;&gt;&quot;PASSED\n&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Problem occurs on:&lt;/p&gt;

&lt;p&gt;   Red Hat Enterprise Linux Server release 5.6 (Tikanga)&lt;br/&gt;
   Groovy Version: 1.8.0 &lt;br/&gt;
   JVM: Java(TM) SE Runtime Environment (build 1.6.0_26-b03)&lt;/p&gt;

&lt;p&gt;Also on &lt;/p&gt;

&lt;p&gt;   Fedora release 14 (Laughlin) &lt;br/&gt;
   Groovy Version: 1.8.0 &lt;br/&gt;
   JVM: Java(TM) SE Runtime Environment (build 1.6.0_26-b03)&lt;br/&gt;
   or&lt;br/&gt;
   JVM: IcedTea6 1.9.8&lt;/p&gt;

</comment>
                            <comment id="14471467" author="guillaume" created="Mon, 25 Jul 2011 09:46:37 +0000"  >&lt;p&gt;Can you tell us also what&apos;s on your classpath?&lt;/p&gt;

&lt;p&gt;Also is it intentional that you&apos;re using boolean vs Boolean and passing null into that primitive method parameter?&lt;/p&gt;</comment>
                            <comment id="14479654" author="yatima" created="Mon, 25 Jul 2011 09:59:45 +0000"  >&lt;p&gt;Hi Guillaume, &lt;/p&gt;

&lt;p&gt;&amp;gt;is it intentional that you&apos;re using boolean vs Boolean &lt;/p&gt;

&lt;p&gt;Yes. I wanted to have a function that as non-null parameters coming in. I then added the assertion passing null to see what Groovy would do, and it did something surprising.&lt;/p&gt;

&lt;p&gt;Furthermore, the CLASSPATH is empty.&lt;/p&gt;</comment>
                            <comment id="14471587" author="blackdrag" created="Mon, 25 Jul 2011 10:53:33 +0000"  >&lt;p&gt;I can reduce the script to &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; shaky(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; defaultValue) {&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;}
shaky(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)
shaky(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out &amp;lt;&amp;lt; &lt;span class=&quot;code-quote&quot;&gt;&quot;PASSED\n&quot;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14471579" author="yatima" created="Mon, 25 Jul 2011 12:02:45 +0000"  >&lt;p&gt;Jochen&apos;s script passes.&lt;/p&gt;

&lt;p&gt;However&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; shaky(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; defaultValue) {&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;}
shaky(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out &amp;lt;&amp;lt; &lt;span class=&quot;code-quote&quot;&gt;&quot;PASSED\n&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;yields groovy.lang.MissingMethodException&lt;/p&gt;</comment>
                            <comment id="14471488" author="blackdrag" created="Mon, 25 Jul 2011 12:27:05 +0000"  >&lt;p&gt;I seems the bug appears only if there is one method and there had been an invocation cached before. And then it is only wrong if there is the usage of null as value, as you did here in the second invocation. &lt;/p&gt;

&lt;p&gt;So a big thank you for finding this one. It should be fixed now.&lt;/p&gt;</comment>
                            <comment id="14471635" author="yatima" created="Mon, 25 Jul 2011 14:33:49 +0000"  >&lt;p&gt;It me thanking you. Keep up the excellent work!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 18 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2c91j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>