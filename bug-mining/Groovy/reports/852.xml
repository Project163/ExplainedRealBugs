<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:10:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-3242] metaclass and curry() gives MissingMethodException</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-3242</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Consider the following:&lt;/p&gt;

&lt;p&gt;===&lt;br/&gt;
def nonCurryClosure = &lt;/p&gt;
{delim, expected -&amp;gt;
    ....
   }
&lt;p&gt;String.metaClass.fastSplit = nonCurryClosure&lt;br/&gt;
def c = nonCurryClosure.curry(&quot;,&quot;, 4)&lt;br/&gt;
String.metaClass.fastSplitComma4 = &lt;/p&gt;
{ c.delegate = delegate; c() }
&lt;p&gt;===&lt;/p&gt;

&lt;p&gt;IMHO, the need to reset &apos;delegate&apos; in fastSplitComma4&apos;s closure is wrong.&lt;/p&gt;

&lt;p&gt;As the doco says:&lt;/p&gt;

&lt;p&gt;&quot;When the curry() method is called on a closure instance with one or more arguments, a copy of the&lt;br/&gt;
closure is first made.&quot;&lt;/p&gt;

&lt;p&gt;It seems as though the copy is rather inexact in this circumstance.&lt;/p&gt;

&lt;p&gt;There&apos;s an associated thread in groovy-user: &lt;a href=&quot;http://markmail.org/message/n6vn64behmvg4fkq?q=metaclass+and+curry()+gives+MissingMethodException&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://markmail.org/message/n6vn64behmvg4fkq?q=metaclass+and+curry()+gives+MissingMethodException&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I started off with the following:&lt;/p&gt;

&lt;p&gt;===&lt;br/&gt;
package au.com.transentia.utils.test&lt;/p&gt;

&lt;p&gt;public class FastSplitTest extends GroovyTestCase {&lt;/p&gt;

&lt;p&gt;    void setUp() {&lt;br/&gt;
    String.metaClass.fastSplit = {delim, expected -&amp;gt;&lt;br/&gt;
      def buffer = []&lt;br/&gt;
      try &lt;/p&gt;
{
        StringTokenizer st = new StringTokenizer(delegate, delim);
        for (int i = 0; i &amp;lt; expected; i++)
          buffer[i] = st.nextToken();
        return buffer.toArray();
      }
&lt;p&gt;      catch (NoSuchElementException e) &lt;/p&gt;
{
        throw new NoSuchElementException(&quot;Could not successfully split line:
&apos;&quot; + delegate + &quot;&apos; into &quot; + expected + &quot; items delimited by &apos;&quot; + delim + &quot;&apos;&quot;);
      }
&lt;p&gt;    }&lt;/p&gt;


&lt;p&gt;    String.metaClass.fastSplitComma4 = String.metaClass.fastSplit.curry(&quot;,&quot;, 4)&lt;br/&gt;
  }&lt;/p&gt;


&lt;p&gt;  void testSplit() &lt;/p&gt;
{
    assertArrayEquals([&apos;this&apos;, &apos;is&apos;, &apos;a&apos;, &apos;test&apos;].toArray(),
&quot;this,is,a,test&quot;.fastSplit(&quot;,&quot;, 4))
  }


&lt;p&gt;  void testCurried() &lt;/p&gt;
{
    assertArrayEquals([&apos;this&apos;, &apos;is&apos;, &apos;a&apos;, &apos;test&apos;].toArray(),
&quot;this,is,a,test&quot;.fastSplitComma4())
  }
&lt;p&gt;}&lt;br/&gt;
===&lt;/p&gt;

&lt;p&gt;This gives:&lt;br/&gt;
===&lt;br/&gt;
&quot;C:\Program Files\Java\jdk1.6.0_11\bin\java&quot; -Didea.launcher.port=7551&lt;br/&gt;
&quot;-Didea.launcher.bin.path=C:\Program Files\JetBrains\IntelliJ IDEA&lt;br/&gt;
8.0.1\bin&quot; -Dfile.encoding=windows-1252 -classpath&lt;br/&gt;
&quot;C:\DEVTOOLS\groovy-1.6-RC-1\embeddable\groovy-all-1.6-RC-1.jar;C:\Program&lt;br/&gt;
Files\Java\jdk1.6.0_11\jre\lib\charsets.jar;C:\Program&lt;br/&gt;
Files\Java\jdk1.6.0_11\jre\lib\deploy.jar;C:\Program&lt;br/&gt;
Files\Java\jdk1.6.0_11\jre\lib\javaws.jar;C:\Program&lt;br/&gt;
Files\Java\jdk1.6.0_11\jre\lib\jce.jar;C:\Program&lt;br/&gt;
Files\Java\jdk1.6.0_11\jre\lib\jsse.jar;C:\Program&lt;br/&gt;
Files\Java\jdk1.6.0_11\jre\lib\management-agent.jar;C:\Program&lt;br/&gt;
Files\Java\jdk1.6.0_11\jre\lib\plugin.jar;C:\Program&lt;br/&gt;
Files\Java\jdk1.6.0_11\jre\lib\resources.jar;C:\Program&lt;br/&gt;
Files\Java\jdk1.6.0_11\jre\lib\rt.jar;C:\Program&lt;br/&gt;
Files\Java\jdk1.6.0_11\jre\lib\ext\dnsns.jar;C:\Program&lt;br/&gt;
Files\Java\jdk1.6.0_11\jre\lib\ext\localedata.jar;C:\Program&lt;br/&gt;
Files\Java\jdk1.6.0_11\jre\lib\ext\sunjce_provider.jar;C:\Program&lt;br/&gt;
Files\Java\jdk1.6.0_11\jre\lib\ext\sunmscapi.jar;C:\Program&lt;br/&gt;
Files\Java\jdk1.6.0_11\jre\lib\ext\sunpkcs11.jar;C:\DEVELOPMENT\IntelliJ\FB\&lt;br/&gt;
out\production\FB;C:\DEVTOOLS\commons-lang-2.4\commons-lang-2.4.jar;C:\DEVTO&lt;br/&gt;
OLS\groovy-1.6-RC-1\lib\junit-3.8.2.jar;C:\Program Files\JetBrains\IntelliJ&lt;br/&gt;
IDEA 8.0.1\lib\idea_rt.jar&quot; com.intellij.rt.execution.application.AppMain&lt;br/&gt;
com.intellij.rt.execution.junit.JUnitStarter -ideVersion5&lt;br/&gt;
au.com.transentia.utils.test.FastSplitTest&lt;/p&gt;


&lt;p&gt;groovy.lang.MissingMethodException: No signature of method:&lt;br/&gt;
groovy.lang.ExpandoMetaClass$ExpandoMetaProperty.curry() is applicable for&lt;br/&gt;
argument types: (java.lang.String, java.lang.Integer) values: &lt;/p&gt;
{,, 4}&lt;br/&gt;
	at&lt;br/&gt;
org.codehaus.groovy.runtime.ScriptBytecodeAdapter.unwrap(ScriptBytecodeAdapt&lt;br/&gt;
er.java:54)&lt;br/&gt;
	at&lt;br/&gt;
org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.call(PogoMetaClassSit&lt;br/&gt;
e.java:51)&lt;br/&gt;
	at&lt;br/&gt;
org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray&lt;br/&gt;
.java:43)&lt;br/&gt;
	at&lt;br/&gt;
org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.&lt;br/&gt;
java:116)&lt;br/&gt;
	at&lt;br/&gt;
org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.&lt;br/&gt;
java:128)&lt;br/&gt;
	at&lt;br/&gt;
au.com.transentia.utils.test.FastSplitTest.setUp(FastSplitTest.groovy:21)&lt;br/&gt;
	at&lt;br/&gt;
com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:40)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at&lt;br/&gt;
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39&lt;br/&gt;
)&lt;br/&gt;
	at&lt;br/&gt;
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl&lt;br/&gt;
.java:25)&lt;br/&gt;
	at&lt;br/&gt;
com.intellij.rt.execution.application.AppMain.main(AppMain.java:90)&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
groovy.lang.MissingMethodException: No signature of method:&lt;br/&gt;
groovy.lang.ExpandoMetaClass$ExpandoMetaProperty.curry() is applicable for&lt;br/&gt;
argument types: (java.lang.String, java.lang.Integer) values: {,, 4}
&lt;p&gt;	at&lt;br/&gt;
org.codehaus.groovy.runtime.ScriptBytecodeAdapter.unwrap(ScriptBytecodeAdapt&lt;br/&gt;
er.java:54)&lt;br/&gt;
	at&lt;br/&gt;
org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.call(PogoMetaClassSit&lt;br/&gt;
e.java:51)&lt;br/&gt;
	at&lt;br/&gt;
org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.&lt;br/&gt;
java:128)&lt;br/&gt;
	at&lt;br/&gt;
au.com.transentia.utils.test.FastSplitTest.setUp(FastSplitTest.groovy:21)&lt;br/&gt;
	at&lt;br/&gt;
com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:40)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at&lt;br/&gt;
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39&lt;br/&gt;
)&lt;br/&gt;
	at&lt;br/&gt;
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl&lt;br/&gt;
.java:25)&lt;br/&gt;
	at&lt;br/&gt;
com.intellij.rt.execution.application.AppMain.main(AppMain.java:90)&lt;/p&gt;


&lt;p&gt;Process finished with exit code -1&lt;br/&gt;
===&lt;/p&gt;</description>
                <environment>Java 1.6; vista sp1</environment>
        <key id="12814493">GROOVY-3242</key>
            <summary>metaclass and curry() gives MissingMethodException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="alpheratz">alpheratz</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Dec 2008 16:17:47 +0000</created>
                <updated>Tue, 7 Apr 2015 19:13:08 +0000</updated>
                            <resolved>Tue, 30 Dec 2008 19:38:50 +0000</resolved>
                                    <version>1.6-rc-1</version>
                                    <fixVersion>1.6-rc-2</fixVersion>
                    <fixVersion>1.5.8</fixVersion>
                    <fixVersion>1.7-beta-1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14478374" author="paulk" created="Tue, 30 Dec 2008 16:59:20 +0000"  >&lt;p&gt;fixed in trunk (test and merge to 1.6 branch to follow)&lt;/p&gt;</comment>
                            <comment id="14478388" author="paulk" created="Tue, 30 Dec 2008 19:38:50 +0000"  >&lt;p&gt;test added and merged to 1.6, problem didn&apos;t occur in 1_5_x but test was merged into that branch to ensure we have no regressions.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 48 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bsfr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>