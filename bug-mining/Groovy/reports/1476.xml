<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:19:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-4741] VerifyError: Expecting to find integer on stack</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-4741</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Hi, I have the same issue as in &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-4587&quot; title=&quot;VerifyError after int optimizations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-4587&quot;&gt;&lt;del&gt;GROOVY-4587&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;For the inputs &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[0.0], [], [], [543]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the function-code below does throw an Exception which can be fixed by changing&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ReWK &amp;lt; 0) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (((&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;)ReWK) &amp;lt; 0) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Seems like a bug to me or am I doing it wrong? Various other inputs run fine.&lt;/p&gt;




&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Gesamtbetrag,Direktabzug,Prozent,Einzelbetrag-&amp;gt;                                                               

def &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; ReWK = 0
def arrAbzWK = []; 

Gesamtbetrag.eachWithIndex {
                                                            
	it, index -&amp;gt;                                                                                                          
   
	&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(Gesamtbetrag[index] &amp;gt; 0){ 

		                                               
        	&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(Prozent[index] != 0 &amp;amp;&amp;amp; Prozent[index] != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {  
			ReWK = &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.ceil( Gesamtbetrag[index] * (100 - Prozent[index]) / 100 ) 

		} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (Direktabzug[index] &amp;gt; 0 ) {           
         
			ReWK = &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.ceil( Gesamtbetrag[index] - Direktabzug[index] )    
         
			&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ReWK &amp;lt; 0) { 
				ReWK = 0
			}                                     

         	} 
                &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (Einzelbetrag[index] &amp;gt; 0) { 
			ReWK = &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.ceil( Einzelbetrag[index] )                                                                           		
		} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {			
			ReWK = 0	
		}                                                                                     
   	}                                                                                  
                                                                                                           
   	arrAbzWK.add(ReWK)    
                                                                               
}

&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; arrAbzWK 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12818068">GROOVY-4741</key>
            <summary>VerifyError: Expecting to find integer on stack</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blackdrag">Jochen Theodorou</assignee>
                                    <reporter username="dhansmann">David Hansmann</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Mar 2011 07:07:07 +0000</created>
                <updated>Thu, 7 Apr 2011 13:42:22 +0000</updated>
                            <resolved>Thu, 7 Apr 2011 13:42:22 +0000</resolved>
                                    <version>1.8-rc-3</version>
                                    <fixVersion>1.8-rc-4</fixVersion>
                                    <component>Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14471041" author="blackdrag" created="Tue, 22 Mar 2011 09:38:22 +0000"  >&lt;p&gt;this sounds indeed very like that the issue you mentioned. To really fix that bug I need a runnable test case. The example you gave does not look complete&lt;/p&gt;</comment>
                            <comment id="14471115" author="dhansmann" created="Thu, 24 Mar 2011 10:15:35 +0000"  >&lt;p&gt;I&apos;ll try to provide one if I find the time - unfortunately this is only a small function in a rather complex construct of groovy-scripts running in a java-environment (hundreds of formulas using hundreds of functions doing german tax calculation), so there might be many factors at work.&lt;/p&gt;

&lt;p&gt;As a side note: 1.8.0-rc-3 seems to work very well, but I had to make a custom gmaven version using the good (but outdated)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.yeap.de/blog2.0/archives/233-Build-Groovy++-with-Maven.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.yeap.de/blog2.0/archives/233-Build-Groovy++-with-Maven.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;and gmaven-1.3. Is the project abandoned or so you know anybody who might wan to check the stuff in? I could send a tar file.&lt;/p&gt;

&lt;p&gt;Greetings,&lt;/p&gt;

&lt;p&gt;David&lt;/p&gt;</comment>
                            <comment id="14471076" author="guillaume" created="Fri, 25 Mar 2011 08:41:48 +0000"  >&lt;p&gt;I&apos;m looking forward a reproducable example. That&apos;s likely something related to our int primitive optimizations. That would really be great if we could reproduce the problem, in order to fix the underlying issue.&lt;/p&gt;

&lt;p&gt;As for GMaven, well, it&apos;s not actively developed these days.&lt;br/&gt;
If you&apos;re willing to contribute to it, that would be great, for those relying on GMaven.&lt;/p&gt;</comment>
                            <comment id="14471062" author="dhansmann" created="Fri, 25 Mar 2011 08:55:46 +0000"  >&lt;p&gt;Example code&lt;/p&gt;</comment>
                            <comment id="14471116" author="dhansmann" created="Fri, 25 Mar 2011 08:57:13 +0000"  >&lt;p&gt;gmaven-1.3 with gmaven-runtime-1.8 so providerSelection 1.8 works&lt;/p&gt;</comment>
                            <comment id="14471128" author="dhansmann" created="Fri, 25 Mar 2011 09:02:38 +0000"  >&lt;p&gt;Seems to be easily reproducible, I attached the example and wish you good luck hunting the bug down.&lt;/p&gt;

&lt;p&gt;As for the gmaven stuff: I attached my full .tgz, can you assign it to somebody who can check the stuff in? I am not familiar how the process here works and don&apos;t want to create an issue in the GMaven-Jira if it&apos;s abandoned.&lt;/p&gt;</comment>
                            <comment id="14471015" author="guillaume" created="Fri, 25 Mar 2011 09:24:06 +0000"  >&lt;p&gt;Thanks for the code sample!&lt;br/&gt;
I&apos;ve managed to reduce the failing example to this snippet:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; a = 0
[].each { 
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (a &amp;lt; 0) {}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For the GMaven stuff, could you please open an issue in the GMaven JIRA?&lt;br/&gt;
&lt;a href=&quot;http://jira.codehaus.org/browse/GMAVEN&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jira.codehaus.org/browse/GMAVEN&lt;/a&gt;&lt;br/&gt;
Thanks in advance for that.&lt;/p&gt;</comment>
                            <comment id="14471104" author="guillaume" created="Fri, 25 Mar 2011 09:29:54 +0000"  >&lt;p&gt;David, as a workaround for now, till we fix the issue, you can use an Integer instead of an int, for the ReWK variable. So you can say Integer ReWK = 0, or simply def ReWK = 0&lt;/p&gt;</comment>
                            <comment id="14471063" author="dhansmann" created="Fri, 25 Mar 2011 10:05:10 +0000"  >&lt;p&gt;Wow, that&apos;s a lot shorter than mine. I&apos;ll rather not touch my ((int)ReWK) workaround for now as I have to run a full build and tests then, but nice to know!&lt;/p&gt;

&lt;p&gt;I&apos;ll open another bug for the GMaven stuff.&lt;/p&gt;</comment>
                            <comment id="14471144" author="blackdrag" created="Thu, 7 Apr 2011 13:42:22 +0000"  >&lt;p&gt;works now&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12722792" name="gmaven-1.3.tgz" size="2544845" author="dhansmann" created="Fri, 25 Mar 2011 08:57:13 +0000"/>
                            <attachment id="12722879" name="test.groovy" size="932" author="dhansmann" created="Fri, 25 Mar 2011 08:55:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 33 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2cu7j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>