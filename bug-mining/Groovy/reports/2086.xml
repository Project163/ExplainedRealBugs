<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:31:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-5865] getAt(EmptyRange) not called when passing an EmptyRange to getAt(Collection)</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-5865</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Basically, this is an inconsistency of List#getAt(Collection). When its parameters are integer indexes and non-empty ranges, it works as expected. But when an EmptyRange is passed to it, it doesn&apos;t behave like List#getAt(EmptyRange):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;def&lt;/span&gt; list = [1, 2, 3]
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; list[3..&amp;lt;3] == []        &lt;span class=&quot;code-comment&quot;&gt;// This works
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; list[0, 2..&amp;lt;3] == [1, 3] &lt;span class=&quot;code-comment&quot;&gt;// This works too
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; list[0, 3..&amp;lt;3] == [1]    &lt;span class=&quot;code-comment&quot;&gt;// But &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IndexOutOfBoundsException: toIndex = 4&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12816685">GROOVY-5865</key>
            <summary>getAt(EmptyRange) not called when passing an EmptyRange to getAt(Collection)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="epidemian">Demian Ferreiro</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 Dec 2012 04:36:32 +0000</created>
                <updated>Fri, 18 Jan 2013 16:06:52 +0000</updated>
                            <resolved>Tue, 15 Jan 2013 19:49:00 +0000</resolved>
                                    <version>2.0.6</version>
                                    <fixVersion>2.1.0-rc-2</fixVersion>
                    <fixVersion>2.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14473890" author="michal.mally" created="Tue, 15 Jan 2013 16:24:09 +0000"  >&lt;p&gt;I&apos;ve pushed pull request that fixes the issue: &lt;a href=&quot;https://github.com/groovy/groovy-core/pull/107&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/groovy/groovy-core/pull/107&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The root cause is the existence of getAt(List, Range) and getAt(List, EmptyRange) methods. The second one has been implemented because empty ranges require some special handling. However there is no guarantee that for EmptyRange the getAt(List, EmptyRange) is always called instead of more general getAt(List, Range).&lt;/p&gt;

&lt;p&gt;And this is exactly what happens in case of getAt(List, Collection) method.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &amp;lt;T&amp;gt; List&amp;lt;T&amp;gt; getAt(List&amp;lt;T&amp;gt; self, Collection indices) {
        List&amp;lt;T&amp;gt; answer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;T&amp;gt;(indices.size());
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; value : indices) {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (value &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; Range) {
                answer.addAll(getAt(self, (Range) value));
            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (value &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; List) {
                answer.addAll(getAt(self, (List) value));
            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; idx = DefaultTypeTransformation.intUnbox(value);
                answer.add(getAt(self, idx));
            }
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; answer;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Each element of collection is tested for being a Range and if it is then the element is explicitly casted to Range and getAt(List, Range) method is called. Because EmptyRange is also a Range more general method is called which causes EmptyRange special handling (provided by getAt(List, EmptyRange)) not being executed.&lt;/p&gt;

&lt;p&gt;Explicit casting of EmptyRange to Range is nothing improper what brings us to conclusion that the getAt(List, Range) method shall handle all the ranges - also EmptyRanges since they inherits from Range.&lt;/p&gt;

&lt;p&gt;So the fix I pushed adds a check to getAt(List, Range) method if passed range is an instance of EmptyRange. If it is the execution is delegated to specialized method getAt(List, EmptyRange). The test case is also added to ensure proper behavior.  &lt;/p&gt;</comment>
                            <comment id="14473875" author="epidemian" created="Tue, 15 Jan 2013 18:10:07 +0000"  >&lt;p&gt;Awesome, Micha &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;

&lt;p&gt;I remember i traced this bug to that particular function too (getAt(List, Collection)), but i didn&apos;t submit any patch because all the other definitions for &quot;getAt&quot; in DefaultGroovyMethods.java scared me. There are different getAt definitions for object arrays, primitive arrays, strings, etc, and i didn&apos;t know how/if they interact with each other, and adding a fix for each of those getAt version seemed like a much complicated task. &lt;/p&gt;

&lt;p&gt;Do you know if your pull request works for other &quot;getAt-able&quot; things? String seems to explode on Groovy 2.0.6 (&lt;tt&gt;&quot;hello&quot;[0, 5..&amp;lt;5]&lt;/tt&gt; throws a StringIndexOutOfBoundsException), while primitive arrays seem to work (&lt;tt&gt;([1, 2, 3] as int[])[1, 3..&amp;lt;3] == [2]&lt;/tt&gt;). &lt;/p&gt;

&lt;p&gt;In case it doesn&apos;t, i think it&apos;s still a good pull request, as it fixes this particular bug, and gives a hint on how to fix the getAt implementations for other objects in case those are broken too &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14480116" author="paulk" created="Tue, 15 Jan 2013 19:49:00 +0000"  >&lt;p&gt;Thanks! Applied and tweaked - altered the calling code in getAt(Collection) rather than the called code in getAt(Range)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12723042" name="emptyRangeOnGetAt.groovy" size="207" author="epidemian" created="Mon, 24 Dec 2012 04:36:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 45 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2cd3z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>