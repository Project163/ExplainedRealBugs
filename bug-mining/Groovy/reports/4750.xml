<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:23:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-11200] JsonSlurper parses badly format JSON without throwing exception</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-11200</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;JsonSlurper should throw a JsonException when parsing the following input:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-json&quot;&gt;
&quot;&quot;&quot;
{
&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;:1,
&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;b&quot;&lt;/span&gt;: {
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;c&quot;&lt;/span&gt;:2
&#160; &#160; }&quot;&quot;&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;br/&gt;
But it parses the string successfully.&#160; On the other hand, it does throw a JsonException when parsing&lt;br/&gt;
&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-json&quot;&gt;
&quot;&quot;&quot;
{
&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;:1,
&#160; &#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;b&quot;&lt;/span&gt;: {
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;c&quot;&lt;/span&gt;:2
&#160; &#160; }
&quot;&quot;&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;where the ending &quot;&quot;&quot; is on a separate line.&lt;br/&gt;
&#160;&lt;br/&gt;
I think it should fail for both.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13554834">GROOVY-11200</key>
            <summary>JsonSlurper parses badly format JSON without throwing exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="bocamel">John Yin</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Oct 2023 18:55:13 +0000</created>
                <updated>Mon, 4 Mar 2024 17:21:17 +0000</updated>
                            <resolved>Fri, 15 Dec 2023 05:40:09 +0000</resolved>
                                    <version>4.0.14</version>
                                    <fixVersion>5.0.0-alpha-4</fixVersion>
                    <fixVersion>4.0.17</fixVersion>
                                    <component>JSON</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17777487" author="paulk" created="Thu, 19 Oct 2023 22:09:26 +0000"  >&lt;p&gt;Groovy has several parser implementations. Some are faster, some are more lax than others. A workaround that works for this example is to declare your slurper using one of the other implementations, e.g.:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JsonSlurper(type: JsonParserType.CHARACTER_SOURCE)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It still seems worth fixing. PRs welcome like always of course.&lt;/p&gt;</comment>
                            <comment id="17778302" author="githubbot" created="Sun, 22 Oct 2023 06:24:13 +0000"  >&lt;p&gt;yuhengfdada opened a new pull request, #1972:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/1972&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1972&lt;/a&gt;&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Analysis&lt;br/&gt;
   As mentioned by Paul&apos;s comment in the jira, this is a bug in `JsonParserCharArray`. The problem does not exist in `JsonParserUsingCharacterSource`.&lt;br/&gt;
   After debugging through both classes, both parser methods look exactly the same, except that `CharacterSource` would automatically add a `10`(line feed) char at the end, which triggers an exception. But for `JsonParserCharArray` it ends right at the last curly brace so the exception is overlooked.&lt;/li&gt;
	&lt;li&gt;Fix&lt;br/&gt;
   To keep the behavior consistent across `JsonParserCharArray` and `JsonParserUsingCharacterSource`, a line feed character is added to the end of the char array on initialization of `JsonParserCharArray`.&lt;/li&gt;
	&lt;li&gt;Concern&lt;br/&gt;
   Performance&lt;/li&gt;
&lt;/ol&gt;


</comment>
                            <comment id="17778324" author="githubbot" created="Sun, 22 Oct 2023 09:37:44 +0000"  >&lt;p&gt;yuhengfdada opened a new pull request, #1974:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/1974&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1974&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   This approach avoids array copy as in &lt;a href=&quot;https://github.com/apache/groovy/pull/1972&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1972&lt;/a&gt; by using a simple counter.&lt;/p&gt;

</comment>
                            <comment id="17778325" author="githubbot" created="Sun, 22 Oct 2023 09:40:08 +0000"  >&lt;p&gt;yuhengfdada commented on PR #1972:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/1972#issuecomment-1774046490&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1972#issuecomment-1774046490&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   With this change, this unit test is failing in `JsonSlurperLaxTest.groovy`:&lt;br/&gt;
   ```&lt;br/&gt;
       void testArrayOfArrayWithSimpleValues() {&lt;br/&gt;
           assert parser.parseText(&apos;[1, 2, 3, [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &lt;span class=&quot;error&quot;&gt;&amp;#91;true, false&amp;#93;&lt;/span&gt;, &quot;d&quot;], 4]&apos;) ==&lt;br/&gt;
                   [1, 2, 3, [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &lt;span class=&quot;error&quot;&gt;&amp;#91;true, false&amp;#93;&lt;/span&gt;, &quot;d&quot;], 4]&lt;/p&gt;

&lt;p&gt;           shouldFail(JsonException) &lt;/p&gt;
{ parser.parseText(&apos;[&apos;) }
&lt;p&gt;           parser.parseText(&apos;&lt;span class=&quot;error&quot;&gt;&amp;#91;,&amp;#93;&lt;/span&gt;&apos;)&lt;br/&gt;
           shouldFail(JsonException) &lt;/p&gt;
{ parser.parseText(&apos;[1&apos;) }
&lt;p&gt;           parser.parseText(&apos;[1,&apos;)&lt;br/&gt;
           shouldFail(JsonException) &lt;/p&gt;
{ parser.parseText(&apos;[1, 2&apos;) }
&lt;p&gt;           parser.parseText(&apos;[1, 2, &lt;span class=&quot;error&quot;&gt;&amp;#91;3, 4&amp;#93;&lt;/span&gt;&apos;)&lt;br/&gt;
       }&lt;br/&gt;
   ```&lt;br/&gt;
   Not sure why the author expected something like `parser.parseText(&apos;[1, 2, &lt;span class=&quot;error&quot;&gt;&amp;#91;3, 4&amp;#93;&lt;/span&gt;&apos;)` to not fail. Seems like an invalid JSON String.&lt;/p&gt;

</comment>
                            <comment id="17779114" author="githubbot" created="Tue, 24 Oct 2023 14:16:45 +0000"  >&lt;p&gt;yuhengfdada commented on PR #1972:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/1972#issuecomment-1777313262&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1972#issuecomment-1777313262&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   &amp;gt; With this change, this unit test is failing in `JsonSlurperLaxTest.groovy`:&lt;br/&gt;
   &amp;gt; &lt;br/&gt;
   &amp;gt; ```&lt;br/&gt;
   &amp;gt;     void testArrayOfArrayWithSimpleValues() {&lt;br/&gt;
   &amp;gt;         assert parser.parseText(&apos;[1, 2, 3, [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &lt;span class=&quot;error&quot;&gt;&amp;#91;true, false&amp;#93;&lt;/span&gt;, &quot;d&quot;], 4]&apos;) ==&lt;br/&gt;
   &amp;gt;                 [1, 2, 3, [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &lt;span class=&quot;error&quot;&gt;&amp;#91;true, false&amp;#93;&lt;/span&gt;, &quot;d&quot;], 4]&lt;br/&gt;
   &amp;gt; &lt;br/&gt;
   &amp;gt;         shouldFail(JsonException) &lt;/p&gt;
{ parser.parseText(&apos;[&apos;) }
&lt;p&gt;   &amp;gt;         parser.parseText(&apos;&lt;span class=&quot;error&quot;&gt;&amp;#91;,&amp;#93;&lt;/span&gt;&apos;)&lt;br/&gt;
   &amp;gt;         shouldFail(JsonException) &lt;/p&gt;
{ parser.parseText(&apos;[1&apos;) }
&lt;p&gt;   &amp;gt;         parser.parseText(&apos;[1,&apos;)&lt;br/&gt;
   &amp;gt;         shouldFail(JsonException) &lt;/p&gt;
{ parser.parseText(&apos;[1, 2&apos;) }
&lt;p&gt;   &amp;gt;         parser.parseText(&apos;[1, 2, &lt;span class=&quot;error&quot;&gt;&amp;#91;3, 4&amp;#93;&lt;/span&gt;&apos;)&lt;br/&gt;
   &amp;gt;     }&lt;br/&gt;
   &amp;gt; ```&lt;br/&gt;
   &amp;gt; &lt;br/&gt;
   &amp;gt; Not sure why the author expected something like `parser.parseText(&apos;[1, 2, &lt;span class=&quot;error&quot;&gt;&amp;#91;3, 4&amp;#93;&lt;/span&gt;&apos;)` to not fail. Seems like an invalid JSON String.&lt;/p&gt;

&lt;p&gt;   Having read the documentation, maybe `JsonParserLax` is expected to have this behavior. Unfortunately `JsonParserLax` extends `JsonParserCharArray` so this fix won&apos;t work. Closing the PR.&lt;/p&gt;

</comment>
                            <comment id="17779115" author="githubbot" created="Tue, 24 Oct 2023 14:16:45 +0000"  >&lt;p&gt;yuhengfdada closed pull request #1972: &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-11200&quot; title=&quot;JsonSlurper parses badly format JSON without throwing exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-11200&quot;&gt;&lt;del&gt;GROOVY-11200&lt;/del&gt;&lt;/a&gt;: JsonSlurper should throw exception when parsing invalid String ended with a right curly brace&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/1972&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1972&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="17795653" author="githubbot" created="Tue, 12 Dec 2023 09:32:15 +0000"  >&lt;p&gt;paulk-asert commented on PR #1974:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/1974#issuecomment-1851638508&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1974#issuecomment-1851638508&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   This looks okay to me. I plan to merge tomorrow if no further comments.&lt;/p&gt;

</comment>
                            <comment id="17796470" author="githubbot" created="Wed, 13 Dec 2023 21:45:05 +0000"  >&lt;p&gt;paulk-asert merged PR #1974:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/1974&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1974&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="17797033" author="paulk" created="Fri, 15 Dec 2023 05:40:09 +0000"  >&lt;p&gt;Proposed PR merged. Thanks!&lt;/p&gt;</comment>
                            <comment id="17823263" author="ppazos" created="Mon, 4 Mar 2024 17:20:33 +0000"  >&lt;p&gt;This is an issue on Groovy 3.x too, would the solution be backported?&lt;/p&gt;


&lt;p&gt;For instance, this will parse OK:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;// Note there is no closing curly brace
def t = &quot;{&quot;
def json_parser = new JsonSlurper()
json_parser.parseText(t)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulk&quot; class=&quot;user-hover&quot; rel=&quot;paulk&quot;&gt;paulk&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 36 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1l2k0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>