<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:12:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-3330] Stub compilation causes harmful AST changes</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-3330</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;JavaStubGenerator causes verification to occur in phase conversion instead of phase class generation. Unfortunately, verification modifies the AST and even drops some information (e.g. labels on implicit returns), leading to troubles for transforms down the line. (In order to write correct transforms, one has to have knowledge about which AST modifications have (not yet) occurred.)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12811813">GROOVY-3330</key>
            <summary>Stub compilation causes harmful AST changes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="pniederw">Peter Niederwieser</reporter>
                        <labels>
                    </labels>
                <created>Sun, 1 Feb 2009 20:09:14 +0000</created>
                <updated>Tue, 11 Jul 2023 21:59:51 +0000</updated>
                                            <version>1.6-rc-2</version>
                                                    <component>Compiler</component>
                    <component>Stub generator / Joint compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14466452" author="blackdrag" created="Mon, 2 Feb 2009 07:47:34 +0000"  >&lt;p&gt;labels on implicit returns? I guess you mean that returns are added. As they don&apos;t exist before, they can&apos;t have a label. Of course if the last statement is labeled, then the return needs to get that label.&lt;/p&gt;</comment>
                            <comment id="14466360" author="blackdrag" created="Mon, 2 Feb 2009 07:48:02 +0000"  >&lt;p&gt;I think switching the addition of implicit returns off is a good idea&lt;/p&gt;</comment>
                            <comment id="14478445" author="pniederw" created="Mon, 2 Feb 2009 09:00:46 +0000"  >&lt;p&gt;I mean that Verifier doesn&apos;t copy the label when it inserts an implicit return. This might not be a problem if Verifier runs in phase class generation, but it is a problem (at least for my transforms) if Verifier runs in phase conversion.&lt;/p&gt;</comment>
                            <comment id="14466479" author="pniederw" created="Mon, 2 Feb 2009 09:02:25 +0000"  >&lt;p&gt;Yes, it would be a good idea to switch off everything that modifies the AST. &lt;/p&gt;</comment>
                            <comment id="14466420" author="blackdrag" created="Mon, 2 Feb 2009 09:16:41 +0000"  >&lt;p&gt;it does not copy the label... hmm.. that is possibly a bug... As for not modifying the AST, that is a bit difficult. You see if the AST is not modified, then Verifier would not have to be run. What verifier needs to do is adding the methods for GroovyObject, adding methods for properties and such stuff. Normally it would also add covariants, but that is disabled. &lt;/p&gt;

&lt;p&gt;But maybe it is time to split out the things we want verifier do for stubs into another class and then call that one from Verifier and from the stub generator instead.&lt;/p&gt;</comment>
                            <comment id="14467101" author="pniederw" created="Fri, 29 May 2009 18:01:42 +0000"  >&lt;p&gt;Rev. 16562/63 provides a partial fix - Verifier now retains a label when promoting an ExpressionStatement to an implicit ReturnStatement. However, the general problem that several AST changes (e.g. addition of implicit returns) occur in phase conversion instead of class generation if joint compilation is on, remains unsolved. This can make it difficult to write reliable AST transformations.&lt;/p&gt;</comment>
                            <comment id="14467086" author="pniederw" created="Sat, 30 May 2009 10:51:51 +0000"  >&lt;p&gt;Rev. 16587/88 provides another partial fix - implicit returns are no longer added during stub generation in phase conversion, but always in phase class generation. Several other AST modifications are still done during stub generation although they wouldn&apos;t have to be done at such an early stage.&lt;/p&gt;</comment>
                            <comment id="15904433" author="paulk" created="Fri, 10 Mar 2017 04:44:57 +0000"  >&lt;p&gt;Changed priority to Major since some of the most problematic cases have been reworked.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 36 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bvjr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>