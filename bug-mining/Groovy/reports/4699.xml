<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:22:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-9523] MissingMethodException when referencing a private enum method</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-9523</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Consider this Groovy class:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; test64

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.CompileDynamic
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.CompileStatic

@CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Test64 {

	@CompileDynamic
	static &lt;span class=&quot;code-keyword&quot;&gt;enum&lt;/span&gt; ShippingAddressSynchType {
		ACCOUNTING {
			@Override
			void synch(Test64 customer) {
				truncate(&lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt;, 2)
			}
		};

		void synch(Test64 customer) { }

		private &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; truncate(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; input, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; maxLength) {
			&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(!input)
				&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; input
			&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(input.length() &amp;gt; maxLength)
				input = input[0..maxLength - 1]
			&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; input
		}
	}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and a Java class to run it:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; test64;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; test64.Test64.ShippingAddressSynchType;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Test64Main {

	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
		Test64 t = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Test64();
		ShippingAddressSynchType.ACCOUNTING.synch(t);
	}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you run this code, you&apos;ll get:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception in thread &quot;main&quot; groovy.lang.MissingMethodException: No signature of method: test64.Test64$ShippingAddressSynchType$1.truncate() is applicable for argument types: (String, Integer) values: [foo, 2]
        at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.unwrap(ScriptBytecodeAdapter.java:70)
        at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.callCurrent(PogoMetaClassSite.java:83)
        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:51)
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:156)
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:176)
        at test64.Test64$ShippingAddressSynchType$1.synch(Test64.groovy:14)
        at test64.Test64Main.main(Test64Main.java:9)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13300754">GROOVY-9523</key>
            <summary>MissingMethodException when referencing a private enum method</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="mauromol">Mauro Molinari</reporter>
                        <labels>
                            <label>enum</label>
                    </labels>
                <created>Fri, 24 Apr 2020 09:25:04 +0000</created>
                <updated>Wed, 23 Aug 2023 09:11:21 +0000</updated>
                            <resolved>Wed, 19 Jul 2023 21:37:51 +0000</resolved>
                                    <version>2.5.11</version>
                                    <fixVersion>5.0.0-alpha-1</fixVersion>
                                    <component>groovy-runtime</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17091380" author="mauromol" created="Fri, 24 Apr 2020 09:29:43 +0000"  >&lt;p&gt;See also &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-9524&quot; title=&quot;VerifyError when referencing a private enum method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-9524&quot;&gt;&lt;del&gt;GROOVY-9524&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17205892" author="paulk" created="Fri, 2 Oct 2020 00:05:37 +0000"  >&lt;p&gt;Doesn&apos;t need Java involved to cause the issue:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Test64 {
    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;enum&lt;/span&gt; SynchType {
        ACCOUNTING {
            @Override
            void synch(Test64 customer) { truncate(&lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt;, 2) }
        }
        void synch(Test64 customer) { }
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; truncate(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; input, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; maxLength) { input }
    }
}

Test64.SynchType.ACCOUNTING.synch(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Test64())
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Gives:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;groovy.lang.MissingMethodException: No signature of method: Test64$SynchType$1.truncate() is applicable for argument types: (String, Integer) values: [foo, 2]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17303734" author="emilles" created="Wed, 17 Mar 2021 21:21:47 +0000"  >&lt;p&gt;See also &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8905&quot; title=&quot;MissingMethodException when private method is called on parent class in a closure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8905&quot;&gt;&lt;del&gt;GROOVY-8905&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-9987&quot; title=&quot;MissingMethodException when a base class calls a private static method inside a closure &quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-9987&quot;&gt;&lt;del&gt;GROOVY-9987&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The enum constant body is an anonymous inner class.  It tries to access a private method of the outer class.  There may be missing bridging in this case.  &lt;tt&gt;@CompileStatic&lt;/tt&gt; is the usual workaround; I am looking at 9524 to fix the stack issue.&lt;/p&gt;</comment>
                            <comment id="17744778" author="emilles" created="Wed, 19 Jul 2023 20:27:12 +0000"  >&lt;p&gt;&quot;truncate(&apos;foo&apos;,2)&quot; is written and invoked as &quot;this.truncate(&apos;foo&apos;,2)&quot;.  Runtime method selection finds nothing on &lt;tt&gt;Test64$ShippingAddressSynchType$1&lt;/tt&gt; and then proceeds to &quot;methodMissing&quot; if one exists.  &lt;tt&gt;enum&lt;/tt&gt; inners have no MOP methods added by &lt;tt&gt;EnumCompletionVisitor&lt;/tt&gt; like &lt;tt&gt;InnerClassCompletionVisitor&lt;/tt&gt; does.  I brute forced a &lt;tt&gt;methodMissing&lt;/tt&gt; and it fails looking for &quot;this$dist$invoke$2(Ljava/lang/String;Ljava/lang/Object;)Ljava/lang/Object;&quot;.  So I brute forced the delegation methods and it works.&lt;/p&gt;

&lt;p&gt;Anyways, I think there is a shorter path here than doing what anonymous inner classes do because outer and super are the same thing.  So &quot;this&quot; is useful for calling super methods instead of having to deal with &quot;this$0&quot; like the non-static inner case.&lt;/p&gt;

&lt;p&gt;I thought you could write &quot;super.truncate(&apos;foo&apos;,2)&quot; and it would call the private method.  However, because the inner does not declare a &quot;truncate&quot; the MOP links for a super call are not created.&lt;/p&gt;</comment>
                            <comment id="17744793" author="emilles" created="Wed, 19 Jul 2023 21:37:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/commit/732a204a6439bfadece45b222758c1138cce3292&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/732a204a6439bfadece45b222758c1138cce3292&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>groovy</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 16 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0e13s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>