<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:00:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-9014] printf does not respect &quot;out&quot; property</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-9014</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;I am using groovy to run dynamic scripts from my Java application. I use JSR223 for this. I am overriding &quot;out&quot; property to redirect script stdout to my own consumer. However, I&apos;ve noticed that &lt;b&gt;printf&lt;/b&gt; inside closures does not respect that property (it always prints to stdout) while &lt;b&gt;println&lt;/b&gt; perfectly complies (and prints to whatever specified).&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I beleive this is because of the differences in printf and println in DefaultGroovyMethods.java: in &lt;a href=&quot;https://github.com/apache/groovy/blob/master/src/main/java/org/codehaus/groovy/runtime/DefaultGroovyMethods.java#L849&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/blob/master/src/main/java/org/codehaus/groovy/runtime/DefaultGroovyMethods.java#L849&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;println uses closure owner while printf does simple System.out.&lt;/p&gt;</description>
                <environment>Ubuntu 18.04.1,</environment>
        <key id="13218862">GROOVY-9014</key>
            <summary>printf does not respect &quot;out&quot; property</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="positron96">Pavel Melnikov</reporter>
                        <labels>
                    </labels>
                <created>Fri, 1 Mar 2019 11:03:50 +0000</created>
                <updated>Mon, 20 May 2019 07:32:02 +0000</updated>
                            <resolved>Thu, 7 Mar 2019 10:24:06 +0000</resolved>
                                                    <fixVersion>3.0.0-beta-1</fixVersion>
                    <fixVersion>2.5.7</fixVersion>
                                    <component>groovy-runtime</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16781602" author="paulk" created="Fri, 1 Mar 2019 11:57:15 +0000"  >&lt;p&gt;For non-Closure cases, &lt;tt&gt;println&lt;/tt&gt; uses &lt;tt&gt;System.out&lt;/tt&gt; too:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/blob/master/src/main/java/org/codehaus/groovy/runtime/DefaultGroovyMethods.java#L802&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/blob/master/src/main/java/org/codehaus/groovy/runtime/DefaultGroovyMethods.java#L802&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It might be that we need Closure variants for &lt;tt&gt;printf&lt;/tt&gt;. You could try this yourself by creating your own category and seeing if that works. Also, does using &lt;tt&gt;out.printf&lt;/tt&gt; work?&lt;/p&gt;

&lt;p&gt;Alternatively, can you create a minimal example which exhibits the problem?&lt;/p&gt;</comment>
                            <comment id="16784166" author="positron96" created="Tue, 5 Mar 2019 07:01:27 +0000"  >&lt;p&gt;I&apos;ve conjured up a minimal example, it works without any JSR223 or whatever:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12961115/12961115_test.groovy&quot; title=&quot;test.groovy attached to GROOVY-9014&quot;&gt;test.groovy&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;def stringWriter = new StringWriter()&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;out = new PrintWriter(stringWriter)&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;println &quot;root println&quot; // goes to out&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;printf &quot;root printf\n&quot; // goes to out&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;def t1 = {&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;&#160; &#160; println &quot;closure println&quot; // goes to out&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;&#160; &#160; this.println &quot;closure this.println&quot; // goes to out&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;&#160; &#160; out.println &quot;closure out.println&quot; // goes to out&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;&#160; &#160; printf &quot;closure printf\n&quot; // goes to stdout (bug here) !!&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;&#160; &#160; this.printf &quot;closure this.printf\n&quot; //goes to out&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;&#160; &#160; out.println &quot;closure out.printf\n&quot; // goes to out&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;}&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;t1()&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;System.out.println(&quot;\n====\nOutput that went to out:\n&quot;+stringWriter.toString() )&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16785141" author="paulk" created="Wed, 6 Mar 2019 01:36:20 +0000"  >&lt;p&gt;We&apos;d need a couple of additional DGM methods to support that:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/groovy/pull/889&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/889&lt;/a&gt;&lt;br/&gt;
I&apos;m +1 on adding this. Let&apos;s see if anyone else comments otherwise.&lt;/p&gt;</comment>
                            <comment id="16785497" author="blackdrag" created="Wed, 6 Mar 2019 10:46:46 +0000"  >&lt;p&gt;If the method exists on Object already, then why do we have to add it to Closure?&lt;/p&gt;</comment>
                            <comment id="16785642" author="paulk" created="Wed, 6 Mar 2019 13:46:39 +0000"  >&lt;p&gt;The &lt;tt&gt;Script&lt;/tt&gt; class has special variants of &lt;tt&gt;println&lt;/tt&gt;, &lt;tt&gt;print&lt;/tt&gt; and &lt;tt&gt;printf&lt;/tt&gt; which look for an &lt;tt&gt;out&lt;/tt&gt; property. We have special DGM Closure variants for &lt;tt&gt;println&lt;/tt&gt; and &lt;tt&gt;print&lt;/tt&gt; which delegate to the owner (or the outer owner in the case of nested closures) - so it will be the script in the above examples. We could make the Object variants for &lt;tt&gt;printf&lt;/tt&gt; smarter and detect that case but for consistency I&apos;d suggest using the same approach as for &lt;tt&gt;println&lt;/tt&gt; and &lt;tt&gt;print&lt;/tt&gt; as per the PR.&lt;/p&gt;</comment>
                            <comment id="16786592" author="paulk" created="Thu, 7 Mar 2019 10:24:06 +0000"  >&lt;p&gt;Proposed PR merged.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12961115" name="test.groovy" size="582" author="positron96" created="Tue, 5 Mar 2019 07:01:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0086w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>