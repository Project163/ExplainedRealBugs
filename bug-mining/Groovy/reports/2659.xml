<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:41:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-6614] Groovy compiler throws internal error with @CompileStatic and getPropertyChangeListeners()</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-6614</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Compiling:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; bugreport.test

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.beans.Bindable
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.CompileStatic

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.beans.PropertyChangeListener


@CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;GetListeners
{
  @Bindable
  &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; test = &lt;span class=&quot;code-quote&quot;&gt;&quot;a test&quot;&lt;/span&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testGetListeners(){
    getPropertyChangeListeners().each {PropertyChangeListener pcl -&amp;gt; println &lt;span class=&quot;code-quote&quot;&gt;&quot;$pcl&quot;&lt;/span&gt;}
  }
}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;yields:&lt;/p&gt;

&lt;div class=&quot;panel&quot; style=&quot;background-color: #FFFFCE;border-width: 1px;&quot;&gt;&lt;div class=&quot;panelContent&quot; style=&quot;background-color: #FFFFCE;&quot;&gt;
&lt;p&gt;Groovyc: java.lang.ArrayIndexOutOfBoundsException: Internal compiler error while compiling C:\Users\strue\nca2\nca\playground\dpviewer\dpviewerfx\src\main\groovy\bugreport\test\GetListeners.groovy&lt;br/&gt;
Method: MethodNode@1847509784[&lt;span class=&quot;error&quot;&gt;&amp;#91;Ljava.beans.PropertyChangeListener; getPropertyChangeListeners(java.lang.String)&amp;#93;&lt;/span&gt;&lt;br/&gt;
Line -1, expecting casting to java.beans.PropertyChangeListener[] but operand stack is empty&lt;br/&gt;
	at org.codehaus.groovy.classgen.asm.OperandStack.doConvertAndCast(OperandStack.java:323)&lt;br/&gt;
	at org.codehaus.groovy.classgen.asm.OperandStack.doGroovyCast(OperandStack.java:290)&lt;br/&gt;
	at org.codehaus.groovy.classgen.asm.StatementWriter.writeReturn(StatementWriter.java:584)&lt;br/&gt;
	at org.codehaus.groovy.classgen.AsmClassGenerator.visitReturnStatement(AsmClassGenerator.java:543)&lt;br/&gt;
	at org.codehaus.groovy.ast.stmt.ReturnStatement.visit(ReturnStatement.java:47)&lt;br/&gt;
	at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitClassCodeContainer(ClassCodeVisitorSupport.java:101)&lt;br/&gt;
	at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitConstructorOrMethod(ClassCodeVisitorSupport.java:112)&lt;br/&gt;
	at org.codehaus.groovy.classgen.AsmClassGenerator.visitStdMethod(AsmClassGenerator.java:357)&lt;br/&gt;
	at org.codehaus.groovy.classgen.AsmClassGenerator.visitConstructorOrMethod(AsmClassGenerator.java:314)&lt;br/&gt;
	at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitMethod(ClassCodeVisitorSupport.java:123)&lt;br/&gt;
	at org.codehaus.groovy.classgen.AsmClassGenerator.visitMethod(AsmClassGenerator.java:434)&lt;br/&gt;
	at org.codehaus.groovy.ast.ClassNode.visitContents(ClassNode.java:1055)&lt;br/&gt;
	at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitClass(ClassCodeVisitorSupport.java:50)&lt;br/&gt;
	at org.codehaus.groovy.classgen.AsmClassGenerator.visitClass(AsmClassGenerator.java:177)&lt;br/&gt;
	at org.codehaus.groovy.control.CompilationUnit$15.call(CompilationUnit.java:794)&lt;br/&gt;
	at org.codehaus.groovy.control.CompilationUnit.applyToPrimaryClassNodes(CompilationUnit.java:1036)&lt;br/&gt;
	at org.codehaus.groovy.control.CompilationUnit.doPhaseOperation(CompilationUnit.java:572)&lt;br/&gt;
	at org.codehaus.groovy.control.CompilationUnit.processPhaseOperations(CompilationUnit.java:550)&lt;br/&gt;
	at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:527)&lt;br/&gt;
	at org.jetbrains.groovy.compiler.rt.GroovyCompilerWrapper.compile(GroovyCompilerWrapper.java:54)&lt;br/&gt;
	at org.jetbrains.groovy.compiler.rt.DependentGroovycRunner.runGroovyc(DependentGroovycRunner.java:80)&lt;br/&gt;
	at org.jetbrains.groovy.compiler.rt.GroovycRunner.main(GroovycRunner.java:85)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:483)&lt;br/&gt;
	at com.intellij.rt.execution.CommandLineWrapper.main(CommandLineWrapper.java:121)&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The problem disappears when I remove the @CompileStatic from the class&lt;/p&gt;

&lt;p&gt;I get a similar error when compiling similar code in our production context:&lt;/p&gt;

&lt;div class=&quot;panel&quot; style=&quot;background-color: #FFFFCE;border-width: 1px;&quot;&gt;&lt;div class=&quot;panelContent&quot; style=&quot;background-color: #FFFFCE;&quot;&gt;
&lt;p&gt;Groovyc: A groovyc error occurred while trying to load one of the classes in project dependencies, please ensure it&apos;s present. See the message and the stack trace below for reference&lt;br/&gt;
java.lang.VerifyError: (class:XXXX, method: getPropertyChangeListeners signature: (Ljava/lang/String; )[Ljava/beans/PropertyChangeListener0; ) Unable to pop operand off an empty stack&lt;br/&gt;
	at java.lang.Class.getDeclaredFields0(Native Method)&lt;br/&gt;
	at java.lang.Class.privateGetDeclaredFields(Class.java:2570)&lt;br/&gt;
	at java.lang.Class.getDeclaredFields(Class.java:1903)&lt;br/&gt;
	at org.codehaus.groovy.vmplugin.v5.Java5.configureClassNode(Java5.java:351)&lt;br/&gt;
	at org.codehaus.groovy.ast.ClassNode.lazyClassInit(ClassNode.java:258)&lt;br/&gt;
	at org.codehaus.groovy.ast.ClassNode.getUnresolvedSuperClass(ClassNode.java:973)&lt;br/&gt;
	at org.codehaus.groovy.ast.ClassNode.getUnresolvedSuperClass(ClassNode.java:968)&lt;br/&gt;
	at org.codehaus.groovy.control.ResolveVisitor.checkCyclicInheritence(ResolveVisitor.java:1204)&lt;br/&gt;
	at org.codehaus.groovy.control.ResolveVisitor.visitClass(ResolveVisitor.java:1181)&lt;br/&gt;
	at org.codehaus.groovy.control.ResolveVisitor.startResolving(ResolveVisitor.java:141)&lt;br/&gt;
	at org.codehaus.groovy.control.CompilationUnit$10.call(CompilationUnit.java:632)&lt;br/&gt;
	at org.codehaus.groovy.control.CompilationUnit.applyToSourceUnits(CompilationUnit.java:912)&lt;br/&gt;
	at org.codehaus.groovy.control.CompilationUnit.doPhaseOperation(CompilationUnit.java:574)&lt;br/&gt;
	at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:523)&lt;br/&gt;
	at org.jetbrains.groovy.compiler.rt.GroovyCompilerWrapper.compile(GroovyCompilerWrapper.java:54)&lt;br/&gt;
	at org.jetbrains.groovy.compiler.rt.DependentGroovycRunner.runGroovyc(DependentGroovycRunner.java:80)&lt;br/&gt;
	at org.jetbrains.groovy.compiler.rt.GroovycRunner.main(GroovycRunner.java:85)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:483)&lt;br/&gt;
	at com.intellij.rt.execution.CommandLineWrapper.main(CommandLineWrapper.java:121)&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12817412">GROOVY-6614</key>
            <summary>Groovy compiler throws internal error with @CompileStatic and getPropertyChangeListeners()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="sean.true">Sean True</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Mar 2014 15:06:10 +0000</created>
                <updated>Tue, 8 Jul 2014 15:28:42 +0000</updated>
                            <resolved>Fri, 20 Jun 2014 20:49:18 +0000</resolved>
                                    <version>2.2.2</version>
                                    <fixVersion>2.3.4</fixVersion>
                    <fixVersion>2.4.0-beta-2</fixVersion>
                                    <component>Static compilation</component>
                    <component>Static Type Checker</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14476092" author="mauromol" created="Fri, 20 Jun 2014 04:44:46 +0000"  >&lt;p&gt;I also hit this problem with Groovy 2.3.0 &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14480578" author="paulk" created="Fri, 20 Jun 2014 07:56:35 +0000"  >&lt;p&gt;I&apos;ve pushed a fix for @Bindable. I&apos;ll do @Vetoable next before resolving the issue.&lt;/p&gt;</comment>
                            <comment id="14476093" author="mauromol" created="Fri, 20 Jun 2014 17:37:45 +0000"  >&lt;p&gt;Great, thank you! For which compiler version(s) do you plan to release the fix?&lt;/p&gt;</comment>
                            <comment id="14480624" author="paulk" created="Fri, 20 Jun 2014 20:49:18 +0000"  >&lt;p&gt;Fixed for both @Vetoable and @Bindable for the 2.3 and 2.4/master branches.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 22 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2c0wf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>