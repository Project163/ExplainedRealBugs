<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:08:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-1627] Deserialization fails to work</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-1627</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Serialization appears to work fine but deserialization fails to work at all.&lt;/p&gt;

&lt;p&gt;The script;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.FileInputStream
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.FileOutputStream
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.ObjectInputStream
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.ObjectOutputStream
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.Serializable

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Blah &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Serializable {
  def x
  def y
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Blah ( x , y ) {
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.x = x
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.y = y
  }
}

def fileName = &lt;span class=&quot;code-quote&quot;&gt;&apos;thingy.txt&apos;&lt;/span&gt;
def data = [ &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Blah ( 1 , 2 ) , &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Blah ( &lt;span class=&quot;code-quote&quot;&gt;&apos;flob&apos;&lt;/span&gt; , &lt;span class=&quot;code-quote&quot;&gt;&apos;adob&apos;&lt;/span&gt; ) ]
def file = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ObjectOutputStream ( &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileOutputStream ( fileName ) )
file.writeObject ( data )
file.close ( )
file = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ObjectInputStream ( &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream ( fileName ) )
def newData = file.readObject ( ) &lt;span class=&quot;code-comment&quot;&gt;// ClassNotFoundException here.
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; data == newData
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;results in the output:&lt;/p&gt;

&lt;p&gt;Caught: java.lang.ClassNotFoundException: Blah&lt;br/&gt;
        at serialization.run(serialization.groovy:22)&lt;br/&gt;
        at serialization.main(serialization.groovy)&lt;/p&gt;</description>
                <environment>Ubuntu 6.10 Edgy Eft + Groovy r4630</environment>
        <key id="12813402">GROOVY-1627</key>
            <summary>Deserialization fails to work</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="russel">Dr. Russel Winder</reporter>
                        <labels>
                    </labels>
                <created>Sat, 30 Dec 2006 04:04:26 +0000</created>
                <updated>Wed, 9 Dec 2009 21:34:00 +0000</updated>
                            <resolved>Wed, 9 Dec 2009 21:34:00 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14462602" author="blackdrag" created="Wed, 24 Jan 2007 10:14:06 +0000"  >&lt;p&gt;after discussion with several other people I must say it is not the fault of groovy. Java uses the last defined ClassLoader to loader the class. In many  environments this might mean that the wrong class loader is chosen or that it works one day and the other day not. The only secure way out of this is the solution I already posted on the mailing list&lt;/p&gt;</comment>
                            <comment id="14463313" author="blackdrag" created="Mon, 29 Oct 2007 09:48:33 +0000"  >&lt;p&gt;just to ensure that the solution is known:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;DeserializationExample.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; ObjectInputStream ois = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ObjectInputStream(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayInputStream(data)) {
   &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; resolveClass(ObjectStreamClass objectStreamClass) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException, ClassNotFoundException {
     &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.forName(objectStreamClass.getName(), &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, myClassLoader);
   }
 }; 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;myClassLoader needs to be a classloader that knows how to resolve he Groovy class we want to deserialize&lt;/p&gt;</comment>
                            <comment id="14464832" author="aalmiray" created="Fri, 23 May 2008 23:02:18 +0000"  >&lt;p&gt;Based on Jochen&apos;s latest comment, should this issue be closed or is there something else to be discussed?&lt;/p&gt;</comment>
                            <comment id="14464833" author="guillaume" created="Sat, 24 May 2008 04:06:35 +0000"  >&lt;p&gt;We should find a suitable place to document this on the wiki.&lt;/p&gt;</comment>
                            <comment id="14478348" author="paulk" created="Wed, 3 Dec 2008 06:17:07 +0000"  >&lt;p&gt;I was planning to add two DGM methods:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; withObjectInputStream(File file, &lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt; classLoader, Closure closure)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; ObjectInputStream newObjectInputStream(File file, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt; classLoader)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;They would just codify Jochen&apos;s suggested solution above and enable this sort of code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Blah &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Serializable {
    def x, y
    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; equals(def other) { x == other.x &amp;amp;&amp;amp; y == other.y }
}

def file = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&apos;thingy.txt&apos;&lt;/span&gt;)
def data = [ &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Blah(x:1, y:2), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Blah(x:&lt;span class=&quot;code-quote&quot;&gt;&apos;flob&apos;&lt;/span&gt;, y:&lt;span class=&quot;code-quote&quot;&gt;&apos;adob&apos;&lt;/span&gt;) ]
file.withObjectOutputStream { oos -&amp;gt;
    oos.writeObject ( data )
}
file.withObjectInputStream(getClass().classLoader){ ois -&amp;gt;
    def newData = ois.readObject ( )
    &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; data == newData
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Unless anyone can see an issue with this, I&apos;ll add the methods, a test and document on the wiki.&lt;/p&gt;</comment>
                            <comment id="14465767" author="blackdrag" created="Wed, 3 Dec 2008 08:11:02 +0000"  >&lt;p&gt;hmm... why on file? why not on InputStream?&lt;/p&gt;</comment>
                            <comment id="14478358" author="paulk" created="Wed, 3 Dec 2008 14:00:02 +0000"  >&lt;p&gt;We certainly should cover that case as well. I was looking for existing usages and we have never bothered with:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; ObjectInputStream newObjectInputStream(InputStream inputStream)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;becase I guess it would only save one space character. But certainly it would make sense for:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; ObjectInputStream newObjectInputStream(InputStream inputStream, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt; classLoader)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Maybe it even makes sense to do the former for consistency.&lt;/p&gt;</comment>
                            <comment id="14478360" author="paulk" created="Fri, 5 Dec 2008 06:53:07 +0000"  >&lt;p&gt;The proposed methods added to DGM and test added too.&lt;/p&gt;

&lt;p&gt;This doesn&apos;t really solve the issue but I was planning to close after documenting on the wiki.&lt;/p&gt;

&lt;p&gt;I wonder whether we could eventually provide an AST macro like @AutoClassLoaders (or perhaps a better name) to mimic the behavior Java people might expect. Perhaps it might not be possible in general or may just makes things even more confusing.&lt;/p&gt;</comment>
                            <comment id="14468315" author="ldaley" created="Thu, 3 Dec 2009 18:12:43 +0000"  >&lt;p&gt;I have hit this issue, and can&apos;t see these methods in the GDK. &lt;/p&gt;

&lt;p&gt;What is the status?&lt;/p&gt;

&lt;p&gt;(Update: nevermind me, was looking in the wrong place)&lt;/p&gt;</comment>
                            <comment id="14468245" author="blackdrag" created="Fri, 4 Dec 2009 05:58:50 +0000"  >&lt;p&gt;still... Paul, can&apos;t we close this issue?&lt;/p&gt;</comment>
                            <comment id="14478761" author="paulk" created="Fri, 4 Dec 2009 06:11:58 +0000"  >&lt;p&gt;I guess so as solution is there - still need a wiki update at some point.&lt;/p&gt;</comment>
                            <comment id="14468443" author="paulk" created="Wed, 9 Dec 2009 21:34:00 +0000"  >&lt;p&gt;Example added to wiki under Streams&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 50 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bofb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>