<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:18:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-4720] Method overriding with ExpandoMetaClass is partially broken</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-4720</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;There is a regression whereby you cannot override methods using ExpandoMetaClass.&lt;/p&gt;

&lt;p&gt;The reason is that ClosureMetaMethod.createMethodList creates an anonymous inner class of type MetaMethod and adds it to the returned List&amp;lt;MetaMethod&amp;gt; that are to be registered&lt;/p&gt;

&lt;p&gt;Later the isNonRealMethod(MetaMethod) check in MetaMethodIndex does this check:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isNonRealMethod(MetaMethod method) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; method &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; NewInstanceMetaMethod ||
                method &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; NewStaticMetaMethod ||
                method &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; ClosureMetaMethod ||
                method &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; GeneratedMetaMethod ||
                method &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; ClosureStaticMetaMethod ||
                method &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; MixinInstanceMetaMethod;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Since the anonymous inner MetaMethod defined in ClosureMetaMethod is not an instance of any of these types then  the method is never registered in the MetaMethodIndex:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (methodC == matchC) {
                        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isNonRealMethod(method)) {
                            list.set(found, method);
                        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12817823">GROOVY-4720</key>
            <summary>Method overriding with ExpandoMetaClass is partially broken</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="guillaume">Guillaume Sauthier</assignee>
                                    <reporter username="graemerocher">Graeme Rocher</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Mar 2011 04:57:00 +0000</created>
                <updated>Wed, 13 Apr 2011 14:33:40 +0000</updated>
                            <resolved>Thu, 24 Mar 2011 09:31:10 +0000</resolved>
                                                    <fixVersion>1.8-rc-4</fixVersion>
                    <fixVersion>1.9-beta-1</fixVersion>
                    <fixVersion>1.7.11</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14471006" author="blackdrag" created="Fri, 11 Mar 2011 16:09:45 +0000"  >&lt;p&gt;Graeme, if I understand you right, then the change you are speaking of is from Dez 11 2008 and a reaction to &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-2951&quot; title=&quot;Cannot override instance methodMissing() in ExpandoMetaClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-2951&quot;&gt;&lt;del&gt;GROOVY-2951&lt;/del&gt;&lt;/a&gt;. That means that every 1.7 version has this bug, since this one was for 1.7 beta1. You said it was an regression, but really since back then? The changes in MetaMethodIndex go back to even July 15 2008 and the class was not touched since then. Can you provide a test case?&lt;/p&gt;</comment>
                            <comment id="14471034" author="guillaume" created="Tue, 15 Mar 2011 07:33:36 +0000"  >&lt;p&gt;Graeme, any update on this one? How did you produce the problem? Do you have some sample we could have a look at?&lt;/p&gt;</comment>
                            <comment id="14470977" author="guillaume" created="Wed, 16 Mar 2011 11:03:41 +0000"  >&lt;p&gt;Without further explanations on how to reproduce the issue, it&apos;s difficult to figure out what to do, and how to check it&apos;s the proper thing to do, despite having had several persons trying to reproduce the issue for several hours without any luck so far.&lt;br/&gt;
Anyhow, according to the explanations of the JIRA issue, if we follow the idea of creating a special MetaMethod class for use in ClosureMetaMethod#createMethodList() instead of the anonymous inner class, and then referencing that class in the instanceof checks of MetaMethodIndex#isNonRealMethod(), then all tests still pass.&lt;br/&gt;
So I&apos;ve created such a patch, and am attaching it here.&lt;br/&gt;
It would be good if you could test it, and better if you could provide a test case showing the problem.&lt;/p&gt;</comment>
                            <comment id="14471001" author="graemerocher" created="Wed, 23 Mar 2011 03:56:08 +0000"  >&lt;p&gt;Jochen/Guillaume - The regression is not new and I have a workaround so maybe it can be downgraded from blocker. I uncovered the regression as part of the new GORM/NoSQL work. &lt;/p&gt;

&lt;p&gt;I will try out the patch Guillaume and feedback asap, although the regression is old I&apos;m sure we can agree this is the wrong behavior and should be fixed&lt;/p&gt;</comment>
                            <comment id="14471044" author="graemerocher" created="Thu, 24 Mar 2011 08:13:29 +0000"  >&lt;p&gt;Reproducible example &lt;a href=&quot;http://groovyconsole.appspot.com/script/440004&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://groovyconsole.appspot.com/script/440004&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14471061" author="guillaume" created="Thu, 24 Mar 2011 09:30:52 +0000"  >&lt;p&gt;Exactly what I needed to test my patch.&lt;br/&gt;
And indeed, that fixes it.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12722738" name="GROOVY-4720__Method_overriding_with_ExpandoMetaClass_is_partially_broken.patch" size="3698" author="guillaume" created="Wed, 16 Mar 2011 11:03:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 35 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ck2v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>