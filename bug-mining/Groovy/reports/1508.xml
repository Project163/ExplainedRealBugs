<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:20:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-4768] java stub contains &quot;AnnotationNode&quot; string instead of an annotation within an annotation</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-4768</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;My groovy method has an annotation that some hibernate users will recognize:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   @JoinTable(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;join_table&quot;&lt;/span&gt;,
      inverseJoinColumns = @JoinColumn(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;otherEntity_id&quot;&lt;/span&gt;),
      joinColumns = @JoinColumn(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;myEntity_id&quot;&lt;/span&gt;))
   Set&amp;lt;OtherEntity&amp;gt; getOthers() {
      others
   }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;When I compile with just groovy, no problem.  But in joint compilation mode, the java compiler gets confused by the appearance of a String instead of an annotation in the stub:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  [groovyc] C:\DOCUME~1\cyrus\LOCALS~1\Temp\groovy-generated-5778051423738941844-java-source\MyEntity.java:18: annotation value must be an annotation
  [groovyc] @javax.persistence.OneToMany(targetEntity=OtherEntity.class) @javax.persistence.JoinTable(inverseJoinColumns=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.codehaus.groovy.ast.AnnotationNode@d4d66b&quot;&lt;/span&gt;, name=&lt;span class=&quot;code-quote&quot;&gt;&quot;join_table&quot;&lt;/span&gt;, joinColumns=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.codehaus.groovy.ast.AnnotationNode@149105b&quot;&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;  java.util.Set&amp;lt;OtherEntity&amp;gt; getOthers() { &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (java.util.Set&amp;lt;OtherEntity&amp;gt;)&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;}
  [groovyc]                                                                          &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I&apos;ve attached a simple ant project to reproduce this problem.  (To save space, I excluded the groovy jar.)&lt;/p&gt;</description>
                <environment>Windows XP</environment>
        <key id="12818070">GROOVY-4768</key>
            <summary>java stub contains &quot;AnnotationNode&quot; string instead of an annotation within an annotation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="lgdean">Laura Dean</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Apr 2011 16:07:04 +0000</created>
                <updated>Fri, 22 Jul 2011 16:56:48 +0000</updated>
                            <resolved>Wed, 29 Jun 2011 04:17:05 +0000</resolved>
                                    <version>1.7.8</version>
                    <version>1.7.10</version>
                                    <fixVersion>1.8.1</fixVersion>
                    <fixVersion>1.7.11</fixVersion>
                                    <component>Stub generator / Joint compiler</component>
                        <due></due>
                            <votes>4</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14471141" author="lgdean" created="Tue, 5 Apr 2011 16:19:09 +0000"  >&lt;p&gt;Apparently this version of jira eats whitespace!  I had no idea.  Sorry about that.  If I could figure out how to edit the ticket, I would.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  I have learned to indent, so I can be a better citizen.
    I also now notice the nice preview button off to the side.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14471108" author="blackdrag" created="Wed, 6 Apr 2011 06:22:07 +0000"  >&lt;p&gt;I edited the issue to have the code tags&lt;/p&gt;</comment>
                            <comment id="14479606" author="paulk" created="Wed, 29 Jun 2011 04:17:06 +0000"  >&lt;p&gt;Fixed - thanks very much for the test case.&lt;/p&gt;

&lt;p&gt;If you are in a position to try a SNAPSHOT jar from the CI server in your environment, that would be great.&lt;/p&gt;</comment>
                            <comment id="14471499" author="lgdean" created="Thu, 30 Jun 2011 13:14:00 +0000"  >&lt;p&gt;I tried the following snapshot jar, and unfortunately, it didn&apos;t change things for me.  I still got the &quot;annotation value must be an annotation&quot; error.&lt;/p&gt;

&lt;p&gt;groovy-all-1.8.1-SNAPSHOT.jar              30-Jun-2011 10:50  5.7M&lt;/p&gt;</comment>
                            <comment id="14479585" author="paulk" created="Thu, 30 Jun 2011 15:59:50 +0000"  >&lt;p&gt;I forgot to mention, you will need to recompile using that jar not just place the new jar in the classpath.&lt;/p&gt;

&lt;p&gt;Did you try running your sample ant project attached or some other test? Did you delete any existing class files first?&lt;/p&gt;</comment>
                            <comment id="14471556" author="lgdean" created="Tue, 19 Jul 2011 17:14:36 +0000"  >&lt;p&gt;Sorry for the delay; I was traveling, and then this task fell down my list a bit once I returned.&lt;/p&gt;

&lt;p&gt;My answer is a bit complicated.  I tried again with this snapshot:&lt;/p&gt;

&lt;p&gt;groovy-all-1.8.1-SNAPSHOT.jar              19-Jul-2011 08:44  5.8M  &lt;/p&gt;

&lt;p&gt;With my sample project, everything worked fine.  (I assume you tried it, too, so no surprise there!)&lt;/p&gt;

&lt;p&gt;With the actual production code, I find the following:&lt;/p&gt;

&lt;p&gt;1. With groovy 1.8.0, I still get this error.  (That&apos;s expected, of course, but confirms I&apos;ve reproduced it correctly.)&lt;br/&gt;
2. With groovy 1.8.1 in the taskdef, but with 1.8.0 still in my classpath (along with 1.8.1), I still get the error.&lt;br/&gt;
3. With groovy 1.8.0 totally removed, I get lots of other errors instead.  They all have to do with lines like the following:&lt;br/&gt;
   List&amp;lt;DomNode&amp;gt; getByXPath(String xpathExpression)&lt;br/&gt;
(where DomNode is a java class, and the class with the compilation error is a groovy class, and specifically, the java stub from it).&lt;/p&gt;

&lt;p&gt;I gave up on getting rid of those errors, though I tried for a while.  (First I removed packages that seemed to have a lot of the errors, and I removed references to those packages, but then more popped up.  Thus, giving up.)&lt;/p&gt;

&lt;p&gt;I guess that means I should report the errors I&apos;m getting when I use just the 1.8.1 snapshot for compiling.  (I assume that if something make it into a snapshot, it&apos;s worth reporting.  Is that correct?)  Which, in turn, means seeing whether someone else has reported it, which might mean waiting until tomorrow.&lt;/p&gt;</comment>
                            <comment id="14479640" author="paulk" created="Tue, 19 Jul 2011 17:50:11 +0000"  >&lt;p&gt;Obviously a repeatable testcase showing your error would be ideal. But cutting and pasting a sample of the interim error messages you are getting in the meantime could be useful to try to get a fix in 1.8.1 which is due for release in a day or two.&lt;/p&gt;</comment>
                            <comment id="14471498" author="lgdean" created="Wed, 20 Jul 2011 12:15:08 +0000"  >&lt;p&gt;Created &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-4935&quot; title=&quot;stub generator loses package qualification for generic type argument&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-4935&quot;&gt;&lt;del&gt;GROOVY-4935&lt;/del&gt;&lt;/a&gt; for that issue.&lt;/p&gt;</comment>
                            <comment id="14471533" author="lgdean" created="Fri, 22 Jul 2011 16:56:48 +0000"  >&lt;p&gt;Looks good!  Everything compiles for me with this snapshot:&lt;br/&gt;
groovy-all-1.8.1-SNAPSHOT.jar              21-Jul-2011 07:46  5.8M&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12722837" name="project.zip" size="233560" author="lgdean" created="Tue, 5 Apr 2011 16:07:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2cpnr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>