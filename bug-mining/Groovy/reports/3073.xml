<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:51:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-7876] ClassCastException when calling DefaultTypeTransformation#compareEqual</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-7876</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;It appears that comparing two objects that both implement comparable with DefaultTypeTransformation#compareEqual is not safe in all cases. Consider enums for example, which throw exceptions when compared to differing classes. &lt;/p&gt;

&lt;p&gt;This is using Eclipse Collections for pairs but the idea is the same in general. &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;enum&lt;/span&gt; E1 {A, B, C}
    &lt;span class=&quot;code-keyword&quot;&gt;enum&lt;/span&gt; E2 {D, E, F}

    def &lt;span class=&quot;code-quote&quot;&gt;&quot;test groovy oddness&quot;&lt;/span&gt;() {
        when:
        def test = DefaultTypeTransformation.compareEqual(
            Tuples.pair(E1.A, 1), 
            Tuples.pair(E2.D, 1))

        then:
        &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; test == &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Stacktrace&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.ClassCastException
	at java.lang.Enum.compareTo(Enum.java:180)
	at java.lang.Enum.compareTo(Enum.java:55)
	at org.eclipse.collections.impl.tuple.PairImpl.compareTo(PairImpl.java:95)
	at org.eclipse.collections.impl.tuple.PairImpl.compareTo(PairImpl.java:22)
	at com.GroovyTests.test groovy oddness(GroovyTests.groovy:36)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12984146">GROOVY-7876</key>
            <summary>ClassCastException when calling DefaultTypeTransformation#compareEqual</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="aewhite">Andrew White</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Jun 2016 22:33:04 +0000</created>
                <updated>Wed, 1 Feb 2017 23:18:46 +0000</updated>
                            <resolved>Thu, 21 Jul 2016 23:33:43 +0000</resolved>
                                    <version>2.4.6</version>
                                    <fixVersion>2.4.8</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15383944" author="paulk" created="Tue, 19 Jul 2016 10:56:14 +0000"  >&lt;p&gt;A standalone example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@Grab(&lt;span class=&quot;code-quote&quot;&gt;&apos;org.eclipse.collections:eclipse-collections:7.1.0&apos;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.eclipse.collections.impl.tuple.Tuples

&lt;span class=&quot;code-keyword&quot;&gt;enum&lt;/span&gt; E1 {A, B, C}
&lt;span class=&quot;code-keyword&quot;&gt;enum&lt;/span&gt; E2 {D, E, F}

&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; Tuples.pair(E1.A, 1) != Tuples.pair(E2.D, 1) &lt;span class=&quot;code-comment&quot;&gt;// ClassCastException&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but my comment is, isn&apos;t this a flaw in the Eclipse collections PairImpl class because this also fails:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; Tuples.pair(E1.A, 1).compareTo(Tuples.pair(E2.D, 1)) &lt;span class=&quot;code-comment&quot;&gt;// ClassCastException&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but this succeeds:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; E1.A != E2.D
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I guess though we could easily catch that exception and return false.&lt;/p&gt;</comment>
                            <comment id="15384015" author="githubbot" created="Tue, 19 Jul 2016 12:03:15 +0000"  >&lt;p&gt;GitHub user paulk-asert opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/368&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/368&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7876&quot; title=&quot;ClassCastException when calling DefaultTypeTransformation#compareEqual&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7876&quot;&gt;&lt;del&gt;GROOVY-7876&lt;/del&gt;&lt;/a&gt;: ClassCastException when calling DefaultTypeTransformatio&#8230;&lt;/p&gt;

&lt;p&gt;    &#8230;n#compareEqual&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/paulk-asert/groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/paulk-asert/groovy&lt;/a&gt; groovy7876&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/368.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/368.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #368&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit ee4242301a8eee9f558434e36b0d456cf8939ecb&lt;br/&gt;
Author: paulk &amp;lt;paulk@asert.com.au&amp;gt;&lt;br/&gt;
Date:   2016-07-19T12:02:01Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7876&quot; title=&quot;ClassCastException when calling DefaultTypeTransformation#compareEqual&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7876&quot;&gt;&lt;del&gt;GROOVY-7876&lt;/del&gt;&lt;/a&gt;: ClassCastException when calling DefaultTypeTransformation#compareEqual&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15388616" author="githubbot" created="Thu, 21 Jul 2016 23:30:51 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/368&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/368&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15388619" author="paulk" created="Thu, 21 Jul 2016 23:33:43 +0000"  >&lt;p&gt;Proposed PR merged&lt;/p&gt;</comment>
                            <comment id="15392048" author="githubbot" created="Mon, 25 Jul 2016 14:55:18 +0000"  >&lt;p&gt;GitHub user paulk-asert opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/372&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/372&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7876&quot; title=&quot;ClassCastException when calling DefaultTypeTransformation#compareEqual&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7876&quot;&gt;&lt;del&gt;GROOVY-7876&lt;/del&gt;&lt;/a&gt; - ClassCastException when calling DefaultTypeTransformati&#8230;&lt;/p&gt;

&lt;p&gt;    &#8230;on#compareEqual (additional refactoring)&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/paulk-asert/groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/paulk-asert/groovy&lt;/a&gt; groovy7876b&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/372.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/372.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #372&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 65362bdfad86cc785a9fa039a58d512beabff032&lt;br/&gt;
Author: paulk &amp;lt;paulk@asert.com.au&amp;gt;&lt;br/&gt;
Date:   2016-07-25T14:53:39Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7876&quot; title=&quot;ClassCastException when calling DefaultTypeTransformation#compareEqual&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7876&quot;&gt;&lt;del&gt;GROOVY-7876&lt;/del&gt;&lt;/a&gt; - ClassCastException when calling DefaultTypeTransformation#compareEqual (additional refactoring)&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15392796" author="githubbot" created="Mon, 25 Jul 2016 22:49:21 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/372&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/372&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="12992423">GROOVY-7892</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12815075">GROOVY-4046</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 17 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i307vr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>