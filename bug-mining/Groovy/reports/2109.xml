<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:31:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-4701] MissingMethodException#printStackTrace() throws exception if an arguments toString() method fails</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-4701</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;I just saw a somewhat irritating behaviour in MissingMethodException. It throws an exception if the toString() of one of the arguments of the method call fails. &lt;/p&gt;

&lt;p&gt;Code to reproduce the problem:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;BrokenToString{
  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; toString() {
    &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(&lt;span class=&quot;code-quote&quot;&gt;&quot;toString broken&quot;&lt;/span&gt;)
  }
}

def exception = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MissingMethodException(&lt;span class=&quot;code-quote&quot;&gt;&quot;methodName&quot;&lt;/span&gt;, getClass(), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BrokenToString())

exception.printStackTrace()&lt;span class=&quot;code-comment&quot;&gt;//Throws Exception&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;ve provided two variants of a patch to solve the problem , but to be honest, I&apos;m not completely happy with any of these two variants:&lt;br/&gt;
1) The patch for InvokerHelper.java changes a class that seems to be broadly used and I&apos;m not sure if that change is acceptable for all clients&lt;br/&gt;
2) The patch for MissingMethod Exception solves the problem by returning an Error String for the whole list of arguments instead of the one argument that caused the problem. But of course this behaviour is better than throwing an Exception&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12817703">GROOVY-4701</key>
            <summary>MissingMethodException#printStackTrace() throws exception if an arguments toString() method fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="sieber">Stefan Sieber</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Mar 2011 06:50:38 +0000</created>
                <updated>Wed, 10 Jul 2013 04:42:19 +0000</updated>
                            <resolved>Mon, 28 Jan 2013 19:36:50 +0000</resolved>
                                                    <fixVersion>2.2.0-beta-1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14473926" author="pschumacher" created="Tue, 22 Jan 2013 14:14:03 +0000"  >&lt;p&gt;I guess there was no interest in applying this patch, therefore this issues should be closed.&lt;/p&gt;</comment>
                            <comment id="14473808" author="blackdrag" created="Wed, 23 Jan 2013 01:28:24 +0000"  >&lt;p&gt;Pascal, actually I think the MissingMethodException variant is desirable, but I would like to have it printing the exception text only for the parts that throw it. Are you interested in implementing that?&lt;/p&gt;</comment>
                            <comment id="14480147" author="paulk" created="Wed, 23 Jan 2013 05:50:30 +0000"  >&lt;p&gt;I was actually having a look at this today briefly. Perhaps it might be enough to have a try ... catch around the last line of InvokerHelper#format(Object, boolean, int) and if the toString() fails, instead output something similar to what Object#toString() would produce - could already in the start of the DGM#dump method. But then I read the &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-2599&quot; title=&quot;unable to overwrite toString() via MOP in some cases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-2599&quot;&gt;GROOVY-2599&lt;/a&gt; todo comment and got distracted trying (foolishly perhaps) to solve both and didn&apos;t have time to finish anything.&lt;/p&gt;</comment>
                            <comment id="14473855" author="blackdrag" created="Wed, 23 Jan 2013 13:20:29 +0000"  >&lt;p&gt;if you change InvokerHelper#format, won&apos;t it influence other parts too? And do we want this behavior there?&lt;/p&gt;</comment>
                            <comment id="14480107" author="paulk" created="Wed, 23 Jan 2013 15:39:37 +0000"  >&lt;p&gt;It would definitely influence other parts. In my little spike I added a boolean &quot;safe&quot; to various InvokerHelper methods: toString, toArrayString, toMapString, format, etc. and defaulted to false (current behavior). Then I wondered whether the default should really be true - it probably should for something as fundamental as toString()?&lt;/p&gt;

&lt;p&gt;P.S. Wondering whether in Groovy 3, all these formatting methods belong in a FormatHelper (or something) rather than in InvokerHelper.&lt;/p&gt;</comment>
                            <comment id="14474011" author="blackdrag" created="Thu, 24 Jan 2013 02:51:08 +0000"  >&lt;p&gt;I think it is a breaking change to some extend. Swallowing exceptions is rarely a good idea. In case of printing the text of an exception itself, well, that is ok, but for toString in general I am no fan&lt;/p&gt;</comment>
                            <comment id="14480153" author="paulk" created="Thu, 24 Jan 2013 04:11:49 +0000"  >&lt;p&gt;True, safer to leave the default as is. How does this look:&lt;br/&gt;
&lt;a href=&quot;https://github.com/groovy/groovy-core/pull/126&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/groovy/groovy-core/pull/126&lt;/a&gt;&lt;br/&gt;
Tests to follow if it looks reasonable.&lt;/p&gt;</comment>
                            <comment id="14473810" author="blackdrag" created="Thu, 24 Jan 2013 04:55:47 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14480140" author="paulk" created="Mon, 28 Jan 2013 19:36:50 +0000"  >&lt;p&gt;now for MME, a safe representation of the exception will be displayed, e.g. exceptions are ignored for toString() and hashCode().&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12722731" name="InvokerHelper.java.patch" size="1234" author="sieber" created="Wed, 2 Mar 2011 06:50:39 +0000"/>
                            <attachment id="12722735" name="MissingMethodException.java.patch" size="900" author="sieber" created="Wed, 2 Mar 2011 06:50:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 43 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2c4mf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>