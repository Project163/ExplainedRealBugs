<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:10:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-3284] Call behavior on enums is inconsistent</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-3284</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;A call method on an enum can be used within a for loop, but not otherwise.  This is kind of odd, and it might be better to disable the for loop behavior if it&apos;s not reasonable to fix in general.  &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; 

enum Foo {
    A({ println(&quot;A&quot;) }),
    B({ println(&quot;B&quot;) })
    Foo(Closure c) {
      call = c
    }
    final Closure call
}

// works
for (f in Foo) {
   f()
}

// works
Foo.A.call()

// doesn&apos;t work
Foo.A()

// doesn&apos;t work
a=Foo.A
a()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; </description>
                <environment>XP, cygwin, JRE 1.6.0</environment>
        <key id="12814498">GROOVY-3284</key>
            <summary>Call behavior on enums is inconsistent</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="roshandawrani">Roshan Dawrani</assignee>
                                    <reporter username="cityhall">Chris Currivan</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Jan 2009 10:44:04 +0000</created>
                <updated>Tue, 7 Apr 2009 23:31:14 +0000</updated>
                            <resolved>Fri, 6 Feb 2009 13:22:13 +0000</resolved>
                                    <version>1.5.7</version>
                                    <fixVersion>1.6.1</fixVersion>
                    <fixVersion>1.5.8</fixVersion>
                    <fixVersion>1.7-beta-1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14466175" author="roshandawrani" created="Fri, 16 Jan 2009 05:49:40 +0000"  >&lt;p&gt;I don&apos;t think if&lt;/p&gt;

&lt;p&gt;Foo.A() and&lt;/p&gt;

&lt;p&gt;a=Foo.A&lt;br/&gt;
a()&lt;/p&gt;

&lt;p&gt;are even supposed to work as per groovy syntax.&lt;/p&gt;

&lt;p&gt;If call is a member of enum Foo of type Closure as shown in the JIRA example, then what is supposed to work is:&lt;/p&gt;

&lt;p&gt;Foo.A.call() and Foo.A.call.call() (same as f = &lt;/p&gt;
{..}
&lt;p&gt; and calling it as f() and f.call()), and&lt;/p&gt;

&lt;p&gt;a=Foo.A&lt;br/&gt;
a.call() and a.call.call()&lt;/p&gt;</comment>
                            <comment id="14466258" author="roshandawrani" created="Fri, 16 Jan 2009 05:52:00 +0000"  >&lt;p&gt;A call like Foo.A() is not supposed to work because Foo.A is of type Foo and not Closure.&lt;/p&gt;</comment>
                            <comment id="14466204" author="blackdrag" created="Fri, 16 Jan 2009 08:01:51 +0000"  >&lt;p&gt;you can&apos;t say it like that.... x() is supposed to resolve to x.call(), but this is a undocumented feature as we are not entirely sure if we really want to support this. &lt;/p&gt;</comment>
                            <comment id="14466192" author="roshandawrani" created="Fri, 16 Jan 2009 09:34:28 +0000"  >&lt;p&gt;x() is supposed to resolve to x.call() even if x is not of type Closure? Irrespective of type of x?&lt;/p&gt;</comment>
                            <comment id="14466321" author="blackdrag" created="Fri, 16 Jan 2009 10:11:46 +0000"  >&lt;p&gt;kind of... as I said, it is not really specified. for sure I can say, that call() is to be made even if x is no Closure. I suspect in the MetaClass code where we test the field we test only for closures. A change here needs some experiments, because it may influence other parts.&lt;/p&gt;</comment>
                            <comment id="14466177" author="roshandawrani" created="Sat, 17 Jan 2009 23:38:27 +0000"  >&lt;p&gt;I have readied the partial fix for supporting Foo.A() resolving to Foo.A.call() in the example given in the JIRA. &lt;/p&gt;

&lt;p&gt;I am working on the 2nd half of the issue but I got a little confused by the previous comments. &lt;/p&gt;

&lt;p&gt;So, this is something that needs to be supported, right? Or, there is some unsurity about it?&lt;/p&gt;</comment>
                            <comment id="14466262" author="roshandawrani" created="Sun, 18 Jan 2009 00:23:11 +0000"  >&lt;p&gt;For the 2nd issue reported, it works if it is used as&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Case 1) when a is not a dynamic variable
def z = Foo.A 
z() &lt;span class=&quot;code-comment&quot;&gt;// prints A
&lt;/span&gt;z = Foo.B
z() &lt;span class=&quot;code-comment&quot;&gt;// prints B&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but not if &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Case 2) when a is a dynamic variable
a=Foo.A
a()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Is the code in case 1 above an acceptable workaround?&lt;/p&gt;</comment>
                            <comment id="14466335" author="blackdrag" created="Sun, 18 Jan 2009 15:54:28 +0000"  >&lt;p&gt;I guess case 1 is what is implemented now.. case 2 will try to call the method named &quot;a&quot; and will then see that there is no such method, then it will get the property value a and see if it is a Closure, which it is not. So the call fails. The point that is open is, if we should look only at the property value. If we would simply try to execute the call method regardless the type, then it would work. I think a fix should go into that direction to complete the work the compiler does for local variables. &lt;/p&gt;</comment>
                            <comment id="14466263" author="roshandawrani" created="Sun, 18 Jan 2009 23:44:00 +0000"  >&lt;p&gt;Ok, I will look into the issue 2 with the supplied information.&lt;/p&gt;

&lt;p&gt;For now, I have applied the partial fix to solve the issue 1.&lt;/p&gt;

&lt;p&gt;Now, Foo.A() gets resolved to Foo.A.call() for enum constant Foo.A.&lt;/p&gt;

&lt;p&gt;Before the fix, the target object for the method call A() was class Foo and that&apos;s why Foo.A() was getting treated like a static call A() on class Foo, and it was failing because that method wasn&apos;t there.&lt;/p&gt;

&lt;p&gt;Now, for Foo.A(), target is the enum constant Foo.A and it is like Foo.A() == &amp;lt;Foo.A&amp;gt;() == Foo.A.call(). &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14466326" author="blackdrag" created="Mon, 19 Jan 2009 03:22:27 +0000"  >&lt;p&gt;I shouldn&apos;t have deleted the first part of my comment saying something like &quot;adding a call transformation depending on the type of the compiler is a no go&quot;. Frankly I would say you should undo the commit. It goes not in the wrong direction and if case 2 is solved, then there is no need for your case1 fix too. I deleted that part of my comment because I thought that is the current state without your patch.&lt;/p&gt;

&lt;p&gt;If Foo.A() is seen as a static method call, then what is wrong with that?  Doesn&apos;t the normal method call logic look for a propoerty? Shouldn&apos;t A be a propoerty/field of Foo? Doesn&apos;t that mean that case 2 will solve case 1 automatically?&lt;/p&gt;</comment>
                            <comment id="14466300" author="roshandawrani" created="Mon, 19 Jan 2009 03:38:20 +0000"  >&lt;p&gt;Before I go the undo commit path, just wanted to clear if there is some confusion among case 1/2 and issue 1/2 - &lt;/p&gt;

&lt;p&gt;So, there are two issues reported:&lt;/p&gt;

&lt;p&gt;For the enum:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;enum&lt;/span&gt; Foo {
    A({ println(&lt;span class=&quot;code-quote&quot;&gt;&quot;A&quot;&lt;/span&gt;) })
    Foo(Closure c) {
      call = c
    }
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Closure call
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Issue 1: Foo.A() does not get resolved to Foo.A.call(). - Right now, this is what I have tried to resolve. So, if enum Foo as a field named A, which is of type Foo (which meets the condition required for enum constants) and there is method expression like Foo.A(), then the expression gets modified to Foo.A.call(). Is that not correct? Do you mean to say that if enum Foo has a static method A() as well as an enum constant A, then there will be a problem? If that is the case, you mean static call thing is more preferable and is direction it should go in?&lt;/p&gt;

&lt;p&gt;Issue 2: This issue says if we do&lt;br/&gt;
a = Foo.A&lt;br/&gt;
a(), then it does not work.&lt;/p&gt;

&lt;p&gt;For this I said, that without any changes done for this issue, if we instead do &lt;br/&gt;
def a = Foo.A&lt;br/&gt;
a() - then it works and had checked if this workaround was accpetable.&lt;/p&gt;

&lt;p&gt;I can still undo the commit but I thought I should make sure that there is no confusion between issue 1/2 and issue 2&apos;s case 1/case 2. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14466207" author="roshandawrani" created="Mon, 19 Jan 2009 04:18:18 +0000"  >&lt;p&gt;I will appreciate if you can tell in what kind of enum related scenarios, the fix would interfere. &lt;/p&gt;

&lt;p&gt;I will try it your way anyway for the part-2 that is remaining.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="14466240" author="blackdrag" created="Mon, 19 Jan 2009 07:34:08 +0000"  >&lt;p&gt;for your issue 1: the static method supersedes the call convention. So yes.. if there is a static method A, then it should be called instead of doing Foo.A.call()&lt;/p&gt;

&lt;p&gt;for issue 2: I think this is a workaround, but why letting have them define a local variable just for that? It would be better to then simply write Foo.A.call() then instead, or not? For DSLs it is better if it works without the workaround.&lt;/p&gt;

&lt;p&gt;If you are going to do the fix as I suggested, then the potential impact is unclear to me. I would probably put that not into 1.5.x or 1.6.x, but only into 1.7, because of that.&lt;/p&gt;</comment>
                            <comment id="14466227" author="roshandawrani" created="Mon, 19 Jan 2009 07:55:37 +0000"  >&lt;p&gt;Ok, I will first undo my changes from the 3 branches and then try to fix it as you have suggested. &lt;/p&gt;

&lt;p&gt;And then if I am solve it that way, I will have the patch reviewed first and do the changes only on 1.7.&lt;/p&gt;</comment>
                            <comment id="14466283" author="blackdrag" created="Mon, 19 Jan 2009 08:03:30 +0000"  >&lt;p&gt;ok &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14466337" author="roshandawrani" created="Mon, 19 Jan 2009 14:21:14 +0000"  >&lt;p&gt;Undid the changes made earlier.&lt;/p&gt;</comment>
                            <comment id="14466455" author="roshandawrani" created="Fri, 6 Feb 2009 13:22:13 +0000"  >&lt;p&gt;Resolved. &lt;/p&gt;

&lt;p&gt;Applied the new, reviewed fix on the branches 1.5.x, 1.6.x and trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 42 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bw7r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>