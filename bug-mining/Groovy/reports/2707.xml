<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:42:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-6937] JSon serialization with unicode characters fail</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-6937</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Json serialiation with Greek characters fails&lt;/p&gt;

&lt;p&gt;To reproduce:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o1 = [&lt;span class=&quot;code-quote&quot;&gt;&quot;&#206;&amp;lsquo;&#206;&#166;&#206;&#159;&#206;&#153; &#206;&#154;&#206;&#159;&#206;&#155;&#206;&#155;&#206;&#153;&#206;&amp;lsquo; &#206;&#154;&#206;&#161;&#206;&#149;&#206;&#169;&#206;&#160;&#206;&#159;&#206;&#155;&#206;&#149;&#206;&#153;&#206;&#159; &#206;&#164;&#206;&amp;lsquo;&#206;&amp;rsquo;&#206;&#149;&#206;&#161;&#206;&#157;&#206;&amp;lsquo;&quot;&lt;/span&gt;]
println &lt;span class=&quot;code-quote&quot;&gt;&quot;o1=${&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JsonBuilder(o1).toString()}&quot;&lt;/span&gt;

&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o2 = [&lt;span class=&quot;code-quote&quot;&gt;&quot;&#206;&amp;lsquo;&#206;&#166;&#206;&#159;&#206;&#153; &#206;&#154;&#206;&#159;&#206;&#155;&#206;&#155;&#206;&#153;&#206;&amp;lsquo; &#206;&#154;&#206;&#161;&#206;&#149;&#206;&#169;&#206;&#160;&#206;&#159;&#206;&#155;&#206;&#149;&#206;&#153;&#206;&#159; &#206;&#164;&#206;&amp;lsquo;&#206;&amp;rsquo;&#206;&#149;&#206;&#161;&#206;&#157;&#206;&amp;lsquo;&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;&#206;&#154;&#206;&#177;&#206;&#187;&#207;&#141;&#206;&#178;&#206;&#185;&#206;&#177; &#206;&#152;&#206;&#191;&#207;&#129;&#206;&#185;&#206;&#186;&#206;&#191;&#207;&#141;&quot;&lt;/span&gt;]
println &lt;span class=&quot;code-quote&quot;&gt;&quot;o2=${&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JsonBuilder(o2).toString()}&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Outputs:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;o1=[&lt;span class=&quot;code-quote&quot;&gt;&quot;\u0391\u03a6\u039f\u0399 \u039a\u039f\u039b\u039b\u0399\u0391 \u039a\u03a1\u0395\u03a9\u03a0\u039f\u039b\u0395\u0399\u039f \u03a4\u0391\u0392\u0395\u03a1\u039d\u0391&quot;&lt;/span&gt;]

Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.ArrayIndexOutOfBoundsException: 255
	at groovy.json.internal.CharBuf.doAddJsonEscapedString(CharBuf.java:533)
	at groovy.json.internal.CharBuf.addJsonEscapedString(CharBuf.java:394)
	at groovy.json.internal.CharBuf.addJsonEscapedString(CharBuf.java:357)
	at groovy.json.JsonOutput.writeCharSequence(JsonOutput.java:309)
	at groovy.json.JsonOutput.writeObject(JsonOutput.java:260)
	at groovy.json.JsonOutput.writeIterator(JsonOutput.java:446)
	at groovy.json.JsonOutput.writeObject(JsonOutput.java:272)
	at groovy.json.JsonOutput.toJson(JsonOutput.java:190)
	at groovy.json.JsonBuilder.toString(JsonBuilder.groovy:273)
	at groovy.json.JsonBuilder$toString.call(Unknown Source)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:45)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:112)
	at Draft.main(Draft.groovy:37)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>Groovy Version: 2.3.3 JVM: 1.8.0_05 Vendor: Oracle Corporation OS: Linux&lt;br/&gt;
java version &amp;quot;1.8.0_05&amp;quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.8.0_05-b13)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 25.5-b02, mixed mode)&lt;br/&gt;
</environment>
        <key id="12813429">GROOVY-6937</key>
            <summary>JSon serialization with unicode characters fail</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="guillaume">Guillaume Sauthier</assignee>
                                    <reporter username="kha">Mathieu Carbou</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Jul 2014 11:09:35 +0000</created>
                <updated>Sat, 26 Jul 2014 01:44:23 +0000</updated>
                            <resolved>Fri, 25 Jul 2014 03:29:55 +0000</resolved>
                                    <version>2.3.1</version>
                    <version>2.3.2</version>
                    <version>2.3.3</version>
                    <version>2.3.4</version>
                                    <fixVersion>2.3.5</fixVersion>
                    <fixVersion>2.4.0-beta-2</fixVersion>
                                    <component>JSON</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14476126" author="kha" created="Thu, 10 Jul 2014 11:10:05 +0000"  >&lt;p&gt;It is perhaps related to issue  &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-6852&quot; title=&quot;groovy.json.JsonOutput throws ArrayIndexOutOfBoundsException when serializing some Strings that contain a high percentage of non-ASCII characters.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-6852&quot;&gt;&lt;del&gt;GROOVY-6852&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14476115" author="kha" created="Thu, 10 Jul 2014 11:12:47 +0000"  >&lt;p&gt;Attched fiel containing the right code with unicode characters&lt;/p&gt;</comment>
                            <comment id="14476174" author="kha" created="Thu, 10 Jul 2014 11:34:05 +0000"  >&lt;p&gt;By removing the condition for unicode chars (c &amp;gt; 126) I was able to output json string correctly and also without escapes.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; hasAnyJSONControlOrUnicodeChars(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; c) {
        &lt;span class=&quot;code-comment&quot;&gt;/* Anything less than space is a control character. */&lt;/span&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (c &amp;lt; 30) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
        &lt;span class=&quot;code-comment&quot;&gt;/* 34 is &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; quote. */&lt;/span&gt;
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (c == 34) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (c == 92) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (c &amp;lt; &lt;span class=&quot;code-quote&quot;&gt;&apos; &apos;&lt;/span&gt;) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14476147" author="richardhightower" created="Mon, 21 Jul 2014 14:35:18 +0000"  >&lt;p&gt;So are you suggesting that as the patch?&lt;/p&gt;</comment>
                            <comment id="14476248" author="richardhightower" created="Mon, 21 Jul 2014 14:47:10 +0000"  >&lt;p&gt;I tried it with Boon. Reproduce the error with boon. Tried the patch. It works. &lt;/p&gt;

&lt;p&gt;I am not sure that is the right thing or not. It seems that I limited Boon to encode everything that was not ASCII as /u..... In retrospect, not a great idea.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://upload.wikimedia.org/wikipedia/commons/1/1b/ASCII-Table-wide.svg&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://upload.wikimedia.org/wikipedia/commons/1/1b/ASCII-Table-wide.svg&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://www.biega.com/Special-EE.gif&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.biega.com/Special-EE.gif&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thinking about this.&lt;/p&gt;</comment>
                            <comment id="14476242" author="kha" created="Mon, 21 Jul 2014 14:48:03 +0000"  >&lt;p&gt;Not at all because I didn&apos;t run any unit test and did not check if it has some impacts elsewhere.&lt;/p&gt;

&lt;p&gt;But it seems to work fine for us. We just wanted unicode characters to be treated like other characters and not like special ones.&lt;/p&gt;

&lt;p&gt;Since you are the original author, I&apos;ll let you have the final word concerning whether this a good modification or not. At least if not, it would be nice to have a flag to control the serialization process and not escape unicode characters &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12723243" name="test.groovy" size="277" author="kha" created="Thu, 10 Jul 2014 11:12:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 18 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2c1zj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>