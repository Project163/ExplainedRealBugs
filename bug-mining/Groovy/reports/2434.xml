<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:37:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-6508]  Outer class property dispatcher called by an inner class&apos;s propertyMissing looks for attributes/fields rather than properties on the outer class</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-6508</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Appears to affect all versions such the introduction of inner classes in 1.7.&lt;/p&gt;

&lt;p&gt;I have a unit test and bugfix and a pull request will be forthcoming.&lt;/p&gt;

&lt;p&gt;Consider the following: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;BaseFieldBearer {
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; baseField = &lt;span class=&quot;code-quote&quot;&gt;&apos;baseValue&apos;&lt;/span&gt;    
}

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;BaseFieldBearerSub &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; BaseFieldBearer {

    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getBaseFieldViaInner() {
        &lt;span class=&quot;code-comment&quot;&gt;// An easy way to create an &lt;span class=&quot;code-keyword&quot;&gt;inner&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;and have it resolve something
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; java.util.concurrent.Callable&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;() {
            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; call() {                
                baseField
            }
        }.call();
    }
}

BaseFieldBearerSub s = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BaseFieldBearerSub()
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; s.baseFieldViaInner == s.baseField
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;BaseFieldBearerSub.baseFieldViaInner will fail with the following:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception in thread &quot;main&quot; groovy.lang.MissingFieldException: No such field: baseField for class: BaseFieldBearerSub
        at groovy.lang.MetaClassImpl.getAttribute(MetaClassImpl.java:2628)
        at groovy.lang.MetaClassImpl.getAttribute(MetaClassImpl.java:3466)
        at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.getGroovyObjectField(ScriptBytecodeAdapter.java:352)
        at BaseFieldBearerSub.this$dist$get$2(GroovyXXXBug.groovy)
        at BaseFieldBearerSub$1.propertyMissing(GroovyXXXBug.groovy)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
        at groovy.lang.MetaClassImpl.invokeMissingProperty(MetaClassImpl.java:778)
        at groovy.lang.MetaClassImpl$12.getProperty(MetaClassImpl.java:1896)
        at org.codehaus.groovy.runtime.callsite.GetEffectivePogoPropertySite.getProperty(GetEffectivePogoPropertySite.java:84)
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callGroovyObjectGetProperty(AbstractCallSite.java:231)
        at BaseFieldBearerSub$1.call(GroovyXXXBug.groovy:32)
        at BaseFieldBearerSub$1.call(GroovyXXXBug.groovy)
        at java_util_concurrent_Callable$call.call(Unknown Source)
        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:45)
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:112)
        at BaseFieldBearerSub.getBaseFieldViaInner(GroovyXXXBug.groovy:30)
        at BaseFieldBearerSub$getBaseFieldViaInner.call(Unknown Source)
        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:45)
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:112)
        at GroovyXXXBug.testInnerClassAccessingBaseFieldProperty(GroovyXXXBug.groovy:11)
        at GroovyXXXBug$testInnerClassAccessingBaseFieldProperty.call(Unknown Source)
        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:45)
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:112)
        at GroovyXXXBug.main(GroovyXXXBug.groovy:17)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;BaseFieldBearerSub.this$dist$get$2 is a dispatcher method that&apos;s meant to resolve a named property in the outer class, but instead of using ScriptBytecodeAdapter.getGroovyObjectProperty it calls ScriptBytecodeAdapter.getGroovyObjectField. If baseField were a property in the subclass then this would normally go unnoticed, as the attribute would be found (though any property getter method would be ignored). I expect that&apos;s why I couldn&apos;t find other references to this bug. &lt;/p&gt;

&lt;p&gt;The code at fault appears to be in InnerClassVisitorHelper as the dispatcher method uses an AttributeExpression instead of a PropertyExpression. I can&apos;t imagine there&apos;s any reason for the dispatcher to only consider attributes rather than properties, but I&apos;m open to being corrected!&lt;/p&gt;</description>
                <environment></environment>
        <key id="12818274">GROOVY-6508</key>
            <summary> Outer class property dispatcher called by an inner class&apos;s propertyMissing looks for attributes/fields rather than properties on the outer class</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blackdrag">Jochen Theodorou</assignee>
                                    <reporter username="lujke">Luke Kirby</reporter>
                        <labels>
                    </labels>
                <created>Sun, 29 Dec 2013 14:28:52 +0000</created>
                <updated>Thu, 15 Oct 2015 18:19:57 +0000</updated>
                            <resolved>Thu, 2 Jan 2014 10:03:11 +0000</resolved>
                                                    <fixVersion>2.2.2</fixVersion>
                                    <component>ast builder</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14475306" author="lujke" created="Sun, 29 Dec 2013 15:07:53 +0000"  >&lt;p&gt;Issued pull request for fix and bugtest: &lt;a href=&quot;https://github.com/groovy/groovy-core/pull/301&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/groovy/groovy-core/pull/301&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14475246" author="blackdrag" created="Thu, 2 Jan 2014 10:03:11 +0000"  >&lt;p&gt;pull request applied. In 2.2 and 2.3 a modification of ComplexCommandSupport was needed though&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12722400" name="GroovyOuterClassPropertyDispatcherBug.groovy" size="1624" author="lujke" created="Sun, 29 Dec 2013 14:28:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 46 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2cnp3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>