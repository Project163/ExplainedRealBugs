<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:22:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-10750] Compiler does not resolve compile-time constants in string concatenation</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-10750</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;This appears to be the same behavior marked as fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-9855&quot; title=&quot;Compiler does not resolve compile-time constants in string concatenation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-9855&quot;&gt;&lt;del&gt;GROOVY-9855&lt;/del&gt;&lt;/a&gt;. In a Groovy 4.0.4 compilation, this code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@CompileStatic
@RequestMapping(path = FooController.BASE_URL)
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;FooController {
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; BASE_URL = &lt;span class=&quot;code-quote&quot;&gt;&apos;/foos&apos;&lt;/span&gt;
}

@CompileStatic
@RequestMapping(path = FooBarController.BASE_URL)
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;FooBarController {
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; BASE_URL = FooController.BASE_URL + &lt;span class=&quot;code-quote&quot;&gt;&apos;/{fooId}/bars&apos;&lt;/span&gt;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;succeeds for FooController, but FooBarController produces a pair of errors:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
FooBarController.groovy: 20: Expected &lt;span class=&quot;code-quote&quot;&gt;&apos;com.example.FooBarController.BASE_URL&apos;&lt;/span&gt; to be an inline constant of type java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; not a property expression in @org.springframework.web.bind.annotation.RequestMapping
FooBarController.groovy: 20: Attribute &lt;span class=&quot;code-quote&quot;&gt;&apos;path&apos;&lt;/span&gt; should have type &lt;span class=&quot;code-quote&quot;&gt;&apos;java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&apos;&lt;/span&gt;; but found type &lt;span class=&quot;code-quote&quot;&gt;&apos;java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&apos;&lt;/span&gt; in @org.springframework.web.bind.annotation.RequestMapping
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13480171">GROOVY-10750</key>
            <summary>Compiler does not resolve compile-time constants in string concatenation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="chrylis">Christopher Smith</reporter>
                        <labels>
                    </labels>
                <created>Mon, 5 Sep 2022 18:48:36 +0000</created>
                <updated>Wed, 25 Oct 2023 16:00:30 +0000</updated>
                            <resolved>Sun, 30 Jul 2023 21:39:54 +0000</resolved>
                                    <version>4.0.4</version>
                    <version>4.0.6</version>
                                    <fixVersion>5.0.0-alpha-1</fixVersion>
                    <fixVersion>4.0.16</fixVersion>
                                    <component>Static compilation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17600522" author="emilles" created="Mon, 5 Sep 2022 21:25:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-9855&quot; title=&quot;Compiler does not resolve compile-time constants in string concatenation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-9855&quot;&gt;&lt;del&gt;GROOVY-9855&lt;/del&gt;&lt;/a&gt; refers to a single substitution. In this case, your expected constant value references another constant that requires inlining. &lt;/p&gt;</comment>
                            <comment id="17609251" author="emilles" created="Sun, 25 Sep 2022 21:22:39 +0000"  >&lt;p&gt;If it&apos;s any help, you can do this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
@CompileStatic
@RequestMapping(path = FooController.BASE_URL)
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;FooController {
  public static final &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; BASE_URL = &lt;span class=&quot;code-quote&quot;&gt;&apos;/foos&apos;&lt;/span&gt;
}
@CompileStatic
@RequestMapping(path = FooController.BASE_URL + FooBarController.BASE_URL)
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;FooBarController {
  public static final &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; BASE_URL = &lt;span class=&quot;code-quote&quot;&gt;&apos;/{fooId}/bars&apos;&lt;/span&gt;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;At the time the annotation is processed by &lt;tt&gt;ResolveVisitor&lt;/tt&gt;, the fields have not been processed, so &quot;public static final String BASE_URL = FooController.BASE_URL + &apos;/{fooId}/bars&apos;&quot; still has &quot;FooController&quot; as a variable expression.&lt;/p&gt;</comment>
                            <comment id="17645026" author="chrylis" created="Thu, 8 Dec 2022 23:10:50 +0000"  >&lt;p&gt;For some reason I had thought this was fixed (and it works in at least some circumstances), but I just got tripped up by it again. Is this likely to be resolvable in 4.x? I certainly understand difficulties if inference is involved, but in cases where I can affirmatively declare &lt;tt&gt;public static final String&lt;/tt&gt;, it would be nice for annotations to compile.&lt;/p&gt;

&lt;p&gt;&lt;del&gt;Specifically, it appears that references to external string constants defined &lt;em&gt;on a Groovy interface&lt;/em&gt; (but in a different jar) work fine, but references to identically shaped constants on a Java interface produce this error.&lt;/del&gt; The error message was appearing in a different place from where I expected but is present in both cases.&lt;/p&gt;</comment>
                            <comment id="17748968" author="emilles" created="Sun, 30 Jul 2023 21:39:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/commit/9f64c9df13418290b0183a20aabb212aac3b3757&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/9f64c9df13418290b0183a20aabb212aac3b3757&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13551090">GROOVY-11179</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13555380">GROOVY-11206</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 15 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z18btc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>