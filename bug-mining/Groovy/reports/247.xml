<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:57:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-1190] error running groovyc from ant</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-1190</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Our groovy project compiles on JSR-03 and fails to compile on JSR-04. Below are the details.&lt;/p&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-1&quot; title=&quot;method call invocation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-1&quot;&gt;&lt;del&gt;GROOVY-1&lt;/del&gt;&lt;/a&gt;.0-JSR-03&lt;br/&gt;
-----------------------------------------------&lt;br/&gt;
environment:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;no groovy files in the ANT_HOME/lib&lt;/li&gt;
	&lt;li&gt;no groovy jars on the default classpath&lt;/li&gt;
	&lt;li&gt;all files groovy-1.0-jsr-03/lib reside in project ${dir.lib}&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;excerpts from ant file:&lt;br/&gt;
&amp;lt;path id=&quot;project.classpath&quot;&amp;gt;&lt;br/&gt;
	&amp;lt;!-- include the classes in this project --&amp;gt;&lt;br/&gt;
	&amp;lt;pathelement location=&quot;${dir.build}&quot;/&amp;gt;&lt;br/&gt;
	&amp;lt;pathelement location=&quot;${dir.src}&quot;/&amp;gt;&lt;br/&gt;
	&amp;lt;!-- include external libraries --&amp;gt;&lt;br/&gt;
	&amp;lt;fileset dir=&quot;${dir.lib}&quot; includes=&quot;*&lt;b&gt;/&lt;/b&gt;.jar&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/path&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;taskdef name=&quot;groovyc&quot;	classpathref=&quot;project.classpath&quot; classname=&quot;org.codehaus.groovy.ant.Groovyc&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;java classname=&quot;org.codehaus.groovy.ant.Groovyc&quot; fork=&quot;yes&quot; maxmemory=&quot;512m&quot;&amp;gt;&lt;br/&gt;
	&amp;lt;classpath refid=&quot;project.classpath&quot;/&amp;gt;&lt;br/&gt;
	&amp;lt;arg value=&quot;${dir.build}&quot;/&amp;gt;&lt;br/&gt;
	&amp;lt;arg value=&quot;${dir.src}&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/java&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;groovyc destdir=&quot;${dir.build}&quot; srcdir=&quot;${dir.src}&quot; classpathref=&quot;project.classpath&quot; stacktrace=&quot;true&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;With JSR-03, Everything compiles successfully running Groovyc from a java task.&lt;/p&gt;

&lt;p&gt;With JSR-03, compiling our groovy scripts with the task groovyc fails with the following error:&lt;/p&gt;

&lt;p&gt;BUILD FAILED&lt;br/&gt;
C:\gsapworkspace\GAP_RATING\build.xml:72: General error during class generation: No such class: [Lcom.mutualofomaha.gsa.gap.rating.data.AgeSlopeBean; in cast for class: com.mutualofomaha.gsa.gap.rating.calc.ltd.LtdRateCalc. At &lt;span class=&quot;error&quot;&gt;&amp;#91;256:21&amp;#93;&lt;/span&gt; C:\gsapworkspace\GAP_RATING\src\com\mutualofomaha\gsa\gap\rating\calc\ltd\LtdRateCalc.groovy&lt;/p&gt;

&lt;p&gt;groovy.lang.MissingClassException: No such class: [Lcom.mutualofomaha.gsa.gap.rating.data.AgeSlopeBean; in cast for class: com.mutualofomaha.gsa.gap.rating.calc.ltd.LtdRateCalc. At &lt;span class=&quot;error&quot;&gt;&amp;#91;256:21&amp;#93;&lt;/span&gt; C:\gsapworkspace\GAP_RATING\src\com\mutualofomaha\gsa\gap\rating\calc\ltd\LtdRateCalc.groovy&lt;br/&gt;
	at org.codehaus.groovy.classgen.AsmClassGenerator.checkValidType(AsmClassGenerator.java:4837)&lt;br/&gt;
	at org.codehaus.groovy.classgen.AsmClassGenerator.visitCastExpression(AsmClassGenerator.java:1885)&lt;br/&gt;
	at org.codehaus.groovy.ast.expr.CastExpression.visit(CastExpression.java:97)&lt;br/&gt;
	at org.codehaus.groovy.classgen.AsmClassGenerator.visitAndAutoboxBoolean(AsmClassGenerator.java:4273)&lt;br/&gt;
	at org.codehaus.groovy.classgen.AsmClassGenerator.evaluateEqual(AsmClassGenerator.java:4117)&lt;br/&gt;
	at org.codehaus.groovy.classgen.AsmClassGenerator.visitBinaryExpression(AsmClassGenerator.java:1154)&lt;br/&gt;
	at org.codehaus.groovy.ast.expr.BinaryExpression.visit(BinaryExpression.java:343)&lt;br/&gt;
	at org.codehaus.groovy.classgen.AsmClassGenerator.visitAndAutoboxBoolean(AsmClassGenerator.java:4273)&lt;br/&gt;
	at org.codehaus.groovy.classgen.AsmClassGenerator.visitExpressionStatement(AsmClassGenerator.java:1140)&lt;br/&gt;
	at org.codehaus.groovy.ast.stmt.ExpressionStatement.visit(ExpressionStatement.java:70)&lt;br/&gt;
	at org.codehaus.groovy.ast.CodeVisitorSupport.visitBlockStatement(CodeVisitorSupport.java:83)&lt;br/&gt;
	at org.codehaus.groovy.ast.stmt.BlockStatement.visit(BlockStatement.java:79)&lt;br/&gt;
	at org.codehaus.groovy.classgen.AsmClassGenerator.visitMethod(AsmClassGenerator.java:401)&lt;br/&gt;
	at org.codehaus.groovy.ast.ClassNode.visitContents(ClassNode.java:808)&lt;br/&gt;
	at org.codehaus.groovy.classgen.AsmClassGenerator.visitClass(AsmClassGenerator.java:297)&lt;br/&gt;
	at org.codehaus.groovy.control.CompilationUnit$5.call(CompilationUnit.java:610)&lt;br/&gt;
	at org.codehaus.groovy.control.CompilationUnit.applyToPrimaryClassNodes(CompilationUnit.java:840)&lt;br/&gt;
	at org.codehaus.groovy.control.CompilationUnit.classgen(CompilationUnit.java:556)&lt;br/&gt;
	at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:461)&lt;br/&gt;
	at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:423)&lt;br/&gt;
	at org.codehaus.groovy.ant.Groovyc.compile(Groovyc.java:471)&lt;br/&gt;
	at org.codehaus.groovy.ant.Groovyc.execute(Groovyc.java:376)&lt;br/&gt;
	at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)&lt;br/&gt;
	at org.apache.tools.ant.Task.perform(Task.java:364)&lt;br/&gt;
	at org.apache.tools.ant.Target.execute(Target.java:341)&lt;br/&gt;
	at org.apache.tools.ant.Target.performTasks(Target.java:369)&lt;br/&gt;
	at org.apache.tools.ant.Project.executeTarget(Project.java:1214)&lt;br/&gt;
	at org.apache.tools.ant.Project.executeTargets(Project.java:1062)&lt;br/&gt;
	at org.eclipse.ant.internal.ui.antsupport.InternalAntRunner.run(InternalAntRunner.java:423)&lt;br/&gt;
	at org.eclipse.ant.internal.ui.antsupport.InternalAntRunner.main(InternalAntRunner.java:137)&lt;/p&gt;

&lt;p&gt;1 Error&lt;/p&gt;



&lt;p&gt;JSR-04&lt;br/&gt;
----------------------------------------------------------------------&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;deleted all groovy files out of our project lib&lt;/li&gt;
	&lt;li&gt;replaced all groovy jars in our project lib directory with the jars in groovy-1.0-jsr-04/lib&lt;/li&gt;
	&lt;li&gt;delete &lt;b&gt;SNAPSHOT&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;made sure there weren&apos;t any duplicate asm*.jars&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Build fails with the following trying to run Groovyc as an ant java task:&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; null&lt;/p&gt;

&lt;p&gt;     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.codehaus.groovy.ant.Groovyc.compile(Groovyc.java:480)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.codehaus.groovy.ant.Groovyc.execute(Groovyc.java:376)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.codehaus.groovy.ant.Groovyc.main(Groovyc.java:131)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; Caused by: java.lang.NullPointerException&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.objectweb.asm.Type.getInternalName(Unknown Source)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.codehaus.groovy.classgen.BytecodeHelper.getClassInternalName(BytecodeHelper.java:227)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.codehaus.groovy.classgen.BytecodeHelper.getClassInternalName(BytecodeHelper.java:223)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.codehaus.groovy.classgen.AsmClassGenerator.getStaticFieldName(AsmClassGenerator.java:1706)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.codehaus.groovy.classgen.AsmClassGenerator.visitClassExpression(AsmClassGenerator.java:2322)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.codehaus.groovy.classgen.AsmClassGenerator.doConvertAndCast(AsmClassGenerator.java:2724)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.codehaus.groovy.classgen.AsmClassGenerator.doConvertAndCast(AsmClassGenerator.java:1014)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.codehaus.groovy.classgen.AsmClassGenerator.visitCastExpression(AsmClassGenerator.java:1427)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.codehaus.groovy.ast.expr.CastExpression.visit(CastExpression.java:96)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.codehaus.groovy.classgen.AsmClassGenerator.visitAndAutoboxBoolean(AsmClassGenerator.java:2961)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12813129">GROOVY-1190</key>
            <summary>error running groovyc from ant</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blackdrag">Jochen Theodorou</assignee>
                                    <reporter username="jshickey">Scott Hickey</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Dec 2005 14:15:35 +0000</created>
                <updated>Sat, 4 Mar 2006 16:23:47 +0000</updated>
                            <resolved>Sat, 4 Mar 2006 16:23:47 +0000</resolved>
                                    <version>1.0-JSR-4</version>
                                    <fixVersion>1.0-JSR-6</fixVersion>
                                    <component>class generator</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14461711" author="blackdrag" created="Tue, 20 Dec 2005 14:19:39 +0000"  >&lt;p&gt;about the first trace:&lt;br/&gt;
checkValidType is uncommented since version 1.41, see &lt;a href=&quot;http://cvs.groovy.codehaus.org/viewrep/groovy/groovy/groovy-core/src/main/org/codehaus/groovy/classgen/AsmClassGenerator.java?r=1.58#l2314&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cvs.groovy.codehaus.org/viewrep/groovy/groovy/groovy-core/src/main/org/codehaus/groovy/classgen/AsmClassGenerator.java?r=1.58#l2314&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1.41 was the first change to ACG &lt;b&gt;after&lt;/b&gt;  JSR-03, so it seems that jsr-04 wasn&apos;t used. Looks like classpath problems&lt;/p&gt;</comment>
                            <comment id="14461673" author="jshickey" created="Tue, 20 Dec 2005 14:37:43 +0000"  >&lt;p&gt;I&apos;m sorry if I didn&apos;t make what I posted very clear. The first stack trace is from JSR-03 trying to use groovyc Ant task. The second stack trace from from JSR-04. I included both in case it might help.&lt;/p&gt;

&lt;p&gt;I should have been more concise. I couldn&apos;t get the groovyc ant task to work using JSR-03 or JSR-04. I can compile our project  with the java ant task, as described in the wiki, with  JSR-03. I cannot compile with the java ant task, as described on the wiki,  using JSR-04.&lt;/p&gt;</comment>
                            <comment id="14461800" author="blackdrag" created="Tue, 20 Dec 2005 14:58:52 +0000"  >&lt;p&gt;about trace number two:&lt;br/&gt;
ByteCodeHelper#getClassInternalName:223 is:&lt;/p&gt;

&lt;p&gt;    public static String getClassInternalName(ClassNode t){&lt;br/&gt;
    	if (t.isPrimaryClassNode())&lt;/p&gt;
{
    		return getClassInternalName(t.getName());
    	}
&lt;p&gt;        return getClassInternalName(t.getTypeClass());&lt;br/&gt;
    }&lt;/p&gt;

&lt;p&gt;or more precesly,  the return number two there. This means getTypeClass is called:&lt;/p&gt;

&lt;p&gt;    public Class getTypeClass(){&lt;br/&gt;
        Class c = redirect().clazz;&lt;br/&gt;
        if (c!=null) return c;&lt;br/&gt;
        ClassNode component = redirect().componentType;&lt;br/&gt;
        if (component!=null &amp;amp;&amp;amp; component.isResolved())&lt;/p&gt;
{
            ClassNode cn = component.makeArray();
            setRedirect(cn);
            return redirect().clazz;
        }
&lt;p&gt;        throw new GroovyBugError(&quot;ClassNode#getTypeClass for &quot;&lt;ins&gt;getName()&lt;/ins&gt;&quot; is called before the type class is set &quot;);&lt;br/&gt;
    }&lt;/p&gt;

&lt;p&gt;so what I expect is that we try to resolve an array, which means compoent is not null. Then it has to be a resolvedType or the bug error would have been thrown... but then makeArray hits in and does produce the missing class. So this has to mean, that the clazz returned here is not null. &lt;/p&gt;

&lt;p&gt;This leads us to BytecodeHelper.java:227&lt;/p&gt;

&lt;p&gt;    public static String getClassInternalName(Class t) &lt;/p&gt;
{
        return org.objectweb.asm.Type.getInternalName(t);
    }

&lt;p&gt;and to the code from the asm library:&lt;/p&gt;

&lt;p&gt;    public static String getInternalName(final Class c) &lt;/p&gt;
{
        return c.getName().replace(&apos;.&apos;, &apos;/&apos;);
    }

&lt;p&gt;so c has to be null, or the name returned by c... but the latter is very unlikely.  I am a bit clueless what exactly is wrong. The only possibility I see is that the ClassNode is really a primary Classnode which means that is a class that has to be compiled... or more exactly an array of that. I found an error when looking if a classnode is a primary class node if that classnode is an array. So maybe that&apos;s the reason. But I am not sure.&lt;/p&gt;

&lt;p&gt;I made this little change here:&lt;br/&gt;
&lt;a href=&quot;http://cvs.codehaus.org/changelog/groovy?cs=MAIN:blackdrag:20051220205455&amp;amp;csize=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cvs.codehaus.org/changelog/groovy?cs=MAIN:blackdrag:20051220205455&amp;amp;csize=1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;so taking the newest snapshot to test the outcome may be a good idea&lt;/p&gt;</comment>
                            <comment id="14461763" author="blackdrag" created="Thu, 2 Mar 2006 18:53:54 +0000"  >&lt;p&gt;can you please tell me what the current state of the problem here is? I think it was fixed, or not?&lt;/p&gt;</comment>
                            <comment id="14461850" author="jshickey" created="Thu, 2 Mar 2006 23:47:07 +0000"  >&lt;p&gt;It is fixed, thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 years, 39 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2cf7r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>