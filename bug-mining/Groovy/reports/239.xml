<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:57:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-1128] [].asSynchronized() &lt;&lt; 1 fails</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-1128</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;[].asSynchronized() &amp;lt;&amp;lt; 1&lt;br/&gt;
fails.&lt;br/&gt;
Generally, asSynchronized() and asImmutable() render Objects&lt;br/&gt;
almost unusable from the GDK point of view because of the returned type&lt;/p&gt;</description>
                <environment></environment>
        <key id="12813092">GROOVY-1128</key>
            <summary>[].asSynchronized() &lt;&lt; 1 fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blackdrag">Jochen Theodorou</assignee>
                                    <reporter username="codevise">Dierk K&#246;nig</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Nov 2005 15:59:55 +0000</created>
                <updated>Fri, 17 Nov 2006 04:45:42 +0000</updated>
                            <resolved>Thu, 16 Nov 2006 15:38:58 +0000</resolved>
                                    <version>1.0-JSR-3</version>
                                    <fixVersion>1.0-RC-1</fixVersion>
                                    <component>groovy-jdk</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14461480" author="guillaume" created="Sun, 6 Nov 2005 04:21:09 +0000"  >&lt;p&gt;I just tried this statement in a shell and it works here.&lt;br/&gt;
What&apos;s wrong with it?&lt;/p&gt;</comment>
                            <comment id="14461599" author="codevise" created="Sun, 6 Nov 2005 04:53:45 +0000"  >&lt;p&gt;The issue seems to have gone.&lt;br/&gt;
There was a time when the returned&lt;br/&gt;
java.util.Collections$SynchronizedCollection&lt;br/&gt;
didn&apos;t work where the GDK expects a Collection.&lt;/p&gt;

&lt;p&gt;Anyway some test for the above wouldn&apos;t be bad...&lt;/p&gt;</comment>
                            <comment id="14461541" author="codevise" created="Sun, 6 Nov 2005 05:06:23 +0000"  >&lt;p&gt;by trying to write the proposed test I came across&lt;/p&gt;

&lt;p&gt;groovy&amp;gt; assert []==([].asSynchronized())&lt;br/&gt;
groovy&amp;gt; go&lt;br/&gt;
Caught: java.lang.AssertionError: Expression: ([] == [].asSynchronized())&lt;br/&gt;
        at CommandLine.run(CommandLine.groovy:1)&lt;/p&gt;
</comment>
                            <comment id="14461658" author="codevise" created="Sun, 6 Nov 2005 05:17:41 +0000"  >&lt;p&gt;added to groovy.ListTest.groovy:&lt;/p&gt;

&lt;p&gt;    void disabled_testAsSynchronized() &lt;/p&gt;
{
        def synclist = [].asSynchronized() &amp;lt;&amp;lt; 1
        assert synclist == [1]
    }

&lt;p&gt;    void disabled_testAsImmutable() &lt;/p&gt;
{
        def immlist = [1,2,3].asImmutable()
        assert immlist == [1,2,3]
        def testlist = [&apos;a&apos;,&apos;b&apos;,&apos;c&apos;,&apos;d&apos;,&apos;e&apos;]
        assert testlist[immlist] == [&apos;b&apos;,&apos;c&apos;,&apos;d&apos;]
        assert immlist[0] == 1                      // getAt() doesn&apos;t work !!
    }

&lt;p&gt;Note: Map are likely to have the same problem !!&lt;/p&gt;</comment>
                            <comment id="14461670" author="alang" created="Sat, 17 Dec 2005 00:27:17 +0000"  >&lt;p&gt;This root cause seems to be the current method resolution logic.&lt;/p&gt;

&lt;p&gt;groovy&amp;gt; println ([].asSynchronized().class)&lt;/p&gt;

&lt;p&gt;Gives:&lt;/p&gt;

&lt;p&gt;class java.util.Collections$SynchronizedCollection&lt;/p&gt;

&lt;p&gt;In DefaultGroovyMethods, we have both:&lt;/p&gt;

&lt;p&gt;1. public static Collection asSynchronized(Collection self) &lt;br/&gt;
2. public static List asSynchronized(List self) &lt;/p&gt;

&lt;p&gt;[].asSynchronized() will never compare equal to [] because Collections$SynchronizedCollection has no &quot;equals()&quot; method, and ArrayList.equals() requires its argument to be another list.&lt;/p&gt;</comment>
                            <comment id="14462264" author="blackdrag" created="Thu, 16 Nov 2006 15:38:58 +0000"  >&lt;p&gt;the rework of the method finding process made this work. fixed.&lt;/p&gt;</comment>
                            <comment id="14462181" author="codevise" created="Thu, 16 Nov 2006 16:20:42 +0000"  >&lt;p&gt;Did you uncomment the respective test cases?&lt;/p&gt;

&lt;p&gt;ciao&lt;br/&gt;
Dierk&lt;/p&gt;</comment>
                            <comment id="14462213" author="blackdrag" created="Fri, 17 Nov 2006 04:45:42 +0000"  >&lt;p&gt;not yet, I will do that sunday. If the test fails I will fix it right away or reopen the bug&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2crof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>