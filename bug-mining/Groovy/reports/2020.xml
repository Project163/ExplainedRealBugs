<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:30:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-5738] The if(instanceof) block is not inferring type in a Closure</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-5738</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;I expect these classes to be compiled but it won&apos;t.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.*

@CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Greeting &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Serializable {
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; who
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.*

@CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;GreetingActor {

  def receive = {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(it &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; Greeting) {
        println &lt;span class=&quot;code-quote&quot;&gt;&quot;Hello ${it.who}&quot;&lt;/span&gt;
    }
  }

}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The type of variable &quot;it&quot; in the Closure receive should be inferred as type Greeting. To reproduce call&lt;/p&gt;

&lt;p&gt;$ groovyc Greeting.groovy GreetingActor.groovy&lt;/p&gt;

&lt;p&gt;Thank you.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12816542">GROOVY-5738</key>
            <summary>The if(instanceof) block is not inferring type in a Closure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="melix">C&#233;dric Champeau</assignee>
                                    <reporter username="chanwit">Chanwit Kaewkasi</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Oct 2012 09:45:37 +0000</created>
                <updated>Sat, 22 Dec 2012 01:10:52 +0000</updated>
                            <resolved>Thu, 29 Nov 2012 03:34:29 +0000</resolved>
                                    <version>2.0.4</version>
                                    <fixVersion>2.1.0-beta-1</fixVersion>
                                    <component>Static compilation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14473301" author="chanwit" created="Tue, 2 Oct 2012 09:47:43 +0000"  >&lt;p&gt;It&apos;s quite a show-stopper when trying to use Groovy2 with Akka &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14473456" author="melix" created="Wed, 21 Nov 2012 12:21:40 +0000"  >&lt;p&gt;Actually, there&apos;s something wrong with the example, because the &lt;tt&gt;it&lt;/tt&gt; in the &lt;tt&gt;instanceof&lt;/tt&gt; line is not the same as the &lt;tt&gt;it&lt;/tt&gt; in the closure. This is something very special with Groovy that makes a special scope resolution in that case. As a workaround, you can do:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;GreetingActor {

  def receive = {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(it &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; Greeting) {
        println &lt;span class=&quot;code-quote&quot;&gt;&quot;Hello ${Greeting g -&amp;gt; g.who}&quot;&lt;/span&gt;
    }
  }

}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14473552" author="chanwit" created="Wed, 28 Nov 2012 08:01:31 +0000"  >&lt;p&gt;Hi Cedric,&lt;/p&gt;

&lt;p&gt;Thank you for looking into this issue.&lt;/p&gt;

&lt;p&gt;Your comment above is a bit incorrect. I expected that &lt;tt&gt;it&lt;/tt&gt; in the &lt;tt&gt;instanceof&lt;/tt&gt; is the same one down there. What you&apos;ve missed here is that &lt;tt&gt;it&lt;/tt&gt; in &lt;tt&gt;println&lt;/tt&gt; is nothing related to a Closure. The expression a Groovy String interpolation.&lt;/p&gt;</comment>
                            <comment id="14473460" author="melix" created="Wed, 28 Nov 2012 09:05:18 +0000"  >&lt;p&gt;mmm yes, and my workaround is far from being one, it cannot work at all. I need new brain cells &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 51 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2c1u7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>