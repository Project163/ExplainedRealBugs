<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:59:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-8797] VariableScopeVisitor.getPropertyName does not check for &quot;isser&quot; style method</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-8797</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Consider the following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;C {
  &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; getFoo() {}
  &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isBar() {}
  void setBaz(val) {}
  void method() {
    foo
    bar
    baz
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;tt&gt;VariableScopeVisitor&lt;/tt&gt; returns a &lt;tt&gt;PropertyNode&lt;/tt&gt; from &lt;tt&gt;findClassMember&lt;/tt&gt; for &lt;tt&gt;foo&lt;/tt&gt; and &lt;tt&gt;baz&lt;/tt&gt;.  However, the &lt;tt&gt;bar&lt;/tt&gt; reference is seen as a &lt;tt&gt;MethodNode&lt;/tt&gt;.  &lt;tt&gt;VariableScopeVisitor.getPropertyName&lt;/tt&gt; only checks for &quot;get&quot; and &quot;set&quot;.  Could it check for &quot;is&quot; and &lt;tt&gt;boolean&lt;/tt&gt; return?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13185332">GROOVY-8797</key>
            <summary>VariableScopeVisitor.getPropertyName does not check for &quot;isser&quot; style method</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="emilles">Eric Milles</reporter>
                        <labels>
                    </labels>
                <created>Sat, 15 Sep 2018 18:22:08 +0000</created>
                <updated>Thu, 13 Dec 2018 10:05:33 +0000</updated>
                            <resolved>Sun, 16 Sep 2018 06:39:52 +0000</resolved>
                                    <version>2.4.15</version>
                    <version>3.0.0-alpha-3</version>
                    <version>2.5.2</version>
                                    <fixVersion>3.0.0-alpha-4</fixVersion>
                    <fixVersion>2.5.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16616450" author="emilles" created="Sat, 15 Sep 2018 18:42:36 +0000"  >&lt;p&gt;One use case for this is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;C {
  static &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; getFoo() {}
  static &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isBar() {}
  static void setBaz(to) {}
  static void main(args) {
    foo
    bar &lt;span class=&quot;code-comment&quot;&gt;// compiler error without property fix: &lt;span class=&quot;code-quote&quot;&gt;&quot;Apparent variable &lt;span class=&quot;code-quote&quot;&gt;&apos;bar&apos;&lt;/span&gt; was found &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; a static scope but doesn&apos;t refer to a local variable, static field or class.&quot;&lt;/span&gt;
&lt;/span&gt;    baz = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here is my new version of &lt;tt&gt;getPropertyName&lt;/tt&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getPropertyName(MethodNode m) {
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name = m.getName();
        /* GRECLIPSE edit
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!(name.startsWith(&lt;span class=&quot;code-quote&quot;&gt;&quot;set&quot;&lt;/span&gt;) || name.startsWith(&lt;span class=&quot;code-quote&quot;&gt;&quot;get&quot;&lt;/span&gt;))) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; pname = name.substring(3);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (pname.length() == 0) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        pname = java.beans.Introspector.decapitalize(pname);

        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (name.startsWith(&lt;span class=&quot;code-quote&quot;&gt;&quot;get&quot;&lt;/span&gt;) &amp;amp;&amp;amp; (m.getReturnType() == ClassHelper.VOID_TYPE || m.getParameters().length != 0)) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        }
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (name.startsWith(&lt;span class=&quot;code-quote&quot;&gt;&quot;set&quot;&lt;/span&gt;) &amp;amp;&amp;amp; m.getParameters().length != 1) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; pname;
        */
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (name.startsWith(&lt;span class=&quot;code-quote&quot;&gt;&quot;set&quot;&lt;/span&gt;) || name.startsWith(&lt;span class=&quot;code-quote&quot;&gt;&quot;get&quot;&lt;/span&gt;) || name.startsWith(&lt;span class=&quot;code-quote&quot;&gt;&quot;is&quot;&lt;/span&gt;)) {
            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; pname = decapitalize(name.substring(name.startsWith(&lt;span class=&quot;code-quote&quot;&gt;&quot;is&quot;&lt;/span&gt;) ? 2 : 3));
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!pname.isEmpty()) {
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (name.startsWith(&lt;span class=&quot;code-quote&quot;&gt;&quot;set&quot;&lt;/span&gt;)) {
                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (m.getParameters().length == 1) {
                        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; pname;
                    }
                } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (m.getParameters().length == 0 &amp;amp;&amp;amp; !ClassHelper.VOID_TYPE.equals(m.getReturnType())) {
                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (name.startsWith(&lt;span class=&quot;code-quote&quot;&gt;&quot;get&quot;&lt;/span&gt;) || ClassHelper.boolean_TYPE.equals(m.getReturnType())) {
                        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; pname;
                    }
                }
            }
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16616473" author="emilles" created="Sat, 15 Sep 2018 19:07:30 +0000"  >&lt;p&gt;Also, &lt;tt&gt;findClassMember&lt;/tt&gt; could set the correct type of the property, set the declaring class of the property, and indicate the fact that there isn&apos;t really a field.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Variable findClassMember(ClassNode cn, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (cn == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (cn.isScript()) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DynamicVariable(name, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
        }

        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (FieldNode fn : cn.getFields()) {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (fn.getName().equals(name)) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; fn;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (MethodNode mn : cn.getMethods()) {
            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; pName = getPropertyName(mn);
            &lt;span class=&quot;code-comment&quot;&gt;// GRECLIPSE edit
&lt;/span&gt;            &lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (pName != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; pName.equals(name))
&lt;/span&gt;            &lt;span class=&quot;code-comment&quot;&gt;//    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PropertyNode(pName, mn.getModifiers(), ClassHelper.OBJECT_TYPE, cn, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (name.equals(pName)) {
                PropertyNode property = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PropertyNode(name, mn.getModifiers(), getPropertyType(mn), cn, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
                property.getField().setHasNoRealSourcePosition(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;); property.getField().setSynthetic(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
                property.getField().setDeclaringClass(cn);
                property.setDeclaringClass(cn);
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; property;
            }
            &lt;span class=&quot;code-comment&quot;&gt;// GRECLIPSE end
&lt;/span&gt;        }
        ...
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getPropertyName(MethodNode m) {
        ...
    }

    &lt;span class=&quot;code-comment&quot;&gt;// GRECLIPSE add
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; ClassNode getPropertyType(MethodNode m) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ClassHelper.VOID_TYPE.equals(m.getReturnType())) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; m.getParameters()[0].getType();
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; m.getReturnType();
    }
    &lt;span class=&quot;code-comment&quot;&gt;// GRECLIPSE end&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16616610" author="paulk" created="Sun, 16 Sep 2018 06:39:52 +0000"  >&lt;p&gt;Merged, thanks. For your suggested &lt;tt&gt;findClassMember&lt;/tt&gt; improvement I was unable to set the type of the property but I did the other changes. For the type, it won&apos;t be accurate for non-JavaBean set multi-methods, e.g. &lt;tt&gt;setContentView&lt;/tt&gt; in the following test:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/blob/master/src/test/groovy/transform/stc/FieldsAndPropertiesSTCTest.groovy#L638&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/blob/master/src/test/groovy/transform/stc/FieldsAndPropertiesSTCTest.groovy#L638&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16618207" author="emilles" created="Mon, 17 Sep 2018 22:07:12 +0000"  >&lt;p&gt;Thanks for the quick merge.  Regarding your test case of overloads, is it possible for the method-property loop to continue checking methods looking for a better match?  Or is that unneeded for proper compilation?  In the IDE it manifests as hover information that always refers to the first overload.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 9 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3y4qv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>