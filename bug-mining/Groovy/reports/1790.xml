<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:26:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-5111] Named parameter support breaks with postgres casting syntax</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-5111</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Postgres supports a casting syntax like &quot;SELECT &apos;2011-01-01&apos;::date&quot;. I recently wrote a query like: &quot;SELECT * FROM table WHERE my_date BETWEEN ?-&apos;1 week&apos;::interval AND ?&quot; and was surprised to receive strange errors about java.sql.Date not supporting the &quot;interval&quot; property. It would appear that the regex parsing that identifies named parameters is a bit broken in this instance.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12815972">GROOVY-5111</key>
            <summary>Named parameter support breaks with postgres casting syntax</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="hollandlef">Lucian Holland</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Nov 2011 11:58:13 +0000</created>
                <updated>Fri, 15 Jun 2012 22:56:18 +0000</updated>
                            <resolved>Sat, 12 May 2012 06:10:58 +0000</resolved>
                                    <version>1.8.2</version>
                    <version>1.8.6</version>
                    <version>2.0-beta-3</version>
                                    <fixVersion>2.0-rc-1</fixVersion>
                    <fixVersion>1.8.7</fixVersion>
                                    <component>SQL processing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14472843" author="djsutho" created="Wed, 9 May 2012 07:59:50 +0000"  >
&lt;p&gt;In groovy.sql.Sql changing:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Pattern NAMED_QUERY_PATTERN = Pattern.compile(&lt;span class=&quot;code-quote&quot;&gt;&quot;(?::|\\?(\\d?)\\.?)(\\w*)&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Pattern NAMED_QUERY_PATTERN = Pattern.compile(&lt;span class=&quot;code-quote&quot;&gt;&quot;(?&amp;lt;!:)(:|\\?(\\d*)\\.)(\\w+)&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;should fix this problem. It matches:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;:foo 
?.bar 
?1.baz 
?12.baz 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but not:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;:
::asdf
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It does not cover the case when something that looks like a named parameter is contained in a string e.g:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;select * from some_table where description = &lt;span class=&quot;code-quote&quot;&gt;&apos;:notANamedParameter&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This case is probably hard to cover in a regex  as it must check that it is not a named parameter surrounded by strings e.g.:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&apos;:notANamedParameter&apos;&lt;/span&gt; :aNamedParameter &lt;span class=&quot;code-quote&quot;&gt;&apos;:alsoNotANamedParameter&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So while this is not a perfect solution it adds functionality without removing any (as far as I can tell).&lt;/p&gt;</comment>
                            <comment id="14479927" author="paulk" created="Thu, 10 May 2012 06:35:44 +0000"  >&lt;p&gt;@Lucian, try setting &lt;tt&gt;enableNamedQueries=false&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;@David, that looks close. We need to also support ordinal (non-named) params and we currently cover both cases with a single regex, so we need to support ?1 for instance. I have adapted your proposed solution and all tests pass - I will commit once I have a good test case.&lt;/p&gt;</comment>
                            <comment id="14472812" author="hollandlef" created="Thu, 10 May 2012 06:49:00 +0000"  >&lt;p&gt;@Paul, Thanks for the suggestion. Unfortunately it&apos;s been a while since I was working on this project and I&apos;m rather snowed under with another project in a completely different environment... I can&apos;t remember off the top of my head whether we needed named parameter support or not, but I suspect we might have been able to work around it like that...&lt;/p&gt;</comment>
                            <comment id="14479898" author="paulk" created="Sat, 12 May 2012 06:10:59 +0000"  >&lt;p&gt;changed as per the suggestion (thanks) with some minor changes&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 28 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bx0v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>