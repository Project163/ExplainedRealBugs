<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:15:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-4037] GroovyClassLoader leaves file handles open</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-4037</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;GroovyClassLoader leaves file handles open.&lt;/p&gt;

&lt;p&gt;We use Groovy scripts within an application server. On systems that protect open files with locks (e.g. Windows) this bug prevents Groovy scripts from being redeployed.&lt;/p&gt;

&lt;p&gt;The following code shows the problem:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception
{
  &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; File              l_fileScript;
  &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; GroovyClassLoader l_ldr;
  &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; GroovyCodeSource  l_cs;
  &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;?&amp;gt;          l_classScript;

  l_fileScript = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;path/to/script1944A6CADCE5EBA2BE66D50EA1D8AE36562C645E.groovy&quot;&lt;/span&gt;);

  l_ldr = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GroovyClassLoader();

  l_cs = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GroovyCodeSource(l_fileScript);

  l_cs.setCachable(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);

  l_classScript = l_ldr.parseClass(l_cs);

  &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;; &lt;span class=&quot;code-comment&quot;&gt;// set breakpoint here
&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;At the breakpoint the handle of the script file is still open.&lt;/p&gt;</description>
                <environment>any</environment>
        <key id="12815034">GROOVY-4037</key>
            <summary>GroovyClassLoader leaves file handles open</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blackdrag">Jochen Theodorou</assignee>
                                    <reporter username="veita">Alexander Veit</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Feb 2010 06:21:17 +0000</created>
                <updated>Wed, 17 Feb 2010 13:01:18 +0000</updated>
                            <resolved>Wed, 17 Feb 2010 10:03:08 +0000</resolved>
                                    <version>1.7.0</version>
                                    <fixVersion>1.7.1</fixVersion>
                                    <component>class generator</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14468949" author="blackdrag" created="Wed, 17 Feb 2010 09:09:25 +0000"  >&lt;p&gt;I tried your example on my Ubuntu system, but instead with debugging I used a extremely long sleep. I ensured before that I can use lsof to see the open file in an example that simply opens the file using a FileOutputStream. This worked. Next I treid to find the open file handle from your example, but this failed.&lt;/p&gt;

&lt;p&gt;So far it seemed that the file handle will be closed again.&lt;/p&gt;

&lt;p&gt;Then I changed the file to include an asset and suddenly the file is open. Now I know the file is reopened to make the power assert text and I guess the code to close them is missing. This means 1.6.8 is not affected by this problem too.&lt;/p&gt;</comment>
                            <comment id="14468961" author="blackdrag" created="Wed, 17 Feb 2010 10:03:08 +0000"  >&lt;p&gt;should be fixed now&lt;/p&gt;</comment>
                            <comment id="14468916" author="roshandawrani" created="Wed, 17 Feb 2010 10:14:11 +0000"  >&lt;p&gt;Jochen, know of any &quot;lsof&quot; equivalent for Windows as well?&lt;/p&gt;

&lt;p&gt;When this issue got raised, I gave it a shot, but soon got stuck due to not knowing how to check if a file handle is open or not (on my Windows box).&lt;/p&gt;</comment>
                            <comment id="14468985" author="blackdrag" created="Wed, 17 Feb 2010 13:01:18 +0000"  >&lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/questions/15708/lsof-equivalent-for-windows&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/questions/15708/lsof-equivalent-for-windows&lt;/a&gt; gives various ways to get that&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 40 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bsrz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>