<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:47:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-7465] ResourceGroovyMethods/NioGroovyMethods BOM behavior is inconsistent</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-7465</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Most users would expect &lt;tt&gt;withPrintWriter&lt;/tt&gt; to be a convenience method that behaves the same as if they had called &lt;tt&gt;new PrintWriter&lt;/tt&gt; themselves, but this is not the current behavior:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;File file = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;tmp.txt&quot;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; text = &lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt;
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; charset = &lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-16LE&quot;&lt;/span&gt;

    file.withPrintWriter(charset) { it &amp;lt;&amp;lt; text }
    println &lt;span class=&quot;code-quote&quot;&gt;&quot;withPrintWriter&quot;&lt;/span&gt;
    file.getBytes().each { &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;%02x &quot;&lt;/span&gt;, it) }

    PrintWriter w = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PrintWriter(file, charset)
    w.print(text)
    w.close()
    println &lt;span class=&quot;code-quote&quot;&gt;&quot;\n\nnew PrintWriter&quot;&lt;/span&gt;
    file.getBytes().each { &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;%02x &quot;&lt;/span&gt;, it) }
} &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
    file.delete()
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Outputs&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;withPrintWriter
ff fe 20 00 

new PrintWriter
20 00
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Additionally most users would expect that there&apos;s no difference in behavior between NIO and traditional methods, but this is also not the case&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.nio.file.Files
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.nio.file.FileSystems
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.nio.file.Path

File file = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;tmp1.txt&quot;&lt;/span&gt;)
Path path = FileSystems.getDefault().getPath(&lt;span class=&quot;code-quote&quot;&gt;&quot;tmp2.txt&quot;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; text = &lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt;
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; charset = &lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-16LE&quot;&lt;/span&gt;

    file.withPrintWriter(charset) { it &amp;lt;&amp;lt; text }
    println &lt;span class=&quot;code-quote&quot;&gt;&quot;withPrintWriter&quot;&lt;/span&gt;
    file.getBytes().each { &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;%02x &quot;&lt;/span&gt;, it) }

    path.withPrintWriter(charset) { it &amp;lt;&amp;lt; text }
    println &lt;span class=&quot;code-quote&quot;&gt;&quot;\n\nnio withPrintWriter&quot;&lt;/span&gt;
    path.getBytes().each { &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;%02x &quot;&lt;/span&gt;, it) }
} &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
    file.delete()
    Files.delete(path)
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;outputs&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;withPrintWriter
ff fe 20 00

nio withPrintWriter
20 00
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is because &lt;tt&gt;ResourceGroovyMethods&lt;/tt&gt; have a &lt;tt&gt;writeUTF16BomIfRequired&lt;/tt&gt; method that &lt;tt&gt;NioGroovyMethods&lt;/tt&gt; don&apos;t.&lt;/p&gt;

&lt;p&gt;Most likely we&apos;d want to change &lt;tt&gt;ResourceGroovyMethods&lt;/tt&gt; to not add the BOM by default, or at least allow the user to opt out of that behavior by doing something like adding a boolean argument to the existing methods that would control that behavior.  The other option would be to make the NIO methods consistent by having them also use &lt;tt&gt;writeUTF16BomIfRequired&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;This began as a &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/incubator-groovy-users/201506.mbox/browser&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;discussion&lt;/a&gt; on the user mailing list.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12837134">GROOVY-7465</key>
            <summary>ResourceGroovyMethods/NioGroovyMethods BOM behavior is inconsistent</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="keegan">Keegan Witt</assignee>
                                    <reporter username="keegan">Keegan Witt</reporter>
                        <labels>
                            <label>breaking_change</label>
                    </labels>
                <created>Thu, 11 Jun 2015 13:18:24 +0000</created>
                <updated>Tue, 2 May 2017 02:03:24 +0000</updated>
                            <resolved>Wed, 9 Dec 2015 22:45:57 +0000</resolved>
                                                    <fixVersion>2.5.0-alpha-1</fixVersion>
                                    <component>groovy-jdk</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14581928" author="keegan" created="Thu, 11 Jun 2015 13:36:49 +0000"  >&lt;p&gt;If we&apos;re good with the approach, I&apos;m willing to take a crack at a PR if you wish.&lt;/p&gt;</comment>
                            <comment id="14614339" author="keegan" created="Sun, 5 Jul 2015 18:00:30 +0000"  >&lt;p&gt;What should I put in the &lt;tt&gt;@Since&lt;/tt&gt; tag?  &lt;tt&gt;1.4.5&lt;/tt&gt;?&lt;/p&gt;</comment>
                            <comment id="14614417" author="paulk" created="Sun, 5 Jul 2015 21:53:19 +0000"  >&lt;p&gt;I forget where discussions got to wrt breaking changes, If there is a risk of breaking change I&apos;d push to 2.5 only, so &lt;tt&gt;@since 2.5.0&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="14614418" author="keegan" created="Sun, 5 Jul 2015 22:10:02 +0000"  >&lt;p&gt;We last talked about changing the default behavior, so that would be a breaking change, yes.  I&apos;ll mark for 2.5.0.  Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulk&quot; class=&quot;user-hover&quot; rel=&quot;paulk&quot;&gt;paulk&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14614419" author="keegan" created="Sun, 5 Jul 2015 22:10:17 +0000"  >&lt;p&gt;And actually it just occurred to me that we should add a boolean for whether to write the BOM even when not specifying a charset, since the system default charset might be UTF-16.&lt;/p&gt;</comment>
                            <comment id="14700733" author="keegan" created="Tue, 18 Aug 2015 04:49:24 +0000"  >&lt;p&gt;I&apos;m thinking it doesn&apos;t make sense to give the option to write the BOM when writing using an InputStream or byte array.  Does that seem reasonable?&lt;/p&gt;</comment>
                            <comment id="14986459" author="githubbot" created="Tue, 3 Nov 2015 01:29:23 +0000"  >&lt;p&gt;GitHub user keeganwitt opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/176&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/176&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7465&quot; title=&quot;ResourceGroovyMethods/NioGroovyMethods BOM behavior is inconsistent&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7465&quot;&gt;&lt;del&gt;GROOVY-7465&lt;/del&gt;&lt;/a&gt;: ResourceGroovyMethods/NioGroovyMethods BOM behavior is inconsistent&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/keeganwitt/incubator-groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/keeganwitt/incubator-groovy&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7465&quot; title=&quot;ResourceGroovyMethods/NioGroovyMethods BOM behavior is inconsistent&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7465&quot;&gt;&lt;del&gt;GROOVY-7465&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/176.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/176.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #176&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 1a900a6758805c998cfa867e9964900abcb4ebef&lt;br/&gt;
Author: Keegan Witt &amp;lt;keeganwitt@gmail.com&amp;gt;&lt;br/&gt;
Date:   2015-07-22T13:08:46Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7465&quot; title=&quot;ResourceGroovyMethods/NioGroovyMethods BOM behavior is inconsistent&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7465&quot;&gt;&lt;del&gt;GROOVY-7465&lt;/del&gt;&lt;/a&gt;: ResourceGroovyMethods/NioGroovyMethods BOM behavior is inconsistent&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14995551" author="githubbot" created="Sun, 8 Nov 2015 07:44:37 +0000"  >&lt;p&gt;Github user PascalSchumacher commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/176#discussion_r44221781&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/176#discussion_r44221781&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/main/org/codehaus/groovy/runtime/ResourceGroovyMethods.java &amp;#8212;&lt;br/&gt;
    @@ -831,9 +836,8 @@ public static File leftShift(File file, InputStream data) throws IOException {&lt;br/&gt;
         }&lt;/p&gt;

&lt;p&gt;         /**&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* Write the text to the File, using the specified encoding.  If the given&lt;/li&gt;
	&lt;li&gt;* charset is &quot;UTF-16BE&quot; or &quot;UTF-16LE&quot; (or an equivalent alias), the&lt;/li&gt;
	&lt;li&gt;* requisite byte order mark is written to the file before the text.&lt;br/&gt;
    +     * Write the text without a BOM to the File without writing a BOM, using
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    This sentence seems a bit confusing to me.&lt;/p&gt;</comment>
                            <comment id="14995552" author="githubbot" created="Sun, 8 Nov 2015 07:45:03 +0000"  >&lt;p&gt;Github user PascalSchumacher commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/176#discussion_r44221782&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/176#discussion_r44221782&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/main/org/codehaus/groovy/runtime/ResourceGroovyMethods.java &amp;#8212;&lt;br/&gt;
    @@ -1800,6 +1925,20 @@ public static BufferedWriter newWriter(File file, boolean append) throws IOExcep&lt;br/&gt;
         }&lt;/p&gt;

&lt;p&gt;         /**&lt;br/&gt;
    +     * Helper method to create a buffered writer for a file without writing a BOM.&lt;br/&gt;
    +     *&lt;br/&gt;
    +     * @param file    a File&lt;br/&gt;
    +     * @param charset the name of the encoding used to write in this file&lt;br/&gt;
    +     * @param append  true if in append mode&lt;br/&gt;
    +     * @return a BufferedWriter&lt;br/&gt;
    +     * @throws IOException if an IOException occurs.&lt;br/&gt;
    +     * @since 1.0&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    should be 2.5.0&lt;/p&gt;</comment>
                            <comment id="14995563" author="githubbot" created="Sun, 8 Nov 2015 09:00:52 +0000"  >&lt;p&gt;Github user PascalSchumacher commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/176#discussion_r44222515&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/176#discussion_r44222515&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/main/org/codehaus/groovy/runtime/ResourceGroovyMethods.java &amp;#8212;&lt;br/&gt;
    @@ -974,11 +1021,30 @@ public static void append(File self, InputStream stream) throws IOException {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@since 1.0&lt;br/&gt;
          */&lt;br/&gt;
         public static void append(File file, Object text, String charset) throws IOException 
{
    +        append(file, text, charset, false);
    +    }
&lt;p&gt;    +&lt;br/&gt;
    +    /**&lt;br/&gt;
    +     * Append the text at the end of the File, using a specified encoding.  If&lt;br/&gt;
    +     * the given charset is &quot;UTF-16BE&quot; or &quot;UTF-16LE&quot; (or an equivalent alias),&lt;br/&gt;
    +     * &amp;lt;code&amp;gt;writeBom&amp;lt;/code&amp;gt; is &amp;lt;code&amp;gt;true&amp;lt;/code&amp;gt;, and the file doesn&apos;t already&lt;br/&gt;
    +     * exist, the requisite byte order mark is written to the file before the&lt;br/&gt;
    +     * text is appended.&lt;br/&gt;
    +     *&lt;br/&gt;
    +     * @param file     a File&lt;br/&gt;
    +     * @param text     the text to append at the end of the File&lt;br/&gt;
    +     * @param charset  the charset used&lt;br/&gt;
    +     * @param writeBom whether to write a BOM&lt;br/&gt;
    +     * @throws IOException if an IOException occurs.&lt;br/&gt;
    +     * @since 2.5.0&lt;br/&gt;
    +     */&lt;br/&gt;
    +    public static void append(File file, Object text, String charset, boolean writeBom) throws IOException {&lt;br/&gt;
             Writer writer = null;&lt;br/&gt;
             try {&lt;br/&gt;
    +            boolean shouldWriteBom = writeBom &amp;amp;&amp;amp; !file.exists();&lt;br/&gt;
                 FileOutputStream out = new FileOutputStream(file, true);&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (!file.exists()) {&lt;/li&gt;
	&lt;li&gt;writeUTF16BomIfRequired(charset, out);&lt;br/&gt;
    +            if (shouldWriteBom) {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Shouldn&apos;t we keep the `!file.exists()` check?&lt;/p&gt;</comment>
                            <comment id="14995579" author="githubbot" created="Sun, 8 Nov 2015 10:15:40 +0000"  >&lt;p&gt;Github user PascalSchumacher commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/176#discussion_r44223209&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/176#discussion_r44223209&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: subprojects/groovy-nio/src/main/java/org/codehaus/groovy/runtime/NioGroovyMethods.java &amp;#8212;&lt;br/&gt;
    @@ -1540,12 +1709,33 @@ public static BufferedWriter newWriter(Path self, String charset) throws IOExcep&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@since 2.3.0&lt;br/&gt;
          */&lt;br/&gt;
         public static &amp;lt;T&amp;gt; T withWriterAppend(Path self, String charset, @ClosureParams(value = SimpleType.class, options = &quot;java.io.Writer&quot;) Closure&amp;lt;T&amp;gt; closure) throws IOException 
{
    -        return IOGroovyMethods.withWriter(newWriter(self, charset, true), closure);
    +        return withWriterAppend(self, charset, false, closure);
    +    }
&lt;p&gt;    +&lt;br/&gt;
    +    /**&lt;br/&gt;
    +     * Create a new BufferedWriter which will append to this&lt;br/&gt;
    +     * file.  The writer is passed to the closure and will be closed before&lt;br/&gt;
    +     * this method returns.  The writer will use the given charset encoding.&lt;br/&gt;
    +     * If the given charset is &quot;UTF-16BE&quot; or &quot;UTF-16LE&quot; (or an equivalent alias),&lt;br/&gt;
    +     * &amp;lt;code&amp;gt;writeBom&amp;lt;/code&amp;gt; is &amp;lt;code&amp;gt;true&amp;lt;/code&amp;gt;, and the file doesn&apos;t already exist,&lt;br/&gt;
    +     * the requisite byte order mark is written to the stream when the writer is created.&lt;br/&gt;
    +     *&lt;br/&gt;
    +     * @param self    a Path&lt;br/&gt;
    +     * @param charset the charset used&lt;br/&gt;
    +     * @param writeBom whether to write the BOM&lt;br/&gt;
    +     * @param closure a closure&lt;br/&gt;
    +     * @return the value returned by the closure&lt;br/&gt;
    +     * @throws java.io.IOException if an IOException occurs.&lt;br/&gt;
    +     * @since 2.3.0&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    should be 2.5.0&lt;/p&gt;</comment>
                            <comment id="14997799" author="githubbot" created="Tue, 10 Nov 2015 01:34:33 +0000"  >&lt;p&gt;Github user keeganwitt commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/176#discussion_r44360244&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/176#discussion_r44360244&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/main/org/codehaus/groovy/runtime/ResourceGroovyMethods.java &amp;#8212;&lt;br/&gt;
    @@ -831,9 +836,8 @@ public static File leftShift(File file, InputStream data) throws IOException {&lt;br/&gt;
         }&lt;/p&gt;

&lt;p&gt;         /**&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* Write the text to the File, using the specified encoding.  If the given&lt;/li&gt;
	&lt;li&gt;* charset is &quot;UTF-16BE&quot; or &quot;UTF-16LE&quot; (or an equivalent alias), the&lt;/li&gt;
	&lt;li&gt;* requisite byte order mark is written to the file before the text.&lt;br/&gt;
    +     * Write the text without a BOM to the File without writing a BOM, using
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Oops, copy/paste error.  Good catch.&lt;/p&gt;</comment>
                            <comment id="14997818" author="githubbot" created="Tue, 10 Nov 2015 01:44:22 +0000"  >&lt;p&gt;Github user keeganwitt commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/176#discussion_r44361018&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/176#discussion_r44361018&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/main/org/codehaus/groovy/runtime/ResourceGroovyMethods.java &amp;#8212;&lt;br/&gt;
    @@ -974,11 +1021,30 @@ public static void append(File self, InputStream stream) throws IOException {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@since 1.0&lt;br/&gt;
          */&lt;br/&gt;
         public static void append(File file, Object text, String charset) throws IOException 
{
    +        append(file, text, charset, false);
    +    }
&lt;p&gt;    +&lt;br/&gt;
    +    /**&lt;br/&gt;
    +     * Append the text at the end of the File, using a specified encoding.  If&lt;br/&gt;
    +     * the given charset is &quot;UTF-16BE&quot; or &quot;UTF-16LE&quot; (or an equivalent alias),&lt;br/&gt;
    +     * &amp;lt;code&amp;gt;writeBom&amp;lt;/code&amp;gt; is &amp;lt;code&amp;gt;true&amp;lt;/code&amp;gt;, and the file doesn&apos;t already&lt;br/&gt;
    +     * exist, the requisite byte order mark is written to the file before the&lt;br/&gt;
    +     * text is appended.&lt;br/&gt;
    +     *&lt;br/&gt;
    +     * @param file     a File&lt;br/&gt;
    +     * @param text     the text to append at the end of the File&lt;br/&gt;
    +     * @param charset  the charset used&lt;br/&gt;
    +     * @param writeBom whether to write a BOM&lt;br/&gt;
    +     * @throws IOException if an IOException occurs.&lt;br/&gt;
    +     * @since 2.5.0&lt;br/&gt;
    +     */&lt;br/&gt;
    +    public static void append(File file, Object text, String charset, boolean writeBom) throws IOException {&lt;br/&gt;
             Writer writer = null;&lt;br/&gt;
             try {&lt;br/&gt;
    +            boolean shouldWriteBom = writeBom &amp;amp;&amp;amp; !file.exists();&lt;br/&gt;
                 FileOutputStream out = new FileOutputStream(file, true);&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (!file.exists()) {&lt;/li&gt;
	&lt;li&gt;writeUTF16BomIfRequired(charset, out);&lt;br/&gt;
    +            if (shouldWriteBom) {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    The check is still there, I just pulled it out into a separate variable (`shouldWriteBom`).  I could do it without a variable, I only use it once so it&apos;s not really necessary.&lt;/p&gt;</comment>
                            <comment id="14997822" author="githubbot" created="Tue, 10 Nov 2015 01:45:56 +0000"  >&lt;p&gt;Github user keeganwitt commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/176#discussion_r44361127&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/176#discussion_r44361127&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: subprojects/groovy-nio/src/main/java/org/codehaus/groovy/runtime/NioGroovyMethods.java &amp;#8212;&lt;br/&gt;
    @@ -1540,12 +1709,33 @@ public static BufferedWriter newWriter(Path self, String charset) throws IOExcep&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@since 2.3.0&lt;br/&gt;
          */&lt;br/&gt;
         public static &amp;lt;T&amp;gt; T withWriterAppend(Path self, String charset, @ClosureParams(value = SimpleType.class, options = &quot;java.io.Writer&quot;) Closure&amp;lt;T&amp;gt; closure) throws IOException 
{
    -        return IOGroovyMethods.withWriter(newWriter(self, charset, true), closure);
    +        return withWriterAppend(self, charset, false, closure);
    +    }
&lt;p&gt;    +&lt;br/&gt;
    +    /**&lt;br/&gt;
    +     * Create a new BufferedWriter which will append to this&lt;br/&gt;
    +     * file.  The writer is passed to the closure and will be closed before&lt;br/&gt;
    +     * this method returns.  The writer will use the given charset encoding.&lt;br/&gt;
    +     * If the given charset is &quot;UTF-16BE&quot; or &quot;UTF-16LE&quot; (or an equivalent alias),&lt;br/&gt;
    +     * &amp;lt;code&amp;gt;writeBom&amp;lt;/code&amp;gt; is &amp;lt;code&amp;gt;true&amp;lt;/code&amp;gt;, and the file doesn&apos;t already exist,&lt;br/&gt;
    +     * the requisite byte order mark is written to the stream when the writer is created.&lt;br/&gt;
    +     *&lt;br/&gt;
    +     * @param self    a Path&lt;br/&gt;
    +     * @param charset the charset used&lt;br/&gt;
    +     * @param writeBom whether to write the BOM&lt;br/&gt;
    +     * @param closure a closure&lt;br/&gt;
    +     * @return the value returned by the closure&lt;br/&gt;
    +     * @throws java.io.IOException if an IOException occurs.&lt;br/&gt;
    +     * @since 2.3.0&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Yep, you&apos;re right.&lt;/p&gt;</comment>
                            <comment id="14998067" author="githubbot" created="Tue, 10 Nov 2015 06:46:29 +0000"  >&lt;p&gt;Github user PascalSchumacher commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/176#discussion_r44374647&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/176#discussion_r44374647&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/main/org/codehaus/groovy/runtime/ResourceGroovyMethods.java &amp;#8212;&lt;br/&gt;
    @@ -974,11 +1021,30 @@ public static void append(File self, InputStream stream) throws IOException {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@since 1.0&lt;br/&gt;
          */&lt;br/&gt;
         public static void append(File file, Object text, String charset) throws IOException 
{
    +        append(file, text, charset, false);
    +    }
&lt;p&gt;    +&lt;br/&gt;
    +    /**&lt;br/&gt;
    +     * Append the text at the end of the File, using a specified encoding.  If&lt;br/&gt;
    +     * the given charset is &quot;UTF-16BE&quot; or &quot;UTF-16LE&quot; (or an equivalent alias),&lt;br/&gt;
    +     * &amp;lt;code&amp;gt;writeBom&amp;lt;/code&amp;gt; is &amp;lt;code&amp;gt;true&amp;lt;/code&amp;gt;, and the file doesn&apos;t already&lt;br/&gt;
    +     * exist, the requisite byte order mark is written to the file before the&lt;br/&gt;
    +     * text is appended.&lt;br/&gt;
    +     *&lt;br/&gt;
    +     * @param file     a File&lt;br/&gt;
    +     * @param text     the text to append at the end of the File&lt;br/&gt;
    +     * @param charset  the charset used&lt;br/&gt;
    +     * @param writeBom whether to write a BOM&lt;br/&gt;
    +     * @throws IOException if an IOException occurs.&lt;br/&gt;
    +     * @since 2.5.0&lt;br/&gt;
    +     */&lt;br/&gt;
    +    public static void append(File file, Object text, String charset, boolean writeBom) throws IOException {&lt;br/&gt;
             Writer writer = null;&lt;br/&gt;
             try {&lt;br/&gt;
    +            boolean shouldWriteBom = writeBom &amp;amp;&amp;amp; !file.exists();&lt;br/&gt;
                 FileOutputStream out = new FileOutputStream(file, true);&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (!file.exists()) {&lt;/li&gt;
	&lt;li&gt;writeUTF16BomIfRequired(charset, out);&lt;br/&gt;
    +            if (shouldWriteBom) {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I misread that. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Sorry. &lt;/p&gt;</comment>
                            <comment id="15046334" author="githubbot" created="Tue, 8 Dec 2015 04:41:24 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/176&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/176&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12910593">GROOVY-7661</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 50 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2fxhj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>