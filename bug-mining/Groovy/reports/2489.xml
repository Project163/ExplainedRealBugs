<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:39:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-6579] Groovy Console not responsive when running the closure.</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-6579</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Please refer to below code. When I run it in groovyconsole, the console hangs indefinitely. If there is a better way to write this construct please advice.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;def benchmark(repeat, Closure worker) {
    start = &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.currentTimeMillis()
    repeat.times{println it}
    stop = &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.currentTimeMillis()
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; stop - start
}

slow = benchmark(10000) {it}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>Windows XP, Groovy Version 2.2.1, JDK 1.7.0_40</environment>
        <key id="12816858">GROOVY-6579</key>
            <summary>Groovy Console not responsive when running the closure.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="4" iconUrl="https://issues.apache.org/jira/images/icons/statuses/reopened.png" description="This issue was once resolved, but the resolution was deemed incorrect. From here issues are either marked assigned or resolved.">Reopened</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sriharshareddyk">skis</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Feb 2014 16:03:19 +0000</created>
                <updated>Fri, 24 Oct 2014 17:14:43 +0000</updated>
                                            <version>2.2.1</version>
                                                    <component>Groovy Console</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14480428" author="sriharshareddyk" created="Wed, 26 Feb 2014 22:45:22 +0000"  >&lt;p&gt;Even a simple code such as below hangs the groovyConsole. Please advice.&lt;/p&gt;

&lt;p&gt;def start = System.currentTimeMillis()&lt;br/&gt;
(1..2000).each&lt;/p&gt;
{println it}
&lt;p&gt;def end = System.currentTimeMillis()&lt;/p&gt;

&lt;p&gt;println &quot;==&amp;gt; &quot; + (end - start)&lt;/p&gt;
</comment>
                            <comment id="14475461" author="asteingress" created="Thu, 27 Feb 2014 01:54:09 +0000"  >&lt;p&gt;Seems that &lt;tt&gt;Console#ensureNoDocLengthOverflow&lt;/tt&gt; causes the high CPU usage. Whenever the maximum amount of characters in the output buffer is exceeded this method jumps in. &lt;/p&gt;

&lt;p&gt;I&apos;m not a Swing expert, but setting &lt;tt&gt;Console#maxOutputChars&lt;/tt&gt; locally to a default value of 10.000 did solve the issue, maybe the default value of 20.000 causes to much memory consumption.&lt;/p&gt;</comment>
                            <comment id="14475508" author="asteingress" created="Fri, 28 Feb 2014 02:16:25 +0000"  >&lt;p&gt;BTW the maxOutputChars can also be set via a Java VM system property called &lt;tt&gt;&quot;groovy.console.output.limit&quot;&lt;/tt&gt; which will get parsed to an &lt;tt&gt;Integer&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="14475531" author="asteingress" created="Fri, 28 Feb 2014 02:46:31 +0000"  >&lt;p&gt;I&apos;ll investigate for faster or batched &lt;tt&gt;StyledDocument&lt;/tt&gt; updates. Right now the &lt;tt&gt;StyledDocument&lt;/tt&gt; gets updated with every single &lt;tt&gt;outputAppend&lt;/tt&gt; call which - as we see in this case - might be not the most performant way for really large output.&lt;/p&gt;</comment>
                            <comment id="14475576" author="asteingress" created="Fri, 7 Mar 2014 06:34:03 +0000"  >&lt;p&gt;Here is the pull-request: &lt;a href=&quot;https://github.com/groovy/groovy-core/pull/344&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/groovy/groovy-core/pull/344&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The problem is basically that the stdout/stderr calls are directly pushed to the Swing &lt;tt&gt;HtmlDocument&lt;/tt&gt;. The PR introduces a &lt;tt&gt;BufferedOutputStream&lt;/tt&gt; and a thread that flushes the streams periodically. This has improved performance dramatically.&lt;/p&gt;</comment>
                            <comment id="14475469" author="melix" created="Tue, 1 Apr 2014 10:12:32 +0000"  >&lt;p&gt;Merged into master.&lt;/p&gt;</comment>
                            <comment id="14475643" author="melix" created="Wed, 2 Apr 2014 11:15:20 +0000"  >&lt;p&gt;Reopened because the fix triggers a JVM crash.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 33 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bwbr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>