<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:21:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-10881] FastStringUtils does not work in an OSGi environment</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-10881</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Using the FastStringUtils does not work in an OSGi environment. The FastStringUtils will be called by the classloader of another bundle, making the code at &lt;a href=&quot;https://github.com/apache/groovy/blob/master/subprojects/groovy-json/src/main/java/org/apache/groovy/json/internal/FastStringUtils.java#L39&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/blob/master/subprojects/groovy-json/src/main/java/org/apache/groovy/json/internal/FastStringUtils.java#L39&lt;/a&gt; not find the default service loader. &lt;/p&gt;

&lt;p&gt;To counter this, I&apos;d like to propose to at least fall back to the DefaultFastStringService when no FastStringServiceFactory is found &lt;/p&gt;


&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13515072">GROOVY-10881</key>
            <summary>FastStringUtils does not work in an OSGi environment</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="royteeuwen">Roy Teeuwen</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Dec 2022 09:57:51 +0000</created>
                <updated>Mon, 17 Apr 2023 14:21:14 +0000</updated>
                            <resolved>Wed, 1 Feb 2023 11:52:16 +0000</resolved>
                                                    <fixVersion>4.0.9</fixVersion>
                                    <component>JSON</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="17650718" author="royteeuwen" created="Wed, 21 Dec 2022 09:58:47 +0000"  >&lt;p&gt;I created following PR as proposal: &lt;a href=&quot;https://github.com/apache/groovy/pull/1836&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1836&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17650799" author="royteeuwen" created="Wed, 21 Dec 2022 10:11:12 +0000"  >&lt;p&gt;I&apos;d like to get this released in a 4.0.x version. How can I do this? Just start from the GROOVY_4_0_X branch and make a PR to that one? Will it also be merged into the master then automatically?&lt;/p&gt;</comment>
                            <comment id="17650831" author="githubbot" created="Wed, 21 Dec 2022 11:23:52 +0000"  >&lt;p&gt;codecov-commenter commented on PR #1836:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/1836#issuecomment-1361193224&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1836#issuecomment-1361193224&lt;/a&gt;&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;Codecov&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://codecov.io/gh/apache/groovy/pull/1836?src=pr&amp;amp;el=h1&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://codecov.io/gh/apache/groovy/pull/1836?src=pr&amp;amp;el=h1&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&lt;/a&gt;) Report&lt;br/&gt;
   &amp;gt; Merging &lt;a href=&quot;#1836&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;1836&lt;/a&gt;(&lt;a href=&quot;https://codecov.io/gh/apache/groovy/pull/1836?src=pr&amp;amp;el=desc&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://codecov.io/gh/apache/groovy/pull/1836?src=pr&amp;amp;el=desc&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&lt;/a&gt;) (59d3a32) into &lt;span class=&quot;error&quot;&gt;&amp;#91;master&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://codecov.io/gh/apache/groovy/commit/27275071bfcad2225b6ddc0d7dcf54528d3ac29e?el=desc&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://codecov.io/gh/apache/groovy/commit/27275071bfcad2225b6ddc0d7dcf54528d3ac29e?el=desc&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&lt;/a&gt;) (2727507) will *&lt;b&gt;decrease&lt;/b&gt;* coverage by `0.0003%`.&lt;br/&gt;
   &amp;gt; The diff coverage is `33.3333%`.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   [!&lt;span class=&quot;error&quot;&gt;&amp;#91;Impacted file tree graph&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://codecov.io/gh/apache/groovy/pull/1836/graphs/tree.svg?width=650&amp;amp;height=150&amp;amp;src=pr&amp;amp;token=1r45138NfQ&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/groovy/pull/1836?src=pr&amp;amp;el=tree&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://codecov.io/gh/apache/groovy/pull/1836/graphs/tree.svg?width=650&amp;amp;height=150&amp;amp;src=pr&amp;amp;token=1r45138NfQ&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/groovy/pull/1836?src=pr&amp;amp;el=tree&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;   ```diff&lt;br/&gt;
   @@                Coverage Diff                 @@&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;master      #1836        +/-   ##&lt;br/&gt;
   ==================================================&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Coverage     67.7583%   67.7580%   -0.0003%&lt;br/&gt;
     Complexity      28281      28281                &lt;br/&gt;
   ==================================================&lt;br/&gt;
     Files            1427       1427                &lt;br/&gt;
     Lines          112556     112558         +2     &lt;br/&gt;
     Branches        19302      19303         +1     &lt;br/&gt;
   ==================================================&lt;br/&gt;
   + Hits            76266      76267         +1     &lt;/li&gt;
	&lt;li&gt;Misses          29759      29761         +2&lt;br/&gt;
   + Partials         6531       6530         -1     &lt;br/&gt;
   ```&lt;/li&gt;
&lt;/ul&gt;



&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Impacted Files&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://codecov.io/gh/apache/groovy/pull/1836?src=pr&amp;amp;el=tree&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://codecov.io/gh/apache/groovy/pull/1836?src=pr&amp;amp;el=tree&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&lt;/a&gt;) &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Coverage &#916; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;#8212;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;#8212;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;#8212;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;...g/apache/groovy/json/internal/FastStringUtils.java&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://codecov.io/gh/apache/groovy/pull/1836/diff?src=pr&amp;amp;el=tree&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation#diff-c3VicHJvamVjdHMvZ3Jvb3Z5LWpzb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2dyb292eS9qc29uL2ludGVybmFsL0Zhc3RTdHJpbmdVdGlscy5qYXZh&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://codecov.io/gh/apache/groovy/pull/1836/diff?src=pr&amp;amp;el=tree&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation#diff-c3VicHJvamVjdHMvZ3Jvb3Z5LWpzb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2dyb292eS9qc29uL2ludGVybmFsL0Zhc3RTdHJpbmdVdGlscy5qYXZh&lt;/a&gt;) &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; `55.0000% &amp;lt;33.3333%&amp;gt; (-6.1111%)` &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; :arrow_down: &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;...ncurrentlinkedhashmap/ConcurrentLinkedHashMap.java&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://codecov.io/gh/apache/groovy/pull/1836/diff?src=pr&amp;amp;el=tree&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation#diff-c3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2dyb292eS91dGlsL2NvbmN1cnJlbnQvY29uY3VycmVudGxpbmtlZGhhc2htYXAvQ29uY3VycmVudExpbmtlZEhhc2hNYXAuamF2YQ==&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://codecov.io/gh/apache/groovy/pull/1836/diff?src=pr&amp;amp;el=tree&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation#diff-c3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2dyb292eS91dGlsL2NvbmN1cnJlbnQvY29uY3VycmVudGxpbmtlZGhhc2htYXAvQ29uY3VycmVudExpbmtlZEhhc2hNYXAuamF2YQ==&lt;/a&gt;) &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; `45.0593% &amp;lt;0.0000%&amp;gt; (&#248;)` &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;...odehaus/groovy/reflection/GeneratedMetaMethod.java&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://codecov.io/gh/apache/groovy/pull/1836/diff?src=pr&amp;amp;el=tree&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation#diff-c3JjL21haW4vamF2YS9vcmcvY29kZWhhdXMvZ3Jvb3Z5L3JlZmxlY3Rpb24vR2VuZXJhdGVkTWV0YU1ldGhvZC5qYXZh&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://codecov.io/gh/apache/groovy/pull/1836/diff?src=pr&amp;amp;el=tree&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation#diff-c3JjL21haW4vamF2YS9vcmcvY29kZWhhdXMvZ3Jvb3Z5L3JlZmxlY3Rpb24vR2VuZXJhdGVkTWV0YU1ldGhvZC5qYXZh&lt;/a&gt;) &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; `57.6923% &amp;lt;0.0000%&amp;gt; (+0.9615%)` &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; :arrow_up: &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



</comment>
                            <comment id="17650867" author="paulk" created="Wed, 21 Dec 2022 13:18:02 +0000"  >&lt;p&gt;Your PR on master is fine. We will merge onto the 4_0_X branch.&lt;/p&gt;</comment>
                            <comment id="17651688" author="royteeuwen" created="Fri, 23 Dec 2022 16:32:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulk&quot; class=&quot;user-hover&quot; rel=&quot;paulk&quot;&gt;paulk&lt;/a&gt; is there anything still expected from me to get this PR looked at /merged?&lt;/p&gt;</comment>
                            <comment id="17654178" author="royteeuwen" created="Tue, 3 Jan 2023 20:14:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=emilles&quot; class=&quot;user-hover&quot; rel=&quot;emilles&quot;&gt;emilles&lt;/a&gt; could you help out with this ticket?&lt;/p&gt;</comment>
                            <comment id="17654550" author="emilles" created="Wed, 4 Jan 2023 16:41:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=royteeuwen&quot; class=&quot;user-hover&quot; rel=&quot;royteeuwen&quot;&gt;royteeuwen&lt;/a&gt; Is this just stuck in PR review?&lt;/p&gt;</comment>
                            <comment id="17654584" author="githubbot" created="Wed, 4 Jan 2023 18:17:48 +0000"  >&lt;p&gt;eric-milles commented on PR #1836:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/1836#issuecomment-1371265481&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1836#issuecomment-1371265481&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Can you please make the test class `final` and JUnit4-based by using `@Test` instead of `GroovyTestCase`?&lt;/p&gt;

</comment>
                            <comment id="17654587" author="githubbot" created="Wed, 4 Jan 2023 18:20:21 +0000"  >&lt;p&gt;eric-milles commented on PR #1836:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/1836#issuecomment-1371268084&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1836#issuecomment-1371268084&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Will this cause many passes of class scanning and `DefaultFastStringService` instances?  How are `loadService()` and `getService()` used?&lt;/p&gt;

</comment>
                            <comment id="17654603" author="githubbot" created="Wed, 4 Jan 2023 19:01:06 +0000"  >&lt;p&gt;royteeuwen commented on PR #1836:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/1836#issuecomment-1371305256&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1836#issuecomment-1371305256&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   &amp;gt; Will this cause many passes of class scanning and `DefaultFastStringService` instances? How are `loadService()` and `getService()` used?&lt;/p&gt;

&lt;p&gt;   INSTANCE s a static field, meaning that at the class loading of FastStringUtils it will be initialized by calling loadService(). This will only be done once&lt;/p&gt;

&lt;p&gt;   getService() will just return that same static instance all the time&lt;/p&gt;

</comment>
                            <comment id="17654710" author="paulk" created="Thu, 5 Jan 2023 02:39:26 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Is this just stuck in PR review?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;There are two reasons I haven&apos;t merged yet:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;I&apos;d like to reproduce the error and fix (it&apos;s been a while since I played with OSGi environments) though the logic looks fine&lt;/li&gt;
	&lt;li&gt;The change sort of hides problems in non-OSGi environments. If someone was using a custom fast string service (like groovy-json-direct or their own) and had some kind of classpath or configuration issue, they will not fail early and draw attention to their issue. I am still pondering if this is a problem. I imagine it&apos;s a very small audience we are talking about.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="17655837" author="royteeuwen" created="Sun, 8 Jan 2023 20:03:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulk&quot; class=&quot;user-hover&quot; rel=&quot;paulk&quot;&gt;paulk&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;1. I have attached an OSGi project based on Apache Karaf, using PAX Exam to show the error. You can play around with it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;br/&gt;
2. Well, this should never be the case. Either they already have this RuntimeException fixed (because else it wont start up) or they don&apos;t have the error. Any new error causing this RuntimeException would have to be fixed immediately (like I am doing now for OSGi)&lt;/p&gt;</comment>
                            <comment id="17655852" author="paulk" created="Mon, 9 Jan 2023 00:34:17 +0000"  >&lt;blockquote&gt;
&lt;p&gt;1. I have attached an OSGi project based on Apache Karaf, using PAX Exam to show the error. You can play around with it &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Great, I will give it a try.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;2. Well, this should never be the case. Either they already have this RuntimeException fixed (because else it wont start up) or they don&apos;t have the error. Any new error causing this RuntimeException would have to be fixed immediately (like I am doing now for OSGi)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Since we have that extension point, anyone can create new services at any time in the future which fulfil the service. They won&apos;t find errors as easily if they do so. Having said that, the number of folks who might do such a thing is very small. It&apos;s not necessarily a show-stopper. We just need to give some thought as to whether there is some alternative which solves both scenarios.&lt;/p&gt;</comment>
                            <comment id="17677217" author="royteeuwen" created="Mon, 16 Jan 2023 08:11:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulk&quot; class=&quot;user-hover&quot; rel=&quot;paulk&quot;&gt;paulk&lt;/a&gt; any luck yet with testing this out? If there is another possibility to make this work for all situations, I&apos;m open to refactor it in any way feasible. &lt;/p&gt;</comment>
                            <comment id="17677369" author="nicolas.dutertry" created="Mon, 16 Jan 2023 13:06:23 +0000"  >&lt;p&gt;FastStringUtils works with OSGI in version 3.0.x because it uses SpiFly which allow loadService to work in OSGI environments.&lt;/p&gt;

&lt;p&gt;You can see the following entry in MANIFEST.MF :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Provide-Capability: osgi.serviceloader;osgi.serviceloader=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.groovy.json.FastStringServiceFactory&quot;&lt;/span&gt; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This entry does not exist in version 4.0.x. Can you please do the same in version 4.0.x ?&lt;/p&gt;</comment>
                            <comment id="17677434" author="royteeuwen" created="Mon, 16 Jan 2023 15:20:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nicolas.dutertry&quot; class=&quot;user-hover&quot; rel=&quot;nicolas.dutertry&quot;&gt;nicolas.dutertry&lt;/a&gt; I will try this out but I&apos;m not sure if this will be sufficient. SpiFly is an Apache Aries module that is not available out of the box everywhere if I&apos;m not mistaken. &lt;/p&gt;</comment>
                            <comment id="17679649" author="royteeuwen" created="Sun, 22 Jan 2023 21:30:50 +0000"  >&lt;p&gt;I have tested out the 3.x branch and indeed like &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nicolas.dutertry&quot; class=&quot;user-hover&quot; rel=&quot;nicolas.dutertry&quot;&gt;nicolas.dutertry&lt;/a&gt; stated this works perfectly. It seems to be that during the refactoring of the entire build gradle files from 3.x to 4.x something went wrong.&lt;/p&gt;

&lt;p&gt;This part is what went missing:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Require-Capability: osgi.extender;filter:=&quot;(osgi.extender=osgi.service
 loader.registrar)&lt;span class=&quot;code-quote&quot;&gt;&quot;,osgi.extender;filter:=&quot;&lt;/span&gt;(osgi.extender=osgi.service
 loader.processor)&lt;span class=&quot;code-quote&quot;&gt;&quot;,osgi.serviceloader;filter:=&quot;&lt;/span&gt;(osgi.serviceloader=or
 g.apache.groovy.json.FastStringServiceFactory)&quot;;cardinality:=multiple
 ,osgi.ee;filter:=&lt;span class=&quot;code-quote&quot;&gt;&quot;(&amp;amp;(osgi.ee=JavaSE)(version=1.8))&quot;&lt;/span&gt;
Provide-Capability: osgi.serviceloader;osgi.serviceloader=&quot;org.apache.
 groovy.json.FastStringServiceFactory&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I have tried to debug the code but I&apos;m used to maven instead of gradle so it is really hard for me to make any sense out of it. I could find that in the groovy 3.x branch it was done by the gradle/assemble.gradle, but I can still find references to the serviceloader in the new version, namely in groovy/org.apache.groovy-library.gradle, but it is not being executed :/ &lt;/p&gt;

&lt;p&gt;Is there any of you willing to have a look at it if they can fix this? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulk&quot; class=&quot;user-hover&quot; rel=&quot;paulk&quot;&gt;paulk&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=emilles&quot; class=&quot;user-hover&quot; rel=&quot;emilles&quot;&gt;emilles&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="17680589" author="paulk" created="Wed, 25 Jan 2023 11:55:32 +0000"  >&lt;p&gt;Okay, looks like there was a bug in how the service directory was located when the build was re-worked and it wasn&apos;t noticed all this time. It would be great if you can try 4.0.9-SNAPSHOT and see if that works for you.&lt;/p&gt;</comment>
                            <comment id="17681111" author="royteeuwen" created="Thu, 26 Jan 2023 20:29:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulk&quot; class=&quot;user-hover&quot; rel=&quot;paulk&quot;&gt;paulk&lt;/a&gt; super, that fixes it. Sadly enough I have to add 5 extra dependencies to make the serviceloader work in OSGi though, but if this makes it work for all cases, I guess I can live with that.&lt;/p&gt;

&lt;p&gt;If I can ask one more thing, could you also update the manifest generation so that it doesnt add Bundle-Name:Groovy Runtime for every jar? (see screenshot)&lt;/p&gt;</comment>
                            <comment id="17682362" author="paulk" created="Tue, 31 Jan 2023 03:14:38 +0000"  >&lt;p&gt;The latest snapshot should have different bundle names. Also, I noticed that all jars had a &lt;tt&gt;Main-Class&lt;/tt&gt; attribute set. That should only be in the main jar now. If you can try it out, and let me know if it works, that would be great.&lt;/p&gt;</comment>
                            <comment id="17682969" author="royteeuwen" created="Wed, 1 Feb 2023 10:58:22 +0000"  >&lt;p&gt;Looks good &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_up.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
 &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13054978/13054978_Screenshot+2023-02-01+at+11.53.16.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;/p&gt;

&lt;p&gt;FYI, I did have to do a cherry-pick from the master to the 4_0_X branch for those changes&lt;/p&gt;

&lt;p&gt;Is there a release schedule /milestones on when this could be released?&lt;/p&gt;</comment>
                            <comment id="17682986" author="paulk" created="Wed, 1 Feb 2023 11:53:56 +0000"  >&lt;p&gt;It&apos;s now merged onto 4_0_X. I&apos;ll probably do a 4.0.9 shortly. I&apos;ll see if I get any feedback. Maybe a week, maybe a few weeks.&lt;/p&gt;</comment>
                            <comment id="17685746" author="royteeuwen" created="Wed, 8 Feb 2023 08:09:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulk&quot; class=&quot;user-hover&quot; rel=&quot;paulk&quot;&gt;paulk&lt;/a&gt; I see that in the releases tab of Github it states 4.0.9 is released two days ago, but I don&apos;t find it on maven central? Did anything go wrong on the release or is github wrong?&lt;/p&gt;</comment>
                            <comment id="17685871" author="paulk" created="Wed, 8 Feb 2023 11:52:46 +0000"  >&lt;p&gt;GitHub is &lt;em&gt;kind of&lt;/em&gt; wrong. ASF releases go through (normally) a 3-day voting window. GitHub has noticed the tag we are voting on but it&apos;s not yet an official release. If voting was to fail, we&apos;d delete the tag and create a fresh release candidate. There are ways to get the candidate artifacts and zips but if you wait another day, barring any unforeseen circumstances, the official versions should be in all the usual places and announced in all the usual channels.&lt;/p&gt;</comment>
                            <comment id="17690842" author="githubbot" created="Sun, 19 Feb 2023 07:34:39 +0000"  >&lt;p&gt;paulk-asert commented on PR #1836:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/1836#issuecomment-1435915335&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1836#issuecomment-1435915335&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   @royteeuwen Should we close this now given the alternative fix?&lt;/p&gt;

</comment>
                            <comment id="17690843" author="githubbot" created="Sun, 19 Feb 2023 07:36:41 +0000"  >&lt;p&gt;royteeuwen closed pull request #1836: &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-10881&quot; title=&quot;FastStringUtils does not work in an OSGi environment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-10881&quot;&gt;&lt;del&gt;GROOVY-10881&lt;/del&gt;&lt;/a&gt;: Make FastStringUtils work in an OSGi environment&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/1836&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1836&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="17690844" author="githubbot" created="Sun, 19 Feb 2023 07:36:53 +0000"  >&lt;p&gt;royteeuwen commented on PR #1836:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/1836#issuecomment-1435915627&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1836#issuecomment-1435915627&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   &amp;gt; @royteeuwen Should we close this now given the alternative fix?&lt;/p&gt;

&lt;p&gt;   Done!&lt;/p&gt;

</comment>
                            <comment id="17711163" author="paulk" created="Wed, 12 Apr 2023 01:39:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=royteeuwen&quot; class=&quot;user-hover&quot; rel=&quot;royteeuwen&quot;&gt;royteeuwen&lt;/a&gt; Out of interest (and possibly to assist others down the track), what were the 5 dependencies you had to add?&lt;/p&gt;</comment>
                            <comment id="17713118" author="royteeuwen" created="Mon, 17 Apr 2023 14:21:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulk&quot; class=&quot;user-hover&quot; rel=&quot;paulk&quot;&gt;paulk&lt;/a&gt; that would be the following: &lt;a href=&quot;https://github.com/orbinson/aem-groovy-console/blob/main/all/pom.xml#L233&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/orbinson/aem-groovy-console/blob/main/all/pom.xml#L233&lt;/a&gt;&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &amp;lt;!-- SpiFly to make ServiceLoader work in Groovy JSON --&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.apache.aries.spifly&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;org.apache.aries.spifly.dynamic.bundle&amp;lt;/artifactId&amp;gt;
            &amp;lt;version&amp;gt;1.3.6&amp;lt;/version&amp;gt;
        &amp;lt;/dependency&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.ow2.asm&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;asm&amp;lt;/artifactId&amp;gt;
            &amp;lt;version&amp;gt;9.4&amp;lt;/version&amp;gt;
        &amp;lt;/dependency&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.ow2.asm&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;asm-analysis&amp;lt;/artifactId&amp;gt;
            &amp;lt;version&amp;gt;9.4&amp;lt;/version&amp;gt;
        &amp;lt;/dependency&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.ow2.asm&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;asm-commons&amp;lt;/artifactId&amp;gt;
            &amp;lt;version&amp;gt;9.4&amp;lt;/version&amp;gt;
        &amp;lt;/dependency&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.ow2.asm&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;asm-util&amp;lt;/artifactId&amp;gt;
            &amp;lt;version&amp;gt;9.4&amp;lt;/version&amp;gt;
        &amp;lt;/dependency&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.ow2.asm&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;asm-tree&amp;lt;/artifactId&amp;gt;
            &amp;lt;version&amp;gt;9.4&amp;lt;/version&amp;gt;
        &amp;lt;/dependency&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13054830" name="Screenshot 2023-01-25 at 15.41.16.png" size="34803" author="royteeuwen" created="Thu, 26 Jan 2023 20:29:02 +0000"/>
                            <attachment id="13054978" name="Screenshot 2023-02-01 at 11.53.16.png" size="14160" author="royteeuwen" created="Wed, 1 Feb 2023 10:58:20 +0000"/>
                            <attachment id="13054422" name="groovy-json-example.zip" size="17615" author="royteeuwen" created="Sun, 8 Jan 2023 20:03:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 30 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1eah4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>