<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:36:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-6357] Inner classes in Groovy should have the same access modifiers as in Java</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-6357</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;There are differences in the flags/access modifiers for inner classes between Java and Groovy.&lt;/p&gt;

&lt;p&gt;Java code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Java {
              &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;InnerPackage { }
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;InnerPublic { }
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;InnerProtected { }
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt;   &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;InnerPrivate { }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Groovy code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.PackageScope

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Groovy {
    @PackageScope &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;InnerPackage { }
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;InnerPublic { }
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt;     &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;InnerProtected { }
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt;       &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;InnerPrivate { }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Flags for inner classes (extracted via javap):&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;package scope &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;public scope &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;protected scope &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;private scope &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Java   &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ACC_SUPER &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ACC_SUPER, ACC_PUBLIC &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ACC_SUPER, ACC_PUBLIC                &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ACC_SUPER &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Groovy &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ACC_SUPER &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ACC_SUPER, ACC_PUBLIC &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ACC_SUPER, 0x4 (means ACC_PROTECTED) &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ACC_SUPER, 0x2 (means ACC_PRIVATE) &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;Comment from blackdrag:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I think as Groovy does is correct. But we did learn only recently, that &lt;br/&gt;
the VMs have trouble doing it like this. AS a result we forbid the &lt;br/&gt;
private modifer on classes... but looks like we forgot inner classes.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;These different flags for example result in Cobertura failing to instrument the inner classes because ASM throws this exception:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Unable to instrument file build/instrumented_classes/Groovy$InnerPrivate.class
java.lang.IllegalArgumentException: Invalid access flags: 34
        at org.objectweb.asm.util.CheckClassAdapter.checkAccess(Unknown Source)
        at org.objectweb.asm.util.CheckClassAdapter.visit(Unknown Source)
        at org.objectweb.asm.ClassVisitor.visit(Unknown Source)
        at net.sourceforge.cobertura.instrument.pass1.DetectDuplicatedCodeClassVisitor.visit(DetectDuplicatedCodeClassVisitor.java:205)
        at org.objectweb.asm.ClassReader.accept(Unknown Source)
        at org.objectweb.asm.ClassReader.accept(Unknown Source)
        at net.sourceforge.cobertura.instrument.CoberturaInstrumenter.instrumentClass(CoberturaInstrumenter.java:153)
        at net.sourceforge.cobertura.instrument.CoberturaInstrumenter.instrumentClass(CoberturaInstrumenter.java:121)
        at net.sourceforge.cobertura.instrument.CoberturaInstrumenter.addInstrumentationToSingleClass(CoberturaInstrumenter.java:234)
        at net.sourceforge.cobertura.instrument.Main.addInstrumentationToSingleClass(Main.java:298)
        at net.sourceforge.cobertura.instrument.Main.addInstrumentation(Main.java:307)
        at net.sourceforge.cobertura.instrument.Main.addInstrumentation(Main.java:316)
        at net.sourceforge.cobertura.instrument.Main.parseArguments(Main.java:399)
        at net.sourceforge.cobertura.instrument.Main.main(Main.java:421)
        at net.saliman.gradle.plugin.cobertura.CoberturaRunner.instrument(CoberturaRunner.java:79)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12812123">GROOVY-6357</key>
            <summary>Inner classes in Groovy should have the same access modifiers as in Java</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="melix">C&#233;dric Champeau</assignee>
                                    <reporter username="rene.scheibe">Ren&#233; Scheibe</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Sep 2013 04:29:57 +0000</created>
                <updated>Mon, 14 Oct 2013 16:53:56 +0000</updated>
                            <resolved>Mon, 14 Oct 2013 03:38:20 +0000</resolved>
                                    <version>2.1.7</version>
                                    <fixVersion>2.1.8</fixVersion>
                                    <component>bytecode</component>
                    <component>class generator</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                            <attachment id="12722392" name="groovy-inner-classes.tar.gz" size="824" author="" created="Fri, 20 Sep 2013 04:52:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 9 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bxq7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>