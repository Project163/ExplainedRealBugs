<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:59:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-8732] @CompileStatic refers to private field in parent class</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-8732</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.CompileStatic

@CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; Thing {
    void call()
}

@CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ThingImpl &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Thing {
    void call() {}
}

@CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Parent {
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ThingImpl thing

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Thing getThing() { &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; }
}

@CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Child &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Parent {
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void doSomething() {
        thing.call()
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Compile via: &lt;tt&gt;groovyc Example.groovy&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;The line &lt;tt&gt;thing.call&lt;/tt&gt; in &lt;tt&gt;Child.doSomething()&lt;/tt&gt; calls &lt;tt&gt;getThing()&lt;/tt&gt;, but then ends up referring to the returned value according to the private field&apos;s type from &lt;tt&gt;Parent&lt;/tt&gt; (&lt;tt&gt;ThingImpl&lt;/tt&gt;) instead of the actual returned type (&lt;tt&gt;Thing&lt;/tt&gt;). The private field from &lt;tt&gt;Parent&lt;/tt&gt; (or its type) should not be visible to &lt;tt&gt;Child&lt;/tt&gt; at all.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void doSomething();
    descriptor: ()V
    flags: (0x0001) ACC_PUBLIC
    Code:
      stack=1, locals=1, args_size=1
         0: aload_0
         1: invokevirtual #20                 &lt;span class=&quot;code-comment&quot;&gt;// Method Parent.getThing:()LThing;
&lt;/span&gt;         4: checkcast     #22                 &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ThingImpl
&lt;/span&gt;         7: invokevirtual #25                 &lt;span class=&quot;code-comment&quot;&gt;// Method ThingImpl.call:()V
&lt;/span&gt;        10: aconst_null
        11: pop
        12: &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is causing now problems for Gradle plugins compiled against Grade 4.9 or before trying to run on Gradle 4.9, because we&apos;ve made a change to an internal type (`ProjectInternal`) that ended up being referred to via this bug in compiled and released code. See &lt;a href=&quot;https://github.com/gradle/gradle/issues/6027&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/gradle/gradle/issues/6027&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13177103">GROOVY-8732</key>
            <summary>@CompileStatic refers to private field in parent class</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="lptr">L&#243;r&#225;nt Pint&#233;r</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 Aug 2018 12:26:09 +0000</created>
                <updated>Tue, 14 Aug 2018 08:05:52 +0000</updated>
                            <resolved>Fri, 10 Aug 2018 00:42:17 +0000</resolved>
                                    <version>2.4.15</version>
                    <version>2.6.0-alpha-4</version>
                    <version>3.0.0-alpha-3</version>
                    <version>2.5.1</version>
                                    <fixVersion>3.0.0-alpha-4</fixVersion>
                    <fixVersion>2.5.2</fixVersion>
                                    <component>Static compilation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16573351" author="paulk" created="Wed, 8 Aug 2018 15:15:04 +0000"  >&lt;p&gt;Yes, at the end of Instruction Selection, the &lt;tt&gt;INFERRED_TYPE&lt;/tt&gt; of the &lt;tt&gt;thing&lt;/tt&gt; property is &lt;tt&gt;ThingImpl&lt;/tt&gt;. This will cause what you are seeing in the byte code. The inferred type must be getting set by StaticTypeCheckingVisitor. I&apos;ll take a look.&lt;/p&gt;</comment>
                            <comment id="16574464" author="githubbot" created="Thu, 9 Aug 2018 08:15:34 +0000"  >&lt;p&gt;GitHub user paulk-asert opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/781&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/781&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8732&quot; title=&quot;@CompileStatic refers to private field in parent class&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8732&quot;&gt;&lt;del&gt;GROOVY-8732&lt;/del&gt;&lt;/a&gt;: @CompileStatic refers to private field in parent class&lt;/p&gt;

&lt;p&gt;    Currently JavaBean style getters aren&apos;t recognised&lt;br/&gt;
    before some preliminary provisions are made for the&lt;br/&gt;
    case of accessing the private field in places where that&lt;br/&gt;
    is allowed. The change is just not to proceed with those&lt;br/&gt;
    provisions if the JavaBean getter is detected.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/paulk-asert/groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/paulk-asert/groovy&lt;/a&gt; groovy8732&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/781.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/781.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #781&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 2b4c33317f34d52c5fbeb0846639597a5f6b86fe&lt;br/&gt;
Author: Paul King &amp;lt;paulk@...&amp;gt;&lt;br/&gt;
Date:   2018-08-09T08:12:08Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8732&quot; title=&quot;@CompileStatic refers to private field in parent class&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8732&quot;&gt;&lt;del&gt;GROOVY-8732&lt;/del&gt;&lt;/a&gt;: @CompileStatic refers to private field in parent class&lt;br/&gt;
    Currently JavaBean style getters aren&apos;t recognised&lt;br/&gt;
    before some preliminary provisions are made for the&lt;br/&gt;
    case of accessing the private field in places where that&lt;br/&gt;
    is allowed. The change is just not to proceed with those&lt;br/&gt;
    provisions if the JavaBean getter is detected.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16574756" author="paulk" created="Thu, 9 Aug 2018 12:20:06 +0000"  >&lt;p&gt;After the above PR the bytecode for your example becomes:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    ALOAD 0
    CHECKCAST Child
    INVOKEVIRTUAL Child.getThing ()LThing;
    INVOKEINTERFACE Thing.call ()V (itf)
    ACONST_NULL
    POP
    RETURN
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16575591" author="githubbot" created="Fri, 10 Aug 2018 00:04:40 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/781&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/781&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16575611" author="paulk" created="Fri, 10 Aug 2018 00:42:17 +0000"  >&lt;p&gt;Proposed PR resolved. I&apos;ll try to add a test later but resolving now for inclusion on 2.5.2.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 14 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3wqbj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>