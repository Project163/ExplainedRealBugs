<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:01:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-2263] DelegatingMetaClass causing java.lang.StackOverflowError when subclassed.</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-2263</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;I was attempting to create a custom delegate class for a third party library. Researching this, I found the following page:&lt;br/&gt;
&lt;a href=&quot;http://docs.codehaus.org/display/GROOVY/Using+the+Delegating+Meta+Class&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.codehaus.org/display/GROOVY/Using+the+Delegating+Meta+Class&lt;/a&gt; and followed the &quot;Package Name Convention Solution&quot;. That failed and I created issue #&lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-2262&quot; title=&quot;groovy.lang.MetaClassRegistry$MetaClassCreationHandle.create() causing java.lang.StackOverflowError&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-2262&quot;&gt;&lt;del&gt;GROOVY-2262&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I still needed to try and create a custome delegate class, so I proceeded to try the &quot;InvokeHelper Solution&quot; from the same webpage. When I did, I got different errors. so I removed all of my code and only tried the code from the webpage..&lt;/p&gt;

&lt;p&gt;It succeed when run from within eclipse, using groovy 1.1-beta 2, which was included with the eclipse development plugin. But when I ran it from the command line where I had groovy 1.1-rc 1, it failed with a java.lang.StackOverflowError. Attached is the full log of the run from the command line.&lt;/p&gt;

&lt;p&gt;Looking at the log, I noticed that it appears to go into a loop until the stack overflows&lt;/p&gt;

&lt;p&gt;Snippet of log file:&lt;br/&gt;
------------------------&lt;br/&gt;
	at MyDelegatingMetaClass.invokeMethod(DelegatingMetaClassInvokeHelperTest.groovy:44)&lt;br/&gt;
	at sun.reflect.GeneratedMethodAccessor1.invoke(Unknown Source)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at org.codehaus.groovy.reflection.CachedMethod.invokeByReflection(CachedMethod.java:107)&lt;br/&gt;
	at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:127)&lt;br/&gt;
	at org.codehaus.groovy.runtime.metaclass.StdMetaMethod.invoke(StdMetaMethod.java:18)&lt;br/&gt;
	at org.codehaus.groovy.runtime.MetaClassHelper.doMethodInvoke(MetaClassHelper.java:538)&lt;br/&gt;
	at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:749)&lt;br/&gt;
	at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.invokeMethodOnSuperN(ScriptBytecodeAdapter.java:118)&lt;br/&gt;
	at MyDelegatingMetaClass.invokeMethod(DelegatingMetaClassInvokeHelperTest.groovy:44)&lt;br/&gt;
------------------------&lt;/p&gt;

&lt;p&gt;the MyDelegatingMetaClass.invokeMethod is the one given on the webpage:&lt;br/&gt;
--------------------&lt;br/&gt;
public Object invokeMethod(Object a_object, String a_methodName, Object[] a_arguments)&lt;br/&gt;
    {&lt;br/&gt;
        return &quot;changed ${super.invokeMethod(a_object, a_methodName, a_arguments)}&quot;&lt;br/&gt;
    }&lt;br/&gt;
-------------------&lt;/p&gt;

&lt;p&gt;I also tested it under 1.0, and other versions of groovy 1.1 on a different machine. Here is the summary&lt;br/&gt;
Groovy 1.0:        Successful&lt;br/&gt;
Groovy 1.1-b2:  Successful&lt;br/&gt;
Groovy 1.1-b3:  Failed&lt;br/&gt;
Groovy 1.1-rc1: Failed (Log file attached)&lt;br/&gt;
Groovy 1.1-rc2: Failed (Unzipped over rc1 installation. May not be valid test case)&lt;/p&gt;

&lt;p&gt;So, either the changes to beta 3 broke the feature, or the documentation should be updated on the correct way to use this functionality.&lt;/p&gt;</description>
                <environment>Windows XP,&lt;br/&gt;
Command line version:&lt;br/&gt;
D:\Profiles\Adam\workspace\DelegatingMetaClassInvokeHelper\src&amp;gt;groovy -v&lt;br/&gt;
Groovy Version: 1.1-rc-1 JVM: 1.6.0_03-b05&lt;br/&gt;
&lt;br/&gt;
Eclipse Version: 3.3, with GroovyFeature 1.1.0.20071001, which includes Groovy 1.1-Beta2</environment>
        <key id="12817345">GROOVY-2263</key>
            <summary>DelegatingMetaClass causing java.lang.StackOverflowError when subclassed.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ait">Alex Tkachman</assignee>
                                    <reporter username="johannz">Adam Rinehart</reporter>
                        <labels>
                    </labels>
                <created>Sat, 3 Nov 2007 12:16:04 +0000</created>
                <updated>Sat, 22 Dec 2007 21:04:25 +0000</updated>
                            <resolved>Fri, 16 Nov 2007 00:22:09 +0000</resolved>
                                    <version>1.1-rc-1</version>
                                    <fixVersion>1.1-rc-3</fixVersion>
                                    <component>groovy-jdk</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14463464" author="ait" created="Tue, 13 Nov 2007 00:06:07 +0000"  >&lt;p&gt;Can&apos;t reproduce. Looks like everything already OK.&lt;br/&gt;
Test added&lt;/p&gt;</comment>
                            <comment id="14463564" author="johannz" created="Thu, 15 Nov 2007 01:40:26 +0000"  >&lt;p&gt;I pulled the latest code from subversion to verify this issue. I was not able to verify this fix sinceI am getting errors from the test case you added. This was revision 9152 of the CustomMetaClassTest.groovy&lt;/p&gt;

&lt;p&gt;Testcase: testReplaceMetaClass took 0.141 sec&lt;br/&gt;
	Caused an ERROR&lt;br/&gt;
null&lt;br/&gt;
java.lang.StackOverflowError&lt;/p&gt;

&lt;p&gt;and &lt;/p&gt;

&lt;p&gt;Testcase: testEmcCreated took 0 sec&lt;br/&gt;
	FAILED&lt;br/&gt;
expected:&amp;lt;class groovy.lang.ExpandoMetaClass&amp;gt; but was:&amp;lt;class groovy.lang.MetaClassImpl&amp;gt;&lt;br/&gt;
junit.framework.AssertionFailedError: expected:&amp;lt;class groovy.lang.ExpandoMetaClass&amp;gt; but was:&amp;lt;class groovy.lang.MetaClassImpl&amp;gt;&lt;/p&gt;


&lt;p&gt;In addition, I created a new bug, &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-2307&quot; title=&quot;Reading static metaClass property of a class replaces existing metaClass in registry&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-2307&quot;&gt;&lt;del&gt;GROOVY-2307&lt;/del&gt;&lt;/a&gt;, for a new issue I found with regards to the metaClass property.&lt;/p&gt;</comment>
                            <comment id="14463623" author="ait" created="Thu, 15 Nov 2007 03:23:50 +0000"  >&lt;p&gt;Adam!&lt;/p&gt;

&lt;p&gt;Are you saying that tests in trunk are broken? It is not a case. May be you need to do clean build.&lt;/p&gt;

&lt;p&gt;Alex&lt;/p&gt;</comment>
                            <comment id="14463538" author="johannz" created="Thu, 15 Nov 2007 10:09:50 +0000"  >&lt;p&gt;I think I have done a fresh build. I am following the instructions&lt;/p&gt;

&lt;p&gt;1. Created dir: C:\lib\Groovy-Nightly, point Subversion at &lt;a href=&quot;https://svn.codehaus.org/groovy/trunk/groovy/groovy-core&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.codehaus.org/groovy/trunk/groovy/groovy-core&lt;/a&gt;&lt;br/&gt;
2. Set GROOVY_HOME to &apos;C:\Lib\Groovy-Nightly\target\install&apos;&lt;br/&gt;
3. Get latest code&lt;br/&gt;
4. Go to directory&lt;br/&gt;
5. ant clean&lt;br/&gt;
6. ant install&lt;br/&gt;
Get the following message when it gets to the testing stage:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running UberTestCaseGroovySourceSubPackages&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 577, Failures: 2, Errors: 8, Time elapsed: 59.594 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test UberTestCaseGroovySourceSubPackages FAILED&lt;/p&gt;

&lt;p&gt;Attached is the TEST-UberTestCaseGroovySourceSubPackages.txt file that has the results listed. One of the failures is from a test case I added for &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-2307&quot; title=&quot;Reading static metaClass property of a class replaces existing metaClass in registry&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-2307&quot;&gt;&lt;del&gt;GROOVY-2307&lt;/del&gt;&lt;/a&gt;, but the other failure and the errors were there before I added my testcase.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure how to do any cleaner a build than I am already doing. I am following the instructions at &lt;a href=&quot;http://groovy.codehaus.org/Building+Groovy+from+Source&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://groovy.codehaus.org/Building+Groovy+from+Source&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14463537" author="johannz" created="Thu, 15 Nov 2007 16:08:22 +0000"  >&lt;p&gt;Never mind.&lt;/p&gt;

&lt;p&gt;It turns out that Groovy does not build cleanly with Java 1.6. I loaded Java 1.5 on another machine and was able to build correctly.&lt;/p&gt;

&lt;p&gt;So this artifact can be resolved and I apologize for my error.&lt;/p&gt;

&lt;p&gt;In a related note, would you please look at &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-2307&quot; title=&quot;Reading static metaClass property of a class replaces existing metaClass in registry&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-2307&quot;&gt;&lt;del&gt;GROOVY-2307&lt;/del&gt;&lt;/a&gt;. In that bug, I mention an additional test case that I created for CustomMetaClassTest.groovy that tests the interaction of DelegatingMetaClass and the CustomClass.metaClass static property accessor.&lt;/p&gt;

&lt;p&gt;I would like you to look at it since I proposed a possible change to DelegatingMetaClass to resolve that issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12721818" name="1.1-rc1.log" size="78701" author="johannz" created="Sat, 3 Nov 2007 12:16:04 +0000"/>
                            <attachment id="12721630" name="DelegatingMetaClassInvokeHelperTest.groovy" size="1422" author="johannz" created="Sat, 3 Nov 2007 12:16:04 +0000"/>
                            <attachment id="12721881" name="TEST-UberTestCaseGroovySourceSubPackages.txt" size="394815" author="johannz" created="Thu, 15 Nov 2007 10:09:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 2 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bq1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>