<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:08:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-3181] Cannot create instances of @Immutable classes that have single Map field</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-3181</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;The call &lt;tt&gt;new Foo(&lt;span class=&quot;error&quot;&gt;&amp;#91;:&amp;#93;&lt;/span&gt;)&lt;/tt&gt; below will lead to infinite recursion.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@Immutable &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Foo {
    Map bar
}
&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Foo([:])
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I guess the above code corresponds to&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Foo {
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Map bar
    Foo(Map bar) {
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;([&lt;span class=&quot;code-quote&quot;&gt;&apos;bar&apos;&lt;/span&gt;:bar])
    }
    Foo(HashMap args) {
       &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.bar = args[&lt;span class=&quot;code-quote&quot;&gt;&apos;bar&apos;&lt;/span&gt;].asImmutable()
    }
}
&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Foo([:])
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It will never reach the termitating HashMap constructor.&lt;/p&gt;

&lt;p&gt;Solution1: Generate only tuple-based ctor if single field. Do field initializations in this ctor.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12814477">GROOVY-3181</key>
            <summary>Cannot create instances of @Immutable classes that have single Map field</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="torda">Tord Alenljung</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Dec 2008 04:29:53 +0000</created>
                <updated>Tue, 23 Dec 2008 05:58:08 +0000</updated>
                            <resolved>Wed, 10 Dec 2008 21:45:10 +0000</resolved>
                                    <version>1.6-beta-2</version>
                                    <fixVersion>1.6-rc-1</fixVersion>
                    <fixVersion>1.7-beta-1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14465822" author="torda" created="Thu, 4 Dec 2008 04:38:52 +0000"  >&lt;p&gt;Workaround: call Map-based ctor (HashMap) explicity&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Foo((HashMap) [bar:[:]])&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14465770" author="blackdrag" created="Thu, 4 Dec 2008 17:01:23 +0000"  >&lt;p&gt;fixed&lt;/p&gt;</comment>
                            <comment id="14465868" author="paulk" created="Tue, 9 Dec 2008 06:33:14 +0000"  >&lt;p&gt;Reopen until we handle HashMap case - seems close enough to original issue that I don&apos;t think it warrants another separate issue.&lt;/p&gt;</comment>
                            <comment id="14465789" author="paulk" created="Tue, 9 Dec 2008 06:35:53 +0000"  >&lt;p&gt;Added a solution for HashMap case. I haven&apos;t thought through the order in which initialisation vs special case handling should occur yet. Test still to come&lt;/p&gt;</comment>
                            <comment id="14478352" author="paulk" created="Wed, 10 Dec 2008 21:45:10 +0000"  >&lt;p&gt;Should be fixed in trunk and 1.6-rc-1&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 50 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bms7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>