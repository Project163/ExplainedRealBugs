<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:44:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-7225] GroovyShell/Grape cannot use Extension Modules that extend Closure</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-7225</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;Test.groovy&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@Grab(&lt;span class=&quot;code-quote&quot;&gt;&apos;org.elasticsearch:elasticsearch-groovy:1.4.2&apos;&lt;/span&gt;)
def printClosure(Closure closure) {
  println closure.asJsonString()
}

printClosure { field = &lt;span class=&quot;code-quote&quot;&gt;&quot;simple&quot;&lt;/span&gt; }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The extension method&apos;s signature is &lt;tt&gt;static String asJsonString(Closure self)&lt;/tt&gt; (&lt;a href=&quot;https://github.com/elasticsearch/elasticsearch-groovy/blob/v1.4.2/src/main/groovy/org/elasticsearch/groovy/common/xcontent/XContentBuilderExtensions.groovy#L97&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/elasticsearch/elasticsearch-groovy/blob/v1.4.2/src/main/groovy/org/elasticsearch/groovy/common/xcontent/XContentBuilderExtensions.groovy#L97&lt;/a&gt;).&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;Output&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ groovy --indy Test.groovy
Caught: groovy.lang.MissingMethodException: No signature of method: Test.asJsonString() is applicable &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; argument types: () values: []
Possible solutions: toString(), toString()
groovy.lang.MissingMethodException: No signature of method: Test.asJsonString() is applicable &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; argument types: () values: []
Possible solutions: toString(), toString()
	at Test.printClosure(Test.groovy:3)
	at Test.run(Test.groovy:6)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Tested on both a Mac and Linux (with and without --indy does not matter):&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Groovy Version: 2.3.9 JVM: 1.8.0_25 Vendor: Oracle Corporation OS: Mac OS X&lt;/li&gt;
	&lt;li&gt;Groovy Version 2.3.9 JVM: 1.7.0_65 Vendor: Oracle Corporation OS: Linux&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;However, if I don&apos;t use Grape/the GroovyShell, then the same code works with the same dependencies. I always use Gradle to build my code, so it wasn&apos;t until a user pointed this issue out that I became aware of it.&lt;/p&gt;

&lt;p&gt;This relates to &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-6557&quot; title=&quot;Extension methods with closure parameters not found in GroovyShell&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-6557&quot;&gt;&lt;del&gt;GROOVY-6557&lt;/del&gt;&lt;/a&gt;. On my Mac, I was always able to reproduce &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-6447&quot; title=&quot;Groovy-module&amp;#39;s extension method don&amp;#39;t work by Grape Annotation(always on Java SE 8)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-6447&quot;&gt;&lt;del&gt;GROOVY-6447&lt;/del&gt;&lt;/a&gt;, but my core issue appears to relate to &lt;tt&gt;Closure&lt;/tt&gt; extension methods across multiple platforms (&lt;a href=&quot;https://github.com/elasticsearch/elasticsearch-groovy/issues/19&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/elasticsearch/elasticsearch-groovy/issues/19&lt;/a&gt;).&lt;/p&gt;</description>
                <environment>Mac OS X 10.10 with Java 8u25&lt;br/&gt;
Ubuntu Server 14.04.1 with Java 7u65</environment>
        <key id="12811474">GROOVY-7225</key>
            <summary>GroovyShell/Grape cannot use Extension Modules that extend Closure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="melix">C&#233;dric Champeau</assignee>
                                    <reporter username="pickypg">Chris Earle</reporter>
                        <labels>
                    </labels>
                <created>Sun, 28 Dec 2014 01:10:11 +0000</created>
                <updated>Wed, 21 Jan 2015 15:26:37 +0000</updated>
                            <resolved>Mon, 29 Dec 2014 14:16:51 +0000</resolved>
                                    <version>2.3.7</version>
                    <version>2.3.8</version>
                    <version>2.3.9</version>
                                    <fixVersion>2.3.10</fixVersion>
                    <fixVersion>2.4.0-rc-2</fixVersion>
                                    <component>Grape</component>
                    <component>Groovysh</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14476823" author="pickypg" created="Sun, 28 Dec 2014 15:47:03 +0000"  >&lt;p&gt;I added a test to the &lt;tt&gt;ExtensionModuleTest&lt;/tt&gt; that was suspiciously not failing even when specifying &lt;tt&gt;assert false&lt;/tt&gt; at the top. I created a &lt;a href=&quot;https://github.com/groovy/groovy-core/pull/574&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR&lt;/a&gt; to fix this issue by checking for errors in the output &amp;#8211; and now 2 of the existing 3 tests fail, plus my added test.&lt;/p&gt;

&lt;p&gt;I realize that tends to go against the general idea of a PR (new test failures), but I figured it would make a good starting point.&lt;/p&gt;</comment>
                            <comment id="14476903" author="pickypg" created="Sun, 28 Dec 2014 15:55:52 +0000"  >&lt;p&gt;Source code/gradle build for the jar used in the unit tests from the comment.&lt;/p&gt;</comment>
                            <comment id="14476841" author="pickypg" created="Mon, 29 Dec 2014 14:14:12 +0000"  >&lt;p&gt;Closure extension compiled with Java 6 compatibility.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310260">
                    <name>Related</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12817319">GROOVY-6557</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12723112" name="groovy7225.zip" size="3894" author="pickypg" created="Mon, 29 Dec 2014 14:15:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 47 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ci3z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>