<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:20:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-6146] Calling a Java vararg method from Groovy with a null argument cast to the vararg type behaves differently than in Java</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-6146</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;We have this Java class:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;JavaReceiver.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;JavaReceiver {

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; receive(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;... x) {
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; res = ((x == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) ? &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt; : (&lt;span class=&quot;code-quote&quot;&gt;&quot;an array of size &quot;&lt;/span&gt; + x.length));
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;received &lt;span class=&quot;code-quote&quot;&gt;&apos;x&apos;&lt;/span&gt; is &quot;&lt;/span&gt; + res;
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;which is called from this Java class to verify various effect:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;JavaSender.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.junit.Test;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;JavaSender {

    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void sendNothing() {
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;sendNothing(): &quot;&lt;/span&gt; + JavaReceiver.receive());
    }

    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void sendNullWithNoCast() {
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;sendNullWithNoCast(): &quot;&lt;/span&gt; + JavaReceiver.receive(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;));
    }

    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void sendNullWithCastToString() {
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;sendNullWithCastToString(): &quot;&lt;/span&gt; + JavaReceiver.receive((&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;)&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;));
    }

    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void sendNullWithCastToArray() {
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;sendNullWithCastToArray(): &quot;&lt;/span&gt; + JavaReceiver.receive((&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[])&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;));
    }

    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void sendOneValue() {
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;sendOneValue(): &quot;&lt;/span&gt; + JavaReceiver.receive(&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;));
    }

    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void sendThreeValues() {
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;sendThreeValues(): &quot;&lt;/span&gt; + JavaReceiver.receive(&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;b&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;c&quot;&lt;/span&gt;));
    }
    
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void sendArray() {
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;sendArray(): &quot;&lt;/span&gt; + JavaReceiver.receive(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[]{&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;b&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;c&quot;&lt;/span&gt;}));
    }

}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Running the test above yields this output:&lt;/p&gt;

&lt;p&gt;sendNothing(): received &apos;x&apos; is an array of size 0&lt;br/&gt;
sendNullWithNoCast(): received &apos;x&apos; is null&lt;br/&gt;
sendNullWithCastToString(): received &apos;x&apos; is an array of size 1&lt;br/&gt;
sendNullWithCastToArray(): received &apos;x&apos; is null&lt;br/&gt;
sendOneValue(): received &apos;x&apos; is an array of size 1&lt;br/&gt;
sendThreeValues(): received &apos;x&apos; is an array of size 3&lt;br/&gt;
sendArray(): received &apos;x&apos; is an array of size 3&lt;/p&gt;

&lt;p&gt;Using essentially similar code from Groovy:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;GroovySender.groovy&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.junit.Test

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;GroovySender {

    @Test
    void sendNothing() {
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out &amp;lt;&amp;lt; &lt;span class=&quot;code-quote&quot;&gt;&quot;sendNothing(): &quot;&lt;/span&gt; &amp;lt;&amp;lt; JavaReceiver.receive() &amp;lt;&amp;lt; &lt;span class=&quot;code-quote&quot;&gt;&quot;\n&quot;&lt;/span&gt;
    }

    @Test
    void sendNullWithNoCast() {
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out &amp;lt;&amp;lt; &lt;span class=&quot;code-quote&quot;&gt;&quot;sendNullWithNoCast(): &quot;&lt;/span&gt; &amp;lt;&amp;lt; JavaReceiver.receive(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &amp;lt;&amp;lt; &lt;span class=&quot;code-quote&quot;&gt;&quot;\n&quot;&lt;/span&gt;
    }

    @Test
    void sendNullWithCastToString() {
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out &amp;lt;&amp;lt; &lt;span class=&quot;code-quote&quot;&gt;&quot;sendNullWithCastToString(): &quot;&lt;/span&gt; &amp;lt;&amp;lt; JavaReceiver.receive((&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;)&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &amp;lt;&amp;lt; &lt;span class=&quot;code-quote&quot;&gt;&quot;\n&quot;&lt;/span&gt;
    }

    @Test
    void sendNullWithCastToArray() {
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out &amp;lt;&amp;lt; &lt;span class=&quot;code-quote&quot;&gt;&quot;sendNullWithCastToArray(): &quot;&lt;/span&gt; &amp;lt;&amp;lt; JavaReceiver.receive((&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[])&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &amp;lt;&amp;lt; &lt;span class=&quot;code-quote&quot;&gt;&quot;\n&quot;&lt;/span&gt;
    }

    @Test
    void sendOneValue() {
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out &amp;lt;&amp;lt; &lt;span class=&quot;code-quote&quot;&gt;&quot;sendOneValue(): &quot;&lt;/span&gt; + JavaReceiver.receive(&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;) &amp;lt;&amp;lt; &lt;span class=&quot;code-quote&quot;&gt;&quot;\n&quot;&lt;/span&gt;
    }

    @Test
    void sendThreeValues() {
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out &amp;lt;&amp;lt; &lt;span class=&quot;code-quote&quot;&gt;&quot;sendThreeValues(): &quot;&lt;/span&gt; + JavaReceiver.receive(&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;b&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;c&quot;&lt;/span&gt;) &amp;lt;&amp;lt; &lt;span class=&quot;code-quote&quot;&gt;&quot;\n&quot;&lt;/span&gt;
    }

    @Test
    void sendArray() {
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out &amp;lt;&amp;lt; &lt;span class=&quot;code-quote&quot;&gt;&quot;sendArray(): &quot;&lt;/span&gt; + JavaReceiver.receive( [&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;b&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;c&quot;&lt;/span&gt;] as &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] ) &amp;lt;&amp;lt; &lt;span class=&quot;code-quote&quot;&gt;&quot;\n&quot;&lt;/span&gt;
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Yields the different output:&lt;/p&gt;

&lt;p&gt;sendNothing(): received &apos;x&apos; is an array of size 0&lt;br/&gt;
sendNullWithNoCast(): received &apos;x&apos; is null&lt;br/&gt;
&lt;b&gt;sendNullWithCastToString(): received &apos;x&apos; is null&lt;/b&gt;&lt;br/&gt;
sendNullWithCastToArray(): received &apos;x&apos; is null&lt;br/&gt;
sendOneValue(): received &apos;x&apos; is an array of size 1&lt;br/&gt;
sendThreeValues(): received &apos;x&apos; is an array of size 3&lt;br/&gt;
sendArray(): received &apos;x&apos; is an array of size 3&lt;/p&gt;

&lt;p&gt;So the &quot;cast to a String&quot; does not result in a call with the argument&lt;br/&gt;
&quot;String[]&lt;/p&gt;
{null}
&lt;p&gt;&quot;. &lt;/p&gt;

&lt;p&gt;Maybe that is expected behaviour though.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12818515">GROOVY-6146</key>
            <summary>Calling a Java vararg method from Groovy with a null argument cast to the vararg type behaves differently than in Java</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="yatima">David Tonhofer</reporter>
                        <labels>
                            <label>varargs</label>
                    </labels>
                <created>Mon, 6 May 2013 13:38:11 +0000</created>
                <updated>Wed, 23 Aug 2023 09:11:21 +0000</updated>
                            <resolved>Sat, 15 Jul 2023 22:09:00 +0000</resolved>
                                    <version>2.1.2</version>
                                    <fixVersion>5.0.0-alpha-1</fixVersion>
                                    <component>groovy-runtime</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14474477" author="blackdrag" created="Tue, 7 May 2013 02:55:48 +0000"  >&lt;p&gt;interesting catch. The behavior caused by the cast is usually that if no direct match is found, the normal runtime type is used. So it is not surprising to me how Groovy behaves... The Java behavior makes sense in its own way... I think it would be better to fix it.&lt;/p&gt;</comment>
                            <comment id="17583738" author="emilles" created="Tue, 23 Aug 2022 16:30:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-10099&quot; title=&quot;A single null argument to a varargs parameter is received as null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-10099&quot;&gt;&lt;del&gt;GROOVY-10099&lt;/del&gt;&lt;/a&gt; and associated pull requests have much discussion.  There is little that can be done without RTTI.  &lt;tt&gt;InvocationWriter&lt;/tt&gt; has been updated to handle variadic scenarios with info available.  Static compilation is the way to go here.&lt;/p&gt;</comment>
                            <comment id="17583789" author="emilles" created="Tue, 23 Aug 2022 18:18:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/commit/7824bd62fc4cc21e1a6b6b376f4835f6f6049d1a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/7824bd62fc4cc21e1a6b6b376f4835f6f6049d1a&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17743463" author="emilles" created="Sat, 15 Jul 2023 22:09:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/commit/b96166acef59760c903ab88b3029aeb169f9df12&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/b96166acef59760c903ab88b3029aeb169f9df12&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13379468">GROOVY-10099</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13476719">GROOVY-10722</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12816382">GROOVY-1026</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 17 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bmv3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>