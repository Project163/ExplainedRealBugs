<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:23:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-11269] GroovyClassDoc has empty &apos;enumConstants&apos; when call method GroovyDocParser.getClassDocsFromSingleSource(...)</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-11269</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-10886&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/GROOVY-10886&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-11130&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/GROOVY-11130&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In our project we try to update gradle from 6.8.2 to 8.2.1.&lt;br/&gt;
And gradle 6.8.2 -&amp;gt; use groovy 2.5.12&lt;br/&gt;
But gradle 8.2.1 -&amp;gt; use groovy 3.0.17&lt;/p&gt;

&lt;p&gt;How we parse java/groovy files now -&amp;gt;&lt;br/&gt;
59 line&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, GroovyClassDoc&amp;gt; parseGroovy(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; src, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; packagePath, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; file)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/ishgroup/oncourse/blob/main/buildSrc/apidoc/src/main/groovy/au/com/ish/docs/DslGroovyRootDocBuilder.groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ishgroup/oncourse/blob/main/buildSrc/apidoc/src/main/groovy/au/com/ish/docs/DslGroovyRootDocBuilder.groovy&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;But it doesn&apos;t work for gradle 8.2.1 (groovy 3.0.17).&lt;br/&gt;
After discussion this issue in these tasks:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-10886&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/GROOVY-10886&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-11130&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/GROOVY-11130&lt;/a&gt;&lt;br/&gt;
I try to use&#160;GroovyDocParser from&#160;org.codehaus.groovy.tools.groovydoc.antlr4&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, GroovyClassDoc&amp;gt; parseGroovy(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; src, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; packagePath, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; file)
      &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; RecognitionException, TokenStreamException {

   GroovyDocParser groovyDocParser = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GroovyDocParser(links, properties)
   def GroovyClassDocMap = groovyDocParser.getClassDocsFromSingleSource(packagePath, file, src)
   &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; GroovyClassDocMap
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;And It seems to work. But I found this problem:&lt;/p&gt;

&lt;p&gt;When I parse groovy enums, GroovyClassDoc has empty &apos;enumConstants&apos; and all enum values are in &apos;fields&apos;.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13065758/13065758_image-2024-01-05-20-21-42-826.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13065759/13065759_image-2024-01-05-20-21-01-570.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;But our old implementation has:&lt;br/&gt;
&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13065761/13065761_image-2024-01-05-20-30-29-173.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;



&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13563729">GROOVY-11269</key>
            <summary>GroovyClassDoc has empty &apos;enumConstants&apos; when call method GroovyDocParser.getClassDocsFromSingleSource(...)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="Litvinko">Dmitry</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Jan 2024 17:22:29 +0000</created>
                <updated>Tue, 5 Mar 2024 01:53:27 +0000</updated>
                            <resolved>Sat, 13 Jan 2024 22:45:27 +0000</resolved>
                                    <version>2.5.12</version>
                    <version>3.0.17</version>
                                    <fixVersion>4.0.18</fixVersion>
                    <fixVersion>5.0.0-alpha-5</fixVersion>
                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17803815" author="JIRAUSER289117" created="Sat, 6 Jan 2024 13:56:11 +0000"  >&lt;p&gt;And one more question.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulk&quot; class=&quot;user-hover&quot; rel=&quot;paulk&quot;&gt;paulk&lt;/a&gt; wrote in &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-11130&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/GROOVY-11130&lt;/a&gt; comment:&lt;br/&gt;
&lt;cite&gt;GroovyRootDocBuilder calls getClassDocsFromSingleSource() for all Groovy versions. It uses the legacy parser underneath for Groovy versions prior to 3. It uses the new parser only for versions 4 and above. In Groovy 3, it defaults to the new parser but can be configured to use the old parser.&lt;/cite&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;How can I use old parser for groovy 3.0.17? How can I configure GroovyRootDocBuilder?&lt;/p&gt;</comment>
                            <comment id="17805465" author="paulk" created="Thu, 11 Jan 2024 09:33:50 +0000"  >&lt;p&gt;If you can try the latest snapshot to see if the problem is fixed, that would be great.&lt;br/&gt;
To switch to the old parser on Groovy 3, you need to set the &lt;tt&gt;groovy.antlr4&lt;/tt&gt; system property to &lt;tt&gt;false&lt;/tt&gt;. Exactly how to do that will depend on how you are running Groovydoc.&lt;/p&gt;</comment>
                            <comment id="17806724" author="JIRAUSER289117" created="Mon, 15 Jan 2024 10:00:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulk&quot; class=&quot;user-hover&quot; rel=&quot;paulk&quot;&gt;paulk&lt;/a&gt; hi,&lt;/p&gt;

&lt;p&gt;1) we can&apos;t use latest groovy snapshot, because the gradle forces us to use the default groovy version from gradle. In our case, gradle 8.2.1 uses groovy 3.0.17.&lt;/p&gt;

&lt;p&gt;2) How and where should I set set the&#160;&lt;tt&gt;groovy.antlr4&lt;/tt&gt;&#160;system property to&#160;&lt;tt&gt;false? To create GroovyClassDoc I use this one:&lt;/tt&gt;&lt;br/&gt;
{{}}&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
GroovyDocParser groovyDocParser = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GroovyDocParser(links, properties)
def GroovyClassDocMap = groovyDocParser.getClassDocsFromSingleSource(packagePath, file, src) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;tt&gt;&#160;here you can find full file: &lt;a href=&quot;https://github.com/ishgroup/oncourse/pull/1192/files#diff-33ed7c0380b15143b4e46d30aa40b05e3d35998a58fcbed6da2ce3c6c349861a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ishgroup/oncourse/pull/1192/files#diff-33ed7c0380b15143b4e46d30aa40b05e3d35998a58fcbed6da2ce3c6c349861a&lt;/a&gt;&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="17806731" author="JIRAUSER289117" created="Mon, 15 Jan 2024 10:30:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulk&quot; class=&quot;user-hover&quot; rel=&quot;paulk&quot;&gt;paulk&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;I tried to use old parser (set the &lt;tt&gt;groovy.antlr4&lt;/tt&gt; system property to &lt;tt&gt;false&lt;/tt&gt;):&lt;br/&gt;
&#160;&lt;br/&gt;
&#160;&lt;tt&gt;./gradlew clean -x test server:dslDocs -Dgroovy.antlr4=false&lt;/tt&gt;&lt;br/&gt;
but it failed with our first exception:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Execution failed &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; task &lt;span class=&quot;code-quote&quot;&gt;&apos;:server:dslDocs&apos;&lt;/span&gt;.
&amp;gt; startup failed:
  TaggableClasses.groovy: 21: unexpected token: 2 @ line 21, column 15.
        COURSE_CLASS(2),
                   ^
  
  1 error&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;tt&gt;When we updated gradle to 8.2.1 and try to execute server:dslDocs without &apos;GroovyDocParser&apos; with getClassDocsFromSingleSource - we use or old implementation (parseGroovy method in 59 line): &lt;a href=&quot;https://github.com/ishgroup/oncourse/blob/main/buildSrc/apidoc/src/main/groovy/au/com/ish/docs/DslGroovyRootDocBuilder.groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ishgroup/oncourse/blob/main/buildSrc/apidoc/src/main/groovy/au/com/ish/docs/DslGroovyRootDocBuilder.groovy&lt;/a&gt;&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;I got the same Exception with &apos;TaggableClasses.groovy&apos;&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;here I created the issue with the same case: &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-10886&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/GROOVY-10886&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;and here we&apos;ve already discussed this: &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-11130&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/GROOVY-11130&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13065759" name="image-2024-01-05-20-21-01-570.png" size="128712" author="Litvinko" created="Fri, 5 Jan 2024 17:21:01 +0000"/>
                            <attachment id="13065758" name="image-2024-01-05-20-21-42-826.png" size="68129" author="Litvinko" created="Fri, 5 Jan 2024 17:21:43 +0000"/>
                            <attachment id="13065760" name="image-2024-01-05-20-28-41-678.png" size="84339" author="Litvinko" created="Fri, 5 Jan 2024 17:28:41 +0000"/>
                            <attachment id="13065761" name="image-2024-01-05-20-30-29-173.png" size="104860" author="Litvinko" created="Fri, 5 Jan 2024 17:30:29 +0000"/>
                            <attachment id="13065762" name="image-2024-01-05-20-32-52-646.png" size="50621" author="Litvinko" created="Fri, 5 Jan 2024 17:32:52 +0000"/>
                            <attachment id="13065763" name="image-2024-01-05-20-32-58-921.png" size="50621" author="Litvinko" created="Fri, 5 Jan 2024 17:32:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 43 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1ml34:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>