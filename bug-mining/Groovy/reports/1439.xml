<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:18:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-4609] Using log variable created with @Log or @Log4j causes compiler error if used in static method</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-4609</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;If I have a class with it and use the &apos;log&apos; variable in a static method I get a compilation error. &lt;/p&gt;


&lt;p&gt;Log4jTest.groovy:&lt;br/&gt;
import groovy.util.logging.Log4j&lt;/p&gt;

&lt;p&gt;@Log4j&lt;br/&gt;
class TestLog4j {&lt;/p&gt;

&lt;p&gt;  public static void main(String[] args) &lt;/p&gt;
{
    log.info &quot;Hello World&quot;
  }
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;Error Message:&lt;br/&gt;
Apparent variable &apos;log&apos; was found in a static scope but doesn&apos;t refer to a local variable, static field or class. Possible causes:&lt;br/&gt;
You attempted to reference a variable in the binding or an instance variable from a static context.&lt;br/&gt;
You misspelled a classname or statically imported field. Please check the spelling.&lt;br/&gt;
You attempted to use a method &apos;log&apos; but left out brackets in a place not allowed by the grammar. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12815414">GROOVY-4609</key>
            <summary>Using log variable created with @Log or @Log4j causes compiler error if used in static method</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="guillaume">Guillaume Sauthier</assignee>
                                    <reporter username="krush">Kurt Rush</reporter>
                        <labels>
                    </labels>
                <created>Fri, 31 Dec 2010 07:43:29 +0000</created>
                <updated>Wed, 19 Oct 2011 04:04:40 +0000</updated>
                            <resolved>Sat, 12 Feb 2011 15:34:19 +0000</resolved>
                                    <version>1.8-beta-3</version>
                                    <fixVersion>1.8-rc-1</fixVersion>
                    <fixVersion>1.9-beta-1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14470613" author="krush" created="Fri, 31 Dec 2010 07:46:13 +0000"  >&lt;p&gt;I am not sure if this is related but here is a blog that describes the same problem and his attempt to fix. But his fix does not work either (you will get a NPE if you use his).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://enfranchisedmind.com/blog/posts/with-log-groovy-ast-transform/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://enfranchisedmind.com/blog/posts/with-log-groovy-ast-transform/&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="14470755" author="guillaume" created="Fri, 11 Feb 2011 09:19:14 +0000"  >&lt;p&gt;The logger injected in the classes is a field, but not a static one, hence why you&apos;re seeing this error message.&lt;br/&gt;
So should the logger be a static field instead? I think that&apos;s the question to ask.&lt;/p&gt;</comment>
                            <comment id="14470908" author="krush" created="Sat, 12 Feb 2011 05:40:22 +0000"  >&lt;p&gt;I think it should be static for several reasons. First it is a defacto Java standard to have a static logger variable and I think most Java devs would expect it to be that way. So anyone coming from the Java world would be surprised that it was not static. Secondly, the non-static version does not work in one important use case which is inside the main() function.&lt;/p&gt;

&lt;p&gt;Is there any reason for it to &lt;b&gt;not&lt;/b&gt; be static?&lt;/p&gt;</comment>
                            <comment id="14470839" author="melix" created="Sat, 12 Feb 2011 06:41:17 +0000"  >&lt;p&gt;Guillaume, the injected field is static, but the compiler fails before the phase where the field is injected. It fails at semantic analysis where the field is injected at canonicalization. Changing from &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@GroovyASTTransformation(phase = CompilePhase.CANONICALIZATION)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;LogASTTransformation &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; ASTTransformation {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;to&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@GroovyASTTransformation(phase = CompilePhase.SEMANTIC_ANALYSIS)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;LogASTTransformation &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; ASTTransformation {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;solves the problem. I&apos;m not sure why the original transform phase is CANONICALIZATION though.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;update&amp;#93;&lt;/span&gt; Changing the phase doesn&apos;t break any test. If the phase is important, there should be test cases for that.&lt;/p&gt;</comment>
                            <comment id="14470825" author="guillaume" created="Sat, 12 Feb 2011 07:15:04 +0000"  >&lt;p&gt;Yup, I&apos;ve changed the compile phase and noticed things were fine too.&lt;br/&gt;
I haven&apos;t added tests yet though.&lt;br/&gt;
I&apos;m wondering if there were some reason for the canonicalization phase for being chosen though.&lt;/p&gt;</comment>
                            <comment id="14470857" author="guillaume" created="Sat, 12 Feb 2011 07:15:19 +0000"  >&lt;p&gt;So it looks like the Log transformation happens in canonicalization phase, which is after the semantic analysis phase where the static verifier kicks in, and throws the exception you&apos;ve been seeing.&lt;/p&gt;</comment>
                            <comment id="14470775" author="guillaume" created="Sat, 12 Feb 2011 07:15:57 +0000"  >&lt;p&gt;Weird, my comment didn&apos;t get through initially... hmmm... the JIRA mysteries...&lt;/p&gt;</comment>
                            <comment id="14471942" author="smartini" created="Wed, 19 Oct 2011 04:04:40 +0000"  >&lt;p&gt;Hi all,&lt;br/&gt;
sorry but I think the issue is still valid (at least for the @Log annotation, my use case).&lt;br/&gt;
I&apos;m using Groovy-1.8.2 (from latest eclipse plugin) and I have the same error described here.&lt;br/&gt;
Tell me if you need another ticket (I&apos;m not able to reopen this).&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Sandro&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 5 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2c5m7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>