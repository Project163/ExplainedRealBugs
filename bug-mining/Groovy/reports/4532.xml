<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:20:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-9999] @TypeChecked results in Error when groovy casts to BigDecimal ([Static type checking] - Cannot find matching method java.lang.Math#sqrt(java.math.BigDecimal))</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-9999</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;From Groovy &amp;gt;2.4 simple calculations cannot be @TypeChecked without loads of casting:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;import groovy.transform.TypeChecked&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;@TypeChecked&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;def test() {&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160;&#160; Math.sqrt(Math.PI*2)&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;}&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;=&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Static type checking&amp;#93;&lt;/span&gt; - Cannot find matching method java.lang.Math#sqrt(java.math.BigDecimal). Please check if the declared type is correct and if the method exists.&lt;/p&gt;

&lt;p&gt;in Groovy 2.4 this was valid code.&lt;/p&gt;

&lt;p&gt;I was able to write a TypeChecker, but it looks pretty ugly and i am not shure, that this does not add other complications.&lt;br/&gt;
Since most of my colleagues are not groovy mains, i prefer forcing the TypeChecker, but this would lead to permanent castings from BigDecimal to double before calling any method. &lt;/p&gt;

&lt;p&gt;Any better workaround or a fix is appreciated.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13367188">GROOVY-9999</key>
            <summary>@TypeChecked results in Error when groovy casts to BigDecimal ([Static type checking] - Cannot find matching method java.lang.Math#sqrt(java.math.BigDecimal))</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="vorgi">Andreas Vorgeitz</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Mar 2021 09:05:12 +0000</created>
                <updated>Mon, 27 Nov 2023 19:59:20 +0000</updated>
                            <resolved>Sat, 17 Sep 2022 07:24:55 +0000</resolved>
                                    <version>2.5.11</version>
                    <version>3.0.7</version>
                    <version>4.0.0-alpha-2</version>
                                    <fixVersion>4.0.5</fixVersion>
                                    <component>Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="2400">40m</timespent>
                                <comments>
                            <comment id="17307803" author="emilles" created="Wed, 24 Mar 2021 12:50:47 +0000"  >&lt;p&gt;See also &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8948&quot; title=&quot;BigDecimal to primitive conversion not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8948&quot;&gt;&lt;del&gt;GROOVY-8948&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8488&quot; title=&quot;STC: floating-point literals no longer accepted as args to method with double parameter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8488&quot;&gt;&lt;del&gt;GROOVY-8488&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8168&quot; title=&quot;When using Interface: BigDecimal cannot be cast to Double&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8168&quot;&gt;&lt;del&gt;GROOVY-8168&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17307806" author="vorgi" created="Wed, 24 Mar 2021 12:54:23 +0000"  >&lt;p&gt;Yes, i looked at them, but the thing is, here when you remove @TypeChecked, the code works fine. So i was assuming the Typechecker should not create errors on working code, especially when it worked in Groovy 2.4 (yes we are a bit late to switching to 2.5, but the error is also in the 3 and 4 version).  &lt;/p&gt;</comment>
                            <comment id="17307818" author="emilles" created="Wed, 24 Mar 2021 13:15:06 +0000"  >&lt;p&gt;Just making the links so anyone that picks this up can consider the larger picture.&lt;/p&gt;</comment>
                            <comment id="17351365" author="chrylis" created="Tue, 25 May 2021 22:03:20 +0000"  >&lt;p&gt;Noting that this is still present in 3.0.8 and the latest 3.0 nightly. Even a literal &lt;tt&gt;Math.sqrt(4.0)&lt;/tt&gt; results in a compile error.&lt;/p&gt;</comment>
                            <comment id="17606059" author="daniel_sun" created="Sat, 17 Sep 2022 07:24:35 +0000"  >&lt;p&gt;Your code works well with groovy 4.0.5&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.TypeChecked

@TypeChecked
def test() {
   &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.sqrt(&lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.PI*2)
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17790244" author="githubbot" created="Mon, 27 Nov 2023 19:59:20 +0000"  >&lt;p&gt;eric-milles closed pull request #1602: &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-9999&quot; title=&quot;@TypeChecked results in Error when groovy casts to BigDecimal ([Static type checking] - Cannot find matching method java.lang.Math#sqrt(java.math.BigDecimal))&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-9999&quot;&gt;&lt;del&gt;GROOVY-9999&lt;/del&gt;&lt;/a&gt;,&lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8488&quot; title=&quot;STC: floating-point literals no longer accepted as args to method with double parameter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8488&quot;&gt;&lt;del&gt;GROOVY-8488&lt;/del&gt;&lt;/a&gt;:STC:make decimal literal parameter can auto c&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/1602&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1602&lt;/a&gt;&lt;/p&gt;

</comment>
                    </comments>
                    <attachments>
                            <attachment id="13022887" name="TypeChecker.groovy" size="2859" author="vorgi" created="Wed, 24 Mar 2021 09:05:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 50 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0p4hc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>