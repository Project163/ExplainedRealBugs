<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:37:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-6405] AccessControlException with Google App Engine and indy version of the Groovy</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-6405</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;When trying to compile groovlet on Google App Engine development server I get the attached exception.&lt;/p&gt;

&lt;p&gt;It looks this only apply when indy version of Groovy is used, default version&lt;br/&gt;
seems to be ok.&lt;/p&gt;

&lt;p&gt;The problem occurs in org.codehaus.groovy.vmplugin.v5.Java5.configureAnnotation(Java5.java:265) when&lt;br/&gt;
the annotation is sun.reflect.CallerSensitive.&lt;/p&gt;</description>
                <environment>java version &amp;quot;1.7.0_45&amp;quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.7.0_45-b18)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 24.45-b08, mixed mode)&lt;br/&gt;
on Ubuntu 12.04 x64</environment>
        <key id="12817189">GROOVY-6405</key>
            <summary>AccessControlException with Google App Engine and indy version of the Groovy</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blackdrag">Jochen Theodorou</assignee>
                                    <reporter username="musketyr">Vladim&#237;r Oran&#253;</reporter>
                        <labels>
                    </labels>
                <created>Mon, 28 Oct 2013 18:31:20 +0000</created>
                <updated>Thu, 15 Oct 2015 18:19:58 +0000</updated>
                            <resolved>Thu, 21 Nov 2013 05:32:29 +0000</resolved>
                                    <version>2.1.8</version>
                                    <fixVersion>2.2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14475053" author="musketyr" created="Mon, 28 Oct 2013 18:34:32 +0000"  >&lt;p&gt;Is very likely this is an OS dependent problem. Please, try it in virutal machine of Ubuntu 12.04. It has been reported here too:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://plus.google.com/u/0/107804573729662238528/posts/RXwLmc3SHcV&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://plus.google.com/u/0/107804573729662238528/posts/RXwLmc3SHcV&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14474954" author="blackdrag" created="Tue, 29 Oct 2013 03:26:55 +0000"  >&lt;p&gt;The line causing the problem is Method[] declaredMethods = type.getDeclaredMethods(); I assume type here is a class from sun.reflect. But why we create a ClassNode for a class from that package is a bit beyond me&lt;/p&gt;</comment>
                            <comment id="14475038" author="blackdrag" created="Tue, 29 Oct 2013 09:24:11 +0000"  >&lt;p&gt;Vladimir, are you using the openjdk, or a package from Ubuntu for the jdk? I cannot find the link anymore, but somewhere I had a page saying that the openjdk in Ubuntu has messed up priviledges. If you could test with the oracle jdk it would surely help to ensure the issue is not related to that&lt;/p&gt;</comment>
                            <comment id="14474978" author="musketyr" created="Wed, 30 Oct 2013 13:45:57 +0000"  >&lt;p&gt;It shows me I&apos;m using oracle java 7.&lt;/p&gt;</comment>
                            <comment id="14475123" author="musketyr" created="Wed, 30 Oct 2013 17:45:26 +0000"  >&lt;p&gt;don&apos;t you know, could be these messed up priveledges shared across the java vendor packages?&lt;/p&gt;</comment>
                            <comment id="14475154" author="musketyr" created="Wed, 30 Oct 2013 18:35:27 +0000"  >&lt;p&gt;verified - I use Oracle Java&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;groovy:000&amp;gt; &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.getProperty(&lt;span class=&quot;code-quote&quot;&gt;&apos;java.vendor&apos;&lt;/span&gt;)
===&amp;gt; Oracle Corporation
groovy:000&amp;gt; &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.getProperty(&lt;span class=&quot;code-quote&quot;&gt;&apos;java.vendor.url&apos;&lt;/span&gt;)
===&amp;gt; http:&lt;span class=&quot;code-comment&quot;&gt;//java.oracle.com/
&lt;/span&gt;groovy:000&amp;gt; &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.getProperty(&lt;span class=&quot;code-quote&quot;&gt;&apos;java.version&apos;&lt;/span&gt;)
===&amp;gt; 1.7.0_45
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14475054" author="musketyr" created="Thu, 31 Oct 2013 14:45:32 +0000"  >&lt;blockquote&gt;&lt;p&gt;The line causing the problem is Method[] declaredMethods = type.getDeclaredMethods(); I assume type here is a class from sun.reflect. But why we create a ClassNode for a class from that package is a bit beyond me.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;type is java.lang.Class, the class causing the violation is annotation sun.reflect.CallerSensitive as written in the description.&lt;/p&gt;</comment>
                            <comment id="14475109" author="blackdrag" created="Fri, 1 Nov 2013 05:11:06 +0000"  >&lt;p&gt;Oh, I did not see CallerSensitive... but that explains perfectly the problem. I knew having an internal visible annotation on &quot;public&quot; API is stupid, but I thought it would not have an effect. Now I know it has one.&lt;/p&gt;

&lt;p&gt;The question is what we do. Currently I know no other way, than recognizing catching the exception and skip the contents in that case.&lt;/p&gt;</comment>
                            <comment id="14475137" author="musketyr" created="Fri, 1 Nov 2013 05:38:21 +0000"  >&lt;p&gt;Well, that I was afraid of. I hope it won&apos;t hurt the performance much.&lt;/p&gt;</comment>
                            <comment id="14475039" author="musketyr" created="Fri, 1 Nov 2013 11:29:14 +0000"  >&lt;p&gt;Actually following might work as well:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-comment&quot;&gt;// org.codehaus.groovy.vmplugin.v5.Java5
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void setAnnotationMetaData(Annotation[] annotations, AnnotatedNode an) {
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Annotation annotation : annotations) {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (annotation.getClass().getPackage() == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || !&lt;span class=&quot;code-quote&quot;&gt;&quot;sun.reflect&quot;&lt;/span&gt;.equals(annotation.getClass().getPackage().getName())) {
                AnnotationNode node = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AnnotationNode(ClassHelper.make(annotation.annotationType()));
                configureAnnotation(node, annotation);
                an.addAnnotation(node);    
            }
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;EDIT: this didn&apos;t helped, so the only way is probably that catch block&lt;/p&gt;</comment>
                            <comment id="14475130" author="blackdrag" created="Wed, 20 Nov 2013 09:55:46 +0000"  >&lt;p&gt;it would be very good if someone (Vladimir?) could try out the patch I attached&lt;/p&gt;</comment>
                            <comment id="14475220" author="musketyr" created="Wed, 20 Nov 2013 11:36:48 +0000"  >&lt;p&gt;I&apos;ve tried it and it solves the issue.&lt;/p&gt;</comment>
                            <comment id="14475142" author="blackdrag" created="Thu, 21 Nov 2013 02:10:24 +0000"  >&lt;p&gt;I attached one more file called b.patch. Vladimir could you test that one please too? I think using a PrivilegedAction might be better and allows finer control. If this one works as well I have to think about which to take &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14474961" author="musketyr" created="Thu, 21 Nov 2013 03:21:57 +0000"  >&lt;p&gt;the b.patch doesn&apos;t seem to be working, I&apos;m getting the old good AccessControlException.&lt;/p&gt;</comment>
                            <comment id="14475235" author="blackdrag" created="Thu, 21 Nov 2013 05:32:29 +0000"  >&lt;p&gt;I applied a.patch. Thanks for testing Vladimir&lt;/p&gt;</comment>
                            <comment id="14475189" author="musketyr" created="Wed, 4 Dec 2013 19:07:02 +0000"  >&lt;p&gt;Thank you too, for fixing it! But I have a problem. I&apos;ve tried 2.2.1 in which it should be already fixed and it didn&apos;t worked.&lt;/p&gt;

&lt;p&gt;I&apos;m now getting pretty similar error (see stacktrace2.txt). I may be caused by something added in 2.2.x branch or after the time it was fixed. I should probably open new issue for this, shouldn&apos;t I?&lt;/p&gt;</comment>
                            <comment id="14475241" author="musketyr" created="Wed, 4 Dec 2013 19:09:03 +0000"  >&lt;p&gt;or maybe reopen this one. here&apos;s the stacktrace, I wasn&apos;t able to add the attachment, probably because it&apos;s already closed:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://pastebin.com/vJ9Rmhud&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://pastebin.com/vJ9Rmhud&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14475260" author="blackdrag" created="Thu, 5 Dec 2013 04:16:33 +0000"  >&lt;p&gt;the issue here was a failure in the compiler, now it is the runtime, so it is a new issue... and since it is SAM-related only in 2.2 - but the fix should be the same way at another place&lt;/p&gt;</comment>
                            <comment id="14475325" author="musketyr" created="Thu, 5 Dec 2013 15:55:48 +0000"  >&lt;p&gt;Well, the issue here was for scripts compiled in runtime - so the combination of both mentioned. Ok, I&apos;ll create another one.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12722192" name="a.patch" size="1003" author="blackdrag" created="Wed, 20 Nov 2013 09:55:46 +0000"/>
                            <attachment id="12723093" name="b.patch" size="1897" author="blackdrag" created="Thu, 21 Nov 2013 02:10:24 +0000"/>
                            <attachment id="12723203" name="failing-groovy-gae.zip" size="55893" author="musketyr" created="Mon, 28 Oct 2013 18:31:20 +0000"/>
                            <attachment id="12723135" name="stacktrace.txt" size="6577" author="musketyr" created="Mon, 28 Oct 2013 18:31:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 50 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2c79b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>