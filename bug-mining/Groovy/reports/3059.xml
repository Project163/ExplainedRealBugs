<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:51:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-2972] groovy.lang.ObjectRange.size() disobeys its contract for large ranges of Long values.</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-2972</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;groovy.lang.ObjectRange.size() disobeys its contract for large ranges of Long values: &quot;Returns the number of elements in this list. If this list contains more than Integer.MAX_VALUE elements, returns Integer.MAX_VALUE.&quot;&lt;/p&gt;

&lt;p&gt;println (new ObjectRange(0L, (long)Integer.MAX_VALUE).size())  // -2147483648&lt;br/&gt;
println (new ObjectRange(0L, (2L&amp;lt;&amp;lt;32)-2).size())  // -1&lt;/p&gt;

&lt;p&gt;A similar error is to be expected for BigDecimal ranges and other ranges larger than Integer.MAX_VALUE, though with other kinds of ranges the computation of size takes a while.&lt;/p&gt;

&lt;p&gt;Expected behaviour:&lt;/p&gt;

&lt;p&gt;assert Integer.MAX_VALUE == new ObjectRange(0L, Integer.MAX_VALUE + 1L).size()&lt;/p&gt;</description>
                <environment></environment>
        <key id="12814320">GROOVY-2972</key>
            <summary>groovy.lang.ObjectRange.size() disobeys its contract for large ranges of Long values.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="sirjective">Christian Semrau</reporter>
                        <labels>
                    </labels>
                <created>Thu, 24 Jul 2008 17:20:53 +0000</created>
                <updated>Tue, 2 May 2017 02:03:11 +0000</updated>
                            <resolved>Wed, 29 Jun 2016 03:25:33 +0000</resolved>
                                    <version>1.5.6</version>
                    <version>1.6-beta-1</version>
                                    <fixVersion>2.5.0-alpha-1</fixVersion>
                                    <component>groovy-jdk</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14465144" author="sirjective" created="Fri, 25 Jul 2008 02:32:48 +0000"  >&lt;p&gt;The IntRange.size() suffers from the same problem.&lt;/p&gt;

&lt;p&gt;println (new IntRange(1, Integer.MAX_VALUE).size())  // 2147483647&lt;/p&gt;

&lt;p&gt;println (new IntRange(0, Integer.MAX_VALUE).size())  // Exception thrown: java.lang.IllegalArgumentException: range must have no more than 2147483647 elements&lt;br/&gt;
// ObjectRange does not throw an exception with these arguments&lt;/p&gt;

&lt;p&gt;println (new IntRange(-1, Integer.MAX_VALUE).size())  // -2147483647&lt;/p&gt;
</comment>
                            <comment id="14957021" author="tkruse" created="Wed, 14 Oct 2015 14:34:15 +0000"  >&lt;p&gt;I am not sure about fixing IntRange. I believe it would be possible to extend it to allow greater ranges and return Integer.MAX_VALUE when the size is larger, but I am scared that some code might rely on size() returning the actual value, since that was the behavior up to now.&lt;/p&gt;

&lt;p&gt;I could not reproduce the example:&lt;br/&gt;
println (new IntRange(-1, Integer.MAX_VALUE).size()) // -2147483647&lt;br/&gt;
but Christian might have been talking about ObjectRange instead...&lt;/p&gt;</comment>
                            <comment id="14960865" author="chsemrau" created="Fri, 16 Oct 2015 15:14:12 +0000"  >&lt;p&gt;In the versions I used back then (1.5.6 and 1.6), calling&lt;br/&gt;
new IntRange(-1, Integer.MAX_VALUE).size()&lt;br/&gt;
did return a negative size.&lt;/p&gt;

&lt;p&gt;I just checked using an online REPL of Groovy 2.4.4: This call resulted in an IllegalArgumentException, caused by a too large size. Oh, another bug: The size given in the exception is 1 too small.&lt;/p&gt;

&lt;p&gt;That behaviour is better than the previous, but still disobeys the contract. Do you think there may be code that relies on the IAE being thrown if the range is too large? Oh, now I understand. There may be code that expects the size to be the actual size, even when it is not for too large ranges. Hm. Good argument.&lt;/p&gt;</comment>
                            <comment id="15354472" author="paulk" created="Wed, 29 Jun 2016 03:25:11 +0000"  >&lt;p&gt;Fixed as part of PR #143&lt;/p&gt;</comment>
                            <comment id="15354615" author="tkruse" created="Wed, 29 Jun 2016 06:02:46 +0000"  >&lt;p&gt;IntRange still has issues. The constructor still fails with IAE when creating large ranges. Maybe that behavior should no be changed, in case code relies on the IAE.&lt;br/&gt;
The size given in the exception should be fixed by adding 1, just for consistency. I don&apos;t think any code should rely on the exception text.&lt;/p&gt;</comment>
                            <comment id="15354625" author="tkruse" created="Wed, 29 Jun 2016 06:13:27 +0000"  >&lt;p&gt;sorry, Paul fixed the size message already. ignore my last comment&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 20 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2by73:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>