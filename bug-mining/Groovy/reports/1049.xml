<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:13:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-3726] Compiler incorrectly generating bridge methods</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-3726</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;In the code below:&lt;/p&gt;

&lt;p&gt;public class GroovyBean {&lt;br/&gt;
  @Lazy volatile String foo =&lt;/p&gt;
{ [&apos;some&apos;,&apos;items&apos;,&apos;in&apos;,&apos;the&apos;,&apos;lists&apos;] }
&lt;p&gt;()&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;The compiler generates get$foo and set$foo methods. Both of these are marked as bridge methods which is incorrect because they are not actually bridge methods at all.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12814792">GROOVY-3726</key>
            <summary>Compiler incorrectly generating bridge methods</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="roshandawrani">Roshan Dawrani</assignee>
                                    <reporter username="robharrop">Rob Harrop</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Sep 2009 17:06:21 +0000</created>
                <updated>Mon, 26 Oct 2009 14:47:38 +0000</updated>
                            <resolved>Mon, 26 Oct 2009 14:47:38 +0000</resolved>
                                    <version>1.6.4</version>
                    <version>1.6.5</version>
                                    <fixVersion>1.6.5</fixVersion>
                    <fixVersion>1.7-beta-2</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14467683" author="roshandawrani" created="Sat, 5 Sep 2009 01:01:50 +0000"  >&lt;p&gt;It&apos;s some fault of groovy and some fault of Java probably.&lt;/p&gt;

&lt;p&gt;Groovy&apos;s fault is that it is creating the get$field / set$field methods and setting their modifiers as the field&apos;s modifiers without considering the fact that some modifiers make sense for fields but not for methods - like volatile, transient.&lt;/p&gt;

&lt;p&gt;Java&apos;s fault is that it is using the &quot;same&quot; modifier bits to indicate volatile fields/bridge methods(0x00000040) and transient fields/varargs methods(0x00000080). So, even though, what groovy is doing is marking a method as &quot;volatile&quot; (and not marking it as &quot;bridge&quot;), Java takes it as &quot;bridge&quot; because same bits are used for both and a method as volatile does not make sense to Java.&lt;/p&gt;

&lt;p&gt;So, a volatile field&apos;s getter/setter show up as bridge methods and a transient field&apos;s getter/setter show up as varargs methods as shown in the code below:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.lang.reflect.*

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;GroovyBean {
	@Lazy &lt;span class=&quot;code-keyword&quot;&gt;volatile&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; foo = &lt;span class=&quot;code-quote&quot;&gt;&quot;anything&quot;&lt;/span&gt;
    @Lazy &lt;span class=&quot;code-keyword&quot;&gt;transient&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; bar = &lt;span class=&quot;code-quote&quot;&gt;&quot;anything&quot;&lt;/span&gt;
}

def fooMethod = GroovyBean.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getMethod(&lt;span class=&quot;code-quote&quot;&gt;&apos;get$foo&apos;&lt;/span&gt;)
def barMethod = GroovyBean.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getMethod(&lt;span class=&quot;code-quote&quot;&gt;&apos;get$bar&apos;&lt;/span&gt;)

&lt;span class=&quot;code-comment&quot;&gt;// both checks below respond &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; as same bits are used
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; fooMethod.isBridge()
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; Modifier.isVolatile(fooMethod.modifiers)

&lt;span class=&quot;code-comment&quot;&gt;// both checks below respond &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; as same bits are used
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; barMethod.isVarArgs()
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; Modifier.isTransient(barMethod.modifiers)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I guess Verifier#visitProperty() needs a change in that when it creates getters/setters, before relaying the field modifiers to the getter/setter modifiers, it should clear out the bits for transient/volatile as methods cannot be transient/volatile.&lt;/p&gt;

&lt;p&gt;Any issues seen with that?&lt;/p&gt;</comment>
                            <comment id="14467679" author="roshandawrani" created="Sat, 5 Sep 2009 01:13:28 +0000"  >&lt;p&gt;Just to add that it is not an issue with @Lazy but a general groovy issue, as observed in the regular groovy code below:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.lang.reflect.*

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;GroovyBean {
    &lt;span class=&quot;code-keyword&quot;&gt;volatile&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; foo = &lt;span class=&quot;code-quote&quot;&gt;&quot;anything&quot;&lt;/span&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;transient&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; bar = &lt;span class=&quot;code-quote&quot;&gt;&quot;anything&quot;&lt;/span&gt;
}

def fooMethod = GroovyBean.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getMethod(&lt;span class=&quot;code-quote&quot;&gt;&apos;getFoo&apos;&lt;/span&gt;)
def barMethod = GroovyBean.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getMethod(&lt;span class=&quot;code-quote&quot;&gt;&apos;getBar&apos;&lt;/span&gt;)

&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; fooMethod.isBridge()
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; Modifier.isVolatile(fooMethod.modifiers)

&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; barMethod.isVarArgs()
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; Modifier.isTransient(barMethod.modifiers)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14467673" author="robharrop" created="Sun, 6 Sep 2009 14:11:55 +0000"  >&lt;p&gt;Roshan,&lt;/p&gt;

&lt;p&gt;That fix seems appropriate.&lt;/p&gt;

&lt;p&gt;Thanks for your work on this.&lt;/p&gt;

&lt;p&gt;Rob&lt;/p&gt;</comment>
                            <comment id="14467680" author="roshandawrani" created="Mon, 7 Sep 2009 09:05:57 +0000"  >&lt;p&gt;Jochen, do you see any issues with the approach?&lt;/p&gt;</comment>
                            <comment id="14467654" author="blackdrag" created="Mon, 7 Sep 2009 10:11:00 +0000"  >&lt;p&gt;no, this looks like a good idea&lt;/p&gt;</comment>
                            <comment id="14467600" author="roshandawrani" created="Mon, 7 Sep 2009 14:09:14 +0000"  >&lt;p&gt;Fixed by clearing the volatile/transient modifier bits for generated getter/setter methods for the properties.&lt;/p&gt;</comment>
                            <comment id="14468040" author="graemerocher" created="Mon, 26 Oct 2009 10:10:02 +0000"  >&lt;p&gt;Jochen said this needed reopening on the mailing list so I&apos;m reopening since it is critical for Grails that this is fixed for good and hence shouldn&apos;t be forgotten on the list&lt;/p&gt;</comment>
                            <comment id="14467995" author="roshandawrani" created="Mon, 26 Oct 2009 10:14:26 +0000"  >&lt;p&gt;Waiting for Jochen to provide the details of the issue he has seen with it.&lt;/p&gt;</comment>
                            <comment id="14468075" author="roshandawrani" created="Mon, 26 Oct 2009 11:02:00 +0000"  >&lt;p&gt;Not sure where the fix made earlier is overlapping with the issue currently reported with dispatch methods created for inner classes.&lt;/p&gt;

&lt;p&gt;It doesn&apos;t look like the fix for this JIRA would unbridge the bridge dispatch methods created for inner classes.&lt;/p&gt;</comment>
                            <comment id="14467931" author="blackdrag" created="Mon, 26 Oct 2009 14:47:38 +0000"  >&lt;p&gt;I close it again according to the discussion on the mailing list, that this issue is unrelated&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 5 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2casv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>