<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:21:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-10902] Dynamic constants for primitive types get default value in Java</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-10902</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;If we define a constant that is resolved during runtime in a Groovy class and reference it in a Java class, it&apos;s value gets a static default value in the Java class. This seems to be a regression in Groovy 3.0.10 as earlier versions don&apos;t have the problem. Also affects all 4.0.x versions that I tested.&lt;/p&gt;

&lt;p&gt;Example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// G.groovy
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;G {
    public static final &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; DYNAMIC_CONSTANT = (9.9).intValue()
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// J.java
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;J {
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(G.DYNAMIC_CONSTANT);
    }
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;b&gt;Groovy 4.0.7&lt;/b&gt;&lt;br/&gt;
Prints 0 with the following bytecode for J#main&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
0: getstatic &#160; &#160; #2 &lt;span class=&quot;code-comment&quot;&gt;// Field java/lang/&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out:Ljava/io/PrintStream;
&lt;/span&gt;3: iconst_0
4: invokevirtual #4 &lt;span class=&quot;code-comment&quot;&gt;// Method java/io/PrintStream.println:(I)V
&lt;/span&gt;7: &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;b&gt;Groovy 3.0.9&lt;/b&gt;&lt;br/&gt;
Correctly prints 9 with the following bytecode:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
0: getstatic &#160; &#160; #2 &lt;span class=&quot;code-comment&quot;&gt;// Field java/lang/&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out:Ljava/io/PrintStream;
&lt;/span&gt;3: getstatic &#160; &#160; #3 &lt;span class=&quot;code-comment&quot;&gt;// Field G.DYNAMIC_CONSTANT:I
&lt;/span&gt;6: invokevirtual #4 &lt;span class=&quot;code-comment&quot;&gt;// Method java/io/PrintStream.println:(I)V
&lt;/span&gt;9: &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13518307">GROOVY-10902</key>
            <summary>Dynamic constants for primitive types get default value in Java</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="okoskine">Onni Koskinen</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Jan 2023 10:12:46 +0000</created>
                <updated>Tue, 18 Apr 2023 18:47:23 +0000</updated>
                            <resolved>Tue, 17 Jan 2023 16:41:17 +0000</resolved>
                                    <version>3.0.14</version>
                    <version>4.0.7</version>
                                    <fixVersion>3.0.15</fixVersion>
                    <fixVersion>4.0.8</fixVersion>
                                    <component>Stub generator / Joint compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17676560" author="JIRAUSER298674" created="Fri, 13 Jan 2023 10:22:36 +0000"  >&lt;p&gt;Initially encountered this when upgrading a Grails 3 project to Grails 5 but this minimal reproduction case was tested with the following bash function:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-bash&quot;&gt;
test_with() {
&#160; &#160; &lt;span class=&quot;code-object&quot;&gt;local&lt;/span&gt; version=&lt;span class=&quot;code-object&quot;&gt;$1&lt;/span&gt;
&#160; &#160; sdk use groovy &lt;span class=&quot;code-object&quot;&gt;$version&lt;/span&gt; &amp;amp;&amp;amp;
&#160; &#160; groovyc -j G.groovy J.java &amp;amp;&amp;amp;
&#160; &#160; java -cp ~/.sdkman/candidates/groovy/&lt;span class=&quot;code-object&quot;&gt;$version&lt;/span&gt;/lib/groovy-&lt;span class=&quot;code-object&quot;&gt;$version&lt;/span&gt;.jar:. J &amp;amp;&amp;amp;
&#160; &#160; javap -v J
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17676820" author="emilles" created="Sat, 14 Jan 2023 01:58:19 +0000"  >&lt;p&gt;The stub generator has gone through some changes to try and set the constant value. If you can use a constant expression for the initializer, please do. &lt;/p&gt;

&lt;p&gt;There might be a todo for this case. &lt;/p&gt;</comment>
                            <comment id="17677839" author="emilles" created="Tue, 17 Jan 2023 16:41:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/commit/2926b8cbc293fd46b73b051fbaf5bde9eeeb7065&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/2926b8cbc293fd46b73b051fbaf5bde9eeeb7065&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13523307">GROOVY-10928</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13532949">GROOVY-11019</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13442505">GROOVY-10611</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 43 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1eu9c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>