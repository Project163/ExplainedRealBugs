<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:06:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-9556] Stub generated without the effect of AST transformation makes joint compilation fail</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-9556</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>
&lt;p&gt;&lt;a href=&quot;http://groovy.329449.n5.nabble.com/More-Groovy-3-woes-td5768022.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://groovy.329449.n5.nabble.com/More-Groovy-3-woes-td5768022.html&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
===
194 ocs /tmp&amp;gt; &amp;lt;CreateSignatureBase.java
/*
 * Copyright 2015 The Apache Software Foundation.

 * OC: removed almost all code, leaving just what&apos;s needed to crash

 */

&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; org.apache.pdfbox.examples.signature;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.IOException;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.InputStream;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.security.KeyStore;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.security.KeyStoreException;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.security.NoSuchAlgorithmException;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.security.UnrecoverableKeyException;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.security.cert.CertificateException;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.pdfbox.pdmodel.interactive.digitalsignature.SignatureInterface;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;CreateSignatureBase &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; SignatureInterface
{
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; CreateSignatureBase(KeyStore keystore, &lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt;[] pin)
            &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; KeyStoreException, UnrecoverableKeyException, NoSuchAlgorithmException, IOException, CertificateException
    { }
    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] sign(InputStream content) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException
    {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
    }
}

195 ocs /tmp&amp;gt; &amp;lt;myclass.groovy
&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; cz.ocs.utilities

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.*
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.pdfbox.pdmodel.*
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.pdfbox.examples.signature.CreateSignatureBase

@InheritConstructors &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;CreateSignature &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; CreateSignatureBase {
    void signPDF(PDDocument pdd, OutputStream out) {

    }
}

196 ocs /tmp&amp;gt; /usr/local/groovy-2.4.17/bin/groovyc -cp /Extensions/pdfbox-2.0.17.jar -j myclass.groovy CreateSignatureBase.java
197 ocs /tmp&amp;gt; /usr/local/groovy-3.0.3/bin/groovyc -cp /Extensions/pdfbox-2.0.17.jar -j myclass.groovy CreateSignatureBase.java
org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:
Compile error during compilation with javac.
/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/folders/zh/h4cv6xjx033frtt9y72ch8980000gp/T/groovy-generated-8946934250394256568-java-source/cz/ocs/utilities/CreateSignature.java:12: error: constructor CreateSignatureBase in &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;CreateSignatureBase cannot be applied to given types;
@groovy.transform.InheritConstructors() &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;CreateSignature
                                               ^
  required: KeyStore,&lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt;[]
  found: no arguments
  reason: actual and formal argument lists differ in length
1 error


1 error

198 ocs /tmp&amp;gt;

===

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13305320">GROOVY-9556</key>
            <summary>Stub generated without the effect of AST transformation makes joint compilation fail</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daniel_sun">Daniel Sun</assignee>
                                    <reporter username="daniel_sun">Daniel Sun</reporter>
                        <labels>
                    </labels>
                <created>Sat, 16 May 2020 01:08:40 +0000</created>
                <updated>Fri, 22 May 2020 04:03:53 +0000</updated>
                            <resolved>Sat, 16 May 2020 09:16:22 +0000</resolved>
                                    <version>3.0.3</version>
                                    <fixVersion>4.0.0-alpha-1</fixVersion>
                    <fixVersion>3.0.4</fixVersion>
                                    <component>Stub generator / Joint compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="2400">40m</timespent>
                                <comments>
                            <comment id="17108922" author="daniel_sun" created="Sat, 16 May 2020 08:36:16 +0000"  >&lt;p&gt;As Java stubs are generated at the CONVERSION phase, if groovy source code uses AST tranformation which will change the AST at the phases after CONVERSION, e.g. &lt;tt&gt;@InheritConstructors&lt;/tt&gt;, the generated Java stubs will not include the changes specified in the AST tranformation.&lt;/p&gt;

&lt;p&gt;If the changes are relied by the Java compilation, e.g. super class has its own constructors and its sub class should have some of the relevant constructors, the Java compilation will fail.&lt;/p&gt;

&lt;p&gt;If Java compilation does not  use the Java stubs, e.g. Java source code does not use any Groovy classes which contain the AST transformation mentioned above, we can workaround the issue as 2.5.x does via&#160;the JVM option &lt;tt&gt;-sourcepath&lt;/tt&gt;. If Java compilation does use the Java stubs, the &lt;tt&gt;-sourcepath&lt;/tt&gt; can take effect and help Java compiler find the Java stubs.&lt;/p&gt;

&lt;p&gt;But for the Java stubs in memory, no workaround found, in other words, we can not specify &lt;tt&gt;-sourcepath&lt;/tt&gt; to some virtual path and no Java compiler API found could be used to simulate &lt;tt&gt;-sourcepath&lt;/tt&gt;&lt;/p&gt;


</comment>
                            <comment id="17108929" author="paulk" created="Sat, 16 May 2020 08:57:43 +0000"  >&lt;p&gt;I guess we will have to find a way to document the in memory stubs limitation.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 26 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0esyg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>