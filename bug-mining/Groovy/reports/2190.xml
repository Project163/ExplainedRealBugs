<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:32:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-5243] @Canonical @TupleConstructor can&apos;t handle Object or Map properties</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-5243</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Given the following code, I would expect the assertions to pass. They currently don&apos;t. However, if the &lt;tt&gt;a&lt;/tt&gt; and &lt;tt&gt;b&lt;/tt&gt; properties are typed to String, for example, everything goes as expected.&lt;/p&gt;

&lt;p&gt;It might be challenging to get this to work properly for more complex types, but it would make the annotations &lt;b&gt;really&lt;/b&gt; transparent. The way it currently behaves is very unsettling (a is set with a Map containing both a and b with their respective values, while b is not set to anything)&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.Canonical

def weird = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CanonicalIsWeird(a: &lt;span class=&quot;code-quote&quot;&gt;&apos;first letter&apos;&lt;/span&gt;, b: &lt;span class=&quot;code-quote&quot;&gt;&apos;second letter&apos;&lt;/span&gt;)
println &lt;span class=&quot;code-quote&quot;&gt;&quot;a: ${weird.a}&quot;&lt;/span&gt;
println &lt;span class=&quot;code-quote&quot;&gt;&quot;b: ${weird.b}&quot;&lt;/span&gt;

&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; weird.a == &lt;span class=&quot;code-quote&quot;&gt;&apos;first letter&apos;&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; weird.b == &lt;span class=&quot;code-quote&quot;&gt;&apos;second letter&apos;&lt;/span&gt;

@Canonical
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;CanonicalIsWeird {
    def a, b
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://gist.github.com/1565938&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gist.github.com/1565938&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12816026">GROOVY-5243</key>
            <summary>@Canonical @TupleConstructor can&apos;t handle Object or Map properties</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="gjoseph">Gr&#233;gory Joseph</reporter>
                        <labels>
                            <label>annotation</label>
                    </labels>
                <created>Mon, 9 Jan 2012 05:08:57 +0000</created>
                <updated>Tue, 25 Oct 2022 16:49:52 +0000</updated>
                            <resolved>Fri, 12 Apr 2013 04:05:06 +0000</resolved>
                                    <version>1.8.5</version>
                                    <fixVersion>2.1.3</fixVersion>
                    <fixVersion>2.2.0-beta-1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14472234" author="gjoseph" created="Mon, 9 Jan 2012 05:09:52 +0000"  >&lt;p&gt;Unrelated, but I can&apos;t seem to be able to edit the issue. Forgot to check the &quot;testcase submitted&quot; box (although said test case is very minimal)&lt;/p&gt;</comment>
                            <comment id="14480245" author="paulk" created="Fri, 5 Apr 2013 05:16:22 +0000"  >&lt;p&gt;Just for further explanation, by using @TupleConstructor, the following constructors are generated:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;CanonicalIsWeird(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; a, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; b)
CanonicalIsWeird(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; a)
CanonicalIsWeird()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Normally when using named parameters (i.e. &lt;tt&gt;new CanonicalIsWeird(a: &apos;foo&apos;, b:&apos; bar&apos;)&lt;/tt&gt;) it is represented by storing the named args in a Map which is then (roughly) translated into calling the no-arg constructor followed by setting the properties - approximately what you see below:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;def obj = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CanonicalIsWeird(Map args)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;translated into:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;def obj = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CanonicalIsWeird()
obj.setA(&lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt;)
obj.setB(&lt;span class=&quot;code-quote&quot;&gt;&apos;bar&apos;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but in your case, the single Object constructor matches the Map and alters the desired behavior.&lt;/p&gt;</comment>
                            <comment id="14480252" author="paulk" created="Fri, 12 Apr 2013 04:05:07 +0000"  >&lt;p&gt;OK, it turns out not to be easy to cover all cases since for some scenarios supporting Groovy&apos;s named arguments could be in conflict with a user trying to use Map properties. But the good news is cases like yours can and should be supported. So your example and similar ones should now work unless the first property happens to be a LinkedHashMap or there is only one property of Map, HashMap, AbstractMap or LinkedHashMap. The doco has been updated to reflect this limitation.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="13491345">GROOVY-10796</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 32 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2cstb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>