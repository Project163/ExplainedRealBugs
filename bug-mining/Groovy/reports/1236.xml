<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:15:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-3064] ant task setContextClassloader</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-3064</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;When setting classpath element to the groovy task it is not completely useful. Thread&apos;s context classloader is not set to a classloader being aware of that additional classpath. One common issue is trying to get context of an mbeans server. The current workaround is either to set context classloader yourself or have the classes in the JVM classpath upon jvm start.&lt;/p&gt;

&lt;p&gt;See related discussion on &lt;a href=&quot;http://markmail.org/message/3n2fecjrxivl2yjo&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://markmail.org/message/3n2fecjrxivl2yjo&lt;/a&gt; The guy is not using groovy but a custom ant task. Anyways I experience the same issue with groovy. There are other discussions as well but that one seems complete.&lt;/p&gt;

&lt;p&gt;As well ant recognizes the limitation in conjunction with junit (&lt;a href=&quot;http://ant.apache.org/faq.html#delegating-classloader&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ant.apache.org/faq.html#delegating-classloader&lt;/a&gt;) and style tasks so they fixed in the 1.7 series (&lt;a href=&quot;http://www.docjar.com/html/api/org/apache/tools/ant/taskdefs/optional/junit/JUnitTask.java.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.docjar.com/html/api/org/apache/tools/ant/taskdefs/optional/junit/JUnitTask.java.html&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;There is as well a Sun java doc describing setting context classloader at &lt;a href=&quot;http://java.sun.com/products/jndi/tutorial/beyond/misc/classloader.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://java.sun.com/products/jndi/tutorial/beyond/misc/classloader.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;m talking about the task, not taskdef! One would expect to have classes defined in classpath generally accessible from everywhere. I know it&apos;s not entirely possible for all cases but adding that will be a step closer. A related issue is &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-2948&quot; title=&quot;classloading weird issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-2948&quot;&gt;&lt;del&gt;GROOVY-2948&lt;/del&gt;&lt;/a&gt; which is a good thing but fork is a good thing to avoid &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</description>
                <environment>ant-1.[6|7].x</environment>
        <key id="12817873">GROOVY-3064</key>
            <summary>ant task setContextClassloader</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="avalon">A</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Oct 2008 10:55:43 +0000</created>
                <updated>Tue, 7 Apr 2015 19:13:14 +0000</updated>
                            <resolved>Tue, 23 Mar 2010 00:06:38 +0000</resolved>
                                    <version>1.5.4</version>
                                    <fixVersion>1.7.2</fixVersion>
                    <fixVersion>1.8-beta-1</fixVersion>
                                    <component>Ant integration</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14465260" author="blackdrag" created="Thu, 2 Oct 2008 11:52:56 +0000"  >&lt;p&gt;I am not sure what exactly you want... you want us setting the context class loader in Ant in general or for a certain task? Because if it is for Ant in general, wouldn&apos;t this be an issue for Ant then?&lt;/p&gt;</comment>
                            <comment id="14465331" author="avalon" created="Thu, 2 Oct 2008 12:37:57 +0000"  >&lt;p&gt;Well actually they don&apos;t seem to think it is their issue. At least it seems so by the fix of the junit task. So I think groovy should take the same approach.&lt;/p&gt;</comment>
                            <comment id="14465323" author="blackdrag" created="Thu, 2 Oct 2008 18:48:15 +0000"  >&lt;p&gt;and about what task are we talking here? &lt;/p&gt;</comment>
                            <comment id="14465239" author="avalon" created="Thu, 2 Oct 2008 23:52:20 +0000"  >&lt;p&gt;Ah, the &quot;groovy&quot; task I&apos;m talking about. &lt;/p&gt;

&lt;p&gt;So if it is something like:&lt;br/&gt;
doSomeMagicToRunMyScrypt();&lt;/p&gt;

&lt;p&gt;to be&lt;/p&gt;

&lt;p&gt;setContextClassloader(aClassLoaderThatKnowsAboutTheTasksClassPathButNotNecessaryTheAntOne);&lt;br/&gt;
doSomeMagicToRunMyScrypt();&lt;br/&gt;
resetContextClassloader();&lt;/p&gt;

&lt;p&gt;In other words I want working the nested &amp;lt;classpath&amp;gt; of the &amp;lt;groovy&amp;gt; task. &lt;/p&gt;</comment>
                            <comment id="14465332" author="blackdrag" created="Fri, 3 Oct 2008 06:44:32 +0000"  >&lt;p&gt;there is a classpath and a classpathref attribute. None of this or ok for you? I am asking because if you nest the classpath, then I imagine it could be a problem to directly write the groovy code nested. Also the Groovy task calls GroovyShell#run, which sets a context class loader.&lt;/p&gt;</comment>
                            <comment id="14465376" author="avalon" created="Sat, 4 Oct 2008 05:17:09 +0000"  >&lt;blockquote&gt;&lt;p&gt;here is a classpath and a classpathref attribute. None of this or ok for you? I am asking because if you nest the classpath, then I imagine it could be a problem to directly write the groovy code nested.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I hoped there is a generic way to cover all cases. In case of a nested classpath and groovy code, I have experience d no issues. Actually I tried that by mistake and was surprised it didn&apos;t complain &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Also the Groovy task calls GroovyShell#run, which sets a context class loader.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;As far as I understood, the classpath elements (wherever specified) are used by ant to load classes. But the classloader knowing about the additional classpath is not set as context classloader for the executed task. I hoped that this classloader can be obtained by the groovy task and made available for the script by all possible means.&lt;br/&gt;
I didn&apos;t look in the groovy&apos;s and ant&apos;s code but as you say  GroovyShell sets the context class loader, wouldn&apos;t it help creating it with the aware classloader as parameter?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; 
         gsh = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GroovyShell(aClassLoaderThatKnowsAboutTheTasksClassPath, someBinding);
         gsh.evaluate(userScript);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;Makes any sense?&lt;/p&gt;</comment>
                            <comment id="14465324" author="avalon" created="Sun, 5 Oct 2008 09:10:15 +0000"  >&lt;p&gt;I looked further into the &lt;a href=&quot;http://www.docjar.com/html/api/org/apache/tools/ant/taskdefs/optional/junit/JUnitTask.java.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JUnitTask&lt;/a&gt;. As far as I understand they are creating a SplitLoader (extends AntClassLoader) that uses as a parent the AntClassLoader that loads JUnitTask class and additionally includes path specified in the classpath of the &amp;lt;junit&amp;gt; invocation. Effectively they use as a parent the classloader knowing about classpath(ref) elements specified in taskdef and adding what&apos;s needed to run the users&apos; code (specified by the users).&lt;/p&gt;

&lt;p&gt;I guess here needs to be done the same:&lt;br/&gt;
1. get the classloader that has loaded the groovy task class.&lt;br/&gt;
2. create a  new classloader that has as a parent the classloader in #1, and additionally instruct it to look into the paths specified in the &amp;lt;groovy&amp;gt; classpath(ref) elements.&lt;br/&gt;
3. set class loader created in #2 as a context class loader during the script execution&lt;br/&gt;
4. reset to the original context classloader before the task has been executed&lt;/p&gt;

&lt;p&gt;Do you think it is all clear now?&lt;/p&gt;</comment>
                            <comment id="14465384" author="avalon" created="Sun, 5 Oct 2008 09:16:28 +0000"  >&lt;p&gt;Just one more note: class loader on step #1 should be a AntClassLoader and it has a convenience method resetThreadContextLoader().&lt;/p&gt;

&lt;p&gt;Hope that helps.&lt;/p&gt;</comment>
                            <comment id="14478291" author="paulk" created="Sun, 5 Oct 2008 23:24:59 +0000"  >&lt;p&gt;Do you have a simple example, e.g. talking to an mbean server (preferably something easy to set up), where the current groovy task fails? That might help us think through the best way to resolve this.&lt;/p&gt;</comment>
                            <comment id="14465308" author="avalon" created="Mon, 13 Oct 2008 00:56:39 +0000"  >&lt;p&gt;Yes, I will provide you with such but need to handle some higher priority stuff first.&lt;/p&gt;</comment>
                            <comment id="14465369" author="avalon" created="Wed, 15 Oct 2008 07:26:17 +0000"  >&lt;p&gt;See the attached build.xml and jars. To run you only need to change the groovy.jar location so the taskdef doesn&apos;t fail. These are all files you need to reproduce. You don&apos;t need a running jboss server.&lt;/p&gt;

&lt;p&gt;First run:&lt;br/&gt;
ant&lt;br/&gt;
Output:&lt;br/&gt;
BUILD FAILED&lt;br/&gt;
/data/home/avalon/&lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-3064&quot; title=&quot;ant task setContextClassloader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-3064&quot;&gt;&lt;del&gt;GROOVY-3064&lt;/del&gt;&lt;/a&gt;/build.xml:15: javax.naming.NoInitialContextException: Cannot instantiate class: org.jnp.interfaces.NamingContextFactory &lt;span class=&quot;error&quot;&gt;&amp;#91;Root exception is java.lang.ClassNotFoundException: org.jnp.interfaces.NamingContextFactory&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Then run:&lt;br/&gt;
ant -lib .&lt;br/&gt;
Output:&lt;br/&gt;
BUILD FAILED&lt;br/&gt;
/data/home/avalon/&lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-3064&quot; title=&quot;ant task setContextClassloader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-3064&quot;&gt;&lt;del&gt;GROOVY-3064&lt;/del&gt;&lt;/a&gt;/build.xml:15: javax.naming.CommunicationException: Could not obtain connection to any of these urls: localhost [Root exception is javax.naming.CommunicationException: Failed to connect to server localhost:1099 [Root exception is javax.naming.ServiceUnavailableException: Failed to connect to server localhost:1099 &lt;span class=&quot;error&quot;&gt;&amp;#91;Root exception is java.net.ConnectException: Connection refused&amp;#93;&lt;/span&gt;]]&lt;/p&gt;

&lt;p&gt;By the first run class org.jnp.interfaces.NamingContextFactory is tried to be found in the thread&apos;s context classloader but cannot be found. It&apos;s searched for by some jdk internal class. &lt;br/&gt;
In the second run it is found of course. As well if one sets the thread&apos;s context classloader to the ant classloader aware of the classpath specified in the groovy task, then it will work like -lib has been specified.&lt;br/&gt;
e.g. add &quot;Thread.currentThread().setContextClassLoader(RMIAdaptorExt.getClassLoader());&quot; before &quot;new InitialContext()&quot; is called.&lt;/p&gt;

&lt;p&gt;Let me know if you need any additional info.&lt;/p&gt;</comment>
                            <comment id="14465411" author="avalon" created="Wed, 15 Oct 2008 09:30:33 +0000"  >&lt;p&gt;Hallo,&lt;/p&gt;

&lt;p&gt;fix version 1.7 sounds like never &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Can you just change &lt;/p&gt;

&lt;p&gt;&quot;Thread.currentThread().setContextClassLoader(GroovyShell.class.getClassLoader());&quot; in &lt;a href=&quot;http://svn.codehaus.org/groovy/tags/GROOVY_1_5_7/src/main/org/codehaus/groovy/ant/Groovy.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.codehaus.org/groovy/tags/GROOVY_1_5_7/src/main/org/codehaus/groovy/ant/Groovy.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;with something like:&lt;br/&gt;
AntClassLoader ourLoader = new AntClassLoader(GroovyShell.class.getClassLoader(),getProject(),classpath,false);&lt;/p&gt;

&lt;p&gt;Of course you might know a more elegant way to obtain the ant&apos;s classloader aware of the tasks&apos;s classpath instead of creating a new one, but anyways that should work.&lt;/p&gt;</comment>
                            <comment id="14465357" author="avalon" created="Wed, 15 Oct 2008 09:35:34 +0000"  >&lt;p&gt;Forgot the second line of the replacement:&lt;br/&gt;
ourLoader.setThreadContextLoader()&lt;/p&gt;

&lt;p&gt;then to revert after execution:&lt;br/&gt;
ourLoader.resetThreadContextLoader()&lt;/p&gt;</comment>
                            <comment id="14465456" author="blackdrag" created="Wed, 15 Oct 2008 18:00:38 +0000"  >&lt;p&gt;we set it to 1.7 because we intend to have a short cycle for 1.6 final. But if you can provide a patch and a testcase, that we can use from our unit tests and if that test and the patch do look ok, then there is no reason why this should not go into the next release. Also is that classloader you are suggesting really the right one? Don&apos;t we already create a classloader? We have &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; GroovyClassLoader classLoader = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GroovyClassLoader(baseClassLoader);
        addClassPathes(classLoader);
        
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; GroovyShell groovy = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GroovyShell(classLoader, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Binding(), configuration);
        parseAndRunScript(groovy, txt, mavenPom, scriptName, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AntBuilder(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; so this classLoader here has all the data that is needed and is the one you want I think. Replacing the other line won&apos;t do the right thing I guess.&lt;/p&gt;</comment>
                            <comment id="14465560" author="avalon" created="Mon, 3 Nov 2008 07:24:34 +0000"  >&lt;p&gt;You are right, I see a GroovyClassLoader knowing about all classpaths is created and it is used to create the GroovyShell that parses the script.&lt;/p&gt;

&lt;p&gt;But then:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;Groovy.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void parseAndRunScript(GroovyShell shell, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; txt, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; mavenPom, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; scriptName, File scriptFile, AntBuilder builder) {
   ...
   script = shell.parse(...)
   ...
   script.run();
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As you see the GroovyShell.parse() is used to get a hold on the script. Then this script is run(). I can&apos;t see anywhere the thread context classloader set.&lt;/p&gt;

&lt;p&gt;Here is a diff&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Index: src/main/org/codehaus/groovy/ant/Groovy.java
===================================================================
--- src/main/org/codehaus/groovy/ant/Groovy.java        (revision 13927)
+++ src/main/org/codehaus/groovy/ant/Groovy.java        (working copy)
@@ -419,7 +419,16 @@
             &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (mavenPom != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                 script.setProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;pom&quot;&lt;/span&gt;, mavenPom);
             }
-            script.run();
+
+            &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; thread = &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.currentThread();
+            &lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt; currentClassLoader = thread.getContextClassLoader();
+            thread.setContextClassLoader(shell.getClassLoader());
+
+            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
+                script.run();
+            } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
+                thread.setContextClassLoader(currentClassLoader);
+            }
         }
         &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; MissingMethodException mme) {
             &lt;span class=&quot;code-comment&quot;&gt;// not a script, &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; running through run method but properties will not be available&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I tried a build and things work as they should.&lt;/p&gt;

&lt;p&gt;Let me know if you will accept this solution so I write a test case.&lt;/p&gt;</comment>
                            <comment id="14466440" author="tomstrummer" created="Mon, 2 Feb 2009 12:31:27 +0000"  >&lt;p&gt;I just ran into this same issue.  I was trying to run a Groovy script from Ant, which in turn uses the HBase API.  It was trying to load configuration files from the classpath, that for some reason it could not seem to find.  Well, their API uses &lt;tt&gt;Thread.getContextClassLoader().getResource(...)&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;To finally demonstrate why, I did this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;	&amp;lt;target name=&lt;span class=&quot;code-quote&quot;&gt;&quot;setup&quot;&lt;/span&gt;&amp;gt;
		&amp;lt;groovy classpathref=&lt;span class=&quot;code-quote&quot;&gt;&apos;cp&apos;&lt;/span&gt;&amp;gt;
&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.currentThread().getContextClassLoader().packages.each { println it }
		&amp;lt;/groovy&amp;gt;
	&amp;lt;/target&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Guess what printed out?  A bunch of &lt;tt&gt;java.&amp;#42;&lt;/tt&gt;, &lt;tt&gt;com.sun.&amp;#42;&lt;/tt&gt;, &lt;tt&gt;org.xml.&amp;#42;&lt;/tt&gt;, etc. packages...  Nothing from my classpath.  So when I call the HBase code, it gets the same classloader, which excludes all the HBase JARs that are on my classpath.  (I&apos;ll spare you the console output that shows my classpath full of JARs, and the package output which only has the JDK system packages.)&lt;/p&gt;

&lt;p&gt;I just spent about a day trying to figure out why HBase seemed broken when I tried to run it via Ant... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;    &lt;/p&gt;</comment>
                            <comment id="14466469" author="avalon" created="Tue, 3 Feb 2009 00:49:29 +0000"  >&lt;p&gt;just want to be clear, the diff in my last comment is a patch &lt;/p&gt;</comment>
                            <comment id="14467437" author="elygre" created="Fri, 21 Aug 2009 16:13:18 +0000"  >&lt;p&gt;It sounds like this is the bug I&apos;m also hitting when connecting to a database:&lt;/p&gt;

&lt;p&gt;   &amp;lt;target name=&quot;jdbc&quot;&amp;gt;&lt;br/&gt;
      &amp;lt;groovy&amp;gt;&lt;br/&gt;
         &amp;lt;classpath refid=&quot;deploy.classpath&quot;/&amp;gt;&lt;br/&gt;
         println &quot;Start&quot;&lt;br/&gt;
         java.sql.DriverManager.registerDriver (new oracle.jdbc.OracleDriver());&lt;br/&gt;
         println &quot;Registered driver OK&quot;&lt;br/&gt;
         def sql = groovy.sql.Sql.newInstance (&quot;jdbc:oracle:thin:@//localhost:1521/sid&quot;);&lt;br/&gt;
         println &quot;New instance not ok&quot;&lt;br/&gt;
      &amp;lt;/groovy&amp;gt;&lt;br/&gt;
   &amp;lt;/target&amp;gt;&lt;/p&gt;

&lt;p&gt;ant jdbc then gives&lt;/p&gt;

&lt;p&gt;jdbc:&lt;br/&gt;
   &lt;span class=&quot;error&quot;&gt;&amp;#91;groovy&amp;#93;&lt;/span&gt; Start&lt;br/&gt;
   &lt;span class=&quot;error&quot;&gt;&amp;#91;groovy&amp;#93;&lt;/span&gt; Registered driver OK&lt;/p&gt;

&lt;p&gt;BUILD FAILED&lt;br/&gt;
build.xml:63: java.sql.SQLException: No suitable driver found for jdbc:oracle:thin:@//localhost:1521/sid&lt;/p&gt;</comment>
                            <comment id="14478983" author="paulk" created="Sun, 21 Mar 2010 06:56:20 +0000"  >&lt;p&gt;Proposed patch attached. Basically what was proposed in the comment but only called when an optional boolean parameter is set to true.&lt;/p&gt;</comment>
                            <comment id="14478998" author="paulk" created="Tue, 23 Mar 2010 00:06:39 +0000"  >&lt;p&gt;Patch added. Thanks for everyone&apos;s suggestions. Sorry it took so long to apply.&lt;/p&gt;</comment>
                            <comment id="14479004" author="paulk" created="Tue, 23 Mar 2010 00:07:52 +0000"  >&lt;p&gt;Usage:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;groovy contextClassLoader=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;&amp;gt;
   ... as before ...
&amp;lt;/groovy&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12721905" name="build.xml" size="1498" author="avalon" created="Wed, 15 Oct 2008 07:12:58 +0000"/>
                            <attachment id="12722504" name="groovy3064.patch" size="3769" author="paulk_asert" created="Sun, 21 Mar 2010 06:56:20 +0000"/>
                            <attachment id="12721345" name="jboss-management.jar" size="152370" author="avalon" created="Wed, 15 Oct 2008 07:12:58 +0000"/>
                            <attachment id="12721706" name="jboss-system.jar" size="267089" author="avalon" created="Wed, 15 Oct 2008 07:12:58 +0000"/>
                            <attachment id="12721707" name="jbossall-client.jar" size="5236135" author="avalon" created="Wed, 15 Oct 2008 07:26:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 36 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bvdj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>