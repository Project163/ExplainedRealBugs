<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:44:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-7173] jsonslurper does not unescape Strings (sometimes) on parsing with JsonParsingUsingCharacterSource</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-7173</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Depending on the position of the escape-character JsonParsingUsingCharacterSource.class does not recognize that the string has an escape. To raise this issue the ReaderCharacterSource.findNextChar() must be invoke recursive and the escape-character is not found in last invocation.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void findNextCharWithRecursionHadEscape() {
		&lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt;[] control = &lt;span class=&quot;code-quote&quot;&gt;&apos;&quot;\\&apos;&lt;/span&gt;.toCharArray()
		
		&lt;span class=&quot;code-comment&quot;&gt;// create ReaderCharacterSource with a very small buffer, 
&lt;/span&gt;		&lt;span class=&quot;code-comment&quot;&gt;// findNextChar must be invoked recursive
&lt;/span&gt;		&lt;span class=&quot;code-comment&quot;&gt;// use a string where escape-character is in last invokation
&lt;/span&gt;		ReaderCharacterSource cs = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ReaderCharacterSource(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StringReader(&lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-quote&quot;&gt;&quot;value\\u0026&quot;&lt;/span&gt;&apos;&lt;/span&gt;),6)
		cs.findNextChar((&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;)control[0],(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;)control[1]) 
		&lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; works
&lt;/span&gt;		assertTrue(cs.hadEscape()) 
		
		&lt;span class=&quot;code-comment&quot;&gt;// use a string where escape-character is in first invokation
&lt;/span&gt;		cs = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ReaderCharacterSource(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StringReader(&lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-quote&quot;&gt;&quot;\\u0026value&quot;&lt;/span&gt;&apos;&lt;/span&gt;),6)
		cs.findNextChar((&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;)control[0],(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;)control[1]) 
		&lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; fail
&lt;/span&gt;		assertTrue(&lt;span class=&quot;code-quote&quot;&gt;&quot;ReaderCharacterSource should have detect escape in sequence&quot;&lt;/span&gt;,  cs.hadEscape())
	}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ReaderCharacterSource must keep its property foundEscape if it was true on recursive findNextChar() calls.&lt;/p&gt;

 &lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;groovy.json.internal.ReaderCharacterSource.java-line 231&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; + &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; hasAlreadyFoundEscape = foundEscape;
 &lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt; results2[] = findNextChar(match, esc);

 + &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(hasAlreadyFoundEscape){
 +      	foundEscape = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;; &lt;span class=&quot;code-comment&quot;&gt;//restore foundEscapeState
&lt;/span&gt; + }
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12817961">GROOVY-7173</key>
            <summary>jsonslurper does not unescape Strings (sometimes) on parsing with JsonParsingUsingCharacterSource</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pschumacher">Pascal Schumacher</assignee>
                                    <reporter username="toconex">Tobias Conrad</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Nov 2014 09:33:00 +0000</created>
                <updated>Mon, 23 Feb 2015 01:12:34 +0000</updated>
                            <resolved>Wed, 14 Jan 2015 14:50:26 +0000</resolved>
                                    <version>2.3.6</version>
                    <version>2.4.0-rc-1</version>
                                    <fixVersion>2.3.10</fixVersion>
                    <fixVersion>2.4.1</fixVersion>
                                    <component>JSON</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14476825" author="pschumacher" created="Tue, 30 Dec 2014 04:23:03 +0000"  >&lt;p&gt;Thanks for reporting this and for the suggested fix. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I created a &lt;a href=&quot;https://github.com/groovy/groovy-core/pull/578&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;pull request&lt;/a&gt; out of your test and your suggested fix.&lt;/p&gt;</comment>
                            <comment id="14476807" author="pschumacher" created="Wed, 14 Jan 2015 14:50:26 +0000"  >&lt;p&gt;I merged the pull request. @Tobias Conrad: Thanks for reporting and thanks for supplying the fix.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12723225" name="ReaderCharacterSourceTest.groovy" size="943" author="toconex" created="Tue, 18 Nov 2014 09:33:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 44 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2btcf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>