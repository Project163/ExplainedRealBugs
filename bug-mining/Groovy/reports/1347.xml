<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:17:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-4405] ResourceBundle in 1.7-beta-1</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-4405</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;The following works fine:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ResourceBundleTest {
    ResourceBundle res = ResourceBundle.getBundle(&lt;span class=&quot;code-quote&quot;&gt;&quot;resources&quot;&lt;/span&gt;)
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
        def x = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ResourceBundleTest()
        println &lt;span class=&quot;code-quote&quot;&gt;&quot;Done&quot;&lt;/span&gt;
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but if I change it to a &quot;static&quot; like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ResourceBundleTest {
    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; ResourceBundle res = ResourceBundle.getBundle(&lt;span class=&quot;code-quote&quot;&gt;&quot;resources&quot;&lt;/span&gt;)
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
        def x = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ResourceBundleTest()
        println &lt;span class=&quot;code-quote&quot;&gt;&quot;Done&quot;&lt;/span&gt;
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I get a stack trace:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.ExceptionInInitializerError
Caused by: java.lang.NullPointerException
    at org.codehaus.groovy.runtime.DefaultGroovyStaticMethods.getBundle(DefaultGroovyStaticMethods.java:211)
    at org.codehaus.groovy.runtime.DefaultGroovyStaticMethods.getBundle(DefaultGroovyStaticMethods.java:195)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.groovy.runtime.metaclass.ReflectionMetaMethod.invoke(ReflectionMetaMethod.java:51)
    at org.codehaus.groovy.runtime.metaclass.NewStaticMetaMethod.invoke(NewStaticMetaMethod.java:51)
    at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite$StaticMetaMethodSiteNoUnwrapNoCoerce.invoke(StaticMetaMethodSite.java:148)
    at org.codehaus.groovy.runtime.callsite.StaticMetaMethodSite.call(StaticMetaMethodSite.java:88)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:40)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:117)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)
    at groovy.jface.examples.addressbook.ResourceBundleTest.&amp;lt;clinit&amp;gt;(ResourceBundleTest.groovy:6)
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>WinXP, groovy 1.7-beta-1, Eclipse 3.5, Groovy-Eclipse Feature 2.0.0.xx-20090910-1700-e35</environment>
        <key id="12814858">GROOVY-4405</key>
            <summary>ResourceBundle in 1.7-beta-1</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="guillaume">Guillaume Sauthier</assignee>
                                    <reporter username="mera461">Frank Tolstrup</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Sep 2009 04:27:09 +0000</created>
                <updated>Wed, 15 Dec 2010 22:20:00 +0000</updated>
                            <resolved>Wed, 8 Sep 2010 05:48:47 +0000</resolved>
                                                    <fixVersion>1.7.5</fixVersion>
                    <fixVersion>1.8-beta-2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14467729" author="roshandawrani" created="Mon, 21 Sep 2009 07:05:31 +0000"  >&lt;p&gt;Cannot reproduce the issue with 1.7-beta-1as well as 1.6.5 and 1.7-beta-2 snapshots  on Windows XP with java 1.5.&lt;/p&gt;

&lt;p&gt;Can you try with groovyconsole, groovysh, etc and see if you get this error? Are you running it from within IDE when you get this error?&lt;/p&gt;</comment>
                            <comment id="14467826" author="mera461" created="Mon, 21 Sep 2009 08:59:23 +0000"  >&lt;p&gt;I running within Eclipse with the groovy plugin V2 (2.0.0.xx-20090910-1700-e35).&lt;/p&gt;

&lt;p&gt;I tried with the groovyconsole and everything works fine. I&apos;ll move the bug to the Eclipse Plugin Component.&lt;/p&gt;</comment>
                            <comment id="14467792" author="roshandawrani" created="Mon, 21 Sep 2009 09:54:15 +0000"  >&lt;p&gt;Shouldn&apos;t it be moved to GRECLIPSE project instead of groovy&apos;s eclipse-plugin component?&lt;/p&gt;</comment>
                            <comment id="14467666" author="guillaume" created="Mon, 21 Sep 2009 13:44:15 +0000"  >&lt;p&gt;Moved to the GRECLIPSE JIRA project.&lt;br/&gt;
It may be some classpath issue when running from Eclipse, something like that?&lt;br/&gt;
Which makes those bundles not available?&lt;br/&gt;
That said, the NPE doesn&apos;t sound too good, and there may be something to do in DefaultGroovyStaticMethods.getBundle(DefaultGroovyStaticMethods.java:211) as pointed at by the stacktrace. So if we see an improvement to Groovy there, we&apos;ll move the issue back in our camp.&lt;/p&gt;</comment>
                            <comment id="14470043" author="werdna" created="Tue, 7 Sep 2010 23:41:16 +0000"  >&lt;p&gt;I finally got a chance to look at this.&lt;/p&gt;

&lt;p&gt;The exception is being thrown because it is possible to run groovy classes in Eclipse by invoking the main method directly (this includes the implicitly generated main method).  When run in this manner, ReflectionUtils.getCallingClass() is throwing the exception.&lt;/p&gt;

&lt;p&gt;ReflectionUtils.getCallingClass() is looking up the call stack for the  class of the previous interesting method call (where interesting excludes reflection and MOP methods).  When run as a Groovy script, this method will return GroovyMain, but when run as a Java class, this will return null since there is no calling class when this method is invoked since it is called at the top of the call stack in the &amp;lt;clinit&amp;gt;().&lt;/p&gt;

&lt;p&gt;I am bouncing this back to the groovy project for two reasons:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;There is nothing that I can really do about this in Eclipse&lt;/li&gt;
	&lt;li&gt;It is possible to run compiled groovy classes using the java command and this same exception will be thrown.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;The solution is to add a null check at line 211 in DefaultGroovyStaticMethods.getBundle&lt;/p&gt;

&lt;p&gt;Currently, the code looks like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt; targetCL = ReflectionUtils.getCallingClass().getClassLoader();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It should be:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; c = ReflectionUtils.getCallingClass();
&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt; targetCL = c != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ? c.getClassLoader() : &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Yet another situation for the elvis operator.  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14470099" author="werdna" created="Tue, 7 Sep 2010 23:42:39 +0000"  >&lt;p&gt;Note that this issue has been moved back to the groovy project.&lt;/p&gt;</comment>
                            <comment id="14470053" author="guillaume" created="Wed, 8 Sep 2010 05:49:01 +0000"  >&lt;p&gt;Thanks Andrew.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 11 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2cmjj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>