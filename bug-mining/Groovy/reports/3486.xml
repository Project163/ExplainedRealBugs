<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:59:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-8833] @Canonical creates invalid hashCode</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-8833</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Applying &lt;tt&gt;@Canonical&lt;/tt&gt; to a class will generate an invalid hashCode method that throws a runtime cast exception. This does not happen if you apply the individual annotations by themselves.&lt;/p&gt;

&lt;p&gt;These tests can be injected into a Groovy test class to see the problem: &lt;a href=&quot;https://gist.github.com/kenzierocks/fb0932756c3955a7ddbc0b710791af11&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gist.github.com/kenzierocks/fb0932756c3955a7ddbc0b710791af11&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I suspect the underlying cause is that &lt;tt&gt;@EqualsAndHashCode&lt;/tt&gt; does not set &lt;tt&gt;accessedVariable&lt;/tt&gt; on its &lt;tt&gt;_result&lt;/tt&gt; variable, which causes the verifier to overwrite it with &lt;tt&gt;toString&lt;/tt&gt;&apos;s &lt;tt&gt;_result&lt;/tt&gt; variable (see &lt;tt&gt;FinalVariableAnalyzer#fixVar&lt;/tt&gt;). This results in an invalid cast. I observed this behavior while debugging the compiler. I&apos;m not sure why this doesn&apos;t also happen if the two annotations are applied by themselves, rather than via &lt;tt&gt;@Canonical&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I was able to fix this problem by setting &lt;tt&gt;_result&lt;/tt&gt; to reference itself in the AST, but perhaps that&apos;s not the right fix here.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13189934">GROOVY-8833</key>
            <summary>@Canonical creates invalid hashCode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="kenzierocks">Octavia Togami</reporter>
                        <labels>
                    </labels>
                <created>Sun, 7 Oct 2018 07:36:00 +0000</created>
                <updated>Thu, 13 Dec 2018 10:05:29 +0000</updated>
                            <resolved>Mon, 8 Oct 2018 10:28:32 +0000</resolved>
                                    <version>2.5.2</version>
                                    <fixVersion>3.0.0-alpha-4</fixVersion>
                    <fixVersion>2.5.3</fixVersion>
                                    <component>Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16641636" author="paulk" created="Mon, 8 Oct 2018 10:28:17 +0000"  >&lt;p&gt;Well spotted. This is now fixed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 6 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3yx1r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>