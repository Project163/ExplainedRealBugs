<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:10:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-8850] StreamingMarkupBuilder adds namespace on elements not expected</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-8850</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;weird groovy markupbuilder behavior when upgrading to 2.5.3, it adds namespaces to an element, did not happen in earlier versions and messes up parsing later&#8230; Element SUBJUPDRQ should not have namespace&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;?&amp;gt;
&amp;lt;GSRL xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//www.dnb.com/GSRL/Vers7/Rls24&quot;&lt;/span&gt; xmlns:xsi=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&lt;/span&gt;&amp;gt;
&lt;/span&gt;  &amp;lt;GSRLMSGSRQV1&amp;gt;
    &amp;lt;SUBJUPDTRNRQ&amp;gt;
      &amp;lt;TRNUID&amp;gt;GSRL7BNRSE_20181018110156&amp;lt;/TRNUID&amp;gt;
      &amp;lt;SUBJUPDRQ xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//www.dnb.com/GSRL/Vers7/Rls24&quot;&lt;/span&gt; xmlns:xsi=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&lt;/span&gt;&amp;gt;
&lt;/span&gt;...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13192473">GROOVY-8850</key>
            <summary>StreamingMarkupBuilder adds namespace on elements not expected</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="sigmundl">Sigmund Lundgren</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Oct 2018 09:28:14 +0000</created>
                <updated>Sun, 2 May 2021 09:16:47 +0000</updated>
                            <resolved>Mon, 28 Dec 2020 05:15:08 +0000</resolved>
                                    <version>2.5.3</version>
                                    <fixVersion>2.5.15</fixVersion>
                    <fixVersion>3.0.8</fixVersion>
                    <fixVersion>4.0.0-alpha-3</fixVersion>
                                    <component>groovy-jdk</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16655020" author="paulk" created="Thu, 18 Oct 2018 10:26:25 +0000"  >&lt;p&gt;Do you have a fragment of code which illustrates the behavior difference? I.e.  shows the different behavior when run on two different Groovy versions.&lt;/p&gt;

&lt;p&gt;Also, it seems that while not needed, the extra namespace annotation should not make any difference for a namespace-aware XML parser?&lt;/p&gt;</comment>
                            <comment id="16655032" author="sigmundl" created="Thu, 18 Oct 2018 10:42:33 +0000"  >&lt;p&gt;The output differs with 2.5.3 we get:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 &amp;lt;SUBJUPDRQ xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//www.dnb.com/GSRL/Vers7/Rls24&quot;&lt;/span&gt; xmlns:xsi=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Earlier versions just&#160;&lt;tt&gt;&amp;lt;SUBJUPDRQ&amp;gt;&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Should be valid even with namespace added but we have legacy code that fails hard..&lt;/p&gt;

&lt;p&gt;Code snippet:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
def xml = markupBuilder.bind { builder -&amp;gt;
 mkp.xmlDeclaration()
 mkp.declareNamespace(&lt;span class=&quot;code-quote&quot;&gt;&apos;&apos;: &apos;&lt;/span&gt;http:&lt;span class=&quot;code-comment&quot;&gt;//www.dnb.com/GSRL/Vers7/Rls24&apos;,
&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;xsi&apos;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&apos;http:&lt;span class=&quot;code-comment&quot;&gt;//www.w3.org/2001/XMLSchema-instance&apos;&lt;/span&gt;)
&lt;/span&gt; GSRL {
   GSRLMSGSRQV1 {
     SUBJUPDTRNRQ {
       addTrnUID(builder)
       SUBJUPDRQ {
         topics.each{ topic -&amp;gt; mkp.yieldUnescaped topic }
      }
    }
  }
}
&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; XmlUtil.serialize(xml.toString())
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16655211" author="paulk" created="Thu, 18 Oct 2018 13:15:09 +0000"  >&lt;p&gt;I added code tags - let me know if it looks okay. By legacy code, you mean non-Groovy?&lt;/p&gt;</comment>
                            <comment id="16655617" author="sigmundl" created="Thu, 18 Oct 2018 17:20:13 +0000"  >&lt;p&gt;great, yes java other consumers / systems of the xml being produced&lt;/p&gt;</comment>
                            <comment id="16663618" author="sigmundl" created="Thu, 25 Oct 2018 11:38:54 +0000"  >&lt;p&gt;Latest working version we tried was&#160;2.4.15&lt;/p&gt;</comment>
                            <comment id="16928517" author="anton.troshin" created="Thu, 12 Sep 2019 13:21:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulk&quot; class=&quot;user-hover&quot; rel=&quot;paulk&quot;&gt;paulk&lt;/a&gt; I confirm, stumbled upon it in the latest Groovy version which is 2.5.8, the 2.4.15 gave clean result. I have attached the two output fragments. Note that the latest version doesn&apos;t insert namespaces into every tag but into every third one which is weird. I suggest fixing this.&lt;/p&gt;</comment>
                            <comment id="17255069" author="joosth" created="Sat, 26 Dec 2020 17:10:31 +0000"  >&lt;p&gt;In groovy 2.5 the behaviour of ArrayLists has changed ( ! ) and now this line:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/blob/5bd5af6913d1f66a31d0deed0ee6ddaa920704a5/subprojects/groovy-xml/src/main/groovy/groovy/xml/StreamingMarkupBuilder.groovy#L174&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/blob/5bd5af6913d1f66a31d0deed0ee6ddaa920704a5/subprojects/groovy-xml/src/main/groovy/groovy/xml/StreamingMarkupBuilder.groovy#L174&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;and this line:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/blob/5bd5af6913d1f66a31d0deed0ee6ddaa920704a5/subprojects/groovy-xml/src/main/groovy/groovy/xml/StreamingMarkupBuilder.groovy#L190&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/blob/5bd5af6913d1f66a31d0deed0ee6ddaa920704a5/subprojects/groovy-xml/src/main/groovy/groovy/xml/StreamingMarkupBuilder.groovy#L190&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;operate on different ends of the pendingNamespaces list.&lt;/p&gt;

&lt;p&gt;And that makes a mess of the namespace stack.&lt;/p&gt;

&lt;p&gt;If you change the first one to read:&lt;/p&gt;

&lt;p&gt;pendingStack.push pendingNamespaces.clone()&lt;/p&gt;

&lt;p&gt;it works again.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17255377" author="paulk" created="Mon, 28 Dec 2020 05:15:08 +0000"  >&lt;p&gt;Should be fixed as per the suggested fix. Thanks all involved!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12980195" name="bad.xml" size="4990" author="anton.troshin" created="Thu, 12 Sep 2019 13:22:00 +0000"/>
                            <attachment id="12980194" name="good.xml" size="3664" author="anton.troshin" created="Thu, 12 Sep 2019 13:21:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 46 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3zckv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>