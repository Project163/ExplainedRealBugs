<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:53:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-7969] Incorrect modifers on setter for volatile property with @Bindable/@Vetoable</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-7969</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;As part of &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-3726&quot; title=&quot;Compiler incorrectly generating bridge methods&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-3726&quot;&gt;&lt;del&gt;GROOVY-3726&lt;/del&gt;&lt;/a&gt; we fixed getter/setter method modifiers for volatile (or transient) properties. The @Bindable and @Vetoable transforms however generate their own setters and bypass that fix.&lt;/p&gt;

&lt;p&gt;Here is a script to reproduce the problem:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; java.lang.reflect.Modifier.toString
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.beans.Bindable

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Foo {
  &lt;span class=&quot;code-keyword&quot;&gt;volatile&lt;/span&gt; Date now
}

@Bindable &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Bar {
  &lt;span class=&quot;code-keyword&quot;&gt;volatile&lt;/span&gt; Date then
}

void pretty(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; mod) { println &lt;span class=&quot;code-quote&quot;&gt;&quot;${mod.toString().padRight(10)}&quot;&lt;/span&gt; + toString(mod) }

pretty(Foo.getMethod(&lt;span class=&quot;code-quote&quot;&gt;&apos;getNow&apos;&lt;/span&gt;).modifiers)
pretty(Foo.getMethod(&lt;span class=&quot;code-quote&quot;&gt;&apos;setNow&apos;&lt;/span&gt;, Date).modifiers)
pretty(Bar.getMethod(&lt;span class=&quot;code-quote&quot;&gt;&apos;getThen&apos;&lt;/span&gt;).modifiers)
pretty(Bar.getMethod(&lt;span class=&quot;code-quote&quot;&gt;&apos;setThen&apos;&lt;/span&gt;, Date).modifiers)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which currently produces:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;1         public
1         public
1         public
65        public volatile
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13011321">GROOVY-7969</key>
            <summary>Incorrect modifers on setter for volatile property with @Bindable/@Vetoable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="paulk">Paul King</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Oct 2016 11:53:56 +0000</created>
                <updated>Wed, 1 Feb 2017 23:18:44 +0000</updated>
                            <resolved>Thu, 13 Oct 2016 07:29:48 +0000</resolved>
                                                    <fixVersion>2.4.8</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15568490" author="githubbot" created="Wed, 12 Oct 2016 11:44:00 +0000"  >&lt;p&gt;GitHub user paulk-asert opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/448&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/448&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7969&quot; title=&quot;Incorrect modifers on setter for volatile property with @Bindable/@Vetoable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7969&quot;&gt;&lt;del&gt;GROOVY-7969&lt;/del&gt;&lt;/a&gt;: Incorrect modifers on setter for volatile property with &#8230;&lt;/p&gt;

&lt;p&gt;    &#8230;@Bindable/@Vetoable&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/paulk-asert/groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/paulk-asert/groovy&lt;/a&gt; groovy7969&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/448.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/448.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #448&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 254e6038e033b29b7fd9d0512dc11e13997d8730&lt;br/&gt;
Author: paulk &amp;lt;paulk@asert.com.au&amp;gt;&lt;br/&gt;
Date:   2016-10-12T11:42:17Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7969&quot; title=&quot;Incorrect modifers on setter for volatile property with @Bindable/@Vetoable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7969&quot;&gt;&lt;del&gt;GROOVY-7969&lt;/del&gt;&lt;/a&gt;: Incorrect modifers on setter for volatile property with @Bindable/@Vetoable&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15569528" author="githubbot" created="Wed, 12 Oct 2016 18:38:19 +0000"  >&lt;p&gt;Github user blackdrag commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/448#discussion_r83071079&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/448#discussion_r83071079&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/main/org/codehaus/groovy/ast/tools/PropertyNodeUtils.java &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,50 @@&lt;br/&gt;
    +/*&lt;br/&gt;
    + *  Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
    + *  or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
    + *  distributed with this work for additional information&lt;br/&gt;
    + *  regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
    + *  to you under the Apache License, Version 2.0 (the&lt;br/&gt;
    + *  &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
    + *  with the License.  You may obtain a copy of the License at&lt;br/&gt;
    + *&lt;br/&gt;
    + *    &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
    + *&lt;br/&gt;
    + *  Unless required by applicable law or agreed to in writing,&lt;br/&gt;
    + *  software distributed under the License is distributed on an&lt;br/&gt;
    + *  &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
    + *  KIND, either express or implied.  See the License for the&lt;br/&gt;
    + *  specific language governing permissions and limitations&lt;br/&gt;
    + *  under the License.&lt;br/&gt;
    + */&lt;br/&gt;
    +package org.codehaus.groovy.ast.tools;&lt;br/&gt;
    +&lt;br/&gt;
    +import org.codehaus.groovy.ast.PropertyNode;&lt;br/&gt;
    +&lt;br/&gt;
    +import java.lang.reflect.Modifier;&lt;br/&gt;
    +&lt;br/&gt;
    +public class PropertyNodeUtils {&lt;br/&gt;
    +    /**&lt;br/&gt;
    +     * Fields within the AST that have no explicit visibility are deemed to be properties&lt;br/&gt;
    +     * and represented by a PropertyNode. The Groovy compiler creates accessor methods and&lt;br/&gt;
    +     * a backing field for such property nodes. During this process, all modifiers&lt;br/&gt;
    +     * from the property are carried over to the backing field (so a property marked as&lt;br/&gt;
    +     * &lt;/p&gt;
{@code transient} will have a {@code transient}
&lt;p&gt; backing field) but when creating&lt;br/&gt;
    +     * the accessor methods we don&apos;t carry over modifier values which don&apos;t make sense for&lt;br/&gt;
    +     * methods (this includes VOLATILE and TRANSIENT) but other modifiers are carried over,&lt;br/&gt;
    +     * for example &lt;/p&gt;
{@code static}
&lt;p&gt;.&lt;br/&gt;
    +     *&lt;br/&gt;
    +     * @param propNode the original property node&lt;br/&gt;
    +     * @return the modifiers which make sense for an accessor method&lt;br/&gt;
    +     */&lt;br/&gt;
    +    public static int adjustPropertyModifiersForMethod(PropertyNode propNode) {&lt;br/&gt;
    +        int propNodeModifiers = propNode.getModifiers();&lt;br/&gt;
    +        // &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-3726&quot; title=&quot;Compiler incorrectly generating bridge methods&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-3726&quot;&gt;&lt;del&gt;GROOVY-3726&lt;/del&gt;&lt;/a&gt;: clear volatile, transient modifiers so that they don&apos;t get applied to methods&lt;br/&gt;
    +        if ((propNodeModifiers &amp;amp; Modifier.VOLATILE) != 0) &lt;/p&gt;
{
    +            propNodeModifiers -= Modifier.VOLATILE;
    +        }
&lt;p&gt;    +        if ((propNodeModifiers &amp;amp; Modifier.TRANSIENT) != 0) &lt;/p&gt;
{
    +            propNodeModifiers -= Modifier.TRANSIENT;
    +        }
&lt;p&gt;    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    or: propNodeModifiers = ~(Modifier.TRANSIENT | Modifier.VOLATILE) &amp;amp; propNodeModifiers&lt;/p&gt;</comment>
                            <comment id="15571134" author="paulk" created="Thu, 13 Oct 2016 07:29:49 +0000"  >&lt;p&gt;Proposed PR merged with Jochen&apos;s suggestions&lt;/p&gt;</comment>
                            <comment id="15571138" author="githubbot" created="Thu, 13 Oct 2016 07:31:19 +0000"  >&lt;p&gt;Github user paulk-asert closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/448&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/448&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 5 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34py7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>