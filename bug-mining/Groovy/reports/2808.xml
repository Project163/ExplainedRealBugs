<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:44:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-7118] @Delegate for class that implements interface with Generic Method causes VerifyError</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-7118</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Using the @Delegate annotation on a class that implements an interface where the interface defines a generic method causes a runtime VerifyError.&lt;br/&gt;
This occurs regardless of the interface being defined in Java or Groovy.&lt;/p&gt;

&lt;p&gt;Additionally it does not occur if the @Delegate instance does not implement an interface while still defining the same method.&lt;/p&gt;

&lt;p&gt;Attached an example project that exhibits the error when trying to run Spock tests using &apos;./gradlew test&apos;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.VerifyError: Bad &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; type
Exception Details:
  Location:
    foo/FooSpec.get(Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;;)Ljava/lang/Throwable; @5: areturn
  Reason:
    Type &lt;span class=&quot;code-quote&quot;&gt;&apos;java/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&apos;&lt;/span&gt; (current frame, stack[0]) is not assignable to &lt;span class=&quot;code-quote&quot;&gt;&apos;java/lang/Throwable&apos;&lt;/span&gt; (from method signature)
  Current Frame:
    bci: @5
    flags: { }
    locals: { &lt;span class=&quot;code-quote&quot;&gt;&apos;foo/FooSpec&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;java/lang/&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&apos;&lt;/span&gt; }
    stack: { &lt;span class=&quot;code-quote&quot;&gt;&apos;java/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&apos;&lt;/span&gt; }
  Bytecode:
    0000000: 2a2b b601 07b0  
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>JDK 1.80&lt;br/&gt;
JDK 1.7.0_60&lt;br/&gt;
&lt;br/&gt;
Mac OS X</environment>
        <key id="12817856">GROOVY-7118</key>
            <summary>@Delegate for class that implements interface with Generic Method causes VerifyError</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="johnrengelman">John Engelman</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Oct 2014 10:24:56 +0000</created>
                <updated>Wed, 21 Jan 2015 15:26:37 +0000</updated>
                            <resolved>Mon, 5 Jan 2015 05:01:07 +0000</resolved>
                                    <version>2.3.7</version>
                    <version>2.4.0-beta-3</version>
                                    <fixVersion>2.4.0-rc-2</fixVersion>
                                    <component>xforms</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14480730" author="paulk" created="Wed, 15 Oct 2014 22:32:55 +0000"  >&lt;p&gt;Standalone script to replicate the issue:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; FooInt {
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &amp;lt;T &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Throwable&amp;gt; T get(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;T&amp;gt; clazz) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception
}

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Foo &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; FooInt {
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &amp;lt;T &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Throwable&amp;gt; T get(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;T&amp;gt; clazz) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    clazz.newInstance()
  }
}

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;FooMain {
    @Delegate Foo foo = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Foo()
}

&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FooMain().get(Exception).class == Exception
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14480731" author="paulk" created="Wed, 15 Oct 2014 22:43:44 +0000"  >&lt;p&gt;Adding @CompileStatic to FooMain yields this error message:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[Static type checking] - Cannot call &amp;lt;T extends java.lang.Throwable&amp;gt; Foo#get(java.lang.Class &amp;lt;T&amp;gt;) with arguments [java.lang.Class &amp;lt;java.lang.Object&amp;gt;] 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Still thinking through whether this is a different issue or just a consequence of the original issue.&lt;/p&gt;</comment>
                            <comment id="14480758" author="paulk" created="Mon, 5 Jan 2015 05:00:44 +0000"  >&lt;p&gt;There is a fix for this in master (and merging for RC2). If you get a chance to test before 2.4 final, that would be great. I&apos;ll mark as resolved for now. Let me know if you have any issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12723222" name="generic-delegate.tgz" size="51203" author="johnrengelman" created="Wed, 15 Oct 2014 10:24:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 46 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2cblr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>