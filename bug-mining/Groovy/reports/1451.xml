<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:18:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-4673] java.lang.ClassFormatError: Illegal class name &quot;groovy/jmx/builder/package-info&quot; in class file groovy/jmx/builder/package-info</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-4673</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;The groovy-all-1.7.7.jar file in the embeddable directory of the binary ZIP file contains an invalid package-info file groovy.jmx.builder.package-info.class. I believe this is due to the src/main/groovy/jmx/builder/package-info.groovy file being incorrectly compiled. In Tomcat 7.0.0 and JBoss AS 6.0.0, this results in an exception like the one below and a deployment failure for any applications that bundle this JAR file.&lt;/p&gt;

&lt;p&gt;Tomcat has since released a patch that issues this is a warning and allows the deployment to continue, but JBoss AS has not. Since the problem is ultimately that a legitimately invalid package-info class exists in the library, it seems most logical that the problem be resolved with Groovy and not JBoss.&lt;/p&gt;

&lt;p&gt;I was able to resolve my issue for now by manually editing the distributable JAR file and removing the package-info.class file from it, but this is not a good permanent solution.&lt;/p&gt;

&lt;p&gt;Here is the exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;Exception&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;18:02:52,225 WARN  [org.jboss.detailed.classloader.ClassLoaderManager] Unexpected error during load of:groovy.jmx.builder.&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;-info: java.lang.ClassFormatError: Illegal &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;name &lt;span class=&quot;code-quote&quot;&gt;&quot;groovy/jmx/builder/&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;-info&quot;&lt;/span&gt; in &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;file groovy/jmx/builder/&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;-info
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.defineClass1(Native Method) [:1.6.0_23]
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.defineClassCond(Unknown Source) [:1.6.0_23]
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.defineClass(Unknown Source) [:1.6.0_23]
	at org.jboss.classloader.spi.base.BaseClassLoader.access$200(BaseClassLoader.java:52) [jboss-classloader.jar:2.2.0.GA]
	at org.jboss.classloader.spi.base.BaseClassLoader$2.run(BaseClassLoader.java:650) [jboss-classloader.jar:2.2.0.GA]
	at org.jboss.classloader.spi.base.BaseClassLoader$2.run(BaseClassLoader.java:609) [jboss-classloader.jar:2.2.0.GA]
	at java.security.AccessController.doPrivileged(Native Method) [:1.6.0_23]
	at org.jboss.classloader.spi.base.BaseClassLoader.loadClassLocally(BaseClassLoader.java:608) [jboss-classloader.jar:2.2.0.GA]
	at org.jboss.classloader.spi.base.BaseClassLoader.loadClassLocally(BaseClassLoader.java:585) [jboss-classloader.jar:2.2.0.GA]
	at org.jboss.classloader.spi.base.BaseDelegateLoader.loadClass(BaseDelegateLoader.java:156) [jboss-classloader.jar:2.2.0.GA]
	at org.jboss.classloader.spi.filter.FilteredDelegateLoader.doLoadClass(FilteredDelegateLoader.java:141) [jboss-classloader.jar:2.2.0.GA]
	at org.jboss.classloader.spi.filter.FilteredDelegateLoader.loadClass(FilteredDelegateLoader.java:132) [jboss-classloader.jar:2.2.0.GA]
	at org.jboss.classloader.spi.base.ClassLoadingTask$ThreadTask.run(ClassLoadingTask.java:461) [jboss-classloader.jar:2.2.0.GA]
	at org.jboss.classloader.spi.base.ClassLoaderManager.nextTask(ClassLoaderManager.java:262) [jboss-classloader.jar:2.2.0.GA]
	at org.jboss.classloader.spi.base.ClassLoaderManager.process(ClassLoaderManager.java:161) [jboss-classloader.jar:2.2.0.GA]
	at org.jboss.classloader.spi.base.BaseClassLoaderDomain.loadClass(BaseClassLoaderDomain.java:260) [jboss-classloader.jar:2.2.0.GA]
	at org.jboss.classloader.spi.base.BaseClassLoaderDomain.loadClass(BaseClassLoaderDomain.java:1152) [jboss-classloader.jar:2.2.0.GA]
	at org.jboss.classloader.spi.base.BaseClassLoader.loadClassFromDomain(BaseClassLoader.java:886) [jboss-classloader.jar:2.2.0.GA]
	at org.jboss.classloader.spi.base.BaseClassLoader.doLoadClass(BaseClassLoader.java:505) [jboss-classloader.jar:2.2.0.GA]
	at org.jboss.classloader.spi.base.BaseClassLoader.loadClass(BaseClassLoader.java:450) [jboss-classloader.jar:2.2.0.GA]
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(Unknown Source) [:1.6.0_23]
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.forName0(Native Method) [:1.6.0_23]
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.forName(Unknown Source) [:1.6.0_23]
	at org.jboss.reflect.plugins.introspection.IntrospectionTypeInfoFactoryImpl.resolveComplexTypeInfo(IntrospectionTypeInfoFactoryImpl.java:458) [jboss-reflect.jar:2.2.0.GA]
	at org.jboss.reflect.plugins.introspection.IntrospectionTypeInfoFactoryImpl.getTypeInfo(IntrospectionTypeInfoFactoryImpl.java:414) [jboss-reflect.jar:2.2.0.GA]
	at org.jboss.reflect.plugins.introspection.IntrospectionTypeInfoFactory.getTypeInfo(IntrospectionTypeInfoFactory.java:54) [jboss-reflect.jar:2.2.0.GA]
	at org.jboss.config.plugins.AbstractConfiguration.getTypeInfo(AbstractConfiguration.java:121) [jboss-reflect.jar:2.2.0.GA]
	at org.jboss.kernel.plugins.config.AbstractKernelConfig.getTypeInfo(AbstractKernelConfig.java:95) [jboss-kernel.jar:2.2.0.GA]
	at org.jboss.kernel.plugins.config.AbstractKernelConfigurator.getTypeInfo(AbstractKernelConfigurator.java:102) [jboss-kernel.jar:2.2.0.GA]
	at org.jboss.scanning.plugins.visitor.ConfiguratorReflectProvider.getTypeInfo(ConfiguratorReflectProvider.java:47) [:1.0.0.GA]
	at org.jboss.scanning.plugins.visitor.CachingReflectProvider.getTypeInfo(CachingReflectProvider.java:52) [:1.0.0.GA]
	at org.jboss.scanning.plugins.visitor.ReflectResourceVisitor.getTypeInfo(ReflectResourceVisitor.java:60) [:1.0.0.GA]
	at org.jboss.scanning.plugins.visitor.ReflectResourceVisitor.getClassInfo(ReflectResourceVisitor.java:72) [:1.0.0.GA]
	at org.jboss.scanning.plugins.visitor.ReflectResourceVisitor.doVisit(ReflectResourceVisitor.java:107) [:1.0.0.GA]
	at org.jboss.scanning.plugins.visitor.ReflectResourceVisitor.visit(ReflectResourceVisitor.java:86) [:1.0.0.GA]
	at org.jboss.scanning.hierarchy.plugins.HierarchyIndexScanningPlugin.visit(HierarchyIndexScanningPlugin.java:91) [:1.0.0.GA]
	at org.jboss.scanning.spi.helpers.ScanningPluginWrapper.visit(ScanningPluginWrapper.java:112) [:1.0.0.GA]
	at org.jboss.classloading.plugins.visitor.FederatedResourceVisitor.visit(FederatedResourceVisitor.java:101) [jboss-classloading.jar:2.2.0.GA]
	at org.jboss.classloading.plugins.vfs.VFSResourceVisitor.visit(VFSResourceVisitor.java:264) [jboss-classloading-vfs.jar:2.2.0.GA]
	at org.jboss.vfs.VirtualFile.visit(VirtualFile.java:408) [jboss-vfs.jar:3.0.0.GA]
	at org.jboss.vfs.VirtualFile.visit(VirtualFile.java:410) [jboss-vfs.jar:3.0.0.GA]
	at org.jboss.vfs.VirtualFile.visit(VirtualFile.java:410) [jboss-vfs.jar:3.0.0.GA]
	at org.jboss.vfs.VirtualFile.visit(VirtualFile.java:410) [jboss-vfs.jar:3.0.0.GA]
	at org.jboss.vfs.VirtualFile.visit(VirtualFile.java:396) [jboss-vfs.jar:3.0.0.GA]
	at org.jboss.classloading.plugins.vfs.VFSResourceVisitor.visit(VFSResourceVisitor.java:102) [jboss-classloading-vfs.jar:2.2.0.GA]
	at org.jboss.deployers.vfs.plugins.classloader.VFSDeploymentClassLoaderPolicyModule.visit(VFSDeploymentClassLoaderPolicyModule.java:181) [:2.2.0.GA]
	at org.jboss.scanning.plugins.DeploymentUnitScanner.scan(DeploymentUnitScanner.java:111) [:1.0.0.GA]
	at org.jboss.scanning.spi.helpers.UrlScanner.scan(UrlScanner.java:96) [:1.0.0.GA]
	at org.jboss.scanning.deployers.ScanningDeployer.deploy(ScanningDeployer.java:95) [:1.0.0.GA]
	at org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(DeployerWrapper.java:179) [:2.2.0.GA]
	at org.jboss.deployers.plugins.deployers.DeployersImpl.doDeploy(DeployersImpl.java:1832) [:2.2.0.GA]
	at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1550) [:2.2.0.GA]
	at org.jboss.deployers.plugins.deployers.DeployersImpl.install(DeployersImpl.java:1491) [:2.2.0.GA]
	at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:379) [jboss-dependency.jar:2.2.0.GA]
	at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:2044) [jboss-dependency.jar:2.2.0.GA]
	at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:1083) [jboss-dependency.jar:2.2.0.GA]
	at org.jboss.dependency.plugins.AbstractController.executeOrIncrementStateDirectly(AbstractController.java:1322) [jboss-dependency.jar:2.2.0.GA]
	at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1246) [jboss-dependency.jar:2.2.0.GA]
	at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1139) [jboss-dependency.jar:2.2.0.GA]
	at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:939) [jboss-dependency.jar:2.2.0.GA]
	at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:654) [jboss-dependency.jar:2.2.0.GA]
	at org.jboss.deployers.plugins.deployers.DeployersImpl.change(DeployersImpl.java:1983) [:2.2.0.GA]
	at org.jboss.deployers.plugins.deployers.DeployersImpl.process(DeployersImpl.java:1076) [:2.2.0.GA]
	at org.jboss.deployers.plugins.main.MainDeployerImpl.process(MainDeployerImpl.java:679) [:2.2.0.GA]
	at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:380) [:6.0.0.Final]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [:1.6.0_23]
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) [:1.6.0_23]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) [:1.6.0_23]
	at java.lang.reflect.Method.invoke(Unknown Source) [:1.6.0_23]
	at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:157) [:6.0.0.GA]
	at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96) [:6.0.0.GA]
	at org.jboss.mx.server.Invocation.invoke(Invocation.java:88) [:6.0.0.GA]
	at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:271) [:6.0.0.GA]
	at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:670) [:6.0.0.GA]
	at org.jboss.system.server.jmx.MBeanServerWrapper.invoke(MBeanServerWrapper.java:138) [:6.0.0.Final (Build SVNTag:JBoss_6.0.0.Final date: 20101228)]
	at javax.management.remote.rmi.RMIConnectionImpl.doOperation(Unknown Source) [:1.6.0_23]
	at javax.management.remote.rmi.RMIConnectionImpl.access$200(Unknown Source) [:1.6.0_23]
	at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(Unknown Source) [:1.6.0_23]
	at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(Unknown Source) [:1.6.0_23]
	at javax.management.remote.rmi.RMIConnectionImpl.invoke(Unknown Source) [:1.6.0_23]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [:1.6.0_23]
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) [:1.6.0_23]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) [:1.6.0_23]
	at java.lang.reflect.Method.invoke(Unknown Source) [:1.6.0_23]
	at sun.rmi.server.UnicastServerRef.dispatch(Unknown Source) [:1.6.0_23]
	at sun.rmi.transport.Transport$1.run(Unknown Source) [:1.6.0_23]
	at java.security.AccessController.doPrivileged(Native Method) [:1.6.0_23]
	at sun.rmi.transport.Transport.serviceCall(Unknown Source) [:1.6.0_23]
	at sun.rmi.transport.tcp.TCPTransport.handleMessages(Unknown Source) [:1.6.0_23]
	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(Unknown Source) [:1.6.0_23]
	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(Unknown Source) [:1.6.0_23]
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) [:1.6.0_23]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [:1.6.0_23]
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(Unknown Source) [:1.6.0_23]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>JBoss AS 6.0.0 / Tomcat 7.0.0&lt;br/&gt;
Windows 7</environment>
        <key id="12815486">GROOVY-4673</key>
            <summary>java.lang.ClassFormatError: Illegal class name &quot;groovy/jmx/builder/package-info&quot; in class file groovy/jmx/builder/package-info</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="beamerblvd">Nick Williams</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Feb 2011 20:35:46 +0000</created>
                <updated>Thu, 21 Jul 2011 19:06:36 +0000</updated>
                            <resolved>Wed, 20 Jul 2011 03:19:27 +0000</resolved>
                                    <version>1.7.7</version>
                                    <fixVersion>1.8.1</fixVersion>
                    <fixVersion>1.7.11</fixVersion>
                                    <component>groovy-jdk</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                            <timeestimate seconds="86400">24h</timeestimate>
                                        <comments>
                            <comment id="14470786" author="guillaume" created="Fri, 11 Feb 2011 10:18:23 +0000"  >&lt;p&gt;I&apos;ve removed the offending package-info.groovy file.&lt;/p&gt;</comment>
                            <comment id="14470801" author="beamerblvd" created="Fri, 11 Feb 2011 10:28:32 +0000"  >&lt;p&gt;I figured that would be the only needed change. Thanks!&lt;/p&gt;</comment>
                            <comment id="14470906" author="paulk" created="Fri, 11 Feb 2011 21:06:06 +0000"  >&lt;p&gt;Deleting the file from source isn&apos;t the correct approach - as we lose doco and have reduced functionality in groovydoc compared with javadoc. We need to make other parts of the build ignore such files. I&apos;ll work on a better fix shortly.&lt;/p&gt;</comment>
                            <comment id="14470892" author="paulk" created="Sun, 13 Feb 2011 02:57:40 +0000"  >&lt;p&gt;Actually looking at the generated class file I don&apos;t see much different from what Java produces in its package-info.class files. Groovy is setting &quot;major version: 49&quot; (Java 5 had some package-info support anyway) versus Java which is setting &quot;major version: 50&quot; with my default setup but otherwise the files seem alike.&lt;/p&gt;</comment>
                            <comment id="14470785" author="melix" created="Sun, 13 Feb 2011 06:24:50 +0000"  >&lt;p&gt;If I remember well, package-info.java files should only be processed by javadoc : if you compile this file with javac, no .class file should be produced. groovyc produces this file though with package-info.groovy.&lt;/p&gt;</comment>
                            <comment id="14470756" author="beamerblvd" created="Sun, 13 Feb 2011 10:12:09 +0000"  >&lt;p&gt;Let my provide a few more details...&lt;/p&gt;

&lt;p&gt;As of and after Java 1.5, package-info.java classes ARE compiled and shipped. This is because packages can retain annotations at runtime, and you annotate a package by annotating the package statement in package-info.java.&lt;/p&gt;

&lt;p&gt;Comments, annotations and the package statement should be the only things present in a package-info.java file, and the compiler strips out comments as usual and leaves just the package statement and annotations marked as having a runtime retention policy.&lt;/p&gt;

&lt;p&gt;The package-info.groovy file just had the package statement and comments in it (so it was rather worthless for anything other than JavaDocs), but when compiled, the following appeared in it (when decompiled):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; groovy.jmx.builder;

&lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;-info {

}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The Java ClassLoader, when it sees this (empty) interface defined in the class file, throws an error because you can&apos;t have hyphens in class/interface names. That is the error you get above.&lt;/p&gt;

&lt;p&gt;So the 100% correct solution is to fix the Groovy compiler to compile the package-info file correctly. The 90% correct solution is to have the Groovy compiler ignore the package-info.groovy file, but that may result in annotations being ignored (I don&apos;t know if Groovy even has annotations, I don&apos;t use Groovy, this is a dependency of Jasper Reports, which I use). Removing the package-info.groovy file doesn&apos;t necessarily work, because what&apos;s to stop someone (or someone&apos;s IDE) from recreating it?&lt;/p&gt;

&lt;p&gt;Let me know if you have questions.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="14470840" author="blackdrag" created="Sun, 13 Feb 2011 11:56:20 +0000"  >&lt;p&gt;with not correctly you mean only the name, right? How is the name supposed to be right looking?&lt;/p&gt;</comment>
                            <comment id="14470907" author="beamerblvd" created="Sun, 13 Feb 2011 12:01:24 +0000"  >&lt;p&gt;Well, there isn&apos;t supposed to be anything other than the package statement and annotations in the package-info.class file. The fact that an interface is defined in it is incorrect to begin with. Apparently, however, the ClassLoader is trying to load it anyway, but choking on the hyphen.&lt;/p&gt;

&lt;p&gt;So, no, I mean that the Groovy compiler shouldn&apos;t be putting an interface in the file at all. That is the root of the problem.&lt;/p&gt;</comment>
                            <comment id="14470895" author="blackdrag" created="Sun, 13 Feb 2011 13:20:28 +0000"  >&lt;p&gt;but there is no package statement in class files. The package is part of the classname. That means I need a classname. Or it is no ordinary class, then it would be good if someone could tell me where to get such a class file, so I can check, or to attach one here (even better)&lt;/p&gt;</comment>
                            <comment id="14470824" author="melix" created="Sun, 13 Feb 2011 13:56:32 +0000"  >&lt;p&gt;Jochen, I&apos;ve made this simple test : create an annotation like this :&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.lang.annotation.ElementType;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.lang.annotation.Retention;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.lang.annotation.RetentionPolicy;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.lang.annotation.Target;

@Retention(RetentionPolicy.CLASS)
@Target(ElementType.PACKAGE)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; @&lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; MyAnnotation {
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then use this annotation in a package-info.java file :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@groovy.test.MyAnnotation
&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; groovy.other;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then a .class file is generated (there&apos;s no .class generated if the package is not annotated). The result of javap is then :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;# javap -s -c -verbose groovy/other/&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;-info
Compiled from &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;-info.java&quot;&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; groovy.other.&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;-info
  SourceFile: &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;-info.java&quot;&lt;/span&gt;
  RuntimeInvisibleAnnotations: length = 0x6
   00 01 00 06 00 00 
  minor version: 0
  major version: 50
  Constant pool:
&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; #1 = class	#7;	&lt;span class=&quot;code-comment&quot;&gt;//  &lt;span class=&quot;code-quote&quot;&gt;&quot;groovy/other/&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;-info&quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; #2 = class	#8;	&lt;span class=&quot;code-comment&quot;&gt;//  java/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; #3 = Asciz	SourceFile;
&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; #4 = Asciz	&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;-info.java;
&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; #5 = Asciz	RuntimeInvisibleAnnotations;
&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; #6 = Asciz	Lgroovy/test/MyAnnotation;;
&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; #7 = Asciz	groovy/other/&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;-info;
&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; #8 = Asciz	java/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;

{
}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14470858" author="melix" created="Sun, 13 Feb 2011 13:58:55 +0000"  >&lt;p&gt;Example of package-info.class&lt;/p&gt;</comment>
                            <comment id="14479460" author="paulk" created="Sun, 13 Feb 2011 16:10:29 +0000"  >&lt;p&gt;I have this same setup. The Java and Groovy class files look essentially the same to me. Can anyone confirm that a Java package-info file works with Tomcat or JBoss?&lt;/p&gt;</comment>
                            <comment id="14470898" author="melix" created="Tue, 15 Feb 2011 15:29:11 +0000"  >&lt;p&gt;I created a mini webapp with both a Java annotated package-info.java file and the groovy  1.7.7 library in the classpath. Under Tomcat 7.0.8, I can&apos;t see any error nor warning...&lt;/p&gt;</comment>
                            <comment id="14479449" author="paulk" created="Wed, 16 Feb 2011 15:49:45 +0000"  >&lt;p&gt;C&#233;dric: And you can replicate the ClassFormatError by replacing the Java based package-info class file in your web app with a Groovyc&apos;d class file?&lt;/p&gt;</comment>
                            <comment id="14470899" author="melix" created="Wed, 16 Feb 2011 16:40:46 +0000"  >&lt;p&gt;No, I meant I tested both. I can&apos;t reproduce at all. I&apos;m starting to think this is not directly related to Groovy, but rather to a &quot;magic library&quot; which performs classpath scanning. Nicolas, how do you deploy your application ? As a war file ? Do you include groovy libs in the application server lib directory ?&lt;/p&gt;</comment>
                            <comment id="14479463" author="paulk" created="Fri, 25 Feb 2011 15:37:17 +0000"  >&lt;p&gt;I have reverted the package-info file in 1.8 and trunk (but for now have left it out of the 1_7_X branch). I can find no difference in Java and Groovy generated files when runtime annotations are used. Leaving open for now as we should check further the case when no runtime annotations are supplied. In theory we can leave out the class file altogether in that case - have to double check what we actually do - certainly ant leaves around a stub in that case even though it is not required.&lt;/p&gt;</comment>
                            <comment id="14471340" author="graemerocher" created="Sun, 12 Jun 2011 15:28:59 +0000"  >&lt;p&gt;Raising the priority of this because it breaks deployment of Grails applications on JBoss 6. See &lt;a href=&quot;http://jira.grails.org/browse/GRAILS-7553&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jira.grails.org/browse/GRAILS-7553&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14479573" author="paulk" created="Sun, 12 Jun 2011 15:44:04 +0000"  >&lt;p&gt;Lowering priority for now. Groovy 1.7.9 and 1.7.10 (and future 1.7.* versions) don&apos;t have the files which cause the error.&lt;/p&gt;

&lt;p&gt;Groovy 1.8.0 does include the mentioned files as Tomcat and JBoss break on the Java equivalent of those files anyway - so on present information, those containers contain the bug not Groovy. Our thinking was that those app servers would fix the problem before Groovy 1.8 was widely used in a bundled Grails. Please re-raise the priority if you do not believe that to be the case and we can look at workarounds for 1.8 too (we basically throw away doco and potentially annotations - so not the long term approach we would like to take). Besides, I would suspect any users using standard Java javadoc conventions will be caught out by the same issue - though I haven&apos;t tried it.&lt;/p&gt;</comment>
                            <comment id="14471383" author="graemerocher" created="Mon, 13 Jun 2011 03:48:20 +0000"  >&lt;p&gt;I don&apos;t think its acceptable for us to expect containers to fix this problem. Also since Tomcat is still issuing a warning that makes for an unpleasant experience for users. My recommendation is that a workaround be found for the problem in 1.8.1&lt;/p&gt;

&lt;p&gt;It is not acceptable situation that people cannot deploy Groovy applications to JBoss or Tomcat cleanly. If it is a choice between worse documentation and deploying to containers then the latter wins by a mile. &lt;/p&gt;</comment>
                            <comment id="14479574" author="paulk" created="Mon, 13 Jun 2011 07:48:24 +0000"  >&lt;p&gt;Well we &lt;em&gt;should&lt;/em&gt; expect them to fix this since Java 1.5 has been out since 2004 and indeed is already EOL - they have certainly had plenty of time to become 1.5 compliant. But agree that we shouldn&apos;t rely on it. Rather than delete our doco, we hopefully can tweak our build to remove the troublesome classes after the doco is generated. Of course, users won&apos;t be able to use runtime package-level annotations nor bundle their doco if using the recommended 1.5 style in their grails war until the containers are fixed.&lt;/p&gt;</comment>
                            <comment id="14471496" author="graemerocher" created="Tue, 19 Jul 2011 15:15:28 +0000"  >&lt;p&gt;Is this going to be resolved for 1.8.1? It is causing &lt;a href=&quot;http://jira.grails.org/browse/GRAILS-7756&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jira.grails.org/browse/GRAILS-7756&lt;/a&gt; and should really be a blocker IMO. Has the tweak to the build been done?&lt;/p&gt;</comment>
                            <comment id="14479651" author="paulk" created="Tue, 19 Jul 2011 16:49:38 +0000"  >&lt;p&gt;I have a tweak to the build files which I will commit tonight once I have better connectivity, so it should be in 1.8.1.&lt;/p&gt;</comment>
                            <comment id="14479624" author="paulk" created="Wed, 20 Jul 2011 03:19:27 +0000"  >&lt;p&gt;Build has been modified to remove the package-info.class files from the binary jars for now. They can still be found in the source jars at the moment. Let me know if there are any further problems.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12722776" name="MyAnnotation.java" size="369" author="melix" created="Sun, 13 Feb 2011 13:58:55 +0000"/>
                            <attachment id="12722734" name="package-info.class" size="189" author="melix" created="Sun, 13 Feb 2011 13:58:55 +0000"/>
                            <attachment id="12722779" name="package-info.java" size="69" author="melix" created="Sun, 13 Feb 2011 13:58:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 18 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bz53:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>