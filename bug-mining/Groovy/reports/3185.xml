<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:54:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-8030] An unexpected error has occurred when using &apos;kkk = kkk + 12&apos;</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-8030</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Test groovy code:&lt;br/&gt;
------------------------------------&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; com.test

def kkk = 123
kkk = &lt;span class=&quot;code-quote&quot;&gt;&quot;123&quot;&lt;/span&gt;

println kkk.toInteger()

&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; a = 0;

&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (a &amp;gt; 0)
{
  kkk = 789
  kkk = kkk + 12 &lt;span class=&quot;code-comment&quot;&gt;// This code caused error occur
&lt;/span&gt;}
&lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
{
  kkk = &lt;span class=&quot;code-quote&quot;&gt;&quot;456&quot;&lt;/span&gt;
  kkk = kkk + &lt;span class=&quot;code-quote&quot;&gt;&quot;78&quot;&lt;/span&gt;
}

&lt;span class=&quot;code-comment&quot;&gt;//println kkk.toUpperCase()
&lt;/span&gt;println kkk
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Error message:&lt;br/&gt;
------------------------------------&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception in thread &quot;main&quot; BUG! exception in phase &apos;class generation&apos; in source unit &apos;SimpleDemo&apos; At line 13 column 9
On receiver: kkk with message: plus and arguments: 12
This method should not have been called. Please try to create a simple example reproducing this error and filea bug report at https://issues.apache.org/jira/browse/GROOVY
	at org.codehaus.groovy.classgen.asm.sc.StaticTypesCallSiteWriter.makeSingleArgumentCall(StaticTypesCallSiteWriter.java:634)
	at org.codehaus.groovy.classgen.asm.InvocationWriter.makeSingleArgumentCall(InvocationWriter.java:616)
	at org.codehaus.groovy.classgen.asm.BinaryExpressionHelper.evaluateBinaryExpression(BinaryExpressionHelper.java:529)
	at org.codehaus.groovy.classgen.asm.BinaryExpressionMultiTypeDispatcher.evaluateBinaryExpression(BinaryExpressionMultiTypeDispatcher.java:230)
	at org.codehaus.groovy.classgen.asm.BinaryExpressionHelper.eval(BinaryExpressionHelper.java:148)
	at org.codehaus.groovy.classgen.AsmClassGenerator.visitBinaryExpression(AsmClassGenerator.java:638)
	at org.codehaus.groovy.ast.expr.BinaryExpression.visit(BinaryExpression.java:51)
	at org.codehaus.groovy.classgen.asm.BinaryExpressionHelper.evaluateEqual(BinaryExpressionHelper.java:316)
	at org.codehaus.groovy.classgen.asm.sc.StaticTypesBinaryExpressionMultiTypeDispatcher.evaluateEqual(StaticTypesBinaryExpressionMultiTypeDispatcher.java:151)
	at org.codehaus.groovy.classgen.asm.BinaryExpressionHelper.eval(BinaryExpressionHelper.java:84)
	at org.codehaus.groovy.classgen.AsmClassGenerator.visitBinaryExpression(AsmClassGenerator.java:638)
	at org.codehaus.groovy.ast.expr.BinaryExpression.visit(BinaryExpression.java:51)
	at org.codehaus.groovy.classgen.asm.StatementWriter.writeExpressionStatement(StatementWriter.java:607)
	at org.codehaus.groovy.classgen.AsmClassGenerator.visitExpressionStatement(AsmClassGenerator.java:620)
	at org.codehaus.groovy.ast.stmt.ExpressionStatement.visit(ExpressionStatement.java:42)
	at org.codehaus.groovy.classgen.asm.StatementWriter.writeBlockStatement(StatementWriter.java:84)
	at org.codehaus.groovy.classgen.asm.sc.StaticTypesStatementWriter.writeBlockStatement(StaticTypesStatementWriter.java:65)
	at org.codehaus.groovy.classgen.AsmClassGenerator.visitBlockStatement(AsmClassGenerator.java:566)
	at org.codehaus.groovy.ast.stmt.BlockStatement.visit(BlockStatement.java:71)
	at org.codehaus.groovy.classgen.asm.StatementWriter.writeIfElse(StatementWriter.java:288)
	at org.codehaus.groovy.classgen.AsmClassGenerator.visitIfElse(AsmClassGenerator.java:582)
	at org.codehaus.groovy.ast.stmt.IfStatement.visit(IfStatement.java:43)
	at org.codehaus.groovy.classgen.asm.StatementWriter.writeBlockStatement(StatementWriter.java:84)
	at org.codehaus.groovy.classgen.asm.sc.StaticTypesStatementWriter.writeBlockStatement(StaticTypesStatementWriter.java:65)
	at org.codehaus.groovy.classgen.AsmClassGenerator.visitBlockStatement(AsmClassGenerator.java:566)
	at org.codehaus.groovy.ast.stmt.BlockStatement.visit(BlockStatement.java:71)
	at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitClassCodeContainer(ClassCodeVisitorSupport.java:104)
	at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitConstructorOrMethod(ClassCodeVisitorSupport.java:115)
	at org.codehaus.groovy.classgen.AsmClassGenerator.visitStdMethod(AsmClassGenerator.java:430)
	at org.codehaus.groovy.classgen.AsmClassGenerator.visitConstructorOrMethod(AsmClassGenerator.java:387)
	at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitMethod(ClassCodeVisitorSupport.java:126)
	at org.codehaus.groovy.classgen.AsmClassGenerator.visitMethod(AsmClassGenerator.java:507)
	at org.codehaus.groovy.ast.ClassNode.visitContents(ClassNode.java:1086)
	at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitClass(ClassCodeVisitorSupport.java:53)
	at org.codehaus.groovy.classgen.AsmClassGenerator.visitClass(AsmClassGenerator.java:233)
	at org.codehaus.groovy.control.CompilationUnit$16.call(CompilationUnit.java:813)
	at org.codehaus.groovy.control.CompilationUnit.applyToPrimaryClassNodes(CompilationUnit.java:1055)
	at org.codehaus.groovy.control.CompilationUnit.doPhaseOperation(CompilationUnit.java:591)
	at org.codehaus.groovy.control.CompilationUnit.processPhaseOperations(CompilationUnit.java:569)
	at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:546)
	at groovy.lang.GroovyClassLoader.doParseClass(GroovyClassLoader.java:298)
	at groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:268)
	at groovy.lang.GroovyShell.parseClass(GroovyShell.java:694)
	at groovy.lang.GroovyShell.parse(GroovyShell.java:706)
	at groovy.lang.GroovyShell.parse(GroovyShell.java:742)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>java.version=1.8.0_45&lt;br/&gt;
java.runtime.version=1.8.0_45-b15&lt;br/&gt;
os.arch=x86&lt;br/&gt;
os.name=Windows 7&lt;br/&gt;
sun.jnu.encoding=GBK</environment>
        <key id="13031196">GROOVY-8030</key>
            <summary>An unexpected error has occurred when using &apos;kkk = kkk + 12&apos;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="x_MM1229">XueJun</reporter>
                        <labels>
                    </labels>
                <created>Fri, 30 Dec 2016 03:03:40 +0000</created>
                <updated>Wed, 8 Mar 2017 08:17:17 +0000</updated>
                            <resolved>Sun, 5 Feb 2017 10:33:47 +0000</resolved>
                                    <version>2.4.5</version>
                                    <fixVersion>2.4.9</fixVersion>
                                    <component>Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15787297" author="blackdrag" created="Fri, 30 Dec 2016 09:25:50 +0000"  >&lt;p&gt;the stack trace suggest static compilation, your example code does not show anything about static compilation. Can you please confirm this happens only during static compilation?&lt;/p&gt;</comment>
                            <comment id="15787307" author="x_mm1229" created="Fri, 30 Dec 2016 09:32:40 +0000"  >&lt;p&gt;Yes, i&apos;m sure. The error only occur during static compilation.&lt;/p&gt;

&lt;p&gt;We using below code add compileStatic feature:&lt;br/&gt;
configuration.addCompilationCustomizers(new ASTTransformationCustomizer(CompileStatic.class));&lt;/p&gt;</comment>
                            <comment id="15842527" author="paulk" created="Fri, 27 Jan 2017 10:40:22 +0000"  >&lt;p&gt;A smaller example illustrating the issue:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@groovy.transform.CompileStatic
def main() {
    def kkk = &lt;span class=&quot;code-quote&quot;&gt;&quot;abc&quot;&lt;/span&gt;
    kkk = 30
    kkk + 12 &lt;span class=&quot;code-comment&quot;&gt;// BUG! exception in phase &lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;generation&apos;&lt;/span&gt;
&lt;/span&gt;}

&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; main() == 42
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It&apos;s using the LUB and Serializable doesn&apos;t have &lt;tt&gt;plus&lt;/tt&gt; but it shouldn&apos;t be using LUB here.&lt;/p&gt;</comment>
                            <comment id="15846414" author="paulk" created="Tue, 31 Jan 2017 05:32:59 +0000"  >&lt;p&gt;The last line succeeds if written as: &lt;tt&gt;kkk += 12&lt;/tt&gt; or &lt;tt&gt;kkk.plus(12)&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="15851296" author="githubbot" created="Fri, 3 Feb 2017 10:19:16 +0000"  >&lt;p&gt;GitHub user paulk-asert opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/488&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/488&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8030&quot; title=&quot;An unexpected error has occurred when using &amp;#39;kkk = kkk + 12&amp;#39;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8030&quot;&gt;&lt;del&gt;GROOVY-8030&lt;/del&gt;&lt;/a&gt;: An unexpected error has occurred when using &apos;kkk = kkk +&#8230;&lt;/p&gt;

&lt;p&gt;    &#8230; 12&apos;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/paulk-asert/groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/paulk-asert/groovy&lt;/a&gt; groovy8030&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/488.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/488.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #488&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 1338c7c7cacabf316db13a71c0c4bdfa54741ce1&lt;br/&gt;
Author: paulk &amp;lt;paulk@asert.com.au&amp;gt;&lt;br/&gt;
Date:   2017-02-03T09:59:47Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8030&quot; title=&quot;An unexpected error has occurred when using &amp;#39;kkk = kkk + 12&amp;#39;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8030&quot;&gt;&lt;del&gt;GROOVY-8030&lt;/del&gt;&lt;/a&gt;: An unexpected error has occurred when using &apos;kkk = kkk + 12&apos;&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15853192" author="paulk" created="Sun, 5 Feb 2017 10:33:47 +0000"  >&lt;p&gt;Proposed PR merged&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 41 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i384g7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>