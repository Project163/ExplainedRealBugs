<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:09:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-9815] Object not bound with Groovy (but works fine in Java)</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-9815</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Consider the following reproducer:&#160;&lt;a href=&quot;https://github.com/ptomaszek/vertx-groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ptomaszek/vertx-groovy&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;As it can be seen, there are two main classes: one with Groovy and one with Java. Both of them are simple reproducers of Vert.x Promises. When an object of Promisse calls it&apos;s future() method, it seems to create a new Future instance everytime, instead of just returning the existing one.&lt;/p&gt;

&lt;p&gt;&#160;The code within the reproducer has similar codes in Groovy and Java. When MainJava runs, it prints true, which is the expected behaviour. When MainGroovy runs, it prints false unless the class is annotated with @CompileStatic.&#160;&lt;/p&gt;

&lt;p&gt;Another reproducer is &lt;a href=&quot;https://github.com/tienquanutc/vertx-promise-groovy-bug&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tienquanutc/vertx-promise-groovy-bug&lt;/a&gt;&#160;. This one also has two classes with similar codes. As promise.future() gets called four times, JMain classes prints 1 which is ok, but GMain prints 4. This one also works as expected with Groovy using&#160;@CompileStatic.&#160;&lt;/p&gt;

&lt;p&gt;This can be related to the fact that Promise and Future share the same implementation (&lt;a href=&quot;https://github.com/eclipse-vertx/vert.x/tree/3.9/src/main/java/io/vertx/core)&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/eclipse-vertx/vert.x/tree/3.9/src/main/java/io/vertx/core)&lt;/a&gt;. Apparently&#160;when Groovy resolves the future() method call dynamically, it invokes the Future.future() static method instead of the instance Promise.future() method.&#160;&lt;/p&gt;

&lt;p&gt;There&apos;s also some healthy discussion here&#160;&lt;a href=&quot;https://github.com/vert-x3/vertx-lang-groovy/issues/113&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/vert-x3/vertx-lang-groovy/issues/113&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;I don&apos;t think it&apos;s a bug with Vert.x, since the code with Java works correctly.&lt;/p&gt;</description>
                <environment>OS: Windows 10&lt;br/&gt;
AdoptJDK Hotspot 1.8.0.272</environment>
        <key id="13340519">GROOVY-9815</key>
            <summary>Object not bound with Groovy (but works fine in Java)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="aaloise">Andr&#233; Filipe Aloise</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Nov 2020 13:21:56 +0000</created>
                <updated>Mon, 7 Dec 2020 22:09:48 +0000</updated>
                            <resolved>Tue, 24 Nov 2020 15:37:43 +0000</resolved>
                                    <version>3.0.6</version>
                                    <fixVersion>3.0.7</fixVersion>
                    <fixVersion>4.0.0-alpha-2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="2400">40m</timespent>
                                <comments>
                            <comment id="17237690" author="emilles" created="Mon, 23 Nov 2020 20:37:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/tienquanutc/vertx-promise-groovy-bug&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tienquanutc/vertx-promise-groovy-bug&lt;/a&gt; uses Groovy 2.3.11&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/ptomaszek/vertx-groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ptomaszek/vertx-groovy&lt;/a&gt; uses Groovy 3.0.2&lt;/p&gt;

&lt;p&gt;If I run this script with Groovy 2.5.13 it succeeds or with Groovy 3.0.6 it fails.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
@Grab(&lt;span class=&quot;code-quote&quot;&gt;&apos;io.vertx:vertx-core:3.9.4&apos;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; io.vertx.core.Promise

Promise p = Promise.promise()
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; p.future().is(p.future())
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17237750" author="emilles" created="Mon, 23 Nov 2020 23:25:31 +0000"  >&lt;p&gt;I think this does the trick for preventing the static method from Future from overriding the object method from Promise.  &lt;a href=&quot;https://github.com/apache/groovy/pull/1431&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1431&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17238217" author="paulk" created="Tue, 24 Nov 2020 15:37:43 +0000"  >&lt;p&gt;Proposed PR merged. Just in master for now. Might need a little work to merge into GROOVY_3_0_X.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 51 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0kkm8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>