<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:26:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-4292] ClassHelper.ClassHelperCache#classCache is not thread-safe</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-4292</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;When parsing Groovy scripts from multiple threads at a time, the call to WeakHashMap.get() may never return due to internal corruption due to the concurrent access. Since IntelliJ IDEA does its GDSL parsing in parallel threads, this blocks it completely.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12815224">GROOVY-4292</key>
            <summary>ClassHelper.ClassHelperCache#classCache is not thread-safe</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blackdrag">Jochen Theodorou</assignee>
                                    <reporter username="gromopetr">Peter Gromov</reporter>
                        <labels>
                    </labels>
                <created>Mon, 5 Jul 2010 12:48:39 +0000</created>
                <updated>Fri, 15 Jun 2012 22:56:18 +0000</updated>
                            <resolved>Wed, 23 May 2012 06:05:17 +0000</resolved>
                                    <version>1.7.3</version>
                                    <fixVersion>2.0-rc-1</fixVersion>
                    <fixVersion>1.7.11</fixVersion>
                    <fixVersion>1.8.7</fixVersion>
                                    <component>class generator</component>
                        <due></due>
                            <votes>9</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14469768" author="blackdrag" created="Mon, 5 Jul 2010 13:53:57 +0000"  >&lt;p&gt;No wonder, mos of the compiler infrastructure is designed for single thread usage only. I would have suggested to use makeWithoutCaching, but that ends in makeCached too, which uses the map. I think that must be changed then. &lt;/p&gt;

&lt;p&gt;As for a workaround... is it impossible to do some kind of warmup?&lt;/p&gt;</comment>
                            <comment id="14469799" author="gromopetr" created="Mon, 5 Jul 2010 14:07:33 +0000"  >&lt;p&gt;As a workaround, we&apos;ll now do the parsing in a single thread. But that may take quite long. A warmup could help, if I knew exactly what to invoke to ensure everything&apos;s warmed up.&lt;/p&gt;

&lt;p&gt;If it were IDEA sources, I&apos;d just replace WeakHashMap with ConcurrentWeakHashMap, as we have one &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14469839" author="blackdrag" created="Mon, 5 Jul 2010 14:21:11 +0000"  >&lt;p&gt;the warmup would have to contain all the ClassHelper#make calls you usually do. The problem cannot be there for the static stuff that is in that class, since the WeakHashMap may not be able to handle concurrent writes, but concurrent reads are no problem&lt;/p&gt;</comment>
                            <comment id="14469743" author="gromopetr" created="Mon, 5 Jul 2010 15:22:06 +0000"  >&lt;p&gt;The problem is that I don&apos;t do any ClassHelper#make calls. I just say new GroovyShell().parse(text) for different script texts. So it&apos;s not clear to me which classes should be cached in the map to account for any possible script text.&lt;/p&gt;</comment>
                            <comment id="14472880" author="blackdrag" created="Wed, 23 May 2012 06:05:17 +0000"  >&lt;p&gt;I replaced the map with an internal concurrent version from our runtime&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bqyn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>