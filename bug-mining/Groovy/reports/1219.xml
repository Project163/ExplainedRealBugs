<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:15:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-4098] setter and getter destroy meta properties</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-4098</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;When a class offers a getter or setter (but not both) for a property, which is also accessible without that getter or setter breaks, the MOP&apos;s according MetaProperty is broken in terms of access permission: A (visible) property with additional setter is marked &quot;write only&quot;, and one with additional getter &quot;read only&quot;.&lt;/p&gt;

&lt;p&gt;I have attached a test case which shows all four possible variants, two of which are broken:&lt;br/&gt;
For each variant, first, read and write access to the property are done by simply accessing the property. This proves, that both read and write access should be possible to that property.&lt;br/&gt;
Then, read and write access are done again, this time using the properties MetaProperty.&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Nogetter%2Cnosetter.&quot;&gt;&lt;/a&gt;No getter, no setter.&lt;/h4&gt;

&lt;p&gt;for propertyOne (line 6), neither a getter, nor a setter is defined. The according test (line 27 to 34) passes: The normal access and the MetaProperty can be read and written. It is neither marked read-only, nor write-only, just as it is supposed to be.&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Setteronly.&quot;&gt;&lt;/a&gt;Setter only.&lt;/h4&gt;

&lt;p&gt;for propertyTwo(line 7), only a setter is defined (line 11 to 13). The according test (line 36 to 43) fails: The normal access works fine, also setting the MetaProperty is possible, but when trying to read the MetaProperty, a GroovyRuntimeException is thrown: &quot;Cannot read write-only property: propertyTwo&quot;, although it should be possible to read it directly without a setter (as done in line 38), but the MOP does not respect that.&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Getteronly.&quot;&gt;&lt;/a&gt;Getter only.&lt;/h4&gt;
&lt;p&gt;for propertyThree(line 8), only a getter is defined (line 15 to 17). The according test (line 45 to 52) fails just like the previous one, except this time read access is possible and write access fails, and the exception states, this was a read-only property, which it is not. Direct write access without a setter (as done in line 46) should be possible.&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;GetterandSetter&quot;&gt;&lt;/a&gt;Getter and Setter&lt;/h4&gt;
&lt;p&gt;for propertyFour(line 9), both a getter (lines 19 to 21) and a setter (lines 23 to 25) are defined. The according test (lines 54 to 61) passes just like the first test, where neither were defined. Again, the meta property is neither marked write-only or read-only, as it is supposed to be.&lt;/p&gt;

&lt;h5&gt;&lt;a name=&quot;fewfinalwords&quot;&gt;&lt;/a&gt;few final words&lt;/h5&gt;
&lt;p&gt;This bug prevents MetaClasses, from implementing get/setProperty(object, name&lt;span class=&quot;error&quot;&gt;&amp;#91;, value&amp;#93;&lt;/span&gt;) by forwarding it to getMeta/hasProperty(name).get/setProperty(object&lt;span class=&quot;error&quot;&gt;&amp;#91;, value&amp;#93;&lt;/span&gt;). This is very disturbing if you redefined getMetaProperty or hasProperty (where&apos;s the difference in these methods by the way?) to perform additional searches to find properties, and you simply want to invoke the returned meta property instead of first determining, if you should ignore the returned meta property and call super.get/setProperty(..) because the meta property invocation might fail with such a misplaced access violation.&lt;/p&gt;</description>
                <environment>Tested on an AMD Turion64 under WinXP with Eclipse Galileo, Java 6u17, will occur on any platform though since this are groovy source code bugs.</environment>
        <key id="12817491">GROOVY-4098</key>
            <summary>setter and getter destroy meta properties</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="misterd">Joscha Drechsler</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Mar 2010 10:30:37 +0000</created>
                <updated>Tue, 7 Apr 2015 19:13:09 +0000</updated>
                            <resolved>Tue, 6 Apr 2010 18:26:19 +0000</resolved>
                                    <version>1.7.0</version>
                                    <fixVersion>1.7.2</fixVersion>
                    <fixVersion>1.8-beta-1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14478975" author="paulk" created="Wed, 10 Mar 2010 18:42:51 +0000"  >&lt;p&gt;If you print out the class of &lt;tt&gt;metaProperty&lt;/tt&gt; for your four test cases you will see that the first case it is &lt;tt&gt;org.codehaus.groovy.reflection.CachedField&lt;/tt&gt; while for the other three it is &lt;tt&gt;groovy.lang.MetaBeanProperty&lt;/tt&gt;. This explains (but doesn&apos;t excuse) the different behavior you are seeing.&lt;/p&gt;</comment>
                            <comment id="14478987" author="paulk" created="Wed, 10 Mar 2010 20:58:37 +0000"  >&lt;p&gt;Fixed. If the field is public (and for setProperty also not final) then MetaBeanProperty delegates through to the field if no relevant explicit getter/setter is found.&lt;/p&gt;</comment>
                            <comment id="14469093" author="misterd" created="Sun, 14 Mar 2010 09:06:20 +0000"  >&lt;p&gt;Sadly, this solution does not solve the whole problem. The same problem can be reproduced for all visibilitys of fields. for example, if a subclass acesses a protected field, of a superclass, which only has a getter and no setter (or vice versa), and that call is &quot;caught&quot; by a meta class and executed via getMetaProperty(name).getProperty(object), that still fails. I am unsure, if that could be constructed for private fields aswell, but for package visibility and protected fields, it can. I also do not know how this could be fixed, since the returned meta property should probably be different, depending on who is using it&apos;s reference, or at least depending on who requested it.&lt;/p&gt;

&lt;p&gt;My recommended fix would be, to make all meta properties generated for fields both write and readable: Since even for a class with a private field without getters or setters, using the meta property of this private field, the field can be set and read from outside the class. This behavior is again simply destroyed by defining either a getter or a setter. And since, without getter and setter, the property could be set anyways, why try to make it unaccessible when getters or setters are defined? you can&apos;t separate the source of the call anyways to implement proper behavior.&lt;/p&gt;</comment>
                            <comment id="14478980" author="paulk" created="Sun, 14 Mar 2010 19:37:59 +0000"  >&lt;p&gt;Yes, it needs more work. We&apos;ll discuss further and decide which way to proceed but I suspect the ideal solution won&apos;t be possible until the MOP in Groovy 2.0.&lt;/p&gt;</comment>
                            <comment id="14469145" author="misterd" created="Tue, 16 Mar 2010 08:17:30 +0000"  >&lt;p&gt;Yes i agree, the optimal solution currently is neither possible, nor implemented for simlar cases (visibility of meta properties). However, i think the MetaBeanProperties, generated from source code bean getters and setters, should - if a property by the matching name exists - always be readable and writeable, since otherwise some code may break. It&apos;s not a pretty solution since it breaches visibility, but so does most of the other MOP implementation, and at least it would not break any code then. And that is possible to be implemented for now and does not require MOP 2.0, so at least it could be used as a more or less dirty fix.&lt;/p&gt;</comment>
                            <comment id="14469144" author="paulk" created="Tue, 16 Mar 2010 15:41:21 +0000"  >&lt;p&gt;That is the way that I am leaning too at the moment ...&lt;/p&gt;</comment>
                            <comment id="14478969" author="paulk" created="Wed, 17 Mar 2010 07:29:17 +0000"  >&lt;p&gt;Change now made regardless of whether field is public.&lt;/p&gt;</comment>
                            <comment id="14478994" author="paulk" created="Wed, 17 Mar 2010 22:21:02 +0000"  >&lt;p&gt;Leaving open for now as it still isn&apos;t quite right ...&lt;/p&gt;</comment>
                            <comment id="14479039" author="paulk" created="Tue, 6 Apr 2010 18:26:20 +0000"  >&lt;p&gt;We discussed a bit more about further improving this and decided to make further changes in the 1.8 timeframe.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12722267" name="PropertyTest.groovy" size="1791" author="misterd" created="Wed, 10 Mar 2010 10:30:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 34 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2co4f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>