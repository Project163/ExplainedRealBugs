<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:05:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-2816] Invalid method code length</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-2816</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;I decided to get an early jump on testing our application with the new 1.6 beta (and I was very curious about the speed improvements).  It turns out I cannot deploy after upgrading to the 1.6-beta-1 version.  All my groovy classes compiled fine previously, however now some of them fail with an exception like:&lt;/p&gt;

&lt;p&gt;Caught: java.lang.ClassFormatError: Invalid method Code length 68630 in class file big&lt;/p&gt;

&lt;p&gt;For example, I have attached file called big.groovy file which just returns a very large array (about 1900 or so integers).  Using groovy.bat, this class works fine under 1.5.4, but fails with the ClassFormatError under 1.6-beta-1.  &lt;/p&gt;

&lt;p&gt;Even more interesting is the size of the class file.  Using groovyc, compare the sizes of the produced class files:&lt;/p&gt;

&lt;p&gt;Size of class file for 1.6-beta:     183,924&lt;br/&gt;
Size of class file for 1.5.4:     42,105&lt;/p&gt;

&lt;p&gt;So there is roughly a 4 times increase in size of the produced class.  I assume that has to do with the optimizations, right?  Or is it something else?&lt;/p&gt;</description>
                <environment>Windows XP&lt;br/&gt;
java version &amp;quot;1.6.0_02&amp;quot;</environment>
        <key id="12814239">GROOVY-2816</key>
            <summary>Invalid method code length</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ait">Alex Tkachman</assignee>
                                    <reporter username="cmay4">Chuck May</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 May 2008 07:59:14 +0000</created>
                <updated>Tue, 15 Dec 2009 04:06:31 +0000</updated>
                            <resolved>Sun, 18 May 2008 03:24:28 +0000</resolved>
                                    <version>1.6-beta-1</version>
                                    <fixVersion>1.6-beta-2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14464877" author="chanwit" created="Fri, 16 May 2008 02:27:32 +0000"  >&lt;p&gt;Hi Alex,&lt;/p&gt;

&lt;p&gt;Test case groovy.bugs.Groovy2816Bug still fails on my machine. Did you have a fix in SVN?&lt;br/&gt;
(it caused stack overflow :&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Testcase: testClass(groovy.bugs.Groovy2816Bug):     Caused an ERROR&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; null&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; java.lang.StackOverflowError&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.codehaus.groovy.antlr.LineColumn.&amp;lt;init&amp;gt;(LineColumn.java:29)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.codehaus.groovy.antlr.AntlrASTProcessSnippets.traverse(AntlrASTProcessSnippets.java:68)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.codehaus.groovy.antlr.AntlrASTProcessSnippets.traverse(AntlrASTProcessSnippets.java:90)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.codehaus.groovy.antlr.AntlrASTProcessSnippets.traverse(AntlrASTProcessSnippets.java:95)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.codehaus.groovy.antlr.AntlrASTProcessSnippets.traverse(AntlrASTProcessSnippets.java:95)&lt;/p&gt;
</comment>
                            <comment id="14464761" author="ait" created="Fri, 16 May 2008 02:45:01 +0000"  >&lt;p&gt;Please try clean build&lt;/p&gt;</comment>
                            <comment id="14464746" author="chanwit" created="Fri, 16 May 2008 03:03:04 +0000"  >&lt;p&gt;Still failed.&lt;/p&gt;

&lt;p&gt;Clean fetch from SVN and clean build &lt;br/&gt;
cmmand line: ant clean &amp;amp;&amp;amp; ant test -DtestCase=groovy.bugs.Groovy2816Bug&lt;/p&gt;

&lt;p&gt;Windows XP: SP3, java version &quot;1.6.0_06&quot;&lt;/p&gt;</comment>
                            <comment id="14464792" author="ait" created="Fri, 16 May 2008 03:54:41 +0000"  >&lt;p&gt;Guillaume,&lt;/p&gt;

&lt;p&gt;as you reopened it I assume you can reproduce it. Unfortunately I can&apos;t.&lt;/p&gt;

&lt;p&gt;Alex&lt;/p&gt;</comment>
                            <comment id="14464858" author="guillaume" created="Fri, 16 May 2008 04:05:21 +0000"  >&lt;p&gt;Chanwit, can you please re-confirm that this is still an issue with trunk?&lt;/p&gt;</comment>
                            <comment id="14464789" author="chanwit" created="Fri, 16 May 2008 04:39:20 +0000"  >&lt;p&gt;I confirmed this.&lt;/p&gt;

&lt;p&gt;Re-fetch and build failed on the different machine running Fedora-8 (java 1.6.0_04) as well.&lt;/p&gt;

&lt;p&gt;(Trunk Revision 12410)&lt;/p&gt;</comment>
                            <comment id="14464735" author="ait" created="Fri, 16 May 2008 05:18:43 +0000"  >&lt;p&gt;Could you please try with Java 1.5&lt;br/&gt;
I am on Mac and has no 1.6&lt;/p&gt;</comment>
                            <comment id="14464762" author="chanwit" created="Fri, 16 May 2008 06:31:39 +0000"  >&lt;p&gt;Hi Alex,&lt;/p&gt;

&lt;p&gt;I&apos;ve built it successfully &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;on one remote machine (Windows XP, java 1.6.0_03)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;On my PC build failed &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Windows XP, java 1.6.0_06, also tested with 1.5.0_14&lt;br/&gt;
On my Fedora 8 server build failed &lt;br/&gt;
  -using java 1.6.0_04.&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="14464848" author="ait" created="Fri, 16 May 2008 06:55:56 +0000"  >&lt;p&gt;I am 99% sure it is problem of your configuration and for 100% that it is unrelated to this issue, so I close this one and please file new one you think so.&lt;/p&gt;</comment>
                            <comment id="14464732" author="chanwit" created="Fri, 16 May 2008 07:11:05 +0000"  >&lt;p&gt;Hi Alex,&lt;/p&gt;

&lt;p&gt;I&apos;ll try a clean PC to confirm this.&lt;/p&gt;
</comment>
                            <comment id="14464879" author="cmay4" created="Fri, 16 May 2008 08:39:07 +0000"  >&lt;p&gt;I tested the latest trunk build this morning and my test case is working.&lt;/p&gt;

&lt;p&gt;The resulting class file size is alot smaller than beta1, but still alot bigger than 1.5.4:&lt;/p&gt;

&lt;p&gt;05/16/2008  09:35 AM           135,965 big.class&lt;br/&gt;
05/08/2008  05:26 PM            42,105 big.class.1.5.4&lt;br/&gt;
05/08/2008  05:29 PM           183,924 big.class.1.6.1-beta1&lt;/p&gt;

&lt;p&gt;I&apos;ll try to test it in my application later.  Thanks!&lt;/p&gt;</comment>
                            <comment id="14478167" author="paulk" created="Fri, 16 May 2008 19:15:34 +0000"  >&lt;p&gt;I observe the same as Chanwit on Win XP SP3 for JDK 1.5 and 1.6.&lt;/p&gt;</comment>
                            <comment id="14464763" author="shemnon" created="Fri, 16 May 2008 21:21:34 +0000"  >&lt;p&gt;I see the exact same error as Chanwit with changelist #12407, and I&apos;ve cleaned and rebuilt countless times.&lt;/p&gt;</comment>
                            <comment id="14464733" author="shemnon" created="Fri, 16 May 2008 21:24:30 +0000"  >&lt;p&gt;The configuration issue is building and running on windows, the jetbrains team city build has been failing since 12407...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://teamcity.jetbrains.com/viewType.html?buildTypeId=bt109&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://teamcity.jetbrains.com/viewType.html?buildTypeId=bt109&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14464849" author="ait" created="Sat, 17 May 2008 00:46:16 +0000"  >&lt;p&gt;OK, guys, thanx a lot.&lt;/p&gt;</comment>
                            <comment id="14464828" author="guillaume" created="Sat, 17 May 2008 01:43:19 +0000"  >&lt;p&gt;As it&apos;s reproducible under certain circumstances, I reopen.&lt;/p&gt;</comment>
                            <comment id="14464874" author="paulk" created="Sat, 17 May 2008 04:30:14 +0000"  >&lt;p&gt;Just tried on two Vista machines both running 1.6.0_06. On 64-bit Vista it works fine. On 32-bit Vista same problem as on my XP machine.&lt;/p&gt;</comment>
                            <comment id="14464850" author="ait" created="Sat, 17 May 2008 09:14:35 +0000"  >&lt;p&gt;I hope now it fixed&lt;/p&gt;</comment>
                            <comment id="14464880" author="guillaume" created="Sat, 17 May 2008 09:35:16 +0000"  >&lt;p&gt;Dano, Chanwit, Paul, could you please double check one more time with trunk on your respective systems?&lt;br/&gt;
Thanks in advance.&lt;/p&gt;</comment>
                            <comment id="14464814" author="shemnon" created="Sat, 17 May 2008 09:53:47 +0000"  >&lt;p&gt;Works for me!&lt;/p&gt;

&lt;p&gt;I&apos;m still curious to know what could break it on just win32... not messing with longs and doubles are we?&lt;/p&gt;</comment>
                            <comment id="14464748" author="chanwit" created="Sat, 17 May 2008 10:52:38 +0000"  >&lt;p&gt;Also work for me,&lt;/p&gt;

&lt;p&gt;but I have an additional patch for reserving semantics of the recursion.&lt;br/&gt;
Alex, could you please review it?&lt;/p&gt;</comment>
                            <comment id="14464829" author="ait" created="Sat, 17 May 2008 11:33:07 +0000"  >&lt;p&gt;Dunno! I guess it is different default stack size&lt;/p&gt;</comment>
                            <comment id="14464851" author="chanwit" created="Sun, 18 May 2008 01:00:12 +0000"  >&lt;p&gt;After discussion with Alex here &lt;a href=&quot;http://markmail.org/message/rbhy256xrhcgxniv&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://markmail.org/message/rbhy256xrhcgxniv&lt;/a&gt;,&lt;br/&gt;
I think my addition patch is not necessary.&lt;/p&gt;

&lt;p&gt;ps. I tested on 3 different machines and all passed.&lt;/p&gt;</comment>
                            <comment id="14464888" author="guillaume" created="Sun, 18 May 2008 03:24:28 +0000"  >&lt;p&gt;Looks like everything&apos;s fine now, I&apos;m closing the issue.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310260">
                    <name>Related</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12814990">GROOVY-3941</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12721652" name="big.groovy" size="13358" author="cmay4" created="Fri, 9 May 2008 07:59:14 +0000"/>
                            <attachment id="12721794" name="groovy2816_additonal.patch" size="992" author="chanwit" created="Sat, 17 May 2008 10:53:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 28 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2c4if:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>