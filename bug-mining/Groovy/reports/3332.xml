<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:57:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-7390] @EqualsAndHashCode incorrect when using non-field properties</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-7390</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;I have the following class representing a location in Amazon S3. Depending on some inner business logic, I often need to split the object key into a prefix and a file name, so I access them all through the &lt;tt&gt;getKey()&lt;/tt&gt; method; with S3, the only thing that matters is the final concatenated string.&lt;/p&gt;

&lt;p&gt;The generated &lt;tt&gt;equals&lt;/tt&gt; method incorrectly returns true for any two objects with the same bucket, ignoring the key property. (I discovered this when I got some interesting results out of a JSR-330 cache.) I have marked this issue critical because it is likely to cause immediate security vulnerabilities and data loss when unequal objects are found equal.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@CompileStatic
@EqualsAndHashCode(includes = [&lt;span class=&quot;code-quote&quot;&gt;&apos;bucket&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;key&apos;&lt;/span&gt;])
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;S3ImageLocation &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; ImageLocation {
    @NotNull
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; bucket

    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; prefix

    @NotNull
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; subKey

    @PersistenceConstructor
    S3ImageLocation(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; bucket, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; prefix, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; subKey) {
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.bucket = bucket
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.prefix = prefix
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.subKey = subKey
    }

    S3ImageLocation(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; bucket, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; subKey) {
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;(bucket, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, subKey)
    }

    @JsonIgnore
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getKey() {
        prefix ? &lt;span class=&quot;code-quote&quot;&gt;&quot;$prefix/$subKey&quot;&lt;/span&gt; : subKey
    }

    @Override
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; toString() {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;s3:&lt;span class=&quot;code-comment&quot;&gt;//$bucket/$key&quot;&lt;/span&gt;
&lt;/span&gt;    }

    S3Location toBlitlineLocation() {
        &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; S3Location(bucket, key)
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Both of the generated methods appear to be including &lt;tt&gt;bucket&lt;/tt&gt; twice instead of including &lt;tt&gt;bucket&lt;/tt&gt; and &lt;tt&gt;key&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;see :7 and :29&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; hashCode();
    Code:
       0: invokestatic  #93                 &lt;span class=&quot;code-comment&quot;&gt;// Method org/codehaus/groovy/util/HashCodeHelper.initHash:()I
&lt;/span&gt;       3: istore_1
       4: iload_1
       5: pop
       6: aload_0
       7: ldc           #94                 &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; bucket
&lt;/span&gt;       9: invokestatic  #100                &lt;span class=&quot;code-comment&quot;&gt;// Method org/codehaus/groovy/runtime/InvokerHelper.getProperty:(Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;;)Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;
&lt;/span&gt;      12: aload_0
      13: invokestatic  #106                &lt;span class=&quot;code-comment&quot;&gt;// Method org/codehaus/groovy/runtime/DefaultGroovyMethods.is:(Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;)Z
&lt;/span&gt;      16: ifne          23
      19: iconst_1
      20: &lt;span class=&quot;code-keyword&quot;&gt;goto&lt;/span&gt;          24
      23: iconst_0
      24: ifeq          42
      27: iload_1
      28: aload_0
      29: ldc           #94                 &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; bucket
&lt;/span&gt;      31: invokestatic  #100                &lt;span class=&quot;code-comment&quot;&gt;// Method org/codehaus/groovy/runtime/InvokerHelper.getProperty:(Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;;)Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;
&lt;/span&gt;      34: invokestatic  #110                &lt;span class=&quot;code-comment&quot;&gt;// Method org/codehaus/groovy/util/HashCodeHelper.updateHash:(ILjava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;)I
&lt;/span&gt;      37: istore_2
      38: iload_2
      39: istore_1
      40: iload_2
      41: pop
      42: iload_1
      43: ireturn
      44: ldc           #113                &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; 0
&lt;/span&gt;      46: ireturn
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;see :152/:171 and :208/:219&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; equals(java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;);
    Code:
       0: aload_1
       1: ifnonnull     8
       4: iconst_1
       5: &lt;span class=&quot;code-keyword&quot;&gt;goto&lt;/span&gt;          9
       8: iconst_0
       9: ifeq          19
      12: getstatic     #129                &lt;span class=&quot;code-comment&quot;&gt;// Field java/lang/&lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;.FALSE:Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;;
&lt;/span&gt;      15: invokestatic  #58                 &lt;span class=&quot;code-comment&quot;&gt;// Method org/codehaus/groovy/runtime/typehandling/DefaultTypeTransformation.booleanUnbox:(Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;)Z
&lt;/span&gt;      18: ireturn
      19: aload_0
      20: aload_1
      21: invokestatic  #106                &lt;span class=&quot;code-comment&quot;&gt;// Method org/codehaus/groovy/runtime/DefaultGroovyMethods.is:(Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;)Z
&lt;/span&gt;      24: ifeq          34
      27: getstatic     #132                &lt;span class=&quot;code-comment&quot;&gt;// Field java/lang/&lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;.TRUE:Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;;
&lt;/span&gt;      30: invokestatic  #58                 &lt;span class=&quot;code-comment&quot;&gt;// Method org/codehaus/groovy/runtime/typehandling/DefaultTypeTransformation.booleanUnbox:(Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;)Z
&lt;/span&gt;      33: ireturn
      34: aload_1
      35: &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt;    #2                  &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;com/artsquare/studio/img/s3/S3ImageLocation
&lt;/span&gt;      38: ifne          45
      41: iconst_1
      42: &lt;span class=&quot;code-keyword&quot;&gt;goto&lt;/span&gt;          46
      45: iconst_0
      46: ifeq          56
      49: getstatic     #129                &lt;span class=&quot;code-comment&quot;&gt;// Field java/lang/&lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;.FALSE:Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;;
&lt;/span&gt;      52: invokestatic  #58                 &lt;span class=&quot;code-comment&quot;&gt;// Method org/codehaus/groovy/runtime/typehandling/DefaultTypeTransformation.booleanUnbox:(Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;)Z
&lt;/span&gt;      55: ireturn
      56: aload_1
      57: ldc           #2                  &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;com/artsquare/studio/img/s3/S3ImageLocation
&lt;/span&gt;      59: invokestatic  #138                &lt;span class=&quot;code-comment&quot;&gt;// Method org/codehaus/groovy/runtime/ScriptBytecodeAdapter.castToType:(Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;;)Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;
&lt;/span&gt;      62: checkcast     #2                  &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;com/artsquare/studio/img/s3/S3ImageLocation
&lt;/span&gt;      65: astore_2
      66: aload_2
      67: pop
      68: aload_2
      69: aload_0
      70: invokevirtual #140                &lt;span class=&quot;code-comment&quot;&gt;// Method canEqual:(Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;)Z
&lt;/span&gt;      73: ifne          80
      76: iconst_1
      77: &lt;span class=&quot;code-keyword&quot;&gt;goto&lt;/span&gt;          81
      80: iconst_0
      81: ifeq          91
      84: getstatic     #129                &lt;span class=&quot;code-comment&quot;&gt;// Field java/lang/&lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;.FALSE:Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;;
&lt;/span&gt;      87: invokestatic  #58                 &lt;span class=&quot;code-comment&quot;&gt;// Method org/codehaus/groovy/runtime/typehandling/DefaultTypeTransformation.booleanUnbox:(Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;)Z
&lt;/span&gt;      90: ireturn
      91: aload_0
      92: invokevirtual #143                &lt;span class=&quot;code-comment&quot;&gt;// Method getBucket:()Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;;
&lt;/span&gt;      95: aload_2
      96: invokevirtual #143                &lt;span class=&quot;code-comment&quot;&gt;// Method getBucket:()Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;;
&lt;/span&gt;      99: invokestatic  #106                &lt;span class=&quot;code-comment&quot;&gt;// Method org/codehaus/groovy/runtime/DefaultGroovyMethods.is:(Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;)Z
&lt;/span&gt;     102: ifne          109
     105: iconst_1
     106: &lt;span class=&quot;code-keyword&quot;&gt;goto&lt;/span&gt;          110
     109: iconst_0
     110: ifeq          274
     113: aload_0
     114: invokevirtual #143                &lt;span class=&quot;code-comment&quot;&gt;// Method getBucket:()Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;;
&lt;/span&gt;     117: aload_0
     118: invokestatic  #106                &lt;span class=&quot;code-comment&quot;&gt;// Method org/codehaus/groovy/runtime/DefaultGroovyMethods.is:(Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;)Z
&lt;/span&gt;     121: ifeq          147
     124: aload_2
     125: invokevirtual #143                &lt;span class=&quot;code-comment&quot;&gt;// Method getBucket:()Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;;
&lt;/span&gt;     128: aload_2
     129: invokestatic  #106                &lt;span class=&quot;code-comment&quot;&gt;// Method org/codehaus/groovy/runtime/DefaultGroovyMethods.is:(Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;)Z
&lt;/span&gt;     132: ifne          139
     135: iconst_1
     136: &lt;span class=&quot;code-keyword&quot;&gt;goto&lt;/span&gt;          140
     139: iconst_0
     140: ifeq          147
     143: iconst_1
     144: &lt;span class=&quot;code-keyword&quot;&gt;goto&lt;/span&gt;          148
     147: iconst_0
     148: ifne          189
     151: aload_0
     152: invokevirtual #143                &lt;span class=&quot;code-comment&quot;&gt;// Method getBucket:()Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;;
&lt;/span&gt;     155: aload_0
     156: invokestatic  #106                &lt;span class=&quot;code-comment&quot;&gt;// Method org/codehaus/groovy/runtime/DefaultGroovyMethods.is:(Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;)Z
&lt;/span&gt;     159: ifne          166
     162: iconst_1
     163: &lt;span class=&quot;code-keyword&quot;&gt;goto&lt;/span&gt;          167
     166: iconst_0
     167: ifeq          185
     170: aload_2
     171: invokevirtual #143                &lt;span class=&quot;code-comment&quot;&gt;// Method getBucket:()Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;;
&lt;/span&gt;     174: aload_2
     175: invokestatic  #106                &lt;span class=&quot;code-comment&quot;&gt;// Method org/codehaus/groovy/runtime/DefaultGroovyMethods.is:(Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;)Z
&lt;/span&gt;     178: ifeq          185
     181: iconst_1
     182: &lt;span class=&quot;code-keyword&quot;&gt;goto&lt;/span&gt;          186
     185: iconst_0
     186: ifeq          193
     189: iconst_1
     190: &lt;span class=&quot;code-keyword&quot;&gt;goto&lt;/span&gt;          194
     193: iconst_0
     194: ifeq          207
     197: getstatic     #129                &lt;span class=&quot;code-comment&quot;&gt;// Field java/lang/&lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;.FALSE:Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;;
&lt;/span&gt;     200: invokestatic  #58                 &lt;span class=&quot;code-comment&quot;&gt;// Method org/codehaus/groovy/runtime/typehandling/DefaultTypeTransformation.booleanUnbox:(Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;)Z
&lt;/span&gt;     203: ireturn
     204: &lt;span class=&quot;code-keyword&quot;&gt;goto&lt;/span&gt;          274
     207: aload_0
     208: invokevirtual #143                &lt;span class=&quot;code-comment&quot;&gt;// Method getBucket:()Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;;
&lt;/span&gt;     211: aload_0
     212: invokestatic  #106                &lt;span class=&quot;code-comment&quot;&gt;// Method org/codehaus/groovy/runtime/DefaultGroovyMethods.is:(Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;)Z
&lt;/span&gt;     215: ifeq          233
     218: aload_2
     219: invokevirtual #143                &lt;span class=&quot;code-comment&quot;&gt;// Method getBucket:()Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;;
&lt;/span&gt;     222: aload_2
     223: invokestatic  #106                &lt;span class=&quot;code-comment&quot;&gt;// Method org/codehaus/groovy/runtime/DefaultGroovyMethods.is:(Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;)Z
&lt;/span&gt;     226: ifeq          233
     229: iconst_1
     230: &lt;span class=&quot;code-keyword&quot;&gt;goto&lt;/span&gt;          234
     233: iconst_0
     234: ifne          241
     237: iconst_1
     238: &lt;span class=&quot;code-keyword&quot;&gt;goto&lt;/span&gt;          242
     241: iconst_0
     242: ifeq          274
     245: aload_0
     246: invokevirtual #143                &lt;span class=&quot;code-comment&quot;&gt;// Method getBucket:()Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;;
&lt;/span&gt;     249: aload_2
     250: invokevirtual #143                &lt;span class=&quot;code-comment&quot;&gt;// Method getBucket:()Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;;
&lt;/span&gt;     253: invokestatic  #146                &lt;span class=&quot;code-comment&quot;&gt;// Method org/codehaus/groovy/runtime/ScriptBytecodeAdapter.compareEqual:(Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;)Z
&lt;/span&gt;     256: ifne          263
     259: iconst_1
     260: &lt;span class=&quot;code-keyword&quot;&gt;goto&lt;/span&gt;          264
     263: iconst_0
     264: ifeq          274
     267: getstatic     #129                &lt;span class=&quot;code-comment&quot;&gt;// Field java/lang/&lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;.FALSE:Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;;
&lt;/span&gt;     270: invokestatic  #58                 &lt;span class=&quot;code-comment&quot;&gt;// Method org/codehaus/groovy/runtime/typehandling/DefaultTypeTransformation.booleanUnbox:(Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;)Z
&lt;/span&gt;     273: ireturn
     274: getstatic     #132                &lt;span class=&quot;code-comment&quot;&gt;// Field java/lang/&lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;.TRUE:Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;;
&lt;/span&gt;     277: invokestatic  #58                 &lt;span class=&quot;code-comment&quot;&gt;// Method org/codehaus/groovy/runtime/typehandling/DefaultTypeTransformation.booleanUnbox:(Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;)Z
&lt;/span&gt;     280: ireturn
     281: ldc           #113                &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; 0
&lt;/span&gt;     283: invokestatic  #122                &lt;span class=&quot;code-comment&quot;&gt;// Method java/lang/&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.valueOf:(I)Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;;
&lt;/span&gt;     286: invokestatic  #58                 &lt;span class=&quot;code-comment&quot;&gt;// Method org/codehaus/groovy/runtime/typehandling/DefaultTypeTransformation.booleanUnbox:(Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;)Z
&lt;/span&gt;     289: ireturn
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12820718">GROOVY-7390</key>
            <summary>@EqualsAndHashCode incorrect when using non-field properties</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="chrylis">Christopher Smith</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Apr 2015 05:39:42 +0000</created>
                <updated>Tue, 6 Mar 2018 23:25:53 +0000</updated>
                            <resolved>Fri, 2 Feb 2018 01:25:00 +0000</resolved>
                                    <version>2.4.3</version>
                                    <fixVersion>2.5.0-beta-3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14493608" author="chrylis" created="Tue, 14 Apr 2015 05:46:28 +0000"  >&lt;p&gt;This bug is independent of &lt;tt&gt;@CompileStatic&lt;/tt&gt;. It appears to be triggered by using either &lt;tt&gt;includes&lt;/tt&gt; or &lt;tt&gt;excludes&lt;/tt&gt; with a non-field property in the candidate set. Using only field-backed properties produces correct but repetitive bytecode (apparently checking each of the candidate properties multiple times).&lt;/p&gt;</comment>
                            <comment id="14496048" author="paulk" created="Wed, 15 Apr 2015 11:05:05 +0000"  >&lt;p&gt;The &quot;duplicate&quot; code is some code that checks for recursive self-references. Such checking is only needed when property types are compatible. On the latest master branch, there is an optimization so that the duplicate code isn&apos;t added for cases when it isn&apos;t needed. So it shouldn&apos;t appear for your case above anymore.&lt;/p&gt;

&lt;p&gt;With respect to non-field properties, you are correct that they aren&apos;t supported by the current transform. You could argue that we should improve the doco and/or produce an error since we do nothing with &apos;key&apos;. There is an outstanding PR &lt;a href=&quot;https://github.com/groovy/groovy-core/pull/569&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/groovy/groovy-core/pull/569&lt;/a&gt; that would flag such usage as errors.&lt;/p&gt;</comment>
                            <comment id="14533827" author="paulk" created="Fri, 8 May 2015 04:13:02 +0000"  >&lt;p&gt;Just an update. I have a patch that fixes the issue for standard cases. It just doesn&apos;t handle tricky generics cases yet. I am hoping to have time to get the generics cases working before submitting the changes,&lt;/p&gt;</comment>
                            <comment id="16349628" author="paulk" created="Fri, 2 Feb 2018 01:25:00 +0000"  >&lt;p&gt;You can now add the &lt;tt&gt;allProperties&lt;/tt&gt; annotation attribute for JavaBean properties to be automatically handled.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12821513">GROOVY-7394</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 41 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2d7mf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>