<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:09:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-3195] MetaClassImpl calling method twice</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-3195</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;When calling a closure as a local method the MetaClassImpl doesn&apos;t check the method name on the MissingMethodException to make sure it was the missing method we are calling and as a result can re-call the closure and call the method twice, attempting the delegate (which is the owner unless overridden).  The problem is if some other mme gets thrown that is not the expected MME.&lt;/p&gt;

&lt;p&gt;This fails, foo() gets called twice.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; count = 0
foo = {
  println &lt;span class=&quot;code-quote&quot;&gt;&quot;foo Closure&quot;&lt;/span&gt;
  count++
  bar()
}
closure1 = { println &lt;span class=&quot;code-quote&quot;&gt;&quot;Closure1&quot;&lt;/span&gt;; foo() }

&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
    closure1()
    fail()
} &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (MissingMethodException mme) {
    &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; mme.method == &lt;span class=&quot;code-quote&quot;&gt;&apos;bar&apos;&lt;/span&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; count == 1
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The solution is to assert the method name on the MME before putting it aside and trying again on the delegate.  &lt;/p&gt;

&lt;p&gt;Patch forthcoming.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12814466">GROOVY-3195</key>
            <summary>MetaClassImpl calling method twice</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="4">Incomplete</resolution>
                                        <assignee username="blackdrag">Jochen Theodorou</assignee>
                                    <reporter username="shemnon">Daniel Ferrin</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Dec 2008 10:52:31 +0000</created>
                <updated>Fri, 27 Nov 2009 03:28:01 +0000</updated>
                            <resolved>Fri, 27 Nov 2009 03:28:01 +0000</resolved>
                                    <version>1.5.7</version>
                    <version>1.6-beta-2</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14465877" author="shemnon" created="Thu, 11 Dec 2008 11:49:35 +0000"  >&lt;p&gt;patch is against the 1.6 branch, that is what I happened to have open. at the time&lt;br/&gt;
Here are two instances patched, plain closures and closures with an attached meta class.&lt;/p&gt;

&lt;p&gt;It seems like there are other places where the methodName checking should be done, but I don&apos;t know if it would be better to come up with a failing test cases first for each or just go straight in and patch them.  (this is because they are core language constructs, it seems the standard for changes may be higher)&lt;/p&gt;</comment>
                            <comment id="14465943" author="shemnon" created="Thu, 11 Dec 2008 11:56:09 +0000"  >&lt;p&gt;Real patch this time, with test cases.&lt;/p&gt;</comment>
                            <comment id="14465867" author="blackdrag" created="Thu, 11 Dec 2008 15:26:44 +0000"  >&lt;p&gt;on first sight the patch looks ok&lt;/p&gt;</comment>
                            <comment id="14465837" author="shemnon" created="Thu, 11 Dec 2008 16:00:21 +0000"  >&lt;p&gt;Followup... should I do the check names everywhere it looks to be an issue or should I create a failing test case for them first?&lt;/p&gt;</comment>
                            <comment id="14465926" author="blackdrag" created="Thu, 11 Dec 2008 17:01:44 +0000"  >&lt;p&gt;a failing test case would of course ensure there is actually a problem. So of course this is to be prefered&lt;/p&gt;</comment>
                            <comment id="14468291" author="blackdrag" created="Fri, 27 Nov 2009 03:28:01 +0000"  >&lt;p&gt;since no failing test case is provided and interest seems to have died I close the report as incomplete&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12722022" name="GROOVY-3195.patch" size="5766" author="shemnon" created="Thu, 11 Dec 2008 11:56:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bygn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>