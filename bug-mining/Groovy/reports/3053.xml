<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:51:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-7873] Regression performance issue in string methods</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-7873</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Starting with 2.4.7, performance in string processing (in certain scenarios) has decreased dramatically. Specifically, it happens when using &lt;tt&gt;stripMargin()&lt;/tt&gt; on a &lt;tt&gt;GString&lt;/tt&gt; that has a variable substitution with a huge String value. In our app performance decrease was from tens of miliseconds to 1+ minute. &lt;br/&gt;
I suspect the latest refactoring in string methods.&lt;/p&gt;

&lt;p&gt;Attaching a test case.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;R2D2:groovystrperf tadaskay$ /usr/local/Cellar/groovy/2.4.7/bin/groovy test.groovy
Took 1456 ms
R2D2:groovystrperf tadaskay$ /usr/local/Cellar/groovy/2.4.5/bin/groovy test.groovy
Took 43 ms
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12982307">GROOVY-7873</key>
            <summary>Regression performance issue in string methods</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jwagenleitner">John Wagenleitner</assignee>
                                    <reporter username="tadaskay">Tadas Krivickas</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jun 2016 12:11:09 +0000</created>
                <updated>Wed, 1 Feb 2017 23:19:04 +0000</updated>
                            <resolved>Sat, 25 Jun 2016 05:37:50 +0000</resolved>
                                    <version>2.4.7</version>
                                    <fixVersion>2.4.8</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15347387" author="paulk" created="Thu, 23 Jun 2016 23:02:51 +0000"  >&lt;p&gt;There was a performance increase in other scenarios. Obviously our scenario coverage wasn&apos;t good enough. We&apos;ll possibly have to revert if we can&apos;t find something that improves your case too.&lt;/p&gt;</comment>
                            <comment id="15348982" author="githubbot" created="Sat, 25 Jun 2016 01:16:37 +0000"  >&lt;p&gt;GitHub user jwagenleitner opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/356&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/356&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7873&quot; title=&quot;Regression performance issue in string methods&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7873&quot;&gt;&lt;del&gt;GROOVY-7873&lt;/del&gt;&lt;/a&gt; - Regression performance issue in string methods&lt;/p&gt;

&lt;p&gt;    In order to implement CharSequence the GString implementation must call toString each time a CharSequence method is invoked.  This is expensive, so GStrings should be converted toString if methods such as charAt are going to be called from a loop.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/jwagenleitner/groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jwagenleitner/groovy&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7873&quot; title=&quot;Regression performance issue in string methods&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7873&quot;&gt;&lt;del&gt;GROOVY-7873&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/356.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/356.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #356&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 1019df6be01b1898312797534ccc8406fd4f4fad&lt;br/&gt;
Author: John Wagenleitner &amp;lt;jwagenleitner@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-06-25T01:08:57Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7873&quot; title=&quot;Regression performance issue in string methods&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7873&quot;&gt;&lt;del&gt;GROOVY-7873&lt;/del&gt;&lt;/a&gt; - Regression performance issue in string methods&lt;/p&gt;

&lt;p&gt;    In order to implement CharSequence the GString implementation must call toString each time a CharSequence method is invoked.  This is expensive, so GStrings should be converted toString if methods such as charAt are going to be called from a loop.&lt;/p&gt;

&lt;p&gt;commit 720115d7444d758f0c057ec8d47772d2ffb81154&lt;br/&gt;
Author: John Wagenleitner &amp;lt;jwagenleitner@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-06-25T01:09:45Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7873&quot; title=&quot;Regression performance issue in string methods&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7873&quot;&gt;&lt;del&gt;GROOVY-7873&lt;/del&gt;&lt;/a&gt; - test for demo purposes, not to be merged&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15349068" author="githubbot" created="Sat, 25 Jun 2016 05:25:24 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/356&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/356&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15349073" author="jwagenleitner" created="Sat, 25 Jun 2016 05:37:51 +0000"  >&lt;p&gt;Thanks for reporting the issue.&lt;/p&gt;

&lt;p&gt;A work-around until the next release would be to call toString on the gstr before calling stripMargin or stripIndent.&lt;/p&gt;</comment>
                            <comment id="15350427" author="tadaskay" created="Mon, 27 Jun 2016 05:29:24 +0000"  >&lt;p&gt;Thank you for the quick response and the fix.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12812809" name="test.groovy" size="25659" author="tadaskay" created="Thu, 23 Jun 2016 12:11:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 21 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zyw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>