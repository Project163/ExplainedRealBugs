<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:19:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-10695] StackOverflowError when calling a static method.</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-10695</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;I tryed it on all 3.x versions (didn&apos;t try 2.x). Found it from Grails code but extracted it as an example&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; test;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Environment {
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Throwable currentReloadError = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void setCurrentReloadError(Throwable currentReloadError) {
&#160; &#160; &#160; &#160; Environment.currentReloadError = currentReloadError
&#160; &#160; }
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Throwable getCurrentReloadError() {
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; currentReloadError
&#160; &#160; }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Now when I call the setter:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Environment.setCurrentReloadError(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I get a StackOverflowError.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &#160; &#160; &#160; test.Environment.setCurrentReloadError(Environment.groovy:8)
&#160; &#160; &#160; &#160; jdk.internal.reflect.GeneratedMethodAccessor47.invoke(Unknown Source)
&#160; &#160; &#160; &#160; java.base&amp;amp;#47;jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
&#160; &#160; &#160; &#160; java.base&amp;amp;#47;java.lang.reflect.Method.invoke(Method.java:566)
&#160; &#160; &#160; &#160; org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:107)
&#160; &#160; &#160; &#160; groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:323)
&#160; &#160; &#160; &#160; groovy.lang.MetaClassImpl.setProperty(MetaClassImpl.java:2839)
&#160; &#160; &#160; &#160; groovy.lang.MetaClassImpl.setProperty(MetaClassImpl.java:3854)
&#160; &#160; &#160; &#160; org.codehaus.groovy.runtime.InvokerHelper.setProperty(InvokerHelper.java:219)
&#160; &#160; &#160; &#160; org.codehaus.groovy.runtime.ScriptBytecodeAdapter.setProperty(ScriptBytecodeAdapter.java:496)
&#160; &#160; &#160; &#160; test.Environment.setCurrentReloadError(Environment.groovy:8)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I decompiled the class and the code is compiled into:&#160;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void setCurrentReloadError(Throwable currentReloadError) {
  Throwable throwable = currentReloadError;
  ScriptBytecodeAdapter.setProperty(throwable, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, Environment.class, &lt;span class=&quot;code-quote&quot;&gt;&quot;currentReloadError&quot;&lt;/span&gt;);
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The cause seems to be that it finds the same setter and this causes the circularity.&lt;/p&gt;

&lt;p&gt;If I remove the (Environment.) from the original code then it works.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13472384">GROOVY-10695</key>
            <summary>StackOverflowError when calling a static method.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="mysticel">Andres Luuk</reporter>
                        <labels>
                            <label>StackOverflowError</label>
                    </labels>
                <created>Wed, 20 Jul 2022 06:29:43 +0000</created>
                <updated>Wed, 23 Aug 2023 09:11:21 +0000</updated>
                            <resolved>Fri, 29 Jul 2022 13:08:00 +0000</resolved>
                                    <version>2.5.18</version>
                    <version>3.0.12</version>
                    <version>4.0.4</version>
                                    <fixVersion>5.0.0-alpha-1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17568881" author="paulk" created="Wed, 20 Jul 2022 06:44:45 +0000"  >&lt;p&gt;I haven&apos;t yet checked whether this is a regression but one workaround is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#160; &#160; &#160; &#160; Environment.@currentReloadError = currentReloadError
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="17568886" author="mysticel" created="Wed, 20 Jul 2022 07:04:55 +0000"  >&lt;p&gt;I found a similar workaround too. I got it with older 3.x groovy also so it has been there for a while.&lt;/p&gt;

&lt;p&gt;I made a grails bug also about it: &lt;a href=&quot;https://github.com/grails/grails-core/issues/12627&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/grails/grails-core/issues/12627&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17568899" author="blackdrag" created="Wed, 20 Jul 2022 07:40:38 +0000"  >&lt;p&gt;Afaik the rule has been that this.x=1 accesses the field directly, while def foo = this; foo.x=1 will use the setter. The static case should be the same. Unlike Java, Groovy has a static &quot;this&quot;. To enforce field usage .@ should be used like Paul suggested. So frankly I do not see a bug here&lt;/p&gt;</comment>
                            <comment id="17568908" author="mysticel" created="Wed, 20 Jul 2022 07:55:45 +0000"  >&lt;p&gt;I do not use groovy daily so I don&apos;t know the best practices it&apos;s ok by me if this is not a bug. Then I must just wait until Grails fixes it from theire side.&lt;/p&gt;</comment>
                            <comment id="17570313" author="emilles" created="Sat, 23 Jul 2022 14:50:51 +0000"  >&lt;p&gt;No error when written this way &amp;#8211; as first described by Jochen above:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;C { &lt;span class=&quot;code-comment&quot;&gt;// with or without &lt;span class=&quot;code-quote&quot;&gt;&quot;@groovy.transform.CompileStatic&quot;&lt;/span&gt;
&lt;/span&gt;  private static &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; object
  static &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; getObject() {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; object
  }
  static void setObject(obj) {
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.object = obj &lt;span class=&quot;code-comment&quot;&gt;// with or without &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.&quot;&lt;/span&gt;
&lt;/span&gt;  }
}
C.setObject(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17571500" author="emilles" created="Tue, 26 Jul 2022 15:24:31 +0000"  >&lt;p&gt;The reason for the difference between &quot;Environment.currentReloadError = ...&quot; and &quot;this.currentReloadError = &quot; is here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/blob/5738c34892ddf665a0c29150dae167d692480ad9/src/main/java/org/codehaus/groovy/classgen/AsmClassGenerator.java#L1181&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/blob/5738c34892ddf665a0c29150dae167d692480ad9/src/main/java/org/codehaus/groovy/classgen/AsmClassGenerator.java#L1181&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Checking &lt;tt&gt;isThisOrSuper(objectExpression) || (objectExpression instanceof ClassExpression &amp;amp;&amp;amp; objectExpression.getType().equals(controller.getClassNode()))&lt;/tt&gt; would allow this form to be treated like &quot;this&quot;.  The &lt;tt&gt;isThisExpression&lt;/tt&gt; would need adjustment and the same changes would need to go into &lt;tt&gt;visitAttributeExpression&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;It might be better to create local &lt;tt&gt;isThisExpression&lt;/tt&gt; and &lt;tt&gt;isThisOrSuper&lt;/tt&gt; to consistently check for this condition.&lt;/p&gt;</comment>
                            <comment id="17571561" author="githubbot" created="Tue, 26 Jul 2022 17:53:11 +0000"  >&lt;p&gt;eric-milles opened a new pull request, #1755:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/1755&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1755&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Provides consistent handling for read and write access of static fields:&lt;br/&gt;
   ```groovy&lt;br/&gt;
   class Type {&lt;br/&gt;
     private static field&lt;br/&gt;
     static getField() &lt;/p&gt;
{
       // not used
     }
&lt;p&gt;     static sm() &lt;/p&gt;
{
       Type.field
       this.field
       field
     }
&lt;p&gt;   }&lt;br/&gt;
   ```&lt;/p&gt;

&lt;p&gt;   &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-10695&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/GROOVY-10695&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   This could be separated into a few commits:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;refactor of `MixinASTTransformation`&lt;/li&gt;
	&lt;li&gt;removal of `implementsGroovyObject` from `AsmClassGenerator`&lt;/li&gt;
	&lt;li&gt;removal of `isThisExpression`/`isSuperExpression`/`isNullConstant` from `AsmClassGenerator`&lt;/li&gt;
	&lt;li&gt;add static field, non-static receiver checks to `visitAttributeExpression` and `visitPropertyExpression`&lt;/li&gt;
&lt;/ul&gt;


</comment>
                            <comment id="17572972" author="githubbot" created="Fri, 29 Jul 2022 13:06:56 +0000"  >&lt;p&gt;eric-milles merged PR #1755:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/1755&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1755&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="17572974" author="emilles" created="Fri, 29 Jul 2022 13:08:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/commit/5466ff36b90c8e8ac17374c65a77f9cd1b5d52f7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/5466ff36b90c8e8ac17374c65a77f9cd1b5d52f7&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 15 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1700g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>