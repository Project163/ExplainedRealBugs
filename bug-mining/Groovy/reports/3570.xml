<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:01:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-9007] Getting java.lang.NoSuchFieldError with groovy version 2.5.6</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-9007</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Recently, I upgrade my spring boot application with version 2.1.3. I found many test cases started failing with error &lt;font color=&quot;#d04437&quot;&gt;(Caused by: java.lang.NoSuchFieldError: &lt;b&gt;it&lt;/b&gt;)&lt;/font&gt;. After drilling down dependency list I noticed that groovy version 2.5.6 is being used. Which might be cauing these issues. Earlier it was groovy version 2.5.5 and my application was working just fine. I tried using version 2.5.5 explicitely in pom.xml and application again started working.&lt;/p&gt;

&lt;p&gt;This looks like a possible bug with version 2.5.6. After compaing .class file generated for both version found some difference which might be causing this issue:&lt;/p&gt;

&lt;p&gt;&lt;b&gt;2.5.6 generated .class code:&lt;/b&gt;&#160;Here &quot;TestGroovyNewVersion.AddressInd&lt;font color=&quot;#d04437&quot;&gt;.it.&lt;/font&gt;addressInd&quot; looks incorrect as&#160;&apos;it&apos; not defined as var for&#160;AddressInd enum. Here &apos;it&apos; isn&apos;t getting treated as&#160;an explicit parameter for closures.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ScriptBytecodeAdapter.compareEqual(TestGroovyNewVersion.AddressInd.it.addressInd, addressInd.get());&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;2.5.5 generated .class code:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ScriptBytecodeAdapter.compareEqual(((TestGroovyNewVersion.AddressInd)it).addressInd,addressInd.get());&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;ins&gt;Here is my groovy code and below line of code is given error:&lt;/ins&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;AddressInd indicator = values().find{ it.addressInd == addressInd }&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; com.fasterxml.jackson.annotation.JsonCreator
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.ToString

@ToString
@CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;TestGroovyNewVersion {
 &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;enum&lt;/span&gt; AddressInd {

 REGISITERED_ADD(&lt;span class=&quot;code-quote&quot;&gt;&apos;Registered add&apos;&lt;/span&gt;), TRADING_ADD(&lt;span class=&quot;code-quote&quot;&gt;&apos;Trading add&apos;&lt;/span&gt;), DELIVERY_ADD(&lt;span class=&quot;code-quote&quot;&gt;&apos;Delivery add&apos;&lt;/span&gt;), INVOICE_ADD(&lt;span class=&quot;code-quote&quot;&gt;&apos;Invoice add&apos;&lt;/span&gt;)

 &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; addressInd

 &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; AddressInd(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; addressInd) {
 &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.addressInd = addressInd
 }

 @JsonCreator
 &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; AddressInd create(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; addressInd) {
   AddressInd indicator = values().find{ it.addressInd == addressInd }
   &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!indicator)
   {
     &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException()
   }
   indicator
 }
 }
 &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; ref
 &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; companyNo
 &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I&#160;would prefer to not make code changes in my code as I have similar at too many places at same time I don&apos;t want to use older version of groovy lib. Pls look into matter and suggest a solution or fix this issue if it is a possible bug in groovy 2.5.6.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>Windows7, Java8, Spring-Boot 2.1.3</environment>
        <key id="13217177">GROOVY-9007</key>
            <summary>Getting java.lang.NoSuchFieldError with groovy version 2.5.6</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="itspanjain">Pankaj</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Feb 2019 12:06:14 +0000</created>
                <updated>Mon, 20 May 2019 07:31:43 +0000</updated>
                            <resolved>Mon, 6 May 2019 15:01:57 +0000</resolved>
                                    <version>2.5.6</version>
                                    <fixVersion>3.0.0-beta-1</fixVersion>
                    <fixVersion>2.5.7</fixVersion>
                                    <component>class generator</component>
                    <component>groovy-runtime</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16776891" author="paulk" created="Mon, 25 Feb 2019 13:37:28 +0000"  >&lt;p&gt;Hi, can you outline the steps you used to compare the .class files? It&apos;s quite possibly a bug but I tried to reproduce and noticed slightly different results to what you describe. I commented out the Jackson JsonCreator reference since I wasn&apos;t sure which version you were using, so perhaps that explains the differences I am seeing.&lt;/p&gt;</comment>
                            <comment id="16777770" author="itspanjain" created="Tue, 26 Feb 2019 09:46:26 +0000"  >&lt;p&gt;Hi&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulk&quot; class=&quot;user-hover&quot; rel=&quot;paulk&quot;&gt;paulk&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Steps to compare .class files are:&lt;br/&gt;
1. Kept groovy version 2.5.6 in pom.xml and clean build application&lt;br/&gt;
2. Found generated class in Target folder, decompiled using intelliJ IDE&lt;br/&gt;
3. Found the piece of code which was creating problem&lt;/p&gt;

&lt;p&gt;Repeated above 3 steps with groovy version 2.5.5 and noted the difference between both the classes.&lt;/p&gt;

&lt;p&gt;Following are jackson dependency libs used in my application:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:jar:2.9.8:compile
[INFO] | +- com.fasterxml.jackson.core:jackson-annotations:jar:2.9.0:compile
[INFO] | +- com.fasterxml.jackson.core:jackson-core:jar:2.9.8:compile
[INFO] | \- com.fasterxml.jackson.core:jackson-databind:jar:2.9.8:compile&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16829900" author="emilles" created="Tue, 30 Apr 2019 02:46:00 +0000"  >&lt;p&gt;I believe this is the method of interest that was changed in 2.5.6:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// org.codehaus.groovy.transform.sc.transformers.VariableExpressionTransformer
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Expression tryTransformDelegateToProperty(VariableExpression expr) {
        &lt;span class=&quot;code-comment&quot;&gt;// we need to transform variable expressions that go to a delegate
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// to a property expression, as ACG would loose the information
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// in processClassVariable before it reaches any makeCall, that could
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// handle it
&lt;/span&gt;        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; val = expr.getNodeMetaData(StaticTypesMarker.IMPLICIT_RECEIVER);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (val == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-comment&quot;&gt;// TODO handle the owner and delegate cases better &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; nested scenarios and potentially remove the need &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the implicit &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt;
&lt;/span&gt;        VariableExpression receiver = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; VariableExpression(&lt;span class=&quot;code-quote&quot;&gt;&quot;owner&quot;&lt;/span&gt;.equals(val) ? (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;) val : &lt;span class=&quot;code-quote&quot;&gt;&quot;delegate&quot;&lt;/span&gt;.equals(val) ? (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;) val : &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;&quot;&lt;/span&gt;);
        PropertyExpression pexp = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PropertyExpression(receiver, expr.getName());
        pexp.copyNodeMetaData(expr);
        pexp.setImplicitThis(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
        pexp.getProperty().setSourcePosition(expr);
        ClassNode owner = expr.getNodeMetaData(StaticCompilationMetadataKeys.PROPERTY_OWNER);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (owner != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            receiver.putNodeMetaData(StaticTypesMarker.INFERRED_TYPE, owner);
            receiver.putNodeMetaData(StaticTypesMarker.IMPLICIT_RECEIVER, val);
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; pexp;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;tt&gt;VariableExpression&lt;/tt&gt; &quot;it&quot; is transformed into a &lt;tt&gt;PropertyExpression&lt;/tt&gt; &quot;owner.it&quot;.  The inferred type of the implicit parameter was saved in &lt;tt&gt;expr.getAccessedVariable()&lt;/tt&gt;.  And this is not transferred to the new expression.&lt;/p&gt;

&lt;p&gt;Then the new addition of &lt;tt&gt;checkOrMarkInnerFieldAccess&lt;/tt&gt; to &lt;tt&gt;StaticTypeCheckingVisitor&lt;/tt&gt; is superseding the old path that would turn &quot;this.it&quot; back into the implicit closure parameter.  See &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7996&quot; title=&quot;Using with method with a closure that references a protected property produces ClassCastException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7996&quot;&gt;&lt;del&gt;GROOVY-7996&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16830299" author="emilles" created="Tue, 30 Apr 2019 13:29:10 +0000"  >&lt;p&gt;This should be enough to recreate the NoSuchFieldError&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@groovy.transform.CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;enum&lt;/span&gt; E {
  ONE(1), TWO(2)
  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; n
  E(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; n) { &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.n = n }
  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; E valueOf(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; n) {
    values().find { it.n == n }
  }
}

print E.valueOf(2)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16830340" author="emilles" created="Tue, 30 Apr 2019 14:13:44 +0000"  >&lt;p&gt;This refactor checks also for package-private and adds check for enclosing closure parameter access.  Private field access is separate and may still be buggy.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; storeField(FieldNode field, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; returnTrueIfFieldExists, PropertyExpression expressionToStoreOn, ClassNode receiver, ClassCodeVisitorSupport visitor, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; delegationData, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; lhsOfAssignment) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (field == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || !returnTrueIfFieldExists) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (visitor != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) visitor.visitField(field);
        storeWithResolve(field.getOriginType(), receiver, field.getDeclaringClass(), field.isStatic(), expressionToStoreOn);
        checkOrMarkPrivateAccess(expressionToStoreOn, field, lhsOfAssignment);
        /* GRECLIPSE edit -- GROOVY-7996, et al.
        delegationData = checkOrMarkInnerFieldAccess(expressionToStoreOn, field, lhsOfAssignment, delegationData);
        */
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (field != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; !field.isStatic() &amp;amp;&amp;amp; !field.isPrivate() &amp;amp;&amp;amp; !&lt;span class=&quot;code-quote&quot;&gt;&quot;delegate&quot;&lt;/span&gt;.equals(delegationData) &amp;amp;&amp;amp;
                expressionToStoreOn &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; PropertyExpression &amp;amp;&amp;amp; typeCheckingContext.getEnclosingClosureStack().size() == 1) {
            PropertyExpression pe = (PropertyExpression) expressionToStoreOn;
            &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; ownerProperty = !(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;&quot;&lt;/span&gt;.equals(pe.getPropertyAsString()));
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ownerProperty &amp;amp;&amp;amp; pe.getObjectExpression() &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; VariableExpression) {
                Variable accessedVariable = ((VariableExpression) pe.getObjectExpression()).getAccessedVariable();
                Variable declaredVariable = typeCheckingContext.getEnclosingClosure().getClosureExpression().getVariableScope().getDeclaredVariable(pe.getObjectExpression().getText());
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (accessedVariable != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; accessedVariable == declaredVariable) ownerProperty = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
            }
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ownerProperty) {
                delegationData = &lt;span class=&quot;code-quote&quot;&gt;&quot;owner&quot;&lt;/span&gt;;
                pe.getObjectExpression().putNodeMetaData(StaticTypesMarker.IMPLICIT_RECEIVER, delegationData);
            }
        }
        &lt;span class=&quot;code-comment&quot;&gt;// GRECLIPSE end
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (delegationData != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            expressionToStoreOn.putNodeMetaData(StaticTypesMarker.IMPLICIT_RECEIVER, delegationData);
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Checked against &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7687&quot; title=&quot;Bug with @CompileStatic and nested closures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7687&quot;&gt;&lt;del&gt;GROOVY-7687&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7996&quot; title=&quot;Using with method with a closure that references a protected property produces ClassCastException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7996&quot;&gt;&lt;del&gt;GROOVY-7996&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8978&quot; title=&quot;NPE when accessing protected method from subclass clone&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8978&quot;&gt;&lt;del&gt;GROOVY-8978&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-9063&quot; title=&quot;Groovy 2.5.6 @CompileStatic generates invalid bytecode (leading to runtime ClassCastException) when accessing protected instance member from 2 level of nested closures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-9063&quot;&gt;&lt;del&gt;GROOVY-9063&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16831012" author="paulk" created="Wed, 1 May 2019 13:59:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=emilles&quot; class=&quot;user-hover&quot; rel=&quot;emilles&quot;&gt;emilles&lt;/a&gt; those changes definitely seem to fix a few issues we have with the current code. I don&apos;t believe it covers some of the non-closure cases the previous code was trying to handle but I am inclined to merge your changes and then fix from there. I didn&apos;t have test cases for all of the cases - there were some Grails/Micronaut inspired tests that I was running by hand but they weren&apos;t standalone. I&apos;ll endeavour to get some standalone tests to cover those cases.&lt;/p&gt;</comment>
                            <comment id="16831047" author="emilles" created="Wed, 1 May 2019 14:59:25 +0000"  >&lt;p&gt;Sounds good.  If you have the test cases, let me know.  I didn&apos;t have any left that failed with this change.&lt;/p&gt;</comment>
                            <comment id="16831728" author="emilles" created="Thu, 2 May 2019 16:14:10 +0000"  >&lt;p&gt;In the case of a private enum field, there is still a NoSuchFieldError because enum fields are handled separately in &lt;tt&gt;StaticTypesCallSiteWriter.makeGetPropertySite&lt;/tt&gt;.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (receiverType.isEnum()) {
            mv.visitFieldInsn(GETSTATIC, BytecodeHelper.getClassInternalName(receiverType), methodName, BytecodeHelper.getTypeDescription(receiverType));
            controller.getOperandStack().push(receiverType);
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
        }
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (makeGetPrivateFieldWithBridgeMethod(receiver, receiverType, methodName, safe, implicitThis)) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
@groovy.transform.CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;enum&lt;/span&gt; E {
  ONE(1), TWO(2)
  private final &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; n
  E(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; n) { &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.n = n }
  static E valueOf(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; n) {
    values().find { it.n == n }
  }
}

print E.valueOf(2)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If I comment out the &lt;tt&gt;GETSTATIC&lt;/tt&gt; block, this test case succeeds.  So handling exists for private access somewhere.&lt;/p&gt;</comment>
                            <comment id="16831765" author="emilles" created="Thu, 2 May 2019 17:00:21 +0000"  >&lt;p&gt;Another benefit of commenting out &lt;tt&gt;if (receiverType.isEnum&amp;#40;&amp;#41;&amp;#41; ...&lt;/tt&gt; is that it shuts down access to &lt;tt&gt;Enum.name&lt;/tt&gt; and &lt;tt&gt;Enum.ordinal&lt;/tt&gt; private fields under STC.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;enum&lt;/span&gt; E { ONE, TWO }
@groovy.transform.CompileStatic
void test() {
  print E.ONE.name &lt;span class=&quot;code-comment&quot;&gt;// Access to E#name is forbidden
&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;enum&lt;/span&gt; E { ONE, TWO }
@groovy.transform.CompileStatic
void test() {
  print E.ONE.ordinal &lt;span class=&quot;code-comment&quot;&gt;// Access to E#ordinal is forbidden
&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16833894" author="paulk" created="Mon, 6 May 2019 15:01:57 +0000"  >&lt;p&gt;Should be fixed in the next release. Thanks for spotting the issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 28 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|yi186w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>