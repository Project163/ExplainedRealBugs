<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:48:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-7716] groovy.json.internal.FastStringUtils.StringImplementation#toCharArray fails on jdk9</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-7716</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Trying to build my application on recent jdk9 build I got the following exception:&lt;/p&gt;

&lt;p&gt;java.lang.ClassCastException: [B cannot be cast to [C&lt;br/&gt;
	at groovy.json.internal.FastStringUtils$StringImplementation$1.toCharArray(FastStringUtils.java:88)&lt;br/&gt;
	at groovy.json.internal.FastStringUtils.toCharArray(FastStringUtils.java:175)&lt;br/&gt;
	at groovy.json.internal.BaseJsonParser.parse(BaseJsonParser.java:103)&lt;br/&gt;
	at groovy.json.JsonSlurper.parseText(JsonSlurper.java:208)&lt;/p&gt;

&lt;p&gt;I believe that jdk9 has changed the inner representation of Strings (see &lt;a href=&quot;http://openjdk.java.net/jeps/254&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://openjdk.java.net/jeps/254&lt;/a&gt;).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12923293">GROOVY-7716</key>
            <summary>groovy.json.internal.FastStringUtils.StringImplementation#toCharArray fails on jdk9</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="iNikem">Nikita Salnikov-Tarnovski</reporter>
                        <labels>
                            <label>jdk9</label>
                    </labels>
                <created>Sun, 20 Dec 2015 15:55:33 +0000</created>
                <updated>Mon, 22 Feb 2016 20:48:32 +0000</updated>
                            <resolved>Thu, 31 Dec 2015 22:48:29 +0000</resolved>
                                    <version>2.3.10</version>
                    <version>2.4.5</version>
                                    <fixVersion>2.4.6</fixVersion>
                                    <component>JSON</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15071930" author="jwagenleitner" created="Sat, 26 Dec 2015 17:54:32 +0000"  >&lt;p&gt;Passing &quot;-Dgroovy.json.faststringutils.disable=true&quot; to the program could be used as a workaround for this issue until it&apos;s fixed.&lt;/p&gt;</comment>
                            <comment id="15071992" author="githubbot" created="Sat, 26 Dec 2015 22:07:04 +0000"  >&lt;p&gt;GitHub user jwagenleitner opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/225&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/225&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7716&quot; title=&quot;groovy.json.internal.FastStringUtils.StringImplementation#toCharArray fails on jdk9&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7716&quot;&gt;&lt;del&gt;GROOVY-7716&lt;/del&gt;&lt;/a&gt; - groovy.json.internal.FastStringUtils fails on jdk9&lt;/p&gt;

&lt;p&gt;    JDK 9 Compat Strings enhancement changed the internal representation of the value field from a char[] to a combination of a byte[] and an encoding flag field (see &lt;a href=&quot;http://openjdk.java.net/jeps/254&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://openjdk.java.net/jeps/254&lt;/a&gt;).  As a workaround this change allows fallback to the normal String#toCharArray method and bypasses using direct access.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/jwagenleitner/groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jwagenleitner/groovy&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7716&quot; title=&quot;groovy.json.internal.FastStringUtils.StringImplementation#toCharArray fails on jdk9&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7716&quot;&gt;&lt;del&gt;GROOVY-7716&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/225.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/225.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #225&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit d6d9647c75edaa187c213f26e1aa3ac2ea708277&lt;br/&gt;
Author: John Wagenleitner &amp;lt;jwagenleitner@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-12-26T21:35:01Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7716&quot; title=&quot;groovy.json.internal.FastStringUtils.StringImplementation#toCharArray fails on jdk9&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7716&quot;&gt;&lt;del&gt;GROOVY-7716&lt;/del&gt;&lt;/a&gt; - groovy.json.internal.FastStringUtils.StringImplementation#toCharArray fails on jdk9&lt;/p&gt;

&lt;p&gt;    JDK 9 Compat Strings enhancement changed the internal representation of the value field from a char[] to a combination of a byte[] and an encoding flag field (see &lt;a href=&quot;http://openjdk.java.net/jeps/254&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://openjdk.java.net/jeps/254&lt;/a&gt;).  As a workaround this change allows fallback to the normal String#toCharArray method and bypasses using direct access.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15076171" author="githubbot" created="Thu, 31 Dec 2015 22:25:33 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/225&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/225&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15076177" author="jwagenleitner" created="Thu, 31 Dec 2015 22:48:29 +0000"  >&lt;p&gt;Since the internal representation changed from a char[] to a byte[] + encoding flag field for jdk 9 the fix falls back to using &lt;tt&gt;String#toCharArray&lt;/tt&gt;.  I suspect that not having the optimization for jdk9+ wont cause any significant performance issues and at some point it might be worth completely removing &lt;tt&gt;sun.misc.Unsafe&lt;/tt&gt; since the only use in the codebase is in &lt;tt&gt;groovy.json.internal.FastStringUtils&lt;/tt&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 46 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2q4x3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>