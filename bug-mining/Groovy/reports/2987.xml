<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:48:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-7074] DelegatingScript does not work with Builder as delegate</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-7074</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;DelegatingScript does not work, if the delegate is e.g. a MarkupBuilder instance.&lt;/p&gt;

&lt;p&gt;    import org.codehaus.groovy.control.CompilerConfiguration&lt;br/&gt;
    import groovy.xml.MarkupBuilder&lt;/p&gt;

&lt;p&gt;    def cc = new CompilerConfiguration()&lt;br/&gt;
    cc.scriptBaseClass = DelegatingScript.class.name&lt;br/&gt;
    def sh = new GroovyShell(new Binding(), cc)&lt;br/&gt;
    def script = sh.parse(&apos;&apos;&apos;&lt;br/&gt;
    foo &lt;/p&gt;
{
        bar()
    }&lt;br/&gt;
    &apos;&apos;&apos;)&lt;br/&gt;
    def markupBuilder = new MarkupBuilder()&lt;br/&gt;
    script.setDelegate(markupBuilder)&lt;br/&gt;
    script.run()&lt;br/&gt;
&lt;br/&gt;
does throw a groovy.lang.MissingMethodException. If I change the script to&lt;br/&gt;
&lt;br/&gt;
    delegate.foo {        bar()    }

&lt;p&gt;it works.&lt;/p&gt;</description>
                <environment>Windows 7, Linux Mint 16 Petra</environment>
        <key id="12817801">GROOVY-7074</key>
            <summary>DelegatingScript does not work with Builder as delegate</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pascalschumacher">Pascal Schumacher</assignee>
                                    <reporter username="tschulte">Tobias Schulte</reporter>
                        <labels>
                            <label>patch-available</label>
                    </labels>
                <created>Tue, 16 Sep 2014 14:55:42 +0000</created>
                <updated>Mon, 22 Feb 2016 20:48:44 +0000</updated>
                            <resolved>Mon, 28 Dec 2015 07:26:10 +0000</resolved>
                                    <version>2.4.0-beta-3</version>
                                    <fixVersion>2.4.6</fixVersion>
                                    <component>GroovyScriptEngine</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14476464" author="tschulte" created="Wed, 17 Sep 2014 02:09:24 +0000"  >&lt;p&gt;Workaround:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&lt;br/&gt;
def scriptFile = &lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&lt;br/&gt;
def script = sh.parse(&quot;delegate.with &lt;/p&gt;
{ $scriptFile.text }
&lt;p&gt;&quot;)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="14622177" author="jkemnade" created="Fri, 10 Jul 2015 11:51:44 +0000"  >&lt;p&gt;Still an issue with 2.4.3. &lt;/p&gt;</comment>
                            <comment id="14622228" author="jkemnade" created="Fri, 10 Jul 2015 12:31:13 +0000"  >&lt;p&gt;What about changing &lt;tt&gt;DelegatingScript&lt;/tt&gt; to call &lt;tt&gt;InvokerHelper.invokeMethod(delegate, name, args)&lt;/tt&gt; instead of &lt;tt&gt;metaClass.invokeMethod(delegate,name,args)&lt;/tt&gt;?&lt;/p&gt;</comment>
                            <comment id="14638663" author="jkemnade" created="Thu, 23 Jul 2015 11:27:28 +0000"  >&lt;p&gt;Test and fix for &lt;tt&gt;GROOVY_2_4_X&lt;/tt&gt; branch&lt;/p&gt;</comment>
                            <comment id="14638827" author="blackdrag" created="Thu, 23 Jul 2015 13:55:42 +0000"  >&lt;p&gt;do you have an explanation as of why it works with InvokerHelper and not with metaClass? Because InvokerHelper is supposed to do the same in the end. The only reason I could imagine that would make a difference here is, that the meta class changed. Is that the case? And if DelegatingScript is supposed to react to that, then there are a lot more places to be fixed.&lt;/p&gt;</comment>
                            <comment id="14638895" author="jkemnade" created="Thu, 23 Jul 2015 14:16:13 +0000"  >&lt;p&gt;No, the metaclass doesn&apos;t seem to change, at lest it&apos;s the same before and after the script&apos;s execution. I think the reason is that for a Builder (and any other object that overrides &lt;tt&gt;groovy.lang.GroovyObjectSupport.invokeMethod(String, Object)&lt;/tt&gt;), we need to invoke the &lt;tt&gt;invokeMethod&lt;/tt&gt; method on the Builder itself and not on the metaClass. &lt;tt&gt;InvokerHelper#invokePogoMethod&lt;/tt&gt; does that in line 920 (2.4.4).&lt;/p&gt;</comment>
                            <comment id="14944635" author="jkemnade" created="Tue, 6 Oct 2015 07:43:04 +0000"  >&lt;p&gt;still in 2.4.5&lt;/p&gt;</comment>
                            <comment id="14944773" author="githubbot" created="Tue, 6 Oct 2015 09:19:39 +0000"  >&lt;p&gt;GitHub user PascalSchumacher opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/131&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/131&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7074&quot; title=&quot;DelegatingScript does not work with Builder as delegate&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7074&quot;&gt;&lt;del&gt;GROOVY-7074&lt;/del&gt;&lt;/a&gt;: fix for using a Builder as delegate in a DelegatingScript&lt;/p&gt;

&lt;p&gt;    created out of patch &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7074&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/GROOVY-7074&lt;/a&gt; submitted by Jochen Kemnade&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/PascalSchumacher/incubator-groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/PascalSchumacher/incubator-groovy&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7074&quot; title=&quot;DelegatingScript does not work with Builder as delegate&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7074&quot;&gt;&lt;del&gt;GROOVY-7074&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/131.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/131.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #131&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 646e6584642b225dfff5e19450961848326f24f3&lt;br/&gt;
Author: Jochen Kemnade &amp;lt;jochen.kemnade@eddyson.de&amp;gt;&lt;br/&gt;
Date:   2015-07-23T11:25:57Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7074&quot; title=&quot;DelegatingScript does not work with Builder as delegate&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7074&quot;&gt;&lt;del&gt;GROOVY-7074&lt;/del&gt;&lt;/a&gt;: fix for using a Builder as delegate in a DelegatingScript&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14958463" author="pascalschumacher" created="Thu, 15 Oct 2015 07:31:43 +0000"  >&lt;p&gt;@Jochen What do you think of the patch / pull request?&lt;/p&gt;</comment>
                            <comment id="14958830" author="blackdrag" created="Thu, 15 Oct 2015 12:39:11 +0000"  >&lt;p&gt;I feel uneasy about this fixing the issue, because GroovyObject#invokeMethod is normally called through the meta class path and we want to avoid using InvokerHelper... So even if this does fix the issue I am not really happy with it. But since there is probably no time to investigate further I guess I have to give my ok after all&lt;/p&gt;</comment>
                            <comment id="15009068" author="shils" created="Tue, 17 Nov 2015 17:22:42 +0000"  >&lt;p&gt;If we ultimately just want a GroovyObject&apos;s invokeMethod to have precedence over its metaClass&apos; invokeMethod, perhaps changing DelegatingScript#invokeMethod to something like this would be better? &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; invokeMethod(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; args) {
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (delegate &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; GroovyObject) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ((GroovyObject) delegate).invokeMethod(name, args);
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; metaClass.invokeMethod(delegate, name, args);
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (MissingMethodException mme) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.invokeMethod(name, args);
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15020931" author="githubbot" created="Sun, 22 Nov 2015 10:34:27 +0000"  >&lt;p&gt;Github user PascalSchumacher closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/131&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/131&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15028371" author="jkemnade" created="Thu, 26 Nov 2015 08:48:13 +0000"  >&lt;p&gt;New patch based on &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shils&quot; class=&quot;user-hover&quot; rel=&quot;shils&quot;&gt;shils&lt;/a&gt;&apos;s suggestions. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blackdrag&quot; class=&quot;user-hover&quot; rel=&quot;blackdrag&quot;&gt;blackdrag&lt;/a&gt;, what do you think?&lt;/p&gt;</comment>
                            <comment id="15028419" author="jkemnade" created="Thu, 26 Nov 2015 09:26:37 +0000"  >&lt;p&gt;That behavior should probably be used for &lt;tt&gt;get/setProperty&lt;/tt&gt; too, I&apos;ll create a new patch.&lt;/p&gt;</comment>
                            <comment id="15028475" author="jkemnade" created="Thu, 26 Nov 2015 10:13:53 +0000"  >&lt;p&gt;On second thought, that is not within the scope of this issue and I don&apos;t have a valid use case for &lt;tt&gt;get/setProperty&lt;/tt&gt; yet.&lt;/p&gt;</comment>
                            <comment id="15065730" author="githubbot" created="Sun, 20 Dec 2015 12:48:16 +0000"  >&lt;p&gt;GitHub user PascalSchumacher opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/216&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/216&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7074&quot; title=&quot;DelegatingScript does not work with Builder as delegate&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7074&quot;&gt;&lt;del&gt;GROOVY-7074&lt;/del&gt;&lt;/a&gt;: DelegatingScript does not work with Builder as delegate&lt;/p&gt;

&lt;p&gt;    Patch supplied by Jochen Kemnade&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/PascalSchumacher/incubator-groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/PascalSchumacher/incubator-groovy&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7074&quot; title=&quot;DelegatingScript does not work with Builder as delegate&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7074&quot;&gt;&lt;del&gt;GROOVY-7074&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/216.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/216.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #216&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit d2b9a05a4db922dfefcd9c1b04593758cdc02ad1&lt;br/&gt;
Author: PascalSchumacher &amp;lt;pascalschumacher@gmx.net&amp;gt;&lt;br/&gt;
Date:   2015-12-20T12:47:22Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7074&quot; title=&quot;DelegatingScript does not work with Builder as delegate&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7074&quot;&gt;&lt;del&gt;GROOVY-7074&lt;/del&gt;&lt;/a&gt;: DelegatingScript does not work with Builder as delegate&lt;/p&gt;

&lt;p&gt;    Patch supplied by Jochen Kemnade&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15072507" author="githubbot" created="Mon, 28 Dec 2015 07:24:29 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/216&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/216&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15072509" author="pascalschumacher" created="Mon, 28 Dec 2015 07:26:10 +0000"  >&lt;p&gt;Patch applied. Thanks!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12844169">GROOVY-7499</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12916408">GROOVY-7689</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12774486" name="0001-GROOVY-7074-fix-for-using-a-Builder-as-delegate-in-a.patch" size="2693" author="jkemnade" created="Thu, 26 Nov 2015 08:46:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 47 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2c3bj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>