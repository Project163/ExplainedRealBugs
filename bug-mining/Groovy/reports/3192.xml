<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:54:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-8082] Groovy sql.rows returns org.postgresql.util.PSQLException: No hstore extension installed</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-8082</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;-&amp;gt; Steps to Reproduce&lt;/p&gt;

&lt;p&gt;1) create a simple sql string with no where clause&lt;br/&gt;
2) pass an empty Map &lt;span class=&quot;error&quot;&gt;&amp;#91;:&amp;#93;&lt;/span&gt; as params to groovySql.rows(sql, params)&lt;/p&gt;

&lt;p&gt;PS: (as workargound, passing an empty List, instead of an empty map, as params behaves like expected)&lt;/p&gt;

&lt;p&gt;-&amp;gt; Expected Behaviour&lt;/p&gt;

&lt;p&gt;call postgres and run the sql passing no parameters&lt;/p&gt;

&lt;p&gt;-&amp;gt; Actual Behaviour&lt;/p&gt;

&lt;p&gt;Exception raised: No hstore extension installed.. Stacktrace follows:&lt;br/&gt;
org.postgresql.util.PSQLException: No hstore extension installed.&lt;br/&gt;
at org.postgresql.jdbc2.AbstractJdbc2Statement.setMap(AbstractJdbc2Statement.java:1707)&lt;br/&gt;
at org.postgresql.jdbc2.AbstractJdbc2Statement.setObject(AbstractJdbc2Statement.java:1910)&lt;br/&gt;
at org.postgresql.jdbc3g.AbstractJdbc3gStatement.setObject(AbstractJdbc3gStatement.java:36)&lt;br/&gt;
at org.postgresql.jdbc4.AbstractJdbc4Statement.setObject(AbstractJdbc4Statement.java:47)&lt;/p&gt;

&lt;p&gt;-&amp;gt; Environment Information&lt;/p&gt;

&lt;p&gt;    Operating System: Windows&lt;br/&gt;
    Grails Version: 2.5.4&lt;br/&gt;
    JDK Version: 1.7&lt;br/&gt;
    Container Version (If Applicable): N/A&lt;br/&gt;
    Database: Postgres 9.3.13&lt;/p&gt;

&lt;p&gt;-&amp;gt; Probable fix&lt;/p&gt;

&lt;p&gt;Method singletonList(Object item) at groovy.sql.SQL&lt;/p&gt;

&lt;p&gt;-&amp;gt; More information&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/q/39245870/1916198&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/q/39245870/1916198&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13041240">GROOVY-8082</key>
            <summary>Groovy sql.rows returns org.postgresql.util.PSQLException: No hstore extension installed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="clessiomendes">Clessio Cunha Mendes</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Feb 2017 02:09:40 +0000</created>
                <updated>Tue, 28 Mar 2017 02:54:14 +0000</updated>
                            <resolved>Thu, 16 Feb 2017 03:37:38 +0000</resolved>
                                    <version>2.4.4</version>
                                    <fixVersion>2.4.9</fixVersion>
                                    <component>SQL processing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15857954" author="paulk" created="Wed, 8 Feb 2017 13:02:04 +0000"  >&lt;p&gt;The Sql api doesn&apos;t have a &lt;tt&gt;rows(String, Map)&lt;/tt&gt; variant. Do any of these work:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;groovySql.rows(sql, *:params)
groovySql.rows(params, sql)
groovySql.rows(sql, [params])
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Actually, I just tried them and there doesn&apos;t seem to be a useful workaround apart from the empty list as you suggest or perhaps more intuitively:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;def result = params ? groovySql.rows(sql, params) : groovySql.rows(sql)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15860838" author="githubbot" created="Fri, 10 Feb 2017 06:48:06 +0000"  >&lt;p&gt;GitHub user paulk-asert opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/495&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/495&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8082&quot; title=&quot;Groovy sql.rows returns org.postgresql.util.PSQLException: No hstore extension installed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8082&quot;&gt;&lt;del&gt;GROOVY-8082&lt;/del&gt;&lt;/a&gt;: Groovy sql.rows returns org.postgresql.util.PSQLExceptio&#8230;&lt;/p&gt;

&lt;p&gt;    &#8230;n: No hstore extension installed&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/paulk-asert/groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/paulk-asert/groovy&lt;/a&gt; groovy8082&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/495.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/495.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #495&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit b34b47623d18372241f0d5242bb780963c0278ab&lt;br/&gt;
Author: paulk &amp;lt;paulk@asert.com.au&amp;gt;&lt;br/&gt;
Date:   2017-02-10T06:46:33Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8082&quot; title=&quot;Groovy sql.rows returns org.postgresql.util.PSQLException: No hstore extension installed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8082&quot;&gt;&lt;del&gt;GROOVY-8082&lt;/del&gt;&lt;/a&gt;: Groovy sql.rows returns org.postgresql.util.PSQLException: No hstore extension installed&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15860842" author="paulk" created="Fri, 10 Feb 2017 06:51:53 +0000"  >&lt;p&gt;You could argue that this isn&apos;t a bug but a misuse of the api. However, having said that, the error message when you supply the empty map is quite misleading, so the proposed PR looks for the special case of an empty supplied map when no parameter placeholders are found in the sql. It is then equivalent to calling with the empty list.&lt;/p&gt;</comment>
                            <comment id="15869080" author="githubbot" created="Thu, 16 Feb 2017 03:34:57 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/495&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/495&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15869082" author="paulk" created="Thu, 16 Feb 2017 03:37:38 +0000"  >&lt;p&gt;Proposed PR merged. From 2.4.9, you can now supply an empty map if you want to - provided you have no placeholders you are trying to fill of course.&lt;/p&gt;</comment>
                            <comment id="15944436" author="paulk" created="Tue, 28 Mar 2017 02:54:14 +0000"  >&lt;p&gt;Just an update that from 2.4.11, if you have a complex query (or multiline query in some cases it seems) whereby your driver can&apos;t determine parameter metadata, then you might not be able to supply an empty map of params and instead have to use the previously mentioned workaround. This only seems to apply to some drivers, so you&apos;ll need to try this yourself. You&apos;ll see some Groovy debug output at the FINE level if you are affected.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13058230">GROOVY-8128</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 34 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39rnb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>