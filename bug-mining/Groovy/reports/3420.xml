<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:59:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-8632] Groovy 2.5.0 fails to compile Google Java Client sample code</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-8632</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;I have been using Google Java Client libraries with Groovy 2.4.x successfully but now I&apos;m getting multiple compilation errors when trying to upgrade to Groovy 2.5.0. Note that none of the classes mentioned are actually abstract although the 2.5.0 compiler clearly thinks they are.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Grab(&lt;span class=&quot;code-quote&quot;&gt;&apos;com.google.apis:google-api-services-analyticsreporting:v4-rev124-1.23.0&apos;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; com.google.api.services.analyticsreporting.v4.AnalyticsReporting
@Grab(&lt;span class=&quot;code-quote&quot;&gt;&apos;com.google.apis:google-api-services-sheets:v4-rev525-1.23.0&apos;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; com.google.api.services.sheets.v4.Sheets
@Grab(&lt;span class=&quot;code-quote&quot;&gt;&apos;com.google.apis:google-api-services-drive:v3-rev120-1.23.0&apos;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; com.google.api.services.drive.Drive

&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; HTTP_TRANSPORT = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; JSON_FACTORY = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
def requestInitializer = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
def credential = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;

def builderAnalytics = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AnalyticsReporting.Builder(HTTP_TRANSPORT, JSON_FACTORY, requestInitializer)

def builderSheets = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Sheets.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential)

def builderDrive = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Drive.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:
/home/edited/bug25.groovy: 13: You cannot create an instance from the &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; class &lt;span class=&quot;code-quote&quot;&gt;&apos;com.google.api.services.analyticsreporting.v4.AnalyticsReporting$Builder&apos;&lt;/span&gt;.
&#160;@ line 13, column 24.
&#160;&#160; def builderAnalytics = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AnalyticsReporting.Builder(HTTP_TRANSPORT, JSON_FACTORY, requestInitializer)
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^

/home/edited/bug25.groovy: 15: You cannot create an instance from the &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; class &lt;span class=&quot;code-quote&quot;&gt;&apos;com.google.api.services.sheets.v4.Sheets$Builder&apos;&lt;/span&gt;.
&#160;@ line 15, column 21.
&#160;&#160; def builderSheets = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Sheets.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential)
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^

/home/edited/bug25.groovy: 17: You cannot create an instance from the &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; class &lt;span class=&quot;code-quote&quot;&gt;&apos;com.google.api.services.drive.Drive$Builder&apos;&lt;/span&gt;.
&#160;@ line 17, column 20.
&#160;&#160; def builderDrive = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Drive.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>Ubuntu 18.04, Oracle Java 1.8.0_171-b11, Groovy 2.5.0</environment>
        <key id="13163843">GROOVY-8632</key>
            <summary>Groovy 2.5.0 fails to compile Google Java Client sample code</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jwagenleitner">John Wagenleitner</assignee>
                                    <reporter username="robokaso">Robert Kasanicky</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Jun 2018 13:53:17 +0000</created>
                <updated>Thu, 26 Jul 2018 04:38:57 +0000</updated>
                            <resolved>Fri, 15 Jun 2018 03:07:19 +0000</resolved>
                                    <version>2.5.0</version>
                                    <fixVersion>2.5.1</fixVersion>
                                    <component>Compiler</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16506742" author="githubbot" created="Sat, 9 Jun 2018 00:28:19 +0000"  >&lt;p&gt;GitHub user jwagenleitner opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/753&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/753&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8632&quot; title=&quot;Groovy 2.5.0 fails to compile Google Java Client sample code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8632&quot;&gt;&lt;del&gt;GROOVY-8632&lt;/del&gt;&lt;/a&gt;: Groovy 2.5.0 fails to compile Google Java Client sample code&lt;/p&gt;

&lt;p&gt;    Class files can contain INNERCLASS references to other&lt;br/&gt;
    classes inner classes whose name may be the same name as a&lt;br/&gt;
    contained inner class. By storing modifiers in a map keyed&lt;br/&gt;
    by short class name there is a possibility for the wrong&lt;br/&gt;
    modifiers to be stored.&lt;/p&gt;

&lt;p&gt;    Since generated class files for inner classes contain an INNERCLASS&lt;br/&gt;
    self reference, the logic can be simplified to look for a matching&lt;br/&gt;
    name and storing those access modifiers. This eliminates the need&lt;br/&gt;
    to search the outer class for the INNERCLASS reference.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/jwagenleitner/groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jwagenleitner/groovy&lt;/a&gt; 8632-decompiled-cn-nested-classes&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/753.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/753.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #753&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 8b0d57cfc8c600296763b31a9d9f5166b17ef4f1&lt;br/&gt;
Author: John Wagenleitner &amp;lt;jwagenleitner@...&amp;gt;&lt;br/&gt;
Date:   2018-06-09T00:00:16Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8632&quot; title=&quot;Groovy 2.5.0 fails to compile Google Java Client sample code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8632&quot;&gt;&lt;del&gt;GROOVY-8632&lt;/del&gt;&lt;/a&gt;: Groovy 2.5.0 fails to compile Google Java Client sample code&lt;/p&gt;

&lt;p&gt;    Class files can contain INNERCLASS references to other&lt;br/&gt;
    classes inner classes whose name may be the same name as a&lt;br/&gt;
    contained inner class. By storing modifiers in a map keyed&lt;br/&gt;
    by short class name there is a possibility for the wrong&lt;br/&gt;
    modifiers to be stored.&lt;/p&gt;

&lt;p&gt;    Since generated class files for inner classes contain an INNERCLASS&lt;br/&gt;
    self reference, the logic can be simplified to look for a matching&lt;br/&gt;
    name and storing those access modifiers. This eliminates the need&lt;br/&gt;
    to search the outer class for the INNERCLASS reference.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16506743" author="jwagenleitner" created="Sat, 9 Jun 2018 00:29:42 +0000"  >&lt;p&gt;This issue is with the new ASM class file based resolver that is turned on by default in 2.5.0. As it visits classes it stores inner class access modifiers by the short class name (i.e., &lt;tt&gt;Builder&lt;/tt&gt;).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/blob/334b5df0af1e6f06aeca101136f01201312a0259/src/main/java/org/codehaus/groovy/ast/decompiled/AsmDecompiler.java#L106&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/blob/334b5df0af1e6f06aeca101136f01201312a0259/src/main/java/org/codehaus/groovy/ast/decompiled/AsmDecompiler.java#L106&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;When building the actual &lt;tt&gt;ClassNode&lt;/tt&gt; for inner classes it tries to determine if the inner class is static by finding the outer class and looking in it&#8217;s &lt;tt&gt;innerClassModifiers&lt;/tt&gt; map.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/blob/334b5df0af1e6f06aeca101136f01201312a0259/src/main/java/org/codehaus/groovy/ast/decompiled/DecompiledClassNode.java#L58-L75&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/blob/334b5df0af1e6f06aeca101136f01201312a0259/src/main/java/org/codehaus/groovy/ast/decompiled/DecompiledClassNode.java#L58-L75&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The problem is that it only stores the short name rather than the fully qualified name. A class file may contain INNERCLASS references to another classes&#8217; inner class and it could have the same name, which is the case for the Google API class &lt;tt&gt;AnalyticsReporting&lt;/tt&gt; class. In that case that other class&#8217; abstract modifier is being picked up and causing the reported error.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;version 49.0 (49)
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// access flags 0x21
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;com/google/api/services/analyticsreporting/v4/AnalyticsReporting &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; com/google/api/client/googleapis/services/json/AbstractGoogleJsonClient  {

  &lt;span class=&quot;code-comment&quot;&gt;// compiled from: AnalyticsReporting.java
&lt;/span&gt;  &lt;span class=&quot;code-comment&quot;&gt;// access flags 0x19
&lt;/span&gt;  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; INNERCLASS com/google/api/services/analyticsreporting/v4/AnalyticsReporting$Builder com/google/api/services/analyticsreporting/v4/AnalyticsReporting Builder
  &lt;span class=&quot;code-comment&quot;&gt;// access flags 0x1
&lt;/span&gt;  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; INNERCLASS com/google/api/services/analyticsreporting/v4/AnalyticsReporting$Reports com/google/api/services/analyticsreporting/v4/AnalyticsReporting Reports
  &lt;span class=&quot;code-comment&quot;&gt;// access flags 0x409
&lt;/span&gt;  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; INNERCLASS com/google/api/client/googleapis/services/json/AbstractGoogleJsonClient$Builder com/google/api/client/googleapis/services/json/AbstractGoogleJsonClient Builder
&#8230;.
&#8230;.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;While this could be fixed by storing the fully qualified name, the logic might be simplified since the class file for inner classes contain a self referenced INNERCLASS entry. So it not necessary to resolve the outer class. During the &lt;tt&gt;visitInnerClass&lt;/tt&gt; call if the top level class name matches the inner class name, those modifiers could be stored and used later to determine the full access modifiers for inner classes.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;version 49.0 (49)
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// access flags 0x31
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;com/google/api/services/analyticsreporting/v4/AnalyticsReporting$Builder &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; com/google/api/client/googleapis/services/json/AbstractGoogleJsonClient$Builder  {

  &lt;span class=&quot;code-comment&quot;&gt;// compiled from: AnalyticsReporting.java
&lt;/span&gt;  &lt;span class=&quot;code-comment&quot;&gt;// access flags 0x19
&lt;/span&gt;  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; INNERCLASS com/google/api/services/analyticsreporting/v4/AnalyticsReporting$Builder com/google/api/services/analyticsreporting/v4/AnalyticsReporting Builder
  &lt;span class=&quot;code-comment&quot;&gt;// access flags 0x409
&lt;/span&gt;  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; INNERCLASS com/google/api/client/googleapis/services/json/AbstractGoogleJsonClient$Builder com/google/api/client/googleapis/services/json/AbstractGoogleJsonClient Builder
  &lt;span class=&quot;code-comment&quot;&gt;// access flags 0x409
&lt;/span&gt;  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; INNERCLASS com/google/api/client/googleapis/services/AbstractGoogleClient$Builder com/google/api/client/googleapis/services/AbstractGoogleClient Builder
&#8230;.
&#8230;.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16513246" author="githubbot" created="Fri, 15 Jun 2018 02:23:01 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/753&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/753&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16513271" author="jwagenleitner" created="Fri, 15 Jun 2018 03:07:19 +0000"  >&lt;p&gt;Thanks for reporting the issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 22 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3uh47:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>