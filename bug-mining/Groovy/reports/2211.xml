<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:33:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-6125] Bugs in GPathResult.parent() and &apos;..&apos; notation</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-6125</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;The XmlSlurper sample from the documentation&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;records&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;car name=&lt;span class=&quot;code-quote&quot;&gt;&apos;HSV Maloo&apos;&lt;/span&gt; make=&lt;span class=&quot;code-quote&quot;&gt;&apos;Holden&apos;&lt;/span&gt; year=&lt;span class=&quot;code-quote&quot;&gt;&apos;2006&apos;&lt;/span&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;country&amp;gt;&lt;/span&gt;Australia&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/country&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;record type=&lt;span class=&quot;code-quote&quot;&gt;&apos;speed&apos;&lt;/span&gt;&amp;gt;&lt;/span&gt;Production Pickup Truck with speed of 271kph&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/record&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/car&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;car name=&lt;span class=&quot;code-quote&quot;&gt;&apos;P50&apos;&lt;/span&gt; make=&lt;span class=&quot;code-quote&quot;&gt;&apos;Peel&apos;&lt;/span&gt; year=&lt;span class=&quot;code-quote&quot;&gt;&apos;1962&apos;&lt;/span&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;country&amp;gt;&lt;/span&gt;Isle of Man&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/country&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;record type=&lt;span class=&quot;code-quote&quot;&gt;&apos;size&apos;&lt;/span&gt;&amp;gt;&lt;/span&gt;Smallest Street-Legal Car at 99cm wide and 59 kg in weight&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/record&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/car&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;car name=&lt;span class=&quot;code-quote&quot;&gt;&apos;Royale&apos;&lt;/span&gt; make=&lt;span class=&quot;code-quote&quot;&gt;&apos;Bugatti&apos;&lt;/span&gt; year=&lt;span class=&quot;code-quote&quot;&gt;&apos;1931&apos;&lt;/span&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;country&amp;gt;&lt;/span&gt;France&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/country&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;record type=&lt;span class=&quot;code-quote&quot;&gt;&apos;price&apos;&lt;/span&gt;&amp;gt;&lt;/span&gt;Most Valuable Car at $15 million&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/record&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/car&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/records&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; fails these additional asserts:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; records.car.record.findAll({it.@type == &lt;span class=&quot;code-quote&quot;&gt;&apos;price&apos;&lt;/span&gt;}).parent().country == &lt;span class=&quot;code-quote&quot;&gt;&apos;France&apos;&lt;/span&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; records.car.country.findAll({it == &lt;span class=&quot;code-quote&quot;&gt;&apos;Australia&apos;&lt;/span&gt;}).&lt;span class=&quot;code-quote&quot;&gt;&apos;..&apos;&lt;/span&gt;.record.@type == &lt;span class=&quot;code-quote&quot;&gt;&apos;speed&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;On on an XML, where some &apos;cars&apos; don&apos;t have a &apos;country&apos; child this expression will still return all countries: records.cars.country.parent(). It should only return &apos;cars&apos; with at least one &apos;country&apos; child.&lt;/p&gt;

&lt;p&gt;Fixing the problem involved:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Adding a public parent() method and parent private property to Node&lt;/li&gt;
	&lt;li&gt;Implementing an additional subclass NodeParents of GPathResult&lt;/li&gt;
	&lt;li&gt;Simplifying childNodes() in NodeChildren, so that it utilizes the classes nodeIterator()&lt;/li&gt;
	&lt;li&gt;Implementing ParentNodes with a nodeIterator() override&lt;/li&gt;
	&lt;li&gt;Cleaning up FilteredNode children to follow the same pattern&lt;/li&gt;
	&lt;li&gt;Instantiating ParentNodes in GPathResult.parent()&lt;/li&gt;
	&lt;li&gt;Calling parent() for property &apos;..&apos;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;And as an added refinement to the GPath syntax:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Defining GPathResult.getAt(closure) to call findAll(closure)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;All changed source code in groovy.util.slurpersupport is in the attached zip. The groovy source contains the asserts. All of which pass.&lt;/p&gt;

&lt;p&gt;This fix supersedes the proposed fix for #6122&lt;/p&gt;</description>
                <environment>JDK 6</environment>
        <key id="12817597">GROOVY-6125</key>
            <summary>Bugs in GPathResult.parent() and &apos;..&apos; notation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="eddelplus">Jochen Eddelbuettel</reporter>
                        <labels>
                            <label>breaking</label>
                    </labels>
                <created>Sat, 27 Apr 2013 05:51:26 +0000</created>
                <updated>Sun, 5 Apr 2015 14:43:50 +0000</updated>
                            <resolved>Sat, 18 May 2013 06:22:16 +0000</resolved>
                                    <version>2.1.3</version>
                                    <fixVersion>2.2.0-beta-1</fixVersion>
                                    <component>XML Processing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14480279" author="paulk" created="Sat, 27 Apr 2013 21:33:25 +0000"  >&lt;p&gt;For future reference, a github pull request is quite a bit easier for us to handle compared to a zip but all contributions are greatly appreciated.&lt;/p&gt;

&lt;p&gt;Just a little bit on XmlSlurper history. The original author wanted .parent() or &apos;..&apos; to unwrap one level of GPath expression so that for instance:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;root.gpath1.gpath2.parent().gpath3
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;would be equivalent to:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;root.gpath1.gpath3
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In hindsight, I think this wasn&apos;t the ideal use of &apos;..&apos; or .parent() but some people might be relying on this behavior. So to move forward we would need to mark this as a breaking change, decide which version we would release this for and also provide an implementation of the existing functionality under a different name, perhaps &quot;.pop()&quot; or &quot;.undo()&quot;.&lt;/p&gt;</comment>
                            <comment id="14474386" author="eddelplus" created="Sun, 28 Apr 2013 02:12:41 +0000"  >&lt;p&gt;There is a .parents() method in GPathResult that throws a &quot;Not implemented yet&quot; exception in all the subclasses. I could implement that. Problem is that .parent() has been introduced as the equivalent of &apos;..&apos;. So redefining &apos;..&apos; to mean .parents() is as much of a breaking change. In terms of what XPath to GPath migrants will think, the proposed new behavior for &apos;..&apos; makes more sense.&lt;/p&gt;

&lt;p&gt;So I&apos;d suggest taking the plunge with changing .parent(), leaving .parents() as it is, and adding .pop(). I think this shouldn&apos;t need to wait for 3.x, if we can get it into 2.2 beta.&lt;/p&gt;

&lt;p&gt;I&apos;ll create a fresh pull request after &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-6122&quot; title=&quot;FilteredNodeChildren doesn&amp;#39;t provide childNodes() iterator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-6122&quot;&gt;&lt;del&gt;GROOVY-6122&lt;/del&gt;&lt;/a&gt; has been acccepted.&lt;/p&gt;</comment>
                            <comment id="14474415" author="eddelplus" created="Mon, 29 Apr 2013 19:00:39 +0000"  >&lt;p&gt;Fresh pull request is now on GitHub. I&apos;ve left out the getAt(Closure) part. Tried to attain maximum compatiblity with existing tests. All previous tests still succeed. This change actually brings XmlSlurper more in line with XmlParser. There are two tests with .parent() that work for both, one had been identfied as giving problems with XmlSlurper before. I really believe this fixes the gap with what the functionality should have been in the first place. Very small breaking change should be OK for 2.2.0.&lt;/p&gt;</comment>
                            <comment id="14474490" author="melix" created="Thu, 2 May 2013 02:17:40 +0000"  >&lt;p&gt;Code tags, copied the sample from the docs for reference&lt;/p&gt;</comment>
                            <comment id="14474416" author="melix" created="Thu, 2 May 2013 02:23:18 +0000"  >&lt;p&gt;Agreed that the &quot;parent&quot; semantics in suggested here are better than the actual ones. I added the &lt;tt&gt;breaking&lt;/tt&gt; tag to this issue. As for 2.2 vs 3.0, my vote would go to 2.2 but maybe it&apos;s worth asking people on the ML if anyone relies on the old behavior.&lt;/p&gt;</comment>
                            <comment id="14480281" author="paulk" created="Sat, 18 May 2013 06:22:46 +0000"  >&lt;p&gt;Thanks for the issue and pull request.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12723198" name="NewGroovyClass.groovy" size="3255" author="eddelplus" created="Sat, 27 Apr 2013 05:51:27 +0000"/>
                            <attachment id="12722385" name="slurpersupport.zip" size="11151" author="eddelplus" created="Sat, 27 Apr 2013 05:51:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 27 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2c7hb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>