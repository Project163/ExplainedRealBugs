<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:10:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-9890] Static type checking can&apos;t find default method overload on interface</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-9890</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;The static type checker cannot find default methods on an interface if the method overloads an abstract method. For example, consider the following Java classes:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; net.robinfriedli.botify.scripting;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; TestInt {

    void foo(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; s);

    &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; void foo(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; l) {}
}

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;TestImpl &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; TestInt {
    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void foo(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; s) {
    }
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;When compiling the script&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; net.robinfriedli.botify.scripting.TestImpl().foo(1l)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;the following exception is thrown:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
MultipleCompilationErrorsException:
startup failed:
Script1.groovy: 1: [Static type checking] - Cannot find matching method net.robinfriedli.botify.scripting.TestImpl#foo(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;). Please check &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the declared type is correct and &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the method exists.
 @ line 1, column 1.
   &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; net.robinfriedli.botify.scripting.TestImpl().foo(1l)
   ^

1 error
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The script runs fine without static compilation.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Calling the implemented abstract method compiles sucessfully:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; net.robinfriedli.botify.scripting.TestImpl().foo(&lt;span class=&quot;code-quote&quot;&gt;&apos;str&apos;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;However, when changing the interface to&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; net.robinfriedli.botify.scripting;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; TestInt {

    void foo(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; s);

    &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; void bar(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; l) {}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The following script compiles:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; net.robinfriedli.botify.scripting.TestImpl().bar(1l)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The scripts are executed in Java by GroovyShell#evaluate using the following compiler configuration:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
CompilerConfiguration compilerConfiguration = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CompilerConfiguration();
ASTTransformationCustomizer compileStaticCustomizer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ASTTransformationCustomizer(
    singletonMap(&lt;span class=&quot;code-quote&quot;&gt;&quot;extensions&quot;&lt;/span&gt;, singletonList(&lt;span class=&quot;code-quote&quot;&gt;&quot;net.robinfriedli.botify.scripting.TypeCheckingExtension&quot;&lt;/span&gt;)),
    CompileStatic.class
);

compilerConfiguration.addCompilationCustomizers(compileStaticCustomizer);
&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; compilerConfiguration;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13351270">GROOVY-9890</key>
            <summary>Static type checking can&apos;t find default method overload on interface</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="robinfriedli">Robin Friedli</reporter>
                        <labels>
                    </labels>
                <created>Sun, 10 Jan 2021 02:10:15 +0000</created>
                <updated>Thu, 21 Jul 2022 19:30:58 +0000</updated>
                            <resolved>Tue, 18 May 2021 02:22:58 +0000</resolved>
                                    <version>3.0.7</version>
                                    <fixVersion>3.0.8</fixVersion>
                    <fixVersion>4.0.0-alpha-3</fixVersion>
                    <fixVersion>2.5.16</fixVersion>
                                    <component>Static compilation</component>
                    <component>Static Type Checker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17272082" author="paulk" created="Tue, 26 Jan 2021 12:49:28 +0000"  >&lt;p&gt;Merged into master and back-ported to 3_0_X. Thanks.&lt;/p&gt;</comment>
                            <comment id="17346449" author="robinfriedli" created="Mon, 17 May 2021 21:25:28 +0000"  >&lt;p&gt;I&apos;ve upgraded to groovy-all 3.0.8 and this does not appear to be fixed&lt;font color=&quot;#6a8759&quot;&gt;&lt;/font&gt;&lt;/p&gt;</comment>
                            <comment id="17346512" author="paulk" created="Tue, 18 May 2021 00:33:56 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=robinfriedli&quot; class=&quot;user-hover&quot; rel=&quot;robinfriedli&quot;&gt;robinfriedli&lt;/a&gt;, we might need a little help understanding what is not covered.&lt;/p&gt;

&lt;p&gt;Here is the testcase added with the fix (static compilation is automatically added for all code in this test class):&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/groovy/blob/master/src/test/groovy/transform/stc/MethodCallsSTCTest.groovy#L1302-L1317&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/blob/master/src/test/groovy/transform/stc/MethodCallsSTCTest.groovy#L1302-L1317&lt;/a&gt;&lt;br/&gt;
And the test subject is here:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/groovy/blob/master/src/test/groovy/bugs/groovy9890/Face.java#L21-L26&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/blob/master/src/test/groovy/bugs/groovy9890/Face.java#L21-L26&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I added another testcase just now with a Java intermediate class:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/groovy/blob/master/src/test/groovy/transform/stc/MethodCallsSTCTest.groovy#L1319-L1328&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/blob/master/src/test/groovy/transform/stc/MethodCallsSTCTest.groovy#L1319-L1328&lt;/a&gt;&lt;br/&gt;
And the Java intermediate class:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/groovy/blob/master/src/test/groovy/bugs/groovy9890/ImplJ.java#L21-L26&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/blob/master/src/test/groovy/bugs/groovy9890/ImplJ.java#L21-L26&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Can you spot anything different to your scenario not being covered by these test cases? I did change the return type to void and the tests still passed.&lt;/p&gt;</comment>
                            <comment id="17346517" author="paulk" created="Tue, 18 May 2021 01:08:50 +0000"  >&lt;p&gt;The following script seems to give the expected result in the Groovy console with those helper classes on the classpath:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.codehaus.groovy.control.CompilerConfiguration
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.codehaus.groovy.control.customizers.ASTTransformationCustomizer
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.CompileStatic

def config = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CompilerConfiguration()
config.addCompilationCustomizers(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ASTTransformationCustomizer(CompileStatic))

&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GroovyShell(getClass().classLoader, config).evaluate(&lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; groovy.bugs.groovy9890.ImplJ().foo(42L)&apos;&lt;/span&gt;).dump()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17346536" author="robinfriedli" created="Tue, 18 May 2021 02:20:59 +0000"  >&lt;p&gt;Apologies, for some reason gradle is pulling version 2.5.14 for all transitive dependencies of groovy-all 3.0.8 except for groovy-astbuilder, which is odd because there are no conflicting versions. So I&apos;m not actually on groovy 3.0.8 after all &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17346538" author="paulk" created="Tue, 18 May 2021 02:22:58 +0000"  >&lt;p&gt;No problems &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=robinfriedli&quot; class=&quot;user-hover&quot; rel=&quot;robinfriedli&quot;&gt;robinfriedli&lt;/a&gt;, hope you get your build script sorted out.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13472768">GROOVY-10700</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0mf2g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>