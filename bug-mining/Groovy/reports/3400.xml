<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:58:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-8509] SC: error for call to protected method from same package</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-8509</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Groovy 2.5+ is producing compilation errors for @CompileStatic test class calling a protected method of class under test (in same package).  This should be allowed as protected is &quot;package-private&quot; plus subtypes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13145045">GROOVY-8509</key>
            <summary>SC: error for call to protected method from same package</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jwagenleitner">John Wagenleitner</assignee>
                                    <reporter username="emilles">Eric Milles</reporter>
                        <labels>
                    </labels>
                <created>Wed, 14 Mar 2018 14:35:20 +0000</created>
                <updated>Thu, 26 Jul 2018 04:39:00 +0000</updated>
                            <resolved>Fri, 18 May 2018 15:07:30 +0000</resolved>
                                    <version>2.5.0-beta-2</version>
                    <version>2.6.0-alpha-3</version>
                                    <fixVersion>2.6.0-alpha-4</fixVersion>
                    <fixVersion>3.0.0-alpha-3</fixVersion>
                    <fixVersion>2.5.0-rc-3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16404957" author="emilles" created="Mon, 19 Mar 2018 15:16:55 +0000"  >&lt;p&gt;The error is recorded from &lt;tt&gt;StaticInvocationWriter&lt;/tt&gt;.&#160; There has been a lot of change to &lt;tt&gt;writeDirectMethodCall&lt;/tt&gt; since Groovy 2.4:&lt;br/&gt;
End of StaticInvocationWriter.writeDirectMethodCall in 2.4 branch: &lt;a href=&quot;https://github.com/apache/groovy/blob/GROOVY_2_4_X/src/main/org/codehaus/groovy/classgen/asm/sc/StaticInvocationWriter.java#L312&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/blob/GROOVY_2_4_X/src/main/org/codehaus/groovy/classgen/asm/sc/StaticInvocationWriter.java#L312&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;End of the same method in Groovy 2.5: &lt;a href=&quot;https://github.com/apache/groovy/blob/GROOVY_2_5_X/src/main/java/org/codehaus/groovy/classgen/asm/sc/StaticInvocationWriter.java#L336&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/blob/GROOVY_2_5_X/src/main/java/org/codehaus/groovy/classgen/asm/sc/StaticInvocationWriter.java#L336&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16404971" author="emilles" created="Mon, 19 Mar 2018 15:25:02 +0000"  >&lt;p&gt;I think this can be remedied by adding a same package check:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (target.isProtected()) {
                ClassNode node = receiver==&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;?ClassHelper.OBJECT_TYPE:controller.getTypeChooser().resolveType(receiver, controller.getClassNode());
                &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isThisOrSuper = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (receiver &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; VariableExpression) {
                    isThisOrSuper = ((VariableExpression) receiver).isThisExpression() || ((VariableExpression) receiver).isSuperExpression();
                }
                &lt;span class=&quot;code-comment&quot;&gt;// GRECLIPSE edit -- GROOVY-8509
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!implicitThis &amp;amp;&amp;amp; !isThisOrSuper
&lt;/span&gt;                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!implicitThis &amp;amp;&amp;amp; !isThisOrSuper &amp;amp;&amp;amp; !Objects.equals(node.getPackageName(), classNode.getPackageName())
                &lt;span class=&quot;code-comment&quot;&gt;// GRECLIPSE end
&lt;/span&gt;                        &amp;amp;&amp;amp; StaticTypeCheckingSupport.implementsInterfaceOrIsSubclassOf(node,target.getDeclaringClass())) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16405076" author="emilles" created="Mon, 19 Mar 2018 16:27:53 +0000"  >&lt;p&gt;Also, I&apos;m curious about 2 additional items:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Why does a call to a package-private member not result in the same SC error when accessed outside of the declared package?&lt;/li&gt;
	&lt;li&gt;Why does &lt;tt&gt;@TypeChecked&lt;/tt&gt; not support these warnings?  Are calls to private, package-private and protected methods supported for &lt;tt&gt;@TypeChecked&lt;/tt&gt; code?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16477858" author="githubbot" created="Wed, 16 May 2018 18:24:03 +0000"  >&lt;p&gt;GitHub user jwagenleitner opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/707&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/707&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8509&quot; title=&quot;SC: error for call to protected method from same package&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8509&quot;&gt;&lt;del&gt;GROOVY-8509&lt;/del&gt;&lt;/a&gt;: SC error call to protected method from same package&lt;/p&gt;

&lt;p&gt;    Because they were closely related, this PR also includes the following:&lt;/p&gt;

&lt;p&gt;    1. A change to the fix introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7883&quot; title=&quot;Static compiler prefers private constructor over public if private matches better&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7883&quot;&gt;&lt;del&gt;GROOVY-7883&lt;/del&gt;&lt;/a&gt; (b1d1232770aa) to prevent filtering protected methods in the `StaticTypeCheckingVisitor` if caller is in the same package. From the same commit, removes the test `Groovy7883Bug#test3` because it should compile and the new test introduced for &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8509&quot; title=&quot;SC: error for call to protected method from same package&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8509&quot;&gt;&lt;del&gt;GROOVY-8509&lt;/del&gt;&lt;/a&gt; in `MethodCallsStaticCompilation` takes it place.&lt;/p&gt;

&lt;p&gt;    1. A change to revert groovy.sql.Sql#asList (b1d1232770aa) back to `protected`. Fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7883&quot; title=&quot;Static compiler prefers private constructor over public if private matches better&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7883&quot;&gt;&lt;del&gt;GROOVY-7883&lt;/del&gt;&lt;/a&gt; enforced visibility for method calls in `TypedChecked` and `CompileStatic` modes. Test was originally put in place to verify the added ClosureParams, so changed test to access method via subclass so that the access modifier for the method can remain protected. I think the spirit of the test is preserved in this case without having to open access to the method under test.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/jwagenleitner/groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jwagenleitner/groovy&lt;/a&gt; 8509-SC-protected-same-package&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/707.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/707.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #707&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit c76783966f4f9198498abdf6f4696dc36e449cd5&lt;br/&gt;
Author: John Wagenleitner &amp;lt;jwagenleitner@...&amp;gt;&lt;br/&gt;
Date:   2018-05-16T14:58:23Z&lt;/p&gt;

&lt;p&gt;    Revert change to groovy.sql.Sql#asList in commit b1d1232770aa&lt;/p&gt;

&lt;p&gt;    Fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7883&quot; title=&quot;Static compiler prefers private constructor over public if private matches better&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7883&quot;&gt;&lt;del&gt;GROOVY-7883&lt;/del&gt;&lt;/a&gt; enforced visibility for method calls in TypedChecked&lt;br/&gt;
    and CompileStatic modes. Test was originally put in place to verify&lt;br/&gt;
    the added ClosureParams, so changed test to access method via subclass&lt;br/&gt;
    so that the access modifier for the method can remain protected.&lt;/p&gt;

&lt;p&gt;commit 8821e8406adeec4d69894b739a2d941c51266c87&lt;br/&gt;
Author: John Wagenleitner &amp;lt;jwagenleitner@...&amp;gt;&lt;br/&gt;
Date:   2018-05-16T15:34:48Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8509&quot; title=&quot;SC: error for call to protected method from same package&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8509&quot;&gt;&lt;del&gt;GROOVY-8509&lt;/del&gt;&lt;/a&gt;: SC error call to protected method from same package&lt;/p&gt;

&lt;p&gt;    Also includes a change to the fix introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7883&quot; title=&quot;Static compiler prefers private constructor over public if private matches better&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7883&quot;&gt;&lt;del&gt;GROOVY-7883&lt;/del&gt;&lt;/a&gt; (b1d1232770aa)&lt;br/&gt;
    to prevent filtering protected methods in the StaticTypeCheckingVisitor if&lt;br/&gt;
    caller is in the same package. From the same commit, removes the test&lt;br/&gt;
    Groovy7883Bug#test3 because it should compile and the new test&lt;br/&gt;
    introduced for &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8509&quot; title=&quot;SC: error for call to protected method from same package&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8509&quot;&gt;&lt;del&gt;GROOVY-8509&lt;/del&gt;&lt;/a&gt; in MethodCallsStaticCompilation takes it place.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16477881" author="jwagenleitner" created="Wed, 16 May 2018 18:33:23 +0000"  >&lt;p&gt;Thanks for the suggested patch.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Why does @TypeChecked not support these warnings? Are calls to private, package-private and protected methods supported for @TypeChecked code?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I believe this is because &lt;tt&gt;@TypeChecked&lt;/tt&gt; performs runtime dispatch so behaves similar to dynamic mode when it comes to being able to access methods that wouldn&apos;t be accessible in static mode. It looks like &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7883&quot; title=&quot;Static compiler prefers private constructor over public if private matches better&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7883&quot;&gt;&lt;del&gt;GROOVY-7883&lt;/del&gt;&lt;/a&gt; changed this (not sure if intentional or not) so this may no longer be the case from 2.5.0 on.&lt;/p&gt;</comment>
                            <comment id="16480713" author="githubbot" created="Fri, 18 May 2018 14:18:56 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/707&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/707&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16480780" author="jwagenleitner" created="Fri, 18 May 2018 15:07:30 +0000"  >&lt;p&gt;Provided patch applied, thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 26 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3raef:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>