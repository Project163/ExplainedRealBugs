<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:05:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-2606] Error processing uncompiled classes</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-2606</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;I have a class (Factorial_G) implementing some algorithms for factorial &amp;#8211; boring but short &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I have a class with some Test&apos;N&apos;Groove tests and a class with some JUnit tests.  The behaviour in both cases is the same so this is not a unit test framework problem.&lt;/p&gt;

&lt;p&gt;If I compile Factorial_G and then run the tests as groovy scripts, then things work fine:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;|&amp;gt; ./Factorial_G_TestNGroove.groovy 
[Parser] Running:
  Single script suite (Factorial_G_TestNGroove.groovy)


===============================================
Single script suite (Factorial_G_TestNGroove.groovy)
Total tests run: 6, Failures: 0, Skips: 0
===============================================
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If however there is no precompilation before execution then the result is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;|&amp;gt; ./Factorial_G_TestNGroove.groovy 
java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.groovy.tools.GroovyStarter.rootLoader(GroovyStarter.java:101)
        at org.codehaus.groovy.tools.GroovyStarter.main(GroovyStarter.java:130)
Caused by: org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed, /home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$8&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$21&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$31&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$9&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$11&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$13&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$30&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$27&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$19&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$28&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$33&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$6&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$15&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$25&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$26&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$34&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$24&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$22&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$32&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$20&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$18&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$16&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$17&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$14&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$23&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$12&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$10&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$4&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$7&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$5&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$3&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$29&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$2&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$1&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1./home/users/russel/Progs/Applications/Factorial/Factorial_G_TestNGroove.groovy: -1: The field &lt;span class=&quot;code-quote&quot;&gt;&apos;$&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;$0&apos;&lt;/span&gt; is declared multiple times.
 @ line -1, column -1.
35 errors

        at org.codehaus.groovy.control.ErrorCollector.failIfErrors(ErrorCollector.java:296)
        at org.codehaus.groovy.control.CompilationUnit.applyToPrimaryClassNodes(CompilationUnit.java:924)
        at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:447)
        at groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:277)
        at groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:248)
        at groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:188)
        at org.codehaus.groovy.testng.GroovyTestNG.loadTests(GroovyTestNG.java:140)
        at org.codehaus.groovy.testng.GroovyTestNG.run(GroovyTestNG.java:46)
        at org.codehaus.groovy.testng.GroovyTestNG.main(GroovyTestNG.java:198)
        ... 6 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>Ubuntu 7.10 Gutsy Gibbon ; Groovy Subversion r11252</environment>
        <key id="12817444">GROOVY-2606</key>
            <summary>Error processing uncompiled classes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blackdrag">Jochen Theodorou</assignee>
                                    <reporter username="russel">Dr. Russel Winder</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Feb 2008 09:10:29 +0000</created>
                <updated>Sun, 4 May 2008 02:04:59 +0000</updated>
                            <resolved>Fri, 2 May 2008 07:16:45 +0000</resolved>
                                    <version>1.6-beta-1</version>
                                    <fixVersion>1.6-beta-1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14464468" author="russel" created="Tue, 25 Mar 2008 13:58:33 +0000"  >&lt;p&gt;Raising the priority so there is not another release without some attention to this problem &amp;#8211; which is in my view a blocker to use of Groovy.&lt;/p&gt;

&lt;p&gt;This is not a Test&apos;N&apos;Groove issue, it is a Groovy issue &amp;#8211; I can get very similar behaviour using the build in JUnit variants of the test code.  I can add these if that helps.&lt;/p&gt;</comment>
                            <comment id="14464510" author="blackdrag" created="Thu, 27 Mar 2008 04:42:46 +0000"  >&lt;p&gt;this sounds very much as if the class passes ACG two times. Something like that does not happen in a normal environment. do you have an example that allows us to reproduce the problem?&lt;/p&gt;</comment>
                            <comment id="14464520" author="russel" created="Thu, 27 Mar 2008 05:12:37 +0000"  >&lt;p&gt;This file contains FactorialIllegalArgumentException.java which must be compiled &amp;#8211; obviously &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;If Factorial_G.groovy is not compiled before Factorial_G_TestNGroove.groovy is executed then you get the effect.&lt;/p&gt;

&lt;p&gt;If Factorial_G.groovy is compiled before Factorial_G_TestNGroove.groovy is executed, then things execute as required.&lt;/p&gt;</comment>
                            <comment id="14464401" author="russel" created="Thu, 27 Mar 2008 05:15:49 +0000"  >&lt;p&gt;Updated the trunk revision number to the latest (r11252) since it is still a problem even though the effect was first noticed in r10841.&lt;/p&gt;</comment>
                            <comment id="14464539" author="blackdrag" created="Fri, 28 Mar 2008 07:04:46 +0000"  >&lt;p&gt;I changed the version for this issue, because when I tried to run this against 1.5.4 or 1.5.5 head I get 12 failing tests &lt;/p&gt;</comment>
                            <comment id="14464522" author="blackdrag" created="Fri, 28 Mar 2008 07:12:37 +0000"  >&lt;p&gt;with 1.6 I can reproduce this error.&lt;/p&gt;</comment>
                            <comment id="14464485" author="blackdrag" created="Fri, 28 Mar 2008 07:25:56 +0000"  >&lt;p&gt;I am assigning the issue to Alex for now, as I can not imagine that Test&apos;N&apos;Groove or TestNG are the reasons for the problem. And even if, the fact that it happens only on 1.6 is a good hint that this has something to do with changes that are only in 1.6. From the names of the fields I guess the reason is somewhere in the call site caching code or in another performance patch. &lt;/p&gt;</comment>
                            <comment id="14464784" author="blackdrag" created="Fri, 2 May 2008 07:16:45 +0000"  >&lt;p&gt;OptimizerVisitor was causing the trouble. It was used twice, while designed to be used only once on the same class. Thus it tried to add duplicated fields. This will now not happen, but the fix needs improvements&lt;/p&gt;</comment>
                            <comment id="14464721" author="russel" created="Sun, 4 May 2008 02:04:59 +0000"  >&lt;p&gt;I can confirm that Groovy r12252 does indeed not have this problem.  Thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12721448" name="GROOVY-2606.tgz" size="1217" author="russel" created="Thu, 27 Mar 2008 05:12:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 30 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bnan:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>