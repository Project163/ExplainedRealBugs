<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:46:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-4811] exception while compiling annotation type</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-4811</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@&lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; Inter {
  &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] bar() &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;While compiling this annotation type the compiler throws&lt;/p&gt;

&lt;p&gt;java.lang.ClassCastException: org.codehaus.groovy.ast.expr.ConstantExpression cannot be cast to org.codehaus.groovy.ast.expr.ListExpression&lt;br/&gt;
	at org.codehaus.groovy.classgen.AsmClassGenerator.visitAnnotationDefaultExpression(AsmClassGenerator.java:316)&lt;br/&gt;
	at org.codehaus.groovy.classgen.AsmClassGenerator.visitAnnotationDefault(AsmClassGenerator.java:350)&lt;br/&gt;
	at org.codehaus.groovy.classgen.AsmClassGenerator.visitConstructorOrMethod(AsmClassGenerator.java:259)&lt;br/&gt;
	at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitMethod(ClassCodeVisitorSupport.java:123)&lt;br/&gt;
	at org.codehaus.groovy.classgen.AsmClassGenerator.visitMethod(AsmClassGenerator.java:366)&lt;br/&gt;
	at org.codehaus.groovy.ast.ClassNode.visitContents(ClassNode.java:1056)&lt;br/&gt;
	at org.codehaus.groovy.ast.ClassCodeVisitorSupport.visitClass(ClassCodeVisitorSupport.java:50)&lt;br/&gt;
	at org.codehaus.groovy.classgen.AsmClassGenerator.visitClass(AsmClassGenerator.java:171)&lt;br/&gt;
	at org.codehaus.groovy.control.CompilationUnit$13.call(CompilationUnit.java:763)&lt;br/&gt;
	at org.codehaus.groovy.control.CompilationUnit.applyToPrimaryClassNodes(CompilationUnit.java:957)&lt;br/&gt;
	at org.codehaus.groovy.control.CompilationUnit.doPhaseOperation(CompilationUnit.java:542)&lt;br/&gt;
	at org.codehaus.groovy.control.CompilationUnit.processPhaseOperations(CompilationUnit.java:520)&lt;br/&gt;
	at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:497)&lt;br/&gt;
	at org.jetbrains.groovy.compiler.rt.GroovyCompilerWrapper.compile(GroovyCompilerWrapper.java:43)&lt;br/&gt;
	at org.jetbrains.groovy.compiler.rt.GroovycRunner.main(GroovycRunner.java:128)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at com.intellij.rt.execution.CommandLineWrapper.main(CommandLineWrapper.java:75)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12815533">GROOVY-4811</key>
            <summary>exception while compiling annotation type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="mxm-groovy">Maxim Medvedev</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 May 2011 07:21:08 +0000</created>
                <updated>Tue, 2 May 2017 02:03:27 +0000</updated>
                            <resolved>Fri, 19 Jun 2015 21:18:02 +0000</resolved>
                                    <version>1.8-rc-3</version>
                    <version>2.4.0-beta-3</version>
                                    <fixVersion>2.5.0-alpha-1</fixVersion>
                                    <component>parser-antlr2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14471204" author="blackdrag" created="Thu, 5 May 2011 09:20:40 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@&lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; Inter {
  &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] bar() &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; [&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;]
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;comiles fine. So there is a work around this. The questions is (1) is that valid in Java and (2) is that something we should support in Groovy?&lt;/p&gt;</comment>
                            <comment id="14471284" author="mxm-groovy" created="Thu, 5 May 2011 10:00:23 +0000"  >&lt;p&gt;It is valid in Java.&lt;br/&gt;
IMHO compiler should generate some more careful message than exception stack trace =) But of course it is minor bug.&lt;/p&gt;</comment>
                            <comment id="14591476" author="githubbot" created="Thu, 18 Jun 2015 08:34:41 +0000"  >&lt;p&gt;GitHub user paulk-asert opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/41&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/41&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-4811&quot; title=&quot;exception while compiling annotation type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-4811&quot;&gt;&lt;del&gt;GROOVY-4811&lt;/del&gt;&lt;/a&gt;: exception while compiling annotation type&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/paulk-asert/incubator-groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/paulk-asert/incubator-groovy&lt;/a&gt; groovy4811&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/41.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/41.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #41&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit a7a5bc062640d66f42731761c2a59996276d47bb&lt;br/&gt;
Author: Paul King &amp;lt;paulk@asert.com.au&amp;gt;&lt;br/&gt;
Date:   2015-06-18T08:32:54Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-4811&quot; title=&quot;exception while compiling annotation type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-4811&quot;&gt;&lt;del&gt;GROOVY-4811&lt;/del&gt;&lt;/a&gt;: exception while compiling annotation type&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14593908" author="githubbot" created="Fri, 19 Jun 2015 20:22:30 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-groovy/pull/41&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-groovy/pull/41&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14593980" author="paulk" created="Fri, 19 Jun 2015 21:18:02 +0000"  >&lt;p&gt;This can be considered a bug (unneeded difference from Java) or new feature (a convenience syntax we didn&apos;t use to support but will now). Certainly IDEA also complains about the syntax - so there is 3rd party tool implications for this change. For that reason I&apos;ll do the change just in 2.5 for now.&lt;/p&gt;

&lt;p&gt;If there is a huge demand, we could consider back-porting to the 2_4_X branch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 22 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2byk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>