<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:57:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-1179] GroovyScriptEngine does not let you specify parent ClassLoader for GroovyClassLoader</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-1179</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;When the GroovyScriptEngine creates a new GroovyClassLoader it always uses its classloader as the parent ClassLoader of the GroovyClassLoader. It should be possibly to specify the ClassLoader that will be used as the parent ClassLoader for new GroovyClassLoader objects when a script is run. This is necessary because a script may refer to classes/methods that don&apos;t exist on the JVM classpath. In this case, it&apos;s necessary to provide a customized URLClassLoader to allow for the script to run.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12816288">GROOVY-1179</key>
            <summary>GroovyScriptEngine does not let you specify parent ClassLoader for GroovyClassLoader</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="guillaume">Guillaume Sauthier</assignee>
                                    <reporter username="buko.obele@gmail.com">Bo</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Dec 2005 09:36:44 +0000</created>
                <updated>Wed, 18 Jan 2006 05:04:50 +0000</updated>
                            <resolved>Wed, 18 Jan 2006 05:04:50 +0000</resolved>
                                                    <fixVersion>1.0-JSR-5</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14461528" author="buko.obele@gmail.com" created="Fri, 9 Dec 2005 14:48:40 +0000"  >&lt;p&gt;Here&apos;s a patch that should fix the problem.&lt;/p&gt;</comment>
                            <comment id="14477189" author="marc@anyware.co.uk" created="Thu, 15 Dec 2005 07:53:53 +0000"  >&lt;p&gt;I think it is probably a bad idea to allow the parent classloader to be changed at runtime as per Azubuko&apos;s path which has getter and setter for the parent classloader - surely this introducing threading issues whereas the rest of this class is threadsafe.&lt;/p&gt;

&lt;p&gt;I suggest addition of an overloaded run method that takes a ClassLoader parameter, so that you can still do per-execution classloader control without introducing new threading issues.&lt;/p&gt;

&lt;p&gt;I will post a fix along with another related issue.&lt;/p&gt;</comment>
                            <comment id="14477182" author="buko.obele@gmail.com" created="Fri, 16 Dec 2005 10:42:22 +0000"  >&lt;p&gt;Marc, I don&apos;t think the threading issues are that bad. There is the possibility that one thread might modify the parent classloader right when another thread is about to execute a script but that can be fixed by tossing in a few synchronized blocks to ensure nobody messes with the parent classloader while the run() method is being evaluated. Also, adding an overloaded run() method would be bad from an api-design pov. The purpose of the class, I think, is to provide a &apos;script execution context&apos;. To run a script users shouldn&apos;t have to provide much more than a script name and the bindings. If the concern is that great, let&apos;s overload the constructor and keep the run methods simple.&lt;/p&gt;

&lt;p&gt;On another note I don&apos;t think this class should even be threadsafe. I can&apos;t imagine why you would possibly want a threadsafe scripting engine. In a multithreaded scenario, where you have many threads each evaluating their own script, you&apos;re going to give each one its own scripting engine in the first place. Or maybe I&apos;m missing something and only considering the client-server model...&lt;/p&gt;</comment>
                            <comment id="14477186" author="marc@anyware.co.uk" created="Fri, 16 Dec 2005 10:49:39 +0000"  >&lt;p&gt;I don&apos;t care much how its done, but the code I submitted for &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-1187&quot; title=&quot;Allow loading of groovy classes from GroovyScriptEngine, leveraging the reloading and caching support.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-1187&quot;&gt;&lt;del&gt;GROOVY-1187&lt;/del&gt;&lt;/a&gt; has overloaded methods. Your argument that all you should have to supply is scriptname / binding is true - but if you don&apos;t need to supply a classloader you call the overloaded method that doesn&apos;t need it.&lt;/p&gt;

&lt;p&gt;Having a threadsafe GroovyScriptEngine is important because you can (and should) use one script engine instance in your application, and if multiple threads execute the same scripts (such as you might in an application server) you will benefit from the cached Groovy class definitions. Otherwise you waste memory and CPU re-parsing groovy scripts for each thread.&lt;/p&gt;</comment>
                            <comment id="14461802" author="guillaume" created="Wed, 18 Jan 2006 05:04:50 +0000"  >&lt;p&gt;Now able to set the parent classloader through constructors or even through a setter.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12721005" name="groovy1179-patch.txt" size="1736" author="" created="Fri, 9 Dec 2005 14:48:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 years, 45 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bquf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>