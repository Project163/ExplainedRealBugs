<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:55:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-357] TemplateServlet cause Template not found error</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-357</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;groovy.servlet.TemplateServlet used within non-ROOT context cause&lt;/p&gt;

&lt;p&gt;  HTTP ERROR: 500 Template+%22%2Fgroovy%2FHelloWorld%2Ecanvas%22+not+found%2E&lt;/p&gt;

&lt;p&gt;  RequestURI=/groovy/HelloWorld.canvas&lt;/p&gt;</description>
                <environment>Jetty 4.2.19</environment>
        <key id="12812517">GROOVY-357</key>
            <summary>TemplateServlet cause Template not found error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="spullara">Sam Pullara</assignee>
                                    <reporter username="ko-hey">Kouhei Mori</reporter>
                        <labels>
                    </labels>
                <created>Sat, 3 Apr 2004 03:45:49 +0000</created>
                <updated>Sat, 22 May 2004 02:12:06 +0000</updated>
                            <resolved>Sat, 22 May 2004 02:12:06 +0000</resolved>
                                                    <fixVersion>1.0-beta-6</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14460000" author="rinkrank" created="Tue, 6 Apr 2004 19:50:33 +0000"  >&lt;p&gt;It would be great to have this applied. NanoWeb needs it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;See NANO-62&lt;/p&gt;</comment>
                            <comment id="14459989" author="jstrachan" created="Wed, 7 Apr 2004 05:00:37 +0000"  >&lt;p&gt;Is there meant to be an attached patch? I can&apos;t see if to for some reason&lt;/p&gt;</comment>
                            <comment id="14460174" author="ko-hey" created="Wed, 7 Apr 2004 07:44:10 +0000"  >&lt;p&gt;I don&apos;t know why attachment disappeared. But it is&lt;/p&gt;

&lt;p&gt;Index: src/main/groovy/servlet/TemplateServlet.java&lt;br/&gt;
===================================================================&lt;br/&gt;
RCS file: /scm/cvspublic/groovy/groovy-core/src/main/groovy/servlet/TemplateServlet.java,v&lt;br/&gt;
retrieving revision 1.2&lt;br/&gt;
diff -u -r1.2 TemplateServlet.java&lt;br/&gt;
&amp;#8212; src/main/groovy/servlet/TemplateServlet.java        2 Apr 2004 11:12:03 -0000       1.2&lt;br/&gt;
+++ src/main/groovy/servlet/TemplateServlet.java        3 Apr 2004 08:21:04 -0000&lt;br/&gt;
@@ -319,10 +319,15 @@&lt;br/&gt;
             Binding binding)&lt;br/&gt;
     throws Exception {&lt;/p&gt;

&lt;p&gt;+        String path = (String) request.getAttribute(&quot;javax.servlet.include.servlet_path&quot;);&lt;br/&gt;
+        if (path == null) &lt;/p&gt;
{
+            path = request.getServletPath();
+        }&lt;br/&gt;
+        &lt;br/&gt;
         /*&lt;br/&gt;
          * Delegate to getTemplate(String).&lt;br/&gt;
          */&lt;br/&gt;
-        return getTemplate(request.getRequestURI());&lt;br/&gt;
+        return getTemplate(path);&lt;br/&gt;
         &lt;br/&gt;
     }&lt;br/&gt;
     &lt;br/&gt;
I made patch for revision 1.3. It fixes missing package declaration, NPE by servletContext.log, problem when included by other servlet (because, getServletPath() returns original path).&lt;br/&gt;
&lt;br/&gt;
Index: src/main/groovy/servlet/TemplateServlet.java&lt;br/&gt;
===================================================================&lt;br/&gt;
RCS file: /scm/cvspublic/groovy/groovy-core/src/main/groovy/servlet/TemplateServlet.java,v&lt;br/&gt;
retrieving revision 1.3&lt;br/&gt;
diff -u -u -r1.3 TemplateServlet.java&lt;br/&gt;
&amp;#8212; src/main/groovy/servlet/TemplateServlet.java        7 Apr 2004 09:31:44 -0000       1.3&lt;br/&gt;
+++ src/main/groovy/servlet/TemplateServlet.java        7 Apr 2004 11:32:32 -0000&lt;br/&gt;
@@ -36,6 +36,7 @@                                                                                   * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.&lt;br/&gt;
  *                                                                                                 */&lt;br/&gt;
+package groovy.servlet;&lt;br/&gt;
 &lt;br/&gt;
 import groovy.lang.Binding;&lt;br/&gt;
 import groovy.text.SimpleTemplateEngine;&lt;br/&gt;
@@ -116,15 +117,15 @@&lt;br/&gt;
     public void init(ServletConfig config) {&lt;br/&gt;
 &lt;br/&gt;
         /*&lt;br/&gt;
-         * BEGIN&lt;br/&gt;
+         * Save the context.&lt;br/&gt;
          */&lt;br/&gt;
-        String className = getClass().getName();&lt;br/&gt;
-        servletContext.log(&quot;Initializing on &quot; + className + &quot;...&quot;);&lt;br/&gt;
+        this.servletContext = config.getServletContext();&lt;br/&gt;
 &lt;br/&gt;
         /*&lt;br/&gt;
-         * Save the context.                                                                     +         * BEGIN&lt;br/&gt;
          */                                                                                      -        this.servletContext = config.getServletContext();&lt;br/&gt;
+        String className = getClass().getName();&lt;br/&gt;
+        servletContext.log(&quot;Initializing on &quot; + className + &quot;...&quot;);&lt;br/&gt;
 &lt;br/&gt;
         /*&lt;br/&gt;
          * Configure from servlet config.&lt;br/&gt;
@@ -381,7 +382,11 @@&lt;br/&gt;
         /*&lt;br/&gt;
          * Delegate to resolveTemplateName(String). Twice if necessary.&lt;br/&gt;
          */&lt;br/&gt;
-        URL url = resolveTemplateName(request.getServletPath());&lt;br/&gt;
+        String path = (String) request.getAttribute(&quot;javax.servlet.include.servlet_path&quot;);&lt;br/&gt;
+        if (path == null) {+            path = request.getServletPath();+        }
&lt;p&gt;+        URL url = resolveTemplateName(path);&lt;br/&gt;
         if (url == null) &lt;/p&gt;
{
             url = resolveTemplateName(request.getRequestURI());
         }</comment>
                            <comment id="14459987" author="ko-hey" created="Wed, 7 Apr 2004 22:49:57 +0000"  >&lt;p&gt;attach patch in my previous comment as TemplateServlet.java.patch-1.3&lt;/p&gt;</comment>
                            <comment id="14460308" author="spullara" created="Sat, 22 May 2004 02:12:06 +0000"  >&lt;p&gt;This is fixed but this servlet implementation is very poorly performing.  We need to rewrite using stuff from the GroovyScriptEngine for reloading.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12720893" name="TemplateServlet.java.patch" size="880" author="ko-hey" created="Sat, 3 Apr 2004 03:46:47 +0000"/>
                            <attachment id="12720896" name="TemplateServlet.java.patch-1.3" size="1771" author="ko-hey" created="Wed, 7 Apr 2004 22:49:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            21 years, 28 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ck7j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>