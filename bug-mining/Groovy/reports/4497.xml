<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:19:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-10711] CompileStatic doesn&apos;t call asBoolean</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-10711</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;This appears to be a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7807&quot; title=&quot;CompileStatic doesn&amp;#39;t call asBoolean&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7807&quot;&gt;&lt;del&gt;GROOVY-7807&lt;/del&gt;&lt;/a&gt;, but the test cases presented don&apos;t quite cover the behavior I see. I have a custom record class&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Immutable
@CompileStatic
@POJO
&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Result {
  &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; channel
  &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; thread

  &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; asBoolean() {
    println &lt;span class=&quot;code-quote&quot;&gt;&apos;in asBoolean&apos;&lt;/span&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; debugging
&lt;/span&gt;  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When I call this from another class that is also statically compiled, the &lt;tt&gt;asBoolean&lt;/tt&gt; method is not called.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!result) { &lt;span class=&quot;code-comment&quot;&gt;// console prints diagnostic
&lt;/span&gt;  &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; NoChannelException() &lt;span class=&quot;code-comment&quot;&gt;// block is not entered
&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        12: invokeinterface #136,  3          &lt;span class=&quot;code-comment&quot;&gt;// load the Result
&lt;/span&gt;        17: astore_2
        18: aload_2
        19: pop
        20: aload_2
        21: dup
        22: ifnonnull     30
        25: pop
        26: iconst_0
        27: &lt;span class=&quot;code-keyword&quot;&gt;goto&lt;/span&gt;          32
        30: pop
        31: iconst_1
        32: ifne          39
        35: iconst_1
        36: &lt;span class=&quot;code-keyword&quot;&gt;goto&lt;/span&gt;          40
        39: iconst_0
        40: ifeq          58
        43: &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;           #138                &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;NoChannelException&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Both classes are in the same compilation unit, which may be relevant to the behavior, as &lt;tt&gt;@CompileStatic&lt;/tt&gt; seems to correctly pull in {{asBoolean}}s from library code and extension method. However, in this case it&apos;s quite clearly disregarding the custom method and relying solely on a null check.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13474257">GROOVY-10711</key>
            <summary>CompileStatic doesn&apos;t call asBoolean</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="chrylis">Christopher Smith</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Jul 2022 18:23:37 +0000</created>
                <updated>Fri, 10 Feb 2023 21:40:02 +0000</updated>
                            <resolved>Fri, 29 Jul 2022 19:49:14 +0000</resolved>
                                    <version>2.5.18</version>
                    <version>3.0.12</version>
                    <version>4.0.4</version>
                                    <fixVersion>4.0.5</fixVersion>
                    <fixVersion>2.5.19</fixVersion>
                    <fixVersion>3.0.13</fixVersion>
                                    <component>Static compilation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17573121" author="emilles" created="Fri, 29 Jul 2022 18:47:33 +0000"  >&lt;p&gt;Is &lt;tt&gt;Result&lt;/tt&gt; an inner class?  The &lt;tt&gt;static&lt;/tt&gt; modifier makes no sense otherwise.&lt;/p&gt;</comment>
                            <comment id="17573124" author="chrylis" created="Fri, 29 Jul 2022 18:56:00 +0000"  >&lt;p&gt;It&apos;s a nested class on an interface (so implicitly static). I confirmed&lt;br/&gt;
that the asBoolean is generated and is invoked normally from dynamic code.&lt;/p&gt;

</comment>
                            <comment id="17573127" author="emilles" created="Fri, 29 Jul 2022 19:02:07 +0000"  >&lt;p&gt;The final type Result made it through this check, which does not look for &quot;asBoolean()&quot; on the type itself:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; replaceAsBooleanWithCompareToNull(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ClassNode type, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt; dgmProvider) {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (Modifier.isFinal(type.getModifiers()) || isEffectivelyFinal(type)) {
                List&amp;lt;MethodNode&amp;gt; asBoolean = findDGMMethodsByNameAndArguments(dgmProvider, type, &lt;span class=&quot;code-quote&quot;&gt;&quot;asBoolean&quot;&lt;/span&gt;, ClassNode.EMPTY_ARRAY);
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (asBoolean.size() == 1) {
                    MethodNode theAsBoolean = asBoolean.get(0);
                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (theAsBoolean &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; ExtensionMethodNode) {
                        ClassNode selfType = (((ExtensionMethodNode) theAsBoolean).getExtensionMethodNode()).getParameters()[0].getType();
                        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ClassHelper.isObjectType(selfType)) {
                            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
                        }
                    }
                }
            }
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17573151" author="emilles" created="Fri, 29 Jul 2022 19:49:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/commit/cebc9188cc5734b161e7fc346c0ac67b87126d0d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/cebc9188cc5734b161e7fc346c0ac67b87126d0d&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 15 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z17bkg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>