<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:14:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-8678] Groovy Script execution fails when comparing decimal values against decimal constant without leading 0</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-8678</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I am reporting the following bug as I am not able to ascertain from the web if what I am facing is a consequence of desired intent.&lt;/p&gt;

&lt;p&gt;Using groovy shell to execute the following groovy script snippet fails at compilation phase when executing the script through java. I am using Jre1.7&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception, IllegalAccessException {
    &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; evaluate = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GroovyShell().evaluate(&lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;abcd\&lt;span class=&quot;code-quote&quot;&gt;&quot;.length() == .34&quot;&lt;/span&gt;);
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;result: &quot;&lt;/span&gt; + evaluate); 
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;In the above snippet, If I replace &lt;b&gt;.34&lt;/b&gt;&#160;with &lt;b&gt;0.34&lt;/b&gt;&#160;then the script execution works as expected.&lt;/p&gt;

&lt;p&gt;Exception reported is as follows&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:
Script1.groovy: 1: unexpected token: . @ line 1, column 20.
&lt;span class=&quot;code-quote&quot;&gt;&quot;abcd&quot;&lt;/span&gt;.length() == .34
^

1 error

at org.codehaus.groovy.control.ErrorCollector.failIfErrors(ErrorCollector.java:311)
at org.codehaus.groovy.control.ErrorCollector.addFatalError(ErrorCollector.java:151)
at org.codehaus.groovy.control.ErrorCollector.addError(ErrorCollector.java:121)
at org.codehaus.groovy.control.ErrorCollector.addError(ErrorCollector.java:133)
at org.codehaus.groovy.control.SourceUnit.addError(SourceUnit.java:332)
at org.codehaus.groovy.antlr.AntlrParserPlugin.transformCSTIntoAST(AntlrParserPlugin.java:226)
at org.codehaus.groovy.antlr.AntlrParserPlugin.parseCST(AntlrParserPlugin.java:192)
at org.codehaus.groovy.control.SourceUnit.parse(SourceUnit.java:230)
at org.codehaus.groovy.control.CompilationUnit$1.call(CompilationUnit.java:186)
at org.codehaus.groovy.control.CompilationUnit.applyToSourceUnits(CompilationUnit.java:968)
at org.codehaus.groovy.control.CompilationUnit.doPhaseOperation(CompilationUnit.java:633)
at org.codehaus.groovy.control.CompilationUnit.processPhaseOperations(CompilationUnit.java:609)
at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:586)
at groovy.lang.GroovyClassLoader.doParseClass(GroovyClassLoader.java:352)
at groovy.lang.GroovyClassLoader.access$300(GroovyClassLoader.java:85)
at groovy.lang.GroovyClassLoader$5.provide(GroovyClassLoader.java:321)
at groovy.lang.GroovyClassLoader$5.provide(GroovyClassLoader.java:318)
at org.codehaus.groovy.runtime.memoize.ConcurrentCommonCache.getAndPut(ConcurrentCommonCache.java:147)
at groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:316)
at groovy.lang.GroovyShell.parseClass(GroovyShell.java:548)
at groovy.lang.GroovyShell.parse(GroovyShell.java:560)
at groovy.lang.GroovyShell.evaluate(GroovyShell.java:444)
at groovy.lang.GroovyShell.evaluate(GroovyShell.java:483)
at groovy.lang.GroovyShell.evaluate(GroovyShell.java:454)
at groovytest.Testtest.main(Testtest.java:19)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13169710">GROOVY-8678</key>
            <summary>Groovy Script execution fails when comparing decimal values against decimal constant without leading 0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="dyutimoysarkar">Dyutimoy Sarkar</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Jul 2018 07:06:13 +0000</created>
                <updated>Mon, 4 Jul 2022 02:30:02 +0000</updated>
                            <resolved>Fri, 11 Jun 2021 13:03:10 +0000</resolved>
                                    <version>2.4.x</version>
                    <version>2.5.0</version>
                    <version>3.0.0-rc-3</version>
                                    <fixVersion>4.0.0-beta-1</fixVersion>
                    <fixVersion>3.0.9</fixVersion>
                                    <component>groovy-runtime</component>
                    <component>Groovysh</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="7200">2h</timespent>
                                <comments>
                            <comment id="16531230" author="paulk" created="Tue, 3 Jul 2018 11:38:11 +0000"  >&lt;p&gt;I have a vague recollection that this has been discussed before but a quick search didn&apos;t reveal the discussion. I can&apos;t remember if it was a limitation of the parser at the time or a deliberate intent to match some numeric standard. If the former, the new grammar in Groovy 3 might be a great time to look at a change.&lt;/p&gt;

&lt;p&gt;It might pay to ask on the mailing list since not everyone reads the Jira activity.&lt;/p&gt;</comment>
                            <comment id="16532188" author="dyutimoysarkar" created="Wed, 4 Jul 2018 03:05:09 +0000"  >&lt;p&gt;Thank you Paul for seeing the bug. As suggested I reached out to &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;mailto:dev@groovy.apache.org&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dev@groovy.apache.org&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/mail_small.gif&quot; height=&quot;12&quot; width=&quot;13&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&#160;with the bug I have raised.&lt;/p&gt;</comment>
                            <comment id="16802184" author="blackdrag" created="Tue, 26 Mar 2019 21:10:40 +0000"  >&lt;p&gt;Seeing this only now for some reason the decision was to not support decimals without leading 0 as a number because of readability. This was a decision taken back in pre Groovy JSR times..&lt;/p&gt;</comment>
                            <comment id="16805664" author="dyutimoysarkar" created="Sat, 30 Mar 2019 06:30:00 +0000"  >&lt;p&gt;So will there be fix available in 2.5.x and 3.x or is it going to&lt;br/&gt;
considered as not an issue?&lt;/p&gt;


&lt;p&gt;Regards&lt;br/&gt;
Dyutimoy&lt;/p&gt;

&lt;p&gt;On Tue, Mar 26, 2019 at 2:11 PM Jochen Theodorou (JIRA) &amp;lt;jira@apache.org&amp;gt;&lt;/p&gt;



&lt;p&gt;&amp;#8211; &lt;br/&gt;
Regards&lt;br/&gt;
Dyutimoy  Sarkar&lt;/p&gt;</comment>
                            <comment id="16805697" author="paulk" created="Sat, 30 Mar 2019 07:22:55 +0000"  >&lt;p&gt;We are unlikely to have a 2.5.x fix since as well as readability, I think it was hard to do for the old parser. I would leave it open for 3.x but we need to dive a bit deeper before we can say for sure whether it is even possible given Groovy&apos;s other grammar rules etc.&lt;/p&gt;</comment>
                            <comment id="17024207" author="paulk" created="Mon, 27 Jan 2020 10:02:52 +0000"  >&lt;p&gt;For the Parrot parser, the error message is:&lt;br/&gt;
&lt;tt&gt;Unexpected input: &apos;.&apos; at line: 1, column: 20&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="17361745" author="paulk" created="Fri, 11 Jun 2021 13:03:10 +0000"  >&lt;p&gt;Proposed PR merged. Thanks!&lt;/p&gt;</comment>
                            <comment id="17361758" author="paulk" created="Fri, 11 Jun 2021 13:25:08 +0000"  >&lt;p&gt;I updated the Groovy 4 release notes:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/groovy-website/blob/asf-site/site/src/site/releasenotes/groovy-4.0.adoc#support-for-decimal-fraction-literals-without-a-leading-zero&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy-website/blob/asf-site/site/src/site/releasenotes/groovy-4.0.adoc#support-for-decimal-fraction-literals-without-a-leading-zero&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17561967" author="paulk" created="Mon, 4 Jul 2022 02:29:46 +0000"  >&lt;p&gt;This was also merged into 3.0.9:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/groovy/commit/9ce8e3936&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/9ce8e3936&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 19 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3vhb3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>