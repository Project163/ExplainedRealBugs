<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:18:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-10561] @NamedVariant self referential default values are not correctly resolved</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-10561</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;If a default parameter refers to another parameter ( &lt;tt&gt;String language = &apos;java&apos;, String extension = language&lt;/tt&gt; ) it will fail, when the named variant is used.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.NamedVariant
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; spock.lang.Specification

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Demo {
    @NamedVariant
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; fileInSourceSet(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; language = &lt;span class=&quot;code-quote&quot;&gt;&apos;java&apos;&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; extension = language) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;$language -&amp;gt; .$extension&quot;&lt;/span&gt;
    }
    
    &lt;span class=&quot;code-keyword&quot;&gt;def&lt;/span&gt; test() {
		&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; fileInSourceSet() == &lt;span class=&quot;code-quote&quot;&gt;&apos;java -&amp;gt; .java&apos;&lt;/span&gt;
		&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; fileInSourceSet(&lt;span class=&quot;code-quote&quot;&gt;&apos;groovy&apos;&lt;/span&gt;) == &lt;span class=&quot;code-quote&quot;&gt;&apos;groovy -&amp;gt; .groovy&apos;&lt;/span&gt;
		&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; fileInSourceSet(language: &lt;span class=&quot;code-quote&quot;&gt;&apos;kotlin&apos;&lt;/span&gt;, extension: &lt;span class=&quot;code-quote&quot;&gt;&apos;kt&apos;&lt;/span&gt;) == &lt;span class=&quot;code-quote&quot;&gt;&apos;kotlin -&amp;gt; .kt&apos;&lt;/span&gt;
        &lt;span class=&quot;code-comment&quot;&gt;// fails
&lt;/span&gt;		&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; fileInSourceSet(language: &lt;span class=&quot;code-quote&quot;&gt;&apos;groovy&apos;&lt;/span&gt;) == &lt;span class=&quot;code-quote&quot;&gt;&apos;groovy -&amp;gt; .groovy&apos;&lt;/span&gt;
    }
    
    static main(args) {
            &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Demo().test() 
    }    
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;See on &lt;a href=&quot;https://gwc-experiment.appspot.com/?g=groovy_3_0&amp;amp;codez=eJyNUU1rwzAMPTe_QpRCEujS-6Bjh1126SWwu0iV4C2Wh610G6P_ff5KWAtl00HgJ72nJ1npd2MFBmvM6asRi-x6Y3VzQE3HF7QKWYqiG9E5eCJt4LsAH48X9YC0YhUP0KuRnrk1k-2oJakyPCIPEw4Eeyhf8YTldibQpxA7ZdiX5q46TwlhSSbLsN4sEncP0GwW2jp2nmOO6Ug9CDmpgspq5Y2TX_DaVw37bCXqRU-3u8t0nzKx0iPyMn6bObu-h_LNyKjYb754D6Bk0VSNoh5b1t_toEc1un9N-Mvl1aWcoKgONCqu0A7u99lDMH3EP6_qJh80KUSBc1FcNP8AgUKxrg&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;WebConsole&lt;/a&gt; (as long as deployed version is 3.0.10)&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;groovy.lang.MissingPropertyException: No such property: language for class: Demo
	at Demo.fileInSourceSet(Script1.groovy)
	at Demo$fileInSourceSet$2.callCurrent(Unknown Source)
	at Demo.test(Script1.groovy:14)
	at Demo$test.call(Unknown Source)
	at Demo.main(Script1.groovy:18)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It generates&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@groovy.transform.Generated
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; fileInSourceSet(@groovy.transform.NamedParams(value = [@groovy.transform.NamedParam(value = &lt;span class=&quot;code-quote&quot;&gt;&apos;language&apos;&lt;/span&gt;, type = java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, required = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;), @groovy.transform.NamedParam(value = &lt;span class=&quot;code-quote&quot;&gt;&apos;extension&apos;&lt;/span&gt;, type = java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, required = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)]) java.util.Map namedArgs) {
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ( namedArgs == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
&#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; java.lang.IllegalArgumentException(&lt;span class=&quot;code-quote&quot;&gt;&apos;Named parameter map cannot be &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&apos;&lt;/span&gt;)
&#160; &#160; &#160; &#160; }
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; namedArgKey : namedArgs.keySet()) {
&#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; [&lt;span class=&quot;code-quote&quot;&gt;&apos;language&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;extension&apos;&lt;/span&gt;].contains( namedArgKey ) : &lt;span class=&quot;code-quote&quot;&gt;&apos;Unrecognized namedArgKey: &apos;&lt;/span&gt; + namedArgKey }
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.fileInSourceSet(namedArgs.containsKey(&lt;span class=&quot;code-quote&quot;&gt;&apos;language&apos;&lt;/span&gt;) ? namedArgs.language : &lt;span class=&quot;code-quote&quot;&gt;&apos;java&apos;&lt;/span&gt;, namedArgs.containsKey(&lt;span class=&quot;code-quote&quot;&gt;&apos;extension&apos;&lt;/span&gt;) ? namedArgs.extension : language )
&#160; &#160; }&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The problematic line is &lt;tt&gt;namedArgs.containsKey(&apos;extension&apos;) ? namedArgs.extension : language which either would have to duplicate the logic for {{language&lt;/tt&gt;}} or use a local variable for it.&lt;/p&gt;

&lt;p&gt;Relates to &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-10261&quot; title=&quot;@NamedVariant: Default parameters on ctor/method are ignored when passing some named parameters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-10261&quot;&gt;&lt;del&gt;GROOVY-10261&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13436646">GROOVY-10561</key>
            <summary>@NamedVariant self referential default values are not correctly resolved</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="leonard84">Leonard Br&#252;nings</reporter>
                        <labels>
                            <label>named-parameters</label>
                    </labels>
                <created>Wed, 30 Mar 2022 12:26:47 +0000</created>
                <updated>Mon, 26 Feb 2024 18:37:50 +0000</updated>
                            <resolved>Fri, 15 Apr 2022 14:10:16 +0000</resolved>
                                    <version>2.5.16</version>
                    <version>3.0.10</version>
                    <version>4.0.1</version>
                                    <fixVersion>4.0.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3600">1h</timespent>
                                <comments>
                            <comment id="17514686" author="paulk" created="Wed, 30 Mar 2022 13:02:58 +0000"  >&lt;p&gt;The current implementation for the named variant method is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
fileInSourceSet(namedArgs.containsKey(&lt;span class=&quot;code-quote&quot;&gt;&apos;language&apos;&lt;/span&gt;) ? namedArgs.language : &lt;span class=&quot;code-quote&quot;&gt;&apos;java&apos;&lt;/span&gt;, namedArgs.containsKey(&lt;span class=&quot;code-quote&quot;&gt;&apos;extension&apos;&lt;/span&gt;) ? namedArgs.extension : language)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This currently isn&apos;t accounting for references to other parameters. I wonder whether just earlier parameters is sufficient?&lt;/p&gt;</comment>
                            <comment id="17515230" author="leonard84" created="Thu, 31 Mar 2022 10:39:35 +0000"  >&lt;blockquote&gt;&lt;p&gt;I wonder whether just earlier parameters is sufficient?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;What do you mean, referring to later parameters doesn&apos;t make sense imho.&lt;/p&gt;

&lt;p&gt;My naive solution would be to introduce local variables for each parameter.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;def&lt;/span&gt; language = namedArgs.containsKey(&lt;span class=&quot;code-quote&quot;&gt;&apos;language&apos;&lt;/span&gt;) ? namedArgs.language : &lt;span class=&quot;code-quote&quot;&gt;&apos;java&apos;&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;def&lt;/span&gt; extension = namedArgs.containsKey(&lt;span class=&quot;code-quote&quot;&gt;&apos;extension&apos;&lt;/span&gt;) ? namedArgs.extension : language
fileInSourceSet(language, extension)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This would solve the references and would not require additional logic, at the cost of local variables.&lt;/p&gt;</comment>
                            <comment id="17515239" author="paulk" created="Thu, 31 Mar 2022 11:03:08 +0000"  >&lt;p&gt;The naive solution would be fine for methods but not constructors.&lt;/p&gt;</comment>
                            <comment id="17515932" author="leonard84" created="Fri, 1 Apr 2022 13:51:28 +0000"  >&lt;p&gt;Good point. However, if we inline it, then it could get quite nasty really quick.&lt;/p&gt;

&lt;p&gt;For example, if we have multiple references:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &#160; @NamedVariant
&#160; &#160; def foo(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; v1 = &lt;span class=&quot;code-quote&quot;&gt;&apos;java&apos;&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; v2 = v1, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; v3 = v2, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; v4 = v3, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; v5 = v4) {&#160; &#160; } &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;currently is&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.foo(namedArgs.containsKey(&lt;span class=&quot;code-quote&quot;&gt;&apos;v1&apos;&lt;/span&gt;) ? namedArgs.v1 : &lt;span class=&quot;code-quote&quot;&gt;&apos;java&apos;&lt;/span&gt;, namedArgs.containsKey(&lt;span class=&quot;code-quote&quot;&gt;&apos;v2&apos;&lt;/span&gt;) ? namedArgs.v2 : v1 , namedArgs.containsKey(&lt;span class=&quot;code-quote&quot;&gt;&apos;v3&apos;&lt;/span&gt;) ? namedArgs.v3 : v2 , namedArgs.containsKey(&lt;span class=&quot;code-quote&quot;&gt;&apos;v4&apos;&lt;/span&gt;) ? namedArgs.v4 : v3 , namedArgs.containsKey(&lt;span class=&quot;code-quote&quot;&gt;&apos;v5&apos;&lt;/span&gt;) ? namedArgs.v5 : v4 )&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and the naive solution would be equally simple, but inlining the previous definition, will explode in complexity, or am I missing something?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17516200" author="paulk" created="Sat, 2 Apr 2022 02:56:36 +0000"  >&lt;p&gt;I think we need the &quot;exploding complexity&quot; solution for constructors. We could certainly use the simpler version for methods at the cost of two bits of code to maintain rather than one.&lt;/p&gt;</comment>
                            <comment id="17516383" author="emilles" created="Sat, 2 Apr 2022 20:06:09 +0000"  >&lt;p&gt;I don&apos;t think normal constructor default arguments support back references for the same reason.  &lt;a href=&quot;https://github.com/apache/groovy/blob/master/src/main/java/org/codehaus/groovy/classgen/Verifier.java#L1017&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/blob/master/src/main/java/org/codehaus/groovy/classgen/Verifier.java#L1017&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17516501" author="paulk" created="Sun, 3 Apr 2022 12:06:32 +0000"  >&lt;p&gt;The current PR makes &lt;tt&gt;@NamedVariant&lt;/tt&gt; consistent with how methods are handled:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.*

def foo(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; v1 = 42, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; v2 = v1+1, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; v3 = v2+1) { &lt;span class=&quot;code-quote&quot;&gt;&quot;$v1 $v2 $v3&quot;&lt;/span&gt; }
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; foo() == &lt;span class=&quot;code-quote&quot;&gt;&apos;42 43 44&apos;&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; foo(10) == &lt;span class=&quot;code-quote&quot;&gt;&apos;10 11 12&apos;&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; foo(10, 20) == &lt;span class=&quot;code-quote&quot;&gt;&apos;10 20 21&apos;&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; foo(10, 20, 30) == &lt;span class=&quot;code-quote&quot;&gt;&apos;10 20 30&apos;&lt;/span&gt;

@CompileStatic
def bar(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; v1 = 42, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; v2 = v1+1, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; v3 = v2+1) { &lt;span class=&quot;code-quote&quot;&gt;&quot;$v1 $v2 $v3&quot;&lt;/span&gt; }
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; bar() == &lt;span class=&quot;code-quote&quot;&gt;&apos;42 43 44&apos;&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; bar(10) == &lt;span class=&quot;code-quote&quot;&gt;&apos;10 11 12&apos;&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; bar(10, 20) == &lt;span class=&quot;code-quote&quot;&gt;&apos;10 20 21&apos;&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; bar(10, 20, 30) == &lt;span class=&quot;code-quote&quot;&gt;&apos;10 20 30&apos;&lt;/span&gt;

@NamedVariant
def baz(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; v1 = 42, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; v2 = v1+1, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; v3 = v2+1) { &lt;span class=&quot;code-quote&quot;&gt;&quot;$v1 $v2 $v3&quot;&lt;/span&gt; }
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; baz() == &lt;span class=&quot;code-quote&quot;&gt;&apos;42 43 44&apos;&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; baz(10) == &lt;span class=&quot;code-quote&quot;&gt;&apos;10 11 12&apos;&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; baz(10, 20) == &lt;span class=&quot;code-quote&quot;&gt;&apos;10 20 21&apos;&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; baz(10, 20, 30) == &lt;span class=&quot;code-quote&quot;&gt;&apos;10 20 30&apos;&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; baz(v1: 10) == &lt;span class=&quot;code-quote&quot;&gt;&apos;10 11 12&apos;&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; baz(v1: 10, v2: 20) == &lt;span class=&quot;code-quote&quot;&gt;&apos;10 20 21&apos;&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; baz(v1: 10, v2: 20, v3: 30) == &lt;span class=&quot;code-quote&quot;&gt;&apos;10 20 30&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The constructor case is more interesting. It may pay to re-assess our restrictions in that case. We initially had some restrictions related to the fact that the no-arg constructor was called followed by setter calls. But there are numerous variants we support:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; groovy.transform.*

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Foo {
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; v1 = v2, v2 = 2
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; toString() { &lt;span class=&quot;code-quote&quot;&gt;&quot;$v1 $v2&quot;&lt;/span&gt; }
}
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Foo(v1: 1).toString() == &lt;span class=&quot;code-quote&quot;&gt;&apos;1 2&apos;&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Foo(v2: 1).toString() == &lt;span class=&quot;code-quote&quot;&gt;&apos;0 1&apos;&lt;/span&gt;

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Bar {
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; v1 = 2, v2 = v1
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; toString() { &lt;span class=&quot;code-quote&quot;&gt;&quot;$v1 $v2&quot;&lt;/span&gt; }
}
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Bar(v1: 1).toString() == &lt;span class=&quot;code-quote&quot;&gt;&apos;1 2&apos;&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Bar(v2: 1).toString() == &lt;span class=&quot;code-quote&quot;&gt;&apos;2 1&apos;&lt;/span&gt;

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Baz {
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; v1, v2
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; toString() { &lt;span class=&quot;code-quote&quot;&gt;&quot;$v1 $v2&quot;&lt;/span&gt; }

    Baz(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; v1 = 5, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; v2 = v1) {
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.v1 = v1
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.v2 = v2
    }
}

&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Baz().toString() == &lt;span class=&quot;code-quote&quot;&gt;&apos;5 5&apos;&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Baz(1).toString() == &lt;span class=&quot;code-quote&quot;&gt;&apos;1 1&apos;&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Baz(1, 3).toString() == &lt;span class=&quot;code-quote&quot;&gt;&apos;1 3&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We also have different restrictions in play when &lt;tt&gt;@CompileStatic&lt;/tt&gt; is used.&lt;/p&gt;

&lt;p&gt;Certainly if we prohibited the ability to support using other parameters for constructor initializers, then we could use the simplified variant with local variables for methods.&lt;/p&gt;</comment>
                            <comment id="17522847" author="emilles" created="Fri, 15 Apr 2022 14:10:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/commit/e2fd9e6be3445714a45fac359492493307a82ada&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/e2fd9e6be3445714a45fac359492493307a82ada&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17539386" author="leonard84" created="Thu, 19 May 2022 08:09:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulk&quot; class=&quot;user-hover&quot; rel=&quot;paulk&quot;&gt;paulk&lt;/a&gt;,&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=emilles&quot; class=&quot;user-hover&quot; rel=&quot;emilles&quot;&gt;emilles&lt;/a&gt; will this also be fixed in 2.x. and 3.x?&lt;/p&gt;</comment>
                            <comment id="17820142" author="leonard84" created="Fri, 23 Feb 2024 17:17:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulk&quot; class=&quot;user-hover&quot; rel=&quot;paulk&quot;&gt;paulk&lt;/a&gt;, I just ran into this again with &lt;tt&gt;4.0.17,&lt;/tt&gt; and your &lt;a href=&quot;https://gwc-experiment.appspot.com/?g=groovy_4_0&amp;amp;codez=eNqtkFFrwyAUhd_9FYcSyLqGkqs-BQKDve9lsHe3JkNoYjEizLH_PtMUmo7EvVQEOZyPe_nU3clYh09rjP_aO6v6oTW22z8ydmhatMY86N7BE2pIXuAceAyednSJYox8R1t8Y5NFNItE5sUGP0wNQxPnj3O2qGvkkkMKSJnPKyqnkkoQgfifsgC_AjxeWgAKiBtIlDljT8-mO-lj8-qU0x9npXdl76I0zllRGqtVpalMKF2BZaUX1TWHN2W16t3FKNzJKKwbhZRR-M8oJIxmkKcKyTUTUESTKr3uFoyvqJY-k2F2fgElMcNF&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;example fails&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;groovy.lang.MissingPropertyException: No such property: v1 for class: Script1
	at Script1.baz(Script1.groovy:17)
	at Script1.run(Script1.groovy:22)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The fix by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=emilles&quot; class=&quot;user-hover&quot; rel=&quot;emilles&quot;&gt;emilles&lt;/a&gt; apparently does not cover default values that perform any actions, e.g. &lt;tt&gt;int v2 = v1 + 1&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17820189" author="emilles" created="Fri, 23 Feb 2024 19:47:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leonard84&quot; class=&quot;user-hover&quot; rel=&quot;leonard84&quot;&gt;leonard84&lt;/a&gt; Can you open a new bug that links to this one with the new test case?&lt;/p&gt;</comment>
                            <comment id="17820809" author="leonard84" created="Mon, 26 Feb 2024 18:37:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=emilles&quot; class=&quot;user-hover&quot; rel=&quot;emilles&quot;&gt;emilles&lt;/a&gt; done &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-11325&quot; title=&quot;@NamedVariant self referential default values are not correctly resolved when calculations are involved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-11325&quot;&gt;&lt;del&gt;GROOVY-11325&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13569880">GROOVY-11325</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13515946">GROOVY-10889</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 37 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z10ywg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>