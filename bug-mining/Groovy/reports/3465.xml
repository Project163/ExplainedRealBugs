<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:59:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-8084] Captured types doesn&apos;t work in @CompileStatic</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-8084</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;This code could be successfully compiled and executed. &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; def method(List&amp;lt;? &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Serializable&amp;gt; captured) {
    captured.add(&lt;span class=&quot;code-quote&quot;&gt;&apos;some string&apos;&lt;/span&gt;)
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; captured
}

println method(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;())
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Looks like type check in groovy doesn&apos;t work with captured types. Is it a bug?&lt;/p&gt;

&lt;p&gt;Is there any documentation about generics in groovy? &lt;/p&gt;

&lt;p&gt;P.S.:&lt;br/&gt;
Another kind of strange behaviour:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; def method() {
    List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; list = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&amp;gt;()
    List&amp;lt;? &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Serializable&amp;gt; captured = list
    captured.add(&lt;span class=&quot;code-quote&quot;&gt;&apos;some string&apos;&lt;/span&gt;) &lt;span class=&quot;code-comment&quot;&gt;//Error:(7, 5) Groovyc: [Static type checking] - Cannot call java.util.ArrayList &amp;lt;java.lang.&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;#add(java.lang.&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;) with arguments [java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;]
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; captured
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Somehow type checking infered type of &apos;captured&apos; variable to  java.util.ArrayList &amp;lt;java.lang.Integer&amp;gt; &lt;/p&gt;</description>
                <environment></environment>
        <key id="13041337">GROOVY-8084</key>
            <summary>Captured types doesn&apos;t work in @CompileStatic</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daniel_sun">Daniel Sun</assignee>
                                    <reporter username="Alexey Afanasiev">Alexey Afanasiev</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Feb 2017 10:06:59 +0000</created>
                <updated>Wed, 13 Nov 2024 13:35:56 +0000</updated>
                            <resolved>Fri, 24 Aug 2018 19:57:03 +0000</resolved>
                                    <version>2.4.8</version>
                                    <fixVersion>3.0.0-alpha-4</fixVersion>
                    <fixVersion>2.5.3</fixVersion>
                                    <component>Static compilation</component>
                    <component>Static Type Checker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16592115" author="daniel_sun" created="Fri, 24 Aug 2018 19:57:03 +0000"  >&lt;p&gt;It is fixed now.&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/groovy/commit/45b62af010453f1e2147c8bbbc519b1856d07fe6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/45b62af010453f1e2147c8bbbc519b1856d07fe6&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;As a side note, adding an element to a producer is not allowed in Java, so we should refine STC further&lt;/p&gt;</comment>
                            <comment id="16593379" author="alexey afanasiev" created="Mon, 27 Aug 2018 09:24:04 +0000"  >&lt;p&gt;Glad to see that work on type inference and generics is continuing!&lt;/p&gt;</comment>
                            <comment id="16593554" author="daniel_sun" created="Mon, 27 Aug 2018 11:53:20 +0000"  >&lt;p&gt;We have fixed quite a few STC issues on 2.5 branch, but the fixes are not merged into 2.4 branch(hard to complete), so upgrading to 2.5 is strongly recommened &#128522;&lt;/p&gt;</comment>
                            <comment id="16593614" author="paulk" created="Mon, 27 Aug 2018 12:59:13 +0000"  >&lt;p&gt;And still quite a few more to tackle - we&apos;ll just keep making progress.&lt;/p&gt;</comment>
                            <comment id="17897281" author="githubbot" created="Mon, 11 Nov 2024 21:57:48 +0000"  >&lt;p&gt;eric-milles opened a new pull request, #2121:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/2121&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/2121&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   When comparing method call arguments to parameters, wildcard generics are considered captured.  Thus, they are not compatible with other types.  &lt;a href=&quot;https://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   *&lt;b&gt;TODO:&lt;/b&gt;* The test case for &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-10006&quot; title=&quot;@CompileStatic fails to unify types&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-10006&quot;&gt;&lt;del&gt;GROOVY-10006&lt;/del&gt;&lt;/a&gt; / &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-10339&quot; title=&quot;STC instantiates parameterized function with a wrong type leading to unsoundness&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-10339&quot;&gt;&lt;del&gt;GROOVY-10339&lt;/del&gt;&lt;/a&gt; produces a wildcard for `LowestUpperBoundClassNode` and so it fails&lt;br/&gt;
   ```groovy&lt;br/&gt;
     def &amp;lt;T&amp;gt; void test(T x, T y, T z) { }&lt;br/&gt;
     test(1,&quot;II&quot;,Class) // Cannot call &amp;lt;T&amp;gt; test(T, T, T) with arguments &lt;span class=&quot;error&quot;&gt;&amp;#91;int, String, Class&amp;#93;&lt;/span&gt;&lt;br/&gt;
   ```&lt;/p&gt;

</comment>
                            <comment id="17897919" author="githubbot" created="Wed, 13 Nov 2024 13:35:56 +0000"  >&lt;p&gt;eric-milles merged PR #2121:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/groovy/pull/2121&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/2121&lt;/a&gt;&lt;/p&gt;

</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13227263">GROOVY-9074</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>groovy</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            51 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39s8v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>