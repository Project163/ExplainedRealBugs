<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:13:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-3761] Nested tags in nested javac tag of a groovc tag in Ant file is ignored </title>
                <link>https://issues.apache.org/jira/browse/GROOVY-3761</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Using the task:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;groovyc srcdir=&lt;span class=&quot;code-quote&quot;&gt;&quot;.&quot;&lt;/span&gt; destdir=&lt;span class=&quot;code-quote&quot;&gt;&quot;.&quot;&lt;/span&gt;&amp;gt;
  &amp;lt;javac source=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.6&quot;&lt;/span&gt; target=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.6&quot;&lt;/span&gt; debug=&lt;span class=&quot;code-quote&quot;&gt;&quot;on&quot;&lt;/span&gt;&amp;gt;
    &amp;lt;compilerarg value=&lt;span class=&quot;code-quote&quot;&gt;&quot;-Xlint&quot;&lt;/span&gt;/&amp;gt;
  &amp;lt;/javac&amp;gt;
&amp;lt;/groovyc&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;works, but the -Xlint option is not passed to the javac call of the joint compilation.  Using this where the Java containes an unchecked exception that is not suppressed leads to a message such as:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;groovyc&amp;#93;&lt;/span&gt; Note: XXXXXX uses unchecked or unsafe operations.&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;groovyc&amp;#93;&lt;/span&gt; Note: Recompile with -Xlint:unchecked for details.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;just as is the case without the -Xlint option.&lt;/p&gt;</description>
                <environment>Ubuntu 9.04 Jaunty Jackalope, Groovy HEAD 2009-09-18</environment>
        <key id="12814855">GROOVY-3761</key>
            <summary>Nested tags in nested javac tag of a groovc tag in Ant file is ignored </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="roshandawrani">Roshan Dawrani</assignee>
                                    <reporter username="russel">Dr. Russel Winder</reporter>
                        <labels>
                    </labels>
                <created>Fri, 18 Sep 2009 08:07:04 +0000</created>
                <updated>Sun, 20 Sep 2009 11:09:21 +0000</updated>
                            <resolved>Sun, 20 Sep 2009 06:20:32 +0000</resolved>
                                    <version>1.6.5</version>
                    <version>1.7-beta-2</version>
                                    <fixVersion>1.6.5</fixVersion>
                    <fixVersion>1.7-beta-2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14467789" author="russel" created="Fri, 18 Sep 2009 13:16:26 +0000"  >&lt;p&gt;I guess the relevant code is the if statement starting at src/main/org/codehaus/groovy/ant/Groovyc.java:634.&lt;/p&gt;

&lt;p&gt;This processes some named attributes.  The question is do nested tags get transformed to attributes or is there a separate way to get to the attributes of the nested tags.  EIther way some code needs adding.&lt;/p&gt;

&lt;p&gt;Is it right to be using contains rather than equals for testing the various keys?&lt;/p&gt;

&lt;p&gt;Also line 651 looks suspicious.&lt;/p&gt;</comment>
                            <comment id="14467754" author="roshandawrani" created="Sat, 19 Sep 2009 05:31:28 +0000"  >&lt;p&gt;Attaching the patch for review.&lt;/p&gt;

&lt;p&gt;With the fix, here is the ant build file with groovyc-&amp;gt;javac-&amp;gt;compilerarg and its output.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;...
	&amp;lt;target name=&quot;execute&quot; description=&quot;&quot;&amp;gt;
	   &amp;lt;groovyc srcdir=&quot;.&quot; destdir=&quot;.&quot; includes=&quot;trial.java&quot; classpathref=&quot;groovy.classpath&quot;&amp;gt;
		 &amp;lt;javac source=&quot;1.5&quot; target=&quot;1.5&quot; debug=&quot;on&quot;&amp;gt;
		   &amp;lt;compilerarg value=&quot;-Xlint&quot;/&amp;gt;
		 &amp;lt;/javac&amp;gt;
	   &amp;lt;/groovyc&amp;gt;
	&amp;lt;/target&amp;gt;
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;execute:
  [groovyc] Compiling 1 source file to C:\1
  [groovyc] C:\1\trial.java:7: warning: [unchecked] unchecked conversion
  [groovyc] found   : java.util.ArrayList
  [groovyc] required: java.util.ArrayList&amp;lt;java.lang.String&amp;gt;
  [groovyc]            x = (ArrayList)z ;
  [groovyc]                ^
  [groovyc] 1 warning
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14467743" author="russel" created="Sat, 19 Sep 2009 06:27:58 +0000"  >&lt;p&gt;Doesn&apos;t the edit when option is being added to the jointOptions list only take account of -X options &amp;#8211; shouldn&apos;t all options be prefixed with -F?&lt;/p&gt;</comment>
                            <comment id="14467727" author="russel" created="Sat, 19 Sep 2009 06:30:37 +0000"  >&lt;p&gt;Also of course there needs to be a test.&lt;/p&gt;

&lt;p&gt;Should we be using TDD here &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14467709" author="roshandawrani" created="Sat, 19 Sep 2009 06:33:14 +0000"  >&lt;p&gt;I tried looking around for what kind of options can be passed in compilerarg, but didn&apos;t find any comprehensive documentation somewhere.&lt;/p&gt;

&lt;p&gt;So, any examples of options that are not covered in attributes of javac as well as don&apos;t start with -X?&lt;/p&gt;</comment>
                            <comment id="14467697" author="roshandawrani" created="Sat, 19 Sep 2009 06:37:51 +0000"  >&lt;p&gt;Can we limit the discussion to the review of the basic patch at this point?&lt;/p&gt;

&lt;p&gt;Once the fix is complete logically, I will add the test.&lt;/p&gt;</comment>
                            <comment id="14467785" author="russel" created="Sat, 19 Sep 2009 10:39:13 +0000"  >&lt;p&gt;Re options and -X, I don&apos;t have any that I can think of immediately.  Let&apos;s leave it for now.&lt;/p&gt;

&lt;p&gt;Re patch.  It is working for me both from Ant and Gant.  I would say the patch does what is needed and shouldn&apos;t cause any breaking behaviour.&lt;/p&gt;

&lt;p&gt;I think testing is too important to be treated as an &quot;after the event activity&quot;, but we have a patch now so I guess it will have to be.&lt;/p&gt;
</comment>
                            <comment id="14467708" author="roshandawrani" created="Sat, 19 Sep 2009 10:49:35 +0000"  >&lt;p&gt;Russel, I apologize that I didn&apos;t write the test earlier and follow TDD.&lt;/p&gt;

&lt;p&gt;Actually I would have but I couldn&apos;t figure out in time how to write one and I thought in the meanwhile I would get the basic fix reviewed. I didn&apos;t find, for reference, any test where output of ant is being captured and I will need to check the output of ant in this case to test that the &quot;compilerarg&quot; are actually being passed from groovyc to javac or not.&lt;/p&gt;

&lt;p&gt;Now that I see you are the biological father of org.codehaus.groovy.ant.GroovycTest (viticulturalist?), can you suggest how to go about writing a test for this case, where the only effect of the fix is a change in output of ant? When it comes to JIRAs related to ant functionality, I often run into this difficulty of writing tests.&lt;/p&gt;</comment>
                            <comment id="14467805" author="roshandawrani" created="Sun, 20 Sep 2009 06:20:32 +0000"  >&lt;p&gt;Fixed.&lt;/p&gt;</comment>
                            <comment id="14467710" author="russel" created="Sun, 20 Sep 2009 11:09:21 +0000"  >&lt;p&gt;Works for me on 1.7-beta-2-SNAPSHOT&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12722353" name="v17x_Patch.txt" size="3329" author="roshandawrani" created="Sat, 19 Sep 2009 05:31:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 10 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2cq2n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>