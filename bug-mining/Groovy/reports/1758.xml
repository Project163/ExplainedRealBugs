<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:25:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-4803] out of memory error when running groovydoc when there are java files in packages</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-4803</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;reference: i found this bug running the ant task groovydoc; however, i then went to the command line to isolate the issue.  i started with 1.7.10 and then upgraded to 1.8.0 and got the same error.&lt;/p&gt;

&lt;p&gt;this bug is repeatable.&lt;/p&gt;

&lt;p&gt;follow these steps:&lt;br/&gt;
1) create a groovy project&lt;br/&gt;
2) add a package with groovy classes&lt;br/&gt;
3) run this command: rm -rf /tmp/docs/; mkdir -p /tmp/docs; groovydoc -verbose  -private --destdir /tmp/docs &amp;lt;package name&amp;gt;&lt;br/&gt;
4) everything should work fine&lt;br/&gt;
5) add a java file to the package&lt;br/&gt;
6) run this command: rm -rf /tmp/docs/; mkdir -p /tmp/docs; groovydoc -verbose  -private --destdir /tmp/docs &amp;lt;package name&amp;gt;&lt;br/&gt;
7) get an out of memory error when it hits the java file&lt;/p&gt;

&lt;p&gt;i think groovy is doing a reclusive call that never ends until it runs out of memory&lt;/p&gt;

&lt;p&gt;the project that i created using ant can be found at my github : &lt;a href=&quot;https://github.com/matthewpurdy/purdyCommonTasks&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/matthewpurdy/purdyCommonTasks&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;project directory structure looks like this:&lt;/p&gt;

&lt;p&gt;purdyCommonTasks/&lt;br/&gt;
&amp;#9500;&amp;#9472;&amp;#9472; README&lt;br/&gt;
&amp;#9500;&amp;#9472;&amp;#9472; build.properties&lt;br/&gt;
&amp;#9500;&amp;#9472;&amp;#9472; build.xml&lt;br/&gt;
&amp;#9500;&amp;#9472;&amp;#9472; lib/&lt;br/&gt;
&amp;#9474;&#160;&#160; &amp;#9500;&amp;#9472;&amp;#9472; groovy-all-1.8.0.jar&lt;br/&gt;
&amp;#9474;&#160;&#160; &amp;#9500;&amp;#9472;&amp;#9472; junit-4.8.1.jar&lt;br/&gt;
&amp;#9474;&#160;&#160; &amp;#9492;&amp;#9472;&amp;#9472; log4j-1.2.16.jar&lt;br/&gt;
&amp;#9500;&amp;#9472;&amp;#9472; purdyCommonTasks.xml&lt;br/&gt;
&amp;#9500;&amp;#9472;&amp;#9472; resources/&lt;br/&gt;
&amp;#9474;&#160;&#160; &amp;#9492;&amp;#9472;&amp;#9472; log4j.xml&lt;br/&gt;
&amp;#9500;&amp;#9472;&amp;#9472; src/&lt;br/&gt;
&amp;#9474;&#160;&#160; &amp;#9492;&amp;#9472;&amp;#9472; somepackage/&lt;br/&gt;
&amp;#9474;&#160;&#160;     &amp;#9500;&amp;#9472;&amp;#9472; Main.groovy&lt;br/&gt;
&amp;#9474;&#160;&#160;     &amp;#9500;&amp;#9472;&amp;#9472; SomeClass.groovy&lt;br/&gt;
&amp;#9474;&#160;&#160;     &amp;#9492;&amp;#9472;&amp;#9472; SomeClass2.java&lt;br/&gt;
&amp;#9492;&amp;#9472;&amp;#9472; test/&lt;br/&gt;
    &amp;#9492;&amp;#9472;&amp;#9472; somepackage/&lt;br/&gt;
        &amp;#9492;&amp;#9472;&amp;#9472; SomeClassTest.groovy&lt;/p&gt;


&lt;p&gt;results when i run it from the commandline:&lt;/p&gt;

&lt;p&gt;mpurdy-keywcorp:purdyCommonTasks mpurdy$ which groovy&lt;br/&gt;
/usr/local/groovy/bin/groovy&lt;br/&gt;
mpurdy-keywcorp:purdyCommonTasks mpurdy$ ls -l `which groovy`&lt;br/&gt;
-rwxrwxr-x@ 1 root  wheel   1.0K Apr 27 14:55 /usr/local/groovy/bin/groovy*&lt;br/&gt;
mpurdy-keywcorp:purdyCommonTasks mpurdy$ ls -l /usr/local/groovy&lt;br/&gt;
lrwxr-xr-x  1 root  wheel    12B Apr 29 16:14 /usr/local/groovy@ -&amp;gt; groovy-1.8.0&lt;br/&gt;
mpurdy-keywcorp:purdyCommonTasks mpurdy$ groovy -version&lt;br/&gt;
Groovy Version: 1.8.0 JVM: 1.6.0_24&lt;br/&gt;
mpurdy-keywcorp:purdyCommonTasks mpurdy$ rm -rf /tmp/docs/;mkdir -p /tmp/docs;groovydoc -verbose  -private --destdir /tmp/docs -windowtitle mydocs somepackage `find src/* -type f`&lt;br/&gt;
REDERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;org.codehaus.groovy.tools.groovydoc.GroovyRootDocBuilder&amp;#93;&lt;/span&gt; Out of memory while processing: DefaultPackage/SomeClass2.java&lt;br/&gt;
java.lang.reflect.InvocationTargetException&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at org.codehaus.groovy.tools.GroovyStarter.rootLoader(GroovyStarter.java:108)&lt;br/&gt;
	at org.codehaus.groovy.tools.GroovyStarter.main(GroovyStarter.java:130)&lt;br/&gt;
Caused by: java.lang.OutOfMemoryError: Java heap space&lt;br/&gt;
	at antlr.ANTLRStringBuffer.append(ANTLRStringBuffer.java:36)&lt;br/&gt;
	at antlr.CharScanner.append(CharScanner.java:64)&lt;br/&gt;
	at antlr.CharScanner.consume(CharScanner.java:82)&lt;br/&gt;
	at antlr.CharScanner.match(CharScanner.java:205)&lt;br/&gt;
	at org.codehaus.groovy.antlr.java.JavaLexer.mSL_COMMENT(JavaLexer.java:1142)&lt;br/&gt;
	at org.codehaus.groovy.antlr.java.JavaLexer.nextToken(JavaLexer.java:401)&lt;br/&gt;
	at org.codehaus.groovy.antlr.java.JavaLexer$1.nextToken(JavaLexer.java:98)&lt;br/&gt;
	at antlr.TokenBuffer.fill(TokenBuffer.java:69)&lt;br/&gt;
	at antlr.TokenBuffer.LT(TokenBuffer.java:86)&lt;br/&gt;
	at antlr.LLkParser.LT(LLkParser.java:56)&lt;br/&gt;
	at org.codehaus.groovy.antlr.java.JavaRecognizer.classDefinition(JavaRecognizer.java:753)&lt;br/&gt;
	at org.codehaus.groovy.antlr.java.JavaRecognizer.typeDefinitionInternal(JavaRecognizer.java:674)&lt;br/&gt;
	at org.codehaus.groovy.antlr.java.JavaRecognizer.typeDefinition(JavaRecognizer.java:509)&lt;br/&gt;
	at org.codehaus.groovy.antlr.java.JavaRecognizer.compilationUnit(JavaRecognizer.java:348)&lt;br/&gt;
	at org.codehaus.groovy.tools.groovydoc.GroovyRootDocBuilder.parseJava(GroovyRootDocBuilder.java:86)&lt;br/&gt;
	at org.codehaus.groovy.tools.groovydoc.GroovyRootDocBuilder.getClassDocsFromSingleSource(GroovyRootDocBuilder.java:70)&lt;br/&gt;
	at org.codehaus.groovy.tools.groovydoc.GroovyRootDocBuilder.processFile(GroovyRootDocBuilder.java:205)&lt;br/&gt;
	at org.codehaus.groovy.tools.groovydoc.GroovyRootDocBuilder.buildTree(GroovyRootDocBuilder.java:162)&lt;br/&gt;
	at org.codehaus.groovy.tools.groovydoc.GroovyDocTool.add(GroovyDocTool.java:66)&lt;br/&gt;
	at org.codehaus.groovy.tools.groovydoc.GroovyDocTool$add.call(Unknown Source)&lt;br/&gt;
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:42)&lt;br/&gt;
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)&lt;br/&gt;
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:116)&lt;br/&gt;
	at org.codehaus.groovy.tools.groovydoc.Main.execute(Main.groovy:198)&lt;br/&gt;
	at org.codehaus.groovy.tools.groovydoc.Main.main(Main.groovy:168)&lt;br/&gt;
	... 6 more&lt;br/&gt;
mpurdy-keywcorp:purdyCommonTasks mpurdy$ &lt;/p&gt;</description>
                <environment>mac os 10.6.7&lt;br/&gt;
java 1.6.0_24&lt;br/&gt;
groovy 1.8.0 (however same problem with 1.7.10)</environment>
        <key id="12815624">GROOVY-4803</key>
            <summary>out of memory error when running groovydoc when there are java files in packages</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blackdrag">Jochen Theodorou</assignee>
                                    <reporter username="mpurdy1973">Matthew Purdy</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Apr 2011 16:19:50 +0000</created>
                <updated>Wed, 15 Feb 2012 03:49:18 +0000</updated>
                            <resolved>Wed, 15 Feb 2012 03:49:17 +0000</resolved>
                                    <version>1.7.10</version>
                    <version>1.8.0</version>
                                    <fixVersion>2.0-beta-3</fixVersion>
                    <fixVersion>1.7.11</fixVersion>
                    <fixVersion>1.8.7</fixVersion>
                                    <component>GroovyDoc</component>
                    <component>parser-antlr2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14479497" author="paulk" created="Sat, 30 Apr 2011 20:49:55 +0000"  >&lt;p&gt;I can reproduce the problem. If I add an end of line to the end of the Java file, the problem goes away. So I guess that is the workaround.&lt;/p&gt;

&lt;p&gt;Yes, groovydoc is using a Java grammar which I don&apos;t believe is specially modified since we got it. Maybe we have to modify it or some other end of file trick to overcome this problem.&lt;/p&gt;</comment>
                            <comment id="14471185" author="mpurdy1973" created="Mon, 2 May 2011 15:30:17 +0000"  >&lt;p&gt;thanx; that works for me&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  &lt;/p&gt;

&lt;p&gt;maybe it should be noted in the docs that you must add a 0x10 to the end of each java file before running groovydocs over that package.&lt;/p&gt;</comment>
                            <comment id="14479552" author="paulk" created="Tue, 3 May 2011 06:43:11 +0000"  >&lt;p&gt;Just for the record (at least until we find a better fix) it is only Java files that have no end-of-line (i.e. no appropriate CR/LF for platform) that also have a single-line (double slash) comment on that last line that have this problem. The Antlr Java parser is looking for a CR and/or LF to close off the single-line comment and never finds it.&lt;/p&gt;</comment>
                            <comment id="14472435" author="blackdrag" created="Tue, 14 Feb 2012 08:46:26 +0000"  >&lt;p&gt;Paul, I cannot reproduce the issue. I found in the grammar a change. It references to &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-766&quot; title=&quot;Infinite Loop if the Last Line contains Single Line Comment without Carriage Return.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-766&quot;&gt;&lt;del&gt;GROOVY-766&lt;/del&gt;&lt;/a&gt; and would be about this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; &lt;span class=&quot;code-comment&quot;&gt;// Single-line comments
&lt;/span&gt; SL_COMMENT
        :       &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-comment&quot;&gt;//&quot;&lt;/span&gt;
&lt;/span&gt;-               (~(&lt;span class=&quot;code-quote&quot;&gt;&apos;\n&apos;&lt;/span&gt;|&lt;span class=&quot;code-quote&quot;&gt;&apos;\r&apos;&lt;/span&gt;))* (&lt;span class=&quot;code-quote&quot;&gt;&apos;\n&apos;&lt;/span&gt;|&lt;span class=&quot;code-quote&quot;&gt;&apos;\r&apos;&lt;/span&gt;(&lt;span class=&quot;code-quote&quot;&gt;&apos;\n&apos;&lt;/span&gt;)?)
+        (
+            options {  greedy = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;  }:
+            &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-quote&quot;&gt;&apos;\uffff&apos;&lt;/span&gt; means the EOF character.
&lt;/span&gt;+            ~(&lt;span class=&quot;code-quote&quot;&gt;&apos;\n&apos;&lt;/span&gt;|&lt;span class=&quot;code-quote&quot;&gt;&apos;\r&apos;&lt;/span&gt;|&lt;span class=&quot;code-quote&quot;&gt;&apos;\uffff&apos;&lt;/span&gt;)
+        )*
                {$setType(Token.SKIP); newline();}
        ;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; &lt;br/&gt;
can you test this?&lt;/p&gt;</comment>
                            <comment id="14479807" author="paulk" created="Tue, 14 Feb 2012 15:10:02 +0000"  >&lt;p&gt;Indeed, that fixes the problem.&lt;/p&gt;</comment>
                            <comment id="14472506" author="blackdrag" created="Wed, 15 Feb 2012 03:49:18 +0000"  >&lt;p&gt;I applied the fix&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12722802" name="bugTestExample.zip" size="5957271" author="mpurdy1973" created="Fri, 29 Apr 2011 16:19:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 40 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2cddj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>