<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:12:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-3471] @Delegate not working when it refers to a Map</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-3471</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;If you use the @Delegate to mark a Map as a Delegate you&apos;ll get an error:&lt;/p&gt;

&lt;p&gt;java.lang.NullPointerException: Cannot invoke method put() on null object&lt;/p&gt;

&lt;p&gt;It can be illustrated with this example:&lt;/p&gt;

&lt;p&gt;class Test {&lt;br/&gt;
    @Delegate Map mp&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;def t = new Test(mp: new HashMap())&lt;/p&gt;

&lt;p&gt;println t.keySet()&lt;/p&gt;

&lt;p&gt;I originally noticed it when trying it with a GroovyRowResult (same error as above):&lt;/p&gt;

&lt;p&gt;import groovy.sql.GroovyRowResult&lt;/p&gt;

&lt;p&gt;class DelegateRowResult {&lt;br/&gt;
	@Delegate GroovyRowResult row&lt;br/&gt;
	String foo&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;DelegateRowResult d = new DelegateRowResult( foo: &quot;Boo&quot;)&lt;br/&gt;
println &quot;$d.foo&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12814687">GROOVY-3471</key>
            <summary>@Delegate not working when it refers to a Map</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="roshandawrani">Roshan Dawrani</assignee>
                                    <reporter username="rickcr">Rick Reumann</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Apr 2009 14:02:29 +0000</created>
                <updated>Thu, 15 Oct 2009 17:16:22 +0000</updated>
                            <resolved>Tue, 26 May 2009 14:22:35 +0000</resolved>
                                    <version>1.6</version>
                                    <fixVersion>1.6.4</fixVersion>
                    <fixVersion>1.7-beta-1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14466813" author="roshandawrani" created="Fri, 17 Apr 2009 12:43:25 +0000"  >&lt;p&gt;As a workaround, if these Map interface based delegates are defined as @Delegate(interfaces=false), then it works.&lt;/p&gt;

&lt;p&gt;The reason for the failure reported is that MetaClassImpl handle class implementing Map interface differently to support map.x = &quot;y&quot; kind of calls. &lt;/p&gt;

&lt;p&gt;If we don&apos;t want to change that special handling in MetaClassImpl for Map, then one way of solving the issue reported is that in a class like &lt;/p&gt;

&lt;p&gt;class Test {&lt;br/&gt;
 @Delegate MyType mp // MyType implements interfaces Map, A, B&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;then class Test generated should implement only A, B and exclude Map. It will be like antidote for Map&apos;s special handling in MetaClassImpl &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14466886" author="roshandawrani" created="Mon, 4 May 2009 11:08:45 +0000"  >&lt;p&gt;Not sure about the solution - whether to make changes around the special map handling in MetaClassImpl or to not make the class owning the Map delegate implement the Map interface. If someone has a suggestion, I can give that a try.&lt;/p&gt;</comment>
                            <comment id="14467065" author="roshandawrani" created="Tue, 26 May 2009 14:22:35 +0000"  >&lt;p&gt;Fixed - at 3rd attempt &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 27 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2camf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>