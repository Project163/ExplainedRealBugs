<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:16:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-5358] Different ways of extending a class functionality esp. adding getProperty inconsistent</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-5358</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;When getProperty is used e.g., to mimic a Map behaviour, the result differs depending on whether getProperty was defined directly in the class, added through a mixin, or through a metaclass.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;FooWorksAsMap { &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;names the same length as LinkedHashMap to make output pretty
&lt;/span&gt; def getProperty(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; foo) { &lt;span class=&quot;code-quote&quot;&gt;&quot;OK:FooWorksAsMap.$foo&quot;&lt;/span&gt; }
}
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;BarWorksAsMap {}
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;BaxWorksAsMap {}
@Category(BarWorksAsMap) &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;C {
 def getProperty(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; foo) { &lt;span class=&quot;code-quote&quot;&gt;&quot;OK:BarWorksAsMap.$foo&quot;&lt;/span&gt; }
}
BarWorksAsMap.mixin C
BaxWorksAsMap.metaClass.getProperty = { foo -&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;OK:BaxWorksAsMap.$foo&quot;&lt;/span&gt; }
def maps = [&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FooWorksAsMap(), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BarWorksAsMap(), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BaxWorksAsMap(),
           [foo:&lt;span class=&quot;code-quote&quot;&gt;&apos;OK:LinkedHashMap.foo&apos;&lt;/span&gt;, class:&lt;span class=&quot;code-quote&quot;&gt;&apos;OK:LinkedHashMap.class&apos;&lt;/span&gt;]]
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (def prop in [&lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;class&apos;&lt;/span&gt;]) {
 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (def m in maps) {
   def op = &lt;span class=&quot;code-quote&quot;&gt;&quot;${m.getClass().getSimpleName()}.$prop&quot;&lt;/span&gt;
   &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; { println &lt;span class=&quot;code-quote&quot;&gt;&quot;$op -&amp;gt; &quot;&lt;/span&gt; + m.&lt;span class=&quot;code-quote&quot;&gt;&quot;$prop&quot;&lt;/span&gt; }
   &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (t) { println &lt;span class=&quot;code-quote&quot;&gt;&quot;$op -&amp;gt; FAIL:$t&quot;&lt;/span&gt; }
 }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12816172">GROOVY-5358</key>
            <summary>Different ways of extending a class functionality esp. adding getProperty inconsistent</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="oc">OC</reporter>
                        <labels>
                    </labels>
                <created>Sun, 11 Mar 2012 15:19:45 +0000</created>
                <updated>Thu, 3 Feb 2022 22:35:37 +0000</updated>
                            <resolved>Tue, 25 Jan 2022 10:19:49 +0000</resolved>
                                                    <fixVersion>4.0.0</fixVersion>
                                    <component>groovy-runtime</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17476670" author="emilles" created="Sat, 15 Jan 2022 18:08:06 +0000"  >&lt;p&gt;The category mixin case isn&apos;t working because the check for GroovyObject methods in MetaClassImpl misses the kind of meta method:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; void checkIfGroovyObjectMethod(MetaMethod metaMethod) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (metaMethod &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; ClosureMetaMethod || metaMethod &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; MixinInstanceMetaMethod) { &lt;span class=&quot;code-comment&quot;&gt;// NewInstanceMetaMethod
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isGetPropertyMethod(metaMethod)) {
                getPropertyMethod = metaMethod;
            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isInvokeMethod(metaMethod)) {
                invokeMethodMethod = metaMethod;
            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isSetPropertyMethod(metaMethod)) {
                setPropertyMethod = metaMethod;
            }
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/pull/1676&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1676&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17476674" author="emilles" created="Sat, 15 Jan 2022 18:43:57 +0000"  >&lt;p&gt;Even with this fix, the Bar and Bax cases will not do what you expect for &quot;class&quot; or &quot;metaClass&quot;.  See &lt;tt&gt;ExpandoMetaClass&lt;/tt&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; hasOverrideGetProperty(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; getPropertyMethod != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; !name.equals(META_CLASS_PROPERTY) &amp;amp;&amp;amp; !name.equals(CLASS_PROPERTY);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17477246" author="paulk" created="Mon, 17 Jan 2022 14:29:18 +0000"  >&lt;p&gt;I added a &lt;tt&gt;setProperty&lt;/tt&gt; test case. I haven&apos;t closed yet. I think we should think about whether any consistency for class/metaClass is possible or at least check whether we have any documentation.&lt;/p&gt;</comment>
                            <comment id="17477358" author="emilles" created="Mon, 17 Jan 2022 18:28:28 +0000"  >&lt;p&gt;So if you allow &quot;class&quot; or &quot;metaClass&quot; to go through getProperty or setProperty, what are the implications?  I haven&apos;t looked at the code history to see why those checks were installed.&lt;/p&gt;</comment>
                            <comment id="17481718" author="paulk" created="Tue, 25 Jan 2022 10:19:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=emilles&quot; class=&quot;user-hover&quot; rel=&quot;emilles&quot;&gt;emilles&lt;/a&gt; I propose we close this and clarify further &quot;class&quot;/&quot;metaClass&quot; behavior as a separate issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 42 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2cbq7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>