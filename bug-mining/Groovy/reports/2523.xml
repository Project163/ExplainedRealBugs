<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:39:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-6671] Types not inferred when coercing closures of generic method return type</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-6671</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;I can&apos;t quite narrow down the exact cause of this.&lt;/p&gt;

&lt;p&gt;This fails:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;// Note: &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; must be in different script because of GROOVY-6670
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; Converter&amp;lt;F, T&amp;gt; {
  T convert(F from)
}

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Holder&amp;lt;T&amp;gt; {
  T thing

  Holder(T thing) {
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.thing = thing
  }

  def &amp;lt;R&amp;gt; Holder&amp;lt;R&amp;gt; convert(Converter&amp;lt;? &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt; T, ? &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; R&amp;gt; func1) {
    &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Holder(func1.convert(thing))
  }
}

@CompileStatic
void m() {
  &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Holder&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;(2).convert {
    it
  } convert {
    it.floatValue() &lt;span class=&quot;code-comment&quot;&gt;// fails, doesn&lt;span class=&quot;code-quote&quot;&gt;&apos;t know &apos;&lt;/span&gt;it&apos; is an &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;
&lt;/span&gt;  }
}

m()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, this works and I can&apos;t work out what the difference is.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; Action&amp;lt;T&amp;gt; {
  void execute(T thing)
}

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Thing&amp;lt;T&amp;gt; {
  T thing
  Thing(T thing) {
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.thing = thing
  }
  
  void doWith(Action&amp;lt;? &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt; T&amp;gt; action) {
    action.execute(thing)
  }
}


&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Container {
  @groovy.transform.CompileStatic 
  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; m() {
    makeThing(&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;) doWith { println it.toUpperCase() } &lt;span class=&quot;code-comment&quot;&gt;// works
&lt;/span&gt;    makeThingFromCallable { &lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt; } doWith { println it.toUpperCase() } &lt;span class=&quot;code-comment&quot;&gt;// works
&lt;/span&gt;  }
  
  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &amp;lt;T&amp;gt; Thing&amp;lt;? &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; T&amp;gt; makeThing(T thing) {
    &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Thing&amp;lt;T&amp;gt;(thing)
  }
  
  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &amp;lt;T&amp;gt; Thing&amp;lt;? &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; T&amp;gt; makeThingFromCallable(java.util.concurrent.Callable&amp;lt;T&amp;gt; thing) {
    &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Thing&amp;lt;T&amp;gt;(thing.call())
  }
  
}

Container.m()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12813161">GROOVY-6671</key>
            <summary>Types not inferred when coercing closures of generic method return type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="blackdrag">Jochen Theodorou</assignee>
                                    <reporter username="ldaley">Luke Daley</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Apr 2014 20:42:52 +0000</created>
                <updated>Tue, 6 May 2014 02:45:40 +0000</updated>
                            <resolved>Tue, 6 May 2014 02:45:39 +0000</resolved>
                                    <version>2.3.0</version>
                                    <fixVersion>2.3.0-rc-1</fixVersion>
                                    <component>Static Type Checker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14475763" author="blackdrag" created="Thu, 24 Apr 2014 08:27:01 +0000"  >&lt;p&gt;Now this was quite some work to fix, because it was about touching about almost all the rough edges in the inference engine. But luckily I managed to fix it&lt;/p&gt;</comment>
                            <comment id="14475733" author="ldaley" created="Thu, 24 Apr 2014 15:30:08 +0000"  >&lt;p&gt;Confirmed that rc-1 fixes the case that sparked this report.&lt;/p&gt;

&lt;p&gt;Thanks Jochen.&lt;/p&gt;</comment>
                            <comment id="14475786" author="ldaley" created="Mon, 28 Apr 2014 22:30:10 +0000"  >&lt;p&gt;I found another case that doesn&apos;t work.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@Grab(group=&lt;span class=&quot;code-quote&quot;&gt;&apos;com.netflix.rxjava&apos;&lt;/span&gt;, module=&lt;span class=&quot;code-quote&quot;&gt;&apos;rxjava-core&apos;&lt;/span&gt;, version=&lt;span class=&quot;code-quote&quot;&gt;&apos;0.18.1&apos;&lt;/span&gt;) 
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; rx.Observable

@groovy.transform.CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Example {
  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
    Observable.just(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;) map {
      it.toUpperCase() &lt;span class=&quot;code-comment&quot;&gt;// &amp;lt;- compiler doesn&lt;span class=&quot;code-quote&quot;&gt;&apos;t know &apos;&lt;/span&gt;it&apos; is a string
&lt;/span&gt;    } subscribe {
      println it
    }
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If I put this code in IDEA it thinks it is compilable, which leads me to believe that this is inferrable.&lt;/p&gt;

&lt;p&gt;I tested this with 2.3.0-rc-2.&lt;/p&gt;</comment>
                            <comment id="14475889" author="ldaley" created="Tue, 6 May 2014 00:45:05 +0000"  >&lt;p&gt;Problem exists in 2.3.0 final.&lt;/p&gt;</comment>
                            <comment id="14475921" author="blackdrag" created="Tue, 6 May 2014 02:04:16 +0000"  >&lt;p&gt;which does exist? the original reported problem or the one from the comment. Because I think I checked only the original and forgot about the comment. But then it also means the problems are actually different ones.&lt;/p&gt;</comment>
                            <comment id="14475900" author="ldaley" created="Tue, 6 May 2014 02:36:30 +0000"  >&lt;p&gt;Sorry, the problem raised in the comments exists in 2.3.0 final.&lt;/p&gt;

&lt;p&gt;Want me to raise a new issue?&lt;/p&gt;</comment>
                            <comment id="14475746" author="blackdrag" created="Tue, 6 May 2014 02:39:56 +0000"  >&lt;p&gt;yes, please close this one and make a new issue&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 29 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ciaf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>