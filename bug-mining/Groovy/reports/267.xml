<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Tue Nov 11 23:58:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-833] Groovy-core compile errors in eclipse with 5.0 compiler enabled</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-833</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Using eclipse with the 5.0 compiler (instead of the 1.4 compiler) causes the following ERRORs:&lt;/p&gt;

&lt;p&gt;org/codehaus/groovy/runtime/DefaultGroovyMethods.java (line 3355)&lt;br/&gt;
The method compareTo(BigInteger) in the type BigInteger is not applicable for the arguments (BigDecimal)&lt;/p&gt;

&lt;p&gt;org/codehaus/groovy/runtime/WriteFile.java (line 102)&lt;br/&gt;
Name clash: The method compareTo(Object) of type WritableFile has the same erasure as compareTo(T) of type Comparable&amp;lt;T&amp;gt; but does not override it&lt;/p&gt;

&lt;p&gt;org/codehaus/groovy/runtime/WriteFile.java (line 103)&lt;br/&gt;
The method compareTo(File) in the type File is not applicable for the arguments (Object)&lt;/p&gt;
</description>
                <environment>Eclipse 3.1M5, JDK 5.0</environment>
        <key id="12811965">GROOVY-833</key>
            <summary>Groovy-core compile errors in eclipse with 5.0 compiler enabled</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="codevise">Dierk K&#246;nig</assignee>
                                    <reporter username="meling">Hein Meling</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 May 2005 16:17:10 +0000</created>
                <updated>Fri, 30 Nov 2007 06:27:21 +0000</updated>
                            <resolved>Fri, 9 Jun 2006 06:23:34 +0000</resolved>
                                    <version>1.0-JSR-2</version>
                                    <fixVersion>1.0-JSR-5</fixVersion>
                                    <component>groovy-jdk</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14460876" author="sormuras" created="Wed, 4 May 2005 17:33:02 +0000"  >&lt;p&gt;I can confirm those 3 errors w/ JDK5 and Eclipse 3.1M6.&lt;/p&gt;

&lt;p&gt;My solution was to create an project specific 1.4 compiler target, which is stored by Eclipse under &quot;groovy-core/.settings/&quot;. Yesterday, I added the &quot;.settings&quot; pattern to the local &quot;.cvsignore&quot; file and did not submit those working compiler settings.&lt;/p&gt;

&lt;p&gt;I upload those &quot;.settings&quot; now as a work around &amp;#8211; but the compile error should not happen and get fixed soon!&lt;/p&gt;</comment>
                            <comment id="14460992" author="sormuras" created="Wed, 4 May 2005 18:12:11 +0000"  >&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;Resolves when creating a new BD called &quot;selfDec&quot;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;org/codehaus/groovy/runtime/DefaultGroovyMethods.java (line 3355) &lt;br/&gt;
The method compareTo(BigInteger) in the type BigInteger is not applicable for the arguments (BigDecimal)&lt;/p&gt;

&lt;p&gt;            BigDecimal to1 = (BigDecimal) to;&lt;br/&gt;
            BigDecimal selfDec = new BigDecimal(self);&lt;br/&gt;
            if (selfDec.compareTo(to1) &amp;gt;= 0) {&lt;br/&gt;
                for (BigDecimal i = new BigDecimal(self); i.compareTo(to1) &amp;gt;= 0; i = i.subtract(one)) &lt;/p&gt;
{
                    closure.call(i);
                }
&lt;p&gt;            }&lt;/p&gt;



&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;Cannot resolve under Java 5 - because any solution yields a duplicate method (line 98) or violates the Comparable&amp;lt;File&amp;gt; contract.&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;org/codehaus/groovy/runtime/WriteFile.java (line 102) &lt;br/&gt;
org/codehaus/groovy/runtime/WriteFile.java (line 103)&lt;/p&gt;

&lt;p&gt;           public int compareTo(Object arg0) &lt;/p&gt;
{ // Replacing Object with File yields duplicated method
               return delegate.compareTo((File) arg0); // The cast fixes line 105
           }

&lt;p&gt;The root of the problem is that WritableFile extends File, which in turn implements Comparable&amp;lt;File&amp;gt;. My proposal is to remove the &quot;compareTo(Object)&quot; method entirely &amp;#8211; which breaks 1.4 Comparable. Humm...&lt;/p&gt;</comment>
                            <comment id="14461888" author="ddmanlin" created="Thu, 1 Jun 2006 05:20:26 +0000"  >&lt;p&gt;For the compareTo(Ojbect) of File, I think this is a core incompitable between Java 1.4 and 5.0. Is branching this file 1.4 and 5.0 a good solution? If not, remove the compareTo(Ojbect) is a better choose in my opinion since compareTo(Ojbect) is not common used when compareTo(File) is more likely used.&lt;/p&gt;

</comment>
                            <comment id="14461941" author="ddmanlin" created="Thu, 1 Jun 2006 06:28:32 +0000"  >&lt;p&gt;Another possible solution: In WriteFIle constructor, doing &lt;/p&gt;

&lt;p&gt;    public WritableFile(File delegate, String encoding) &lt;/p&gt;
{
        super(delegate.toURI()); // instead of super(&quot;&quot;)
        this.delegate = delegate;
        this.encoding = encoding;
    }

&lt;p&gt;And remove both compareTo() methods (Even all methods except WriteTo()). Though some overhead, this can solve the compitability problem. &lt;/p&gt;

&lt;p&gt;Is this okay?&lt;/p&gt;</comment>
                            <comment id="14477195" author="mguillemot@yahoo.fr" created="Thu, 8 Jun 2006 15:43:46 +0000"  >&lt;p&gt;This patch fixes the compilation errors under Java 5 and fixes wrong behaviour of downTo (unit test included)&lt;/p&gt;

&lt;p&gt;There is absolute no need here for distinct code for Java 1.4 and 5 because of File.compareTo(Object): Java 1.4 File.compareTo(Object) throws a ClassCastException if the Object isn&apos;t a File. We just need to do the cast explicitely by ourself to produce the ClassCastException earlier if needed and to make Java 5 happy.&lt;/p&gt;

&lt;p&gt;The downTo compilaton errors allowed to find a bug in donwTo.&lt;/p&gt;</comment>
                            <comment id="14462020" author="ddmanlin" created="Thu, 8 Jun 2006 21:53:41 +0000"  >&lt;p&gt;For the Writable file, I fould this error message in Eclipse. Marc, did you get this message, too?&lt;/p&gt;

&lt;p&gt;Name clash: The method compareTo(Object) of type WritableFile has the same erasure as compareTo(T) of type Comparable&amp;lt;T&amp;gt; but does not override it&lt;/p&gt;

&lt;p&gt;I am not quite familiar with Java 5, but in the javadoc I found that the compareTo() in Java 5 now using Generic type, which may cause this problem&lt;/p&gt;
</comment>
                            <comment id="14461848" author="ddmanlin" created="Thu, 8 Jun 2006 22:31:21 +0000"  >&lt;p&gt;I think a possible solution is &lt;/p&gt;

&lt;p&gt; public WritableFile(File delegate, String encoding) {&lt;br/&gt;
super(delegate.toURI()); // instead of super(&quot;&quot;)&lt;br/&gt;
this.delegate = delegate;&lt;br/&gt;
this.encoding = encoding;&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;And remove both compareTo() methods. &lt;/p&gt;

&lt;p&gt;The compareTo() compares absolute path of file, so compare a  WritableFile with a File should be fine.&lt;/p&gt;</comment>
                            <comment id="14477193" author="mguillemot@yahoo.fr" created="Fri, 9 Jun 2006 02:36:16 +0000"  >&lt;p&gt;Dave,&lt;br/&gt;
yes I&apos;ve checked out the project in Eclipse and got these errors. You&apos;re right concerning the cause of the compareTo() problem. It&apos;s possible that a refactoring like the one you propose would work and make sense, but in a first time I wanted to do the minimal changes.&lt;/p&gt;

&lt;p&gt;File.compareTo(File) is ok at compile time both for Java 1.4 and 5&lt;/p&gt;

&lt;p&gt;File.compareTo(Object) is ok at compile time for Java 1.4 but will throw a ClassCastException at runtime if the provided Object isn&apos;t a File. It is not ok at compile time for Java 5&lt;/p&gt;

&lt;p&gt;Casting the Object to File makes compilation ok for both Java 1.4 and 5 and the only consequence is that when the method gets called with a non-File parameter, the ClassCastException is thrown by the Groovy Class rather than by the File class.&lt;/p&gt;</comment>
                            <comment id="14461907" author="codevise" created="Fri, 9 Jun 2006 04:27:22 +0000"  >&lt;p&gt;applied patch of Marc Guillemot (thanks a lot)&lt;/p&gt;

&lt;p&gt;compiled and tested under JDKs 1.4 and 1.5&lt;/p&gt;

&lt;p&gt;Hein: please close the issue if that solves the problem for you&lt;/p&gt;</comment>
                            <comment id="14461954" author="mguillemot@yahoo.fr" created="Fri, 9 Jun 2006 04:31:58 +0000"  >&lt;p&gt;Ups, I now see that the errors I had (and that are fixed by my patch) were with Eclipse using 1.4 compiler compliance level BUT JRE 5. The type erasure problem remains.&lt;/p&gt;

&lt;p&gt;I think that your proposition to use &lt;/p&gt;

&lt;p&gt;super(delegate.toURI()); // instead of super(&quot;&quot;)&lt;/p&gt;

&lt;p&gt;would be a good solution and it would allow to remove nearly all overriden methods: they would be just useless.&lt;/p&gt;</comment>
                            <comment id="14461988" author="sormuras" created="Fri, 9 Jun 2006 05:04:31 +0000"  >&lt;p&gt;I&apos;m with Dave solution ... as the proposed and committed patch does not resolve under Java 5 - because this solution yields a duplicate method or violates the generic Comparable&amp;lt;File&amp;gt; contract.&lt;/p&gt;</comment>
                            <comment id="14477190" author="mguillemot@yahoo.fr" created="Fri, 9 Jun 2006 06:08:35 +0000"  >&lt;p&gt;New version of WritableFile adapted like proposed by Dave what allows to remove completely the delegate.&lt;/p&gt;

&lt;p&gt;This allows the project to compile with java 1.4 as well as 5.0 (Dierk, I guess that you&apos;ve started maven after having changed your JAVA_HOME and path but forgot to adapt the project.properties to java 5).&lt;/p&gt;

&lt;p&gt;Some of the unit tests fail with Java 5 (Dierk, this is the problem I already told you). I will try to have a look at them to see if it&apos;s possible to make them working both when sources are considered as 1.4 and 5. Nevertheless I think that it is a different issue and that this issue can be (re-)closed after fixing WritableFile.&lt;/p&gt;</comment>
                            <comment id="14461928" author="codevise" created="Fri, 9 Jun 2006 06:23:34 +0000"  >&lt;p&gt;applied WritableFile.java.&lt;/p&gt;

&lt;p&gt;please test and close issue if ok.&lt;/p&gt;</comment>
                            <comment id="14461883" author="blackdrag" created="Fri, 9 Jun 2006 07:35:26 +0000"  >&lt;p&gt;you people where a bit fast here...&lt;/p&gt;

&lt;p&gt;it is good you corrected WritableFile, because I think the compareTo method in the first patch would have produced a stack overflow when compiled with 1.4.  I am not lucky about the changed tests&lt;/p&gt;

&lt;p&gt;+import java.math.*&lt;br/&gt;
+&lt;/p&gt;

&lt;p&gt; public class DownUpStepTest extends GroovyTestCase {&lt;/p&gt;

&lt;p&gt;     void testDownto() {&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;def z = 0.0&lt;/li&gt;
	&lt;li&gt;(10.5).downto(5.9) 
{ z += it }&lt;br/&gt;
-        assert z == 10.5 + 9.5 + 8.5 + 7.5 + 6.5&lt;br/&gt;
-        assert z == 42.5&lt;br/&gt;
&lt;br/&gt;
+        def z = []&lt;br/&gt;
+        (10.5).downto(5.9) { z &amp;lt;&amp;lt; it }&lt;br/&gt;
+        assertEquals( &lt;span class=&quot;error&quot;&gt;&amp;#91;10.5, 9.5, 8.5, 7.5, 6.5&amp;#93;&lt;/span&gt;, z)&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    void testBigIntegerDowntoBigDecimal() {&lt;br/&gt;
+        def z = []&lt;br/&gt;
+        (new BigInteger(&quot;10&quot;)).downto(new BigDecimal(&quot;5.9&quot;)) { z &amp;lt;&amp;lt; it }&lt;br/&gt;
+        assertEquals( [new BigInteger(&quot;10&quot;), new BigInteger(&quot;9&quot;), new BigInteger(&quot;8&quot;), &lt;br/&gt;
+        	new BigInteger(&quot;7&quot;), new BigInteger(&quot;6&quot;)], z)&lt;br/&gt;
&lt;br/&gt;
     }&lt;br/&gt;
&lt;br/&gt;
first... this test isn&apos;t groovy. There is no need to write new Biginteger(&quot;10&quot;), we can write 10G. Second, why is the list used? I strongly recomend to revert the changes in  testDownto(). And testBigIntegerDowntoBigDecimal could be also more groovy:&lt;br/&gt;
&lt;br/&gt;
    void testBigIntegerDowntoBigDecimal() {&lt;br/&gt;
        def z = 0G&lt;br/&gt;
       10G.downto(5.9) { z += it }
&lt;p&gt;       assert z == 40G&lt;br/&gt;
       assert z.class == BigInteger&lt;br/&gt;
     }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;using assertEquals(List,Object) won&apos;t work, as this merhod is not available.. then the testDownto in DefaultGroovyMethodsTest , why do we create a String here and compare that? I mean &lt;/p&gt;

&lt;p&gt;   assertEquals(&quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;1, 0&amp;#93;&lt;/span&gt;&quot;, DefaultGroovyMethods.toString(li));&lt;/p&gt;

&lt;p&gt;we could simply count how often the closure is called:&lt;/p&gt;

&lt;p&gt;    public void testDownto() {&lt;br/&gt;
    	final List li = new ArrayList();&lt;br/&gt;
    	final Closure closure = new Closure(null) {&lt;br/&gt;
              int count = 0;&lt;br/&gt;
              public Object doCall(final Object params) &lt;/p&gt;
{
                count++;
                return null;
              }
&lt;p&gt;            };&lt;/p&gt;

&lt;p&gt;    	DefaultGroovyMethods.downto(new BigInteger(&quot;1&quot;), new BigDecimal(&quot;0&quot;), closure);&lt;br/&gt;
    	assertEquals(closure.count, 2);&lt;/p&gt;

&lt;p&gt;        closure.count=0;&lt;/p&gt;

&lt;p&gt;    	DefaultGroovyMethods.downto(new BigInteger(&quot;1&quot;), new BigDecimal(&quot;0.123&quot;), closure);&lt;br/&gt;
    	assertEquals(closure.count,1);&lt;br/&gt;
    }&lt;/p&gt;

&lt;p&gt;btw, java.math isn&apos;t needed in groovy for BigInteger and BigDecimal in the CVS version.. so I think that&apos;s all &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14462021" author="blackdrag" created="Fri, 9 Jun 2006 08:14:14 +0000"  >&lt;p&gt;sorry, the comment about assertEquals was stupid, of course you compare lists &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14477200" author="mguillemot@yahoo.fr" created="Fri, 9 Jun 2006 08:30:25 +0000"  >&lt;p&gt;10G, 9G, ... should be used. Sorry, I&apos;m not yet confident enough will all Groovy shortcuts.&lt;/p&gt;

&lt;p&gt;Otherwise the test has to compare lists because it is far more precise than comparing counts or sums (like what was previously made) and it is really more readable.&lt;/p&gt;</comment>
                            <comment id="14461946" author="blackdrag" created="Fri, 9 Jun 2006 09:05:44 +0000"  >&lt;p&gt;yes, I already said that my comment about assertEquals was stupid. I still don&apos;t like the thing with toString in DefaultGroovyMethodsTest, but as long as the build works I can life with it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310260">
                    <name>Related</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12816243">GROOVY-834</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12721568" name="WritableFile.java" size="3035" author="mguillem" created="Fri, 9 Jun 2006 06:08:35 +0000"/>
                            <attachment id="12721420" name="groovy.java5.patch" size="7653" author="mguillem" created="Thu, 8 Jun 2006 15:43:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 years, 25 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2c4xr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>