<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:19:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-10654] Cannot pass enum literal to ASTTransformationCustomizer</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-10654</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Please consider the following compiler configuration:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; config = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CompilerConfiguration();
&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; extensions = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;()
&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; timedInterruptParams = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;()

&lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; works (value is a constant):
&lt;/span&gt;timedInterruptParams.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;, 100);

&lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; does not work (value is an &lt;span class=&quot;code-keyword&quot;&gt;enum&lt;/span&gt; literal):
&lt;/span&gt;timedInterruptParams.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;unit&quot;&lt;/span&gt;, TimeUnit.MILLISECONDS);
config.addCompilationCustomizers(
    &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ASTTransformationCustomizer(timedInterruptParams, TimedInterrupt.class)
);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&#160;According to the documentation of ASTTransformationCustomizer, it should be possible to override any property from the annotation (TimedInterrupt in this case) by storing it into the parameters map (with the name of the annotation field as key). While this works nicely for numbers and strings, it currently doesn&apos;t seem to work for enum literals. When this configuration is used to compile a script, the compiler will throw a runtime exception where it claims that &quot;TimeUnit.MILLISECONDS is not a valid constant&quot;. This should be adressed, as enum literals are perceived as constants by most developers.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The following line is a valid workaround for the time being:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
timedInterruptParams.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;unit&quot;&lt;/span&gt;, propX(&lt;span class=&quot;code-keyword&quot;&gt;classX&lt;/span&gt;(TimeUnit.class), TimeUnit.MILLISECONDS.toString()), &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13449285">GROOVY-10654</key>
            <summary>Cannot pass enum literal to ASTTransformationCustomizer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="martin_haeusler">Martin H&#228;usler</reporter>
                        <labels>
                            <label>compilerconfiguration</label>
                            <label>scripting</label>
                    </labels>
                <created>Thu, 9 Jun 2022 17:10:58 +0000</created>
                <updated>Sat, 23 Jul 2022 21:05:48 +0000</updated>
                            <resolved>Fri, 10 Jun 2022 15:42:57 +0000</resolved>
                                    <version>4.0.3</version>
                                    <fixVersion>2.5.18</fixVersion>
                    <fixVersion>3.0.12</fixVersion>
                    <fixVersion>4.0.4</fixVersion>
                                    <component>Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17552364" author="emilles" created="Thu, 9 Jun 2022 18:07:29 +0000"  >&lt;p&gt;Thanks for creating this issue in addition to the stackoverflow question.  I&apos;ll try to take a look within the next few days.&lt;/p&gt;</comment>
                            <comment id="17552819" author="emilles" created="Fri, 10 Jun 2022 15:42:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/commit/8476bd7a7ab02151ee838651d8a3c92bb87fb8cb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/8476bd7a7ab02151ee838651d8a3c92bb87fb8cb&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 22 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z133o0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>