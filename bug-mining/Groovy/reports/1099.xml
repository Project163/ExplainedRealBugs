<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:13:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-3831] Expecting to find object/array on stack</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-3831</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;&lt;em&gt;Repro&lt;/em&gt;:&lt;br/&gt;
Compile and run the following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Test
{
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; string
        URI[] uris

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Test(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; string, URI[] uris)
        {
                &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.string = string
                &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.uris = uris
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Test(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; string, List uris)
        {
                &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;(string, uris.collect { &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URI(it) } as URI[])
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args)
        {
                def test = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Test(&lt;span class=&quot;code-quote&quot;&gt;&apos;hello&apos;&lt;/span&gt;, [&lt;span class=&quot;code-quote&quot;&gt;&quot;world&quot;&lt;/span&gt;])
                println test.string
                println test.strings
        }
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;em&gt;Observed Result&lt;/em&gt;:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ groovyc Test.groovy
$ groovy Test
Caught: java.lang.VerifyError: (class: Test, method: &amp;lt;init&amp;gt; signature: (Ljava/lang/String;Ljava/util/List;)V) Expecting to find object/array on stack&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;em&gt;Expected Result&lt;/em&gt;:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hello
[world]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12814943">GROOVY-3831</key>
            <summary>Expecting to find object/array on stack</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="roshandawrani">Roshan Dawrani</assignee>
                                    <reporter username="sukhyun.cho">sukhyun.cho</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Oct 2009 17:28:38 +0000</created>
                <updated>Wed, 9 Dec 2009 18:16:40 +0000</updated>
                            <resolved>Sun, 25 Oct 2009 14:42:40 +0000</resolved>
                                    <version>1.5.5</version>
                    <version>1.6</version>
                    <version>1.6.4</version>
                    <version>1.6.5</version>
                                    <fixVersion>1.6.6</fixVersion>
                    <fixVersion>1.7-rc-1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14467905" author="sukhyun.cho" created="Mon, 19 Oct 2009 17:37:30 +0000"  >&lt;p&gt;Sorry, it should be &quot;println test.uris&quot; at the end of the main method, and the expected result is&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hello
{world}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A work-around is to refactor out &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;uris.collect { &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URI(it) } as URI[]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;as a method and call it:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;(string, toUriArray(uris))&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14467927" author="roshandawrani" created="Fri, 23 Oct 2009 11:50:36 +0000"  >&lt;p&gt;Trimmed and trimmed and here is the bare minimum snippet that is reproducing the issue:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Test
{
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Test(cl) {}

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Test()
    {
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;({1})
    }
}

&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Test()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Haven&apos;t gone beyond shortening it yet, but issue may be related to &quot;this&quot; reference not being ready yet in .&quot;this(&lt;/p&gt;
{1}
&lt;p&gt;)&quot; - just a guess at this point though.&lt;/p&gt;</comment>
                            <comment id="14468007" author="roshandawrani" created="Fri, 23 Oct 2009 13:46:27 +0000"  >&lt;p&gt;I am wondering if the fix here may be to not allow in-line closure definition while invoking a constructor from another constructor.&lt;/p&gt;

&lt;p&gt;Groovy does not allow this(this), super(this), etc in constructors&lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-3128&quot; title=&quot;VerifyError for class definition in script edge case&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-3128&quot;&gt;&lt;del&gt;GROOVY-3128&lt;/del&gt;&lt;/a&gt; and doing this (&lt;/p&gt;
{1}) or super ({1}
&lt;p&gt;) is internally the same thing because of this references being passed to the closure constructor.&lt;/p&gt;
</comment>
                            <comment id="14467911" author="blackdrag" created="Sun, 25 Oct 2009 08:40:17 +0000"  >&lt;p&gt;in &quot;this(&lt;/p&gt;
{1}
&lt;p&gt;)&quot; the Closure needs an owner. The rationale here is to use the class instead of this, because all that is inside this() is to be ahndled as a static context and closures are allowed in a static context. So the code should have worked.&lt;/p&gt;</comment>
                            <comment id="14468028" author="roshandawrani" created="Sun, 25 Oct 2009 12:12:33 +0000"  >&lt;p&gt;Yes, I had noticed for non-closure usage within this() that it uses the static context. Thanks for extending that understanding to closure&apos;s owner.&lt;/p&gt;

&lt;p&gt;Currently the closure class instance is being created with &quot;this&quot; as the owner and not the class. I will look around that and see if I am able to change the owner to class object to see if that helps with this error.&lt;/p&gt;

&lt;p&gt;Once it goes inside class loading and verification by the JVM, it becomes difficult (for me) to pinpoint the exact spot where the issue is coming from. Wish I could have a peek inside class loading/verifier too.&lt;/p&gt;</comment>
                            <comment id="14468054" author="roshandawrani" created="Sun, 25 Oct 2009 14:42:40 +0000"  >&lt;p&gt;Fixed by extending the static context to closures defined in special calls within constructors.&lt;/p&gt;

&lt;p&gt;Thanks for the hint, Jochen.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12721524" name="Test.groovy" size="366" author="sukhyun.cho" created="Mon, 19 Oct 2009 17:28:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 5 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bz2f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>