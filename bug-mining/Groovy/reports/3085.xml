<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:52:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-5752] DelegateASTTransformation#addGetterIfNeeded doesn&apos;t take boolean isX accessors into account</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-5752</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;I&apos;m using @Delegate on a field whose type includes boolean properties. The resulting byte code properly delegates non-overridden getters and setters, but not boolean isX() accessors. This is due to DelegateASTTransformation#addGetterIfNeeded not considering isX accessors. &lt;/p&gt;

&lt;p&gt;Right now I&apos;ve fixed this like this, wrapping the existing method in a for loop iterating over both &apos;get&apos; and &apos;is&apos;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void addGetterIfNeeded(FieldNode fieldNode, ClassNode owner, PropertyNode prop, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name) {
    	&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; accessor: &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] {&lt;span class=&quot;code-quote&quot;&gt;&quot;get&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;is&quot;&lt;/span&gt;}) {
    		&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getterName = accessor + Verifier.capitalize(name);
    		&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (owner.getGetterMethod(getterName) == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
    			owner.addMethod(getterName,
    					ACC_PUBLIC,
    					nonGeneric(prop.getType()),
    					Parameter.EMPTY_ARRAY,
    					&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;,
    					&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ReturnStatement(
    							&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PropertyExpression(
    									&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; VariableExpression(fieldNode),
    									name)));
    		}
    	}
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I could include a JUnit test, but the bug seems obvious enough looking at the DelegateASTTransformation code.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12812018">GROOVY-5752</key>
            <summary>DelegateASTTransformation#addGetterIfNeeded doesn&apos;t take boolean isX accessors into account</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="jkuipers">Joris Kuipers</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Oct 2012 03:53:32 +0000</created>
                <updated>Wed, 1 Feb 2017 23:19:05 +0000</updated>
                            <resolved>Sat, 6 Aug 2016 05:03:51 +0000</resolved>
                                    <version>2.0.5</version>
                    <version>2.4.0-rc-1</version>
                                    <fixVersion>2.4.8</fixVersion>
                                    <component>xforms</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14480013" author="paulk" created="Fri, 12 Oct 2012 06:05:40 +0000"  >&lt;p&gt;Hi Joris, to confirm my understanding of what you want to achieve, can you give a simple example of what is broken now and what you are expecting the behaviour to be? I found some strange behaviour in addition to what I think you are after and just want to check I have isolated the issues. Thanks.&lt;/p&gt;</comment>
                            <comment id="14473372" author="jkuipers" created="Fri, 12 Oct 2012 06:35:02 +0000"  >&lt;p&gt;Sure: I have a class written in Groovy called &apos;Activity&apos; that has a boolean property &apos;schedulePrint&apos;. I don&apos;t provide the property accessor methods for that myself, I rely on the default Groovy-provided implementations. Then I have a groovy class &apos;PlannedActivity extends Activity&apos; with a &apos;@Delegate private final Activity target&apos; field, which is initialized in the constructor.&lt;br/&gt;
Then from a Java class I call &apos;isSchedulePrint()&apos; on an instance of PlannedActivity, and I expect that call to be delegated to the target field. However, there is no delegating implementation generated for &apos;isSchedulePrint&apos; as the result of the @Delegate annotation, only a &apos;getSchedulePrint&apos; (which does properly delegate). Hence I end up calling the isSchedulePrint implementation that PlannedActivity inherits from Activy which returns the field of the PlannedActivity instance itself (which is always false), instead of a delegating method that returns the field from the wrapped Activity.&lt;br/&gt;
That&apos;s the exact case that I ran into. &lt;/p&gt;</comment>
                            <comment id="14480011" author="paulk" created="Fri, 12 Oct 2012 07:24:51 +0000"  >&lt;p&gt;Just checking ... if you swap between boolean/Boolean in Activity, do you still observe the bad behaviour?&lt;/p&gt;</comment>
                            <comment id="14473403" author="jkuipers" created="Fri, 12 Oct 2012 09:45:14 +0000"  >&lt;p&gt;I don&apos;t think that a method like isSchedulePrint() is actually created when my field is of type Boolean by groovy: only a getSchedulePrint() seems to be created in the non-simple-type case. I could add it myself, but it wouldn&apos;t be a property accessor anymore but just a user-specified method, so I would expect delegation to work just fine in that case. Or am I missing something?&lt;/p&gt;</comment>
                            <comment id="14480030" author="paulk" created="Fri, 12 Oct 2012 14:33:13 +0000"  >&lt;p&gt;Hi Joris, I just noticed that for this class:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Foo {
  &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; one = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;   &lt;span class=&quot;code-comment&quot;&gt;// note: primitive type
&lt;/span&gt;  &lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt; two = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;that (at least for master) Groovy is generating setters for both and &quot;get&quot;-prefixed getters for both but also an &quot;is&quot;-prefixed getter for one, i.e. it is creating an &quot;isOne&quot; method but not an &quot;isTwo&quot; method. This is nothing to do with @Delegate but I was just checking which of the cases was affecting you before exploring further. So it seems the second case (non-primitive) from what you say.&lt;/p&gt;

&lt;p&gt;So to explain, I added your patch locally as an experiment but tweaked it for the &quot;is&quot; case to be applicable only for boolean typed properties but then noticed the above discrepancy and I suspect that the above needs to be looked at first before continuing with this issue.&lt;/p&gt;</comment>
                            <comment id="14473334" author="jkuipers" created="Fri, 12 Oct 2012 14:44:55 +0000"  >&lt;p&gt;You&apos;re absolutely right: I didn&apos;t look at the actual method implementation properly and simply assumed it would only add delegating accessor methods if those methods actually exist in the delegate. Since I now see that that&apos;s not the case you should indeed add the isX accessor only after checking that the return type is a simple boolean. Sorry for the confusion I might have introduced &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
BTW, it&apos;s correct behavior to only add isX accessors for the boolean simple type according to the JavaBeans spec AFAICT. &lt;/p&gt;</comment>
                            <comment id="14473423" author="jkuipers" created="Sun, 14 Oct 2012 16:20:34 +0000"  >&lt;p&gt;FYI, this is what I&apos;m using successfully at the moment myself:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void addGetterIfNeeded(FieldNode fieldNode, ClassNode owner, PropertyNode prop, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name) {
	&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; accessor: &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] {&lt;span class=&quot;code-quote&quot;&gt;&quot;get&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;is&quot;&lt;/span&gt;}) {
		&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getterName = accessor + Verifier.capitalize(name);
		&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (owner.getGetterMethod(getterName) == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
		    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!&lt;span class=&quot;code-quote&quot;&gt;&quot;is&quot;&lt;/span&gt;.equals(accessor) || prop.getOriginType().equals(ClassHelper.boolean_TYPE))
    			owner.addMethod(getterName,
    					ACC_PUBLIC,
    					nonGeneric(prop.getType()),
    					Parameter.EMPTY_ARRAY,
    					&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;,
    					&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ReturnStatement(
    							&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PropertyExpression(
    									&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; VariableExpression(fieldNode),
    									name)));
		}
	}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15409337" author="githubbot" created="Fri, 5 Aug 2016 11:21:22 +0000"  >&lt;p&gt;GitHub user paulk-asert opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/380&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/380&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-5752&quot; title=&quot;DelegateASTTransformation#addGetterIfNeeded doesn&amp;#39;t take boolean isX accessors into account&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-5752&quot;&gt;&lt;del&gt;GROOVY-5752&lt;/del&gt;&lt;/a&gt;: DelegateASTTransformation#addGetterIfNeeded doesn&apos;t take&#8230;&lt;/p&gt;

&lt;p&gt;    &#8230; boolean isX accessors into account&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/paulk-asert/groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/paulk-asert/groovy&lt;/a&gt; groovy5752&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/380.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/380.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #380&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 28750e13ab5f1c0115f59babfccb888d5ce1d7ff&lt;br/&gt;
Author: paulk &amp;lt;paulk@asert.com.au&amp;gt;&lt;br/&gt;
Date:   2016-08-05T11:17:22Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-5752&quot; title=&quot;DelegateASTTransformation#addGetterIfNeeded doesn&amp;#39;t take boolean isX accessors into account&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-5752&quot;&gt;&lt;del&gt;GROOVY-5752&lt;/del&gt;&lt;/a&gt;: DelegateASTTransformation#addGetterIfNeeded doesn&apos;t take boolean isX accessors into account&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15410306" author="githubbot" created="Sat, 6 Aug 2016 00:08:25 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/380&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/380&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15410483" author="paulk" created="Sat, 6 Aug 2016 05:03:51 +0000"  >&lt;p&gt;Proposed PR merged and ported back to the 2_4_X branch&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12815598">GROOVY-6245</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 15 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2cman:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>