<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:54:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-8107] Binary incompatibility problems between compiled code in Groovy 2.4.7 vs 2.4.9</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-8107</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;There are currently various binary incompatibility problems that are presenting a challenge for us moving forward with upgrading to Groovy 2.4.9 in Grails.&lt;/p&gt;

&lt;p&gt;One of them is Groovy traits compiled with Groovy 2.4.9 are not usable in Groovy 2.4.7 due to the following exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Error:Groovyc: While compiling tests of grails-datastore-gorm-hibernate5_test: BUG! exception in phase &lt;span class=&quot;code-quote&quot;&gt;&apos;semantic analysis&apos;&lt;/span&gt; in source unit &lt;span class=&quot;code-quote&quot;&gt;&apos;/Users/graemerocher/grails/gorm-hibernate5/grails-datastore-gorm-hibernate5/src/test/groovy/grails/gorm/tests/jpa/SimpleJpaEntitySpec.groovy&apos;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
	at org.codehaus.groovy.control.CompilationUnit.applyToSourceUnits(CompilationUnit.java:932)
	at org.codehaus.groovy.control.CompilationUnit.doPhaseOperation(CompilationUnit.java:590)
	at org.codehaus.groovy.control.CompilationUnit.processPhaseOperations(CompilationUnit.java:566)
	at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:543)
...
Caused by: java.lang.NullPointerException
	at org.codehaus.groovy.ast.expr.VariableExpression.&amp;lt;init&amp;gt;(VariableExpression.java:64)
	at org.codehaus.groovy.transform.trait.TraitComposer.applyTrait(TraitComposer.java:247)
	at org.codehaus.groovy.transform.trait.TraitComposer.doExtendTraits(TraitComposer.java:111)
	at org.grails.compiler.gorm.GormEntityTransformation.visit(GormEntityTransformation.groovy:338)
	at org.grails.compiler.gorm.JpaGormEntityTransformation.visit(JpaGormEntityTransformation.groovy:50)
	at org.grails.compiler.gorm.GlobalJpaEntityTransform.visitClass(GlobalJpaEntityTransform.groovy:43)
	at org.grails.compiler.gorm.GlobalJpaEntityTransform.visit(GlobalJpaEntityTransform.groovy:35)
	at org.codehaus.groovy.transform.ASTTransformationVisitor$3.call(ASTTransformationVisitor.java:319)
	at org.codehaus.groovy.control.CompilationUnit.applyToSourceUnits(CompilationUnit.java:928)
	... 22 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is an issue and IMO there should never be binary incompatible breaking changes between different patch releases of Groovy 2.4.x.&lt;/p&gt;

&lt;p&gt;The other issue is &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8048&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/GROOVY-8048&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Which is marked as fixed, but currently code already compiled in Groovy 2.4.7 is throwing a NPE using 2.4.9 such as:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Caused by: java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
        at org.codehaus.groovy.runtime.DefaultGroovyMethods.leftShift(DefaultGroovyMethods.java:12204)
        at grails.artefact.Interceptor$Trait$Helper.matchAll(Interceptor.groovy:109)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We can&apos;t really ask people to start recompiling existing published libraries for a patch release of Groovy so are looking for a path forward with these problems.&lt;/p&gt;

&lt;p&gt;It is my opinion that we should be aim to never break binary compatibility in a major release let alone in a patch release.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13047940">GROOVY-8107</key>
            <summary>Binary incompatibility problems between compiled code in Groovy 2.4.7 vs 2.4.9</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="graemerocher1">Graeme Rocher</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Mar 2017 08:29:41 +0000</created>
                <updated>Sat, 18 Mar 2017 09:56:55 +0000</updated>
                            <resolved>Wed, 8 Mar 2017 05:07:51 +0000</resolved>
                                    <version>2.4.9</version>
                                    <fixVersion>2.4.10</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15893999" author="graemerocher1" created="Fri, 3 Mar 2017 09:41:08 +0000"  >&lt;p&gt;Attached a Grails application that reproduces the first issue&lt;/p&gt;</comment>
                            <comment id="15894015" author="graemerocher1" created="Fri, 3 Mar 2017 09:47:23 +0000"  >&lt;p&gt;Attached example of second issue. Unzip interceptor-issue.zip, cd into `test-app` and run `./gradlew bootRun`&lt;/p&gt;</comment>
                            <comment id="15894020" author="blackdrag" created="Fri, 3 Mar 2017 09:50:09 +0000"  >&lt;p&gt;What exactly is the binary breaking change?&lt;/p&gt;</comment>
                            <comment id="15894025" author="blackdrag" created="Fri, 3 Mar 2017 09:51:55 +0000"  >&lt;p&gt;What I would get from your comments would be to undo the change for 8048 and do it instead in  3.0&lt;/p&gt;</comment>
                            <comment id="15894072" author="paulk" created="Fri, 3 Mar 2017 10:12:04 +0000"  >&lt;p&gt;Moving the 8048 fix to 2.5 or 3 is one of the options we might have to consider, or provide a switch to allow people to opt-in. I&apos;ll do some more investigation to see what other options we might have.&lt;/p&gt;</comment>
                            <comment id="15894136" author="graemerocher1" created="Fri, 3 Mar 2017 10:57:56 +0000"  >&lt;p&gt;Well my understanding was the fix for 8048 was done due to a regression in 2.4.8 (final fields in traits broke which broke the interceptor trait in Grails) which was supposed to have been solved in 2.4.9 with this fix? Unless I am misunderstanding. Either way simply rolling back the fix for 8048 will not solve it. &lt;/p&gt;

&lt;p&gt;The original problem in 2.4.8 (which preventing us from upgrading to that release) with final fields and traits will need to be resolved somehow.&lt;/p&gt;</comment>
                            <comment id="15894471" author="blackdrag" created="Fri, 3 Mar 2017 14:32:25 +0000"  >&lt;p&gt;The 2.4.8 problem was caused by &lt;a href=&quot;https://github.com/apache/groovy/commit/c00a75a89a15e46c2afacf6e72256cd4484bd5f1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/c00a75a89a15e46c2afacf6e72256cd4484bd5f1&lt;/a&gt; it seems. &lt;/p&gt;

&lt;p&gt;But frankly I still do not see the binary compatibility problem you are talking about. What I have seen looks a lot like a wrong generation of code. If that is the case, you will not fix the NPEs without recompilation. At this point it is nowhere clear to me if the issue can be fixed without requiring recompilation&lt;/p&gt;</comment>
                            <comment id="15894502" author="graemerocher1" created="Fri, 3 Mar 2017 14:54:13 +0000"  >&lt;p&gt;That is a big problem since we have existing libraries and plugins compiled with early version of Groovy 2.4.x that will simply fail with this NPE &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;</comment>
                            <comment id="15896566" author="githubbot" created="Sun, 5 Mar 2017 21:54:14 +0000"  >&lt;p&gt;GitHub user paulk-asert opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/508&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/508&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8107&quot; title=&quot;Binary incompatibility problems between compiled code in Groovy 2.4.7 vs 2.4.9&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8107&quot;&gt;&lt;del&gt;GROOVY-8107&lt;/del&gt;&lt;/a&gt;: Binary incompatibility problems between compiled code in&#8230;&lt;/p&gt;

&lt;p&gt;    &#8230; Groovy 2.4.7 vs 2.4.9&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/paulk-asert/groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/paulk-asert/groovy&lt;/a&gt; groovy8107&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/508.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/508.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #508&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit dbaabcac0e34341c19796d02bfd8c53a02ff2bbc&lt;br/&gt;
Author: paulk &amp;lt;paulk@asert.com.au&amp;gt;&lt;br/&gt;
Date:   2017-03-05T21:52:26Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8107&quot; title=&quot;Binary incompatibility problems between compiled code in Groovy 2.4.7 vs 2.4.9&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8107&quot;&gt;&lt;del&gt;GROOVY-8107&lt;/del&gt;&lt;/a&gt;: Binary incompatibility problems between compiled code in Groovy 2.4.7 vs 2.4.9&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15896572" author="paulk" created="Sun, 5 Mar 2017 22:08:43 +0000"  >&lt;p&gt;Jochen, the binary incompatibility isn&apos;t in any Groovy class itself but the generated trait helper classes were backward compatible only not forward compatible.&lt;/p&gt;

&lt;p&gt;The attached PR keeps both the old and new fields in the generated trait class and changes the priority to look for the new ones first. I&apos;d propose merging this and releasing 2.4.10. It should then allow traits compiled under 2.4.10 to be used from 2.4.7 which is what is failing now. Honoring of the final field wouldn&apos;t work in that case but the behavior would be equivalent to 2.4.7 behavior.&lt;/p&gt;

&lt;p&gt;I built a local 6.1.0.BUILD-SNAPSHOT of grails-data-mapping and the groovy-npe-test example now compiles.&lt;/p&gt;</comment>
                            <comment id="15896591" author="blackdrag" created="Sun, 5 Mar 2017 22:50:29 +0000"  >&lt;p&gt;What with code compiled using 2.4.8 or 2.4.9?&lt;/p&gt;</comment>
                            <comment id="15896621" author="paulk" created="Mon, 6 Mar 2017 00:14:24 +0000"  >&lt;p&gt;Traits compiled with 2.4.8 or 2.4.9 will work with 2.4.8+ (apart from the &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8048&quot; title=&quot;final fields for pre-compiled traits aren&amp;#39;t processed correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8048&quot;&gt;&lt;del&gt;GROOVY-8048&lt;/del&gt;&lt;/a&gt; bug) but not 2.4.7 and before (without recompiling the trait). We&apos;ll need to document that in known issues. It was a short-coming in my fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7584&quot; title=&quot;transient fields in trait are not transient in implementing class&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7584&quot;&gt;&lt;del&gt;GROOVY-7584&lt;/del&gt;&lt;/a&gt;. In hindsight, both &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7584&quot; title=&quot;transient fields in trait are not transient in implementing class&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7584&quot;&gt;&lt;del&gt;GROOVY-7584&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8048&quot; title=&quot;final fields for pre-compiled traits aren&amp;#39;t processed correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8048&quot;&gt;&lt;del&gt;GROOVY-8048&lt;/del&gt;&lt;/a&gt; should probably have been done just in the 2.5 branch and maintaining compatibility both ways should have been factored into the design. But given the current state of play, I&apos;d suggest merging the fix into 2.4.10 and we can decide later whether in 3.0 we&apos;d drop supporting the old style field naming convention.&lt;/p&gt;</comment>
                            <comment id="15900707" author="githubbot" created="Wed, 8 Mar 2017 05:05:24 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/508&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/508&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15900709" author="paulk" created="Wed, 8 Mar 2017 05:07:51 +0000"  >&lt;p&gt;Proposed PR merged&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12855810" name="groovy-npe-test.zip" size="217409" author="graemerocher1" created="Fri, 3 Mar 2017 09:41:08 +0000"/>
                            <attachment id="12855812" name="interceptor-issue.zip" size="332952" author="graemerocher1" created="Fri, 3 Mar 2017 09:47:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 36 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3awbz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>