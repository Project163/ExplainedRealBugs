<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:03:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-9292] Compilation error when accessing a protected super class field from a closure using owner, delegate or thisObject qualifier (different package)</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-9292</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Compilation fails when accessing a protected(via `thisObject`, `owner` and `delegate`)/package-private super class field from inside a closure:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GroovyShell().with {
  evaluate &apos;&apos;&apos;
    &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; a
    
    &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Abstract {
        &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; protectedField = &lt;span class=&quot;code-quote&quot;&gt;&apos;field&apos;&lt;/span&gt;
    }
    &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
    &apos;&apos;&apos;

  evaluate &apos;&apos;&apos;
    &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; b
    
    @groovy.transform.CompileStatic
    &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Concrete &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; a.Abstract {
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; doThing() {
            &lt;span class=&quot;code-quote&quot;&gt;&apos;something&apos;&lt;/span&gt;.with {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; owner.protectedField &lt;span class=&quot;code-comment&quot;&gt;// `thisObject.protectedField`, `delegate.protectedField` fails too
&lt;/span&gt;            }
        }
    }
    &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
    &apos;&apos;&apos;

  evaluate &lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; b.Concrete().doThing() == &lt;span class=&quot;code-quote&quot;&gt;&quot;field&quot;&lt;/span&gt;&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13264812">GROOVY-9292</key>
            <summary>Compilation error when accessing a protected super class field from a closure using owner, delegate or thisObject qualifier (different package)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daniel_sun">Daniel Sun</assignee>
                                    <reporter username="daniel_sun">Daniel Sun</reporter>
                        <labels>
                    </labels>
                <created>Mon, 28 Oct 2019 13:33:37 +0000</created>
                <updated>Sat, 11 Jul 2020 03:50:31 +0000</updated>
                            <resolved>Tue, 29 Oct 2019 14:42:35 +0000</resolved>
                                    <version>2.5.8</version>
                    <version>3.0.0-rc-1</version>
                                    <fixVersion>3.0.0-rc-2</fixVersion>
                    <fixVersion>2.5.13</fixVersion>
                                    <component>Static compilation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="7200">2h</timespent>
                                <comments>
                            <comment id="16961058" author="daniel_sun" created="Mon, 28 Oct 2019 13:51:59 +0000"  >&lt;p&gt;Here is the PR: &lt;a href=&quot;https://github.com/apache/groovy/pull/1048&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/1048&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16961112" author="emilles" created="Mon, 28 Oct 2019 14:49:56 +0000"  >&lt;p&gt;Is this an &quot;Access is forbidden&quot; compilation error?  Can you explain why enabling dynamic property is the chosen solution?  I still don&apos;t understand the implications of making these cases dynamic instead of finding where the access checks are.&lt;/p&gt;</comment>
                            <comment id="16961172" author="emilles" created="Mon, 28 Oct 2019 15:40:43 +0000"  >&lt;p&gt;Oh, that&apos;s interesting. Adding a &quot;this.&quot; qualifier works within and across packages. However adding &quot;owner.&quot; or &quot;thisObject.&quot; only works within the same package. I wonder if there is a package check in or down the line from StaticTypeCheckingVisitor that is testing the &quot;receiver&quot; and not the &quot;sender&quot; or vice versa.&lt;/p&gt;</comment>
                            <comment id="16961181" author="emilles" created="Mon, 28 Oct 2019 15:53:47 +0000"  >&lt;p&gt;The remaining unresolved test cases have shades of &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-9195&quot; title=&quot;STC: mixed checking for access to non-public fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-9195&quot;&gt;&lt;del&gt;GROOVY-9195&lt;/del&gt;&lt;/a&gt;.  The explicit-this and implicit-this cases work differently from the other object expression cases.&lt;/p&gt;</comment>
                            <comment id="16961228" author="daniel_sun" created="Mon, 28 Oct 2019 16:31:53 +0000"  >&lt;blockquote&gt;&lt;p&gt;Is this an &quot;Access is forbidden&quot; compilation error? Can you explain why enabling dynamic property is the chosen solution&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=emilles&quot; class=&quot;user-hover&quot; rel=&quot;emilles&quot;&gt;emilles&lt;/a&gt; The access forbidden error does not happen while checking type, actually it happens while writing call sites.&lt;/p&gt;


&lt;p&gt; Enabling the dynamic property can help call site writer to choose a valid approach to write call sites.&lt;br/&gt;
 &lt;a href=&quot;https://github.com/apache/groovy/blob/9be48ebff4b9cf31b02dcc7d627ddbcfdaf3d6a8/src/main/java/org/codehaus/groovy/classgen/asm/sc/StaticTypesCallSiteWriter.java#L127&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/blob/9be48ebff4b9cf31b02dcc7d627ddbcfdaf3d6a8/src/main/java/org/codehaus/groovy/classgen/asm/sc/StaticTypesCallSiteWriter.java#L127&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16961253" author="emilles" created="Mon, 28 Oct 2019 17:04:26 +0000"  >&lt;p&gt;Yes, I understand that setting RECEIVER_OF_DYNAMIC_PROPERTY to non-null will cause StaticTypesCallSiteWriter to choose a different path.  I&apos;m just not sure that the dynamic property path is the right choice to make here.  This path is not used to enable public fields, for example.  And I&apos;m not sure if it will enable unexpected behavior.&lt;/p&gt;</comment>
                            <comment id="16961291" author="emilles" created="Mon, 28 Oct 2019 17:48:15 +0000"  >&lt;p&gt;One difference I can see with this approach is that compiler errors for true forbidden accesses are replaced with dynamic property lookups that result in MissingPropertyExceptions at runtime.&lt;/p&gt;</comment>
                            <comment id="16961594" author="daniel_sun" created="Tue, 29 Oct 2019 01:44:37 +0000"  >&lt;p&gt;It is better to check if property is accessible while checking types. &quot;Access to ... is forbidden&quot; error actually means failing to write call sites, a more meaningful prompt should be &quot;Failed to make getProperty call site&quot;, which is a &lt;tt&gt;GroovyBugError&lt;/tt&gt; IMO.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="13264825">GROOVY-9293</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13263881">GROOVY-9288</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 3 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z080g0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>