<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:35:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-6194] Exclusive range operation results in wrong result with negative index</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-6194</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;The script:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; a = [1, 2, 3, 4]
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; a[-3..-2] == [2, 3]
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; a[-3..&amp;lt;-2] == [2]
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; a[2..-3] == [3, 2]
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; a[1..-1] == [2, 3, 4]
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; a[1..&amp;lt;-1] == [2, 3]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;when executed, results in:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caught: Assertion failed: 

assert a[1..&amp;lt;-1] == [2, 3]
       ||        |
       |[2, 1]   false
       [1, 2, 3, 4]

Assertion failed: 

assert a[1..&amp;lt;-1] == [2, 3]
       ||        |
       |[2, 1]   false
       [1, 2, 3, 4]

	at rangeSpecs.run(rangeSpecs.groovy:8)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I do not understand the last result here, i.e. that the wrong result happens.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12816897">GROOVY-6194</key>
            <summary>Exclusive range operation results in wrong result with negative index</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="russel">Dr. Russel Winder</reporter>
                        <labels>
                            <label>breaking</label>
                    </labels>
                <created>Tue, 4 Jun 2013 03:22:59 +0000</created>
                <updated>Mon, 14 Oct 2013 16:53:56 +0000</updated>
                            <resolved>Wed, 18 Sep 2013 07:52:26 +0000</resolved>
                                                    <fixVersion>2.2.0-rc-1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14480288" author="paulk" created="Tue, 4 Jun 2013 18:03:26 +0000"  >&lt;p&gt;Just to flesh out possible further inconsistencies, what would you expect from:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;a[-2..&amp;lt;1]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It currently doesn&apos;t equal what you get from this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;a[-2..&amp;lt;-3]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The current formula in &lt;tt&gt;DefaultGroovyMethodsSupport#subListBorders&lt;/tt&gt; is using &lt;tt&gt;range.isReverse()&lt;/tt&gt; in the calculation which I suspect we cannot use.&lt;/p&gt;</comment>
                            <comment id="14480299" author="paulk" created="Wed, 5 Jun 2013 00:01:18 +0000"  >&lt;p&gt;My suspicion is that &lt;tt&gt;DefaultGroovyMethodsSupport#subListBorders&lt;/tt&gt; should use &lt;tt&gt;boolean reverse = from &amp;gt; to;&lt;/tt&gt; and not use the &quot;guessed&quot; value of reverse from the original range object.&lt;/p&gt;</comment>
                            <comment id="14480276" author="paulk" created="Sun, 9 Jun 2013 21:50:54 +0000"  >&lt;p&gt;My suspicion was only partially accurate. It turns out that the Range abstraction when dealing with inclusive/exclusive and negative index values is a lossy abstraction. There simply isn&apos;t enough information retained in the current implementation to deduce the correct values. Here is a spike which would correct the problem:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/paulk-asert/groovy-core/commit/20f7f4cee&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/paulk-asert/groovy-core/commit/20f7f4cee&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Why is it a spike? I haven&apos;t added tests or removed the &quot;legacy&quot; implementation in several places. We should discuss if everyone is happy with this breaking change first. After this change, the following script runs successfully:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; a = [1, 2, 3, 4]
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; a[-3..-2] == [2, 3]
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; a[-3..&amp;lt;-2] == [2]
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; a[2..-3] == [3, 2]
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; a[1..-1] == [2, 3, 4]
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; a[1..&amp;lt;-1] == [2, 3]
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; a[-2..&amp;lt;1] == [3]
&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; a[-2..&amp;lt;-3] == [3]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14480353" author="paulk" created="Wed, 18 Sep 2013 07:54:30 +0000"  >&lt;p&gt;Flagging as a breaking change - though it really is only the broken cases which have changed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 9 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bwtj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>