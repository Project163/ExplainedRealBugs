<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:22:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-11060] SC internal error when spreading inside list literal</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-11060</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Spreading a list inside brackets causes a &lt;tt&gt;SpreadExpression should not be visited here&lt;/tt&gt; during class generation. (The business instance of this is trying to use a list of URL patterns for Spring &lt;tt&gt;antMatchers&lt;/tt&gt;.)&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Bug {
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; A = [&lt;span class=&quot;code-quote&quot;&gt;&apos;a1&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;a2&apos;&lt;/span&gt;]

    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void varargs(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;... strings) {
        println Arrays.toString(strings)
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;... args) {
        varargs([
            *A
        ] as &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[])
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13536323">GROOVY-11060</key>
            <summary>SC internal error when spreading inside list literal</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="chrylis">Christopher Smith</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 May 2023 22:12:29 +0000</created>
                <updated>Wed, 23 Aug 2023 09:11:17 +0000</updated>
                            <resolved>Mon, 22 May 2023 17:07:37 +0000</resolved>
                                    <version>4.0.12</version>
                                    <fixVersion>5.0.0-alpha-1</fixVersion>
                                    <component>Static compilation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17723322" author="emilles" created="Wed, 17 May 2023 02:32:55 +0000"  >&lt;p&gt;You should be able to do &#8220;A as String[]&#8221; or &#8220;A.toArray(String)&#8221; &#8212; I&#8217;d have to double check the availability of the toArray DGM. &lt;/p&gt;</comment>
                            <comment id="17723327" author="chrylis" created="Wed, 17 May 2023 03:02:00 +0000"  >&lt;p&gt;I have a workaround with &quot;plus&quot;, so it&apos;s not a blocker, just clunky.&lt;/p&gt;

</comment>
                            <comment id="17723424" author="emilles" created="Wed, 17 May 2023 11:52:12 +0000"  >&lt;p&gt;What&#8217;s clunky? The plus sequence? The spread into list in the example creates a list. Then you as into an array. &lt;del&gt;Now that I look at it, you should be able to just use *A as your argument expression.&lt;/del&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
@CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Groovy11060 {
  public static final List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; A_LIST = [&lt;span class=&quot;code-quote&quot;&gt;&apos;a1&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;a2&apos;&lt;/span&gt;]

  static void varargs(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;... strings) {
    println Arrays.toString(strings)
  }

  static main(args) {
    varargs(*A_LIST) &lt;span class=&quot;code-comment&quot;&gt;// GROOVY-10597
&lt;/span&gt;    varargs(A_LIST &lt;span class=&quot;code-keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[])
    varargs(A_LIST.toArray(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[0]))
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17723506" author="chrylis" created="Wed, 17 May 2023 15:21:34 +0000"  >&lt;p&gt;The code in the description is an MCVE. The actual use case is &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
antMatchers([
  &lt;span class=&quot;code-quote&quot;&gt;&apos;/health&apos;&lt;/span&gt;,
  *STATIC_RESOURCES,
  *PUBLIC_ENDPOINTS
] as &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;which is a workaround for &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-10597&quot; title=&quot;STC: support spread arguments for varargs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-10597&quot;&gt;&lt;del&gt;GROOVY-10597&lt;/del&gt;&lt;/a&gt;. I can use &lt;tt&gt;(&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;/health&amp;#39;&amp;#93;&lt;/span&gt; + STATIC_RESOURCES + PUBLIC_ENDPOINTS) as String[]&lt;/tt&gt; for now.&lt;/p&gt;</comment>
                            <comment id="17723520" author="emilles" created="Wed, 17 May 2023 15:42:57 +0000"  >&lt;p&gt;Thanks.&#160; The extra bit of context is helpful.&#160; Sometimes minimal to trigger the error is too minimal to understand intent/usage.&#160; I take it the docs for list literals, spread arguments and static compilation are sparse for this case.&#160; In general, spread arguments are not well supported by static compilation &#8211; de-spreading is a &lt;tt&gt;ScriptBytecodeAdapter&lt;/tt&gt; operation (which indicates run-time behavior).&lt;/p&gt;</comment>
                            <comment id="17724547" author="emilles" created="Sat, 20 May 2023 15:41:52 +0000"  >&lt;p&gt;The root issue is missing support for spread in arrays. `&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;x&amp;#39;, *Y&amp;#93;&lt;/span&gt; as String[]` is transformed to `new String[]{&apos;x&apos;, *Y}` in &lt;tt&gt;CastExpressionOptimizer&lt;/tt&gt;. If you break it up as `List&amp;lt;String&amp;gt; list = &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;x&amp;#39;, *Y&amp;#93;&lt;/span&gt;; antMatchers(list as String[])` it works.&lt;/p&gt;</comment>
                            <comment id="17725041" author="emilles" created="Mon, 22 May 2023 17:07:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/groovy/commit/ce62aff0e69cc2da564d9a340c7826d3e419289c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/ce62aff0e69cc2da564d9a340c7826d3e419289c&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13537206">GROOVY-11067</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13441891">GROOVY-10599</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13441660">GROOVY-10597</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 25 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1hwwg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>