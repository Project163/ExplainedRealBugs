<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:08:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-3163] static foo(Closure) hides super.foo(Bar)</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-3163</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Trying to implement a member function with the same name but different parameter signature and using super to call the parent&apos;s implementation is blocked by having a static method of the same name with a Closure parameter.&lt;/p&gt;

&lt;p&gt;This may not be really about Closure and/or Script because a similar (but different) error if there is a static method with a different parameter type.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12814439">GROOVY-3163</key>
            <summary>static foo(Closure) hides super.foo(Bar)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jimwhite">James P. White</assignee>
                                    <reporter username="jimwhite">James P. White</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Nov 2008 18:34:42 +0000</created>
                <updated>Tue, 23 Dec 2008 05:58:07 +0000</updated>
                            <resolved>Thu, 27 Nov 2008 11:58:26 +0000</resolved>
                                    <version>1.5.7</version>
                    <version>1.6-beta-2</version>
                                    <fixVersion>1.6-rc-1</fixVersion>
                    <fixVersion>1.5.8</fixVersion>
                    <fixVersion>1.7-beta-1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14465691" author="jimwhite" created="Thu, 20 Nov 2008 19:01:42 +0000"  >&lt;p&gt;Ah, well the test works better when it doesn&apos;t have syntax errors.&lt;/p&gt;

&lt;p&gt;Java does indeed allow static functions with the same name as a member in the parent (which is the way I thought it worked!).&lt;/p&gt;</comment>
                            <comment id="14465694" author="roshandawrani" created="Sun, 23 Nov 2008 05:45:14 +0000"  >&lt;p&gt;I would like to add that this issue is not really related to inheritance (static method hiding the parent class implementation). The StaticImportVisitor is not resolving the method call correctly.&lt;/p&gt;

&lt;p&gt;The following code also fails:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;SomeImplementorWithStatic{
    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; build(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; c) {&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; c} &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; method is present, calls made as &quot;build(1), &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.build(1) fail
&lt;/span&gt;    void m(){
    	build(1) &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.build(1) also fails
&lt;/span&gt;    }
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; build(&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; i) {println &lt;span class=&quot;code-quote&quot;&gt;&quot;Call successful&quot;&lt;/span&gt;}
}
&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SomeImplementorWithStatic().m()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The problem is caused by StaticImportVisitor.transformMethodCallExpression(). It checks if the current class has a possible static method, and if it does, it maps the method call to that function. The problem is that it goes only by method name and number of arguments.&lt;/p&gt;

&lt;p&gt;So, in above case, during compilation process, it finds static method &quot;build&quot; with 1 argument and incorrectly maps the call &quot;build(1)&quot; to this static method. At run time the call fails because the type of argument is different.&lt;/p&gt;

&lt;p&gt;rgds,&lt;br/&gt;
Roshan&lt;/p&gt;</comment>
                            <comment id="14465687" author="roshandawrani" created="Sun, 23 Nov 2008 06:04:13 +0000"  >&lt;p&gt;I think StaticImportVisitor needs to look at whether the method call expression, which it is trying to transform, is inside a static method or non-static method.&lt;/p&gt;

&lt;p&gt;If it is happening inside a non-static method, it should check if there is a possible instance level method before trying to look for a possible static method.&lt;/p&gt;

&lt;p&gt;If it is happening inside a static method, it should straight away do what it does currently - to see if there is a possible static method.&lt;/p&gt;

&lt;p&gt;But I am a little unsure if this is the best that can be done, so, for now, waiting for more inputs.&lt;/p&gt;</comment>
                            <comment id="14465708" author="roshandawrani" created="Sun, 23 Nov 2008 11:01:46 +0000"  >&lt;p&gt;Thinking more of the solution earlier suggested, I feel convinced that it is a correct solution. I have attached the patches for branches 1.5.8, 1.6-RC-1 and 1.7-beta-1 branches.&lt;/p&gt;

&lt;p&gt;It solves the issue reported with static method shadowing non-static methods in current and super classes and I have run the build tests in all the branches.&lt;/p&gt;

&lt;p&gt;rgds,&lt;br/&gt;
Roshan&lt;/p&gt;</comment>
                            <comment id="14465696" author="blackdrag" created="Mon, 24 Nov 2008 06:12:44 +0000"  >&lt;p&gt;I looked at the 1.7 patch and it does look good to me&lt;/p&gt;</comment>
                            <comment id="14465685" author="jimwhite" created="Mon, 24 Nov 2008 18:44:14 +0000"  >&lt;p&gt;I tried the proposed patch, and while it doesn&apos;t cause any failures on the existing test cases, it doesn&apos;t enable the test for this bug to pass.&lt;/p&gt;

&lt;p&gt;I&apos;ve packaged the test as a test case and it is attached as a diff (groovy-3163-test.txt).&lt;/p&gt;</comment>
                            <comment id="14465641" author="roshandawrani" created="Mon, 24 Nov 2008 20:35:19 +0000"  >&lt;p&gt;I tested the patches again. Let me now explain that it is your new test case that has 2 bugs in it and there is no issue in patches. Please test it more carefully and I will be happy to look into any issues found in the patch.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testSuperOverStatic()
{
    def siws = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SomeImplementorWithStatic()

    &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; (1 == siws.build(1)) &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; goes through as it has no bugs :-)
&lt;/span&gt;
/* 
    Roshan - In your original testcase, such assertions were in a 
    script (TestOverrideWithSuper.groovy), so siws.build(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;) call was supposed 
    to map to SomeImplementorWithStatic.build(Script s). Now that assertion is inside 
    the &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;and &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;&quot;&lt;/span&gt; is no longer an instance of Script, so it can not map to build(Script), right? Which build version are you expecting it to get called? &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; / BigInteger / &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; / Script / Closure version?
*/
    &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; == siws.build(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;))
/* 
    Roshan - Next assertion is wrong too. You are passing a closure and method SomeImplementorWithStatic.build(Closure) returns the closure itself but you are comparing it to a &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;. Of-course, the assertion will fail.

To, test the closure version call, use:

	    def cl = { &lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt; }
	    &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; (cl == siws.build(cl))

*/

    &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt; == siws.build { &lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt; })
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="14465582" author="roshandawrani" created="Mon, 24 Nov 2008 20:51:40 +0000"  >&lt;p&gt;Is there any way I can edit a comment after I post it? The previous comment has gone too much to the right and I could see it only after posting it. I would have liked editing it with proper line breaks. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;In the meanwhile, can someone please put the line breaks in the previous comment for me?&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="14465665" author="paulk" created="Mon, 24 Nov 2008 23:17:59 +0000"  >&lt;p&gt;If you are logged in, you should be able to edit your own comments. Unless I have slightly elevated permissions. I know I can&apos;t edit other people&apos;s comments.&lt;/p&gt;

&lt;p&gt;Just click &apos;Edit&apos; in the menu over on the far right:  [ Permlink  | Edit  | Delete  | &#171; Hide  ]&lt;/p&gt;</comment>
                            <comment id="14465747" author="roshandawrani" created="Mon, 24 Nov 2008 23:27:44 +0000"  >&lt;p&gt;Looks like a permission thing. I see only [ Permlink  | &#171; Hide  ] for my own comments as well.&lt;/p&gt;

&lt;p&gt;Being able to edit my own comments is something that would be very useful. if I sometimes make any typing errors or want to reword something to avoid any confusion, it&apos;ll help very much.&lt;/p&gt;</comment>
                            <comment id="14465736" author="jimwhite" created="Mon, 24 Nov 2008 23:42:29 +0000"  >&lt;p&gt;Sorry for the bad test conversion.  Just trying to make prompt use of your contribution even though I really need to spend my time on other projects right now.&lt;/p&gt;

&lt;p&gt;Anyhow, I&apos;ve fixed up the unit test (well, more like turned it into an ugly mess &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; so it fails without the patch and succeeds with it.&lt;/p&gt;

&lt;p&gt;Committed to trunk (cs14142).&lt;/p&gt;</comment>
                            <comment id="14465676" author="roshandawrani" created="Mon, 24 Nov 2008 23:59:51 +0000"  >&lt;p&gt;I am glad that it is now found working as expected.&lt;/p&gt;

&lt;p&gt;I am sorry if you found my last comment on the side of rudeness. How I wish I could have been able to re-word it a little to not make it too curt. I saw your comment first thing in the morning and got a little annoyed seeing that the patch was fine &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Please do not take any offense. From now, coffee first and then JIRA comments!&lt;/p&gt;

&lt;p&gt;Also, I have a doubt regarding the process. Since the issue is found in all 1.5.8, 1.6 and 1.7 branches and patches are also supplied for all 3, at what stage do the changes make it to the other branches like 1.5.8/1.6? Does it need to follow some process (like testing of patch on trunk first) before changes are also applied on other branches?&lt;/p&gt;

&lt;p&gt;thanks,&lt;br/&gt;
Roshan&lt;/p&gt;</comment>
                            <comment id="14465724" author="jimwhite" created="Tue, 25 Nov 2008 00:09:48 +0000"  >&lt;p&gt;I understand the difficulties in electronic communication and most definitely can relate to the need for caffeine!&lt;/p&gt;

&lt;p&gt;I like to let changes that have the potential for unintended consequences (especially when I don&apos;t clearly know exactly what they are doing!) to sit a little while and start with the least stable branch and move it along to the more stable (trunk, then 1.6.x, then 1.5.x).  I&apos;ve taken it from Jochen&apos;s comment that he&apos;s OK with it being committed and apparently has left it to me (I&apos;ll assign it to myself to find out...).&lt;/p&gt;
</comment>
                            <comment id="14465700" author="jimwhite" created="Wed, 26 Nov 2008 13:10:41 +0000"  >&lt;p&gt;Merged to 1.6.&lt;/p&gt;</comment>
                            <comment id="14465681" author="jimwhite" created="Wed, 26 Nov 2008 14:35:06 +0000"  >&lt;p&gt;Merged to 1.5.&lt;/p&gt;</comment>
                            <comment id="14465784" author="blackdrag" created="Thu, 27 Nov 2008 11:40:03 +0000"  >&lt;p&gt;to be closed?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12720976" name="3163_v15x.diff" size="1333" author="roshandawrani" created="Sun, 23 Nov 2008 11:01:46 +0000"/>
                            <attachment id="12721850" name="3163_v16x.diff" size="1333" author="roshandawrani" created="Sun, 23 Nov 2008 11:01:46 +0000"/>
                            <attachment id="12722084" name="3163_v17x.diff" size="1333" author="roshandawrani" created="Sun, 23 Nov 2008 11:01:46 +0000"/>
                            <attachment id="12722015" name="SomeBaseClass.java" size="368" author="jimwhite" created="Thu, 20 Nov 2008 18:34:42 +0000"/>
                            <attachment id="12721714" name="SomeImplementorWithStatic.groovy" size="708" author="jimwhite" created="Thu, 20 Nov 2008 18:34:42 +0000"/>
                            <attachment id="12720971" name="SomeJavaImplementorWithStatic.java" size="773" author="jimwhite" created="Thu, 20 Nov 2008 19:06:35 +0000"/>
                            <attachment id="12722085" name="TestOverrideWithSuper.groovy" size="334" author="jimwhite" created="Thu, 20 Nov 2008 18:34:42 +0000"/>
                            <attachment id="12721851" name="groovy-3163-test.txt" size="1416" author="jimwhite" created="Mon, 24 Nov 2008 18:44:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bsp3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>