<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:00:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-8882] CS: Loop over elements of String has different element type</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-8882</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;When the method below is executed as-is, the output is &quot;java.lang.String&quot; x3.  When &lt;tt&gt;@CompileStatic&lt;/tt&gt; is uncommented, the output is &quot;java.lang.Character&quot; x3.  Is it possible to have dynamic groovy match the static compilation result?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;//@groovy.transform.CompileStatic
&lt;/span&gt;void meth() {
  &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (c &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;abc&apos;&lt;/span&gt;)
    println c.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;name
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Similarly, &lt;tt&gt;&apos;abc&apos;*.anything&lt;/tt&gt; applies to Strings of length one instead of Characters.  Although, spread-dot is not supported against strings under static compilation.  Is it possible to add that support?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13198958">GROOVY-8882</key>
            <summary>CS: Loop over elements of String has different element type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="emilles">Eric Milles</reporter>
                        <labels>
                            <label>breaking</label>
                    </labels>
                <created>Fri, 16 Nov 2018 16:14:25 +0000</created>
                <updated>Wed, 16 Jan 2019 12:07:23 +0000</updated>
                            <resolved>Sun, 25 Nov 2018 20:20:08 +0000</resolved>
                                    <version>2.4.15</version>
                                    <fixVersion>3.0.0-alpha-4</fixVersion>
                    <fixVersion>2.5.5</fixVersion>
                                    <component>Static compilation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16693890" author="paulk" created="Tue, 20 Nov 2018 23:22:14 +0000"  >&lt;p&gt;Even this exhibits the &lt;tt&gt;Character&lt;/tt&gt; coercion behavior with CS:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; c in &lt;span class=&quot;code-quote&quot;&gt;&apos;abc&apos;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This does &lt;tt&gt;Character&lt;/tt&gt; coercion with and without CS as I&apos;d expect:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;Character&lt;/span&gt; c in &lt;span class=&quot;code-quote&quot;&gt;&apos;abc&apos;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16693900" author="paulk" created="Tue, 20 Nov 2018 23:42:51 +0000"  >&lt;p&gt;Seems like an inconsistency to me but has been that way since the early days of CS:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/groovy/blob/master/src/main/java/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java#L1934&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/blob/master/src/main/java/org/codehaus/groovy/transform/stc/StaticTypeCheckingVisitor.java#L1934&lt;/a&gt;&lt;br/&gt;
The good news is that no tests break changing it from Character_TYPE to STRING_TYPE.&lt;/p&gt;</comment>
                            <comment id="16694225" author="githubbot" created="Wed, 21 Nov 2018 04:36:43 +0000"  >&lt;p&gt;GitHub user paulk-asert opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/827&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/827&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8882&quot; title=&quot;CS: Loop over elements of String has different element type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8882&quot;&gt;&lt;del&gt;GROOVY-8882&lt;/del&gt;&lt;/a&gt;: CS: Loop over elements of String has different element type&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/paulk-asert/groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/paulk-asert/groovy&lt;/a&gt; groovy8882&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/827.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/827.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #827&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit d4c0adc71ea1b2ebbd38740e6a89819a062bac24&lt;br/&gt;
Author: Paul King &amp;lt;paulk@...&amp;gt;&lt;br/&gt;
Date:   2018-11-21T04:35:36Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8882&quot; title=&quot;CS: Loop over elements of String has different element type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8882&quot;&gt;&lt;del&gt;GROOVY-8882&lt;/del&gt;&lt;/a&gt;: CS: Loop over elements of String has different element type&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16695932" author="emilles" created="Thu, 22 Nov 2018 14:02:34 +0000"  >&lt;p&gt;Is it possible to have dynamic groovy match the CS choice?  I think it better to support iteration over characters and this could be extended to anything that implements CharSequence.&lt;/p&gt;</comment>
                            <comment id="16696274" author="paulk" created="Thu, 22 Nov 2018 21:55:54 +0000"  >&lt;p&gt;For consistency, I think the proposed change is the only one we can consider. We&apos;d like the internal and external iterator approaches to have similar behavior and both dynamic Groovy and CS use String for the internal iterators.&lt;br/&gt;
Additional detail: InvokerHelper.asIterator() on a String returns an iterator of String, so String is used as the parameter type for:&lt;br/&gt;
each, eachWithIndex, any, every, count, collect, find, findAll, findResult, grep, retainAll, removeAll, split, inject, findIndexOf, findLastIndexOf, findIndexValues, etc.&lt;/p&gt;</comment>
                            <comment id="16697643" author="githubbot" created="Sat, 24 Nov 2018 04:45:26 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/groovy/pull/827&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/pull/827&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16698275" author="paulk" created="Sun, 25 Nov 2018 20:20:08 +0000"  >&lt;p&gt;Proposed PR merged. Thanks for spotting the issue.&lt;/p&gt;</comment>
                            <comment id="16699164" author="emilles" created="Mon, 26 Nov 2018 15:38:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paulk&quot; class=&quot;user-hover&quot; rel=&quot;paulk&quot;&gt;paulk&lt;/a&gt; Thanks for the clarification on consistency with each, et al.  Is there any hope of supporting spread-dot on strings/char sequences under CompileStatic?  There seems to be a restriction so that spread-dot only applies to Collection types at the moment.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 51 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s00l8g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>