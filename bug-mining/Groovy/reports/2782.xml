<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:43:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-9176] Syntactic sugar for set method calls in conflict with class member declarations</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-9176</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Groovy 3.0.0 beta 1 has broken code that earlier worked in Alpha 4:&lt;br/&gt;
Say you have a Java class with a setTitle(String) method. Now you override this class with a Groovy class. In it you declare the following member variable:&lt;/p&gt;

&lt;p&gt;JLabel title = new JLabel(&quot;skin&quot;);&lt;/p&gt;

&lt;p&gt;This breaks the Groovy compiler in v3.0.0 beta 1 (but not alpha 4) with the following error:&lt;br/&gt;
The return type of javax.swing.JLabel getTitle() in Script34$1$12 is incompatible with java.lang.String in se.datadosen.component.ControlPanel&lt;br/&gt;
. At &lt;span class=&quot;error&quot;&gt;&amp;#91;-1:-1&amp;#93;&lt;/span&gt;&#160; @ line -1, column -1.&lt;/p&gt;

&lt;p&gt;Two things are noteworthy here:&lt;br/&gt;
1) The line number references (-1) are broken&lt;br/&gt;
2) Instead of letting the declared &quot;title&quot; variable hide the ability to call setTitle on the base class using the syntactic sugar of Groovy (foo = being syntactic sugar for setFoo(...)), it now bails out with this error, breaking Java compatibility. I expected this declaration to be allowed and simply hide the ability to call setTitle on the base class via that syntactic sugar.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13240053">GROOVY-9176</key>
            <summary>Syntactic sugar for set method calls in conflict with class member declarations</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="paulk">Paul King</assignee>
                                    <reporter username="davidekholm">David Ekholm</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Jun 2019 20:32:37 +0000</created>
                <updated>Mon, 22 Jul 2019 04:21:57 +0000</updated>
                            <resolved>Tue, 2 Jul 2019 07:50:12 +0000</resolved>
                                    <version>3.0.0-beta-1</version>
                                    <fixVersion>2.5.8</fixVersion>
                    <fixVersion>3.0.0-beta-2</fixVersion>
                                    <component>Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="16866660" author="emilles" created="Tue, 18 Jun 2019 14:39:18 +0000"  >&lt;p&gt;Like this?&lt;/p&gt;

&lt;p&gt;Pojo.java:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Pojo {
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; title;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getTitle() { &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.title; }
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setTitle(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; title) { &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.title = title; }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Pogo.groovy:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; javax.swing.JLabel
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Pogo &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Pojo {
  JLabel title = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JLabel(&lt;span class=&quot;code-quote&quot;&gt;&apos;skin&apos;&lt;/span&gt;)
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If this is what you are referring to, the &quot;title&quot; member is a property in Pogo.  If you add &quot;public&quot;, &quot;private&quot;, &quot;protected&quot; or &quot;@PackageScope&quot; in front of it, it will be a field instead and you can refer to it or the parent classes &quot;title&quot; field/accessors as well.&lt;/p&gt;</comment>
                            <comment id="16866673" author="davidekholm" created="Tue, 18 Jun 2019 14:53:42 +0000"  >&lt;p&gt;Yes, I meant just like the code you outlined. The thing is that this has worked in v3 beta 4. Shouldn&apos;t the&lt;br/&gt;
JLabel title = new JLabel(&apos;skin&apos;&lt;br/&gt;
declaration simply hide the super class&apos;s title property?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16866680" author="emilles" created="Tue, 18 Jun 2019 15:03:24 +0000"  >&lt;p&gt;If the superclass was only providing a field, then yes you could hide it without error.  In this case you are also dealing with generated method overrides &lt;tt&gt;getTitle&lt;/tt&gt; and &lt;tt&gt;setTitle&lt;/tt&gt;.  Since the Groovy compiler is creating new methods, it is also verifying that the override is correct according to Java spec.  So the error, IMO is the right path.&lt;/p&gt;

&lt;p&gt;If your superclass only provides &quot;setTitle&quot; and not &quot;getTitle&quot;, you can make your property final and there will not be a generated setter.  Otherwise, I would recommend making it a field which gives you the option for hiding field(s) in the parent hierarchy.&lt;/p&gt;</comment>
                            <comment id="16866683" author="davidekholm" created="Tue, 18 Jun 2019 15:06:39 +0000"  >&lt;p&gt;Is this an intended behavioral change between Groovy v3 Alpha 4 and Groovy v3 beta 1?&lt;/p&gt;</comment>
                            <comment id="16866686" author="emilles" created="Tue, 18 Jun 2019 15:09:25 +0000"  >&lt;p&gt;There have been some bug fixes in the override/covariant method checks.  There should be some more coming in beta 2.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Update&lt;/b&gt;: It may indeed be a bug that you have &quot;setTitle(String)&quot; in the parent and &quot;setTitle(JLabel)&quot; in the child.  There are indeed not covariant nor overrides.&lt;/p&gt;</comment>
                            <comment id="16866695" author="davidekholm" created="Tue, 18 Jun 2019 15:17:36 +0000"  >&lt;p&gt;Well, I&apos;m not declaring a setTitle in the child. I simply declared a member variable having the same name as a member variable of the super class. I simply did was was ok in Java and what was also ok in Groovy prior to this update. If you feel that making Groovy less Java compatible is the way to go...&lt;/p&gt;</comment>
                            <comment id="16866758" author="emilles" created="Tue, 18 Jun 2019 15:27:08 +0000"  >&lt;p&gt;When you declare a Groovy property, the Groovy compiler generates accessor methods.  You can verify this in the bytecode of your class file.&lt;/p&gt;

&lt;p&gt;I am saying that you can choose one of several workarounds for this bug if you wish to continue to use Groovy 3.0b1.  Additionally, I concur there is a bug here that needs attention.  I may be able to trace the source of the bug later today now that I have confirmed the source code that recreates.&lt;/p&gt;</comment>
                            <comment id="16866985" author="emilles" created="Tue, 18 Jun 2019 19:33:00 +0000"  >&lt;p&gt;So the override error comes from &quot;getTitle()&quot; not &quot;setTitle(String)/setTitle(JLabel)&quot;.&#160; Verifier&#160;performs covariant/override checking, as I mentioned above. The &lt;tt&gt;RuntimeParserException&lt;/tt&gt;&#160;below is where the compiler error is created:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; MethodNode getCovariantImplementation(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; MethodNode oldMethod, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; MethodNode overridingMethod, Map genericsSpec, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; ignoreError) {
        &lt;span class=&quot;code-comment&quot;&gt;// method name
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!oldMethod.getName().equals(overridingMethod.getName())) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((overridingMethod.getModifiers() &amp;amp; ACC_BRIDGE) != 0) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (oldMethod.isPrivate()) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;

        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (oldMethod.getGenericsTypes() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
            genericsSpec = addMethodGenerics(oldMethod, genericsSpec);

        &lt;span class=&quot;code-comment&quot;&gt;// parameters
&lt;/span&gt;        &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; normalEqualParameters = equalParametersNormal(overridingMethod, oldMethod);
        &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; genericEqualParameters = equalParametersWithGenerics(overridingMethod, oldMethod, genericsSpec);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!normalEqualParameters &amp;amp;&amp;amp; !genericEqualParameters) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;

        &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; type
&lt;/span&gt;        ClassNode mr = overridingMethod.getReturnType();
        ClassNode omr = oldMethod.getReturnType();
        &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; equalReturnType = mr.equals(omr);

        ClassNode testmr = correctToGenericsSpec(genericsSpec, omr);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!isAssignable(mr, testmr)) {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ignoreError) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeParserException(
                    &lt;span class=&quot;code-quote&quot;&gt;&quot;The &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; type of &quot;&lt;/span&gt; +
                            overridingMethod.getTypeDescriptor() +
                            &lt;span class=&quot;code-quote&quot;&gt;&quot; in &quot;&lt;/span&gt; + overridingMethod.getDeclaringClass().getName() +
                            &lt;span class=&quot;code-quote&quot;&gt;&quot; is incompatible with &quot;&lt;/span&gt; + testmr.getName() +
                            &lt;span class=&quot;code-quote&quot;&gt;&quot; in &quot;&lt;/span&gt; + oldMethod.getDeclaringClass().getName(),
                    overridingMethod);
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16867145" author="emilles" created="Wed, 19 Jun 2019 00:38:16 +0000"  >&lt;p&gt;The error message can be associated with the property node by wrapping the &quot;overridingMethod&quot; argument in each of the &quot;new RuntimeParserException&quot; expressions using:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; org.codehaus.groovy.ast.ASTNode sourceNode(MethodNode methodNode) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (methodNode.getLineNumber() &amp;lt; 1) {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (methodNode.isSynthetic()) {
                &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; propertyName = org.apache.groovy.ast.tools.MethodNodeUtils.getPropertyName(methodNode);
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (propertyName != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                    PropertyNode propertyNode = methodNode.getDeclaringClass().getProperty(propertyName);
                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (propertyNode != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; propertyNode.getLineNumber() &amp;gt; 0) {
                        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; propertyNode;
                    }
                }
            }
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; methodNode.getDeclaringClass();
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; methodNode;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This could be incorporated into the exception so that this happens from wherever it is created.&lt;/p&gt;</comment>
                            <comment id="16867336" author="davidekholm" created="Wed, 19 Jun 2019 08:21:07 +0000"  >&lt;p&gt;Great that you&apos;re on to it Eric. I should have said that I made a simple workaround by renaming the JLabel to something else than title. Just wanted to have it reported so Groovy can stay as close to Java as possible while in most cases retain its nice enhancements.&lt;/p&gt;</comment>
                            <comment id="16876755" author="paulk" created="Tue, 2 Jul 2019 07:50:12 +0000"  >&lt;p&gt;Thanks Eric, I have merged the PR. For those reading this later, the compiler still rejects some classes that may have accidentally worked&#160;in earlier versions of Groovy but there is now a better error message indicating&#160;the reason behind the stricter checking.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 20 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z03u74:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>