<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 00:58:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-7753] regression of return type from ternary operator</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-7753</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;In Groovy 2.4.5 the following code works, but in Groovy 2.4.6, it fails to compile:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@groovy.transform.Field
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; x = &lt;span class=&quot;code-quote&quot;&gt;&quot;X&quot;&lt;/span&gt;

@groovy.transform.CompileStatic
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; getStrings() {
	x ? [x] : Collections.emptyList()
}

getStrings()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In Groovy 2.4.6 the compile error is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[Static type checking] - Incompatible &lt;span class=&quot;code-keyword&quot;&gt;generic&lt;/span&gt; argument types. Cannot assign java.util.List &amp;lt;? &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; to: java.util.List &amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;
 @ line 6, column 2.
    x ? [x] : Collections.emptyList()
    ^
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Workaround is to cast the result of emptyList to the erased type, (List) in this case.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12938328">GROOVY-7753</key>
            <summary>regression of return type from ternary operator</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daniel_sun">Daniel Sun</assignee>
                                    <reporter username="gillius">Jason Winnebeck</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Feb 2016 20:46:32 +0000</created>
                <updated>Thu, 26 Jul 2018 04:38:59 +0000</updated>
                            <resolved>Mon, 14 May 2018 10:57:55 +0000</resolved>
                                    <version>2.4.6</version>
                                    <fixVersion>2.6.0-alpha-4</fixVersion>
                    <fixVersion>3.0.0-alpha-3</fixVersion>
                    <fixVersion>2.5.0-rc-3</fixVersion>
                                    <component>Static compilation</component>
                    <component>Static Type Checker</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="15149107" author="pascalschumacher" created="Tue, 16 Feb 2016 19:05:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jwagenleitner&quot; class=&quot;user-hover&quot; rel=&quot;jwagenleitner&quot;&gt;jwagenleitner&lt;/a&gt; I think it is not related to &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7598&quot; title=&quot;type checking with generics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7598&quot;&gt;&lt;del&gt;GROOVY-7598&lt;/del&gt;&lt;/a&gt;, because &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7598&quot; title=&quot;type checking with generics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7598&quot;&gt;&lt;del&gt;GROOVY-7598&lt;/del&gt;&lt;/a&gt; is fixed in current master (at least the test from your pull request passes), but this still fails.&lt;/p&gt;</comment>
                            <comment id="15149206" author="jwagenleitner" created="Tue, 16 Feb 2016 19:58:28 +0000"  >&lt;p&gt;I should have commented when I linked the issues that I believe the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7598&quot; title=&quot;type checking with generics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7598&quot;&gt;&lt;del&gt;GROOVY-7598&lt;/del&gt;&lt;/a&gt; caused this.  Prior to &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7598&quot; title=&quot;type checking with generics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7598&quot;&gt;&lt;del&gt;GROOVY-7598&lt;/del&gt;&lt;/a&gt; return types were not checked and because that introduced return type checking this is now an issue.  I don&apos;t think there is any problem with the fix in &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7598&quot; title=&quot;type checking with generics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7598&quot;&gt;&lt;del&gt;GROOVY-7598&lt;/del&gt;&lt;/a&gt; just that it brought this issue up.&lt;/p&gt;

&lt;p&gt;Another workaround that should work in addition to casting to a raw &lt;tt&gt;List&lt;/tt&gt; you can also cast to the type:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;x ? [x] : Collections.&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;emptyList()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It just seems to be a problem when using the ternary and elvis operators, since returning &lt;tt&gt;Collections.emptyList()&lt;/tt&gt; by itself does not cause a compile error.&lt;/p&gt;</comment>
                            <comment id="15149217" author="pascalschumacher" created="Tue, 16 Feb 2016 20:06:06 +0000"  >&lt;p&gt;Hi John,&lt;/p&gt;

&lt;p&gt;it was my fault. I somehow confused &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7598&quot; title=&quot;type checking with generics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7598&quot;&gt;&lt;del&gt;GROOVY-7598&lt;/del&gt;&lt;/a&gt; with &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-7742&quot; title=&quot;CompileStatic stackoverflow with generic method with different placeholder as type argument&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-7742&quot;&gt;&lt;del&gt;GROOVY-7742&lt;/del&gt;&lt;/a&gt;. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Sorry.&lt;/p&gt;</comment>
                            <comment id="15157180" author="shils" created="Mon, 22 Feb 2016 15:58:16 +0000"  >&lt;p&gt;Changed the title to reflect that this issue is about the ternary operator and not the elvis.&lt;/p&gt;</comment>
                            <comment id="15856225" author="mjjustin" created="Tue, 7 Feb 2017 15:44:07 +0000"  >&lt;p&gt;I have the same issue when I attempt to assign the value to a variable, as well as when I use the empty list literal instead of Collections.emptyList.  Is this the same issue, or should I open a new issue for it?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; stringList1 = [&lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt;] ?: []
List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; stringList2 = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; ? [&lt;span class=&quot;code-quote&quot;&gt;&apos;b&apos;&lt;/span&gt;] : []&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is one place where Java has @CompileStatic Groovy beat, as its type inference does a better job with this sort of thing.&lt;/p&gt;</comment>
                            <comment id="16260379" author="paulk" created="Tue, 21 Nov 2017 07:49:53 +0000"  >&lt;p&gt;@mjjustin This should be fixed for assignments (&lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8255&quot; title=&quot;Odd problems with flow typing and generics in Groovy 2.4.12+&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8255&quot;&gt;&lt;del&gt;GROOVY-8255&lt;/del&gt;&lt;/a&gt;) and field/property initializers (&lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8382&quot; title=&quot;Target Typing for empty collections should work for field/property initialisers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8382&quot;&gt;&lt;del&gt;GROOVY-8382&lt;/del&gt;&lt;/a&gt;) but not currently for return types.&lt;/p&gt;</comment>
                            <comment id="16474040" author="daniel_sun" created="Mon, 14 May 2018 10:57:55 +0000"  >&lt;p&gt;Fixed by &lt;a href=&quot;https://github.com/apache/groovy/commit/d88dfe679d1cd958c29acaf64b7d7631c041e194&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/groovy/commit/d88dfe679d1cd958c29acaf64b7d7631c041e194&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Current solution can infer the return type properly, but has a limitation: `return` is required.&lt;/p&gt;

&lt;p&gt;I will file a new JIRA issue.&lt;/p&gt;</comment>
                            <comment id="16485746" author="paulk" created="Tue, 22 May 2018 23:26:33 +0000"  >&lt;p&gt;Hi Daniel, can you link the new issue to this one. Thanks.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12941326">GROOVY-7763</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12895503">GROOVY-7598</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2sow7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>