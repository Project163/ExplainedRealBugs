<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 01:02:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[GROOVY-9151] Default Arguments: reference to another defaulted parameter causes run-time errors</title>
                <link>https://issues.apache.org/jira/browse/GROOVY-9151</link>
                <project id="12318123" key="GROOVY">Groovy</project>
                    <description>&lt;p&gt;Default argument values may be supplied using back references, like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
void hello(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; s, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o = s) { println o }
hello(&lt;span class=&quot;code-quote&quot;&gt;&apos;world&apos;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;or this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
void hello(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; s, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;(s)) { println o }
hello(&lt;span class=&quot;code-quote&quot;&gt;&apos;world&apos;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;However, if the back reference &lt;tt&gt;s&lt;/tt&gt; also has a default value, Groovy produces nasty errors:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
void hello(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; s = &lt;span class=&quot;code-quote&quot;&gt;&apos;world&apos;&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;(s)) { println o }
hello() &lt;span class=&quot;code-comment&quot;&gt;// MissingPropertyException: No such property: s &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; class: script&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;or worse:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Thing {
  Thing(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; s = &lt;span class=&quot;code-quote&quot;&gt;&apos;boo&apos;&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; o = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;(s)) {
  }
}
&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Thing()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.VerifyError: Bad type on operand stack
Exception Details:
  Location:
    Thing.&amp;lt;init&amp;gt;()V @21: invokeinterface
  Reason:
    Type uninitializedThis (current frame, stack[5]) is not assignable to &lt;span class=&quot;code-quote&quot;&gt;&apos;java/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&apos;&lt;/span&gt;
  Current Frame:
    bci: @21
    flags: { flagThisUninit }
    locals: { uninitializedThis, &lt;span class=&quot;code-quote&quot;&gt;&apos;[Lorg/codehaus/groovy/runtime/callsite/CallSite;&apos;&lt;/span&gt; }
    stack: { uninitializedThis, &lt;span class=&quot;code-quote&quot;&gt;&apos;java/lang/&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;org/codehaus/groovy/runtime/callsite/CallSite&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;java/lang/&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;org/codehaus/groovy/runtime/callsite/CallSite&apos;&lt;/span&gt;, uninitializedThis }
  Bytecode:
    0x0000000: b800 154c 2a12 31c0 0027 2b12 3232 1227
    0x0000010: 2b12 3332 2ab9 0037 0200 b900 2d03 00b7
    0x0000020: 002f b1                                

	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.getDeclaredConstructors0(Native Method)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.privateGetDeclaredConstructors(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.java:2671)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.getDeclaredConstructors(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.java:2020)
	at org.codehaus.groovy.reflection.CachedClass$2$1.run(CachedClass.java:84)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.codehaus.groovy.reflection.CachedClass$2.initValue(CachedClass.java:82)
	at org.codehaus.groovy.reflection.CachedClass$2.initValue(CachedClass.java:79)
	at org.codehaus.groovy.util.LazyReference.getLocked(LazyReference.java:49)
	at org.codehaus.groovy.util.LazyReference.get(LazyReference.java:36)
	at org.codehaus.groovy.reflection.CachedClass.getConstructors(CachedClass.java:295)
	at groovy.lang.MetaClassImpl.&amp;lt;init&amp;gt;(MetaClassImpl.java:232)
	at groovy.lang.MetaClassImpl.&amp;lt;init&amp;gt;(MetaClassImpl.java:242)
	at groovy.lang.MetaClassRegistry$MetaClassCreationHandle.createNormalMetaClass(MetaClassRegistry.java:171)
	at groovy.lang.MetaClassRegistry$MetaClassCreationHandle.createWithCustomLookup(MetaClassRegistry.java:161)
	at groovy.lang.MetaClassRegistry$MetaClassCreationHandle.create(MetaClassRegistry.java:144)
	at org.codehaus.groovy.reflection.ClassInfo.getMetaClassUnderLock(ClassInfo.java:288)
	at org.codehaus.groovy.reflection.ClassInfo.getMetaClass(ClassInfo.java:331)
	at org.codehaus.groovy.runtime.metaclass.MetaClassRegistryImpl.getMetaClass(MetaClassRegistryImpl.java:277)
	at org.codehaus.groovy.runtime.InvokerHelper.getMetaClass(InvokerHelper.java:905)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.createCallConstructorSite(CallSiteArray.java:86)
	at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallConstructor(CallSiteArray.java:59)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callConstructor(AbstractCallSite.java:238)
	at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callConstructor(AbstractCallSite.java:242)
	at script.run(script.groovy:5)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13236358">GROOVY-9151</key>
            <summary>Default Arguments: reference to another defaulted parameter causes run-time errors</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="emilles">Eric Milles</assignee>
                                    <reporter username="emilles">Eric Milles</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 May 2019 22:47:11 +0000</created>
                <updated>Tue, 22 Feb 2022 23:57:13 +0000</updated>
                            <resolved>Sat, 29 Jun 2019 16:10:50 +0000</resolved>
                                                    <fixVersion>3.0.0-beta-2</fixVersion>
                    <fixVersion>2.5.16</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="16855069" author="emilles" created="Mon, 3 Jun 2019 21:25:54 +0000"  >&lt;p&gt;&lt;tt&gt;Verifier.addDefaultParameters&lt;/tt&gt; gathers up call arguments and creates:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
Thing(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; s) {
  &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;((&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;) s, (&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;(s))
}
Thing() {
  &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;((&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;) &lt;span class=&quot;code-quote&quot;&gt;&apos;boo&apos;&lt;/span&gt;, (&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;(s))
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Since the default value expression for &lt;tt&gt;s&lt;/tt&gt; is not substituted into &lt;tt&gt;new String(s)&lt;/tt&gt;, there is a missing property that the MOP tries to resolve, but you can&apos;t on an uninitialized instance.&lt;/p&gt;</comment>
                            <comment id="16855103" author="emilles" created="Mon, 3 Jun 2019 22:01:49 +0000"  >&lt;p&gt;This was originally reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-5632&quot; title=&quot;Closure default params can cause BUG! exception in phase &amp;#39;class generation&amp;#39;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-5632&quot;&gt;&lt;del&gt;GROOVY-5632&lt;/del&gt;&lt;/a&gt;.&#160; Only the case for closure shared variables was fixed by creating new variable declaration statements above the generated method call expression.&#160; Also the case of anon. inner reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-5681&quot; title=&quot;Anonynous inner class as default argument value throws IOOBE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-5681&quot;&gt;&lt;del&gt;GROOVY-5681&lt;/del&gt;&lt;/a&gt; is not fixed for constructors.&lt;/p&gt;</comment>
                            <comment id="16875542" author="daniel_sun" created="Sat, 29 Jun 2019 16:10:50 +0000"  >&lt;p&gt;The proposed PR was merged. Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 20 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z037io:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>