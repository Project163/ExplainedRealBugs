diff --git a/README.md b/README.md
index 92539760..acf7b0d8 100644
--- a/README.md
+++ b/README.md
@@ -116,7 +116,7 @@ fastify.get('/', (request, reply) => {
 })
 
 // Run the server!
-fastify.listen(3000, (err, address) => {
+fastify.listen({ port: 3000 }, (err, address) => {
   if (err) throw err
   // Server is now listening on ${address}
 })
@@ -140,7 +140,7 @@ fastify.get('/', async (request, reply) => {
   return { hello: 'world' }
 })
 
-fastify.listen(3000, (err, address) => {
+fastify.listen({ port: 3000 }, (err, address) => {
   if (err) throw err
   // Server is now listening on ${address}
 })
diff --git a/docs/Guides/Getting-Started.md b/docs/Guides/Getting-Started.md
index 186be7ff..b0f5f6fe 100644
--- a/docs/Guides/Getting-Started.md
+++ b/docs/Guides/Getting-Started.md
@@ -45,7 +45,7 @@ fastify.get('/', function (request, reply) {
 })
 
 // Run the server!
-fastify.listen(3000, function (err, address) {
+fastify.listen({ port: 3000 }, function (err, address) {
   if (err) {
     fastify.log.error(err)
     process.exit(1)
@@ -76,7 +76,7 @@ fastify.get('/', async (request, reply) => {
 
 const start = async () => {
   try {
-    await fastify.listen(3000)
+    await fastify.listen({ port: 3000 })
   } catch (err) {
     fastify.log.error(err)
     process.exit(1)
@@ -102,7 +102,7 @@ above, and more!
 > `0.0.0.0` like so:
 >
 > ```js
-> fastify.listen(3000, '0.0.0.0', function (err, address) {
+> fastify.listen({ port: 3000, host: '0.0.0.0' }, function (err, address) {
 >   if (err) {
 >     fastify.log.error(err)
 >     process.exit(1)
@@ -139,7 +139,7 @@ const fastify = Fastify({
 
 fastify.register(firstRoute)
 
-fastify.listen(3000, function (err, address) {
+fastify.listen({ port: 3000 }, function (err, address) {
   if (err) {
     fastify.log.error(err)
     process.exit(1)
@@ -156,7 +156,7 @@ const fastify = require('fastify')({
 
 fastify.register(require('./our-first-route'))
 
-fastify.listen(3000, function (err, address) {
+fastify.listen({ port: 3000 }, function (err, address) {
   if (err) {
     fastify.log.error(err)
     process.exit(1)
@@ -214,7 +214,7 @@ const fastify = Fastify({
 fastify.register(dbConnector)
 fastify.register(firstRoute)
 
-fastify.listen(3000, function (err, address) {
+fastify.listen({ port: 3000 }, function (err, address) {
   if (err) {
     fastify.log.error(err)
     process.exit(1)
@@ -232,7 +232,7 @@ const fastify = require('fastify')({
 fastify.register(require('./our-db-connector'))
 fastify.register(require('./our-first-route'))
 
-fastify.listen(3000, function (err, address) {
+fastify.listen({ port: 3000 }, function (err, address) {
   if (err) {
     fastify.log.error(err)
     process.exit(1)
diff --git a/docs/Guides/Plugins-Guide.md b/docs/Guides/Plugins-Guide.md
index c5debccf..d0c84ca6 100644
--- a/docs/Guides/Plugins-Guide.md
+++ b/docs/Guides/Plugins-Guide.md
@@ -401,7 +401,7 @@ const fastify = Fastify()
 
 ///...
 
-fastify.listen(3000, (err, address) => {
+fastify.listen({ port: 3000 }, (err, address) => {
   if (err) {
     fastify.log.error(err)
     process.exit(1)
diff --git a/docs/Guides/Serverless.md b/docs/Guides/Serverless.md
index a386d422..5f9c3d5e 100644
--- a/docs/Guides/Serverless.md
+++ b/docs/Guides/Serverless.md
@@ -52,7 +52,7 @@ function init() {
 
 if (require.main === module) {
   // called directly i.e. "node app"
-  init().listen(3000, (err) => {
+  init().listen({ port: 3000 }, (err) => {
     if (err) console.error(err);
     console.log('server listening on 3000');
   });
@@ -277,11 +277,11 @@ async function start() {
   const port = process.env.PORT || 3000
 
   // You must listen on all IPV4 addresses in Cloud Run
-  const address = IS_GOOGLE_CLOUD_RUN ? "0.0.0.0" : undefined
+  const host = IS_GOOGLE_CLOUD_RUN ? "0.0.0.0" : undefined
 
   try {
     const server = build()
-    const address = await server.listen(port, address)
+    const address = await server.listen({ port, host })
     console.log(`Listening on ${address}`)
   } catch (err) {
     console.error(err)
diff --git a/docs/Guides/Testing.md b/docs/Guides/Testing.md
index 2798a566..5fbae261 100644
--- a/docs/Guides/Testing.md
+++ b/docs/Guides/Testing.md
@@ -47,7 +47,7 @@ const server = require('./app')({
   }
 })
 
-server.listen(3000, (err, address) => {
+server.listen({ port: 3000 }, (err, address) => {
   if (err) {
     server.log.error(err)
     process.exit(1)
@@ -255,7 +255,7 @@ tap.test('GET `/` route', t => {
 
   t.teardown(() => fastify.close())
 
-  fastify.listen(0, (err) => {
+  fastify.listen({ port: 0 }, (err) => {
     t.error(err)
 
     request({
diff --git a/docs/Reference/Decorators.md b/docs/Reference/Decorators.md
index 16e01eec..9a051e63 100644
--- a/docs/Reference/Decorators.md
+++ b/docs/Reference/Decorators.md
@@ -265,7 +265,7 @@ server.decorateReply('view', function (template, args) {
   // Another rendering engine
 })
 
-server.listen(3000)
+server.listen({ port: 3000 })
 ```
 
 
@@ -291,7 +291,7 @@ server.register(async function (server, opts) {
   })
 }, { prefix: '/bar' })
 
-server.listen(3000)
+server.listen({ port: 3000 })
 ```
 
 ### Getters and Setters
diff --git a/docs/Reference/Encapsulation.md b/docs/Reference/Encapsulation.md
index 9d331c39..9c661aca 100644
--- a/docs/Reference/Encapsulation.md
+++ b/docs/Reference/Encapsulation.md
@@ -94,7 +94,7 @@ fastify.register(async function publicContext (childServer) {
   })
 })
 
-fastify.listen(8000)
+fastify.listen({ port: 8000 })
 ```
 
 The above server example shows all of the encapsulation concepts outlined in the
@@ -180,7 +180,7 @@ fastify.register(async function publicContext (childServer) {
   }
 })
 
-fastify.listen(8000)
+fastify.listen({ port: 8000 })
 ```
 
 Restarting the server and re-issuing the requests for `/two` and `/three`:
diff --git a/docs/Reference/HTTP2.md b/docs/Reference/HTTP2.md
index a079e18a..e8685027 100644
--- a/docs/Reference/HTTP2.md
+++ b/docs/Reference/HTTP2.md
@@ -31,7 +31,7 @@ fastify.get('/', function (request, reply) {
   reply.code(200).send({ hello: 'world' })
 })
 
-fastify.listen(3000)
+fastify.listen({ port: 3000 })
 ```
 
 ALPN negotiation allows support for both HTTPS and HTTP/2 over the same socket.
@@ -59,7 +59,7 @@ fastify.get('/', function (request, reply) {
   reply.code(200).send({ hello: 'world' })
 })
 
-fastify.listen(3000)
+fastify.listen({ port: 3000 })
 ```
 
 You can test your new server with:
@@ -84,7 +84,7 @@ fastify.get('/', function (request, reply) {
   reply.code(200).send({ hello: 'world' })
 })
 
-fastify.listen(3000)
+fastify.listen({ port: 3000 })
 ```
 
 You can test your new server with:
diff --git a/docs/Reference/Plugins.md b/docs/Reference/Plugins.md
index 6dc2af68..23c0c16b 100644
--- a/docs/Reference/Plugins.md
+++ b/docs/Reference/Plugins.md
@@ -124,7 +124,7 @@ fastify.ready(err => console.log(err))
 
 // `listen` is a special ready,
 // so it behaves in the same way
-fastify.listen(3000, (err, address) => {
+fastify.listen({ port: 3000 }, (err, address) => {
   if (err) console.log(err)
 })
 ```
@@ -142,7 +142,7 @@ await fastify.after()
 
 await fastify.ready()
 
-await fastify.listen(3000)
+await fastify.listen({ port: 3000 })
 ```
 
 #### ESM support
@@ -158,7 +158,7 @@ const fastify = Fastify()
 
 fastify.register(import('./plugin.mjs'))
 
-fastify.listen(3000, console.log)
+fastify.listen({ port: 3000 }, console.log)
 
 
 // plugin.mjs
diff --git a/docs/Reference/Routes.md b/docs/Reference/Routes.md
index bf3a5d31..9a25bdb9 100644
--- a/docs/Reference/Routes.md
+++ b/docs/Reference/Routes.md
@@ -365,7 +365,7 @@ const fastify = require('fastify')()
 fastify.register(require('./routes/v1/users'), { prefix: '/v1' })
 fastify.register(require('./routes/v2/users'), { prefix: '/v2' })
 
-fastify.listen(3000)
+fastify.listen({ port: 3000 })
 ```
 
 ```js
@@ -427,7 +427,7 @@ const fastify = require('fastify')({ logger: true })
 fastify.register(require('./routes/user'), { logLevel: 'warn' })
 fastify.register(require('./routes/events'), { logLevel: 'debug' })
 
-fastify.listen(3000)
+fastify.listen({ port: 3000 })
 ```
 
 Or you can directly pass it to a route:
@@ -461,7 +461,7 @@ fastify.register(require('./routes/events'), {
   }
 })
 
-fastify.listen(3000)
+fastify.listen({ port: 3000 })
 ```
 
 You can inherit serializers by context:
@@ -499,7 +499,7 @@ async function context1 (fastify, opts) {
   })
 }
 
-fastify.listen(3000)
+fastify.listen({ port: 3000 })
 ```
 
 ### Config
@@ -519,7 +519,7 @@ function handler (req, reply) {
 fastify.get('/en', { config: { output: 'hello world!' } }, handler)
 fastify.get('/it', { config: { output: 'ciao mondo!' } }, handler)
 
-fastify.listen(3000)
+fastify.listen({ port: 3000 })
 ```
 
 ### Constraints
diff --git a/docs/Reference/Server.md b/docs/Reference/Server.md
index 9599cce1..1a67e1ae 100644
--- a/docs/Reference/Server.md
+++ b/docs/Reference/Server.md
@@ -353,7 +353,7 @@ fastify.get('/', (req, reply) => {
   reply.send({ hello: 'world' })
 })
 
-fastify.listen(3000)
+fastify.listen({ port: 3000 })
 ```
 
 Internally Fastify uses the API of Node core HTTP server, so if you are using a
@@ -820,12 +820,17 @@ fastify.ready().then(() => {
 #### listen
 <a id="listen"></a>
 
-Starts the server on the given port after all the plugins are loaded, internally
-waits for the `.ready()` event. The callback is the same as the Node core.
+Starts the server and internally waits for the the `.ready()` event. The
+signature is `.listen([options][, callback])`. Both the `options` object and the
+`callback` parameters follow the [Node.js
+core][https://nodejs.org/api/net.html#serverlistenoptions-callback] parameter
+definitions.
 
 By default, the server will listen on the address(es) resolved by `localhost` when no
-specific address is provided. If listening on any available interface is desired,
+specific host is provided. If listening on any available interface is desired,
 then specifying `0.0.0.0` for the address will listen on all IPv4 addresses.
+The following table details the possible values for `host` when targeting
+`localhost`, and what the result of those values for `host` will be.
 
  Host          | IPv4 | IPv6
  --------------|------|-------
@@ -836,25 +841,19 @@ then specifying `0.0.0.0` for the address will listen on all IPv4 addresses.
  `127.0.0.1`     | âœ… | ðŸš«
  `::1`           | ðŸš« | âœ…
 
-<sup>*</sup> Using `::` for the address will listen on all IPv6 addresses and, depending on OS,
-may also listen on [all IPv4 addresses](https://nodejs.org/api/net.html#serverlistenport-host-backlog-callback).
+<sup>*</sup> Using `::` for the address will listen on all IPv6 addresses and,
+depending on OS, may also listen on [all IPv4
+addresses](https://nodejs.org/api/net.html#serverlistenport-host-backlog-callback).
 
-Be careful when deciding to listen on all interfaces; it comes with inherent [security
+Be careful when deciding to listen on all interfaces; it comes with inherent
+[security
 risks](https://web.archive.org/web/20170831174611/https://snyk.io/blog/mongodb-hack-and-secure-defaults/).
 
-```js
-fastify.listen(3000, (err, address) => {
-  if (err) {
-    fastify.log.error(err)
-    process.exit(1)
-  }
-})
-```
-
-Specifying an address is also supported:
+The default is to listen on `port: 0` (which picks the first available open
+port) and `host: 'localhost'`:
 
 ```js
-fastify.listen(3000, '127.0.0.1', (err, address) => {
+fastify.listen((err, address) => {
   if (err) {
     fastify.log.error(err)
     process.exit(1)
@@ -862,23 +861,10 @@ fastify.listen(3000, '127.0.0.1', (err, address) => {
 })
 ```
 
-Specifying a backlog queue size is also supported:
-
-```js
-fastify.listen(3000, '127.0.0.1', 511, (err, address) => {
-  if (err) {
-    fastify.log.error(err)
-    process.exit(1)
-  }
-})
-```
-
-Specifying options is also supported; the object is same as
-[options](https://nodejs.org/api/net.html#net_server_listen_options_callback) in
-the Node.js server listen:
+Specifying an address is also supported:
 
 ```js
-fastify.listen({ port: 3000, host: '127.0.0.1', backlog: 511 }, (err) => {
+fastify.listen({ port: 3000, host: '127.0.0.1' }, (err, address) => {
   if (err) {
     fastify.log.error(err)
     process.exit(1)
@@ -889,29 +875,7 @@ fastify.listen({ port: 3000, host: '127.0.0.1', backlog: 511 }, (err) => {
 If no callback is provided a Promise is returned:
 
 ```js
-fastify.listen(3000)
-  .then((address) => console.log(`server listening on ${address}`))
-  .catch(err => {
-    console.log('Error starting server:', err)
-    process.exit(1)
-  })
-```
-
-Specifying an address without a callback is also supported:
-
-```js
-fastify.listen(3000, '127.0.0.1')
-  .then((address) => console.log(`server listening on ${address}`))
-  .catch(err => {
-    console.log('Error starting server:', err)
-    process.exit(1)
-  })
-```
-
-Specifying options without a callback is also supported:
-
-```js
-fastify.listen({ port: 3000, host: '127.0.0.1', backlog: 511 })
+fastify.listen({ port: 3000 })
   .then((address) => console.log(`server listening on ${address}`))
   .catch(err => {
     console.log('Error starting server:', err)
@@ -924,7 +888,7 @@ to listen on `0.0.0.0` because they do not default to exposing mapped ports to
 `localhost`:
 
 ```js
-fastify.listen(3000, '0.0.0.0', (err, address) => {
+fastify.listen({ port: 3000, host: '0.0.0.0' }, (err, address) => {
   if (err) {
     fastify.log.error(err)
     process.exit(1)
@@ -933,7 +897,7 @@ fastify.listen(3000, '0.0.0.0', (err, address) => {
 ```
 
 If the `port` is omitted (or is set to zero), a random available port is
-automatically chosen (later available via `fastify.server.address().port`).
+automatically chosen (available via `fastify.server.address().port`).
 
 The default options of listen are:
 
@@ -956,7 +920,7 @@ If you call it before `listen()` is called or after the `close()` function,
 it will return an empty array.
 
 ```js
-await fastify.listen(8080)
+await fastify.listen({ port: 8080 })
 const addresses = fastify.addresses()
 // [
 //   { port: 8080, family: 'IPv6', address: '::1' },
@@ -1470,7 +1434,7 @@ fastify.addContentTypeParser('text/json', { asString: true }, fastify.getDefault
 #### hasContentTypeParser
 <a id="hasContentTypeParser"></a>
 
-`fastify.hasContentTypeParser(contentType)` is used to check whether there is a content type parser in the current 
+`fastify.hasContentTypeParser(contentType)` is used to check whether there is a content type parser in the current
 context for the specified content type.
 
 ```js
@@ -1614,7 +1578,7 @@ fastify.register(async (instance, opts) => {
 })
 
 // Start listening.
-fastify.listen(3000, (err) => {
+fastify.listen({ port: 3000 }, (err) => {
   if (err) {
     fastify.log.error(err)
     process.exit(1)
diff --git a/docs/Reference/TypeScript.md b/docs/Reference/TypeScript.md
index c77d27fe..4df06ff1 100644
--- a/docs/Reference/TypeScript.md
+++ b/docs/Reference/TypeScript.md
@@ -72,7 +72,7 @@ in a blank http Fastify server.
      return 'pong\n'
    })
 
-   server.listen(8080, (err, address) => {
+   server.listen({ port: 8080 }, (err, address) => {
      if (err) {
        console.error(err)
        process.exit(1)
@@ -360,7 +360,7 @@ into TypeScript interfaces!
      }
    })
 
-   server.listen(8080, (err, address) => {
+   server.listen({ port: 8080 }, (err, address) => {
      if (err) {
        console.error(err)
        process.exit(0)
@@ -681,21 +681,21 @@ There are a couple supported import methods with the Fastify type system.
      import fastify from 'fastify'
 
      const f = fastify()
-     f.listen(8080, () => { console.log('running') })
+     f.listen({ port: 8080 }, () => { console.log('running') })
      ```
    - Gain access to types with destructuring:
      ```typescript
      import fastify, { FastifyInstance } from 'fastify'
 
      const f: FastifyInstance = fastify()
-     f.listen(8080, () => { console.log('running') })
+     f.listen({ port: 8080 }, () => { console.log('running') })
      ```
    - Destructuring also works for the main API method:
      ```typescript
      import { fastify, FastifyInstance } from 'fastify'
 
      const f: FastifyInstance = fastify()
-     f.listen(8080, () => { console.log('running') })
+     f.listen({ port: 8080 }, () => { console.log('running') })
      ```
 2. `import * as Fastify from 'fastify'`
    - Types are resolved and accessible using dot notation
@@ -706,7 +706,7 @@ There are a couple supported import methods with the Fastify type system.
      import * as Fastify from 'fastify'
 
      const f: Fastify.FastifyInstance = Fastify.fastify()
-     f.listen(8080, () => { console.log('running') })
+     f.listen({ port: 8080 }, () => { console.log('running') })
      ```
 3. `const fastify = require('fastify')`
    - This syntax is valid and will import fastify as expected; however, types
@@ -716,14 +716,14 @@ There are a couple supported import methods with the Fastify type system.
      const fastify = require('fastify')
 
      const f = fastify()
-     f.listen(8080, () => { console.log('running') })
+     f.listen({ port: 8080 }, () => { console.log('running') })
      ```
    - Destructuring is supported and will resolve types properly
      ```typescript
      const { fastify } = require('fastify')
 
      const f = fastify()
-     f.listen(8080, () => { console.log('running') })
+     f.listen({ port: 8080 }, () => { console.log('running') })
      ```
 
 #### Generics
@@ -825,7 +825,7 @@ a more detailed http server walkthrough.
      return { hello: 'world' }
    })
 
-   server.listen(8080, (err, address) => {
+   server.listen({ port: 8080 }, (err, address) => {
      if (err) {
        console.error(err)
        process.exit(0)
diff --git a/docs/Reference/Validation-and-Serialization.md b/docs/Reference/Validation-and-Serialization.md
index 41cf1540..271017d8 100644
--- a/docs/Reference/Validation-and-Serialization.md
+++ b/docs/Reference/Validation-and-Serialization.md
@@ -4,7 +4,7 @@
 Fastify uses a schema-based approach, and even if it is not mandatory we
 recommend using [JSON Schema](https://json-schema.org/) to validate your routes
 and serialize your outputs. Internally, Fastify compiles the schema into a
-highly performant function. 
+highly performant function.
 
 Validation will only be attempted if the content type is `application-json`,
 as described in the documentation for the [content type parser](./ContentTypeParser.md).
@@ -239,7 +239,7 @@ the types specified in your schema `type` keywords, both to pass the validation
 and to use the correctly typed data afterwards.*
 
 The Ajv default configuration in Fastify supports coercing array
-parameters in `querystring`.  
+parameters in `querystring`.
 Example:
 
 ```js
@@ -261,7 +261,7 @@ fastify.get('/', opts, (request, reply) => {
   reply.send({ params: request.query }) // echo the querystring
 })
 
-fastify.listen(3000, (err) => {
+fastify.listen({ port: 3000 }, (err) => {
   if (err) throw err
 })
 ```
@@ -319,7 +319,7 @@ For further information see [here](https://ajv.js.org/coercion.html)
 #### Ajv Plugins
 <a id="ajv-plugins"></a>
 
-You can provide a list of plugins you want to use with the default `ajv` instance.  
+You can provide a list of plugins you want to use with the default `ajv` instance.
 Note that the plugin must be **compatible with the Ajv version shipped within Fastify**.
 
 > Refer to [`ajv options`](./Server.md#ajv) to check plugins format
diff --git a/docs/Type-Providers.md b/docs/Type-Providers.md
index f99bb827..bedc283d 100644
--- a/docs/Type-Providers.md
+++ b/docs/Type-Providers.md
@@ -6,7 +6,7 @@ Type Providers are a TypeScript only feature that enables Fastify to statically
 
 ### Providers
 
-Type Providers are offered as additional packages you will need to install into your project. Each provider uses a different inference library under the hood; allowing you to select the library most appropriate for your needs. Type Provider packages follow a `fastify-type-provider-{provider-name}` naming convention. 
+Type Providers are offered as additional packages you will need to install into your project. Each provider uses a different inference library under the hood; allowing you to select the library most appropriate for your needs. Type Provider packages follow a `fastify-type-provider-{provider-name}` naming convention.
 
 The following inference packages are supported:
 
@@ -217,7 +217,7 @@ const server = Fastify({
 
 registerRoutes(server)
 
-server.listen(3000)
+server.listen({ port: 3000 })
 ```
 
 ```ts
diff --git a/examples/asyncawait.js b/examples/asyncawait.js
index ee8c1624..de5d57f7 100644
--- a/examples/asyncawait.js
+++ b/examples/asyncawait.js
@@ -31,6 +31,6 @@ fastify
     return { hello: 'world' }
   })
 
-fastify.listen(3000, err => {
+fastify.listen({ port: 3000 }, err => {
   if (err) throw err
 })
diff --git a/examples/benchmark/hooks-benchmark-async-await.js b/examples/benchmark/hooks-benchmark-async-await.js
index 3228327a..8b1e92a7 100644
--- a/examples/benchmark/hooks-benchmark-async-await.js
+++ b/examples/benchmark/hooks-benchmark-async-await.js
@@ -37,7 +37,7 @@ fastify.get('/', opts, function (request, reply) {
   reply.send({ hello: 'world' })
 })
 
-fastify.listen(3000, function (err) {
+fastify.listen({ port: 3000 }, function (err) {
   if (err) {
     throw err
   }
diff --git a/examples/benchmark/hooks-benchmark.js b/examples/benchmark/hooks-benchmark.js
index e42206cf..5a35b8b6 100644
--- a/examples/benchmark/hooks-benchmark.js
+++ b/examples/benchmark/hooks-benchmark.js
@@ -45,7 +45,7 @@ fastify.get('/', opts, function (request, reply) {
   reply.send({ hello: 'world' })
 })
 
-fastify.listen(3000, function (err) {
+fastify.listen({ port: 3000 }, function (err) {
   if (err) {
     throw err
   }
diff --git a/examples/benchmark/simple.js b/examples/benchmark/simple.js
index 85e50b33..125f026e 100644
--- a/examples/benchmark/simple.js
+++ b/examples/benchmark/simple.js
@@ -25,6 +25,6 @@ fastify
       .send({ hello: 'world' })
   })
 
-fastify.listen(3000, (err, address) => {
+fastify.listen({ port: 3000 }, (err, address) => {
   if (err) throw err
 })
diff --git a/examples/hooks.js b/examples/hooks.js
index 7ffa9782..e087b3a6 100644
--- a/examples/hooks.js
+++ b/examples/hooks.js
@@ -81,7 +81,7 @@ fastify.post('/', optsPost, function (req, reply) {
   reply.send({ hello: 'world' })
 })
 
-fastify.listen(3000, function (err) {
+fastify.listen({ port: 3000 }, function (err) {
   if (err) {
     throw err
   }
diff --git a/examples/http2.js b/examples/http2.js
index 8e3ee039..26bbcfe2 100644
--- a/examples/http2.js
+++ b/examples/http2.js
@@ -32,6 +32,6 @@ fastify
     reply.send({ hello: 'world' })
   })
 
-fastify.listen(3000, err => {
+fastify.listen({ port: 3000 }, err => {
   if (err) throw err
 })
diff --git a/examples/https.js b/examples/https.js
index 461dd0bb..33266980 100644
--- a/examples/https.js
+++ b/examples/https.js
@@ -31,6 +31,6 @@ fastify
     reply.send({ hello: 'world' })
   })
 
-fastify.listen(3000, err => {
+fastify.listen({ port: 3000 }, err => {
   if (err) throw err
 })
diff --git a/examples/parser.js b/examples/parser.js
index b644e8f1..85d441bc 100644
--- a/examples/parser.js
+++ b/examples/parser.js
@@ -36,6 +36,6 @@ fastify
     reply.send(req.body)
   })
 
-fastify.listen(3000, err => {
+fastify.listen({ port: 3000 }, err => {
   if (err) throw err
 })
diff --git a/examples/route-prefix.js b/examples/route-prefix.js
index 8f6f835f..56482211 100644
--- a/examples/route-prefix.js
+++ b/examples/route-prefix.js
@@ -31,7 +31,7 @@ fastify.register(function (instance, options, done) {
   done()
 }, { prefix: '/italian' })
 
-fastify.listen(8000, function (err) {
+fastify.listen({ port: 8000 }, function (err) {
   if (err) {
     throw err
   }
diff --git a/examples/shared-schema.js b/examples/shared-schema.js
index eec4c5e9..c50b7908 100644
--- a/examples/shared-schema.js
+++ b/examples/shared-schema.js
@@ -31,6 +31,6 @@ fastify
     reply.send({ hello: 'world' })
   })
 
-fastify.listen(3000, err => {
+fastify.listen({ port: 3000 }, err => {
   if (err) throw err
 })
diff --git a/examples/simple-stream.js b/examples/simple-stream.js
index 9049db6b..8a354ae0 100644
--- a/examples/simple-stream.js
+++ b/examples/simple-stream.js
@@ -12,7 +12,7 @@ fastify
     reply.send(stream)
   })
 
-fastify.listen(3000, (err, address) => {
+fastify.listen({ port: 3000 }, (err, address) => {
   if (err) throw err
   fastify.log.info(`server listening on ${address}`)
 })
diff --git a/examples/simple.js b/examples/simple.js
index e1c8b533..3c7495a1 100644
--- a/examples/simple.js
+++ b/examples/simple.js
@@ -25,6 +25,6 @@ fastify
       .send({ hello: 'world' })
   })
 
-fastify.listen(3000, (err, address) => {
+fastify.listen({ port: 3000 }, (err, address) => {
   if (err) throw err
 })
diff --git a/examples/simple.mjs b/examples/simple.mjs
index 02309f9a..477ea709 100644
--- a/examples/simple.mjs
+++ b/examples/simple.mjs
@@ -24,4 +24,4 @@ app.get('/', schema, async function (req, reply) {
   return { hello: 'world' }
 })
 
-app.listen(3000).catch(console.error)
+app.listen({ port: 3000 }).catch(console.error)
diff --git a/examples/typescript-server.ts b/examples/typescript-server.ts
index 31eb3bc3..71f7ee0b 100644
--- a/examples/typescript-server.ts
+++ b/examples/typescript-server.ts
@@ -70,7 +70,7 @@ server.get<{
 });
 
 // Start your server
-server.listen(8080, (err, address) => {
+server.listen({ port: 8080 }, (err, address) => {
   if (err) {
     console.error(err);
     process.exit(1);
diff --git a/examples/use-plugin.js b/examples/use-plugin.js
index ff3732ec..fdcf2621 100644
--- a/examples/use-plugin.js
+++ b/examples/use-plugin.js
@@ -18,7 +18,7 @@ fastify.register(require('./plugin'), opts, function (err) {
   if (err) throw err
 })
 
-fastify.listen(3000, function (err) {
+fastify.listen({ port: 3000 }, function (err) {
   if (err) {
     throw err
   }
diff --git a/lib/server.js b/lib/server.js
index acfc7afe..77175a99 100644
--- a/lib/server.js
+++ b/lib/server.js
@@ -4,6 +4,7 @@ const http = require('http')
 const https = require('https')
 const dns = require('dns')
 
+const warnings = require('./warnings')
 const { kState, kOptions, kServerBindings } = require('./symbols')
 const { FST_ERR_HTTP2_INVALID_VERSION, FST_ERR_REOPENED_CLOSE_SERVER, FST_ERR_REOPENED_SERVER } = require('./errors')
 
@@ -15,9 +16,34 @@ function createServer (options, httpHandler) {
   return { server, listen }
 
   // `this` is the Fastify object
-  function listen () {
-    const listenOptions = normalizeListenArgs(Array.from(arguments))
-    const { cb, host } = listenOptions
+  function listen (listenOptions, ...args) {
+    let cb = args.slice(-1).pop()
+    // When the variadic signature deprecation is complete, the function
+    // declaration should become:
+    //   function listen (listenOptions = { port: 0, host: 'localhost' }, cb = undefined)
+    // Upon doing so, the `normalizeListenArgs` function is no longer needed,
+    // and all of this preamble to feed it correctly also no longer needed.
+    const firstArgType = Object.prototype.toString.call(arguments[0])
+    if (arguments.length === 0) {
+      listenOptions = normalizeListenArgs([])
+    } else if (arguments.length > 0 && (firstArgType !== '[object Object]' && firstArgType !== '[object Function]')) {
+      warnings.emit('FSTDEP011')
+      listenOptions = normalizeListenArgs(Array.from(arguments))
+      cb = listenOptions.cb
+    } else if (args.length > 1) {
+      // `.listen(obj, a, ..., n, callback )`
+      warnings.emit('FSTDEP011')
+      // Deal with `.listen(port, host, backlog, [cb])`
+      const hostPath = listenOptions.path ? [listenOptions.path] : [listenOptions.port ?? 0, listenOptions.host ?? 'localhost']
+      Object.assign(listenOptions, normalizeListenArgs([...hostPath, ...args]))
+    } else {
+      listenOptions.cb = cb
+    }
+
+    const { host = 'localhost' } = listenOptions
+    if (Object.prototype.hasOwnProperty.call(listenOptions, 'host') === false) {
+      listenOptions.host = host
+    }
 
     if (host === 'localhost') {
       listenOptions.cb = (err, address) => {
@@ -41,6 +67,7 @@ function createServer (options, httpHandler) {
 
     if (cb === undefined) {
       const listening = listenPromise.call(this, server, listenOptions)
+      /* istanbul ignore else */
       if (host === 'localhost') {
         return listening.then(address => {
           return new Promise((resolve, reject) => {
@@ -51,7 +78,6 @@ function createServer (options, httpHandler) {
           })
         })
       }
-      return listening
     }
 
     this.ready(listenCallback.call(this, server, listenOptions))
@@ -226,17 +252,13 @@ function normalizeListenArgs (args) {
   const firstArg = args[0]
   const argsLength = args.length
   const lastArg = args[argsLength - 1]
-  /* Deal with listen (options) || (handle[, backlog]) */
-  if (typeof firstArg === 'object' && firstArg !== null) {
-    options.backlog = argsLength > 1 ? lastArg : undefined
-    Object.assign(options, firstArg)
-  } else if (typeof firstArg === 'string' && isNaN(firstArg)) {
+  if (typeof firstArg === 'string' && isNaN(firstArg)) {
     /* Deal with listen (pipe[, backlog]) */
     options.path = firstArg
     options.backlog = argsLength > 1 ? lastArg : undefined
   } else {
     /* Deal with listen ([port[, host[, backlog]]]) */
-    options.port = argsLength >= 1 && firstArg ? firstArg : 0
+    options.port = argsLength >= 1 && Number.isInteger(firstArg) ? firstArg : 0
     // This will listen to what localhost is.
     // It can be 127.0.0.1 or ::1, depending on the operating system.
     // Fixes https://github.com/fastify/fastify/issues/1022.
diff --git a/lib/warnings.js b/lib/warnings.js
index 8368635e..f6bbbcaf 100644
--- a/lib/warnings.js
+++ b/lib/warnings.js
@@ -19,4 +19,6 @@ warning.create('FastifyDeprecation', 'FSTDEP009', 'You are using a custom route
 
 warning.create('FastifyDeprecation', 'FSTDEP010', 'Modifying the "reply.sent" property is deprecated. Use the "reply.hijack()" method instead.')
 
+warning.create('FastifyDeprecation', 'FSTDEP011', 'Variadic listen method is deprecated. Please use ".listen(optionsObject)" instead. The variadic signature will be removed in `fastify@5`.')
+
 module.exports = warning
diff --git a/package.json b/package.json
index c54561f5..543ccb3d 100644
--- a/package.json
+++ b/package.json
@@ -21,6 +21,7 @@
     "test:ci": "npm run unit -- -R terse --cov --coverage-report=lcovonly && npm run test:typescript",
     "test:report": "npm run lint && npm run unit:report && npm run test:typescript",
     "test:typescript": "tsc test/types/import.ts && tsd",
+    "test:watch": "npm run unit -- -w --no-coverage-report -R terse",
     "unit": "tap",
     "unit:junit": "tap-mocha-reporter xunit < out.tap > test/junit-testresults.xml",
     "unit:report": "tap --cov --coverage-report=html --coverage-report=cobertura | tee out.tap"
diff --git a/test/404s.test.js b/test/404s.test.js
index a08ec356..8cec0bcd 100644
--- a/test/404s.test.js
+++ b/test/404s.test.js
@@ -30,7 +30,7 @@ test('default 404', t => {
 
   t.teardown(fastify.close.bind(fastify))
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     test('unsupported method', t => {
@@ -104,7 +104,7 @@ test('customized 404', t => {
 
   t.teardown(fastify.close.bind(fastify))
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     test('unsupported method', t => {
@@ -194,7 +194,7 @@ test('custom header in notFound handler', t => {
 
   t.teardown(fastify.close.bind(fastify))
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     test('not found with custom header', t => {
@@ -250,7 +250,7 @@ test('setting a custom 404 handler multiple times is an error', t => {
       done()
     }, { prefix: '/prefix' })
 
-    fastify.listen(0, err => {
+    fastify.listen({ port: 0 }, err => {
       t.error(err)
       fastify.close()
     })
@@ -274,7 +274,7 @@ test('setting a custom 404 handler multiple times is an error', t => {
 
     fastify.setNotFoundHandler(() => {})
 
-    fastify.listen(0, err => {
+    fastify.listen({ port: 0 }, err => {
       t.error(err)
       fastify.close()
     })
@@ -304,7 +304,7 @@ test('setting a custom 404 handler multiple times is an error', t => {
 
     fastify.setNotFoundHandler(() => {})
 
-    fastify.listen(0, err => {
+    fastify.listen({ port: 0 }, err => {
       t.error(err)
       fastify.close()
     })
@@ -337,7 +337,7 @@ test('setting a custom 404 handler multiple times is an error', t => {
 
     fastify.setNotFoundHandler(() => {})
 
-    fastify.listen(0, err => {
+    fastify.listen({ port: 0 }, err => {
       t.error(err)
       fastify.close()
     })
@@ -381,7 +381,7 @@ test('encapsulated 404', t => {
 
   t.teardown(fastify.close.bind(fastify))
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     test('root unsupported method', t => {
@@ -695,7 +695,7 @@ test('run hooks on default 404', t => {
 
   t.teardown(fastify.close.bind(fastify))
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -856,7 +856,7 @@ test('run hook with encapsulated 404', t => {
 
   t.teardown(fastify.close.bind(fastify))
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -926,7 +926,7 @@ test('run hook with encapsulated 404 and framework-unsupported method', t => {
 
   t.teardown(fastify.close.bind(fastify))
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -966,7 +966,7 @@ test('hooks check 404', t => {
 
   t.teardown(fastify.close.bind(fastify))
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -1066,7 +1066,7 @@ test('Unknown method', t => {
 
   t.teardown(fastify.close.bind(fastify))
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     const handler = () => {}
@@ -1102,7 +1102,7 @@ test('recognizes errors from the http-errors module', t => {
 
   t.teardown(fastify.close.bind(fastify))
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     fastify.inject({
@@ -1220,7 +1220,7 @@ test('cannot set notFoundHandler after binding', t => {
   const fastify = Fastify()
   t.teardown(fastify.close.bind(fastify))
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     try {
@@ -1254,7 +1254,7 @@ test('404 inside onSend', t => {
 
   t.teardown(fastify.close.bind(fastify))
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
diff --git a/test/500s.test.js b/test/500s.test.js
index a21061b0..857e2960 100644
--- a/test/500s.test.js
+++ b/test/500s.test.js
@@ -155,7 +155,7 @@ test('cannot set errorHandler after binding', t => {
   const fastify = Fastify()
   t.teardown(fastify.close.bind(fastify))
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     try {
diff --git a/test/async-await.test.js b/test/async-await.test.js
index 17f02885..b0060aa3 100644
--- a/test/async-await.test.js
+++ b/test/async-await.test.js
@@ -46,7 +46,7 @@ test('async await', t => {
     t.fail()
   }
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -84,7 +84,7 @@ test('ignore the result of the promise if reply.send is called beforehand (undef
 
   t.teardown(server.close.bind(server))
 
-  server.listen(0, (err) => {
+  server.listen({ port: 0 }, (err) => {
     t.error(err)
     sget({
       method: 'GET',
@@ -110,7 +110,7 @@ test('ignore the result of the promise if reply.send is called beforehand (objec
 
   t.teardown(server.close.bind(server))
 
-  server.listen(0, (err) => {
+  server.listen({ port: 0 }, (err) => {
     t.error(err)
     sget({
       method: 'GET',
@@ -165,7 +165,7 @@ test('ignore the result of the promise if reply.send is called beforehand (undef
 
   t.teardown(server.close.bind(server))
 
-  server.listen(0, (err) => {
+  server.listen({ port: 0 }, (err) => {
     t.error(err)
     sget({
       method: 'GET',
@@ -191,7 +191,7 @@ test('ignore the result of the promise if reply.send is called beforehand (objec
 
   t.teardown(server.close.bind(server))
 
-  server.listen(0, (err) => {
+  server.listen({ port: 0 }, (err) => {
     t.error(err)
     sget({
       method: 'GET',
@@ -408,7 +408,7 @@ test('promise was fulfilled with undefined', t => {
     t.fail('should not log an error')
   })
 
-  fastify.listen(0, (err) => {
+  fastify.listen({ port: 0 }, (err) => {
     t.error(err)
     fastify.server.unref()
 
@@ -450,7 +450,7 @@ test('error is not logged because promise was fulfilled with undefined but respo
     t.fail('should not log an error')
   })
 
-  fastify.listen(0, (err) => {
+  fastify.listen({ port: 0 }, (err) => {
     t.error(err)
     fastify.server.unref()
 
diff --git a/test/bodyLimit.test.js b/test/bodyLimit.test.js
index 81b265ea..667b9947 100644
--- a/test/bodyLimit.test.js
+++ b/test/bodyLimit.test.js
@@ -28,7 +28,7 @@ test('bodyLimit', t => {
     reply.send({ error: 'handler should not be called' })
   })
 
-  fastify.listen(0, function (err) {
+  fastify.listen({ port: 0 }, function (err) {
     t.error(err)
     fastify.server.unref()
 
diff --git a/test/case-insensitive.test.js b/test/case-insensitive.test.js
index 97dc7270..d9980acd 100644
--- a/test/case-insensitive.test.js
+++ b/test/case-insensitive.test.js
@@ -17,7 +17,7 @@ test('case insensitive', t => {
     reply.send({ hello: 'world' })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -45,7 +45,7 @@ test('case insensitive inject', t => {
     reply.send({ hello: 'world' })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     fastify.inject({
@@ -74,7 +74,7 @@ test('case insensitive (parametric)', t => {
     reply.send({ hello: 'world' })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -103,7 +103,7 @@ test('case insensitive (wildcard)', t => {
     reply.send({ hello: 'world' })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
diff --git a/test/close-pipelining.test.js b/test/close-pipelining.test.js
index 1567d73c..be95fda3 100644
--- a/test/close-pipelining.test.js
+++ b/test/close-pipelining.test.js
@@ -15,7 +15,7 @@ test('Should return 503 while closing - pipelining', t => {
     reply.send({ hello: 'world' })
   })
 
-  fastify.listen(0, async err => {
+  fastify.listen({ port: 0 }, async err => {
     t.error(err)
 
     const instance = new Client('http://localhost:' + fastify.server.address().port, {
@@ -48,7 +48,7 @@ test('Should not return 503 while closing - pipelining - return503OnClosing', t
     reply.send({ hello: 'world' })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     const instance = new Client('http://localhost:' + fastify.server.address().port, {
diff --git a/test/close.test.js b/test/close.test.js
index 38b407c1..acee3316 100644
--- a/test/close.test.js
+++ b/test/close.test.js
@@ -15,7 +15,7 @@ test('close callback', t => {
     done()
   }
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     fastify.close((err) => {
@@ -39,7 +39,7 @@ test('inside register', t => {
     done()
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     fastify.close((err) => {
@@ -68,7 +68,7 @@ test('close order', t => {
     done()
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     fastify.close((err) => {
@@ -95,7 +95,7 @@ test('close order - async', async t => {
     t.equal(order.shift(), 2)
   })
 
-  await fastify.listen(0)
+  await fastify.listen({ port: 0 })
   await fastify.close()
 
   t.equal(order.shift(), 3)
@@ -211,7 +211,7 @@ t.test('Current opened connection should continue to work after closing and retu
     reply.send({ hello: 'world' })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     const port = fastify.server.address().port
@@ -248,7 +248,7 @@ t.test('Current opened connection should not accept new incoming connections', t
     }, 250)
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     const instance = new Client('http://localhost:' + fastify.server.address().port)
     instance.request({ path: '/', method: 'GET' }).then(data => {
@@ -264,11 +264,11 @@ test('Cannot be reopened the closed server without listen callback', async t =>
   t.plan(2)
   const fastify = Fastify()
 
-  await fastify.listen(0)
+  await fastify.listen({ port: 0 })
   await fastify.close()
 
   try {
-    await fastify.listen(0)
+    await fastify.listen({ port: 0 })
   } catch (err) {
     t.ok(err)
     t.equal(err.code, 'FST_ERR_REOPENED_CLOSE_SERVER')
@@ -279,11 +279,11 @@ test('Cannot be reopened the closed server has listen callback', async t => {
   t.plan(2)
   const fastify = Fastify()
 
-  await fastify.listen(0)
+  await fastify.listen({ port: 0 })
   await fastify.close()
 
   await new Promise((resolve, reject) => {
-    fastify.listen(0, err => {
+    fastify.listen({ port: 0 }, err => {
       reject(err)
     })
   }).catch(err => {
@@ -305,7 +305,7 @@ test('shutsdown while keep-alive connections are active (non-async)', t => {
     reply.send({ hello: 'world' })
   })
 
-  fastify.listen(0, (err, address) => {
+  fastify.listen({ port: 0 }, (err, address) => {
     t.error(err)
 
     const client = new Client(
diff --git a/test/custom-http-server.test.js b/test/custom-http-server.test.js
index fa98c781..016e3857 100644
--- a/test/custom-http-server.test.js
+++ b/test/custom-http-server.test.js
@@ -32,7 +32,7 @@ test('Should support a custom http server', async t => {
     reply.send({ hello: 'world' })
   })
 
-  await fastify.listen(0)
+  await fastify.listen({ port: 0 })
 
   await new Promise((resolve, reject) => {
     sget({
diff --git a/test/custom-parser-async.test.js b/test/custom-parser-async.test.js
index 9a2c3bc4..4eea7550 100644
--- a/test/custom-parser-async.test.js
+++ b/test/custom-parser-async.test.js
@@ -24,7 +24,7 @@ test('contentTypeParser should add a custom async parser', t => {
     return res
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     t.teardown(() => fastify.close())
diff --git a/test/custom-parser.test.js b/test/custom-parser.test.js
index 3a1cbe46..8ceb604a 100644
--- a/test/custom-parser.test.js
+++ b/test/custom-parser.test.js
@@ -60,7 +60,7 @@ test('contentTypeParser should add a custom parser', t => {
     })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     t.teardown(() => fastify.close())
@@ -122,7 +122,7 @@ test('contentTypeParser should handle multiple custom parsers', t => {
   fastify.addContentTypeParser('application/jsoff', customParser)
   fastify.addContentTypeParser('application/ffosj', customParser)
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -174,7 +174,7 @@ test('contentTypeParser should handle an array of custom contentTypes', t => {
 
   fastify.addContentTypeParser(['application/jsoff', 'application/ffosj'], customParser)
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -218,7 +218,7 @@ test('contentTypeParser should handle errors', t => {
     done(new Error('kaboom!'), {})
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -279,7 +279,7 @@ test('contentTypeParser should support encapsulation, second try', t => {
     done()
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -312,7 +312,7 @@ test('contentTypeParser shouldn\'t support request with undefined "Content-Type"
     })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -385,7 +385,7 @@ test('catch all content type parser', t => {
     })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -439,7 +439,7 @@ test('catch all content type parser should not interfere with other conte type p
     })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -492,7 +492,7 @@ test('\'*\' catch undefined Content-Type requests', t => {
     res.type('text/plain').send(req.body)
   })
 
-  fastify.listen(0, function (err) {
+  fastify.listen({ port: 0 }, function (err) {
     t.error(err)
 
     const fileStream = fs.createReadStream(__filename)
@@ -520,7 +520,7 @@ test('cannot add custom parser after binding', t => {
     res.type('text/plain').send(req.body)
   })
 
-  fastify.listen(0, function (err) {
+  fastify.listen({ port: 0 }, function (err) {
     t.error(err)
 
     try {
@@ -547,7 +547,7 @@ test('Can override the default json parser', t => {
     })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -581,7 +581,7 @@ test('Can override the default plain text parser', t => {
     })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -619,7 +619,7 @@ test('Can override the default json parser in a plugin', t => {
     done()
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -704,7 +704,7 @@ test('Should get the body as string', t => {
     }
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -731,7 +731,7 @@ test('Should return defined body with no custom parser defined and content type
     reply.send(req.body)
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -758,7 +758,7 @@ test('Should have typeof body object with no custom parser defined, no body defi
     reply.send(req.body)
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -784,7 +784,7 @@ test('Should have typeof body object with no custom parser defined, null body an
     reply.send(req.body)
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -811,7 +811,7 @@ test('Should have typeof body object with no custom parser defined, undefined bo
     reply.send(req.body)
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -850,7 +850,7 @@ test('Should get the body as string', t => {
     }
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -889,7 +889,7 @@ test('Should get the body as buffer', t => {
     }
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -928,7 +928,7 @@ test('Should get the body as buffer', t => {
     }
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -964,7 +964,7 @@ test('Should parse empty bodies as a string', t => {
     }
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -1011,7 +1011,7 @@ test('Should parse empty bodies as a buffer', t => {
     done(null, body)
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -1045,7 +1045,7 @@ test('The charset should not interfere with the content type handling', t => {
     })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -1095,7 +1095,7 @@ test('Should allow defining the bodyLimit per parser', t => {
     }
   )
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -1136,7 +1136,7 @@ test('route bodyLimit should take precedence over a custom parser bodyLimit', t
     }
   )
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -1168,7 +1168,7 @@ test('should be able to use default parser for extra content type', t => {
 
   fastify.addContentTypeParser('text/json', { parseAs: 'string' }, fastify.getDefaultJsonParser('ignore', 'ignore'))
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -1206,7 +1206,7 @@ test('contentTypeParser should add a custom parser with RegExp value', t => {
     })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     t.teardown(() => fastify.close())
@@ -1348,7 +1348,7 @@ test('catch all content type parser should not interfere with content type parse
     })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -1415,7 +1415,7 @@ test('should prefer string content types over RegExp ones', t => {
     })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -1472,7 +1472,7 @@ test('removeContentTypeParser should support arrays of content types to remove',
     reply.send(req.body)
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -1540,7 +1540,7 @@ test('removeContentTypeParser should support encapsulation', t => {
     done()
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -1590,7 +1590,7 @@ test('removeAllContentTypeParsers should support encapsulation', t => {
     done()
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -1628,7 +1628,7 @@ test('cannot remove all content type parsers after binding', t => {
 
   t.teardown(fastify.close.bind(fastify))
 
-  fastify.listen(0, function (err) {
+  fastify.listen({ port: 0 }, function (err) {
     t.error(err)
 
     t.throws(() => fastify.removeAllContentTypeParsers())
@@ -1642,7 +1642,7 @@ test('cannot remove content type parsers after binding', t => {
 
   t.teardown(fastify.close.bind(fastify))
 
-  fastify.listen(0, function (err) {
+  fastify.listen({ port: 0 }, function (err) {
     t.error(err)
 
     t.throws(() => fastify.removeContentTypeParser('application/json'))
@@ -1667,7 +1667,7 @@ test('should be able to override the default json parser after removeAllContentT
     })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -1704,7 +1704,7 @@ test('should be able to override the default plain text parser after removeAllCo
     })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -1741,7 +1741,7 @@ test('should be able to add a custom content type parser after removeAllContentT
     })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
diff --git a/test/custom-querystring-parser.test.js b/test/custom-querystring-parser.test.js
index 35636800..80280d99 100644
--- a/test/custom-querystring-parser.test.js
+++ b/test/custom-querystring-parser.test.js
@@ -24,7 +24,7 @@ test('Custom querystring parser', t => {
     reply.send({ hello: 'world' })
   })
 
-  fastify.listen(0, (err, address) => {
+  fastify.listen({ port: 0 }, (err, address) => {
     t.error(err)
     t.teardown(() => fastify.close())
 
@@ -61,7 +61,7 @@ test('Custom querystring parser should be called also if there is nothing to par
     reply.send({ hello: 'world' })
   })
 
-  fastify.listen(0, (err, address) => {
+  fastify.listen({ port: 0 }, (err, address) => {
     t.error(err)
     t.teardown(() => fastify.close())
 
@@ -98,7 +98,7 @@ test('Querystring without value', t => {
     reply.send({ hello: 'world' })
   })
 
-  fastify.listen(0, (err, address) => {
+  fastify.listen({ port: 0 }, (err, address) => {
     t.error(err)
     t.teardown(() => fastify.close())
 
diff --git a/test/decorator.test.js b/test/decorator.test.js
index d5a549cd..6727bd97 100644
--- a/test/decorator.test.js
+++ b/test/decorator.test.js
@@ -132,7 +132,7 @@ test('decorateReply inside register', t => {
     reply.send({ hello: 'world' })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -180,7 +180,7 @@ test('decorateReply as plugin (inside .after)', t => {
     reply.send({ hello: 'world' })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -228,7 +228,7 @@ test('decorateReply as plugin (outside .after)', t => {
     reply.send({ hello: 'world' })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -274,7 +274,7 @@ test('decorateRequest inside register', t => {
     reply.send({ hello: 'world' })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -322,7 +322,7 @@ test('decorateRequest as plugin (inside .after)', t => {
     reply.send({ hello: 'world' })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -370,7 +370,7 @@ test('decorateRequest as plugin (outside .after)', t => {
     reply.send({ hello: 'world' })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -764,7 +764,7 @@ test('decorate* should throw if called after ready', async t => {
     })
   })
 
-  await fastify.listen(0)
+  await fastify.listen({ port: 0 })
   try {
     fastify.decorate('test', true)
     t.fail('should not decorate')
@@ -949,7 +949,7 @@ test('decorateRequest/decorateReply empty string', t => {
   })
   t.teardown(fastify.close.bind(fastify))
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -978,7 +978,7 @@ test('decorateRequest/decorateReply is undefined', t => {
   })
   t.teardown(fastify.close.bind(fastify))
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -1007,7 +1007,7 @@ test('decorateRequest/decorateReply is not set to a value', t => {
   })
   t.teardown(fastify.close.bind(fastify))
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
diff --git a/test/delete.test.js b/test/delete.test.js
index 8cc49a69..dea40cb4 100644
--- a/test/delete.test.js
+++ b/test/delete.test.js
@@ -157,7 +157,7 @@ test('body - delete', t => {
   }
 })
 
-fastify.listen(0, err => {
+fastify.listen({ port: 0 }, err => {
   t.error(err)
   fastify.server.unref()
 
diff --git a/test/genReqId.test.js b/test/genReqId.test.js
index 164f6a2a..74ab442f 100644
--- a/test/genReqId.test.js
+++ b/test/genReqId.test.js
@@ -17,7 +17,7 @@ test('Should accept a custom genReqId function', t => {
     reply.send({ id: req.id })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.inject({
       method: 'GET',
diff --git a/test/get.test.js b/test/get.test.js
index 676ce7a3..1ee855a5 100644
--- a/test/get.test.js
+++ b/test/get.test.js
@@ -203,7 +203,7 @@ test('send a falsy boolean', t => {
   }
 })
 
-fastify.listen(0, err => {
+fastify.listen({ port: 0 }, err => {
   t.error(err)
   fastify.server.unref()
 
diff --git a/test/handler-context.test.js b/test/handler-context.test.js
index ff3c9f52..0836cfa8 100644
--- a/test/handler-context.test.js
+++ b/test/handler-context.test.js
@@ -32,7 +32,7 @@ test('handlers receive correct `this` context', (t) => {
     reply.send()
   })
 
-  instance.listen(0, (err) => {
+  instance.listen({ port: 0 }, (err) => {
     instance.server.unref()
     if (err) t.threw(err)
     t.ok(instance.foo)
@@ -55,7 +55,7 @@ test('handlers have access to the internal context', (t) => {
     reply.send()
   })
 
-  instance.listen(0, (err) => {
+  instance.listen({ port: 0 }, (err) => {
     instance.server.unref()
     if (err) t.threw(err)
     http.get(getUrl(instance), () => {}).on('error', t.threw)
diff --git a/test/head.test.js b/test/head.test.js
index 29bbe1f9..32c2ae45 100644
--- a/test/head.test.js
+++ b/test/head.test.js
@@ -92,7 +92,7 @@ test('missing schema - head', t => {
   }
 })
 
-fastify.listen(0, err => {
+fastify.listen({ port: 0 }, err => {
   t.error(err)
   fastify.server.unref()
 
diff --git a/test/helper.js b/test/helper.js
index 6fced8b8..fecd42f3 100644
--- a/test/helper.js
+++ b/test/helper.js
@@ -92,7 +92,7 @@ module.exports.payloadMethod = function (method, t, isSetErrorHandler = false) {
     }
   })
 
-  fastify.listen(0, function (err) {
+  fastify.listen({ port: 0 }, function (err) {
     if (err) {
       t.error(err)
       return
diff --git a/test/hooks-async.test.js b/test/hooks-async.test.js
index d830f083..f96fa640 100644
--- a/test/hooks-async.test.js
+++ b/test/hooks-async.test.js
@@ -56,7 +56,7 @@ test('async hooks', t => {
     reply.code(200).send({ hello: 'world' })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
diff --git a/test/hooks.on-ready.test.js b/test/hooks.on-ready.test.js
index a990d4d4..42c24174 100644
--- a/test/hooks.on-ready.test.js
+++ b/test/hooks.on-ready.test.js
@@ -112,7 +112,7 @@ t.test('listen and onReady order', async t => {
 
   await fastify.ready()
   t.pass('trigger the onReady')
-  await fastify.listen(0)
+  await fastify.listen({ port: 0 })
   t.pass('do not trigger the onReady')
 
   await fastify.close()
diff --git a/test/hooks.test.js b/test/hooks.test.js
index 91c5dd20..d9f9dc7c 100644
--- a/test/hooks.test.js
+++ b/test/hooks.test.js
@@ -138,7 +138,7 @@ test('hooks', t => {
     reply.code(200).send(payload)
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -261,7 +261,7 @@ test('onRequest hook should support encapsulation / 3', t => {
     done()
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -322,7 +322,7 @@ test('preHandler hook should support encapsulation / 5', t => {
     done()
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -733,7 +733,7 @@ test('onRoute hook should able to change the route url', t => {
     done()
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -918,7 +918,7 @@ test('onResponse hook should support encapsulation / 3', t => {
     done()
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -995,7 +995,7 @@ test('onSend hook should support encapsulation / 2', t => {
     done()
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -1259,7 +1259,7 @@ test('onSend hook throws', t => {
     reply.send({ hello: 'world' })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
     sget({
@@ -1381,7 +1381,7 @@ test('cannot add hook after binding', t => {
     reply.send({ hello: 'world' })
   })
 
-  instance.listen(0, err => {
+  instance.listen({ port: 0 }, err => {
     t.error(err)
     t.teardown(instance.server.close.bind(instance.server))
 
@@ -2389,7 +2389,7 @@ test('preValidation hook should support encapsulation / 3', t => {
     done()
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -2536,7 +2536,7 @@ test('preParsing hook should run before parsing and be able to modify the payloa
     }
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -2579,7 +2579,7 @@ test('preParsing hooks should run in the order in which they are defined', t =>
     }
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -2629,7 +2629,7 @@ test('preParsing hooks should support encapsulation', t => {
     done()
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -2750,7 +2750,7 @@ test('preParsing hook should support encapsulation / 3', t => {
     done()
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -2812,7 +2812,7 @@ test('preSerialization hook should run before serialization and be able to modif
     }
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -2863,7 +2863,7 @@ test('preSerialization hook should be able to throw errors which are validated a
     }
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -2897,7 +2897,7 @@ test('preSerialization hook which returned error should still run onError hooks'
     reply.send({ hello: 'world' })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -2931,7 +2931,7 @@ test('preSerialization hooks should run in the order in which they are defined',
     reply.send(payload)
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -2975,7 +2975,7 @@ test('preSerialization hooks should support encapsulation', t => {
     done()
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -3162,7 +3162,7 @@ test('onTimeout should be triggered', t => {
     return reply
   })
 
-  fastify.listen(0, (err, address) => {
+  fastify.listen({ port: 0 }, (err, address) => {
     t.error(err)
     t.teardown(() => fastify.close())
 
@@ -3201,7 +3201,7 @@ test('onTimeout should be triggered and socket _meta is set', t => {
     return reply
   })
 
-  fastify.listen(0, (err, address) => {
+  fastify.listen({ port: 0 }, (err, address) => {
     t.error(err)
     t.teardown(() => fastify.close())
 
diff --git a/test/http2/closing.test.js b/test/http2/closing.test.js
index 2c8c8c8f..bf420223 100644
--- a/test/http2/closing.test.js
+++ b/test/http2/closing.test.js
@@ -32,7 +32,7 @@ t.test('http/2 request while fastify closing', t => {
 
   fastify.get('/', () => Promise.resolve({}))
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -79,7 +79,7 @@ t.test('http/2 request while fastify closing - return503OnClosing: false', t =>
 
   fastify.get('/', () => Promise.resolve({}))
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -118,7 +118,7 @@ t.test('http/2 closes successfully with async await', async t => {
     http2: true
   })
 
-  await fastify.listen(0)
+  await fastify.listen({ port: 0 })
 
   const url = getUrl(fastify)
   const session = await connect(url)
@@ -137,7 +137,7 @@ t.test('https/2 closes successfully with async await', async t => {
     }
   })
 
-  await fastify.listen(0)
+  await fastify.listen({ port: 0 })
 
   const url = getUrl(fastify)
   const session = await connect(url)
@@ -160,7 +160,7 @@ t.test('http/2 server side session emits a timeout event', async t => {
     return {}
   })
 
-  await fastify.listen(0)
+  await fastify.listen({ port: 0 })
 
   const url = getUrl(fastify)
   const session = await connect(url)
diff --git a/test/http2/constraint.test.js b/test/http2/constraint.test.js
index a0746f5c..1e34505b 100644
--- a/test/http2/constraint.test.js
+++ b/test/http2/constraint.test.js
@@ -46,7 +46,7 @@ test('A route supports host constraints under http2 protocol and secure connecti
     }
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
diff --git a/test/http2/head.test.js b/test/http2/head.test.js
index 1461a487..59bb513f 100644
--- a/test/http2/head.test.js
+++ b/test/http2/head.test.js
@@ -20,7 +20,7 @@ fastify.all('/', function (req, reply) {
   reply.code(200).send(msg)
 })
 
-fastify.listen(0, err => {
+fastify.listen({ port: 0 }, err => {
   t.error(err)
   fastify.server.unref()
 
diff --git a/test/http2/plain.test.js b/test/http2/plain.test.js
index bf7afc90..d58e0a5f 100644
--- a/test/http2/plain.test.js
+++ b/test/http2/plain.test.js
@@ -24,7 +24,7 @@ fastify.get('/hostname', function (req, reply) {
   reply.code(200).send(req.hostname)
 })
 
-fastify.listen(0, err => {
+fastify.listen({ port: 0 }, err => {
   t.error(err)
   fastify.server.unref()
 
diff --git a/test/http2/secure-with-fallback.test.js b/test/http2/secure-with-fallback.test.js
index df4b42e6..789fc8b8 100644
--- a/test/http2/secure-with-fallback.test.js
+++ b/test/http2/secure-with-fallback.test.js
@@ -40,7 +40,7 @@ test('secure with fallback', (t) => {
     throw new Error('kaboom')
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
diff --git a/test/http2/secure.test.js b/test/http2/secure.test.js
index c618584e..888da1cb 100644
--- a/test/http2/secure.test.js
+++ b/test/http2/secure.test.js
@@ -33,7 +33,7 @@ test('secure', (t) => {
     reply.code(200).send({ proto: req.protocol })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
diff --git a/test/http2/unknown-http-method.test.js b/test/http2/unknown-http-method.test.js
index 2305c6dc..36a37c91 100644
--- a/test/http2/unknown-http-method.test.js
+++ b/test/http2/unknown-http-method.test.js
@@ -14,7 +14,7 @@ fastify.get('/', function (req, reply) {
   reply.code(200).send(msg)
 })
 
-fastify.listen(0, err => {
+fastify.listen({ port: 0 }, err => {
   t.error(err)
   fastify.server.unref()
 
diff --git a/test/https/custom-https-server.test.js b/test/https/custom-https-server.test.js
index 2b623330..ea05e639 100644
--- a/test/https/custom-https-server.test.js
+++ b/test/https/custom-https-server.test.js
@@ -40,7 +40,7 @@ test('Should support a custom https server', async t => {
     reply.send({ hello: 'world' })
   })
 
-  await fastify.listen(0)
+  await fastify.listen({ port: 0 })
 
   await new Promise((resolve, reject) => {
     sget({
diff --git a/test/https/https.test.js b/test/https/https.test.js
index 5fe8c696..9fa93d23 100644
--- a/test/https/https.test.js
+++ b/test/https/https.test.js
@@ -32,7 +32,7 @@ test('https', (t) => {
     reply.code(200).send({ proto: req.protocol })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
diff --git a/test/input-validation.js b/test/input-validation.js
index 8da6b485..3b425c0d 100644
--- a/test/input-validation.js
+++ b/test/input-validation.js
@@ -134,7 +134,7 @@ module.exports.payloadMethod = function (method, t) {
     }
   })
 
-  fastify.listen(0, function (err) {
+  fastify.listen({ port: 0 }, function (err) {
     if (err) {
       t.error(err)
     }
diff --git a/test/internals/handleRequest.test.js b/test/internals/handleRequest.test.js
index 0293b872..a7f0184e 100644
--- a/test/internals/handleRequest.test.js
+++ b/test/internals/handleRequest.test.js
@@ -139,7 +139,7 @@ test('request should be defined in onSend Hook on post request with content type
   fastify.post('/', (request, reply) => {
     reply.send(200)
   })
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     fastify.server.unref()
     t.error(err)
     sget({
@@ -170,7 +170,7 @@ test('request should be defined in onSend Hook on post request with content type
   fastify.post('/', (request, reply) => {
     reply.send(200)
   })
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     fastify.server.unref()
     t.error(err)
     sget({
@@ -201,7 +201,7 @@ test('request should be defined in onSend Hook on options request with content t
   fastify.options('/', (request, reply) => {
     reply.send(200)
   })
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     fastify.server.unref()
     t.error(err)
     sget({
diff --git a/test/internals/initialConfig.test.js b/test/internals/initialConfig.test.js
index cb23e997..194de2af 100644
--- a/test/internals/initialConfig.test.js
+++ b/test/internals/initialConfig.test.js
@@ -308,7 +308,7 @@ test('Should not have issues when passing stream options to Pino.js', t => {
     })
   })
 
-  fastify.listen(0, localhost, err => {
+  fastify.listen({ port: 0, host: localhost }, err => {
     t.error(err)
     fastify.server.unref()
 
diff --git a/test/internals/logger.test.js b/test/internals/logger.test.js
index 366ed97f..dec0863f 100644
--- a/test/internals/logger.test.js
+++ b/test/internals/logger.test.js
@@ -20,7 +20,7 @@ test('The logger should add a unique id for every request', t => {
     reply.send({ id: req.id })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     const queue = new Queue()
     for (let i = 0; i < 10; i++) {
@@ -53,7 +53,7 @@ test('The logger should reuse request id header for req.id', t => {
     reply.send({ id: req.id })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     fastify.inject({
diff --git a/test/internals/reply.test.js b/test/internals/reply.test.js
index be99f61d..25348ad8 100644
--- a/test/internals/reply.test.js
+++ b/test/internals/reply.test.js
@@ -263,7 +263,7 @@ test('within an instance', t => {
     done()
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -423,7 +423,7 @@ test('buffer without content type should send a application/octet-stream and raw
     reply.send(Buffer.alloc(1024))
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -448,7 +448,7 @@ test('buffer with content type should not send application/octet-stream', t => {
     reply.send(Buffer.alloc(1024))
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -476,7 +476,7 @@ test('stream with content type should not send application/octet-stream', t => {
     reply.header('Content-Type', 'text/plain').send(stream)
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
     sget({
@@ -502,7 +502,7 @@ test('stream without content type should not send application/octet-stream', t =
     reply.send(stream)
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
     sget({
@@ -537,7 +537,7 @@ test('stream using reply.raw.writeHead should return customize headers', t => {
     reply.send(stream)
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
     sget({
@@ -561,7 +561,7 @@ test('plain string without content type should send a text/plain', t => {
     reply.send('hello world!')
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -585,7 +585,7 @@ test('plain string with content type should be sent unmodified', t => {
     reply.type('text/css').send('hello world!')
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -612,7 +612,7 @@ test('plain string with content type and custom serializer should be serialized'
       .send('hello world!')
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -636,7 +636,7 @@ test('plain string with content type application/json should NOT be serialized a
     reply.type('application/json').send('{"key": "hello world!"}')
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -689,7 +689,7 @@ test('plain string with custom json content type should NOT be serialized as jso
     })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -715,7 +715,7 @@ test('non-string with content type application/json SHOULD be serialized as json
     reply.type('application/json').send({ key: 'hello world!' })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -764,7 +764,7 @@ test('non-string with custom json content type SHOULD be serialized as json', t
     })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -829,7 +829,7 @@ test('undefined payload should be sent as-is', t => {
     reply.code(204).send()
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -874,7 +874,7 @@ test('for HEAD method, no body should be sent but content-length should be', t =
     reply.code(200).send(null)
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -921,7 +921,7 @@ test('reply.send(new NotFound()) should not invoke the 404 handler', t => {
     done()
   }, { prefix: '/prefixed' })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     fastify.server.unref()
@@ -968,7 +968,7 @@ test('reply can set multiple instances of same header', t => {
       .send({})
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -995,7 +995,7 @@ test('reply.hasHeader returns correct values', t => {
     reply.send()
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
     sget({
@@ -1024,7 +1024,7 @@ test('reply.getHeader returns correct values', t => {
     reply.send()
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
     sget({
@@ -1094,7 +1094,7 @@ test('reply.removeHeader can remove the value', t => {
     reply.send()
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
     sget({
@@ -1121,7 +1121,7 @@ test('reply.header can reset the value', t => {
     reply.send()
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
     sget({
@@ -1150,7 +1150,7 @@ test('reply.hasHeader computes raw and fastify headers', t => {
     reply.send()
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
     sget({
@@ -1319,7 +1319,7 @@ test('reply.header setting multiple cookies as multiple Set-Cookie headers', t =
       .send({})
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -1692,7 +1692,7 @@ test('cannot set the replySerializer when the server is running', t => {
   const fastify = require('../..')()
   t.teardown(fastify.close.bind(fastify))
 
-  fastify.listen(err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     try {
       fastify.setReplySerializer(() => {})
@@ -1847,7 +1847,7 @@ test('redirect to an invalid URL should not crash the server', async t => {
     }
   })
 
-  await fastify.listen(0)
+  await fastify.listen({ port: 0 })
 
   {
     const { response, body } = await doGet(`http://localhost:${fastify.server.address().port}/redirect?useCase=1`)
@@ -1893,7 +1893,7 @@ test('invalid response headers should not crash the server', async t => {
     }
   })
 
-  await fastify.listen(0)
+  await fastify.listen({ port: 0 })
 
   const { response, body } = await doGet(`http://localhost:${fastify.server.address().port}/bad-headers`)
   t.equal(response.statusCode, 500)
@@ -1922,7 +1922,7 @@ test('invalid response headers when sending back an error', async t => {
     }
   })
 
-  await fastify.listen(0)
+  await fastify.listen({ port: 0 })
 
   const { response, body } = await doGet(`http://localhost:${fastify.server.address().port}/bad-headers`)
   t.equal(response.statusCode, 500)
@@ -1956,7 +1956,7 @@ test('invalid response headers and custom error handler', async t => {
     reply.status(500).send({ ops: true })
   })
 
-  await fastify.listen(0)
+  await fastify.listen({ port: 0 })
 
   const { response, body } = await doGet(`http://localhost:${fastify.server.address().port}/bad-headers`)
   t.equal(response.statusCode, 500)
diff --git a/test/internals/server.test.js b/test/internals/server.test.js
index 3277b097..80513a21 100644
--- a/test/internals/server.test.js
+++ b/test/internals/server.test.js
@@ -13,7 +13,7 @@ const handler = (req, res) => {
 
 test('start listening', async t => {
   const { server, listen } = createServer({}, handler)
-  await listen.call(Fastify(), 0, 'localhost')
+  await listen.call(Fastify(), { port: 0, host: 'localhost' })
   server.close()
   t.pass('server started')
 })
@@ -27,7 +27,7 @@ test('DNS errors does not stop the main server on localhost - promise interface'
     }
   })
   const { server, listen } = createServer({}, handler)
-  await listen.call(Fastify(), 0, 'localhost')
+  await listen.call(Fastify(), { port: 0, host: 'localhost' })
   server.close()
   t.pass('server started')
 })
@@ -42,7 +42,7 @@ test('DNS errors does not stop the main server on localhost - callback interface
     }
   })
   const { server, listen } = createServer({}, handler)
-  listen.call(Fastify(), 0, 'localhost', (err) => {
+  listen.call(Fastify(), { port: 0, host: 'localhost' }, (err) => {
     t.error(err)
     server.close()
     t.pass('server started')
@@ -59,7 +59,7 @@ test('DNS returns empty binding', t => {
     }
   })
   const { server, listen } = createServer({}, handler)
-  listen.call(Fastify(), 0, 'localhost', (err) => {
+  listen.call(Fastify(), { port: 0, host: 'localhost' }, (err) => {
     t.error(err)
     server.close()
     t.pass('server started')
@@ -80,7 +80,7 @@ test('DNS returns more than two binding', t => {
     }
   })
   const { server, listen } = createServer({}, handler)
-  listen.call(Fastify(), 0, 'localhost', (err) => {
+  listen.call(Fastify(), { port: 0, host: 'localhost' }, (err) => {
     t.error(err)
     server.close()
     t.pass('server started')
diff --git a/test/listen.deprecated.test.js b/test/listen.deprecated.test.js
new file mode 100644
index 00000000..8079067d
--- /dev/null
+++ b/test/listen.deprecated.test.js
@@ -0,0 +1,202 @@
+'use strict'
+
+// Tests for deprecated `.listen` signature. This file should be
+// removed when the deprecation is complete.
+
+const { test, before } = require('tap')
+const dns = require('dns').promises
+const Fastify = require('..')
+
+let localhost
+let localhostForURL
+
+process.removeAllListeners('warning')
+
+before(async function (t) {
+  const lookup = await dns.lookup('localhost')
+  localhost = lookup.address
+  if (lookup.family === 6) {
+    localhostForURL = `[${lookup.address}]`
+  } else {
+    localhostForURL = localhost
+  }
+})
+
+test('listen accepts a port and a callback', t => {
+  t.plan(2)
+  const fastify = Fastify()
+  t.teardown(fastify.close.bind(fastify))
+  fastify.listen(0, (err) => {
+    t.equal(fastify.server.address().address, localhost)
+    t.error(err)
+  })
+})
+
+test('listen accepts a port and a callback with (err, address)', t => {
+  t.plan(2)
+  const fastify = Fastify()
+  t.teardown(fastify.close.bind(fastify))
+  fastify.listen(0, (err, address) => {
+    t.equal(address, `http://${localhostForURL}:${fastify.server.address().port}`)
+    t.error(err)
+  })
+})
+
+test('listen accepts a port, address, and callback', t => {
+  t.plan(1)
+  const fastify = Fastify()
+  t.teardown(fastify.close.bind(fastify))
+  fastify.listen(0, localhost, (err) => {
+    t.error(err)
+  })
+})
+
+test('listen accepts options, backlog and a callback', t => {
+  t.plan(1)
+  const fastify = Fastify()
+  t.teardown(fastify.close.bind(fastify))
+  fastify.listen({
+    port: 0,
+    host: 'localhost'
+  }, 511, (err) => {
+    t.error(err)
+  })
+})
+
+test('listen accepts options (no port), backlog and a callback', t => {
+  t.plan(1)
+  const fastify = Fastify()
+  t.teardown(fastify.close.bind(fastify))
+  fastify.listen({
+    host: 'localhost'
+  }, 511, (err) => {
+    t.error(err)
+  })
+})
+
+test('listen accepts options (no host), backlog and a callback', t => {
+  t.plan(1)
+  const fastify = Fastify()
+  t.teardown(fastify.close.bind(fastify))
+  fastify.listen({
+    port: 0
+  }, 511, (err) => {
+    t.error(err)
+  })
+})
+
+test('listen accepts options (no port, no host), backlog and a callback', t => {
+  t.plan(1)
+  const fastify = Fastify()
+  t.teardown(fastify.close.bind(fastify))
+  fastify.listen({
+    ipv6Only: false
+  }, 511, (err) => {
+    t.error(err)
+  })
+})
+
+test('listen accepts a port, address and a callback with (err, address)', t => {
+  t.plan(2)
+  const fastify = Fastify()
+  t.teardown(fastify.close.bind(fastify))
+  fastify.listen(0, localhost, (err, address) => {
+    t.equal(address, `http://${localhostForURL}:${fastify.server.address().port}`)
+    t.error(err)
+  })
+})
+
+test('listen accepts a port, address, backlog and callback', t => {
+  t.plan(1)
+  const fastify = Fastify()
+  t.teardown(fastify.close.bind(fastify))
+  fastify.listen(0, localhost, 511, (err) => {
+    t.error(err)
+  })
+})
+
+test('listen accepts a port, address, backlog and callback with (err, address)', t => {
+  t.plan(2)
+  const fastify = Fastify()
+  t.teardown(fastify.close.bind(fastify))
+  fastify.listen(0, localhost, 511, (err, address) => {
+    t.equal(address, `http://${localhostForURL}:${fastify.server.address().port}`)
+    t.error(err)
+  })
+})
+
+test('listen without callback (port zero)', t => {
+  t.plan(1)
+  const fastify = Fastify()
+  t.teardown(fastify.close.bind(fastify))
+  fastify.listen(0)
+    .then(() => {
+      t.equal(fastify.server.address().address, localhost)
+    })
+})
+
+test('listen without callback (port not given)', t => {
+  t.plan(1)
+  const fastify = Fastify()
+  t.teardown(fastify.close.bind(fastify))
+  fastify.listen()
+    .then(() => {
+      t.equal(fastify.server.address().address, localhost)
+    })
+})
+
+test('listen null without callback with (address)', t => {
+  t.plan(1)
+  const fastify = Fastify()
+  t.teardown(fastify.close.bind(fastify))
+  fastify.listen(null)
+    .then(address => {
+      t.equal(address, `http://${localhostForURL}:${fastify.server.address().port}`)
+    })
+})
+
+test('listen without port without callback with (address)', t => {
+  t.plan(1)
+  const fastify = Fastify()
+  t.teardown(fastify.close.bind(fastify))
+  fastify.listen()
+    .then(address => {
+      t.equal(address, `http://${localhostForURL}:${fastify.server.address().port}`)
+    })
+})
+
+test('listen with undefined without callback with (address)', t => {
+  t.plan(1)
+  const fastify = Fastify()
+  t.teardown(fastify.close.bind(fastify))
+  fastify.listen(undefined)
+    .then(address => {
+      t.equal(address, `http://${localhostForURL}:${fastify.server.address().port}`)
+    })
+})
+
+test('listen when firstArg is string(pipe) and without backlog', async t => {
+  t.plan(1)
+  const fastify = Fastify()
+  t.teardown(fastify.close.bind(fastify))
+  const address = await fastify.listen('\\\\.\\pipe\\testPipe')
+  t.equal(address, '\\\\.\\pipe\\testPipe')
+})
+
+test('listen when firstArg is string(pipe) and with backlog', async t => {
+  t.plan(1)
+  const fastify = Fastify()
+  t.teardown(fastify.close.bind(fastify))
+  const address = await fastify.listen('\\\\.\\pipe\\testPipe2', 511)
+  t.equal(address, '\\\\.\\pipe\\testPipe2')
+})
+
+test('listen when firstArg is { path: string(pipe) } and with backlog and callback', t => {
+  t.plan(2)
+  const fastify = Fastify()
+  t.teardown(fastify.close.bind(fastify))
+  fastify.listen({ path: '\\\\.\\pipe\\testPipe3' }, 511, (err, address) => {
+    t.error(err)
+    t.equal(address, '\\\\.\\pipe\\testPipe3')
+  })
+})
diff --git a/test/listen.test.js b/test/listen.test.js
index 0b7cc85b..a2afcfd7 100644
--- a/test/listen.test.js
+++ b/test/listen.test.js
@@ -22,46 +22,38 @@ before(async function () {
   }
 })
 
-test('listen accepts a callback', t => {
-  t.plan(2)
-  const fastify = Fastify()
-  t.teardown(fastify.close.bind(fastify))
-  fastify.listen((err) => {
-    t.equal(fastify.server.address().address, localhost)
-    t.error(err)
+test('listen works without arguments', async t => {
+  process.on('warning', () => {
+    t.fail('should not be deprecated')
   })
-})
 
-test('listen accepts a port and a callback', t => {
-  t.plan(2)
   const fastify = Fastify()
   t.teardown(fastify.close.bind(fastify))
-  fastify.listen(0, (err) => {
-    t.equal(fastify.server.address().address, localhost)
-    t.error(err)
-  })
+  await fastify.listen()
+  const address = fastify.server.address()
+  t.equal(address.address, localhost)
+  t.ok(address.port > 0)
 })
 
-test('listen accepts a port and a callback with (err, address)', t => {
-  t.plan(2)
-  const fastify = Fastify()
-  t.teardown(fastify.close.bind(fastify))
-  fastify.listen(0, (err, address) => {
-    t.equal(address, `http://${localhostForURL}:${fastify.server.address().port}`)
-    t.error(err)
+test('listen accepts a callback', t => {
+  process.on('warning', () => {
+    t.fail('should not be deprecated')
   })
-})
 
-test('listen accepts a port, address, and callback', t => {
-  t.plan(1)
+  t.plan(2)
   const fastify = Fastify()
   t.teardown(fastify.close.bind(fastify))
-  fastify.listen(0, localhost, (err) => {
+  fastify.listen({ port: 0 }, (err) => {
+    t.equal(fastify.server.address().address, localhost)
     t.error(err)
   })
 })
 
 test('listen accepts options and a callback', t => {
+  process.on('warning', () => {
+    t.fail('should not be deprecated')
+  })
+
   t.plan(1)
   const fastify = Fastify()
   t.teardown(fastify.close.bind(fastify))
@@ -78,54 +70,13 @@ test('listen accepts options and a callback', t => {
   })
 })
 
-test('listen accepts options, backlog and a callback', t => {
-  t.plan(1)
-  const fastify = Fastify()
-  t.teardown(fastify.close.bind(fastify))
-  fastify.listen({
-    port: 0,
-    host: 'localhost'
-  }, 511, (err) => {
-    t.error(err)
-  })
-})
-
-test('listen accepts a port, address and a callback with (err, address)', t => {
-  t.plan(2)
-  const fastify = Fastify()
-  t.teardown(fastify.close.bind(fastify))
-  fastify.listen(0, localhost, (err, address) => {
-    t.equal(address, `http://${localhostForURL}:${fastify.server.address().port}`)
-    t.error(err)
-  })
-})
-
-test('listen accepts a port, address, backlog and callback', t => {
-  t.plan(1)
-  const fastify = Fastify()
-  t.teardown(fastify.close.bind(fastify))
-  fastify.listen(0, localhost, 511, (err) => {
-    t.error(err)
-  })
-})
-
-test('listen accepts a port, address, backlog and callback with (err, address)', t => {
-  t.plan(2)
-  const fastify = Fastify()
-  t.teardown(fastify.close.bind(fastify))
-  fastify.listen(0, localhost, 511, (err, address) => {
-    t.equal(address, `http://${localhostForURL}:${fastify.server.address().port}`)
-    t.error(err)
-  })
-})
-
 test('listen after Promise.resolve()', t => {
   t.plan(2)
   const f = Fastify()
   t.teardown(f.close.bind(f))
   Promise.resolve()
     .then(() => {
-      f.listen(0, (err, address) => {
+      f.listen({ port: 0 }, (err, address) => {
         f.server.unref()
         t.equal(address, `http://${localhostForURL}:${f.server.address().port}`)
         t.error(err)
@@ -155,9 +106,9 @@ test('double listen errors', t => {
   t.plan(3)
   const fastify = Fastify()
   t.teardown(fastify.close.bind(fastify))
-  fastify.listen(0, (err) => {
+  fastify.listen({ port: 0 }, (err) => {
     t.error(err)
-    fastify.listen(fastify.server.address().port, (err, address) => {
+    fastify.listen({ port: fastify.server.address().port }, (err, address) => {
       t.equal(address, null)
       t.ok(err)
     })
@@ -168,10 +119,10 @@ test('double listen errors callback with (err, address)', t => {
   t.plan(4)
   const fastify = Fastify()
   t.teardown(fastify.close.bind(fastify))
-  fastify.listen(0, (err1, address1) => {
+  fastify.listen({ port: 0 }, (err1, address1) => {
     t.equal(address1, `http://${localhostForURL}:${fastify.server.address().port}`)
     t.error(err1)
-    fastify.listen(fastify.server.address().port, (err2, address2) => {
+    fastify.listen({ port: fastify.server.address().port }, (err2, address2) => {
       t.equal(address2, null)
       t.ok(err2)
     })
@@ -182,12 +133,12 @@ test('listen twice on the same port', t => {
   t.plan(4)
   const fastify = Fastify()
   t.teardown(fastify.close.bind(fastify))
-  fastify.listen(0, (err1, address1) => {
+  fastify.listen({ port: 0 }, (err1, address1) => {
     t.equal(address1, `http://${localhostForURL}:${fastify.server.address().port}`)
     t.error(err1)
     const s2 = Fastify()
     t.teardown(s2.close.bind(s2))
-    s2.listen(fastify.server.address().port, (err2, address2) => {
+    s2.listen({ port: fastify.server.address().port }, (err2, address2) => {
       t.equal(address2, null)
       t.ok(err2)
     })
@@ -198,13 +149,13 @@ test('listen twice on the same port callback with (err, address)', t => {
   t.plan(4)
   const fastify = Fastify()
   t.teardown(fastify.close.bind(fastify))
-  fastify.listen(0, (err1, address1) => {
+  fastify.listen({ port: 0 }, (err1, address1) => {
     const _port = fastify.server.address().port
     t.equal(address1, `http://${localhostForURL}:${_port}`)
     t.error(err1)
     const s2 = Fastify()
     t.teardown(s2.close.bind(s2))
-    s2.listen(_port, (err2, address2) => {
+    s2.listen({ port: _port }, (err2, address2) => {
       t.equal(address2, null)
       t.ok(err2)
     })
@@ -223,7 +174,7 @@ if (os.platform() !== 'win32') {
       fs.unlinkSync(sockFile)
     } catch (e) { }
 
-    fastify.listen(sockFile, (err, address) => {
+    fastify.listen({ path: sockFile }, (err, address) => {
       t.error(err)
       t.equal(sockFile, fastify.server.address())
       t.equal(address, sockFile)
@@ -231,61 +182,11 @@ if (os.platform() !== 'win32') {
   })
 }
 
-test('listen without callback (port zero)', t => {
-  t.plan(1)
-  const fastify = Fastify()
-  t.teardown(fastify.close.bind(fastify))
-  fastify.listen(0)
-    .then(() => {
-      t.equal(fastify.server.address().address, localhost)
-    })
-})
-
-test('listen without callback (port not given)', t => {
-  t.plan(1)
-  const fastify = Fastify()
-  t.teardown(fastify.close.bind(fastify))
-  fastify.listen()
-    .then(() => {
-      t.equal(fastify.server.address().address, localhost)
-    })
-})
-
-test('listen null without callback with (address)', t => {
-  t.plan(1)
-  const fastify = Fastify()
-  t.teardown(fastify.close.bind(fastify))
-  fastify.listen(null)
-    .then(address => {
-      t.equal(address, `http://${localhostForURL}:${fastify.server.address().port}`)
-    })
-})
-
-test('listen without port without callback with (address)', t => {
-  t.plan(1)
-  const fastify = Fastify()
-  t.teardown(fastify.close.bind(fastify))
-  fastify.listen()
-    .then(address => {
-      t.equal(address, `http://${localhostForURL}:${fastify.server.address().port}`)
-    })
-})
-
-test('listen with undefined without callback with (address)', t => {
-  t.plan(1)
-  const fastify = Fastify()
-  t.teardown(fastify.close.bind(fastify))
-  fastify.listen(undefined)
-    .then(address => {
-      t.equal(address, `http://${localhostForURL}:${fastify.server.address().port}`)
-    })
-})
-
 test('listen without callback with (address)', t => {
   t.plan(1)
   const fastify = Fastify()
   t.teardown(fastify.close.bind(fastify))
-  fastify.listen(0)
+  fastify.listen({ port: 0 })
     .then(address => {
       t.equal(address, `http://${localhostForURL}:${fastify.server.address().port}`)
     })
@@ -295,9 +196,9 @@ test('double listen without callback rejects', t => {
   t.plan(1)
   const fastify = Fastify()
   t.teardown(fastify.close.bind(fastify))
-  fastify.listen(0)
+  fastify.listen({ port: 0 })
     .then(() => {
-      fastify.listen(0)
+      fastify.listen({ port: 0 })
         .catch(err => {
           t.ok(err)
         })
@@ -309,10 +210,10 @@ test('double listen without callback with (address)', t => {
   t.plan(2)
   const fastify = Fastify()
   t.teardown(fastify.close.bind(fastify))
-  fastify.listen(0)
+  fastify.listen({ port: 0 })
     .then(address => {
       t.equal(address, `http://${localhostForURL}:${fastify.server.address().port}`)
-      fastify.listen(0)
+      fastify.listen({ port: 0 })
         .catch(err => {
           t.ok(err)
         })
@@ -325,11 +226,11 @@ test('listen twice on the same port without callback rejects', t => {
   const fastify = Fastify()
   t.teardown(fastify.close.bind(fastify))
 
-  fastify.listen(0)
+  fastify.listen({ port: 0 })
     .then(() => {
       const s2 = Fastify()
       t.teardown(s2.close.bind(s2))
-      s2.listen(fastify.server.address().port)
+      s2.listen({ port: fastify.server.address().port })
         .catch(err => {
           t.ok(err)
         })
@@ -341,12 +242,12 @@ test('listen twice on the same port without callback rejects with (address)', t
   t.plan(2)
   const fastify = Fastify()
   t.teardown(fastify.close.bind(fastify))
-  fastify.listen(0)
+  fastify.listen({ port: 0 })
     .then(address => {
       const s2 = Fastify()
       t.teardown(s2.close.bind(s2))
       t.equal(address, `http://${localhostForURL}:${fastify.server.address().port}`)
-      s2.listen(fastify.server.address().port)
+      s2.listen({ port: fastify.server.address().port })
         .catch(err => {
           t.ok(err)
         })
@@ -357,7 +258,7 @@ test('listen twice on the same port without callback rejects with (address)', t
 test('listen on invalid port without callback rejects', t => {
   const fastify = Fastify()
   t.teardown(fastify.close.bind(fastify))
-  return fastify.listen(-1)
+  return fastify.listen({ port: -1 })
     .catch(err => {
       t.ok(err)
       return true
@@ -374,28 +275,12 @@ test('listen logs the port as info', t => {
     msgs.push(msg)
   }
 
-  fastify.listen(0)
+  fastify.listen({ port: 0 })
     .then(() => {
       t.ok(/http:\/\//.test(msgs[0]))
     })
 })
 
-test('listen when firstArg is string(pipe) and without backlog', async t => {
-  t.plan(1)
-  const fastify = Fastify()
-  t.teardown(fastify.close.bind(fastify))
-  const address = await fastify.listen('\\\\.\\pipe\\testPipe')
-  t.equal(address, '\\\\.\\pipe\\testPipe')
-})
-
-test('listen when firstArg is string(pipe) and with backlog', async t => {
-  t.plan(1)
-  const fastify = Fastify()
-  t.teardown(fastify.close.bind(fastify))
-  const address = await fastify.listen('\\\\.\\pipe\\testPipe', 511)
-  t.equal(address, '\\\\.\\pipe\\testPipe')
-})
-
 test('listen on localhost binds IPv4 and IPv6 - promise interface', async t => {
   const lookups = await dns.lookup('localhost', { all: true })
   t.plan(2 * lookups.length)
@@ -403,7 +288,7 @@ test('listen on localhost binds IPv4 and IPv6 - promise interface', async t => {
   const app = Fastify()
   app.get('/', async () => 'hello localhost')
   t.teardown(app.close.bind(app))
-  await app.listen(0, 'localhost')
+  await app.listen({ port: 0, host: 'localhost' })
 
   for (const lookup of lookups) {
     await new Promise((resolve, reject) => {
@@ -427,7 +312,7 @@ test('listen on localhost binds to all interfaces (both IPv4 and IPv6 if present
 
     const app = Fastify()
     app.get('/', async () => 'hello localhost')
-    app.listen(0, 'localhost', (err) => {
+    app.listen({ port: 0, host: 'localhost' }, (err) => {
       t.error(err)
       t.teardown(app.close.bind(app))
 
@@ -454,7 +339,7 @@ test('addresses getter', async t => {
   await app.ready()
 
   t.same(app.addresses(), [], 'after ready')
-  await app.listen(0, 'localhost')
+  await app.listen({ port: 0, host: 'localhost' })
   const { port } = app.server.address()
   const localAddresses = await dns.lookup('localhost', { all: true })
   for (const address of localAddresses) {
diff --git a/test/logger.test.js b/test/logger.test.js
index 6518a754..06e30732 100644
--- a/test/logger.test.js
+++ b/test/logger.test.js
@@ -56,7 +56,7 @@ test('defaults to info level', t => {
     reply.send({ hello: 'world' })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -118,7 +118,7 @@ test('test log stream', t => {
     reply.send({ hello: 'world' })
   })
 
-  fastify.listen(0, localhost, err => {
+  fastify.listen({ port: 0, host: localhost }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -165,7 +165,7 @@ test('test error log stream', t => {
     reply.send(new Error('kaboom'))
   })
 
-  fastify.listen(0, localhost, err => {
+  fastify.listen({ port: 0, host: localhost }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -210,7 +210,7 @@ test('can use external logger instance', t => {
     reply.send({ hello: 'world' })
   })
 
-  localFastify.listen(0, localhost, err => {
+  localFastify.listen({ port: 0, host: localhost }, err => {
     t.error(err)
     http.get(`http://${localhostForURL}:` + localFastify.server.address().port + '/foo', (res) => {
       res.resume()
@@ -255,7 +255,7 @@ test('can use external logger instance with custom serializer', t => {
     reply.send({ hello: 'world' })
   })
 
-  localFastify.listen(0, localhost, err => {
+  localFastify.listen({ port: 0, host: localhost }, err => {
     t.error(err)
     http.get(`http://${localhostForURL}:` + localFastify.server.address().port + '/foo', (res) => {
       res.resume()
@@ -459,7 +459,7 @@ test('The logger should accept custom serializer', t => {
     reply.send(new Error('kaboom'))
   })
 
-  fastify.listen(0, localhost, err => {
+  fastify.listen({ port: 0, host: localhost }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -1175,7 +1175,7 @@ test('should serialize request and response', t => {
           level: 'info'
         }
       })
-      fastify.listen(0, ipv6, err => {
+      fastify.listen({ port: 0, host: ipv6 }, err => {
         t.error(err)
         stream.once('data', line => {
           const expected = 'Server listening at http://[' + ipv6 + ']:' +
@@ -1197,7 +1197,7 @@ test('Do not wrap IPv4 address', t => {
       level: 'info'
     }
   })
-  fastify.listen(0, '127.0.0.1', err => {
+  fastify.listen({ port: 0, host: '127.0.0.1' }, err => {
     t.error(err)
     stream.once('data', line => {
       const expected = 'Server listening at http://127.0.0.1:' +
@@ -1224,7 +1224,7 @@ test('file option', t => {
     reply.send({ hello: 'world' })
   })
 
-  fastify.listen(0, localhost, err => {
+  fastify.listen({ port: 0, host: localhost }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -1269,7 +1269,7 @@ test('should log the error if no error handler is defined', t => {
     t.ok(req.log)
     reply.send(new Error('a generic error'))
   })
-  fastify.listen(0, localhost, err => {
+  fastify.listen({ port: 0, host: localhost }, err => {
     t.error(err)
     fastify.server.unref()
     http.get(`http://${localhostForURL}:` + fastify.server.address().port + '/error')
@@ -1307,7 +1307,7 @@ test('should log as info if error status code >= 400 and < 500 if no error handl
     t.ok(req.log)
     reply.send(Object.assign(new Error('a 503 error'), { statusCode: 503 }))
   })
-  fastify.listen(0, localhost, err => {
+  fastify.listen({ port: 0, host: localhost }, err => {
     t.error(err)
     fastify.server.unref()
     http.get(`http://${localhostForURL}:` + fastify.server.address().port + '/400')
@@ -1341,7 +1341,7 @@ test('should log as error if error status code >= 500 if no error handler is def
     t.ok(req.log)
     reply.send(Object.assign(new Error('a 503 error'), { statusCode: 503 }))
   })
-  fastify.listen(0, localhost, err => {
+  fastify.listen({ port: 0, host: localhost }, err => {
     t.error(err)
     fastify.server.unref()
     http.get(`http://${localhostForURL}:` + fastify.server.address().port + '/503')
@@ -1379,7 +1379,7 @@ test('should not log the error if error handler is defined and it does not error
     t.ok(err)
     reply.send('something bad happened')
   })
-  fastify.listen(0, localhost, err => {
+  fastify.listen({ port: 0, host: localhost }, err => {
     t.error(err)
     fastify.server.unref()
     http.get(`http://${localhostForURL}:` + fastify.server.address().port + '/error')
@@ -1410,7 +1410,7 @@ test('should not rely on raw request to log errors', t => {
     t.ok(req.log)
     reply.status(415).send(new Error('something happened'))
   })
-  fastify.listen(0, localhost, err => {
+  fastify.listen({ port: 0, host: localhost }, err => {
     t.error(err)
     fastify.server.unref()
     http.get(`http://${localhostForURL}:` + fastify.server.address().port + '/error')
@@ -1460,7 +1460,7 @@ test('should redact the authorization header if so specified', t => {
       t.equal(line.req.headers.authorization, '[Redacted]', 'authorization is redacted')
     })
   })
-  fastify.listen(0, localhost, err => {
+  fastify.listen({ port: 0, host: localhost }, err => {
     t.error(err)
     fastify.server.unref()
     sget({
diff --git a/test/maxRequestsPerSocket.test.js b/test/maxRequestsPerSocket.test.js
index 43d33848..1b9887a8 100644
--- a/test/maxRequestsPerSocket.test.js
+++ b/test/maxRequestsPerSocket.test.js
@@ -17,7 +17,7 @@ test('maxRequestsPerSocket on node version >= 16.10.0', { skip }, t => {
 
   t.teardown(fastify.close.bind(fastify))
 
-  fastify.listen(0, function (err) {
+  fastify.listen({ port: 0 }, function (err) {
     t.error(err)
 
     const port = fastify.server.address().port
@@ -58,7 +58,7 @@ test('maxRequestsPerSocket zero should behave same as null', { skip }, t => {
 
   t.teardown(fastify.close.bind(fastify))
 
-  fastify.listen(0, function (err) {
+  fastify.listen({ port: 0 }, function (err) {
     t.error(err)
 
     const port = fastify.server.address().port
diff --git a/test/nullable-validation.test.js b/test/nullable-validation.test.js
index 63d81b4c..89ec3421 100644
--- a/test/nullable-validation.test.js
+++ b/test/nullable-validation.test.js
@@ -88,7 +88,7 @@ test('object or null body', t => {
     }
   })
 
-  fastify.listen(0, (err) => {
+  fastify.listen({ port: 0 }, (err) => {
     fastify.server.unref()
     t.error(err)
 
@@ -140,7 +140,7 @@ test('nullable body', t => {
     }
   })
 
-  fastify.listen(0, (err) => {
+  fastify.listen({ port: 0 }, (err) => {
     fastify.server.unref()
     t.error(err)
 
@@ -181,7 +181,7 @@ test('Nullable body with 204', t => {
     }
   })
 
-  fastify.listen(0, (err) => {
+  fastify.listen({ port: 0 }, (err) => {
     fastify.server.unref()
     t.error(err)
 
diff --git a/test/output-validation.test.js b/test/output-validation.test.js
index 65b2a5e5..9e7064c1 100644
--- a/test/output-validation.test.js
+++ b/test/output-validation.test.js
@@ -90,7 +90,7 @@ test('unlisted response code', t => {
   }
 })
 
-fastify.listen(0, err => {
+fastify.listen({ port: 0 }, err => {
   t.error(err)
   fastify.server.unref()
 
diff --git a/test/plugin.test.js b/test/plugin.test.js
index fa619ac8..ce20b055 100644
--- a/test/plugin.test.js
+++ b/test/plugin.test.js
@@ -89,7 +89,7 @@ test('fastify.register with fastify-plugin should not encapsulate his code', t =
     t.notOk(fastify.test)
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -168,7 +168,7 @@ test('fastify.register with fastify-plugin should provide access to external fas
     t.notOk(fastify.global)
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -223,7 +223,7 @@ test('fastify.register with fastify-plugin registers root level plugins', t => {
     reply.send({ test: fastify.test })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -285,7 +285,7 @@ test('check dependencies - should not throw', t => {
     t.notOk(fastify.otherTest)
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -337,7 +337,7 @@ test('check dependencies - should throw', t => {
     t.notOk(fastify.test)
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -375,7 +375,7 @@ test('set the plugin name based on the plugin displayName symbol', t => {
     done()
   }, { name: 'plugin-B' }))
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.close()
   })
@@ -405,7 +405,7 @@ test('plugin name will change when using no encapsulation', t => {
     done()
   }, { name: 'plugin-A' }))
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.close()
   })
@@ -417,7 +417,7 @@ test('plugin name is undefined when accessing in no plugin context', t => {
 
   t.equal(fastify.pluginName, undefined)
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.close()
   })
@@ -445,7 +445,7 @@ test('set the plugin name based on the plugin function name', t => {
     done()
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.close()
   })
@@ -472,7 +472,7 @@ test('approximate a plugin name when no meta data is available', t => {
     done()
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.close()
   })
@@ -495,7 +495,7 @@ test('approximate a plugin name also when fastify-plugin has no meta data', t =>
     done()
   }))
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.close()
   })
@@ -535,7 +535,7 @@ test('plugin encapsulation', t => {
     t.notOk(fastify.test)
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -569,7 +569,7 @@ test('if a plugin raises an error and there is not a callback to handle it, the
     done(new Error('err'))
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.ok(err instanceof Error)
     t.equal(err.message, 'err')
   })
@@ -612,7 +612,7 @@ test('add hooks after route declaration', t => {
     done()
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -651,7 +651,7 @@ test('nested plugins', t => {
     done()
   }, { prefix: '/parent' })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
@@ -693,7 +693,7 @@ test('nested plugins awaited', t => {
     }, { prefix: '/child2' })
   }, { prefix: '/parent' })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     sget({
diff --git a/test/promises.test.js b/test/promises.test.js
index 8ba01608..3a2bc6c6 100644
--- a/test/promises.test.js
+++ b/test/promises.test.js
@@ -60,7 +60,7 @@ fastify.get('/return-reply', opts, function (req, reply) {
   return reply.send({ hello: 'world' })
 })
 
-fastify.listen(0, err => {
+fastify.listen({ port: 0 }, err => {
   t.error(err)
   fastify.server.unref()
 
diff --git a/test/proto-poisoning.test.js b/test/proto-poisoning.test.js
index 6b340f62..c0200f88 100644
--- a/test/proto-poisoning.test.js
+++ b/test/proto-poisoning.test.js
@@ -15,7 +15,7 @@ test('proto-poisoning error', t => {
     t.fail('handler should not be called')
   })
 
-  fastify.listen(0, function (err) {
+  fastify.listen({ port: 0 }, function (err) {
     t.error(err)
 
     sget({
@@ -41,7 +41,7 @@ test('proto-poisoning remove', t => {
     reply.send({ ok: true })
   })
 
-  fastify.listen(0, function (err) {
+  fastify.listen({ port: 0 }, function (err) {
     t.error(err)
 
     sget({
@@ -67,7 +67,7 @@ test('proto-poisoning ignore', t => {
     reply.send({ ok: true })
   })
 
-  fastify.listen(0, function (err) {
+  fastify.listen({ port: 0 }, function (err) {
     t.error(err)
 
     sget({
@@ -92,7 +92,7 @@ test('constructor-poisoning error (default in v3)', t => {
     reply.send('ok')
   })
 
-  fastify.listen(0, function (err) {
+  fastify.listen({ port: 0 }, function (err) {
     t.error(err)
 
     sget({
@@ -117,7 +117,7 @@ test('constructor-poisoning error', t => {
     t.fail('handler should not be called')
   })
 
-  fastify.listen(0, function (err) {
+  fastify.listen({ port: 0 }, function (err) {
     t.error(err)
 
     sget({
@@ -143,7 +143,7 @@ test('constructor-poisoning remove', t => {
     reply.send({ ok: true })
   })
 
-  fastify.listen(0, function (err) {
+  fastify.listen({ port: 0 }, function (err) {
     t.error(err)
 
     sget({
diff --git a/test/register.test.js b/test/register.test.js
index 4c791125..244b1270 100644
--- a/test/register.test.js
+++ b/test/register.test.js
@@ -38,7 +38,7 @@ test('register', t => {
     done()
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -71,7 +71,7 @@ test('internal route declaration should pass the error generated by the register
     reply.send({ hello: 'world' })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     fastify.close()
     t.equal(err.message, 'kaboom')
   })
@@ -93,7 +93,7 @@ test('internal route declaration should pass the error generated by the register
     t.equal(err.message, 'kaboom')
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     fastify.close()
     t.error(err)
   })
diff --git a/test/reply-error.test.js b/test/reply-error.test.js
index b67b2a6b..21badca7 100644
--- a/test/reply-error.test.js
+++ b/test/reply-error.test.js
@@ -107,7 +107,7 @@ test('Should reply 400 on client error', t => {
   t.plan(2)
 
   const fastify = Fastify()
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     const client = net.connect(fastify.server.address().port)
@@ -156,7 +156,7 @@ test('Should set the response from client error handler', t => {
     }
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     const client = net.connect(fastify.server.address().port)
@@ -671,7 +671,7 @@ test('setting content-type on reply object should not hang the server case 2', a
   })
 
   try {
-    await fastify.listen(0)
+    await fastify.listen({ port: 0 })
     const res = await fastify.inject({
       url: '/',
       method: 'GET'
diff --git a/test/request-error.test.js b/test/request-error.test.js
index 42b16771..0082a258 100644
--- a/test/request-error.test.js
+++ b/test/request-error.test.js
@@ -105,7 +105,7 @@ test('default clientError handler ignores ECONNRESET', t => {
     })
   })
 
-  fastify.listen(0, function (err) {
+  fastify.listen({ port: 0 }, function (err) {
     t.error(err)
     fastify.server.unref()
 
diff --git a/test/route-hooks.test.js b/test/route-hooks.test.js
index bfa16c42..43c78631 100644
--- a/test/route-hooks.test.js
+++ b/test/route-hooks.test.js
@@ -510,7 +510,7 @@ test('onTimeout on route', t => {
     }
   })
 
-  fastify.listen(0, (err, address) => {
+  fastify.listen({ port: 0 }, (err, address) => {
     t.error(err)
     t.teardown(() => fastify.close())
 
diff --git a/test/route.test.js b/test/route.test.js
index 3d8b7c9c..68fbc1b4 100644
--- a/test/route.test.js
+++ b/test/route.test.js
@@ -113,7 +113,7 @@ test('route', t => {
     }
   })
 
-  fastify.listen(0, function (err) {
+  fastify.listen({ port: 0 }, function (err) {
     if (err) t.error(err)
     fastify.server.unref()
 
@@ -1005,7 +1005,7 @@ test('no warning for exposeHeadRoute', async t => {
 
   process.on('warning', listener)
 
-  await fastify.listen(0)
+  await fastify.listen({ port: 0 })
 
   process.removeListener('warning', listener)
 
@@ -1439,7 +1439,7 @@ test('route with non-english characters', t => {
     reply.send('here /fÃ¶Ã¶')
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
diff --git a/test/router-options.test.js b/test/router-options.test.js
index bbf35cee..b51468ca 100644
--- a/test/router-options.test.js
+++ b/test/router-options.test.js
@@ -24,7 +24,7 @@ test('Should honor ignoreTrailingSlash option', t => {
     res.send('test')
   })
 
-  fastify.listen(0, (err) => {
+  fastify.listen({ port: 0 }, (err) => {
     fastify.server.unref()
     if (err) t.threw(err)
 
diff --git a/test/schema-feature.test.js b/test/schema-feature.test.js
index 6ff217e9..6d0f2ae0 100644
--- a/test/schema-feature.test.js
+++ b/test/schema-feature.test.js
@@ -23,7 +23,7 @@ const echoBody = (req, reply) => { reply.send(req.body) }
     t.plan(2)
     const fastify = Fastify()
     t.teardown(fastify.close.bind(fastify))
-    fastify.listen(0, err => {
+    fastify.listen({ port: 0 }, err => {
       t.error(err)
       try {
         fastify[f](() => { })
diff --git a/test/skip-reply-send.test.js b/test/skip-reply-send.test.js
index aea70c08..3ab06088 100644
--- a/test/skip-reply-send.test.js
+++ b/test/skip-reply-send.test.js
@@ -201,7 +201,7 @@ function testHandlerOrBeforeHandlerHook (test, hookOrHandler) {
 
       nextHooks.forEach(h => app.addHook(h, async (req, reply) => t.fail(`${h} should not be called`)))
 
-      app.listen(0, err => {
+      app.listen({ port: 0 }, err => {
         t.error(err)
         const client = net.createConnection({ port: (app.server.address()).port }, () => {
           client.write('GET / HTTP/1.1\r\n\r\n')
diff --git a/test/stream.test.js b/test/stream.test.js
index da36519d..ea957003 100644
--- a/test/stream.test.js
+++ b/test/stream.test.js
@@ -35,7 +35,7 @@ test('should respond with a stream', t => {
     reply.code(200).send(stream)
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -61,7 +61,7 @@ test('should respond with a stream (error)', t => {
     reply.code(200).send(stream)
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -116,7 +116,7 @@ test('should trigger the onSend hook only twice if pumping the stream fails, fir
     done()
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
 
     fastify.server.unref()
@@ -279,7 +279,7 @@ test('Destroying streams prematurely', t => {
     reply.send(reallyLongStream)
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -342,7 +342,7 @@ test('Destroying streams prematurely should call close method', t => {
     reply.send(reallyLongStream)
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -404,7 +404,7 @@ test('Destroying streams prematurely should call close method when destroy is no
     reply.send(reallyLongStream)
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -467,7 +467,7 @@ test('Destroying streams prematurely should call abort method', t => {
     reply.send(reallyLongStream)
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -517,7 +517,7 @@ test('Destroying streams prematurely, log is disabled', t => {
     reply.send(reallyLongStream)
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -547,7 +547,7 @@ test('should respond with a stream1', t => {
     stream.end({ a: 42 })
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -579,7 +579,7 @@ test('return a 404 if the stream emits a 404 error', t => {
     reply.send(reallyLongStream)
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -607,7 +607,7 @@ test('should support send module 200 and 404', { skip: semver.gte(process.versio
     reply.code(200).send(stream)
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -648,7 +648,7 @@ test('should destroy stream when response is ended', t => {
     reply.raw.end(Buffer.from('hello\n'))
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
diff --git a/test/trust-proxy.test.js b/test/trust-proxy.test.js
index 9dc4030f..fb6c52d6 100644
--- a/test/trust-proxy.test.js
+++ b/test/trust-proxy.test.js
@@ -63,7 +63,7 @@ test('trust proxy, not add properties to node req', (t) => {
 
   t.teardown(app.close.bind(app))
 
-  app.listen(0, (err) => {
+  app.listen({ port: 0 }, (err) => {
     app.server.unref()
     t.error(err)
     sgetForwardedRequest(app, '1.1.1.1', '/trustproxy')
@@ -84,7 +84,7 @@ test('trust proxy chain', (t) => {
 
   t.teardown(app.close.bind(app))
 
-  app.listen(0, (err) => {
+  app.listen({ port: 0 }, (err) => {
     app.server.unref()
     t.error(err)
     sgetForwardedRequest(app, '192.168.1.1, 1.1.1.1', '/trustproxychain')
@@ -103,7 +103,7 @@ test('trust proxy function', (t) => {
 
   t.teardown(app.close.bind(app))
 
-  app.listen(0, (err) => {
+  app.listen({ port: 0 }, (err) => {
     app.server.unref()
     t.error(err)
     sgetForwardedRequest(app, '1.1.1.1', '/trustproxyfunc')
@@ -122,7 +122,7 @@ test('trust proxy number', (t) => {
 
   t.teardown(app.close.bind(app))
 
-  app.listen(0, (err) => {
+  app.listen({ port: 0 }, (err) => {
     app.server.unref()
     t.error(err)
     sgetForwardedRequest(app, '2.2.2.2, 1.1.1.1', '/trustproxynumber')
@@ -141,7 +141,7 @@ test('trust proxy IP addresses', (t) => {
 
   t.teardown(app.close.bind(app))
 
-  app.listen(0, (err) => {
+  app.listen({ port: 0 }, (err) => {
     app.server.unref()
     t.error(err)
     sgetForwardedRequest(app, '3.3.3.3, 2.2.2.2, 1.1.1.1', '/trustproxyipaddrs')
@@ -168,7 +168,7 @@ test('trust proxy protocol', (t) => {
 
   t.teardown(app.close.bind(app))
 
-  app.listen(0, (err) => {
+  app.listen({ port: 0 }, (err) => {
     app.server.unref()
     t.error(err)
     sgetForwardedRequest(app, '1.1.1.1', '/trustproxyprotocol', 'lorem')
diff --git a/test/url-rewriting.test.js b/test/url-rewriting.test.js
index 39ced33c..f786364d 100644
--- a/test/url-rewriting.test.js
+++ b/test/url-rewriting.test.js
@@ -22,7 +22,7 @@ test('Should rewrite url', t => {
     }
   })
 
-  fastify.listen(0, function (err) {
+  fastify.listen({ port: 0 }, function (err) {
     t.error(err)
 
     sget({
@@ -55,7 +55,7 @@ test('Should not rewrite if the url is the same', t => {
     }
   })
 
-  fastify.listen(0, function (err) {
+  fastify.listen({ port: 0 }, function (err) {
     t.error(err)
 
     sget({
@@ -86,7 +86,7 @@ test('Should throw an error', t => {
     }
   })
 
-  fastify.listen(0, function (err) {
+  fastify.listen({ port: 0 }, function (err) {
     t.error(err)
 
     sget({
diff --git a/test/versioned-routes.test.js b/test/versioned-routes.test.js
index 08bcc259..202dd06e 100644
--- a/test/versioned-routes.test.js
+++ b/test/versioned-routes.test.js
@@ -242,7 +242,7 @@ test('Should register a versioned route', t => {
     }
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -407,7 +407,7 @@ test('Bas accept version (server)', t => {
     }
   })
 
-  fastify.listen(0, err => {
+  fastify.listen({ port: 0 }, err => {
     t.error(err)
     fastify.server.unref()
 
@@ -449,7 +449,7 @@ test('test log stream', t => {
     reply.send(new Error('kaboom'))
   })
 
-  fastify.listen(0, localhost, err => {
+  fastify.listen({ port: 0, host: localhost }, err => {
     t.error(err)
     fastify.server.unref()
 
