{"url":"https://api.github.com/repos/fastify/fastify/issues/1871","repository_url":"https://api.github.com/repos/fastify/fastify","labels_url":"https://api.github.com/repos/fastify/fastify/issues/1871/labels{/name}","comments_url":"https://api.github.com/repos/fastify/fastify/issues/1871/comments","events_url":"https://api.github.com/repos/fastify/fastify/issues/1871/events","html_url":"https://github.com/fastify/fastify/issues/1871","id":498221134,"node_id":"MDU6SXNzdWU0OTgyMjExMzQ=","number":1871,"title":"Creates invalid schema","user":{"login":"aliksend","id":4923699,"node_id":"MDQ6VXNlcjQ5MjM2OTk=","avatar_url":"https://avatars.githubusercontent.com/u/4923699?v=4","gravatar_id":"","url":"https://api.github.com/users/aliksend","html_url":"https://github.com/aliksend","followers_url":"https://api.github.com/users/aliksend/followers","following_url":"https://api.github.com/users/aliksend/following{/other_user}","gists_url":"https://api.github.com/users/aliksend/gists{/gist_id}","starred_url":"https://api.github.com/users/aliksend/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aliksend/subscriptions","organizations_url":"https://api.github.com/users/aliksend/orgs","repos_url":"https://api.github.com/users/aliksend/repos","events_url":"https://api.github.com/users/aliksend/events{/privacy}","received_events_url":"https://api.github.com/users/aliksend/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":451588686,"node_id":"MDU6TGFiZWw0NTE1ODg2ODY=","url":"https://api.github.com/repos/fastify/fastify/labels/bug","name":"bug","color":"ee0701","default":true,"description":"Confirmed bug"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2019-09-25T11:22:47Z","updated_at":"2019-09-25T19:32:43Z","closed_at":"2019-09-25T15:36:27Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## üêõ Bug Report\r\n\r\nFastify with fastify-swagger creates invalid swagger schema. It should not contain $id fields.\r\n\r\n## To Reproduce\r\n\r\nhttps://repl.it/repls/HoarseCoolEditor\r\n\r\nAnd you'll got\r\n\r\n```json\r\n    ...\r\n    \"paths\": {\r\n        \"/first\": {\r\n            \"get\": {\r\n                \"responses\": {\r\n                    \"200\": {\r\n                        \"schema\": {\r\n                            \"type\": \"array\",\r\n                            \"items\": {\r\n                                \"type\": \"object\",\r\n                                \"properties\": {\r\n                                    \"a\": {\r\n                                        \"type\": \"number\"\r\n                                    }\r\n                                },\r\n                                \"$id\": \"A\"\r\n                            }\r\n                        },\r\n                        \"description\": \"Default Response\"\r\n                    }\r\n                }\r\n            }\r\n        },\r\n    }\r\n    ...\r\n```\r\n\r\nNotice the `responses.200.schema.items.$id`. Swagger generates error like\r\n```\r\nshould NOT have additional properties\r\nadditionalProperty: $id\r\n```\r\n\r\n## Your Environment\r\n\r\n- *node version*: 8\r\n- *fastify version*: 2.8.0\r\n- *os*: Linux\r\n\r\nI plan to create PR with fix a bit later","closed_by":{"login":"mcollina","id":52195,"node_id":"MDQ6VXNlcjUyMTk1","avatar_url":"https://avatars.githubusercontent.com/u/52195?v=4","gravatar_id":"","url":"https://api.github.com/users/mcollina","html_url":"https://github.com/mcollina","followers_url":"https://api.github.com/users/mcollina/followers","following_url":"https://api.github.com/users/mcollina/following{/other_user}","gists_url":"https://api.github.com/users/mcollina/gists{/gist_id}","starred_url":"https://api.github.com/users/mcollina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcollina/subscriptions","organizations_url":"https://api.github.com/users/mcollina/orgs","repos_url":"https://api.github.com/users/mcollina/repos","events_url":"https://api.github.com/users/mcollina/events{/privacy}","received_events_url":"https://api.github.com/users/mcollina/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/fastify/fastify/issues/1871/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":1,"eyes":0},"timeline_url":"https://api.github.com/repos/fastify/fastify/issues/1871/timeline","performed_via_github_app":null,"state_reason":"completed"}