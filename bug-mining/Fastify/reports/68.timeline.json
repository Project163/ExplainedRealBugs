[{"url":"https://api.github.com/repos/fastify/fastify/issues/comments/1617466351","html_url":"https://github.com/fastify/fastify/issues/4870#issuecomment-1617466351","issue_url":"https://api.github.com/repos/fastify/fastify/issues/4870","id":1617466351,"node_id":"IC_kwDOBCRpgs5gaJPv","user":{"login":"climba03003","id":23028015,"node_id":"MDQ6VXNlcjIzMDI4MDE1","avatar_url":"https://avatars.githubusercontent.com/u/23028015?v=4","gravatar_id":"","url":"https://api.github.com/users/climba03003","html_url":"https://github.com/climba03003","followers_url":"https://api.github.com/users/climba03003/followers","following_url":"https://api.github.com/users/climba03003/following{/other_user}","gists_url":"https://api.github.com/users/climba03003/gists{/gist_id}","starred_url":"https://api.github.com/users/climba03003/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/climba03003/subscriptions","organizations_url":"https://api.github.com/users/climba03003/orgs","repos_url":"https://api.github.com/users/climba03003/repos","events_url":"https://api.github.com/users/climba03003/events{/privacy}","received_events_url":"https://api.github.com/users/climba03003/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-03T06:47:40Z","updated_at":"2023-07-03T06:47:40Z","body":"@voxpelli I am sorry, but it still got regression about the types enforcing.\r\n\r\nDefining `object` as `null` by default is the proper usage. It ensure the object structure do not change and leakage between request.\r\nWe need to support such an usage.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/fastify/fastify/issues/comments/1617466351/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"climba03003","id":23028015,"node_id":"MDQ6VXNlcjIzMDI4MDE1","avatar_url":"https://avatars.githubusercontent.com/u/23028015?v=4","gravatar_id":"","url":"https://api.github.com/users/climba03003","html_url":"https://github.com/climba03003","followers_url":"https://api.github.com/users/climba03003/followers","following_url":"https://api.github.com/users/climba03003/following{/other_user}","gists_url":"https://api.github.com/users/climba03003/gists{/gist_id}","starred_url":"https://api.github.com/users/climba03003/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/climba03003/subscriptions","organizations_url":"https://api.github.com/users/climba03003/orgs","repos_url":"https://api.github.com/users/climba03003/repos","events_url":"https://api.github.com/users/climba03003/events{/privacy}","received_events_url":"https://api.github.com/users/climba03003/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9704681351,"node_id":"MEE_lADOBCRpgs5qYYbvzwAAAAJCca-H","url":"https://api.github.com/repos/fastify/fastify/issues/events/9704681351","actor":{"login":"voxpelli","id":34457,"node_id":"MDQ6VXNlcjM0NDU3","avatar_url":"https://avatars.githubusercontent.com/u/34457?v=4","gravatar_id":"","url":"https://api.github.com/users/voxpelli","html_url":"https://github.com/voxpelli","followers_url":"https://api.github.com/users/voxpelli/followers","following_url":"https://api.github.com/users/voxpelli/following{/other_user}","gists_url":"https://api.github.com/users/voxpelli/gists{/gist_id}","starred_url":"https://api.github.com/users/voxpelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/voxpelli/subscriptions","organizations_url":"https://api.github.com/users/voxpelli/orgs","repos_url":"https://api.github.com/users/voxpelli/repos","events_url":"https://api.github.com/users/voxpelli/events{/privacy}","received_events_url":"https://api.github.com/users/voxpelli/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-07-03T06:47:40Z","performed_via_github_app":null},{"id":9704681362,"node_id":"SE_lADOBCRpgs5qYYbvzwAAAAJCca-S","url":"https://api.github.com/repos/fastify/fastify/issues/events/9704681362","actor":{"login":"voxpelli","id":34457,"node_id":"MDQ6VXNlcjM0NDU3","avatar_url":"https://avatars.githubusercontent.com/u/34457?v=4","gravatar_id":"","url":"https://api.github.com/users/voxpelli","html_url":"https://github.com/voxpelli","followers_url":"https://api.github.com/users/voxpelli/followers","following_url":"https://api.github.com/users/voxpelli/following{/other_user}","gists_url":"https://api.github.com/users/voxpelli/gists{/gist_id}","starred_url":"https://api.github.com/users/voxpelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/voxpelli/subscriptions","organizations_url":"https://api.github.com/users/voxpelli/orgs","repos_url":"https://api.github.com/users/voxpelli/repos","events_url":"https://api.github.com/users/voxpelli/events{/privacy}","received_events_url":"https://api.github.com/users/voxpelli/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-07-03T06:47:40Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/fastify/fastify/issues/comments/1617487134","html_url":"https://github.com/fastify/fastify/issues/4870#issuecomment-1617487134","issue_url":"https://api.github.com/repos/fastify/fastify/issues/4870","id":1617487134,"node_id":"IC_kwDOBCRpgs5gaOUe","user":{"login":"trim21","id":13553903,"node_id":"MDQ6VXNlcjEzNTUzOTAz","avatar_url":"https://avatars.githubusercontent.com/u/13553903?v=4","gravatar_id":"","url":"https://api.github.com/users/trim21","html_url":"https://github.com/trim21","followers_url":"https://api.github.com/users/trim21/followers","following_url":"https://api.github.com/users/trim21/following{/other_user}","gists_url":"https://api.github.com/users/trim21/gists{/gist_id}","starred_url":"https://api.github.com/users/trim21/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trim21/subscriptions","organizations_url":"https://api.github.com/users/trim21/orgs","repos_url":"https://api.github.com/users/trim21/repos","events_url":"https://api.github.com/users/trim21/events{/privacy}","received_events_url":"https://api.github.com/users/trim21/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-03T07:01:28Z","updated_at":"2023-07-03T07:05:22Z","body":"aside from the original issue, so if a property is typed as `Readonly<Object>`. it's safe to `decorateRequest` property as `Object.freese({...})` ?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/fastify/fastify/issues/comments/1617487134/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"trim21","id":13553903,"node_id":"MDQ6VXNlcjEzNTUzOTAz","avatar_url":"https://avatars.githubusercontent.com/u/13553903?v=4","gravatar_id":"","url":"https://api.github.com/users/trim21","html_url":"https://github.com/trim21","followers_url":"https://api.github.com/users/trim21/followers","following_url":"https://api.github.com/users/trim21/following{/other_user}","gists_url":"https://api.github.com/users/trim21/gists{/gist_id}","starred_url":"https://api.github.com/users/trim21/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trim21/subscriptions","organizations_url":"https://api.github.com/users/trim21/orgs","repos_url":"https://api.github.com/users/trim21/repos","events_url":"https://api.github.com/users/trim21/events{/privacy}","received_events_url":"https://api.github.com/users/trim21/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/fastify/fastify/issues/comments/1617555969","html_url":"https://github.com/fastify/fastify/issues/4870#issuecomment-1617555969","issue_url":"https://api.github.com/repos/fastify/fastify/issues/4870","id":1617555969,"node_id":"IC_kwDOBCRpgs5gafIB","user":{"login":"voxpelli","id":34457,"node_id":"MDQ6VXNlcjM0NDU3","avatar_url":"https://avatars.githubusercontent.com/u/34457?v=4","gravatar_id":"","url":"https://api.github.com/users/voxpelli","html_url":"https://github.com/voxpelli","followers_url":"https://api.github.com/users/voxpelli/followers","following_url":"https://api.github.com/users/voxpelli/following{/other_user}","gists_url":"https://api.github.com/users/voxpelli/gists{/gist_id}","starred_url":"https://api.github.com/users/voxpelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/voxpelli/subscriptions","organizations_url":"https://api.github.com/users/voxpelli/orgs","repos_url":"https://api.github.com/users/voxpelli/repos","events_url":"https://api.github.com/users/voxpelli/events{/privacy}","received_events_url":"https://api.github.com/users/voxpelli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-03T07:47:50Z","updated_at":"2023-07-03T07:47:50Z","body":"Why isn't `getter` used to ensure this instead?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/fastify/fastify/issues/comments/1617555969/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"voxpelli","id":34457,"node_id":"MDQ6VXNlcjM0NDU3","avatar_url":"https://avatars.githubusercontent.com/u/34457?v=4","gravatar_id":"","url":"https://api.github.com/users/voxpelli","html_url":"https://github.com/voxpelli","followers_url":"https://api.github.com/users/voxpelli/followers","following_url":"https://api.github.com/users/voxpelli/following{/other_user}","gists_url":"https://api.github.com/users/voxpelli/gists{/gist_id}","starred_url":"https://api.github.com/users/voxpelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/voxpelli/subscriptions","organizations_url":"https://api.github.com/users/voxpelli/orgs","repos_url":"https://api.github.com/users/voxpelli/repos","events_url":"https://api.github.com/users/voxpelli/events{/privacy}","received_events_url":"https://api.github.com/users/voxpelli/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/fastify/fastify/issues/comments/1617563547","html_url":"https://github.com/fastify/fastify/issues/4870#issuecomment-1617563547","issue_url":"https://api.github.com/repos/fastify/fastify/issues/4870","id":1617563547,"node_id":"IC_kwDOBCRpgs5gag-b","user":{"login":"climba03003","id":23028015,"node_id":"MDQ6VXNlcjIzMDI4MDE1","avatar_url":"https://avatars.githubusercontent.com/u/23028015?v=4","gravatar_id":"","url":"https://api.github.com/users/climba03003","html_url":"https://github.com/climba03003","followers_url":"https://api.github.com/users/climba03003/followers","following_url":"https://api.github.com/users/climba03003/following{/other_user}","gists_url":"https://api.github.com/users/climba03003/gists{/gist_id}","starred_url":"https://api.github.com/users/climba03003/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/climba03003/subscriptions","organizations_url":"https://api.github.com/users/climba03003/orgs","repos_url":"https://api.github.com/users/climba03003/repos","events_url":"https://api.github.com/users/climba03003/events{/privacy}","received_events_url":"https://api.github.com/users/climba03003/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-03T07:53:31Z","updated_at":"2023-07-03T07:53:31Z","body":"> Why isn't getter used to ensure this instead?\r\n\r\nIt still not a perfect solution because you may not have the value on the first place.\r\nSome of the value may compute in the middle of requests.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/fastify/fastify/issues/comments/1617563547/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"climba03003","id":23028015,"node_id":"MDQ6VXNlcjIzMDI4MDE1","avatar_url":"https://avatars.githubusercontent.com/u/23028015?v=4","gravatar_id":"","url":"https://api.github.com/users/climba03003","html_url":"https://github.com/climba03003","followers_url":"https://api.github.com/users/climba03003/followers","following_url":"https://api.github.com/users/climba03003/following{/other_user}","gists_url":"https://api.github.com/users/climba03003/gists{/gist_id}","starred_url":"https://api.github.com/users/climba03003/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/climba03003/subscriptions","organizations_url":"https://api.github.com/users/climba03003/orgs","repos_url":"https://api.github.com/users/climba03003/repos","events_url":"https://api.github.com/users/climba03003/events{/privacy}","received_events_url":"https://api.github.com/users/climba03003/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/fastify/fastify/issues/comments/1617657259","html_url":"https://github.com/fastify/fastify/issues/4870#issuecomment-1617657259","issue_url":"https://api.github.com/repos/fastify/fastify/issues/4870","id":1617657259,"node_id":"IC_kwDOBCRpgs5ga32r","user":{"login":"voxpelli","id":34457,"node_id":"MDQ6VXNlcjM0NDU3","avatar_url":"https://avatars.githubusercontent.com/u/34457?v=4","gravatar_id":"","url":"https://api.github.com/users/voxpelli","html_url":"https://github.com/voxpelli","followers_url":"https://api.github.com/users/voxpelli/followers","following_url":"https://api.github.com/users/voxpelli/following{/other_user}","gists_url":"https://api.github.com/users/voxpelli/gists{/gist_id}","starred_url":"https://api.github.com/users/voxpelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/voxpelli/subscriptions","organizations_url":"https://api.github.com/users/voxpelli/orgs","repos_url":"https://api.github.com/users/voxpelli/repos","events_url":"https://api.github.com/users/voxpelli/events{/privacy}","received_events_url":"https://api.github.com/users/voxpelli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-03T08:52:08Z","updated_at":"2023-07-03T08:53:10Z","body":"I see a few possible solutions here:\r\n\r\n1. The user of `fastify` modifies their type to indicate that the property may be `null`:\r\n    ```ts\r\n    declare module 'fastify' {\r\n      interface FastifyRequest {\r\n        foo: Readonly<{ bar: number }> | null;\r\n      }\r\n    }\r\n    ```\r\n2. The user opts for a simple `getter`:\r\n    ```ts\r\n    app.decorateRequest('foo', {\r\n      getter () {\r\n        return { bar: 42 };\r\n      }\r\n    });\r\n    ```\r\n3. The user opts for an advanced `getter`:\r\n    ```ts\r\n    const weakRequestFooCache: WeakMap<FastifyRequest, Readonly<{ bar: number }>>  = new WeakMap();\r\n  \r\n    app.addHook('onRequest', async (req, reply) => {\r\n      weakRequestFooCache.set(req, { bar: 42 });\r\n    });\r\n\r\n    app.decorateRequest('foo', {\r\n      getter () {\r\n        const value = weakRequestFooCache.get(this);\r\n        if (!value) throw new Error('Unexpected missing request cache');\r\n        return value;\r\n      }\r\n    });\r\n    ```\r\n4. `fastify` is changed to allow `null` as an initiator value for all non-primitive types\r\n\r\nOut of these options I like `4` the least and option `3` is actually what I myself am using in multiple places (although without the `throw` as I myself always define my `FastifyRequest` properties as being optional – as there is no way to know if a plugin has decorated a specific request or not, as the `FastifyRequest` interface is global whereas plugins are scoped – and thus its not an issue that the type returned by `weakRequestFooCache.get(this)` is possibly `undefined`)","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/fastify/fastify/issues/comments/1617657259/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"voxpelli","id":34457,"node_id":"MDQ6VXNlcjM0NDU3","avatar_url":"https://avatars.githubusercontent.com/u/34457?v=4","gravatar_id":"","url":"https://api.github.com/users/voxpelli","html_url":"https://github.com/voxpelli","followers_url":"https://api.github.com/users/voxpelli/followers","following_url":"https://api.github.com/users/voxpelli/following{/other_user}","gists_url":"https://api.github.com/users/voxpelli/gists{/gist_id}","starred_url":"https://api.github.com/users/voxpelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/voxpelli/subscriptions","organizations_url":"https://api.github.com/users/voxpelli/orgs","repos_url":"https://api.github.com/users/voxpelli/repos","events_url":"https://api.github.com/users/voxpelli/events{/privacy}","received_events_url":"https://api.github.com/users/voxpelli/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/fastify/fastify/issues/comments/1617739486","html_url":"https://github.com/fastify/fastify/issues/4870#issuecomment-1617739486","issue_url":"https://api.github.com/repos/fastify/fastify/issues/4870","id":1617739486,"node_id":"IC_kwDOBCRpgs5gbL7e","user":{"login":"mcollina","id":52195,"node_id":"MDQ6VXNlcjUyMTk1","avatar_url":"https://avatars.githubusercontent.com/u/52195?v=4","gravatar_id":"","url":"https://api.github.com/users/mcollina","html_url":"https://github.com/mcollina","followers_url":"https://api.github.com/users/mcollina/followers","following_url":"https://api.github.com/users/mcollina/following{/other_user}","gists_url":"https://api.github.com/users/mcollina/gists{/gist_id}","starred_url":"https://api.github.com/users/mcollina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcollina/subscriptions","organizations_url":"https://api.github.com/users/mcollina/orgs","repos_url":"https://api.github.com/users/mcollina/repos","events_url":"https://api.github.com/users/mcollina/events{/privacy}","received_events_url":"https://api.github.com/users/mcollina/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-03T09:42:42Z","updated_at":"2023-07-03T09:42:42Z","body":"`decorateRequest` can be used for two goals:\r\n\r\n1. `app.decorateRequest('myFunction', function () { ... })`\r\n2. `app.decorateRequest('something')` letting Fastify know to create objects with that shape. This will eventually be set in a hook. `app.decorateRequest('something', null)` is to be explicit.\r\n3. `app.decorateRequest('something', { getter () { ... } )` (and setters)\r\n\r\nWe should not encourage anybody to use `WeakMap`s - it's a relatively advanced/dangerous pattern and there can be significant performance issues down the line.\r\n\r\nUltimately the value can be `null` or `undefined` in one of the `onRequest` hooks, so defining it as such makes sense, even if for most usecases it will be defined.\r\n\r\n@voxpelli do the current types allow `app.decorateRequest('something')`?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/fastify/fastify/issues/comments/1617739486/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mcollina","id":52195,"node_id":"MDQ6VXNlcjUyMTk1","avatar_url":"https://avatars.githubusercontent.com/u/52195?v=4","gravatar_id":"","url":"https://api.github.com/users/mcollina","html_url":"https://github.com/mcollina","followers_url":"https://api.github.com/users/mcollina/followers","following_url":"https://api.github.com/users/mcollina/following{/other_user}","gists_url":"https://api.github.com/users/mcollina/gists{/gist_id}","starred_url":"https://api.github.com/users/mcollina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcollina/subscriptions","organizations_url":"https://api.github.com/users/mcollina/orgs","repos_url":"https://api.github.com/users/mcollina/repos","events_url":"https://api.github.com/users/mcollina/events{/privacy}","received_events_url":"https://api.github.com/users/mcollina/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9706703197,"node_id":"MEE_lADOBCRpgs5qYYbvzwAAAAJCkIld","url":"https://api.github.com/repos/fastify/fastify/issues/events/9706703197","actor":{"login":"voxpelli","id":34457,"node_id":"MDQ6VXNlcjM0NDU3","avatar_url":"https://avatars.githubusercontent.com/u/34457?v=4","gravatar_id":"","url":"https://api.github.com/users/voxpelli","html_url":"https://github.com/voxpelli","followers_url":"https://api.github.com/users/voxpelli/followers","following_url":"https://api.github.com/users/voxpelli/following{/other_user}","gists_url":"https://api.github.com/users/voxpelli/gists{/gist_id}","starred_url":"https://api.github.com/users/voxpelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/voxpelli/subscriptions","organizations_url":"https://api.github.com/users/voxpelli/orgs","repos_url":"https://api.github.com/users/voxpelli/repos","events_url":"https://api.github.com/users/voxpelli/events{/privacy}","received_events_url":"https://api.github.com/users/voxpelli/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-07-03T09:42:43Z","performed_via_github_app":null},{"id":9706703218,"node_id":"SE_lADOBCRpgs5qYYbvzwAAAAJCkIly","url":"https://api.github.com/repos/fastify/fastify/issues/events/9706703218","actor":{"login":"voxpelli","id":34457,"node_id":"MDQ6VXNlcjM0NDU3","avatar_url":"https://avatars.githubusercontent.com/u/34457?v=4","gravatar_id":"","url":"https://api.github.com/users/voxpelli","html_url":"https://github.com/voxpelli","followers_url":"https://api.github.com/users/voxpelli/followers","following_url":"https://api.github.com/users/voxpelli/following{/other_user}","gists_url":"https://api.github.com/users/voxpelli/gists{/gist_id}","starred_url":"https://api.github.com/users/voxpelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/voxpelli/subscriptions","organizations_url":"https://api.github.com/users/voxpelli/orgs","repos_url":"https://api.github.com/users/voxpelli/repos","events_url":"https://api.github.com/users/voxpelli/events{/privacy}","received_events_url":"https://api.github.com/users/voxpelli/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-07-03T09:42:43Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/fastify/fastify/issues/comments/1617746680","html_url":"https://github.com/fastify/fastify/issues/4870#issuecomment-1617746680","issue_url":"https://api.github.com/repos/fastify/fastify/issues/4870","id":1617746680,"node_id":"IC_kwDOBCRpgs5gbNr4","user":{"login":"voxpelli","id":34457,"node_id":"MDQ6VXNlcjM0NDU3","avatar_url":"https://avatars.githubusercontent.com/u/34457?v=4","gravatar_id":"","url":"https://api.github.com/users/voxpelli","html_url":"https://github.com/voxpelli","followers_url":"https://api.github.com/users/voxpelli/followers","following_url":"https://api.github.com/users/voxpelli/following{/other_user}","gists_url":"https://api.github.com/users/voxpelli/gists{/gist_id}","starred_url":"https://api.github.com/users/voxpelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/voxpelli/subscriptions","organizations_url":"https://api.github.com/users/voxpelli/orgs","repos_url":"https://api.github.com/users/voxpelli/repos","events_url":"https://api.github.com/users/voxpelli/events{/privacy}","received_events_url":"https://api.github.com/users/voxpelli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-03T09:46:52Z","updated_at":"2023-07-03T09:46:52Z","body":"> do the current types allow `app.decorateRequest('something')`?\r\n\r\n@mcollina Seems like they don't, neither for typed or untyped properties, I can make a PR","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/fastify/fastify/issues/comments/1617746680/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"voxpelli","id":34457,"node_id":"MDQ6VXNlcjM0NDU3","avatar_url":"https://avatars.githubusercontent.com/u/34457?v=4","gravatar_id":"","url":"https://api.github.com/users/voxpelli","html_url":"https://github.com/voxpelli","followers_url":"https://api.github.com/users/voxpelli/followers","following_url":"https://api.github.com/users/voxpelli/following{/other_user}","gists_url":"https://api.github.com/users/voxpelli/gists{/gist_id}","starred_url":"https://api.github.com/users/voxpelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/voxpelli/subscriptions","organizations_url":"https://api.github.com/users/voxpelli/orgs","repos_url":"https://api.github.com/users/voxpelli/repos","events_url":"https://api.github.com/users/voxpelli/events{/privacy}","received_events_url":"https://api.github.com/users/voxpelli/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9706755193,"node_id":"MEE_lADOBCRpgs5qYYbvzwAAAAJCkVR5","url":"https://api.github.com/repos/fastify/fastify/issues/events/9706755193","actor":{"login":"mcollina","id":52195,"node_id":"MDQ6VXNlcjUyMTk1","avatar_url":"https://avatars.githubusercontent.com/u/52195?v=4","gravatar_id":"","url":"https://api.github.com/users/mcollina","html_url":"https://github.com/mcollina","followers_url":"https://api.github.com/users/mcollina/followers","following_url":"https://api.github.com/users/mcollina/following{/other_user}","gists_url":"https://api.github.com/users/mcollina/gists{/gist_id}","starred_url":"https://api.github.com/users/mcollina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcollina/subscriptions","organizations_url":"https://api.github.com/users/mcollina/orgs","repos_url":"https://api.github.com/users/mcollina/repos","events_url":"https://api.github.com/users/mcollina/events{/privacy}","received_events_url":"https://api.github.com/users/mcollina/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-07-03T09:46:52Z","performed_via_github_app":null},{"id":9706755211,"node_id":"SE_lADOBCRpgs5qYYbvzwAAAAJCkVSL","url":"https://api.github.com/repos/fastify/fastify/issues/events/9706755211","actor":{"login":"mcollina","id":52195,"node_id":"MDQ6VXNlcjUyMTk1","avatar_url":"https://avatars.githubusercontent.com/u/52195?v=4","gravatar_id":"","url":"https://api.github.com/users/mcollina","html_url":"https://github.com/mcollina","followers_url":"https://api.github.com/users/mcollina/followers","following_url":"https://api.github.com/users/mcollina/following{/other_user}","gists_url":"https://api.github.com/users/mcollina/gists{/gist_id}","starred_url":"https://api.github.com/users/mcollina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcollina/subscriptions","organizations_url":"https://api.github.com/users/mcollina/orgs","repos_url":"https://api.github.com/users/mcollina/repos","events_url":"https://api.github.com/users/mcollina/events{/privacy}","received_events_url":"https://api.github.com/users/mcollina/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-07-03T09:46:52Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/fastify/fastify/issues/comments/1617753778","html_url":"https://github.com/fastify/fastify/issues/4870#issuecomment-1617753778","issue_url":"https://api.github.com/repos/fastify/fastify/issues/4870","id":1617753778,"node_id":"IC_kwDOBCRpgs5gbPay","user":{"login":"voxpelli","id":34457,"node_id":"MDQ6VXNlcjM0NDU3","avatar_url":"https://avatars.githubusercontent.com/u/34457?v=4","gravatar_id":"","url":"https://api.github.com/users/voxpelli","html_url":"https://github.com/voxpelli","followers_url":"https://api.github.com/users/voxpelli/followers","following_url":"https://api.github.com/users/voxpelli/following{/other_user}","gists_url":"https://api.github.com/users/voxpelli/gists{/gist_id}","starred_url":"https://api.github.com/users/voxpelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/voxpelli/subscriptions","organizations_url":"https://api.github.com/users/voxpelli/orgs","repos_url":"https://api.github.com/users/voxpelli/repos","events_url":"https://api.github.com/users/voxpelli/events{/privacy}","received_events_url":"https://api.github.com/users/voxpelli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-03T09:51:22Z","updated_at":"2023-07-03T09:51:22Z","body":"@mcollina Is it ever a need to do something like `app.decorateRequest('something', null, ['something-else'])`?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/fastify/fastify/issues/comments/1617753778/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"voxpelli","id":34457,"node_id":"MDQ6VXNlcjM0NDU3","avatar_url":"https://avatars.githubusercontent.com/u/34457?v=4","gravatar_id":"","url":"https://api.github.com/users/voxpelli","html_url":"https://github.com/voxpelli","followers_url":"https://api.github.com/users/voxpelli/followers","following_url":"https://api.github.com/users/voxpelli/following{/other_user}","gists_url":"https://api.github.com/users/voxpelli/gists{/gist_id}","starred_url":"https://api.github.com/users/voxpelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/voxpelli/subscriptions","organizations_url":"https://api.github.com/users/voxpelli/orgs","repos_url":"https://api.github.com/users/voxpelli/repos","events_url":"https://api.github.com/users/voxpelli/events{/privacy}","received_events_url":"https://api.github.com/users/voxpelli/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9706811533,"node_id":"MEE_lADOBCRpgs5qYYbvzwAAAAJCkjCN","url":"https://api.github.com/repos/fastify/fastify/issues/events/9706811533","actor":{"login":"mcollina","id":52195,"node_id":"MDQ6VXNlcjUyMTk1","avatar_url":"https://avatars.githubusercontent.com/u/52195?v=4","gravatar_id":"","url":"https://api.github.com/users/mcollina","html_url":"https://github.com/mcollina","followers_url":"https://api.github.com/users/mcollina/followers","following_url":"https://api.github.com/users/mcollina/following{/other_user}","gists_url":"https://api.github.com/users/mcollina/gists{/gist_id}","starred_url":"https://api.github.com/users/mcollina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcollina/subscriptions","organizations_url":"https://api.github.com/users/mcollina/orgs","repos_url":"https://api.github.com/users/mcollina/repos","events_url":"https://api.github.com/users/mcollina/events{/privacy}","received_events_url":"https://api.github.com/users/mcollina/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-07-03T09:51:22Z","performed_via_github_app":null},{"id":9706811547,"node_id":"SE_lADOBCRpgs5qYYbvzwAAAAJCkjCb","url":"https://api.github.com/repos/fastify/fastify/issues/events/9706811547","actor":{"login":"mcollina","id":52195,"node_id":"MDQ6VXNlcjUyMTk1","avatar_url":"https://avatars.githubusercontent.com/u/52195?v=4","gravatar_id":"","url":"https://api.github.com/users/mcollina","html_url":"https://github.com/mcollina","followers_url":"https://api.github.com/users/mcollina/followers","following_url":"https://api.github.com/users/mcollina/following{/other_user}","gists_url":"https://api.github.com/users/mcollina/gists{/gist_id}","starred_url":"https://api.github.com/users/mcollina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcollina/subscriptions","organizations_url":"https://api.github.com/users/mcollina/orgs","repos_url":"https://api.github.com/users/mcollina/repos","events_url":"https://api.github.com/users/mcollina/events{/privacy}","received_events_url":"https://api.github.com/users/mcollina/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-07-03T09:51:23Z","performed_via_github_app":null},{"id":9706902107,"node_id":"REFE_lADOBCRpgs5qYYbvzwAAAAJCk5Jb","url":"https://api.github.com/repos/fastify/fastify/issues/events/9706902107","actor":{"login":"voxpelli","id":34457,"node_id":"MDQ6VXNlcjM0NDU3","avatar_url":"https://avatars.githubusercontent.com/u/34457?v=4","gravatar_id":"","url":"https://api.github.com/users/voxpelli","html_url":"https://github.com/voxpelli","followers_url":"https://api.github.com/users/voxpelli/followers","following_url":"https://api.github.com/users/voxpelli/following{/other_user}","gists_url":"https://api.github.com/users/voxpelli/gists{/gist_id}","starred_url":"https://api.github.com/users/voxpelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/voxpelli/subscriptions","organizations_url":"https://api.github.com/users/voxpelli/orgs","repos_url":"https://api.github.com/users/voxpelli/repos","events_url":"https://api.github.com/users/voxpelli/events{/privacy}","received_events_url":"https://api.github.com/users/voxpelli/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"f728526d9933266976bec61cbc8f0c4d6ea42d4b","commit_url":"https://api.github.com/repos/voxpelli/fastify/commits/f728526d9933266976bec61cbc8f0c4d6ea42d4b","created_at":"2023-07-03T09:58:34Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/fastify/fastify/issues/comments/1617772218","html_url":"https://github.com/fastify/fastify/issues/4870#issuecomment-1617772218","issue_url":"https://api.github.com/repos/fastify/fastify/issues/4870","id":1617772218,"node_id":"IC_kwDOBCRpgs5gbT66","user":{"login":"mcollina","id":52195,"node_id":"MDQ6VXNlcjUyMTk1","avatar_url":"https://avatars.githubusercontent.com/u/52195?v=4","gravatar_id":"","url":"https://api.github.com/users/mcollina","html_url":"https://github.com/mcollina","followers_url":"https://api.github.com/users/mcollina/followers","following_url":"https://api.github.com/users/mcollina/following{/other_user}","gists_url":"https://api.github.com/users/mcollina/gists{/gist_id}","starred_url":"https://api.github.com/users/mcollina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcollina/subscriptions","organizations_url":"https://api.github.com/users/mcollina/orgs","repos_url":"https://api.github.com/users/mcollina/repos","events_url":"https://api.github.com/users/mcollina/events{/privacy}","received_events_url":"https://api.github.com/users/mcollina/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-03T10:00:04Z","updated_at":"2023-07-03T10:00:04Z","body":"Yes, that's unfortunately a valid use case.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/fastify/fastify/issues/comments/1617772218/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mcollina","id":52195,"node_id":"MDQ6VXNlcjUyMTk1","avatar_url":"https://avatars.githubusercontent.com/u/52195?v=4","gravatar_id":"","url":"https://api.github.com/users/mcollina","html_url":"https://github.com/mcollina","followers_url":"https://api.github.com/users/mcollina/followers","following_url":"https://api.github.com/users/mcollina/following{/other_user}","gists_url":"https://api.github.com/users/mcollina/gists{/gist_id}","starred_url":"https://api.github.com/users/mcollina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcollina/subscriptions","organizations_url":"https://api.github.com/users/mcollina/orgs","repos_url":"https://api.github.com/users/mcollina/repos","events_url":"https://api.github.com/users/mcollina/events{/privacy}","received_events_url":"https://api.github.com/users/mcollina/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"voxpelli","id":34457,"node_id":"MDQ6VXNlcjM0NDU3","avatar_url":"https://avatars.githubusercontent.com/u/34457?v=4","gravatar_id":"","url":"https://api.github.com/users/voxpelli","html_url":"https://github.com/voxpelli","followers_url":"https://api.github.com/users/voxpelli/followers","following_url":"https://api.github.com/users/voxpelli/following{/other_user}","gists_url":"https://api.github.com/users/voxpelli/gists{/gist_id}","starred_url":"https://api.github.com/users/voxpelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/voxpelli/subscriptions","organizations_url":"https://api.github.com/users/voxpelli/orgs","repos_url":"https://api.github.com/users/voxpelli/repos","events_url":"https://api.github.com/users/voxpelli/events{/privacy}","received_events_url":"https://api.github.com/users/voxpelli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-03T10:02:43Z","updated_at":"2023-07-03T10:02:43Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/fastify/fastify/issues/4874","repository_url":"https://api.github.com/repos/fastify/fastify","labels_url":"https://api.github.com/repos/fastify/fastify/issues/4874/labels{/name}","comments_url":"https://api.github.com/repos/fastify/fastify/issues/4874/comments","events_url":"https://api.github.com/repos/fastify/fastify/issues/4874/events","html_url":"https://github.com/fastify/fastify/pull/4874","id":1785823702,"node_id":"PR_kwDOBCRpgs5UgdfG","number":4874,"title":"Overload `DecorationMethod` to fix #4870","user":{"login":"voxpelli","id":34457,"node_id":"MDQ6VXNlcjM0NDU3","avatar_url":"https://avatars.githubusercontent.com/u/34457?v=4","gravatar_id":"","url":"https://api.github.com/users/voxpelli","html_url":"https://github.com/voxpelli","followers_url":"https://api.github.com/users/voxpelli/followers","following_url":"https://api.github.com/users/voxpelli/following{/other_user}","gists_url":"https://api.github.com/users/voxpelli/gists{/gist_id}","starred_url":"https://api.github.com/users/voxpelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/voxpelli/subscriptions","organizations_url":"https://api.github.com/users/voxpelli/orgs","repos_url":"https://api.github.com/users/voxpelli/repos","events_url":"https://api.github.com/users/voxpelli/events{/privacy}","received_events_url":"https://api.github.com/users/voxpelli/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":772309804,"node_id":"MDU6TGFiZWw3NzIzMDk4MDQ=","url":"https://api.github.com/repos/fastify/fastify/labels/typescript","name":"typescript","color":"0061ca","default":false,"description":"TypeScript related"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2023-07-03T10:02:42Z","updated_at":"2024-07-05T00:23:08Z","closed_at":"2023-07-03T12:36:12Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":"resolved","draft":false,"repository":{"id":69495170,"node_id":"MDEwOlJlcG9zaXRvcnk2OTQ5NTE3MA==","name":"fastify","full_name":"fastify/fastify","private":false,"owner":{"login":"fastify","id":24939410,"node_id":"MDEyOk9yZ2FuaXphdGlvbjI0OTM5NDEw","avatar_url":"https://avatars.githubusercontent.com/u/24939410?v=4","gravatar_id":"","url":"https://api.github.com/users/fastify","html_url":"https://github.com/fastify","followers_url":"https://api.github.com/users/fastify/followers","following_url":"https://api.github.com/users/fastify/following{/other_user}","gists_url":"https://api.github.com/users/fastify/gists{/gist_id}","starred_url":"https://api.github.com/users/fastify/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fastify/subscriptions","organizations_url":"https://api.github.com/users/fastify/orgs","repos_url":"https://api.github.com/users/fastify/repos","events_url":"https://api.github.com/users/fastify/events{/privacy}","received_events_url":"https://api.github.com/users/fastify/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/fastify/fastify","description":"Fast and low overhead web framework, for Node.js","fork":false,"url":"https://api.github.com/repos/fastify/fastify","forks_url":"https://api.github.com/repos/fastify/fastify/forks","keys_url":"https://api.github.com/repos/fastify/fastify/keys{/key_id}","collaborators_url":"https://api.github.com/repos/fastify/fastify/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/fastify/fastify/teams","hooks_url":"https://api.github.com/repos/fastify/fastify/hooks","issue_events_url":"https://api.github.com/repos/fastify/fastify/issues/events{/number}","events_url":"https://api.github.com/repos/fastify/fastify/events","assignees_url":"https://api.github.com/repos/fastify/fastify/assignees{/user}","branches_url":"https://api.github.com/repos/fastify/fastify/branches{/branch}","tags_url":"https://api.github.com/repos/fastify/fastify/tags","blobs_url":"https://api.github.com/repos/fastify/fastify/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/fastify/fastify/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/fastify/fastify/git/refs{/sha}","trees_url":"https://api.github.com/repos/fastify/fastify/git/trees{/sha}","statuses_url":"https://api.github.com/repos/fastify/fastify/statuses/{sha}","languages_url":"https://api.github.com/repos/fastify/fastify/languages","stargazers_url":"https://api.github.com/repos/fastify/fastify/stargazers","contributors_url":"https://api.github.com/repos/fastify/fastify/contributors","subscribers_url":"https://api.github.com/repos/fastify/fastify/subscribers","subscription_url":"https://api.github.com/repos/fastify/fastify/subscription","commits_url":"https://api.github.com/repos/fastify/fastify/commits{/sha}","git_commits_url":"https://api.github.com/repos/fastify/fastify/git/commits{/sha}","comments_url":"https://api.github.com/repos/fastify/fastify/comments{/number}","issue_comment_url":"https://api.github.com/repos/fastify/fastify/issues/comments{/number}","contents_url":"https://api.github.com/repos/fastify/fastify/contents/{+path}","compare_url":"https://api.github.com/repos/fastify/fastify/compare/{base}...{head}","merges_url":"https://api.github.com/repos/fastify/fastify/merges","archive_url":"https://api.github.com/repos/fastify/fastify/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/fastify/fastify/downloads","issues_url":"https://api.github.com/repos/fastify/fastify/issues{/number}","pulls_url":"https://api.github.com/repos/fastify/fastify/pulls{/number}","milestones_url":"https://api.github.com/repos/fastify/fastify/milestones{/number}","notifications_url":"https://api.github.com/repos/fastify/fastify/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/fastify/fastify/labels{/name}","releases_url":"https://api.github.com/repos/fastify/fastify/releases{/id}","deployments_url":"https://api.github.com/repos/fastify/fastify/deployments","created_at":"2016-09-28T19:10:14Z","updated_at":"2025-11-09T19:27:27Z","pushed_at":"2025-11-09T20:20:24Z","git_url":"git://github.com/fastify/fastify.git","ssh_url":"git@github.com:fastify/fastify.git","clone_url":"https://github.com/fastify/fastify.git","svn_url":"https://github.com/fastify/fastify","homepage":"https://www.fastify.dev","size":9357,"stargazers_count":34974,"watchers_count":34974,"language":"JavaScript","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2510,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":100,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":["hacktoberfest","nodejs","performance","speed","webframework"],"visibility":"public","forks":2510,"open_issues":100,"watchers":34974,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/fastify/fastify/pulls/4874","html_url":"https://github.com/fastify/fastify/pull/4874","diff_url":"https://github.com/fastify/fastify/pull/4874.diff","patch_url":"https://github.com/fastify/fastify/pull/4874.patch","merged_at":"2023-07-03T12:36:12Z"},"body":"Overloads `DecorationMethod` to fix #4870.\r\n\r\nAdds two overloads:\r\n\r\n* Plain `app.decorateRequest('something')` as suggested by @mcollina in https://github.com/fastify/fastify/issues/4870#issuecomment-1617739486\r\n* An `app.decorateRequest('something', null, ['something-else'])` where `undefined` and `null` are both accepted. Confirmed needed in https://github.com/fastify/fastify/issues/4870#issuecomment-1617772218\r\n\r\nNotably is:\r\n\r\n* `app.decorateRequest('something', null)` is still not allowed if `something` is typed to not allow `null`\r\n\r\nI think this is a good compromise? Thoughts @climba03003, @trim21?\r\n\r\n<!--\r\nThank you for your pull request. Please provide a description above and review\r\nthe requirements below.\r\n\r\nBug fixes and new features should include tests and possibly benchmarks.\r\n\r\nContributors guide: https://github.com/fastify/fastify/blob/master/CONTRIBUTING.md\r\n\r\nBy making a contribution to this project, I certify that:\r\n\r\n* (a) The contribution was created in whole or in part by me and I\r\n  have the right to submit it under the open source license\r\n  indicated in the file; or\r\n\r\n* (b) The contribution is based upon previous work that, to the best\r\n  of my knowledge, is covered under an appropriate open source\r\n  license and I have the right under that license to submit that\r\n  work with modifications, whether created in whole or in part\r\n  by me, under the same open source license (unless I am\r\n  permitted to submit under a different license), as indicated\r\n  in the file; or\r\n\r\n* (c) The contribution was provided directly to me by some other\r\n  person who certified (a), (b) or (c) and I have not modified\r\n  it.\r\n\r\n* (d) I understand and agree that this project and the contribution\r\n  are public and that a record of the contribution (including all\r\n  personal information I submit with it, including my sign-off) is\r\n  maintained indefinitely and may be redistributed consistent with\r\n  this project or the open source license(s) involved.\r\n-->\r\n\r\n#### Checklist\r\n\r\n- [x] run `npm run test` ~~and `npm run benchmark`~~\r\n- [x] tests and/or benchmarks are included\r\n- [x] ~~documentation is changed or added~~\r\n- [x] commit message and code follows the [Developer's Certification of Origin](https://github.com/fastify/.github/blob/master/CONTRIBUTING.md#developers-certificate-of-origin-11)\r\n      and the [Code of conduct](https://github.com/fastify/.github/blob/master/CODE_OF_CONDUCT.md)\r\n","reactions":{"url":"https://api.github.com/repos/fastify/fastify/issues/4874/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/fastify/fastify/issues/4874/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":9708667647,"node_id":"CE_lADOBCRpgs5qYYbvzwAAAAJCroL_","url":"https://api.github.com/repos/fastify/fastify/issues/events/9708667647","actor":{"login":"mcollina","id":52195,"node_id":"MDQ6VXNlcjUyMTk1","avatar_url":"https://avatars.githubusercontent.com/u/52195?v=4","gravatar_id":"","url":"https://api.github.com/users/mcollina","html_url":"https://github.com/mcollina","followers_url":"https://api.github.com/users/mcollina/followers","following_url":"https://api.github.com/users/mcollina/following{/other_user}","gists_url":"https://api.github.com/users/mcollina/gists{/gist_id}","starred_url":"https://api.github.com/users/mcollina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcollina/subscriptions","organizations_url":"https://api.github.com/users/mcollina/orgs","repos_url":"https://api.github.com/users/mcollina/repos","events_url":"https://api.github.com/users/mcollina/events{/privacy}","received_events_url":"https://api.github.com/users/mcollina/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2023-07-03T12:36:14Z","state_reason":null,"performed_via_github_app":null},{"id":9708667793,"node_id":"REFE_lADOBCRpgs5qYYbvzwAAAAJCroOR","url":"https://api.github.com/repos/fastify/fastify/issues/events/9708667793","actor":{"login":"mcollina","id":52195,"node_id":"MDQ6VXNlcjUyMTk1","avatar_url":"https://avatars.githubusercontent.com/u/52195?v=4","gravatar_id":"","url":"https://api.github.com/users/mcollina","html_url":"https://github.com/mcollina","followers_url":"https://api.github.com/users/mcollina/followers","following_url":"https://api.github.com/users/mcollina/following{/other_user}","gists_url":"https://api.github.com/users/mcollina/gists{/gist_id}","starred_url":"https://api.github.com/users/mcollina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcollina/subscriptions","organizations_url":"https://api.github.com/users/mcollina/orgs","repos_url":"https://api.github.com/users/mcollina/repos","events_url":"https://api.github.com/users/mcollina/events{/privacy}","received_events_url":"https://api.github.com/users/mcollina/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"956bc05cfcd816e5b40ca1aea8cb45c9729f0711","commit_url":"https://api.github.com/repos/fastify/fastify/commits/956bc05cfcd816e5b40ca1aea8cb45c9729f0711","created_at":"2023-07-03T12:36:15Z","performed_via_github_app":null},{"actor":{"login":"voxpelli","id":34457,"node_id":"MDQ6VXNlcjM0NDU3","avatar_url":"https://avatars.githubusercontent.com/u/34457?v=4","gravatar_id":"","url":"https://api.github.com/users/voxpelli","html_url":"https://github.com/voxpelli","followers_url":"https://api.github.com/users/voxpelli/followers","following_url":"https://api.github.com/users/voxpelli/following{/other_user}","gists_url":"https://api.github.com/users/voxpelli/gists{/gist_id}","starred_url":"https://api.github.com/users/voxpelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/voxpelli/subscriptions","organizations_url":"https://api.github.com/users/voxpelli/orgs","repos_url":"https://api.github.com/users/voxpelli/repos","events_url":"https://api.github.com/users/voxpelli/events{/privacy}","received_events_url":"https://api.github.com/users/voxpelli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-04T11:35:39Z","updated_at":"2023-07-04T11:35:39Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/fastify/fastify/issues/4878","repository_url":"https://api.github.com/repos/fastify/fastify","labels_url":"https://api.github.com/repos/fastify/fastify/issues/4878/labels{/name}","comments_url":"https://api.github.com/repos/fastify/fastify/issues/4878/comments","events_url":"https://api.github.com/repos/fastify/fastify/issues/4878/events","html_url":"https://github.com/fastify/fastify/pull/4878","id":1787755924,"node_id":"PR_kwDOBCRpgs5Um-EV","number":4878,"title":"Next: Disallow `decorate('name', null)` in the types","user":{"login":"voxpelli","id":34457,"node_id":"MDQ6VXNlcjM0NDU3","avatar_url":"https://avatars.githubusercontent.com/u/34457?v=4","gravatar_id":"","url":"https://api.github.com/users/voxpelli","html_url":"https://github.com/voxpelli","followers_url":"https://api.github.com/users/voxpelli/followers","following_url":"https://api.github.com/users/voxpelli/following{/other_user}","gists_url":"https://api.github.com/users/voxpelli/gists{/gist_id}","starred_url":"https://api.github.com/users/voxpelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/voxpelli/subscriptions","organizations_url":"https://api.github.com/users/voxpelli/orgs","repos_url":"https://api.github.com/users/voxpelli/repos","events_url":"https://api.github.com/users/voxpelli/events{/privacy}","received_events_url":"https://api.github.com/users/voxpelli/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":772309804,"node_id":"MDU6TGFiZWw3NzIzMDk4MDQ=","url":"https://api.github.com/repos/fastify/fastify/labels/typescript","name":"typescript","color":"0061ca","default":false,"description":"TypeScript related"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-07-04T11:35:38Z","updated_at":"2024-07-08T00:24:47Z","closed_at":"2023-07-07T04:32:31Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":"resolved","draft":false,"repository":{"id":69495170,"node_id":"MDEwOlJlcG9zaXRvcnk2OTQ5NTE3MA==","name":"fastify","full_name":"fastify/fastify","private":false,"owner":{"login":"fastify","id":24939410,"node_id":"MDEyOk9yZ2FuaXphdGlvbjI0OTM5NDEw","avatar_url":"https://avatars.githubusercontent.com/u/24939410?v=4","gravatar_id":"","url":"https://api.github.com/users/fastify","html_url":"https://github.com/fastify","followers_url":"https://api.github.com/users/fastify/followers","following_url":"https://api.github.com/users/fastify/following{/other_user}","gists_url":"https://api.github.com/users/fastify/gists{/gist_id}","starred_url":"https://api.github.com/users/fastify/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fastify/subscriptions","organizations_url":"https://api.github.com/users/fastify/orgs","repos_url":"https://api.github.com/users/fastify/repos","events_url":"https://api.github.com/users/fastify/events{/privacy}","received_events_url":"https://api.github.com/users/fastify/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/fastify/fastify","description":"Fast and low overhead web framework, for Node.js","fork":false,"url":"https://api.github.com/repos/fastify/fastify","forks_url":"https://api.github.com/repos/fastify/fastify/forks","keys_url":"https://api.github.com/repos/fastify/fastify/keys{/key_id}","collaborators_url":"https://api.github.com/repos/fastify/fastify/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/fastify/fastify/teams","hooks_url":"https://api.github.com/repos/fastify/fastify/hooks","issue_events_url":"https://api.github.com/repos/fastify/fastify/issues/events{/number}","events_url":"https://api.github.com/repos/fastify/fastify/events","assignees_url":"https://api.github.com/repos/fastify/fastify/assignees{/user}","branches_url":"https://api.github.com/repos/fastify/fastify/branches{/branch}","tags_url":"https://api.github.com/repos/fastify/fastify/tags","blobs_url":"https://api.github.com/repos/fastify/fastify/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/fastify/fastify/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/fastify/fastify/git/refs{/sha}","trees_url":"https://api.github.com/repos/fastify/fastify/git/trees{/sha}","statuses_url":"https://api.github.com/repos/fastify/fastify/statuses/{sha}","languages_url":"https://api.github.com/repos/fastify/fastify/languages","stargazers_url":"https://api.github.com/repos/fastify/fastify/stargazers","contributors_url":"https://api.github.com/repos/fastify/fastify/contributors","subscribers_url":"https://api.github.com/repos/fastify/fastify/subscribers","subscription_url":"https://api.github.com/repos/fastify/fastify/subscription","commits_url":"https://api.github.com/repos/fastify/fastify/commits{/sha}","git_commits_url":"https://api.github.com/repos/fastify/fastify/git/commits{/sha}","comments_url":"https://api.github.com/repos/fastify/fastify/comments{/number}","issue_comment_url":"https://api.github.com/repos/fastify/fastify/issues/comments{/number}","contents_url":"https://api.github.com/repos/fastify/fastify/contents/{+path}","compare_url":"https://api.github.com/repos/fastify/fastify/compare/{base}...{head}","merges_url":"https://api.github.com/repos/fastify/fastify/merges","archive_url":"https://api.github.com/repos/fastify/fastify/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/fastify/fastify/downloads","issues_url":"https://api.github.com/repos/fastify/fastify/issues{/number}","pulls_url":"https://api.github.com/repos/fastify/fastify/pulls{/number}","milestones_url":"https://api.github.com/repos/fastify/fastify/milestones{/number}","notifications_url":"https://api.github.com/repos/fastify/fastify/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/fastify/fastify/labels{/name}","releases_url":"https://api.github.com/repos/fastify/fastify/releases{/id}","deployments_url":"https://api.github.com/repos/fastify/fastify/deployments","created_at":"2016-09-28T19:10:14Z","updated_at":"2025-11-09T19:27:27Z","pushed_at":"2025-11-09T20:20:24Z","git_url":"git://github.com/fastify/fastify.git","ssh_url":"git@github.com:fastify/fastify.git","clone_url":"https://github.com/fastify/fastify.git","svn_url":"https://github.com/fastify/fastify","homepage":"https://www.fastify.dev","size":9357,"stargazers_count":34974,"watchers_count":34974,"language":"JavaScript","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2510,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":100,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":["hacktoberfest","nodejs","performance","speed","webframework"],"visibility":"public","forks":2510,"open_issues":100,"watchers":34974,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/fastify/fastify/pulls/4878","html_url":"https://github.com/fastify/fastify/pull/4878","diff_url":"https://github.com/fastify/fastify/pull/4878.diff","patch_url":"https://github.com/fastify/fastify/pull/4878.patch","merged_at":"2023-07-07T04:32:31Z"},"body":"Follow up to #4874\r\n\r\nPreferred to use `decorate('name')` , `decorateRequest('name')`, `decorateReply('name')` variants instead\r\n\r\nDeprecation prior to dropping is not feasible because of https://github.com/microsoft/TypeScript/issues/54872\r\n\r\n<!--\r\nThank you for your pull request. Please provide a description above and review\r\nthe requirements below.\r\n\r\nBug fixes and new features should include tests and possibly benchmarks.\r\n\r\nContributors guide: https://github.com/fastify/fastify/blob/master/CONTRIBUTING.md\r\n\r\nBy making a contribution to this project, I certify that:\r\n\r\n* (a) The contribution was created in whole or in part by me and I\r\n  have the right to submit it under the open source license\r\n  indicated in the file; or\r\n\r\n* (b) The contribution is based upon previous work that, to the best\r\n  of my knowledge, is covered under an appropriate open source\r\n  license and I have the right under that license to submit that\r\n  work with modifications, whether created in whole or in part\r\n  by me, under the same open source license (unless I am\r\n  permitted to submit under a different license), as indicated\r\n  in the file; or\r\n\r\n* (c) The contribution was provided directly to me by some other\r\n  person who certified (a), (b) or (c) and I have not modified\r\n  it.\r\n\r\n* (d) I understand and agree that this project and the contribution\r\n  are public and that a record of the contribution (including all\r\n  personal information I submit with it, including my sign-off) is\r\n  maintained indefinitely and may be redistributed consistent with\r\n  this project or the open source license(s) involved.\r\n-->\r\n\r\n#### Checklist\r\n\r\n- [x] run `npm run test` ~~and `npm run benchmark`~~\r\n- [x] tests ~~and/or benchmarks~~ are included\r\n- [x] documentation is changed\r\n- [x] commit message and code follows the [Developer's Certification of Origin](https://github.com/fastify/.github/blob/master/CONTRIBUTING.md#developers-certificate-of-origin-11)\r\n      and the [Code of conduct](https://github.com/fastify/.github/blob/master/CODE_OF_CONDUCT.md)\r\n","reactions":{"url":"https://api.github.com/repos/fastify/fastify/issues/4878/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/fastify/fastify/issues/4878/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"}]