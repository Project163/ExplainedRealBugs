{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/616","repository_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary","labels_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/616/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/616/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/616/events","html_url":"https://github.com/FasterXML/jackson-dataformats-binary/issues/616","id":3466813056,"node_id":"I_kwDOA3Qg687Oo16A","number":616,"title":"CBOR text gets truncated on decoding","user":{"login":"sugmanue","id":108146565,"node_id":"U_kgDOBnIvhQ","avatar_url":"https://avatars.githubusercontent.com/u/108146565?v=4","gravatar_id":"","url":"https://api.github.com/users/sugmanue","html_url":"https://github.com/sugmanue","followers_url":"https://api.github.com/users/sugmanue/followers","following_url":"https://api.github.com/users/sugmanue/following{/other_user}","gists_url":"https://api.github.com/users/sugmanue/gists{/gist_id}","starred_url":"https://api.github.com/users/sugmanue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sugmanue/subscriptions","organizations_url":"https://api.github.com/users/sugmanue/orgs","repos_url":"https://api.github.com/users/sugmanue/repos","events_url":"https://api.github.com/users/sugmanue/events{/privacy}","received_events_url":"https://api.github.com/users/sugmanue/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2025-09-29T22:13:35Z","updated_at":"2025-09-30T00:37:18Z","closed_at":"2025-09-30T00:35:11Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"There are two bugs in the `_finishLongTextAscii` method introduced in #519 that produces the text to be truncated.\n\n1. The `outPtr` is always set to zero (see [here](https://github.com/FasterXML/jackson-dataformats-binary/blob/b20075ff0c029d659cb24adc6c65d2be748a8753/cbor/src/main/java/com/fasterxml/jackson/dataformat/cbor/CBORParser.java#L2636)) before the read loop. If the out buffer still has room its contents will be overwritten instead of keep adding to it (overwrite or missing chunks.)\n2. If the method exits by fully reading the expected text length, outside the [outer loop](https://github.com/FasterXML/jackson-dataformats-binary/blob/b20075ff0c029d659cb24adc6c65d2be748a8753/cbor/src/main/java/com/fasterxml/jackson/dataformat/cbor/CBORParser.java#L2657) the length of the last segment is not set, which makes the calling code to drop it when the string is finished (text truncated.)\n","closed_by":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/616/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/616/timeline","performed_via_github_app":null,"state_reason":"completed"}