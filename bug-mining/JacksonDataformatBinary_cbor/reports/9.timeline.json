[{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/369816762","html_url":"https://github.com/FasterXML/jackson-dataformats-binary/issues/129#issuecomment-369816762","issue_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/129","id":369816762,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTgxNjc2Mg==","user":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-02T04:28:04Z","updated_at":"2018-03-02T04:28:04Z","body":"No, `CBORParser` is not meant to be extended, although there is no strict need to have it be `final`. I can remove that easily.\r\n\r\nOut of curiosity, do you have specific use for sub-classing?\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/369816762/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1500474401,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDE1MDA0NzQ0MDE=","url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/events/1500474401","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2018-03-02T04:33:54Z","milestone":{"title":"2.9.5"},"performed_via_github_app":null},{"id":1500474803,"node_id":"MDEyOkxhYmVsZWRFdmVudDE1MDA0NzQ4MDM=","url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/events/1500474803","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-03-02T04:34:23Z","label":{"name":"cbor","color":"d4c5f9"},"performed_via_github_app":null},{"id":1500474810,"node_id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50MTUwMDQ3NDgxMA==","url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/events/1500474810","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2018-03-02T04:34:24Z","rename":{"from":"[CBOR] \"final\" modifer for CBORParser","to":"Remove \"final\" modifier from `CBORParser`"},"performed_via_github_app":null},{"id":1500475398,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDE1MDA0NzUzOTg=","url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/events/1500475398","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"a56c0c9d22c14bf702ff2d2a810b831a63d3c921","commit_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/commits/a56c0c9d22c14bf702ff2d2a810b831a63d3c921","created_at":"2018-03-02T04:35:16Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/369817833","html_url":"https://github.com/FasterXML/jackson-dataformats-binary/issues/129#issuecomment-369817833","issue_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/129","id":369817833,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTgxNzgzMw==","user":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-02T04:36:25Z","updated_at":"2018-03-02T04:36:25Z","body":"I remove `final` modifier from `CBORParser` -- I can not recall explicit reason to add it, and no other parser or generator implementation is left final (at an earlier point some were).\r\nThis is for `2.9` branch and `master`, so will be included in `2.9.5` release once that is made (and eventually 3.0).\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/369817833/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1500476164,"node_id":"MDExOkNsb3NlZEV2ZW50MTUwMDQ3NjE2NA==","url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/events/1500476164","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2018-03-02T04:36:25Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/369821250","html_url":"https://github.com/FasterXML/jackson-dataformats-binary/issues/129#issuecomment-369821250","issue_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/129","id":369821250,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTgyMTI1MA==","user":{"login":"jinzha","id":7774641,"node_id":"MDQ6VXNlcjc3NzQ2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/7774641?v=4","gravatar_id":"","url":"https://api.github.com/users/jinzha","html_url":"https://github.com/jinzha","followers_url":"https://api.github.com/users/jinzha/followers","following_url":"https://api.github.com/users/jinzha/following{/other_user}","gists_url":"https://api.github.com/users/jinzha/gists{/gist_id}","starred_url":"https://api.github.com/users/jinzha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinzha/subscriptions","organizations_url":"https://api.github.com/users/jinzha/orgs","repos_url":"https://api.github.com/users/jinzha/repos","events_url":"https://api.github.com/users/jinzha/events{/privacy}","received_events_url":"https://api.github.com/users/jinzha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-02T05:01:15Z","updated_at":"2018-03-02T05:02:28Z","body":"Hi  cowtowncoder,\r\n\r\nThanks for quickly fixing it!\r\n\r\nIn our case, we would add a method to make CBORParser read from the specified offset of InputStream, the underling InputStream in our project support to read from a specified offset. I tried add below method to support this. Does it make sense to you?\r\n\r\npublic class CBORParserEx extends CBORParser {\r\n      public void setOffset(int offset) {\r\n            final ByteInputStream in = getInputStream();\r\n            in.setOffset(offset);\r\n            _currInputProcessed = offset;\r\n           _inputPtr = _inputEnd = 0;\r\n    } \r\n}\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/369821250/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jinzha","id":7774641,"node_id":"MDQ6VXNlcjc3NzQ2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/7774641?v=4","gravatar_id":"","url":"https://api.github.com/users/jinzha","html_url":"https://github.com/jinzha","followers_url":"https://api.github.com/users/jinzha/followers","following_url":"https://api.github.com/users/jinzha/following{/other_user}","gists_url":"https://api.github.com/users/jinzha/gists{/gist_id}","starred_url":"https://api.github.com/users/jinzha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinzha/subscriptions","organizations_url":"https://api.github.com/users/jinzha/orgs","repos_url":"https://api.github.com/users/jinzha/repos","events_url":"https://api.github.com/users/jinzha/events{/privacy}","received_events_url":"https://api.github.com/users/jinzha/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/369937627","html_url":"https://github.com/FasterXML/jackson-dataformats-binary/issues/129#issuecomment-369937627","issue_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/129","id":369937627,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTkzNzYyNw==","user":{"login":"jinzha","id":7774641,"node_id":"MDQ6VXNlcjc3NzQ2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/7774641?v=4","gravatar_id":"","url":"https://api.github.com/users/jinzha","html_url":"https://github.com/jinzha","followers_url":"https://api.github.com/users/jinzha/followers","following_url":"https://api.github.com/users/jinzha/following{/other_user}","gists_url":"https://api.github.com/users/jinzha/gists{/gist_id}","starred_url":"https://api.github.com/users/jinzha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinzha/subscriptions","organizations_url":"https://api.github.com/users/jinzha/orgs","repos_url":"https://api.github.com/users/jinzha/repos","events_url":"https://api.github.com/users/jinzha/events{/privacy}","received_events_url":"https://api.github.com/users/jinzha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-02T14:37:28Z","updated_at":"2018-03-02T14:37:28Z","body":"HiTatu,\n\nThanks for quickly fixing it! May I know when will the 2.9.5 be released?\n\nIn our case, we would add a method to make CBORParser read from the \nspecified offset of InputStream, the underling InputStream in our \nproject support to read from a specified offset. I tried add below \nmethod to support this. Does it make sense to you?\n\npublic class CBORParserEx extends CBORParser {\n     public void setOffset(int offset) {\n         final ByteInputStream in = getInputStream();\n         in.setOffset(offset);\n         _currInputProcessed = offset;\n         _inputPtr = _inputEnd = 0;\n      }\n}\n\nRegards,\nJin\n\n\nOn 3/2/18 12:36 PM, Tatu Saloranta wrote:\n>\n> I remove |final| modifier from |CBORParser| -- I can not recall \n> explicit reason to add it, and no other parser or generator \n> implementation is left final (at an earlier point some were).\n> This is for |2.9| branch and |master|, so will be included in |2.9.5| \n> release once that is made (and eventually 3.0).\n>\n> —\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub \n> <https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_FasterXML_jackson-2Ddataformats-2Dbinary_issues_129-23issuecomment-2D369817833&d=DwMFaQ&c=RoP1YumCXCgaWHvlZYR8PZh8Bv7qIrMUB65eapI_JnE&r=wb6jsjsd3i3-fQugULtSmsNMCoqysPMHv94nEiI-Jv8&m=_2rUppWNPkdxJ73wkPkJySUCWTQ2RzoEFd5Z1LP_Z24&s=R0K7evEltPIgukHTgvRanLo-FpgHjUDfws-Tq2ZGHCg&e=>, \n> or mute the thread \n> <https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AHahsR7DC1XHvoHItBogGmPVaYJXvcIYks5taMxLgaJpZM4SZWDC&d=DwMFaQ&c=RoP1YumCXCgaWHvlZYR8PZh8Bv7qIrMUB65eapI_JnE&r=wb6jsjsd3i3-fQugULtSmsNMCoqysPMHv94nEiI-Jv8&m=_2rUppWNPkdxJ73wkPkJySUCWTQ2RzoEFd5Z1LP_Z24&s=qJHOyMYTymY333y1pJncEIH-jrdGDN1bAUDN-xp0Zjc&e=>.\n>\n\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/369937627/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jinzha","id":7774641,"node_id":"MDQ6VXNlcjc3NzQ2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/7774641?v=4","gravatar_id":"","url":"https://api.github.com/users/jinzha","html_url":"https://github.com/jinzha","followers_url":"https://api.github.com/users/jinzha/followers","following_url":"https://api.github.com/users/jinzha/following{/other_user}","gists_url":"https://api.github.com/users/jinzha/gists{/gist_id}","starred_url":"https://api.github.com/users/jinzha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinzha/subscriptions","organizations_url":"https://api.github.com/users/jinzha/orgs","repos_url":"https://api.github.com/users/jinzha/repos","events_url":"https://api.github.com/users/jinzha/events{/privacy}","received_events_url":"https://api.github.com/users/jinzha/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/369957817","html_url":"https://github.com/FasterXML/jackson-dataformats-binary/issues/129#issuecomment-369957817","issue_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/129","id":369957817,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTk1NzgxNw==","user":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-02T15:45:12Z","updated_at":"2018-03-02T15:45:12Z","body":"On modification: I would personally modify it by custom `InputStream` instead, and not try to do that on parser. Or, if you prefer, sub-classing `CBORFactory` and handling it here.\r\nThe only thing that would not achieve would be `_currInputProcessed`, and if that is important, the only way would be sub-classing.\r\n\r\nAs to `2.9.5`, likely some time in March, maybe in 2 weeks or so. Usually there's at least 2 months between patch releases at this point.\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/369957817/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/370200220","html_url":"https://github.com/FasterXML/jackson-dataformats-binary/issues/129#issuecomment-370200220","issue_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/129","id":370200220,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MDIwMDIyMA==","user":{"login":"jinzha","id":7774641,"node_id":"MDQ6VXNlcjc3NzQ2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/7774641?v=4","gravatar_id":"","url":"https://api.github.com/users/jinzha","html_url":"https://github.com/jinzha","followers_url":"https://api.github.com/users/jinzha/followers","following_url":"https://api.github.com/users/jinzha/following{/other_user}","gists_url":"https://api.github.com/users/jinzha/gists{/gist_id}","starred_url":"https://api.github.com/users/jinzha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinzha/subscriptions","organizations_url":"https://api.github.com/users/jinzha/orgs","repos_url":"https://api.github.com/users/jinzha/repos","events_url":"https://api.github.com/users/jinzha/events{/privacy}","received_events_url":"https://api.github.com/users/jinzha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-04T03:59:43Z","updated_at":"2018-03-04T03:59:43Z","body":"Hi Tatu,\n\nThanks for your quick response!\n\nIn our case, there is a custom InputStream which supports to set read \noffset at any position, but it seems that the CBORParser has its own \ninternal InputBuffer that caches a batch of data read from InputStream, \nso adjusting the offset of InputStream will not immediately impact on \nCBORParser, it will read from its InputBuffer until no more data and \nneed to load more from InputStream.\n\nIs it possible to avoid using InputBuffer in CBORParser?\n\nRegards,\nJin\n\nOn 3/2/18 11:45 PM, Tatu Saloranta wrote:\n>\n> On modification: I would personally modify it by custom |InputStream| \n> instead, and not try to do that on parser. Or, if you prefer, \n> sub-classing |CBORFactory| and handling it here.\n> The only thing that would not achieve would be |_currInputProcessed|, \n> and if that is important, the only way would be sub-classing.\n>\n> As to |2.9.5|, likely some time in March, maybe in 2 weeks or so. \n> Usually there's at least 2 months between patch releases at this point.\n>\n> —\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub \n> <https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_FasterXML_jackson-2Ddataformats-2Dbinary_issues_129-23issuecomment-2D369957817&d=DwMFaQ&c=RoP1YumCXCgaWHvlZYR8PZh8Bv7qIrMUB65eapI_JnE&r=wb6jsjsd3i3-fQugULtSmsNMCoqysPMHv94nEiI-Jv8&m=vmCRLNuXjGHgq0-DUE4UH5s_WF4sQkqYRxdAv4QJPRI&s=9yT4Dk-Bme9uMAPwV86mB0dRO3MmZPK-mmKesPjqYMs&e=>, \n> or mute the thread \n> <https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AHahsVHSuSD8PFB4SZETJBcRGapthjb0ks5taWkLgaJpZM4SZWDC&d=DwMFaQ&c=RoP1YumCXCgaWHvlZYR8PZh8Bv7qIrMUB65eapI_JnE&r=wb6jsjsd3i3-fQugULtSmsNMCoqysPMHv94nEiI-Jv8&m=vmCRLNuXjGHgq0-DUE4UH5s_WF4sQkqYRxdAv4QJPRI&s=ZfQeYRl4xGh1FJMzBpWBlbK8O7PZHsuwFjVFX7aMrN4&e=>.\n>\n\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/370200220/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jinzha","id":7774641,"node_id":"MDQ6VXNlcjc3NzQ2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/7774641?v=4","gravatar_id":"","url":"https://api.github.com/users/jinzha","html_url":"https://github.com/jinzha","followers_url":"https://api.github.com/users/jinzha/followers","following_url":"https://api.github.com/users/jinzha/following{/other_user}","gists_url":"https://api.github.com/users/jinzha/gists{/gist_id}","starred_url":"https://api.github.com/users/jinzha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinzha/subscriptions","organizations_url":"https://api.github.com/users/jinzha/orgs","repos_url":"https://api.github.com/users/jinzha/repos","events_url":"https://api.github.com/users/jinzha/events{/privacy}","received_events_url":"https://api.github.com/users/jinzha/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/370305528","html_url":"https://github.com/FasterXML/jackson-dataformats-binary/issues/129#issuecomment-370305528","issue_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/129","id":370305528,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MDMwNTUyOA==","user":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-05T04:16:13Z","updated_at":"2018-03-05T04:16:13Z","body":"Use of input buffer is pretty essential for reasonable performance -- overhead of single byte reads would be significant. So design does not allow skipping of buffering.\r\nIt is possible to \"flush\" content buffered but not (yet) read at end of decoding (using method `releaseBuffered()` on parser).\r\n\r\nBut I guess I am not sure which aspect of buffering would be problematic for you: location, or something else?\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/370305528/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/371001010","html_url":"https://github.com/FasterXML/jackson-dataformats-binary/issues/129#issuecomment-371001010","issue_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/129","id":371001010,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MTAwMTAxMA==","user":{"login":"jinzha","id":7774641,"node_id":"MDQ6VXNlcjc3NzQ2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/7774641?v=4","gravatar_id":"","url":"https://api.github.com/users/jinzha","html_url":"https://github.com/jinzha","followers_url":"https://api.github.com/users/jinzha/followers","following_url":"https://api.github.com/users/jinzha/following{/other_user}","gists_url":"https://api.github.com/users/jinzha/gists{/gist_id}","starred_url":"https://api.github.com/users/jinzha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinzha/subscriptions","organizations_url":"https://api.github.com/users/jinzha/orgs","repos_url":"https://api.github.com/users/jinzha/repos","events_url":"https://api.github.com/users/jinzha/events{/privacy}","received_events_url":"https://api.github.com/users/jinzha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-07T02:28:13Z","updated_at":"2018-03-07T02:28:13Z","body":"Hi Tatu,\n\nOn 3/5/18 12:16 PM, Tatu Saloranta wrote:\n>\n> Use of input buffer is pretty essential for reasonable performance -- \n> overhead of single byte reads would be significant. So design does not \n> allow skipping of buffering.\n> It is possible to \"flush\" content buffered but not (yet) read at end \n> of decoding (using method |releaseBuffered()|on parser).\n>\n> But I guess I am not sure which aspect of buffering would be \n> problematic for you: location, or something else?\n>\nYes. it is location. In our case, the capability to read value in a \ncustomized order is required. So we just go through the InputStream to \ncollects the offsets for each value, then read values in a customized \norder by setting the offset of InputStream.\n\nBased on my performance testing, using Jackson CBOR for above case is \n12% slower than using serialization module implemented by ourselves.\n\nI feel like the way we use Jackson CBOR to read value on specified \noffset is not suitable for the current Jackson CBOR implementation that \nuses a internal buffer to cache data. In our case, the process is like \nset offset1 -> parse value1 -> set offset2 -> parse value2 -> ....\nWhen setting offset, actually it resets the InputBufer(see below \nsetOffset() mehtod). During parse value, it will load 8K data to \nInputBuffer, but parse 1st value only, then reset again, load another 8K \ndata and parse 2nd value, this process might not be that efficient I \nthink. What do you think?\n\npublic class CBORParserEx extends CBORParser {\n     public void setOffset(int offset) {\n         final ByteInputStream in = getInputStream();\n         in.setOffset(offset);\n         _currInputProcessed = offset;\n         _inputPtr = _inputEnd = 0;\n      }\n}\n\nRegards,\nJin\n>\n> —\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub \n> <https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_FasterXML_jackson-2Ddataformats-2Dbinary_issues_129-23issuecomment-2D370305528&d=DwMFaQ&c=RoP1YumCXCgaWHvlZYR8PZh8Bv7qIrMUB65eapI_JnE&r=wb6jsjsd3i3-fQugULtSmsNMCoqysPMHv94nEiI-Jv8&m=Ju-E8nByOjLWwY9HroVs_pYLQL-pz-ZRbry44K8Ff3Q&s=iSpwPX5urwNp7mtVCNvBUewh-F6VZWzvT8wLpgt8gEI&e=>, \n> or mute the thread \n> <https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AHahsY4Ht9wG7DnGS7cQKyNAH2ERv0O3ks5tbLwNgaJpZM4SZWDC&d=DwMFaQ&c=RoP1YumCXCgaWHvlZYR8PZh8Bv7qIrMUB65eapI_JnE&r=wb6jsjsd3i3-fQugULtSmsNMCoqysPMHv94nEiI-Jv8&m=Ju-E8nByOjLWwY9HroVs_pYLQL-pz-ZRbry44K8Ff3Q&s=nPE2Kfn_rGm2ywmwU9iahU1xDhu8WYAMtmPClBkrh9U&e=>.\n>\n\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/371001010/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jinzha","id":7774641,"node_id":"MDQ6VXNlcjc3NzQ2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/7774641?v=4","gravatar_id":"","url":"https://api.github.com/users/jinzha","html_url":"https://github.com/jinzha","followers_url":"https://api.github.com/users/jinzha/followers","following_url":"https://api.github.com/users/jinzha/following{/other_user}","gists_url":"https://api.github.com/users/jinzha/gists{/gist_id}","starred_url":"https://api.github.com/users/jinzha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinzha/subscriptions","organizations_url":"https://api.github.com/users/jinzha/orgs","repos_url":"https://api.github.com/users/jinzha/repos","events_url":"https://api.github.com/users/jinzha/events{/privacy}","received_events_url":"https://api.github.com/users/jinzha/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/371001081","html_url":"https://github.com/FasterXML/jackson-dataformats-binary/issues/129#issuecomment-371001081","issue_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/129","id":371001081,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MTAwMTA4MQ==","user":{"login":"jinzha","id":7774641,"node_id":"MDQ6VXNlcjc3NzQ2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/7774641?v=4","gravatar_id":"","url":"https://api.github.com/users/jinzha","html_url":"https://github.com/jinzha","followers_url":"https://api.github.com/users/jinzha/followers","following_url":"https://api.github.com/users/jinzha/following{/other_user}","gists_url":"https://api.github.com/users/jinzha/gists{/gist_id}","starred_url":"https://api.github.com/users/jinzha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinzha/subscriptions","organizations_url":"https://api.github.com/users/jinzha/orgs","repos_url":"https://api.github.com/users/jinzha/repos","events_url":"https://api.github.com/users/jinzha/events{/privacy}","received_events_url":"https://api.github.com/users/jinzha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-07T02:28:43Z","updated_at":"2018-03-07T02:28:43Z","body":"Hi Tatu,\n\nThanks for your response as always!\n\nOn 3/5/18 12:16 PM, Tatu Saloranta wrote:\n>\n> Use of input buffer is pretty essential for reasonable performance -- \n> overhead of single byte reads would be significant. So design does not \n> allow skipping of buffering.\n> It is possible to \"flush\" content buffered but not (yet) read at end \n> of decoding (using method |releaseBuffered()|on parser).\n>\n> But I guess I am not sure which aspect of buffering would be \n> problematic for you: location, or something else?\n>\nYes. it is location. In our case, the capability to read value in a \ncustomized order is required. So we just go through the InputStream to \ncollects the offsets for each value, then read values in a customized \norder by setting the offset of InputStream.\n\nBased on my performance testing, using Jackson CBOR for above case is \n12% slower than using serialization module implemented by ourselves.\n\nI feel like the way we use Jackson CBOR to read value on specified \noffset is not suitable for the current Jackson CBOR implementation that \nuses a internal buffer to cache data. In our case, the process is like \nset offset1 -> parse value1 -> set offset2 -> parse value2 -> ....\nWhen setting offset, actually it resets the InputBufer(see below \nsetOffset() mehtod). During parse value, it will load 8K data to \nInputBuffer, but parse 1st value only, then reset again, load another 8K \ndata and parse 2nd value, this process might not be that efficient I \nthink. What do you think?\n\npublic class CBORParserEx extends CBORParser {\n     public void setOffset(int offset) {\n         final ByteInputStream in = getInputStream();\n         in.setOffset(offset);\n         _currInputProcessed = offset;\n         _inputPtr = _inputEnd = 0;\n      }\n}\n\nRegards,\nJin\n>\n> —\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub \n> <https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_FasterXML_jackson-2Ddataformats-2Dbinary_issues_129-23issuecomment-2D370305528&d=DwMFaQ&c=RoP1YumCXCgaWHvlZYR8PZh8Bv7qIrMUB65eapI_JnE&r=wb6jsjsd3i3-fQugULtSmsNMCoqysPMHv94nEiI-Jv8&m=Ju-E8nByOjLWwY9HroVs_pYLQL-pz-ZRbry44K8Ff3Q&s=iSpwPX5urwNp7mtVCNvBUewh-F6VZWzvT8wLpgt8gEI&e=>, \n> or mute the thread \n> <https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AHahsY4Ht9wG7DnGS7cQKyNAH2ERv0O3ks5tbLwNgaJpZM4SZWDC&d=DwMFaQ&c=RoP1YumCXCgaWHvlZYR8PZh8Bv7qIrMUB65eapI_JnE&r=wb6jsjsd3i3-fQugULtSmsNMCoqysPMHv94nEiI-Jv8&m=Ju-E8nByOjLWwY9HroVs_pYLQL-pz-ZRbry44K8Ff3Q&s=nPE2Kfn_rGm2ywmwU9iahU1xDhu8WYAMtmPClBkrh9U&e=>.\n>\n\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/371001081/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jinzha","id":7774641,"node_id":"MDQ6VXNlcjc3NzQ2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/7774641?v=4","gravatar_id":"","url":"https://api.github.com/users/jinzha","html_url":"https://github.com/jinzha","followers_url":"https://api.github.com/users/jinzha/followers","following_url":"https://api.github.com/users/jinzha/following{/other_user}","gists_url":"https://api.github.com/users/jinzha/gists{/gist_id}","starred_url":"https://api.github.com/users/jinzha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinzha/subscriptions","organizations_url":"https://api.github.com/users/jinzha/orgs","repos_url":"https://api.github.com/users/jinzha/repos","events_url":"https://api.github.com/users/jinzha/events{/privacy}","received_events_url":"https://api.github.com/users/jinzha/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/371020541","html_url":"https://github.com/FasterXML/jackson-dataformats-binary/issues/129#issuecomment-371020541","issue_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/129","id":371020541,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MTAyMDU0MQ==","user":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-07T04:39:24Z","updated_at":"2018-03-07T04:39:24Z","body":"In general intent is not to modify underlying `InputStream`, but to construct separate `CBORParser` instances for distinct input documents. This is safer and overhead for parser instances should be modest.\r\n\r\nBut your use case where random-access is required is quite different from kinds of use cases I have considered. I can see how parser, as is, would have significant overhead.\r\n\r\nIf you do know the length of document (or document fragment) to parse you can prevent `InputStream` from exposing more content than is needed: so, for example, if document is known to be 400 bytes long, only return up 400 bytes. That would avoid significant overhead of reading 8000 bytes, discarding 7600.\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/371020541/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/371041776","html_url":"https://github.com/FasterXML/jackson-dataformats-binary/issues/129#issuecomment-371041776","issue_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/129","id":371041776,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MTA0MTc3Ng==","user":{"login":"jinzha","id":7774641,"node_id":"MDQ6VXNlcjc3NzQ2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/7774641?v=4","gravatar_id":"","url":"https://api.github.com/users/jinzha","html_url":"https://github.com/jinzha","followers_url":"https://api.github.com/users/jinzha/followers","following_url":"https://api.github.com/users/jinzha/following{/other_user}","gists_url":"https://api.github.com/users/jinzha/gists{/gist_id}","starred_url":"https://api.github.com/users/jinzha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinzha/subscriptions","organizations_url":"https://api.github.com/users/jinzha/orgs","repos_url":"https://api.github.com/users/jinzha/repos","events_url":"https://api.github.com/users/jinzha/events{/privacy}","received_events_url":"https://api.github.com/users/jinzha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-07T06:53:18Z","updated_at":"2018-03-07T06:53:18Z","body":"Hi Tatu,\n\nThanks for the analysis!\n\nIn our cases, the length of documents might be variable I think, it \nlooks like our random-access case is not good case using the existing \nJackson CBOR.\n\nRegards,\nJin\nOn 3/7/18 12:39 PM, Tatu Saloranta wrote:\n>\n> In general intent is not to modify underlying |InputStream|, but to \n> construct separate |CBORParser| instances for distinct input \n> documents. This is safer and overhead for parser instances should be \n> modest.\n>\n> But your use case where random-access is required is quite different \n> from kinds of use cases I have considered. I can see how parser, as \n> is, would have significant overhead.\n>\n> If you do know the length of document (or document fragment) to parse \n> you can prevent |InputStream| from exposing more content than is \n> needed: so, for example, if document is known to be 400 bytes long, \n> only return up 400 bytes. That would avoid significant overhead of \n> reading 8000 bytes, discarding 7600.\n>\n> —\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub \n> <https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_FasterXML_jackson-2Ddataformats-2Dbinary_issues_129-23issuecomment-2D371020541&d=DwMFaQ&c=RoP1YumCXCgaWHvlZYR8PZh8Bv7qIrMUB65eapI_JnE&r=wb6jsjsd3i3-fQugULtSmsNMCoqysPMHv94nEiI-Jv8&m=vy9JlEKneMWD-9v0G0FoJ685qBDtl1u-z1Pj-_I0CU4&s=2UBfMbMf7L-hg7YQFMEs--47yvoGmG4UTo43GbY2d0o&e=>, \n> or mute the thread \n> <https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AHahsUiBVFN0mBOLWXlAYO8HMHO78TBVks5tb2R8gaJpZM4SZWDC&d=DwMFaQ&c=RoP1YumCXCgaWHvlZYR8PZh8Bv7qIrMUB65eapI_JnE&r=wb6jsjsd3i3-fQugULtSmsNMCoqysPMHv94nEiI-Jv8&m=vy9JlEKneMWD-9v0G0FoJ685qBDtl1u-z1Pj-_I0CU4&s=V7RFZ6dHmn8o7DgmJ4pwkvqRmA2VVUggLpQ7MuTLKTw&e=>.\n>\n\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/371041776/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jinzha","id":7774641,"node_id":"MDQ6VXNlcjc3NzQ2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/7774641?v=4","gravatar_id":"","url":"https://api.github.com/users/jinzha","html_url":"https://github.com/jinzha","followers_url":"https://api.github.com/users/jinzha/followers","following_url":"https://api.github.com/users/jinzha/following{/other_user}","gists_url":"https://api.github.com/users/jinzha/gists{/gist_id}","starred_url":"https://api.github.com/users/jinzha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinzha/subscriptions","organizations_url":"https://api.github.com/users/jinzha/orgs","repos_url":"https://api.github.com/users/jinzha/repos","events_url":"https://api.github.com/users/jinzha/events{/privacy}","received_events_url":"https://api.github.com/users/jinzha/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/371237813","html_url":"https://github.com/FasterXML/jackson-dataformats-binary/issues/129#issuecomment-371237813","issue_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/129","id":371237813,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MTIzNzgxMw==","user":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-07T18:33:46Z","updated_at":"2018-03-07T18:35:52Z","body":"@jinzha Yes, it sounds like this is the case unfortunately. Optimizing for such access is tricky -- although something like this is actually implemented in Jackson JSON parser for `DataInput`. It results in -40% performance decrease (which may be more than what would happen with `InputStream`; perhaps `DataInput` access pattern is more difficult for JVM to optimize), but does work with no look-ahead/read-ahead (since `DataInput` does not have means to detect end of input; reader must know how much is still needed).\r\nTests are in https://github.com/FasterXML/jackson-benchmarks.\r\n\r\nSimilarly, async parsers (for JSON, Smile; perhaps in future for CBOR) use different access pattern as input is fed, not read via blocking stream.\r\n\r\nSo it would be possible to implement no-caching parser; and make that pluggable via `CBORFactory`. I don't have time to do that myself, but if anyone wants to try that in future, I can help with integration.\r\n\r\nFor now your best bet may be to something else that exists, esp. if you have your own decoder.\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/371237813/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1509552264,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTUwOTU1MjI2NA==","url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/events/1509552264","actor":{"login":"jinzha","id":7774641,"node_id":"MDQ6VXNlcjc3NzQ2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/7774641?v=4","gravatar_id":"","url":"https://api.github.com/users/jinzha","html_url":"https://github.com/jinzha","followers_url":"https://api.github.com/users/jinzha/followers","following_url":"https://api.github.com/users/jinzha/following{/other_user}","gists_url":"https://api.github.com/users/jinzha/gists{/gist_id}","starred_url":"https://api.github.com/users/jinzha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinzha/subscriptions","organizations_url":"https://api.github.com/users/jinzha/orgs","repos_url":"https://api.github.com/users/jinzha/repos","events_url":"https://api.github.com/users/jinzha/events{/privacy}","received_events_url":"https://api.github.com/users/jinzha/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-03-07T18:33:46Z","performed_via_github_app":null},{"id":1509552265,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE1MDk1NTIyNjU=","url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/events/1509552265","actor":{"login":"jinzha","id":7774641,"node_id":"MDQ6VXNlcjc3NzQ2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/7774641?v=4","gravatar_id":"","url":"https://api.github.com/users/jinzha","html_url":"https://github.com/jinzha","followers_url":"https://api.github.com/users/jinzha/followers","following_url":"https://api.github.com/users/jinzha/following{/other_user}","gists_url":"https://api.github.com/users/jinzha/gists{/gist_id}","starred_url":"https://api.github.com/users/jinzha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinzha/subscriptions","organizations_url":"https://api.github.com/users/jinzha/orgs","repos_url":"https://api.github.com/users/jinzha/repos","events_url":"https://api.github.com/users/jinzha/events{/privacy}","received_events_url":"https://api.github.com/users/jinzha/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-03-07T18:33:46Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/371367360","html_url":"https://github.com/FasterXML/jackson-dataformats-binary/issues/129#issuecomment-371367360","issue_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/129","id":371367360,"node_id":"MDEyOklzc3VlQ29tbWVudDM3MTM2NzM2MA==","user":{"login":"jinzha","id":7774641,"node_id":"MDQ6VXNlcjc3NzQ2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/7774641?v=4","gravatar_id":"","url":"https://api.github.com/users/jinzha","html_url":"https://github.com/jinzha","followers_url":"https://api.github.com/users/jinzha/followers","following_url":"https://api.github.com/users/jinzha/following{/other_user}","gists_url":"https://api.github.com/users/jinzha/gists{/gist_id}","starred_url":"https://api.github.com/users/jinzha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinzha/subscriptions","organizations_url":"https://api.github.com/users/jinzha/orgs","repos_url":"https://api.github.com/users/jinzha/repos","events_url":"https://api.github.com/users/jinzha/events{/privacy}","received_events_url":"https://api.github.com/users/jinzha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-03-08T03:30:46Z","updated_at":"2018-03-08T03:30:46Z","body":"Hi Tatu,\n\nThanks you very much!\n\nIt is very nice experience to use Jackson CBOR library. I think you are \nright, we probably have to keep to use own decoder for now.\n\nRegards\nJin\n\nOn 3/8/18 2:33 AM, Tatu Saloranta wrote:\n>\n> @jinzha \n> <https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_jinzha&d=DwMFaQ&c=RoP1YumCXCgaWHvlZYR8PZh8Bv7qIrMUB65eapI_JnE&r=wb6jsjsd3i3-fQugULtSmsNMCoqysPMHv94nEiI-Jv8&m=8HdcAxPS-dklEv4qsFn2_tCsPJsDq8zqc_Du0Ptdf_k&s=Z4FJXJN0_zo4WhdUImK8tBa9SUHhr49ov0LR-6Db1mg&e=> \n> Yes, it sounds like this is the case unfortunately. Optimizing for \n> such access is tricky -- although something like this is actually \n> implemented in Jackson JSON parser for |DataInput|. It results in -40% \n> performance decrease (which may be more than what would happen with \n> |InputStream|; perhaps |DataInput| access pattern is more difficult \n> for JVM to optimize), but does work with no look-ahead/read-ahead \n> (since |DataInput| does not have means to detect end of input; reader \n> must know how much is still needed).\n> Similarly, async parsers (for JSON, Smile; perhaps in future for CBOR) \n> use different access pattern as input is fed, not read via blocking \n> stream.\n>\n> So it would be possible to implement no-caching parser; and make that \n> pluggable via |CBORFactory|. I don't have time to do that myself, but \n> if anyone wants to try that in future, I can help with integration.\n>\n> For now your best bet may be to something else that exists, esp. if \n> you have your own decoder.\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub \n> <https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_FasterXML_jackson-2Ddataformats-2Dbinary_issues_129-23issuecomment-2D371237813&d=DwMFaQ&c=RoP1YumCXCgaWHvlZYR8PZh8Bv7qIrMUB65eapI_JnE&r=wb6jsjsd3i3-fQugULtSmsNMCoqysPMHv94nEiI-Jv8&m=8HdcAxPS-dklEv4qsFn2_tCsPJsDq8zqc_Du0Ptdf_k&s=gFleEk-Z7PjcThg1kD38du7vcdaQVRq7oKif32br5Mo&e=>, \n> or mute the thread \n> <https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AHahsdw4UzXEmQ7IGx6mzLYsx4-2D0ofNzks5tcCgNgaJpZM4SZWDC&d=DwMFaQ&c=RoP1YumCXCgaWHvlZYR8PZh8Bv7qIrMUB65eapI_JnE&r=wb6jsjsd3i3-fQugULtSmsNMCoqysPMHv94nEiI-Jv8&m=8HdcAxPS-dklEv4qsFn2_tCsPJsDq8zqc_Du0Ptdf_k&s=sammE3GII5sWdKcHQY8ejLBbGHPk3td8dE7BAcznWHY&e=>.\n>\n\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/371367360/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jinzha","id":7774641,"node_id":"MDQ6VXNlcjc3NzQ2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/7774641?v=4","gravatar_id":"","url":"https://api.github.com/users/jinzha","html_url":"https://github.com/jinzha","followers_url":"https://api.github.com/users/jinzha/followers","following_url":"https://api.github.com/users/jinzha/following{/other_user}","gists_url":"https://api.github.com/users/jinzha/gists{/gist_id}","starred_url":"https://api.github.com/users/jinzha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinzha/subscriptions","organizations_url":"https://api.github.com/users/jinzha/orgs","repos_url":"https://api.github.com/users/jinzha/repos","events_url":"https://api.github.com/users/jinzha/events{/privacy}","received_events_url":"https://api.github.com/users/jinzha/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1510342136,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTUxMDM0MjEzNg==","url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/events/1510342136","actor":{"login":"jinzha","id":7774641,"node_id":"MDQ6VXNlcjc3NzQ2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/7774641?v=4","gravatar_id":"","url":"https://api.github.com/users/jinzha","html_url":"https://github.com/jinzha","followers_url":"https://api.github.com/users/jinzha/followers","following_url":"https://api.github.com/users/jinzha/following{/other_user}","gists_url":"https://api.github.com/users/jinzha/gists{/gist_id}","starred_url":"https://api.github.com/users/jinzha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinzha/subscriptions","organizations_url":"https://api.github.com/users/jinzha/orgs","repos_url":"https://api.github.com/users/jinzha/repos","events_url":"https://api.github.com/users/jinzha/events{/privacy}","received_events_url":"https://api.github.com/users/jinzha/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-03-08T03:30:46Z","performed_via_github_app":null},{"id":1510342137,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE1MTAzNDIxMzc=","url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/events/1510342137","actor":{"login":"jinzha","id":7774641,"node_id":"MDQ6VXNlcjc3NzQ2NDE=","avatar_url":"https://avatars.githubusercontent.com/u/7774641?v=4","gravatar_id":"","url":"https://api.github.com/users/jinzha","html_url":"https://github.com/jinzha","followers_url":"https://api.github.com/users/jinzha/followers","following_url":"https://api.github.com/users/jinzha/following{/other_user}","gists_url":"https://api.github.com/users/jinzha/gists{/gist_id}","starred_url":"https://api.github.com/users/jinzha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinzha/subscriptions","organizations_url":"https://api.github.com/users/jinzha/orgs","repos_url":"https://api.github.com/users/jinzha/repos","events_url":"https://api.github.com/users/jinzha/events{/privacy}","received_events_url":"https://api.github.com/users/jinzha/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-03-08T03:30:46Z","performed_via_github_app":null}]