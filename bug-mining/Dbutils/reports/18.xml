<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:49:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DBUTILS-96] DbUtils#loadDriver(ClassLoader,String) makes DriverManager throwing &quot;No suitable driver found for jdbc&quot; if ClassLoader is not the System&apos;s one</title>
                <link>https://issues.apache.org/jira/browse/DBUTILS-96</link>
                <project id="12310470" key="DBUTILS">Commons DbUtils</project>
                    <description>&lt;p&gt;By this way(use Dbutil get connect),it will say: &lt;tt&gt;No suitable driver found for jdbc:mysql://127.0.0.1:3306/xxx&lt;/tt&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;urls = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URL[1];
urls[0] = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;d:\mysql_connector_5.1.15_bin.jar&quot;&lt;/span&gt;).toURL();
URLClassLoader urlClassLoader= &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URLClassLoader(urls, &lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.getSystemClassLoader())		
DbUtils.loadDriver(urlClassLoader, driver);

Properties conProps = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Properties(); 
conProps.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;user&quot;&lt;/span&gt;, user); 
conProps.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;password&quot;&lt;/span&gt;, pwd); 
conProps.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;defaultRowPrefetch&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;20&quot;&lt;/span&gt;);

scanedConnection = DriverManager.getConnection(url, conProps);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but by this way (use jdbc&apos;s api get connect),it&apos;s ok&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
    URL jdbcDriverURL = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;d:\\mysql_connector_5.1.15_bin.jar&quot;&lt;/span&gt;).toURL();
    URL[] urls = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URL[1];
    urls[0] = jdbcDriverURL;
    URLClassLoader urlclassLoader = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URLClassLoader(urls, &lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.getSystemClassLoader());
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        java.sql.Driver driverd = (java.sql.Driver) urlclassLoader.loadClass(driver).newInstance();
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(driverd.toString());
        Properties props = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Properties();
        props.setProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;user&quot;&lt;/span&gt;, theUser);
        props.setProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;password&quot;&lt;/span&gt;, thePw);
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            c = driverd.connect(dbUrl, props);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (SQLException e) {
            &lt;span class=&quot;code-comment&quot;&gt;// TODO Auto-generated &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; block
&lt;/span&gt;            e.printStackTrace();
        }
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InstantiationException e) {
        &lt;span class=&quot;code-comment&quot;&gt;// TODO Auto-generated &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; block
&lt;/span&gt;        e.printStackTrace();
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IllegalAccessException e) {
        &lt;span class=&quot;code-comment&quot;&gt;// TODO Auto-generated &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; block
&lt;/span&gt;        e.printStackTrace();
    }
} &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (MalformedURLException e1) {
    &lt;span class=&quot;code-comment&quot;&gt;// TODO Auto-generated &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; block
&lt;/span&gt;    e1.printStackTrace();
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;is this a bug or my useing falut?&lt;/p&gt;</description>
                <environment>&lt;p&gt;jdk 1.6&lt;/p&gt;</environment>
        <key id="12600255">DBUTILS-96</key>
            <summary>DbUtils#loadDriver(ClassLoader,String) makes DriverManager throwing &quot;No suitable driver found for jdbc&quot; if ClassLoader is not the System&apos;s one</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="simone.tripodi">Simone Tripodi</assignee>
                                    <reporter username="yyflyons">yuyf</reporter>
                        <labels>
                    </labels>
                <created>Thu, 26 Jul 2012 01:35:40 +0000</created>
                <updated>Sun, 20 Jul 2014 08:48:08 +0000</updated>
                            <resolved>Mon, 6 Aug 2012 20:08:50 +0000</resolved>
                                                    <fixVersion>1.6</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13423104" author="wspeirs" created="Thu, 26 Jul 2012 14:23:20 +0000"  >&lt;p&gt;This is most likely your use. I noticed in the non-working one you have the path as &quot;d:\mysql_connector_5.1.15_bin.jar&quot; but in the working one you have &quot;d:mysql_connector_5.1.15_bin.jar&quot;. I&apos;m guessing the issue is the improperly escaped \m &lt;/p&gt;</comment>
                            <comment id="13423112" author="yyflyons" created="Thu, 26 Jul 2012 14:37:52 +0000"  >&lt;p&gt;I&apos;m sorry for d:\mysql_connector_5.1.15_bin.jar&#12290;In my real program,there are all &quot;d://mysql...jar&quot;,so it is not this reason.&lt;/p&gt;</comment>
                            <comment id="13423859" author="simone.tripodi" created="Fri, 27 Jul 2012 13:23:57 +0000"  >&lt;p&gt;Could you please attach a zip/tar/whatever program that reproduces the issue, rather than pasting the code?&lt;br/&gt;
TIA!&lt;/p&gt;</comment>
                            <comment id="13424748" author="yyflyons" created="Mon, 30 Jul 2012 08:25:52 +0000"  >&lt;p&gt;please see the zip file.&lt;/p&gt;

&lt;p&gt;in directory &#8220;dynamicloadjar&#8221; there&apos;re two classes,TestSimpleJdbc.java runs none exception,but TestDbutils.java runs error,it says:No suitable driver found for jdbc:mysql://127.0.0.1:3306/test&lt;/p&gt;

&lt;p&gt;also when you run zhe program,please put the mysql_connector_5.1.15_bin.jar in D: directory&lt;/p&gt;

&lt;p&gt;and modify mysql.properties with your mysql info&lt;/p&gt;

&lt;p&gt;thank you!&lt;/p&gt;</comment>
                            <comment id="13424799" author="simone.tripodi" created="Mon, 30 Jul 2012 11:30:14 +0000"  >&lt;p&gt;Did you notice that if in your &quot;home made&quot; solution, if you invoke &lt;tt&gt;DriverManager.getConnection( dbUrl, props )&lt;/tt&gt; rather than &lt;tt&gt;driverd.connect( dbUrl, props )&lt;/tt&gt; you obtain the same error message and the test fails as well?&lt;/p&gt;</comment>
                            <comment id="13424814" author="simone.tripodi" created="Mon, 30 Jul 2012 12:21:47 +0000"  >&lt;p&gt;OK I figured out that &lt;tt&gt;DriverManager&lt;/tt&gt; is not able to manage &lt;tt&gt;Driver&lt;/tt&gt; instances that were not loaded by the system &lt;tt&gt;ClassLoader&lt;/tt&gt;, see &lt;a href=&quot;http://www.kfu.com/~nsayer/Java/dyn-jdbc.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Pick your JDBC driver at runtime &lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;If no objections, I could work on a patch to DbUtils to work around that problem.&lt;/p&gt;

&lt;p&gt;Bill, WDYT? TIA!&lt;/p&gt;</comment>
                            <comment id="13424841" author="simone.tripodi" created="Mon, 30 Jul 2012 13:18:19 +0000"  >&lt;p&gt;The &lt;a href=&quot;https://issues.apache.org/jira/browse/DBUTILS-96&quot; title=&quot;DbUtils#loadDriver(ClassLoader,String) makes DriverManager throwing &amp;quot;No suitable driver found for jdbc&amp;quot; if ClassLoader is not the System&amp;#39;s one&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DBUTILS-96&quot;&gt;&lt;del&gt;DBUTILS-96&lt;/del&gt;&lt;/a&gt;.patch provides the required work around to fix the issue.&lt;/p&gt;

&lt;p&gt;Once applied in your local copy of &lt;tt&gt;commons-dbutils&lt;/tt&gt; (and installed in your local mvn repo), you can run the attached test to verify that the method &lt;tt&gt;DbUtils#loadDriver(ClassLoader, String)&lt;/tt&gt; also registers the adapter in the DriverManager.&lt;/p&gt;

&lt;p&gt;I am in trouble when &lt;tt&gt;IllegalAccessException&lt;/tt&gt; exception happens... any suggestion?&lt;/p&gt;

&lt;p&gt;TIA!&lt;/p&gt;</comment>
                            <comment id="13427926" author="yyflyons" created="Fri, 3 Aug 2012 09:22:21 +0000"  >&lt;p&gt;OK&lt;br/&gt;
thank u very much!&lt;/p&gt;

&lt;p&gt;USE  such code  is ok&lt;/p&gt;

&lt;p&gt;DriverManager.registerDriver(new DriverAdapter(driver)); &lt;/p&gt;</comment>
                            <comment id="13427930" author="simone.tripodi" created="Fri, 3 Aug 2012 09:27:26 +0000"  >&lt;p&gt;We will make it available on DbUtils ASAP, making it completely transparent to users &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13428044" author="simone.tripodi" created="Fri, 3 Aug 2012 12:48:29 +0000"  >&lt;p&gt;A new small patch where added a guard for &lt;tt&gt;ClassCastException&lt;/tt&gt; to return &lt;tt&gt;false&lt;/tt&gt; when happens.&lt;br/&gt;
Moreover I renamed the &lt;tt&gt;DriverAdapter&lt;/tt&gt; to &lt;tt&gt;DriverProxy&lt;/tt&gt;, sounds more reasonable.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;TODO&lt;/tt&gt;: I am still not able to manage the &lt;tt&gt;IllegalAccessException&lt;/tt&gt;...&lt;/p&gt;</comment>
                            <comment id="13429019" author="simone.tripodi" created="Mon, 6 Aug 2012 08:13:29 +0000"  >&lt;p&gt;Last patch that takes in consideration also &lt;tt&gt;Driver&lt;/tt&gt; implementation with private constructors.&lt;/p&gt;

&lt;p&gt;Please check, if no objections I can commit it.&lt;/p&gt;

&lt;p&gt;TIA!&lt;/p&gt;</comment>
                            <comment id="13429329" author="wspeirs" created="Mon, 6 Aug 2012 18:35:56 +0000"  >&lt;p&gt;v3 looks good. I&apos;d say commit, post the SVN rev number here, and resolve. Thanks!&lt;/p&gt;</comment>
                            <comment id="13429386" author="simone.tripodi" created="Mon, 6 Aug 2012 20:08:50 +0000"  >&lt;p&gt;Patch applied, see r1369963&lt;/p&gt;

&lt;p&gt;Thanks Bill for your feedback!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12538341" name="DBUTILS-96.patch" size="2974" author="simone.tripodi" created="Mon, 30 Jul 2012 13:18:19 +0000"/>
                            <attachment id="12539043" name="DBUTILS-96_v2.patch" size="3272" author="simone.tripodi" created="Fri, 3 Aug 2012 12:48:29 +0000"/>
                            <attachment id="12539246" name="DBUTILS-96_v3.patch" size="3961" author="simone.tripodi" created="Mon, 6 Aug 2012 08:13:29 +0000"/>
                            <attachment id="12538342" name="dbutils-96.tar.gz" size="754932" author="simone.tripodi" created="Mon, 30 Jul 2012 13:18:19 +0000"/>
                            <attachment id="12538318" name="dynamicloadjar.zip" size="800513" author="yyflyons" created="Mon, 30 Jul 2012 08:25:52 +0000"/>
                            <attachment id="12538319" name="mysql.properties" size="107" author="yyflyons" created="Mon, 30 Jul 2012 08:25:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>293647</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 15 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tizz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170387</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>