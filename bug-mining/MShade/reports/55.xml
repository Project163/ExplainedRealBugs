<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:19:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MSHADE-75] Package maven multimodule project with shade plugin : error in opening zip on directory</title>
                <link>https://issues.apache.org/jira/browse/MSHADE-75</link>
                <project id="12317921" key="MSHADE">Maven Shade Plugin (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I make a maven aggregator project with two modules.&lt;br/&gt;
The first module is a dependency of the second.&lt;br/&gt;
The first module is build with the install goal.&lt;br/&gt;
The second with the shade plugin during the package phase.&lt;br/&gt;
The first module build runs successfully and install resulting jar file in the maven local repository.&lt;br/&gt;
The second module build fails with this error : &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Error creating shaded jar: error in opening zip file /home/yoann/workspace/maven.1265640716107/trunk/tcx-ws-client/module1/target/classes

[INFO] ------------------------------------------------------------------------
[INFO] For more information, run Maven with the -e switch
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 10 seconds
[INFO] Finished at: Fri Feb 12 10:39:29 CET 2010
[INFO] Final Memory: 59M/583M
[INFO] ------------------------------------------------------------------------&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It&apos;s due to the shade plugin whose tries to reference first module classes from target/classes repository instead of the jar file previously build.&lt;br/&gt;
Therefore, it seems that the shade plugin doesn&apos;t work with a maven multimodules project.&lt;/p&gt;

&lt;p&gt;I manage to build my maven aggregator project by applying the attached patch (patch-maven-shade-plugin.txt) on the class ShadeMojo.java&lt;/p&gt;</description>
                <environment>Ubuntu 9.04 - Jaunty Jackalope -, Eclispse (Galileo), java 1.6.0_16</environment>
        <key id="12807945">MSHADE-75</key>
            <summary>Package maven multimodule project with shade plugin : error in opening zip on directory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bmargulies">Benson Margulies</assignee>
                                    <reporter username="yyonnet">Yoann Yonnet</reporter>
                        <labels>
                            <label>moreinfo</label>
                    </labels>
                <created>Fri, 12 Feb 2010 03:46:16 +0000</created>
                <updated>Sat, 14 Jun 2025 18:11:14 +0000</updated>
                            <resolved>Sun, 27 May 2012 19:52:41 +0000</resolved>
                                    <version>1.3.1</version>
                                    <fixVersion>1.7</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14448880" author="bentmann" created="Sat, 13 Feb 2010 07:31:16 +0000"  >&lt;p&gt;What Maven version was used for the build?&lt;/p&gt;</comment>
                            <comment id="14448848" author="yyonnet" created="Mon, 15 Feb 2010 03:14:45 +0000"  >&lt;p&gt;I use Maven 2.1.0 and the m2eclipse plugin installed from the following Eclipse update URL : &lt;a href=&quot;http://m2eclipse.sonatype.org/update/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://m2eclipse.sonatype.org/update/&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="14449026" author="stefanrufer" created="Fri, 26 Feb 2010 17:10:47 +0000"  >&lt;p&gt;Similar effect for me, but not exactly as described above: It seems that the shade plugin tries to include the target/classes directory of the module for which it was started:&lt;/p&gt;

&lt;p&gt;srufer@legolas:~/Documents/ws-titrakk/sixtrakk-client-remoting$ mvn clean package&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; [jar:jar &lt;/p&gt;
{execution: default-jar}
&lt;p&gt;]&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Building jar: /home/srufer/Documents/ws-titrakk/sixtrakk-client-remoting/target/sixtrakk-client-1.0.1-SNAPSHOT-nctest.jar&lt;br/&gt;
...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; [shade:shade &lt;/p&gt;
{execution: default}
&lt;p&gt;]&lt;br/&gt;
...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Including commons-codec:commons-codec:jar:1.2 in the shaded jar.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; BUILD ERROR&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Error creating shaded jar: error in opening zip file /home/srufer/Documents/ws-titrakk/sixtrakk-client-remoting/target/classes&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; For more information, run Maven with the -e switch&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Total time: 8 seconds&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Finished at: Fri Feb 26 23:59:57 CET 2010&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Final Memory: 24M/153M&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
srufer@legolas:~/Documents/ws-titrakk/sixtrakk-client-remoting$ &lt;/p&gt;

&lt;p&gt;However, if I comment out the classifier tag of the maven-jar-plugin in my pom.xml, it builds the shaded JAR without complaints. Is the shade plugin being confused by this?&lt;/p&gt;

&lt;p&gt;      &amp;lt;plugin&amp;gt;&lt;br/&gt;
        &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;&lt;br/&gt;
        &amp;lt;artifactId&amp;gt;maven-jar-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
        &amp;lt;configuration&amp;gt;&lt;br/&gt;
  &amp;lt;!-- &lt;br/&gt;
          &amp;lt;classifier&amp;gt;${env.name}&amp;lt;/classifier&amp;gt;&lt;br/&gt;
 --&amp;gt;&lt;br/&gt;
        &amp;lt;/configuration&amp;gt;&lt;br/&gt;
      &amp;lt;/plugin&amp;gt;&lt;/p&gt;

&lt;p&gt;Maven 2.2.1, Java 1.6.0_16, maven-shade-plugin 1.3.1&lt;/p&gt;</comment>
                            <comment id="14449071" author="olamy" created="Tue, 13 Mar 2012 06:24:41 +0000"  >&lt;p&gt;I have added an it test and cannot reproduce. Could you please provide a sample project which reproduce your issue ? Thanks&lt;/p&gt;</comment>
                            <comment id="14449072" author="zirzirikos" created="Tue, 3 Apr 2012 11:04:07 +0000"  >&lt;p&gt;Here&apos;s a dirt simple test case, just a simple pom. Running this with Maven 2.2.1 gives me:&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; BUILD ERROR&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Error creating shaded jar: C:\dev\workspaces\indigo\mshade-75\target\classes (Access is denied)&lt;/p&gt;</comment>
                            <comment id="14449091" author="zirzirikos" created="Tue, 3 Apr 2012 11:05:37 +0000"  >&lt;p&gt;Specifically, the error arises when the maevn-jar-plugin has a classifier in its configuration.&lt;/p&gt;</comment>
                            <comment id="14449114" author="bmargulies" created="Sun, 27 May 2012 19:21:38 +0000"  >&lt;p&gt;This is not a fix for the problem at hand. The patch doesn&apos;t change the behavior at all, it would apply to a case where a declared dependency had a classifier, and the fix would never work, either.&lt;/p&gt;</comment>
                            <comment id="14449174" author="bmargulies" created="Sun, 27 May 2012 19:33:46 +0000"  >&lt;p&gt;I claim that this case should not work, but it could &apos;not work&apos; more politely.&lt;/p&gt;

&lt;p&gt;What you&apos;ve done is disrupt the production of the project&apos;s main artifact. By adding a classifier to the default execution of the jar plugin, you&apos;ve made the jar plugin create an attached artifact &lt;b&gt;instead of&lt;/b&gt; the main &apos;jar&apos; artifact. This leaves the project &apos;naked&apos; and no longer producing a jar, and so shade is flummoxed. Arguably, this case should produce a diagnostic like the diagnostic for non-jar projects, and that&apos;s what I&apos;m going to make it do. Then, I believe that you could exclude the project&apos;s main artifact from shade and ask for the classified one instead.&lt;/p&gt;</comment>
                            <comment id="14449036" author="bmargulies" created="Sun, 27 May 2012 19:52:41 +0000"  >&lt;p&gt;Proper diagnosis added.&lt;/p&gt;</comment>
                            <comment id="14449051" author="bmargulies" created="Sun, 27 May 2012 20:17:04 +0000"  >&lt;p&gt;r1343119 | bimargulies | 2012-05-27 20:52:20 -0400 (Sun, 27 May 2012) | 3 lines&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/MSHADE-75&quot; title=&quot;Package maven multimodule project with shade plugin : error in opening zip on directory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHADE-75&quot;&gt;&lt;del&gt;MSHADE-75&lt;/del&gt;&lt;/a&gt;: Package maven multimodule project with shade plugin : error in opening zip on directory&lt;br/&gt;
o detect and diagnose missing jar main artifact.&lt;/p&gt;

&lt;p&gt;------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;------------------------------------------------------------------------&lt;br/&gt;
r1343121 | bimargulies | 2012-05-27 21:01:53 -0400 (Sun, 27 May 2012) | 3 lines&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/MSHADE-75&quot; title=&quot;Package maven multimodule project with shade plugin : error in opening zip on directory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHADE-75&quot;&gt;&lt;del&gt;MSHADE-75&lt;/del&gt;&lt;/a&gt;: Package maven multimodule project with shade plugin : error in opening zip on directory&lt;br/&gt;
 o this was a dumb error in the work on -75 that I misattributed briefly.&lt;/p&gt;

&lt;p&gt;------------------------------------------------------------------------&lt;/p&gt;
</comment>
                            <comment id="17976011" author="JIRAUSER302100" created="Sat, 14 Jun 2025 18:11:14 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-shade-plugin/issues/446&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-shade-plugin#446&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12808115">MSHADE-67</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12718948" name="patch-maven-shade-plugin.txt" size="1098" author="yyonnet" created="Fri, 12 Feb 2010 03:46:16 +0000"/>
                            <attachment id="12718921" name="pom.xml" size="892" author="zirzirikos" created="Tue, 3 Apr 2012 11:04:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            21 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2b2rr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>