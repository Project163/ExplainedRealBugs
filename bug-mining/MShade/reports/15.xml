<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:19:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MSHADE-30] duplicate entry error</title>
                <link>https://issues.apache.org/jira/browse/MSHADE-30</link>
                <project id="12317921" key="MSHADE">Maven Shade Plugin (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;I receive this error:&lt;/p&gt;

&lt;p&gt;Embedded error: duplicate entry: org/apache/xmlbeans/FilterXmlObject.class&lt;/p&gt;

&lt;p&gt;It started with a javax.xml.namespace class.  So I started putting excludes, and then I kept getting one new class after another.  If I exclude everything then I doubt my application is going to work.&lt;/p&gt;

&lt;p&gt;I really don&apos;t understand this error.  I have never seen this type of error with the fatjar eclipse plugin.  I understand it&apos;s complaining about having the same class twice, but if it&apos;s not a problem for my eclipse project or the maven build, why is it a problem for shade?&lt;/p&gt;

&lt;p&gt;I feel the shade plugin should be able to handle this gracefully.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12807967">MSHADE-30</key>
            <summary>duplicate entry error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bentmann">Benjamin Bentmann</assignee>
                                    <reporter username="cunparis">Michael Mattox</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Apr 2008 02:56:57 +0000</created>
                <updated>Sat, 14 Jun 2025 18:12:09 +0000</updated>
                            <resolved>Thu, 8 Jan 2009 16:27:57 +0000</resolved>
                                    <version>1.0.1</version>
                                    <fixVersion>1.2</fixVersion>
                                        <due></due>
                            <votes>5</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14448822" author="mfarhans" created="Thu, 24 Apr 2008 16:21:04 +0000"  >&lt;p&gt;I get a similar error while shade is bundling all the dependencies..&lt;/p&gt;

&lt;p&gt;Works fine if i do a &quot;mvn clean&quot; first..&lt;/p&gt;</comment>
                            <comment id="14448839" author="cunparis" created="Fri, 25 Apr 2008 02:41:35 +0000"  >&lt;p&gt;For me a clean doesn&apos;t make it work. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I&apos;m now using assembly.&lt;/p&gt;

</comment>
                            <comment id="14448895" author="rrattigan" created="Mon, 16 Jun 2008 12:50:30 +0000"  >&lt;p&gt;I have the same problem. I can&apos;t get &quot;mvn release:perform&quot; to work, even if I do &quot;mvn clean&quot; beforehand. &lt;br/&gt;
I also see this doing regular builds, when it can be fixed with an &quot;mvn clean&quot;. Of course, this should not be necessary.&lt;/p&gt;</comment>
                            <comment id="14449230" author="gregrluck" created="Sun, 13 Jul 2008 01:59:10 +0000"  >&lt;p&gt;I have the same problem.&lt;/p&gt;

&lt;p&gt;It will sometimes do a mvn package for me. But I cannot ever get install or deploy to work. &lt;/p&gt;

&lt;p&gt;I tested versions going back to the 1.0 alphas. They all have the problem.&lt;/p&gt;

&lt;p&gt;It would be really really great to get this fixed. &lt;/p&gt;</comment>
                            <comment id="14448828" author="bentmann" created="Wed, 16 Jul 2008 13:26:08 +0000"  >&lt;p&gt;A test project to reproduce this might help to speed things up.&lt;/p&gt;</comment>
                            <comment id="14448946" author="oae" created="Wed, 13 Aug 2008 08:03:58 +0000"  >&lt;p&gt;Have the same problem in a multiproject setup.&lt;br/&gt;
Project A contains submodule B.&lt;br/&gt;
B&apos;s pom.xml contains the shade setup (like the example).&lt;br/&gt;
Now from A i execute:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;mvn clean package install -Dmaven.test.skip -o
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;That gives me:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[jar:jar]
[INFO] [shade:shade {execution: default}]
[INFO] Including commons-cli:commons-cli:jar:1.1 in the shaded jar.
[INFO] Excluding log4j:log4j:jar:1.2.13 from the shaded jar.
[INFO] Excluding org.apache.maven:maven-script-ant:jar:2.0.1 from the shaded jar.
[INFO] Excluding org.apache.maven:maven-plugin-api:jar:2.0.1 from the shaded jar.
[INFO] Excluding org.codehaus.plexus:plexus-ant-factory:jar:1.0-alpha-1 from the shaded jar.
[INFO] Excluding ant:ant-launcher:jar:1.6.5 from the shaded jar.
[INFO] Excluding ant:ant:jar:1.6.5 from the shaded jar.
[INFO] Excluding org.codehaus.plexus:plexus-utils:jar:1.0.5 from the shaded jar.
[INFO] Excluding classworlds:classworlds:jar:1.1-alpha-2 from the shaded jar.
[INFO] Excluding org.codehaus.plexus:plexus-container-default:jar:1.0-alpha-8 from the shaded jar.
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Error creating shaded jar.

Embedded error: duplicate entry: org/apache/commons/cli/AlreadySelectedException.class
[INFO] ------------------------------------------------------------------------
[DEBUG] Trace
org.apache.maven.lifecycle.LifecycleExecutionException: Error creating shaded jar.
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:583)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:499)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:478)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:330)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:291)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:142)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:336)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:129)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:287)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
        at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
        at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
        at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: org.apache.maven.plugin.MojoExecutionException: Error creating shaded jar.
        at org.apache.maven.plugins.shade.mojo.ShadeMojo.execute(ShadeMojo.java:327)
        at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:451)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:558)
        ... 16 more
Caused by: java.util.zip.ZipException: duplicate entry: org/apache/commons/cli/AlreadySelectedException.class
        at java.util.zip.ZipOutputStream.putNextEntry(ZipOutputStream.java:163)
        at java.util.jar.JarOutputStream.putNextEntry(JarOutputStream.java:90)
        at org.apache.maven.plugins.shade.DefaultShader.addRemappedClass(DefaultShader.java:182)
        at org.apache.maven.plugins.shade.DefaultShader.shade(DefaultShader.java:104)
        at org.apache.maven.plugins.shade.mojo.ShadeMojo.execute(ShadeMojo.java:285)
        ... 18 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14448936" author="hencjo" created="Thu, 14 Aug 2008 09:35:11 +0000"  >&lt;p&gt;This is how it goes wrong:&lt;br/&gt;
(project is clean)&lt;br/&gt;
&amp;gt; mvn package&lt;br/&gt;
(there is a shaded jar i target/project.jar)&lt;br/&gt;
&amp;gt; mvn package&lt;br/&gt;
You get &quot;Embedded error: duplicate entry: ...&quot;&lt;/p&gt;

&lt;p&gt;This happens because during the second run shade runs on an already shaded jar, which results is the same class being added again. Of course, in bigger project&apos;s it&apos;s not fun to run clean all the time, but it is a workaround.&lt;/p&gt;

&lt;p&gt;I will attach a patch, it has the following changes since 1.1.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Upon composing the shaded jar, it writes an empty text file under: META-INF/maven/shaded&lt;/li&gt;
	&lt;li&gt;Before shading, it checks if the input jar is already shaded or not. If so, it reuses the original-file generated during last run instead of the shaded project artifact.&lt;/li&gt;
	&lt;li&gt;It does not replace the &quot;old original&quot; from last run with the new shaded jar.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14448841" author="hencjo" created="Thu, 14 Aug 2008 09:35:45 +0000"  >&lt;p&gt;To be applied to &lt;a href=&quot;http://svn.apache.org/repos/asf/maven/plugins/tags/maven-shade-plugin-1.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/repos/asf/maven/plugins/tags/maven-shade-plugin-1.1&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14449228" author="mark.horn@agilesrc.com" created="Fri, 22 Aug 2008 11:18:54 +0000"  >&lt;p&gt;Thanks for the patch Henrik! as this is still not fixed in 1.1 or 1.2-SNAPSHOT we downloaded your patch and applied to the 1.1 code base locally and it worked like a charm&lt;/p&gt;</comment>
                            <comment id="14449227" author="rogerpack" created="Tue, 23 Dec 2008 16:07:47 +0000"  >&lt;p&gt;I think we also get bit by this quite a bit.&lt;br/&gt;
-=r&lt;/p&gt;</comment>
                            <comment id="14448861" author="larsivi" created="Thu, 8 Jan 2009 12:03:09 +0000"  >&lt;p&gt;I believe the issue is much more serious than represented above, as transitive dependencies in external projects may trigger this.&lt;/p&gt;

&lt;p&gt;org.apache.camel:camel-cxf:1.4.0 was alone able to trigger it as it had two transitive stax spec deps.&lt;/p&gt;</comment>
                            <comment id="14448876" author="bentmann" created="Thu, 8 Jan 2009 16:27:57 +0000"  >&lt;p&gt;Already fixed in &lt;a href=&quot;http://svn.eu.apache.org/viewvc?view=rev&amp;amp;revision=690269&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r690269&lt;/a&gt; by Jason.&lt;/p&gt;

&lt;p&gt;For those that don&apos;t want to update to version 1.2 of the plugin, adding some non-sense &lt;tt&gt;&amp;lt;relocation&amp;gt;&lt;/tt&gt; to the plugin config should work.&lt;/p&gt;</comment>
                            <comment id="14449221" author="rogerpack" created="Thu, 22 Jan 2009 18:32:24 +0000"  >&lt;p&gt;could you do me a favor and provide an example of said &quot;non-sense &amp;lt;relocation&amp;gt;&quot; stuffs?&lt;/p&gt;

&lt;p&gt;Also for me, at least, changing pom.xml to say&lt;/p&gt;

&lt;p&gt;&amp;lt;artifactId&amp;gt;maven-shade-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
        &amp;lt;version&amp;gt;1.2&amp;lt;/version&amp;gt;&lt;/p&gt;

&lt;p&gt;fixed it.&lt;br/&gt;
Thanks much.&lt;br/&gt;
-=r&lt;/p&gt;</comment>
                            <comment id="14448918" author="bentmann" created="Fri, 23 Jan 2009 03:15:28 +0000"  >&lt;blockquote&gt;&lt;p&gt;could you do me a favor and provide an example of said &quot;non-sense &amp;lt;relocation&amp;gt;&quot; stuffs? &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Something like the following should do:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;relocations&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;relocation&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;pattern&amp;gt;&lt;/span&gt;void&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/pattern&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;shadedPattern&amp;gt;&lt;/span&gt;void&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/shadedPattern&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/relocation&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/relocations&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;i.e. a relocation that doesn&apos;t actually affect one&apos;s classes but exists merely to trigger another code path in the plugin.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Also for me, at least, changing pom.xml to say &lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt; &amp;lt;version&amp;gt;1.2&amp;lt;/version&amp;gt; fixed it&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Which isn&apos;t suprising given that this issue is marked as &quot;Fix Version: 1.2&quot; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14449222" author="rogerpack" created="Fri, 23 Jan 2009 17:09:18 +0000"  >&lt;p&gt;Thanks much.&lt;/p&gt;

&lt;p&gt;Note also that if you have a pom file with multiple submodules, and one of those submodules if&lt;br/&gt;
maven-shade-plugin version 1.0.x and others are 1.2, for some reason it &quot;can&quot; and &quot;does&quot; choose 1.0.x over the rest&lt;br/&gt;
so if you run&lt;br/&gt;
mvn install within the submodule it works fine&lt;br/&gt;
then if you run it for the entire structure, it errs with the same thing.&lt;/p&gt;

&lt;p&gt;Fix:&lt;br/&gt;
change all references to the shade plugin to be 1.2, then it works.&lt;br/&gt;
Good luck.&lt;br/&gt;
-=r&lt;/p&gt;</comment>
                            <comment id="14448948" author="bentmann" created="Sat, 24 Jan 2009 04:06:46 +0000"  >&lt;blockquote&gt;&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt; if you run it for the entire structure, it errs with the same thing.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yeah, another known issue: &lt;a href=&quot;https://issues.apache.org/jira/browse/MNG-3284&quot; title=&quot;Cached plugins are used, even when the specifically declared &quot; class=&quot;issue-link&quot; data-issue-key=&quot;MNG-3284&quot;&gt;&lt;del&gt;MNG-3284&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17976149" author="JIRAUSER302100" created="Sat, 14 Jun 2025 18:12:09 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-shade-plugin/issues/390&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-shade-plugin#390&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12718977" name="mshade-30-patch.txt" size="10347" author="hencjo" created="Thu, 14 Aug 2008 09:35:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            21 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2b29b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>