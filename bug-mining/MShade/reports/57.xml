<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:19:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MSHADE-107] ArrayIndexOutOfBoundsException when using minimizeJar with shade plugin</title>
                <link>https://issues.apache.org/jira/browse/MSHADE-107</link>
                <project id="12317921" key="MSHADE">Maven Shade Plugin (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;The shade plugin fails with error message&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Error creating shaded jar: 26
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Running maven with -e on the project yields&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Error creating shaded jar: 26

[INFO] ------------------------------------------------------------------------
[INFO] Trace
org.apache.maven.lifecycle.LifecycleExecutionException: Error creating shaded jar: 26
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:719)
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:556)
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:535)
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
	at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
	at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
	at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
	at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
	at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
	at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
	at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: org.apache.maven.plugin.MojoExecutionException: Error creating shaded jar: 26
	at org.apache.maven.plugins.shade.mojo.ShadeMojo.execute(ShadeMojo.java:503)
	at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)
	... 17 more
Caused by: java.lang.ArrayIndexOutOfBoundsException: 26
	at org.objectweb.asm.ClassReader.readClass(Unknown Source)
	at org.objectweb.asm.ClassReader.accept(Unknown Source)
	at org.objectweb.asm.ClassReader.accept(Unknown Source)
	at org.vafer.jdependency.Clazzpath.addClazzpathUnit(Clazzpath.java:94)
	at org.apache.maven.plugins.shade.filter.MinijarFilter.&amp;lt;init&amp;gt;(MinijarFilter.java:74)
	at org.apache.maven.plugins.shade.mojo.ShadeMojo.getFilters(ShadeMojo.java:696)
	at org.apache.maven.plugins.shade.mojo.ShadeMojo.execute(ShadeMojo.java:438)
	... 19 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The failing module is part of a multi module build, has a quite large number of transitive dependencies.&lt;/p&gt;</description>
                <environment>Apache Maven 2.2.1 (rdebian-1)&lt;br/&gt;
Java version: 1.6.0_26&lt;br/&gt;
</environment>
        <key id="12808068">MSHADE-107</key>
            <summary>ArrayIndexOutOfBoundsException when using minimizeJar with shade plugin</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bmargulies">Benson Margulies</assignee>
                                    <reporter username="everflux">Thomas Kruse</reporter>
                        <labels>
                            <label>moreinfo</label>
                    </labels>
                <created>Wed, 18 Jan 2012 07:40:24 +0000</created>
                <updated>Sat, 14 Jun 2025 18:12:28 +0000</updated>
                            <resolved>Sun, 27 May 2012 20:16:14 +0000</resolved>
                                    <version>1.5</version>
                                    <fixVersion>1.7</fixVersion>
                                        <due></due>
                            <votes>2</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14449154" author="olamy" created="Tue, 13 Mar 2012 07:46:16 +0000"  >&lt;p&gt;any sample project to reproduce ?&lt;/p&gt;</comment>
                            <comment id="14448997" author="shane907" created="Wed, 14 Mar 2012 17:57:08 +0000"  >&lt;p&gt;Simple example file for &lt;a href=&quot;https://issues.apache.org/jira/browse/MSHADE-107&quot; title=&quot;ArrayIndexOutOfBoundsException when using minimizeJar with shade plugin&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHADE-107&quot;&gt;&lt;del&gt;MSHADE-107&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14449155" author="shane907" created="Wed, 14 Mar 2012 18:00:00 +0000"  >&lt;p&gt;I get a slightly different ArrayIndexOutOfBoundsException, but I believe the example pom I attached illustrates the same problem. It looks like dependencies with &quot;malformed classes&quot; will trip up the asm ClassReader. See similar problem here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://jira.codehaus.org/browse/MANIMALSNIFFER-9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jira.codehaus.org/browse/MANIMALSNIFFER-9&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Maybe the best solution is just to catch the ArrayIndexOutOfBoundsException and not include the problem dependencies in the list of candidate classes to be removed?&lt;/p&gt;</comment>
                            <comment id="14449133" author="shane907" created="Wed, 14 Mar 2012 18:04:01 +0000"  >&lt;p&gt;Also, it might be worth noting that it seems like the offending array index is usually restricted to specific values (48188 and 26 are the only ones I&apos;ve seen so far), so maybe only these values should be trapped?&lt;/p&gt;</comment>
                            <comment id="14448977" author="shane907" created="Wed, 14 Mar 2012 18:48:57 +0000"  >&lt;p&gt;Suggested patch, implemented as described above.&lt;/p&gt;</comment>
                            <comment id="14449013" author="shane907" created="Wed, 21 Mar 2012 02:22:08 +0000"  >&lt;p&gt;Acutally, see mshade-107-revised.patch. Instead of only catching certain ArrayIndexOutOfBoundsExceptions, it just warns the user that a dependency couldn&apos;t be analyzed for minimization and continues. This seems like a much better solution...a slightly larger jar is better than a build error.&lt;/p&gt;</comment>
                            <comment id="14449134" author="shane907" created="Thu, 17 May 2012 17:00:58 +0000"  >&lt;p&gt;Any chance of getting this patch committed? Seems like a sane workaround for malformed dependencies...&lt;/p&gt;</comment>
                            <comment id="14448999" author="bmargulies" created="Sun, 27 May 2012 20:16:15 +0000"  >&lt;p&gt;------------------------------------------------------------------------&lt;br/&gt;
r1343123 | bimargulies | 2012-05-27 21:15:51 -0400 (Sun, 27 May 2012) | 3 lines&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/MSHADE-107&quot; title=&quot;ArrayIndexOutOfBoundsException when using minimizeJar with shade plugin&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHADE-107&quot;&gt;&lt;del&gt;MSHADE-107&lt;/del&gt;&lt;/a&gt;: ArrayIndexOutOfBoundsException when using minimizeJar with shade plugin&lt;br/&gt;
 o accepted patch that improved the diagnostics for bad dependencies.&lt;/p&gt;

&lt;p&gt;------------------------------------------------------------------------&lt;/p&gt;</comment>
                            <comment id="17976212" author="JIRAUSER302100" created="Sat, 14 Jun 2025 18:12:28 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-shade-plugin/issues/460&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-shade-plugin#460&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12718918" name="mshade-107-revised.patch" size="5969" author="shane907" created="Wed, 21 Mar 2012 02:22:08 +0000"/>
                            <attachment id="12719023" name="mshade-107.patch" size="5912" author="shane907" created="Wed, 14 Mar 2012 18:48:57 +0000"/>
                            <attachment id="12718944" name="pom.xml" size="1564" author="shane907" created="Wed, 14 Mar 2012 17:57:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            21 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2b2jz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>