<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:20:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MSHADE-182] ServicesResourceTransformer incorrectly ignores given Relocators</title>
                <link>https://issues.apache.org/jira/browse/MSHADE-182</link>
                <project id="12317921" key="MSHADE">Maven Shade Plugin (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;When using the ServicesResourceTransformer in conjunction with relocators for classes that have META-INF/services/ entries, the behavior of the Shade Plugin is unexpected because those services files entries do not get relocated.&lt;/p&gt;

&lt;p&gt;For example:&lt;/p&gt;

&lt;p&gt;Relocator: org.foo.Clazz to org.foo.shaded.Clazz&lt;br/&gt;
Services files: META-INF/services/org.foo.Clazz&lt;/p&gt;

&lt;p&gt;We would expect a services file at META-INF/services/org.foo.shaded.Clazz in the shaded jar, but that does not happen (the file remains at META-INF/services/org.foo.Clazz) since the ServicesResourceTransformer ignores the given Relocators.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12808083">MSHADE-182</key>
            <summary>ServicesResourceTransformer incorrectly ignores given Relocators</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aheritier">Arnaud Heritier</assignee>
                                    <reporter username="thomas_kielbus">Thomas Kielbus</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Oct 2014 18:03:42 +0000</created>
                <updated>Sat, 14 Jun 2025 18:12:46 +0000</updated>
                            <resolved>Sun, 7 Feb 2016 14:31:48 +0000</resolved>
                                    <version>2.3</version>
                                    <fixVersion>3.0.0</fixVersion>
                                        <due></due>
                            <votes>11</votes>
                                    <watches>25</watches>
                                                                                                                <comments>
                            <comment id="14449248" author="traskstalnaker" created="Tue, 11 Nov 2014 03:25:28 +0000"  >&lt;p&gt;I just ran into this issue also, please see proposed patch.  Thanks.&lt;/p&gt;</comment>
                            <comment id="14449213" author="saden1" created="Tue, 18 Nov 2014 08:57:30 +0000"  >&lt;p&gt;The issue is two folds:&lt;br/&gt;
a) the service files must be relocated&lt;br/&gt;
b) the content of the service files must also be relocated.&lt;/p&gt;

&lt;p&gt;The  patch submitted by Trask address issue a but not b.&lt;/p&gt;</comment>
                            <comment id="14449153" author="saden1" created="Tue, 18 Nov 2014 10:55:35 +0000"  >&lt;p&gt;This patch addresses both issue a and b mentioned above.&lt;/p&gt;</comment>
                            <comment id="14449218" author="traskstalnaker" created="Thu, 20 Nov 2014 01:59:18 +0000"  >&lt;p&gt;The updated patch works for me.  Can we get a committer to review?  Thanks.&lt;/p&gt;</comment>
                            <comment id="14449198" author="krosenvold" created="Thu, 20 Nov 2014 06:10:07 +0000"  >&lt;p&gt;There is no kind of testcase with this patch. Please look at the projects under src/it/ and make a small testcase&lt;/p&gt;</comment>
                            <comment id="14449183" author="traskstalnaker" created="Sun, 23 Nov 2014 15:12:31 +0000"  >&lt;p&gt;Test attached.  Please review.  Thanks.&lt;/p&gt;</comment>
                            <comment id="14518699" author="busbey" created="Wed, 29 Apr 2015 04:21:33 +0000"  >&lt;p&gt;bump. looks like we have everything now? would y&apos;all prefer if the change and test were in a single patch?&lt;/p&gt;</comment>
                            <comment id="14592379" author="mingtao.zhang" created="Thu, 18 Jun 2015 19:33:28 +0000"  >&lt;p&gt;need +1&lt;/p&gt;</comment>
                            <comment id="15013924" author="lngtmg" created="Thu, 19 Nov 2015 17:11:41 +0000"  >&lt;p&gt;Guys, what is the status?&lt;br/&gt;
Can we apply the patch and release new version?&lt;/p&gt;</comment>
                            <comment id="15015487" author="lngtmg" created="Fri, 20 Nov 2015 09:32:16 +0000"  >&lt;p&gt;The bug is still valid. Checked with 2.4.2&lt;/p&gt;</comment>
                            <comment id="15095028" author="kostyasha" created="Tue, 12 Jan 2016 21:48:22 +0000"  >&lt;p&gt;Patch is outdated now (not sure). Is there any progress on this issue?&lt;/p&gt;</comment>
                            <comment id="15095228" author="githubbot" created="Tue, 12 Jan 2016 23:40:39 +0000"  >&lt;p&gt;GitHub user KostyaSha opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/maven-plugins/pull/79&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-plugins/pull/79&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/MSHADE-182&quot; title=&quot;ServicesResourceTransformer incorrectly ignores given Relocators&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHADE-182&quot;&gt;&lt;del&gt;MSHADE-182&lt;/del&gt;&lt;/a&gt; Service file should be relocated.&lt;/p&gt;

&lt;p&gt;    Fixes issue when service file content is relocated, but file itself didn&apos;t.&lt;br/&gt;
    Patch content provided by some person in jira ticket.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/KostyaSha/maven-plugins&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/KostyaSha/maven-plugins&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/MSHADE-182&quot; title=&quot;ServicesResourceTransformer incorrectly ignores given Relocators&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHADE-182&quot;&gt;&lt;del&gt;MSHADE-182&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/maven-plugins/pull/79.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-plugins/pull/79.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #79&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 3acfb9ba3fc22d76d466b112d0ccb04d094f8d24&lt;br/&gt;
Author: Kanstantsin Shautsou &amp;lt;kanstantsin.sha@gmail.com&amp;gt;&lt;br/&gt;
Date:   2016-01-12T23:39:05Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/MSHADE-182&quot; title=&quot;ServicesResourceTransformer incorrectly ignores given Relocators&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHADE-182&quot;&gt;&lt;del&gt;MSHADE-182&lt;/del&gt;&lt;/a&gt; Service file should be relocated.&lt;/p&gt;

&lt;p&gt;    Fixes issue when service file content is relocated, but file itself didn&apos;t.&lt;br/&gt;
    Patch content provided by some person in jira ticket.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15095231" author="kostyasha" created="Tue, 12 Jan 2016 23:43:05 +0000"  >&lt;p&gt;Manually picked attached patch (realisation is the same) plus updated java test. IT duplicates it, but more tests better than one &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
Also i verified it on multimodule project with 2 shaded sub-modules and it works fine.&lt;br/&gt;
What is required to resolve this issue?&lt;/p&gt;</comment>
                            <comment id="15110821" author="kostyasha" created="Thu, 21 Jan 2016 15:57:32 +0000"  >&lt;p&gt;Kindly reminder.&lt;/p&gt;</comment>
                            <comment id="15136270" author="aheritier" created="Sun, 7 Feb 2016 14:31:48 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;http://svn.apache.org/r1728966&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1728966&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15136277" author="hudson" created="Sun, 7 Feb 2016 14:47:29 +0000"  >&lt;p&gt;SUCCESS: Integrated in maven-plugins #5059 (See &lt;a href=&quot;https://builds.apache.org/job/maven-plugins/5059/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/maven-plugins/5059/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/MSHADE-182&quot; title=&quot;ServicesResourceTransformer incorrectly ignores given Relocators&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHADE-182&quot;&gt;&lt;del&gt;MSHADE-182&lt;/del&gt;&lt;/a&gt; Service file should be relocated.&lt;br/&gt;
Submitted by: Trask Stalnaker , Kanstantsin Shautsou (aheritier: &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1728966&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1728966&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;maven-shade-plugin&lt;/li&gt;
	&lt;li&gt;maven-shade-plugin/pom.xml&lt;/li&gt;
	&lt;li&gt;maven-shade-plugin/src/it/&lt;a href=&quot;https://issues.apache.org/jira/browse/MSHADE-182&quot; title=&quot;ServicesResourceTransformer incorrectly ignores given Relocators&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHADE-182&quot;&gt;&lt;del&gt;MSHADE-182&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;maven-shade-plugin/src/it/&lt;a href=&quot;https://issues.apache.org/jira/browse/MSHADE-182&quot; title=&quot;ServicesResourceTransformer incorrectly ignores given Relocators&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHADE-182&quot;&gt;&lt;del&gt;MSHADE-182&lt;/del&gt;&lt;/a&gt;/pom.xml&lt;/li&gt;
	&lt;li&gt;maven-shade-plugin/src/it/&lt;a href=&quot;https://issues.apache.org/jira/browse/MSHADE-182&quot; title=&quot;ServicesResourceTransformer incorrectly ignores given Relocators&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHADE-182&quot;&gt;&lt;del&gt;MSHADE-182&lt;/del&gt;&lt;/a&gt;/src&lt;/li&gt;
	&lt;li&gt;maven-shade-plugin/src/it/&lt;a href=&quot;https://issues.apache.org/jira/browse/MSHADE-182&quot; title=&quot;ServicesResourceTransformer incorrectly ignores given Relocators&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHADE-182&quot;&gt;&lt;del&gt;MSHADE-182&lt;/del&gt;&lt;/a&gt;/src/main&lt;/li&gt;
	&lt;li&gt;maven-shade-plugin/src/it/&lt;a href=&quot;https://issues.apache.org/jira/browse/MSHADE-182&quot; title=&quot;ServicesResourceTransformer incorrectly ignores given Relocators&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHADE-182&quot;&gt;&lt;del&gt;MSHADE-182&lt;/del&gt;&lt;/a&gt;/src/main/resources&lt;/li&gt;
	&lt;li&gt;maven-shade-plugin/src/it/&lt;a href=&quot;https://issues.apache.org/jira/browse/MSHADE-182&quot; title=&quot;ServicesResourceTransformer incorrectly ignores given Relocators&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHADE-182&quot;&gt;&lt;del&gt;MSHADE-182&lt;/del&gt;&lt;/a&gt;/src/main/resources/META-INF&lt;/li&gt;
	&lt;li&gt;maven-shade-plugin/src/it/&lt;a href=&quot;https://issues.apache.org/jira/browse/MSHADE-182&quot; title=&quot;ServicesResourceTransformer incorrectly ignores given Relocators&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHADE-182&quot;&gt;&lt;del&gt;MSHADE-182&lt;/del&gt;&lt;/a&gt;/src/main/resources/META-INF/services&lt;/li&gt;
	&lt;li&gt;maven-shade-plugin/src/it/&lt;a href=&quot;https://issues.apache.org/jira/browse/MSHADE-182&quot; title=&quot;ServicesResourceTransformer incorrectly ignores given Relocators&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHADE-182&quot;&gt;&lt;del&gt;MSHADE-182&lt;/del&gt;&lt;/a&gt;/src/main/resources/META-INF/services/relocateme.Service&lt;/li&gt;
	&lt;li&gt;maven-shade-plugin/src/it/&lt;a href=&quot;https://issues.apache.org/jira/browse/MSHADE-182&quot; title=&quot;ServicesResourceTransformer incorrectly ignores given Relocators&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHADE-182&quot;&gt;&lt;del&gt;MSHADE-182&lt;/del&gt;&lt;/a&gt;/verify.groovy&lt;/li&gt;
	&lt;li&gt;maven-shade-plugin/src/main/java/org/apache/maven/plugins/shade/resource/ServicesResourceTransformer.java&lt;/li&gt;
	&lt;li&gt;maven-shade-plugin/src/test/java/org/apache/maven/plugins/shade/resource/ServiceResourceTransformerTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15137356" author="githubbot" created="Mon, 8 Feb 2016 17:59:15 +0000"  >&lt;p&gt;Github user KostyaSha closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/maven-plugins/pull/79&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-plugins/pull/79&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15385287" author="sebastian.laskawiec@gmail.com" created="Wed, 20 Jul 2016 04:12:03 +0000"  >&lt;p&gt;Hi!&lt;/p&gt;

&lt;p&gt;It looks like this issue will be fixed in 3.0.0. Could you please tell me when 3.0.0 will be available? Or maybe there are any plans to backport it to 2.x.x series?&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Sebastian&lt;/p&gt;</comment>
                            <comment id="15401633" author="sebastian.laskawiec@gmail.com" created="Mon, 1 Aug 2016 07:19:08 +0000"  >&lt;p&gt;Any news?&lt;/p&gt;</comment>
                            <comment id="15410072" author="slowenthal" created="Fri, 5 Aug 2016 21:11:09 +0000"  >&lt;p&gt;I see the latest release is 2.4.3.  How can I grab a version of 3.0.0 with this fix?&lt;/p&gt;</comment>
                            <comment id="15635644" author="kenseb" created="Fri, 4 Nov 2016 08:24:31 +0000"  >&lt;p&gt;I am also is facing this issue. &lt;br/&gt;
Will you guys backport fix to 2.x.x series. ?&lt;br/&gt;
or How can i get latest version 3.0.0 ?&lt;/p&gt;</comment>
                            <comment id="15687186" author="priteshkp" created="Tue, 22 Nov 2016 16:32:17 +0000"  >&lt;p&gt;Ping &amp;#8211; any update on when 3.0.0 will be released or if this patch can be backported?&lt;/p&gt;</comment>
                            <comment id="15690115" author="torgeir@pobox.com" created="Wed, 23 Nov 2016 13:35:18 +0000"  >&lt;p&gt;You can reference the 3.0.0-SNAPSHOT version of the maven plugin if you include the snapshot maven pluginRepository with &lt;/p&gt;

&lt;p&gt;    &amp;lt;pluginRepositories&amp;gt;&lt;br/&gt;
        &amp;lt;pluginRepository&amp;gt;&lt;br/&gt;
            &amp;lt;id&amp;gt;org.apache&amp;lt;/id&amp;gt;&lt;br/&gt;
            &amp;lt;name&amp;gt;Apache snapshots&amp;lt;/name&amp;gt;&lt;br/&gt;
            &amp;lt;url&amp;gt;&lt;a href=&quot;http://repository.apache.org/content/repositories/snapshots&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://repository.apache.org/content/repositories/snapshots&lt;/a&gt;&amp;lt;/url&amp;gt;&lt;br/&gt;
            &amp;lt;snapshots&amp;gt;&lt;br/&gt;
                &amp;lt;enabled&amp;gt;true&amp;lt;/enabled&amp;gt;&lt;br/&gt;
            &amp;lt;/snapshots&amp;gt;&lt;br/&gt;
        &amp;lt;/pluginRepository&amp;gt;&lt;br/&gt;
    &amp;lt;/pluginRepositories&amp;gt;  &lt;/p&gt;</comment>
                            <comment id="17976296" author="JIRAUSER302100" created="Sat, 14 Jun 2025 18:12:46 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-shade-plugin/issues/556&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-shade-plugin#556&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12964782">MSHADE-221</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13017938">MSHADE-238</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13427285">SUREFIRE-2006</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12718976" name="MSHADE-182-test.patch" size="4272" author="" created="Sun, 23 Nov 2014 15:12:31 +0000"/>
                            <attachment id="12718938" name="MSHADE-182.patch" size="3280" author="" created="Tue, 18 Nov 2014 10:55:35 +0000"/>
                            <attachment id="12718963" name="MSHADE-182.patch" size="1608" author="" created="Tue, 11 Nov 2014 03:25:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            21 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2b2b3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>