<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:20:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MSHADE-420] Reproducible Builds timestamp issue in some cases</title>
                <link>https://issues.apache.org/jira/browse/MSHADE-420</link>
                <project id="12317921" key="MSHADE">Maven Shade Plugin (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;seen in Tika &lt;a href=&quot;https://github.com/jvm-repo-rebuild/reproducible-central/blob/master/content/org/apache/tika/tika-2.4.0.diffoscope&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jvm-repo-rebuild/reproducible-central/blob/master/content/org/apache/tika/tika-2.4.0.diffoscope&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;maven-shade-plugin 3.2.4 has an issue with timestamps in unexplained circumstances:&lt;br/&gt;
why does 21-Nov-20 20:25 from reference become 21-Nov-21 01:25 in rebuild?&lt;br/&gt;
why does 20-May-14 07:15 from reference become 20-May-14 11:15 in rebuild?&lt;br/&gt;
could be related to the timezone of the rebuilder?&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;21 / 44 target/reference/tika-parser-nlp-package-2.4.0.jar tika-parsers/tika-parsers-ml/tika-parser-nlp-package/target/tika-parser-nlp-package-2.4.0.jar
--- target/reference/tika-parser-nlp-package-2.4.0.jar
+++ tika-parsers/tika-parsers-ml/tika-parser-nlp-package/target/tika-parser-nlp-package-2.4.0.jar
&#9500;&#9472;&#9472; zipinfo {}
&#9474; @@ -9868,1231 +9868,1231 @@
&#9474;  -rw----     2.0 fat      932 bl defN 22-Apr-08 17:41 schemas/wsdl/xmime.xsd
&#9474;  -rw----     2.0 fat     5840 bl defN 22-Apr-08 17:41 schemas/wsdl/xml.xsd
&#9474; --rw----     2.0 fat        0 bl defN 21-Nov-20 20:25 META-INF/maven/com.fasterxml.woodstox/
&#9474; --rw----     2.0 fat        0 bl defN 21-Nov-20 20:25 META-INF/maven/com.fasterxml.woodstox/woodstox-core/
&#9474; --rw----     2.0 fat       70 bl defN 21-Nov-20 20:25 META-INF/maven/com.fasterxml.woodstox/woodstox-core/pom.properties
&#9474; --rw----     2.0 fat    15917 bl defN 21-Nov-20 20:25 META-INF/maven/com.fasterxml.woodstox/woodstox-core/pom.xml
...
&#9474; --rw----     2.0 fat      722 bl defN 20-May-14 07:15 org/codehaus/stax2/validation/XMLValidationSchema.class
&#9474; --rw----     2.0 fat     7795 bl defN 20-May-14 07:15 org/codehaus/stax2/validation/XMLValidationSchemaFactory.class
&#9474; --rw----     2.0 fat     1801 bl defN 20-May-14 07:15 org/codehaus/stax2/validation/XMLValidator.class
&#9474; +-rw----     2.0 fat        0 bl defN 21-Nov-21 01:25 META-INF/maven/com.fasterxml.woodstox/
&#9474; +-rw----     2.0 fat        0 bl defN 21-Nov-21 01:25 META-INF/maven/com.fasterxml.woodstox/woodstox-core/
&#9474; +-rw----     2.0 fat       70 bl defN 21-Nov-21 01:25 META-INF/maven/com.fasterxml.woodstox/woodstox-core/pom.properties
&#9474; +-rw----     2.0 fat    15917 bl defN 21-Nov-21 01:25 META-INF/maven/com.fasterxml.woodstox/woodstox-core/pom.xml
...
&#9474; +-rw----     2.0 fat      722 bl defN 20-May-14 11:15 org/codehaus/stax2/validation/XMLValidationSchema.class
&#9474; +-rw----     2.0 fat     7795 bl defN 20-May-14 11:15 org/codehaus/stax2/validation/XMLValidationSchemaFactory.class
&#9474; +-rw----     2.0 fat     1801 bl defN 20-May-14 11:15 org/codehaus/stax2/validation/XMLValidator.class
&#9474;  -rw----     2.0 fat        0 bl defN 21-Sep-14 14:41 META-INF/maven/org.apache.ws.xmlschema/
&#9474;  -rw----     2.0 fat        0 bl defN 21-Sep-14 14:41 META-INF/maven/org.apache.ws.xmlschema/xmlschema-core/
&#9474;  -rw----     2.0 fat      146 bl defN 21-Sep-14 14:41 META-INF/maven/org.apache.ws.xmlschema/xmlschema-core/pom.properties
&#9474;  -rw----     2.0 fat     6857 bl defN 21-Sep-14 14:41 META-INF/maven/org.apache.ws.xmlschema/xmlschema-core/pom.xml
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13443053">MSHADE-420</key>
            <summary>Reproducible Builds timestamp issue in some cases</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hboutemy">Herv&#233; Boutemy</assignee>
                                    <reporter username="hboutemy">Herv&#233; Boutemy</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 May 2022 06:13:41 +0000</created>
                <updated>Sat, 14 Jun 2025 18:12:25 +0000</updated>
                            <resolved>Wed, 31 Jan 2024 17:57:52 +0000</resolved>
                                    <version>3.2.4</version>
                                    <fixVersion>3.5.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17531599" author="michael-o" created="Wed, 4 May 2022 08:31:20 +0000"  >&lt;p&gt;I&apos;d like to point out that MSHADE uses Java&apos;s zip implementation while all other plugins use Maven Archiver. This makes a difference. I would expect that for consistency reasons that MSHADE will move to Maven Archiver as well at some point in time.&lt;/p&gt;</comment>
                            <comment id="17691544" author="nielsbasjes" created="Tue, 21 Feb 2023 12:01:55 +0000"  >&lt;p&gt;&lt;del&gt;Note that there is about 1 year between &lt;b&gt;21-Nov-20 20:25&lt;/b&gt; and &lt;b&gt;21-Nov-21 01:25&lt;/b&gt;.&lt;/del&gt;&lt;br/&gt;
&lt;del&gt;I have never seen a timezone do that.&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;Never mind; I got confused by the date format ... Sorry&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17695357" author="nielsbasjes" created="Wed, 1 Mar 2023 23:10:52 +0000"  >&lt;p&gt;I suspect that this shift is caused by the same rootcause as this problem which I reported today: &lt;a href=&quot;https://github.com/spring-projects/spring-boot/issues/34424&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/spring-projects/spring-boot/issues/34424&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Here the Apache commons compress receives a timestamp for a file that is to be placed in a zip file as an epoch (without timezone): a FileTime only holds the epoch.&lt;/p&gt;

&lt;p&gt;Then during the creation of the actual file in org.apache.commons.compress.archivers.zip.ZipArchiveOutputStream this epoch time is converted into a human readable form and then into bytes again using a Calendar that is retrieved as Calendar.getInstance();&lt;br/&gt;
&#160;&lt;br/&gt;
The effect is that the files do get the correct timestamp but it is offset by the Timezone of the build machine.&lt;br/&gt;
&#160;&lt;br/&gt;
I suspect this local timezone usage in this Zip implementation may very well be the rootcause behind this problem too.&lt;br/&gt;
&#160;&lt;br/&gt;
Perhaps you can try something like this (with the correct timezone) ?&lt;br/&gt;
&#160;&lt;br/&gt;
&#160; &#160; TZ=Europe/Amsterdam mvn clean verify ...&#160;&lt;br/&gt;
&#160;&lt;br/&gt;
or&#160;&lt;br/&gt;
&#160;&lt;br/&gt;
&#160; &#160; mvn -Duser.timezone=Europe/Amsterdam&#160; clean verify ...&#160;&lt;br/&gt;
&#160;&lt;/p&gt;</comment>
                            <comment id="17696035" author="hboutemy" created="Fri, 3 Mar 2023 06:38:31 +0000"  >&lt;p&gt;for most of the entries, this plugin has shown to not suffer from timezone issues: it is taken into account in &lt;a href=&quot;https://issues.apache.org/jira/browse/MSHADE-347&quot; title=&quot;Reproducible Builds: make entries in output jar files reproducible&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHADE-347&quot;&gt;&lt;del&gt;MSHADE-347&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
but clearly there is an edge case in undefined conditions where &quot;something happens&quot;, I don&apos;t know what (linked to timezone or not, I don&apos;t know: last edge case found was &lt;a href=&quot;https://issues.apache.org/jira/browse/MSHADE-352&quot; title=&quot;shaded jars are not reproducible when using transformer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHADE-352&quot;&gt;&lt;del&gt;MSHADE-352&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;happy to get help debugging...&lt;/p&gt;</comment>
                            <comment id="17696126" author="nielsbasjes" created="Fri, 3 Mar 2023 12:00:17 +0000"  >&lt;p&gt;Some basic investigation&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-bash&quot;&gt;
$ unzip -l m2/repository/com/fasterxml/woodstox/woodstox-core/6.2.7/woodstox-core-6.2.7.jar | fgrep com/ctc/wstx/api/WriterConfig.class
    16366 &#160;2021-11-21 02:25 &#160; com/ctc/wstx/api/WriterConfig.class
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-bash&quot;&gt;
$ unzip -l content/org/apache/tika/buildcache/tika/target/reference/tika-parser-nlp-package-2.4.0.jar | fgrep com/ctc/wstx/api/WriterConfig.class
    16366 &#160;2021-11-20 20:25 &#160; com/ctc/wstx/api/WriterConfig.class
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-bash&quot;&gt;
$ unzip -l content/org/apache/tika/buildcache/tika/tika-parsers/tika-parsers-ml/tika-parser-nlp-package/target/tika-parser-nlp-package-2.4.0.jar | fgrep com/ctc/wstx/api/WriterConfig.class
    16366 &#160;2021-11-21 01:25 &#160; com/ctc/wstx/api/WriterConfig.class
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I then used a shell in the rebuild docker image and only rebuilt this specific jar file.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-bash&quot;&gt;
$ mvn -Papache-release clean package -DskipTests -Dmaven.javadoc.skip -Dgpg.skip -Dossindex.skip &#160;-Duser.home=/var/maven/
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Check:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-bash&quot;&gt;
$ unzip -l content/org/apache/tika/buildcache/tika/tika-parsers/tika-parsers-ml/tika-parser-nlp-package/target/tika-parser-nlp-package-2.4.0.jar | fgrep com/ctc/wstx/api/WriterConfig.class
    16366 &#160;2021-11-21 01:25 &#160; com/ctc/wstx/api/WriterConfig.class
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Ok, still the same.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-bash&quot;&gt;
$ export TZ=America/New_York
$ mvn -Papache-release clean package -DskipTests -Dmaven.javadoc.skip -Dgpg.skip -Dossindex.skip &#160;-Duser.home=/var/maven/
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Check again:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-bash&quot;&gt;
    $ unzip -l content/org/apache/tika/buildcache/tika/tika-parsers/tika-parsers-ml/tika-parser-nlp-package/target/tika-parser-nlp-package-2.4.0.jar | fgrep com/ctc/wstx/api/WriterConfig.class
&#160; &#160;     16366 &#160;2021-11-20 20:25 &#160; com/ctc/wstx/api/WriterConfig.class
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Ok, looks good.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-bash&quot;&gt;
$ diffoscope content/org/apache/tika/buildcache/tika/target/reference/tika-parser-nlp-package-2.4.0.jar content/org/apache/tika/buildcache/tika/tika-parsers/tika-parsers-ml/tika-parser-nlp-package/target/tika-parser-nlp-package-2.4.0.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and no output !&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-bash&quot;&gt;
$ md5sum content/org/apache/tika/buildcache/tika/target/reference/tika-parser-nlp-package-2.4.0.jar content/org/apache/tika/buildcache/tika/tika-parsers/tika-parsers-ml/tika-parser-nlp-package/target/tika-parser-nlp-package-2.4.0.jar
5840fe7dbbbfb1b2ebb5973733621955  content/org/apache/tika/buildcache/tika/target/reference/tika-parser-nlp-package-2.4.0.jar
5840fe7dbbbfb1b2ebb5973733621955  content/org/apache/tika/buildcache/tika/tika-parsers/tika-parsers-ml/tika-parser-nlp-package/target/tika-parser-nlp-package-2.4.0.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So using &lt;tt&gt;export TZ=America/New_York&lt;/tt&gt; this specific file is fully reproducible.&lt;/p&gt;

&lt;p&gt;The docker image at hand is configured to having UTC as the timezone.&lt;/p&gt;

&lt;p&gt;My current assessment is tika has 2 problems I see right now:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;It must explicitly be reproduced under &lt;tt&gt;export TZ=America/New_York&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;The used bundle plugin does not guarantee ordering of the Exports&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Most importantly: I say this is not a maven-shade-plugin problem !&lt;/p&gt;
</comment>
                            <comment id="17696128" author="nielsbasjes" created="Fri, 3 Mar 2023 12:04:03 +0000"  >&lt;p&gt;For reference: &lt;br/&gt;
I added &lt;tt&gt;-Duser.timezone=UTC&lt;/tt&gt;  to the &lt;tt&gt;.mvn/jvm.config&lt;/tt&gt; of my own project to ensure this point to be reproducible.&lt;br/&gt;
&lt;a href=&quot;https://github.com/nielsbasjes/yauaa/blob/main/.mvn/jvm.config&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/nielsbasjes/yauaa/blob/main/.mvn/jvm.config&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17696196" author="nielsbasjes" created="Fri, 3 Mar 2023 15:22:19 +0000"  >&lt;p&gt;As a test:&lt;br/&gt;
I added .mvn/jvm.config to the source tree of tika&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ cat content/org/apache/tika/buildcache/tika/.mvn/jvm.config 
-Duser.timezone=America/New_York
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I then did a rebuild on that and the full list of changes:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;2 files showed a umask difference:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-rw-rw-r--
-rw-r--r--
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; &lt;/li&gt;
	&lt;li&gt;~ 20 files there was an ordering difference in the Export-Package: in their META-INF/MANIFEST.MF&lt;/li&gt;
	&lt;li&gt;buildcache/tika/tika-batch/target/tika-batch-2.4.0-tests.jar showed a difference about a  &quot;Filename:&#183;test-output/&quot;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;All timestamp related differences were gone.&lt;/p&gt;</comment>
                            <comment id="17696467" author="hboutemy" created="Sat, 4 Mar 2023 17:23:41 +0000"  >&lt;blockquote&gt;&lt;p&gt;Most importantly: I say this is not a maven-shade-plugin problem !&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I tend to half agree: maven-shade-plugin has been coded to not be sensitive to timezone in general, but here, we have in a few entries that are sensitive.&lt;/p&gt;

&lt;p&gt;You&apos;re right: we can force the rebuilder to set his timezone and he&apos;ll get the same result as the reference build, then we cannot really conclude that this lead to non-reproducible build&lt;/p&gt;

&lt;p&gt;But it would be better to understand why these few entries are timezone sensitive, and make them as every other one: non-timezone sensitive&lt;/p&gt;

&lt;p&gt;I just checked: net.java.dev.jna:jna:jar:5.13.0 is one small jar that contains both non-timezone sensitive and timezone sensitive content with maven-shade-plugin&lt;br/&gt;
let&apos;s dig into it and find what makes the difference between the jar entries...&lt;/p&gt;</comment>
                            <comment id="17696474" author="hboutemy" created="Sat, 4 Mar 2023 18:04:02 +0000"  >&lt;p&gt;IT created &lt;a href=&quot;https://github.com/apache/maven-shade-plugin/pull/179&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-shade-plugin/pull/179&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17696476" author="hboutemy" created="Sat, 4 Mar 2023 18:40:23 +0000"  >&lt;p&gt;digging into the case: it seems the issue comes from entries that are stored in original jar file not with basic xdostime but with mtime from extra field data: shade plugin gets the extra field then stores as xdostime, where the timezone shift is added...&lt;/p&gt;

&lt;p&gt;see getTime() vs setTime() in &lt;a href=&quot;https://github.com/JetBrains/jdk8u_jdk/blob/master/src/share/classes/java/util/zip/ZipEntry.java#L146&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/JetBrains/jdk8u_jdk/blob/master/src/share/classes/java/util/zip/ZipEntry.java#L146&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;it seems we&apos;ll need to reuse original ZipEntry to benefit from its full configuration instead of creating a new ZipEntry where we explicitely set the time...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/maven-shade-plugin/blob/bd4759be25fc62441536033aa8ac335a9bbfddb8/src/main/java/org/apache/maven/plugins/shade/DefaultShader.java#L320&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-shade-plugin/blob/bd4759be25fc62441536033aa8ac335a9bbfddb8/src/main/java/org/apache/maven/plugins/shade/DefaultShader.java#L320&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;and given JDK ZipEntry can&apos;t change the entry name, we&apos;ll need to switch to commons-compress ZipArchiveEntry &lt;a href=&quot;https://commons.apache.org/proper/commons-compress/apidocs/org/apache/commons/compress/archivers/zip/ZipArchiveEntry.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://commons.apache.org/proper/commons-compress/apidocs/org/apache/commons/compress/archivers/zip/ZipArchiveEntry.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17696561" author="michael-o" created="Sun, 5 Mar 2023 11:05:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hboutemy&quot; class=&quot;user-hover&quot; rel=&quot;hboutemy&quot;&gt;hboutemy&lt;/a&gt;, so should we remove the entry from Maven Artifact Plugin?&lt;/p&gt;</comment>
                            <comment id="17696567" author="hboutemy" created="Sun, 5 Mar 2023 13:37:56 +0000"  >&lt;p&gt;it seems we can fix m-shade-p...&lt;/p&gt;</comment>
                            <comment id="17798461" author="hboutemy" created="Tue, 19 Dec 2023 07:17:34 +0000"  >&lt;p&gt;see same issue seen from moditect &lt;a href=&quot;https://github.com/moditect/moditect/issues/222&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/moditect/moditect/issues/222&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17808989" author="githubbot" created="Sun, 21 Jan 2024 01:26:08 +0000"  >&lt;p&gt;hboutemy commented on code in PR #179:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-shade-plugin/pull/179#discussion_r1460700608&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-shade-plugin/pull/179#discussion_r1460700608&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
src/it/projects/&lt;a href=&quot;https://issues.apache.org/jira/browse/MSHADE-420&quot; title=&quot;Reproducible Builds timestamp issue in some cases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHADE-420&quot;&gt;&lt;del&gt;MSHADE-420&lt;/del&gt;&lt;/a&gt;/invoker.properties:&lt;br/&gt;
##########&lt;br/&gt;
@@ -0,0 +1,19 @@&lt;br/&gt;
+# Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+# or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+# distributed with this work for additional information&lt;br/&gt;
+# regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+# to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+# &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+# with the License.  You may obtain a copy of the License at&lt;br/&gt;
+# &lt;br/&gt;
+#   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+# &lt;br/&gt;
+# Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+# software distributed under the License is distributed on an&lt;br/&gt;
+# &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+# KIND, either express or implied.  See the License for the&lt;br/&gt;
+# specific language governing permissions and limitations&lt;br/&gt;
+# under the License.&lt;br/&gt;
+&lt;br/&gt;
+invoker.goals.1 = clean package -Duser.timezone=UTC -DfinalName=UTC&lt;br/&gt;
+invoker.goals.2 = package -Duser.timezone=Japan/Tokyo -DfinalName=Tokyo&lt;/p&gt;

&lt;p&gt;Review Comment:&lt;br/&gt;
   good catch, improvement done&lt;/p&gt;


</comment>
                            <comment id="17809135" author="githubbot" created="Sun, 21 Jan 2024 16:26:51 +0000"  >&lt;p&gt;hboutemy commented on PR #179:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-shade-plugin/pull/179#issuecomment-1902686611&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-shade-plugin/pull/179#issuecomment-1902686611&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   @michael-o @slawekjaranowski based on latest enhancement in the IT, it seems there is an inconsistency in ZipEntry:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if it&apos;s basic xdos time, the time is calculated against current TZ&lt;/li&gt;
	&lt;li&gt;but if it&apos;s mtime from extra fields, the time is not calculated against TZ&lt;br/&gt;
   given setTime always expects a time against current TZ, this is what gives the current difference&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   the problem is that i don&apos;t see how to workaround...&lt;br/&gt;
   any idea?&lt;/p&gt;

</comment>
                            <comment id="17809142" author="githubbot" created="Sun, 21 Jan 2024 16:55:32 +0000"  >&lt;p&gt;hboutemy commented on PR #179:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-shade-plugin/pull/179#issuecomment-1902694587&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-shade-plugin/pull/179#issuecomment-1902694587&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   finally, I found a workaround in 079560e (that still needs to be enhanced, but at least, it proves the concept)&lt;br/&gt;
   review appreciated&lt;/p&gt;

</comment>
                            <comment id="17809618" author="githubbot" created="Mon, 22 Jan 2024 19:42:06 +0000"  >&lt;p&gt;michael-o commented on code in PR #179:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-shade-plugin/pull/179#discussion_r1462324017&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-shade-plugin/pull/179#discussion_r1462324017&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
src/it/projects/&lt;a href=&quot;https://issues.apache.org/jira/browse/MSHADE-420&quot; title=&quot;Reproducible Builds timestamp issue in some cases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHADE-420&quot;&gt;&lt;del&gt;MSHADE-420&lt;/del&gt;&lt;/a&gt;/invoker.properties:&lt;br/&gt;
##########&lt;br/&gt;
@@ -0,0 +1,25 @@&lt;br/&gt;
+# Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+# or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+# distributed with this work for additional information&lt;br/&gt;
+# regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+# to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+# &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+# with the License.  You may obtain a copy of the License at&lt;br/&gt;
+# &lt;br/&gt;
+#   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+# &lt;br/&gt;
+# Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+# software distributed under the License is distributed on an&lt;br/&gt;
+# &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+# KIND, either express or implied.  See the License for the&lt;br/&gt;
+# specific language governing permissions and limitations&lt;br/&gt;
+# under the License.&lt;br/&gt;
+&lt;br/&gt;
+invoker.goals.1 = clean package -DfinalName=current-OS dependency:copy-dependencies&lt;br/&gt;
+&lt;br/&gt;
+invoker.mavenOpts.2=-Duser.timezone=UTC&lt;/p&gt;

&lt;p&gt;Review Comment:&lt;br/&gt;
   Use canonical name `Etc/UTC`&lt;/p&gt;



&lt;p&gt;##########&lt;br/&gt;
src/it/projects/&lt;a href=&quot;https://issues.apache.org/jira/browse/MSHADE-420&quot; title=&quot;Reproducible Builds timestamp issue in some cases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHADE-420&quot;&gt;&lt;del&gt;MSHADE-420&lt;/del&gt;&lt;/a&gt;/verify.groovy:&lt;br/&gt;
##########&lt;br/&gt;
@@ -0,0 +1,59 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied.  See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+import java.security.MessageDigest&lt;br/&gt;
+import java.util.jar.JarFile&lt;br/&gt;
+&lt;br/&gt;
+String describeEntry(JarFile jar, String name, long time) {&lt;br/&gt;
+    def entry = jar.getEntry(name)&lt;br/&gt;
+    return String.format(&quot;  - %-47s: time = &quot;, name) + entry.getTime() + &quot;, lastModified = &quot; + entry.getLastModifiedTime()\&lt;/p&gt;

&lt;p&gt;Review Comment:&lt;br/&gt;
   Why don&apos;t you use `String#format()` throughout?&lt;/p&gt;



&lt;p&gt;##########&lt;br/&gt;
src/it/projects/&lt;a href=&quot;https://issues.apache.org/jira/browse/MSHADE-420&quot; title=&quot;Reproducible Builds timestamp issue in some cases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHADE-420&quot;&gt;&lt;del&gt;MSHADE-420&lt;/del&gt;&lt;/a&gt;/zipdetails.txt:&lt;br/&gt;
##########&lt;br/&gt;
@@ -0,0 +1,215 @@&lt;br/&gt;
+# Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+# or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+# distributed with this work for additional information&lt;br/&gt;
+# regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+# to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+# &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+# with the License.  You may obtain a copy of the License at&lt;br/&gt;
+#&lt;br/&gt;
+#   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+#&lt;br/&gt;
+# Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+# software distributed under the License is distributed on an&lt;br/&gt;
+# &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+# KIND, either express or implied.  See the License for the&lt;br/&gt;
+# specific language governing permissions and limitations&lt;br/&gt;
+# under the License.&lt;br/&gt;
+&lt;br/&gt;
+# extract of zipdetails Linux tool output on target/dependency/jna-5.13.0.jar&lt;/p&gt;

&lt;p&gt;Review Comment:&lt;br/&gt;
   That is not a Linux tool, that is a Perl package: &lt;a href=&quot;https://perldoc.perl.org/zipdetails&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://perldoc.perl.org/zipdetails&lt;/a&gt;&lt;/p&gt;



&lt;p&gt;##########&lt;br/&gt;
src/it/projects/&lt;a href=&quot;https://issues.apache.org/jira/browse/MSHADE-420&quot; title=&quot;Reproducible Builds timestamp issue in some cases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHADE-420&quot;&gt;&lt;del&gt;MSHADE-420&lt;/del&gt;&lt;/a&gt;/verify.groovy:&lt;br/&gt;
##########&lt;br/&gt;
@@ -0,0 +1,59 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied.  See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+import java.security.MessageDigest&lt;br/&gt;
+import java.util.jar.JarFile&lt;br/&gt;
+&lt;br/&gt;
+String describeEntry(JarFile jar, String name, long time) {&lt;br/&gt;
+    def entry = jar.getEntry(name)&lt;br/&gt;
+    return String.format(&quot;  - %-47s: time = &quot;, name) + entry.getTime() + &quot;, lastModified = &quot; + entry.getLastModifiedTime()\&lt;br/&gt;
+           + &quot; = diff &quot; + (long)((entry.getTime() / 1000L - time)/60L) + &quot; min., extra = &quot; + entry.getExtra()&lt;/p&gt;

&lt;p&gt;Review Comment:&lt;br/&gt;
   This will just print  `byte[]@sdfgas`. Maybe you need a base64 converter here?&lt;/p&gt;



&lt;p&gt;##########&lt;br/&gt;
src/it/projects/&lt;a href=&quot;https://issues.apache.org/jira/browse/MSHADE-420&quot; title=&quot;Reproducible Builds timestamp issue in some cases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHADE-420&quot;&gt;&lt;del&gt;MSHADE-420&lt;/del&gt;&lt;/a&gt;/verify.groovy:&lt;br/&gt;
##########&lt;br/&gt;
@@ -0,0 +1,59 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied.  See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+import java.security.MessageDigest&lt;br/&gt;
+import java.util.jar.JarFile&lt;br/&gt;
+&lt;br/&gt;
+String describeEntry(JarFile jar, String name, long time) &lt;/p&gt;
{
+    def entry = jar.getEntry(name)
+    return String.format(&quot;  - %-47s: time = &quot;, name) + entry.getTime() + &quot;, lastModified = &quot; + entry.getLastModifiedTime()\
+           + &quot; = diff &quot; + (long)((entry.getTime() / 1000L - time)/60L) + &quot; min., extra = &quot; + entry.getExtra()
+}
&lt;p&gt;+&lt;br/&gt;
+String describeJar(JarFile jar) &lt;/p&gt;
{
+    return describeEntry(jar, &quot;com/sun/jna/openbsd-x86-64/libjnidispatch.so&quot;, 1671223758L) + &apos;\n&apos;\
+         + describeEntry(jar, &quot;com/sun/jna/linux-loongarch64/libjnidispatch.so&quot;, 1671223358L)
+}
&lt;p&gt;+&lt;br/&gt;
+String describe(String name) &lt;/p&gt;
{
+    def file = new File(basedir, &quot;target/&quot; + name)
+    def jar = new JarFile(file)
+
+    println(name)
+    return &quot;sha1 = &quot; + MessageDigest.getInstance(&quot;SHA1&quot;).digest(file.bytes).encodeHex().toString()\
+         + &quot;\n&quot; + describeJar(jar)
+}
&lt;p&gt;+&lt;br/&gt;
+void describeTz(TimeZone tz) &lt;/p&gt;
{
+    println(&quot;TZ = &quot; + tz.getID() + &quot;, raw offset = &quot; + tz.getRawOffset() / 60000 + &quot; min., offset to current TZ = &quot; + (tz.getRawOffset() - TimeZone.getDefault().getRawOffset()) / 60000 + &quot; min.&quot;)
+}
&lt;p&gt;+&lt;br/&gt;
+describeTz(TimeZone.getDefault())&lt;br/&gt;
+println(describe(&quot;dependency/jna-5.13.0.jar&quot;))&lt;br/&gt;
+println(describe(&quot;current-OS.jar&quot;))&lt;br/&gt;
+def utcDescription = describe(&quot;UTC.jar&quot;)&lt;br/&gt;
+describeTz(TimeZone.getTimeZone(&quot;UTC&quot;))&lt;/p&gt;

&lt;p&gt;Review Comment:&lt;br/&gt;
   Same here&lt;/p&gt;


</comment>
                            <comment id="17809746" author="githubbot" created="Tue, 23 Jan 2024 05:47:27 +0000"  >&lt;p&gt;hboutemy commented on code in PR #179:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-shade-plugin/pull/179#discussion_r1462753156&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-shade-plugin/pull/179#discussion_r1462753156&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
src/it/projects/&lt;a href=&quot;https://issues.apache.org/jira/browse/MSHADE-420&quot; title=&quot;Reproducible Builds timestamp issue in some cases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHADE-420&quot;&gt;&lt;del&gt;MSHADE-420&lt;/del&gt;&lt;/a&gt;/invoker.properties:&lt;br/&gt;
##########&lt;br/&gt;
@@ -0,0 +1,25 @@&lt;br/&gt;
+# Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+# or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+# distributed with this work for additional information&lt;br/&gt;
+# regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+# to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+# &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+# with the License.  You may obtain a copy of the License at&lt;br/&gt;
+# &lt;br/&gt;
+#   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+# &lt;br/&gt;
+# Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+# software distributed under the License is distributed on an&lt;br/&gt;
+# &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+# KIND, either express or implied.  See the License for the&lt;br/&gt;
+# specific language governing permissions and limitations&lt;br/&gt;
+# under the License.&lt;br/&gt;
+&lt;br/&gt;
+invoker.goals.1 = clean package -DfinalName=current-OS dependency:copy-dependencies&lt;br/&gt;
+&lt;br/&gt;
+invoker.mavenOpts.2=-Duser.timezone=UTC&lt;/p&gt;

&lt;p&gt;Review Comment:&lt;br/&gt;
   done&lt;/p&gt;


</comment>
                            <comment id="17809747" author="githubbot" created="Tue, 23 Jan 2024 05:48:32 +0000"  >&lt;p&gt;hboutemy commented on code in PR #179:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-shade-plugin/pull/179#discussion_r1462753899&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-shade-plugin/pull/179#discussion_r1462753899&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
src/it/projects/&lt;a href=&quot;https://issues.apache.org/jira/browse/MSHADE-420&quot; title=&quot;Reproducible Builds timestamp issue in some cases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHADE-420&quot;&gt;&lt;del&gt;MSHADE-420&lt;/del&gt;&lt;/a&gt;/verify.groovy:&lt;br/&gt;
##########&lt;br/&gt;
@@ -0,0 +1,59 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied.  See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+import java.security.MessageDigest&lt;br/&gt;
+import java.util.jar.JarFile&lt;br/&gt;
+&lt;br/&gt;
+String describeEntry(JarFile jar, String name, long time) {&lt;br/&gt;
+    def entry = jar.getEntry(name)&lt;br/&gt;
+    return String.format(&quot;  - %-47s: time = &quot;, name) + entry.getTime() + &quot;, lastModified = &quot; + entry.getLastModifiedTime()\&lt;/p&gt;

&lt;p&gt;Review Comment:&lt;br/&gt;
   tested with more recent JDK and the output was ok &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
   going to a simple boolean, which is what really this display is about (not really value details)&lt;/p&gt;


</comment>
                            <comment id="17809748" author="githubbot" created="Tue, 23 Jan 2024 05:48:57 +0000"  >&lt;p&gt;hboutemy commented on code in PR #179:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-shade-plugin/pull/179#discussion_r1462754283&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-shade-plugin/pull/179#discussion_r1462754283&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
src/it/projects/&lt;a href=&quot;https://issues.apache.org/jira/browse/MSHADE-420&quot; title=&quot;Reproducible Builds timestamp issue in some cases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHADE-420&quot;&gt;&lt;del&gt;MSHADE-420&lt;/del&gt;&lt;/a&gt;/verify.groovy:&lt;br/&gt;
##########&lt;br/&gt;
@@ -0,0 +1,59 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied.  See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+import java.security.MessageDigest&lt;br/&gt;
+import java.util.jar.JarFile&lt;br/&gt;
+&lt;br/&gt;
+String describeEntry(JarFile jar, String name, long time) {&lt;br/&gt;
+    def entry = jar.getEntry(name)&lt;br/&gt;
+    return String.format(&quot;  - %-47s: time = &quot;, name) + entry.getTime() + &quot;, lastModified = &quot; + entry.getLastModifiedTime()\&lt;br/&gt;
+           + &quot; = diff &quot; + (long)((entry.getTime() / 1000L - time)/60L) + &quot; min., extra = &quot; + entry.getExtra()&lt;/p&gt;

&lt;p&gt;Review Comment:&lt;br/&gt;
   tested with more recent JDK and the output was ok &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
   going to a simple boolean, which is what really this display is about (not really value details)&lt;/p&gt;


</comment>
                            <comment id="17809749" author="githubbot" created="Tue, 23 Jan 2024 05:49:12 +0000"  >&lt;p&gt;hboutemy commented on code in PR #179:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-shade-plugin/pull/179#discussion_r1462753899&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-shade-plugin/pull/179#discussion_r1462753899&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
src/it/projects/&lt;a href=&quot;https://issues.apache.org/jira/browse/MSHADE-420&quot; title=&quot;Reproducible Builds timestamp issue in some cases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHADE-420&quot;&gt;&lt;del&gt;MSHADE-420&lt;/del&gt;&lt;/a&gt;/verify.groovy:&lt;br/&gt;
##########&lt;br/&gt;
@@ -0,0 +1,59 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied.  See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+import java.security.MessageDigest&lt;br/&gt;
+import java.util.jar.JarFile&lt;br/&gt;
+&lt;br/&gt;
+String describeEntry(JarFile jar, String name, long time) {&lt;br/&gt;
+    def entry = jar.getEntry(name)&lt;br/&gt;
+    return String.format(&quot;  - %-47s: time = &quot;, name) + entry.getTime() + &quot;, lastModified = &quot; + entry.getLastModifiedTime()\&lt;/p&gt;

&lt;p&gt;Review Comment:&lt;br/&gt;
   tested with more recent JDK and the output was ok &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
   going to a simple boolean, which is what really this display is about (not really value details)&lt;/p&gt;


</comment>
                            <comment id="17809751" author="githubbot" created="Tue, 23 Jan 2024 05:49:27 +0000"  >&lt;p&gt;hboutemy commented on code in PR #179:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-shade-plugin/pull/179#discussion_r1462754573&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-shade-plugin/pull/179#discussion_r1462754573&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
src/it/projects/&lt;a href=&quot;https://issues.apache.org/jira/browse/MSHADE-420&quot; title=&quot;Reproducible Builds timestamp issue in some cases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHADE-420&quot;&gt;&lt;del&gt;MSHADE-420&lt;/del&gt;&lt;/a&gt;/verify.groovy:&lt;br/&gt;
##########&lt;br/&gt;
@@ -0,0 +1,59 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *   &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied.  See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+import java.security.MessageDigest&lt;br/&gt;
+import java.util.jar.JarFile&lt;br/&gt;
+&lt;br/&gt;
+String describeEntry(JarFile jar, String name, long time) {&lt;br/&gt;
+    def entry = jar.getEntry(name)&lt;br/&gt;
+    return String.format(&quot;  - %-47s: time = &quot;, name) + entry.getTime() + &quot;, lastModified = &quot; + entry.getLastModifiedTime()\&lt;/p&gt;

&lt;p&gt;Review Comment:&lt;br/&gt;
   good question: done&lt;/p&gt;


</comment>
                            <comment id="17812826" author="githubbot" created="Wed, 31 Jan 2024 17:57:39 +0000"  >&lt;p&gt;hboutemy merged PR #179:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-shade-plugin/pull/179&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-shade-plugin/pull/179&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="17976200" author="JIRAUSER302100" created="Sat, 14 Jun 2025 18:12:25 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-shade-plugin/issues/435&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-shade-plugin#435&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13286474">MSHADE-352</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13282781">MSHADE-347</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13443054">MARTIFACT-32</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                                                <inwardlinks description="is superceded by">
                                        <issuelink>
            <issuekey id="13575712">MSHADE-471</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            21 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z121fc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>