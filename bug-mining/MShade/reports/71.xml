<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:20:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MSHADE-174] Unable to shade Java 8 jarfiles with static interface methods using minimizeJar</title>
                <link>https://issues.apache.org/jira/browse/MSHADE-174</link>
                <project id="12317921" key="MSHADE">Maven Shade Plugin (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;Maven shade does not appear to work with shading in Java 8 jarfiles that include static interface methods. A full log of a build with dependency resolution is attached (as well as an effective-pom and the stacktrace)&lt;/p&gt;

&lt;p&gt;The error header is:&lt;/p&gt;

&lt;div class=&quot;panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;panelContent&quot;&gt;
&lt;p&gt;Failed to execute goal org.apache.maven.plugins:maven-shade-plugin:2.3:shade (default) on project --: Error creating shaded jar: INVOKESPECIAL/STATIC on interfaces require ASM 5 -&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(Do note, I already am using ASM 5.0.2)&lt;/p&gt;

&lt;p&gt;I&apos;ve also created a public, reproducible version of this bug: &lt;a href=&quot;https://github.com/1Rogue/Maven-Shade-Bug&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/1Rogue/Maven-Shade-Bug&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You simply can clone that repo and attempt a &quot;mvn clean install&quot;, and it should fail accordingly.&lt;/p&gt;

&lt;p&gt;You can also view the stackoverflow question that sent me here: &lt;a href=&quot;http://stackoverflow.com/questions/24415677/unable-to-shade-jar-with-maven-invokespecial-static/24417179#24417179&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/questions/24415677/unable-to-shade-jar-with-maven-invokespecial-static/24417179#24417179&lt;/a&gt;&lt;/p&gt;</description>
                <environment>WIndows 7 (x64)&lt;br/&gt;
Netbeans 8.0 (also occurs on command line)&lt;br/&gt;
Maven 3.2.1&lt;br/&gt;
(Maven) ASM-5.0.2</environment>
        <key id="12808089">MSHADE-174</key>
            <summary>Unable to shade Java 8 jarfiles with static interface methods using minimizeJar</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="krosenvold">Kristian Rosenvold</assignee>
                                    <reporter username="rogue">Pedro Boado</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Jun 2014 21:58:52 +0000</created>
                <updated>Sat, 14 Jun 2025 18:12:47 +0000</updated>
                            <resolved>Sun, 8 Mar 2015 08:13:54 +0000</resolved>
                                    <version>2.2</version>
                    <version>2.3</version>
                                    <fixVersion>2.4</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14449211" author="bbouwens" created="Tue, 3 Mar 2015 14:55:49 +0000"  >&lt;p&gt;I just added a single &quot;IntStream.range(0, colLength).parallel().forEach(row -&amp;gt; &lt;/p&gt;
{ ... }
&lt;p&gt;);&quot;&lt;br/&gt;
line to my code, and now the shade plugin no longer works.&lt;/p&gt;

&lt;p&gt;In other words: one cannot use Java 8 features together with this plugin?&lt;br/&gt;
I&apos;m afraid I don&apos;t understand enough about this plugin. I do see &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;% mvn dependency:resolve-plugins
...
[INFO] Plugin Resolved: plexus-component-metadata-1.5.5.jar
[INFO]     Plugin Dependency Resolved: plexus-container-&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-1.5.5.jar
[INFO]     Plugin Dependency Resolved: plexus-component-annotations-1.5.5.jar
[INFO]     Plugin Dependency Resolved: plexus-utils-1.4.5.jar
[INFO]     Plugin Dependency Resolved: qdox-1.9.2.jar
[INFO]     Plugin Dependency Resolved: jdom-1.0.jar
[INFO]     Plugin Dependency Resolved: maven-plugin-api-2.0.9.jar
[INFO]     Plugin Dependency Resolved: maven-model-2.0.9.jar
[INFO]     Plugin Dependency Resolved: maven-project-2.0.9.jar
[INFO]     Plugin Dependency Resolved: plexus-cli-1.2.jar
[INFO]     Plugin Dependency Resolved: commons-cli-1.0.jar
[INFO]     Plugin Dependency Resolved: asm-3.1.jar
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;point to an old asm-version, but you already know this I suppose.&lt;/p&gt;</comment>
                            <comment id="14449199" author="bbouwens" created="Wed, 4 Mar 2015 09:45:59 +0000"  >&lt;p&gt;OK, I looked into this myself now.&lt;br/&gt;
The resolve-plugins list I posted above is pointless.&lt;/p&gt;

&lt;p&gt;I can see that the stacktrace actually indicates that indeed&lt;br/&gt;
an up-to-date asm-5.0.x is being used: older version don&apos;t have that message.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (api &amp;lt; Opcodes.ASM5) {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (itf != (opcode == Opcodes.INVOKEINTERFACE)) {
                &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException(
                        &lt;span class=&quot;code-quote&quot;&gt;&quot;INVOKESPECIAL/STATIC on interfaces require ASM 5&quot;&lt;/span&gt;);
            }
            visitMethodInsn(opcode, owner, name, desc);
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the &quot;api&quot; is the ASM API version implemented by this visitor. Set on construction.&lt;br/&gt;
So apparently the code is up-to-date, but not correctly called.&lt;/p&gt;</comment>
                            <comment id="14449219" author="krosenvold" created="Wed, 4 Mar 2015 10:34:28 +0000"  >&lt;p&gt;I did most of the asm5 ports which were necessary to make anything work /at all/ with java8, and I have been waiting for this issue to  pop up &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;The thing is, there are probably some new asm api&apos;s that need to be used to iterate the new jdk8 features, and these have not been implemented anywhere AFAIK. So if you add a static interface method, and reference a type &lt;b&gt;only&lt;/b&gt; from that method, the minimizeJar feature will not &quot;see&quot; that this type is in use.  Same problem might apply to lambdas (maybe)&lt;/p&gt;

&lt;p&gt;The solution is to patch stuff so that the new asm methods are called and the types are added as &quot;used&quot;. Patches are welcome and will be reviewed &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14449173" author="bbouwens" created="Wed, 4 Mar 2015 10:44:29 +0000"  >&lt;p&gt;It appears that &lt;a href=&quot;https://issues.apache.org/jira/browse/MSHADE-166&quot; title=&quot;maven-shade-plugin not compatible with Java 8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHADE-166&quot;&gt;&lt;del&gt;MSHADE-166&lt;/del&gt;&lt;/a&gt; fixed some interfacing issues, but not all.&lt;/p&gt;</comment>
                            <comment id="14449217" author="bbouwens" created="Wed, 4 Mar 2015 11:09:36 +0000"  >&lt;p&gt;I tried this patch, together with some other version changes on the maven-shade-plugin itself that probably don&apos;t matter, but it seems to work.&lt;br/&gt;
It looks almost too trivial, but I think it&apos;s worth a review.&lt;/p&gt;</comment>
                            <comment id="14449149" author="krosenvold" created="Wed, 4 Mar 2015 14:20:31 +0000"  >&lt;p&gt;Applied in e04f22b36268ec90019702f6df223acef954f27e on jdependency&lt;/p&gt;</comment>
                            <comment id="14449220" author="bbouwens" created="Wed, 4 Mar 2015 14:52:14 +0000"  >&lt;p&gt;I&apos;m afraid the commit message refers to &lt;a href=&quot;https://issues.apache.org/jira/browse/MSHADE-176&quot; title=&quot;Suppress warning output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSHADE-176&quot;&gt;&lt;del&gt;MSHADE-176&lt;/del&gt;&lt;/a&gt; though.&lt;br/&gt;
Additionally:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Index: pom.xml
===================================================================
--- pom.xml (revision 1664137)
+++ pom.xml (working copy)
@@ -138,7 +138,7 @@
     &amp;lt;dependency&amp;gt;
       &amp;lt;groupId&amp;gt;org.vafer&amp;lt;/groupId&amp;gt;
       &amp;lt;artifactId&amp;gt;jdependency&amp;lt;/artifactId&amp;gt;
-      &amp;lt;version&amp;gt;0.9&amp;lt;/version&amp;gt;
+      &amp;lt;version&amp;gt;1.0-SNAPSHOT&amp;lt;/version&amp;gt;
     &amp;lt;/dependency&amp;gt;
     &amp;lt;dependency&amp;gt;
       &amp;lt;groupId&amp;gt;org.codehaus.plexus&amp;lt;/groupId&amp;gt;

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;will build a working maven-shade-plugin version 2.4-SNAPSHOT with the patch.&lt;/p&gt;</comment>
                            <comment id="14449107" author="krosenvold" created="Wed, 4 Mar 2015 23:31:39 +0000"  >&lt;p&gt;Darn. Not any more. Did anyone see that &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; ? git reset --hard origin/master if you did &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;You do not really need to recompile shade to test this fix, you can just add the 1.0-SNAPSHOT dependency to the plugin definition to override the old version.&lt;/p&gt;</comment>
                            <comment id="14449216" author="bbouwens" created="Thu, 5 Mar 2015 06:08:32 +0000"  >&lt;p&gt;Indeed, I tried that, it also works with maven-shade-plugin version 2.3.&lt;/p&gt;</comment>
                            <comment id="14449201" author="krosenvold" created="Sun, 8 Mar 2015 08:13:54 +0000"  >&lt;p&gt;Fixed in r1664986&lt;/p&gt;</comment>
                            <comment id="17976297" author="JIRAUSER302100" created="Sat, 14 Jun 2025 18:12:47 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-shade-plugin/issues/529&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-shade-plugin#529&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310260">
                    <name>Related</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12808075">MSHADE-166</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12719020" name="diff.1805" size="1828" author="bbouwens" created="Wed, 4 Mar 2015 11:09:36 +0000"/>
                            <attachment id="12719027" name="effective-pom.txt" size="10833" author="rogue" created="Wed, 25 Jun 2014 21:58:52 +0000"/>
                            <attachment id="12718975" name="out.txt" size="9989" author="rogue" created="Wed, 25 Jun 2014 21:58:52 +0000"/>
                            <attachment id="12718927" name="stacktrace.txt" size="3582" author="rogue" created="Wed, 25 Jun 2014 21:58:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            21 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2b21j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>