diff --git a/src/it/MSHADE-247/pom.xml b/src/it/MSHADE-247/pom.xml
new file mode 100644
index 0000000..290042c
--- /dev/null
+++ b/src/it/MSHADE-247/pom.xml
@@ -0,0 +1,78 @@
+<?xml version="1.0" encoding="UTF-8"?>
+
+<!--
+Licensed to the Apache Software Foundation (ASF) under one
+or more contributor license agreements.  See the NOTICE file
+distributed with this work for additional information
+regarding copyright ownership.  The ASF licenses this file
+to you under the Apache License, Version 2.0 (the
+"License"); you may not use this file except in compliance
+with the License.  You may obtain a copy of the License at
+
+  http://www.apache.org/licenses/LICENSE-2.0
+
+Unless required by applicable law or agreed to in writing,
+software distributed under the License is distributed on an
+"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+KIND, either express or implied.  See the License for the
+specific language governing permissions and limitations
+under the License.
+-->
+
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>org.apache.maven.its.shade.csj</groupId>
+  <artifactId>mshade-247</artifactId>
+  <version>1.0</version>
+  <url>https://issues.apache.org/jira/browse/MSHADE-247</url>
+  <description>
+    Test that setting createSourcesJar to true does not fail the build when no sources Jar is available.
+  </description>
+  <repositories>
+    <repository>
+      <id>shade-it</id>
+      <url>file:///${basedir}/repo</url>
+      <releases>
+        <checksumPolicy>ignore</checksumPolicy>
+      </releases>
+      <snapshots>
+        <enabled>false</enabled>
+      </snapshots>
+    </repository>
+  </repositories>
+
+  <dependencies>
+    <dependency>
+      <groupId>org.apache.maven.its.shade.csj</groupId>
+      <artifactId>mshade-247-one</artifactId>
+      <version>0.1</version>
+    </dependency>
+    <dependency>
+      <groupId>org.apache.maven.its.shade.csj</groupId>
+      <artifactId>mshade-247-two</artifactId>
+      <version>0.1</version>
+    </dependency>
+  </dependencies>
+
+  <build>
+    <plugins>
+      <plugin>
+        <groupId>org.apache.maven.plugins</groupId>
+        <artifactId>maven-shade-plugin</artifactId>
+        <version>@project.version@</version>
+        <executions>
+          <execution>
+            <id>shade</id>
+            <phase>package</phase>
+            <goals>
+              <goal>shade</goal>
+            </goals>
+            <configuration>
+              <createSourcesJar>true</createSourcesJar>
+            </configuration>
+          </execution>
+        </executions>
+      </plugin>
+    </plugins>
+  </build>
+</project>
diff --git a/src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-one/0.1/mshade-247-one-0.1-sources.jar b/src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-one/0.1/mshade-247-one-0.1-sources.jar
new file mode 100644
index 0000000..7f69130
Binary files /dev/null and b/src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-one/0.1/mshade-247-one-0.1-sources.jar differ
diff --git a/src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-one/0.1/mshade-247-one-0.1.jar b/src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-one/0.1/mshade-247-one-0.1.jar
new file mode 100644
index 0000000..4c0c121
Binary files /dev/null and b/src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-one/0.1/mshade-247-one-0.1.jar differ
diff --git a/src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-one/0.1/mshade-247-one-0.1.pom b/src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-one/0.1/mshade-247-one-0.1.pom
new file mode 100644
index 0000000..d27927b
--- /dev/null
+++ b/src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-one/0.1/mshade-247-one-0.1.pom
@@ -0,0 +1,33 @@
+<?xml version="1.0" encoding="UTF-8"?>
+
+<!--
+Licensed to the Apache Software Foundation (ASF) under one
+or more contributor license agreements.  See the NOTICE file
+distributed with this work for additional information
+regarding copyright ownership.  The ASF licenses this file
+to you under the Apache License, Version 2.0 (the
+"License"); you may not use this file except in compliance
+with the License.  You may obtain a copy of the License at
+
+  http://www.apache.org/licenses/LICENSE-2.0
+
+Unless required by applicable law or agreed to in writing,
+software distributed under the License is distributed on an
+"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+KIND, either express or implied.  See the License for the
+specific language governing permissions and limitations
+under the License.
+-->
+
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>org.apache.maven.its.shade.csj</groupId>
+  <artifactId>mshade-247-one</artifactId>
+  <version>0.1</version>
+  <distributionManagement>
+    <repository>
+      <id>maven-core-it</id>
+      <url>file:///${basedir}/repo</url>
+    </repository>
+  </distributionManagement>
+</project>
diff --git a/src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-two/0.1/mshade-247-two-0.1.jar b/src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-two/0.1/mshade-247-two-0.1.jar
new file mode 100644
index 0000000..f3ffed7
Binary files /dev/null and b/src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-two/0.1/mshade-247-two-0.1.jar differ
diff --git a/src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-two/0.1/mshade-247-two-0.1.pom b/src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-two/0.1/mshade-247-two-0.1.pom
new file mode 100644
index 0000000..fbe5e3a
--- /dev/null
+++ b/src/it/MSHADE-247/repo/org/apache/maven/its/shade/csj/mshade-247-two/0.1/mshade-247-two-0.1.pom
@@ -0,0 +1,33 @@
+<?xml version="1.0" encoding="UTF-8"?>
+
+<!--
+Licensed to the Apache Software Foundation (ASF) under one
+or more contributor license agreements.  See the NOTICE file
+distributed with this work for additional information
+regarding copyright ownership.  The ASF licenses this file
+to you under the Apache License, Version 2.0 (the
+"License"); you may not use this file except in compliance
+with the License.  You may obtain a copy of the License at
+
+  http://www.apache.org/licenses/LICENSE-2.0
+
+Unless required by applicable law or agreed to in writing,
+software distributed under the License is distributed on an
+"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+KIND, either express or implied.  See the License for the
+specific language governing permissions and limitations
+under the License.
+-->
+
+<project>
+  <modelVersion>4.0.0</modelVersion>
+  <groupId>org.apache.maven.its.shade.csj</groupId>
+  <artifactId>mshade-247-two</artifactId>
+  <version>0.1</version>
+  <distributionManagement>
+    <repository>
+      <id>maven-core-it</id>
+      <url>file:///${basedir}/repo</url>
+    </repository>
+  </distributionManagement>
+</project>
diff --git a/src/main/java/org/apache/maven/plugins/shade/mojo/ShadeMojo.java b/src/main/java/org/apache/maven/plugins/shade/mojo/ShadeMojo.java
index 6c516e9..89b8f9b 100644
--- a/src/main/java/org/apache/maven/plugins/shade/mojo/ShadeMojo.java
+++ b/src/main/java/org/apache/maven/plugins/shade/mojo/ShadeMojo.java
@@ -716,7 +716,7 @@ public class ShadeMojo
         coordinate.setExtension( "jar" );
         coordinate.setClassifier( "sources" );
         
-        Artifact resolvedArtifact = null;
+        Artifact resolvedArtifact;
         try
         {
             resolvedArtifact =
@@ -725,6 +725,7 @@ public class ShadeMojo
         catch ( ArtifactResolverException e )
         {
             getLog().warn( "Could not get sources for " + artifact );
+            return null;
         }
 
         if ( resolvedArtifact.isResolved() )
