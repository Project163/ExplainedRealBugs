diff --git a/CHANGES.txt b/CHANGES.txt
index 0b5c1f023..dba86c9ad 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -193,6 +193,8 @@ PIG-3882: Multiquery off mode execution is not done in batch and very inefficien
  
 BUG FIXES
 
+PIG-4017: NPE thrown from JobControlCompiler.shipToHdfs (cheolsoo)
+
 PIG-3997: Issue on Pig docs: Testing and Diagnostics (zjffdu via cheolsoo)
 
 PIG-3998: Documentation fix: invalid page links, wrong Groovy udf example (lbendig via cheolsoo)
diff --git a/src/org/apache/pig/backend/hadoop/executionengine/mapReduceLayer/JobControlCompiler.java b/src/org/apache/pig/backend/hadoop/executionengine/mapReduceLayer/JobControlCompiler.java
index 0439f8fbd..37341ce94 100644
--- a/src/org/apache/pig/backend/hadoop/executionengine/mapReduceLayer/JobControlCompiler.java
+++ b/src/org/apache/pig/backend/hadoop/executionengine/mapReduceLayer/JobControlCompiler.java
@@ -1687,7 +1687,9 @@ public class JobControlCompiler{
         } finally {
             org.apache.commons.io.IOUtils.closeQuietly(is);
             // IOUtils should not close stream to HDFS quietly
-            os.close();
+            if (os != null) {
+                os.close();
+            }
         }
         return dst;
     }
