diff --git a/CHANGES.txt b/CHANGES.txt
index fc8a16654..b2b886057 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -267,7 +267,9 @@ OPTIMIZATIONS
 
 BUG FIXES
 
-PIG-2896:  Pig does not fail anymore if two macros are declared with the same name (julien)
+PIG-2844: ant makepom is misconfigured (julien)
+
+PIG-2896: Pig does not fail anymore if two macros are declared with the same name (julien)
 
 PIG-2848: TestBuiltInBagToTupleOrString fails now that mock.Storage enforces not overwriting output (julien)
 
diff --git a/build.xml b/build.xml
index d8ad5ca56..c00c188c5 100644
--- a/build.xml
+++ b/build.xml
@@ -1663,15 +1663,17 @@
      </target>
   
      <!-- this is here for curiosity, to see how well the makepom task works
-     Answer: it depends whether you want transitive dependencies excluded or not
+    makepom does not depend on the resolution as it translate the ivy file into a maven file
+    we map ivy configurations to maven scopes
      -->
-     <target name="makepom" depends="ivy-resolve">
+     <target name="makepom" depends="ivy-init">
         <ivy:makepom settingsRef="${ant.project.name}.ivy.settings"
            ivyfile="ivy.xml"
-           pomfile="${build.ivy.maven.dir}/generated.pom">
-        <ivy:mapping conf="default" scope="default"/>
-        <ivy:mapping conf="master" scope="master"/> 
-        <ivy:mapping conf="runtime" scope="runtime"/>
+           pomfile="${build.ivy.maven.dir}/generated.pom"
+           conf="compile,runtime,test">
+        <ivy:mapping conf="compile" scope="compile"/>
+        <ivy:mapping conf="test" scope="test"/>
+        <ivy:mapping conf="runtime" scope="run"/>
         </ivy:makepom>
      </target>
 
diff --git a/ivy.xml b/ivy.xml
index e4a4f0bfa..323f8322e 100644
--- a/ivy.xml
+++ b/ivy.xml
@@ -204,7 +204,7 @@
     <dependency org="org.antlr" name="antlr-runtime" rev="${antlr.version}" conf="compile->default"/>
     <dependency org="org.antlr" name="ST4" rev="${stringtemplate.version}" conf="compile->default"/>
     <dependency org="org.apache.zookeeper" name="zookeeper" rev="${zookeeper.version}" conf="compile->master"/>
-    <dependency org="org.jboss.netty" name="netty" rev="3.2.2.Final" conf="compile->master"/>
+    <!--dependency org="org.jboss.netty" name="netty" rev="3.2.2.Final" conf="compile->master"/-->
     <dependency org="dk.brics.automaton" name="automaton" rev="1.11-8" conf="compile->default"/>
 
     <dependency org="org.jruby" name="jruby-complete" rev="${jruby.version}" conf="compile->master"/>
