diff --git a/CHANGES.txt b/CHANGES.txt
index 27cf28bd6..dec069a95 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -24,6 +24,8 @@ INCOMPATIBLE CHANGES
 
 IMPROVEMENTS
 
+PIG-2311: STRSPLIT needs to allow bytearray arguments (xuting via olgan)
+
 PIG-2365: Current TOP implementation needlessly results in a null bag name (jcoveney via dvryaboy) 
 
 PIG-2151: Add annotation to specify output schema in Java UDFs (dvryaboy)
diff --git a/src/org/apache/pig/builtin/STRSPLIT.java b/src/org/apache/pig/builtin/STRSPLIT.java
index d23337679..170e7d025 100644
--- a/src/org/apache/pig/builtin/STRSPLIT.java
+++ b/src/org/apache/pig/builtin/STRSPLIT.java
@@ -20,12 +20,19 @@ package org.apache.pig.builtin;
 import java.io.IOException;
 
 import java.util.Arrays;
+import java.util.ArrayList;
+import java.util.List;
 import java.util.regex.PatternSyntaxException;
 
 import org.apache.pig.EvalFunc;
 import org.apache.pig.PigWarning;
 import org.apache.pig.data.Tuple;
 import org.apache.pig.data.TupleFactory;
+import org.apache.pig.impl.logicalLayer.schema.Schema;
+import org.apache.pig.FuncSpec;
+import org.apache.pig.data.DataType;
+import org.apache.pig.impl.logicalLayer.FrontendException;
+
 
 /**
  * Wrapper around Java's String.split<br>
@@ -70,4 +77,36 @@ public class STRSPLIT extends EvalFunc<Tuple> {
         // this only happens if the try block did not complete normally
         return null;
     }
+    
+    /*
+     * The outputSchema of STRSPLIT cannot be set as DataType.chararry otherwise in some cases,
+     * it will cause error. For example, when stringsize() is called.
+    */
+    @Override
+    public Schema outputSchema(Schema input) {
+        return new Schema(new Schema.FieldSchema(null, DataType.TUPLE)); 
+    }
+    
+    /* (non-Javadoc)
+     * @see org.apache.pig.EvalFunc#getArgToFuncMapping()
+     */
+    @Override
+    public List<FuncSpec> getArgToFuncMapping() throws FrontendException {
+        List<FuncSpec> funcList = new ArrayList<FuncSpec>();
+        Schema s = new Schema(new Schema.FieldSchema(null, DataType.CHARARRAY)); 
+        
+        Schema s1 = new Schema();
+        s1.add(new Schema.FieldSchema(null, DataType.CHARARRAY));
+        s1.add(new Schema.FieldSchema(null, DataType.CHARARRAY));
+        
+        Schema s2 = new Schema();
+        s2.add(new Schema.FieldSchema(null, DataType.CHARARRAY));
+        s2.add(new Schema.FieldSchema(null, DataType.CHARARRAY));
+        s2.add(new Schema.FieldSchema(null, DataType.INTEGER));
+        
+        funcList.add(new FuncSpec(this.getClass().getName(), s));
+        funcList.add(new FuncSpec(this.getClass().getName(), s1));
+        funcList.add(new FuncSpec(this.getClass().getName(), s2));
+        return funcList;
+    }
 }
diff --git a/test/e2e/pig/tests/nightly.conf b/test/e2e/pig/tests/nightly.conf
index 09d863ee6..91a7b5794 100644
--- a/test/e2e/pig/tests/nightly.conf
+++ b/test/e2e/pig/tests/nightly.conf
@@ -4024,6 +4024,23 @@ store E into ':OUTPATH:';\,
                                 store C into ':OUTPATH:';?,
                     }
                 ],
+            },{
+                'name' => 'STRSPLIT',
+                'tests' => [
+                    {
+                        # See PIG-2311
+                        'num' => 1,
+                        'pig' => q?a = load ':INPATH:/singlefile/studenttab10k' AS (a0);
+                        		b= filter a by NOT (a0 is null);
+                        		c= foreach b generate STRSPLIT(a0);
+                                store c into ':OUTPATH:';?,
+                        'verify_pig_script' => q?a = load ':INPATH:/singlefile/studenttab10k' AS (a0);
+                        		b= filter a by NOT (a0 is null);
+                        		b= foreach b generate (chararray)a0 as a0 ;
+                        		c= foreach b generate STRSPLIT(a0);
+                                store c into ':OUTPATH:';?,
+                    }
+                ],
             },
         ],
     },
