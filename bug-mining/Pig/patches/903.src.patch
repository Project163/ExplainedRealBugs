diff --git a/CHANGES.txt b/CHANGES.txt
index d48d77fdb..ac6924020 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -255,6 +255,8 @@ PIG-2228: support partial aggregation in map task (thejas)
 
 BUG FIXES
 
+PIG-2530: Reusing alias name in nested foreach causes incorrect results (daijy)
+
 PIG-2489: Input Path Globbing{} not working with PigStorageSchema or PigStorage('\t', '-schema') (daijy)
 
 PIG-2484: Fix several e2e test failures/aborts for 23 (daijy)
diff --git a/src/org/apache/pig/parser/LogicalPlanGenerator.g b/src/org/apache/pig/parser/LogicalPlanGenerator.g
index 0b0849ee4..59d286c9a 100644
--- a/src/org/apache/pig/parser/LogicalPlanGenerator.g
+++ b/src/org/apache/pig/parser/LogicalPlanGenerator.g
@@ -1151,6 +1151,7 @@ nested_command
  : ^( NESTED_CMD IDENTIFIER nested_op[$IDENTIFIER.text] )
    {
        $foreach_plan::operators.put( $IDENTIFIER.text, $nested_op.op );
+       $foreach_plan::exprPlans.remove( $IDENTIFIER.text );
    }
  | 
    ^( NESTED_CMD_ASSI IDENTIFIER expr[exprPlan] )
diff --git a/test/org/apache/pig/test/TestForEachNestedPlan.java b/test/org/apache/pig/test/TestForEachNestedPlan.java
index 19f1ca263..f4ac463c6 100644
--- a/test/org/apache/pig/test/TestForEachNestedPlan.java
+++ b/test/org/apache/pig/test/TestForEachNestedPlan.java
@@ -238,6 +238,52 @@ public class TestForEachNestedPlan {
             }
         }
     }
+
+    @Test
+    public void testInnerOrderByAliasReuse() 
+    throws IOException, ParserException {
+        String INPUT_FILE = "test-innerorderbyaliasreuse.txt";
+
+        PrintWriter w = new PrintWriter(new FileWriter(INPUT_FILE));
+        w.println("1\t4");
+        w.println("1\t3");
+        w.println("2\t3");
+        w.println("2\t4");
+        w.close();
+
+        try {
+            Util.copyFromLocalToCluster(cluster, INPUT_FILE, INPUT_FILE);
+        
+            pig.registerQuery("A = load '" + INPUT_FILE
+                    + "' as (v1:int, v2:int);");
+            pig.registerQuery("B = group A by v1;");
+            pig.registerQuery("C = foreach B { X = A; X = order X by v2 asc; " +
+            		"generate flatten(X); };");
+    
+            Iterator<Tuple> iter = pig.openIterator("C");
+
+            List<Tuple> expectedResults =
+                Util.getTuplesFromConstantTupleStrings(
+                        new String[] {"(1,3)", "(1,4)", "(2,3)", "(2,4)"});
+
+            int counter = 0;
+            while (iter.hasNext()) {
+                assertEquals(expectedResults.get(counter++).toString(),
+                        iter.next().toString());                
+            }
+    
+            assertEquals(expectedResults.size(), counter);
+        } finally{
+            new File(INPUT_FILE).delete();
+            try {
+                Util.deleteFile(cluster, INPUT_FILE);
+            } catch (IOException e) {
+                e.printStackTrace();
+                Assert.fail();
+            }
+        }
+    }
+    
     
     /***
      * For generating a sample dataset
