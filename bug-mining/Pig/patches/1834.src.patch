diff --git a/CHANGES.txt b/CHANGES.txt
index cfa4493a8..e46005471 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -119,6 +119,8 @@ PIG-4639: Add better parser for Apache HTTPD access log (nielsbasjes via daijy)
 
 BUG FIXES
 
+PIG-4888: Line number off when reporting syntax error inside a macro (knoguchi)
+
 PIG-3772: Syntax error when casting an inner schema of a bag and line break involved (ssvinarchukhorton via knoguchi)
 
 PIG-4892: removing /tmp/output before UT (daijy)
diff --git a/src/org/apache/pig/parser/PigMacro.java b/src/org/apache/pig/parser/PigMacro.java
index 9e75f8819..dc277ab2c 100644
--- a/src/org/apache/pig/parser/PigMacro.java
+++ b/src/org/apache/pig/parser/PigMacro.java
@@ -219,6 +219,7 @@ class PigMacro {
         try {
             result = parser.query();
         } catch (RecognitionException e) {
+            e.line += startLine -1;
             String msg = (fileName == null) ? parser.getErrorHeader(e)
                     : QueryParserUtils.generateErrorHeader(e, fileName);
             msg += " " + parser.getErrorMessage(e, parser.getTokenNames());
@@ -236,7 +237,7 @@ class PigMacro {
         if (!macroDefNodes.isEmpty()) {
             String fname = ((PigParserNode)ast).getFileName();
             String msg = getErrorMessage(fname, ast.getLine(),
-                    "Invalide macro definition", "macro '" + name
+                    "Invalid macro definition", "macro '" + name
                             + "' contains macro definition.\nmacro content: "
                             + body);
             throw new ParserException(msg);
@@ -273,6 +274,7 @@ class PigMacro {
         try {
             result2 = walker.query();
         } catch (RecognitionException e) {
+            e.line += startLine - 1;
             String msg = walker.getErrorHeader(e) + " "
                     + walker.getErrorMessage(e, walker.getTokenNames());
             String msg2 = getErrorMessage(file, line, "Failed to mask macro '"
diff --git a/test/org/apache/pig/test/TestMacroExpansion.java b/test/org/apache/pig/test/TestMacroExpansion.java
index 7d4475846..99c405ab9 100644
--- a/test/org/apache/pig/test/TestMacroExpansion.java
+++ b/test/org/apache/pig/test/TestMacroExpansion.java
@@ -1187,6 +1187,33 @@ public class TestMacroExpansion {
         
         validateFailure(sb.toString(), expectedErr, "at");
     }
+
+    @Test
+    public void lineNumberTest3() throws Throwable {
+        StringBuilder sb = new StringBuilder();
+        sb.append("/*\n" +
+        " * extra lines to offset the line number for the macro\n" +
+        " *\n" +
+        " *\n" +
+        " */\n" +
+        "\n" +
+        "\n" +
+        "define mymacro() returns void {\n" +
+        "A = load 'x' as ( u:int, v:long, w:bytearray);\n" +
+        "B = limit A 100;\n" +
+        "C = filter_typo B by 2 > 1;\n" +
+        "D = load 'y' as (d1, d2);\n" +
+        "E = join C by ( $0, $1 ), D by ( d1, d2 ) using 'replicated' parallel 16;\n" +
+        "F = store E into 'output';\n" +
+        "};\n"  +
+        "mymacro();\n"
+        );
+
+        String expectedErr =
+            "/myscript.pig, line 11, column 0>  Syntax error, unexpected symbol at or near 'C'";
+
+        validateFailure(sb.toString(), expectedErr, "/myscript.pig, line ");
+    }
     
     //see Pig-2184
     @Test
