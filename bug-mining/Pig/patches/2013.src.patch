diff --git a/CHANGES.txt b/CHANGES.txt
index 42d657e1c..a85b7fd08 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -116,6 +116,8 @@ OPTIMIZATIONS
  
 BUG FIXES
 
+PIG-5433: Fix test failures with TestHBaseStorage and htrace dependency (rohini)
+
 PIG-5430: TestTezGraceParallelism failing due to tez log change (knoguchi)
 
 PIG-5406: TestJoinLocal imports org.python.google.common.collect.Lists instead of org.google.common.collect.Lists (rohini)
diff --git a/ivy.xml b/ivy.xml
index 4bd127595..997c8c3ff 100644
--- a/ivy.xml
+++ b/ivy.xml
@@ -475,7 +475,7 @@
       <exclude org="asm" module="asm"/>
     </dependency>
 
-    <dependency org="org.apache.htrace" name="htrace-core4" rev="${htrace4.version}" conf="hbase2->master">
+    <dependency org="org.apache.htrace" name="htrace-core4" rev="${htrace4.version}" conf="hadoop2->master;hadoop3->master;hbase2->master">
       <artifact name="htrace-core4" type="jar"/>
     </dependency>
 
@@ -507,7 +507,6 @@
     <dependency org="com.lmax" name="disruptor" rev="3.3.6" conf="hbase2->master"/>
     <!-- End of HBase dependencies -->
 
-    <dependency org="org.htrace" name="htrace-core" rev="3.0.4" conf="hadoop2->master;hadoop3->master"/>
     <dependency org="org.apache.htrace" name="htrace-core" rev="${htrace.version}"
         conf="hadoop2->master;hadoop3->master;hbase1->master"/>
     <dependency org="org.fusesource.leveldbjni" name="leveldbjni-all" rev="${leveldbjni.version}"
diff --git a/ivy/libraries.properties b/ivy/libraries.properties
index d659498af..1cde6b7f5 100644
--- a/ivy/libraries.properties
+++ b/ivy/libraries.properties
@@ -88,7 +88,7 @@ snappy.version=0.2
 leveldbjni.version=1.8
 curator.version=2.6.0
 htrace.version=3.2.0-incubating
-htrace4.version=4.0.1-incubating
+htrace4.version=4.2.0-incubating
 commons-lang3.version=3.12.0
 scala-xml.version=1.0.5
 glassfish.el.version=3.0.1-b08
diff --git a/test/org/apache/pig/test/TestHBaseStorage.java b/test/org/apache/pig/test/TestHBaseStorage.java
index 8ac45b17a..e381c32dc 100644
--- a/test/org/apache/pig/test/TestHBaseStorage.java
+++ b/test/org/apache/pig/test/TestHBaseStorage.java
@@ -103,6 +103,7 @@ public class TestHBaseStorage {
         conf.set("hbase.localcluster.assign.random.ports", "true");
 
         util = new HBaseTestingUtility(conf);
+        System.setProperty("zookeeper.4lw.commands.whitelist", "stat");
         util.startMiniZKCluster();
         util.startMiniHBaseCluster(1, 1);
         connection = ConnectionFactory.createConnection(conf);
@@ -119,6 +120,7 @@ public class TestHBaseStorage {
             hbc.join();
         }
         util.shutdownMiniZKCluster();
+        System.clearProperty("zookeeper.4lw.commands.whitelist");
     }
 
 
