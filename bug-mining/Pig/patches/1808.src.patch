diff --git a/CHANGES.txt b/CHANGES.txt
index d09a9babe..55b5360d9 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -93,6 +93,8 @@ PIG-4639: Add better parser for Apache HTTPD access log (nielsbasjes via daijy)
 
 BUG FIXES
 
+PIG-4812: Register Groovy UDF with relative path does not work (daijy)
+
 PIG-4806: UDFContext can be reset in the middle during Tez input and output initialization (rohini)
 
 PIG-4808: PluckTuple overwrites regex if used more than once in the same script (eyal via daijy)
diff --git a/src/org/apache/pig/scripting/groovy/GroovyEvalFunc.java b/src/org/apache/pig/scripting/groovy/GroovyEvalFunc.java
index 4d85cf871..cff59dbd1 100644
--- a/src/org/apache/pig/scripting/groovy/GroovyEvalFunc.java
+++ b/src/org/apache/pig/scripting/groovy/GroovyEvalFunc.java
@@ -28,6 +28,7 @@ import java.lang.reflect.Constructor;
 import java.lang.reflect.InvocationTargetException;
 import java.lang.reflect.Method;
 import java.lang.reflect.Modifier;
+import java.net.URL;
 import java.util.Map;
 import java.util.concurrent.ConcurrentHashMap;
 
@@ -65,8 +66,21 @@ public class GroovyEvalFunc<T> extends EvalFunc<T> {
     Class c = scriptClasses.get(path);
 
     if (null == c) {
+      File file = new File(path);
+      URL resource = null;
+      if (!file.exists()) {
+          resource = ScriptEngine.class.getResource(path);
+          if (resource == null) {
+              resource = ScriptEngine.class.getResource(File.separator + path);
+          }
+          if (resource == null) {
+              throw new IOException("Cannot find " + path);
+          }
+      } else {
+          resource = file.toURL();
+      }
       try {
-        c = GroovyScriptEngine.getEngine().loadScriptByName(new File(path).toURI().toString());
+        c = GroovyScriptEngine.getEngine().loadScriptByName(resource.toString());
       } catch (ScriptException se) {
         throw new IOException(se);
       } catch (ResourceException re) {
diff --git a/test/e2e/pig/build.xml b/test/e2e/pig/build.xml
index f60b1b1bd..f7c38bacf 100644
--- a/test/e2e/pig/build.xml
+++ b/test/e2e/pig/build.xml
@@ -38,7 +38,9 @@
   <property name="udf.java.dir" value="${udf.dir}/java"/>
   <property name="udf.jar" value="${udf.java.dir}/testudf.jar"/>
   <property name="python.udf.dir" value="${udf.dir}/python"/>
+  <property name="js.udf.dir" value="${udf.dir}/js" />
   <property name="ruby.udf.dir" value="${udf.dir}/ruby" />
+  <property name="groovy.udf.dir" value="${udf.dir}/groovy" />
   <property name="cpython.udf.dir" value="${udf.dir}/cpython" />
   <property name="params.dir" value="${basedir}/paramfiles"/>
   <property name="e2e.lib.dir" value="${basedir}/lib"/>
@@ -168,7 +170,9 @@
     <mkdir dir="${tar.dir}/libexec/PigTest/test"/>
     <mkdir dir="${tar.dir}/libexec/PigTest/generate"/>
     <mkdir dir="${tar.dir}/libexec/python"/>
+    <mkdir dir="${tar.dir}/libexec/js"/>
     <mkdir dir="${tar.dir}/libexec/ruby"/>
+    <mkdir dir="${tar.dir}/libexec/groovy"/>
     <mkdir dir="${tar.dir}/libexec/cpython"/>
     <mkdir dir="${tar.dir}/lib"/>
     <mkdir dir="${tar.dir}/lib/java"/>
@@ -217,10 +221,18 @@
       <fileset dir="${python.udf.dir}"/>
     </copy>
 
+    <copy todir="${tar.dir}/libexec/js">
+      <fileset dir="${js.udf.dir}"/>
+    </copy>
+
     <copy todir="${tar.dir}/libexec/ruby">
       <fileset dir="${ruby.udf.dir}"/>
     </copy>
 
+    <copy todir="${tar.dir}/libexec/groovy">
+      <fileset dir="${groovy.udf.dir}"/>
+    </copy>
+
     <copy todir="${tar.dir}/libexec/cpython">
       <fileset dir="${cpython.udf.dir}"/>
     </copy>
diff --git a/test/e2e/pig/tests/nightly.conf b/test/e2e/pig/tests/nightly.conf
index 807ec0124..ad27ce6ca 100644
--- a/test/e2e/pig/tests/nightly.conf
+++ b/test/e2e/pig/tests/nightly.conf
@@ -4025,6 +4025,42 @@ b = foreach (group a all){
     a1=order a by name,age,gpa;
     generate FLATTEN(org.apache.pig.test.udf.evalfunc.AppendIndex(a1));
 }
+store b into ':OUTPATH:';\,
+                    },
+                ]
+            },
+            {
+            'name' => 'JavaScriptUDFs',
+            'tests' => [
+                    {
+                    # test double square
+                    'num' => 1,
+                    'pig' => q\
+register ':SCRIPTHOMEPATH:/js/scriptingudf.js' using javascript as myfuncs;
+a = load ':INPATH:/singlefile/studenttab10k' using PigStorage() as (name, age:int, gpa:double);
+b = foreach a generate myfuncs.square(gpa);
+store b into ':OUTPATH:';\,
+                    'verify_pig_script' => q\
+a = load ':INPATH:/singlefile/studenttab10k' using PigStorage() as (name, age:int, gpa:double);
+b = foreach a generate gpa * gpa;
+store b into ':OUTPATH:';\,
+                    },
+                ]
+            },
+            {
+            'name' => 'GroovyUDFs',
+            'tests' => [
+                    {
+                    # test integer square
+                    'num' => 1,
+                    'pig' => q\
+register ':SCRIPTHOMEPATH:/groovy/scriptingudf.groovy' using groovy as myfuncs;
+a = load ':INPATH:/singlefile/studenttab10k' using PigStorage() as (name, age:int, gpa:double);
+b = foreach a generate myfuncs.square(age);
+store b into ':OUTPATH:';\,
+                    'verify_pig_script' => q\
+a = load ':INPATH:/singlefile/studenttab10k' using PigStorage() as (name, age:int, gpa:double);
+b = foreach a generate age * age;
 store b into ':OUTPATH:';\,
                     },
                 ]
diff --git a/test/e2e/pig/udfs/groovy/scriptingudf.groovy b/test/e2e/pig/udfs/groovy/scriptingudf.groovy
new file mode 100644
index 000000000..6e488a1ac
--- /dev/null
+++ b/test/e2e/pig/udfs/groovy/scriptingudf.groovy
@@ -0,0 +1,10 @@
+import org.apache.pig.scripting.groovy.OutputSchemaFunction;
+class GroovyUDFs {
+    @OutputSchemaFunction('squareSchema')
+    public static square(x) {
+        return x * x;
+    }
+    public static squareSchema(input) {
+        return input;
+    }
+}
diff --git a/test/e2e/pig/udfs/js/scriptingudf.js b/test/e2e/pig/udfs/js/scriptingudf.js
new file mode 100644
index 000000000..8fa5c3293
--- /dev/null
+++ b/test/e2e/pig/udfs/js/scriptingudf.js
@@ -0,0 +1,4 @@
+square.outputSchema = "square:double";
+function square(x) {
+    return x * x
+}
