diff --git a/CHANGES.txt b/CHANGES.txt
index fa2aa806b..c3092017f 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -39,6 +39,9 @@ BUG FIXES
 
 PIG-1313: PigServer leaks memory over time (billgraham via daijy)
 
+PIG-1346: In unit tests Util.executeShellCommand relies on java commands being
+in the path and does not consider JAVA_HOME (pradeepkth)
+
 Release 0.7.0 - Unreleased
 
 INCOMPATIBLE CHANGES
diff --git a/test/org/apache/pig/test/TestLocal2.java b/test/org/apache/pig/test/TestLocal2.java
index 25ca3e78a..e440c5e08 100644
--- a/test/org/apache/pig/test/TestLocal2.java
+++ b/test/org/apache/pig/test/TestLocal2.java
@@ -235,7 +235,7 @@ public class TestLocal2 extends TestCase {
         try {
             pigFile.createNewFile();
             int status,status2;
-            status = Util.executeShellCommand("java -cp "+ 
+            status = Util.executeJavaCommand("java -cp "+ 
                     System.getProperty("java.class.path") + 
                     "  org.apache.pig.Main -x local " + pigFile.getAbsolutePath() );
 
@@ -253,7 +253,7 @@ public class TestLocal2 extends TestCase {
             PrintStream ps = new PrintStream(siteFile);
             ps.print(contents);
             ps.close();
-            status2 = Util.executeShellCommand("java -cp "+ 
+            status2 = Util.executeJavaCommand("java -cp "+ 
                     System.getProperty("java.class.path") + 
                     "  org.apache.pig.Main -x local " + pigFile.getAbsolutePath() );
             assertEquals( "Without a mapred-site.xml pig should just run", 0, status );
diff --git a/test/org/apache/pig/test/TestPigContext.java b/test/org/apache/pig/test/TestPigContext.java
index b940ea0ed..2de79759d 100644
--- a/test/org/apache/pig/test/TestPigContext.java
+++ b/test/org/apache/pig/test/TestPigContext.java
@@ -144,13 +144,13 @@ public class TestPigContext extends TestCase {
         
         // compile
         int status;
-        status = Util.executeShellCommand("javac -cp "+System.getProperty("java.class.path") + " " + udf1JavaSrc);
-        status = Util.executeShellCommand("javac -cp "+System.getProperty("java.class.path") + " " + udf2JavaSrc);
+        status = Util.executeJavaCommand("javac -cp "+System.getProperty("java.class.path") + " " + udf1JavaSrc);
+        status = Util.executeJavaCommand("javac -cp "+System.getProperty("java.class.path") + " " + udf2JavaSrc);
                 
         // generate jar file
         String jarName = "TestUDFJar.jar";
         String jarFile = tmpDir.getAbsolutePath() + FILE_SEPARATOR + jarName;
-        status = Util.executeShellCommand("jar -cf " + tmpDir.getAbsolutePath() + FILE_SEPARATOR + jarName + 
+        status = Util.executeJavaCommand("jar -cf " + tmpDir.getAbsolutePath() + FILE_SEPARATOR + jarName + 
                               " -C " + tmpDir.getAbsolutePath() + " " + "com");
         assertTrue(status==0);
         Properties properties = cluster.getProperties();
diff --git a/test/org/apache/pig/test/TestPigServer.java b/test/org/apache/pig/test/TestPigServer.java
index 73315df32..72786c93d 100644
--- a/test/org/apache/pig/test/TestPigServer.java
+++ b/test/org/apache/pig/test/TestPigServer.java
@@ -246,7 +246,7 @@ public class TestPigServer extends TestCase {
         
         // compile
         int status;
-        status = Util.executeShellCommand("javac " + dir + FILE_SEPARATOR + subDir +
+        status = Util.executeJavaCommand("javac " + dir + FILE_SEPARATOR + subDir +
                                FILE_SEPARATOR + className + ".java");
         assertTrue(status==0);
 
@@ -255,7 +255,7 @@ public class TestPigServer extends TestCase {
                   FILE_SEPARATOR + className + ".java")).delete();
 
         // generate jar file
-        status = Util.executeShellCommand("jar -cf " + dir + FILE_SEPARATOR + jarName + " " +
+        status = Util.executeJavaCommand("jar -cf " + dir + FILE_SEPARATOR + jarName + " " +
                               "-C " + dir + " " + subDir);
         assertTrue(status==0);
         
diff --git a/test/org/apache/pig/test/Util.java b/test/org/apache/pig/test/Util.java
index 18b864ad7..6831b1424 100644
--- a/test/org/apache/pig/test/Util.java
+++ b/test/org/apache/pig/test/Util.java
@@ -482,7 +482,12 @@ public class Util {
         pigServer.registerScript(f.getCanonicalPath());
     }
     
-    public static int executeShellCommand(String cmd) throws Exception {
+    public static int executeJavaCommand(String cmd) throws Exception {
+        String javaHome = System.getenv("JAVA_HOME");
+        if(javaHome != null) {
+            String fileSeparator = System.getProperty("file.separator");
+            cmd = javaHome + fileSeparator + "bin" + fileSeparator + cmd;
+        }
         Process cmdProc = Runtime.getRuntime().exec(cmd);
         
         cmdProc.waitFor();
