diff --git a/CHANGES.txt b/CHANGES.txt
index 3249777f0..f39d2297a 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -641,6 +641,8 @@ PIG-2228: support partial aggregation in map task (thejas)
 
 BUG FIXES
 
+PIG-2940: HBaseStorage store fails in secure cluster (rohini via daijy)
+
 PIG-2821: HBaseStorage should work with secure hbase (rohini via daijy)
 
 PIG-2859: Fix few e2e test failures (rohini via daijy)
diff --git a/src/org/apache/pig/impl/util/UDFContext.java b/src/org/apache/pig/impl/util/UDFContext.java
index 8a7be732e..99057fceb 100644
--- a/src/org/apache/pig/impl/util/UDFContext.java
+++ b/src/org/apache/pig/impl/util/UDFContext.java
@@ -211,7 +211,11 @@ public class UDFContext {
      * @return
      */
     public boolean isFrontend() {
-    	return (this.jconf == null || jconf.get("mapred.task.id") == null);
+        // mapred.task.id is for MR1
+        // mapreduce.job.application.attempt.id is for MR2
+        return (this.jconf == null
+                || (jconf.get("mapred.task.id") == null &&
+                    jconf.get("mapreduce.job.application.attempt.id") == null));
     }
     
     /**
