diff --git a/CHANGES.txt b/CHANGES.txt
index 7814ea342..c76a69dfc 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -258,6 +258,12 @@ declaration (azaroth via gates)
 PIG-2019: smoketest-jar target has to depend on pigunit-jar to guarantee
 inclusion of test classes (cos via gates)
 
+Release 0.9.2 - Unreleased
+
+BUG FIXES
+
+PIG-2320: Error: "projection with nothing to reference" (daijy)
+
 Release 0.9.1 - Unreleased
 
 IMPROVEMENTS
diff --git a/src/org/apache/pig/parser/LogicalPlanGenerator.g b/src/org/apache/pig/parser/LogicalPlanGenerator.g
index 5d37b5506..eec7f4c3c 100644
--- a/src/org/apache/pig/parser/LogicalPlanGenerator.g
+++ b/src/org/apache/pig/parser/LogicalPlanGenerator.g
@@ -454,7 +454,9 @@ scope GScope;
     $group_clause::innerFlags = new ArrayList<Boolean>();
     GROUPTYPE groupType = GROUPTYPE.REGULAR;
     SourceLocation loc = new SourceLocation( (PigParserNode)$group_clause.start );
+    int oldStatementIndex = $statement::inputIndex;
 }
+@after { $statement::inputIndex = oldStatementIndex; }
  : ^( GROUP group_item+ ( group_type { groupType = $group_type.type; ((LOCogroup)$GScope::currentOp).pinOption(LOCogroup.OPTION_GROUPTYPE); } )? partition_clause? )
    {
        $alias = builder.buildGroupOp( loc, (LOCogroup)$GScope::currentOp, $statement::alias, 
@@ -1015,6 +1017,10 @@ scope GScope;
     $join_clause::joinPlans = new MultiMap<Integer, LogicalExpressionPlan>();
     $join_clause::inputAliases = new ArrayList<String>();
     $join_clause::innerFlags = new ArrayList<Boolean>();
+    int oldStatementIndex = $statement::inputIndex;
+}
+@after {
+   $statement::inputIndex=oldStatementIndex;
 }
  : ^( JOIN join_sub_clause join_type? partition_clause? )
    {
diff --git a/test/org/apache/pig/parser/TestLogicalPlanGenerator.java b/test/org/apache/pig/parser/TestLogicalPlanGenerator.java
index 9172cab93..24cbc158b 100644
--- a/test/org/apache/pig/parser/TestLogicalPlanGenerator.java
+++ b/test/org/apache/pig/parser/TestLogicalPlanGenerator.java
@@ -372,5 +372,13 @@ public class TestLogicalPlanGenerator {
             "USING PigStorage ('\n');";
         generateLogicalPlan( query );
     }
+    
+    @Test
+    // See PIG-2320
+    public void testInlineOpInGroup() {
+        String query = "a = load 'data1' as (x:int); \n" +
+            "a_1 = filter (group a by x) by COUNT(a) > 0;";
+        generateLogicalPlan( query );
+    }
 
 }
