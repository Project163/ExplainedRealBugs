diff --git a/CHANGES.txt b/CHANGES.txt
index 664d2c0ca..8527c241a 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -89,6 +89,8 @@ PIG-2011: Speed up TestTypedMap.java (dvryaboy)
 
 BUG FIXES
 
+PIG-2171: TestScriptLanguage is broken on trunk (daijy and thejas)
+
 PIG-2172: Fix test failure for ant 1.8.x (daijy)
 
 PIG-2162: bin/pig should not modify user args (rangadi via thejas)
diff --git a/test/org/apache/pig/test/TestScriptLanguage.java b/test/org/apache/pig/test/TestScriptLanguage.java
index 6e1b91cc4..470ba6fcc 100644
--- a/test/org/apache/pig/test/TestScriptLanguage.java
+++ b/test/org/apache/pig/test/TestScriptLanguage.java
@@ -21,6 +21,7 @@ import static org.junit.Assert.assertFalse;
 import static org.junit.Assert.assertEquals;
 import static org.junit.Assert.assertTrue;
 
+import java.io.File;
 import java.util.HashMap;
 import java.util.Iterator;
 import java.util.List;
@@ -545,7 +546,7 @@ public class TestScriptLanguage {
                 "result = P.bind().runSingle()"
         };
 
-        Util.createLocalInputFile( "testScript.py", script);
+        File pyFile = Util.createLocalInputFile( "testScript.py", script);
         
         String[] args = { "-x", "local", "testScript.py"};
         PigStats stats = PigRunner.run(args, null);
@@ -554,10 +555,11 @@ public class TestScriptLanguage {
         assertTrue(stats.getReturnCode() == PigRunner.ReturnCode.PIG_EXCEPTION);
         
         String expected = "Python Error. Traceback (most recent call last):\n" +
-            "  File \"testScript.py\", line 7";
+            "  File \"" + pyFile.getAbsolutePath() + "\", line 7";
 
         String msg = stats.getErrorMessage();
-        assertEquals(expected, msg.substring(0, expected.length()));
+        Util.checkErrorMessageContainsExpected(msg, expected);
+        
     }
     
     @Test
diff --git a/test/org/apache/pig/test/Util.java b/test/org/apache/pig/test/Util.java
index 9428587fe..21d843100 100644
--- a/test/org/apache/pig/test/Util.java
+++ b/test/org/apache/pig/test/Util.java
@@ -504,13 +504,20 @@ public class Util {
      public static void checkMessageInException(FrontendException e,
              String expectedErr) {
          PigException pigEx = LogUtils.getPigException(e);
-         if(!pigEx.getMessage().contains(expectedErr)){
-             String msg = "Expected exception message matching '" 
-                 + expectedErr + "' but got '" + pigEx.getMessage() + "'" ;
-             fail(msg);
-         }
+         String message = pigEx.getMessage();
+         checkErrorMessageContainsExpected(message, expectedErr);
+        
      }
 
+     public static void checkErrorMessageContainsExpected(String message, String expectedMessage){
+         if(!message.contains(expectedMessage)){
+             String msg = "Expected error message containing '" 
+                 + expectedMessage + "' but got '" + message + "'" ;
+             fail(msg);
+         } 
+     }
+     
+     
     /**
 	 * Utility method to copy a file form local filesystem to the dfs on
 	 * the minicluster for testing in mapreduce mode
