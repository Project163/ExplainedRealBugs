diff --git a/CHANGES.txt b/CHANGES.txt
index bd367b213..ec6ca9b29 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -40,6 +40,8 @@ OPTIMIZATIONS
 
 BUG FIXES
 
+    PIG-888: Pig do not pass udf to the backend in some situation (daijy)
+
     PIG-728: All backend error messages must be logged to preserve the
     original error messages (sms)
 
diff --git a/src/org/apache/pig/backend/hadoop/executionengine/mapReduceLayer/MRCompiler.java b/src/org/apache/pig/backend/hadoop/executionengine/mapReduceLayer/MRCompiler.java
index 4023a1121..a30e28052 100644
--- a/src/org/apache/pig/backend/hadoop/executionengine/mapReduceLayer/MRCompiler.java
+++ b/src/org/apache/pig/backend/hadoop/executionengine/mapReduceLayer/MRCompiler.java
@@ -626,6 +626,11 @@ public class MRCompiler extends PhyPlanVisitor {
         for(MapReduceOper rmro : remLst){
             if(rmro.requestedParallelism > mergedMap.requestedParallelism)
                 mergedMap.requestedParallelism = rmro.requestedParallelism;
+            for (String udf:rmro.UDFs)
+            {
+                if (!mergedMap.UDFs.contains(udf))
+                    mergedMap.UDFs.add(udf);
+            }
             MRPlan.remove(rmro);
         }
         return ret;
diff --git a/src/org/apache/pig/backend/hadoop/executionengine/mapReduceLayer/SliceWrapper.java b/src/org/apache/pig/backend/hadoop/executionengine/mapReduceLayer/SliceWrapper.java
index 1da16b583..32d5d32dd 100644
--- a/src/org/apache/pig/backend/hadoop/executionengine/mapReduceLayer/SliceWrapper.java
+++ b/src/org/apache/pig/backend/hadoop/executionengine/mapReduceLayer/SliceWrapper.java
@@ -124,6 +124,7 @@ public class SliceWrapper implements InputSplit {
         // working dir to /user/<userid>
         if(pigContext.getExecType() == ExecType.MAPREDUCE)
             store.setActiveContainer(store.asContainer("/user/" + job.getUser()));
+        PigContext.setPackageImportList((ArrayList<String>)ObjectSerializer.deserialize(job.get("udf.import.list")));
         wrapped.init(store);
         
         job.set("map.target.ops", ObjectSerializer.serialize(targetOps));
diff --git a/test/org/apache/pig/test/TestMRCompiler.java b/test/org/apache/pig/test/TestMRCompiler.java
index ff08674d6..c651322b5 100644
--- a/test/org/apache/pig/test/TestMRCompiler.java
+++ b/test/org/apache/pig/test/TestMRCompiler.java
@@ -901,6 +901,22 @@ public class TestMRCompiler extends junit.framework.TestCase {
     }
 
 
+    @Test
+    public void testUDFInJoin() throws Exception {
+        planTester.buildPlan("a = load 'input1' using BinStorage();");
+        planTester.buildPlan("b = load 'input2';");
+        planTester.buildPlan("c = join a by $0, b by $0;");
+        LogicalPlan lp = planTester.buildPlan("store c into '/tmp';");
+        
+        PhysicalPlan pp = Util.buildPhysicalPlan(lp, pc);
+        MROperPlan mrPlan = Util.buildMRPlan(pp, pc);
+        MapReduceOper mrOper = mrPlan.getRoots().get(0);
+        
+        assertTrue(mrOper.UDFs.size()==2);
+        assertTrue(mrOper.UDFs.get(0).equals("BinStorage"));
+        assertTrue(mrOper.UDFs.get(1).equals("org.apache.pig.builtin.PigStorage"));
+    }
+    
     public static class WeirdComparator extends ComparisonFunc {
 
         @Override
