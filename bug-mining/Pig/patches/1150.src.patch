diff --git a/CHANGES.txt b/CHANGES.txt
index 4d01f0f8f..845567902 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -125,6 +125,8 @@ PIG-3013: BinInterSedes improve chararray sort performance (rohini)
 
 BUG FIXES
 
+PIG-3145: Parameters in core-site.xml and mapred-site.xml are not correctly substituted (cheolsoo)
+
 PIG-3135: HExecutionEngine should look for resources in user passed Properties (prkommireddi via cheolsoo)
 
 PIG-3200: MiniCluster should delete hadoop-site.xml on shutDown (prkommireddi via cheolsoo)
diff --git a/src/org/apache/pig/backend/hadoop/executionengine/HExecutionEngine.java b/src/org/apache/pig/backend/hadoop/executionengine/HExecutionEngine.java
index a633bbb43..bb1d071b5 100644
--- a/src/org/apache/pig/backend/hadoop/executionengine/HExecutionEngine.java
+++ b/src/org/apache/pig/backend/hadoop/executionengine/HExecutionEngine.java
@@ -174,20 +174,20 @@ public class HExecutionEngine {
             recomputeProperties(jc, properties);
         } else {
             // If we are running in local mode we dont read the hadoop conf file
+            properties.setProperty("mapreduce.framework.name", "local");
+            properties.setProperty(JOB_TRACKER_LOCATION, LOCAL );
+            properties.setProperty(FILE_SYSTEM_LOCATION, "file:///");
+            properties.setProperty(ALTERNATIVE_FILE_SYSTEM_LOCATION, "file:///");
+
             jc = new JobConf(false);
             jc.addResource("core-default.xml");
             jc.addResource("mapred-default.xml");
             jc.addResource("yarn-default.xml");
             recomputeProperties(jc, properties);
-            
-            properties.setProperty("mapreduce.framework.name", "local");
-            properties.setProperty(JOB_TRACKER_LOCATION, LOCAL );
-            properties.setProperty(FILE_SYSTEM_LOCATION, "file:///");
-            properties.setProperty(ALTERNATIVE_FILE_SYSTEM_LOCATION, "file:///");
         }
-        
-        cluster = properties.getProperty(JOB_TRACKER_LOCATION);
-        nameNode = properties.getProperty(FILE_SYSTEM_LOCATION);
+
+        cluster = jc.get(JOB_TRACKER_LOCATION);
+        nameNode = jc.get(FILE_SYSTEM_LOCATION);
         if (nameNode==null)
             nameNode = (String)pigContext.getProperties().get(ALTERNATIVE_FILE_SYSTEM_LOCATION);
 
