diff --git a/CHANGES.txt b/CHANGES.txt
index 6bd93069a..1b11bf8f1 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -90,6 +90,8 @@ PIG-3013: BinInterSedes improve chararray sort performance (rohini)
 
 BUG FIXES
 
+PIG-2266: Bug with input file joining optimization in Pig (jadler via cheolsoo)
+
 PIG-2645: PigSplit does not handle the case where SerializationFactory returns null (shami via gates)
 
 PIG-3031: Update Pig to use a newer version of joda-time (zjshen via cheolsoo)
diff --git a/src/org/apache/pig/backend/hadoop/executionengine/mapReduceLayer/MRCompiler.java b/src/org/apache/pig/backend/hadoop/executionengine/mapReduceLayer/MRCompiler.java
index 834e93283..eddffadd7 100644
--- a/src/org/apache/pig/backend/hadoop/executionengine/mapReduceLayer/MRCompiler.java
+++ b/src/org/apache/pig/backend/hadoop/executionengine/mapReduceLayer/MRCompiler.java
@@ -1267,6 +1267,7 @@ public class MRCompiler extends PhyPlanVisitor {
                             .instantiateFuncFromSpec(ld.getLFile()
                                     .getFuncSpec());
                             Job job = new Job(conf);
+                            loader.setUDFContextSignature(ld.getSignature());
                             loader.setLocation(location, job);
                             InputFormat inf = loader.getInputFormat();
                             List<InputSplit> splits = inf.getSplits(HadoopShims.cloneJobContext(job));
