<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:02:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PIG-4767] Partition filter not pushed down when filter clause references variable from another load path</title>
                <link>https://issues.apache.org/jira/browse/PIG-4767</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;To reproduce:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;test.pig&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;a = load &apos;a.txt&apos;;
a_group = group a all;
a_count = foreach a_group generate COUNT(a) as count;

b = load &apos;mytable&apos; using org.apache.hcatalog.pig.HCatLoader();
b = filter b by datepartition == &apos;2015-09-01-00&apos; and foo == a_count.count;

dump b;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above query ends up reading all the table partitions. If you remove the &lt;tt&gt;foo == a_count.count&lt;/tt&gt; clause or replace &lt;tt&gt;a_count.count&lt;/tt&gt; with a constant, then partition filtering happens properly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12926850">PIG-4767</key>
            <summary>Partition filter not pushed down when filter clause references variable from another load path</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knoguchi">Koji Noguchi</assignee>
                                    <reporter username="erwaman">Anthony Hsu</reporter>
                        <labels>
                    </labels>
                <created>Sun, 3 Jan 2016 23:47:05 +0000</created>
                <updated>Mon, 15 Sep 2025 11:29:02 +0000</updated>
                            <resolved>Thu, 13 Jul 2017 18:29:27 +0000</resolved>
                                    <version>0.15.0</version>
                                    <fixVersion>0.18.0</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15743116" author="knoguchi" created="Mon, 12 Dec 2016 20:54:33 +0000"  >&lt;p&gt;Taking a look.&lt;/p&gt;</comment>
                            <comment id="16067168" author="knoguchi" created="Wed, 28 Jun 2017 20:26:59 +0000"  >&lt;p&gt;Skipping of optimization with filter expression containing scalar was done at &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-1669&quot; title=&quot;PushUpFilter fail when filter condition contains scalar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-1669&quot;&gt;&lt;del&gt;PIG-1669&lt;/del&gt;&lt;/a&gt;.  However, I don&apos;t think we need to apply this to &lt;tt&gt;PartitionFilterOptimizer&lt;/tt&gt; and &lt;tt&gt;PredicatePushdownOptimizer&lt;/tt&gt; since &lt;tt&gt;FilterExtractor&lt;/tt&gt; that both optimizer depend on would keep the filter expression that contains &lt;tt&gt;ScalarExpression&lt;/tt&gt;. Original LOFilter will be preserved with updated filter expression containing this scalar.&lt;/p&gt;

&lt;p&gt;Reverted the changes in both optimizers and added a test for PartitionFilter with scalar.&lt;br/&gt;
(I looked at Predicate/Orc testing but didn&apos;t find an easy way to add this test.)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=daijy&quot; class=&quot;user-hover&quot; rel=&quot;daijy&quot;&gt;daijy&lt;/a&gt;, appreciate if you could take a look.&lt;/p&gt;</comment>
                            <comment id="16082502" author="erwaman" created="Tue, 11 Jul 2017 16:51:34 +0000"  >&lt;p&gt;Thanks for the patch, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knoguchi&quot; class=&quot;user-hover&quot; rel=&quot;knoguchi&quot;&gt;knoguchi&lt;/a&gt;! I tested it out and it solves my problem.&lt;/p&gt;</comment>
                            <comment id="16084758" author="daijy" created="Wed, 12 Jul 2017 21:41:17 +0000"  >&lt;p&gt;That&apos;s right, PartitionFilterOptimizer and PredicatePushdownOptimizer does not push filter up. The problem &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-1669&quot; title=&quot;PushUpFilter fail when filter condition contains scalar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-1669&quot;&gt;&lt;del&gt;PIG-1669&lt;/del&gt;&lt;/a&gt; try to solve does not exist. +1.&lt;/p&gt;</comment>
                            <comment id="16086166" author="knoguchi" created="Thu, 13 Jul 2017 18:29:27 +0000"  >&lt;p&gt;Thanks for the review Daniel! &lt;br/&gt;
Committed it to trunk.&lt;/p&gt;</comment>
                            <comment id="16086170" author="knoguchi" created="Thu, 13 Jul 2017 18:30:43 +0000"  >&lt;p&gt;Forgot to mention, Anthony, sorry for taking this long to fix this bug.  &lt;/p&gt;</comment>
                            <comment id="16087938" author="erwaman" created="Fri, 14 Jul 2017 19:59:16 +0000"  >&lt;p&gt;No problem, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knoguchi&quot; class=&quot;user-hover&quot; rel=&quot;knoguchi&quot;&gt;knoguchi&lt;/a&gt;. Thanks for the fix!&lt;/p&gt;</comment>
                            <comment id="16093482" author="knoguchi" created="Wed, 19 Jul 2017 17:40:27 +0000"  >&lt;p&gt;Can we push this to 0.17 branch?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12475894">PIG-1669</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12874951" name="pig-4767-v01.patch" size="5533" author="knoguchi" created="Wed, 28 Jun 2017 20:17:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2qqe7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>