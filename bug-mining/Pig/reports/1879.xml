<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:02:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PIG-5019] Pig generates tons of warnings for udf with enabled warnings aggregation</title>
                <link>https://issues.apache.org/jira/browse/PIG-5019</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;For data set containing 9 lines the aggregated warning message is displayed &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2016-09-01 19:40:33,664 [main] WARN  org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - Encountered Warning UDF_WARNING_1 6 time(s).
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but in contained logs I see a separate log message &quot;Cannot&lt;br/&gt;
extract group for input&quot; for every not matching value&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2016-09-01 19:40:28,115 INFO [main] org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigMapOnly$Map: Aliases being processed per job phase (AliasName[line,offset]): M
: b[10,4],b[-1,-1],extract_fields[17,17] C:  R: 
2016-09-01 19:40:28,122 WARN [main] org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigHadoopLogger: org.apache.pig.builtin.REGEX_EXTRACT(UDF_WARNING_1): RegexExtrac
t : Cannot extract group &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; input /v1=1&amp;amp;v3=9
2016-09-01 19:40:28,124 WARN [main] org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigHadoopLogger: org.apache.pig.builtin.REGEX_EXTRACT(UDF_WARNING_1): RegexExtrac
t : Cannot extract group &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; input /v2=3&amp;amp;v3=7
2016-09-01 19:40:28,124 WARN [main] org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigHadoopLogger: org.apache.pig.builtin.REGEX_EXTRACT(UDF_WARNING_1): RegexExtract : Cannot extract group &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; input /v1=4&amp;amp;v3=6
2016-09-01 19:40:28,125 WARN [main] org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigHadoopLogger: org.apache.pig.builtin.REGEX_EXTRACT(UDF_WARNING_1): RegexExtract : Cannot extract group &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; input /v2=5&amp;amp;v3=5
2016-09-01 19:40:28,125 WARN [main] org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigHadoopLogger: org.apache.pig.builtin.REGEX_EXTRACT(UDF_WARNING_1): RegexExtract : Cannot extract group &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; input /v1=8&amp;amp;v3=2
2016-09-01 19:40:28,125 WARN [main] org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigHadoopLogger: org.apache.pig.builtin.REGEX_EXTRACT(UDF_WARNING_1): RegexExtract : Cannot extract group &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; input /v3=9&amp;amp;v2=1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It does not log the warning messages in the task logs.&lt;/p&gt;

&lt;p&gt;The patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2207&quot; title=&quot;Support custom counters for aggregating warnings from different udfs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2207&quot;&gt;&lt;del&gt;PIG-2207&lt;/del&gt;&lt;/a&gt; was committed to&lt;br/&gt;
Pig 0.13+&lt;/p&gt;

&lt;p&gt;In 0.12 we had a single counter for all UDF warnings, but in  0.13+ we have&lt;br/&gt;
separate counter and message for every unique warning log line. &lt;/p&gt;

&lt;p&gt;Two lines below are unique&lt;br/&gt;
/v2=3&amp;amp;v3=7&lt;br/&gt;
/v1=4&amp;amp;v3=6&lt;/p&gt;

&lt;p&gt;That&apos;s why Pig print both of them to the console.&lt;/p&gt;

&lt;p&gt;Printing a separate log message for every data line slows down the overall performance as well.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13002015">PIG-5019</key>
            <summary>Pig generates tons of warnings for udf with enabled warnings aggregation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="murshyd">Murshid Chalaev</assignee>
                                    <reporter username="murshyd">Murshid Chalaev</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 Sep 2016 11:08:04 +0000</created>
                <updated>Wed, 21 Jun 2017 09:15:35 +0000</updated>
                            <resolved>Mon, 12 Sep 2016 17:27:22 +0000</resolved>
                                    <version>0.14.0</version>
                                    <fixVersion>0.17.0</fixVersion>
                    <fixVersion>0.16.1</fixVersion>
                                    <component>internal-udfs</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15455093" author="murshyd" created="Thu, 1 Sep 2016 11:12:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aniket486&quot; class=&quot;user-hover&quot; rel=&quot;aniket486&quot;&gt;aniket486&lt;/a&gt; , could you please check the patch. It&apos;s related to commit for &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2207&quot; title=&quot;Support custom counters for aggregating warnings from different udfs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2207&quot;&gt;&lt;del&gt;PIG-2207&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15478141" author="rohini" created="Fri, 9 Sep 2016 20:22:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=murshyd&quot; class=&quot;user-hover&quot; rel=&quot;murshyd&quot;&gt;murshyd&lt;/a&gt;,&lt;br/&gt;
  Thanks for reporting this. We recently encountered this as well.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;// log at least once
&lt;/span&gt;                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (msgMap.get(o) == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || !msgMap.get(o).equals(displayMessage)) {
                    log.warn(displayMessage);
                    msgMap.put(o, displayMessage);
                }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Can you get rid of the whole block of logging once above instead of just logging classname and warning name? It is not useful as that can be anyways seen from the counters and the pig client log message.  Having to do a map.get() and equals check just for the message will affect performance when there are huge number of records. &lt;/p&gt;

&lt;p&gt;Documented behavior has always been to turn off aggregation with -w/-warning to see the actual warnings and was the case with older releases. So we are not losing anything by removing the code.  &lt;/p&gt;</comment>
                            <comment id="15483614" author="murshyd" created="Mon, 12 Sep 2016 09:29:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rohini&quot; class=&quot;user-hover&quot; rel=&quot;rohini&quot;&gt;rohini&lt;/a&gt; , thank you for review.&lt;br/&gt;
Attached &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-5019&quot; title=&quot;Pig generates tons of warnings for udf with enabled warnings aggregation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-5019&quot;&gt;&lt;del&gt;PIG-5019&lt;/del&gt;&lt;/a&gt;_2.patch &lt;/p&gt;</comment>
                            <comment id="15484700" author="rohini" created="Mon, 12 Sep 2016 17:26:23 +0000"  >&lt;p&gt;+1. Committed to branch-0.16 and trunk. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=murshyd&quot; class=&quot;user-hover&quot; rel=&quot;murshyd&quot;&gt;murshyd&lt;/a&gt; for the patch. &lt;/p&gt;

&lt;p&gt;I removed the unused msgMap variable before checkin. Attached &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-5019&quot; title=&quot;Pig generates tons of warnings for udf with enabled warnings aggregation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-5019&quot;&gt;&lt;del&gt;PIG-5019&lt;/del&gt;&lt;/a&gt;_3.patch which has that change.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12518087">PIG-2207</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12826604" name="PIG-5019.patch" size="1498" author="murshyd" created="Thu, 1 Sep 2016 11:11:28 +0000"/>
                            <attachment id="12828004" name="PIG-5019_2.patch" size="984" author="murshyd" created="Mon, 12 Sep 2016 09:27:45 +0000"/>
                            <attachment id="12828077" name="PIG-5019_3.patch" size="1399" author="rohini" created="Mon, 12 Sep 2016 17:26:23 +0000"/>
                            <attachment id="12826602" name="input_example.gz" size="102" author="murshyd" created="Thu, 1 Sep 2016 11:09:47 +0000"/>
                            <attachment id="12826603" name="test_pig14_udf .pig" size="316" author="murshyd" created="Thu, 1 Sep 2016 11:09:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 10 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i334m7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>