<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:48:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PIG-379] describe interfiers with name resolution</title>
                <link>https://issues.apache.org/jira/browse/PIG-379</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;If I ran the following script:&lt;/p&gt;

&lt;p&gt;A = load &apos;studenttab10k&apos; as (name: chararray, age: int, gpa: float);&lt;br/&gt;
B = foreach A generate name, age;&lt;br/&gt;
describe B;&lt;br/&gt;
C = filter B by age &amp;gt; 30;&lt;br/&gt;
describe C;&lt;br/&gt;
D = group C by name;&lt;br/&gt;
describe D;&lt;/p&gt;

&lt;p&gt;I get the error below. Also notice that the schema of C no longer have names:&lt;/p&gt;

{name: chararray,age: integer}
{chararray,integer}&lt;br/&gt;
java.io.IOException: Invalid alias: name in {chararray,integer}
&lt;p&gt;        at org.apache.pig.PigServer.registerQuery(PigServer.java:254)&lt;br/&gt;
        at org.apache.pig.tools.grunt.GruntParser.processPig(GruntParser.java:422)&lt;br/&gt;
        at org.apache.pig.tools.pigscript.parser.PigScriptParser.parse(PigScriptParser.java:241)&lt;br/&gt;
        at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:82)&lt;br/&gt;
        at org.apache.pig.tools.grunt.Grunt.exec(Grunt.java:64)&lt;br/&gt;
        at org.apache.pig.Main.main(Main.java:302)&lt;br/&gt;
Caused by: org.apache.pig.impl.logicalLayer.parser.ParseException: Invalid alias: name in &lt;/p&gt;
{chararray,integer}
&lt;p&gt;        at org.apache.pig.impl.logicalLayer.parser.QueryParser.AliasFieldOrSpec(QueryParser.java:5179)&lt;br/&gt;
        at org.apache.pig.impl.logicalLayer.parser.QueryParser.ColOrSpec(QueryParser.java:5048)&lt;br/&gt;
        at org.apache.pig.impl.logicalLayer.parser.QueryParser.BaseEvalSpec(QueryParser.java:3357)&lt;br/&gt;
        at org.apache.pig.impl.logicalLayer.parser.QueryParser.UnaryExpr(QueryParser.java:3254)&lt;br/&gt;
        at org.apache.pig.impl.logicalLayer.parser.QueryParser.CastExpr(QueryParser.java:3208)&lt;br/&gt;
        at org.apache.pig.impl.logicalLayer.parser.QueryParser.MultiplicativeExpr(QueryParser.java:3117)&lt;br/&gt;
        at org.apache.pig.impl.logicalLayer.parser.QueryParser.AdditiveExpr(QueryParser.java:3043)&lt;br/&gt;
        at org.apache.pig.impl.logicalLayer.parser.QueryParser.InfixExpr(QueryParser.java:3009)&lt;br/&gt;
        at org.apache.pig.impl.logicalLayer.parser.QueryParser.FlattenedGenerateItem(QueryParser.java:2911)&lt;br/&gt;
        at org.apache.pig.impl.logicalLayer.parser.QueryParser.GroupItem(QueryParser.java:1548)&lt;br/&gt;
        at org.apache.pig.impl.logicalLayer.parser.QueryParser.CogroupClause(QueryParser.java:1468)&lt;br/&gt;
        at org.apache.pig.impl.logicalLayer.parser.QueryParser.BaseExpr(QueryParser.java:751)&lt;br/&gt;
        at org.apache.pig.impl.logicalLayer.parser.QueryParser.Expr(QueryParser.java:569)&lt;br/&gt;
        at org.apache.pig.impl.logicalLayer.parser.QueryParser.Parse(QueryParser.java:378)&lt;br/&gt;
        at org.apache.pig.impl.logicalLayer.LogicalPlanBuilder.parse(LogicalPlanBuilder.java:60)&lt;br/&gt;
        at org.apache.pig.PigServer.registerQuery(PigServer.java:251)&lt;/p&gt;

&lt;p&gt;If I remove describe, I don&apos;t see any errors&lt;/p&gt;</description>
                <environment></environment>
        <key id="12402579">PIG-379</key>
            <summary>describe interfiers with name resolution</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gates">Alan Gates</assignee>
                                    <reporter username="olgan">Olga Natkovich</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Aug 2008 18:57:36 +0000</created>
                <updated>Wed, 24 Mar 2010 22:04:07 +0000</updated>
                            <resolved>Wed, 27 Aug 2008 00:00:42 +0000</resolved>
                                    <version>0.2.0</version>
                                    <fixVersion>0.2.0</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12623498" author="olgan" created="Mon, 18 Aug 2008 23:35:26 +0000"  >&lt;p&gt;Bumpimng priority since we see users running into this issue&lt;/p&gt;</comment>
                            <comment id="12623972" author="sms" created="Wed, 20 Aug 2008 12:23:06 +0000"  >&lt;p&gt;The describe statement kicks of the logical plan -&amp;gt; type checker -&amp;gt; optimizer process. During the logical plan optimization the schema of each operator is reset. When the schema of each operator is recomputed, the computation uses the attributes of the operator along with the information about its inputs. User defined schemas specified with the as clause are not annotated as such in each operator. As a result, when the schema is reset in the logical optimizer, this information is lost resulting in incorrect schemas.&lt;/p&gt;

&lt;p&gt;There are multiple items that we need to consider:&lt;/p&gt;

&lt;p&gt;1. Annotate each relational operator and expression operator with an attributed to denote presence of user specified schemas&lt;/p&gt;

&lt;p&gt;2. Checks to ensure compatibility of user specified schemas with the generated/inferred schemas, i.e.,&lt;br/&gt;
   a. if the user specifies incorrect types, then perform appropriate checks and type promotions&lt;br/&gt;
   b. if the schema is a mismatch then flag it as an error&lt;/p&gt;

&lt;p&gt;3. For complex constants, the schema computation is a bit complex and involves type promotions, null introductions, etc.&lt;/p&gt;</comment>
                            <comment id="12625897" author="alangates" created="Tue, 26 Aug 2008 22:53:35 +0000"  >&lt;p&gt;Changed describe to not call the optimizer.  There&apos;s no good reason for it to, and all the moving around of operators in the optimizer was causing problems for describe.&lt;/p&gt;</comment>
                            <comment id="12625910" author="alangates" created="Wed, 27 Aug 2008 00:00:42 +0000"  >&lt;p&gt;patch committed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12388960" name="PIG-379.patch" size="1393" author="gates" created="Tue, 26 Aug 2008 22:53:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>618</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 14 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gjin:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94592</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>