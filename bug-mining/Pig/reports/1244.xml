<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:57:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PIG-3435] Custom Partitioner not working with MultiQueryOptimizer</title>
                <link>https://issues.apache.org/jira/browse/PIG-3435</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;When looking at &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3385&quot; title=&quot;DISTINCT no longer uses custom partitioner&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3385&quot;&gt;&lt;del&gt;PIG-3385&lt;/del&gt;&lt;/a&gt;, noticed some issues in handling of custom partitioner with multi-query optimization.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;C1 = group B1 by col1 PARTITION BY
       org.apache.pig.test.utils.SimpleCustomPartitioner parallel 2;
C2 = group B2 by col1 PARTITION BY
       org.apache.pig.test.utils.SimpleCustomPartitioner parallel 2;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This seems to be merged to one mapreduce job correctly but custom partitioner information was lost.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;C1 = group B1 by col1 PARTITION BY org.apache.pig.test.utils.SimpleCustomPartitioner parallel 2;
C2 = group B2 by col1 parallel 2;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This seems to be merged even though they should run on two different partitioner.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12664924">PIG-3435</key>
            <summary>Custom Partitioner not working with MultiQueryOptimizer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knoguchi">Koji Noguchi</assignee>
                                    <reporter username="knoguchi">Koji Noguchi</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Aug 2013 21:53:05 +0000</created>
                <updated>Mon, 14 Oct 2013 16:46:38 +0000</updated>
                            <resolved>Wed, 28 Aug 2013 00:35:54 +0000</resolved>
                                                    <fixVersion>0.12.0</fixVersion>
                    <fixVersion>0.11.2</fixVersion>
                                    <component>impl</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13747999" author="knoguchi" created="Thu, 22 Aug 2013 22:34:06 +0000"  >&lt;p&gt;Looking at the multi-query optimization code and documents.  I chickened out. &lt;/p&gt;

&lt;p&gt;Taking the same approach as &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-1108&quot; title=&quot;Incorrect map output key type in MultiQuery optimization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-1108&quot;&gt;&lt;del&gt;PIG-1108&lt;/del&gt;&lt;/a&gt; and simply skipping the MR jobs with custom partitioner.&lt;/p&gt;

&lt;p&gt;Attaching the test case soon.&lt;/p&gt;</comment>
                            <comment id="13748823" author="knoguchi" created="Fri, 23 Aug 2013 18:26:20 +0000"  >&lt;p&gt;While looking at the testcase, found &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2627&quot; title=&quot;Custom partitioner not set when POSplit is involved in Plan&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2627&quot;&gt;&lt;del&gt;PIG-2627&lt;/del&gt;&lt;/a&gt; where it fixed one of the issues with custom-partitioner and multiquery optimization (but not all).&lt;/p&gt;

&lt;p&gt;Specific case mentioned on that ticket is handled on that jira and it works, but my patch here simply skips multiquery optimization for ALL custom partitioner jobs.&lt;/p&gt;

&lt;p&gt;Since it&apos;s sort of a correctness issue, I want this fix to be back-ported to 0.11.  And for that, I kept the change to be simple.&lt;/p&gt;

&lt;p&gt;Can we create a separate jira for reviving custom-partitioner + multiquery optimization for later releases?&lt;/p&gt;</comment>
                            <comment id="13751950" author="daijy" created="Wed, 28 Aug 2013 00:31:30 +0000"  >&lt;p&gt;custom-partitioner + multiquery optimization should be a valid use case, we shall open a Jira ticket for it.&lt;/p&gt;

&lt;p&gt;But correctness first, +1 for the patch.&lt;/p&gt;</comment>
                            <comment id="13751955" author="daijy" created="Wed, 28 Aug 2013 00:35:54 +0000"  >&lt;p&gt;Patch committed to trunk. Opened &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3440&quot; title=&quot;MultiQuery to work with custom partitioner&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3440&quot;&gt;PIG-3440&lt;/a&gt; to track the custom partitioner + multiquery optimization. Thanks Koji!&lt;/p&gt;</comment>
                            <comment id="13751999" author="knoguchi" created="Wed, 28 Aug 2013 01:32:05 +0000"  >&lt;p&gt;Thanks Daniel!  &lt;br/&gt;
Can we back-port this patch to 0.11? &lt;br/&gt;
(That was one of the motivation for me to keep the patch simple.)&lt;/p&gt;

&lt;p&gt;I&apos;ll work on &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3440&quot; title=&quot;MultiQuery to work with custom partitioner&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3440&quot;&gt;PIG-3440&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13752824" author="daijy" created="Wed, 28 Aug 2013 20:41:46 +0000"  >&lt;p&gt;Committed to 0.11 branch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12599525" name="pig-3435-v01.patch" size="1029" author="knoguchi" created="Thu, 22 Aug 2013 22:34:06 +0000"/>
                            <attachment id="12599679" name="pig-3435-v02_skipcustompatitioner_for_merge.patch" size="3969" author="knoguchi" created="Fri, 23 Aug 2013 18:26:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>344867</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 12 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ngzj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>345168</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>