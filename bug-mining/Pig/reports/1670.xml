<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:00:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PIG-4397] CSVExcelStorage incorrect output if last field value is null</title>
                <link>https://issues.apache.org/jira/browse/PIG-4397</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;I have the following input:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;one two
three
 four
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I run this code&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Lines =
    LOAD &lt;span class=&quot;code-quote&quot;&gt;&apos;test.log&apos;&lt;/span&gt; USING PigStorage(&lt;span class=&quot;code-quote&quot;&gt;&apos; &apos;&lt;/span&gt;) 
    AS ( First:chararray , Second:chararray );

DUMP Lines;

STORE Lines INTO &lt;span class=&quot;code-quote&quot;&gt;&apos;Lines&apos;&lt;/span&gt;
USING org.apache.pig.piggybank.storage.CSVExcelStorage(&lt;span class=&quot;code-quote&quot;&gt;&apos;\t&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;NO_MULTILINE&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;WINDOWS&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;WRITE_OUTPUT_HEADER&apos;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The output from the DUMP is correct:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;(one,two)
(three,)
(,four)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The output from the CSVExcelStorage is incorrect:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;First   Second
one     two
three   three
        four
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The problem is that if the last field is a null then the previous value is repeated incorrectly (in this case &apos;three&apos;).&lt;/p&gt;</description>
                <environment>&lt;p&gt;Running the Pig version bundled with HDP 2.1.2:   0.12.1.2.1.2.0-402&lt;/p&gt;</environment>
        <key id="12770202">PIG-4397</key>
            <summary>CSVExcelStorage incorrect output if last field value is null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="nielsbasjes">Niels Basjes</reporter>
                        <labels>
                    </labels>
                <created>Mon, 26 Jan 2015 21:57:40 +0000</created>
                <updated>Sun, 7 Jun 2015 03:48:23 +0000</updated>
                            <resolved>Wed, 25 Feb 2015 01:45:44 +0000</resolved>
                                                    <fixVersion>0.15.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14293188" author="nielsbasjes" created="Tue, 27 Jan 2015 08:38:42 +0000"  >&lt;p&gt;On a different machine (same pig version) I used this script&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Lines =
    LOAD &lt;span class=&quot;code-quote&quot;&gt;&apos;test.log&apos;&lt;/span&gt; USING PigStorage(&lt;span class=&quot;code-quote&quot;&gt;&apos; &apos;&lt;/span&gt;)
    AS ( A:chararray, B:chararray, C:chararray);

DUMP Lines;

STORE Lines INTO &lt;span class=&quot;code-quote&quot;&gt;&apos;Lines&apos;&lt;/span&gt;
USING org.apache.pig.piggybank.storage.CSVExcelStorage(&lt;span class=&quot;code-quote&quot;&gt;&apos;\t&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;NO_MULTILINE&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;WINDOWS&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;WRITE_OUTPUT_HEADER&apos;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This input&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;1 2 3
 4 5
6  7
8
 9
  10
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;DUMP:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;(1,2,3)
(,4,5)
(6,,7)
(8,,)
(,9,)
(,,10)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;CSV:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;A       B       C
1       2       3
        4       5
6               7
8               8
        9       9
                10
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here the error is visible in the &apos;8&apos; and &apos;9&apos;.&lt;/p&gt;

</comment>
                            <comment id="14309879" author="rohini" created="Fri, 6 Feb 2015 20:46:13 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14335818" author="daijy" created="Wed, 25 Feb 2015 01:45:44 +0000"  >&lt;p&gt;Patch committed to trunk. &lt;/p&gt;

&lt;p&gt;Thanks Niels for reporting the issue and Rohini for review!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12695642" name="PIG-4397-1.patch" size="2723" author="daijy" created="Fri, 30 Jan 2015 23:15:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 39 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i24tgf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>