<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:01:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PIG-4841] Inline-op with schema declaration fails with syntax error</title>
                <link>https://issues.apache.org/jira/browse/PIG-4841</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Inline-op+foreach+schema(&quot;as&quot;) fails. &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;knoguchi@truelisten-lm pig&amp;gt; cat test6.pig
A = load &lt;span class=&quot;code-quote&quot;&gt;&apos;input.txt&apos;&lt;/span&gt; as (a1:&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, a2:&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;);
B = FOREACH (FOREACH A GENERATE a1 as b1) GENERATE b1;

dump B;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;panelContent&quot;&gt;
&lt;p&gt;2016-03-11 17:57:31,364 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1000: Error during parsing. Lexical error at line 5, column 0.  Encountered: &amp;lt;EOF&amp;gt; after : &quot;&quot;&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12949367">PIG-4841</key>
            <summary>Inline-op with schema declaration fails with syntax error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knoguchi">Koji Noguchi</assignee>
                                    <reporter username="knoguchi">Koji Noguchi</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Mar 2016 22:59:13 +0000</created>
                <updated>Wed, 8 Jun 2016 20:48:29 +0000</updated>
                            <resolved>Mon, 21 Mar 2016 21:46:23 +0000</resolved>
                                    <version>0.11.1</version>
                    <version>0.15.0</version>
                                    <fixVersion>0.16.0</fixVersion>
                                    <component>parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15192093" author="knoguchi" created="Sun, 13 Mar 2016 02:49:45 +0000"  >&lt;p&gt;Rohini pointed out to me that &quot;inline&quot; is the terminology I should be using.&lt;br/&gt;
Changing summary.&lt;/p&gt;

&lt;p&gt;I took &quot;nested&quot; from &lt;tt&gt;QueryParser.g&lt;/tt&gt;&apos;s &quot;nested_op_clause&quot;.  &lt;br/&gt;
Maybe we should update that later.&lt;/p&gt;</comment>
                            <comment id="15192103" author="knoguchi" created="Sun, 13 Mar 2016 03:12:32 +0000"  >&lt;p&gt;In the patch I have two new tests, one from the description and another that I decided not to fix as part of this jira and commented it out.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+    @Test
+    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testWithInlineOpWithNestedForeach() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Throwable {
+        &lt;span class=&quot;code-comment&quot;&gt;// This one currently fails because &lt;span class=&quot;code-quote&quot;&gt;&quot;{}&quot;&lt;/span&gt; is treated as
&lt;/span&gt;+        &lt;span class=&quot;code-comment&quot;&gt;// IN_BLOCK in PigScriptParser.jj which jumps to PIG_END and ignore
&lt;/span&gt;+        &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-quote&quot;&gt;&quot;) generate *; &quot;&lt;/span&gt; part of the code.
&lt;/span&gt;+        &lt;span class=&quot;code-comment&quot;&gt;// In order to support &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; test, we need to add parenthesis matching
&lt;/span&gt;+        &lt;span class=&quot;code-comment&quot;&gt;// everywhere in PigScriptParser.jj (or stop using it)
&lt;/span&gt;+        &lt;span class=&quot;code-comment&quot;&gt;//
&lt;/span&gt;+        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; query = &lt;span class=&quot;code-quote&quot;&gt;&quot;a = load &lt;span class=&quot;code-quote&quot;&gt;&apos;i1&apos;&lt;/span&gt; as (f1:chararray);&quot;&lt;/span&gt; +
+               &lt;span class=&quot;code-quote&quot;&gt;&quot;b = group a ALL; &quot;&lt;/span&gt; +
+               &lt;span class=&quot;code-quote&quot;&gt;&quot;c = foreach ( foreach b {b1 = limit a 3; generate 1, b1;} ) generate *; &quot;&lt;/span&gt; +
+               &lt;span class=&quot;code-quote&quot;&gt;&quot;dump c;&quot;&lt;/span&gt;;
+        ArrayList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; msgs = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;();                &lt;span class=&quot;code-comment&quot;&gt;//
&lt;/span&gt;+        validate(query, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, msgs.toArray(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[0]));
+    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I had a patch that would cover this test case but it required me to add parenthesis checking everywhere and it still gave me 10-20 more test failures with mismatching &quot;)&quot;.  At that point, decided to step back and fix the original case only and defer inlineop+nested-foreach case to &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2597&quot; title=&quot;Move grunt from javacc to ANTLR&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2597&quot;&gt;PIG-2597&lt;/a&gt; where we&apos;re trying to move Grunt from javacc to ANTLR.&lt;/p&gt;</comment>
                            <comment id="15205166" author="daijy" created="Mon, 21 Mar 2016 21:16:55 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15205226" author="knoguchi" created="Mon, 21 Mar 2016 21:46:23 +0000"  >&lt;p&gt;Thanks for the review Daniel! &lt;/p&gt;

&lt;p&gt;Committed to trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12793179" name="pig-4841-v01.patch" size="3178" author="knoguchi" created="Sun, 13 Mar 2016 03:12:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 35 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ujxj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>