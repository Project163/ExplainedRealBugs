<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:56:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PIG-3082] outputSchema of a UDF allows two usages when describing a Tuple schema</title>
                <link>https://issues.apache.org/jira/browse/PIG-3082</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;When defining an evalfunc that returns a Tuple there are two ways you can implement outputSchema().&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The right way: return a schema that contains one Field that contains the type and schema of the return type of the UDF&lt;/li&gt;
	&lt;li&gt;The unreliable way: return a schema that contains more than one field and it will be understood as a tuple schema even though there is no type (which is in Field class) to specify that. This is particularly deceitful when the output schema is derived from the input schema and the outputted Tuple sometimes contain only one field. In such cases Pig understands the output schema as a tuple only if there is more than one field. And sometimes it works, sometimes it does not.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;We should at least issue a warning (backward compatibility) if not plain throw an exception when the output schema contains more than one Field.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12622733">PIG-3082</key>
            <summary>outputSchema of a UDF allows two usages when describing a Tuple schema</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jcoveney">Jonathan Coveney</assignee>
                                    <reporter username="julienledem">Julien Le Dem</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Dec 2012 22:41:50 +0000</created>
                <updated>Wed, 30 Mar 2016 21:05:44 +0000</updated>
                            <resolved>Wed, 23 Jan 2013 23:14:19 +0000</resolved>
                                                    <fixVersion>0.12.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13556686" author="julienledem" created="Thu, 17 Jan 2013 22:44:32 +0000"  >&lt;p&gt;Thanks for fixing Jon!&lt;br/&gt;
I find the error message a little confusing:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; throw new FrontendException(&quot;Given UDF returns an improper Schema. Should only return Tuple, Bag, or a single item. Returns: &quot; + udfSchema);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It should contain something along the lines of &quot;... outputSchema should return a Schema containing a single Field ...&quot;.&lt;br/&gt;
Otherwise, it looks good to me.&lt;br/&gt;
Thanks&lt;/p&gt;</comment>
                            <comment id="13561160" author="jcoveney" created="Wed, 23 Jan 2013 22:17:38 +0000"  >&lt;p&gt;Updated with a better message. Testing then will commit&lt;/p&gt;</comment>
                            <comment id="13784720" author="dvryaboy" created="Thu, 3 Oct 2013 01:08:06 +0000"  >&lt;p&gt;So... that&apos;s a breaking change, a bunch of UDF will fail under 12. &lt;/p&gt;

&lt;p&gt;Intended?&lt;/p&gt;</comment>
                            <comment id="13785427" author="julienledem" created="Thu, 3 Oct 2013 18:41:03 +0000"  >&lt;p&gt;This is intended.&lt;br/&gt;
The second behavior described above is really problematic.&lt;br/&gt;
If a UDF breaks because it returns a schema of more than one field it should be changed to return one field of type tuple.&lt;br/&gt;
Once fixed it works in all versions of Pig.&lt;br/&gt;
This is only removing an unsafe use of outputSchema in favor of the existing correct use.&lt;/p&gt;</comment>
                            <comment id="13786709" author="aniket486" created="Fri, 4 Oct 2013 22:47:07 +0000"  >&lt;p&gt;But, we should document this as incompatible change so that there are no surprises?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12618662">PIG-3074</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12630177">PIG-3150</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12630430">PIG-3153</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12560311" name="PIG-3082-0.patch" size="69660" author="jcoveney" created="Tue, 11 Dec 2012 00:02:58 +0000"/>
                            <attachment id="12566202" name="PIG-3082-1.patch" size="69689" author="jcoveney" created="Wed, 23 Jan 2013 22:17:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>296398</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10342"><![CDATA[Incompatible change]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 7 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1493r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>232938</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>