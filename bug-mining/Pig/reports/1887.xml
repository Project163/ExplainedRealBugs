<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:02:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PIG-5040] Order by and CROSS partitioning is not deterministic due to usage of Random</title>
                <link>https://issues.apache.org/jira/browse/PIG-5040</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Maps can be rerun due to shuffle fetch failures. Half of the reducers can end up successfully pulling partitions from first run of the map while other half could pull from the rerun after shuffle fetch failures. If the data is not partitioned by the Partitioner exactly the same way every time then it could lead to incorrect results (loss of records and duplicated records). Even though issue has existed for 8 years now with order by and affects mapreduce as well found this with Tez where the frequency of rerun due to shuffle fetch failures is high (Order by partitioner gets its data from a 1-1 edge, so there are no retries and shuffle fetch failures trigger a rerun immediately).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13011724">PIG-5040</key>
            <summary>Order by and CROSS partitioning is not deterministic due to usage of Random</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rohini">Rohini Palaniswamy</assignee>
                                    <reporter username="rohini">Rohini Palaniswamy</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Oct 2016 17:05:50 +0000</created>
                <updated>Wed, 21 Jun 2017 09:15:19 +0000</updated>
                            <resolved>Mon, 17 Oct 2016 15:20:37 +0000</resolved>
                                                    <fixVersion>0.17.0</fixVersion>
                    <fixVersion>0.16.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15573591" author="daijy" created="Fri, 14 Oct 2016 00:01:52 +0000"  >&lt;p&gt;Is it possible to reuse PigConstants.TASK_INDEX?&lt;/p&gt;</comment>
                            <comment id="15574041" author="rohini" created="Fri, 14 Oct 2016 03:29:03 +0000"  >&lt;blockquote&gt;&lt;p&gt;Is it possible to reuse PigConstants.TASK_INDEX?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt; Why? TASK_ID is also available in jobconf and provides better hashcode being a String than task index which is just a integer whose hashcode is same as the integer.  &lt;/p&gt;

&lt;p&gt;Changes to LocalMapReduceSimulator.java were done for TestExampleGenerator which tests PigServer.getExamples().&lt;/p&gt;</comment>
                            <comment id="15574176" author="daijy" created="Fri, 14 Oct 2016 04:41:17 +0000"  >&lt;p&gt;Oh, I see, I confused because I saw you do set TASK_ID, but turns out it is in LocalMapReduceSimulator. But if we just use the existing value, I am fine. +1.&lt;/p&gt;</comment>
                            <comment id="15576838" author="daijy" created="Fri, 14 Oct 2016 23:12:02 +0000"  >&lt;p&gt;Also RandomSampleLoader in MR has the same issue.&lt;/p&gt;</comment>
                            <comment id="15576852" author="rohini" created="Fri, 14 Oct 2016 23:18:17 +0000"  >&lt;p&gt;RandomSampleLoader and POReservoirSample even though they use new Random() and rerun will produce different samples, it is not a problem because the output is always sent to a single reducer (sample aggregator). If there were more than one reducer, then it is a problem.&lt;/p&gt;</comment>
                            <comment id="15576875" author="daijy" created="Fri, 14 Oct 2016 23:32:53 +0000"  >&lt;p&gt;You are right, single reducer should be fine.&lt;/p&gt;</comment>
                            <comment id="15582523" author="rohini" created="Mon, 17 Oct 2016 15:20:38 +0000"  >&lt;p&gt;Committed to branch-0.16 and trunk. Thanks for the review Daniel.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13045617">PIG-5154</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12832935" name="PIG-5040-1-nowhitespacechanges.patch" size="13231" author="rohini" created="Wed, 12 Oct 2016 17:10:57 +0000"/>
                            <attachment id="12832936" name="PIG-5040-1.patch" size="19308" author="rohini" created="Wed, 12 Oct 2016 17:10:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 5 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34sf3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>