<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:49:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PIG-734] Non-string keys in maps</title>
                <link>https://issues.apache.org/jira/browse/PIG-734</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;With the addition of types to pig, maps were changed to allow any atomic type to be a key.  However, in practice we do not see people using keys other than strings.  And allowing multiple types is causing us issues in serializing data (we have to check what every key type is) and in the design for non-java UDFs (since many scripting languages include associative arrays such as Perl&apos;s hash).&lt;/p&gt;

&lt;p&gt;So I propose we scope back maps to only have string keys.  This would be a non-compatible change.  But I am not aware of anyone using non-string keys, so hopefully it would have little or no impact.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12419419">PIG-734</key>
            <summary>Non-string keys in maps</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gates">Alan Gates</assignee>
                                    <reporter username="gates">Alan Gates</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Mar 2009 20:02:34 +0000</created>
                <updated>Wed, 24 Mar 2010 22:13:06 +0000</updated>
                            <resolved>Wed, 24 Jun 2009 00:48:16 +0000</resolved>
                                    <version>0.2.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12707110" author="yhan" created="Thu, 7 May 2009 21:09:11 +0000"  >&lt;p&gt;I don&apos;t get the serializing part. I would expect the type-checking just happen once, would that be a performance problem?&lt;/p&gt;

&lt;p&gt;Actually we are thinking if we should switch to integer key to save space.&lt;/p&gt;

&lt;p&gt;I wouldn&apos;t post strong against to this rollback, but I don&apos;t see a significant reason for dong that.&lt;/p&gt;</comment>
                            <comment id="12707174" author="alangates" created="Thu, 7 May 2009 23:09:08 +0000"  >&lt;p&gt;For serialization, a type discovery has to happen on every key, because there&apos;s no guarantee that every key is of the same type.  By forcing all keys to strings we&apos;re eliminating this step, thus speeding the serialization significantly.&lt;/p&gt;</comment>
                            <comment id="12707178" author="yhan" created="Thu, 7 May 2009 23:15:27 +0000"  >&lt;p&gt;Then why not just to restrict all the keys to be of the same type? I don&apos;t see the point that different records should have different key types. But I do see the point that people may want to use non-string type of keys.&lt;/p&gt;</comment>
                            <comment id="12707193" author="hadoopqa" created="Fri, 8 May 2009 00:38:28 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12407585/PIG-734.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12407585/PIG-734.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 772750.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 63 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The applied patch generated 228 javac compiler warnings (more than the trunk&apos;s current 225 warnings).&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 7 new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/32/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/32/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/32/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/32/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/32/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/32/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12707195" author="alangates" created="Fri, 8 May 2009 00:44:51 +0000"  >&lt;p&gt;Changing maps to allow the user to specify a type would be significantly more work.  Also, it would be a bigger disruption in the interface, since users would now have to declare a key type.  We could say the type default to string if the user doesn&apos;t declare a type.&lt;/p&gt;

&lt;p&gt;Nothing prevents us from eventually supporting other declared types for the key, with string as the default.  However, as noted in the original description, it will make types translations in non-java UDFs much more painful, so it&apos;s not clear to me that we would want to do it.&lt;/p&gt;</comment>
                            <comment id="12707377" author="ciemo" created="Fri, 8 May 2009 15:30:07 +0000"  >&lt;p&gt;Alan, if I don&apos;t think this is going to be that problematic.&lt;/p&gt;

&lt;p&gt;Even if I try to pass in a map dereference with an integer such as mymap#1, would pig automagically convert the 1 to a string equivalent to mymap#&apos;1&apos;.  If so, I think this would be quite acceptable.&lt;/p&gt;</comment>
                            <comment id="12707381" author="alangates" created="Fri, 8 May 2009 15:44:21 +0000"  >&lt;p&gt;I wasn&apos;t planning on making mymap#1 translate to mymap#&apos;1&apos;.  The issue I see with that is if that works, why doesn&apos;t mymap#intcol work?  I&apos;m concerned that sayings keys need to be strings but then cheating in this one case will make the semantics confusing.&lt;/p&gt;</comment>
                            <comment id="12721464" author="alangates" created="Thu, 18 Jun 2009 20:32:56 +0000"  >&lt;p&gt;New version of the patch, brought up to date with current trunk.&lt;/p&gt;</comment>
                            <comment id="12721527" author="hadoopqa" created="Thu, 18 Jun 2009 22:16:13 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12411133/PIG-734_2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12411133/PIG-734_2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 785450.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 63 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 2 new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/92/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/92/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/92/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/92/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/92/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/92/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12721546" author="alangates" created="Thu, 18 Jun 2009 23:20:49 +0000"  >&lt;p&gt;Attaching a version of the file that fixes some of the introduced compiler warnings.  The findbugs warnings have to do with naming convention.  All of the function names in QueryParser start with upper case, so I am only following the convention there.&lt;/p&gt;</comment>
                            <comment id="12721598" author="hadoopqa" created="Fri, 19 Jun 2009 01:06:25 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12411160/PIG-734_3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12411160/PIG-734_3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 785450.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 63 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 2 new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/93/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/93/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/93/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/93/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/93/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/93/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12723350" author="daijy" created="Tue, 23 Jun 2009 23:11:17 +0000"  >&lt;p&gt;Patch looks good to me.&lt;/p&gt;</comment>
                            <comment id="12723388" author="alangates" created="Wed, 24 Jun 2009 00:48:16 +0000"  >&lt;p&gt;Patch checked in.&lt;/p&gt;</comment>
                            <comment id="12723555" author="hudson" created="Wed, 24 Jun 2009 13:06:28 +0000"  >&lt;p&gt;Integrated in Pig-trunk #484 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-trunk/484/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-trunk/484/&lt;/a&gt;)&lt;br/&gt;
    :  Changed maps to only take strings as keys.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12407585" name="PIG-734.patch" size="51548" author="gates" created="Thu, 7 May 2009 23:06:22 +0000"/>
                            <attachment id="12411133" name="PIG-734_2.patch" size="57778" author="gates" created="Thu, 18 Jun 2009 20:32:56 +0000"/>
                            <attachment id="12411160" name="PIG-734_3.patch" size="58071" author="gates" created="Thu, 18 Jun 2009 23:20:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164301</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 23 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gnpr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>95272</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>