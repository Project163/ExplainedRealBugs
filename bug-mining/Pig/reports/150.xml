<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:49:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PIG-634] When POUnion is one of the roots of a map plan, POUnion.getNext() gives a null pointer exception</title>
                <link>https://issues.apache.org/jira/browse/PIG-634</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;POUnion.getnext() gives a null pointer exception in the following scenario (pasted from a code comment explaining the fix for this issue). If a script results in a plan like the one below, currently POUnion.getNext() gives a null pointer exception&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;                
                // POUnion
                // |
                // |--POLocalRearrange
                // |    |
                // |    |-POUnion (root 2)--&amp;gt; This union&apos;s getNext() can lead the code here
                // |
                // |--POLocalRearrange (root 1)
                
                // The inner POUnion above is a root in the plan which has 2 roots.
                // So these 2 roots would have input coming from different input
                // sources (dfs files). So certain maps would be working on input only
                // meant for &quot;root 1&quot; above and some maps would work on input
                // meant only for &quot;root 2&quot;. In the former case, &quot;root 2&quot; would
                // neither get input attached to it nor does it have predecessors
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A script which can cause a plan like above is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;a = load &lt;span class=&quot;code-quote&quot;&gt;&apos;xyz&apos;&lt;/span&gt;; 
b = load &lt;span class=&quot;code-quote&quot;&gt;&apos;abc&apos;&lt;/span&gt;; 
c = union a,b; 
d = load &lt;span class=&quot;code-quote&quot;&gt;&apos;def&apos;&lt;/span&gt;; 
e = cogroup c by $0 &lt;span class=&quot;code-keyword&quot;&gt;inner&lt;/span&gt; , d by $0 &lt;span class=&quot;code-keyword&quot;&gt;inner&lt;/span&gt;;
dump e;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12413145">PIG-634</key>
            <summary>When POUnion is one of the roots of a map plan, POUnion.getNext() gives a null pointer exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pkamath">Pradeep Kamath</assignee>
                                    <reporter username="pkamath">Pradeep Kamath</reporter>
                        <labels>
                    </labels>
                <created>Sat, 24 Jan 2009 01:16:24 +0000</created>
                <updated>Wed, 24 Mar 2010 22:04:16 +0000</updated>
                            <resolved>Mon, 26 Jan 2009 21:29:56 +0000</resolved>
                                    <version>0.2.0</version>
                                    <fixVersion>0.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12667333" author="pkamath" created="Mon, 26 Jan 2009 18:12:00 +0000"  >&lt;p&gt;Attached patch which fixed POUnion.getNext() by adding the following condition:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Result getNext(Tuple t) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; ExecException {

        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (nextReturnEOP) {
            nextReturnEOP = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; ;
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; eopResult ;
        }

        &lt;span class=&quot;code-comment&quot;&gt;// Case 1 : Normal connected plan
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!isInputAttached()) {
            
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (inputs == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || inputs.size()==0) {
                &lt;span class=&quot;code-comment&quot;&gt;// Neither does &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; Union have predecessors nor
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// was any input attached! This can happen when we have
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// a plan like below
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// POUnion
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// |
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// |--POLocalRearrange
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// |    |
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// |    |-POUnion (root 2)--&amp;gt; This union&apos;s getNext() can lead the code here
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// |
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// |--POLocalRearrange (root 1)
&lt;/span&gt;                
                &lt;span class=&quot;code-comment&quot;&gt;// The &lt;span class=&quot;code-keyword&quot;&gt;inner&lt;/span&gt; POUnion above is a root in the plan which has 2 roots.
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// So these 2 roots would have input coming from different input
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// sources (dfs files). So certain maps would be working on input only
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// meant &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;root 1&quot;&lt;/span&gt; above and some maps would work on input
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// meant only &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;root 2&quot;&lt;/span&gt;. In the former &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;root 2&quot;&lt;/span&gt; would
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// neither get input attached to it nor does it have predecessors
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// which is the &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; which can lead us here.
&lt;/span&gt;                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; eopResult;
            }
            ... &lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt; of getNext
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The check to see if inputs is null or inputs.size() is 0 is the new condition added in getNext(). This ensures that when POUnion is one of the roots of the map plan and when it receives no input (i.e. no input is attached), it will send EOP to successor.&lt;/p&gt;</comment>
                            <comment id="12667335" author="olgan" created="Mon, 26 Jan 2009 18:20:20 +0000"  >&lt;p&gt;+1 on the patch. Great catch!&lt;/p&gt;</comment>
                            <comment id="12667439" author="pkamath" created="Mon, 26 Jan 2009 21:29:43 +0000"  >&lt;p&gt;Patch committed&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12398750" name="PIG-634.patch" size="4905" author="pkamath" created="Mon, 26 Jan 2009 18:13:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164221</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 44 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gmjb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>95081</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>