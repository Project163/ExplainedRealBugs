<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:04:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PIG-5459] Jython_Checkin_3 e2e failing with NoClassDefFoundError (hadoop3)</title>
                <link>https://issues.apache.org/jira/browse/PIG-5459</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;turing_jython.conf/Jython_Checkin_3.pig&quot;, line 4, in _module_
from org.apache.hadoop.conf import *
java.lang.NoClassDefFoundError: Lorg/junit/rules/ExpectedException;
at java.lang.Class.getDeclaredFields0(Native Method)
at java.lang.Class.privateGetDeclaredFields(Class.java:2583)
at java.lang.Class.privateGetPublicFields(Class.java:2614)
at java.lang.Class.getFields(Class.java:1557)
at org.python.core.PyJavaType.init(PyJavaType.java:419)
at org.python.core.PyType.createType(PyType.java:1523)
at org.python.core.PyType.addFromClass(PyType.java:1462)
at org.python.core.PyType.fromClass(PyType.java:1551)
at org.python.core.adapter.ClassicPyObjectAdapter$6.adapt(ClassicPyObjectAdapter.java:77)
at org.python.core.adapter.ExtensiblePyObjectAdapter.adapt(ExtensiblePyObjectAdapter.java:44)
at org.python.core.adapter.ClassicPyObjectAdapter.adapt(ClassicPyObjectAdapter.java:131)
at org.python.core.Py.java2py(Py.java:2017)
at org.python.core.PyJavaPackage.addClass(PyJavaPackage.java:86)
at org.python.core.packagecache.PackageManager.basicDoDir(PackageManager.java:113)
at org.python.core.packagecache.SysPackageManager.doDir(SysPackageManager.java:148)
at org.python.core.PyJavaPackage.fillDir(PyJavaPackage.java:120)
at org.python.core.imp.importAll(imp.java:1189)
at org.python.core.imp.importAll(imp.java:1177)
at org.python.pycode._pyx0.f$0(/tmp/yarn-local/usercache/.../gtrain-1722336537-turing_jython.conf/Jython_Checkin_3.pig:8)
at org.python.pycode._pyx0.call_function(/tmp/yarn-local/usercache...gtrain-1722336537-tu/ring_jython.conf/Jython_Checkin_3.pig)
at org.python.core.PyTableCode.call(PyTableCode.java:171)
at org.python.core.PyCode.call(PyCode.java:18)
at org.python.core.Py.runCode(Py.java:1614)
at org.python.util.PythonInterpreter.execfile(PythonInterpreter.java:296)
at org.apache.pig.scripting.jython.JythonScriptEngine$Interpreter.execfile(JythonScriptEngine.java:217)
at org.apache.pig.scripting.jython.JythonScriptEngine.load(JythonScriptEngine.java:440)
at org.apache.pig.scripting.jython.JythonScriptEngine.main(JythonScriptEngine.java:424)
at org.apache.pig.scripting.ScriptEngine.run(ScriptEngine.java:310)
at org.apache.pig.Main.runEmbeddedScript(Main.java:1096)
at org.apache.pig.Main.run(Main.java:584)
at org.apache.pig.Main.main(Main.java:175)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:498)
at org.apache.hadoop.util.RunJar.run(RunJar.java:328)
at org.apache.hadoop.util.RunJar.main(RunJar.java:241)
Caused by: java.lang.ClassNotFoundException: org.junit.rules.ExpectedException
at java.net.URLClassLoader.findClass(URLClassLoader.java:382)
at java.lang.ClassLoader.loadClass(ClassLoader.java:418)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)
at java.lang.ClassLoader.loadClass(ClassLoader.java:351)
... 37 more
java.lang.NoClassDefFoundError: java.lang.NoClassDefFoundError: Lorg/junit/rules/ExpectedException;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13587331">PIG-5459</key>
            <summary>Jython_Checkin_3 e2e failing with NoClassDefFoundError (hadoop3)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knoguchi">Koji Noguchi</assignee>
                                    <reporter username="knoguchi">Koji Noguchi</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Jul 2024 13:25:06 +0000</created>
                <updated>Mon, 15 Sep 2025 11:29:08 +0000</updated>
                            <resolved>Wed, 25 Sep 2024 20:30:55 +0000</resolved>
                                                    <fixVersion>0.18.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17869647" author="knoguchi" created="Tue, 30 Jul 2024 13:38:20 +0000"  >&lt;p&gt;It confused me on why regular run (e2e) is requiring junit jar. &lt;br/&gt;
It turns out &lt;br/&gt;
&quot;from org.apache.hadoop.conf import *&quot; &lt;br/&gt;
line matches classes from test jars that Hadoop3 added as part of regular lib.&lt;br/&gt;
For example &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;/tmp/hadoop-3.3.6/share/hadoop/common/hadoop-common-3.3.6-tests.jar ===========
     0 Sun Jun 18 08:22:40 UTC 2023 org/apache/hadoop/conf/
  2151 Sun Jun 18 08:22:38 UTC 2023 org/apache/hadoop/conf/TestConfigurationDeprecation$1.class
   522 Sun Jun 18 08:22:38 UTC 2023 org/apache/hadoop/conf/TestGetInstances$SampleClass.class
  2291 Sun Jun 18 08:22:38 UTC 2023 org/apache/hadoop/conf/TestConfigurationDeprecation$2.class
   333 Sun Jun 18 08:22:38 UTC 2023 org/apache/hadoop/conf/TestGetInstances$ChildInterface.class
  2203 Sun Jun 18 08:22:38 UTC 2023 org/apache/hadoop/conf/TestGetInstances.class
  2358 Sun Jun 18 08:22:36 UTC 2023 org/apache/hadoop/conf/TestConfigurationSubclass.class
  3335 Sun Jun 18 08:22:36 UTC 2023 org/apache/hadoop/conf/TestDeprecatedKeys.class
 71538 Sun Jun 18 08:22:36 UTC 2023 org/apache/hadoop/conf/TestConfiguration.class
...
/tmp/hadoop-3.3.6/share/hadoop/mapreduce/hadoop-mapreduce-client-jobclient-3.3.6-tests.jar ===========
     0 Sun Jun 18 08:42:34 UTC 2023 org/apache/hadoop/conf/
  4469 Sun Jun 18 08:42:34 UTC 2023 org/apache/hadoop/conf/TestNoDefaultsJobConf.class
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now, these classes requires junit.  &lt;br/&gt;
One option is to skip these test jars but that requires changes on the hadoop side (since pig is calling hadoop commandline to start up pig.)&lt;br/&gt;
Second option is to give it up and add the required junit jars to lib dir.    &lt;br/&gt;
Third option is to skip this test and let users add junit jars if they really need to call &lt;br/&gt;
&quot;from org.apache.hadoop.conf import *&quot;. but it&apos;s pretty tough to understand what&apos;s happening when users hit this.&lt;/p&gt;</comment>
                            <comment id="17869735" author="knoguchi" created="Tue, 30 Jul 2024 19:05:37 +0000"  >&lt;p&gt;&amp;gt; Second option is to give it up and add the required junit jars to lib dir.&lt;br/&gt;
&amp;gt;&lt;br/&gt;
Attaching a patch which does this.&lt;/p&gt;</comment>
                            <comment id="17882811" author="rohini" created="Wed, 18 Sep 2024 21:00:12 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="17884776" author="knoguchi" created="Wed, 25 Sep 2024 20:30:55 +0000"  >&lt;p&gt;Thanks for the review Rohini! &lt;/p&gt;

&lt;p&gt;Committed to trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13070570" name="pig-5459-v01.patch" size="596" author="knoguchi" created="Tue, 30 Jul 2024 19:05:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 6 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1qlo0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>