<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:02:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PIG-5245] TestGrunt.testStopOnFailure is flaky</title>
                <link>https://issues.apache.org/jira/browse/PIG-5245</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;  The test is supposed to run two tests in parallel, and one when fails other should be killed when stop on failure is configured. But the test is actually running only job at a time and based on the order in which jobs are run it is passing. This is because of the capacity scheduler configuration of the MiniCluster. It runs only one AM at a time due to resource restrictions. In a 16G node, when the first job runs it takes up 1536 (AM) + 1024 (task) memory.mb. Since only 10% of cluster resource is the default for running AMs and a single AM already takes up memory close to 1.6G, second job AM is not launched.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13076113">PIG-5245</key>
            <summary>TestGrunt.testStopOnFailure is flaky</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rohini">Rohini Palaniswamy</assignee>
                                    <reporter username="rohini">Rohini Palaniswamy</reporter>
                        <labels>
                    </labels>
                <created>Wed, 31 May 2017 07:21:38 +0000</created>
                <updated>Wed, 21 Jun 2017 09:15:19 +0000</updated>
                            <resolved>Wed, 31 May 2017 20:30:05 +0000</resolved>
                                                    <fixVersion>0.17.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16030781" author="rohini" created="Wed, 31 May 2017 07:33:34 +0000"  >&lt;p&gt;Reduced general resource and heap usage of AM and task containers for mapreduce mode and increased number of AM containers to 20% of cluster resource (node RAM).  Will look into doing it in YARNMiniCluster (tez and spark) as well in 0.18.&lt;/p&gt;</comment>
                            <comment id="16030814" author="szita" created="Wed, 31 May 2017 08:09:54 +0000"  >&lt;p&gt;+1 for &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12870536/12870536_PIG-5245-1.patch&quot; title=&quot;PIG-5245-1.patch attached to PIG-5245&quot;&gt;PIG-5245-1.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="16030833" author="rohini" created="Wed, 31 May 2017 08:28:34 +0000"  >&lt;p&gt;Skipped this test for Spark as stop on failure is not implemented. Also added these configs to YarnMiniCluster as well.  Running full unit tests for MR and Tez. Will update once done.&lt;/p&gt;</comment>
                            <comment id="16030847" author="kellyzly" created="Wed, 31 May 2017 08:46:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rohini&quot; class=&quot;user-hover&quot; rel=&quot;rohini&quot;&gt;rohini&lt;/a&gt;: stop_on_failure is implemented in spark mode in &lt;a href=&quot;https://github.com/apache/pig/blob/trunk/src/org/apache/pig/backend/hadoop/executionengine/spark/JobGraphBuilder.java#L193&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JobGraphBuilder.java&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16030988" author="szita" created="Wed, 31 May 2017 11:07:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kellyzly&quot; class=&quot;user-hover&quot; rel=&quot;kellyzly&quot;&gt;kellyzly&lt;/a&gt; I think that has a different mechanism compared to MR, it doesn&apos;t fail an existing job, merely prevents the new one to be submitted. I think it would be worth to rethink the stopOnFailure feature wrt. Spark mode. Let&apos;s do this in &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-5247&quot; title=&quot;Investigate stopOnFailure feature with Spark execution engine&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-5247&quot;&gt;PIG-5247&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16030993" author="nkollar" created="Wed, 31 May 2017 11:15:03 +0000"  >&lt;p&gt;Having this test fixed for MR and for Tez, but not for Spark, can we still proceed with the release? In my opinion this is not a blocker issue for Spark. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kellyzly&quot; class=&quot;user-hover&quot; rel=&quot;kellyzly&quot;&gt;kellyzly&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szita&quot; class=&quot;user-hover&quot; rel=&quot;szita&quot;&gt;szita&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rohini&quot; class=&quot;user-hover&quot; rel=&quot;rohini&quot;&gt;rohini&lt;/a&gt; what do you think? +1 for &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-5245&quot; title=&quot;TestGrunt.testStopOnFailure is flaky&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-5245&quot;&gt;&lt;del&gt;PIG-5245&lt;/del&gt;&lt;/a&gt;-2.patch&lt;/p&gt;</comment>
                            <comment id="16031188" author="szita" created="Wed, 31 May 2017 13:55:35 +0000"  >&lt;p&gt;+1 for &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12870540/12870540_PIG-5245-2.patch&quot; title=&quot;PIG-5245-2.patch attached to PIG-5245&quot;&gt;PIG-5245-2.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; - I verified all Spark unit tests pass (3,338 tests in 2hr 7min). I don&apos;t think this is a blocker issue &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nkollar&quot; class=&quot;user-hover&quot; rel=&quot;nkollar&quot;&gt;nkollar&lt;/a&gt; we will address Spark vs stopOnFailure in Pig 0.18&lt;/p&gt;</comment>
                            <comment id="16031205" author="szita" created="Wed, 31 May 2017 14:00:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rohini&quot; class=&quot;user-hover&quot; rel=&quot;rohini&quot;&gt;rohini&lt;/a&gt; I&apos;ve spotted a missing part in the YarnMinicluster classpath compilation. If we want to run tests in Spark mode with &lt;tt&gt;SPARK_MASTER=yarn-client&lt;/tt&gt; config (rather than &lt;tt&gt;local&lt;/tt&gt; which is now default) we will need the Spark jars for the forked JVMs. I&apos;ve attached &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12870577/12870577_PIG-5245-2.addingSparkLibsToMiniCluster.patch&quot; title=&quot;PIG-5245-2.addingSparkLibsToMiniCluster.patch attached to PIG-5245&quot;&gt;PIG-5245-2.addingSparkLibsToMiniCluster.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; which you can apply after &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12870540/12870540_PIG-5245-2.patch&quot; title=&quot;PIG-5245-2.patch attached to PIG-5245&quot;&gt;PIG-5245-2.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;. It will be helpful in the future.&lt;/p&gt;</comment>
                            <comment id="16031801" author="rohini" created="Wed, 31 May 2017 19:28:05 +0000"  >&lt;p&gt;Final patch including &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szita&quot; class=&quot;user-hover&quot; rel=&quot;szita&quot;&gt;szita&lt;/a&gt;&apos;s changes for spark. Also reduced the AM percentage to 0.1 as that itself should allow launching 3AMs with a 16G RAM. &lt;/p&gt;</comment>
                            <comment id="16031861" author="szita" created="Wed, 31 May 2017 20:11:10 +0000"  >&lt;p&gt;+1 for &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12870626/12870626_PIG-5245-3.patch&quot; title=&quot;PIG-5245-3.patch attached to PIG-5245&quot;&gt;PIG-5245-3.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="16031902" author="rohini" created="Wed, 31 May 2017 20:30:05 +0000"  >&lt;p&gt;Patch committed to branch-0.17 and trunk. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szita&quot; class=&quot;user-hover&quot; rel=&quot;szita&quot;&gt;szita&lt;/a&gt;, thanks for the review and debugging of the issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12870536" name="PIG-5245-1.patch" size="1911" author="rohini" created="Wed, 31 May 2017 07:33:34 +0000"/>
                            <attachment id="12870577" name="PIG-5245-2.addingSparkLibsToMiniCluster.patch" size="1608" author="szita" created="Wed, 31 May 2017 13:57:44 +0000"/>
                            <attachment id="12870540" name="PIG-5245-2.patch" size="5209" author="rohini" created="Wed, 31 May 2017 08:28:34 +0000"/>
                            <attachment id="12870626" name="PIG-5245-3.patch" size="6016" author="rohini" created="Wed, 31 May 2017 19:28:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 24 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3fokv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>