<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:58:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PIG-3913] Pig should use job&apos;s jobClient wherever possible (fixes local mode counters)</title>
                <link>https://issues.apache.org/jira/browse/PIG-3913</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;MapreduceLauncher initializes a statsJobClient to poll counter information of jobs. This works fine in mapreduce mode but it reports incorrect information in local (auto-local) mode. Pig code should try to use org.apache.hadoop.mapred.jobcontrol.Job&apos;s getJobClient api to get handle to jobClient wherever possible. statsJobClient (and wherever its references are passed) should be deprecated.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12711345">PIG-3913</key>
            <summary>Pig should use job&apos;s jobClient wherever possible (fixes local mode counters)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aniket486">Aniket Namadeo Mokashi</assignee>
                                    <reporter username="aniket486">Aniket Namadeo Mokashi</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Apr 2014 00:13:43 +0000</created>
                <updated>Mon, 7 Jul 2014 18:08:01 +0000</updated>
                            <resolved>Tue, 20 May 2014 17:50:42 +0000</resolved>
                                    <version>0.13.0</version>
                                    <fixVersion>0.13.0</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13985005" author="julienledem" created="Wed, 30 Apr 2014 00:24:38 +0000"  >&lt;p&gt;This looks good to me.&lt;br/&gt;
Please add javadoc for deprecated methods with information about the new way of doing the same thing.&lt;br/&gt;
+1&lt;/p&gt;</comment>
                            <comment id="13985851" author="aniket486" created="Wed, 30 Apr 2014 18:07:07 +0000"  >&lt;p&gt;Thanks for the review, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=julienledem&quot; class=&quot;user-hover&quot; rel=&quot;julienledem&quot;&gt;julienledem&lt;/a&gt;. I realized that we have some code in pig that will avoiding printing counters in local mode (since they were broken). Let me clean up that code so that counters are available again with local mode.&lt;/p&gt;

&lt;p&gt;Also, I will test with hadoop 2 to see if this fix works with it.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=daijy&quot; class=&quot;user-hover&quot; rel=&quot;daijy&quot;&gt;daijy&lt;/a&gt;, any known issues I should be aware of here?&lt;/p&gt;</comment>
                            <comment id="13992318" author="jira.shegalov" created="Wed, 7 May 2014 22:47:36 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aniket486&quot; class=&quot;user-hover&quot; rel=&quot;aniket486&quot;&gt;aniket486&lt;/a&gt;, I am uploading a patch that I think demonstrates how it should work with MRv2. It won&apos;t compile with hadoop20. &lt;/p&gt;</comment>
                            <comment id="13992387" author="aniket486" created="Thu, 8 May 2014 00:39:37 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jira.shegalov&quot; class=&quot;user-hover&quot; rel=&quot;jira.shegalov&quot;&gt;jira.shegalov&lt;/a&gt;, this looks great. Let&apos;s wrap it up and commit it.&lt;/p&gt;</comment>
                            <comment id="13993148" author="aniket486" created="Thu, 8 May 2014 21:38:27 +0000"  >&lt;p&gt;Looking at this, it seems main difference is - in hadoop 1, jobcontrol.Job does not support an api to get the mapreduce/mapred.Job object from it (in fact it does not even store it). In hadoop 2, jobcontrol.Job is just a wrapper around ControlledJob which stores a pointer to the real mapreduce.Job. In hadoop 1 for querying stats, we should get jobClient of the job and ask for the runningJob given the JobID for the job. In hadoop 2, we should directly the real job using getJob of jobcontrol.Job and query it for stats.&lt;/p&gt;

&lt;p&gt;I will construct necessary shims to hide this behind interfaces.&lt;/p&gt;</comment>
                            <comment id="13994005" author="aniket486" created="Fri, 9 May 2014 22:39:51 +0000"  >&lt;p&gt;Added a new patch for this.&lt;/p&gt;</comment>
                            <comment id="13994315" author="jira.shegalov" created="Sat, 10 May 2014 22:00:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aniket486&quot; class=&quot;user-hover&quot; rel=&quot;aniket486&quot;&gt;aniket486&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3913&quot; title=&quot;Pig should use job&amp;#39;s jobClient wherever possible (fixes local mode counters)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3913&quot;&gt;&lt;del&gt;PIG-3913&lt;/del&gt;&lt;/a&gt;-3 patch is incomplete, DowngradeHelper.java is missing.&lt;/p&gt;</comment>
                            <comment id="13995297" author="aniket486" created="Mon, 12 May 2014 17:37:58 +0000"  >&lt;p&gt;I&apos;ve attached &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3913&quot; title=&quot;Pig should use job&amp;#39;s jobClient wherever possible (fixes local mode counters)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3913&quot;&gt;&lt;del&gt;PIG-3913&lt;/del&gt;&lt;/a&gt;-5.patch.&lt;/p&gt;</comment>
                            <comment id="13997002" author="jcoveney" created="Tue, 13 May 2014 22:38:45 +0000"  >&lt;p&gt;Can you throw this in the apache reviewboard? #highmaintenace&lt;/p&gt;</comment>
                            <comment id="13997880" author="aniket486" created="Wed, 14 May 2014 18:46:02 +0000"  >&lt;p&gt;#GoodIdea: &lt;a href=&quot;https://reviews.apache.org/r/21454/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/21454/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13999581" author="jira.shegalov" created="Fri, 16 May 2014 04:06:48 +0000"  >&lt;p&gt;+1 (non-binding) modulo nits on RB&lt;/p&gt;</comment>
                            <comment id="14002474" author="cheolsoo" created="Mon, 19 May 2014 21:59:30 +0000"  >&lt;p&gt;+1. Let&apos;s commit this.&lt;/p&gt;

&lt;p&gt;Btw, the patch needs to be rebased to trunk. In addition, &lt;tt&gt;hadoop23/HadoopShims.java&lt;/tt&gt; has unused imports. Please fix them when committing the patch.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="14002486" author="aniket486" created="Mon, 19 May 2014 22:12:36 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jira.shegalov&quot; class=&quot;user-hover&quot; rel=&quot;jira.shegalov&quot;&gt;jira.shegalov&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cheolsoo&quot; class=&quot;user-hover&quot; rel=&quot;cheolsoo&quot;&gt;cheolsoo&lt;/a&gt; for the review. I will incorporate your comments and commit this to trunk!&lt;/p&gt;</comment>
                            <comment id="14003734" author="aniket486" created="Tue, 20 May 2014 17:50:33 +0000"  >&lt;p&gt;Committed to trunk! (review updated and patch attached).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12704364">PIG-3853</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12702792">PIG-3825</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12440674">MAPREDUCE-1214</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12716117">PIG-3958</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12642568" name="PIG-3913-1.patch" size="8008" author="aniket486" created="Wed, 30 Apr 2014 00:17:22 +0000"/>
                            <attachment id="12644202" name="PIG-3913-3.patch" size="30171" author="aniket486" created="Fri, 9 May 2014 22:39:38 +0000"/>
                            <attachment id="12644442" name="PIG-3913-5.patch" size="30849" author="aniket486" created="Mon, 12 May 2014 17:37:20 +0000"/>
                            <attachment id="12644866" name="PIG-3913-6.patch" size="31646" author="aniket486" created="Wed, 14 May 2014 18:46:16 +0000"/>
                            <attachment id="12645834" name="PIG-3913-7.patch" size="31034" author="aniket486" created="Tue, 20 May 2014 17:46:26 +0000"/>
                            <attachment id="12643869" name="PIG-3913-MRv2.v01.patch" size="27810" author="jira.shegalov" created="Wed, 7 May 2014 22:47:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>389666</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 27 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1v4br:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>389908</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>