<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:00:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PIG-3413] JsonLoader fails the pig job in case of malformed json input</title>
                <link>https://issues.apache.org/jira/browse/PIG-3413</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;The following pig script: &lt;br/&gt;
b = load &apos;bad.input&apos; using JsonLoader(&apos;a0: chararray&apos;);&lt;br/&gt;
dump b;&lt;/p&gt;

&lt;p&gt;runs well for the input:&lt;/p&gt;
{&quot;a&quot;: &quot;good&quot;}

&lt;p&gt;and fails the whole job for the following input (mallformed json)&lt;/p&gt;
{&quot;a&quot;, bad}


&lt;p&gt;I was expecting that it will just skip the line and go further.&lt;/p&gt;

&lt;p&gt;Getting this error:&lt;br/&gt;
org.codehaus.jackson.JsonParseException: Unexpected character (&apos;g&apos; (code 103)): was expecting comma to separate OBJECT entries&lt;br/&gt;
 at &lt;span class=&quot;error&quot;&gt;&amp;#91;Source: java.io.ByteArrayInputStream@4610c772; line: 1, column: 4100&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.codehaus.jackson.JsonParser._constructError(JsonParser.java:1433)&lt;br/&gt;
	at org.codehaus.jackson.impl.JsonParserMinimalBase._reportError(JsonParserMinimalBase.java:521)&lt;br/&gt;
	at org.codehaus.jackson.impl.JsonParserMinimalBase._reportUnexpectedChar(JsonParserMinimalBase.java:442)&lt;br/&gt;
	at org.codehaus.jackson.impl.Utf8StreamParser.nextToken(Utf8StreamParser.java:482)&lt;br/&gt;
	at org.apache.pig.builtin.JsonLoader.readField(JsonLoader.java:173)&lt;br/&gt;
	at org.apache.pig.builtin.JsonLoader.getNext(JsonLoader.java:157)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigRecordReader.nextKeyValue(PigRecordReader.java:211)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapTask$NewTrackingRecordReader.nextKeyValue(MapTask.java:540)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.MapContext.nextKeyValue(MapContext.java:67)&lt;br/&gt;
	at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:143)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:771)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:375)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child$4.run(Child.java:255)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1132)&lt;br/&gt;
	at org.apache.hadoop.mapred.Child.main(Child.java:249)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12662651">PIG-3413</key>
            <summary>JsonLoader fails the pig job in case of malformed json input</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="eyal">Eyal Allweil</assignee>
                                    <reporter username="sztanko">Demeter Sztanko</reporter>
                        <labels>
                            <label>json</label>
                            <label>loader</label>
                            <label>pig</label>
                    </labels>
                <created>Thu, 8 Aug 2013 16:48:38 +0000</created>
                <updated>Sun, 7 Jun 2015 03:48:28 +0000</updated>
                            <resolved>Mon, 10 Nov 2014 07:22:49 +0000</resolved>
                                    <version>0.11.1</version>
                                    <fixVersion>0.15.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="7200">2h</timeoriginalestimate>
                            <timeestimate seconds="7200">2h</timeestimate>
                                        <comments>
                            <comment id="13733671" author="sztanko" created="Thu, 8 Aug 2013 16:49:56 +0000"  >&lt;p&gt;It is fairly trivial to fix it (just catch the JsonParseException and return null) and I am going to submit a patch soon.&lt;/p&gt;</comment>
                            <comment id="13806201" author="cheolsoo" created="Sun, 27 Oct 2013 01:34:23 +0000"  >&lt;p&gt;Please mark as patch available &lt;em&gt;after&lt;/em&gt; uploading a patch.&lt;/p&gt;</comment>
                            <comment id="14194518" author="eyal" created="Mon, 3 Nov 2014 13:18:54 +0000"  >&lt;p&gt;Still interested in a patch? It does look pretty simple. If so, for what branch?&lt;/p&gt;</comment>
                            <comment id="14194849" author="daijy" created="Mon, 3 Nov 2014 18:29:13 +0000"  >&lt;p&gt;You can base your patch with trunk.&lt;/p&gt;</comment>
                            <comment id="14195963" author="eyal" created="Tue, 4 Nov 2014 09:51:43 +0000"  >&lt;p&gt;I&apos;m having trouble building trunk - probably because of &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3399&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;PIG-3399&lt;/a&gt;. I tested it out on Pig 0.11 (which I can build) because that&apos;s what I&apos;m using, and because it builds successfully for me in Eclipse. Should I put a patch for that, for 11.2? Or do you have any pointers for dealing with &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3399&quot; title=&quot;Missing required library: &amp;#39;build/ivy/lib/Pig/javacc-4.2.jar&amp;#39; pig&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3399&quot;&gt;PIG-3399&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="14203933" author="eyal" created="Sun, 9 Nov 2014 14:33:49 +0000"  >&lt;p&gt;This is a patch based on trunk which includes the fix for ignoring malformed jsons (a warning is issued) and a new unit test (within TestJsonLoaderStorage).&lt;/p&gt;

&lt;p&gt;This bug affects the newer Pig versions, too, not just 0.11.1&lt;/p&gt;</comment>
                            <comment id="14204452" author="daijy" created="Mon, 10 Nov 2014 07:22:49 +0000"  >&lt;p&gt;+1.&lt;/p&gt;

&lt;p&gt;Patch committed to trunk. Thanks Eyal!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12680483" name="PIG-3413.patch" size="4130" author="eyal" created="Sun, 9 Nov 2014 14:33:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>342654</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 2 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1n3d3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>342958</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>