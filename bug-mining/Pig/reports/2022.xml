<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:04:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PIG-5446] Tez TestPigProgressReporting.testProgressReportingWithStatusMessage failing</title>
                <link>https://issues.apache.org/jira/browse/PIG-5446</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Unable to open iterator for alias B. Backend error : Vertex failed, vertexName=scope-4, vertexId=vertex_1707216362777_0001_1_00, diagnostics=[Task failed, taskId=task_1707216362777_0001_1_00_000000, diagnostics=[TaskAttempt 0 failed, info=[Attempt failed because it appears to make no progress for 10000ms], TaskAttempt 1 failed, info=[Attempt failed because it appears to make no progress for 10000ms]], Vertex did not succeed due to OWN_TASK_FAILURE, failedTasks:1 killedTasks:0, Vertex vertex_1707216362777_0001_1_00 [scope-4] killed/failed due to:OWN_TASK_FAILURE] DAG did not succeed due to VERTEX_FAILURE. failedVertices:1 killedVertices:0

org.apache.pig.impl.logicalLayer.FrontendException: ERROR 1066: Unable to open iterator for alias B. Backend error : Vertex failed, vertexName=scope-4, vertexId=vertex_1707216362777_0001_1_00, diagnostics=[Task failed, taskId=task_1707216362777_0001_1_00_000000, diagnostics=[TaskAttempt 0 failed, info=[Attempt failed because it appears to make no progress for 10000ms], TaskAttempt 1 failed, info=[Attempt failed because it appears to make no progress for 10000ms]], Vertex did not succeed due to OWN_TASK_FAILURE, failedTasks:1 killedTasks:0, Vertex vertex_1707216362777_0001_1_00 [scope-4] killed/failed due to:OWN_TASK_FAILURE]
DAG did not succeed due to VERTEX_FAILURE. failedVertices:1 killedVertices:0
at org.apache.pig.PigServer.openIterator(PigServer.java:1014)
at org.apache.pig.test.TestPigProgressReporting.testProgressReportingWithStatusMessage(TestPigProgressReporting.java:58)
Caused by: org.apache.tez.dag.api.TezException: Vertex failed, vertexName=scope-4, vertexId=vertex_1707216362777_0001_1_00, diagnostics=[Task failed, taskId=task_1707216362777_0001_1_00_000000, diagnostics=[TaskAttempt 0 failed, info=[Attempt failed because it appears to make no progress for 10000ms], TaskAttempt 1 failed, info=[Attempt failed because it appears to make no progress for 10000ms]], Vertex did not succeed due to OWN_TASK_FAILURE, failedTasks:1 killedTasks:0, Vertex vertex_1707216362777_0001_1_00 [scope-4] killed/failed due to:OWN_TASK_FAILURE]
DAG did not succeed due to VERTEX_FAILURE. failedVertices:1 killedVertices:0
at org.apache.pig.tools.pigstats.tez.TezPigScriptStats.accumulateStats(TezPigScriptStats.java:204)
at org.apache.pig.backend.hadoop.executionengine.tez.TezJob.run(TezJob.java:243)
at org.apache.pig.backend.hadoop.executionengine.tez.TezLauncher$1.run(TezLauncher.java:212)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
at java.util.concurrent.FutureTask.run(FutureTask.java:266)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
at java.lang.Thread.run(Thread.java:748)
45.647 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13567653">PIG-5446</key>
            <summary>Tez TestPigProgressReporting.testProgressReportingWithStatusMessage failing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knoguchi">Koji Noguchi</assignee>
                                    <reporter username="knoguchi">Koji Noguchi</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Feb 2024 19:18:22 +0000</created>
                <updated>Mon, 15 Sep 2025 11:29:05 +0000</updated>
                            <resolved>Tue, 14 May 2024 20:46:10 +0000</resolved>
                                                    <fixVersion>0.18.0</fixVersion>
                                    <component>tez</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17814970" author="knoguchi" created="Tue, 6 Feb 2024 19:21:55 +0000"  >&lt;p&gt;From&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;testProgressReportingWithStatusMessage&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
            cluster.setProperty(MRConfiguration.TASK_TIMEOUT, &lt;span class=&quot;code-quote&quot;&gt;&quot;10000&quot;&lt;/span&gt;);
...
            pig.registerQuery(&lt;span class=&quot;code-quote&quot;&gt;&quot;A = load &lt;span class=&quot;code-quote&quot;&gt;&apos;a.txt&apos;&lt;/span&gt; as (f1:chararray);&quot;&lt;/span&gt;);
            pig.registerQuery(&lt;span class=&quot;code-quote&quot;&gt;&quot;B = foreach A generate org.apache.pig.test.utils.ReportingUDF();&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;ReportingUDF()&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ReportingUDF &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; EvalFunc&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; {

    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; exec(Tuple input) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {

        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(7500);
            PigStatusReporter reporter = PigStatusReporter.getInstance();
            reporter.progress();
            &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(7500);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InterruptedException e) {
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 100;
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So basically, even though pig is calling &quot;reporter.progress()&quot; after 7.5 seconds, Tez task is failing with &quot;Attempt failed because it appears to make no progress for 10000ms&quot;. &lt;/p&gt;
</comment>
                            <comment id="17814983" author="knoguchi" created="Tue, 6 Feb 2024 19:33:59 +0000"  >&lt;p&gt;It seems like &quot;reporter.progress()&quot; is a no-op in Tez pig. &lt;br/&gt;
Test started failing after upgrading the dependent Tez version.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-4700&quot; title=&quot;Enable progress reporting for Tasks in Tez&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-4700&quot;&gt;&lt;del&gt;PIG-4700&lt;/del&gt;&lt;/a&gt; only enabled progress reporting after Tez 0.8.5 and after.&lt;/p&gt;

&lt;p&gt;Attaching a patch that simply calls &quot;context.notifyProgress&quot; for every &quot;reporter.progress()&quot; calls. &lt;/p&gt;</comment>
                            <comment id="17826791" author="rohini" created="Wed, 13 Mar 2024 16:39:09 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="17846442" author="knoguchi" created="Tue, 14 May 2024 20:46:10 +0000"  >&lt;p&gt;Thanks for the review Rohini!&#160;&lt;br/&gt;
Committed to trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13066530" name="pig-5446-v01.patch" size="688" author="knoguchi" created="Tue, 6 Feb 2024 19:37:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1n9ao:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>