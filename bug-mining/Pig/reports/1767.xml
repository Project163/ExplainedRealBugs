<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:01:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PIG-4670] Embedded Python scripts still parse line by line</title>
                <link>https://issues.apache.org/jira/browse/PIG-4670</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3204&quot; title=&quot;Change script parsing to parse entire script instead of line by line&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3204&quot;&gt;&lt;del&gt;PIG-3204&lt;/del&gt;&lt;/a&gt; fixed pig script parsing to parse in batches instead of line by line. But the fix in BoundScript is not right and it is still parsing line by line. That makes parsing take long time for very large pig scripts using PigStorage when there is no schema file stored and without -noschema as it tries to find the schema file lots of times.&lt;/p&gt;

&lt;p&gt;It should be grunt.parseStopOnError(false); instead of grunt.parseStopOnError(true); to make it parse statements in batch.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12861881">PIG-4670</key>
            <summary>Embedded Python scripts still parse line by line</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rohini">Rohini Palaniswamy</assignee>
                                    <reporter username="rohini">Rohini Palaniswamy</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Sep 2015 16:24:45 +0000</created>
                <updated>Wed, 8 Jun 2016 20:48:34 +0000</updated>
                            <resolved>Sun, 4 Oct 2015 18:23:41 +0000</resolved>
                                                    <fixVersion>0.16.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14939035" author="daijy" created="Wed, 30 Sep 2015 23:12:21 +0000"  >&lt;p&gt;+1. Can you put an explanation why no test added?&lt;/p&gt;</comment>
                            <comment id="14939052" author="rohini" created="Wed, 30 Sep 2015 23:27:49 +0000"  >&lt;blockquote&gt;&lt;p&gt;Can you put an explanation why no test added?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;   It just basically changes how a script is parsed and executed - in batch instead of line by line. So existing script tests for unit (TestScript*) and e2e would cover it.&lt;/p&gt;</comment>
                            <comment id="14941674" author="rohini" created="Fri, 2 Oct 2015 20:11:41 +0000"  >&lt;p&gt;Actually it is better to have a test case added to verify if it is actually properly working. Added to the existing testcase which was testing the number of initiations when script was parsed. &lt;/p&gt;</comment>
                            <comment id="14941868" author="daijy" created="Fri, 2 Oct 2015 22:15:48 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14942756" author="rohini" created="Sun, 4 Oct 2015 18:23:41 +0000"  >&lt;p&gt;Committed to trunk. Thanks Daniel for the review.&lt;/p&gt;</comment>
                            <comment id="14949606" author="rohini" created="Thu, 8 Oct 2015 23:29:50 +0000"  >&lt;p&gt;Tests Jython_Diagnostics 1,2,3 were failing. &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-4670&quot; title=&quot;Embedded Python scripts still parse line by line&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-4670&quot;&gt;&lt;del&gt;PIG-4670&lt;/del&gt;&lt;/a&gt;-fix-e2e-failures.patch fixes that. Attached a version without whitespace change as well for easy reviewing. Illustrate still fails for tez mode complaining of &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Caused by: java.lang.ClassCastException: org.apache.pig.tools.pigstats.tez.TezScriptState cannot be &lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt; to org.apache.pig.tools.pigstats.mapreduce.MRScriptState
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;in LocalMapreduceSimulator. Apparently it was succeeding with mapreduce before. Anyways skipped it for tez as illustrate is not implemented. &lt;/p&gt;</comment>
                            <comment id="14949668" author="daijy" created="Fri, 9 Oct 2015 00:29:21 +0000"  >&lt;p&gt;I see you disable illustrate tests for tez. What are other changes about?&lt;/p&gt;</comment>
                            <comment id="14950218" author="rohini" created="Fri, 9 Oct 2015 11:09:53 +0000"  >&lt;p&gt;I ended up changing code for describe and explain as well earlier which caused the query to execute. So reverted changes in that case back to what it was. Basically it turns on the batch, but called parseStopOnError(true) so that executeBatch() is not done in parseStopOnError. &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!sameBatch) {
                executeBatch();
            }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Additionally added pigServer.setSkipParseInRegisterForBatch(true); to skip parsing while registering query as dumpSchema() was calling parseQuery again.&lt;/p&gt;</comment>
                            <comment id="14954095" author="daijy" created="Tue, 13 Oct 2015 00:11:46 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14954308" author="rohini" created="Tue, 13 Oct 2015 03:34:29 +0000"  >&lt;p&gt;Committed &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12765711/PIG-4670-fix-e2e-failures.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12765711/PIG-4670-fix-e2e-failures.patch&lt;/a&gt;. Thanks for the review Daniel.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12633479">PIG-3204</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12754221" name="PIG-4670-1.patch" size="10957" author="rohini" created="Fri, 4 Sep 2015 16:28:14 +0000"/>
                            <attachment id="12764839" name="PIG-4670-2.patch" size="15831" author="rohini" created="Fri, 2 Oct 2015 20:11:41 +0000"/>
                            <attachment id="12765710" name="PIG-4670-fix-e2e-failures-nowhitespacechange.patch" size="4955" author="rohini" created="Thu, 8 Oct 2015 23:29:50 +0000"/>
                            <attachment id="12765711" name="PIG-4670-fix-e2e-failures.patch" size="10033" author="rohini" created="Thu, 8 Oct 2015 23:29:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 6 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jss7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>