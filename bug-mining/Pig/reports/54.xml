<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:48:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PIG-353] Certain parse errors force exit from grunt (interactive mode)</title>
                <link>https://issues.apache.org/jira/browse/PIG-353</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;I tried the following load:&lt;/p&gt;

&lt;p&gt;A = load &apos;foo&apos; as (B: bag&lt;/p&gt;
{T: tuple(I: int)}
&lt;p&gt;);&lt;/p&gt;

&lt;p&gt;and it gave me a huge stack and through me out of grunt&lt;/p&gt;</description>
                <environment></environment>
        <key id="12401513">PIG-353</key>
            <summary>Certain parse errors force exit from grunt (interactive mode)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sms">Santhosh Muthur Srinivasan</assignee>
                                    <reporter username="olgan">Olga Natkovich</reporter>
                        <labels>
                    </labels>
                <created>Fri, 1 Aug 2008 21:21:39 +0000</created>
                <updated>Wed, 24 Mar 2010 22:04:05 +0000</updated>
                            <resolved>Mon, 25 Aug 2008 22:59:46 +0000</resolved>
                                    <version>0.2.0</version>
                                    <fixVersion>0.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12623339" author="sms" created="Mon, 18 Aug 2008 12:37:48 +0000"  >&lt;p&gt;The attached patch addresses the issue of declaring bag schemas using grunt. PigScriptParser.java was modified to have an additional lexical state for schemas. The opening curly brace &apos;{&apos; in the bag schema was being treated as the delimiter of a nested block. With the additional lexical state the schema definition is tokenized appropriately.&lt;/p&gt;

&lt;p&gt;Unit test cases that still fail are:&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.pig.test.TestBuiltin&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 23, Failures: 1, Errors: 2, Time elapsed: 14.305 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.pig.test.TestBuiltin FAILED&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.pig.test.TestEvalPipeline&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 9, Failures: 1, Errors: 0, Time elapsed: 195.352 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.pig.test.TestEvalPipeline FAILED&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.pig.test.TestFilterOpNumeric&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 8, Failures: 0, Errors: 1, Time elapsed: 57.163 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.pig.test.TestFilterOpNumeric FAILED&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.pig.test.TestMRCompiler&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 16, Failures: 1, Errors: 0, Time elapsed: 0.353 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.pig.test.TestMRCompiler FAILED&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.pig.test.TestStoreOld&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 3, Failures: 0, Errors: 2, Time elapsed: 39.973 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.pig.test.TestStoreOld FAILED&lt;/p&gt;</comment>
                            <comment id="12623340" author="sms" created="Mon, 18 Aug 2008 12:39:14 +0000"  >&lt;p&gt;Pig-349 (&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-349&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/PIG-349&lt;/a&gt;) is a duplicate of this issue and has been marked so.&lt;/p&gt;</comment>
                            <comment id="12623423" author="olgan" created="Mon, 18 Aug 2008 18:07:04 +0000"  >&lt;p&gt;Santhosh, the original problem seems to be gone. But the following case does not work:&lt;/p&gt;

&lt;p&gt;B = load &apos;foo&apos; as (B: bag&lt;/p&gt;
{(I: int)}
&lt;p&gt;);&lt;/p&gt;

&lt;p&gt;Is this a valid syntax?&lt;/p&gt;</comment>
                            <comment id="12623565" author="sms" created="Tue, 19 Aug 2008 05:43:48 +0000"  >&lt;p&gt;B = load &apos;foo&apos; as (B: bag&lt;/p&gt;
{(I: int)}
&lt;p&gt;); is not valid syntax. Each element in the schema has to have a name. The valid syntax would be one of:&lt;/p&gt;

&lt;p&gt;B = load &apos;foo&apos; as (B: bag&lt;/p&gt;
{t (I: int)}
&lt;p&gt;);&lt;/p&gt;

&lt;p&gt;OR&lt;/p&gt;

&lt;p&gt;B = load &apos;foo&apos; as (B: bag&lt;/p&gt;
{t: tuple(I: int)}
&lt;p&gt;);&lt;/p&gt;</comment>
                            <comment id="12623970" author="sms" created="Wed, 20 Aug 2008 12:15:31 +0000"  >&lt;p&gt;Patch fixes the following issues:&lt;/p&gt;

&lt;p&gt;1. Grunt parser can disambiguate &apos;{&apos; amongst the foreach nesting, bag constant and bag schema declaration&lt;/p&gt;

&lt;p&gt;2. The AS clause in conjunction with generate works. Fully qualified schema specified with the AS clause is set correctly.&lt;/p&gt;


&lt;p&gt;When a column is aliased in the generate statement, the schema should be fully qualified. The patch failed testSUM1 in TestTypeChecking.java. A column cast to type long was aliased as age. Since the type information for age was not specified, bytearray is inferred as the type. Casts to bytearray are not supported. As a result, the type checker flagged this as an error. In order to fix, the alias had to be fully qualified, i.e., age:long&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;//old code
&lt;/span&gt;LogicalPlan plan1 = planTester.buildPlan(&lt;span class=&quot;code-quote&quot;&gt;&quot;b = foreach a generate (&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;)age as age, (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;)gpa as gpa;&quot;&lt;/span&gt;) ;

&lt;span class=&quot;code-comment&quot;&gt;//modified code
&lt;/span&gt;LogicalPlan plan1 = planTester.buildPlan(&lt;span class=&quot;code-quote&quot;&gt;&quot;b = foreach a generate (&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;)age as age:&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;, (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;)gpa as gpa:&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;;&quot;&lt;/span&gt;) ;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Unit tests that still fail are:&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.pig.test.TestBuiltin&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 23, Failures: 1, Errors: 2, Time elapsed: 14.297 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.pig.test.TestBuiltin FAILED&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.pig.test.TestEvalPipeline&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 9, Failures: 1, Errors: 0, Time elapsed: 145.656 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.pig.test.TestEvalPipeline FAILED&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.pig.test.TestFilterOpNumeric&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 8, Failures: 0, Errors: 1, Time elapsed: 57.466 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.pig.test.TestFilterOpNumeric FAILED&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.pig.test.TestMRCompiler&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 16, Failures: 1, Errors: 0, Time elapsed: 0.37 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.pig.test.TestMRCompiler FAILED&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.pig.test.TestStoreOld&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 3, Failures: 0, Errors: 2, Time elapsed: 40.966 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.pig.test.TestStoreOld FAILED&lt;/p&gt;</comment>
                            <comment id="12624475" author="olgan" created="Thu, 21 Aug 2008 21:06:20 +0000"  >&lt;p&gt;Santhosh, I applied the patch and it made several cases work but the following still gives errors&lt;/p&gt;

&lt;p&gt;A = load &apos;data&apos; using PigStorage() as (&lt;br/&gt;
        x: chararray,&lt;br/&gt;
        y: int,&lt;br/&gt;
        z: chararray&lt;br/&gt;
        );&lt;/p&gt;

&lt;p&gt;B = group A by ( x );&lt;/p&gt;

&lt;p&gt;C = foreach B generate&lt;br/&gt;
        FOO(A) as pair: (&lt;br/&gt;
                curr: ( user, seq, query ),&lt;br/&gt;
                next: ( user, seq, query )&lt;br/&gt;
        );&lt;/p&gt;

&lt;p&gt;describe C;&lt;/p&gt;</comment>
                            <comment id="12624836" author="sms" created="Fri, 22 Aug 2008 14:07:56 +0000"  >&lt;p&gt;If colon (&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; is used in the schema, the type has to be specified. The following should work (not sure about describe though). I have removed the &apos;:&apos; after the identifier. The other option is to specify the type - pair: tuple, curr: tuple, next: tuple&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
A = load &lt;span class=&quot;code-quote&quot;&gt;&apos;data&apos;&lt;/span&gt; using PigStorage() as (
x: chararray,
y: &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;,
z: chararray
);

B = group A by ( x );

C = foreach B generate
FOO(A) as pair (
curr ( user, seq, query ),
next ( user, seq, query )
);

describe C;

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12625205" author="olgan" created="Sun, 24 Aug 2008 18:08:48 +0000"  >&lt;p&gt;this seems like a regression. why did we change that?&lt;/p&gt;</comment>
                            <comment id="12625206" author="olgan" created="Sun, 24 Aug 2008 18:09:25 +0000"  >&lt;p&gt;seems like the patch still has issues that need to be resolved&lt;/p&gt;</comment>
                            <comment id="12625527" author="sms" created="Mon, 25 Aug 2008 21:53:24 +0000"  >&lt;p&gt;Removed the restriction of specifying the type information after colon &apos;:&apos; for a bag or a tuple. &lt;/p&gt;

&lt;p&gt;Unit tests that still fail are:&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.pig.test.TestBuiltin&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 23, Failures: 1, Errors: 2, Time elapsed: 14.824 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.pig.test.TestBuiltin FAILED&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.pig.test.TestEvalPipeline&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 9, Failures: 1, Errors: 0, Time elapsed: 150.556 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.pig.test.TestEvalPipeline FAILED&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.pig.test.TestFilterOpNumeric&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 8, Failures: 0, Errors: 1, Time elapsed: 57.101 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.pig.test.TestFilterOpNumeric FAILED&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.pig.test.TestMRCompiler&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 16, Failures: 1, Errors: 0, Time elapsed: 0.445 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.pig.test.TestMRCompiler FAILED&lt;/p&gt;</comment>
                            <comment id="12625542" author="olgan" created="Mon, 25 Aug 2008 22:59:46 +0000"  >&lt;p&gt;Patch committed. Thanks, Santhosh for contributing!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12388595" name="bag_schema_bag_constant_as_clause.patch" size="9943" author="sms" created="Wed, 20 Aug 2008 12:15:31 +0000"/>
                            <attachment id="12388431" name="bag_schema_in_pigscript_parser.patch" size="1159" author="sms" created="Mon, 18 Aug 2008 12:37:48 +0000"/>
                            <attachment id="12388878" name="pig_353.patch" size="10217" author="sms" created="Mon, 25 Aug 2008 21:53:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38375</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 14 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gj7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94541</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>