<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:01:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PIG-4887] Parameter substitution skipped with glob on register</title>
                <link>https://issues.apache.org/jira/browse/PIG-4887</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;For a script with globbing on register followed by multi-line comments, parameter substitution doesn&apos;t work.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;test.pig&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;register /Users/knoguchi/mydir/*.jar; 

A = load &lt;span class=&quot;code-quote&quot;&gt;&apos;$input&apos;&lt;/span&gt; as (a1:&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;);
&lt;span class=&quot;code-comment&quot;&gt;/* comment here */&lt;/span&gt;
store A into &lt;span class=&quot;code-quote&quot;&gt;&apos;$output&apos;&lt;/span&gt;;

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Trying to run this would result in &lt;/p&gt;
&lt;div class=&quot;panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;panelContent&quot;&gt;
&lt;p&gt;org.apache.pig.backend.executionengine.ExecException: ERROR 2118: Input path does not exist: &lt;a href=&quot;file:/Users/knoguchi/git/pig/$input&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/Users/knoguchi/git/pig/$input&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Running with &lt;tt&gt;-dryrun&lt;/tt&gt;, we can see that parameter between the globbing and the multi-line style comment is ignored. &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;% pig -dryrun  -param input=input.txt -param output=output.txt  test.pig
...
2016-05-05 14:04:34,613 [main] INFO  org.apache.pig.Main - Dry run completed. Substituted pig script is at test.pig.substituted
...
% cat test.pig.substituted
register /Users/knoguchi/mydir/*.jar;

A = load &apos;$input&apos; as (a1:int);
/* comment here */
store A into &apos;output.txt&apos;;

%
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12965340">PIG-4887</key>
            <summary>Parameter substitution skipped with glob on register</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knoguchi">Koji Noguchi</assignee>
                                    <reporter username="knoguchi">Koji Noguchi</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 May 2016 18:07:01 +0000</created>
                <updated>Wed, 8 Jun 2016 20:48:33 +0000</updated>
                            <resolved>Fri, 13 May 2016 01:46:20 +0000</resolved>
                                                    <fixVersion>0.16.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15272791" author="knoguchi" created="Thu, 5 May 2016 18:26:14 +0000"  >&lt;p&gt;This is yet another parsing issue which is based on javacc.&lt;br/&gt;
In &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-2597&quot; title=&quot;Move grunt from javacc to ANTLR&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-2597&quot;&gt;PIG-2597&lt;/a&gt;, we&apos;re planning to move away from javacc completely and move to ANTLR but that hasn&apos;t happened for years...&lt;/p&gt;

&lt;p&gt;With limited understanding of javacc, here&apos;s my patch.&lt;br/&gt;
I believe this is happening when PigFileParser&apos;s tokenizer matches the longest match as comment. Starting from &lt;tt&gt;/*.jar&lt;/tt&gt; to &lt;tt&gt;here */&lt;/tt&gt;.&lt;/p&gt;

&lt;div class=&quot;panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;panelContent&quot;&gt;
&lt;p&gt;register /Users/knoguchi/mydir&lt;font color=&quot;red&quot;&gt;/*.jar;&lt;br/&gt;
&lt;br/&gt;
A = load &apos;$input&apos; as (a1:int);&lt;br/&gt;
/* comment here */&lt;/font&gt;&lt;br/&gt;
store A into &apos;$output&apos;;&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the patch, treating register as a special case and avoids next word to be treated as a comment.&lt;/p&gt;</comment>
                            <comment id="15282065" author="rohini" created="Thu, 12 May 2016 21:16:51 +0000"  >&lt;p&gt;Load also can have /* . What happens in that case?&lt;/p&gt;</comment>
                            <comment id="15282102" author="knoguchi" created="Thu, 12 May 2016 21:41:23 +0000"  >&lt;blockquote&gt;&lt;p&gt;Load also can have /* . What happens in that case?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Didn&apos;t think of that, but looking at the PigFileParser, this case is handled since the load path is quoted.  &lt;/p&gt;

&lt;p&gt;In any cases, it doesn&apos;t hurt to have a test for this in case it breaks in the future.  Uploading &lt;tt&gt;pig-4887-v02.patch&lt;/tt&gt;.  (Also, fixed one typo when printing the test name inside log.info.)&lt;/p&gt;</comment>
                            <comment id="15282208" author="rohini" created="Thu, 12 May 2016 22:50:22 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15282335" author="knoguchi" created="Fri, 13 May 2016 01:46:20 +0000"  >&lt;p&gt;Thanks for the review Rohini!  Committed to trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12802483" name="pig-4887-v01.patch" size="40982" author="knoguchi" created="Thu, 5 May 2016 18:26:14 +0000"/>
                            <attachment id="12803753" name="pig-4887-v02.patch" size="42326" author="knoguchi" created="Thu, 12 May 2016 21:41:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 27 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2x7xj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>