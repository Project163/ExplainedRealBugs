<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:49:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PIG-656] Use of eval or any other keyword in the package hierarchy of a UDF causes parse exception</title>
                <link>https://issues.apache.org/jira/browse/PIG-656</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Consider a Pig script which does something similar to a word count. It uses the built-in TOKENIZE function, but packages it inside a class hierarchy such as &quot;mypackage.eval&quot;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;register TOKENIZE.jar
my_src  = LOAD &lt;span class=&quot;code-quote&quot;&gt;&apos;/user/viraj/mywordcount.txt&apos;&lt;/span&gt; USING PigStorage(&lt;span class=&quot;code-quote&quot;&gt;&apos;\t&apos;&lt;/span&gt;)  AS (mlist: chararray);
modules = FOREACH my_src GENERATE FLATTEN(mypackage.eval.TOKENIZE(mlist));
describe modules;
grouped = GROUP modules BY $0;
describe grouped;
counts  = FOREACH grouped GENERATE COUNT(modules), group;
ordered = ORDER counts BY $0;
dump ordered;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The parser complains:&lt;br/&gt;
===========================================================================================================================&lt;br/&gt;
2009-02-05 01:17:29,231 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1000: Error during parsing. Invalid alias: mypackage in &lt;/p&gt;
{mlist: chararray}
&lt;p&gt;===========================================================================================================================&lt;/p&gt;

&lt;p&gt;I looked at the following source code at (src/org/apache/pig/impl/logicalLayer/parser/QueryParser.jjt) and it seems that : EVAL is a keyword in Pig. Here are some clarifications:&lt;/p&gt;

&lt;p&gt;1) Is there documentation on what the EVAL keyword actually is?&lt;br/&gt;
2) Is EVAL keyword actually implemented?&lt;/p&gt;

&lt;p&gt;Viraj&lt;/p&gt;</description>
                <environment></environment>
        <key id="12414067">PIG-656</key>
            <summary>Use of eval or any other keyword in the package hierarchy of a UDF causes parse exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="milindb">Milind Barve</assignee>
                                    <reporter username="viraj">Viraj Bhat</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Feb 2009 01:33:45 +0000</created>
                <updated>Mon, 26 Jul 2010 16:35:54 +0000</updated>
                            <resolved>Tue, 26 May 2009 20:25:17 +0000</resolved>
                                    <version>0.3.0</version>
                                    <fixVersion>0.3.0</fixVersion>
                                    <component>documentation</component>
                    <component>grunt</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12670595" author="viraj" created="Thu, 5 Feb 2009 01:36:48 +0000"  >&lt;p&gt;TOKENIZE.jar with java source file included&lt;/p&gt;</comment>
                            <comment id="12670596" author="viraj" created="Thu, 5 Feb 2009 01:38:52 +0000"  >&lt;p&gt;Test data&lt;/p&gt;</comment>
                            <comment id="12673397" author="olgan" created="Fri, 13 Feb 2009 22:14:07 +0000"  >&lt;p&gt;eval is a reserved word in pig.&lt;/p&gt;</comment>
                            <comment id="12710862" author="viraj" created="Tue, 19 May 2009 20:23:59 +0000"  >&lt;p&gt;Another pig parse issue when a udf was defined within a package which had &quot;matches&quot; keywords in its path.&lt;/p&gt;

&lt;p&gt;So something like :&lt;br/&gt;
define DISTANCE_SCORE mypackage.pig.udf.matches.LevensteinMatchUDF();&lt;/p&gt;

&lt;p&gt;gives a parse error&lt;/p&gt;

&lt;p&gt;&quot;&lt;br/&gt;
ERROR 1000: Error during parsing. Encountered &quot; &quot;matches&quot; &quot;matches &quot;&quot; at &lt;br/&gt;
line 11, column 42.&lt;br/&gt;
Was expecting:&lt;br/&gt;
     &amp;lt;IDENTIFIER&amp;gt; ...&lt;br/&gt;
&quot;&lt;/p&gt;

&lt;p&gt;It is possible to have keywords from pig within package names or even  udf - shouldn&apos;t pig not be robust to simple grammar disambiguation of  this sort ?&lt;/p&gt;</comment>
                            <comment id="12710866" author="viraj" created="Tue, 19 May 2009 20:32:32 +0000"  >&lt;p&gt;Olga the problem with &quot;eval&quot; keyword is that it is not found in the manuals, &lt;a href=&quot;http://hadoop.apache.org/pig/docs/r0.2.0/piglatin.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hadoop.apache.org/pig/docs/r0.2.0/piglatin.html&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;The only way the Pig user can get a hold of this keyword is opening the file,  QueryParser.jjt and looking for the following line TOKEN : &lt;/p&gt;
{ &amp;lt;EVAL : &quot;eval&quot;&amp;gt; }

&lt;p&gt;The Pig Manual should list all valid keywords in Pig (implemented or not).&lt;/p&gt;

&lt;p&gt;Please let me know.&lt;/p&gt;

&lt;p&gt;Viraj&lt;/p&gt;</comment>
                            <comment id="12710867" author="viraj" created="Tue, 19 May 2009 20:33:21 +0000"  >&lt;p&gt;Documentation should be updated on the eval keyword and what it actually does otherwise the user can be lost trying to find out the error.&lt;/p&gt;</comment>
                            <comment id="12712316" author="milindb" created="Fri, 22 May 2009 23:59:34 +0000"  >&lt;p&gt;This patch allows the use of reserved words in function names. To avoid parsing ambiguity, the first part of the fully qualified function name (i.e. test before the first &quot;.&quot;) cannot be a reserved word. But the rest of the parts in fully qualified function names can be any identifier, including a reserved word.&lt;/p&gt;

&lt;p&gt;So, for example, with this patch, the statement:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;define X com.yahoo.load();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;or&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;modules = FOREACH my_src GENERATE FLATTEN(mypackage.eval.TOKENIZE(mlist));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now compiles and runs perfectly well.&lt;/p&gt;</comment>
                            <comment id="12712333" author="hadoopqa" created="Sat, 23 May 2009 01:38:04 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12408857/reserved.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12408857/reserved.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 777708.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +0 tests included.  The patch appears to be a documentation patch that doesn&apos;t require tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 1 new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/55/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/55/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/55/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/55/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/55/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/55/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12712453" author="milindb" created="Sat, 23 May 2009 19:26:44 +0000"  >&lt;p&gt;modifying patch to include test case.&lt;/p&gt;</comment>
                            <comment id="12712455" author="milindb" created="Sat, 23 May 2009 19:28:40 +0000"  >&lt;p&gt;Uploading a modified patch that now includes a test case. The findbugs warning is not new to this patch.&lt;/p&gt;</comment>
                            <comment id="12712470" author="hadoopqa" created="Sat, 23 May 2009 22:28:00 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12408885/reserved.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12408885/reserved.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 777708.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 1 new Findbugs warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/56/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/56/testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/56/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/56/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/56/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-Patch-minerva.apache.org/56/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="12713163" author="sms" created="Tue, 26 May 2009 17:57:22 +0000"  >&lt;p&gt;+1 for the patch.&lt;/p&gt;</comment>
                            <comment id="12713231" author="sms" created="Tue, 26 May 2009 20:25:17 +0000"  >&lt;p&gt;Patch has been committed. Milind, thanks for fixing this issue.&lt;/p&gt;</comment>
                            <comment id="12713540" author="hudson" created="Wed, 27 May 2009 11:43:29 +0000"  >&lt;p&gt;Integrated in Pig-trunk #455 (See &lt;a href=&quot;http://hudson.zones.apache.org/hudson/job/Pig-trunk/455/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hudson.zones.apache.org/hudson/job/Pig-trunk/455/&lt;/a&gt;)&lt;br/&gt;
    : Use of eval or any other keyword in the package hierarchy of a UDF causes parse exception (milindb via sms)&lt;/p&gt;</comment>
                            <comment id="12892353" author="aniket486" created="Mon, 26 Jul 2010 16:35:54 +0000"  >&lt;p&gt;&quot;eq&quot;,&quot;gt&quot;,&quot;lt&quot;,&quot;gte&quot;,&quot;lte&quot;,&quot;neq&quot; were missed as part of this fix. Opened jira at &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-1517&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/PIG-1517&lt;/a&gt; to track further changes.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12399504" name="TOKENIZE.jar" size="3082" author="viraj" created="Thu, 5 Feb 2009 01:36:48 +0000"/>
                            <attachment id="12399505" name="mywordcount.txt" size="71" author="viraj" created="Thu, 5 Feb 2009 01:38:52 +0000"/>
                            <attachment id="12450328" name="pigusergroup656.patch" size="848" author="aniket486" created="Fri, 23 Jul 2010 17:23:13 +0000"/>
                            <attachment id="12408885" name="reserved.patch" size="3320" author="milindb" created="Sat, 23 May 2009 19:28:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164240</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 18 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gmsn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>95123</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>