<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:49:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PIG-546] FilterFunc calls empty constructor when it should be calling parameterized constructor</title>
                <link>https://issues.apache.org/jira/browse/PIG-546</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;The following piece of Pig Script uses a custom UDF known as FILTERFROMFILE which extends the FilterFunc. It contains two constructors, an empty constructor which is mandatory and the parameterized constructor. The parameterized constructor  passes the HDFS filename, which the exec function uses to construct a HashMap. The HashMap is later used for filtering records based on the match criteria in the HDFS file.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;register util.jar;
--util.jar contains the FILTERFROMFILE class

define FILTER_CRITERION util.FILTERFROMFILE(&lt;span class=&quot;code-quote&quot;&gt;&apos;/user/viraj/insetfilterfile&apos;&lt;/span&gt;);

RAW_LOGS = load &lt;span class=&quot;code-quote&quot;&gt;&apos;mydata.txt&apos;&lt;/span&gt; as (url:chararray, numvisits:&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;);

FILTERED_LOGS = filter RAW_LOGS by FILTER_CRITERION(numvisits);

dump FILTERED_LOGS;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When you execute the above script,  it results in a single Map only job with 1 Map. It seems that the empty constructor is called 5 times, and ultimately results in failure of the job.&lt;br/&gt;
===========================================&lt;br/&gt;
parameterized constructor: /user/viraj/insetfilterfile&lt;br/&gt;
parameterized constructor: /user/viraj/insetfilterfile&lt;br/&gt;
empty constructor&lt;br/&gt;
empty constructor&lt;br/&gt;
empty constructor&lt;br/&gt;
empty constructor&lt;br/&gt;
empty constructor&lt;br/&gt;
===========================================&lt;br/&gt;
Error in the Hadoop backend&lt;br/&gt;
===========================================&lt;br/&gt;
java.lang.IllegalArgumentException: Can not create a Path from an empty string&lt;br/&gt;
	at org.apache.hadoop.fs.Path.checkPathArg(Path.java:82)&lt;br/&gt;
	at org.apache.hadoop.fs.Path.(Path.java:90)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.datastorage.HDataStorage.isContainer(HDataStorage.java:199)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.datastorage.HDataStorage.asElement(HDataStorage.java:130)&lt;br/&gt;
	at org.apache.pig.impl.io.FileLocalizer.openDFSFile(FileLocalizer.java:164)&lt;br/&gt;
	at util.FILTERFROMFILE.init(FILTERFROMFILE.java:70)&lt;br/&gt;
	at util.FILTERFROMFILE.exec(FILTERFROMFILE.java:89)&lt;br/&gt;
	at util.FILTERFROMFILE.exec(FILTERFROMFILE.java:52)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.physicalLayer.expressionOperators.POUserFunc.getNext(POUserFunc.java:179)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.physicalLayer.expressionOperators.POUserFunc.getNext(POUserFunc.java:217)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.physicalLayer.relationalOperators.POFilter.getNext(POFilter.java:148)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigMapBase.runPipeline(PigMapBase.java:170)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigMapBase.map(PigMapBase.java:158)&lt;br/&gt;
	at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigMapOnly$Map.map(PigMapOnly.java:65)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:47)&lt;br/&gt;
	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:227)&lt;br/&gt;
	at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:2209)&lt;br/&gt;
===========================================&lt;br/&gt;
Attaching the sample data and the filter function UDF.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12409365">PIG-546</key>
            <summary>FilterFunc calls empty constructor when it should be calling parameterized constructor</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sms">Santhosh Muthur Srinivasan</assignee>
                                    <reporter username="viraj">Viraj Bhat</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Nov 2008 02:41:55 +0000</created>
                <updated>Wed, 24 Mar 2010 22:04:14 +0000</updated>
                            <resolved>Mon, 8 Dec 2008 19:54:51 +0000</resolved>
                                    <version>0.2.0</version>
                                    <fixVersion>0.2.0</fixVersion>
                                    <component>impl</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12651229" author="viraj" created="Thu, 27 Nov 2008 02:45:08 +0000"  >&lt;p&gt;FilterFunc UDF&lt;/p&gt;</comment>
                            <comment id="12651230" author="viraj" created="Thu, 27 Nov 2008 02:46:08 +0000"  >&lt;p&gt;Sample data used in the PigScript&lt;/p&gt;</comment>
                            <comment id="12652648" author="viraj" created="Wed, 3 Dec 2008 01:49:03 +0000"  >&lt;p&gt;Test Filter&lt;/p&gt;</comment>
                            <comment id="12654480" author="sms" created="Mon, 8 Dec 2008 17:47:49 +0000"  >&lt;p&gt;The patch (&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-546&quot; title=&quot;FilterFunc calls empty constructor when it should be calling parameterized constructor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-546&quot;&gt;&lt;del&gt;PIG-546&lt;/del&gt;&lt;/a&gt;.patch)  addresses the following issue(s):&lt;/p&gt;

&lt;p&gt;1. Fixes the use of an alias declared via the define statement and the subsequent use in&lt;br/&gt;
   i. Filter functions&lt;br/&gt;
  ii. Load functions&lt;br/&gt;
  iii. Store functions&lt;br/&gt;
  iv. Order by functions&lt;br/&gt;
  v. Streaming specifications (input and output)&lt;/p&gt;

&lt;p&gt;2. New unit test cases for the parser, end-to-end test cases for streaming and filter udf have been added.&lt;/p&gt;

&lt;p&gt;Note: There are no end-to-end test cases for order by using a UDF.&lt;/p&gt;

&lt;p&gt;All unit test cases pass.&lt;/p&gt;</comment>
                            <comment id="12654550" author="olgan" created="Mon, 8 Dec 2008 19:54:51 +0000"  >&lt;p&gt;patch committed. Thanks, Santhosh.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12394803" name="FILTERFROMFILE.java" size="2234" author="viraj" created="Thu, 27 Nov 2008 02:45:08 +0000"/>
                            <attachment id="12395578" name="PIG-546.patch" size="30594" author="sms" created="Mon, 8 Dec 2008 17:47:49 +0000"/>
                            <attachment id="12395155" name="insetfilterfile" size="6" author="viraj" created="Wed, 3 Dec 2008 01:49:03 +0000"/>
                            <attachment id="12394804" name="mydata.txt" size="75" author="viraj" created="Thu, 27 Nov 2008 02:46:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38084</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 51 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gljj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94920</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>