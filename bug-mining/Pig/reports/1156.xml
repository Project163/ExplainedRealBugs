<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:56:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PIG-3144] Erroneous map entry alias resolution leading to &quot;Duplicate schema alias&quot; errors</title>
                <link>https://issues.apache.org/jira/browse/PIG-3144</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;The following code illustrates a problem concerning alias resolution in pig &lt;/p&gt;

&lt;p&gt;The schema of D2 will incorrectly be described as containing two &quot;age&quot; fields. And the last step in the following script will lead to a &quot;Duplicate schema alias&quot; error message.&lt;/p&gt;

&lt;p&gt;I only encountered this bug when using aliases for map fields. &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;DATA = LOAD &lt;span class=&quot;code-quote&quot;&gt;&apos;file:&lt;span class=&quot;code-comment&quot;&gt;///whatever&apos;&lt;/span&gt; as (a:map[chararray], b:chararray);
&lt;/span&gt;
D1 = FOREACH DATA GENERATE a#&lt;span class=&quot;code-quote&quot;&gt;&apos;name&apos;&lt;/span&gt; as name, a#&lt;span class=&quot;code-quote&quot;&gt;&apos;age&apos;&lt;/span&gt; as age, b;

D2 = FOREACH D1 GENERATE name, age, b;

DESCRIBE D2;

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;D2: {
    age: chararray,
    age: chararray,
    b: chararray
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
D3 = FOREACH D2 GENERATE *;

DESCRIBE D3;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;file file:&lt;span class=&quot;code-comment&quot;&gt;///.../pig-bug-example.pig, line 20, column 16&amp;gt; Duplicate schema alias: age&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This error occurs in this form in Apache Pig version 0.11.0-SNAPSHOT (r6408). A less severe variant of this bug is also present in pig 0.10.1. In 0.10.1, the &quot;Duplicate schema alias&quot; error message won&apos;t occur, but the schema of D2 (see above) will still have wrong duplicate alias entries.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12629602">PIG-3144</key>
            <summary>Erroneous map entry alias resolution leading to &quot;Duplicate schema alias&quot; errors</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jcoveney">Jonathan Coveney</assignee>
                                    <reporter username="kadeng">Kai Londenberg</reporter>
                        <labels>
                    </labels>
                <created>Mon, 28 Jan 2013 22:59:52 +0000</created>
                <updated>Fri, 18 Oct 2013 20:28:13 +0000</updated>
                            <resolved>Mon, 4 Mar 2013 19:37:44 +0000</resolved>
                                    <version>0.11</version>
                    <version>0.10.1</version>
                                    <fixVersion>0.12.0</fixVersion>
                    <fixVersion>0.11.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13581281" author="jcoveney" created="Tue, 19 Feb 2013 13:53:37 +0000"  >&lt;p&gt;I agree that this is an issue, and it isn&apos;t too hard to fix. It uses a method that was developed for &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3020&quot; title=&quot;&amp;quot;Duplicate uid in schema&amp;quot; error when joining two relations derived from the same load statement&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3020&quot;&gt;&lt;del&gt;PIG-3020&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13581282" author="jcoveney" created="Tue, 19 Feb 2013 13:54:23 +0000"  >&lt;p&gt;Thanks for reporting this Kai. I had seen similar issues before, and this should be a generic fix for any case like this in a foreach.&lt;/p&gt;</comment>
                            <comment id="13591391" author="jcoveney" created="Sat, 2 Mar 2013 11:38:58 +0000"  >&lt;p&gt;Someone should review this &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13592030" author="cheolsoo" created="Mon, 4 Mar 2013 06:51:35 +0000"  >&lt;p&gt;Hi Jonathan,&lt;br/&gt;
Can you update the comment in &lt;tt&gt;LogicalRelationalOperator.fixDuplicateUids()&lt;/tt&gt;?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;/**
 * In the &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; of a join it is possible &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; multiple columns to have been derived from the same
 * column and thus have duplicate UID&apos;s. This detects that &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; and resets the uid.
 * See PIG-3022 and PIG-3093 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; more information.
 * @param fss a list of LogicalFieldSchemas to check the uids of
 */
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;ol&gt;
	&lt;li&gt;This is not a join-specific issue, so &quot;in the case of a join&quot; should be removed.&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3022&quot; title=&quot;TestRegisteredJarVisibility.testRegisteredJarVisibility fails with hadoop-2.0.x&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3022&quot;&gt;&lt;del&gt;PIG-3022&lt;/del&gt;&lt;/a&gt; should be replaced with &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3020&quot; title=&quot;&amp;quot;Duplicate uid in schema&amp;quot; error when joining two relations derived from the same load statement&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3020&quot;&gt;&lt;del&gt;PIG-3020&lt;/del&gt;&lt;/a&gt;.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Otherwise, the patch looks good to me. I will run unit tests.&lt;/p&gt;</comment>
                            <comment id="13592261" author="jcoveney" created="Mon, 4 Mar 2013 15:03:31 +0000"  >&lt;p&gt;Updated. Let me know how the tests come back. Thanks, Cheolsoo!&lt;/p&gt;</comment>
                            <comment id="13592520" author="cheolsoo" created="Mon, 4 Mar 2013 19:16:18 +0000"  >&lt;p&gt;+1.&lt;/p&gt;

&lt;p&gt;The unit tests pass. I will commit it soon.&lt;/p&gt;</comment>
                            <comment id="13592548" author="cheolsoo" created="Mon, 4 Mar 2013 19:37:44 +0000"  >&lt;p&gt;Committed to trunk and 0.11.&lt;/p&gt;

&lt;p&gt;Note that I replaced @&apos;s with relation names from the new test case in 0.11 because it isn&apos;t supported in 0.11.&lt;/p&gt;</comment>
                            <comment id="13592551" author="cheolsoo" created="Mon, 4 Mar 2013 19:39:05 +0000"  >&lt;p&gt;Attaching the 0.11 patch for the record.&lt;/p&gt;</comment>
                            <comment id="13799470" author="knoguchi" created="Fri, 18 Oct 2013 20:14:38 +0000"  >&lt;p&gt;FYI, I&apos;m trying to revert the change from this jira at &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3492&quot; title=&quot;ColumnPrune dropping used column due to LogicalRelationalOperator.fixDuplicateUids changes not propagating&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3492&quot;&gt;&lt;del&gt;PIG-3492&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13799483" author="cheolsoo" created="Fri, 18 Oct 2013 20:28:13 +0000"  >&lt;p&gt;Sounds good. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knoguchi&quot; class=&quot;user-hover&quot; rel=&quot;knoguchi&quot;&gt;knoguchi&lt;/a&gt; for cleaning up the mess!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12671642">PIG-3492</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12569941" name="PIG-3144-0.patch" size="8079" author="jcoveney" created="Tue, 19 Feb 2013 13:53:37 +0000"/>
                            <attachment id="12571933" name="PIG-3144-1-branch-0.11.patch" size="8505" author="cheolsoo" created="Mon, 4 Mar 2013 19:39:05 +0000"/>
                            <attachment id="12571885" name="PIG-3144-1.patch" size="8123" author="jcoveney" created="Mon, 4 Mar 2013 15:03:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>310098</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 5 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1himn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>310443</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>