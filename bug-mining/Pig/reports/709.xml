<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:53:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PIG-1622] DEFINE streaming options are ill defined and not properly documented</title>
                <link>https://issues.apache.org/jira/browse/PIG-1622</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;According to the documentation (&lt;a href=&quot;http://hadoop.apache.org/pig/docs/r0.7.0/piglatin_ref2.html#DEFINE&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hadoop.apache.org/pig/docs/r0.7.0/piglatin_ref2.html#DEFINE&lt;/a&gt;) the syntax for DEFINE when used to define a streaming command is:&lt;/p&gt;

&lt;p&gt;DEFINE cmd INPUT(stdin|path) OUTPUT(stdout|stderr|path) SHIP(path &lt;span class=&quot;error&quot;&gt;&amp;#91;, path, ...&amp;#93;&lt;/span&gt;) CACHE (path &lt;span class=&quot;error&quot;&gt;&amp;#91;, path, ...&amp;#93;&lt;/span&gt;)&lt;/p&gt;

&lt;p&gt;However, the actual parser accepts something pretty different.  Consider the following script:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;define strm `wc -l` INPUT(stdin) 
                    CACHE(&lt;span class=&quot;code-quote&quot;&gt;&apos;/Users/gates/.vimrc#myvim&apos;&lt;/span&gt;) 
                    OUTPUT(stdin)
                    INPUT(&lt;span class=&quot;code-quote&quot;&gt;&apos;/tmp/fred&apos;&lt;/span&gt;) 
                    OUTPUT(&lt;span class=&quot;code-quote&quot;&gt;&apos;/tmp/bob&apos;&lt;/span&gt;)
                    SHIP(&lt;span class=&quot;code-quote&quot;&gt;&apos;/Users/gates/.bashrc&apos;&lt;/span&gt;) 
                    SHIP(&lt;span class=&quot;code-quote&quot;&gt;&apos;/Users/gates/.vimrc&apos;&lt;/span&gt;) 
                    CACHE(&lt;span class=&quot;code-quote&quot;&gt;&apos;/Users/gates/.bashrc#mybash&apos;&lt;/span&gt;)
                    stderr(&lt;span class=&quot;code-quote&quot;&gt;&apos;/tmp/errors&apos;&lt;/span&gt; limit 10);

A = load &lt;span class=&quot;code-quote&quot;&gt;&apos;/Users/gates/test/data/studenttab10&apos;&lt;/span&gt;;
B = stream A through strm;
dump B;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The above actually parsers.  I see several issues here:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;What do multiple INPUT and OUTPUT statements mean in the context of streaming?  These should not be allowed.&lt;/li&gt;
	&lt;li&gt;The documentation implies an order (INPUT, OUTPUT, SHIP, CACHE) that is not enforced by the parser.  We should either enforce the order in the parser or update the documentation.  Most likely the latter to avoid breaking existing scripts.&lt;/li&gt;
	&lt;li&gt;Why are multiple SHIP and CACHE clauses allowed when each can take multiple paths?  It seems we should only allow one of each.&lt;/li&gt;
	&lt;li&gt;The error clause is completely different that what is given in the documentation.  I suspect this is a documentation error and the grammar supported by the parser here is what we want.&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment></environment>
        <key id="12474413">PIG-1622</key>
            <summary>DEFINE streaming options are ill defined and not properly documented</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="xuefuz">Xuefu Zhang</assignee>
                                    <reporter username="gates">Alan Gates</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Sep 2010 17:40:20 +0000</created>
                <updated>Thu, 4 Aug 2011 00:35:06 +0000</updated>
                            <resolved>Mon, 2 May 2011 20:43:22 +0000</resolved>
                                    <version>0.7.0</version>
                                    <fixVersion>0.9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13019924" author="xuefuz" created="Thu, 14 Apr 2011 17:22:51 +0000"  >&lt;p&gt;Discussed this with Alan and agreed that this needs to be correctly documented.&lt;/p&gt;</comment>
                            <comment id="13023245" author="xuefuz" created="Fri, 22 Apr 2011 15:27:16 +0000"  >&lt;p&gt;Based on discussion with Olga, we need to limit that each command option can be specified at most once. Multiple occurrence of the same option results a semantic error when script is parsed. Patch enforcing this restriction will be provided soon.&lt;/p&gt;</comment>
                            <comment id="13023584" author="xuefuz" created="Sat, 23 Apr 2011 17:40:55 +0000"  >&lt;p&gt;Test-patch run:&lt;/p&gt;

&lt;p&gt;     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt; +1 overall.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 @author.  The patch does not contain any @author tags.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 tests included.  The patch appears to include 3 new or modified tests.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 findbugs.  The patch does not introduce any new Findbugs warnings.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;exec&amp;#93;&lt;/span&gt;     +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;</comment>
                            <comment id="13024828" author="xuefuz" created="Mon, 25 Apr 2011 16:30:15 +0000"  >&lt;p&gt;Added a minor change for a test case.&lt;/p&gt;</comment>
                            <comment id="13025006" author="thejas" created="Mon, 25 Apr 2011 23:27:15 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13025325" author="xuefuz" created="Tue, 26 Apr 2011 17:10:42 +0000"  >&lt;p&gt;Update the patch with minor fix for a test case.&lt;/p&gt;</comment>
                            <comment id="13025332" author="xuefuz" created="Tue, 26 Apr 2011 17:15:26 +0000"  >&lt;p&gt;Patch &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-1622&quot; title=&quot;DEFINE streaming options are ill defined and not properly documented&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-1622&quot;&gt;&lt;del&gt;PIG-1622&lt;/del&gt;&lt;/a&gt;-2.patch is checked in for both trunk and 0.9.0. With this change, a command doesn&apos;t allow multiple occurrence of the same option. And this is backward incompatible change.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12474396">PIG-1618</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12477303" name="PIG-1622-1.patch" size="8219" author="xuefuz" created="Mon, 25 Apr 2011 16:30:15 +0000"/>
                            <attachment id="12477424" name="PIG-1622-2.patch" size="8219" author="xuefuz" created="Tue, 26 Apr 2011 17:10:42 +0000"/>
                            <attachment id="12477217" name="PIG-1622.patch" size="6999" author="xuefuz" created="Sat, 23 Apr 2011 17:40:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>66149</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10342"><![CDATA[Incompatible change]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 31 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gxvb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>96917</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>