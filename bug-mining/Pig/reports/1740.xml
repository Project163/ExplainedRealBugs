<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:01:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PIG-4377] Skewed outer join produce wrong result if a key is oversampled</title>
                <link>https://issues.apache.org/jira/browse/PIG-4377</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Skewed outer join produce more than expected rows under certain condition. The extra rows contain null left relation. Can be reproduced reliably with reproduce.patch (run SkewedJoin_11).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12766541">PIG-4377</key>
            <summary>Skewed outer join produce wrong result if a key is oversampled</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="daijy">Daniel Dai</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Jan 2015 21:38:00 +0000</created>
                <updated>Mon, 18 Jan 2016 17:27:29 +0000</updated>
                            <resolved>Wed, 27 May 2015 19:47:40 +0000</resolved>
                                                    <fixVersion>0.15.0</fixVersion>
                                    <component>impl</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14271926" author="daijy" created="Fri, 9 Jan 2015 21:57:20 +0000"  >&lt;p&gt;Attach a fix.&lt;/p&gt;

&lt;p&gt;Here is what happens:&lt;br/&gt;
1. Certain key x is sampled (by PoissonSampleLoader/PartitionSkewedKeys) to have y reduces&lt;br/&gt;
2. Actually, only y1 &amp;lt; y records carry key x&lt;br/&gt;
3. There are reduce which suppose to get key x does not get row with key x&lt;br/&gt;
4. The reduce does not get x will generate redundant empty left relation (CompilerUtils.addEmptyBagOuterJoin)&lt;/p&gt;

&lt;p&gt;What the patch does is:&lt;br/&gt;
Only generate empty left relation in the first reduce of key x&lt;/p&gt;</comment>
                            <comment id="14274270" author="daijy" created="Mon, 12 Jan 2015 22:15:27 +0000"  >&lt;p&gt;There is still some issue in tez mode. Attach another fix.&lt;/p&gt;</comment>
                            <comment id="14534662" author="rohini" created="Fri, 8 May 2015 15:13:07 +0000"  >&lt;p&gt;+1.   &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=daijy&quot; class=&quot;user-hover&quot; rel=&quot;daijy&quot;&gt;daijy&lt;/a&gt;,&lt;br/&gt;
   Can you put more details in the description about the problem inplace of &quot;under certain condition&quot; and also add a small description of what the fix does? It would be easy for future reference instead of having to read through the patch.&lt;/p&gt;</comment>
                            <comment id="14538612" author="daijy" created="Mon, 11 May 2015 20:38:21 +0000"  >&lt;p&gt;Changed the title to be more restrictive. Patch committed to both 0.15 branch and trunk. Thanks Rohini for review!&lt;/p&gt;</comment>
                            <comment id="14544977" author="daijy" created="Fri, 15 May 2015 05:58:30 +0000"  >&lt;p&gt;TestTezCompiler is broken due to the patch. I need to revert some part of the patch. It seems the change is unnecessary and I don&apos;t remember how this comes to the picture. Attach &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-4377&quot; title=&quot;Skewed outer join produce wrong result if a key is oversampled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-4377&quot;&gt;&lt;del&gt;PIG-4377&lt;/del&gt;&lt;/a&gt;-3.patch.&lt;/p&gt;</comment>
                            <comment id="14545580" author="rohini" created="Fri, 15 May 2015 14:37:38 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14546412" author="daijy" created="Sat, 16 May 2015 00:08:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-4377&quot; title=&quot;Skewed outer join produce wrong result if a key is oversampled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-4377&quot;&gt;&lt;del&gt;PIG-4377&lt;/del&gt;&lt;/a&gt;-3.patch committed to 0.15 and trunk. Thanks Rohini!&lt;/p&gt;</comment>
                            <comment id="14561346" author="daijy" created="Wed, 27 May 2015 17:38:56 +0000"  >&lt;p&gt;Actually &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-4377&quot; title=&quot;Skewed outer join produce wrong result if a key is oversampled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-4377&quot;&gt;&lt;del&gt;PIG-4377&lt;/del&gt;&lt;/a&gt;-3.patch is needed, since IsFirstReduceOfKey of the join vertex need sample input. Attach &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-4377&quot; title=&quot;Skewed outer join produce wrong result if a key is oversampled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-4377&quot;&gt;&lt;del&gt;PIG-4377&lt;/del&gt;&lt;/a&gt;-4.patch to bring it back, add comments and fix TestTezCompiler failures.&lt;/p&gt;</comment>
                            <comment id="14561557" author="rohini" created="Wed, 27 May 2015 19:28:53 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14561591" author="daijy" created="Wed, 27 May 2015 19:47:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-4377&quot; title=&quot;Skewed outer join produce wrong result if a key is oversampled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-4377&quot;&gt;&lt;del&gt;PIG-4377&lt;/del&gt;&lt;/a&gt;-4.patch committed to both 0.15 branch and trunk. Thanks Rohini!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12835245">PIG-4587</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12828473">PIG-4541</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12834126">PIG-4580</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12691402" name="PIG-4377-1.patch" size="16255" author="daijy" created="Fri, 9 Jan 2015 21:57:20 +0000"/>
                            <attachment id="12691765" name="PIG-4377-2.patch" size="28521" author="daijy" created="Mon, 12 Jan 2015 22:15:27 +0000"/>
                            <attachment id="12733068" name="PIG-4377-3.patch" size="1355" author="daijy" created="Fri, 15 May 2015 05:58:50 +0000"/>
                            <attachment id="12735657" name="PIG-4377-4.patch" size="10199" author="daijy" created="Wed, 27 May 2015 18:49:08 +0000"/>
                            <attachment id="12691396" name="reproduce.patch" size="6047" author="daijy" created="Fri, 9 Jan 2015 21:38:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i247p3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>