<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:04:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PIG-5452] Null handling of FLATTEN with user defined schema (as clause)</title>
                <link>https://issues.apache.org/jira/browse/PIG-5452</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Follow up from &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-5201&quot; title=&quot;Null handling on FLATTEN&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-5201&quot;&gt;&lt;del&gt;PIG-5201&lt;/del&gt;&lt;/a&gt;,&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
A = load &lt;span class=&quot;code-quote&quot;&gt;&apos;input&apos;&lt;/span&gt; as (a1:chararray);
B = FOREACH A GENERATE a1, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; as a2:tuple(A1:chararray, A2:chararray), a1 as a3;
C = FOREACH B GENERATE a1, FLATTEN(a2), a3;
dump C;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This produces right number of nulls.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
(a,,,a)
(b,,,b)
(c,,,c)
(d,,,d)
(f,,,f) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;However,&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
A = load &lt;span class=&quot;code-quote&quot;&gt;&apos;input.txt&apos;&lt;/span&gt; as (a1:chararray);
B = FOREACH A GENERATE a1, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; as a2:tuple(), a1 as a3;
C = FOREACH B GENERATE a1, FLATTEN(a2) as (A1:chararray, A2:chararray), a3;
dump C;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This produces wrong number of null and the output is shifted incorrectly.&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
(a,,a,)
(b,,b,)
(c,,c,)
(d,,d,)
(f,,f,) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Difference here is, for the latter, a2 in &quot;FLATTEN(a2)&quot; only has schema of tuple() with empty inner fields but with user defined schema of &quot;as (A1:chararray, A2:chararray)&quot;.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13575693">PIG-5452</key>
            <summary>Null handling of FLATTEN with user defined schema (as clause)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="knoguchi">Koji Noguchi</assignee>
                                    <reporter username="knoguchi">Koji Noguchi</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Apr 2024 21:40:27 +0000</created>
                <updated>Mon, 15 Sep 2025 11:29:01 +0000</updated>
                            <resolved>Tue, 14 May 2024 20:52:09 +0000</resolved>
                                                    <fixVersion>0.18.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17836764" author="knoguchi" created="Sat, 13 Apr 2024 04:19:53 +0000"  >&lt;p&gt;Instead of relying on innerfield schema, using the output schema which combines schema of data and user-defined schema.&lt;/p&gt;</comment>
                            <comment id="17838866" author="daijy" created="Fri, 19 Apr 2024 05:58:21 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="17846444" author="knoguchi" created="Tue, 14 May 2024 20:52:09 +0000"  >&lt;p&gt;Thanks for the review Daniel!&#160;&lt;br/&gt;
Committed to trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13068174" name="pig-5452-v01.patch" size="6645" author="knoguchi" created="Sat, 13 Apr 2024 04:19:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1om0g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>