<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:49:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PIG-504] Illustrate and Dump do not seem to work correctly for files containing utf8</title>
                <link>https://issues.apache.org/jira/browse/PIG-504</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;For the snippet of code which runs on the latest types branch. (utf8.txt attached)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;A = load &lt;span class=&quot;code-quote&quot;&gt;&apos;utf8.txt&apos;&lt;/span&gt; using PigStorage() as (t1: chararray);
illustrate A;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;results in this output being produced&lt;br/&gt;
-------------------------------&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; A     &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; t1: bytearray cn: 1 &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;-------------------------------&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; gabriella??         &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;-------------------------------&lt;/p&gt;

&lt;p&gt;Three observations:&lt;br/&gt;
1) text should be chararray, not bytearray.&lt;br/&gt;
2) cn: 1 should be removed from the display&lt;br/&gt;
3) Value for text is &quot;username??&quot; is not displayed properly&lt;/p&gt;

&lt;p&gt;Now replacing illustrate with dump&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;A = load &lt;span class=&quot;code-quote&quot;&gt;&apos;utf8.txt&apos;&lt;/span&gt; using PigStorage() as (t1: chararray);
dump A;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(david?)&lt;br/&gt;
(rachel?)&lt;br/&gt;
(jessica?)&lt;br/&gt;
(sarah?)&lt;br/&gt;
(katie?)&lt;br/&gt;
(wendy?)&lt;br/&gt;
(david?)&lt;br/&gt;
(priscilla?)&lt;br/&gt;
(oscar?)&lt;br/&gt;
(xavier?)&lt;br/&gt;
..some more. &lt;/p&gt;

&lt;p&gt;The utf8 characters after username are not displayed correctly but instead substituted by ?.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Hadoop 18&lt;/p&gt;</environment>
        <key id="12406885">PIG-504</key>
            <summary>Illustrate and Dump do not seem to work correctly for files containing utf8</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shubhamc">Shubham Chopra</assignee>
                                    <reporter username="viraj">Viraj Bhat</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Oct 2008 01:22:38 +0000</created>
                <updated>Wed, 24 Mar 2010 22:04:12 +0000</updated>
                            <resolved>Fri, 31 Oct 2008 19:12:13 +0000</resolved>
                                    <version>0.2.0</version>
                                    <fixVersion>0.2.0</fixVersion>
                                    <component>impl</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12641253" author="viraj" created="Tue, 21 Oct 2008 02:17:22 +0000"  >&lt;p&gt;utf8.txt for verifying the problem&lt;/p&gt;</comment>
                            <comment id="12641314" author="shubhamc" created="Tue, 21 Oct 2008 09:19:02 +0000"  >&lt;p&gt;Comments inline&lt;br/&gt;
1) text should be chararray, not bytearray.&lt;br/&gt;
-&amp;gt; Pig casts the data only when it is used. PigStorage loads data as bytearrays. If the data is used, PlanOptimizer inserts a foreach after load that casts data to particular data-types. So, for a script like the following&lt;br/&gt;
{{&lt;br/&gt;
a = load &apos;utf8.txt&apos; as (x:chararray);&lt;br/&gt;
b = foreach a generate x;&lt;br/&gt;
illustrate b;&lt;/p&gt;

&lt;p&gt;------------------------&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; a     &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; x: bytearray &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;------------------------&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; quinn&#966;      &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;------------------------&lt;br/&gt;
------------------------&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; b     &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; x: chararray &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;------------------------&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; quinn?       &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;------------------------&lt;/p&gt;

&lt;p&gt;}}&lt;/p&gt;

&lt;p&gt;2) cn: 1 should be removed from the display&lt;br/&gt;
-&amp;gt; I had used the toString method of schemas. I have modified the toString method in the attached patch. I would request Santhosh to have a look at it. &lt;/p&gt;

&lt;p&gt;3) Value for text is &quot;username??&quot; is not displayed properly&lt;br/&gt;
-&amp;gt; The datatypes use toString method of the object. The default charset used might be machine dependent. I am not sure why was the decision taken to go with the default charset instead of utf-8 or utf-16. I would request Alan to comment on it.&lt;/p&gt;</comment>
                            <comment id="12641416" author="olgan" created="Tue, 21 Oct 2008 15:56:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-497&quot; title=&quot;dump does not deal with non-ascii data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-497&quot;&gt;&lt;del&gt;PIG-497&lt;/del&gt;&lt;/a&gt; deals with dump issue. This jira should be just about illustrate&lt;/p&gt;</comment>
                            <comment id="12641417" author="olgan" created="Tue, 21 Oct 2008 16:03:49 +0000"  >&lt;p&gt;Shubham: regarding (1) illustrate should be doing the same thing as describe. If you look at describe, you will see that it would say chararray&lt;/p&gt;</comment>
                            <comment id="12641933" author="olgan" created="Wed, 22 Oct 2008 18:39:35 +0000"  >&lt;p&gt;patch committed. keeping the issue opened till the type is fixed.&lt;/p&gt;</comment>
                            <comment id="12644402" author="olgan" created="Fri, 31 Oct 2008 19:12:13 +0000"  >&lt;p&gt;dump part is addressed by &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-497&quot; title=&quot;dump does not deal with non-ascii data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-497&quot;&gt;&lt;del&gt;PIG-497&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The illustrate just requires environment var change:&lt;/p&gt;

&lt;p&gt;export LANG=&quot;en_US.UTF-8&quot;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12392559" name="504.patch" size="686" author="shubhamc" created="Tue, 21 Oct 2008 09:19:02 +0000"/>
                            <attachment id="12392542" name="utf8.txt" size="816" author="viraj" created="Tue, 21 Oct 2008 02:17:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164109</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 4 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0gl0v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94836</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>