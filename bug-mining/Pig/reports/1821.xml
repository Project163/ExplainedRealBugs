<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:01:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PIG-4851] Null not padded when input has less fields than declared schema for some loader</title>
                <link>https://issues.apache.org/jira/browse/PIG-4851</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;test.pig&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;A = load &lt;span class=&quot;code-quote&quot;&gt;&apos;input.txt&apos;&lt;/span&gt; using org.apache.pig.piggybank.storage.CSVLoader() as (field1, field2);
dump  A;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;input.txt&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;a
b,
c,d
,e
f
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;expected output by pig-0.11&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;(a,)
(b,)
(c,d)
(,e)
(f,)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;incorrect output by trunk and probably from 0.12&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;(a)
(b)
(c,d)
(,e)
(f)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="12953677">PIG-4851</key>
            <summary>Null not padded when input has less fields than declared schema for some loader</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rohini">Rohini Palaniswamy</assignee>
                                    <reporter username="knoguchi">Koji Noguchi</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 Mar 2016 22:13:02 +0000</created>
                <updated>Wed, 8 Jun 2016 20:48:43 +0000</updated>
                            <resolved>Mon, 28 Mar 2016 18:55:15 +0000</resolved>
                                    <version>0.12.1</version>
                    <version>0.13.0</version>
                    <version>0.14.0</version>
                    <version>0.15.0</version>
                                    <fixVersion>0.16.0</fixVersion>
                    <fixVersion>0.15.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15212505" author="knoguchi" created="Fri, 25 Mar 2016 22:27:12 +0000"  >&lt;p&gt;Noticed the bug when reviewing a different issue with our user&apos;s custom loader that extends PigStorage and appended hardcoded value to the tuple.&lt;/p&gt;

&lt;p&gt;In 0.12, &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3123&quot; title=&quot;Simplify Logical Plans By Removing Unneccessary Identity Projections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3123&quot;&gt;&lt;del&gt;PIG-3123&lt;/del&gt;&lt;/a&gt; added a feature that skips identity projection when possible and moved the Null padding logic to inside PigStorage getNext(). &lt;/p&gt;

&lt;p&gt;This itself is debatable since it broke our user&apos;s custom loader (that extended PigStorage), but more serious issue exists with  &lt;em&gt;other&lt;/em&gt; Loaders that lack this padding logic, like CSVLoader from description.&lt;/p&gt;

&lt;p&gt;Reviewing the code, I think the issue exists for Loader that implements LoadPushDown but LoLoad.getDeterminedSchema() returns null.&lt;/p&gt;

</comment>
                            <comment id="15214322" author="knoguchi" created="Mon, 28 Mar 2016 15:26:46 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rohini&quot; class=&quot;user-hover&quot; rel=&quot;rohini&quot;&gt;rohini&lt;/a&gt;, looking good.  Most of the test changes are reverting pig-3123.&lt;br/&gt;
I see one new test case for covering one user&apos;s case of having custom loader extending PigStorage.&lt;/p&gt;

&lt;p&gt;Can you also add a test case I described on this jira using &lt;tt&gt;org.apache.pig.piggybank.storage.CSVLoader&lt;/tt&gt; or alike? &lt;br/&gt;
As I mentioned, breaking user&apos;s custom loader that was extending PigStorage was one but more critical issue was null not padded for non-PigStorage loaders.&lt;/p&gt;</comment>
                            <comment id="15214402" author="rohini" created="Mon, 28 Mar 2016 16:21:13 +0000"  >&lt;p&gt;Updated patch with testcases that I missed reverting. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knoguchi&quot; class=&quot;user-hover&quot; rel=&quot;knoguchi&quot;&gt;knoguchi&lt;/a&gt; for checking those and pointing out.&lt;/p&gt;</comment>
                            <comment id="15214411" author="knoguchi" created="Mon, 28 Mar 2016 16:26:28 +0000"  >&lt;p&gt;Thanks for adding extra test for CSVLoader.  Since this is a bug in pig core, I preferred this test to be in core and not piggybank, but at the same time I hate copy-and-pasting .   Given we perform full tests including piggybank before the release, I&apos;m fine.&lt;/p&gt;

&lt;p&gt;+1 on the patch.&lt;/p&gt;</comment>
                            <comment id="15214683" author="rohini" created="Mon, 28 Mar 2016 18:55:15 +0000"  >&lt;p&gt;Committed to branch-0.15 and trunk. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=knoguchi&quot; class=&quot;user-hover&quot; rel=&quot;knoguchi&quot;&gt;knoguchi&lt;/a&gt; for identifying all the different issues and reviewing the patch.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12627984">PIG-3123</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12795633" name="PIG-4851-1.patch" size="109525" author="rohini" created="Mon, 28 Mar 2016 15:03:22 +0000"/>
                            <attachment id="12795639" name="PIG-4851-2-nowhitespacechanges.patch" size="55304" author="rohini" created="Mon, 28 Mar 2016 15:45:54 +0000"/>
                            <attachment id="12795640" name="PIG-4851-2.patch" size="113017" author="rohini" created="Mon, 28 Mar 2016 15:45:54 +0000"/>
                            <attachment id="12795644" name="PIG-4851-3-nowhitespacechanges.patch" size="58914" author="rohini" created="Mon, 28 Mar 2016 16:21:13 +0000"/>
                            <attachment id="12795645" name="PIG-4851-3.patch" size="128003" author="rohini" created="Mon, 28 Mar 2016 16:21:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 34 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2v8lj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>