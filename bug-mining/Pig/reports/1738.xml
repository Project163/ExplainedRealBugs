<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:01:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PIG-4541] Skewed full outer join does not return records if any relation is empty. Outer join does not return any record if left relation is empty</title>
                <link>https://issues.apache.org/jira/browse/PIG-4541</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;Test1:&lt;br/&gt;
Perform full join on two relation with left relation being blank and right containing records&lt;br/&gt;
empty_relation = FILTER a_relation by (join_column==&apos;eliminate everything&apos;);&lt;br/&gt;
Test_output = JOIN empty_relation by (join_column) FULL , non_empty_relation by (join_column);&lt;br/&gt;
Result : Zero records returned.&lt;/p&gt;

&lt;p&gt;Test2:&lt;br/&gt;
Perform full join on two relation with left relation being blank and right containing records using skewed&lt;br/&gt;
Test_output = JOIN empty_relation by (join_column) FULL , non_empty_relation by (join_column) using &#8216;skewed&#8217;;&lt;/p&gt;

&lt;p&gt;Result : Zero records returned.&lt;/p&gt;

&lt;p&gt;Test3:&lt;br/&gt;
Perform full join on two relation with left relation being blank and right containing records using parallel&lt;br/&gt;
Test_output = JOIN empty_relation by (join_column) FULL , non_empty_relation by (join_column) PARALLEL 10;&lt;/p&gt;

&lt;p&gt;Result : Zero records returned.&lt;/p&gt;

&lt;p&gt;Test4:&lt;br/&gt;
Perform full join on two relation with left relation being non empty  and right not containing records using parallel&lt;br/&gt;
Test_output = JOIN , non_empty_relation by (join_column) FULL , empty_relation by (join_column) PARALLEL 10;&lt;/p&gt;

&lt;p&gt;Result : valid records  returned.&lt;/p&gt;

&lt;p&gt;Observation:&lt;br/&gt;
1) If the either relation is blank , skewed full outer join does not return anything&lt;br/&gt;
2) If the non empty relation is kept on left, everything works except skewed&lt;br/&gt;
3) FULL OUTER will only work if the left relation is not empty&lt;br/&gt;
4) Skewed will only work if both relation is non empty.&lt;/p&gt;</description>
                <environment>&lt;p&gt;HDP 2.2.4&lt;/p&gt;</environment>
        <key id="12828473">PIG-4541</key>
            <summary>Skewed full outer join does not return records if any relation is empty. Outer join does not return any record if left relation is empty</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="dghosal">Dipankar</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 May 2015 20:00:11 +0000</created>
                <updated>Sun, 7 Jun 2015 03:48:03 +0000</updated>
                            <resolved>Tue, 26 May 2015 22:54:40 +0000</resolved>
                                    <version>0.14.0</version>
                                    <fixVersion>0.15.0</fixVersion>
                                    <component>build</component>
                        <due>Fri, 8 May 2015 00:00:00 +0000</due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14559889" author="daijy" created="Tue, 26 May 2015 21:18:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dghosal&quot; class=&quot;user-hover&quot; rel=&quot;dghosal&quot;&gt;dghosal&lt;/a&gt;, I tried Pig 0.14.0 with some of your queries, I cannot reproduce the issue:&lt;br/&gt;
1.txt:&lt;br/&gt;
1,2&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;a = load &lt;span class=&quot;code-quote&quot;&gt;&apos;1.txt&apos;&lt;/span&gt; using PigStorage(&lt;span class=&quot;code-quote&quot;&gt;&apos;,&apos;&lt;/span&gt;) as (a0, a1);
b = filter a by a0==100;
c = join b by a0 full, a by a0 using &lt;span class=&quot;code-quote&quot;&gt;&apos;skewed&apos;&lt;/span&gt; parallel 10;
dump c;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;a = load &lt;span class=&quot;code-quote&quot;&gt;&apos;1.txt&apos;&lt;/span&gt; using PigStorage(&lt;span class=&quot;code-quote&quot;&gt;&apos;,&apos;&lt;/span&gt;) as (a0, a1);
b = filter a by a0==100;
c = join b by a0 full, a by a0 parallel 2;
dump c;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Both cases I get the right result.&lt;/p&gt;

&lt;p&gt;There is a regression in trunk I will fix shortly.&lt;/p&gt;</comment>
                            <comment id="14559945" author="dghosal" created="Tue, 26 May 2015 21:55:19 +0000"  >&lt;p&gt;I rechecked again and things are not working here.&lt;br/&gt;
The pig version is &lt;br/&gt;
0.14.0.2.2.4.2-2 (rexported) and the distro is HDP.&lt;/p&gt;</comment>
                            <comment id="14559971" author="daijy" created="Tue, 26 May 2015 22:08:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dghosal&quot; class=&quot;user-hover&quot; rel=&quot;dghosal&quot;&gt;dghosal&lt;/a&gt;, I can see the skewed join issue when left relation is empty, but I cannot reproduce the regular join issue in any version. Do you have a specific script?&lt;/p&gt;</comment>
                            <comment id="14560026" author="rohini" created="Tue, 26 May 2015 22:41:34 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14560044" author="daijy" created="Tue, 26 May 2015 22:54:40 +0000"  >&lt;p&gt;Patch committed to both 0.15 branch and trunk. Thanks Rohini for review!&lt;/p&gt;

&lt;p&gt;To make it simple, restrict the ticket to skew join issue. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dghosal&quot; class=&quot;user-hover&quot; rel=&quot;dghosal&quot;&gt;dghosal&lt;/a&gt;, if you do find some issue in regular join, please open a seperate ticket. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12766541">PIG-4377</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12735413" name="PIG-4541-1.patch" size="1656" author="daijy" created="Tue, 26 May 2015 21:25:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ehz3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>