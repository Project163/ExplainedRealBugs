<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:59:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PIG-4135] Fetch optimization should be disabled if plan contains no limit</title>
                <link>https://issues.apache.org/jira/browse/PIG-4135</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;After deploying fetch optimization in production, a couple of users ran into this situation. They had fairly large input data, but after filtering it by a regular expression, it becomes small. So they didn&apos;t add limit to the query. &lt;/p&gt;

&lt;p&gt;The problem is that even though the output is small, processing the input must be done in the cluster not in the client. However, fetch optimization blindly fetches the entire input into the client since the plan is map-only job and finishes with dump.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12735593">PIG-4135</key>
            <summary>Fetch optimization should be disabled if plan contains no limit</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cheolsoo">Cheolsoo Park</assignee>
                                    <reporter username="cheolsoo">Cheolsoo Park</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Aug 2014 23:27:08 +0000</created>
                <updated>Fri, 21 Nov 2014 05:59:12 +0000</updated>
                            <resolved>Thu, 21 Aug 2014 21:24:49 +0000</resolved>
                                                    <fixVersion>0.14.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14104795" author="cheolsoo" created="Wed, 20 Aug 2014 23:33:39 +0000"  >&lt;p&gt;Uploading a patch that marks the plan as fetchable only if it&apos;s map-only job, finishes with dump, and includes limit. I also updated the Pig docs about this condition.&lt;/p&gt;</comment>
                            <comment id="14105067" author="daijy" created="Thu, 21 Aug 2014 05:31:13 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14105186" author="lbendig" created="Thu, 21 Aug 2014 08:28:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cheolsoo&quot; class=&quot;user-hover&quot; rel=&quot;cheolsoo&quot;&gt;cheolsoo&lt;/a&gt;, thanks for pointing out this issue. Filter is a good safeguard, but it also reduces the use cases of fetch.&lt;br/&gt;
I&apos;m wondering, whether we can have an input size estimation instead, like pig.auto.local.input.maxbytes ?&lt;/p&gt;</comment>
                            <comment id="14105535" author="cheolsoo" created="Thu, 21 Aug 2014 16:25:34 +0000"  >&lt;p&gt;Won&apos;t the input size reduce the use cases more than limit? For example, if fetch optimizer is disabled when input size &amp;gt; 100MB, the example that I described in this jira won&apos;t use fetch optimization even with limit. In fact, it will be disabled in most cases. On the other hand, limit is effective since it is pushed down into the load, no more records than the limit will be loaded.&lt;/p&gt;

&lt;p&gt;I think the main use case of fetch optimization is to peek a few sample records from input files quickly. Requiring a limit doesn&apos;t reduce the use cases, does it?&lt;/p&gt;</comment>
                            <comment id="14105879" author="lbendig" created="Thu, 21 Aug 2014 20:15:08 +0000"  >&lt;p&gt;Yes, that&apos;s the intended use case. I suddenly was thinking of some other examples but you are correct, using filter should be the cleanest and safest way to pick those map-only jobs that can be quickly fetched from grunt. So +1, thank you for the fix!&lt;/p&gt;</comment>
                            <comment id="14105983" author="cheolsoo" created="Thu, 21 Aug 2014 21:24:49 +0000"  >&lt;p&gt;Committed to trunk.&lt;/p&gt;

&lt;p&gt;Thank you Daniel and Lorand for the review!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12686477">PIG-3642</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12663269" name="PIG-4135-1.patch" size="2980" author="cheolsoo" created="Wed, 20 Aug 2014 23:33:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 13 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1z5un:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>