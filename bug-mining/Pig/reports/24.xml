<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:48:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PIG-290] LOCross output schema is not right</title>
                <link>https://issues.apache.org/jira/browse/PIG-290</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;From the schema generation code:-&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        List&amp;lt;LogicalOperator&amp;gt; inputs = mPlan.getPredecessors(this);

            for (LogicalOperator op : inputs) {
                    // Create schema here
            }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The output schema is generated based on inputs determined in the logical plan. However,  mPlan.getPredecessors() doesn&apos;t always preserve the right order  (A x B and B x A result in different schemas). I suggest maintaining mInputs variable in LOCross (as it used to be) to resolve this issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12399536">PIG-290</key>
            <summary>LOCross output schema is not right</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sms">Santhosh Muthur Srinivasan</assignee>
                                    <reporter username="pi_song">Pi Song</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Jul 2008 14:11:31 +0000</created>
                <updated>Wed, 24 Mar 2010 22:04:02 +0000</updated>
                            <resolved>Mon, 21 Jul 2008 11:32:05 +0000</resolved>
                                    <version>0.2.0</version>
                                    <fixVersion>0.2.0</fixVersion>
                                    <component>impl</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12611858" author="sms" created="Wed, 9 Jul 2008 00:21:37 +0000"  >&lt;p&gt;The insert_between.patch fixes the following:&lt;/p&gt;

&lt;p&gt;1. Changes the implementation of insertBetween in OperatorPlan.java so that the ordering of the predecessors is not changed&lt;/p&gt;

&lt;p&gt;2. Changed log.info in LOForeach getSchema() to log.debug. One of my earlier patches had the log.info&lt;/p&gt;

&lt;p&gt;3. Removed a printPlan use in TestLogicalPlanBuilder.java&lt;/p&gt;

&lt;p&gt;The unit tests that still fail are:&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.pig.test.TestEvalPipeline&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 8, Failures: 0, Errors: 1, Time elapsed: 141.926 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.pig.test.TestEvalPipeline FAILED&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.pig.test.TestFilterOpNumeric&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 8, Failures: 0, Errors: 1, Time elapsed: 56.446 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.pig.test.TestFilterOpNumeric FAILED&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.pig.test.TestStoreOld&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 3, Failures: 0, Errors: 2, Time elapsed: 39.782 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.pig.test.TestStoreOld FAILED&lt;/p&gt;</comment>
                            <comment id="12612123" author="pi_song" created="Wed, 9 Jul 2008 14:27:58 +0000"  >&lt;p&gt;The patch doesn&apos;t seem to relate to the bug.&lt;br/&gt;
Are you posting in the right Jira?&lt;/p&gt;</comment>
                            <comment id="12612205" author="sms" created="Wed, 9 Jul 2008 17:56:46 +0000"  >&lt;p&gt;I should have explained better on my previous comment. The ordering of the nodes in the getPredecessor and getSuccessor calls are preserved as long as the nodes are not moved around using the disconnect, connect and insertBetween calls. I have fixed the insertBetween calls to preserve the right order.&lt;/p&gt;

&lt;p&gt;If the original order was A-&amp;gt;C and A-&amp;gt;D if a new node B was inserted between A and C, then previously you would end up with A-&amp;gt;D and then A-B-&amp;gt;C. Now you will have A-&amp;gt;B-&amp;gt;C and A-&amp;gt;D, thus preserving the order for the getPredecessor and getSuccessor calls.&lt;/p&gt;</comment>
                            <comment id="12613662" author="sms" created="Tue, 15 Jul 2008 17:03:30 +0000"  >&lt;p&gt;Can we commit this patch, if the review and the explanation are fine?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Santhosh&lt;/p&gt;</comment>
                            <comment id="12613914" author="pi_song" created="Wed, 16 Jul 2008 11:30:10 +0000"  >&lt;p&gt;Sorry, I had a look at this a few days ago but forgot to reply.&lt;br/&gt;
I think instead of relying on  edge ordering in the graph (which is, in fact, not defined), we&apos;d better maintain the order inside LO.&lt;/p&gt;

&lt;p&gt;What is your opinion on this?&lt;/p&gt;</comment>
                            <comment id="12614115" author="sms" created="Wed, 16 Jul 2008 21:35:58 +0000"  >&lt;p&gt;The edge ordering in the implementation is the order in which the connections were made. This is a side effect of using a list to store the edges. While this does not appear to be a clean solution, the scope of changing the definition of the logical operators LOCross and LOCogroup is widespread. The changes will affect the optimizer which has to re-wire the inputs when operators are moved around in the graph.&lt;/p&gt;

&lt;p&gt;For now, I would go with the proposed change. We can fix the issue as an enhancement when we merge from types branch to trunk.&lt;/p&gt;</comment>
                            <comment id="12614363" author="pi_song" created="Thu, 17 Jul 2008 14:33:47 +0000"  >&lt;p&gt;I wouldn&apos;t rely on a side effect instead of the correct model.&lt;/p&gt;

&lt;p&gt;The rewiring problem seems to be universal. One solution is we can have a set of utility methods for inserting/cutting nodes in logical plans that always guarantees correct wiring.&lt;/p&gt;

&lt;p&gt;Now our votes are 1 to 1. I&apos;ll ask Alan to give the third vote.&lt;/p&gt;</comment>
                            <comment id="12614547" author="alangates" created="Thu, 17 Jul 2008 22:13:51 +0000"  >&lt;p&gt;I don&apos;t think it&apos;s quite fair to characterize this is as relying a on side effect.  Santhosh&apos;s changes guarantee that side effect and then rely on it.  I agree that the resulting API is a little confusing (using disconnect/connect will have a different affect that using replaceNode).  That needs to be very clearly documented.  But I&apos;m sure it would be any better if operators had inputs and anyone rearranging the tree had to remember to reconnect the inputs.  In that case the programmer would have to remember to reset the inputs, which is just as hard as remembering to use the correct API function.&lt;/p&gt;</comment>
                            <comment id="12614736" author="pi_song" created="Fri, 18 Jul 2008 14:38:47 +0000"  >&lt;p&gt;will commit this once I figure out why a lot more tests are failing today.&lt;/p&gt;</comment>
                            <comment id="12615215" author="pi_song" created="Mon, 21 Jul 2008 11:32:05 +0000"  >&lt;p&gt;Checked in.&lt;br/&gt;
Thanks Santhosh!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12385553" name="insert_between.patch" size="8056" author="sms" created="Wed, 9 Jul 2008 00:21:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>163932</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 19 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0giev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>94413</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>