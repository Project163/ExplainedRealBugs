<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 20:00:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[PIG-4433] Loading bigdecimal in nested tuple does not work</title>
                <link>https://issues.apache.org/jira/browse/PIG-4433</link>
                <project id="12310730" key="PIG">Pig</project>
                    <description>&lt;p&gt;The parsing of BigDecimal data types in a nested tuple, as implemented by Utf8StorageConverter.java, does not work. There&apos;s a &quot;break;&quot; missing from a switch statement.&lt;/p&gt;

&lt;p&gt;Code example that demonstrates the problem:&lt;/p&gt;

&lt;p&gt;=== input.txt ===&lt;br/&gt;
(17,1234567890.0987654321)&lt;/p&gt;

&lt;p&gt;=== pig_script ===:&lt;br/&gt;
inp = LOAD &apos;input.txt&apos; AS (foo:tuple(bar:long, baz:bigdecimal));&lt;br/&gt;
STORE inp INTO &apos;output&apos;;&lt;/p&gt;

&lt;p&gt;=== output ===&lt;br/&gt;
(17,)&lt;/p&gt;


&lt;p&gt;With patch, the output becomes the expected:&lt;br/&gt;
(17,1234567890.0987654321)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12777257">PIG-4433</key>
            <summary>Loading bigdecimal in nested tuple does not work</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kpriceyahoo">Kevin J. Price</assignee>
                                    <reporter username="kpriceyahoo">Kevin J. Price</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Feb 2015 19:16:07 +0000</created>
                <updated>Thu, 28 Apr 2016 05:21:15 +0000</updated>
                            <resolved>Tue, 24 Feb 2015 23:03:14 +0000</resolved>
                                    <version>0.14.0</version>
                    <version>0.14.1</version>
                    <version>0.15.0</version>
                                    <fixVersion>0.15.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14335277" author="kpriceyahoo" created="Tue, 24 Feb 2015 19:18:18 +0000"  >&lt;p&gt;diff --git a/src/org/apache/pig/builtin/Utf8StorageConverter.java b/src/org/apache/pig/builtin/Utf8StorageConverter.java&lt;br/&gt;
index 814c746..1b905e2 100644&lt;br/&gt;
&amp;#8212; a/src/org/apache/pig/builtin/Utf8StorageConverter.java&lt;br/&gt;
+++ b/src/org/apache/pig/builtin/Utf8StorageConverter.java&lt;br/&gt;
@@ -315,6 +315,7 @@ public class Utf8StorageConverter implements LoadStoreCaster {&lt;br/&gt;
             break;&lt;br/&gt;
         case DataType.BIGDECIMAL:&lt;br/&gt;
             field = bytesToBigDecimal(b);&lt;br/&gt;
+            break;&lt;br/&gt;
         case DataType.DATETIME:&lt;br/&gt;
             field = bytesToDateTime(b);&lt;br/&gt;
             break;&lt;br/&gt;
diff --git a/test/org/apache/pig/builtin/TestUtf8StorageConverter.java b/test/org/apache/pig/builtin/TestUtf8StorageConverter.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 0000000..8cc9e55&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/test/org/apache/pig/builtin/TestUtf8StorageConverter.java&lt;br/&gt;
@@ -0,0 +1,58 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.pig.builtin;&lt;br/&gt;
+&lt;br/&gt;
+import static org.junit.Assert.assertEquals;&lt;br/&gt;
+&lt;br/&gt;
+import java.math.BigDecimal;&lt;br/&gt;
+import java.math.BigInteger;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.pig.ResourceSchema;&lt;br/&gt;
+import org.apache.pig.ResourceSchema.ResourceFieldSchema;&lt;br/&gt;
+import org.apache.pig.data.DataByteArray;&lt;br/&gt;
+import org.apache.pig.data.Tuple;&lt;br/&gt;
+import org.apache.pig.impl.logicalLayer.schema.Schema.FieldSchema;&lt;br/&gt;
+import org.apache.pig.impl.util.Utils;&lt;br/&gt;
+import org.joda.time.DateTime;&lt;br/&gt;
+import org.joda.time.DateTimeZone;&lt;br/&gt;
+import org.junit.Test;&lt;br/&gt;
+&lt;br/&gt;
+public class TestUtf8StorageConverter {&lt;br/&gt;
+&lt;br/&gt;
+    @Test&lt;br/&gt;
+    /* Test that the simple data types convert properly in a tuple context */&lt;br/&gt;
+    public void testSimpleTypes() throws Exception {&lt;br/&gt;
+        Utf8StorageConverter converter = new Utf8StorageConverter();&lt;br/&gt;
+        String schemaString = &quot;a:int, b:long, c:float, d:double, e:chararray, f:bytearray, g:boolean, h:biginteger, i:bigdecimal, j:datetime&quot;;&lt;br/&gt;
+        String dataString = &quot;(1,2,3.0,4.0,five,6,true,12345678901234567890,1234567890.0987654321,2007-04-05T14:30Z)&quot;;&lt;br/&gt;
+&lt;br/&gt;
+        ResourceSchema.ResourceFieldSchema rfs = new ResourceFieldSchema(new FieldSchema(&quot;schema&quot;, Utils.getSchemaFromString(schemaString)));&lt;br/&gt;
+        Tuple result = converter.bytesToTuple(dataString.getBytes(), rfs);&lt;br/&gt;
+        assertEquals(10, result.size());&lt;br/&gt;
+        assertEquals(new Integer(1), result.get(0));&lt;br/&gt;
+        assertEquals(new Long(2L), result.get(1));&lt;br/&gt;
+        assertEquals(new Float(3.0f), result.get(2));&lt;br/&gt;
+        assertEquals(new Double(4.0), result.get(3));&lt;br/&gt;
+        assertEquals(&quot;five&quot;, result.get(4));&lt;br/&gt;
+        assertEquals(new DataByteArray(new byte[] &lt;/p&gt;
{ (byte) &apos;6&apos; }
&lt;p&gt;), result.get(5));&lt;br/&gt;
+        assertEquals(new Boolean(true), result.get(6));&lt;br/&gt;
+        assertEquals(new BigInteger(&quot;12345678901234567890&quot;), result.get(7));&lt;br/&gt;
+        assertEquals(new BigDecimal(&quot;1234567890.0987654321&quot;), result.get(8));&lt;br/&gt;
+        assertEquals(new DateTime(&quot;2007-04-05T14:30Z&quot;, DateTimeZone.UTC), result.get(9));&lt;br/&gt;
+    }&lt;br/&gt;
+}&lt;/p&gt;</comment>
                            <comment id="14335374" author="githubbot" created="Tue, 24 Feb 2015 20:20:24 +0000"  >&lt;p&gt;GitHub user kpriceyahoo opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/pig/pull/16&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/pig/pull/16&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Fix &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-4433&quot; title=&quot;Loading bigdecimal in nested tuple does not work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-4433&quot;&gt;&lt;del&gt;PIG-4433&lt;/del&gt;&lt;/a&gt;: Add missing &quot;break;&quot; and add unit test to validate the modified method.&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/kpriceyahoo/pig&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/kpriceyahoo/pig&lt;/a&gt; branch-0.14&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/pig/pull/16.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/pig/pull/16.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #16&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 2f1765fec3ddad58f98c9d3cf5e9ca16b56e3580&lt;br/&gt;
Author: Kevin Price &amp;lt;kprice@yahoo-inc.com&amp;gt;&lt;br/&gt;
Date:   2015-02-24T20:18:08Z&lt;/p&gt;

&lt;p&gt;    Fix &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-4433&quot; title=&quot;Loading bigdecimal in nested tuple does not work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-4433&quot;&gt;&lt;del&gt;PIG-4433&lt;/del&gt;&lt;/a&gt;: Add missing &quot;break;&quot; and add unit test to validate the modified method.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14335375" author="kpriceyahoo" created="Tue, 24 Feb 2015 20:20:47 +0000"  >&lt;p&gt;Pull request created on github: &lt;a href=&quot;https://github.com/apache/pig/pull/16&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/pig/pull/16&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14335622" author="daijy" created="Tue, 24 Feb 2015 23:01:44 +0000"  >&lt;p&gt;Pull the patch and attach to Jira.&lt;/p&gt;</comment>
                            <comment id="14335626" author="daijy" created="Tue, 24 Feb 2015 23:03:14 +0000"  >&lt;p&gt;That&apos;s an obvious bug. Patch committed to trunk. Thanks Kevin!&lt;/p&gt;

&lt;p&gt;Next time, please attach the patch to Jira ticket. Pig does not use pull request to track patches.&lt;/p&gt;</comment>
                            <comment id="14336632" author="kpriceyahoo" created="Wed, 25 Feb 2015 15:32:28 +0000"  >&lt;p&gt;Thanks, Daniel! Will do.&lt;/p&gt;</comment>
                            <comment id="15261559" author="githubbot" created="Thu, 28 Apr 2016 05:21:15 +0000"  >&lt;p&gt;Github user kpriceyahoo closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/pig/pull/16&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/pig/pull/16&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12700603" name="PIG-4433-1.patch" size="4153" author="daijy" created="Tue, 24 Feb 2015 23:01:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 29 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i25zkn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>