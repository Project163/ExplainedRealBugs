diff --git a/httpcore5/src/main/java/org/apache/hc/core5/http/nio/entity/BasicAsyncEntityProducer.java b/httpcore5/src/main/java/org/apache/hc/core5/http/nio/entity/BasicAsyncEntityProducer.java
index 9bb55c240..0a2bb6ded 100644
--- a/httpcore5/src/main/java/org/apache/hc/core5/http/nio/entity/BasicAsyncEntityProducer.java
+++ b/httpcore5/src/main/java/org/apache/hc/core5/http/nio/entity/BasicAsyncEntityProducer.java
@@ -147,6 +147,7 @@ public final Exception getException() {
     @Override
     public void releaseResources() {
         bytebuf.clear();
+        bytebuf.limit(length);
     }
 
 }
diff --git a/httpcore5/src/test/java/org/apache/hc/core5/http/nio/entity/TestBasicAsyncEntityProducer.java b/httpcore5/src/test/java/org/apache/hc/core5/http/nio/entity/TestBasicAsyncEntityProducer.java
index d2fa09a17..072e13e42 100644
--- a/httpcore5/src/test/java/org/apache/hc/core5/http/nio/entity/TestBasicAsyncEntityProducer.java
+++ b/httpcore5/src/test/java/org/apache/hc/core5/http/nio/entity/TestBasicAsyncEntityProducer.java
@@ -99,4 +99,18 @@ public void testTextContentRepeatable() throws Exception {
         }
     }
 
+    @Test
+    public void testTextContentRepeatableUTF() throws Exception {
+        final String content = "<testtag></testtag>";
+        final AsyncEntityProducer producer = new BasicAsyncEntityProducer(content, ContentType.TEXT_XML);
+        for (int i = 0; i < 3; i++) {
+            final WritableByteChannelMock byteChannel = new WritableByteChannelMock(1024);
+            final DataStreamChannel streamChannel = new BasicDataStreamChannel(byteChannel);
+            producer.produce(streamChannel);
+            Assertions.assertFalse(byteChannel.isOpen());
+            Assertions.assertEquals(content, byteChannel.dump(StandardCharsets.UTF_8));
+            producer.releaseResources();
+        }
+    }
+
 }
