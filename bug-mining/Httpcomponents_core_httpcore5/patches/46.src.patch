diff --git a/httpcore5/src/main/java/org/apache/hc/core5/http/impl/nio/ClientHttp1StreamHandler.java b/httpcore5/src/main/java/org/apache/hc/core5/http/impl/nio/ClientHttp1StreamHandler.java
index 2edb8071a..aebd5aa73 100644
--- a/httpcore5/src/main/java/org/apache/hc/core5/http/impl/nio/ClientHttp1StreamHandler.java
+++ b/httpcore5/src/main/java/org/apache/hc/core5/http/impl/nio/ClientHttp1StreamHandler.java
@@ -247,11 +247,12 @@ void consumeHeader(final HttpResponse response, final EntityDetails entityDetail
         context.setAttribute(HttpCoreContext.HTTP_RESPONSE, response);
         httpProcessor.process(response, entityDetails, context);
 
+        if (entityDetails == null && !keepAlive) {
+            outputChannel.close();
+        }
+
         exchangeHandler.consumeResponse(response, entityDetails, context);
         if (entityDetails == null) {
-            if (!keepAlive) {
-                outputChannel.close();
-            }
             responseState = MessageState.COMPLETE;
         } else {
             responseState = MessageState.BODY;
