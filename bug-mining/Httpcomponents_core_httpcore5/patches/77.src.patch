diff --git a/httpcore5/src/main/java/org/apache/hc/core5/reactor/IOSessionImpl.java b/httpcore5/src/main/java/org/apache/hc/core5/reactor/IOSessionImpl.java
index c9439cbba..19235f575 100644
--- a/httpcore5/src/main/java/org/apache/hc/core5/reactor/IOSessionImpl.java
+++ b/httpcore5/src/main/java/org/apache/hc/core5/reactor/IOSessionImpl.java
@@ -263,8 +263,13 @@ public void close(final CloseMode closeMode) {
                     // Quietly ignore
                 }
             }
-            this.key.cancel();
-            this.key.attach(null);
+            lock.lock();
+            try {
+                this.key.cancel();
+                this.key.attach(null);
+            } finally {
+                lock.unlock();
+            }
             Closer.closeQuietly(this.key.channel());
             if (this.key.selector().isOpen()) {
                 this.key.selector().wakeup();
