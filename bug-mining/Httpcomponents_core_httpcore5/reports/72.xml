<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:24:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HTTPCORE-733] BasicAsyncEntityProducer error on second time send </title>
                <link>https://issues.apache.org/jira/browse/HTTPCORE-733</link>
                <project id="12310340" key="HTTPCORE">HttpComponents HttpCore</project>
                    <description>&lt;p&gt;I use BasicAsyncEntityProducer&#160; to send a small String, UTF-8 encoded. Server respondes with 307 status code so request is sent again. Second time sending fails because bytebuf is broken. Initially bytebuff has limit 24 and capacity 26 (see line &#160;this.bytebuf = charset.encode(CharBuffer.wrap(content)); with UTF-8 encoding); after releaseResources is called&#160; bytebuf has limit and capacity 26 (obviously &#160;this.length is unchanged, still 24). So send will fail because of this:&lt;/p&gt;

&lt;p&gt;ERROR com.servoy.j2db.util.Debug - Error executing a request to /create/chat with method POST with user: null, workstation: null, domain: null java.lang.IllegalStateException: Encoding process already completed&lt;br/&gt;
&#160; &#160; at org.apache.hc.core5.util.Asserts.check(Asserts.java:38) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at org.apache.hc.core5.http.impl.nio.AbstractContentEncoder.assertNotCompleted(AbstractContentEncoder.java:104) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at org.apache.hc.core5.http.impl.nio.LengthDelimitedEncoder.write(LengthDelimitedEncoder.java:101) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at org.apache.hc.core5.http.impl.nio.AbstractHttp1StreamDuplexer.streamOutput(AbstractHttp1StreamDuplexer.java:497) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at org.apache.hc.core5.http.impl.nio.ClientHttp1StreamDuplexer$1.write(ClientHttp1StreamDuplexer.java:152) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at org.apache.hc.core5.http.impl.nio.ClientHttp1StreamHandler$1.write(ClientHttp1StreamHandler.java:100) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at org.apache.hc.client5.http.impl.async.HttpAsyncMainClientExec$1$1.write(HttpAsyncMainClientExec.java:158) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at org.apache.hc.core5.http.nio.entity.BasicAsyncEntityProducer.produce(BasicAsyncEntityProducer.java:132) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at org.apache.hc.core5.http.nio.support.BasicRequestProducer.produce(BasicRequestProducer.java:104) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at org.apache.hc.client5.http.impl.async.InternalAbstractHttpAsyncClient$1$2.produce(InternalAbstractHttpAsyncClient.java:278) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at org.apache.hc.client5.http.impl.async.HttpAsyncMainClientExec$1.produce(HttpAsyncMainClientExec.java:149) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at org.apache.hc.core5.http.impl.nio.ClientHttp1StreamHandler.produceOutput(ClientHttp1StreamHandler.java:199) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at org.apache.hc.core5.http.impl.nio.ClientHttp1StreamDuplexer.produceOutput(ClientHttp1StreamDuplexer.java:338) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at org.apache.hc.core5.http.impl.nio.AbstractHttp1StreamDuplexer.onOutput(AbstractHttp1StreamDuplexer.java:368) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at org.apache.hc.core5.http.impl.nio.AbstractHttp1IOEventHandler.outputReady(AbstractHttp1IOEventHandler.java:73) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at org.apache.hc.core5.http.impl.nio.ClientHttp1IOEventHandler.outputReady(ClientHttp1IOEventHandler.java:39) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at org.apache.hc.core5.reactor.InternalDataChannel.onIOEvent(InternalDataChannel.java:141) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at org.apache.hc.core5.reactor.InternalChannel.handleIOEvent(InternalChannel.java:51) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at org.apache.hc.core5.reactor.SingleCoreIOReactor.processEvents(SingleCoreIOReactor.java:178) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at org.apache.hc.core5.reactor.SingleCoreIOReactor.doExecute(SingleCoreIOReactor.java:127) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at org.apache.hc.core5.reactor.AbstractSingleCoreIOReactor.execute(AbstractSingleCoreIOReactor.java:85) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at org.apache.hc.core5.reactor.IOReactorWorker.run(IOReactorWorker.java:44) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at java.lang.Thread.run(Unknown Source) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&#160;&lt;/p&gt;

&lt;p&gt;maybe you should use flip instead of clear ?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13517848">HTTPCORE-733</key>
            <summary>BasicAsyncEntityProducer error on second time send </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="laurian">Laurian Vostinar</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Jan 2023 13:08:51 +0000</created>
                <updated>Tue, 13 Jun 2023 07:59:30 +0000</updated>
                            <resolved>Fri, 13 Jan 2023 13:06:23 +0000</resolved>
                                    <version>5.2.1</version>
                                                    <component>HttpCore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17676023" author="olegk" created="Thu, 12 Jan 2023 13:35:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=laurian&quot; class=&quot;user-hover&quot; rel=&quot;laurian&quot;&gt;laurian&lt;/a&gt; There is a test case that specifically verifies that `BasicAsyncEntityProducer` instances are repeatable.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/httpcomponents-core/blob/master/httpcore5/src/test/java/org/apache/hc/core5/http/nio/entity/TestBasicAsyncEntityProducer.java#L80&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/httpcomponents-core/blob/master/httpcore5/src/test/java/org/apache/hc/core5/http/nio/entity/TestBasicAsyncEntityProducer.java#L80&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please provide a test case that reproduces the defect.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="17676258" author="laurian" created="Thu, 12 Jan 2023 16:51:03 +0000"  >&lt;p&gt;You just have to use UTF8 and more than 10 characters. Here is my test:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Test
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testTextContentRepeatable2() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; AsyncEntityProducer producer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BasicAsyncEntityProducer(
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;testtag&amp;gt;&amp;lt;/testtag&amp;gt;&quot;&lt;/span&gt;, ContentType.TEXT_XML);&#160; &#160; &#160; &#160; 
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; 3; i++) {
&#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; WritableByteChannelMock byteChannel = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; WritableByteChannelMock(1024);
&#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; DataStreamChannel streamChannel = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BasicDataStreamChannel(byteChannel);&#160; &#160; &#160; &#160; &#160; &#160; 
            producer.produce(streamChannel);&#160; &#160; &#160; &#160; &#160; &#160; 
            Assertions.assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;testtag&amp;gt;&amp;lt;/testtag&amp;gt;&quot;&lt;/span&gt;, byteChannel.dump(StandardCharsets.UTF_8));&#160; &#160; &#160; &#160; &#160; &#160; 
            producer.releaseResources();
&#160; &#160; &#160; &#160; }
&#160; &#160; } &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17676614" author="jira-bot" created="Fri, 13 Jan 2023 13:05:39 +0000"  >&lt;p&gt;Commit 473fc0a71ed63ecca29694fac6db396cf9be334b in httpcomponents-core&apos;s branch refs/heads/master from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=473fc0a71&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=473fc0a71&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-733&quot; title=&quot;BasicAsyncEntityProducer error on second time send &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-733&quot;&gt;&lt;del&gt;HTTPCORE-733&lt;/del&gt;&lt;/a&gt;: BasicAsyncEntityProducer sends an extra trailing 0 with UTF-8 encoded content&lt;/p&gt;</comment>
                            <comment id="17676615" author="olegk" created="Fri, 13 Jan 2023 13:06:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=laurian&quot; class=&quot;user-hover&quot; rel=&quot;laurian&quot;&gt;laurian&lt;/a&gt; Please review / test the fix in master.&lt;/p&gt;</comment>
                            <comment id="17678577" author="laurian" created="Thu, 19 Jan 2023 09:17:07 +0000"  >&lt;p&gt;That looks fine, thanks.&lt;/p&gt;</comment>
                            <comment id="17688709" author="jira-bot" created="Tue, 14 Feb 2023 21:25:55 +0000"  >&lt;p&gt;Commit 473fc0a71ed63ecca29694fac6db396cf9be334b in httpcomponents-core&apos;s branch refs/heads/real-world-encoding from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=473fc0a71&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=473fc0a71&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-733&quot; title=&quot;BasicAsyncEntityProducer error on second time send &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-733&quot;&gt;&lt;del&gt;HTTPCORE-733&lt;/del&gt;&lt;/a&gt;: BasicAsyncEntityProducer sends an extra trailing 0 with UTF-8 encoded content&lt;/p&gt;</comment>
                            <comment id="17699673" author="jira-bot" created="Mon, 13 Mar 2023 14:25:17 +0000"  >&lt;p&gt;Commit 9112b965002fcb7154aa373f684c04db69b42511 in httpcomponents-core&apos;s branch refs/heads/master from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=9112b9650&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=9112b9650&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-733&quot; title=&quot;BasicAsyncEntityProducer error on second time send &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-733&quot;&gt;&lt;del&gt;HTTPCORE-733&lt;/del&gt;&lt;/a&gt;: BasicAsyncEntityProducer sends an extra trailing 0 with UTF-8 encoded content&lt;/p&gt;</comment>
                            <comment id="17699675" author="jira-bot" created="Mon, 13 Mar 2023 14:27:56 +0000"  >&lt;p&gt;Commit 9112b965002fcb7154aa373f684c04db69b42511 in httpcomponents-core&apos;s branch refs/heads/5.3.x from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=9112b9650&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=9112b9650&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-733&quot; title=&quot;BasicAsyncEntityProducer error on second time send &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-733&quot;&gt;&lt;del&gt;HTTPCORE-733&lt;/del&gt;&lt;/a&gt;: BasicAsyncEntityProducer sends an extra trailing 0 with UTF-8 encoded content&lt;/p&gt;</comment>
                            <comment id="17731941" author="jira-bot" created="Tue, 13 Jun 2023 07:59:30 +0000"  >&lt;p&gt;Commit 9112b965002fcb7154aa373f684c04db69b42511 in httpcomponents-core&apos;s branch refs/heads/dependabot/maven/io.reactivex.rxjava3-rxjava-3.1.6 from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=9112b9650&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=9112b9650&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-733&quot; title=&quot;BasicAsyncEntityProducer error on second time send &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-733&quot;&gt;&lt;del&gt;HTTPCORE-733&lt;/del&gt;&lt;/a&gt;: BasicAsyncEntityProducer sends an extra trailing 0 with UTF-8 encoded content&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 21 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1erfk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>