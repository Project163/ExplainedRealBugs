<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:24:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HTTPCORE-694] Endless loop when encrypted buffer larger than plaintext buffer</title>
                <link>https://issues.apache.org/jira/browse/HTTPCORE-694</link>
                <project id="12310340" key="HTTPCORE">HttpComponents HttpCore</project>
                    <description>&lt;p&gt;We are having an issue where SSLIOSession::decryptData will effectively become an endless loop when the size of the&#160;inEncryptedBuf buffer is larger than the size of the&#160;inPlainBuf.&#160;&lt;/p&gt;

&lt;p&gt;In this scenario the doUnwrap completely fills up the inPlainBuf.&#160; This causes the&#160;&lt;br/&gt;
 if (inPlainBuf.hasRemaining())&lt;br/&gt;
 to return false and never clear anything out of the inPlainBuf buffer.&lt;/p&gt;

&lt;p&gt;From what we can tell the&#160;&lt;br/&gt;
 if (inPlainBuf.hasRemaining()) {&lt;br/&gt;
should be removed, as it is in error.&#160; There is no reason that this buffer being full should prevent it from being emptied.&lt;/p&gt;

&lt;p&gt;We verified that removing this code from 5.1.2 resolved the issue we were facing, along with all tests continuing to pass.&#160; There does not appear to be any change to this code in 5.2 alpha.&lt;/p&gt;

&lt;p&gt;This issue shows up when we use BouncyCastle for FIPS validated TLS, as it creates a larger inEncryptedBuf then the SUN stack.&#160; This issue is completely reproducible when we get a large response from our endpoint.&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13409963">HTTPCORE-694</key>
            <summary>Endless loop when encrypted buffer larger than plaintext buffer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Jason Mathison">Jason Mathison</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Nov 2021 03:08:25 +0000</created>
                <updated>Thu, 4 Nov 2021 15:54:48 +0000</updated>
                            <resolved>Thu, 4 Nov 2021 15:54:48 +0000</resolved>
                                    <version>5.1.2</version>
                    <version>5.2-alpha1</version>
                                    <fixVersion>5.1.3</fixVersion>
                    <fixVersion>5.2-beta1</fixVersion>
                                    <component>HttpCore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17438554" author="olegk" created="Thu, 4 Nov 2021 08:30:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Jason+Mathison&quot; class=&quot;user-hover&quot; rel=&quot;Jason Mathison&quot;&gt;Jason Mathison&lt;/a&gt;&#160;Could you please submit the changes you are proposing as a PR at GitHub? A test case reproducing the issue would also be nice.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="17438723" author="jason mathison" created="Thu, 4 Nov 2021 13:33:25 +0000"  >&lt;p&gt;I put up a PR for the change.&#160; I am trying to make a test, but this class currently doesn&apos;t have any unit tests, and it is proving to be quite hard to write tests for.&#160; I will continue to work on it this morning.&lt;/p&gt;</comment>
                            <comment id="17438791" author="jira-bot" created="Thu, 4 Nov 2021 15:44:22 +0000"  >&lt;p&gt;Commit 1e4bd7b4640c1250e0f7bdceee5fc9d47e30b4b2 in httpcomponents-core&apos;s branch refs/heads/master from JasonMathison&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=1e4bd7b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=1e4bd7b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-694&quot; title=&quot;Endless loop when encrypted buffer larger than plaintext buffer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-694&quot;&gt;&lt;del&gt;HTTPCORE-694&lt;/del&gt;&lt;/a&gt;: Fixed decrypted data check by non-blocking SSL i/o sessions  (#317)&lt;/p&gt;
</comment>
                            <comment id="17438802" author="jira-bot" created="Thu, 4 Nov 2021 15:53:48 +0000"  >&lt;p&gt;Commit d78555caabc855f62da2504d70869218754dc5b3 in httpcomponents-core&apos;s branch refs/heads/5.1.x from JasonMathison&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=d78555c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=d78555c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-694&quot; title=&quot;Endless loop when encrypted buffer larger than plaintext buffer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-694&quot;&gt;&lt;del&gt;HTTPCORE-694&lt;/del&gt;&lt;/a&gt;: Fixed decrypted data check by non-blocking SSL i/o sessions  (#317)&lt;/p&gt;
</comment>
                            <comment id="17438803" author="olegk" created="Thu, 4 Nov 2021 15:54:48 +0000"  >&lt;p&gt;Fix committed to master and 5.1.x.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 1 week, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0wffk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>