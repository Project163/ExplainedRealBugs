<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:24:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HTTPCORE-705] HTTP/1.0 connection persistence is broken</title>
                <link>https://issues.apache.org/jira/browse/HTTPCORE-705</link>
                <project id="12310340" key="HTTPCORE">HttpComponents HttpCore</project>
                    <description>&lt;p&gt;If I download a file repeatedly using a single instance of CloseableHttpAsyncClient, the following exception is thrown after few requests&lt;/p&gt;

&lt;p&gt;java.io.IOException: org.apache.hc.core5.http.ConnectionClosedException: Connection is closed&lt;/p&gt;

&lt;p&gt;The following test app always ends up with a ConnectionClosedException after a number of requests&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;TestHTTP
{
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception
    {
        URI uri = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URI(&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//127.0.0.1:8000/crls/test-ca-no-next-update.crl&quot;&lt;/span&gt;);
&lt;/span&gt;
        CloseableHttpAsyncClient client = HttpAsyncClients.createDefault();

        client.start();

        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            SimpleHttpRequest request = SimpleRequestBuilder.get(uri).build();

            SimpleRequestProducer requestProducer = SimpleRequestProducer.create(request);
            SimpleResponseConsumer responseConsumer = SimpleResponseConsumer.create();

            FutureCallback&amp;lt;SimpleHttpResponse&amp;gt; callback = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FutureCallback&amp;lt;SimpleHttpResponse&amp;gt;()
            {
                @Override
                &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void completed(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; SimpleHttpResponse response) {
                    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;************** completed&quot;&lt;/span&gt;);
                    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(request + &lt;span class=&quot;code-quote&quot;&gt;&quot;-&amp;gt;&quot;&lt;/span&gt; + &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StatusLine(response));
                    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(response.getBody());
                }

                @Override
                &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void failed(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Exception ex) {
                    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;************** failed&quot;&lt;/span&gt;);
                    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(request + &lt;span class=&quot;code-quote&quot;&gt;&quot;-&amp;gt;&quot;&lt;/span&gt; + ex);
                }

                @Override
                &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void cancelled() {
                    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;************** canceled&quot;&lt;/span&gt;);
                    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(request + &lt;span class=&quot;code-quote&quot;&gt;&quot; cancelled&quot;&lt;/span&gt;);
                }
            };

            &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; 10000; i++)
            {
                &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Request: &quot;&lt;/span&gt; + i);

                Future&amp;lt;SimpleHttpResponse&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; = client.execute(
                        requestProducer,
                        responseConsumer,
                        callback);

                &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt;.get();

                &lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; sleep is enabled, no exception will be thrown
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(1);
&lt;/span&gt;            }
        }
        &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (ExecutionException e) {
            e.printStackTrace();
        }
        &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
            client.close(CloseMode.GRACEFUL);
        }
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The full stack trace:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.util.concurrent.ExecutionException: org.apache.hc.core5.http.ConnectionClosedException: Connection is closed
&#160; &#160; at org.apache.hc.core5.concurrent.BasicFuture.getResult(BasicFuture.java:72)
&#160; &#160; at org.apache.hc.core5.concurrent.BasicFuture.get(BasicFuture.java:85)
&#160; &#160; at test.TestHTTP.main(TestHTTP.java:65)
Caused by: org.apache.hc.core5.http.ConnectionClosedException: Connection is closed
&#160; &#160; at org.apache.hc.core5.http.nio.command.CommandSupport.cancelCommands(CommandSupport.java:76)
&#160; &#160; at org.apache.hc.core5.http.impl.nio.AbstractHttp1StreamDuplexer.onDisconnect(AbstractHttp1StreamDuplexer.java:409)
&#160; &#160; at org.apache.hc.core5.http.impl.nio.AbstractHttp1IOEventHandler.disconnected(AbstractHttp1IOEventHandler.java:95)
&#160; &#160; at org.apache.hc.core5.http.impl.nio.ClientHttp1IOEventHandler.disconnected(ClientHttp1IOEventHandler.java:39)
&#160; &#160; at org.apache.hc.core5.reactor.InternalDataChannel.disconnected(InternalDataChannel.java:193)
&#160; &#160; at org.apache.hc.core5.reactor.SingleCoreIOReactor.processClosedSessions(SingleCoreIOReactor.java:231)
&#160; &#160; at org.apache.hc.core5.reactor.SingleCoreIOReactor.doExecute(SingleCoreIOReactor.java:133)
&#160; &#160; at org.apache.hc.core5.reactor.AbstractSingleCoreIOReactor.execute(AbstractSingleCoreIOReactor.java:85)
&#160; &#160; at org.apache.hc.core5.reactor.IOReactorWorker.run(IOReactorWorker.java:44)
&#160; &#160; at java.base/java.lang.Thread.run(Thread.java:829)
&#160;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The file that is downloaded is served by python http server running on localhost:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
python3 -m http.server&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If I add Thread.sleep, the exception will not happen.&lt;/p&gt;

&lt;p&gt;For some reason it looks like the IOReactorWorker background thread closes the CloseableHttpAsyncClient&lt;/p&gt;

&lt;p&gt;Any idea?&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13417814">HTTPCORE-705</key>
            <summary>HTTP/1.0 connection persistence is broken</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="martijn_brinkers">Martijn Brinkers</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Dec 2021 21:31:24 +0000</created>
                <updated>Sun, 2 Oct 2022 14:41:19 +0000</updated>
                            <resolved>Sun, 19 Dec 2021 10:53:08 +0000</resolved>
                                    <version>5.1.2</version>
                                    <fixVersion>5.1.3</fixVersion>
                    <fixVersion>5.2-beta1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17460278" author="olegk" created="Wed, 15 Dec 2021 22:13:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=martijn_brinkers&quot; class=&quot;user-hover&quot; rel=&quot;martijn_brinkers&quot;&gt;martijn_brinkers&lt;/a&gt;&#160; Please provide a docker image of the server or at the very least provide a full context / wire log of the session.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://hc.apache.org/httpcomponents-client-5.1.x/logging.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hc.apache.org/httpcomponents-client-5.1.x/logging.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="17460483" author="martijn_brinkers" created="Thu, 16 Dec 2021 08:16:59 +0000"  >&lt;p&gt;Please find attached a test project. The test project contains a readme, an eclipse project file, readme, docker compose file. The test can be run from eclipse or from the command line. See readme.md for instructions&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13037564/13037564_TestHTTPClient.zip&quot; title=&quot;TestHTTPClient.zip attached to HTTPCORE-705&quot;&gt;TestHTTPClient.zip&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13037565/13037565_full-wire-log.txt&quot; title=&quot;full-wire-log.txt attached to HTTPCORE-705&quot;&gt;full-wire-log.txt&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="17460522" author="martijn_brinkers" created="Thu, 16 Dec 2021 09:29:27 +0000"  >&lt;p&gt;Some additional information. If I catch all exceptions thrown by&lt;br/&gt;
future.get()&lt;br/&gt;
and continue, at some point an assertion fails (Endpoint is not connected) and the application hangs&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.util.concurrent.ExecutionException: java.lang.IllegalStateException: Endpoint is not connected
&#160; &#160; at org.apache.hc.core5.concurrent.BasicFuture.getResult(BasicFuture.java:72)
&#160; &#160; at org.apache.hc.core5.concurrent.BasicFuture.get(BasicFuture.java:85)
&#160; &#160; at test.TestHTTP.main(TestHTTP.java:69)
Caused by: java.lang.IllegalStateException: Endpoint is not connected
&#160; &#160; at org.apache.hc.core5.util.Asserts.check(Asserts.java:38)
&#160; &#160; at org.apache.hc.client5.http.impl.nio.PoolingAsyncClientConnectionManager$InternalConnectionEndpoint.getValidatedPoolEntry(PoolingAsyncClientConnectionManager.java:549)
&#160; &#160; at org.apache.hc.client5.http.impl.nio.PoolingAsyncClientConnectionManager$InternalConnectionEndpoint.execute(PoolingAsyncClientConnectionManager.java:596)
&#160; &#160; at org.apache.hc.client5.http.nio.AsyncConnectionEndpoint.execute(AsyncConnectionEndpoint.java:99)
&#160; &#160; at org.apache.hc.client5.http.impl.async.InternalHttpAsyncExecRuntime.execute(InternalHttpAsyncExecRuntime.java:262)
&#160; &#160; at org.apache.hc.client5.http.impl.async.HttpAsyncMainClientExec.execute(HttpAsyncMainClientExec.java:245)
&#160; &#160; at org.apache.hc.client5.http.impl.async.AsyncExecChainElement.execute(AsyncExecChainElement.java:54)
&#160; &#160; at org.apache.hc.client5.http.impl.async.AsyncExecChainElement$1.proceed(AsyncExecChainElement.java:62)
&#160; &#160; at org.apache.hc.client5.http.impl.async.AsyncConnectExec$1.completed(AsyncConnectExec.java:142)
&#160; &#160; at org.apache.hc.client5.http.impl.async.AsyncConnectExec$1.completed(AsyncConnectExec.java:136)
&#160; &#160; at org.apache.hc.client5.http.impl.async.InternalHttpAsyncExecRuntime$1.completed(InternalHttpAsyncExecRuntime.java:114)
&#160; &#160; at org.apache.hc.client5.http.impl.async.InternalHttpAsyncExecRuntime$1.completed(InternalHttpAsyncExecRuntime.java:105)
&#160; &#160; at org.apache.hc.core5.concurrent.BasicFuture.completed(BasicFuture.java:123)
&#160; &#160; at org.apache.hc.client5.http.impl.nio.PoolingAsyncClientConnectionManager$1$1.leaseCompleted(PoolingAsyncClientConnectionManager.java:286)
&#160; &#160; at org.apache.hc.client5.http.impl.nio.PoolingAsyncClientConnectionManager$1$1.completed(PoolingAsyncClientConnectionManager.java:271)
&#160; &#160; at org.apache.hc.client5.http.impl.nio.PoolingAsyncClientConnectionManager$1$1.completed(PoolingAsyncClientConnectionManager.java:235)
&#160; &#160; at org.apache.hc.core5.concurrent.BasicFuture.completed(BasicFuture.java:123)
&#160; &#160; at org.apache.hc.core5.pool.StrictConnPool.fireCallbacks(StrictConnPool.java:399)
&#160; &#160; at org.apache.hc.core5.pool.StrictConnPool.lease(StrictConnPool.java:215)
&#160; &#160; at org.apache.hc.client5.http.impl.nio.PoolingAsyncClientConnectionManager$1.&amp;lt;init&amp;gt;(PoolingAsyncClientConnectionManager.java:232)
&#160; &#160; at org.apache.hc.client5.http.impl.nio.PoolingAsyncClientConnectionManager.lease(PoolingAsyncClientConnectionManager.java:228)
&#160; &#160; at org.apache.hc.client5.http.impl.async.InternalHttpAsyncExecRuntime.acquireEndpoint(InternalHttpAsyncExecRuntime.java:100)
&#160; &#160; at org.apache.hc.client5.http.impl.async.AsyncConnectExec.execute(AsyncConnectExec.java:135)
&#160; &#160; at org.apache.hc.client5.http.impl.async.AsyncExecChainElement.execute(AsyncExecChainElement.java:54)
&#160; &#160; at org.apache.hc.client5.http.impl.async.AsyncExecChainElement$1.proceed(AsyncExecChainElement.java:62)
&#160; &#160; at org.apache.hc.client5.http.impl.async.AsyncProtocolExec.internalExecute(AsyncProtocolExec.java:183)
&#160; &#160; at org.apache.hc.client5.http.impl.async.AsyncProtocolExec.execute(AsyncProtocolExec.java:145)
&#160; &#160; at org.apache.hc.client5.http.impl.async.AsyncExecChainElement.execute(AsyncExecChainElement.java:54)
&#160; &#160; at org.apache.hc.client5.http.impl.async.AsyncExecChainElement$1.proceed(AsyncExecChainElement.java:62)
&#160; &#160; at org.apache.hc.client5.http.impl.async.AsyncHttpRequestRetryExec.internalExecute(AsyncHttpRequestRetryExec.java:97)
&#160; &#160; at org.apache.hc.client5.http.impl.async.AsyncHttpRequestRetryExec.execute(AsyncHttpRequestRetryExec.java:180)
&#160; &#160; at org.apache.hc.client5.http.impl.async.AsyncExecChainElement.execute(AsyncExecChainElement.java:54)
&#160; &#160; at org.apache.hc.client5.http.impl.async.AsyncExecChainElement$1.proceed(AsyncExecChainElement.java:62)
&#160; &#160; at org.apache.hc.client5.http.impl.async.AsyncRedirectExec.internalExecute(AsyncRedirectExec.java:112)
&#160; &#160; at org.apache.hc.client5.http.impl.async.AsyncRedirectExec.execute(AsyncRedirectExec.java:278)
&#160; &#160; at org.apache.hc.client5.http.impl.async.AsyncExecChainElement.execute(AsyncExecChainElement.java:54)
&#160; &#160; at org.apache.hc.client5.http.impl.async.InternalAbstractHttpAsyncClient.executeImmediate(InternalAbstractHttpAsyncClient.java:367)
&#160; &#160; at org.apache.hc.client5.http.impl.async.InternalAbstractHttpAsyncClient$1.sendRequest(InternalAbstractHttpAsyncClient.java:223)
&#160; &#160; at org.apache.hc.core5.http.nio.support.BasicRequestProducer.sendRequest(BasicRequestProducer.java:93)
&#160; &#160; at org.apache.hc.client5.http.impl.async.InternalAbstractHttpAsyncClient.doExecute(InternalAbstractHttpAsyncClient.java:180)
&#160; &#160; at org.apache.hc.client5.http.impl.async.CloseableHttpAsyncClient.execute(CloseableHttpAsyncClient.java:97)
&#160; &#160; at org.apache.hc.client5.http.impl.async.CloseableHttpAsyncClient.execute(CloseableHttpAsyncClient.java:107)
&#160; &#160; at org.apache.hc.client5.http.impl.async.CloseableHttpAsyncClient.execute(CloseableHttpAsyncClient.java:116)
&#160; &#160; at test.TestHTTP.main(TestHTTP.java:63)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17461016" author="olegk" created="Thu, 16 Dec 2021 19:43:48 +0000"  >&lt;p&gt;&amp;gt; at some point an assertion fails (Endpoint is not connected) and the application hangs&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=martijn_brinkers&quot; class=&quot;user-hover&quot; rel=&quot;martijn_brinkers&quot;&gt;martijn_brinkers&lt;/a&gt; This is a by far more severe problem and I had to fix it first. Please bear with me.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="17461018" author="jira-bot" created="Thu, 16 Dec 2021 19:44:23 +0000"  >&lt;p&gt;Commit 7d943d6f99ed0ef0959199c7b14d76ada218a453 in httpcomponents-client&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-705&quot; title=&quot;HTTP/1.0 connection persistence is broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-705&quot;&gt;&lt;del&gt;HTTPCLIENT-2192&lt;/del&gt;&lt;/a&gt; from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=7d943d6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-client.git;h=7d943d6&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-705&quot; title=&quot;HTTP/1.0 connection persistence is broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-705&quot;&gt;&lt;del&gt;HTTPCLIENT-2192&lt;/del&gt;&lt;/a&gt;: Incorrect connection validity check in the async connection manager can cause an IllegalStateException and lead to a connection leak. Treat closed connections as valid due to the connection open check being inherently racy&lt;/p&gt;</comment>
                            <comment id="17461323" author="olegk" created="Fri, 17 Dec 2021 10:07:28 +0000"  >&lt;p&gt;The resolution of this defect will require changes in the core protocol classes.&lt;/p&gt;</comment>
                            <comment id="17461380" author="jira-bot" created="Fri, 17 Dec 2021 11:33:44 +0000"  >&lt;p&gt;Commit d919529c2f25b3f3c226d054cfd9d15437c917c6 in httpcomponents-core&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-705&quot; title=&quot;HTTP/1.0 connection persistence is broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-705&quot;&gt;&lt;del&gt;HTTPCORE-705&lt;/del&gt;&lt;/a&gt; from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=d919529&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=d919529&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-705&quot; title=&quot;HTTP/1.0 connection persistence is broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-705&quot;&gt;&lt;del&gt;HTTPCORE-705&lt;/del&gt;&lt;/a&gt;: default ConnectionReuseStrategy to use protocol version of the response message by default and that of the execution context as a fallback&lt;/p&gt;</comment>
                            <comment id="17461537" author="jira-bot" created="Fri, 17 Dec 2021 16:13:44 +0000"  >&lt;p&gt;Commit 71a78d0c9959b17c3646a5bee59bdb81d66ca103 in httpcomponents-core&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-705&quot; title=&quot;HTTP/1.0 connection persistence is broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-705&quot;&gt;&lt;del&gt;HTTPCORE-705&lt;/del&gt;&lt;/a&gt; from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=71a78d0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=71a78d0&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-705&quot; title=&quot;HTTP/1.0 connection persistence is broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-705&quot;&gt;&lt;del&gt;HTTPCORE-705&lt;/del&gt;&lt;/a&gt;: ConnectionReuseStrategy to use protocol version of the response message by default and that of the execution context as a fallback&lt;/p&gt;</comment>
                            <comment id="17461542" author="olegk" created="Fri, 17 Dec 2021 16:24:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=martijn_brinkers&quot; class=&quot;user-hover&quot; rel=&quot;martijn_brinkers&quot;&gt;martijn_brinkers&lt;/a&gt; This change-set &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; should fix the problem. Please review or build and upgrade HttpCore from this branch &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;The test you provided now pass for me.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/httpcomponents-core/commit/71a78d0c9959b17c3646a5bee59bdb81d66ca103&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/httpcomponents-core/commit/71a78d0c9959b17c3646a5bee59bdb81d66ca103&lt;/a&gt;&#160;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/httpcomponents-core/tree/HTTPCORE-705&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/httpcomponents-core/tree/HTTPCORE-705&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17461857" author="jira-bot" created="Sat, 18 Dec 2021 10:50:30 +0000"  >&lt;p&gt;Commit 95b156d0966d145c27d7e82d0efe1a4224e52952 in httpcomponents-core&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-705&quot; title=&quot;HTTP/1.0 connection persistence is broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-705&quot;&gt;&lt;del&gt;HTTPCORE-705&lt;/del&gt;&lt;/a&gt; from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=95b156d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=95b156d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-705&quot; title=&quot;HTTP/1.0 connection persistence is broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-705&quot;&gt;&lt;del&gt;HTTPCORE-705&lt;/del&gt;&lt;/a&gt;: ConnectionReuseStrategy to use protocol version of the response message by default and that of the execution context as a fallback&lt;/p&gt;</comment>
                            <comment id="17461864" author="jira-bot" created="Sat, 18 Dec 2021 11:00:56 +0000"  >&lt;p&gt;Commit e67e5b6903e1005cecdf804c92da2ebce87741c3 in httpcomponents-core&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-705&quot; title=&quot;HTTP/1.0 connection persistence is broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-705&quot;&gt;&lt;del&gt;HTTPCORE-705&lt;/del&gt;&lt;/a&gt; from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=e67e5b6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=e67e5b6&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-705&quot; title=&quot;HTTP/1.0 connection persistence is broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-705&quot;&gt;&lt;del&gt;HTTPCORE-705&lt;/del&gt;&lt;/a&gt;: ConnectionReuseStrategy to use protocol version of the response message by default and that of the execution context as a fallback&lt;/p&gt;</comment>
                            <comment id="17461992" author="martijn_brinkers" created="Sat, 18 Dec 2021 21:27:29 +0000"  >&lt;p&gt;I can confirm &lt;a href=&quot;https://github.com/apache/httpcomponents-core/tree/HTTPCORE-705&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;HTTPCORE-705&lt;/a&gt; fixes the issue.&lt;/p&gt;

&lt;p&gt;I&apos;m impressed how fast you fixed the issue.&lt;/p&gt;</comment>
                            <comment id="17462120" author="jira-bot" created="Sun, 19 Dec 2021 10:04:40 +0000"  >&lt;p&gt;Commit c4a2881a543df5f997c8a3a22e1422962636a9fe in httpcomponents-core&apos;s branch refs/heads/master from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=c4a2881&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=c4a2881&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-705&quot; title=&quot;HTTP/1.0 connection persistence is broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-705&quot;&gt;&lt;del&gt;HTTPCORE-705&lt;/del&gt;&lt;/a&gt;: ConnectionReuseStrategy to use protocol version of the response message by default and that of the execution context as a fallback&lt;/p&gt;</comment>
                            <comment id="17462145" author="jira-bot" created="Sun, 19 Dec 2021 10:51:14 +0000"  >&lt;p&gt;Commit 0a7dad66b1d9b825e82b9ba68a0e862a81b0c515 in httpcomponents-core&apos;s branch refs/heads/5.1.x from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=0a7dad6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=0a7dad6&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-705&quot; title=&quot;HTTP/1.0 connection persistence is broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-705&quot;&gt;&lt;del&gt;HTTPCORE-705&lt;/del&gt;&lt;/a&gt;: ConnectionReuseStrategy to use protocol version of the response message by default and that of the execution context as a fallback&lt;/p&gt;</comment>
                            <comment id="17462146" author="olegk" created="Sun, 19 Dec 2021 10:53:08 +0000"  >&lt;p&gt;Fixed in 5.1.x and master.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="17462149" author="jira-bot" created="Sun, 19 Dec 2021 11:08:21 +0000"  >&lt;p&gt;Commit fb864e2ad20ca495b33baf5b7f98ce7bc7f58a0b in httpcomponents-core&apos;s branch refs/heads/master from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=fb864e2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=fb864e2&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-705&quot; title=&quot;HTTP/1.0 connection persistence is broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-705&quot;&gt;&lt;del&gt;HTTPCORE-705&lt;/del&gt;&lt;/a&gt;: ConnectionReuseStrategy to use protocol version of the response message by default and that of the execution context as a fallback&lt;/p&gt;</comment>
                            <comment id="17462150" author="olegk" created="Sun, 19 Dec 2021 11:11:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=martijn_brinkers&quot; class=&quot;user-hover&quot; rel=&quot;martijn_brinkers&quot;&gt;martijn_brinkers&lt;/a&gt; Your input and the reproducer was excellent, so the fix was quite easy.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="17612121" author="jira-bot" created="Sun, 2 Oct 2022 14:41:19 +0000"  >&lt;p&gt;Commit 0a7dad66b1d9b825e82b9ba68a0e862a81b0c515 in httpcomponents-core&apos;s branch refs/heads/github_ci_on_win from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=0a7dad66b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=0a7dad66b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-705&quot; title=&quot;HTTP/1.0 connection persistence is broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-705&quot;&gt;&lt;del&gt;HTTPCORE-705&lt;/del&gt;&lt;/a&gt;: ConnectionReuseStrategy to use protocol version of the response message by default and that of the execution context as a fallback&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13037564" name="TestHTTPClient.zip" size="3632229" author="martijn_brinkers" created="Thu, 16 Dec 2021 08:14:38 +0000"/>
                            <attachment id="13037565" name="full-wire-log.txt" size="242820" author="martijn_brinkers" created="Thu, 16 Dec 2021 08:14:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 5 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0xr7k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>