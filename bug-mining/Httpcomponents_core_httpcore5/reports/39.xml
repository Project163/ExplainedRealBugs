<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:24:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HTTPCORE-595] Android Conscrypt NPE in SSL_get_shutdown shuts down IOReactor</title>
                <link>https://issues.apache.org/jira/browse/HTTPCORE-595</link>
                <project id="12310340" key="HTTPCORE">HttpComponents HttpCore</project>
                    <description>&lt;p&gt;Using HttpCore 5.0-beta8 IOReactor on Android 8.1, a TLS protocol error causes the IOReactor instance to shut down.&lt;/p&gt;

&lt;p&gt;There is an initial &lt;tt&gt;SSLProtocolException&lt;/tt&gt; from the protocol error:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;Read error: ssl=0x9f0ab600: Failure in SSL library, usually a protocol error&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;error:10000416:SSL routines:OPENSSL_internal:SSLV3_ALERT_CERTIFICATE_UNKNOWN (external/boringssl/src/ssl/tls_record.cc:579 0x8834dc20:0x00000001)&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;This exception appears to be handled properly, but it leaves things in a state so that later this &lt;tt&gt;NullPointerException&lt;/tt&gt; occurs in &lt;tt&gt;ConscryptEngine.isInboundDone&lt;/tt&gt; which&#160;shuts down the &lt;tt&gt;IOReactor&lt;/tt&gt; dispatcher:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;2019-09-04 07:37:25.150 32414-32495/com.example.skeleton.app E/MainActivity: java.lang.NullPointerException: ssl == null&lt;/tt&gt;&lt;br/&gt;
{{ at com.android.org.conscrypt.NativeCrypto.SSL_get_shutdown(Native Method)}}&lt;br/&gt;
{{ at com.android.org.conscrypt.SslWrapper.wasShutdownReceived(SslWrapper.java:483)}}&lt;br/&gt;
{{ at com.android.org.conscrypt.ConscryptEngine.isInboundDone(ConscryptEngine.java:590)}}&lt;br/&gt;
{{ at org.apache.hc.core5.reactor.ssl.SSLIOSession.updateEventMask(SSLIOSession.java:372)}}&lt;br/&gt;
{{ at org.apache.hc.core5.reactor.ssl.SSLIOSession.close(SSLIOSession.java:672)}}&lt;br/&gt;
{{ at org.apache.hc.core5.reactor.InternalDataChannel.close(InternalDataChannel.java:288)}}&lt;br/&gt;
{{ at org.apache.hc.core5.http.impl.nio.AbstractHttp1StreamDuplexer.shutdownSession(AbstractHttp1StreamDuplexer.java:158)}}&lt;br/&gt;
{{ at org.apache.hc.core5.http.impl.nio.AbstractHttp1StreamDuplexer.onException(AbstractHttp1StreamDuplexer.java:383)}}&lt;br/&gt;
{{ at org.apache.hc.core5.http.impl.nio.AbstractHttp1IOEventHandler.exception(AbstractHttp1IOEventHandler.java:89)}}&lt;br/&gt;
{{ at org.apache.hc.core5.http.impl.nio.ServerHttp1IOEventHandler.exception(ServerHttp1IOEventHandler.java:41)}}&lt;br/&gt;
{{ at org.apache.hc.core5.reactor.InternalDataChannel.onException(InternalDataChannel.java:204)}}&lt;br/&gt;
{{ at org.apache.hc.core5.reactor.InternalChannel.handleIOEvent(InternalChannel.java:55)}}&lt;br/&gt;
{{ at org.apache.hc.core5.reactor.SingleCoreIOReactor.processEvents(SingleCoreIOReactor.java:173)}}&lt;br/&gt;
{{ at org.apache.hc.core5.reactor.SingleCoreIOReactor.doExecute(SingleCoreIOReactor.java:123)}}&lt;br/&gt;
{{ at org.apache.hc.core5.reactor.AbstractSingleCoreIOReactor.execute(AbstractSingleCoreIOReactor.java:82)}}&lt;br/&gt;
{{ at org.apache.hc.core5.reactor.IOReactorWorker.run(IOReactorWorker.java:44)}}&lt;br/&gt;
{{ at java.lang.Thread.run(Thread.java:764)}}&lt;br/&gt;
&lt;tt&gt;2019-09-04 07:37:25.185 32414-32494/com.example.skeleton.app E/MainActivity: java.lang.NullPointerException: ssl == null&lt;/tt&gt;&lt;br/&gt;
{{ at com.android.org.conscrypt.NativeCrypto.SSL_get_shutdown(Native Method)}}&lt;br/&gt;
{{ at com.android.org.conscrypt.SslWrapper.wasShutdownReceived(SslWrapper.java:483)}}&lt;br/&gt;
{{ at com.android.org.conscrypt.ConscryptEngine.isInboundDone(ConscryptEngine.java:590)}}&lt;br/&gt;
{{ at org.apache.hc.core5.reactor.ssl.SSLIOSession.updateEventMask(SSLIOSession.java:372)}}&lt;br/&gt;
{{ at org.apache.hc.core5.reactor.ssl.SSLIOSession.close(SSLIOSession.java:672)}}&lt;br/&gt;
{{ at org.apache.hc.core5.reactor.InternalDataChannel.close(InternalDataChannel.java:288)}}&lt;br/&gt;
{{ at org.apache.hc.core5.http.impl.nio.AbstractHttp1StreamDuplexer.shutdownSession(AbstractHttp1StreamDuplexer.java:158)}}&lt;br/&gt;
{{ at org.apache.hc.core5.http.impl.nio.AbstractHttp1StreamDuplexer.onException(AbstractHttp1StreamDuplexer.java:383)}}&lt;br/&gt;
{{ at org.apache.hc.core5.http.impl.nio.AbstractHttp1IOEventHandler.exception(AbstractHttp1IOEventHandler.java:89)}}&lt;br/&gt;
{{ at org.apache.hc.core5.http.impl.nio.ServerHttp1IOEventHandler.exception(ServerHttp1IOEventHandler.java:41)}}&lt;br/&gt;
{{ at org.apache.hc.core5.reactor.InternalDataChannel.onException(InternalDataChannel.java:204)}}&lt;br/&gt;
{{ at org.apache.hc.core5.reactor.InternalChannel.handleIOEvent(InternalChannel.java:55)}}&lt;br/&gt;
{{ at org.apache.hc.core5.reactor.SingleCoreIOReactor.processEvents(SingleCoreIOReactor.java:173)}}&lt;br/&gt;
{{ at org.apache.hc.core5.reactor.SingleCoreIOReactor.doExecute(SingleCoreIOReactor.java:123)}}&lt;br/&gt;
{{ at org.apache.hc.core5.reactor.AbstractSingleCoreIOReactor.execute(AbstractSingleCoreIOReactor.java:82)}}&lt;br/&gt;
{{ at org.apache.hc.core5.reactor.IOReactorWorker.run(IOReactorWorker.java:44)}}&lt;br/&gt;
{{ at java.lang.Thread.run(Thread.java:764)}}&lt;/p&gt;

&lt;p&gt;It appears that Jetty encountered the same bug, which they have a workaround for:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/eclipse/jetty.project/issues/2777&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/eclipse/jetty.project/issues/2777&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/eclipse/jetty.project/commit/da9c5fcae20a8440ac26cff5c10f155d114ffd6d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/eclipse/jetty.project/commit/da9c5fcae20a8440ac26cff5c10f155d114ffd6d&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Technically this is likely a bug in a dependency and not in HttpCore proper, but lack of a workaround may hinder its use on Android.&lt;/p&gt;</description>
                <environment>Android 8.1 (Oreo)</environment>
        <key id="13254735">HTTPCORE-595</key>
            <summary>Android Conscrypt NPE in SSL_get_shutdown shuts down IOReactor</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rhashimoto">Roy Hashimoto</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 Sep 2019 15:28:52 +0000</created>
                <updated>Fri, 6 Sep 2019 07:27:19 +0000</updated>
                            <resolved>Fri, 6 Sep 2019 07:27:19 +0000</resolved>
                                    <version>5.0-beta8</version>
                                    <fixVersion>5.0-beta9</fixVersion>
                                    <component>HttpCore NIO</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16922630" author="olegk" created="Wed, 4 Sep 2019 16:04:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rhashimoto&quot; class=&quot;user-hover&quot; rel=&quot;rhashimoto&quot;&gt;rhashimoto&lt;/a&gt;&#160;The work-round in Jetty looks terrible. I always cringe when I see people catch and ignore {{Throwable}}s&#160;indiscriminately. &lt;/p&gt;

&lt;p&gt;I&apos;ll see what I can do about it.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="16922687" author="garydgregory" created="Wed, 4 Sep 2019 17:16:52 +0000"  >&lt;p&gt;+1 for induction in the coding horror hall of fame &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16923502" author="jira-bot" created="Thu, 5 Sep 2019 14:53:10 +0000"  >&lt;p&gt;Commit 547655dfcb618da138cdaffe337a7126715dc4a2 in httpcomponents-core&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-595&quot; title=&quot;Android Conscrypt NPE in SSL_get_shutdown shuts down IOReactor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-595&quot;&gt;&lt;del&gt;HTTPCORE-595&lt;/del&gt;&lt;/a&gt; from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=547655d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=547655d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-595&quot; title=&quot;Android Conscrypt NPE in SSL_get_shutdown shuts down IOReactor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-595&quot;&gt;&lt;del&gt;HTTPCORE-595&lt;/del&gt;&lt;/a&gt;: tolerate NPE thrown by com.android.org.conscrypt.NativeCrypto#SSL_get_shutdown in Android Conscript&lt;/p&gt;</comment>
                            <comment id="16923511" author="olegk" created="Thu, 5 Sep 2019 14:56:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rhashimoto&quot; class=&quot;user-hover&quot; rel=&quot;rhashimoto&quot;&gt;rhashimoto&lt;/a&gt; Could you please see if this would fix the problem in your environment?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/httpcomponents-core/commit/547655dfcb618da138cdaffe337a7126715dc4a2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/httpcomponents-core/commit/547655dfcb618da138cdaffe337a7126715dc4a2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You might need to build HttpCore from this branch&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/httpcomponents-core/tree/HTTPCORE-595&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/httpcomponents-core/tree/HTTPCORE-595&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="16923598" author="rhashimoto" created="Thu, 5 Sep 2019 16:40:15 +0000"  >&lt;p&gt;The fix branch is working for me. Thanks, Oleg!&lt;/p&gt;</comment>
                            <comment id="16923983" author="jira-bot" created="Fri, 6 Sep 2019 07:26:16 +0000"  >&lt;p&gt;Commit 547655dfcb618da138cdaffe337a7126715dc4a2 in httpcomponents-core&apos;s branch refs/heads/master from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=547655d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=547655d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-595&quot; title=&quot;Android Conscrypt NPE in SSL_get_shutdown shuts down IOReactor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-595&quot;&gt;&lt;del&gt;HTTPCORE-595&lt;/del&gt;&lt;/a&gt;: tolerate NPE thrown by com.android.org.conscrypt.NativeCrypto#SSL_get_shutdown in Android Conscript&lt;/p&gt;</comment>
                            <comment id="16923985" author="olegk" created="Fri, 6 Sep 2019 07:27:19 +0000"  >&lt;p&gt;Committed to master.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 10 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z06bo0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>