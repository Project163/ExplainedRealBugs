<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:24:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HTTPCORE-752] Idle timeout on HTTPS connection does not work</title>
                <link>https://issues.apache.org/jira/browse/HTTPCORE-752</link>
                <project id="12310340" key="HTTPCORE">HttpComponents HttpCore</project>
                    <description>&lt;p&gt;I&apos;m having issues trying to set an idle timeout on https connections on an asynchronous HTTPS server. This is what I&apos;m doing:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &#160; &#160; &#160; &#160;IOReactorConfig ioReactorConfig = IOReactorConfig.custom()
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;.setIoThreadCount(4)
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;.setSoTimeout(5000, TimeUnit.MILLISECONDS)
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;.setTcpNoDelay(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;.setSoReuseAddress(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;.setBacklogSize(0)
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;.build(); &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;And passing that ioReactorConfig to DefaultListeningIOReactor, and an&#160;IOSessionListener to be notified of timed out connections.&lt;/p&gt;

&lt;p&gt;So the thing is, for plain http connections, that timeout works (my listener is called after 5 seconds, when the other end stops sending data), but on https connections, it does not work, and I need&#160;connections to be closed.&lt;/p&gt;

&lt;p&gt;Attached maven project&#160;that reproduces this issue.&lt;/p&gt;

&lt;p&gt;Class TestHttpsTimeout has a main() method that initializes the HTTPS server, using httpcore, and then acts as a HTTPS client that stops sending data after sending 25000 out of 50000 bytes (line 141). At this point I&apos;m unable to detect this idle connection from server side.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13540359">HTTPCORE-752</key>
            <summary>Idle timeout on HTTPS connection does not work</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="icruz">Isaac Cruz Ballesteros</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Jun 2023 09:22:03 +0000</created>
                <updated>Fri, 16 Jun 2023 13:25:34 +0000</updated>
                            <resolved>Fri, 16 Jun 2023 13:25:34 +0000</resolved>
                                    <version>5.2.1</version>
                                    <fixVersion>5.2.2</fixVersion>
                                    <component>HttpCore NIO</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17733426" author="olegk" created="Fri, 16 Jun 2023 09:33:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=icruz&quot; class=&quot;user-hover&quot; rel=&quot;icruz&quot;&gt;icruz&lt;/a&gt; Please understand one simple thing: timeouts are not absolute values, timeouts define the longest period of inactivity between consecutive i/o operations.&#160;&lt;/p&gt;

&lt;p&gt;Please provide a test app reproducing the defect. Otherwise I will have to close the ticket as invalid.&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="17733437" author="jira-bot" created="Fri, 16 Jun 2023 10:03:47 +0000"  >&lt;p&gt;Commit f892192719e836191257b2dff270d327142e9cb6 in httpcomponents-core&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-752&quot; title=&quot;Idle timeout on HTTPS connection does not work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-752&quot;&gt;&lt;del&gt;HTTPCORE-752&lt;/del&gt;&lt;/a&gt; from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=f89219271&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=f89219271&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-752&quot; title=&quot;Idle timeout on HTTPS connection does not work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-752&quot;&gt;&lt;del&gt;HTTPCORE-752&lt;/del&gt;&lt;/a&gt;: I/O reactor fails to initialize socket timeout for TLS connections correctly resulting in infinite (no timeout) by default&lt;/p&gt;</comment>
                            <comment id="17733439" author="icruz" created="Fri, 16 Jun 2023 10:04:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olegk&quot; class=&quot;user-hover&quot; rel=&quot;olegk&quot;&gt;olegk&lt;/a&gt; if I undestand correctly, I have set 5 seconds max of inactivity, and in the test there are 30 seconds without any I/O activity, so that timeout should trigger to give the possibility of closing the session. Am I missing something? Why do you think the provided test app does not reproduce the defect?&lt;/p&gt;

&lt;p&gt;Basically in our application we are leaking connections when the client changes WAN IP for example, at that point the connection does not receive any FIN or RST, it just stays there forever, and we need some sort of timeout to close it. I thought SoTimeout would do the trick, and it actually works on plain HTTP server, but not on HTTPS server.&lt;/p&gt;</comment>
                            <comment id="17733440" author="olegk" created="Fri, 16 Jun 2023 10:05:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=icruz&quot; class=&quot;user-hover&quot; rel=&quot;icruz&quot;&gt;icruz&lt;/a&gt;&#160; Please test this change-set and let me know if it resolves the problem for you.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/httpcomponents-core/compare/master...HTTPCORE-752&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/httpcomponents-core/compare/master...HTTPCORE-752&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Oleg&lt;/p&gt;</comment>
                            <comment id="17733446" author="icruz" created="Fri, 16 Jun 2023 10:20:19 +0000"  >&lt;p&gt;Yes, it works with that patch, thanks!&lt;/p&gt;</comment>
                            <comment id="17733508" author="jira-bot" created="Fri, 16 Jun 2023 13:25:12 +0000"  >&lt;p&gt;Commit 6f82d1c3d785cf3392fd3843c1b0b1f5e39eb8c9 in httpcomponents-core&apos;s branch refs/heads/master from Oleg Kalnichevski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=6f82d1c3d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=httpcomponents-core.git;h=6f82d1c3d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCORE-752&quot; title=&quot;Idle timeout on HTTPS connection does not work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HTTPCORE-752&quot;&gt;&lt;del&gt;HTTPCORE-752&lt;/del&gt;&lt;/a&gt;: I/O reactor fails to initialize socket timeout for TLS connections correctly resulting in infinite (no timeout) by default&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13059132" name="httpsTimeout.zip" size="46492" author="icruz" created="Fri, 16 Jun 2023 09:21:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 21 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1ilrk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>