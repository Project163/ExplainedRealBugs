{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/829","repository_url":"https://api.github.com/repos/BurntSushi/ripgrep","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/829/labels{/name}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/829/comments","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/829/events","html_url":"https://github.com/BurntSushi/ripgrep/issues/829","id":299244837,"node_id":"MDU6SXNzdWUyOTkyNDQ4Mzc=","number":829,"title":"Passing a path argument doesn't respect .gitignore","user":{"login":"tmccombs","id":2541726,"node_id":"MDQ6VXNlcjI1NDE3MjY=","avatar_url":"https://avatars.githubusercontent.com/u/2541726?v=4","gravatar_id":"","url":"https://api.github.com/users/tmccombs","html_url":"https://github.com/tmccombs","followers_url":"https://api.github.com/users/tmccombs/followers","following_url":"https://api.github.com/users/tmccombs/following{/other_user}","gists_url":"https://api.github.com/users/tmccombs/gists{/gist_id}","starred_url":"https://api.github.com/users/tmccombs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tmccombs/subscriptions","organizations_url":"https://api.github.com/users/tmccombs/orgs","repos_url":"https://api.github.com/users/tmccombs/repos","events_url":"https://api.github.com/users/tmccombs/events{/privacy}","received_events_url":"https://api.github.com/users/tmccombs/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":339721678,"node_id":"MDU6TGFiZWwzMzk3MjE2Nzg=","url":"https://api.github.com/repos/BurntSushi/ripgrep/labels/bug","name":"bug","color":"fc2929","default":true,"description":"A bug."},{"id":1849506066,"node_id":"MDU6TGFiZWwxODQ5NTA2MDY2","url":"https://api.github.com/repos/BurntSushi/ripgrep/labels/rollup","name":"rollup","color":"ffccee","default":false,"description":"A PR that has been merged with many others in a rollup."},{"id":2045967572,"node_id":"MDU6TGFiZWwyMDQ1OTY3NTcy","url":"https://api.github.com/repos/BurntSushi/ripgrep/labels/gitignore","name":"gitignore","color":"bfdadc","default":false,"description":"Bugs related to gitignore problems."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":14,"created_at":"2018-02-22T07:15:23Z","updated_at":"2025-09-20T01:08:21Z","closed_at":"2025-09-20T01:08:21Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"#### What version of ripgrep are you using?\r\nripgrep 0.8.1\r\n-SIMD -AVX\r\n\r\n\r\n#### What operating system are you using ripgrep on?\r\n\r\nArchlinux (4.15.3-2-ARCH), also Ubuntu 16.04\r\n\r\n#### Describe your question, feature request, or bug.\r\n\r\nIf I am in a git repository and run `rg` with a directory as a PATH argument, then all files under that directory are searched, even if they would normally be ignored because of .gitignore rule. If I `cd` into the directory and run `rg` without a PATH argument, the files are excluded as I expect. changing into a subdirectory is a workaround but is sometimes less convenient than using a path argument.\r\n\r\nThe man page does say\r\n\r\n> Paths specified expicitly on the command line override glob and ignore rules.\r\n\r\nWhich could be interpreted to mean that the if such an argument is specified, the ignore rules are ignored altogether. But that behaviour is unexpected to me, and the wording of the documentation isn't entirely clear on whether it overrides _all_ rules, or only rules that specifically ignore the specified path (but not children of that path).\r\n\r\nIf overriding all ignore rules is the intended behaviour there should at least be a way to turn the ignore rules back on, but `--ignore-vcs` does nothing when supplied with a PATH argument.\r\n\r\nInterestingly, if I specify a glob such as `-g \"*.c\"`, that is respected for files under the path.\r\n\r\n#### Steps to reproduce:\r\n\r\n.gitignore:\r\n```\r\n/a/b/\r\n```\r\n\r\na/b/test.txt:\r\n```\r\nSample text\r\n```\r\n\r\nIn root of repository:\r\n\r\n`rg Sample` produces no output\r\n\r\n```\r\n$ rg Sample a\r\na/b/test.txt\r\n1:Sample text\r\n```\r\n\r\nAdding `--ignore-vcs` produces the same output.\r\n\r\nIn `a` directory `rg Sample` also produces no output.\r\n\r\n#### If this is a bug, what is the actual behavior?\r\n\r\n`rg --debug Sample a`\r\n\r\n```\r\nDEBUG/grep::search/grep/src/search.rs:195: regex ast:\r\nLiteral {\r\n    chars: [\r\n        'S',\r\n        'a',\r\n        'm',\r\n        'p',\r\n        'l',\r\n        'e'\r\n    ],\r\n    casei: false\r\n}\r\nDEBUG/grep::literals/grep/src/literals.rs:38: literal prefixes detected: Literals { lits: [Complete(Sample)], limit_size: 250, limit_class: 10 }\r\nDEBUG/globset/globset/src/lib.rs:396: glob converted to regex: Glob { glob: \"**/.*~\", re: \"(?-u)^(?:/?|.*/)\\\\..*\\\\~$\", opts: GlobOptions { case_insensitive: false, literal_separator: false }, tokens: Tokens([RecursivePrefix, Literal('.'), ZeroOrMore, Literal('~')]) }\r\nDEBUG/globset/globset/src/lib.rs:401: built glob set; 0 literals, 0 basenames, 1 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 1 regexes\r\nDEBUG/globset/globset/src/lib.rs:401: built glob set; 1 literals, 0 basenames, 0 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes\r\na/b/test.txt\r\n1:Sample text\r\n```\r\n\r\n#### If this is a bug, what is the expected behavior?\r\n\r\nProduced no output, since a/b/test.txt is ignored by the .gitignore file.\r\n","closed_by":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/829/reactions","total_count":34,"+1":32,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":2},"timeline_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/829/timeline","performed_via_github_app":null,"state_reason":"completed"}