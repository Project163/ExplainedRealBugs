{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1872","repository_url":"https://api.github.com/repos/BurntSushi/ripgrep","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1872/labels{/name}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1872/comments","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1872/events","html_url":"https://github.com/BurntSushi/ripgrep/issues/1872","id":901856197,"node_id":"MDU6SXNzdWU5MDE4NTYxOTc=","number":1872,"title":"Add \"replace\" text field in --json output that contains replace string for respective matches","user":{"login":"poetaman","id":71736629,"node_id":"MDQ6VXNlcjcxNzM2NjI5","avatar_url":"https://avatars.githubusercontent.com/u/71736629?v=4","gravatar_id":"","url":"https://api.github.com/users/poetaman","html_url":"https://github.com/poetaman","followers_url":"https://api.github.com/users/poetaman/followers","following_url":"https://api.github.com/users/poetaman/following{/other_user}","gists_url":"https://api.github.com/users/poetaman/gists{/gist_id}","starred_url":"https://api.github.com/users/poetaman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/poetaman/subscriptions","organizations_url":"https://api.github.com/users/poetaman/orgs","repos_url":"https://api.github.com/users/poetaman/repos","events_url":"https://api.github.com/users/poetaman/events{/privacy}","received_events_url":"https://api.github.com/users/poetaman/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":339721680,"node_id":"MDU6TGFiZWwzMzk3MjE2ODA=","url":"https://api.github.com/repos/BurntSushi/ripgrep/labels/enhancement","name":"enhancement","color":"84b6eb","default":true,"description":"An enhancement to the functionality of the software."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2021-05-26T06:56:11Z","updated_at":"2025-09-20T01:08:29Z","closed_at":"2025-09-20T01:08:29Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Currently ``rg --json`` provides full text of every match in submatch array item's ``match.text`` field. This ticket is to request addition of ``replace.text`` field in submatch array items. The ``replace.text`` fields will only get added if user passed the replace flag ``-r`` and the replace string. For usual searches without replace (``-r``), replace.text will not get added & the json output will be same as it is today.\r\n\r\nMotivation: This will allow using ``rg --json`` to become a real alternative to Vim's internal search-and-replace functionality ``:%s/<match_pattern>/<replace_pattern>/g`` that is based on legacy vim regex format. Given the start-end position of submatches are known, developers would just need replacement text information to delete ``match.text`` from text files, and replace it with ``replace.text``. Given its in a clean json format, it would be easier to allow batch processing, replace an occurrence of interest, and even selectively rollback* easily. The same information can be used in other tools/scripts as well to do search-and-replace. Moreover, currently there is no way of doing this using ``rg`` with Vim & just having it integrated as a search tool makes it less preferred over vim's built in regex engine because: users will have to learn new regex syntax that they cannot use for capture group based complex text replace. This will force a user to either learn both syntaxes (vim regex, and rust regex), or just stick with vim regex (thus limiting adoption of ``rg``). Having this feature will also bring the power of pcre2 search and replace to Vim.\r\n\r\n\\* Selective rollback is different from undo. Undo by its very nature is LIFO, whereas selective rollback can be in any order the user wishes (without having to undo all steps after it). It's easy to build something like that in Vim with information asked in this ticket.\r\n\r\n> NOTE: If you decide to add this, then please cover those corners where entire line is a match, and no submatches are printed.","closed_by":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1872/reactions","total_count":8,"+1":8,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1872/timeline","performed_via_github_app":null,"state_reason":"completed"}