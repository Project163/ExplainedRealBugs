{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1990","repository_url":"https://api.github.com/repos/BurntSushi/ripgrep","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1990/labels{/name}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1990/comments","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1990/events","html_url":"https://github.com/BurntSushi/ripgrep/issues/1990","id":996602893,"node_id":"I_kwDOAzJbyc47ZvQN","number":1990,"title":"Improve error message when RIPGREP_CONFIG_PATH refers to a nonexistent file","user":{"login":"roryokane","id":79168,"node_id":"MDQ6VXNlcjc5MTY4","avatar_url":"https://avatars.githubusercontent.com/u/79168?v=4","gravatar_id":"","url":"https://api.github.com/users/roryokane","html_url":"https://github.com/roryokane","followers_url":"https://api.github.com/users/roryokane/followers","following_url":"https://api.github.com/users/roryokane/following{/other_user}","gists_url":"https://api.github.com/users/roryokane/gists{/gist_id}","starred_url":"https://api.github.com/users/roryokane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roryokane/subscriptions","organizations_url":"https://api.github.com/users/roryokane/orgs","repos_url":"https://api.github.com/users/roryokane/repos","events_url":"https://api.github.com/users/roryokane/events{/privacy}","received_events_url":"https://api.github.com/users/roryokane/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":339721680,"node_id":"MDU6TGFiZWwzMzk3MjE2ODA=","url":"https://api.github.com/repos/BurntSushi/ripgrep/labels/enhancement","name":"enhancement","color":"84b6eb","default":true,"description":"An enhancement to the functionality of the software."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-09-15T02:51:49Z","updated_at":"2021-11-15T15:29:34Z","closed_at":"2021-11-15T15:29:34Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Current behavior\r\n\r\nWhen `RIPGREP_CONFIG_PATH` refers to a nonexistent file, this is the warning that is currently printed:\r\n\r\n```console\r\n$ RIPGREP_CONFIG_PATH=~/.config/ripgreprc rg 'search regex'\r\n/Users/roryokane/.config/ripgreprc: No such file or directory (os error 2)\r\n```\r\n\r\n## Proposed improvement\r\n\r\nThe error message I’d prefer:\r\n\r\n```console\r\n$ RIPGREP_CONFIG_PATH=~/.config/ripgreprc rg 'search regex'\r\nProblem reading the config file specified in RIPGREP_CONFIG_PATH:\r\n/Users/roryokane/.config/ripgreprc: No such file or directory (os error 2)\r\n```\r\n\r\nI wish I could fit the phrase “the RIPGREP_CONFIG_PATH environment variable” in that first line, but I couldn’t think of a wording that wouldn’t make the error distractingly long when the user doesn’t want to fix that warning soon, which might happen occasionally.\r\n\r\n## Rationale\r\n\r\nThis would be especially useful for those who have set `RIPGREP_CONFIG_PATH` in their shell’s config, and have recently copied their shell config to a new computer. They may not remember that `RIPGREP_CONFIG_PATH` is set.\r\n\r\nTo illustrate, here’s how the current error message looks in that case:\r\n\r\n```shell\r\n# somewhere in my shell config\r\nexport RIPGREP_CONFIG_PATH=~/.config/ripgreprc\r\n```\r\n\r\n```console\r\n$ rg 'search regex'\r\n/Users/roryokane/.config/ripgreprc: No such file or directory (os error 2)\r\n```\r\n\r\nWhen I first saw that error, I assumed that ripgrep looked for that file by default, and I was surprised that it was so verbose about a config file not existing. It took me some searching to realize that `RIPGREP_CONFIG_PATH` was involved. After that, I solved the problem by copying my config file to the new computer.","closed_by":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1990/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1990/timeline","performed_via_github_app":null,"state_reason":"completed"}