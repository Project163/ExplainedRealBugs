[{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/298264084","html_url":"https://github.com/BurntSushi/ripgrep/issues/469#issuecomment-298264084","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/469","id":298264084,"node_id":"MDEyOklzc3VlQ29tbWVudDI5ODI2NDA4NA==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-30T23:22:54Z","updated_at":"2017-04-30T23:22:54Z","body":"Could you describe the problem you are trying to solve? (i.e., Without talking about the ignore crate, or perhaps even better, without mentioning threads altogether.)","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/298264084/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/298295632","html_url":"https://github.com/BurntSushi/ripgrep/issues/469#issuecomment-298295632","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/469","id":298295632,"node_id":"MDEyOklzc3VlQ29tbWVudDI5ODI5NTYzMg==","user":{"login":"elliottslaughter","id":3129,"node_id":"MDQ6VXNlcjMxMjk=","avatar_url":"https://avatars.githubusercontent.com/u/3129?v=4","gravatar_id":"","url":"https://api.github.com/users/elliottslaughter","html_url":"https://github.com/elliottslaughter","followers_url":"https://api.github.com/users/elliottslaughter/followers","following_url":"https://api.github.com/users/elliottslaughter/following{/other_user}","gists_url":"https://api.github.com/users/elliottslaughter/gists{/gist_id}","starred_url":"https://api.github.com/users/elliottslaughter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elliottslaughter/subscriptions","organizations_url":"https://api.github.com/users/elliottslaughter/orgs","repos_url":"https://api.github.com/users/elliottslaughter/repos","events_url":"https://api.github.com/users/elliottslaughter/events{/privacy}","received_events_url":"https://api.github.com/users/elliottslaughter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-01T06:53:48Z","updated_at":"2017-05-01T06:54:10Z","body":"I'm writing a tool that walks files recursively inside a directory and computes various statistics about each file (e.g. checksums). I collect the statistics into a in-memory tree data structure that mirrors the file system, and then use that data structure for various purposes. For example, I can perform a \"diff\" of sorts against another directory without needing to access the original directory, possibly on another machine, or at a later time when the original data doesn't exist any more.\r\n\r\nI'd also like to have at least some level of support for intelligently ignoring files, though I'm not yet sure if it makes sense to turn it on by default the way that ripgrep does.\r\n\r\nThe operations I'm doing on files can be at least mildly compute intensive (e.g. checksums), so I expect I'll need some degree of parallelism to saturate disk bandwidth. For certain shapes of file systems (with many small files and deeply nested directories), parallelizing the directory traversal itself might matter as well.\r\n\r\nHaving thought about this some more, I suppose I could just separate file processing from the directory traversal. I.e., I could use parallel directory traversal to dump a list of files, then hand that list to a completely different set of threads responsible for processing files. (I'm not that familiar with Rust parallelism, but if Rust has a channel abstraction or something similar, that would work.) The big downside would be complexity. And it's not clear to me if the performance will be better or worse than just biting the bullet in order to do everything inside `ignore::WalkParallel` and paying the cost to synchronize on every access to the tree.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/298295632/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"elliottslaughter","id":3129,"node_id":"MDQ6VXNlcjMxMjk=","avatar_url":"https://avatars.githubusercontent.com/u/3129?v=4","gravatar_id":"","url":"https://api.github.com/users/elliottslaughter","html_url":"https://github.com/elliottslaughter","followers_url":"https://api.github.com/users/elliottslaughter/followers","following_url":"https://api.github.com/users/elliottslaughter/following{/other_user}","gists_url":"https://api.github.com/users/elliottslaughter/gists{/gist_id}","starred_url":"https://api.github.com/users/elliottslaughter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elliottslaughter/subscriptions","organizations_url":"https://api.github.com/users/elliottslaughter/orgs","repos_url":"https://api.github.com/users/elliottslaughter/repos","events_url":"https://api.github.com/users/elliottslaughter/events{/privacy}","received_events_url":"https://api.github.com/users/elliottslaughter/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/298324153","html_url":"https://github.com/BurntSushi/ripgrep/issues/469#issuecomment-298324153","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/469","id":298324153,"node_id":"MDEyOklzc3VlQ29tbWVudDI5ODMyNDE1Mw==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-01T12:03:47Z","updated_at":"2017-05-01T12:04:19Z","body":"Thank you for writing that out. That's very helpful and makes it much easier for me to understand what you're trying to do. :-)\r\n\r\nSo I'll just say this up front: I think the current API is pretty bad. I am quite unhappy with it. I think a closure that returns a closure is very unfriendly, and the type signature that results from it is hairy. Hell, I wrote the damn thing and it still takes me a moment to digest the type signature. On top of this, I think the closure API precludes some sort of obvious \"finalization\" step that you're looking for (but it's not impossible, see below). The one thing that the closure API has going for it is that it's very succinct, and at the time, I didn't want to spend the effort building a nicer API. Perhaps you can help me figure out a better API? The type signature will actually become more complicated, but some uses I think could be simpler.\r\n\r\nFor example, I think we'd want to push at least the visitor closure into a trait:\r\n\r\n```rust\r\ntrait WalkVisitor {\r\n    visit(&mut self, entry: Result<DirEntry, Error>) -> WalkState;\r\n    visit_end(&mut self) {\r\n        // by default, do nothing\r\n    }\r\n}\r\n```\r\n\r\nWe could then perhaps provide an impl for closures by default?\r\n\r\n```rust\r\nimpl<F: FnMut(Result<DirEntry, Error>) -> WalkState> WalkVisitor for F {\r\n    fn visit(&mut self, entry: Result<DirEntry, Error>) -> WalkState {\r\n        (self)(entry)\r\n    }\r\n```\r\n\r\nI can't tell whether we should have another trait for \"building\" visitors (analogous to the outer closure in today's API).\r\n\r\nAnother choice that doesn't involve traits at all might be to change the input parameter to the visitor from `Result<DirEntry, Error>` to:\r\n\r\n```rust\r\nenum {\r\n    Visit(Result<DirEntry, Error>),\r\n    End,\r\n}\r\n```\r\n\r\nbut I feel like this is even more cumbersome and could potentially limit what you might want to do upon seeing `End`. (For example, the `end` method in the `WalkVisitor` trait might want to take an owned `self`.)\r\n\r\nBut this probably requires a bit of experimentation...\r\n\r\n---\r\n\r\nWith the above out of the way, I think the simplest thing for you to do would indeed be to use a channel of some sort. The `WalkParallel` implementation already sends every file path over a [multi-producer multi-consumer queue](https://docs.rs/crossbeam/0.2.10/crossbeam/sync/struct.MsQueue.html) (soon to be a [stack](https://docs.rs/crossbeam/0.2.10/crossbeam/sync/struct.TreiberStack.html), I think), so I don't think it would cost you much to do it yourself.\r\n\r\nIf you really wanted to chase your existing implementation idea (where you build up thread local state and then merge at the end), then I'd think you could do something with destructors, but it would be a little cumbersome. The key would probably be combining global and thread local state into a single struct:\r\n\r\n```rust\r\nstruct State {\r\n    thread_local: Whatever,\r\n    global: Arc<Mutex<Global>>,\r\n}\r\n```\r\n\r\nDuring traversal, you'd only ever modify `thread_local`, but once `State` goes out of scope, you could do a merge step by hooking into the destructor:\r\n\r\n```rust\r\nimpl Drop for State {\r\n    fn drop(&mut self) {\r\n        let mut global = self.global.lock().unwrap();\r\n        global.merge(self.thread_local);\r\n    }\r\n}\r\n```\r\n\r\nBy the time `WalkParallel::run` completes, you should be guaranteed that each of your destructors will have run and everything will have been merged back into your more \"global\" state.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/298324153/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/298378760","html_url":"https://github.com/BurntSushi/ripgrep/issues/469#issuecomment-298378760","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/469","id":298378760,"node_id":"MDEyOklzc3VlQ29tbWVudDI5ODM3ODc2MA==","user":{"login":"elliottslaughter","id":3129,"node_id":"MDQ6VXNlcjMxMjk=","avatar_url":"https://avatars.githubusercontent.com/u/3129?v=4","gravatar_id":"","url":"https://api.github.com/users/elliottslaughter","html_url":"https://github.com/elliottslaughter","followers_url":"https://api.github.com/users/elliottslaughter/followers","following_url":"https://api.github.com/users/elliottslaughter/following{/other_user}","gists_url":"https://api.github.com/users/elliottslaughter/gists{/gist_id}","starred_url":"https://api.github.com/users/elliottslaughter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elliottslaughter/subscriptions","organizations_url":"https://api.github.com/users/elliottslaughter/orgs","repos_url":"https://api.github.com/users/elliottslaughter/repos","events_url":"https://api.github.com/users/elliottslaughter/events{/privacy}","received_events_url":"https://api.github.com/users/elliottslaughter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-01T17:20:13Z","updated_at":"2017-05-01T17:20:13Z","body":"Thanks for the comments, these are very helpful.\r\n\r\nI should preface this by saying I'm hardly an expert in Rust, but of the options you listed, the WalkVisitor trait looks like the nicest way to do this. It's flexible, reasonably clean, preserves the ability to work directly with closures (if that's what you want), and can be extended in a straightforward way if you determine that there are other things you want the interface to do. I'm not sure I see a reason to turn the outer builder into a trait since there's really only one thing it needs to do, though I wouldn't stand against it either.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/298378760/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"elliottslaughter","id":3129,"node_id":"MDQ6VXNlcjMxMjk=","avatar_url":"https://avatars.githubusercontent.com/u/3129?v=4","gravatar_id":"","url":"https://api.github.com/users/elliottslaughter","html_url":"https://github.com/elliottslaughter","followers_url":"https://api.github.com/users/elliottslaughter/followers","following_url":"https://api.github.com/users/elliottslaughter/following{/other_user}","gists_url":"https://api.github.com/users/elliottslaughter/gists{/gist_id}","starred_url":"https://api.github.com/users/elliottslaughter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elliottslaughter/subscriptions","organizations_url":"https://api.github.com/users/elliottslaughter/orgs","repos_url":"https://api.github.com/users/elliottslaughter/repos","events_url":"https://api.github.com/users/elliottslaughter/events{/privacy}","received_events_url":"https://api.github.com/users/elliottslaughter/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1073570514,"node_id":"MDEyOkxhYmVsZWRFdmVudDEwNzM1NzA1MTQ=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1073570514","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2017-05-08T21:27:49Z","label":{"name":"enhancement","color":"84b6eb"},"performed_via_github_app":null},{"id":1073570515,"node_id":"MDEyOkxhYmVsZWRFdmVudDEwNzM1NzA1MTU=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1073570515","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2017-05-08T21:27:49Z","label":{"name":"icebox","color":"d4c5f9"},"performed_via_github_app":null},{"id":1073570516,"node_id":"MDEyOkxhYmVsZWRFdmVudDEwNzM1NzA1MTY=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1073570516","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2017-05-08T21:27:49Z","label":{"name":"question","color":"cc317c"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/320735007","html_url":"https://github.com/BurntSushi/ripgrep/issues/469#issuecomment-320735007","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/469","id":320735007,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMDczNTAwNw==","user":{"login":"durka","id":47007,"node_id":"MDQ6VXNlcjQ3MDA3","avatar_url":"https://avatars.githubusercontent.com/u/47007?v=4","gravatar_id":"","url":"https://api.github.com/users/durka","html_url":"https://github.com/durka","followers_url":"https://api.github.com/users/durka/followers","following_url":"https://api.github.com/users/durka/following{/other_user}","gists_url":"https://api.github.com/users/durka/gists{/gist_id}","starred_url":"https://api.github.com/users/durka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/durka/subscriptions","organizations_url":"https://api.github.com/users/durka/orgs","repos_url":"https://api.github.com/users/durka/repos","events_url":"https://api.github.com/users/durka/events{/privacy}","received_events_url":"https://api.github.com/users/durka/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-08-07T17:57:45Z","updated_at":"2017-08-07T17:58:55Z","body":"I would like to see this improved as well. My application is quite similar to @elliottslaughter -- I want to have a local counter on each thread and join them after iteration. Another wishlist item: provide a value to `WalkState::Quit` and have `run` return it (I just want to die on the first error, but I didn't see a simpler way to do that than using an `Arc<Mutex<Option<Error>>>`). I'm not sure if that is even possible without a lot more generics.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/320735007/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"durka","id":47007,"node_id":"MDQ6VXNlcjQ3MDA3","avatar_url":"https://avatars.githubusercontent.com/u/47007?v=4","gravatar_id":"","url":"https://api.github.com/users/durka","html_url":"https://github.com/durka","followers_url":"https://api.github.com/users/durka/followers","following_url":"https://api.github.com/users/durka/following{/other_user}","gists_url":"https://api.github.com/users/durka/gists{/gist_id}","starred_url":"https://api.github.com/users/durka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/durka/subscriptions","organizations_url":"https://api.github.com/users/durka/orgs","repos_url":"https://api.github.com/users/durka/repos","events_url":"https://api.github.com/users/durka/events{/privacy}","received_events_url":"https://api.github.com/users/durka/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1195861980,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTE5NTg2MTk4MA==","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1195861980","actor":{"login":"elliottslaughter","id":3129,"node_id":"MDQ6VXNlcjMxMjk=","avatar_url":"https://avatars.githubusercontent.com/u/3129?v=4","gravatar_id":"","url":"https://api.github.com/users/elliottslaughter","html_url":"https://github.com/elliottslaughter","followers_url":"https://api.github.com/users/elliottslaughter/followers","following_url":"https://api.github.com/users/elliottslaughter/following{/other_user}","gists_url":"https://api.github.com/users/elliottslaughter/gists{/gist_id}","starred_url":"https://api.github.com/users/elliottslaughter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elliottslaughter/subscriptions","organizations_url":"https://api.github.com/users/elliottslaughter/orgs","repos_url":"https://api.github.com/users/elliottslaughter/repos","events_url":"https://api.github.com/users/elliottslaughter/events{/privacy}","received_events_url":"https://api.github.com/users/elliottslaughter/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-08-07T17:57:45Z","performed_via_github_app":null},{"id":1195861981,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDExOTU4NjE5ODE=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1195861981","actor":{"login":"elliottslaughter","id":3129,"node_id":"MDQ6VXNlcjMxMjk=","avatar_url":"https://avatars.githubusercontent.com/u/3129?v=4","gravatar_id":"","url":"https://api.github.com/users/elliottslaughter","html_url":"https://github.com/elliottslaughter","followers_url":"https://api.github.com/users/elliottslaughter/followers","following_url":"https://api.github.com/users/elliottslaughter/following{/other_user}","gists_url":"https://api.github.com/users/elliottslaughter/gists{/gist_id}","starred_url":"https://api.github.com/users/elliottslaughter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elliottslaughter/subscriptions","organizations_url":"https://api.github.com/users/elliottslaughter/orgs","repos_url":"https://api.github.com/users/elliottslaughter/repos","events_url":"https://api.github.com/users/elliottslaughter/events{/privacy}","received_events_url":"https://api.github.com/users/elliottslaughter/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-08-07T17:57:45Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/546652231","html_url":"https://github.com/BurntSushi/ripgrep/issues/469#issuecomment-546652231","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/469","id":546652231,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjY1MjIzMQ==","user":{"login":"epage","id":60961,"node_id":"MDQ6VXNlcjYwOTYx","avatar_url":"https://avatars.githubusercontent.com/u/60961?v=4","gravatar_id":"","url":"https://api.github.com/users/epage","html_url":"https://github.com/epage","followers_url":"https://api.github.com/users/epage/followers","following_url":"https://api.github.com/users/epage/following{/other_user}","gists_url":"https://api.github.com/users/epage/gists{/gist_id}","starred_url":"https://api.github.com/users/epage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/epage/subscriptions","organizations_url":"https://api.github.com/users/epage/orgs","repos_url":"https://api.github.com/users/epage/repos","events_url":"https://api.github.com/users/epage/events{/privacy}","received_events_url":"https://api.github.com/users/epage/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-27T00:57:05Z","updated_at":"2019-10-27T00:58:20Z","body":"Something related to this is blocking me, so I'm starting work on it.\r\n\r\n```rust\r\n/// Create per-thread `ParallelVisitor`s for `WalkParallel`.\r\npub trait ParallelVisitorBuilder {\r\n    /// Create per-thread `ParallelVisitor`s for `WalkParallel`.\r\n    fn build(&mut self) -> Box<dyn ParallelVisitor>;\r\n}\r\n\r\n/// Receives files and directories for the current thread/\r\n///\r\n/// - Setup can be implemented in `ParallelVisitorBuilder::build`\r\n/// - Teardown can be implemented in `trait Drop`.\r\npub trait ParallelVisitor: Send {\r\n    /// Receives files and directories for the current thread/\r\n    fn visit(&mut self, entry: Result<DirEntry, Error>) -> WalkState;\r\n}\r\n```\r\n\r\nand I am adding a\r\n```rust\r\nimpl WalkParallel {\r\n    pub fn visit(self, builder: &mut dyn ParallelVisitorBuilder);\r\n}\r\n```\r\nI am leaving `run` (with it converting the `FnMut` into a `ParallelVisitorBuilder`) because\r\n- For simple cases, it is much easier to read the logic inline\r\n- Helped to verify I did my `trait`s correctly\r\n- Decouples adding this feature and discussing when to break compatibility.\r\n\r\nIf people have better names, I'm fully willing to take them\r\n\r\n---\r\n\r\nAnother thought I had is to provide an optional way for the threads to return values.  We could have the interface be something like\r\n```rust\r\npub trait ParallelVisitorBuilder {\r\n    type VisitorOutput = ();\r\n    type Visitor: ParallelVisitor<Output=VisitorOutput>;\r\n    type Output = ();\r\n\r\n    fn build(&mut self) -> Self::Visitor;\r\n\r\n    fn reduce(self, output: &[Self::VisitorOutput], state: WalkState) -> Self::Output {}\r\n}\r\n\r\npub trait ParallelVisitor: Send {\r\n    type Output = ();\r\n\r\n    fn visit(&mut self, entry: Result<DirEntry, Error>) -> WalkState;\r\n\r\n    fn reduce(self, state: WalkState) -> Self::Output {}\r\n}\r\n\r\nimpl WalkParallel {\r\n    pub fn map_reduce<...>(self, builder: impl ParallelVisitorBuilder) -> Output;\r\n}\r\n```\r\n- We'd be switch from `dyn` to `impl`\r\n- `reduce` gets `WalkState` to make life easier for the implementer\r\n- This would be a separate function from `visit` to avoid the overhead of creating `Vec<VisitorOutput>`\r\n\r\nThoughts?  \r\n(again, I am not married to any of the names)","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/546652231/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"epage","id":60961,"node_id":"MDQ6VXNlcjYwOTYx","avatar_url":"https://avatars.githubusercontent.com/u/60961?v=4","gravatar_id":"","url":"https://api.github.com/users/epage","html_url":"https://github.com/epage","followers_url":"https://api.github.com/users/epage/followers","following_url":"https://api.github.com/users/epage/following{/other_user}","gists_url":"https://api.github.com/users/epage/gists{/gist_id}","starred_url":"https://api.github.com/users/epage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/epage/subscriptions","organizations_url":"https://api.github.com/users/epage/orgs","repos_url":"https://api.github.com/users/epage/repos","events_url":"https://api.github.com/users/epage/events{/privacy}","received_events_url":"https://api.github.com/users/epage/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"epage","id":60961,"node_id":"MDQ6VXNlcjYwOTYx","avatar_url":"https://avatars.githubusercontent.com/u/60961?v=4","gravatar_id":"","url":"https://api.github.com/users/epage","html_url":"https://github.com/epage","followers_url":"https://api.github.com/users/epage/followers","following_url":"https://api.github.com/users/epage/following{/other_user}","gists_url":"https://api.github.com/users/epage/gists{/gist_id}","starred_url":"https://api.github.com/users/epage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/epage/subscriptions","organizations_url":"https://api.github.com/users/epage/orgs","repos_url":"https://api.github.com/users/epage/repos","events_url":"https://api.github.com/users/epage/events{/privacy}","received_events_url":"https://api.github.com/users/epage/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-27T01:38:44Z","updated_at":"2019-10-27T01:38:44Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1410","repository_url":"https://api.github.com/repos/BurntSushi/ripgrep","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1410/labels{/name}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1410/comments","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1410/events","html_url":"https://github.com/BurntSushi/ripgrep/issues/1410","id":512906787,"node_id":"MDU6SXNzdWU1MTI5MDY3ODc=","number":1410,"title":"Support borowing data in `ignore`s `WalkParallel`","user":{"login":"epage","id":60961,"node_id":"MDQ6VXNlcjYwOTYx","avatar_url":"https://avatars.githubusercontent.com/u/60961?v=4","gravatar_id":"","url":"https://api.github.com/users/epage","html_url":"https://github.com/epage","followers_url":"https://api.github.com/users/epage/followers","following_url":"https://api.github.com/users/epage/following{/other_user}","gists_url":"https://api.github.com/users/epage/gists{/gist_id}","starred_url":"https://api.github.com/users/epage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/epage/subscriptions","organizations_url":"https://api.github.com/users/epage/orgs","repos_url":"https://api.github.com/users/epage/repos","events_url":"https://api.github.com/users/epage/events{/privacy}","received_events_url":"https://api.github.com/users/epage/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-10-27T01:33:13Z","updated_at":"2020-02-17T22:16:37Z","closed_at":"2020-02-17T22:16:37Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":53631945,"node_id":"MDEwOlJlcG9zaXRvcnk1MzYzMTk0NQ==","name":"ripgrep","full_name":"BurntSushi/ripgrep","private":false,"owner":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/BurntSushi/ripgrep","description":"ripgrep recursively searches directories for a regex pattern while respecting your gitignore","fork":false,"url":"https://api.github.com/repos/BurntSushi/ripgrep","forks_url":"https://api.github.com/repos/BurntSushi/ripgrep/forks","keys_url":"https://api.github.com/repos/BurntSushi/ripgrep/keys{/key_id}","collaborators_url":"https://api.github.com/repos/BurntSushi/ripgrep/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/BurntSushi/ripgrep/teams","hooks_url":"https://api.github.com/repos/BurntSushi/ripgrep/hooks","issue_events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events{/number}","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/events","assignees_url":"https://api.github.com/repos/BurntSushi/ripgrep/assignees{/user}","branches_url":"https://api.github.com/repos/BurntSushi/ripgrep/branches{/branch}","tags_url":"https://api.github.com/repos/BurntSushi/ripgrep/tags","blobs_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/refs{/sha}","trees_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/trees{/sha}","statuses_url":"https://api.github.com/repos/BurntSushi/ripgrep/statuses/{sha}","languages_url":"https://api.github.com/repos/BurntSushi/ripgrep/languages","stargazers_url":"https://api.github.com/repos/BurntSushi/ripgrep/stargazers","contributors_url":"https://api.github.com/repos/BurntSushi/ripgrep/contributors","subscribers_url":"https://api.github.com/repos/BurntSushi/ripgrep/subscribers","subscription_url":"https://api.github.com/repos/BurntSushi/ripgrep/subscription","commits_url":"https://api.github.com/repos/BurntSushi/ripgrep/commits{/sha}","git_commits_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/commits{/sha}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/comments{/number}","issue_comment_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments{/number}","contents_url":"https://api.github.com/repos/BurntSushi/ripgrep/contents/{+path}","compare_url":"https://api.github.com/repos/BurntSushi/ripgrep/compare/{base}...{head}","merges_url":"https://api.github.com/repos/BurntSushi/ripgrep/merges","archive_url":"https://api.github.com/repos/BurntSushi/ripgrep/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/BurntSushi/ripgrep/downloads","issues_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues{/number}","pulls_url":"https://api.github.com/repos/BurntSushi/ripgrep/pulls{/number}","milestones_url":"https://api.github.com/repos/BurntSushi/ripgrep/milestones{/number}","notifications_url":"https://api.github.com/repos/BurntSushi/ripgrep/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/labels{/name}","releases_url":"https://api.github.com/repos/BurntSushi/ripgrep/releases{/id}","deployments_url":"https://api.github.com/repos/BurntSushi/ripgrep/deployments","created_at":"2016-03-11T02:02:33Z","updated_at":"2025-11-09T23:50:59Z","pushed_at":"2025-10-30T17:30:23Z","git_url":"git://github.com/BurntSushi/ripgrep.git","ssh_url":"git@github.com:BurntSushi/ripgrep.git","clone_url":"https://github.com/BurntSushi/ripgrep.git","svn_url":"https://github.com/BurntSushi/ripgrep","homepage":"","size":5534,"stargazers_count":57154,"watchers_count":57154,"language":"Rust","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2304,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":88,"license":{"key":"unlicense","name":"The Unlicense","spdx_id":"Unlicense","url":"https://api.github.com/licenses/unlicense","node_id":"MDc6TGljZW5zZTE1"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["cli","command-line","command-line-tool","gitignore","grep","recursively-search","regex","ripgrep","rust","search"],"visibility":"public","forks":2304,"open_issues":88,"watchers":57154,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"I'd prefer to have my `WalkParallel` closures take references.\r\n\r\nIn general, this would improve the usability of `WalkParallel` because it takes a lot of work to change code from a trivial case to a non-trivial case (getting everything in `Arc`. etc). or from serial to parallel.\r\n\r\nThe way this is impacting me is that this will simplify my code because I can share a lot more code between my parallel (throwing everything in `Arc`) and non-parallel (directly using references).","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1410/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1410/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":2805033349,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI4MDUwMzMzNDk=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/2805033349","actor":{"login":"epage","id":60961,"node_id":"MDQ6VXNlcjYwOTYx","avatar_url":"https://avatars.githubusercontent.com/u/60961?v=4","gravatar_id":"","url":"https://api.github.com/users/epage","html_url":"https://github.com/epage","followers_url":"https://api.github.com/users/epage/followers","following_url":"https://api.github.com/users/epage/following{/other_user}","gists_url":"https://api.github.com/users/epage/gists{/gist_id}","starred_url":"https://api.github.com/users/epage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/epage/subscriptions","organizations_url":"https://api.github.com/users/epage/orgs","repos_url":"https://api.github.com/users/epage/repos","events_url":"https://api.github.com/users/epage/events{/privacy}","received_events_url":"https://api.github.com/users/epage/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"27c2574e3841236ed4ca275fb2a24215ad58e4de","commit_url":"https://api.github.com/repos/epage/ripgrep/commits/27c2574e3841236ed4ca275fb2a24215ad58e4de","created_at":"2019-11-16T22:04:44Z","performed_via_github_app":null},{"id":2805034223,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI4MDUwMzQyMjM=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/2805034223","actor":{"login":"epage","id":60961,"node_id":"MDQ6VXNlcjYwOTYx","avatar_url":"https://avatars.githubusercontent.com/u/60961?v=4","gravatar_id":"","url":"https://api.github.com/users/epage","html_url":"https://github.com/epage","followers_url":"https://api.github.com/users/epage/followers","following_url":"https://api.github.com/users/epage/following{/other_user}","gists_url":"https://api.github.com/users/epage/gists{/gist_id}","starred_url":"https://api.github.com/users/epage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/epage/subscriptions","organizations_url":"https://api.github.com/users/epage/orgs","repos_url":"https://api.github.com/users/epage/repos","events_url":"https://api.github.com/users/epage/events{/privacy}","received_events_url":"https://api.github.com/users/epage/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"82dbb89195b43dabe87eca6fe622c3b48ac8afac","commit_url":"https://api.github.com/repos/epage/ripgrep/commits/82dbb89195b43dabe87eca6fe622c3b48ac8afac","created_at":"2019-11-16T22:06:35Z","performed_via_github_app":null},{"id":2805034558,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI4MDUwMzQ1NTg=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/2805034558","actor":{"login":"epage","id":60961,"node_id":"MDQ6VXNlcjYwOTYx","avatar_url":"https://avatars.githubusercontent.com/u/60961?v=4","gravatar_id":"","url":"https://api.github.com/users/epage","html_url":"https://github.com/epage","followers_url":"https://api.github.com/users/epage/followers","following_url":"https://api.github.com/users/epage/following{/other_user}","gists_url":"https://api.github.com/users/epage/gists{/gist_id}","starred_url":"https://api.github.com/users/epage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/epage/subscriptions","organizations_url":"https://api.github.com/users/epage/orgs","repos_url":"https://api.github.com/users/epage/repos","events_url":"https://api.github.com/users/epage/events{/privacy}","received_events_url":"https://api.github.com/users/epage/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"2c8f95f97d198713b66e80ad576c6dc70902287b","commit_url":"https://api.github.com/repos/epage/ripgrep/commits/2c8f95f97d198713b66e80ad576c6dc70902287b","created_at":"2019-11-16T22:07:21Z","performed_via_github_app":null},{"actor":{"login":"epage","id":60961,"node_id":"MDQ6VXNlcjYwOTYx","avatar_url":"https://avatars.githubusercontent.com/u/60961?v=4","gravatar_id":"","url":"https://api.github.com/users/epage","html_url":"https://github.com/epage","followers_url":"https://api.github.com/users/epage/followers","following_url":"https://api.github.com/users/epage/following{/other_user}","gists_url":"https://api.github.com/users/epage/gists{/gist_id}","starred_url":"https://api.github.com/users/epage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/epage/subscriptions","organizations_url":"https://api.github.com/users/epage/orgs","repos_url":"https://api.github.com/users/epage/repos","events_url":"https://api.github.com/users/epage/events{/privacy}","received_events_url":"https://api.github.com/users/epage/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-16T22:07:50Z","updated_at":"2019-11-16T22:07:50Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1430","repository_url":"https://api.github.com/repos/BurntSushi/ripgrep","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1430/labels{/name}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1430/comments","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1430/events","html_url":"https://github.com/BurntSushi/ripgrep/pull/1430","id":523902146,"node_id":"MDExOlB1bGxSZXF1ZXN0MzQxNzk2Mjc1","number":1430,"title":"RFC feat(ignore): Allow post-processing at end-of-thread","user":{"login":"epage","id":60961,"node_id":"MDQ6VXNlcjYwOTYx","avatar_url":"https://avatars.githubusercontent.com/u/60961?v=4","gravatar_id":"","url":"https://api.github.com/users/epage","html_url":"https://github.com/epage","followers_url":"https://api.github.com/users/epage/followers","following_url":"https://api.github.com/users/epage/following{/other_user}","gists_url":"https://api.github.com/users/epage/gists{/gist_id}","starred_url":"https://api.github.com/users/epage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/epage/subscriptions","organizations_url":"https://api.github.com/users/epage/orgs","repos_url":"https://api.github.com/users/epage/repos","events_url":"https://api.github.com/users/epage/events{/privacy}","received_events_url":"https://api.github.com/users/epage/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1849506066,"node_id":"MDU6TGFiZWwxODQ5NTA2MDY2","url":"https://api.github.com/repos/BurntSushi/ripgrep/labels/rollup","name":"rollup","color":"ffccee","default":false,"description":"A PR that has been merged with many others in a rollup."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-11-16T22:07:50Z","updated_at":"2020-02-17T22:16:38Z","closed_at":"2020-02-17T22:16:38Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"repository":{"id":53631945,"node_id":"MDEwOlJlcG9zaXRvcnk1MzYzMTk0NQ==","name":"ripgrep","full_name":"BurntSushi/ripgrep","private":false,"owner":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/BurntSushi/ripgrep","description":"ripgrep recursively searches directories for a regex pattern while respecting your gitignore","fork":false,"url":"https://api.github.com/repos/BurntSushi/ripgrep","forks_url":"https://api.github.com/repos/BurntSushi/ripgrep/forks","keys_url":"https://api.github.com/repos/BurntSushi/ripgrep/keys{/key_id}","collaborators_url":"https://api.github.com/repos/BurntSushi/ripgrep/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/BurntSushi/ripgrep/teams","hooks_url":"https://api.github.com/repos/BurntSushi/ripgrep/hooks","issue_events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events{/number}","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/events","assignees_url":"https://api.github.com/repos/BurntSushi/ripgrep/assignees{/user}","branches_url":"https://api.github.com/repos/BurntSushi/ripgrep/branches{/branch}","tags_url":"https://api.github.com/repos/BurntSushi/ripgrep/tags","blobs_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/refs{/sha}","trees_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/trees{/sha}","statuses_url":"https://api.github.com/repos/BurntSushi/ripgrep/statuses/{sha}","languages_url":"https://api.github.com/repos/BurntSushi/ripgrep/languages","stargazers_url":"https://api.github.com/repos/BurntSushi/ripgrep/stargazers","contributors_url":"https://api.github.com/repos/BurntSushi/ripgrep/contributors","subscribers_url":"https://api.github.com/repos/BurntSushi/ripgrep/subscribers","subscription_url":"https://api.github.com/repos/BurntSushi/ripgrep/subscription","commits_url":"https://api.github.com/repos/BurntSushi/ripgrep/commits{/sha}","git_commits_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/commits{/sha}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/comments{/number}","issue_comment_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments{/number}","contents_url":"https://api.github.com/repos/BurntSushi/ripgrep/contents/{+path}","compare_url":"https://api.github.com/repos/BurntSushi/ripgrep/compare/{base}...{head}","merges_url":"https://api.github.com/repos/BurntSushi/ripgrep/merges","archive_url":"https://api.github.com/repos/BurntSushi/ripgrep/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/BurntSushi/ripgrep/downloads","issues_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues{/number}","pulls_url":"https://api.github.com/repos/BurntSushi/ripgrep/pulls{/number}","milestones_url":"https://api.github.com/repos/BurntSushi/ripgrep/milestones{/number}","notifications_url":"https://api.github.com/repos/BurntSushi/ripgrep/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/labels{/name}","releases_url":"https://api.github.com/repos/BurntSushi/ripgrep/releases{/id}","deployments_url":"https://api.github.com/repos/BurntSushi/ripgrep/deployments","created_at":"2016-03-11T02:02:33Z","updated_at":"2025-11-09T23:50:59Z","pushed_at":"2025-10-30T17:30:23Z","git_url":"git://github.com/BurntSushi/ripgrep.git","ssh_url":"git@github.com:BurntSushi/ripgrep.git","clone_url":"https://github.com/BurntSushi/ripgrep.git","svn_url":"https://github.com/BurntSushi/ripgrep","homepage":"","size":5534,"stargazers_count":57154,"watchers_count":57154,"language":"Rust","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2304,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":88,"license":{"key":"unlicense","name":"The Unlicense","spdx_id":"Unlicense","url":"https://api.github.com/licenses/unlicense","node_id":"MDc6TGljZW5zZTE1"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["cli","command-line","command-line-tool","gitignore","grep","recursively-search","regex","ripgrep","rust","search"],"visibility":"public","forks":2304,"open_issues":88,"watchers":57154,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/pulls/1430","html_url":"https://github.com/BurntSushi/ripgrep/pull/1430","diff_url":"https://github.com/BurntSushi/ripgrep/pull/1430.diff","patch_url":"https://github.com/BurntSushi/ripgrep/pull/1430.patch","merged_at":null},"body":"On top of the parallel-walk's closures, this provides a Visitor API.\r\n- Clarifies the role of the two different closures.\r\n- Allows implementing of `Drop` for post-processing at thread\r\n  completion.\r\n\r\nThe closure API is maintained not just for compatibility but also\r\nconvinience for simple cases.\r\n\r\nFixes #469","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1430/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1430/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":3044603069,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDMwNDQ2MDMwNjk=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/3044603069","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"de0c2228ef623643542276772c2c7f9891f28103","commit_url":"https://api.github.com/repos/BurntSushi/ripgrep/commits/de0c2228ef623643542276772c2c7f9891f28103","created_at":"2020-02-17T17:51:17Z","performed_via_github_app":null},{"id":3044661144,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDMwNDQ2NjExNDQ=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/3044661144","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"3e5fdf9b0dccc0f0cf514a90bdabb0a551be8973","commit_url":"https://api.github.com/repos/BurntSushi/ripgrep/commits/3e5fdf9b0dccc0f0cf514a90bdabb0a551be8973","created_at":"2020-02-17T18:16:30Z","performed_via_github_app":null},{"id":3045136717,"node_id":"MDExOkNsb3NlZEV2ZW50MzA0NTEzNjcxNw==","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/3045136717","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"f8e70294d5741391521f638b80ba786888896b94","commit_url":"https://api.github.com/repos/BurntSushi/ripgrep/commits/f8e70294d5741391521f638b80ba786888896b94","created_at":"2020-02-17T22:16:38Z","state_reason":null,"performed_via_github_app":null},{"id":13413906897,"node_id":"REFE_lADOAzJbyc4Nbrc1zwAAAAMfh_nR","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/13413906897","actor":{"login":"kyagi","id":90729,"node_id":"MDQ6VXNlcjkwNzI5","avatar_url":"https://avatars.githubusercontent.com/u/90729?v=4","gravatar_id":"","url":"https://api.github.com/users/kyagi","html_url":"https://github.com/kyagi","followers_url":"https://api.github.com/users/kyagi/followers","following_url":"https://api.github.com/users/kyagi/following{/other_user}","gists_url":"https://api.github.com/users/kyagi/gists{/gist_id}","starred_url":"https://api.github.com/users/kyagi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kyagi/subscriptions","organizations_url":"https://api.github.com/users/kyagi/orgs","repos_url":"https://api.github.com/users/kyagi/repos","events_url":"https://api.github.com/users/kyagi/events{/privacy}","received_events_url":"https://api.github.com/users/kyagi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"f8e70294d5741391521f638b80ba786888896b94","commit_url":"https://api.github.com/repos/kyagi/ripgrep/commits/f8e70294d5741391521f638b80ba786888896b94","created_at":"2024-07-07T11:30:06Z","performed_via_github_app":null}]