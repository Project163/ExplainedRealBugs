[{"id":1149629255,"node_id":"MDEyOkxhYmVsZWRFdmVudDExNDk2MjkyNTU=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1149629255","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2017-07-04T13:51:31Z","label":{"name":"enhancement","color":"84b6eb"},"performed_via_github_app":null},{"id":1149629257,"node_id":"MDEyOkxhYmVsZWRFdmVudDExNDk2MjkyNTc=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1149629257","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2017-07-04T13:51:31Z","label":{"name":"help wanted","color":"159818"},"performed_via_github_app":null},{"id":1149629259,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTE0OTYyOTI1OQ==","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1149629259","actor":{"login":"wavexx","id":1017726,"node_id":"MDQ6VXNlcjEwMTc3MjY=","avatar_url":"https://avatars.githubusercontent.com/u/1017726?v=4","gravatar_id":"","url":"https://api.github.com/users/wavexx","html_url":"https://github.com/wavexx","followers_url":"https://api.github.com/users/wavexx/followers","following_url":"https://api.github.com/users/wavexx/following{/other_user}","gists_url":"https://api.github.com/users/wavexx/gists{/gist_id}","starred_url":"https://api.github.com/users/wavexx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wavexx/subscriptions","organizations_url":"https://api.github.com/users/wavexx/orgs","repos_url":"https://api.github.com/users/wavexx/repos","events_url":"https://api.github.com/users/wavexx/events{/privacy}","received_events_url":"https://api.github.com/users/wavexx/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-07-04T13:51:31Z","performed_via_github_app":null},{"id":1149629260,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDExNDk2MjkyNjA=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1149629260","actor":{"login":"wavexx","id":1017726,"node_id":"MDQ6VXNlcjEwMTc3MjY=","avatar_url":"https://avatars.githubusercontent.com/u/1017726?v=4","gravatar_id":"","url":"https://api.github.com/users/wavexx","html_url":"https://github.com/wavexx","followers_url":"https://api.github.com/users/wavexx/followers","following_url":"https://api.github.com/users/wavexx/following{/other_user}","gists_url":"https://api.github.com/users/wavexx/gists{/gist_id}","starred_url":"https://api.github.com/users/wavexx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wavexx/subscriptions","organizations_url":"https://api.github.com/users/wavexx/orgs","repos_url":"https://api.github.com/users/wavexx/repos","events_url":"https://api.github.com/users/wavexx/events{/privacy}","received_events_url":"https://api.github.com/users/wavexx/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-07-04T13:51:31Z","performed_via_github_app":null},{"actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-07-04T13:52:45Z","updated_at":"2017-07-04T13:52:45Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/225","repository_url":"https://api.github.com/repos/BurntSushi/ripgrep","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/225/labels{/name}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/225/comments","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/225/events","html_url":"https://github.com/BurntSushi/ripgrep/issues/225","id":188064842,"node_id":"MDU6SXNzdWUxODgwNjQ4NDI=","number":225,"title":"support searching compressed files using in-process decompression","user":{"login":"danbst","id":743057,"node_id":"MDQ6VXNlcjc0MzA1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/743057?v=4","gravatar_id":"","url":"https://api.github.com/users/danbst","html_url":"https://github.com/danbst","followers_url":"https://api.github.com/users/danbst/followers","following_url":"https://api.github.com/users/danbst/following{/other_user}","gists_url":"https://api.github.com/users/danbst/gists{/gist_id}","starred_url":"https://api.github.com/users/danbst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danbst/subscriptions","organizations_url":"https://api.github.com/users/danbst/orgs","repos_url":"https://api.github.com/users/danbst/repos","events_url":"https://api.github.com/users/danbst/events{/privacy}","received_events_url":"https://api.github.com/users/danbst/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":339721683,"node_id":"MDU6TGFiZWwzMzk3MjE2ODM=","url":"https://api.github.com/repos/BurntSushi/ripgrep/labels/question","name":"question","color":"cc317c","default":true,"description":"An issue that is lacking clarity on one or more points."},{"id":492413702,"node_id":"MDU6TGFiZWw0OTI0MTM3MDI=","url":"https://api.github.com/repos/BurntSushi/ripgrep/labels/icebox","name":"icebox","color":"d4c5f9","default":false,"description":"A feature that is recognized as possibly desirable, but is unlikely to implemented any time soon."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":38,"created_at":"2016-11-08T18:15:04Z","updated_at":"2018-02-21T05:17:47Z","closed_at":"2018-02-21T00:37:42Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":53631945,"node_id":"MDEwOlJlcG9zaXRvcnk1MzYzMTk0NQ==","name":"ripgrep","full_name":"BurntSushi/ripgrep","private":false,"owner":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/BurntSushi/ripgrep","description":"ripgrep recursively searches directories for a regex pattern while respecting your gitignore","fork":false,"url":"https://api.github.com/repos/BurntSushi/ripgrep","forks_url":"https://api.github.com/repos/BurntSushi/ripgrep/forks","keys_url":"https://api.github.com/repos/BurntSushi/ripgrep/keys{/key_id}","collaborators_url":"https://api.github.com/repos/BurntSushi/ripgrep/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/BurntSushi/ripgrep/teams","hooks_url":"https://api.github.com/repos/BurntSushi/ripgrep/hooks","issue_events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events{/number}","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/events","assignees_url":"https://api.github.com/repos/BurntSushi/ripgrep/assignees{/user}","branches_url":"https://api.github.com/repos/BurntSushi/ripgrep/branches{/branch}","tags_url":"https://api.github.com/repos/BurntSushi/ripgrep/tags","blobs_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/refs{/sha}","trees_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/trees{/sha}","statuses_url":"https://api.github.com/repos/BurntSushi/ripgrep/statuses/{sha}","languages_url":"https://api.github.com/repos/BurntSushi/ripgrep/languages","stargazers_url":"https://api.github.com/repos/BurntSushi/ripgrep/stargazers","contributors_url":"https://api.github.com/repos/BurntSushi/ripgrep/contributors","subscribers_url":"https://api.github.com/repos/BurntSushi/ripgrep/subscribers","subscription_url":"https://api.github.com/repos/BurntSushi/ripgrep/subscription","commits_url":"https://api.github.com/repos/BurntSushi/ripgrep/commits{/sha}","git_commits_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/commits{/sha}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/comments{/number}","issue_comment_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments{/number}","contents_url":"https://api.github.com/repos/BurntSushi/ripgrep/contents/{+path}","compare_url":"https://api.github.com/repos/BurntSushi/ripgrep/compare/{base}...{head}","merges_url":"https://api.github.com/repos/BurntSushi/ripgrep/merges","archive_url":"https://api.github.com/repos/BurntSushi/ripgrep/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/BurntSushi/ripgrep/downloads","issues_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues{/number}","pulls_url":"https://api.github.com/repos/BurntSushi/ripgrep/pulls{/number}","milestones_url":"https://api.github.com/repos/BurntSushi/ripgrep/milestones{/number}","notifications_url":"https://api.github.com/repos/BurntSushi/ripgrep/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/labels{/name}","releases_url":"https://api.github.com/repos/BurntSushi/ripgrep/releases{/id}","deployments_url":"https://api.github.com/repos/BurntSushi/ripgrep/deployments","created_at":"2016-03-11T02:02:33Z","updated_at":"2025-11-09T23:50:59Z","pushed_at":"2025-10-30T17:30:23Z","git_url":"git://github.com/BurntSushi/ripgrep.git","ssh_url":"git@github.com:BurntSushi/ripgrep.git","clone_url":"https://github.com/BurntSushi/ripgrep.git","svn_url":"https://github.com/BurntSushi/ripgrep","homepage":"","size":5534,"stargazers_count":57154,"watchers_count":57154,"language":"Rust","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2304,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":88,"license":{"key":"unlicense","name":"The Unlicense","spdx_id":"Unlicense","url":"https://api.github.com/licenses/unlicense","node_id":"MDc6TGljZW5zZTE1"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["cli","command-line","command-line-tool","gitignore","grep","recursively-search","regex","ripgrep","rust","search"],"visibility":"public","forks":2304,"open_issues":88,"watchers":57154,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"I'd like to use ripgrep for grepping log files, because it's faster then grep. But my logs are gzipped, and if I `zcat | rg` them I'll loose log filenames in output.\r\n\r\nAlso, would be great if bzip2 and xz decompressors will be supported too with automatic archive type detection.","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/225/reactions","total_count":27,"+1":27,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/225/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/334787117","html_url":"https://github.com/BurntSushi/ripgrep/issues/539#issuecomment-334787117","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/539","id":334787117,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNDc4NzExNw==","user":{"login":"phiresky","id":2303841,"node_id":"MDQ6VXNlcjIzMDM4NDE=","avatar_url":"https://avatars.githubusercontent.com/u/2303841?v=4","gravatar_id":"","url":"https://api.github.com/users/phiresky","html_url":"https://github.com/phiresky","followers_url":"https://api.github.com/users/phiresky/followers","following_url":"https://api.github.com/users/phiresky/following{/other_user}","gists_url":"https://api.github.com/users/phiresky/gists{/gist_id}","starred_url":"https://api.github.com/users/phiresky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phiresky/subscriptions","organizations_url":"https://api.github.com/users/phiresky/orgs","repos_url":"https://api.github.com/users/phiresky/repos","events_url":"https://api.github.com/users/phiresky/events{/privacy}","received_events_url":"https://api.github.com/users/phiresky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-06T15:23:40Z","updated_at":"2017-10-06T15:23:40Z","body":"> Note that the core search code can work on any arbitrary thing that implements io::Read, which means the glue code required for this should be pretty limited\r\n\r\nIf that's the case, it seems like it would be easy to implement an independent rust library which is able to transparently open compressed files as a io::Read using any method (streaming external tool via pipes, C FFI or native Rust library), without ripgrep itself actually caring about the method.\r\n\r\nIt still needs some thought though:\r\n1. Which format maps to which decompressor. I think there is always only one correct solution to decompressing a given file so this should not need to be configured. Might be good to use [magic](https://github.com/robo9k/rust-magic) though to detect the file type for differing file endings (all the zip-derived formats like  jar, apk, docx, odt)\r\n2. Buffering - gunzip et al. might buffer their output which looking at the man page cannot be configured\r\n3. What about archives? io::Read only works cleanly when a single compressed stream maps to a single file","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/334787117/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"phiresky","id":2303841,"node_id":"MDQ6VXNlcjIzMDM4NDE=","avatar_url":"https://avatars.githubusercontent.com/u/2303841?v=4","gravatar_id":"","url":"https://api.github.com/users/phiresky","html_url":"https://github.com/phiresky","followers_url":"https://api.github.com/users/phiresky/followers","following_url":"https://api.github.com/users/phiresky/following{/other_user}","gists_url":"https://api.github.com/users/phiresky/gists{/gist_id}","starred_url":"https://api.github.com/users/phiresky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phiresky/subscriptions","organizations_url":"https://api.github.com/users/phiresky/orgs","repos_url":"https://api.github.com/users/phiresky/repos","events_url":"https://api.github.com/users/phiresky/events{/privacy}","received_events_url":"https://api.github.com/users/phiresky/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/334788197","html_url":"https://github.com/BurntSushi/ripgrep/issues/539#issuecomment-334788197","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/539","id":334788197,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNDc4ODE5Nw==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-06T15:27:36Z","updated_at":"2017-10-06T15:27:36Z","body":"We should probably punt on archives for now.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/334788197/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/348650165","html_url":"https://github.com/BurntSushi/ripgrep/issues/539#issuecomment-348650165","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/539","id":348650165,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODY1MDE2NQ==","user":{"login":"tailhook","id":321799,"node_id":"MDQ6VXNlcjMyMTc5OQ==","avatar_url":"https://avatars.githubusercontent.com/u/321799?v=4","gravatar_id":"","url":"https://api.github.com/users/tailhook","html_url":"https://github.com/tailhook","followers_url":"https://api.github.com/users/tailhook/followers","following_url":"https://api.github.com/users/tailhook/following{/other_user}","gists_url":"https://api.github.com/users/tailhook/gists{/gist_id}","starred_url":"https://api.github.com/users/tailhook/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tailhook/subscriptions","organizations_url":"https://api.github.com/users/tailhook/orgs","repos_url":"https://api.github.com/users/tailhook/repos","events_url":"https://api.github.com/users/tailhook/events{/privacy}","received_events_url":"https://api.github.com/users/tailhook/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-02T00:28:00Z","updated_at":"2017-12-02T00:28:00Z","body":"What to do think about [anycat](https://crates.io/crates/anycat) crate for the task?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/348650165/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tailhook","id":321799,"node_id":"MDQ6VXNlcjMyMTc5OQ==","avatar_url":"https://avatars.githubusercontent.com/u/321799?v=4","gravatar_id":"","url":"https://api.github.com/users/tailhook","html_url":"https://github.com/tailhook","followers_url":"https://api.github.com/users/tailhook/followers","following_url":"https://api.github.com/users/tailhook/following{/other_user}","gists_url":"https://api.github.com/users/tailhook/gists{/gist_id}","starred_url":"https://api.github.com/users/tailhook/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tailhook/subscriptions","organizations_url":"https://api.github.com/users/tailhook/orgs","repos_url":"https://api.github.com/users/tailhook/repos","events_url":"https://api.github.com/users/tailhook/events{/privacy}","received_events_url":"https://api.github.com/users/tailhook/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/348651127","html_url":"https://github.com/BurntSushi/ripgrep/issues/539#issuecomment-348651127","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/539","id":348651127,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODY1MTEyNw==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-02T00:36:14Z","updated_at":"2017-12-02T00:36:14Z","body":"@tailhook No, I don't think so. That seems like a nifty little utility, but it doesn't pull its weight as a library dependency. Also, that's using C libraries, which I talked about in #225. This particular ticket is strictly for an implementation path that involves shelling out to existing utilities.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/348651127/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1368662348,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTM2ODY2MjM0OA==","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1368662348","actor":{"login":"tailhook","id":321799,"node_id":"MDQ6VXNlcjMyMTc5OQ==","avatar_url":"https://avatars.githubusercontent.com/u/321799?v=4","gravatar_id":"","url":"https://api.github.com/users/tailhook","html_url":"https://github.com/tailhook","followers_url":"https://api.github.com/users/tailhook/followers","following_url":"https://api.github.com/users/tailhook/following{/other_user}","gists_url":"https://api.github.com/users/tailhook/gists{/gist_id}","starred_url":"https://api.github.com/users/tailhook/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tailhook/subscriptions","organizations_url":"https://api.github.com/users/tailhook/orgs","repos_url":"https://api.github.com/users/tailhook/repos","events_url":"https://api.github.com/users/tailhook/events{/privacy}","received_events_url":"https://api.github.com/users/tailhook/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-12-02T00:36:14Z","performed_via_github_app":null},{"id":1368662349,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDEzNjg2NjIzNDk=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1368662349","actor":{"login":"tailhook","id":321799,"node_id":"MDQ6VXNlcjMyMTc5OQ==","avatar_url":"https://avatars.githubusercontent.com/u/321799?v=4","gravatar_id":"","url":"https://api.github.com/users/tailhook","html_url":"https://github.com/tailhook","followers_url":"https://api.github.com/users/tailhook/followers","following_url":"https://api.github.com/users/tailhook/following{/other_user}","gists_url":"https://api.github.com/users/tailhook/gists{/gist_id}","starred_url":"https://api.github.com/users/tailhook/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tailhook/subscriptions","organizations_url":"https://api.github.com/users/tailhook/orgs","repos_url":"https://api.github.com/users/tailhook/repos","events_url":"https://api.github.com/users/tailhook/events{/privacy}","received_events_url":"https://api.github.com/users/tailhook/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-12-02T00:36:14Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/354845631","html_url":"https://github.com/BurntSushi/ripgrep/issues/539#issuecomment-354845631","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/539","id":354845631,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NDg0NTYzMQ==","user":{"login":"balajisivaraman","id":1876249,"node_id":"MDQ6VXNlcjE4NzYyNDk=","avatar_url":"https://avatars.githubusercontent.com/u/1876249?v=4","gravatar_id":"","url":"https://api.github.com/users/balajisivaraman","html_url":"https://github.com/balajisivaraman","followers_url":"https://api.github.com/users/balajisivaraman/followers","following_url":"https://api.github.com/users/balajisivaraman/following{/other_user}","gists_url":"https://api.github.com/users/balajisivaraman/gists{/gist_id}","starred_url":"https://api.github.com/users/balajisivaraman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/balajisivaraman/subscriptions","organizations_url":"https://api.github.com/users/balajisivaraman/orgs","repos_url":"https://api.github.com/users/balajisivaraman/repos","events_url":"https://api.github.com/users/balajisivaraman/events{/privacy}","received_events_url":"https://api.github.com/users/balajisivaraman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-02T18:51:37Z","updated_at":"2018-01-02T18:51:37Z","body":"I had a quick glance at this and had the following thought. The standard library provides a `Command` implementation that lets us spawn child processes from the currently running process. It also handily lets us pipe from the process' `stdout`. And the `stdout` already has the `Read` trait implemented for it.\r\n\r\nBy using the above, I was able to get a very trivial solution for this problem by just doing the following.\r\n\r\n```\r\nuse std::process::Command;\r\nuse std::process::Stdio;\r\nmatch Command::new(\"gunzip\")\r\n      .args(&[\"-c\", \"/home/balaji/Projects/rust/samples/test.gz\"])\r\n      .stdout(Stdio::piped())\r\n      .spawn() {\r\n         Ok(cmd) => self.search(printer,path, cmd.stdout.unwrap()), //Note: This is calling the worker's search method with the reader obtained from Pipe\r\n         _ => Ok(0)\r\n       }\r\n```\r\n\r\nI tested it out and it was able to spawn the process, do the unzipping and print the expected output to stdout.\r\n\r\n@BurntSushi, My apologies if this looks like a very naive solution and not what you were looking for at all. The only reason I wanted to post that line of thought here is that I felt it achieved the intended purpose: Support decompression on unix systems at minimal cost to the maintainer for the time being.\r\n\r\nPlease let me know whether this is what you had in mind when you opened this ticket.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/354845631/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"balajisivaraman","id":1876249,"node_id":"MDQ6VXNlcjE4NzYyNDk=","avatar_url":"https://avatars.githubusercontent.com/u/1876249?v=4","gravatar_id":"","url":"https://api.github.com/users/balajisivaraman","html_url":"https://github.com/balajisivaraman","followers_url":"https://api.github.com/users/balajisivaraman/followers","following_url":"https://api.github.com/users/balajisivaraman/following{/other_user}","gists_url":"https://api.github.com/users/balajisivaraman/gists{/gist_id}","starred_url":"https://api.github.com/users/balajisivaraman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/balajisivaraman/subscriptions","organizations_url":"https://api.github.com/users/balajisivaraman/orgs","repos_url":"https://api.github.com/users/balajisivaraman/repos","events_url":"https://api.github.com/users/balajisivaraman/events{/privacy}","received_events_url":"https://api.github.com/users/balajisivaraman/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1406732632,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTQwNjczMjYzMg==","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1406732632","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-01-02T18:51:37Z","performed_via_github_app":null},{"id":1406732633,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE0MDY3MzI2MzM=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1406732633","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-01-02T18:51:37Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/354847264","html_url":"https://github.com/BurntSushi/ripgrep/issues/539#issuecomment-354847264","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/539","id":354847264,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NDg0NzI2NA==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-02T18:58:29Z","updated_at":"2018-01-02T18:58:29Z","body":"@balajisivaraman Woohoo! Yeah that is exactly what I had in mind. :) The trickier issues are thinking through the UX I think. I don't have time to rethink it through all right now but I can rattle off some general principles:\r\n\r\n1. The absence of decompression commands should not cause ripgrep to fail. I do suspect a debug message would be appropriate.\r\n2. If a decompression command runs but then fails, then ripgrep should probably emit an error message but other continue searching. (Similar to how it handles files that it doesn't have permission to read.)\r\n3. What, if any, CLI flags do we expose related to this feature? Perhaps it's best to start by exposing none and simply recognize a hard-coded set of file extensions that we map to a particular kind of decompression command.\r\n4. We likely need to be a touch smart about what we search. For example, it seems like we would want to search something like `titles.csv.gz` but perhaps not `ripgrep-0.7.1.tar.gz`, even though they both have `.gz` extensions. Perhaps anything with a `.tar.{foo}` extension is skipped by decompression? Not sure. (Keep in mind that ripgrep would currently ignore such things today because it's likely to detect it as a binary file very quickly. But in this case, it's not clear we want to do that after decompression since decompression itself could be quite costly.)\r\n\r\nThere are maybe other things I've missed. :)","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/354847264/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1406742949,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTQwNjc0Mjk0OQ==","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1406742949","actor":{"login":"balajisivaraman","id":1876249,"node_id":"MDQ6VXNlcjE4NzYyNDk=","avatar_url":"https://avatars.githubusercontent.com/u/1876249?v=4","gravatar_id":"","url":"https://api.github.com/users/balajisivaraman","html_url":"https://github.com/balajisivaraman","followers_url":"https://api.github.com/users/balajisivaraman/followers","following_url":"https://api.github.com/users/balajisivaraman/following{/other_user}","gists_url":"https://api.github.com/users/balajisivaraman/gists{/gist_id}","starred_url":"https://api.github.com/users/balajisivaraman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/balajisivaraman/subscriptions","organizations_url":"https://api.github.com/users/balajisivaraman/orgs","repos_url":"https://api.github.com/users/balajisivaraman/repos","events_url":"https://api.github.com/users/balajisivaraman/events{/privacy}","received_events_url":"https://api.github.com/users/balajisivaraman/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-01-02T18:58:29Z","performed_via_github_app":null},{"id":1406742950,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE0MDY3NDI5NTA=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1406742950","actor":{"login":"balajisivaraman","id":1876249,"node_id":"MDQ6VXNlcjE4NzYyNDk=","avatar_url":"https://avatars.githubusercontent.com/u/1876249?v=4","gravatar_id":"","url":"https://api.github.com/users/balajisivaraman","html_url":"https://github.com/balajisivaraman","followers_url":"https://api.github.com/users/balajisivaraman/followers","following_url":"https://api.github.com/users/balajisivaraman/following{/other_user}","gists_url":"https://api.github.com/users/balajisivaraman/gists{/gist_id}","starred_url":"https://api.github.com/users/balajisivaraman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/balajisivaraman/subscriptions","organizations_url":"https://api.github.com/users/balajisivaraman/orgs","repos_url":"https://api.github.com/users/balajisivaraman/repos","events_url":"https://api.github.com/users/balajisivaraman/events{/privacy}","received_events_url":"https://api.github.com/users/balajisivaraman/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-01-02T18:58:29Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/354850192","html_url":"https://github.com/BurntSushi/ripgrep/issues/539#issuecomment-354850192","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/539","id":354850192,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NDg1MDE5Mg==","user":{"login":"balajisivaraman","id":1876249,"node_id":"MDQ6VXNlcjE4NzYyNDk=","avatar_url":"https://avatars.githubusercontent.com/u/1876249?v=4","gravatar_id":"","url":"https://api.github.com/users/balajisivaraman","html_url":"https://github.com/balajisivaraman","followers_url":"https://api.github.com/users/balajisivaraman/followers","following_url":"https://api.github.com/users/balajisivaraman/following{/other_user}","gists_url":"https://api.github.com/users/balajisivaraman/gists{/gist_id}","starred_url":"https://api.github.com/users/balajisivaraman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/balajisivaraman/subscriptions","organizations_url":"https://api.github.com/users/balajisivaraman/orgs","repos_url":"https://api.github.com/users/balajisivaraman/repos","events_url":"https://api.github.com/users/balajisivaraman/events{/privacy}","received_events_url":"https://api.github.com/users/balajisivaraman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-02T19:10:51Z","updated_at":"2018-01-02T19:10:51Z","body":"Yay! :smiley: \r\n\r\nLike you, I will also do some thinking on this and arrive at a cohesive list of things on how the UX should be by maybe tomorrow; adding to the ones you've already posted. Once that is finalised and agreed, I can actually take this up and start working on it, if that is OK with you. üëç ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/354850192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"balajisivaraman","id":1876249,"node_id":"MDQ6VXNlcjE4NzYyNDk=","avatar_url":"https://avatars.githubusercontent.com/u/1876249?v=4","gravatar_id":"","url":"https://api.github.com/users/balajisivaraman","html_url":"https://github.com/balajisivaraman","followers_url":"https://api.github.com/users/balajisivaraman/followers","following_url":"https://api.github.com/users/balajisivaraman/following{/other_user}","gists_url":"https://api.github.com/users/balajisivaraman/gists{/gist_id}","starred_url":"https://api.github.com/users/balajisivaraman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/balajisivaraman/subscriptions","organizations_url":"https://api.github.com/users/balajisivaraman/orgs","repos_url":"https://api.github.com/users/balajisivaraman/repos","events_url":"https://api.github.com/users/balajisivaraman/events{/privacy}","received_events_url":"https://api.github.com/users/balajisivaraman/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/354882807","html_url":"https://github.com/BurntSushi/ripgrep/issues/539#issuecomment-354882807","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/539","id":354882807,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NDg4MjgwNw==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-02T21:43:02Z","updated_at":"2018-01-02T21:43:02Z","body":"@balajisivaraman Yeah that would be great! This would be a significant contribution. It's a really nice feature to have in ripgrep.\r\n\r\nWhen thinking through the UX, keep in mind that \"let's punt\" is a totally valid answer. Keeping things simple and building on it later is a totally fine way to do things. The only downside here is that you need to be a little careful to leave yourself breathing room with respect to breaking changes. i.e., Adding a new flag for this and then removing that flag later is probably something we want to avoid (but adding no flags now and adding more flags later is OK!). (Not that I'm saying we should or shouldn't add flags for this, it's just an example.)","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/354882807/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1406969252,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTQwNjk2OTI1Mg==","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1406969252","actor":{"login":"balajisivaraman","id":1876249,"node_id":"MDQ6VXNlcjE4NzYyNDk=","avatar_url":"https://avatars.githubusercontent.com/u/1876249?v=4","gravatar_id":"","url":"https://api.github.com/users/balajisivaraman","html_url":"https://github.com/balajisivaraman","followers_url":"https://api.github.com/users/balajisivaraman/followers","following_url":"https://api.github.com/users/balajisivaraman/following{/other_user}","gists_url":"https://api.github.com/users/balajisivaraman/gists{/gist_id}","starred_url":"https://api.github.com/users/balajisivaraman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/balajisivaraman/subscriptions","organizations_url":"https://api.github.com/users/balajisivaraman/orgs","repos_url":"https://api.github.com/users/balajisivaraman/repos","events_url":"https://api.github.com/users/balajisivaraman/events{/privacy}","received_events_url":"https://api.github.com/users/balajisivaraman/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-01-02T21:43:02Z","performed_via_github_app":null},{"id":1406969253,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE0MDY5NjkyNTM=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1406969253","actor":{"login":"balajisivaraman","id":1876249,"node_id":"MDQ6VXNlcjE4NzYyNDk=","avatar_url":"https://avatars.githubusercontent.com/u/1876249?v=4","gravatar_id":"","url":"https://api.github.com/users/balajisivaraman","html_url":"https://github.com/balajisivaraman","followers_url":"https://api.github.com/users/balajisivaraman/followers","following_url":"https://api.github.com/users/balajisivaraman/following{/other_user}","gists_url":"https://api.github.com/users/balajisivaraman/gists{/gist_id}","starred_url":"https://api.github.com/users/balajisivaraman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/balajisivaraman/subscriptions","organizations_url":"https://api.github.com/users/balajisivaraman/orgs","repos_url":"https://api.github.com/users/balajisivaraman/repos","events_url":"https://api.github.com/users/balajisivaraman/events{/privacy}","received_events_url":"https://api.github.com/users/balajisivaraman/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-01-02T21:43:02Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/355093858","html_url":"https://github.com/BurntSushi/ripgrep/issues/539#issuecomment-355093858","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/539","id":355093858,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NTA5Mzg1OA==","user":{"login":"balajisivaraman","id":1876249,"node_id":"MDQ6VXNlcjE4NzYyNDk=","avatar_url":"https://avatars.githubusercontent.com/u/1876249?v=4","gravatar_id":"","url":"https://api.github.com/users/balajisivaraman","html_url":"https://github.com/balajisivaraman","followers_url":"https://api.github.com/users/balajisivaraman/followers","following_url":"https://api.github.com/users/balajisivaraman/following{/other_user}","gists_url":"https://api.github.com/users/balajisivaraman/gists{/gist_id}","starred_url":"https://api.github.com/users/balajisivaraman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/balajisivaraman/subscriptions","organizations_url":"https://api.github.com/users/balajisivaraman/orgs","repos_url":"https://api.github.com/users/balajisivaraman/repos","events_url":"https://api.github.com/users/balajisivaraman/events{/privacy}","received_events_url":"https://api.github.com/users/balajisivaraman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-03T18:50:08Z","updated_at":"2018-01-03T18:50:08Z","body":"Ok, I've thought about it a fair bit and here are my thoughts, partly summations of BurntSushi's:\r\n\r\n- Going forward, when `rg` encounters any file ending with `.bz2`, `.gz`, `.xz` or `.lzma`, it will automatically use the corresponding decompressors (`bunzip2`, `gunzip`, `unxz` or `unlzma`) to perform the decompression as a child process. It will then use the `Read` instance obtained from that process' `stdout` to perform the search. (Note: One advantage we get by doing it this way is that it doesn't affect the existing UTF-16/32 transcoder, so if the archived file is encoded differently, we can still handle it.)\r\n\r\n  - If the expected binary itself is not available, `rg` will gracefully exit and output a corresponding error message to the user. (Note: The binary is expected to be on the user's path and will *not* be fully qualified to a default location such as `/usr/bin` or `/usr/local/bin` for obvious reasons to account for varying install locations.)\r\n  - If the executed command fails for any reason at all, then `rg` will fetch the error message from that process' `stderr`, display it, and continue searching the rest of the files.\r\n\r\n- As of right now, `tar` archives will not be supported. If they are encountered, `rg` will fail gracefully letting the user know that it is currently unsupported, before doing any decompression. I feel this is better instead of continuing with the current method of skipping binary files. Users should probably be made aware of why their `.tar.gz` or `.tar.xz` files are not being processed by `rg`.\r\n\r\n- I'm currently in favour of exposing a CLI flag similar to what `ag` does with its `-z`/`--search-zip` flag. My thought is based mostly on my use-case where I have many compressed log files in the same location as the currently being written to log file. I would want `rg` to skip the compressed files by default unless I specifically ask it to search through multiple bulky log `.gz` files. (Also the fact that searching archives will be slower is another reason we may want to go for a CLI argument. If users find that searches in some directories are suddenly slower because we're spawning a child process internally, they might be confused. By leaving it to the user's choice, we don't have this problem.)\r\n\r\n- My idea is to have the detection and decompression of files in a separate module so that it'll be easier to change when Rust gets its own decompression libraries. (We have some WIPs already, with the most famous one being [flate](https://github.com/alexcrichton/flate2-rs/) which does pull in C bindings, but there's work being done on a [pure-Rust](https://crates.io/crates/miniz_oxide) lib.) With the actual decompression code currently planned for being somewhat lightweight and exposing a `Read` instance by default, we should have no issues replacing it with a library which also provides us with a `Read` instance.\r\n\r\n- Also another thought I had is that the current line of implementation will not have any adverse impact on `rg`'s processing speed or parallel capabilities, outside of the performance loss we get from invoking the decompression in a sub-process, which is expected. Seeing as this feature will be implemented as part of the `worker` itself, which to my understanding is invoked by the parallel walker in case of multiple files. So we should be OK on this.\r\n\r\n- **Windows Support**: This one's a bit of a challenge. I tried building `rg` with my trivial hack to see whether it can work on a Windows 10 machine I have.\r\n\r\n    - Good news is that because we're using Rust's own `Command` and `Pipe` capabilities, they work out of the box.\r\n    - The challenge is detection of binaries. If I simply use `bunzip` and I have the binary installed by \"Git for Windows\" on the Path, it still fails saying *It is not a valid Win32 application*. I tried building with Rust-Gnu as well to no avail. I have a feeling this could be made to work with some manouvering, as long as the binary itself is available on the user's path. I'll see what I can do.\r\n\r\nI can't think of any more UX/code-maintencance/platform-support related issues, though I'm sure I will start discovering them as I begin working on the feature. If this sounds good to you, I can begin working on this right away. (I'll mostly put effort into this over nights and weekends.)","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/355093858/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"balajisivaraman","id":1876249,"node_id":"MDQ6VXNlcjE4NzYyNDk=","avatar_url":"https://avatars.githubusercontent.com/u/1876249?v=4","gravatar_id":"","url":"https://api.github.com/users/balajisivaraman","html_url":"https://github.com/balajisivaraman","followers_url":"https://api.github.com/users/balajisivaraman/followers","following_url":"https://api.github.com/users/balajisivaraman/following{/other_user}","gists_url":"https://api.github.com/users/balajisivaraman/gists{/gist_id}","starred_url":"https://api.github.com/users/balajisivaraman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/balajisivaraman/subscriptions","organizations_url":"https://api.github.com/users/balajisivaraman/orgs","repos_url":"https://api.github.com/users/balajisivaraman/repos","events_url":"https://api.github.com/users/balajisivaraman/events{/privacy}","received_events_url":"https://api.github.com/users/balajisivaraman/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/355097605","html_url":"https://github.com/BurntSushi/ripgrep/issues/539#issuecomment-355097605","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/539","id":355097605,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NTA5NzYwNQ==","user":{"login":"lnicola","id":308347,"node_id":"MDQ6VXNlcjMwODM0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/308347?v=4","gravatar_id":"","url":"https://api.github.com/users/lnicola","html_url":"https://github.com/lnicola","followers_url":"https://api.github.com/users/lnicola/followers","following_url":"https://api.github.com/users/lnicola/following{/other_user}","gists_url":"https://api.github.com/users/lnicola/gists{/gist_id}","starred_url":"https://api.github.com/users/lnicola/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lnicola/subscriptions","organizations_url":"https://api.github.com/users/lnicola/orgs","repos_url":"https://api.github.com/users/lnicola/repos","events_url":"https://api.github.com/users/lnicola/events{/privacy}","received_events_url":"https://api.github.com/users/lnicola/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-03T19:04:27Z","updated_at":"2018-01-03T19:05:36Z","body":"> The challenge is detection of binaries. If I simply use bunzip and I have the binary installed by \"Git for Windows\" on the Path, it still fails saying It is not a valid Win32 application. I tried building with Rust-Gnu as well to no avail. I have a feeling this could be made to work with some manouvering, as long as the binary itself is available on the user's path. I'll see what I can do.\r\n\r\nI no longer have Windows to test this, but that sounds like a 32/64-bit mismatch. You should check Event Viewer for any errors in the Application section, or maybe try `depends`. It might be that you have a DLL twice in your `PATH` and `bunzip` is loading the wrong one.\r\n\r\nIn any case, this should probably be left for the user to handle.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/355097605/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lnicola","id":308347,"node_id":"MDQ6VXNlcjMwODM0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/308347?v=4","gravatar_id":"","url":"https://api.github.com/users/lnicola","html_url":"https://github.com/lnicola","followers_url":"https://api.github.com/users/lnicola/followers","following_url":"https://api.github.com/users/lnicola/following{/other_user}","gists_url":"https://api.github.com/users/lnicola/gists{/gist_id}","starred_url":"https://api.github.com/users/lnicola/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lnicola/subscriptions","organizations_url":"https://api.github.com/users/lnicola/orgs","repos_url":"https://api.github.com/users/lnicola/repos","events_url":"https://api.github.com/users/lnicola/events{/privacy}","received_events_url":"https://api.github.com/users/lnicola/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/355107119","html_url":"https://github.com/BurntSushi/ripgrep/issues/539#issuecomment-355107119","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/539","id":355107119,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NTEwNzExOQ==","user":{"login":"okdana","id":122095,"node_id":"MDQ6VXNlcjEyMjA5NQ==","avatar_url":"https://avatars.githubusercontent.com/u/122095?v=4","gravatar_id":"","url":"https://api.github.com/users/okdana","html_url":"https://github.com/okdana","followers_url":"https://api.github.com/users/okdana/followers","following_url":"https://api.github.com/users/okdana/following{/other_user}","gists_url":"https://api.github.com/users/okdana/gists{/gist_id}","starred_url":"https://api.github.com/users/okdana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/okdana/subscriptions","organizations_url":"https://api.github.com/users/okdana/orgs","repos_url":"https://api.github.com/users/okdana/repos","events_url":"https://api.github.com/users/okdana/events{/privacy}","received_events_url":"https://api.github.com/users/okdana/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-03T19:42:49Z","updated_at":"2018-01-03T19:42:49Z","body":">Going forward, when rg encounters any file ending with .bz2, .gz, .xz or .lzma, it will automatically use the corresponding decompressors (bunzip2, gunzip, unxz or unlzma) to perform the decompression as a child process. \r\n\r\nOther compression-only formats to think about:\r\n\r\n* Brotli (`.br`, `brotli -d`)\r\n* Compress (`.Z`, `uncompress`)\r\n* LZ4 (`.lz4`, `lz4cat` or `unlz4`)\r\n* LZO (`.lzo`, `lzop -d`)\r\n\r\nOf those, Compress and LZ4 are the most common i believe. `uncompress` is installed on most UNIX systems by default, and although `lz4` isn't it's used for compressing Linux kernel images, core dumps, &c. Doubt any of them are as commonly used for text as the others you mentioned tho\r\n\r\n>As of right now, tar archives will not be supported. If they are encountered, rg will fail gracefully letting the user know that it is currently unsupported, before doing any decompression.\r\n\r\nOnly if they're supplied directly on the command line, i assume? Or in the debug messages maybe? It would be irksome if `rg` were to flood you with routine notices about not supporting files it encounters in the directory tree\r\n\r\n>I'm currently in favour of exposing a CLI flag similar to what ag does with its -z/--search-zip flag.\r\n\r\nI agree, i think it would make sense to have a flag that toggles compressed-file support as a whole on or off. That would surely be relevant no matter how the feature may be implemented in the future. (I suppose that users will still be able to ignore files with `-g`, but if there's going to be support for several different formats that might be tedious ‚Äî¬†and this ties in with the following)\r\n\r\n---\r\n\r\nI wonder also about how `rg` should handle files that *look* like they're compressed but aren't. e.g., if i incorporate the LZ4 library into a project maybe i'll have something like `README.lz4` in my repository ‚Äî¬†the `.lz4` here doesn't indicate compression, it's just a convention to append things to `README`. LZ4 is perhaps a bad example since `lz4cat` actually has the `-f` option to make it pass uncompressed files through as-is ‚Äî most other decompression tools don't have anything like that though\r\n\r\nI assume that scenario doesn't come up often, but a possibility to consider","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/355107119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"okdana","id":122095,"node_id":"MDQ6VXNlcjEyMjA5NQ==","avatar_url":"https://avatars.githubusercontent.com/u/122095?v=4","gravatar_id":"","url":"https://api.github.com/users/okdana","html_url":"https://github.com/okdana","followers_url":"https://api.github.com/users/okdana/followers","following_url":"https://api.github.com/users/okdana/following{/other_user}","gists_url":"https://api.github.com/users/okdana/gists{/gist_id}","starred_url":"https://api.github.com/users/okdana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/okdana/subscriptions","organizations_url":"https://api.github.com/users/okdana/orgs","repos_url":"https://api.github.com/users/okdana/repos","events_url":"https://api.github.com/users/okdana/events{/privacy}","received_events_url":"https://api.github.com/users/okdana/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/355732826","html_url":"https://github.com/BurntSushi/ripgrep/issues/539#issuecomment-355732826","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/539","id":355732826,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NTczMjgyNg==","user":{"login":"balajisivaraman","id":1876249,"node_id":"MDQ6VXNlcjE4NzYyNDk=","avatar_url":"https://avatars.githubusercontent.com/u/1876249?v=4","gravatar_id":"","url":"https://api.github.com/users/balajisivaraman","html_url":"https://github.com/balajisivaraman","followers_url":"https://api.github.com/users/balajisivaraman/followers","following_url":"https://api.github.com/users/balajisivaraman/following{/other_user}","gists_url":"https://api.github.com/users/balajisivaraman/gists{/gist_id}","starred_url":"https://api.github.com/users/balajisivaraman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/balajisivaraman/subscriptions","organizations_url":"https://api.github.com/users/balajisivaraman/orgs","repos_url":"https://api.github.com/users/balajisivaraman/repos","events_url":"https://api.github.com/users/balajisivaraman/events{/privacy}","received_events_url":"https://api.github.com/users/balajisivaraman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-06T08:37:58Z","updated_at":"2018-01-06T08:37:58Z","body":"> Only if they're supplied directly on the command line, i assume? Or in the debug messages maybe? It would be irksome if rg were to flood you with routine notices about not supporting files it encounters in the directory tree\r\n\r\nI was thinking the errors would be output when the user specifically asks to search in archive files using the new `-Z/--search-zip` flag. If we're not going the CLI flag route, then we definitely should do what you suggested and only output the error when specifically asked to search a `tar` file.\r\n\r\n> I wonder also about how rg should handle files that look like they're compressed but aren't. e.g., if i incorporate the LZ4 library into a project maybe i'll have something like README.lz4 in my repository ‚Äî the .lz4 here doesn't indicate compression, it's just a convention to append things to README. LZ4 is perhaps a bad example since lz4cat actually has the -f option to make it pass uncompressed files through as-is ‚Äî most other decompression tools don't have anything like that though\r\n\r\nOne option to circumvent this issue is to use the [magic](https://github.com/robo9k/rust-magic) crate suggested earlier in this thread, which is the equivalent of running the `file` command on the file. That way we can safely assume that the file contains the type of data the extension says it contains.\r\n\r\n> I no longer have Windows to test this, but that sounds like a 32/64-bit mismatch. You should check Event Viewer for any errors in the Application section, or maybe try depends. It might be that you have a DLL twice in your PATH and bunzip is loading the wrong one.\r\n\r\nThanks for the suggestion. I'll cleanup my Windows installation of Rust and the binaries that I have to recheck this.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/355732826/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"balajisivaraman","id":1876249,"node_id":"MDQ6VXNlcjE4NzYyNDk=","avatar_url":"https://avatars.githubusercontent.com/u/1876249?v=4","gravatar_id":"","url":"https://api.github.com/users/balajisivaraman","html_url":"https://github.com/balajisivaraman","followers_url":"https://api.github.com/users/balajisivaraman/followers","following_url":"https://api.github.com/users/balajisivaraman/following{/other_user}","gists_url":"https://api.github.com/users/balajisivaraman/gists{/gist_id}","starred_url":"https://api.github.com/users/balajisivaraman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/balajisivaraman/subscriptions","organizations_url":"https://api.github.com/users/balajisivaraman/orgs","repos_url":"https://api.github.com/users/balajisivaraman/repos","events_url":"https://api.github.com/users/balajisivaraman/events{/privacy}","received_events_url":"https://api.github.com/users/balajisivaraman/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/355836415","html_url":"https://github.com/BurntSushi/ripgrep/issues/539#issuecomment-355836415","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/539","id":355836415,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NTgzNjQxNQ==","user":{"login":"balajisivaraman","id":1876249,"node_id":"MDQ6VXNlcjE4NzYyNDk=","avatar_url":"https://avatars.githubusercontent.com/u/1876249?v=4","gravatar_id":"","url":"https://api.github.com/users/balajisivaraman","html_url":"https://github.com/balajisivaraman","followers_url":"https://api.github.com/users/balajisivaraman/followers","following_url":"https://api.github.com/users/balajisivaraman/following{/other_user}","gists_url":"https://api.github.com/users/balajisivaraman/gists{/gist_id}","starred_url":"https://api.github.com/users/balajisivaraman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/balajisivaraman/subscriptions","organizations_url":"https://api.github.com/users/balajisivaraman/orgs","repos_url":"https://api.github.com/users/balajisivaraman/repos","events_url":"https://api.github.com/users/balajisivaraman/events{/privacy}","received_events_url":"https://api.github.com/users/balajisivaraman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-07T17:00:29Z","updated_at":"2018-01-07T17:00:29Z","body":"@BurntSushi, I've begun working on this on a [branch](https://github.com/balajisivaraman/ripgrep/tree/fix_539) in my fork, going with the simpler file extension based detection instead of the fancier `magic` based detection. Please let me know your thoughts on whether we're OK with `rg` having CLI flag for this as mentioned above or not, and I'll incorporate that into the code accordingly. Thanks!","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/355836415/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"balajisivaraman","id":1876249,"node_id":"MDQ6VXNlcjE4NzYyNDk=","avatar_url":"https://avatars.githubusercontent.com/u/1876249?v=4","gravatar_id":"","url":"https://api.github.com/users/balajisivaraman","html_url":"https://github.com/balajisivaraman","followers_url":"https://api.github.com/users/balajisivaraman/followers","following_url":"https://api.github.com/users/balajisivaraman/following{/other_user}","gists_url":"https://api.github.com/users/balajisivaraman/gists{/gist_id}","starred_url":"https://api.github.com/users/balajisivaraman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/balajisivaraman/subscriptions","organizations_url":"https://api.github.com/users/balajisivaraman/orgs","repos_url":"https://api.github.com/users/balajisivaraman/repos","events_url":"https://api.github.com/users/balajisivaraman/events{/privacy}","received_events_url":"https://api.github.com/users/balajisivaraman/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1412798660,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTQxMjc5ODY2MA==","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1412798660","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-01-07T17:00:29Z","performed_via_github_app":null},{"id":1412798661,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE0MTI3OTg2NjE=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1412798661","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-01-07T17:00:29Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/355837773","html_url":"https://github.com/BurntSushi/ripgrep/issues/539#issuecomment-355837773","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/539","id":355837773,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NTgzNzc3Mw==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-07T17:21:24Z","updated_at":"2018-01-07T17:21:24Z","body":"> If the expected binary itself is not available, rg will gracefully exit and output a corresponding error message to the user. (Note: The binary is expected to be on the user's path and will not be fully qualified to a default location such as /usr/bin or /usr/local/bin for obvious reasons to account for varying install locations.)\r\n\r\n(It occurs to be that by \"gracefully exit,\" you mean, \"continue searching.\" Apologies if I misunderstood! But I'll leave the text below as I wrote it before I realize the potential misunderstanding.)\r\n\r\nThis is definitely not OK. ripgrep must not stop working just because an external program isn't installed. If the binary isn't available, then there are two reasonable choices I can see:\r\n\r\n1. Emit a debug message explaining why decompression didn't happen. Otherwise, continue searching.\r\n2. Emit a warning message explaining why decompression didn't happen. Otherwise, continue searching.\r\n\r\nMy preference is (1). It's the most conservative change and is pretty consistent with ripgrep's general behavior of silently ignoring files that it thinks is irrelevant. In the future, we may of course elect to do (2).\r\n\r\n> If the executed command fails for any reason at all, then rg will fetch the error message from that process' stderr, display it, and continue searching the rest of the files.\r\n\r\nThis is good. Notably, I don't think this should be a debug message, but rather, an actual warning emitting to stderr. This is in contrast to how a missing binary is handled.\r\n\r\n> As of right now, tar archives will not be supported. If they are encountered, rg will fail gracefully letting the user know that it is currently unsupported, before doing any decompression. I feel this is better instead of continuing with the current method of skipping binary files. Users should probably be made aware of why their .tar.gz or .tar.xz files are not being processed by rg.\r\n\r\nI would like to see this be a debug message. In particular, it's consistent with how we handle other files that are ignored.\r\n\r\n> I'm currently in favour of exposing a CLI flag similar to what ag does with its -z/--search-zip flag. My thought is based mostly on my use-case where I have many compressed log files in the same location as the currently being written to log file. I would want rg to skip the compressed files by default unless I specifically ask it to search through multiple bulky log .gz files. (Also the fact that searching archives will be slower is another reason we may want to go for a CLI argument. If users find that searches in some directories are suddenly slower because we're spawning a child process internally, they might be confused. By leaving it to the user's choice, we don't have this problem.)\r\n\r\nI agree with adding this flag, and by implication, making decompression opt-in.\r\n\r\n> My idea is to have the detection and decompression of files in a separate module so that it'll be easier to change when Rust gets its own decompression libraries. (We have some WIPs already, with the most famous one being flate which does pull in C bindings, but there's work being done on a pure-Rust lib.) With the actual decompression code currently planned for being somewhat lightweight and exposing a Read instance by default, we should have no issues replacing it with a library which also provides us with a Read instance.\r\n\r\n:+1:\r\n\r\n> Also another thought I had is that the current line of implementation will not have any adverse impact on rg's processing speed or parallel capabilities, outside of the performance loss we get from invoking the decompression in a sub-process, which is expected. Seeing as this feature will be implemented as part of the worker itself, which to my understanding is invoked by the parallel walker in case of multiple files. So we should be OK on this.\r\n\r\nThere is definitely a potential performance impact here by shelling out to another process as opposed to using a library, but that is certainly part of the trade off of doing things this way. Otherwise, yeah, fully agreed. :+1:\r\n\r\n> Windows Support: This one's a bit of a challenge. I tried building rg with my trivial hack to see whether it can work on a Windows 10 machine I have.\r\n\r\nAye. I think my recommendation here is to start with something that doesn't do anything platform specific. That is, even if the implementation is always incorrect on Windows, we should be covered by the aforementioned error handling.\r\n\r\n---\r\n\r\n@okdana \r\n\r\n> I wonder also about how rg should handle files that look like they're compressed but aren't. e.g., if i incorporate the LZ4 library into a project maybe i'll have something like README.lz4 in my repository ‚Äî the .lz4 here doesn't indicate compression, it's just a convention to append things to README. LZ4 is perhaps a bad example since lz4cat actually has the -f option to make it pass uncompressed files through as-is ‚Äî most other decompression tools don't have anything like that though\r\n\r\nThat is interesting scenario! I think I'd suggest ignoring it for now, and fixing it if and when somebody files a bug for it. Then we can try and fix it from there. I'm somewhat more encouraged to say this is OK since this decompression behavior will be opt-in. @balajisivaraman I'd probably avoid `magic` and such for now, but certainly, we may elect to use something like that in the future.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/355837773/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1412805078,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTQxMjgwNTA3OA==","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1412805078","actor":{"login":"okdana","id":122095,"node_id":"MDQ6VXNlcjEyMjA5NQ==","avatar_url":"https://avatars.githubusercontent.com/u/122095?v=4","gravatar_id":"","url":"https://api.github.com/users/okdana","html_url":"https://github.com/okdana","followers_url":"https://api.github.com/users/okdana/followers","following_url":"https://api.github.com/users/okdana/following{/other_user}","gists_url":"https://api.github.com/users/okdana/gists{/gist_id}","starred_url":"https://api.github.com/users/okdana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/okdana/subscriptions","organizations_url":"https://api.github.com/users/okdana/orgs","repos_url":"https://api.github.com/users/okdana/repos","events_url":"https://api.github.com/users/okdana/events{/privacy}","received_events_url":"https://api.github.com/users/okdana/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-01-07T17:21:24Z","performed_via_github_app":null}]