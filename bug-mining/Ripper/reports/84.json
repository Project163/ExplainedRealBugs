{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/308","repository_url":"https://api.github.com/repos/BurntSushi/ripgrep","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/308/labels{/name}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/308/comments","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/308/events","html_url":"https://github.com/BurntSushi/ripgrep/issues/308","id":199449816,"node_id":"MDU6SXNzdWUxOTk0NDk4MTY=","number":308,"title":"--output like Ack (or: rethink --replace)","user":{"login":"mernen","id":6412,"node_id":"MDQ6VXNlcjY0MTI=","avatar_url":"https://avatars.githubusercontent.com/u/6412?v=4","gravatar_id":"","url":"https://api.github.com/users/mernen","html_url":"https://github.com/mernen","followers_url":"https://api.github.com/users/mernen/followers","following_url":"https://api.github.com/users/mernen/following{/other_user}","gists_url":"https://api.github.com/users/mernen/gists{/gist_id}","starred_url":"https://api.github.com/users/mernen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mernen/subscriptions","organizations_url":"https://api.github.com/users/mernen/orgs","repos_url":"https://api.github.com/users/mernen/repos","events_url":"https://api.github.com/users/mernen/events{/privacy}","received_events_url":"https://api.github.com/users/mernen/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":449399236,"node_id":"MDU6TGFiZWw0NDkzOTkyMzY=","url":"https://api.github.com/repos/BurntSushi/ripgrep/labels/doc","name":"doc","color":"fbca04","default":false,"description":"An issue with or an improvement to documentation."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2017-01-08T21:51:57Z","updated_at":"2017-01-10T21:43:45Z","closed_at":"2017-01-10T21:43:45Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"First, a question: what exactly is the use case for `--replace`? I don't think I've ever seen any other tool offering this option, and I can't think of many uses.\r\n\r\nI do, though, find Ack's `--output` useful every now and then. It's a similar feature, but it replaces the contents of the entire line rather than only the matched part. When coupled with `-h` (hiding line numbers and file names), it allows one to pipe the results to other tools to get statistics about the matches in ways I'm not sure how I'd achieve with ripgrep (or other competitors, for that matter).\r\n\r\n```sh\r\n$ # what are the std modules in use?\r\n$ ack '\\bstd::\\w+' --output '$&' -h | sort | uniq -c | sort -nr\r\n  29 std::path\r\n  28 std::io\r\n  18 std::os\r\n  16 std::sync\r\n  14 std::ffi\r\n  10 std::error\r\n   9 std::fs\r\n   9 std::fmt\r\n   7 std::str\r\n   6 std::env\r\n   5 std::cmp\r\n   4 std::thread\r\n   4 std::process\r\n   4 std::mem\r\n   4 std::collections\r\n   3 std::borrow\r\n   2 std::time\r\n   2 std::result\r\n   2 std::ops\r\n   2 std::cell\r\n   1 std::vec\r\n   1 std::slice\r\n   1 std::marker\r\n   1 std::iter\r\n   1 std::hash\r\n   1 std::ascii\r\n```\r\n\r\n(ripgrep's `--replace` can be fully emulated in Ack using `` $` `` and ``$'`` in the output expression, but those perlisms are rather cryptic, and also pretty awkward to use on the CLI)","closed_by":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/308/timeline","performed_via_github_app":null,"state_reason":"completed"}