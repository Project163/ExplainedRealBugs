[{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/540510735","html_url":"https://github.com/BurntSushi/ripgrep/issues/1401#issuecomment-540510735","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1401","id":540510735,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDUxMDczNQ==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-10T10:41:08Z","updated_at":"2019-10-10T10:41:08Z","body":"Interesting, yeah, I think I might see why this happens. With the default regex engine, all character classes containing `\\n` (including `\\s`) are _rewritten_ to _not_ contain `\\n`. But doing this isn't possible with PCRE2. Of course, this is why ripgrep then uses PCRE2 on a line-by-line basis instead of searching through many lines at once. My guess is that it is including the the `\\n` at the end of each line, and it probably shouldn't be. Although, I haven't thought through the full consequences of that. I will attempt a fix for this at some point, but it is possible that this will end up being a `wontfix` bug.\r\n\r\nThanks for filing this!","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/540510735/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2702214197,"node_id":"MDEyOkxhYmVsZWRFdmVudDI3MDIyMTQxOTc=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/2702214197","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-10-10T10:41:20Z","label":{"name":"bug","color":"fc2929"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/676413007","html_url":"https://github.com/BurntSushi/ripgrep/issues/1401#issuecomment-676413007","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1401","id":676413007,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NjQxMzAwNw==","user":{"login":"maage","id":699415,"node_id":"MDQ6VXNlcjY5OTQxNQ==","avatar_url":"https://avatars.githubusercontent.com/u/699415?v=4","gravatar_id":"","url":"https://api.github.com/users/maage","html_url":"https://github.com/maage","followers_url":"https://api.github.com/users/maage/followers","following_url":"https://api.github.com/users/maage/following{/other_user}","gists_url":"https://api.github.com/users/maage/gists{/gist_id}","starred_url":"https://api.github.com/users/maage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maage/subscriptions","organizations_url":"https://api.github.com/users/maage/orgs","repos_url":"https://api.github.com/users/maage/repos","events_url":"https://api.github.com/users/maage/events{/privacy}","received_events_url":"https://api.github.com/users/maage/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-19T14:04:50Z","updated_at":"2020-08-19T14:04:50Z","body":"Some extended testing.\r\nTests ran under Fedora 32 x86_64.\r\n```\r\n$ rg --version\r\nripgrep 12.1.1\r\n-SIMD -AVX (compiled)\r\n+SIMD -AVX (runtime)\r\n$ pcre2grep --version\r\npcre2grep version 10.35 2020-05-09\r\n$ perl --version\r\n\r\nThis is perl 5, version 30, subversion 3 (v5.30.3) built for x86_64-linux-thread-multi\r\n(with 75 registered patches, see perl -V for more detail)\r\n...\r\n$ grep --version\r\ngrep (GNU grep) 3.3\r\n...\r\n```\r\n\r\nTest data:\r\n```\r\n$ printf 'foo 42\\nxoyz\\ncat\\tdog\\nfoo' > ip.txt\r\n$ cat ip.txt; echo \"<EOF>\" \r\nfoo 42\r\nxoyz\r\ncat\tdog\r\nfoo<EOF>\r\n```\r\n\r\nJust to make comparison complete:\r\n```\r\n$ pcre2grep -o '.*o(?!.*\\s)' ip.txt \r\nxo\r\ncat\tdo\r\nfoo\r\n$ perl -ne 'chomp;print \"$&\\n\" if /.*o(?!.*\\s)/' ip.txt \r\nxo\r\ncat\tdo\r\nfoo\r\n$ grep -oP '.*o(?!.*\\s)' ip.txt\r\nxo\r\ncat\tdo\r\nfoo\r\n$ perl -ne 'print \"$&\\n\" if /.*o(?!.*\\s)/' ip.txt \r\nfoo\r\n```\r\nIn perl line contains \\n at the end when you go over line by line. Seems pcre2grep does do that. Grep colors all matches correctly. Others do not do coloring.\r\n\r\nWith rg:\r\n```\r\n$ rg -NoP '.*o(?!.*\\s)' ip.txt\r\nxoyz\r\ncat\tdog\r\nfoo\r\n```\r\nOnly \"foo\" is colored as match. Somehow first two lines end up being printed fully even if they are not marked as matches.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/676413007/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"maage","id":699415,"node_id":"MDQ6VXNlcjY5OTQxNQ==","avatar_url":"https://avatars.githubusercontent.com/u/699415?v=4","gravatar_id":"","url":"https://api.github.com/users/maage","html_url":"https://github.com/maage","followers_url":"https://api.github.com/users/maage/followers","following_url":"https://api.github.com/users/maage/following{/other_user}","gists_url":"https://api.github.com/users/maage/gists{/gist_id}","starred_url":"https://api.github.com/users/maage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maage/subscriptions","organizations_url":"https://api.github.com/users/maage/orgs","repos_url":"https://api.github.com/users/maage/repos","events_url":"https://api.github.com/users/maage/events{/privacy}","received_events_url":"https://api.github.com/users/maage/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4822271983,"node_id":"MDEyOkxhYmVsZWRFdmVudDQ4MjIyNzE5ODM=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/4822271983","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-05-31T23:02:56Z","label":{"name":"rollup","color":"ffccee"},"performed_via_github_app":null},{"id":4822421556,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ4MjI0MjE1NTY=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/4822421556","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"f9244015fa0171150631f920adc364cd1b8cb13a","commit_url":"https://api.github.com/repos/BurntSushi/ripgrep/commits/f9244015fa0171150631f920adc364cd1b8cb13a","created_at":"2021-06-01T00:49:14Z","performed_via_github_app":null},{"id":4822421564,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ4MjI0MjE1NjQ=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/4822421564","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"68561f9441b7d9a1a9aa77f219861f7e642c9095","commit_url":"https://api.github.com/repos/BurntSushi/ripgrep/commits/68561f9441b7d9a1a9aa77f219861f7e642c9095","created_at":"2021-06-01T00:49:15Z","performed_via_github_app":null},{"id":4822538540,"node_id":"MDExOkNsb3NlZEV2ZW50NDgyMjUzODU0MA==","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/4822538540","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"ee23ab51736d35028c7f3eee23295429377742b4","commit_url":"https://api.github.com/repos/BurntSushi/ripgrep/commits/ee23ab51736d35028c7f3eee23295429377742b4","created_at":"2021-06-01T01:51:27Z","state_reason":null,"performed_via_github_app":null},{"id":4822538553,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ4MjI1Mzg1NTM=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/4822538553","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"fbb2cfed28d68b220e51c0fe8db9d89a4516aab6","commit_url":"https://api.github.com/repos/BurntSushi/ripgrep/commits/fbb2cfed28d68b220e51c0fe8db9d89a4516aab6","created_at":"2021-06-01T01:51:28Z","performed_via_github_app":null},{"id":11794052224,"node_id":"REFE_lADOAzJbyc4eGnPuzwAAAAK--vSA","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/11794052224","actor":{"login":"vors","id":816680,"node_id":"MDQ6VXNlcjgxNjY4MA==","avatar_url":"https://avatars.githubusercontent.com/u/816680?v=4","gravatar_id":"","url":"https://api.github.com/users/vors","html_url":"https://github.com/vors","followers_url":"https://api.github.com/users/vors/followers","following_url":"https://api.github.com/users/vors/following{/other_user}","gists_url":"https://api.github.com/users/vors/gists{/gist_id}","starred_url":"https://api.github.com/users/vors/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vors/subscriptions","organizations_url":"https://api.github.com/users/vors/orgs","repos_url":"https://api.github.com/users/vors/repos","events_url":"https://api.github.com/users/vors/events{/privacy}","received_events_url":"https://api.github.com/users/vors/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"ee23ab51736d35028c7f3eee23295429377742b4","commit_url":"https://api.github.com/repos/vors/ripgrep/commits/ee23ab51736d35028c7f3eee23295429377742b4","created_at":"2024-02-13T21:15:49Z","performed_via_github_app":null}]