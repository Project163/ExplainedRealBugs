{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2852","repository_url":"https://api.github.com/repos/BurntSushi/ripgrep","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2852/labels{/name}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2852/comments","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2852/events","html_url":"https://github.com/BurntSushi/ripgrep/issues/2852","id":2407449334,"node_id":"I_kwDOAzJbyc6PfsL2","number":2852,"title":"--count --multiline doesn't behave as documented","user":{"login":"jeanas","id":37271310,"node_id":"MDQ6VXNlcjM3MjcxMzEw","avatar_url":"https://avatars.githubusercontent.com/u/37271310?v=4","gravatar_id":"","url":"https://api.github.com/users/jeanas","html_url":"https://github.com/jeanas","followers_url":"https://api.github.com/users/jeanas/followers","following_url":"https://api.github.com/users/jeanas/following{/other_user}","gists_url":"https://api.github.com/users/jeanas/gists{/gist_id}","starred_url":"https://api.github.com/users/jeanas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeanas/subscriptions","organizations_url":"https://api.github.com/users/jeanas/orgs","repos_url":"https://api.github.com/users/jeanas/repos","events_url":"https://api.github.com/users/jeanas/events{/privacy}","received_events_url":"https://api.github.com/users/jeanas/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":339721678,"node_id":"MDU6TGFiZWwzMzk3MjE2Nzg=","url":"https://api.github.com/repos/BurntSushi/ripgrep/labels/bug","name":"bug","color":"fc2929","default":true,"description":"A bug."},{"id":449399236,"node_id":"MDU6TGFiZWw0NDkzOTkyMzY=","url":"https://api.github.com/repos/BurntSushi/ripgrep/labels/doc","name":"doc","color":"fbca04","default":false,"description":"An issue with or an improvement to documentation."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-07-14T14:04:26Z","updated_at":"2025-09-23T02:02:07Z","closed_at":"2025-09-23T02:02:07Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Please tick this box to confirm you have reviewed the above.\n\n- [X] I have a different issue.\n\n### What version of ripgrep are you using?\n\n14.1.0\n\n### How did you install ripgrep?\n\nReproduces with distro package and `cargo install`ed version.\n\n### What operating system are you using ripgrep on?\n\nFedora 40\n\n### Describe your bug.\n\nFrom the `--help` output:\r\n\r\n```\r\n    -c, --count\r\n        This flag suppresses normal output and shows the number of lines that\r\n        match the given patterns for each file searched. Each file containing a\r\n        match has its path and count printed on each line. Note that unless\r\n        -U/--multiline is enabled, this reports the number of lines that match\r\n        and not the total number of matches. In multiline mode, -c/--count is\r\n        equivalent to --count-matches.\r\n```\r\n\r\nHowever, the behavior I'm seeing is that `--count` still behaves as \"count the number matching lines\" and not as \"count the number of matches\" even under multiline mode.\n\n### What are the steps to reproduce the behavior?\n\n```\r\n$ cat file.txt \r\nmatch match match match\r\nmatch match match match\r\n```\r\n\n\n### What is the actual behavior?\n\n```\r\n$ rg --count match file.txt\r\n2\r\n\r\n$ rg --count-matches match file.txt\r\n8\r\n\r\n$ rg --count --multiline match file.txt\r\n2\r\n```\n\n### What is the expected behavior?\n\nThe last command should print 8 (or the documentation should be changed).","closed_by":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2852/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2852/timeline","performed_via_github_app":null,"state_reason":"completed"}