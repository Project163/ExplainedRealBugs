{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1868","repository_url":"https://api.github.com/repos/BurntSushi/ripgrep","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1868/labels{/name}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1868/comments","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1868/events","html_url":"https://github.com/BurntSushi/ripgrep/issues/1868","id":895608391,"node_id":"MDU6SXNzdWU4OTU2MDgzOTE=","number":1868,"title":"Context output options (-A, -B, and -C) do not override the \"--passthru\" option","user":{"login":"lousyd","id":10715714,"node_id":"MDQ6VXNlcjEwNzE1NzE0","avatar_url":"https://avatars.githubusercontent.com/u/10715714?v=4","gravatar_id":"","url":"https://api.github.com/users/lousyd","html_url":"https://github.com/lousyd","followers_url":"https://api.github.com/users/lousyd/followers","following_url":"https://api.github.com/users/lousyd/following{/other_user}","gists_url":"https://api.github.com/users/lousyd/gists{/gist_id}","starred_url":"https://api.github.com/users/lousyd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lousyd/subscriptions","organizations_url":"https://api.github.com/users/lousyd/orgs","repos_url":"https://api.github.com/users/lousyd/repos","events_url":"https://api.github.com/users/lousyd/events{/privacy}","received_events_url":"https://api.github.com/users/lousyd/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":339721678,"node_id":"MDU6TGFiZWwzMzk3MjE2Nzg=","url":"https://api.github.com/repos/BurntSushi/ripgrep/labels/bug","name":"bug","color":"fc2929","default":true,"description":"A bug."},{"id":1849506066,"node_id":"MDU6TGFiZWwxODQ5NTA2MDY2","url":"https://api.github.com/repos/BurntSushi/ripgrep/labels/rollup","name":"rollup","color":"ffccee","default":false,"description":"A PR that has been merged with many others in a rollup."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-05-19T15:47:59Z","updated_at":"2021-06-01T01:51:19Z","closed_at":"2021-06-01T01:51:19Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"#### What version of ripgrep are you using?\r\n\r\nripgrep 12.1.1\r\n-SIMD -AVX (compiled)\r\n+SIMD +AVX (runtime)\r\n\r\n#### How did you install ripgrep?\r\n\r\ndnf install ripgrep\r\n\r\n#### What operating system are you using ripgrep on?\r\n\r\nGNU/Linux 5.11.18-300.fc34.x86_64 x86_64\r\n\r\n#### Describe your bug.\r\n\r\nThe general approach of configuration and command line options seems to be that if two options conflict, the later one prevails and the earlier one is treated as if it were never given. For example, the \"--binary\" option will cancel out the \"--no-binary\" option if it appears later in the configuration file or later on the command line. Similarly, \"--text\" will override the \"--binary\" option if it appears later in the configuration file or command line, and vice versa. However, the context output options (-A, -B, and -C) do not similarly override and get overridden by the \"--passthru\" option. It seems as if they should override each other.\r\n\r\nI encountered this when spitting out a bunch of JSON that I wanted to filter through ripgrep. I put together my command line to output the JSON, then piped it to rg with \"--passthru\" and my pattern. It worked as expected. Then I up-arrowed to get the same command line but added a \"-C\" to it. I didn't even think about the fact that I hadn't removed the previous \"--passthru\". I just thought, conceptually, that I was further refining the command line to filter down the results a little more. It confused me when I still got aaalllll of the JSON.\r\n\r\n#### What are the steps to reproduce the behavior?\r\n\r\n```\r\nprintf 'line 1\\nline 2\\nline 3\\n' | rg --passthru -B1 3\r\nprintf 'line 1\\nline 2\\nline 3\\n' | rg -B1 --passthru 3\r\n```\r\n\r\n#### What is the expected behavior?\r\n\r\nIt seems as if the context output options (-A, -B, and -C) should override the \"--passthru\" option, and vice versa, when given later in the configuration file or command line.\r\n","closed_by":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1868/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1868/timeline","performed_via_github_app":null,"state_reason":"completed"}