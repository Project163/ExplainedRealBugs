{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2694","repository_url":"https://api.github.com/repos/BurntSushi/ripgrep","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2694/labels{/name}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2694/comments","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2694/events","html_url":"https://github.com/BurntSushi/ripgrep/issues/2694","id":2057619819,"node_id":"I_kwDOAzJbyc56pMlr","number":2694,"title":"consider adding an `rg:` prefix all error messages","user":{"login":"shoffmeister","id":3868036,"node_id":"MDQ6VXNlcjM4NjgwMzY=","avatar_url":"https://avatars.githubusercontent.com/u/3868036?v=4","gravatar_id":"","url":"https://api.github.com/users/shoffmeister","html_url":"https://github.com/shoffmeister","followers_url":"https://api.github.com/users/shoffmeister/followers","following_url":"https://api.github.com/users/shoffmeister/following{/other_user}","gists_url":"https://api.github.com/users/shoffmeister/gists{/gist_id}","starred_url":"https://api.github.com/users/shoffmeister/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shoffmeister/subscriptions","organizations_url":"https://api.github.com/users/shoffmeister/orgs","repos_url":"https://api.github.com/users/shoffmeister/repos","events_url":"https://api.github.com/users/shoffmeister/events{/privacy}","received_events_url":"https://api.github.com/users/shoffmeister/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":339721680,"node_id":"MDU6TGFiZWwzMzk3MjE2ODA=","url":"https://api.github.com/repos/BurntSushi/ripgrep/labels/enhancement","name":"enhancement","color":"84b6eb","default":true,"description":"An enhancement to the functionality of the software."},{"id":339721681,"node_id":"MDU6TGFiZWwzMzk3MjE2ODE=","url":"https://api.github.com/repos/BurntSushi/ripgrep/labels/help%20wanted","name":"help wanted","color":"159818","default":true,"description":"Others are encouraged to work on this issue."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-12-27T17:30:59Z","updated_at":"2024-01-06T19:24:27Z","closed_at":"2024-01-06T19:24:27Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Please tick this box to confirm you have reviewed the above.\n\n- [X] I have a different issue.\n\n### What version of ripgrep are you using?\n\n```\r\nripgrep 13.0.0\r\n-SIMD -AVX (compiled)\r\n+SIMD +AVX (runtime)\r\n```\n\n### How did you install ripgrep?\n\ndnf install ripgrep\n\n### What operating system are you using ripgrep on?\n\nFedora Rawhide (40)\n\n### Describe your bug.\n\nWhen running any ripgrep command on a clone of https://invent.kde.org/frameworks/syntax-highlighting, stderr will emit output\r\n```\r\n./autotests/input/.gitignore: line 7: error parsing glob '/**/a?[a-z12!][]][!][:upper:]][^[=a=]]\\?[\\\\incomplete?*': unclosed character class; missing ']'\r\n./autotests/input/.gitignore: line 8: error parsing glob '!/**/a?[a-z][]][!][:upper:]][^[=a=]]\\?[\\\\incomplete?*': unclosed character class; missing ']'\r\n```\r\n\n\n### What are the steps to reproduce the behavior?\n\n* `git clone https://invent.kde.org/frameworks/syntax-highlighting.git`\r\n* `cd syntax-highlighting`\r\n* `rg anything 2>stderr.txt`\r\n* `cat stderr.txt`\r\n\n\n### What is the actual behavior?\n\n```\r\n./autotests/input/.gitignore: line 7: error parsing glob '/**/a?[a-z12!][]][!][:upper:]][^[=a=]]\\?[\\\\incomplete?*': unclosed character class; missing ']'\r\n./autotests/input/.gitignore: line 8: error parsing glob '!/**/a?[a-z][]][!][:upper:]][^[=a=]]\\?[\\\\incomplete?*': unclosed character class; missing ']'\r\n```\r\n\n\n### What is the expected behavior?\n\n\"Something else\" would be better, but to me it is not clear what the most appropriate behaviour is:\r\n\r\nFrom what I can tell, ripgrep prints to stderr internal diagnostics about what it found in the specific `.gitignore` file. I can see these options to improve the user experience in this corner case:\r\n\r\na) don't print those diagnostics by default; it's not within the responsibilities of ripgrep to diagnose the content of .gitignore files. Possibly add an option to turn diagnostics on, to allow for trouble-shooting\r\n\r\nb) expand the text of the emitted diagnostic which clarifies that the origin is ripgrep itself - when running without redirection, that is not immediately obvious. Example: \"rg: configuring search with ./autotests/input/.gitignore: line 7: ...\"\r\n\r\nFWIW, I believe the above .gitignore patterns are exactly as intended, as they seem to act as input into a test, not as \"meaningful\" .gitignore files. To that extent, here, that is a very fringe corner case. There may be other instances where ripgrep may print.","closed_by":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2694/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2694/timeline","performed_via_github_app":null,"state_reason":"completed"}