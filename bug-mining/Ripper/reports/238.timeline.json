[{"id":2068380572,"node_id":"MDEyOkxhYmVsZWRFdmVudDIwNjgzODA1NzI=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/2068380572","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-01-11T12:01:35Z","label":{"name":"bug","color":"fc2929"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/453497493","html_url":"https://github.com/BurntSushi/ripgrep/issues/1159#issuecomment-453497493","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1159","id":453497493,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzQ5NzQ5Mw==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-11T12:08:02Z","updated_at":"2019-01-11T12:09:00Z","body":"With respect to invalid invocations, yes, that is indeed a bug. It's due to the fact that we let our arg parser exit the process for us if there's an incorrect argv. Instead, we should use [`App::get_matches_safe`](https://docs.rs/clap/2.32.0/clap/struct.App.html#method.get_matches_safe) and handle the error ourselves. That should hopefully be a very simple change.\r\n\r\nThe latter part of your bug report is more interesting, and it's less clear whether there's anything to do. Certainly, ripgrep does not match grep's behavior, but that is not in and of itself a reason to change something. In particular, ripgrep only emits a `2` exit code if there was a failure that caused it to exit early, i.e., a catastrophic failure. A failure to read a file or directory is not catastrophic, and in particular, ripgrep continues searching. An example of a catastrophic failure is, say, the inability to parse a given pattern:\r\n\r\n```\r\n$ rg 'bad)'\r\nregex parse error:\r\n    bad)\r\n       ^\r\nerror: unopened group\r\n\r\n$ echo $?\r\n2\r\n```\r\n\r\nWhere grep differs on this point is that it seems to emit a `2` exit status if _any_ error occurred at all, even if a match was found. For example:\r\n\r\n```\r\n$ grep foo does-not-exist UNLICENSE\r\ngrep: does-not-exist: No such file or directory\r\n\r\n$ echo $?\r\n2\r\n\r\n$ grep the does-not-exist UNLICENSE\r\ngrep: does-not-exist: No such file or directory\r\nUNLICENSE:This is free and unencumbered software released into the public domain.\r\nUNLICENSE:distribute this software, either in source code form or as a compiled\r\nUNLICENSE:In jurisdictions that recognize copyright laws, the author or authors\r\nUNLICENSE:of this software dedicate any and all copyright interest in the\r\nUNLICENSE:software to the public domain. We make this dedication for the benefit\r\nUNLICENSE:of the public at large and to the detriment of our heirs and\r\n\r\n$ echo $?\r\n2\r\n```\r\n\r\nI don't really know what the \"right\" behavior is here. How do you want to use the exit status specifically?","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/453497493/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/453498876","html_url":"https://github.com/BurntSushi/ripgrep/issues/1159#issuecomment-453498876","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1159","id":453498876,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzQ5ODg3Ng==","user":{"login":"wincent","id":7074,"node_id":"MDQ6VXNlcjcwNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/7074?v=4","gravatar_id":"","url":"https://api.github.com/users/wincent","html_url":"https://github.com/wincent","followers_url":"https://api.github.com/users/wincent/followers","following_url":"https://api.github.com/users/wincent/following{/other_user}","gists_url":"https://api.github.com/users/wincent/gists{/gist_id}","starred_url":"https://api.github.com/users/wincent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wincent/subscriptions","organizations_url":"https://api.github.com/users/wincent/orgs","repos_url":"https://api.github.com/users/wincent/repos","events_url":"https://api.github.com/users/wincent/events{/privacy}","received_events_url":"https://api.github.com/users/wincent/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-11T12:14:13Z","updated_at":"2019-01-11T12:14:13Z","body":"I'm using ripgrep (or ag, or ack etc) in the [Ferret Vim plug-in](https://github.com/wincent/ferret) and I'd like to provide better feedback when the user does something wrong. Right now it will say \"no matches found\" even if they passed a bad path or a non-existent option.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/453498876/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wincent","id":7074,"node_id":"MDQ6VXNlcjcwNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/7074?v=4","gravatar_id":"","url":"https://api.github.com/users/wincent","html_url":"https://github.com/wincent","followers_url":"https://api.github.com/users/wincent/followers","following_url":"https://api.github.com/users/wincent/following{/other_user}","gists_url":"https://api.github.com/users/wincent/gists{/gist_id}","starred_url":"https://api.github.com/users/wincent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wincent/subscriptions","organizations_url":"https://api.github.com/users/wincent/orgs","repos_url":"https://api.github.com/users/wincent/repos","events_url":"https://api.github.com/users/wincent/events{/privacy}","received_events_url":"https://api.github.com/users/wincent/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/453505242","html_url":"https://github.com/BurntSushi/ripgrep/issues/1159#issuecomment-453505242","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1159","id":453505242,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzUwNTI0Mg==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-11T12:42:17Z","updated_at":"2019-01-11T12:42:17Z","body":"@wincent That doesn't quite cover all our bases though... What do you want to do when a non-catastrophic error occurs but a match was found? Do users see the error messages emitted by ripgrep?","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/453505242/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2068452666,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjA2ODQ1MjY2Ng==","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/2068452666","actor":{"login":"wincent","id":7074,"node_id":"MDQ6VXNlcjcwNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/7074?v=4","gravatar_id":"","url":"https://api.github.com/users/wincent","html_url":"https://github.com/wincent","followers_url":"https://api.github.com/users/wincent/followers","following_url":"https://api.github.com/users/wincent/following{/other_user}","gists_url":"https://api.github.com/users/wincent/gists{/gist_id}","starred_url":"https://api.github.com/users/wincent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wincent/subscriptions","organizations_url":"https://api.github.com/users/wincent/orgs","repos_url":"https://api.github.com/users/wincent/repos","events_url":"https://api.github.com/users/wincent/events{/privacy}","received_events_url":"https://api.github.com/users/wincent/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-01-11T12:42:17Z","performed_via_github_app":null},{"id":2068452667,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIwNjg0NTI2Njc=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/2068452667","actor":{"login":"wincent","id":7074,"node_id":"MDQ6VXNlcjcwNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/7074?v=4","gravatar_id":"","url":"https://api.github.com/users/wincent","html_url":"https://github.com/wincent","followers_url":"https://api.github.com/users/wincent/followers","following_url":"https://api.github.com/users/wincent/following{/other_user}","gists_url":"https://api.github.com/users/wincent/gists{/gist_id}","starred_url":"https://api.github.com/users/wincent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wincent/subscriptions","organizations_url":"https://api.github.com/users/wincent/orgs","repos_url":"https://api.github.com/users/wincent/repos","events_url":"https://api.github.com/users/wincent/events{/privacy}","received_events_url":"https://api.github.com/users/wincent/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-01-11T12:42:17Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/453515976","html_url":"https://github.com/BurntSushi/ripgrep/issues/1159#issuecomment-453515976","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1159","id":453515976,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzUxNTk3Ng==","user":{"login":"wincent","id":7074,"node_id":"MDQ6VXNlcjcwNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/7074?v=4","gravatar_id":"","url":"https://api.github.com/users/wincent","html_url":"https://github.com/wincent","followers_url":"https://api.github.com/users/wincent/followers","following_url":"https://api.github.com/users/wincent/following{/other_user}","gists_url":"https://api.github.com/users/wincent/gists{/gist_id}","starred_url":"https://api.github.com/users/wincent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wincent/subscriptions","organizations_url":"https://api.github.com/users/wincent/orgs","repos_url":"https://api.github.com/users/wincent/repos","events_url":"https://api.github.com/users/wincent/events{/privacy}","received_events_url":"https://api.github.com/users/wincent/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-11T13:26:24Z","updated_at":"2019-01-11T13:26:24Z","body":"I think making 1 what it means in grep makes sense (ie. no matches were found, but there were no errors and nothing obviously wrong that the user should \"fix\"). 2 to mean something went wrong, catastrophic or otherwise, irrespective of whether any (partial) results happened to get turned up on the way; if the tool really wants to, it can try to parse out the results, or the errors, or both.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/453515976/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wincent","id":7074,"node_id":"MDQ6VXNlcjcwNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/7074?v=4","gravatar_id":"","url":"https://api.github.com/users/wincent","html_url":"https://github.com/wincent","followers_url":"https://api.github.com/users/wincent/followers","following_url":"https://api.github.com/users/wincent/following{/other_user}","gists_url":"https://api.github.com/users/wincent/gists{/gist_id}","starred_url":"https://api.github.com/users/wincent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wincent/subscriptions","organizations_url":"https://api.github.com/users/wincent/orgs","repos_url":"https://api.github.com/users/wincent/repos","events_url":"https://api.github.com/users/wincent/events{/privacy}","received_events_url":"https://api.github.com/users/wincent/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/453517399","html_url":"https://github.com/BurntSushi/ripgrep/issues/1159#issuecomment-453517399","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1159","id":453517399,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzUxNzM5OQ==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-11T13:32:16Z","updated_at":"2019-01-11T13:32:16Z","body":"@wincent Thanks for the comment, but I don't think that really helps me make my decision. Could you explain more about the user experience instead?","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/453517399/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2068549221,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjA2ODU0OTIyMQ==","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/2068549221","actor":{"login":"wincent","id":7074,"node_id":"MDQ6VXNlcjcwNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/7074?v=4","gravatar_id":"","url":"https://api.github.com/users/wincent","html_url":"https://github.com/wincent","followers_url":"https://api.github.com/users/wincent/followers","following_url":"https://api.github.com/users/wincent/following{/other_user}","gists_url":"https://api.github.com/users/wincent/gists{/gist_id}","starred_url":"https://api.github.com/users/wincent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wincent/subscriptions","organizations_url":"https://api.github.com/users/wincent/orgs","repos_url":"https://api.github.com/users/wincent/repos","events_url":"https://api.github.com/users/wincent/events{/privacy}","received_events_url":"https://api.github.com/users/wincent/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-01-11T13:32:16Z","performed_via_github_app":null},{"id":2068549222,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIwNjg1NDkyMjI=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/2068549222","actor":{"login":"wincent","id":7074,"node_id":"MDQ6VXNlcjcwNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/7074?v=4","gravatar_id":"","url":"https://api.github.com/users/wincent","html_url":"https://github.com/wincent","followers_url":"https://api.github.com/users/wincent/followers","following_url":"https://api.github.com/users/wincent/following{/other_user}","gists_url":"https://api.github.com/users/wincent/gists{/gist_id}","starred_url":"https://api.github.com/users/wincent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wincent/subscriptions","organizations_url":"https://api.github.com/users/wincent/orgs","repos_url":"https://api.github.com/users/wincent/repos","events_url":"https://api.github.com/users/wincent/events{/privacy}","received_events_url":"https://api.github.com/users/wincent/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-01-11T13:32:16Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/453520586","html_url":"https://github.com/BurntSushi/ripgrep/issues/1159#issuecomment-453520586","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1159","id":453520586,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzUyMDU4Ng==","user":{"login":"wincent","id":7074,"node_id":"MDQ6VXNlcjcwNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/7074?v=4","gravatar_id":"","url":"https://api.github.com/users/wincent","html_url":"https://github.com/wincent","followers_url":"https://api.github.com/users/wincent/followers","following_url":"https://api.github.com/users/wincent/following{/other_user}","gists_url":"https://api.github.com/users/wincent/gists{/gist_id}","starred_url":"https://api.github.com/users/wincent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wincent/subscriptions","organizations_url":"https://api.github.com/users/wincent/orgs","repos_url":"https://api.github.com/users/wincent/repos","events_url":"https://api.github.com/users/wincent/events{/privacy}","received_events_url":"https://api.github.com/users/wincent/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-11T13:44:02Z","updated_at":"2019-01-11T13:45:01Z","body":"Right now:\r\n\r\n- If there are no results, the user sees a \"no results\" message.\r\n- If the user passes `--bogus-option` they also see \"no results\" because Ferret responds that way to the exit code of 1.\r\n- If the user does `rg foo non-existent` they see \"no results\" because of the exit code of 1.\r\n- If the user does `rg foo non-existent .` they see the results from \".\".\r\n\r\nIdeally, I think they'd instead see:\r\n\r\n- Results if the invocation is correct and has results.\r\n- The \"no results\" message if the invocation is correct but there are no results.\r\n- An error message if the invocation is incorrect, even if there are partial results.\r\n\r\nThe first two cases are the common path and already work as expected. It's that last one which is rarer, but currently can't be handled well because it is ambiguous (Ferret would need to parse the error output. Empty output + exit code 1 means no results; non-empty output plus non-zero exit code means \"something went wrong\"; but it would be nice to tell this from the code without relying on a fragile parsing heuristic).","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/453520586/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wincent","id":7074,"node_id":"MDQ6VXNlcjcwNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/7074?v=4","gravatar_id":"","url":"https://api.github.com/users/wincent","html_url":"https://github.com/wincent","followers_url":"https://api.github.com/users/wincent/followers","following_url":"https://api.github.com/users/wincent/following{/other_user}","gists_url":"https://api.github.com/users/wincent/gists{/gist_id}","starred_url":"https://api.github.com/users/wincent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wincent/subscriptions","organizations_url":"https://api.github.com/users/wincent/orgs","repos_url":"https://api.github.com/users/wincent/repos","events_url":"https://api.github.com/users/wincent/events{/privacy}","received_events_url":"https://api.github.com/users/wincent/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/453522730","html_url":"https://github.com/BurntSushi/ripgrep/issues/1159#issuecomment-453522730","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1159","id":453522730,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzUyMjczMA==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-11T13:51:36Z","updated_at":"2019-01-11T13:51:36Z","body":"OK, thanks for explaining that. I now have a more specific question.\r\n\r\n> The first two cases are the common path and already work as expected. It's that last one which is rarer, but currently can't be handled well because it is ambiguous (Ferret would need to parse the error output. Empty output + exit code 1 means no results; non-empty output plus non-zero exit code means \"something went wrong\"; but it would be nice to tell this from the code without relying on a fragile parsing heuristic).\r\n\r\nWhat does Ferret do today with error messages that ripgrep writes to stderr? Does it show them to users?\r\n\r\nAlso, just to make sure we're in sync, GNU grep's exit status behavior is documented as:\r\n\r\n```\r\nEXIT STATUS\r\n       Normally  the  exit  status  is 0 if a line is selected, 1 if no lines were selected, and 2 if an error\r\n       occurred.  However, if the -q or --quiet or --silent is used and a line is selected, the exit status is\r\n       0 even if an error occurred.\r\n```\r\n\r\nIf ripgrep behaved like the above, would that resolve your concerns?","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/453522730/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/453525770","html_url":"https://github.com/BurntSushi/ripgrep/issues/1159#issuecomment-453525770","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1159","id":453525770,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzUyNTc3MA==","user":{"login":"wincent","id":7074,"node_id":"MDQ6VXNlcjcwNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/7074?v=4","gravatar_id":"","url":"https://api.github.com/users/wincent","html_url":"https://github.com/wincent","followers_url":"https://api.github.com/users/wincent/followers","following_url":"https://api.github.com/users/wincent/following{/other_user}","gists_url":"https://api.github.com/users/wincent/gists{/gist_id}","starred_url":"https://api.github.com/users/wincent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wincent/subscriptions","organizations_url":"https://api.github.com/users/wincent/orgs","repos_url":"https://api.github.com/users/wincent/repos","events_url":"https://api.github.com/users/wincent/events{/privacy}","received_events_url":"https://api.github.com/users/wincent/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-11T14:01:42Z","updated_at":"2019-01-11T14:01:42Z","body":"Currently Ferret \"swallows\" error output. It's visible only if the user runs `:messages` in Vim. If ripgrep behaved like grep that would make it easier to distinguish among the cases, although Ferret doesn't use the `-q` flag so that bit isn't relevant to its usage pattern (which is about getting the results, not checking whether results exist).","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/453525770/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wincent","id":7074,"node_id":"MDQ6VXNlcjcwNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/7074?v=4","gravatar_id":"","url":"https://api.github.com/users/wincent","html_url":"https://github.com/wincent","followers_url":"https://api.github.com/users/wincent/followers","following_url":"https://api.github.com/users/wincent/following{/other_user}","gists_url":"https://api.github.com/users/wincent/gists{/gist_id}","starred_url":"https://api.github.com/users/wincent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wincent/subscriptions","organizations_url":"https://api.github.com/users/wincent/orgs","repos_url":"https://api.github.com/users/wincent/repos","events_url":"https://api.github.com/users/wincent/events{/privacy}","received_events_url":"https://api.github.com/users/wincent/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/453528145","html_url":"https://github.com/BurntSushi/ripgrep/issues/1159#issuecomment-453528145","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1159","id":453528145,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzUyODE0NQ==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-11T14:10:17Z","updated_at":"2019-01-11T14:10:17Z","body":"> Currently Ferret \"swallows\" error output. It's visible only if the user runs :messages in Vim.\r\n\r\nIt feels to me like this is a fundamental problem here. Even if I change ripgrep's approach to handling exit statuses, you still have problems like, \"users can't tell whether they supplied an invalid regex pattern or whether a search was executed and couldn't find any hits but also errored on reading a particular file.\" In both of those cases, looking at the messages of stderr clarifies what happened. But otherwise, both instances would produce exactly the same exit status with nothing printed to stdout.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/453528145/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/453528785","html_url":"https://github.com/BurntSushi/ripgrep/issues/1159#issuecomment-453528785","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1159","id":453528785,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzUyODc4NQ==","user":{"login":"wincent","id":7074,"node_id":"MDQ6VXNlcjcwNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/7074?v=4","gravatar_id":"","url":"https://api.github.com/users/wincent","html_url":"https://github.com/wincent","followers_url":"https://api.github.com/users/wincent/followers","following_url":"https://api.github.com/users/wincent/following{/other_user}","gists_url":"https://api.github.com/users/wincent/gists{/gist_id}","starred_url":"https://api.github.com/users/wincent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wincent/subscriptions","organizations_url":"https://api.github.com/users/wincent/orgs","repos_url":"https://api.github.com/users/wincent/repos","events_url":"https://api.github.com/users/wincent/events{/privacy}","received_events_url":"https://api.github.com/users/wincent/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-11T14:12:30Z","updated_at":"2019-01-11T14:12:30Z","body":"If Ripgrep exits with status 2 I will show the error output. Otherwise it goes to the Vim quickfix listing.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/453528785/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wincent","id":7074,"node_id":"MDQ6VXNlcjcwNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/7074?v=4","gravatar_id":"","url":"https://api.github.com/users/wincent","html_url":"https://github.com/wincent","followers_url":"https://api.github.com/users/wincent/followers","following_url":"https://api.github.com/users/wincent/following{/other_user}","gists_url":"https://api.github.com/users/wincent/gists{/gist_id}","starred_url":"https://api.github.com/users/wincent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wincent/subscriptions","organizations_url":"https://api.github.com/users/wincent/orgs","repos_url":"https://api.github.com/users/wincent/repos","events_url":"https://api.github.com/users/wincent/events{/privacy}","received_events_url":"https://api.github.com/users/wincent/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/453529399","html_url":"https://github.com/BurntSushi/ripgrep/issues/1159#issuecomment-453529399","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1159","id":453529399,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzUyOTM5OQ==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-11T14:14:31Z","updated_at":"2019-01-11T14:14:31Z","body":"Ah interesting, OK. I *think* I'm convinced then, and we can just implement grep's exit status semantics.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/453529399/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-24T01:26:43Z","updated_at":"2019-01-24T01:26:43Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1125","repository_url":"https://api.github.com/repos/BurntSushi/ripgrep","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1125/labels{/name}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1125/comments","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1125/events","html_url":"https://github.com/BurntSushi/ripgrep/issues/1125","id":385176923,"node_id":"MDU6SXNzdWUzODUxNzY5MjM=","number":1125,"title":"`rg --help | rg` panics","user":{"login":"nextzhou","id":16399146,"node_id":"MDQ6VXNlcjE2Mzk5MTQ2","avatar_url":"https://avatars.githubusercontent.com/u/16399146?v=4","gravatar_id":"","url":"https://api.github.com/users/nextzhou","html_url":"https://github.com/nextzhou","followers_url":"https://api.github.com/users/nextzhou/followers","following_url":"https://api.github.com/users/nextzhou/following{/other_user}","gists_url":"https://api.github.com/users/nextzhou/gists{/gist_id}","starred_url":"https://api.github.com/users/nextzhou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nextzhou/subscriptions","organizations_url":"https://api.github.com/users/nextzhou/orgs","repos_url":"https://api.github.com/users/nextzhou/repos","events_url":"https://api.github.com/users/nextzhou/events{/privacy}","received_events_url":"https://api.github.com/users/nextzhou/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":339721678,"node_id":"MDU6TGFiZWwzMzk3MjE2Nzg=","url":"https://api.github.com/repos/BurntSushi/ripgrep/labels/bug","name":"bug","color":"fc2929","default":true,"description":"A bug."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2018-11-28T09:32:45Z","updated_at":"2019-01-26T21:01:59Z","closed_at":"2019-01-26T21:01:59Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":53631945,"node_id":"MDEwOlJlcG9zaXRvcnk1MzYzMTk0NQ==","name":"ripgrep","full_name":"BurntSushi/ripgrep","private":false,"owner":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/BurntSushi/ripgrep","description":"ripgrep recursively searches directories for a regex pattern while respecting your gitignore","fork":false,"url":"https://api.github.com/repos/BurntSushi/ripgrep","forks_url":"https://api.github.com/repos/BurntSushi/ripgrep/forks","keys_url":"https://api.github.com/repos/BurntSushi/ripgrep/keys{/key_id}","collaborators_url":"https://api.github.com/repos/BurntSushi/ripgrep/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/BurntSushi/ripgrep/teams","hooks_url":"https://api.github.com/repos/BurntSushi/ripgrep/hooks","issue_events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events{/number}","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/events","assignees_url":"https://api.github.com/repos/BurntSushi/ripgrep/assignees{/user}","branches_url":"https://api.github.com/repos/BurntSushi/ripgrep/branches{/branch}","tags_url":"https://api.github.com/repos/BurntSushi/ripgrep/tags","blobs_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/refs{/sha}","trees_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/trees{/sha}","statuses_url":"https://api.github.com/repos/BurntSushi/ripgrep/statuses/{sha}","languages_url":"https://api.github.com/repos/BurntSushi/ripgrep/languages","stargazers_url":"https://api.github.com/repos/BurntSushi/ripgrep/stargazers","contributors_url":"https://api.github.com/repos/BurntSushi/ripgrep/contributors","subscribers_url":"https://api.github.com/repos/BurntSushi/ripgrep/subscribers","subscription_url":"https://api.github.com/repos/BurntSushi/ripgrep/subscription","commits_url":"https://api.github.com/repos/BurntSushi/ripgrep/commits{/sha}","git_commits_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/commits{/sha}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/comments{/number}","issue_comment_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments{/number}","contents_url":"https://api.github.com/repos/BurntSushi/ripgrep/contents/{+path}","compare_url":"https://api.github.com/repos/BurntSushi/ripgrep/compare/{base}...{head}","merges_url":"https://api.github.com/repos/BurntSushi/ripgrep/merges","archive_url":"https://api.github.com/repos/BurntSushi/ripgrep/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/BurntSushi/ripgrep/downloads","issues_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues{/number}","pulls_url":"https://api.github.com/repos/BurntSushi/ripgrep/pulls{/number}","milestones_url":"https://api.github.com/repos/BurntSushi/ripgrep/milestones{/number}","notifications_url":"https://api.github.com/repos/BurntSushi/ripgrep/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/labels{/name}","releases_url":"https://api.github.com/repos/BurntSushi/ripgrep/releases{/id}","deployments_url":"https://api.github.com/repos/BurntSushi/ripgrep/deployments","created_at":"2016-03-11T02:02:33Z","updated_at":"2025-11-09T23:50:59Z","pushed_at":"2025-10-30T17:30:23Z","git_url":"git://github.com/BurntSushi/ripgrep.git","ssh_url":"git@github.com:BurntSushi/ripgrep.git","clone_url":"https://github.com/BurntSushi/ripgrep.git","svn_url":"https://github.com/BurntSushi/ripgrep","homepage":"","size":5534,"stargazers_count":57154,"watchers_count":57154,"language":"Rust","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2304,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":88,"license":{"key":"unlicense","name":"The Unlicense","spdx_id":"Unlicense","url":"https://api.github.com/licenses/unlicense","node_id":"MDc6TGljZW5zZTE1"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["cli","command-line","command-line-tool","gitignore","grep","recursively-search","regex","ripgrep","rust","search"],"visibility":"public","forks":2304,"open_issues":88,"watchers":57154,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"#### What version of ripgrep are you using?\r\n\r\nripgrep 0.10.0\r\n-SIMD -AVX (compiled)\r\n+SIMD +AVX (runtime)\r\n\r\n#### How did you install ripgrep?\r\n\r\ncargo install ripgrep\r\n\r\n#### What operating system are you using ripgrep on?\r\n\r\nopensuse leap 15\r\nLinux miair 4.12.14-lp150.12.25-default #1 SMP Thu Nov 1 06:14:23 UTC 2018 (3fcf457) x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n#### Describe your question, feature request, or bug.\r\n\r\npanic\r\n\r\n#### If this is a bug, what are the steps to reproduce the behavior?\r\n\r\n`$ rg --help | rg`\r\n\r\n#### If this is a bug, what is the actual behavior?\r\n\r\n\r\n```\r\nâ–¶ RUST_BACKTRACE=1 rg --help | rg\r\nerror: The following required arguments were not provided:\r\n    <PATTERN>\r\n\r\nUSAGE:\r\n\r\n    rg [OPTIONS] PATTERN [PATH ...]\r\n    rg [OPTIONS] [-e PATTERN ...] [-f PATTERNFILE ...] [PATH ...]\r\n    rg [OPTIONS] --files [PATH ...]\r\n    rg [OPTIONS] --type-list\r\n    command | rg [OPTIONS] PATTERN\r\n\r\nFor more information try --help\r\nthread 'main' panicked at 'Error writing Error to stdout: Os { code: 32, kind: BrokenPipe, message: \"Broken pipe\" }', src/libcore/result.rs:1009:5\r\nstack backtrace:\r\n   0: std::sys::unix::backtrace::tracing::imp::unwind_backtrace\r\n             at src/libstd/sys/unix/backtrace/tracing/gcc_s.rs:49\r\n   1: std::sys_common::backtrace::_print\r\n             at src/libstd/sys_common/backtrace.rs:71\r\n   2: std::panicking::default_hook::{{closure}}\r\n             at src/libstd/sys_common/backtrace.rs:59\r\n             at src/libstd/panicking.rs:211\r\n   3: std::panicking::default_hook\r\n             at src/libstd/panicking.rs:227\r\n   4: std::panicking::rust_panic_with_hook\r\n             at src/libstd/panicking.rs:476\r\n   5: std::panicking::continue_panic_fmt\r\n             at src/libstd/panicking.rs:390\r\n   6: rust_begin_unwind\r\n             at src/libstd/panicking.rs:325\r\n   7: core::panicking::panic_fmt\r\n             at src/libcore/panicking.rs:77\r\n   8: core::result::unwrap_failed\r\n             at /rustc/1f57e4841157d5cbd4c4e22018f93bd1801c98c2/src/libcore/macros.rs:26\r\n   9: clap::errors::Error::exit\r\n             at /rustc/1f57e4841157d5cbd4c4e22018f93bd1801c98c2/src/libcore/result.rs:835\r\n             at ./.cargo/registry/src/mirrors.ustc.edu.cn-61ef6e0cd06fb9b8/clap-2.32.0/src/errors.rs:400\r\n  10: clap::app::App::get_matches\r\n             at ./.cargo/registry/src/mirrors.ustc.edu.cn-61ef6e0cd06fb9b8/clap-2.32.0/src/app/mod.rs:1529\r\n             at /rustc/1f57e4841157d5cbd4c4e22018f93bd1801c98c2/src/libcore/result.rs:774\r\n             at ./.cargo/registry/src/mirrors.ustc.edu.cn-61ef6e0cd06fb9b8/clap-2.32.0/src/app/mod.rs:1513\r\n             at ./.cargo/registry/src/mirrors.ustc.edu.cn-61ef6e0cd06fb9b8/clap-2.32.0/src/app/mod.rs:1455\r\n  11: rg::args::Args::parse\r\n             at ./.cargo/registry/src/mirrors.ustc.edu.cn-61ef6e0cd06fb9b8/ripgrep-0.10.0/src/args.rs:131\r\n  12: rg::main\r\n             at ./.cargo/registry/src/mirrors.ustc.edu.cn-61ef6e0cd06fb9b8/ripgrep-0.10.0/src/main.rs:39\r\n  13: std::rt::lang_start::{{closure}}\r\n             at /rustc/1f57e4841157d5cbd4c4e22018f93bd1801c98c2/src/libstd/rt.rs:74\r\n  14: std::panicking::try::do_call\r\n             at src/libstd/rt.rs:59\r\n             at src/libstd/panicking.rs:310\r\n  15: __rust_maybe_catch_panic\r\n             at src/libpanic_unwind/lib.rs:102\r\n  16: std::rt::lang_start_internal\r\n             at src/libstd/panicking.rs:289\r\n             at src/libstd/panic.rs:398\r\n             at src/libstd/rt.rs:58\r\n  17: main\r\n  18: __libc_start_main\r\n  19: _start\r\n             at ../sysdeps/x86_64/start.S:120\r\n```\r\n\r\n#### If this is a bug, what is the expected behavior?\r\n\r\nprint error message\r\n","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1125/reactions","total_count":1,"+1":0,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1125/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":2099023840,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDIwOTkwMjM4NDA=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/2099023840","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"31d3e241306f305c1cb94e1882511da2b48dcd36","commit_url":"https://api.github.com/repos/BurntSushi/ripgrep/commits/31d3e241306f305c1cb94e1882511da2b48dcd36","created_at":"2019-01-26T21:01:59Z","performed_via_github_app":null},{"id":2099023845,"node_id":"MDExOkNsb3NlZEV2ZW50MjA5OTAyMzg0NQ==","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/2099023845","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"f3164f2615ce18d3ea7b5ce122dfe2a381d1b3f4","commit_url":"https://api.github.com/repos/BurntSushi/ripgrep/commits/f3164f2615ce18d3ea7b5ce122dfe2a381d1b3f4","created_at":"2019-01-26T21:01:59Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"lolopinto","id":10857143,"node_id":"MDQ6VXNlcjEwODU3MTQz","avatar_url":"https://avatars.githubusercontent.com/u/10857143?v=4","gravatar_id":"","url":"https://api.github.com/users/lolopinto","html_url":"https://github.com/lolopinto","followers_url":"https://api.github.com/users/lolopinto/followers","following_url":"https://api.github.com/users/lolopinto/following{/other_user}","gists_url":"https://api.github.com/users/lolopinto/gists{/gist_id}","starred_url":"https://api.github.com/users/lolopinto/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lolopinto/subscriptions","organizations_url":"https://api.github.com/users/lolopinto/orgs","repos_url":"https://api.github.com/users/lolopinto/repos","events_url":"https://api.github.com/users/lolopinto/events{/privacy}","received_events_url":"https://api.github.com/users/lolopinto/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-15T19:39:53Z","updated_at":"2022-03-15T19:39:53Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/lolopinto/ent/issues/798","repository_url":"https://api.github.com/repos/lolopinto/ent","labels_url":"https://api.github.com/repos/lolopinto/ent/issues/798/labels{/name}","comments_url":"https://api.github.com/repos/lolopinto/ent/issues/798/comments","events_url":"https://api.github.com/repos/lolopinto/ent/issues/798/events","html_url":"https://github.com/lolopinto/ent/pull/798","id":1170116579,"node_id":"PR_kwDOC4qXl840fF0F","number":798,"title":"check for exit code 1 with rg","user":{"login":"lolopinto","id":10857143,"node_id":"MDQ6VXNlcjEwODU3MTQz","avatar_url":"https://avatars.githubusercontent.com/u/10857143?v=4","gravatar_id":"","url":"https://api.github.com/users/lolopinto","html_url":"https://github.com/lolopinto","followers_url":"https://api.github.com/users/lolopinto/followers","following_url":"https://api.github.com/users/lolopinto/following{/other_user}","gists_url":"https://api.github.com/users/lolopinto/gists{/gist_id}","starred_url":"https://api.github.com/users/lolopinto/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lolopinto/subscriptions","organizations_url":"https://api.github.com/users/lolopinto/orgs","repos_url":"https://api.github.com/users/lolopinto/repos","events_url":"https://api.github.com/users/lolopinto/events{/privacy}","received_events_url":"https://api.github.com/users/lolopinto/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-03-15T19:39:53Z","updated_at":"2022-03-15T19:46:52Z","closed_at":"2022-03-15T19:46:50Z","author_association":"OWNER","active_lock_reason":null,"draft":false,"repository":{"id":193632151,"node_id":"MDEwOlJlcG9zaXRvcnkxOTM2MzIxNTE=","name":"ent","full_name":"lolopinto/ent","private":false,"owner":{"login":"lolopinto","id":10857143,"node_id":"MDQ6VXNlcjEwODU3MTQz","avatar_url":"https://avatars.githubusercontent.com/u/10857143?v=4","gravatar_id":"","url":"https://api.github.com/users/lolopinto","html_url":"https://github.com/lolopinto","followers_url":"https://api.github.com/users/lolopinto/followers","following_url":"https://api.github.com/users/lolopinto/following{/other_user}","gists_url":"https://api.github.com/users/lolopinto/gists{/gist_id}","starred_url":"https://api.github.com/users/lolopinto/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lolopinto/subscriptions","organizations_url":"https://api.github.com/users/lolopinto/orgs","repos_url":"https://api.github.com/users/lolopinto/repos","events_url":"https://api.github.com/users/lolopinto/events{/privacy}","received_events_url":"https://api.github.com/users/lolopinto/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/lolopinto/ent","description":null,"fork":false,"url":"https://api.github.com/repos/lolopinto/ent","forks_url":"https://api.github.com/repos/lolopinto/ent/forks","keys_url":"https://api.github.com/repos/lolopinto/ent/keys{/key_id}","collaborators_url":"https://api.github.com/repos/lolopinto/ent/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/lolopinto/ent/teams","hooks_url":"https://api.github.com/repos/lolopinto/ent/hooks","issue_events_url":"https://api.github.com/repos/lolopinto/ent/issues/events{/number}","events_url":"https://api.github.com/repos/lolopinto/ent/events","assignees_url":"https://api.github.com/repos/lolopinto/ent/assignees{/user}","branches_url":"https://api.github.com/repos/lolopinto/ent/branches{/branch}","tags_url":"https://api.github.com/repos/lolopinto/ent/tags","blobs_url":"https://api.github.com/repos/lolopinto/ent/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/lolopinto/ent/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/lolopinto/ent/git/refs{/sha}","trees_url":"https://api.github.com/repos/lolopinto/ent/git/trees{/sha}","statuses_url":"https://api.github.com/repos/lolopinto/ent/statuses/{sha}","languages_url":"https://api.github.com/repos/lolopinto/ent/languages","stargazers_url":"https://api.github.com/repos/lolopinto/ent/stargazers","contributors_url":"https://api.github.com/repos/lolopinto/ent/contributors","subscribers_url":"https://api.github.com/repos/lolopinto/ent/subscribers","subscription_url":"https://api.github.com/repos/lolopinto/ent/subscription","commits_url":"https://api.github.com/repos/lolopinto/ent/commits{/sha}","git_commits_url":"https://api.github.com/repos/lolopinto/ent/git/commits{/sha}","comments_url":"https://api.github.com/repos/lolopinto/ent/comments{/number}","issue_comment_url":"https://api.github.com/repos/lolopinto/ent/issues/comments{/number}","contents_url":"https://api.github.com/repos/lolopinto/ent/contents/{+path}","compare_url":"https://api.github.com/repos/lolopinto/ent/compare/{base}...{head}","merges_url":"https://api.github.com/repos/lolopinto/ent/merges","archive_url":"https://api.github.com/repos/lolopinto/ent/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/lolopinto/ent/downloads","issues_url":"https://api.github.com/repos/lolopinto/ent/issues{/number}","pulls_url":"https://api.github.com/repos/lolopinto/ent/pulls{/number}","milestones_url":"https://api.github.com/repos/lolopinto/ent/milestones{/number}","notifications_url":"https://api.github.com/repos/lolopinto/ent/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/lolopinto/ent/labels{/name}","releases_url":"https://api.github.com/repos/lolopinto/ent/releases{/id}","deployments_url":"https://api.github.com/repos/lolopinto/ent/deployments","created_at":"2019-06-25T04:04:02Z","updated_at":"2025-10-10T20:42:34Z","pushed_at":"2025-03-02T06:23:20Z","git_url":"git://github.com/lolopinto/ent.git","ssh_url":"git@github.com:lolopinto/ent.git","clone_url":"https://github.com/lolopinto/ent.git","svn_url":"https://github.com/lolopinto/ent","homepage":null,"size":23626,"stargazers_count":57,"watchers_count":57,"language":"TypeScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":6,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":248,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":6,"open_issues":248,"watchers":57,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/lolopinto/ent/pulls/798","html_url":"https://github.com/lolopinto/ent/pull/798","diff_url":"https://github.com/lolopinto/ent/pull/798.diff","patch_url":"https://github.com/lolopinto/ent/pull/798.patch","merged_at":"2022-03-15T19:46:50Z"},"body":"found via looking at https://github.com/BurntSushi/ripgrep/issues/1159 that exit code 1 means no results ","reactions":{"url":"https://api.github.com/repos/lolopinto/ent/issues/798/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/lolopinto/ent/issues/798/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"dubrowgn","id":1294253,"node_id":"MDQ6VXNlcjEyOTQyNTM=","avatar_url":"https://avatars.githubusercontent.com/u/1294253?v=4","gravatar_id":"","url":"https://api.github.com/users/dubrowgn","html_url":"https://github.com/dubrowgn","followers_url":"https://api.github.com/users/dubrowgn/followers","following_url":"https://api.github.com/users/dubrowgn/following{/other_user}","gists_url":"https://api.github.com/users/dubrowgn/gists{/gist_id}","starred_url":"https://api.github.com/users/dubrowgn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dubrowgn/subscriptions","organizations_url":"https://api.github.com/users/dubrowgn/orgs","repos_url":"https://api.github.com/users/dubrowgn/repos","events_url":"https://api.github.com/users/dubrowgn/events{/privacy}","received_events_url":"https://api.github.com/users/dubrowgn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-27T08:55:36Z","updated_at":"2023-04-27T08:55:36Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2500","repository_url":"https://api.github.com/repos/BurntSushi/ripgrep","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2500/labels{/name}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2500/comments","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2500/events","html_url":"https://github.com/BurntSushi/ripgrep/issues/2500","id":1686421270,"node_id":"I_kwDOAzJbyc5khL8W","number":2500,"title":"Reconsider returning 1 for \"no matches\"","user":{"login":"dubrowgn","id":1294253,"node_id":"MDQ6VXNlcjEyOTQyNTM=","avatar_url":"https://avatars.githubusercontent.com/u/1294253?v=4","gravatar_id":"","url":"https://api.github.com/users/dubrowgn","html_url":"https://github.com/dubrowgn","followers_url":"https://api.github.com/users/dubrowgn/followers","following_url":"https://api.github.com/users/dubrowgn/following{/other_user}","gists_url":"https://api.github.com/users/dubrowgn/gists{/gist_id}","starred_url":"https://api.github.com/users/dubrowgn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dubrowgn/subscriptions","organizations_url":"https://api.github.com/users/dubrowgn/orgs","repos_url":"https://api.github.com/users/dubrowgn/repos","events_url":"https://api.github.com/users/dubrowgn/events{/privacy}","received_events_url":"https://api.github.com/users/dubrowgn/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":339721684,"node_id":"MDU6TGFiZWwzMzk3MjE2ODQ=","url":"https://api.github.com/repos/BurntSushi/ripgrep/labels/wontfix","name":"wontfix","color":"ffffff","default":true,"description":"A feature or bug that is unlikely to be implemented or fixed."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2023-04-27T08:55:35Z","updated_at":"2023-05-15T13:57:27Z","closed_at":"2023-04-27T12:16:16Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":53631945,"node_id":"MDEwOlJlcG9zaXRvcnk1MzYzMTk0NQ==","name":"ripgrep","full_name":"BurntSushi/ripgrep","private":false,"owner":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/BurntSushi/ripgrep","description":"ripgrep recursively searches directories for a regex pattern while respecting your gitignore","fork":false,"url":"https://api.github.com/repos/BurntSushi/ripgrep","forks_url":"https://api.github.com/repos/BurntSushi/ripgrep/forks","keys_url":"https://api.github.com/repos/BurntSushi/ripgrep/keys{/key_id}","collaborators_url":"https://api.github.com/repos/BurntSushi/ripgrep/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/BurntSushi/ripgrep/teams","hooks_url":"https://api.github.com/repos/BurntSushi/ripgrep/hooks","issue_events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events{/number}","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/events","assignees_url":"https://api.github.com/repos/BurntSushi/ripgrep/assignees{/user}","branches_url":"https://api.github.com/repos/BurntSushi/ripgrep/branches{/branch}","tags_url":"https://api.github.com/repos/BurntSushi/ripgrep/tags","blobs_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/refs{/sha}","trees_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/trees{/sha}","statuses_url":"https://api.github.com/repos/BurntSushi/ripgrep/statuses/{sha}","languages_url":"https://api.github.com/repos/BurntSushi/ripgrep/languages","stargazers_url":"https://api.github.com/repos/BurntSushi/ripgrep/stargazers","contributors_url":"https://api.github.com/repos/BurntSushi/ripgrep/contributors","subscribers_url":"https://api.github.com/repos/BurntSushi/ripgrep/subscribers","subscription_url":"https://api.github.com/repos/BurntSushi/ripgrep/subscription","commits_url":"https://api.github.com/repos/BurntSushi/ripgrep/commits{/sha}","git_commits_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/commits{/sha}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/comments{/number}","issue_comment_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments{/number}","contents_url":"https://api.github.com/repos/BurntSushi/ripgrep/contents/{+path}","compare_url":"https://api.github.com/repos/BurntSushi/ripgrep/compare/{base}...{head}","merges_url":"https://api.github.com/repos/BurntSushi/ripgrep/merges","archive_url":"https://api.github.com/repos/BurntSushi/ripgrep/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/BurntSushi/ripgrep/downloads","issues_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues{/number}","pulls_url":"https://api.github.com/repos/BurntSushi/ripgrep/pulls{/number}","milestones_url":"https://api.github.com/repos/BurntSushi/ripgrep/milestones{/number}","notifications_url":"https://api.github.com/repos/BurntSushi/ripgrep/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/labels{/name}","releases_url":"https://api.github.com/repos/BurntSushi/ripgrep/releases{/id}","deployments_url":"https://api.github.com/repos/BurntSushi/ripgrep/deployments","created_at":"2016-03-11T02:02:33Z","updated_at":"2025-11-09T23:50:59Z","pushed_at":"2025-10-30T17:30:23Z","git_url":"git://github.com/BurntSushi/ripgrep.git","ssh_url":"git@github.com:BurntSushi/ripgrep.git","clone_url":"https://github.com/BurntSushi/ripgrep.git","svn_url":"https://github.com/BurntSushi/ripgrep","homepage":"","size":5534,"stargazers_count":57154,"watchers_count":57154,"language":"Rust","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2304,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":88,"license":{"key":"unlicense","name":"The Unlicense","spdx_id":"Unlicense","url":"https://api.github.com/licenses/unlicense","node_id":"MDc6TGljZW5zZTE1"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["cli","command-line","command-line-tool","gitignore","grep","recursively-search","regex","ripgrep","rust","search"],"visibility":"public","forks":2304,"open_issues":88,"watchers":57154,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"I know this has been discussed here before. I'm not really sure what I'm expecting to happen, but I do want to add some thoughts to the conversation.\r\n\r\nI've seen a lot of developers get bit by `grep`'s behavior of returning `1` when there are no matches, and I have personally had to work around this more times than I care to remember. So, I was sad to see this \"feature\" was replicated by `ripgrep`. I understand it can be useful in the following use case:\r\n\r\n```bash\r\nif rg -q foo file; then\r\n    echo matched\r\nfi\r\n```\r\nIMO, there is a better way to handle this specific case. I'm not aware of other use cases, so it would be interesting to learn about them if they exist.\r\n\r\n## The problem with returning `1`\r\n\r\nThe root of the problem with returning `1` for no matches is that \"no matches\" is a perfectly normal and successful result for a search, but various aspects of shell scripting assume any non-zero return code is an error. This has a few annoying manifestations, but at a high level means error handing with `grep`/`ripgrep` is now more complicated. As error handling is highly desirable in reliable software, using these tools can introduce bugs because they don't follow the \"non-zero return code is an error\" convention. Some examples:\r\n\r\n### 1. bailing out with `-e`\r\n\r\nOne very common pattern for handling errors in scripts is to set the `-e` option. This causes the script to terminate in the event of any error encountered in the script. This isn't a great way to do error handling, but it does at least prevent your script from doing dumb things if a step in the middle fails. Because `ripgrep` returns `1` for no matches, you cannot use it in a script with `-e` set. I've seen this bite a lot of devs, as scripts appear to work normally, but sometimes fail silently for no obvious reason with no error output. The reason is that a `grep` somewhere had no matches.\r\n\r\n### 2. propagating errors with `-o pipefail`\r\n\r\nSimilarly, one can bail out of a series of piped commands if one of them fails by setting `-o pipefail`. This is very useful because you often otherwise end up propagating an empty string through your piped commands, again leading to silent failures that are not obvious. Because `ripgrep` returns `1` for no matches, you cannot use it in a series of piped commands with `-o pipefail` enabled. You can work around it by splitting your code, but the result is very ugly.\r\n\r\n```bash\r\n# without pipefail\r\n\r\nresults=\"$(rg 'foo' file-name.txt | sed 's/bar//' | sort | uniq -c | head)\"\r\n# $? == 0, even if file-name.txt does not exist\r\n# we can't handle (most) errors because we can't detect them\r\n\r\n# with pipefail\r\n\r\nset -o pipefail\r\n\r\nresults=\"$(rg 'foo' file-name.txt | sed 's/bar//' | sort | uniq -c | head)\"\r\n# $? == 1 if file-name.txt does not contain 'foo'; sed does not run\r\n# handing errors is impossible because we don't know where the `1` came from\r\n\r\n# so, we must split rg into its own execution, inefficiently spooling results into a variable\r\n# it's also very verbose\r\nmatches=\"$(rg 'foo' file-name.txt)\"\r\nrc=\"$?\"\r\nif [[ \"$rc\" -gt \"1\" ]]; then\r\n   exit \"$rc\"\r\nfi\r\n\r\nresults=\"$(echo \"$matches\" | sed 's/bar//' | sort | uniq -c | head)\"\r\n# now I can handle errors with $?\r\n```\r\n\r\n## Alternatives\r\n\r\nIf the only use case for returning `1` for no matches is so `ripgrep` can be used in conditionals, why not have a flag specifically for that?\r\n\r\n```bash\r\n# instead of this:\r\nif rg -q foo file; then\r\n    echo matched\r\nfi\r\n\r\n# why not this:\r\nif rg --matches foo file; then\r\n    echo matched\r\nfi\r\n```\r\n\r\nMaybe I'm missing another use case, but it seems to me you would never use `-q` unless you were going to look at the return code. So rather than having a flag that works with the normal return codes indirectly to get what you want (`-q`), why not have a flag that specifically handles the conditional use case? E.g. `ripgrep` normally returns `0` on success and non-`0` on error; passing it `--matches` (or whatever you want to call it) suppresses output and changes the return code to be `0` for one or more matches and `1` for no matches. You can then remove `-q`.\r\n\r\n## Related\r\n\r\nThis is most closely related to https://github.com/BurntSushi/ripgrep/issues/1290. See also: https://github.com/BurntSushi/ripgrep/issues/948 and https://github.com/BurntSushi/ripgrep/issues/1159.\r\n","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2500/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2500/timeline","performed_via_github_app":null,"state_reason":"not_planned"}},"event":"cross-referenced"},{"id":13413906608,"node_id":"REFE_lADOAzJbyc4XvM0fzwAAAAMfh_iw","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/13413906608","actor":{"login":"kyagi","id":90729,"node_id":"MDQ6VXNlcjkwNzI5","avatar_url":"https://avatars.githubusercontent.com/u/90729?v=4","gravatar_id":"","url":"https://api.github.com/users/kyagi","html_url":"https://github.com/kyagi","followers_url":"https://api.github.com/users/kyagi/followers","following_url":"https://api.github.com/users/kyagi/following{/other_user}","gists_url":"https://api.github.com/users/kyagi/gists{/gist_id}","starred_url":"https://api.github.com/users/kyagi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kyagi/subscriptions","organizations_url":"https://api.github.com/users/kyagi/orgs","repos_url":"https://api.github.com/users/kyagi/repos","events_url":"https://api.github.com/users/kyagi/events{/privacy}","received_events_url":"https://api.github.com/users/kyagi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"f3164f2615ce18d3ea7b5ce122dfe2a381d1b3f4","commit_url":"https://api.github.com/repos/kyagi/ripgrep/commits/f3164f2615ce18d3ea7b5ce122dfe2a381d1b3f4","created_at":"2024-07-07T11:30:01Z","performed_via_github_app":null}]