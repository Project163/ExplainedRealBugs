{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1721","repository_url":"https://api.github.com/repos/BurntSushi/ripgrep","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1721/labels{/name}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1721/comments","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1721/events","html_url":"https://github.com/BurntSushi/ripgrep/issues/1721","id":733931935,"node_id":"MDU6SXNzdWU3MzM5MzE5MzU=","number":1721,"title":"unresolved import `crate::arch::x86_64::__m64`","user":{"login":"jerryc05","id":8305074,"node_id":"MDQ6VXNlcjgzMDUwNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/8305074?v=4","gravatar_id":"","url":"https://api.github.com/users/jerryc05","html_url":"https://github.com/jerryc05","followers_url":"https://api.github.com/users/jerryc05/followers","following_url":"https://api.github.com/users/jerryc05/following{/other_user}","gists_url":"https://api.github.com/users/jerryc05/gists{/gist_id}","starred_url":"https://api.github.com/users/jerryc05/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jerryc05/subscriptions","organizations_url":"https://api.github.com/users/jerryc05/orgs","repos_url":"https://api.github.com/users/jerryc05/repos","events_url":"https://api.github.com/users/jerryc05/events{/privacy}","received_events_url":"https://api.github.com/users/jerryc05/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":339721678,"node_id":"MDU6TGFiZWwzMzk3MjE2Nzg=","url":"https://api.github.com/repos/BurntSushi/ripgrep/labels/bug","name":"bug","color":"fc2929","default":true,"description":"A bug."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2020-11-01T10:28:18Z","updated_at":"2020-11-02T15:52:54Z","closed_at":"2020-11-02T15:52:53Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Just a short note, `packed_simd` has a known break on Windows 10. Please see this issue: https://github.com/rust-lang/packed_simd/issues/308\r\n\r\nThe workaround is not so simple. We might have to modify the version of `encoding_rs` dependency to `encoding_rs = { git = \"https://github.com/hsivonen/encoding_rs\" }` in both these files:\r\n- `crates/searcher/Cargo.toml`\r\n- `encoding_rs_io` src in cargo cache\r\n\r\n\r\nThe error log of `RUSTFLAGS=\"-C target-cpu=native\" cargo build --release --features 'simd-accel'` is:\r\n```\r\nerror[E0432]: unresolved import `crate::arch::x86_64::__m64`\r\n  --> /home/***/.cargo/registry/src/github.com-1ecc6299db9ec823/packed_simd-0.3.3/src/api/into_bits/arch_specific.rs:51:15\r\n   |\r\n51 |               $($arch_ty),*\r\n   |                 ^^^^^^^^ no `__m64` in `arch::x86_64`\r\n...\r\n86 | / impl_arch!(\r\n87 | |     [x86[\"x86\"]: __m64], [x86_64[\"x86_64\"]: __m64],\r\n88 | |     [arm[\"arm\"]: int8x8_t, uint8x8_t, poly8x8_t, int16x4_t, uint16x4_t,\r\n89 | |      poly16x4_t, int32x2_t, uint32x2_t, float32x2_t, int64x1_t,\r\n...  |\r\n96 | |     test: test_v64\r\n97 | | );\r\n   | |__- in this macro invocation\r\n   |\r\n   = note: this error originates in a macro (in Nightly builds, run with -Z macro-backtrace for more info)\r\n\r\nerror[E0432]: unresolved import `crate::arch::x86_64::_mm_movemask_pi8`\r\n  --> /home/***/.cargo/registry/src/github.com-1ecc6299db9ec823/packed_simd-0.3.3/src/codegen/reductions/mask/x86/sse.rs:47:21\r\n   |\r\n47 |                 use crate::arch::x86_64::_mm_movemask_pi8;\r\n   |                     ^^^^^^^^^^^^^^^^^^^^^----------------\r\n   |                     |                    |\r\n   |                     |                    help: a similar name exists in the module: `_mm_movemask_epi8`\r\n   |                     no `_mm_movemask_pi8` in `arch::x86_64`\r\n   |\r\n  ::: /home/***/.cargo/registry/src/github.com-1ecc6299db9ec823/packed_simd-0.3.3/src/codegen/reductions/mask.rs:41:1\r\n   |\r\n41 | impl_mask_reductions!(m8x8);\r\n   | ---------------------------- in this macro invocation\r\n   |\r\n   = note: this error originates in a macro (in Nightly builds, run with -Z macro-backtrace for more info)\r\n\r\nerror[E0432]: unresolved import `crate::arch::x86_64::_mm_movemask_pi8`\r\n  --> /home/***/.cargo/registry/src/github.com-1ecc6299db9ec823/packed_simd-0.3.3/src/codegen/reductions/mask/x86/sse.rs:62:21\r\n   |\r\n62 |                 use crate::arch::x86_64::_mm_movemask_pi8;\r\n   |                     ^^^^^^^^^^^^^^^^^^^^^----------------\r\n   |                     |                    |\r\n   |                     |                    help: a similar name exists in the module: `_mm_movemask_epi8`\r\n   |                     no `_mm_movemask_pi8` in `arch::x86_64`\r\n   |\r\n  ::: /home/***/.cargo/registry/src/github.com-1ecc6299db9ec823/packed_simd-0.3.3/src/codegen/reductions/mask.rs:41:1\r\n   |\r\n41 | impl_mask_reductions!(m8x8);\r\n   | ---------------------------- in this macro invocation\r\n   |\r\n   = note: this error originates in a macro (in Nightly builds, run with -Z macro-backtrace for more info)\r\n\r\nerror[E0432]: unresolved import `crate::arch::x86_64::_mm_movemask_pi8`\r\n  --> /home/***/.cargo/registry/src/github.com-1ecc6299db9ec823/packed_simd-0.3.3/src/codegen/reductions/mask/x86/sse.rs:47:21\r\n   |\r\n47 |                 use crate::arch::x86_64::_mm_movemask_pi8;\r\n   |                     ^^^^^^^^^^^^^^^^^^^^^----------------\r\n   |                     |                    |\r\n   |                     |                    help: a similar name exists in the module: `_mm_movemask_epi8`\r\n   |                     no `_mm_movemask_pi8` in `arch::x86_64`\r\n   |\r\n  ::: /home/***/.cargo/registry/src/github.com-1ecc6299db9ec823/packed_simd-0.3.3/src/codegen/reductions/mask.rs:47:1\r\n   |\r\n47 | impl_mask_reductions!(m16x4);\r\n   | ----------------------------- in this macro invocation\r\n   |\r\n   = note: this error originates in a macro (in Nightly builds, run with -Z macro-backtrace for more info)\r\n\r\nerror[E0432]: unresolved import `crate::arch::x86_64::_mm_movemask_pi8`\r\n  --> /home/***/.cargo/registry/src/github.com-1ecc6299db9ec823/packed_simd-0.3.3/src/codegen/reductions/mask/x86/sse.rs:62:21\r\n   |\r\n62 |                 use crate::arch::x86_64::_mm_movemask_pi8;\r\n   |                     ^^^^^^^^^^^^^^^^^^^^^----------------\r\n   |                     |                    |\r\n   |                     |                    help: a similar name exists in the module: `_mm_movemask_epi8`\r\n   |                     no `_mm_movemask_pi8` in `arch::x86_64`\r\n   |\r\n  ::: /home/***/.cargo/registry/src/github.com-1ecc6299db9ec823/packed_simd-0.3.3/src/codegen/reductions/mask.rs:47:1\r\n   |\r\n47 | impl_mask_reductions!(m16x4);\r\n   | ----------------------------- in this macro invocation\r\n   |\r\n   = note: this error originates in a macro (in Nightly builds, run with -Z macro-backtrace for more info)\r\n\r\nerror[E0432]: unresolved import `crate::arch::x86_64::_mm_movemask_pi8`\r\n  --> /home/***/.cargo/registry/src/github.com-1ecc6299db9ec823/packed_simd-0.3.3/src/codegen/reductions/mask/x86/sse.rs:47:21\r\n   |\r\n47 |                 use crate::arch::x86_64::_mm_movemask_pi8;\r\n   |                     ^^^^^^^^^^^^^^^^^^^^^----------------\r\n   |                     |                    |\r\n   |                     |                    help: a similar name exists in the module: `_mm_movemask_epi8`\r\n   |                     no `_mm_movemask_pi8` in `arch::x86_64`\r\n   |\r\n  ::: /home/***/.cargo/registry/src/github.com-1ecc6299db9ec823/packed_simd-0.3.3/src/codegen/reductions/mask.rs:52:1\r\n   |\r\n52 | impl_mask_reductions!(m32x2);\r\n   | ----------------------------- in this macro invocation\r\n   |\r\n   = note: this error originates in a macro (in Nightly builds, run with -Z macro-backtrace for more info)\r\n\r\nerror[E0432]: unresolved import `crate::arch::x86_64::_mm_movemask_pi8`\r\n  --> /home/***/.cargo/registry/src/github.com-1ecc6299db9ec823/packed_simd-0.3.3/src/codegen/reductions/mask/x86/sse.rs:62:21\r\n   |\r\n62 |                 use crate::arch::x86_64::_mm_movemask_pi8;\r\n   |                     ^^^^^^^^^^^^^^^^^^^^^----------------\r\n   |                     |                    |\r\n   |                     |                    help: a similar name exists in the module: `_mm_movemask_epi8`\r\n   |                     no `_mm_movemask_pi8` in `arch::x86_64`\r\n   |\r\n  ::: /home/***/.cargo/registry/src/github.com-1ecc6299db9ec823/packed_simd-0.3.3/src/codegen/reductions/mask.rs:52:1\r\n   |\r\n52 | impl_mask_reductions!(m32x2);\r\n   | ----------------------------- in this macro invocation\r\n   |\r\n   = note: this error originates in a macro (in Nightly builds, run with -Z macro-backtrace for more info)\r\n\r\nerror[E0432]: unresolved import `crate::arch::x86_64::_mm_shuffle_pi8`\r\n   --> /home/***/.cargo/registry/src/github.com-1ecc6299db9ec823/packed_simd-0.3.3/src/codegen/shuffle1_dyn.rs:40:29\r\n    |\r\n40  |                         use crate::arch::x86_64::_mm_shuffle_pi8;\r\n    |                             ^^^^^^^^^^^^^^^^^^^^^---------------\r\n    |                             |                    |\r\n    |                             |                    help: a similar name exists in the module: `_mm_shuffle_epi8`\r\n    |                             no `_mm_shuffle_pi8` in `arch::x86_64`\r\n...\r\n297 | impl_shuffle1_dyn!(u8x8);\r\n    | ------------------------- in this macro invocation\r\n    |\r\n    = note: this error originates in a macro (in Nightly builds, run with -Z macro-backtrace for more info)\r\n```","closed_by":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1721/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1721/timeline","performed_via_github_app":null,"state_reason":"completed"}