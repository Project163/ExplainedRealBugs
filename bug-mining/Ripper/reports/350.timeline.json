[{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/1368259462","html_url":"https://github.com/BurntSushi/ripgrep/issues/2386#issuecomment-1368259462","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2386","id":1368259462,"node_id":"IC_kwDOAzJbyc5RjfuG","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-31T18:01:32Z","updated_at":"2022-12-31T18:01:32Z","body":"I don't think perf is relevant here, since building a glob from a string is quite expensive. Here are the things that will make a PR easier to merge:\r\n\r\n* Small change with tests.\r\n* No breaking changes.\r\n* Have someone with more experience with Serde APIs sign off on this. From your issue, I'm not actually totally sure whether this is a problem with how you're using Serde or if it's truly a problem with how Serde is impled in `globset. \r\n\r\n@LPGhatguy could you please review this? You're the one who originally added Serde support to `globset`.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/1368259462/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":8132922767,"node_id":"MEE_lADOAzJbyc5aT6vOzwAAAAHkwo2P","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/8132922767","actor":{"login":"LPGhatguy","id":654598,"node_id":"MDQ6VXNlcjY1NDU5OA==","avatar_url":"https://avatars.githubusercontent.com/u/654598?v=4","gravatar_id":"","url":"https://api.github.com/users/LPGhatguy","html_url":"https://github.com/LPGhatguy","followers_url":"https://api.github.com/users/LPGhatguy/followers","following_url":"https://api.github.com/users/LPGhatguy/following{/other_user}","gists_url":"https://api.github.com/users/LPGhatguy/gists{/gist_id}","starred_url":"https://api.github.com/users/LPGhatguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LPGhatguy/subscriptions","organizations_url":"https://api.github.com/users/LPGhatguy/orgs","repos_url":"https://api.github.com/users/LPGhatguy/repos","events_url":"https://api.github.com/users/LPGhatguy/events{/privacy}","received_events_url":"https://api.github.com/users/LPGhatguy/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-12-31T18:01:32Z","performed_via_github_app":null},{"id":8132922770,"node_id":"SE_lADOAzJbyc5aT6vOzwAAAAHkwo2S","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/8132922770","actor":{"login":"LPGhatguy","id":654598,"node_id":"MDQ6VXNlcjY1NDU5OA==","avatar_url":"https://avatars.githubusercontent.com/u/654598?v=4","gravatar_id":"","url":"https://api.github.com/users/LPGhatguy","html_url":"https://github.com/LPGhatguy","followers_url":"https://api.github.com/users/LPGhatguy/followers","following_url":"https://api.github.com/users/LPGhatguy/following{/other_user}","gists_url":"https://api.github.com/users/LPGhatguy/gists{/gist_id}","starred_url":"https://api.github.com/users/LPGhatguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LPGhatguy/subscriptions","organizations_url":"https://api.github.com/users/LPGhatguy/orgs","repos_url":"https://api.github.com/users/LPGhatguy/repos","events_url":"https://api.github.com/users/LPGhatguy/events{/privacy}","received_events_url":"https://api.github.com/users/LPGhatguy/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-12-31T18:01:33Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/1368431571","html_url":"https://github.com/BurntSushi/ripgrep/issues/2386#issuecomment-1368431571","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2386","id":1368431571,"node_id":"IC_kwDOAzJbyc5RkJvT","user":{"login":"jeertmans","id":27275099,"node_id":"MDQ6VXNlcjI3Mjc1MDk5","avatar_url":"https://avatars.githubusercontent.com/u/27275099?v=4","gravatar_id":"","url":"https://api.github.com/users/jeertmans","html_url":"https://github.com/jeertmans","followers_url":"https://api.github.com/users/jeertmans/followers","following_url":"https://api.github.com/users/jeertmans/following{/other_user}","gists_url":"https://api.github.com/users/jeertmans/gists{/gist_id}","starred_url":"https://api.github.com/users/jeertmans/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeertmans/subscriptions","organizations_url":"https://api.github.com/users/jeertmans/orgs","repos_url":"https://api.github.com/users/jeertmans/repos","events_url":"https://api.github.com/users/jeertmans/events{/privacy}","received_events_url":"https://api.github.com/users/jeertmans/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-01T12:20:17Z","updated_at":"2023-01-01T12:20:17Z","body":"Thanks for the quick reply!\r\n\r\nAfter comparing with what is done in the [`regex_serde` crate](https://github.com/tailhook/serde-regex/blob/336bb456ecd146ba9e3fcc2fef71870f603d72c5/src/lib.rs#L179-L191), I changed from `String` to `Cow<str>`, in the hope (?) to avoid unnecessary copy.\r\n\r\nI created a runnable example that illustrates the error, and how using a different deserialize function can solve it: see https://www.rustexplorer.com/b/qagwmp.\r\n\r\nThe code is reproduced here:\r\n\r\n```rust\r\n/*\r\n[dependencies]\r\nserde = { version = \"1\", features = [\"derive\"] }\r\nglobset = { version = \"0.4.9\", features = [\"serde1\"] }\r\ntoml = \"0.5.10\"\r\n*/\r\n\r\nuse globset::Glob;\r\nuse serde::{Deserialize, Deserializer};\r\n\r\n#[derive(Debug, Deserialize)]\r\nstruct S {\r\n    // (un)comment the following line to see the error\r\n    //#[serde(deserialize_with = \"deserialize_glob\")]\r\n    #[allow(unused)]\r\n    glob: Glob,\r\n}\r\n\r\n#[allow(unused)]\r\nfn deserialize_glob<'de, D: Deserializer<'de>>(\r\n    deserializer: D,\r\n) -> std::result::Result<Glob, D::Error> {\r\n    use serde::de::Error;\r\n    use std::borrow::Cow;\r\n    let glob = <Cow<str> as Deserialize>::deserialize(deserializer)?;\r\n\r\n    Glob::new(&glob).map_err(D::Error::custom)\r\n}\r\n\r\nfn main() -> Result<(), Box<dyn std::error::Error>> {\r\n    let string = \"glob = '*.md'\";\r\n\r\n    // Parse toml from borrowed string into S\r\n    let _: S = toml::from_str(string)?;\r\n\r\n    // Parse toml from borrowed string into intermediate toml::Value\r\n    let v: toml::Value = toml::from_str(string)?;\r\n\r\n    // Convert toml::Value into S\r\n    //   will fail without custom deserialize function\r\n    //   because v owns the String\r\n    let _: S = v.try_into()?;\r\n\r\n    Ok(())\r\n}\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/1368431571/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jeertmans","id":27275099,"node_id":"MDQ6VXNlcjI3Mjc1MDk5","avatar_url":"https://avatars.githubusercontent.com/u/27275099?v=4","gravatar_id":"","url":"https://api.github.com/users/jeertmans","html_url":"https://github.com/jeertmans","followers_url":"https://api.github.com/users/jeertmans/followers","following_url":"https://api.github.com/users/jeertmans/following{/other_user}","gists_url":"https://api.github.com/users/jeertmans/gists{/gist_id}","starred_url":"https://api.github.com/users/jeertmans/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeertmans/subscriptions","organizations_url":"https://api.github.com/users/jeertmans/orgs","repos_url":"https://api.github.com/users/jeertmans/repos","events_url":"https://api.github.com/users/jeertmans/events{/privacy}","received_events_url":"https://api.github.com/users/jeertmans/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"jeertmans","id":27275099,"node_id":"MDQ6VXNlcjI3Mjc1MDk5","avatar_url":"https://avatars.githubusercontent.com/u/27275099?v=4","gravatar_id":"","url":"https://api.github.com/users/jeertmans","html_url":"https://github.com/jeertmans","followers_url":"https://api.github.com/users/jeertmans/followers","following_url":"https://api.github.com/users/jeertmans/following{/other_user}","gists_url":"https://api.github.com/users/jeertmans/gists{/gist_id}","starred_url":"https://api.github.com/users/jeertmans/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeertmans/subscriptions","organizations_url":"https://api.github.com/users/jeertmans/orgs","repos_url":"https://api.github.com/users/jeertmans/repos","events_url":"https://api.github.com/users/jeertmans/events{/privacy}","received_events_url":"https://api.github.com/users/jeertmans/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-01T13:35:46Z","updated_at":"2023-01-01T13:35:46Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2388","repository_url":"https://api.github.com/repos/BurntSushi/ripgrep","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2388/labels{/name}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2388/comments","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2388/events","html_url":"https://github.com/BurntSushi/ripgrep/pull/2388","id":1515570007,"node_id":"PR_kwDOAzJbyc5Gcc1D","number":2388,"title":"fix(globset/serde1): allow deserializing owned strings into `Glob`","user":{"login":"jeertmans","id":27275099,"node_id":"MDQ6VXNlcjI3Mjc1MDk5","avatar_url":"https://avatars.githubusercontent.com/u/27275099?v=4","gravatar_id":"","url":"https://api.github.com/users/jeertmans","html_url":"https://github.com/jeertmans","followers_url":"https://api.github.com/users/jeertmans/followers","following_url":"https://api.github.com/users/jeertmans/following{/other_user}","gists_url":"https://api.github.com/users/jeertmans/gists{/gist_id}","starred_url":"https://api.github.com/users/jeertmans/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeertmans/subscriptions","organizations_url":"https://api.github.com/users/jeertmans/orgs","repos_url":"https://api.github.com/users/jeertmans/repos","events_url":"https://api.github.com/users/jeertmans/events{/privacy}","received_events_url":"https://api.github.com/users/jeertmans/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1849506066,"node_id":"MDU6TGFiZWwxODQ5NTA2MDY2","url":"https://api.github.com/repos/BurntSushi/ripgrep/labels/rollup","name":"rollup","color":"ffccee","default":false,"description":"A PR that has been merged with many others in a rollup."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2023-01-01T13:35:46Z","updated_at":"2023-09-10T20:37:30Z","closed_at":"2023-07-08T22:52:56Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"repository":{"id":53631945,"node_id":"MDEwOlJlcG9zaXRvcnk1MzYzMTk0NQ==","name":"ripgrep","full_name":"BurntSushi/ripgrep","private":false,"owner":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/BurntSushi/ripgrep","description":"ripgrep recursively searches directories for a regex pattern while respecting your gitignore","fork":false,"url":"https://api.github.com/repos/BurntSushi/ripgrep","forks_url":"https://api.github.com/repos/BurntSushi/ripgrep/forks","keys_url":"https://api.github.com/repos/BurntSushi/ripgrep/keys{/key_id}","collaborators_url":"https://api.github.com/repos/BurntSushi/ripgrep/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/BurntSushi/ripgrep/teams","hooks_url":"https://api.github.com/repos/BurntSushi/ripgrep/hooks","issue_events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events{/number}","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/events","assignees_url":"https://api.github.com/repos/BurntSushi/ripgrep/assignees{/user}","branches_url":"https://api.github.com/repos/BurntSushi/ripgrep/branches{/branch}","tags_url":"https://api.github.com/repos/BurntSushi/ripgrep/tags","blobs_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/refs{/sha}","trees_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/trees{/sha}","statuses_url":"https://api.github.com/repos/BurntSushi/ripgrep/statuses/{sha}","languages_url":"https://api.github.com/repos/BurntSushi/ripgrep/languages","stargazers_url":"https://api.github.com/repos/BurntSushi/ripgrep/stargazers","contributors_url":"https://api.github.com/repos/BurntSushi/ripgrep/contributors","subscribers_url":"https://api.github.com/repos/BurntSushi/ripgrep/subscribers","subscription_url":"https://api.github.com/repos/BurntSushi/ripgrep/subscription","commits_url":"https://api.github.com/repos/BurntSushi/ripgrep/commits{/sha}","git_commits_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/commits{/sha}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/comments{/number}","issue_comment_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments{/number}","contents_url":"https://api.github.com/repos/BurntSushi/ripgrep/contents/{+path}","compare_url":"https://api.github.com/repos/BurntSushi/ripgrep/compare/{base}...{head}","merges_url":"https://api.github.com/repos/BurntSushi/ripgrep/merges","archive_url":"https://api.github.com/repos/BurntSushi/ripgrep/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/BurntSushi/ripgrep/downloads","issues_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues{/number}","pulls_url":"https://api.github.com/repos/BurntSushi/ripgrep/pulls{/number}","milestones_url":"https://api.github.com/repos/BurntSushi/ripgrep/milestones{/number}","notifications_url":"https://api.github.com/repos/BurntSushi/ripgrep/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/labels{/name}","releases_url":"https://api.github.com/repos/BurntSushi/ripgrep/releases{/id}","deployments_url":"https://api.github.com/repos/BurntSushi/ripgrep/deployments","created_at":"2016-03-11T02:02:33Z","updated_at":"2025-11-09T23:50:59Z","pushed_at":"2025-10-30T17:30:23Z","git_url":"git://github.com/BurntSushi/ripgrep.git","ssh_url":"git@github.com:BurntSushi/ripgrep.git","clone_url":"https://github.com/BurntSushi/ripgrep.git","svn_url":"https://github.com/BurntSushi/ripgrep","homepage":"","size":5534,"stargazers_count":57154,"watchers_count":57154,"language":"Rust","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2304,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":88,"license":{"key":"unlicense","name":"The Unlicense","spdx_id":"Unlicense","url":"https://api.github.com/licenses/unlicense","node_id":"MDc6TGljZW5zZTE1"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["cli","command-line","command-line-tool","gitignore","grep","recursively-search","regex","ripgrep","rust","search"],"visibility":"public","forks":2304,"open_issues":88,"watchers":57154,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/pulls/2388","html_url":"https://github.com/BurntSushi/ripgrep/pull/2388","diff_url":"https://github.com/BurntSushi/ripgrep/pull/2388.diff","patch_url":"https://github.com/BurntSushi/ripgrep/pull/2388.patch","merged_at":null},"body":"This PR modifies how `Glob` is deserialized such that it now allows for owned strings (previously, only borrowed) to be deserialized into `Glob`. This takes inspiration from what is done in the [`regex_serde` crate](https://github.com/tailhook/serde-regex/blob/336bb456ecd146ba9e3fcc2fef71870f603d72c5/src/lib.rs#L179-L191).\r\n\r\nFor more details, see the discussion in #2386.\r\n\r\nThe first commit includes tests, which fail without the solution.\r\nThe second commit include the solution.\r\n\r\nThis fixes #2386.\r\n\r\nI'd be happy to hear from your thoughts and I'm open to any review :-)","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2388/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2388/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/1374712436","html_url":"https://github.com/BurntSushi/ripgrep/issues/2386#issuecomment-1374712436","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2386","id":1374712436,"node_id":"IC_kwDOAzJbyc5R8HJ0","user":{"login":"LPGhatguy","id":654598,"node_id":"MDQ6VXNlcjY1NDU5OA==","avatar_url":"https://avatars.githubusercontent.com/u/654598?v=4","gravatar_id":"","url":"https://api.github.com/users/LPGhatguy","html_url":"https://github.com/LPGhatguy","followers_url":"https://api.github.com/users/LPGhatguy/followers","following_url":"https://api.github.com/users/LPGhatguy/following{/other_user}","gists_url":"https://api.github.com/users/LPGhatguy/gists{/gist_id}","starred_url":"https://api.github.com/users/LPGhatguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LPGhatguy/subscriptions","organizations_url":"https://api.github.com/users/LPGhatguy/orgs","repos_url":"https://api.github.com/users/LPGhatguy/repos","events_url":"https://api.github.com/users/LPGhatguy/events{/privacy}","received_events_url":"https://api.github.com/users/LPGhatguy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-08T05:19:31Z","updated_at":"2023-01-08T05:19:31Z","body":"Based on how [`serde::Deserialize` is implemented for `Cow<'a, T>`](https://docs.rs/serde/latest/src/serde/de/impls.rs.html#1822-1834), I don't think that using `Cow<str>` will behave any differently than `String`.\r\n\r\nI think the correct solution here is to implement our own visitor that handles both the borrowed and owned case. Always using the owned case (using `String` or `Cow<str>`) will always allocate, even when we don't need to.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/1374712436/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"LPGhatguy","id":654598,"node_id":"MDQ6VXNlcjY1NDU5OA==","avatar_url":"https://avatars.githubusercontent.com/u/654598?v=4","gravatar_id":"","url":"https://api.github.com/users/LPGhatguy","html_url":"https://github.com/LPGhatguy","followers_url":"https://api.github.com/users/LPGhatguy/followers","following_url":"https://api.github.com/users/LPGhatguy/following{/other_user}","gists_url":"https://api.github.com/users/LPGhatguy/gists{/gist_id}","starred_url":"https://api.github.com/users/LPGhatguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LPGhatguy/subscriptions","organizations_url":"https://api.github.com/users/LPGhatguy/orgs","repos_url":"https://api.github.com/users/LPGhatguy/repos","events_url":"https://api.github.com/users/LPGhatguy/events{/privacy}","received_events_url":"https://api.github.com/users/LPGhatguy/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/1374795584","html_url":"https://github.com/BurntSushi/ripgrep/issues/2386#issuecomment-1374795584","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2386","id":1374795584,"node_id":"IC_kwDOAzJbyc5R8bdA","user":{"login":"jeertmans","id":27275099,"node_id":"MDQ6VXNlcjI3Mjc1MDk5","avatar_url":"https://avatars.githubusercontent.com/u/27275099?v=4","gravatar_id":"","url":"https://api.github.com/users/jeertmans","html_url":"https://github.com/jeertmans","followers_url":"https://api.github.com/users/jeertmans/followers","following_url":"https://api.github.com/users/jeertmans/following{/other_user}","gists_url":"https://api.github.com/users/jeertmans/gists{/gist_id}","starred_url":"https://api.github.com/users/jeertmans/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeertmans/subscriptions","organizations_url":"https://api.github.com/users/jeertmans/orgs","repos_url":"https://api.github.com/users/jeertmans/repos","events_url":"https://api.github.com/users/jeertmans/events{/privacy}","received_events_url":"https://api.github.com/users/jeertmans/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-08T10:36:58Z","updated_at":"2023-01-08T10:36:58Z","body":"Hi @LPGhatguy, I have updated the PR accordingly :-)","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/1374795584/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jeertmans","id":27275099,"node_id":"MDQ6VXNlcjI3Mjc1MDk5","avatar_url":"https://avatars.githubusercontent.com/u/27275099?v=4","gravatar_id":"","url":"https://api.github.com/users/jeertmans","html_url":"https://github.com/jeertmans","followers_url":"https://api.github.com/users/jeertmans/followers","following_url":"https://api.github.com/users/jeertmans/following{/other_user}","gists_url":"https://api.github.com/users/jeertmans/gists{/gist_id}","starred_url":"https://api.github.com/users/jeertmans/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeertmans/subscriptions","organizations_url":"https://api.github.com/users/jeertmans/orgs","repos_url":"https://api.github.com/users/jeertmans/repos","events_url":"https://api.github.com/users/jeertmans/events{/privacy}","received_events_url":"https://api.github.com/users/jeertmans/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":8176295876,"node_id":"MEE_lADOAzJbyc5aT6vOzwAAAAHnWF_E","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/8176295876","actor":{"login":"LPGhatguy","id":654598,"node_id":"MDQ6VXNlcjY1NDU5OA==","avatar_url":"https://avatars.githubusercontent.com/u/654598?v=4","gravatar_id":"","url":"https://api.github.com/users/LPGhatguy","html_url":"https://github.com/LPGhatguy","followers_url":"https://api.github.com/users/LPGhatguy/followers","following_url":"https://api.github.com/users/LPGhatguy/following{/other_user}","gists_url":"https://api.github.com/users/LPGhatguy/gists{/gist_id}","starred_url":"https://api.github.com/users/LPGhatguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LPGhatguy/subscriptions","organizations_url":"https://api.github.com/users/LPGhatguy/orgs","repos_url":"https://api.github.com/users/LPGhatguy/repos","events_url":"https://api.github.com/users/LPGhatguy/events{/privacy}","received_events_url":"https://api.github.com/users/LPGhatguy/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-01-08T10:36:59Z","performed_via_github_app":null},{"id":8176295877,"node_id":"SE_lADOAzJbyc5aT6vOzwAAAAHnWF_F","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/8176295877","actor":{"login":"LPGhatguy","id":654598,"node_id":"MDQ6VXNlcjY1NDU5OA==","avatar_url":"https://avatars.githubusercontent.com/u/654598?v=4","gravatar_id":"","url":"https://api.github.com/users/LPGhatguy","html_url":"https://github.com/LPGhatguy","followers_url":"https://api.github.com/users/LPGhatguy/followers","following_url":"https://api.github.com/users/LPGhatguy/following{/other_user}","gists_url":"https://api.github.com/users/LPGhatguy/gists{/gist_id}","starred_url":"https://api.github.com/users/LPGhatguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LPGhatguy/subscriptions","organizations_url":"https://api.github.com/users/LPGhatguy/orgs","repos_url":"https://api.github.com/users/LPGhatguy/repos","events_url":"https://api.github.com/users/LPGhatguy/events{/privacy}","received_events_url":"https://api.github.com/users/LPGhatguy/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-01-08T10:36:59Z","performed_via_github_app":null},{"actor":{"login":"epage","id":60961,"node_id":"MDQ6VXNlcjYwOTYx","avatar_url":"https://avatars.githubusercontent.com/u/60961?v=4","gravatar_id":"","url":"https://api.github.com/users/epage","html_url":"https://github.com/epage","followers_url":"https://api.github.com/users/epage/followers","following_url":"https://api.github.com/users/epage/following{/other_user}","gists_url":"https://api.github.com/users/epage/gists{/gist_id}","starred_url":"https://api.github.com/users/epage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/epage/subscriptions","organizations_url":"https://api.github.com/users/epage/orgs","repos_url":"https://api.github.com/users/epage/repos","events_url":"https://api.github.com/users/epage/events{/privacy}","received_events_url":"https://api.github.com/users/epage/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-18T20:13:10Z","updated_at":"2023-01-18T20:13:10Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/toml-rs/toml/issues/421","repository_url":"https://api.github.com/repos/toml-rs/toml","labels_url":"https://api.github.com/repos/toml-rs/toml/issues/421/labels{/name}","comments_url":"https://api.github.com/repos/toml-rs/toml/issues/421/comments","events_url":"https://api.github.com/repos/toml-rs/toml/issues/421/events","html_url":"https://github.com/toml-rs/toml/issues/421","id":1521019233,"node_id":"I_kwDOBbdZls5aqOlh","number":421,"title":"Incompatibility between `toml` and `toml_edit::easy`","user":{"login":"obsgolem","id":1786500,"node_id":"MDQ6VXNlcjE3ODY1MDA=","avatar_url":"https://avatars.githubusercontent.com/u/1786500?v=4","gravatar_id":"","url":"https://api.github.com/users/obsgolem","html_url":"https://github.com/obsgolem","followers_url":"https://api.github.com/users/obsgolem/followers","following_url":"https://api.github.com/users/obsgolem/following{/other_user}","gists_url":"https://api.github.com/users/obsgolem/gists{/gist_id}","starred_url":"https://api.github.com/users/obsgolem/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/obsgolem/subscriptions","organizations_url":"https://api.github.com/users/obsgolem/orgs","repos_url":"https://api.github.com/users/obsgolem/repos","events_url":"https://api.github.com/users/obsgolem/events{/privacy}","received_events_url":"https://api.github.com/users/obsgolem/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":637652781,"node_id":"MDU6TGFiZWw2Mzc2NTI3ODE=","url":"https://api.github.com/repos/toml-rs/toml/labels/C-bug","name":"C-bug","color":"f5f1fd","default":false,"description":"Category: Things not working as expected"},{"id":4568802907,"node_id":"LA_kwDOBbdZls8AAAABEFJmWw","url":"https://api.github.com/repos/toml-rs/toml/labels/A-serde","name":"A-serde","color":"f7e101","default":false,"description":"Area: Serde integration"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-01-05T16:26:59Z","updated_at":"2023-01-18T20:13:11Z","closed_at":"2023-01-18T20:13:10Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":95902102,"node_id":"MDEwOlJlcG9zaXRvcnk5NTkwMjEwMg==","name":"toml","full_name":"toml-rs/toml","private":false,"owner":{"login":"toml-rs","id":114176723,"node_id":"O_kgDOBs4y0w","avatar_url":"https://avatars.githubusercontent.com/u/114176723?v=4","gravatar_id":"","url":"https://api.github.com/users/toml-rs","html_url":"https://github.com/toml-rs","followers_url":"https://api.github.com/users/toml-rs/followers","following_url":"https://api.github.com/users/toml-rs/following{/other_user}","gists_url":"https://api.github.com/users/toml-rs/gists{/gist_id}","starred_url":"https://api.github.com/users/toml-rs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/toml-rs/subscriptions","organizations_url":"https://api.github.com/users/toml-rs/orgs","repos_url":"https://api.github.com/users/toml-rs/repos","events_url":"https://api.github.com/users/toml-rs/events{/privacy}","received_events_url":"https://api.github.com/users/toml-rs/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/toml-rs/toml","description":"Rust TOML Parser","fork":false,"url":"https://api.github.com/repos/toml-rs/toml","forks_url":"https://api.github.com/repos/toml-rs/toml/forks","keys_url":"https://api.github.com/repos/toml-rs/toml/keys{/key_id}","collaborators_url":"https://api.github.com/repos/toml-rs/toml/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/toml-rs/toml/teams","hooks_url":"https://api.github.com/repos/toml-rs/toml/hooks","issue_events_url":"https://api.github.com/repos/toml-rs/toml/issues/events{/number}","events_url":"https://api.github.com/repos/toml-rs/toml/events","assignees_url":"https://api.github.com/repos/toml-rs/toml/assignees{/user}","branches_url":"https://api.github.com/repos/toml-rs/toml/branches{/branch}","tags_url":"https://api.github.com/repos/toml-rs/toml/tags","blobs_url":"https://api.github.com/repos/toml-rs/toml/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/toml-rs/toml/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/toml-rs/toml/git/refs{/sha}","trees_url":"https://api.github.com/repos/toml-rs/toml/git/trees{/sha}","statuses_url":"https://api.github.com/repos/toml-rs/toml/statuses/{sha}","languages_url":"https://api.github.com/repos/toml-rs/toml/languages","stargazers_url":"https://api.github.com/repos/toml-rs/toml/stargazers","contributors_url":"https://api.github.com/repos/toml-rs/toml/contributors","subscribers_url":"https://api.github.com/repos/toml-rs/toml/subscribers","subscription_url":"https://api.github.com/repos/toml-rs/toml/subscription","commits_url":"https://api.github.com/repos/toml-rs/toml/commits{/sha}","git_commits_url":"https://api.github.com/repos/toml-rs/toml/git/commits{/sha}","comments_url":"https://api.github.com/repos/toml-rs/toml/comments{/number}","issue_comment_url":"https://api.github.com/repos/toml-rs/toml/issues/comments{/number}","contents_url":"https://api.github.com/repos/toml-rs/toml/contents/{+path}","compare_url":"https://api.github.com/repos/toml-rs/toml/compare/{base}...{head}","merges_url":"https://api.github.com/repos/toml-rs/toml/merges","archive_url":"https://api.github.com/repos/toml-rs/toml/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/toml-rs/toml/downloads","issues_url":"https://api.github.com/repos/toml-rs/toml/issues{/number}","pulls_url":"https://api.github.com/repos/toml-rs/toml/pulls{/number}","milestones_url":"https://api.github.com/repos/toml-rs/toml/milestones{/number}","notifications_url":"https://api.github.com/repos/toml-rs/toml/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/toml-rs/toml/labels{/name}","releases_url":"https://api.github.com/repos/toml-rs/toml/releases{/id}","deployments_url":"https://api.github.com/repos/toml-rs/toml/deployments","created_at":"2017-06-30T15:37:36Z","updated_at":"2025-11-06T12:59:09Z","pushed_at":"2025-11-03T17:46:19Z","git_url":"git://github.com/toml-rs/toml.git","ssh_url":"git@github.com:toml-rs/toml.git","clone_url":"https://github.com/toml-rs/toml.git","svn_url":"https://github.com/toml-rs/toml","homepage":"https://docs.rs/toml","size":4469,"stargazers_count":928,"watchers_count":928,"language":"Rust","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":134,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":58,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["rust","toml"],"visibility":"public","forks":134,"open_issues":58,"watchers":928,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"The following test crashes:\r\n\r\n```rust\r\nuse globset::Glob;\r\nuse serde::Deserialize;\r\n\r\n#[derive(Deserialize)]\r\nstruct Test {\r\n    foo: Vec<Glob>,\r\n}\r\n\r\nfn main() {\r\n    // let test = \"\\\"test\\\"\";\r\n    // let tmp = toml::de::from_str::<&str>(test).unwrap();\r\n    // let tmp2 = toml_edit::easy::from_str::<&str>(test).unwrap();\r\n\r\n    let text = r#\"foo=[\"hello\", \"world\"]\"#;\r\n    let tmp = toml::de::from_str::<Test>(text).unwrap();\r\n    let tmp2 = toml_edit::easy::from_str::<Test>(text).unwrap();\r\n}\r\n```\r\n\r\nWith the following `Cargo.toml` file\r\n\r\n```toml\r\n[package]\r\nedition = \"2021\"\r\nname = \"toml_repro\"\r\nversion = \"0.1.0\"\r\n\r\n# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\r\n\r\n[dependencies]\r\nglobset = {version = \"0.4.10\", features = [\"serde1\"]}\r\nserde = \"1.0.152\"\r\ntoml = \"0.5\"\r\ntoml_edit = {version = \"0.17.1\", features = [\"easy\", \"serde\"]}\r\n```\r\n\r\nThe crash occurs on line 16, showing that while `toml` can successfully deserialize into the `Glob`, `toml_edit::easy` cannot. This appears to be due to the implementation of `Deserialize` for `Glob` using `&str::deserialize` as opposed to `String::deserialize`.\r\n\r\nAnother incompatibility I found while trying to reproduce the issue: if you uncomment the commented lines in the code above, you will get a compiler error on line 12 but not on line 11. ","reactions":{"url":"https://api.github.com/repos/toml-rs/toml/issues/421/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/toml-rs/toml/issues/421/timeline","performed_via_github_app":null,"state_reason":"not_planned"}},"event":"cross-referenced"},{"id":9758045079,"node_id":"LE_lADOAzJbyc5aT6vOzwAAAAJFn_OX","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/9758045079","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-07-07T18:45:01Z","label":{"name":"rollup","color":"ffccee"},"performed_via_github_app":null},{"id":9766187008,"node_id":"REFE_lADOAzJbyc5aT6vOzwAAAAJGHDAA","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/9766187008","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"d8d79f5e2d16830b5dd01c788083e6300a1ab8ab","commit_url":"https://api.github.com/repos/BurntSushi/ripgrep/commits/d8d79f5e2d16830b5dd01c788083e6300a1ab8ab","created_at":"2023-07-08T22:26:19Z","performed_via_github_app":null},{"id":9766231566,"node_id":"CE_lADOAzJbyc5aT6vOzwAAAAJGHN4O","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/9766231566","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"d51c6c005aaac90329f61baa20821fafc96b841a","commit_url":"https://api.github.com/repos/BurntSushi/ripgrep/commits/d51c6c005aaac90329f61baa20821fafc96b841a","created_at":"2023-07-08T22:52:55Z","state_reason":null,"performed_via_github_app":null},{"id":11656581781,"node_id":"REFE_lADOAzJbyc5aT6vOzwAAAAK2yVKV","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/11656581781","actor":{"login":"liqipeng","id":6264774,"node_id":"MDQ6VXNlcjYyNjQ3NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/6264774?v=4","gravatar_id":"","url":"https://api.github.com/users/liqipeng","html_url":"https://github.com/liqipeng","followers_url":"https://api.github.com/users/liqipeng/followers","following_url":"https://api.github.com/users/liqipeng/following{/other_user}","gists_url":"https://api.github.com/users/liqipeng/gists{/gist_id}","starred_url":"https://api.github.com/users/liqipeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liqipeng/subscriptions","organizations_url":"https://api.github.com/users/liqipeng/orgs","repos_url":"https://api.github.com/users/liqipeng/repos","events_url":"https://api.github.com/users/liqipeng/events{/privacy}","received_events_url":"https://api.github.com/users/liqipeng/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"d51c6c005aaac90329f61baa20821fafc96b841a","commit_url":"https://api.github.com/repos/liqipeng/rust-ripgrep/commits/d51c6c005aaac90329f61baa20821fafc96b841a","created_at":"2024-01-31T14:27:39Z","performed_via_github_app":null}]