{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/553","repository_url":"https://api.github.com/repos/BurntSushi/ripgrep","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/553/labels{/name}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/553/comments","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/553/events","html_url":"https://github.com/BurntSushi/ripgrep/issues/553","id":242559014,"node_id":"MDU6SXNzdWUyNDI1NTkwMTQ=","number":553,"title":"Don't raise an error when a choose-one flag is specified repeatedly","user":{"login":"sarahgerweck","id":3421345,"node_id":"MDQ6VXNlcjM0MjEzNDU=","avatar_url":"https://avatars.githubusercontent.com/u/3421345?v=4","gravatar_id":"","url":"https://api.github.com/users/sarahgerweck","html_url":"https://github.com/sarahgerweck","followers_url":"https://api.github.com/users/sarahgerweck/followers","following_url":"https://api.github.com/users/sarahgerweck/following{/other_user}","gists_url":"https://api.github.com/users/sarahgerweck/gists{/gist_id}","starred_url":"https://api.github.com/users/sarahgerweck/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarahgerweck/subscriptions","organizations_url":"https://api.github.com/users/sarahgerweck/orgs","repos_url":"https://api.github.com/users/sarahgerweck/repos","events_url":"https://api.github.com/users/sarahgerweck/events{/privacy}","received_events_url":"https://api.github.com/users/sarahgerweck/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":339721680,"node_id":"MDU6TGFiZWwzMzk3MjE2ODA=","url":"https://api.github.com/repos/BurntSushi/ripgrep/labels/enhancement","name":"enhancement","color":"84b6eb","default":true,"description":"An enhancement to the functionality of the software."},{"id":339721683,"node_id":"MDU6TGFiZWwzMzk3MjE2ODM=","url":"https://api.github.com/repos/BurntSushi/ripgrep/labels/question","name":"question","color":"cc317c","default":true,"description":"An issue that is lacking clarity on one or more points."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2017-07-13T01:16:06Z","updated_at":"2018-02-06T00:51:25Z","closed_at":"2018-02-04T15:40:23Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"There is currently no way to set custom defaults for Ripgrep. The recommended practice is to set an alias instead. However, this is somewhat thwarted by the fact that Ripgrep is too aggressive in validating that you never repeat yourself. This also has other consequences.\r\n\r\nE.g., if you prefer smart case matching, you can make an alias like this:\r\n\r\n```\r\nalias rg='rg -S'\r\n```\r\n\r\nThis _mostly_ works, but it means that I now get an error if I ever execute any commands that include `-S` in them. Ripgrep give the error below:\r\n```\r\nerror: The argument '--smart-case' was provided more than once, but cannot be used multiple times\r\n```\r\n\r\nThis is undesirable behavior both when writing scripts and when trying to use aliases as defaults. Both scripts and aliases face the same problem: building up a complex command line by nesting contexts. This rule means that this process needs to be globally aware of all the outer contexts.\r\n\r\nI think it is much more common and more user friendly that commands like this use the last one specified for flags that are mutually exclusive, and don't raise errors if you specify the same flag twice. Otherwise, trying to build nontrivial command lines from variables or aliases is somewhat a nightmare.\r\n\r\nFortunately, it at least allows `rg -S -i`. I think this is a good example of why raising an error for `rg -S -S` is undesired behavior. The `rg -S -i` case is *more* overspecified than the `rg -S -S` case. Ultimately, the current rule doesn't actually protect you from any undesired behavior, but it does prevent useful use cases.","closed_by":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/553/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/553/timeline","performed_via_github_app":null,"state_reason":"completed"}