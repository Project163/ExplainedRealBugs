[{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/2381917510","html_url":"https://github.com/BurntSushi/ripgrep/issues/2906#issuecomment-2381917510","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2906","id":2381917510,"node_id":"IC_kwDOAzJbyc6N-S1G","user":{"login":"lolbinarycat","id":19915050,"node_id":"MDQ6VXNlcjE5OTE1MDUw","avatar_url":"https://avatars.githubusercontent.com/u/19915050?v=4","gravatar_id":"","url":"https://api.github.com/users/lolbinarycat","html_url":"https://github.com/lolbinarycat","followers_url":"https://api.github.com/users/lolbinarycat/followers","following_url":"https://api.github.com/users/lolbinarycat/following{/other_user}","gists_url":"https://api.github.com/users/lolbinarycat/gists{/gist_id}","starred_url":"https://api.github.com/users/lolbinarycat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lolbinarycat/subscriptions","organizations_url":"https://api.github.com/users/lolbinarycat/orgs","repos_url":"https://api.github.com/users/lolbinarycat/repos","events_url":"https://api.github.com/users/lolbinarycat/events{/privacy}","received_events_url":"https://api.github.com/users/lolbinarycat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-30T03:12:00Z","updated_at":"2024-09-30T03:12:00Z","body":"if this is too niche to spend your time fixing, i am a rust developer and would be willing to fix this.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/2381917510/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lolbinarycat","id":19915050,"node_id":"MDQ6VXNlcjE5OTE1MDUw","avatar_url":"https://avatars.githubusercontent.com/u/19915050?v=4","gravatar_id":"","url":"https://api.github.com/users/lolbinarycat","html_url":"https://github.com/lolbinarycat","followers_url":"https://api.github.com/users/lolbinarycat/followers","following_url":"https://api.github.com/users/lolbinarycat/following{/other_user}","gists_url":"https://api.github.com/users/lolbinarycat/gists{/gist_id}","starred_url":"https://api.github.com/users/lolbinarycat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lolbinarycat/subscriptions","organizations_url":"https://api.github.com/users/lolbinarycat/orgs","repos_url":"https://api.github.com/users/lolbinarycat/repos","events_url":"https://api.github.com/users/lolbinarycat/events{/privacy}","received_events_url":"https://api.github.com/users/lolbinarycat/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":14448352108,"node_id":"LE_lADOAzJbyc6YUMJezwAAAANdMFts","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/14448352108","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-09-30T03:17:17Z","label":{"name":"doc","color":"fbca04"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/2381928373","html_url":"https://github.com/BurntSushi/ripgrep/issues/2906#issuecomment-2381928373","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2906","id":2381928373,"node_id":"IC_kwDOAzJbyc6N-Ve1","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-30T03:25:04Z","updated_at":"2024-09-30T03:25:04Z","body":"I don't understand the use case. You mention quick wrapper scripts, but I don't really get it. I write lots of wrapper scripts, and it's easy to forward arguments from the wrapper script to a command run by that wrapper script. \r\n\r\nYou don't mention the expected behavior here. I guess you're expecting ripgrep to search it as if it were just a directory provided as an argument? Do other Unix commands do this? I've never seen this usage pattern before. \r\n\r\nThe way ripgrep works is that it looks for something resembling a file on stdin to search. And if it can't find a file (which it can't in this case), it searches the current working directory. This is actually a heuristic and this heuristic has caused lots of problems because it's common for things to pass something that looks like a file on stdin even when it's not really intended. So I'm very hesitant to change that heuristic. And your suggesting here would add a third case to that heuristic. \r\n\r\nI think at best the docs can be improved. The man page already mentions this behavior, although I suppose it could be slightly more precise to cover this case. But I'm not even sure this is worth doing because this seems so idiosyncratic to me. Maybe you can elaborate more.\r\n\r\n> if this is too niche to spend your time fixing, i am a rust developer and would be willing to fix this.\r\n\r\nNote that it's not just the initial effort here. It's also the ongoing maintenance burden that stuff like this adds. Especially to what is already a finicky heuristic.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/2381928373/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/2381972493","html_url":"https://github.com/BurntSushi/ripgrep/issues/2906#issuecomment-2381972493","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2906","id":2381972493,"node_id":"IC_kwDOAzJbyc6N-gQN","user":{"login":"lolbinarycat","id":19915050,"node_id":"MDQ6VXNlcjE5OTE1MDUw","avatar_url":"https://avatars.githubusercontent.com/u/19915050?v=4","gravatar_id":"","url":"https://api.github.com/users/lolbinarycat","html_url":"https://github.com/lolbinarycat","followers_url":"https://api.github.com/users/lolbinarycat/followers","following_url":"https://api.github.com/users/lolbinarycat/following{/other_user}","gists_url":"https://api.github.com/users/lolbinarycat/gists{/gist_id}","starred_url":"https://api.github.com/users/lolbinarycat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lolbinarycat/subscriptions","organizations_url":"https://api.github.com/users/lolbinarycat/orgs","repos_url":"https://api.github.com/users/lolbinarycat/repos","events_url":"https://api.github.com/users/lolbinarycat/events{/privacy}","received_events_url":"https://api.github.com/users/lolbinarycat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-30T04:15:57Z","updated_at":"2024-09-30T04:15:57Z","body":"> I don't understand the use case. You mention quick wrapper scripts, but I don't really get it. I write lots of wrapper scripts, and it's easy to forward arguments from the wrapper script to a command run by that wrapper script.\r\n\r\nyes, unless all those arguments are already used for something (eg. constructing the regex to search with)\r\n\r\n> You don't mention the expected behavior here. I guess you're expecting ripgrep to search it as if it were just a directory provided as an argument? \r\n\r\nyes, that's what \"recurses into\" means\r\n\r\n> Do other Unix commands do this? I've never seen this usage pattern before.\r\n\r\nunix commands don't typically change behavior based on the type of stdin.  they sometime do for stdout, but usually just for terminal colors or automatically invoking a pager.\r\n\r\nusually they just crash if any stdio is a directory, not silently ignore it.\r\n\r\n> The way ripgrep works is that it looks for something resembling a file on stdin to search. And if it can't find a file (which it can't in this case), it searches the current working directory. This is actually a heuristic and this heuristic has caused lots of problems because it's common for things to pass something that looks like a file on stdin even when it's not really intended. So I'm very hesitant to change that heuristic. And your suggesting here would add a third case to that heuristic.\r\n\r\nI was under the impression it just checked if stdin was a pty, and if not, treats it like it was passed as an argument.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/2381972493/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lolbinarycat","id":19915050,"node_id":"MDQ6VXNlcjE5OTE1MDUw","avatar_url":"https://avatars.githubusercontent.com/u/19915050?v=4","gravatar_id":"","url":"https://api.github.com/users/lolbinarycat","html_url":"https://github.com/lolbinarycat","followers_url":"https://api.github.com/users/lolbinarycat/followers","following_url":"https://api.github.com/users/lolbinarycat/following{/other_user}","gists_url":"https://api.github.com/users/lolbinarycat/gists{/gist_id}","starred_url":"https://api.github.com/users/lolbinarycat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lolbinarycat/subscriptions","organizations_url":"https://api.github.com/users/lolbinarycat/orgs","repos_url":"https://api.github.com/users/lolbinarycat/repos","events_url":"https://api.github.com/users/lolbinarycat/events{/privacy}","received_events_url":"https://api.github.com/users/lolbinarycat/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":14454526791,"node_id":"CE_lADOAzJbyc6YUMJezwAAAANdjpNH","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/14454526791","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"79cbe89deb1151e703f4d91b19af9cdcc128b765","commit_url":"https://api.github.com/repos/BurntSushi/ripgrep/commits/79cbe89deb1151e703f4d91b19af9cdcc128b765","created_at":"2024-09-30T11:38:43Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/2382947608","html_url":"https://github.com/BurntSushi/ripgrep/issues/2906#issuecomment-2382947608","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2906","id":2382947608,"node_id":"IC_kwDOAzJbyc6OCOUY","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-30T11:38:54Z","updated_at":"2024-09-30T11:38:54Z","body":"> yes, that's what \"recurses into\" means\r\n\r\nAh sorry I missed this.\r\n\r\n> unix commands don't typically change behavior based on the type of stdin. they sometime do for stdout, but usually just for terminal colors or automatically invoking a pager.\r\n>\r\n> usually they just crash if any stdio is a directory, not silently ignore it.\r\n\r\nripgrep isn't without precedent here, but yes, one of the downsides of messing around with stdin like this is that there are indeed some cases where ripgrep will ignore what's on stdin and search the current working directory. This is why in ripgrep 14, I introduced some logging messages (that appear when you pass `--debug`) that give a little more insight into what's happening.\r\n\r\n> I was under the impression it just checked if stdin was a pty, and if not, treats it like it was passed as an argument.\r\n\r\nNo, it's more complicated than that. Whether it's a pty or not is a minimum criteria:\r\n\r\nhttps://github.com/BurntSushi/ripgrep/blob/bf63fe8f258afc09bae6caa48f0ae35eaf115005/crates/cli/src/lib.rs#L170-L250\r\n\r\nI've pushed a wording change to the man page to cover this case.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/2382947608/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":14462996904,"node_id":"REFE_lADOAzJbyc6YUMJezwAAAANeD9Go","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/14462996904","actor":{"login":"kokizzu","id":1061610,"node_id":"MDQ6VXNlcjEwNjE2MTA=","avatar_url":"https://avatars.githubusercontent.com/u/1061610?v=4","gravatar_id":"","url":"https://api.github.com/users/kokizzu","html_url":"https://github.com/kokizzu","followers_url":"https://api.github.com/users/kokizzu/followers","following_url":"https://api.github.com/users/kokizzu/following{/other_user}","gists_url":"https://api.github.com/users/kokizzu/gists{/gist_id}","starred_url":"https://api.github.com/users/kokizzu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kokizzu/subscriptions","organizations_url":"https://api.github.com/users/kokizzu/orgs","repos_url":"https://api.github.com/users/kokizzu/repos","events_url":"https://api.github.com/users/kokizzu/events{/privacy}","received_events_url":"https://api.github.com/users/kokizzu/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"79cbe89deb1151e703f4d91b19af9cdcc128b765","commit_url":"https://api.github.com/repos/kokizzu/ripgrep/commits/79cbe89deb1151e703f4d91b19af9cdcc128b765","created_at":"2024-09-30T22:13:50Z","performed_via_github_app":null}]