[{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/267824800","html_url":"https://github.com/BurntSushi/ripgrep/issues/281#issuecomment-267824800","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/281","id":267824800,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NzgyNDgwMA==","user":{"login":"magikid","id":115515,"node_id":"MDQ6VXNlcjExNTUxNQ==","avatar_url":"https://avatars.githubusercontent.com/u/115515?v=4","gravatar_id":"","url":"https://api.github.com/users/magikid","html_url":"https://github.com/magikid","followers_url":"https://api.github.com/users/magikid/followers","following_url":"https://api.github.com/users/magikid/following{/other_user}","gists_url":"https://api.github.com/users/magikid/gists{/gist_id}","starred_url":"https://api.github.com/users/magikid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/magikid/subscriptions","organizations_url":"https://api.github.com/users/magikid/orgs","repos_url":"https://api.github.com/users/magikid/repos","events_url":"https://api.github.com/users/magikid/events{/privacy}","received_events_url":"https://api.github.com/users/magikid/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-18T14:39:01Z","updated_at":"2016-12-18T14:39:01Z","body":"I came across this bug on Ubuntu this morning as well.  I ran `rg --files ./*` in my home directory.  When I realized that it was going to print every file in my home directory, I tried to `ctrl-c` to kill it but that was ignored.  Luckily `ctrl-z` was still recognized so I could manually kill the process.\r\n\r\nDo you think this is related to #200? ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/267824800/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"magikid","id":115515,"node_id":"MDQ6VXNlcjExNTUxNQ==","avatar_url":"https://avatars.githubusercontent.com/u/115515?v=4","gravatar_id":"","url":"https://api.github.com/users/magikid","html_url":"https://github.com/magikid","followers_url":"https://api.github.com/users/magikid/followers","following_url":"https://api.github.com/users/magikid/following{/other_user}","gists_url":"https://api.github.com/users/magikid/gists{/gist_id}","starred_url":"https://api.github.com/users/magikid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/magikid/subscriptions","organizations_url":"https://api.github.com/users/magikid/orgs","repos_url":"https://api.github.com/users/magikid/repos","events_url":"https://api.github.com/users/magikid/events{/privacy}","received_events_url":"https://api.github.com/users/magikid/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/267830233","html_url":"https://github.com/BurntSushi/ripgrep/issues/281#issuecomment-267830233","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/281","id":267830233,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NzgzMDIzMw==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-18T16:19:30Z","updated_at":"2016-12-18T16:19:30Z","body":"It is not related to #200.\r\n\r\nIn the case of `--files` at least, I understand the bug. The problem is that the `^C` handler tries to acquire a lock on `stdout` to clear color codes, but the way `--files` is currently written is that it holds that lock for the entirety of its operation. This shouldn't be too hard to fix.\r\n\r\nI can't reproduce this under normal search operation though (on Linux). I'll need to explicitly try it on Windows.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/267830233/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":897879419,"node_id":"MDEyOkxhYmVsZWRFdmVudDg5Nzg3OTQxOQ==","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/897879419","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2016-12-18T16:19:34Z","label":{"name":"bug","color":"fc2929"},"performed_via_github_app":null},{"id":897879420,"node_id":"MDEyOkxhYmVsZWRFdmVudDg5Nzg3OTQyMA==","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/897879420","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2016-12-18T16:19:34Z","label":{"name":"question","color":"cc317c"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/269089431","html_url":"https://github.com/BurntSushi/ripgrep/issues/281#issuecomment-269089431","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/281","id":269089431,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTA4OTQzMQ==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-24T15:49:25Z","updated_at":"2016-12-24T15:49:25Z","body":"`^C` seems to work fine inside of `mintty`, but I can indeed reproduce this issue inside of `cmd.exe`. ","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/269089431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/269093893","html_url":"https://github.com/BurntSushi/ripgrep/issues/281#issuecomment-269093893","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/281","id":269093893,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTA5Mzg5Mw==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-24T17:50:15Z","updated_at":"2016-12-24T17:51:32Z","body":"I would like to remove the `^C` handling in ripgrep, whose only purpose is to reset color codes. This is a nice convenience because if you `^C` in the middle of writing colored text, the terminal will take on whatever style was enabled at that point. There are many problems with this though:\r\n\r\n1. It doesn't work on Windows at all. Firstly, the `^C` handling itself doesn't work inside MSYS2 terminals. Secondly, while the `^C` handling works in a normal Windows console, it isn't actually capable of resetting anything since there is no equivalent \"clear\" operation like there is in ANSI terminals.\r\n2. Even when all of the above works, it is still imperfect in ANSI terminals. Namely, the normal process for writing to `stdout` acquires a lock to make throughput as fast as possible, but resetting the terminal also requires writing to `stdout`. Therefore, there must be some kind of synchronization between printing to stdout and resetting the terminal, which is not ideal. If we \"just ignore\" this problem, then you wind with the problem of not being able to kill ripgrep while it's searching a single large file, which I think is really terrible UX.\r\n\r\nAll told, my feeling is that getting the color reset handling right just isn't worth it. If you run into the problem, it's easy to fix by simply running:\r\n\r\n```\r\n$ echo -ne \"\\033[0m\"\r\n```\r\n\r\ncc @lambda ","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/269093893/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":904586285,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTA0NTg2Mjg1","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/904586285","actor":{"login":"lambda","id":37398,"node_id":"MDQ6VXNlcjM3Mzk4","avatar_url":"https://avatars.githubusercontent.com/u/37398?v=4","gravatar_id":"","url":"https://api.github.com/users/lambda","html_url":"https://github.com/lambda","followers_url":"https://api.github.com/users/lambda/followers","following_url":"https://api.github.com/users/lambda/following{/other_user}","gists_url":"https://api.github.com/users/lambda/gists{/gist_id}","starred_url":"https://api.github.com/users/lambda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lambda/subscriptions","organizations_url":"https://api.github.com/users/lambda/orgs","repos_url":"https://api.github.com/users/lambda/repos","events_url":"https://api.github.com/users/lambda/events{/privacy}","received_events_url":"https://api.github.com/users/lambda/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-12-24T17:50:15Z","performed_via_github_app":null},{"id":904586286,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDkwNDU4NjI4Ng==","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/904586286","actor":{"login":"lambda","id":37398,"node_id":"MDQ6VXNlcjM3Mzk4","avatar_url":"https://avatars.githubusercontent.com/u/37398?v=4","gravatar_id":"","url":"https://api.github.com/users/lambda","html_url":"https://github.com/lambda","followers_url":"https://api.github.com/users/lambda/followers","following_url":"https://api.github.com/users/lambda/following{/other_user}","gists_url":"https://api.github.com/users/lambda/gists{/gist_id}","starred_url":"https://api.github.com/users/lambda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lambda/subscriptions","organizations_url":"https://api.github.com/users/lambda/orgs","repos_url":"https://api.github.com/users/lambda/repos","events_url":"https://api.github.com/users/lambda/events{/privacy}","received_events_url":"https://api.github.com/users/lambda/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-12-24T17:50:15Z","performed_via_github_app":null},{"id":904586706,"node_id":"MDExOkNsb3NlZEV2ZW50OTA0NTg2NzA2","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/904586706","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"de5cb7d22e00c18dfce082a68b0cf45924b56e7f","commit_url":"https://api.github.com/repos/BurntSushi/ripgrep/commits/de5cb7d22e00c18dfce082a68b0cf45924b56e7f","created_at":"2016-12-24T17:53:14Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/274182548","html_url":"https://github.com/BurntSushi/ripgrep/issues/281#issuecomment-274182548","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/281","id":274182548,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NDE4MjU0OA==","user":{"login":"hacst","id":237537,"node_id":"MDQ6VXNlcjIzNzUzNw==","avatar_url":"https://avatars.githubusercontent.com/u/237537?v=4","gravatar_id":"","url":"https://api.github.com/users/hacst","html_url":"https://github.com/hacst","followers_url":"https://api.github.com/users/hacst/followers","following_url":"https://api.github.com/users/hacst/following{/other_user}","gists_url":"https://api.github.com/users/hacst/gists{/gist_id}","starred_url":"https://api.github.com/users/hacst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hacst/subscriptions","organizations_url":"https://api.github.com/users/hacst/orgs","repos_url":"https://api.github.com/users/hacst/repos","events_url":"https://api.github.com/users/hacst/events{/privacy}","received_events_url":"https://api.github.com/users/hacst/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-20T21:19:03Z","updated_at":"2017-01-20T21:19:03Z","body":"This effect is kinda unfortunate. Triggered it the first time I tried rg.\r\n\r\nFYI: Calling ```color``` in cmd.exe will reset the colors back to how they were on console startup.\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/274182548/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hacst","id":237537,"node_id":"MDQ6VXNlcjIzNzUzNw==","avatar_url":"https://avatars.githubusercontent.com/u/237537?v=4","gravatar_id":"","url":"https://api.github.com/users/hacst","html_url":"https://github.com/hacst","followers_url":"https://api.github.com/users/hacst/followers","following_url":"https://api.github.com/users/hacst/following{/other_user}","gists_url":"https://api.github.com/users/hacst/gists{/gist_id}","starred_url":"https://api.github.com/users/hacst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hacst/subscriptions","organizations_url":"https://api.github.com/users/hacst/orgs","repos_url":"https://api.github.com/users/hacst/repos","events_url":"https://api.github.com/users/hacst/events{/privacy}","received_events_url":"https://api.github.com/users/hacst/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/274192706","html_url":"https://github.com/BurntSushi/ripgrep/issues/281#issuecomment-274192706","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/281","id":274192706,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NDE5MjcwNg==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-20T22:06:48Z","updated_at":"2017-01-20T22:06:48Z","body":"I understand it is unfortunate. I'm open to better ideas.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/274192706/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-03T12:10:31Z","updated_at":"2017-02-03T12:10:31Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/347","repository_url":"https://api.github.com/repos/BurntSushi/ripgrep","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/347/labels{/name}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/347/comments","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/347/events","html_url":"https://github.com/BurntSushi/ripgrep/issues/347","id":205141238,"node_id":"MDU6SXNzdWUyMDUxNDEyMzg=","number":347,"title":"document that keyboard interrupt doesn't restore the termcolor on Windows","user":{"login":"jmcomets","id":1894019,"node_id":"MDQ6VXNlcjE4OTQwMTk=","avatar_url":"https://avatars.githubusercontent.com/u/1894019?v=4","gravatar_id":"","url":"https://api.github.com/users/jmcomets","html_url":"https://github.com/jmcomets","followers_url":"https://api.github.com/users/jmcomets/followers","following_url":"https://api.github.com/users/jmcomets/following{/other_user}","gists_url":"https://api.github.com/users/jmcomets/gists{/gist_id}","starred_url":"https://api.github.com/users/jmcomets/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmcomets/subscriptions","organizations_url":"https://api.github.com/users/jmcomets/orgs","repos_url":"https://api.github.com/users/jmcomets/repos","events_url":"https://api.github.com/users/jmcomets/events{/privacy}","received_events_url":"https://api.github.com/users/jmcomets/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":449399236,"node_id":"MDU6TGFiZWw0NDkzOTkyMzY=","url":"https://api.github.com/repos/BurntSushi/ripgrep/labels/doc","name":"doc","color":"fbca04","default":false,"description":"An issue with or an improvement to documentation."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2017-02-03T12:07:09Z","updated_at":"2017-03-08T15:18:21Z","closed_at":"2017-03-08T15:18:21Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":53631945,"node_id":"MDEwOlJlcG9zaXRvcnk1MzYzMTk0NQ==","name":"ripgrep","full_name":"BurntSushi/ripgrep","private":false,"owner":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/BurntSushi/ripgrep","description":"ripgrep recursively searches directories for a regex pattern while respecting your gitignore","fork":false,"url":"https://api.github.com/repos/BurntSushi/ripgrep","forks_url":"https://api.github.com/repos/BurntSushi/ripgrep/forks","keys_url":"https://api.github.com/repos/BurntSushi/ripgrep/keys{/key_id}","collaborators_url":"https://api.github.com/repos/BurntSushi/ripgrep/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/BurntSushi/ripgrep/teams","hooks_url":"https://api.github.com/repos/BurntSushi/ripgrep/hooks","issue_events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events{/number}","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/events","assignees_url":"https://api.github.com/repos/BurntSushi/ripgrep/assignees{/user}","branches_url":"https://api.github.com/repos/BurntSushi/ripgrep/branches{/branch}","tags_url":"https://api.github.com/repos/BurntSushi/ripgrep/tags","blobs_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/refs{/sha}","trees_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/trees{/sha}","statuses_url":"https://api.github.com/repos/BurntSushi/ripgrep/statuses/{sha}","languages_url":"https://api.github.com/repos/BurntSushi/ripgrep/languages","stargazers_url":"https://api.github.com/repos/BurntSushi/ripgrep/stargazers","contributors_url":"https://api.github.com/repos/BurntSushi/ripgrep/contributors","subscribers_url":"https://api.github.com/repos/BurntSushi/ripgrep/subscribers","subscription_url":"https://api.github.com/repos/BurntSushi/ripgrep/subscription","commits_url":"https://api.github.com/repos/BurntSushi/ripgrep/commits{/sha}","git_commits_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/commits{/sha}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/comments{/number}","issue_comment_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments{/number}","contents_url":"https://api.github.com/repos/BurntSushi/ripgrep/contents/{+path}","compare_url":"https://api.github.com/repos/BurntSushi/ripgrep/compare/{base}...{head}","merges_url":"https://api.github.com/repos/BurntSushi/ripgrep/merges","archive_url":"https://api.github.com/repos/BurntSushi/ripgrep/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/BurntSushi/ripgrep/downloads","issues_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues{/number}","pulls_url":"https://api.github.com/repos/BurntSushi/ripgrep/pulls{/number}","milestones_url":"https://api.github.com/repos/BurntSushi/ripgrep/milestones{/number}","notifications_url":"https://api.github.com/repos/BurntSushi/ripgrep/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/labels{/name}","releases_url":"https://api.github.com/repos/BurntSushi/ripgrep/releases{/id}","deployments_url":"https://api.github.com/repos/BurntSushi/ripgrep/deployments","created_at":"2016-03-11T02:02:33Z","updated_at":"2025-11-09T23:50:59Z","pushed_at":"2025-10-30T17:30:23Z","git_url":"git://github.com/BurntSushi/ripgrep.git","ssh_url":"git@github.com:BurntSushi/ripgrep.git","clone_url":"https://github.com/BurntSushi/ripgrep.git","svn_url":"https://github.com/BurntSushi/ripgrep","homepage":"","size":5534,"stargazers_count":57154,"watchers_count":57154,"language":"Rust","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2304,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":88,"license":{"key":"unlicense","name":"The Unlicense","spdx_id":"Unlicense","url":"https://api.github.com/licenses/unlicense","node_id":"MDc6TGljZW5zZTE1"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["cli","command-line","command-line-tool","gitignore","grep","recursively-search","regex","ripgrep","rust","search"],"visibility":"public","forks":2304,"open_issues":88,"watchers":57154,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Hi everyone,\r\n\r\nFirst of all, great job on this. :+1: \r\n\r\nNow on to my issue: I'm using stable Rust (stable-x86_64-pc-windows-msvc + rustc 1.14.0) and installed ripgrep using `cargo install`.\r\nWhen running a basic `rg --type cpp <pattern>` and pressing Ctrl-C in the middle, cmd's foreground stays red/purple/whatever color was last printed. I haven't tried on Linux to see if this is really platform specific.","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/347/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/347/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/289758462","html_url":"https://github.com/BurntSushi/ripgrep/issues/281#issuecomment-289758462","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/281","id":289758462,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTc1ODQ2Mg==","user":{"login":"seabadger","id":220967,"node_id":"MDQ6VXNlcjIyMDk2Nw==","avatar_url":"https://avatars.githubusercontent.com/u/220967?v=4","gravatar_id":"","url":"https://api.github.com/users/seabadger","html_url":"https://github.com/seabadger","followers_url":"https://api.github.com/users/seabadger/followers","following_url":"https://api.github.com/users/seabadger/following{/other_user}","gists_url":"https://api.github.com/users/seabadger/gists{/gist_id}","starred_url":"https://api.github.com/users/seabadger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seabadger/subscriptions","organizations_url":"https://api.github.com/users/seabadger/orgs","repos_url":"https://api.github.com/users/seabadger/repos","events_url":"https://api.github.com/users/seabadger/events{/privacy}","received_events_url":"https://api.github.com/users/seabadger/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-28T12:47:45Z","updated_at":"2017-03-28T12:47:45Z","body":"Perhaps a silly question, but can't you just have an atexit handler that always resets colors, and the ctrl-c just ensures regular processing is interrupted s. t. exit() is called (after releasing any resources)?  ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/289758462/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"seabadger","id":220967,"node_id":"MDQ6VXNlcjIyMDk2Nw==","avatar_url":"https://avatars.githubusercontent.com/u/220967?v=4","gravatar_id":"","url":"https://api.github.com/users/seabadger","html_url":"https://github.com/seabadger","followers_url":"https://api.github.com/users/seabadger/followers","following_url":"https://api.github.com/users/seabadger/following{/other_user}","gists_url":"https://api.github.com/users/seabadger/gists{/gist_id}","starred_url":"https://api.github.com/users/seabadger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seabadger/subscriptions","organizations_url":"https://api.github.com/users/seabadger/orgs","repos_url":"https://api.github.com/users/seabadger/repos","events_url":"https://api.github.com/users/seabadger/events{/privacy}","received_events_url":"https://api.github.com/users/seabadger/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/289767330","html_url":"https://github.com/BurntSushi/ripgrep/issues/281#issuecomment-289767330","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/281","id":289767330,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTc2NzMzMA==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-28T13:21:20Z","updated_at":"2017-03-28T13:21:20Z","body":"@seabadger Could you address this particular point from my comment above?\r\n\r\n> Namely, the normal process for writing to stdout acquires a lock to make throughput as fast as possible, but resetting the terminal also requires writing to stdout. Therefore, there must be some kind of synchronization between printing to stdout and resetting the terminal, which is not ideal.\r\n\r\nIn particular, this is exactly the problem:\r\n\r\n> the ctrl-c just ensures regular processing is interrupted \r\n\r\n(FYI, `atexit` specifically is a red herring.)","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/289767330/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1018523956,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTAxODUyMzk1Ng==","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1018523956","actor":{"login":"seabadger","id":220967,"node_id":"MDQ6VXNlcjIyMDk2Nw==","avatar_url":"https://avatars.githubusercontent.com/u/220967?v=4","gravatar_id":"","url":"https://api.github.com/users/seabadger","html_url":"https://github.com/seabadger","followers_url":"https://api.github.com/users/seabadger/followers","following_url":"https://api.github.com/users/seabadger/following{/other_user}","gists_url":"https://api.github.com/users/seabadger/gists{/gist_id}","starred_url":"https://api.github.com/users/seabadger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seabadger/subscriptions","organizations_url":"https://api.github.com/users/seabadger/orgs","repos_url":"https://api.github.com/users/seabadger/repos","events_url":"https://api.github.com/users/seabadger/events{/privacy}","received_events_url":"https://api.github.com/users/seabadger/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-03-28T13:21:20Z","performed_via_github_app":null},{"id":1018523958,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDEwMTg1MjM5NTg=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1018523958","actor":{"login":"seabadger","id":220967,"node_id":"MDQ6VXNlcjIyMDk2Nw==","avatar_url":"https://avatars.githubusercontent.com/u/220967?v=4","gravatar_id":"","url":"https://api.github.com/users/seabadger","html_url":"https://github.com/seabadger","followers_url":"https://api.github.com/users/seabadger/followers","following_url":"https://api.github.com/users/seabadger/following{/other_user}","gists_url":"https://api.github.com/users/seabadger/gists{/gist_id}","starred_url":"https://api.github.com/users/seabadger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seabadger/subscriptions","organizations_url":"https://api.github.com/users/seabadger/orgs","repos_url":"https://api.github.com/users/seabadger/repos","events_url":"https://api.github.com/users/seabadger/events{/privacy}","received_events_url":"https://api.github.com/users/seabadger/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-03-28T13:21:20Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/289794860","html_url":"https://github.com/BurntSushi/ripgrep/issues/281#issuecomment-289794860","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/281","id":289794860,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTc5NDg2MA==","user":{"login":"seabadger","id":220967,"node_id":"MDQ6VXNlcjIyMDk2Nw==","avatar_url":"https://avatars.githubusercontent.com/u/220967?v=4","gravatar_id":"","url":"https://api.github.com/users/seabadger","html_url":"https://github.com/seabadger","followers_url":"https://api.github.com/users/seabadger/followers","following_url":"https://api.github.com/users/seabadger/following{/other_user}","gists_url":"https://api.github.com/users/seabadger/gists{/gist_id}","starred_url":"https://api.github.com/users/seabadger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seabadger/subscriptions","organizations_url":"https://api.github.com/users/seabadger/orgs","repos_url":"https://api.github.com/users/seabadger/repos","events_url":"https://api.github.com/users/seabadger/events{/privacy}","received_events_url":"https://api.github.com/users/seabadger/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-28T14:49:48Z","updated_at":"2017-03-28T14:50:37Z","body":"First -- a disclaimer: I may be coming at this from the point of ignorance, as (1) I've just discovered this project and only looked at small parts of the code so far, (2) don't know Rust so may be missing something even for the parts that I did look at, and (3) don't know what solutions were already considered and discarded beyond the one in this issue. So my apologies if I'm mentioning something obvious and/or obviously wrong.\r\n\r\nThat said: if I understood correctly, the implementation that was removed by commit  de5cb7d22e00c18dfce082a68b0cf45924b56e7f did the work (cleanup + exit) directly in the signal handler, which indeed required this kind of synchronization.\r\n\r\nWould it be feasible to instead defer the actual work to a safer point? \r\nE.g., the signal handler would set a boolean flag; the worker threads would eventually see the flag is set and terminate.\r\nOnce all the workers terminate, presumably no further output is being produced, so cleanup (i.e., color reset) can be safely performed.\r\n\r\nThis assumes:\r\n- worker threads are not detached, so there's a join point after which the cleanup can be performed (I see that at least some threads are joined, but I don't know if that's true for all cases).\r\n- the flag check in the workers is inexpensive (or can be made inexpensive by only doing it relatively infrequently).\r\n\r\nHope I didn't miss something glaringly obvious...\r\n\r\n(and you're right about ```atexit```, of course).\r\n\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/289794860/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"seabadger","id":220967,"node_id":"MDQ6VXNlcjIyMDk2Nw==","avatar_url":"https://avatars.githubusercontent.com/u/220967?v=4","gravatar_id":"","url":"https://api.github.com/users/seabadger","html_url":"https://github.com/seabadger","followers_url":"https://api.github.com/users/seabadger/followers","following_url":"https://api.github.com/users/seabadger/following{/other_user}","gists_url":"https://api.github.com/users/seabadger/gists{/gist_id}","starred_url":"https://api.github.com/users/seabadger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seabadger/subscriptions","organizations_url":"https://api.github.com/users/seabadger/orgs","repos_url":"https://api.github.com/users/seabadger/repos","events_url":"https://api.github.com/users/seabadger/events{/privacy}","received_events_url":"https://api.github.com/users/seabadger/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/289801277","html_url":"https://github.com/BurntSushi/ripgrep/issues/281#issuecomment-289801277","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/281","id":289801277,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTgwMTI3Nw==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-28T15:09:06Z","updated_at":"2017-03-28T15:09:06Z","body":"Thanks for the ideas!\r\n\r\n> the flag check in the workers is inexpensive (or can be made inexpensive by only doing it relatively infrequently).\r\n\r\nRight. This is what the \"there must be some kind of synchronization between printing to stdout and resetting the terminal\" part is about. It would have to be pushed all the way down into the input buffer handling itself. It would not be nice, and I can almost guarantee that it will be a source of bugs of the form \"I hit `^C` and ripgrep took a few seconds to quit.\"","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/289801277/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/289808716","html_url":"https://github.com/BurntSushi/ripgrep/issues/281#issuecomment-289808716","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/281","id":289808716,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTgwODcxNg==","user":{"login":"seabadger","id":220967,"node_id":"MDQ6VXNlcjIyMDk2Nw==","avatar_url":"https://avatars.githubusercontent.com/u/220967?v=4","gravatar_id":"","url":"https://api.github.com/users/seabadger","html_url":"https://github.com/seabadger","followers_url":"https://api.github.com/users/seabadger/followers","following_url":"https://api.github.com/users/seabadger/following{/other_user}","gists_url":"https://api.github.com/users/seabadger/gists{/gist_id}","starred_url":"https://api.github.com/users/seabadger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seabadger/subscriptions","organizations_url":"https://api.github.com/users/seabadger/orgs","repos_url":"https://api.github.com/users/seabadger/repos","events_url":"https://api.github.com/users/seabadger/events{/privacy}","received_events_url":"https://api.github.com/users/seabadger/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-28T15:31:39Z","updated_at":"2017-03-28T15:31:39Z","body":"(To be fair, a large recursive grep or 'find | xargs grep'  would not necessarily respond to Control-C instantaneously (speaking from experience) -- so at least from the user's perspective, I think I would find this acceptable; can't speak for others, of course. But the effect on the code structure remains, so here I'll defer to you)\r\n\r\nHow about another approach that (I think) addresses both issues: a wrapper.\r\nBasically, the parent process (which could be rg itself):\r\n- sets up a signal handler (used by parent only)\r\n- forks a child process (which would remove the signal handler)\r\n- waits for child to terminate\r\n- cleans up\r\n\r\nThe parent's signal handler would simply pass the signal on to the child process. The child process should behave exactly as rg behaves today.\r\n\r\nCons:\r\n- cost of fork(). Unless rg is run in  a tight loop, or the binary size grows significantly, I hope this would not be very noticeable (am I missing common use cases?)\r\n\r\nPros:\r\n- avoids the 'slow to respond' problem\r\n- should not be very intrusive with respect to most of the code.\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/289808716/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"seabadger","id":220967,"node_id":"MDQ6VXNlcjIyMDk2Nw==","avatar_url":"https://avatars.githubusercontent.com/u/220967?v=4","gravatar_id":"","url":"https://api.github.com/users/seabadger","html_url":"https://github.com/seabadger","followers_url":"https://api.github.com/users/seabadger/followers","following_url":"https://api.github.com/users/seabadger/following{/other_user}","gists_url":"https://api.github.com/users/seabadger/gists{/gist_id}","starred_url":"https://api.github.com/users/seabadger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seabadger/subscriptions","organizations_url":"https://api.github.com/users/seabadger/orgs","repos_url":"https://api.github.com/users/seabadger/repos","events_url":"https://api.github.com/users/seabadger/events{/privacy}","received_events_url":"https://api.github.com/users/seabadger/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/289810531","html_url":"https://github.com/BurntSushi/ripgrep/issues/281#issuecomment-289810531","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/281","id":289810531,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTgxMDUzMQ==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-28T15:37:12Z","updated_at":"2017-03-28T15:37:12Z","body":"@seabadger Hmmmmmmmm..... I like that. I can't immediately think of a counter-argument to that. My only caveat is that it would be nice if it worked on Windows, although I suppose it wouldn't have to be a hard requirement. (It could be something that only works on Unixish systems.)","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/289810531/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1018798931,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTAxODc5ODkzMQ==","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1018798931","actor":{"login":"seabadger","id":220967,"node_id":"MDQ6VXNlcjIyMDk2Nw==","avatar_url":"https://avatars.githubusercontent.com/u/220967?v=4","gravatar_id":"","url":"https://api.github.com/users/seabadger","html_url":"https://github.com/seabadger","followers_url":"https://api.github.com/users/seabadger/followers","following_url":"https://api.github.com/users/seabadger/following{/other_user}","gists_url":"https://api.github.com/users/seabadger/gists{/gist_id}","starred_url":"https://api.github.com/users/seabadger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seabadger/subscriptions","organizations_url":"https://api.github.com/users/seabadger/orgs","repos_url":"https://api.github.com/users/seabadger/repos","events_url":"https://api.github.com/users/seabadger/events{/privacy}","received_events_url":"https://api.github.com/users/seabadger/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-03-28T15:37:12Z","performed_via_github_app":null},{"id":1018798932,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDEwMTg3OTg5MzI=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1018798932","actor":{"login":"seabadger","id":220967,"node_id":"MDQ6VXNlcjIyMDk2Nw==","avatar_url":"https://avatars.githubusercontent.com/u/220967?v=4","gravatar_id":"","url":"https://api.github.com/users/seabadger","html_url":"https://github.com/seabadger","followers_url":"https://api.github.com/users/seabadger/followers","following_url":"https://api.github.com/users/seabadger/following{/other_user}","gists_url":"https://api.github.com/users/seabadger/gists{/gist_id}","starred_url":"https://api.github.com/users/seabadger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seabadger/subscriptions","organizations_url":"https://api.github.com/users/seabadger/orgs","repos_url":"https://api.github.com/users/seabadger/repos","events_url":"https://api.github.com/users/seabadger/events{/privacy}","received_events_url":"https://api.github.com/users/seabadger/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-03-28T15:37:12Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/289810934","html_url":"https://github.com/BurntSushi/ripgrep/issues/281#issuecomment-289810934","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/281","id":289810934,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTgxMDkzNA==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-28T15:38:20Z","updated_at":"2017-03-28T15:38:20Z","body":"One other point: I don't have good intuition as to the overhead of a single `fork` call, but I do expect ripgrep to be used in some `xargs` pipelines occasionally, which could suffer from that overhead, but it feels like it'd be awfully small to me.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/289810934/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1023754055,"node_id":"MDEzOlJlb3BlbmVkRXZlbnQxMDIzNzU0MDU1","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1023754055","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"reopened","commit_id":null,"commit_url":null,"created_at":"2017-03-31T09:16:25Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-31T09:17:22Z","updated_at":"2017-03-31T09:17:22Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/430","repository_url":"https://api.github.com/repos/BurntSushi/ripgrep","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/430/labels{/name}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/430/comments","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/430/events","html_url":"https://github.com/BurntSushi/ripgrep/issues/430","id":218401563,"node_id":"MDU6SXNzdWUyMTg0MDE1NjM=","number":430,"title":"Interrupting ripgrep causes to affect terminal colors. Windows","user":{"login":"DoumanAsh","id":5676053,"node_id":"MDQ6VXNlcjU2NzYwNTM=","avatar_url":"https://avatars.githubusercontent.com/u/5676053?v=4","gravatar_id":"","url":"https://api.github.com/users/DoumanAsh","html_url":"https://github.com/DoumanAsh","followers_url":"https://api.github.com/users/DoumanAsh/followers","following_url":"https://api.github.com/users/DoumanAsh/following{/other_user}","gists_url":"https://api.github.com/users/DoumanAsh/gists{/gist_id}","starred_url":"https://api.github.com/users/DoumanAsh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DoumanAsh/subscriptions","organizations_url":"https://api.github.com/users/DoumanAsh/orgs","repos_url":"https://api.github.com/users/DoumanAsh/repos","events_url":"https://api.github.com/users/DoumanAsh/events{/privacy}","received_events_url":"https://api.github.com/users/DoumanAsh/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2017-03-31T05:27:22Z","updated_at":"2017-03-31T10:48:22Z","closed_at":"2017-03-31T09:17:22Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":53631945,"node_id":"MDEwOlJlcG9zaXRvcnk1MzYzMTk0NQ==","name":"ripgrep","full_name":"BurntSushi/ripgrep","private":false,"owner":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/BurntSushi/ripgrep","description":"ripgrep recursively searches directories for a regex pattern while respecting your gitignore","fork":false,"url":"https://api.github.com/repos/BurntSushi/ripgrep","forks_url":"https://api.github.com/repos/BurntSushi/ripgrep/forks","keys_url":"https://api.github.com/repos/BurntSushi/ripgrep/keys{/key_id}","collaborators_url":"https://api.github.com/repos/BurntSushi/ripgrep/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/BurntSushi/ripgrep/teams","hooks_url":"https://api.github.com/repos/BurntSushi/ripgrep/hooks","issue_events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events{/number}","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/events","assignees_url":"https://api.github.com/repos/BurntSushi/ripgrep/assignees{/user}","branches_url":"https://api.github.com/repos/BurntSushi/ripgrep/branches{/branch}","tags_url":"https://api.github.com/repos/BurntSushi/ripgrep/tags","blobs_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/refs{/sha}","trees_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/trees{/sha}","statuses_url":"https://api.github.com/repos/BurntSushi/ripgrep/statuses/{sha}","languages_url":"https://api.github.com/repos/BurntSushi/ripgrep/languages","stargazers_url":"https://api.github.com/repos/BurntSushi/ripgrep/stargazers","contributors_url":"https://api.github.com/repos/BurntSushi/ripgrep/contributors","subscribers_url":"https://api.github.com/repos/BurntSushi/ripgrep/subscribers","subscription_url":"https://api.github.com/repos/BurntSushi/ripgrep/subscription","commits_url":"https://api.github.com/repos/BurntSushi/ripgrep/commits{/sha}","git_commits_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/commits{/sha}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/comments{/number}","issue_comment_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments{/number}","contents_url":"https://api.github.com/repos/BurntSushi/ripgrep/contents/{+path}","compare_url":"https://api.github.com/repos/BurntSushi/ripgrep/compare/{base}...{head}","merges_url":"https://api.github.com/repos/BurntSushi/ripgrep/merges","archive_url":"https://api.github.com/repos/BurntSushi/ripgrep/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/BurntSushi/ripgrep/downloads","issues_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues{/number}","pulls_url":"https://api.github.com/repos/BurntSushi/ripgrep/pulls{/number}","milestones_url":"https://api.github.com/repos/BurntSushi/ripgrep/milestones{/number}","notifications_url":"https://api.github.com/repos/BurntSushi/ripgrep/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/labels{/name}","releases_url":"https://api.github.com/repos/BurntSushi/ripgrep/releases{/id}","deployments_url":"https://api.github.com/repos/BurntSushi/ripgrep/deployments","created_at":"2016-03-11T02:02:33Z","updated_at":"2025-11-09T23:50:59Z","pushed_at":"2025-10-30T17:30:23Z","git_url":"git://github.com/BurntSushi/ripgrep.git","ssh_url":"git@github.com:BurntSushi/ripgrep.git","clone_url":"https://github.com/BurntSushi/ripgrep.git","svn_url":"https://github.com/BurntSushi/ripgrep","homepage":"","size":5534,"stargazers_count":57154,"watchers_count":57154,"language":"Rust","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2304,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":88,"license":{"key":"unlicense","name":"The Unlicense","spdx_id":"Unlicense","url":"https://api.github.com/licenses/unlicense","node_id":"MDc6TGljZW5zZTE1"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["cli","command-line","command-line-tool","gitignore","grep","recursively-search","regex","ripgrep","rust","search"],"visibility":"public","forks":2304,"open_issues":88,"watchers":57154,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"I'm not sure how exactly coloring is made on Windows but you can `Crtl-C` ripgrep and it gets your console like that:\r\n\r\nhttp://i.imgur.com/PR0wrCe.png\r\n\r\nAll non-colored fonts became red for example.\r\nIt can happen with any color that ripgrep is using just interrupt it in the moment when coloring starts...\r\n\r\nP.s. workaround for powershell:\r\n```\r\n[Console]::ResetColor()\r\n```","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/430/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/430/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/290683431","html_url":"https://github.com/BurntSushi/ripgrep/issues/281#issuecomment-290683431","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/281","id":290683431,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDY4MzQzMQ==","user":{"login":"DoumanAsh","id":5676053,"node_id":"MDQ6VXNlcjU2NzYwNTM=","avatar_url":"https://avatars.githubusercontent.com/u/5676053?v=4","gravatar_id":"","url":"https://api.github.com/users/DoumanAsh","html_url":"https://github.com/DoumanAsh","followers_url":"https://api.github.com/users/DoumanAsh/followers","following_url":"https://api.github.com/users/DoumanAsh/following{/other_user}","gists_url":"https://api.github.com/users/DoumanAsh/gists{/gist_id}","starred_url":"https://api.github.com/users/DoumanAsh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DoumanAsh/subscriptions","organizations_url":"https://api.github.com/users/DoumanAsh/orgs","repos_url":"https://api.github.com/users/DoumanAsh/repos","events_url":"https://api.github.com/users/DoumanAsh/events{/privacy}","received_events_url":"https://api.github.com/users/DoumanAsh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-31T11:00:42Z","updated_at":"2017-03-31T11:01:59Z","body":"@BurntSushi After a brief look at code what i can see is that std get locked once rg runs in one thread. Is it actually necessary to lock stdout in one thread runner?\r\nP.s. i'm still trying to get hand of multi-threaded code","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/290683431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"DoumanAsh","id":5676053,"node_id":"MDQ6VXNlcjU2NzYwNTM=","avatar_url":"https://avatars.githubusercontent.com/u/5676053?v=4","gravatar_id":"","url":"https://api.github.com/users/DoumanAsh","html_url":"https://github.com/DoumanAsh","followers_url":"https://api.github.com/users/DoumanAsh/followers","following_url":"https://api.github.com/users/DoumanAsh/following{/other_user}","gists_url":"https://api.github.com/users/DoumanAsh/gists{/gist_id}","starred_url":"https://api.github.com/users/DoumanAsh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DoumanAsh/subscriptions","organizations_url":"https://api.github.com/users/DoumanAsh/orgs","repos_url":"https://api.github.com/users/DoumanAsh/repos","events_url":"https://api.github.com/users/DoumanAsh/events{/privacy}","received_events_url":"https://api.github.com/users/DoumanAsh/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1023892892,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTAyMzg5Mjg5Mg==","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1023892892","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-03-31T11:00:42Z","performed_via_github_app":null},{"id":1023892893,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDEwMjM4OTI4OTM=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1023892893","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-03-31T11:00:42Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/290685190","html_url":"https://github.com/BurntSushi/ripgrep/issues/281#issuecomment-290685190","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/281","id":290685190,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDY4NTE5MA==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-31T11:10:19Z","updated_at":"2017-03-31T11:10:33Z","body":"@DoumanAsh Could you please read this thread? I think the current best solution is a fork-exec that was written up here https://github.com/BurntSushi/ripgrep/issues/281#issuecomment-289808716 --- I just don't know if it works on Windows.\r\n\r\n> Is it actually necessary to lock stdout in one thread runner?\r\n\r\nYes. Locking `stdout` prevents interleaving.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/290685190/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1023904559,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTAyMzkwNDU1OQ==","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1023904559","actor":{"login":"DoumanAsh","id":5676053,"node_id":"MDQ6VXNlcjU2NzYwNTM=","avatar_url":"https://avatars.githubusercontent.com/u/5676053?v=4","gravatar_id":"","url":"https://api.github.com/users/DoumanAsh","html_url":"https://github.com/DoumanAsh","followers_url":"https://api.github.com/users/DoumanAsh/followers","following_url":"https://api.github.com/users/DoumanAsh/following{/other_user}","gists_url":"https://api.github.com/users/DoumanAsh/gists{/gist_id}","starred_url":"https://api.github.com/users/DoumanAsh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DoumanAsh/subscriptions","organizations_url":"https://api.github.com/users/DoumanAsh/orgs","repos_url":"https://api.github.com/users/DoumanAsh/repos","events_url":"https://api.github.com/users/DoumanAsh/events{/privacy}","received_events_url":"https://api.github.com/users/DoumanAsh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-03-31T11:10:19Z","performed_via_github_app":null}]