[{"id":16068098141,"node_id":"CE_lADOAzJbyc6njoQEzwAAAAO9u7hd","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/16068098141","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"e2362d4d5185d02fa857bf381e7bd52e66fafc73","commit_url":"https://api.github.com/repos/BurntSushi/ripgrep/commits/e2362d4d5185d02fa857bf381e7bd52e66fafc73","created_at":"2025-01-25T19:27:03Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/2614074624","html_url":"https://github.com/BurntSushi/ripgrep/issues/2979#issuecomment-2614074624","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2979","id":2614074624,"node_id":"IC_kwDOAzJbyc6bz50A","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-25T19:29:13Z","updated_at":"2025-01-25T19:30:25Z","body":"This was a tricky one. It looks like a bug, but your binary file is not actually binary. ripgrep interprets it as UTF-16BE because it has a BOM indicating as such. This causes ripgrep to transcode the file as UTF-16BE. That in turn means standard ASCII patterns won't behave as expected. And thus you don't get a match.\n\nFor cases like this, you actually need to disable transcoding entirely:\n\n```\n$ rg --trace \"Hello\" test.bin\nrg: DEBUG|rg::flags::parse|crates/core/flags/parse.rs:97: no extra arguments found from configuration file\nrg: DEBUG|rg::flags::hiargs|crates/core/flags/hiargs.rs:1083: number of paths given to search: 1\nrg: DEBUG|rg::flags::hiargs|crates/core/flags/hiargs.rs:1094: is_one_file? true\nrg: DEBUG|rg::flags::hiargs|crates/core/flags/hiargs.rs:1269: found hostname for hyperlink configuration: duff\nrg: DEBUG|rg::flags::hiargs|crates/core/flags/hiargs.rs:1279: hyperlink format: \"\"\nrg: DEBUG|rg::flags::hiargs|crates/core/flags/hiargs.rs:174: using 1 thread(s)\nrg: DEBUG|grep_regex::config|/home/andrew/code/rust/ripgrep/crates/regex/src/config.rs:175: assembling HIR from 1 fixed string literals\nrg: TRACE|grep_regex::matcher|/home/andrew/code/rust/ripgrep/crates/regex/src/matcher.rs:66: final regex: \"(?:Hello)\"\nrg: TRACE|grep_regex::literal|crates/regex/src/literal.rs:75: skipping inner literal extraction, existing regex is believed to already be accelerated\nrg: DEBUG|globset|crates/globset/src/lib.rs:453: built glob set; 0 literals, 0 basenames, 12 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes\nrg: TRACE|rg::search|crates/core/search.rs:254: test.bin: binary detection: BinaryDetection(Convert(0))\nrg: TRACE|grep_searcher::searcher|/home/andrew/code/rust/ripgrep/crates/searcher/src/searcher/mod.rs:670: Some(\"test.bin\"): searching via memory map\nrg: TRACE|grep_searcher::searcher|crates/searcher/src/searcher/mod.rs:1007: found byte-order mark (BOM) for encoding Encoding { UTF-16BE }\nrg: TRACE|grep_searcher::searcher|/home/andrew/code/rust/ripgrep/crates/searcher/src/searcher/mod.rs:763: slice reader: needs transcoding, using generic reader\nrg: TRACE|grep_searcher::searcher|/home/andrew/code/rust/ripgrep/crates/searcher/src/searcher/mod.rs:742: generic reader: searching via roll buffer strategy\nrg: TRACE|grep_searcher::searcher::core|/home/andrew/code/rust/ripgrep/crates/searcher/src/searcher/core.rs:65: searcher core: will use fast line searcher\n\n$ rg -E none \"Hello\" test.bin\nbinary file matches (found \"\\0\" byte around offset 40)\n\n$ rg -E none -a -M100 \"Hello\" test.bin\n13701:[Omitted long line with 1 matches]\n\n$ rg -E none -a -o \".{0,50}Hello.{0,50}\" test.bin\n13701:lnx,zynq-7000&Hello custom0 board (U-boot)optionsu-boot\n```\n\nI've added an extra TRACE-level log message that might help diagnose this in the future (as shown above as well):\n\n```\nrg: TRACE|grep_searcher::searcher|crates/searcher/src/searcher/mod.rs:1007: found byte-order mark (BOM) for encoding Encoding { UTF-16BE }\n```\n","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/2614074624/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":16068107984,"node_id":"REFE_lADOAzJbyc6njoQEzwAAAAO9u97Q","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/16068107984","actor":{"login":"pull[bot]","id":39814207,"node_id":"MDM6Qm90Mzk4MTQyMDc=","avatar_url":"https://avatars.githubusercontent.com/in/12910?v=4","gravatar_id":"","url":"https://api.github.com/users/pull%5Bbot%5D","html_url":"https://github.com/apps/pull","followers_url":"https://api.github.com/users/pull%5Bbot%5D/followers","following_url":"https://api.github.com/users/pull%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/pull%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/pull%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pull%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/pull%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/pull%5Bbot%5D/repos","events_url":"https://api.github.com/users/pull%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/pull%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"e2362d4d5185d02fa857bf381e7bd52e66fafc73","commit_url":"https://api.github.com/repos/Mu-L/ripgrep/commits/e2362d4d5185d02fa857bf381e7bd52e66fafc73","created_at":"2025-01-25T19:33:21Z","performed_via_github_app":null}]