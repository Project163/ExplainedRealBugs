{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1203","repository_url":"https://api.github.com/repos/BurntSushi/ripgrep","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1203/labels{/name}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1203/comments","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1203/events","html_url":"https://github.com/BurntSushi/ripgrep/issues/1203","id":415312950,"node_id":"MDU6SXNzdWU0MTUzMTI5NTA=","number":1203,"title":"ripgrep fails to match pattern including digit character class","user":{"login":"ravron","id":5354796,"node_id":"MDQ6VXNlcjUzNTQ3OTY=","avatar_url":"https://avatars.githubusercontent.com/u/5354796?v=4","gravatar_id":"","url":"https://api.github.com/users/ravron","html_url":"https://github.com/ravron","followers_url":"https://api.github.com/users/ravron/followers","following_url":"https://api.github.com/users/ravron/following{/other_user}","gists_url":"https://api.github.com/users/ravron/gists{/gist_id}","starred_url":"https://api.github.com/users/ravron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ravron/subscriptions","organizations_url":"https://api.github.com/users/ravron/orgs","repos_url":"https://api.github.com/users/ravron/repos","events_url":"https://api.github.com/users/ravron/events{/privacy}","received_events_url":"https://api.github.com/users/ravron/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":339721678,"node_id":"MDU6TGFiZWwzMzk3MjE2Nzg=","url":"https://api.github.com/repos/BurntSushi/ripgrep/labels/bug","name":"bug","color":"fc2929","default":true,"description":"A bug."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-02-27T20:30:11Z","updated_at":"2019-02-27T23:18:19Z","closed_at":"2019-02-27T22:43:41Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"#### What version of ripgrep are you using?\r\n\r\n```\r\nripgrep 0.10.0 (rev 8a7db1a918)\r\n-SIMD -AVX (compiled)\r\n+SIMD +AVX (runtime)\r\n```\r\n\r\n#### How did you install ripgrep?\r\n\r\n```\r\n$ brew tap burntsushi/ripgrep https://github.com/BurntSushi/ripgrep.git\r\n$ brew install ripgrep-bin\r\n```\r\n\r\n#### What operating system are you using ripgrep on?\r\n\r\nmacOS 10.14.3 (18D109)\r\n\r\n#### Describe your question, feature request, or bug.\r\n\r\n`rg` appears to fail to find a certain pattern in a one-line file that definitely contains that pattern.\r\n\r\nI must be missing something — this seems very unlikely to be a legitimate bug — but I can't figure out what.\r\n\r\n#### If this is a bug, what are the steps to reproduce the behavior?\r\n\r\n1. `echo 153.230000 >| test.txt`\r\n2. `rg '\\d\\d\\d00' test.txt`. This successfully finds a match of `23000`.\r\n3. `rg '\\d\\d\\d000' test.txt`. This _fails_ to find any match, when it should match `230000`\r\n\r\nNote that `grep '\\d\\d\\d000' test.txt` correctly matches `230000`. (`grep --version` `grep (BSD grep) 2.5.1-FreeBSD`)\r\n\r\n#### If this is a bug, what is the actual behavior?\r\n\r\n```\r\n$ echo 153.230000 >| test.txt\r\n$ rg --debug '\\d\\d\\d000' test.txt\r\nDEBUG|grep_regex::literal|grep-regex/src/literal.rs:110: required literal found: \"000\"\r\nDEBUG|globset|globset/src/lib.rs:429: built glob set; 0 literals, 0 basenames, 8 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes\r\nDEBUG|globset|globset/src/lib.rs:424: glob converted to regex: Glob { glob: \"**/.*.s[a-w][a-z]\", re: \"(?-u)^(?:/?|.*/)\\\\..*\\\\.s[a-w][a-z]$\", opts: GlobOptions { case_insensitive: false, literal_separator: false, backslash_escape: true }, tokens: Tokens([RecursivePrefix, Literal('.'), ZeroOrMore, Literal('.'), Literal('s'), Class { negated: false, ranges: [('a', 'w')] }, Class { negated: false, ranges: [('a', 'z')] }]) }\r\nDEBUG|globset|globset/src/lib.rs:429: built glob set; 0 literals, 3 basenames, 0 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 1 regexes\r\n$\r\n```\r\n\r\n#### If this is a bug, what is the expected behavior?\r\n\r\n`rg '\\d\\d\\d000' test.txt` should identify the single match in the file, as `grep` does. Specifically:\r\n\r\n```\r\n$ rg '\\d\\d\\d000' test.txt\r\n1:153.230000\r\n```\r\n\r\n#### Other\r\n\r\nNote that changing the corpus in seemingly irrelevant ways can cause the bug to change or disappear. For example, the `\\d\\d\\d000` pattern matches if three `0` characters are prepended to the contents of the file (that is, the file contains `000153.230000`). \r\n\r\n","closed_by":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1203/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1203/timeline","performed_via_github_app":null,"state_reason":"completed"}