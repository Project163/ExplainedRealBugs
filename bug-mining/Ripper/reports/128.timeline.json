[{"id":1005872010,"node_id":"MDEyOkxhYmVsZWRFdmVudDEwMDU4NzIwMTA=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1005872010","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2017-03-19T14:48:33Z","label":{"name":"question","color":"cc317c"},"performed_via_github_app":null},{"actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-19T14:49:01Z","updated_at":"2017-03-19T14:49:01Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/412","repository_url":"https://api.github.com/repos/BurntSushi/ripgrep","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/412/labels{/name}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/412/comments","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/412/events","html_url":"https://github.com/BurntSushi/ripgrep/pull/412","id":215264901,"node_id":"MDExOlB1bGxSZXF1ZXN0MTExNDUwNDUw","number":412,"title":"Removed debug info from release builds","user":{"login":"XAMPPRocky","id":4464295,"node_id":"MDQ6VXNlcjQ0NjQyOTU=","avatar_url":"https://avatars.githubusercontent.com/u/4464295?v=4","gravatar_id":"","url":"https://api.github.com/users/XAMPPRocky","html_url":"https://github.com/XAMPPRocky","followers_url":"https://api.github.com/users/XAMPPRocky/followers","following_url":"https://api.github.com/users/XAMPPRocky/following{/other_user}","gists_url":"https://api.github.com/users/XAMPPRocky/gists{/gist_id}","starred_url":"https://api.github.com/users/XAMPPRocky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/XAMPPRocky/subscriptions","organizations_url":"https://api.github.com/users/XAMPPRocky/orgs","repos_url":"https://api.github.com/users/XAMPPRocky/repos","events_url":"https://api.github.com/users/XAMPPRocky/events{/privacy}","received_events_url":"https://api.github.com/users/XAMPPRocky/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2017-03-19T13:44:07Z","updated_at":"2017-08-23T22:08:23Z","closed_at":"2017-08-23T22:08:22Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"repository":{"id":53631945,"node_id":"MDEwOlJlcG9zaXRvcnk1MzYzMTk0NQ==","name":"ripgrep","full_name":"BurntSushi/ripgrep","private":false,"owner":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/BurntSushi/ripgrep","description":"ripgrep recursively searches directories for a regex pattern while respecting your gitignore","fork":false,"url":"https://api.github.com/repos/BurntSushi/ripgrep","forks_url":"https://api.github.com/repos/BurntSushi/ripgrep/forks","keys_url":"https://api.github.com/repos/BurntSushi/ripgrep/keys{/key_id}","collaborators_url":"https://api.github.com/repos/BurntSushi/ripgrep/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/BurntSushi/ripgrep/teams","hooks_url":"https://api.github.com/repos/BurntSushi/ripgrep/hooks","issue_events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events{/number}","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/events","assignees_url":"https://api.github.com/repos/BurntSushi/ripgrep/assignees{/user}","branches_url":"https://api.github.com/repos/BurntSushi/ripgrep/branches{/branch}","tags_url":"https://api.github.com/repos/BurntSushi/ripgrep/tags","blobs_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/refs{/sha}","trees_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/trees{/sha}","statuses_url":"https://api.github.com/repos/BurntSushi/ripgrep/statuses/{sha}","languages_url":"https://api.github.com/repos/BurntSushi/ripgrep/languages","stargazers_url":"https://api.github.com/repos/BurntSushi/ripgrep/stargazers","contributors_url":"https://api.github.com/repos/BurntSushi/ripgrep/contributors","subscribers_url":"https://api.github.com/repos/BurntSushi/ripgrep/subscribers","subscription_url":"https://api.github.com/repos/BurntSushi/ripgrep/subscription","commits_url":"https://api.github.com/repos/BurntSushi/ripgrep/commits{/sha}","git_commits_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/commits{/sha}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/comments{/number}","issue_comment_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments{/number}","contents_url":"https://api.github.com/repos/BurntSushi/ripgrep/contents/{+path}","compare_url":"https://api.github.com/repos/BurntSushi/ripgrep/compare/{base}...{head}","merges_url":"https://api.github.com/repos/BurntSushi/ripgrep/merges","archive_url":"https://api.github.com/repos/BurntSushi/ripgrep/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/BurntSushi/ripgrep/downloads","issues_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues{/number}","pulls_url":"https://api.github.com/repos/BurntSushi/ripgrep/pulls{/number}","milestones_url":"https://api.github.com/repos/BurntSushi/ripgrep/milestones{/number}","notifications_url":"https://api.github.com/repos/BurntSushi/ripgrep/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/labels{/name}","releases_url":"https://api.github.com/repos/BurntSushi/ripgrep/releases{/id}","deployments_url":"https://api.github.com/repos/BurntSushi/ripgrep/deployments","created_at":"2016-03-11T02:02:33Z","updated_at":"2025-11-09T23:50:59Z","pushed_at":"2025-10-30T17:30:23Z","git_url":"git://github.com/BurntSushi/ripgrep.git","ssh_url":"git@github.com:BurntSushi/ripgrep.git","clone_url":"https://github.com/BurntSushi/ripgrep.git","svn_url":"https://github.com/BurntSushi/ripgrep","homepage":"","size":5534,"stargazers_count":57154,"watchers_count":57154,"language":"Rust","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2304,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":88,"license":{"key":"unlicense","name":"The Unlicense","spdx_id":"Unlicense","url":"https://api.github.com/licenses/unlicense","node_id":"MDc6TGljZW5zZTE1"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["cli","command-line","command-line-tool","gitignore","grep","recursively-search","regex","ripgrep","rust","search"],"visibility":"public","forks":2304,"open_issues":88,"watchers":57154,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/pulls/412","html_url":"https://github.com/BurntSushi/ripgrep/pull/412","diff_url":"https://github.com/BurntSushi/ripgrep/pull/412.diff","patch_url":"https://github.com/BurntSushi/ripgrep/pull/412.patch","merged_at":null},"body":"Having debug info enabled on release causes bloated binaries on Unix based systems. This affects people who use `cargo install ripgrep`.","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/412/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/412/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/287631765","html_url":"https://github.com/BurntSushi/ripgrep/issues/413#issuecomment-287631765","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/413","id":287631765,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzYzMTc2NQ==","user":{"login":"sfackler","id":1455697,"node_id":"MDQ6VXNlcjE0NTU2OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1455697?v=4","gravatar_id":"","url":"https://api.github.com/users/sfackler","html_url":"https://github.com/sfackler","followers_url":"https://api.github.com/users/sfackler/followers","following_url":"https://api.github.com/users/sfackler/following{/other_user}","gists_url":"https://api.github.com/users/sfackler/gists{/gist_id}","starred_url":"https://api.github.com/users/sfackler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfackler/subscriptions","organizations_url":"https://api.github.com/users/sfackler/orgs","repos_url":"https://api.github.com/users/sfackler/repos","events_url":"https://api.github.com/users/sfackler/events{/privacy}","received_events_url":"https://api.github.com/users/sfackler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-19T17:18:14Z","updated_at":"2017-03-19T17:18:14Z","body":"As of the 1.16 release, you can set `debug = 1` or `debug = 2` to select the level of debuginfo you want in addition to `debug = true` (which acts like `debug = 2`). I believe level 1 debuginfo includes everything necessary for backtraces and profiling? Not sure what the size difference is though.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/287631765/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sfackler","id":1455697,"node_id":"MDQ6VXNlcjE0NTU2OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1455697?v=4","gravatar_id":"","url":"https://api.github.com/users/sfackler","html_url":"https://github.com/sfackler","followers_url":"https://api.github.com/users/sfackler/followers","following_url":"https://api.github.com/users/sfackler/following{/other_user}","gists_url":"https://api.github.com/users/sfackler/gists{/gist_id}","starred_url":"https://api.github.com/users/sfackler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfackler/subscriptions","organizations_url":"https://api.github.com/users/sfackler/orgs","repos_url":"https://api.github.com/users/sfackler/repos","events_url":"https://api.github.com/users/sfackler/events{/privacy}","received_events_url":"https://api.github.com/users/sfackler/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/287636771","html_url":"https://github.com/BurntSushi/ripgrep/issues/413#issuecomment-287636771","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/413","id":287636771,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzYzNjc3MQ==","user":{"login":"XAMPPRocky","id":4464295,"node_id":"MDQ6VXNlcjQ0NjQyOTU=","avatar_url":"https://avatars.githubusercontent.com/u/4464295?v=4","gravatar_id":"","url":"https://api.github.com/users/XAMPPRocky","html_url":"https://github.com/XAMPPRocky","followers_url":"https://api.github.com/users/XAMPPRocky/followers","following_url":"https://api.github.com/users/XAMPPRocky/following{/other_user}","gists_url":"https://api.github.com/users/XAMPPRocky/gists{/gist_id}","starred_url":"https://api.github.com/users/XAMPPRocky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/XAMPPRocky/subscriptions","organizations_url":"https://api.github.com/users/XAMPPRocky/orgs","repos_url":"https://api.github.com/users/XAMPPRocky/repos","events_url":"https://api.github.com/users/XAMPPRocky/events{/privacy}","received_events_url":"https://api.github.com/users/XAMPPRocky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-19T18:32:40Z","updated_at":"2017-03-19T18:32:40Z","body":"I definitely feel the same with having to worry about making sure to not to publish with `debug = true`, one possible solution I was thinking was if there was another cargo profile. A way to differentiate between a `cargo install` and `cargo build --release`. With the install profile restricted in what it can override, maybe it can only toggle debug.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/287636771/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"XAMPPRocky","id":4464295,"node_id":"MDQ6VXNlcjQ0NjQyOTU=","avatar_url":"https://avatars.githubusercontent.com/u/4464295?v=4","gravatar_id":"","url":"https://api.github.com/users/XAMPPRocky","html_url":"https://github.com/XAMPPRocky","followers_url":"https://api.github.com/users/XAMPPRocky/followers","following_url":"https://api.github.com/users/XAMPPRocky/following{/other_user}","gists_url":"https://api.github.com/users/XAMPPRocky/gists{/gist_id}","starred_url":"https://api.github.com/users/XAMPPRocky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/XAMPPRocky/subscriptions","organizations_url":"https://api.github.com/users/XAMPPRocky/orgs","repos_url":"https://api.github.com/users/XAMPPRocky/repos","events_url":"https://api.github.com/users/XAMPPRocky/events{/privacy}","received_events_url":"https://api.github.com/users/XAMPPRocky/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/289680439","html_url":"https://github.com/BurntSushi/ripgrep/issues/413#issuecomment-289680439","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/413","id":289680439,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTY4MDQzOQ==","user":{"login":"pftbest","id":1573340,"node_id":"MDQ6VXNlcjE1NzMzNDA=","avatar_url":"https://avatars.githubusercontent.com/u/1573340?v=4","gravatar_id":"","url":"https://api.github.com/users/pftbest","html_url":"https://github.com/pftbest","followers_url":"https://api.github.com/users/pftbest/followers","following_url":"https://api.github.com/users/pftbest/following{/other_user}","gists_url":"https://api.github.com/users/pftbest/gists{/gist_id}","starred_url":"https://api.github.com/users/pftbest/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pftbest/subscriptions","organizations_url":"https://api.github.com/users/pftbest/orgs","repos_url":"https://api.github.com/users/pftbest/repos","events_url":"https://api.github.com/users/pftbest/events{/privacy}","received_events_url":"https://api.github.com/users/pftbest/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-28T06:55:03Z","updated_at":"2017-03-28T06:55:03Z","body":"Please also note that when debuginfo is enabled frame pointers are not eliminated.\r\nhttps://github.com/rust-lang/rust/issues/11906\r\nThis may (or may not) have some impact on a performance.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/289680439/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pftbest","id":1573340,"node_id":"MDQ6VXNlcjE1NzMzNDA=","avatar_url":"https://avatars.githubusercontent.com/u/1573340?v=4","gravatar_id":"","url":"https://api.github.com/users/pftbest","html_url":"https://github.com/pftbest","followers_url":"https://api.github.com/users/pftbest/followers","following_url":"https://api.github.com/users/pftbest/following{/other_user}","gists_url":"https://api.github.com/users/pftbest/gists{/gist_id}","starred_url":"https://api.github.com/users/pftbest/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pftbest/subscriptions","organizations_url":"https://api.github.com/users/pftbest/orgs","repos_url":"https://api.github.com/users/pftbest/repos","events_url":"https://api.github.com/users/pftbest/events{/privacy}","received_events_url":"https://api.github.com/users/pftbest/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/290982355","html_url":"https://github.com/BurntSushi/ripgrep/issues/413#issuecomment-290982355","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/413","id":290982355,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDk4MjM1NQ==","user":{"login":"DoumanAsh","id":5676053,"node_id":"MDQ6VXNlcjU2NzYwNTM=","avatar_url":"https://avatars.githubusercontent.com/u/5676053?v=4","gravatar_id":"","url":"https://api.github.com/users/DoumanAsh","html_url":"https://github.com/DoumanAsh","followers_url":"https://api.github.com/users/DoumanAsh/followers","following_url":"https://api.github.com/users/DoumanAsh/following{/other_user}","gists_url":"https://api.github.com/users/DoumanAsh/gists{/gist_id}","starred_url":"https://api.github.com/users/DoumanAsh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DoumanAsh/subscriptions","organizations_url":"https://api.github.com/users/DoumanAsh/orgs","repos_url":"https://api.github.com/users/DoumanAsh/repos","events_url":"https://api.github.com/users/DoumanAsh/events{/privacy}","received_events_url":"https://api.github.com/users/DoumanAsh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-02T12:08:23Z","updated_at":"2017-04-02T12:09:01Z","body":"You can also consider to add `lto = true` for published builds.\r\nAs far as i know it is not a default for release builds.\r\nBut it requires testing.\r\nIt didn't give much difference on msvc toolchain for me\r\n\r\nOn other hand you can have debug symbols separately (cargo build even produces `pdb` for binaries), but i'm not sure if it possible to tell cargo to produce them separately instead of bundling together?\r\nSince `cargo build` is capable (need confirmation on linux) it should be possible?\r\nMost profiling tools accept loading of symbols in the same directory as your binary.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/290982355/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"DoumanAsh","id":5676053,"node_id":"MDQ6VXNlcjU2NzYwNTM=","avatar_url":"https://avatars.githubusercontent.com/u/5676053?v=4","gravatar_id":"","url":"https://api.github.com/users/DoumanAsh","html_url":"https://github.com/DoumanAsh","followers_url":"https://api.github.com/users/DoumanAsh/followers","following_url":"https://api.github.com/users/DoumanAsh/following{/other_user}","gists_url":"https://api.github.com/users/DoumanAsh/gists{/gist_id}","starred_url":"https://api.github.com/users/DoumanAsh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DoumanAsh/subscriptions","organizations_url":"https://api.github.com/users/DoumanAsh/orgs","repos_url":"https://api.github.com/users/DoumanAsh/repos","events_url":"https://api.github.com/users/DoumanAsh/events{/privacy}","received_events_url":"https://api.github.com/users/DoumanAsh/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/291538586","html_url":"https://github.com/BurntSushi/ripgrep/issues/413#issuecomment-291538586","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/413","id":291538586,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MTUzODU4Ng==","user":{"login":"kbknapp","id":6942134,"node_id":"MDQ6VXNlcjY5NDIxMzQ=","avatar_url":"https://avatars.githubusercontent.com/u/6942134?v=4","gravatar_id":"","url":"https://api.github.com/users/kbknapp","html_url":"https://github.com/kbknapp","followers_url":"https://api.github.com/users/kbknapp/followers","following_url":"https://api.github.com/users/kbknapp/following{/other_user}","gists_url":"https://api.github.com/users/kbknapp/gists{/gist_id}","starred_url":"https://api.github.com/users/kbknapp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbknapp/subscriptions","organizations_url":"https://api.github.com/users/kbknapp/orgs","repos_url":"https://api.github.com/users/kbknapp/repos","events_url":"https://api.github.com/users/kbknapp/events{/privacy}","received_events_url":"https://api.github.com/users/kbknapp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-04T15:34:31Z","updated_at":"2017-04-04T15:34:31Z","body":"Using `lto = true` was discussed in BurntSushi/ripgrep#325 with the problem being compile times suffer for little gain (performance). However, quoting @BurntSushi \r\n\r\n> If someone wanted this then I'd be open to adding it only in CI when the final release artifact is produced.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/291538586/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kbknapp","id":6942134,"node_id":"MDQ6VXNlcjY5NDIxMzQ=","avatar_url":"https://avatars.githubusercontent.com/u/6942134?v=4","gravatar_id":"","url":"https://api.github.com/users/kbknapp","html_url":"https://github.com/kbknapp","followers_url":"https://api.github.com/users/kbknapp/followers","following_url":"https://api.github.com/users/kbknapp/following{/other_user}","gists_url":"https://api.github.com/users/kbknapp/gists{/gist_id}","starred_url":"https://api.github.com/users/kbknapp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbknapp/subscriptions","organizations_url":"https://api.github.com/users/kbknapp/orgs","repos_url":"https://api.github.com/users/kbknapp/repos","events_url":"https://api.github.com/users/kbknapp/events{/privacy}","received_events_url":"https://api.github.com/users/kbknapp/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1028638587,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTAyODYzODU4Nw==","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1028638587","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-04-04T15:34:31Z","performed_via_github_app":null},{"id":1028638589,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDEwMjg2Mzg1ODk=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1028638589","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-04-04T15:34:31Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/294661726","html_url":"https://github.com/BurntSushi/ripgrep/issues/413#issuecomment-294661726","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/413","id":294661726,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NDY2MTcyNg==","user":{"login":"retep998","id":666308,"node_id":"MDQ6VXNlcjY2NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/666308?v=4","gravatar_id":"","url":"https://api.github.com/users/retep998","html_url":"https://github.com/retep998","followers_url":"https://api.github.com/users/retep998/followers","following_url":"https://api.github.com/users/retep998/following{/other_user}","gists_url":"https://api.github.com/users/retep998/gists{/gist_id}","starred_url":"https://api.github.com/users/retep998/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/retep998/subscriptions","organizations_url":"https://api.github.com/users/retep998/orgs","repos_url":"https://api.github.com/users/retep998/repos","events_url":"https://api.github.com/users/retep998/events{/privacy}","received_events_url":"https://api.github.com/users/retep998/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-18T03:09:44Z","updated_at":"2017-04-18T03:09:44Z","body":"Enabling debuginfo for msvc during `cargo install` provides no benefit because the .pdb is thrown away so you couldn't get a sane backtrace anyway. If you manually distribute compiled binaries with the .pdb then the debuginfo becomes valuable.\r\n\r\n>It didn't give much difference on msvc toolchain for me\r\n\r\nThis is because what you're seeing is LTO stripping unreferenced functions which ld is actually *really* bad at while link.exe is amazing at it. As a result LTO is just bringing the size of gnu binaries *closer* to where msvc binaries already are. LTO is still useful to maximize inlining potential though.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/294661726/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"retep998","id":666308,"node_id":"MDQ6VXNlcjY2NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/666308?v=4","gravatar_id":"","url":"https://api.github.com/users/retep998","html_url":"https://github.com/retep998","followers_url":"https://api.github.com/users/retep998/followers","following_url":"https://api.github.com/users/retep998/following{/other_user}","gists_url":"https://api.github.com/users/retep998/gists{/gist_id}","starred_url":"https://api.github.com/users/retep998/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/retep998/subscriptions","organizations_url":"https://api.github.com/users/retep998/orgs","repos_url":"https://api.github.com/users/retep998/repos","events_url":"https://api.github.com/users/retep998/events{/privacy}","received_events_url":"https://api.github.com/users/retep998/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/295019107","html_url":"https://github.com/BurntSushi/ripgrep/issues/413#issuecomment-295019107","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/413","id":295019107,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NTAxOTEwNw==","user":{"login":"scottchiefbaker","id":3429760,"node_id":"MDQ6VXNlcjM0Mjk3NjA=","avatar_url":"https://avatars.githubusercontent.com/u/3429760?v=4","gravatar_id":"","url":"https://api.github.com/users/scottchiefbaker","html_url":"https://github.com/scottchiefbaker","followers_url":"https://api.github.com/users/scottchiefbaker/followers","following_url":"https://api.github.com/users/scottchiefbaker/following{/other_user}","gists_url":"https://api.github.com/users/scottchiefbaker/gists{/gist_id}","starred_url":"https://api.github.com/users/scottchiefbaker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/scottchiefbaker/subscriptions","organizations_url":"https://api.github.com/users/scottchiefbaker/orgs","repos_url":"https://api.github.com/users/scottchiefbaker/repos","events_url":"https://api.github.com/users/scottchiefbaker/events{/privacy}","received_events_url":"https://api.github.com/users/scottchiefbaker/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-18T23:53:24Z","updated_at":"2017-04-18T23:53:34Z","body":"I didn't know debug info was enabled and while I was doing a casual comparison of `ag` vs `rg` and I noticed the file sizes were **drastically** different.\r\n\r\n`ag` is 244KB\r\n`rg` is 25**MB**\r\n\r\nI think it send the wrong message if you're 100x larger than the competition. The majority of people using ripgrep will never use the debug information so it's wasteful in both bandwidth and disk space.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/295019107/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"scottchiefbaker","id":3429760,"node_id":"MDQ6VXNlcjM0Mjk3NjA=","avatar_url":"https://avatars.githubusercontent.com/u/3429760?v=4","gravatar_id":"","url":"https://api.github.com/users/scottchiefbaker","html_url":"https://github.com/scottchiefbaker","followers_url":"https://api.github.com/users/scottchiefbaker/followers","following_url":"https://api.github.com/users/scottchiefbaker/following{/other_user}","gists_url":"https://api.github.com/users/scottchiefbaker/gists{/gist_id}","starred_url":"https://api.github.com/users/scottchiefbaker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/scottchiefbaker/subscriptions","organizations_url":"https://api.github.com/users/scottchiefbaker/orgs","repos_url":"https://api.github.com/users/scottchiefbaker/repos","events_url":"https://api.github.com/users/scottchiefbaker/events{/privacy}","received_events_url":"https://api.github.com/users/scottchiefbaker/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/295026969","html_url":"https://github.com/BurntSushi/ripgrep/issues/413#issuecomment-295026969","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/413","id":295026969,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NTAyNjk2OQ==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-19T00:40:57Z","updated_at":"2017-04-19T00:40:57Z","body":"Why does it matter? If you care about a few megs of disk space, then I'm willing to bet that's a pretty specialized use case. In that case, just strip the binary yourself.\r\n\r\nI don't know what \"wrong message\" you are referring to. Could you please be more specific?","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/295026969/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/295060262","html_url":"https://github.com/BurntSushi/ripgrep/issues/413#issuecomment-295060262","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/413","id":295060262,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NTA2MDI2Mg==","user":{"login":"retep998","id":666308,"node_id":"MDQ6VXNlcjY2NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/666308?v=4","gravatar_id":"","url":"https://api.github.com/users/retep998","html_url":"https://github.com/retep998","followers_url":"https://api.github.com/users/retep998/followers","following_url":"https://api.github.com/users/retep998/following{/other_user}","gists_url":"https://api.github.com/users/retep998/gists{/gist_id}","starred_url":"https://api.github.com/users/retep998/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/retep998/subscriptions","organizations_url":"https://api.github.com/users/retep998/orgs","repos_url":"https://api.github.com/users/retep998/repos","events_url":"https://api.github.com/users/retep998/events{/privacy}","received_events_url":"https://api.github.com/users/retep998/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-19T03:28:52Z","updated_at":"2017-04-19T03:28:52Z","body":"Wow, the difference between msvc and gnu is pretty huge. For the latest release x86_64-pc-windows-gnu is 24,228,086 bytes while x86_64-pc-windows-msvc is 2,445,312 bytes, almost exactly an order of magnitude difference.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/295060262/reactions","total_count":1,"+1":0,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"retep998","id":666308,"node_id":"MDQ6VXNlcjY2NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/666308?v=4","gravatar_id":"","url":"https://api.github.com/users/retep998","html_url":"https://github.com/retep998","followers_url":"https://api.github.com/users/retep998/followers","following_url":"https://api.github.com/users/retep998/following{/other_user}","gists_url":"https://api.github.com/users/retep998/gists{/gist_id}","starred_url":"https://api.github.com/users/retep998/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/retep998/subscriptions","organizations_url":"https://api.github.com/users/retep998/orgs","repos_url":"https://api.github.com/users/retep998/repos","events_url":"https://api.github.com/users/retep998/events{/privacy}","received_events_url":"https://api.github.com/users/retep998/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/300307057","html_url":"https://github.com/BurntSushi/ripgrep/issues/413#issuecomment-300307057","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/413","id":300307057,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMDMwNzA1Nw==","user":{"login":"kaushalmodi","id":3578197,"node_id":"MDQ6VXNlcjM1NzgxOTc=","avatar_url":"https://avatars.githubusercontent.com/u/3578197?v=4","gravatar_id":"","url":"https://api.github.com/users/kaushalmodi","html_url":"https://github.com/kaushalmodi","followers_url":"https://api.github.com/users/kaushalmodi/followers","following_url":"https://api.github.com/users/kaushalmodi/following{/other_user}","gists_url":"https://api.github.com/users/kaushalmodi/gists{/gist_id}","starred_url":"https://api.github.com/users/kaushalmodi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaushalmodi/subscriptions","organizations_url":"https://api.github.com/users/kaushalmodi/orgs","repos_url":"https://api.github.com/users/kaushalmodi/repos","events_url":"https://api.github.com/users/kaushalmodi/events{/privacy}","received_events_url":"https://api.github.com/users/kaushalmodi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-09T21:28:53Z","updated_at":"2017-05-09T21:29:15Z","body":"[Setting `debug` to `false`][1] reduced built `rg` binary size on RHEL 6.6 from 25 MB to 5.8 MB.\r\n\r\n[1]: https://gist.github.com/17f03efe2e57265d90c48d39f5dabc27","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/300307057/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":2,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kaushalmodi","id":3578197,"node_id":"MDQ6VXNlcjM1NzgxOTc=","avatar_url":"https://avatars.githubusercontent.com/u/3578197?v=4","gravatar_id":"","url":"https://api.github.com/users/kaushalmodi","html_url":"https://github.com/kaushalmodi","followers_url":"https://api.github.com/users/kaushalmodi/followers","following_url":"https://api.github.com/users/kaushalmodi/following{/other_user}","gists_url":"https://api.github.com/users/kaushalmodi/gists{/gist_id}","starred_url":"https://api.github.com/users/kaushalmodi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaushalmodi/subscriptions","organizations_url":"https://api.github.com/users/kaushalmodi/orgs","repos_url":"https://api.github.com/users/kaushalmodi/repos","events_url":"https://api.github.com/users/kaushalmodi/events{/privacy}","received_events_url":"https://api.github.com/users/kaushalmodi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/303135643","html_url":"https://github.com/BurntSushi/ripgrep/issues/413#issuecomment-303135643","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/413","id":303135643,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzEzNTY0Mw==","user":{"login":"luser","id":286001,"node_id":"MDQ6VXNlcjI4NjAwMQ==","avatar_url":"https://avatars.githubusercontent.com/u/286001?v=4","gravatar_id":"","url":"https://api.github.com/users/luser","html_url":"https://github.com/luser","followers_url":"https://api.github.com/users/luser/followers","following_url":"https://api.github.com/users/luser/following{/other_user}","gists_url":"https://api.github.com/users/luser/gists{/gist_id}","starred_url":"https://api.github.com/users/luser/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luser/subscriptions","organizations_url":"https://api.github.com/users/luser/orgs","repos_url":"https://api.github.com/users/luser/repos","events_url":"https://api.github.com/users/luser/events{/privacy}","received_events_url":"https://api.github.com/users/luser/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-22T15:32:51Z","updated_at":"2017-05-22T15:32:51Z","body":"One thing that might be feasible in the future is using ELF compressed sections. For example:\r\n```\r\n$ ls -l /tmp/rg\r\n-rwxr-xr-x 1 luser docker 21233872 May 22 11:23 /tmp/rg\r\n$ objcopy --compress-debug-sections /tmp/rg\r\n$ ls -l /tmp/rg\r\n-rwxr-xr-x 1 luser docker 6196568 May 22 11:24 /tmp/rg\r\n```\r\nUnfortunately libbacktrace doesn't support reading them yet, so this breaks their usefulness in Rust backtraces. If that got fixed it'd be a nice easy win (DWARF is pretty verbose).","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/303135643/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"luser","id":286001,"node_id":"MDQ6VXNlcjI4NjAwMQ==","avatar_url":"https://avatars.githubusercontent.com/u/286001?v=4","gravatar_id":"","url":"https://api.github.com/users/luser","html_url":"https://github.com/luser","followers_url":"https://api.github.com/users/luser/followers","following_url":"https://api.github.com/users/luser/following{/other_user}","gists_url":"https://api.github.com/users/luser/gists{/gist_id}","starred_url":"https://api.github.com/users/luser/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luser/subscriptions","organizations_url":"https://api.github.com/users/luser/orgs","repos_url":"https://api.github.com/users/luser/repos","events_url":"https://api.github.com/users/luser/events{/privacy}","received_events_url":"https://api.github.com/users/luser/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1218733991,"node_id":"MDExOkNsb3NlZEV2ZW50MTIxODczMzk5MQ==","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1218733991","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"30ca3ecca65d06ebc1d0794f3968397709aff9a8","commit_url":"https://api.github.com/repos/BurntSushi/ripgrep/commits/30ca3ecca65d06ebc1d0794f3968397709aff9a8","created_at":"2017-08-23T22:07:58Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"joshsleeper","id":849941,"node_id":"MDQ6VXNlcjg0OTk0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/849941?v=4","gravatar_id":"","url":"https://api.github.com/users/joshsleeper","html_url":"https://github.com/joshsleeper","followers_url":"https://api.github.com/users/joshsleeper/followers","following_url":"https://api.github.com/users/joshsleeper/following{/other_user}","gists_url":"https://api.github.com/users/joshsleeper/gists{/gist_id}","starred_url":"https://api.github.com/users/joshsleeper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshsleeper/subscriptions","organizations_url":"https://api.github.com/users/joshsleeper/orgs","repos_url":"https://api.github.com/users/joshsleeper/repos","events_url":"https://api.github.com/users/joshsleeper/events{/privacy}","received_events_url":"https://api.github.com/users/joshsleeper/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-05T23:19:46Z","updated_at":"2017-09-05T23:19:46Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/595","repository_url":"https://api.github.com/repos/BurntSushi/ripgrep","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/595/labels{/name}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/595/comments","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/595/events","html_url":"https://github.com/BurntSushi/ripgrep/issues/595","id":255436092,"node_id":"MDU6SXNzdWUyNTU0MzYwOTI=","number":595,"title":"ripgrep binary doesn't appear to be `strip`ed on Unix like expected","user":{"login":"joshsleeper","id":849941,"node_id":"MDQ6VXNlcjg0OTk0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/849941?v=4","gravatar_id":"","url":"https://api.github.com/users/joshsleeper","html_url":"https://github.com/joshsleeper","followers_url":"https://api.github.com/users/joshsleeper/followers","following_url":"https://api.github.com/users/joshsleeper/following{/other_user}","gists_url":"https://api.github.com/users/joshsleeper/gists{/gist_id}","starred_url":"https://api.github.com/users/joshsleeper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshsleeper/subscriptions","organizations_url":"https://api.github.com/users/joshsleeper/orgs","repos_url":"https://api.github.com/users/joshsleeper/repos","events_url":"https://api.github.com/users/joshsleeper/events{/privacy}","received_events_url":"https://api.github.com/users/joshsleeper/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":339721678,"node_id":"MDU6TGFiZWwzMzk3MjE2Nzg=","url":"https://api.github.com/repos/BurntSushi/ripgrep/labels/bug","name":"bug","color":"fc2929","default":true,"description":"A bug."},{"id":449399236,"node_id":"MDU6TGFiZWw0NDkzOTkyMzY=","url":"https://api.github.com/repos/BurntSushi/ripgrep/labels/doc","name":"doc","color":"fbca04","default":false,"description":"An issue with or an improvement to documentation."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2017-09-05T23:19:46Z","updated_at":"2022-04-15T15:35:23Z","closed_at":"2017-10-08T12:01:30Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":53631945,"node_id":"MDEwOlJlcG9zaXRvcnk1MzYzMTk0NQ==","name":"ripgrep","full_name":"BurntSushi/ripgrep","private":false,"owner":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/BurntSushi/ripgrep","description":"ripgrep recursively searches directories for a regex pattern while respecting your gitignore","fork":false,"url":"https://api.github.com/repos/BurntSushi/ripgrep","forks_url":"https://api.github.com/repos/BurntSushi/ripgrep/forks","keys_url":"https://api.github.com/repos/BurntSushi/ripgrep/keys{/key_id}","collaborators_url":"https://api.github.com/repos/BurntSushi/ripgrep/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/BurntSushi/ripgrep/teams","hooks_url":"https://api.github.com/repos/BurntSushi/ripgrep/hooks","issue_events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events{/number}","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/events","assignees_url":"https://api.github.com/repos/BurntSushi/ripgrep/assignees{/user}","branches_url":"https://api.github.com/repos/BurntSushi/ripgrep/branches{/branch}","tags_url":"https://api.github.com/repos/BurntSushi/ripgrep/tags","blobs_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/refs{/sha}","trees_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/trees{/sha}","statuses_url":"https://api.github.com/repos/BurntSushi/ripgrep/statuses/{sha}","languages_url":"https://api.github.com/repos/BurntSushi/ripgrep/languages","stargazers_url":"https://api.github.com/repos/BurntSushi/ripgrep/stargazers","contributors_url":"https://api.github.com/repos/BurntSushi/ripgrep/contributors","subscribers_url":"https://api.github.com/repos/BurntSushi/ripgrep/subscribers","subscription_url":"https://api.github.com/repos/BurntSushi/ripgrep/subscription","commits_url":"https://api.github.com/repos/BurntSushi/ripgrep/commits{/sha}","git_commits_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/commits{/sha}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/comments{/number}","issue_comment_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments{/number}","contents_url":"https://api.github.com/repos/BurntSushi/ripgrep/contents/{+path}","compare_url":"https://api.github.com/repos/BurntSushi/ripgrep/compare/{base}...{head}","merges_url":"https://api.github.com/repos/BurntSushi/ripgrep/merges","archive_url":"https://api.github.com/repos/BurntSushi/ripgrep/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/BurntSushi/ripgrep/downloads","issues_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues{/number}","pulls_url":"https://api.github.com/repos/BurntSushi/ripgrep/pulls{/number}","milestones_url":"https://api.github.com/repos/BurntSushi/ripgrep/milestones{/number}","notifications_url":"https://api.github.com/repos/BurntSushi/ripgrep/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/labels{/name}","releases_url":"https://api.github.com/repos/BurntSushi/ripgrep/releases{/id}","deployments_url":"https://api.github.com/repos/BurntSushi/ripgrep/deployments","created_at":"2016-03-11T02:02:33Z","updated_at":"2025-11-09T23:50:59Z","pushed_at":"2025-10-30T17:30:23Z","git_url":"git://github.com/BurntSushi/ripgrep.git","ssh_url":"git@github.com:BurntSushi/ripgrep.git","clone_url":"https://github.com/BurntSushi/ripgrep.git","svn_url":"https://github.com/BurntSushi/ripgrep","homepage":"","size":5534,"stargazers_count":57154,"watchers_count":57154,"language":"Rust","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2304,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":88,"license":{"key":"unlicense","name":"The Unlicense","spdx_id":"Unlicense","url":"https://api.github.com/licenses/unlicense","node_id":"MDc6TGljZW5zZTE1"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["cli","command-line","command-line-tool","gitignore","grep","recursively-search","regex","ripgrep","rust","search"],"visibility":"public","forks":2304,"open_issues":88,"watchers":57154,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"rustc 1.20.0 (f3d6973f4 2017-08-27)\r\ncargo 0.21.0 (5b4b8b2ae 2017-08-12)\r\nripgrep 0.6.0 -AVX -SIMD\r\n\r\nDespite the discussion in #413 and the resultant commit 30ca3ecca65d06ebc1d0794f3968397709aff9a8, I'm still seeing rather large binaries after a fresh `cargo install ripgrep` on my CentOS 7 box (~27 MiB)\r\n\r\nRunning `strip ~/.cargo/bin/rg` gives me a binary that's a magnitude of size smaller, like expressed in #413.\r\n\r\nDid I misunderstand the effect of that commit, or is this a bug?","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/595/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/595/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"pjenvey","id":14639,"node_id":"MDQ6VXNlcjE0NjM5","avatar_url":"https://avatars.githubusercontent.com/u/14639?v=4","gravatar_id":"","url":"https://api.github.com/users/pjenvey","html_url":"https://github.com/pjenvey","followers_url":"https://api.github.com/users/pjenvey/followers","following_url":"https://api.github.com/users/pjenvey/following{/other_user}","gists_url":"https://api.github.com/users/pjenvey/gists{/gist_id}","starred_url":"https://api.github.com/users/pjenvey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjenvey/subscriptions","organizations_url":"https://api.github.com/users/pjenvey/orgs","repos_url":"https://api.github.com/users/pjenvey/repos","events_url":"https://api.github.com/users/pjenvey/events{/privacy}","received_events_url":"https://api.github.com/users/pjenvey/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-21T18:43:28Z","updated_at":"2018-11-21T18:43:28Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/mozilla-services/autopush-rs/issues/77","repository_url":"https://api.github.com/repos/mozilla-services/autopush-rs","labels_url":"https://api.github.com/repos/mozilla-services/autopush-rs/issues/77/labels{/name}","comments_url":"https://api.github.com/repos/mozilla-services/autopush-rs/issues/77/comments","events_url":"https://api.github.com/repos/mozilla-services/autopush-rs/issues/77/events","html_url":"https://github.com/mozilla-services/autopush-rs/issues/77","id":361403109,"node_id":"MDU6SXNzdWUzNjE0MDMxMDk=","number":77,"title":"Include debuginfo in release builds","user":{"login":"bbangert","id":100193,"node_id":"MDQ6VXNlcjEwMDE5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/100193?v=4","gravatar_id":"","url":"https://api.github.com/users/bbangert","html_url":"https://github.com/bbangert","followers_url":"https://api.github.com/users/bbangert/followers","following_url":"https://api.github.com/users/bbangert/following{/other_user}","gists_url":"https://api.github.com/users/bbangert/gists{/gist_id}","starred_url":"https://api.github.com/users/bbangert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bbangert/subscriptions","organizations_url":"https://api.github.com/users/bbangert/orgs","repos_url":"https://api.github.com/users/bbangert/repos","events_url":"https://api.github.com/users/bbangert/events{/privacy}","received_events_url":"https://api.github.com/users/bbangert/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":950848299,"node_id":"MDU6TGFiZWw5NTA4NDgyOTk=","url":"https://api.github.com/repos/mozilla-services/autopush-rs/labels/enhancement","name":"enhancement","color":"84b6eb","default":true,"description":"New feature or request"},{"id":950851588,"node_id":"MDU6TGFiZWw5NTA4NTE1ODg=","url":"https://api.github.com/repos/mozilla-services/autopush-rs/labels/p1","name":"p1","color":"b60205","default":false,"description":""},{"id":955928711,"node_id":"MDU6TGFiZWw5NTU5Mjg3MTE=","url":"https://api.github.com/repos/mozilla-services/autopush-rs/labels/ready","name":"ready","color":"ededed","default":false,"description":null},{"id":1586630103,"node_id":"MDU6TGFiZWwxNTg2NjMwMTAz","url":"https://api.github.com/repos/mozilla-services/autopush-rs/labels/1","name":"1","color":"ef7f30","default":false,"description":"Estimate - Trivial"}],"state":"closed","locked":false,"assignee":{"login":"AzureMarker","id":4417660,"node_id":"MDQ6VXNlcjQ0MTc2NjA=","avatar_url":"https://avatars.githubusercontent.com/u/4417660?v=4","gravatar_id":"","url":"https://api.github.com/users/AzureMarker","html_url":"https://github.com/AzureMarker","followers_url":"https://api.github.com/users/AzureMarker/followers","following_url":"https://api.github.com/users/AzureMarker/following{/other_user}","gists_url":"https://api.github.com/users/AzureMarker/gists{/gist_id}","starred_url":"https://api.github.com/users/AzureMarker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AzureMarker/subscriptions","organizations_url":"https://api.github.com/users/AzureMarker/orgs","repos_url":"https://api.github.com/users/AzureMarker/repos","events_url":"https://api.github.com/users/AzureMarker/events{/privacy}","received_events_url":"https://api.github.com/users/AzureMarker/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"AzureMarker","id":4417660,"node_id":"MDQ6VXNlcjQ0MTc2NjA=","avatar_url":"https://avatars.githubusercontent.com/u/4417660?v=4","gravatar_id":"","url":"https://api.github.com/users/AzureMarker","html_url":"https://github.com/AzureMarker","followers_url":"https://api.github.com/users/AzureMarker/followers","following_url":"https://api.github.com/users/AzureMarker/following{/other_user}","gists_url":"https://api.github.com/users/AzureMarker/gists{/gist_id}","starred_url":"https://api.github.com/users/AzureMarker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AzureMarker/subscriptions","organizations_url":"https://api.github.com/users/AzureMarker/orgs","repos_url":"https://api.github.com/users/AzureMarker/repos","events_url":"https://api.github.com/users/AzureMarker/events{/privacy}","received_events_url":"https://api.github.com/users/AzureMarker/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":3,"created_at":"2018-09-18T17:17:51Z","updated_at":"2020-08-10T19:19:35Z","closed_at":"2020-08-10T19:19:35Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":135631198,"node_id":"MDEwOlJlcG9zaXRvcnkxMzU2MzExOTg=","name":"autopush-rs","full_name":"mozilla-services/autopush-rs","private":false,"owner":{"login":"mozilla-services","id":1066228,"node_id":"MDEyOk9yZ2FuaXphdGlvbjEwNjYyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/1066228?v=4","gravatar_id":"","url":"https://api.github.com/users/mozilla-services","html_url":"https://github.com/mozilla-services","followers_url":"https://api.github.com/users/mozilla-services/followers","following_url":"https://api.github.com/users/mozilla-services/following{/other_user}","gists_url":"https://api.github.com/users/mozilla-services/gists{/gist_id}","starred_url":"https://api.github.com/users/mozilla-services/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mozilla-services/subscriptions","organizations_url":"https://api.github.com/users/mozilla-services/orgs","repos_url":"https://api.github.com/users/mozilla-services/repos","events_url":"https://api.github.com/users/mozilla-services/events{/privacy}","received_events_url":"https://api.github.com/users/mozilla-services/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/mozilla-services/autopush-rs","description":"Push Server in Rust","fork":false,"url":"https://api.github.com/repos/mozilla-services/autopush-rs","forks_url":"https://api.github.com/repos/mozilla-services/autopush-rs/forks","keys_url":"https://api.github.com/repos/mozilla-services/autopush-rs/keys{/key_id}","collaborators_url":"https://api.github.com/repos/mozilla-services/autopush-rs/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/mozilla-services/autopush-rs/teams","hooks_url":"https://api.github.com/repos/mozilla-services/autopush-rs/hooks","issue_events_url":"https://api.github.com/repos/mozilla-services/autopush-rs/issues/events{/number}","events_url":"https://api.github.com/repos/mozilla-services/autopush-rs/events","assignees_url":"https://api.github.com/repos/mozilla-services/autopush-rs/assignees{/user}","branches_url":"https://api.github.com/repos/mozilla-services/autopush-rs/branches{/branch}","tags_url":"https://api.github.com/repos/mozilla-services/autopush-rs/tags","blobs_url":"https://api.github.com/repos/mozilla-services/autopush-rs/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/mozilla-services/autopush-rs/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/mozilla-services/autopush-rs/git/refs{/sha}","trees_url":"https://api.github.com/repos/mozilla-services/autopush-rs/git/trees{/sha}","statuses_url":"https://api.github.com/repos/mozilla-services/autopush-rs/statuses/{sha}","languages_url":"https://api.github.com/repos/mozilla-services/autopush-rs/languages","stargazers_url":"https://api.github.com/repos/mozilla-services/autopush-rs/stargazers","contributors_url":"https://api.github.com/repos/mozilla-services/autopush-rs/contributors","subscribers_url":"https://api.github.com/repos/mozilla-services/autopush-rs/subscribers","subscription_url":"https://api.github.com/repos/mozilla-services/autopush-rs/subscription","commits_url":"https://api.github.com/repos/mozilla-services/autopush-rs/commits{/sha}","git_commits_url":"https://api.github.com/repos/mozilla-services/autopush-rs/git/commits{/sha}","comments_url":"https://api.github.com/repos/mozilla-services/autopush-rs/comments{/number}","issue_comment_url":"https://api.github.com/repos/mozilla-services/autopush-rs/issues/comments{/number}","contents_url":"https://api.github.com/repos/mozilla-services/autopush-rs/contents/{+path}","compare_url":"https://api.github.com/repos/mozilla-services/autopush-rs/compare/{base}...{head}","merges_url":"https://api.github.com/repos/mozilla-services/autopush-rs/merges","archive_url":"https://api.github.com/repos/mozilla-services/autopush-rs/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/mozilla-services/autopush-rs/downloads","issues_url":"https://api.github.com/repos/mozilla-services/autopush-rs/issues{/number}","pulls_url":"https://api.github.com/repos/mozilla-services/autopush-rs/pulls{/number}","milestones_url":"https://api.github.com/repos/mozilla-services/autopush-rs/milestones{/number}","notifications_url":"https://api.github.com/repos/mozilla-services/autopush-rs/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/mozilla-services/autopush-rs/labels{/name}","releases_url":"https://api.github.com/repos/mozilla-services/autopush-rs/releases{/id}","deployments_url":"https://api.github.com/repos/mozilla-services/autopush-rs/deployments","created_at":"2018-05-31T20:17:30Z","updated_at":"2025-10-29T09:11:58Z","pushed_at":"2025-10-22T23:04:56Z","git_url":"git://github.com/mozilla-services/autopush-rs.git","ssh_url":"git@github.com:mozilla-services/autopush-rs.git","clone_url":"https://github.com/mozilla-services/autopush-rs.git","svn_url":"https://github.com/mozilla-services/autopush-rs","homepage":"","size":5344,"stargazers_count":273,"watchers_count":273,"language":"Rust","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":false,"forks_count":20,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":83,"license":{"key":"mpl-2.0","name":"Mozilla Public License 2.0","spdx_id":"MPL-2.0","url":"https://api.github.com/licenses/mpl-2.0","node_id":"MDc6TGljZW5zZTE0"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["aws","dynamodb","rust","services-engineering-team","tokio-rs"],"visibility":"public","forks":20,"open_issues":83,"watchers":273,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"We can include debuginfo in our release builds for minimal performance hit, but more meaningful errors.","reactions":{"url":"https://api.github.com/repos/mozilla-services/autopush-rs/issues/77/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mozilla-services/autopush-rs/issues/77/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"guevara","id":228309,"node_id":"MDQ6VXNlcjIyODMwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/228309?v=4","gravatar_id":"","url":"https://api.github.com/users/guevara","html_url":"https://github.com/guevara","followers_url":"https://api.github.com/users/guevara/followers","following_url":"https://api.github.com/users/guevara/following{/other_user}","gists_url":"https://api.github.com/users/guevara/gists{/gist_id}","starred_url":"https://api.github.com/users/guevara/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guevara/subscriptions","organizations_url":"https://api.github.com/users/guevara/orgs","repos_url":"https://api.github.com/users/guevara/repos","events_url":"https://api.github.com/users/guevara/events{/privacy}","received_events_url":"https://api.github.com/users/guevara/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-04T23:41:53Z","updated_at":"2019-02-04T23:41:53Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/guevara/read-it-later/issues/2678","repository_url":"https://api.github.com/repos/guevara/read-it-later","labels_url":"https://api.github.com/repos/guevara/read-it-later/issues/2678/labels{/name}","comments_url":"https://api.github.com/repos/guevara/read-it-later/issues/2678/comments","events_url":"https://api.github.com/repos/guevara/read-it-later/issues/2678/events","html_url":"https://github.com/guevara/read-it-later/issues/2678","id":406569481,"node_id":"MDU6SXNzdWU0MDY1Njk0ODE=","number":2678,"title":"Learning Rust via Advent of Code","user":{"login":"guevara","id":228309,"node_id":"MDQ6VXNlcjIyODMwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/228309?v=4","gravatar_id":"","url":"https://api.github.com/users/guevara","html_url":"https://github.com/guevara","followers_url":"https://api.github.com/users/guevara/followers","following_url":"https://api.github.com/users/guevara/following{/other_user}","gists_url":"https://api.github.com/users/guevara/gists{/gist_id}","starred_url":"https://api.github.com/users/guevara/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guevara/subscriptions","organizations_url":"https://api.github.com/users/guevara/orgs","repos_url":"https://api.github.com/users/guevara/repos","events_url":"https://api.github.com/users/guevara/events{/privacy}","received_events_url":"https://api.github.com/users/guevara/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2019-02-04T23:41:53Z","updated_at":"2019-02-04T23:41:53Z","closed_at":null,"author_association":"OWNER","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":150218193,"node_id":"MDEwOlJlcG9zaXRvcnkxNTAyMTgxOTM=","name":"read-it-later","full_name":"guevara/read-it-later","private":false,"owner":{"login":"guevara","id":228309,"node_id":"MDQ6VXNlcjIyODMwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/228309?v=4","gravatar_id":"","url":"https://api.github.com/users/guevara","html_url":"https://github.com/guevara","followers_url":"https://api.github.com/users/guevara/followers","following_url":"https://api.github.com/users/guevara/following{/other_user}","gists_url":"https://api.github.com/users/guevara/gists{/gist_id}","starred_url":"https://api.github.com/users/guevara/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guevara/subscriptions","organizations_url":"https://api.github.com/users/guevara/orgs","repos_url":"https://api.github.com/users/guevara/repos","events_url":"https://api.github.com/users/guevara/events{/privacy}","received_events_url":"https://api.github.com/users/guevara/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/guevara/read-it-later","description":"read it later","fork":false,"url":"https://api.github.com/repos/guevara/read-it-later","forks_url":"https://api.github.com/repos/guevara/read-it-later/forks","keys_url":"https://api.github.com/repos/guevara/read-it-later/keys{/key_id}","collaborators_url":"https://api.github.com/repos/guevara/read-it-later/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/guevara/read-it-later/teams","hooks_url":"https://api.github.com/repos/guevara/read-it-later/hooks","issue_events_url":"https://api.github.com/repos/guevara/read-it-later/issues/events{/number}","events_url":"https://api.github.com/repos/guevara/read-it-later/events","assignees_url":"https://api.github.com/repos/guevara/read-it-later/assignees{/user}","branches_url":"https://api.github.com/repos/guevara/read-it-later/branches{/branch}","tags_url":"https://api.github.com/repos/guevara/read-it-later/tags","blobs_url":"https://api.github.com/repos/guevara/read-it-later/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/guevara/read-it-later/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/guevara/read-it-later/git/refs{/sha}","trees_url":"https://api.github.com/repos/guevara/read-it-later/git/trees{/sha}","statuses_url":"https://api.github.com/repos/guevara/read-it-later/statuses/{sha}","languages_url":"https://api.github.com/repos/guevara/read-it-later/languages","stargazers_url":"https://api.github.com/repos/guevara/read-it-later/stargazers","contributors_url":"https://api.github.com/repos/guevara/read-it-later/contributors","subscribers_url":"https://api.github.com/repos/guevara/read-it-later/subscribers","subscription_url":"https://api.github.com/repos/guevara/read-it-later/subscription","commits_url":"https://api.github.com/repos/guevara/read-it-later/commits{/sha}","git_commits_url":"https://api.github.com/repos/guevara/read-it-later/git/commits{/sha}","comments_url":"https://api.github.com/repos/guevara/read-it-later/comments{/number}","issue_comment_url":"https://api.github.com/repos/guevara/read-it-later/issues/comments{/number}","contents_url":"https://api.github.com/repos/guevara/read-it-later/contents/{+path}","compare_url":"https://api.github.com/repos/guevara/read-it-later/compare/{base}...{head}","merges_url":"https://api.github.com/repos/guevara/read-it-later/merges","archive_url":"https://api.github.com/repos/guevara/read-it-later/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/guevara/read-it-later/downloads","issues_url":"https://api.github.com/repos/guevara/read-it-later/issues{/number}","pulls_url":"https://api.github.com/repos/guevara/read-it-later/pulls{/number}","milestones_url":"https://api.github.com/repos/guevara/read-it-later/milestones{/number}","notifications_url":"https://api.github.com/repos/guevara/read-it-later/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/guevara/read-it-later/labels{/name}","releases_url":"https://api.github.com/repos/guevara/read-it-later/releases{/id}","deployments_url":"https://api.github.com/repos/guevara/read-it-later/deployments","created_at":"2018-09-25T06:32:07Z","updated_at":"2025-10-26T17:51:45Z","pushed_at":"2018-09-25T06:32:08Z","git_url":"git://github.com/guevara/read-it-later.git","ssh_url":"git@github.com:guevara/read-it-later.git","clone_url":"https://github.com/guevara/read-it-later.git","svn_url":"https://github.com/guevara/read-it-later","homepage":null,"size":0,"stargazers_count":233,"watchers_count":233,"language":null,"has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":12238,"license":null,"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":0,"open_issues":12238,"watchers":233,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Learning Rust via Advent of Code<br>\n<br>\nhttp://bit.ly/2GrpXoS<br>\n<br>\nAbout 0 Minutes<br>\n<br>\n<div>\n<div>\n<h1>Learning Rust via Advent of Code</h1>\n<p>February 3, 2019</p>\n</div>\n<div>\n<h2>Learning Rust via Advent of Code</h2>\n<p>For years the games industry has looked at Rust as the promised land. The language that will save us from C++.</p>\n<p>In 2018 I decided to finally take some time to learn Rust. I read the <a href=\"https://doc.rust-lang.org/book/\">book</a>; which was well organized and delightful. I attended <a href=\"https://rustconf.com/\">Rust Conf</a> in nearby Portland. Then I started dabbling at home. I don't know much, but I'm making progress.</p>\n<h2>Advent of Code</h2>\n<p>The <a href=\"https://www.forrestthewoods.com/blog/learning-rust-via-advent-of-code/(https://adventofcode.com/\">Advent of Code</a> is a programming competition organized by <a href=\"https://twitter.com/ericwastl\">Eric Wastl</a>. It's an <a href=\"https://en.wikipedia.org/wiki/Advent_calendar\">advent calendar</a> where every day he releases a new puzzle.</p>\n<p>I decided to use the competition as means to learn Rust. I'm writing two blog posts. This post focuses primarily on my experience with Rust. My other post focuses on puzzle solutions and optimizations. If you'd like to read that post it's available here:</p>\n<p><a href=\"https://www.forrestthewoods.com/blog/solving-advent-of-code-in-under-a-second/\">Solving Advent of Code in Under a Second</a></p>\n<h2>Advent Experience</h2>\n<p>Learning a new language via Advent of Code turned out to be a <i>great</i> idea. I highly recommend it.</p>\n<p>People use every language under the sun to solve AoC puzzles. Python, JavaScript, C, C++, C#, Rust, Haskell, Clojure, Perl, Fortran, Lisp, Lua, Scala, OCaml, Ruby, Php, Swift, and more. Many folks were, like me, using AoC to learn something new.</p>\n<p>The <a href=\"https://www.reddit.com/r/adventofcode/\">community</a> is great. Thousands of programmers are working to solve the same problems. The subreddit has a solutions thread for every puzzle. If you get stuck you can ask questions or peek at other solutions.</p>\n<p>Once you have a solution it's useful to see what other people did. I learned a lot of Rust tricks and new algorithms this way.</p>\n<h2>Rust Noob</h2>\n<p>I'm a total noob at Rust. I've written two or three thousand lines on toy projects. This post is not \"how to write good Rust code\". I don't know what I'm doing! This is about my trials, tribulations, and lessons learned.</p>\n<p>My solutions and full project are linked below. Solutions for all 25 days are in one file so it's easy to skim.</p>\n<p><a href=\"https://www.forrestthewoods.com/blog/learning-rust-via-advent-of-code/adventofcode2018_forrestsmith_rust\">Source Code</a><br>\n<a href=\"https://www.forrestthewoods.com/blog/learning-rust-via-advent-of-code/assets/AdventOfCode2018_ForrestSmith_Rust.zip\">Project</a></p>\n<h2>Parsing Text is Hard</h2>\n<p>My first stumbling block was parsing. Almost every AoC problem starts with parsing lines of text from an input file.</p>\n<p>String parsing in Rust is not easy. There's no random access into Rust Strings because they're UTF-8 encoded. The chars iterator is not very ergonomic. Using <code>as_bytes</code> helps only a little.</p>\n<p>My first few attempts were complicated and inefficient. Then I learned how to use Rust's regex library by looking at <a href=\"https://github.com/BurntSushi/advent-of-code\">BurntSushi's AoC solutions</a>.</p>\n<p>I'm not gonna lie. Using regex's feels like overkill. Consider the following line of input:</p>\n<pre>\n#1 @ 338,764: 20x24\n</pre>\n<p>Here's my matching Regex code.</p>\n<pre>\nRegex<span>::</span>new(r<span>\"#\\d+ @ (?P&lt;x&gt;\\d+),(?P&lt;y&gt;\\d+): (?P&lt;w&gt;\\d+)x(?P&lt;h&gt;\\d+)\"</span>).unwrap();\n</pre>\n<p>Is there a better expression? I don't know. Probably. I feel like there should be a helper for <i>simple</i> parse operations.</p>\n<pre>\nparse<span>!</span>(<span>\"#{} @ {},{}: {}x{}\"</span>, id, x, y, w, h);\n</pre>\n<p>This would be a clean inverse of <code>println!</code>. It would be great for simple cases.</p>\n<h3>Rexer</h3>\n<p>I'm not a regex expert. I'm not even an apprentice. I've always joked that regular expressions have the elusive write-once flag. Once you finish writing one you'll never understand what it does ever again.</p>\n<p>To help write my parsing regexes I used the free website <a href=\"https://regexr.com/\">Regexr</a>. It works well for the <a href=\"https://crates.io/crates/regex\">Regex crate</a> which uses <a href=\"https://en.wikipedia.org/wiki/Perl_Compatible_Regular_Expressions\">PCRE</a>-like syntax.</p>\n<p>Using an interactive webtool was pleasant. It is far faster than having to compile and run Rust code.</p>\n<img src=\"https://www.forrestthewoods.com/blog/learning-rust-via-advent-of-code/assets/img/01.png\" alt=\"Regexr Tool\">\n<h2>Iterators</h2>\n<p>My background is C++. In C++ an \"iterator\" often boils down to a raw pointer. Rust iterators are <a href=\"https://doc.rust-lang.org/std/iter/index.html#laziness\">lazy</a>, composable, and impressively powerful.</p>\n<p>I spent a fair amount of time referencing <a href=\"https://doc.rust-lang.org/std/iter/trait.Iterator.html\">iterator API documentation</a>. I'm still learning what features are available and how to use them. I had a lot of fun trying to be clever.</p>\n<h3>Enumerate</h3>\n<p>I love <a href=\"https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.enumerate\">enumerate</a>. It provides a way to use iterators but still have an iteration count.</p>\n<pre>\n<span>let</span> <span>mut</span> values <span>:</span> Vec<span>&lt;</span>usize<span>&gt;</span> <span>=</span> vec<span>!</span>[<span>3</span>,<span>5</span>,<span>8</span>,<span>13</span>,<span>21</span>];\n<span>for</span> (i, value) in values.iter_mut().enumerate() {\n    <span>*</span>value <span>*=</span> i;\n}  \nassert_eq<span>!</span>(values, [<span>0</span>,<span>5</span>,<span>16</span>,<span>39</span>,<span>84</span>]);\n</pre>\n<h3>Custom Iterators</h3>\n<p>Multiple puzzles involved grids and neighbor cells. It was common to perform some action for each neighbor. Iterating neighbors requires checking for borders and possibly neighbor value.</p>\n<p>I wrote my own AdjacencyIterator to iterate neighbors and perform border checks. It was super simple. Way easier than writing a C++ <a href=\"https://stackoverflow.com/questions/8054273/how-to-implement-an-stl-style-iterator-and-avoid-common-pitfalls\">STL-compatible iterator</a>.</p>\n<p>Rust isn't quite as nice or flexible as C# <code>IEnumerable</code>. Maybe someday?</p>\n<h3>Expressiveness</h3>\n<p>Adjacency iterators plus built-in features enabled some delightfully expressive code. Consider the following:</p>\n</div>\n<div>\n<pre>\n<span>let</span> slot <span>=</span> units  \n   .iter()\n   .filter(<span>|</span>unit<span>|</span> self.is_enemy(u)                      <span>// ignore non-enemies  </span>\n   .flat_map(<span>|</span>unit<span>|</span> unit.pos.adjacent_positions(w,h))   <span>// iterate adjacent positions  </span>\n   .filter(<span>|</span>pos<span>|</span> <span>!</span>walls[pos] <span>&amp;&amp;</span> <span>!</span>occupied[pos]          <span>// ignore walls or occupied spaces  </span>\n   .min_by_key(<span>|</span>pos<span>|</span> (self.pos <span>-</span> pos).length_sq());     <span>// pick closest slot  </span>\n</pre>\n</div>\n<div>\n<p>That code will find the closest unoccupied position that is adjacent to an enemy. If I had written that in C++ it might look like this:</p>\n</div>\n<div>\n<pre>\n<span>// track best</span>\n<span>int</span> best_distance_sq <span>=</span> std<span>::</span>numeric_limits<span>&lt;</span><span>int</span><span>&gt;::</span>max();\nVec2i best_slot;\n    \n<span>// iterate units</span>\n<span>for</span> (<span>size_t</span> i <span>=</span> <span>0</span>; i <span>&lt;</span> units.size(); <span>++</span>i) {\n    Unit <span>const</span><span>&amp;</span> unit <span>=</span> units[i];\n    \n    <span>// ignore non-enemies</span>\n    <span>if</span> (<span>this</span><span>-&gt;</span>is_enemy(unit) {\n    \n        <span>// iterate adjacent positions</span>\n        <span>static</span> constexpr std<span>::</span>array<span>&lt;</span>Vec2i<span>&gt;</span> offsets <span>=</span> {{<span>-</span><span>1</span>,<span>0</span>}, {<span>1</span>,<span>0</span>}, {<span>0</span>,<span>-</span><span>1</span>}, {<span>0</span>,<span>1</span>}};\n        <span>for</span> (<span>size_t</span> j <span>=</span> <span>0</span>; j <span>&lt;</span> offsets.size(); <span>++</span>j) {\n            Vec2 pos <span>=</span> unit.pos <span>+</span> offset;\n    \n            <span>// check bounds</span>\n            <span>if</span> (pos.x <span>&gt;=</span> <span>0</span> <span>&amp;&amp;</span> pos.x <span>&lt;</span> width <span>&amp;&amp;</span> pos.y <span>&gt;=</span> <span>0</span> <span>&amp;&amp;</span> pos.y <span>&lt;</span> height) {  \n    \n                <span>// ignore walls and occupied spaces</span>\n                 <span>if</span> (<span>!</span>walls[pos] <span>&amp;&amp;</span> <span>!</span>occupied[pos]) {\n    \n                    <span>// pick closest slot</span>\n                    <span>int</span> dist_sq <span>=</span> (<span>this</span><span>-&gt;</span>pos <span>-</span> pos).length_sq();\n                    <span>if</span> (dist_sq <span>&lt;</span> best_distance_sq) { \n                        best_distance_sq <span>=</span> dist_sq; \n                            best_slot <span>=</span> pos;\n                    }\n                } \n            } \n        }\n    }\n} \n</pre>\n</div>\n<div>\n<p>Those blocks of code will produce the exact same result. In theory, they should have the same performance.</p>\n<p>Remember, Rust iterators are lazy. The function <code>filter</code> doesn't process every element immediately. It creates a struct that stores a closure. That closure only executes when the iterator function <code>next</code> is called. Which doesn't happen until <code>min_by_key</code>.</p>\n<p>I tried to produce a <a href=\"https://godbolt.org/z/61a5O_\">Godbolt</a> example to compare the assembly generated. Unfortunately it requires a lot of boilerplate. The output is too long to reasonably compare.</p>\n<p>Writing idiomatic Rust code seems to require trusting the compiler. This is especially true for closure-based iterators. I don't love this. I've already hit instances where I needed to \"unroll\" simple iterator code to improve performance.</p>\n<h3>Assorted Goodies</h3>\n<p>I used and enjoyed quite a few iterator built-ins. Here's a brief summary of what I used for AoC.</p>\n<ul>\n<li>\n<a href=\"https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.collect\">collect</a> - transform iterator into a collection; such as a Vec</li>\n<li>\n<a href=\"https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.count\">count</a> - counts iterations to reach end</li>\n<li>\n<a href=\"https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.cycle\">cycle</a> - creats iterator that loops</li>\n<li>\n<a href=\"https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.enumerate\">enumerate</a> - creates iterator that returns tuple of iteration count and value</li>\n<li>\n<a href=\"https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.filter\">filter</a> - uses closure to yield values</li>\n<li>\n<a href=\"https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.find\">find</a> - searches for value</li>\n<li>\n<a href=\"https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.flat_map\">flat_map</a> - map plus flatten</li>\n<li>\n<a href=\"https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.fold\">fold</a> - applies function to produce a single value</li>\n<li>\n<a href=\"https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.for_each\">for_each</a> - calls closure for each value</li>\n<li>\n<a href=\"https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.map\">map</a> - transforms each value into another</li>\n<li>\n<a href=\"https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.max\">max</a> - returns largest value in iteration</li>\n<li>\n<a href=\"https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.max_by\">max_by</a> - returns largest value using provided comparison function</li>\n<li>\n<a href=\"https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.min_by_key\">min_by_key</a> - returns value given a function</li>\n<li>\n<a href=\"https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.sum\">sum</a> - returns sum of iterator values</li>\n</ul>\n<h3>Compilation Woes</h3>\n<p>I had to unroll some iterators just to compile. Consider the following:</p>\n<pre>\ndungeon.tiles  \n    .iter()  \n    .filter(<span>|</span>tile<span>|</span> <span>!</span>visited.contains(tile))  \n    .for_each(<span>|</span>tile<span>|</span> {  \n        do_thing(tile);  \n        visited.insert(tile);  \n    }); \n</pre>\n<p>This fails to compile due to the <a href=\"https://doc.rust-lang.org/1.8.0/book/references-and-borrowing.html\">borrow checker</a>.</p>\n<p>The problem is that <code>filter</code> immutably captures visited and <code>for_each</code> mutably captures it. The Rust borrow checker does not allow this.</p>\n<p>We could move <code>.contains(tile)</code> into <code>for_each</code> and it'd compile. That may even be preferable. What's interesting, and often frustrating, is that naive \"unrolling\" will compile while iterators do not.</p>\n<h2>Profiling</h2>\n<p>The Rust profiling story is mixed. It could be worse. It could be a <i>lot</i> better.</p>\n<h3>Sampling</h3>\n<p>I'm a big fan of <a href=\"https://en.wikipedia.org/wiki/Profiling_(computer_programming)#Statistical_profilers\">sampling profilers</a>. Everyone should have a few in their toolkit. A good sampling profiler can give actionable information in four mouse clicks.</p>\n<p>Sampling in Rust works well enough. It'd be better if the function names were demangled.</p>\n<p>I tried, and was pleasantly surprised by, Visual Studio's analyzer.</p>\n<img src=\"https://www.forrestthewoods.com/blog/learning-rust-via-advent-of-code/assets/img/02.png\" alt=\"Visual Studio Analyzer Result\">\n<p>VTune also worked.</p>\n<img src=\"https://www.forrestthewoods.com/blog/learning-rust-via-advent-of-code/assets/img/03.png\" alt=\"VTune Result\">\n<p>I couldn't figure out how to map source files. <a href=\"https://imgur.com/a/V14bu\">Screenshots</a> leads me to believe it's possible. I don't know how. :(</p>\n<h3>Flamegraphs</h3>\n<p>I have mixed opinions on <a href=\"http://www.brendangregg.com/flamegraphs.html\">flamegraphs</a>. They're a nice visualization of sampling data. Width of each node is a proportional to total time spent. I often prefer the call tree. Your mileage may vary.</p>\n<img src=\"https://www.forrestthewoods.com/blog/learning-rust-via-advent-of-code/assets/img/04.png\" alt=\"Canonical Flamegraph\">\n<p>Source: <a href=\"https://queue.acm.org/downloads/2016/Gregg4.svg\">Brendan Gregg</a></p>\n<p>The most recommended Rust profiling tool is the <a href=\"https://crates.io/crates/flame\">flame</a> crate. The <a href=\"https://crates.io/crates/flamer\">flamer</a> crate provides convenience macros.</p>\n<p>Flame is a weird crate. It produces flamegraphs, but requires manual instrumentation. It doesn't offer a timeline or thread based view. I tried to instrument some inner-loops and it produced a 28 megabyte HTML file that wouldn't load. It's kinda the worst of both worlds.</p>\n<p>I ended up using manual timers. :(</p>\n<h3>Instrumention</h3>\n<p>Rust has a big hole in its profiling story.</p>\n<p>Flamegraphs are an important tool, but they aren't nearly enough. They aren't real time. They don't provide multithreading information. They expose a very limited type of data. They can't help with frame spikes. Webtools are janky and slow.</p>\n<p>I'd love to see Rust get some professional grade profiling tools like <a href=\"http://www.radgametools.com/telemetry.htm\">Telemetry</a> or <a href=\"https://www.puredevsoftware.com/framepro/index.htm\">FramePro</a>.</p>\n</div>\n<div>\n<p>C/C++ has many robust profiling options. I've used <a href=\"https://github.com/Celtoys/Remotery\">Remotery</a> and it works well. I found several more options with a few minutes of Googling; <a href=\"https://www.superluminal.eu/\">superluminal</a>, <a href=\"https://github.com/jonasmr/microprofile\">microprofile</a>, <a href=\"https://github.com/yse/easy_profiler\">easy profiler</a>, and <a href=\"https://github.com/bombomby/brofiler\">brofiler</a>.</p>\n<p><a href=\"https://aras-p.info/blog/2017/08/08/Unreasonable-Effectiveness-of-Profilers/\">Chrome Trace</a> via <a href=\"https://github.com/hrydgard/minitrace\">minitrace</a> is another option.</p>\n</div>\n<div>\n<p>The lack of a good instrumented CPU profiler is a huge hole in the Rust ecosystem. It's also a huge opportunity.</p>\n<h2>Benchmarking</h2>\n<p>Rust's benchmarking story is mixed.</p>\n<p>The goto crate is <a href=\"https://docs.rs/criterion/0.2.7/criterion\">Criterion</a>. I had a lot of trouble with it.</p>\n<p>My full solution set takes less than one-second to run. Criterion claims to be a \"statistics-driven micro-benchmarking\" library. Micro appears to be quite literal! Code that takes hundreds of milliseconds may be out of scope.</p>\n<p>I attempted to let Criterion run overnight with default settings. It completed benchmarks for only 15 of 25 days in ~12 hours. &#129335;</p>\n<p>Part of the problem is poor <a href=\"https://docs.rs/criterion/0.2.7/criterion/\">documentation</a>. Functions are documented. How to use them is not. The user guide is insufficient.</p>\n<p>I couldn't figure out how to even call <code>sample_size</code>. I had to search GitHub to find a working example. I tried to set <code>measurement_time</code>. It took more than an order of magnitude longer than specified.</p>\n<p>Criterion produces some pretty charts via <a href=\"http://www.gnuplot.info/\">gnuplot</a>. It has a lot of nice features. I was unable to effectively use the tool.</p>\n<img src=\"https://www.forrestthewoods.com/blog/learning-rust-via-advent-of-code/assets/img/07.png\" alt=\"Criteron Graph\">\n<h2>Multithreading</h2>\n<p>One of Rust's mottos is <a href=\"https://blog.rust-lang.org/2015/04/10/Fearless-Concurrency.html\">fearless concurrency</a>. For AoC I chose to focus on single-threaded performance.</p>\n<p>I've heard so much about <a href=\"https://github.com/rayon-rs/rayon\">Rayon</a> I couldn't resist giving it a try. In 10 minutes I had naive multithreading working. On my 6-core/12-thread Intel i8700k it cut my total run-time from ~750ms to 200ms. Color me impressed!</p>\n<p>That was naively running each puzzle in parallel. Running all solutions 100x it worked out to about 100ms on average. Not bad.</p>\n<p>Proper multithreading requires a lot more than sprinkling <code>par_iter()</code> here and there. But for it to have worked so easily is a little mind blowing. I've had <i>horrible</i> experiences trying to parallelize pre-existing C++. Rayon was a breath of fresh air.</p>\n<h2>Optimization</h2>\n<p>I spent a fair amount of time on optimization. Some of it algorithmic and some Rust specific. For further details please see my other post:</p>\n<p><a href=\"https://www.forrestthewoods.com/blog/solving-advent-of-code-in-under-a-second/\">Solving Advent of Code in Under a Second</a></p>\n<h2>Assorted Thoughts</h2>\n<h3>Rust Playground</h3>\n<p>The <a href=\"https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2015&amp;gist=8cf114170682b9c1381473fca58c7952\">Rust Playground</a> is great. I used it to quickly test questions. For example, what is the std::mem::size_of result for various structs?</p>\n<p>It's also great for creating snippets to share in the <a href=\"https://www.reddit.com/r/rust\">r/rust</a> newbie thread. Which I did on more than a few occassions.</p>\n</div>\n<div><img src=\"https://www.forrestthewoods.com/blog/learning-rust-via-advent-of-code/assets/img/09.png\" alt=\"Rust Playground\"></div>\n<div>\n<h3>Debugging</h3>\n<p>Rust's debugging story is \"needs improvement\".</p>\n<p>Visual Studio Code is pretty easy to configure as a debugger. Step debugging actually works. So does the watch window.</p>\n<p>Unfortunately most containers aren't inspectable. Vec works because it's basically an array. HashMap and HashSet are inscrutable.</p>\n<img src=\"https://www.forrestthewoods.com/blog/learning-rust-via-advent-of-code/assets/img/08.png\" alt=\"VSCode Debugger\">\n<p>Visual Studio has <a href=\"https://docs.microsoft.com/en-us/visualstudio/debugger/create-custom-views-of-native-objects?view=vs-2017\">natvis</a> for C++. It's not great. I have a lot of complaints. It's way better than Rust's nothing.</p>\n<p>I'm hoping Rust 2019 lays the groundwork for improved IDE and debugging in 2020.</p>\n<h3>Bit Packing</h3>\n<p><code>Option&lt;bool&gt;</code> is only one byte. <code>Option</code> is also one byte for an <code>enum</code> when the <code>enum</code> value doesn't need all the bits. This was a pleasant surprise.</p>\n<h3>Implicit Casts</h3>\n<p>Rust doesn't have implicit casts. If you want to pass a <code>u32</code> to a function that needs a <code>usize</code> you have to explicitly cast it.</p>\n<p>I think I like this. It leads to annoyingly verbose code. But it did prevent at least a couple of bugs.</p>\n<h3>Inference</h3>\n<p>Rust is statically typed. However it has robust support for type inference.</p>\n<pre>\n<span>let</span> elem <span>=</span> <span>5</span><span>u8</span>;  \n<span>let</span> <span>mut</span> vec <span>=</span> Vec<span>::</span>new();  \nvec.push(elem);  \nvec.push(<span>6</span><span>u32</span>); <span>// error: expected u8, found u32  </span>\n</pre>\n<p>The type of <code>vec</code> is inferred to be <code>Vec&lt;u8&gt;</code>. You can leave off a <i>shocking</i> amount of type information. For better or worse.</p>\n<h3>rustfmt</h3>\n<p>I enabled rustfmt for auto-formatting. I like it 95% of the time. For AoC I'm jealous of the brevity of Python. Rust is quite verbose, and rustfmt makes it a little worse.</p>\n<p>Rustfmt badly needs a <code>clang-format off</code> feature for block level control.</p>\n<h3>Helper Lambdas</h3>\n<p>I like lambdas in C++11. I use them regularly for small helpers that exist solely within a function.</p>\n<p>This is hard to do in Rust. It causes borrow checker errors similar to iterator closure issue described above.</p>\n<p>What make it frustrating is that an uncompilable helper lambda will often work <i>perfectly</i> if changed to a macro. That feels like a bug to me. This case isn't quite mentioned in a recent post on <a href=\"http://smallcultfollowing.com/babysteps/blog/2018/11/01/after-nll-interprocedural-conflicts/\">non-lexical lifetimes</a>. I think it should be.</p>\n<h3>HashMap Initialization</h3>\n<p>I had a hard time initializing <code>HashMap</code>. Here's what I'd like to do:</p>\n<pre>\n<span>let</span> allowable_gear <span>:</span> HashMap<span>&lt;</span>(TileType,TileType), <span>&amp;</span>[Gear]<span>&gt;</span> <span>=</span> {  \n    (Rocky, Rocky) <span>=</span> <span>&amp;</span>[Climbing, Torch],  \n    (Rocky, Wet) <span>=</span> <span>&amp;</span>[Climbing], \n    (Wet, Narrow) <span>=</span> <span>&amp;</span>[Neither],\n};\n</pre>\n<p>This is a <code>HashMap</code> that maps a pair of <code>TileTypes</code> to an array of <code>Gear</code>. This relationship is constant and known at compile time. I couldn't find a clean, idiomatic way to do this. :(</p>\n<h3>BinaryHeap</h3>\n<p>The standard library provides a <a href=\"https://en.wikipedia.org/wiki/Binary_heap\">max-heap</a>. I regularly needed a min-heap. I got one by making a custom struct with custom <a href=\"https://doc.rust-lang.org/beta/std/cmp/index.html\">compare</a> function.</p>\n<p>This was a bit of a pain. It could have been easier. Priority queues with customizable compare functions seems like a useful thing that would exist. I'm probably doing it wrong?</p>\n<h3>Rc&lt;RefCell&lt;Foo&gt;&gt;</h3>\n<p>I've barely touched <code>Rc</code> and <code>RefCell</code>. For day23 I wrote an Octree and it used an <code>Rc&lt;RefCell&lt;OctreeNode&gt;&gt;</code>. I wanted to typedef that to <code>OctreeNodePtr</code>. Except that didn't work for creating new values.</p>\n<p>Graphs are notoriously difficult in Rust. I'm pretty sure I made my Octree incorrectly. But I'm not sure what I should have done instead. Suggestions welcome!</p>\n<h3>Sorting</h3>\n<p>For several puzzles I sorted a struct based on sequential fields. For example:</p>\n<pre>\ndates.sort_by(<span>|</span>a,b<span>|</span> { \n    <span>if</span> a.year <span>!=</span> b.year { a.year.cmp(<span>&amp;</span>b.year) }  \n    <span>else</span> <span>if</span> a.month <span>!=</span> b.month { a.month.cmp(<span>&amp;</span>b.month) }  \n    <span>else</span> <span>if</span> a.day <span>!=</span> b.day { a.day.cmp(<span>&amp;</span>b.day) } \n    <span>else</span> <span>if</span> a.hour <span>!=</span> b.hour { a.hour.cmp(<span>&amp;</span>b.hour) }\n    <span>else</span> { a.minute.cmp(<span>&amp;</span>b.minute) }\n});\n</pre>\n<p>I wonder if there is a nice macro crate to help with this? I'd love to write:</p>\n<pre>\ncompare<span>!</span>(a, b, year, month, day, hour, minute);\n</pre>\n<p>My sort for day23 was more complex. It sorted by <code>foo.max_possible</code> then <code>foo.bounds.volume()</code> then <code>foo.bounds.distance_from(origin)</code>. Here's one idea for a useful sort API.</p>\n<pre>\nfoos.sort_by(<span>|</span>v<span>|</span> v.max_possible)\n    .then_by(<span>|</span>v<span>|</span> v.bounds())\n    .then_by(<span>|</span>v<span>|</span> v.bounds.distance_from(origin))\n    .sort(); \n</pre>\n<p>That would be great. That API design feels pretty close to right. What do you think?</p>\n<h3>Boilerplate</h3>\n<p>I chose to write a lot of boilerplate in my solutions. I wanted to keep all my code in one place for each puzzle. I didn't want to use ambiguous tuples of unnamed types.</p>\n<p>I wrote <code>struct Pos</code> for 8 out of 25 days. In <code>i8</code>, <code>i16</code>, and <code>i32</code> flavors. I probably should have used <a href=\"https://docs.rs/cgmath/0.16.1/cgmath/\">cgmath</a> or <a href=\"https://www.nalgebra.org/rustdoc/nalgebra/index.html\">nalgebra</a>. One my side projects is a Rust crate for video game 3d math. Maybe it'll be done by Advent of Code 2019.</p>\n<h3>Build Profiles</h3>\n<p>Cargo doesn't have custom build profiles. This blows my mind.</p>\n<p>The included profiles are dev, release, bench, test, and doc. Only dev and release are used for running a program. Historically I've run with debug, internal, release, and retail.</p>\n<p>There is a <a href=\"http://aturon.github.io/2018/04/05/workflows/\">blog post</a> and <a href=\"https://github.com/rust-lang/rust/issues/48683\">tracking issue</a> that lead me to believe custom profiles this will happen someday. It may be awhile.</p>\n<h3>Link-Time Optimization</h3>\n<p>Release builds set link-time optimization to false by default. This is the correct choice due to build times.</p>\n<p>Enabling LTO and changing codegen units reduced my run-time from 700ms to 600ms. That's a 14% improvement from a couple of compiler flags! More details available in <a href=\"https://www.forrestthewoods.com/blog/solving-advent-of-code-in-under-a-second/\">other post</a>.</p>\n<p>When Rust ships custom build profiles I'd love to see a MaxSpeed config. <a href=\"https://github.com/BurntSushi/ripgrep/issues/413\">RipGrep</a> doesn't ship binaries with LTO. I think the lack of custom profiles is causing a <i>lot</i> of shipped Rust code to leave free performance on the table.</p>\n<h3>New Primitive Types</h3>\n<p>I wish Rust provided <code>u24</code> and <code>i24</code> types. They're useful in a few scenarios. They already exist inside various audio crates. I couldn't find a robut standalone implementation.</p>\n<p>I wish there was an <code>f16</code> half-precision float. There's a good <a href=\"https://internals.rust-lang.org/t/adding-minifloats-f24-f16-f8-as-native-types/2367\">internals thread</a> on minifloats that makes me think <code>f16</code> will happen eventually.</p>\n<h2>Crates</h2>\n<p>I used a handful of crates. Here's a brief list.</p>\n<p>I have not tried the parsing libraries <a href=\"https://crates.io/crates/nom\">nom</a> or <a href=\"https://crates.io/crates/pest\">pest</a>. I wonder if they would have made parsing day 24 easy? I'd like to investigate them in the future.</p>\n<h3>Crate Discovery</h3>\n<p>Crate discovery is non-existent. GitHub stars is not a useful metric. Downloads on crates.io is ok but not great. I looked for some replacements for <code>std::collections</code> containers. It was hard to tell which crates were worth trying.</p>\n<p>I got a huge speed-up when I replaced the built-in <code>HashMap</code> with an <code>FnvHashMap</code>. Through dumb luck I found <code>Hashbrown</code>, which is even faster.</p>\n<p>There needs to be a better way to find crates. This is a hard problem.</p>\n<h2>Clippy</h2>\n<p><a href=\"https://github.com/rust-lang/rust-clippy\">Clippy</a> is an easy to use linter to catch common issues.</p>\n<p>I hit and fixed ~25 lints. They were minor issues or recommended improvements. However I did have to disable a few lints.</p>\n<h3>needless_range_loop</h3>\n<p>Bad lint. I iterated <code>0..3</code> to grab components out of multiple <code>Vec2</code> structs. My struct lacked iterators. I could have implemented an iterator and used <code>zip</code>. A simple for-loop is better.</p>\n<h3>too_many_arguments</h3>\n<p>Generally true. I feel my use case was appropriate.</p>\n<h3>map_entry</h3>\n<p>Bad lint. It was straight wrong.</p>\n<p>For day22 I had a HashMap of tiles. Each tile had a cost that was dependent on tiles up and to the left. I wrote this recursively.</p>\n</div>\n<div>\n<pre>\n<span>fn</span> get_tile(<span>&amp;</span><span>mut</span> self, pos<span>:</span> pos) <span>-&gt;</span> <span>&amp;</span><span>mut</span> Tile {  \n    <span>if</span> <span>!</span>self.tiles.contains_key(<span>&amp;</span>pos) {  \n        <span>let</span> new_value <span>=</span> compute_value(self.get_tile(left), self.get_tile(up));\n        self.tiles.insert(pos, new_value);\n    } \n\n    self.tiles.get_mut(<span>&amp;</span>pos)\n}  \n</pre>\n</div>\n<div>\n<p>The lint recommended version is:</p>\n</div>\n<div>\n<pre>\n<span>fn</span> get_tile(<span>&amp;</span><span>mut</span> self, pos<span>:</span> pos) <span>-&gt;</span> <span>&amp;</span><span>mut</span> Tile {  \n    self.tiles\n        .entry(<span>&amp;</span>pos)\n        .or_insert_with(<span>||</span> {\n            <span>let</span> new_value <span>=</span> compute_value(self.get_tile(left), self.get_tile(up));\n            self.tiles.insert(pos, new_value);\n        });\n}  \n</pre>\n</div>\n<div>\n<p>This doesn't compile. <code>entry</code> stores a reference to <code>tiles</code>. Then <code>or_insert_with</code> creates a closure with a mutable reference to <code>tiles</code> for recursion. That's not allowed.</p>\n<p>My recursive pattern isn't common. I'm not surprised Clippy can't handle it. It's a shame because I really like the <code>entry</code> API with <code>or_insert</code> and <code>or_insert_with</code>.</p>\n<h3>Lint Control</h3>\n<p>Clippy needs a way to disable lints for individual functions, blocks, or lines of code. I don't want to turn these lints off everywhere. This is the same issue as wanting <code>clang format off</code> for rustfmt.</p>\n<h2>Sentinels</h2>\n<p>One feature I wish Rust had was a helper struct for sentinel values. Consider an 8-bit value where you want to special case <code>255</code> to mean \"no value\". Or an <code>i32</code> where <code>-1</code> means \"no value\". This is pretty common.</p>\n<p>One Rusty, ahem, option would be an <a href=\"https://doc.rust-lang.org/std/option\">Option</a>; <code>Option&lt;u8&gt;</code>. Another might be an <a href=\"https://doc.rust-lang.org/1.30.0/book/second-edition/ch06-01-defining-an-enum.html\">enum</a>; <code>enum EFoo { None, Foo(u8) }</code>.</p>\n<p>Both these approaches use two bytes of storage. One byte for the <code>u8</code>, and another for a flag. An <code>Option&lt;u32&gt;</code> bloats to a whopping 8 bytes. An <code>Option&lt;u64&gt;</code> is, wait for it, 16 bytes.</p>\n<p>What I want is a struct that is stored as the underlying type and has a getter which returns an <code>Option&lt;T&gt;</code>. The getter returns <code>None</code> if the inner value is a specific value.</p>\n<p>This feature may not be possible today. It might be when when <a href=\"https://github.com/rust-lang/rust/issues/44580\">const generics</a> land.</p>\n<p>There is <a href=\"https://doc.rust-lang.org/beta/std/num/struct.NonZeroU32.html\">NonZeroU32</a>. It's similar-ish, but only works for zero. There isn't a <code>Non255U8</code> or, thankfully, <code>Non4294967296U32</code>.</p>\n<h2>Final Thoughts</h2>\n<p>I used Advent of Code as a means to learn Rust. This was a great idea and one I strongly recommend. AoC is a great way to learn any language.</p>\n<p>I won't claim to know Rust. But I do know a lot more today than I did before. Progress is clear success in my book.</p>\n<p>Thanks for reading.</p>\n<h2>Links</h2>\n<p><a href=\"https://www.forrestthewoods.com/blog/solving-advent-of-code-in-under-a-second/\">Solving Advent of Code in Under a Second</a><br>\n<a href=\"https://www.forrestthewoods.com/blog/learning-rust-via-advent-of-code/adventofcode2018_forrestsmith_rust\">Source Code</a><br>\n<a href=\"https://www.forrestthewoods.com/blog/learning-rust-via-advent-of-code/assets/AdventOfCode2018_ForrestSmith_Rust.zip\">Project</a></p>\n</div>\n</div>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\nvia www.forrestthewoods.com http://bit.ly/2UD9L83<br>\n<br>\nFebruary 5, 2019 at 07:40AM","reactions":{"url":"https://api.github.com/repos/guevara/read-it-later/issues/2678/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/guevara/read-it-later/issues/2678/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"guevara","id":228309,"node_id":"MDQ6VXNlcjIyODMwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/228309?v=4","gravatar_id":"","url":"https://api.github.com/users/guevara","html_url":"https://github.com/guevara","followers_url":"https://api.github.com/users/guevara/followers","following_url":"https://api.github.com/users/guevara/following{/other_user}","gists_url":"https://api.github.com/users/guevara/gists{/gist_id}","starred_url":"https://api.github.com/users/guevara/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guevara/subscriptions","organizations_url":"https://api.github.com/users/guevara/orgs","repos_url":"https://api.github.com/users/guevara/repos","events_url":"https://api.github.com/users/guevara/events{/privacy}","received_events_url":"https://api.github.com/users/guevara/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-04T23:41:57Z","updated_at":"2019-02-04T23:41:57Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/guevara/read-it-later/issues/2679","repository_url":"https://api.github.com/repos/guevara/read-it-later","labels_url":"https://api.github.com/repos/guevara/read-it-later/issues/2679/labels{/name}","comments_url":"https://api.github.com/repos/guevara/read-it-later/issues/2679/comments","events_url":"https://api.github.com/repos/guevara/read-it-later/issues/2679/events","html_url":"https://github.com/guevara/read-it-later/issues/2679","id":406569499,"node_id":"MDU6SXNzdWU0MDY1Njk0OTk=","number":2679,"title":"Learning Rust via Advent of Code","user":{"login":"guevara","id":228309,"node_id":"MDQ6VXNlcjIyODMwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/228309?v=4","gravatar_id":"","url":"https://api.github.com/users/guevara","html_url":"https://github.com/guevara","followers_url":"https://api.github.com/users/guevara/followers","following_url":"https://api.github.com/users/guevara/following{/other_user}","gists_url":"https://api.github.com/users/guevara/gists{/gist_id}","starred_url":"https://api.github.com/users/guevara/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guevara/subscriptions","organizations_url":"https://api.github.com/users/guevara/orgs","repos_url":"https://api.github.com/users/guevara/repos","events_url":"https://api.github.com/users/guevara/events{/privacy}","received_events_url":"https://api.github.com/users/guevara/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2019-02-04T23:41:57Z","updated_at":"2019-02-04T23:41:57Z","closed_at":null,"author_association":"OWNER","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":150218193,"node_id":"MDEwOlJlcG9zaXRvcnkxNTAyMTgxOTM=","name":"read-it-later","full_name":"guevara/read-it-later","private":false,"owner":{"login":"guevara","id":228309,"node_id":"MDQ6VXNlcjIyODMwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/228309?v=4","gravatar_id":"","url":"https://api.github.com/users/guevara","html_url":"https://github.com/guevara","followers_url":"https://api.github.com/users/guevara/followers","following_url":"https://api.github.com/users/guevara/following{/other_user}","gists_url":"https://api.github.com/users/guevara/gists{/gist_id}","starred_url":"https://api.github.com/users/guevara/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guevara/subscriptions","organizations_url":"https://api.github.com/users/guevara/orgs","repos_url":"https://api.github.com/users/guevara/repos","events_url":"https://api.github.com/users/guevara/events{/privacy}","received_events_url":"https://api.github.com/users/guevara/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/guevara/read-it-later","description":"read it later","fork":false,"url":"https://api.github.com/repos/guevara/read-it-later","forks_url":"https://api.github.com/repos/guevara/read-it-later/forks","keys_url":"https://api.github.com/repos/guevara/read-it-later/keys{/key_id}","collaborators_url":"https://api.github.com/repos/guevara/read-it-later/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/guevara/read-it-later/teams","hooks_url":"https://api.github.com/repos/guevara/read-it-later/hooks","issue_events_url":"https://api.github.com/repos/guevara/read-it-later/issues/events{/number}","events_url":"https://api.github.com/repos/guevara/read-it-later/events","assignees_url":"https://api.github.com/repos/guevara/read-it-later/assignees{/user}","branches_url":"https://api.github.com/repos/guevara/read-it-later/branches{/branch}","tags_url":"https://api.github.com/repos/guevara/read-it-later/tags","blobs_url":"https://api.github.com/repos/guevara/read-it-later/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/guevara/read-it-later/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/guevara/read-it-later/git/refs{/sha}","trees_url":"https://api.github.com/repos/guevara/read-it-later/git/trees{/sha}","statuses_url":"https://api.github.com/repos/guevara/read-it-later/statuses/{sha}","languages_url":"https://api.github.com/repos/guevara/read-it-later/languages","stargazers_url":"https://api.github.com/repos/guevara/read-it-later/stargazers","contributors_url":"https://api.github.com/repos/guevara/read-it-later/contributors","subscribers_url":"https://api.github.com/repos/guevara/read-it-later/subscribers","subscription_url":"https://api.github.com/repos/guevara/read-it-later/subscription","commits_url":"https://api.github.com/repos/guevara/read-it-later/commits{/sha}","git_commits_url":"https://api.github.com/repos/guevara/read-it-later/git/commits{/sha}","comments_url":"https://api.github.com/repos/guevara/read-it-later/comments{/number}","issue_comment_url":"https://api.github.com/repos/guevara/read-it-later/issues/comments{/number}","contents_url":"https://api.github.com/repos/guevara/read-it-later/contents/{+path}","compare_url":"https://api.github.com/repos/guevara/read-it-later/compare/{base}...{head}","merges_url":"https://api.github.com/repos/guevara/read-it-later/merges","archive_url":"https://api.github.com/repos/guevara/read-it-later/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/guevara/read-it-later/downloads","issues_url":"https://api.github.com/repos/guevara/read-it-later/issues{/number}","pulls_url":"https://api.github.com/repos/guevara/read-it-later/pulls{/number}","milestones_url":"https://api.github.com/repos/guevara/read-it-later/milestones{/number}","notifications_url":"https://api.github.com/repos/guevara/read-it-later/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/guevara/read-it-later/labels{/name}","releases_url":"https://api.github.com/repos/guevara/read-it-later/releases{/id}","deployments_url":"https://api.github.com/repos/guevara/read-it-later/deployments","created_at":"2018-09-25T06:32:07Z","updated_at":"2025-10-26T17:51:45Z","pushed_at":"2018-09-25T06:32:08Z","git_url":"git://github.com/guevara/read-it-later.git","ssh_url":"git@github.com:guevara/read-it-later.git","clone_url":"https://github.com/guevara/read-it-later.git","svn_url":"https://github.com/guevara/read-it-later","homepage":null,"size":0,"stargazers_count":233,"watchers_count":233,"language":null,"has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":12238,"license":null,"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":0,"open_issues":12238,"watchers":233,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Learning Rust via Advent of Code<br>\n<br>\nhttp://bit.ly/2GrpXoS<br>\n<br>\nAbout 0 Minutes<br>\n<br>\n<div>\n<div>\n<h1>Learning Rust via Advent of Code</h1>\n<p>February 3, 2019</p>\n</div>\n<div>\n<h2>Learning Rust via Advent of Code</h2>\n<p>For years the games industry has looked at Rust as the promised land. The language that will save us from C++.</p>\n<p>In 2018 I decided to finally take some time to learn Rust. I read the <a href=\"https://doc.rust-lang.org/book/\">book</a>; which was well organized and delightful. I attended <a href=\"https://rustconf.com/\">Rust Conf</a> in nearby Portland. Then I started dabbling at home. I don't know much, but I'm making progress.</p>\n<h2>Advent of Code</h2>\n<p>The <a href=\"https://www.forrestthewoods.com/blog/learning-rust-via-advent-of-code/(https://adventofcode.com/\">Advent of Code</a> is a programming competition organized by <a href=\"https://twitter.com/ericwastl\">Eric Wastl</a>. It's an <a href=\"https://en.wikipedia.org/wiki/Advent_calendar\">advent calendar</a> where every day he releases a new puzzle.</p>\n<p>I decided to use the competition as means to learn Rust. I'm writing two blog posts. This post focuses primarily on my experience with Rust. My other post focuses on puzzle solutions and optimizations. If you'd like to read that post it's available here:</p>\n<p><a href=\"https://www.forrestthewoods.com/blog/solving-advent-of-code-in-under-a-second/\">Solving Advent of Code in Under a Second</a></p>\n<h2>Advent Experience</h2>\n<p>Learning a new language via Advent of Code turned out to be a <i>great</i> idea. I highly recommend it.</p>\n<p>People use every language under the sun to solve AoC puzzles. Python, JavaScript, C, C++, C#, Rust, Haskell, Clojure, Perl, Fortran, Lisp, Lua, Scala, OCaml, Ruby, Php, Swift, and more. Many folks were, like me, using AoC to learn something new.</p>\n<p>The <a href=\"https://www.reddit.com/r/adventofcode/\">community</a> is great. Thousands of programmers are working to solve the same problems. The subreddit has a solutions thread for every puzzle. If you get stuck you can ask questions or peek at other solutions.</p>\n<p>Once you have a solution it's useful to see what other people did. I learned a lot of Rust tricks and new algorithms this way.</p>\n<h2>Rust Noob</h2>\n<p>I'm a total noob at Rust. I've written two or three thousand lines on toy projects. This post is not \"how to write good Rust code\". I don't know what I'm doing! This is about my trials, tribulations, and lessons learned.</p>\n<p>My solutions and full project are linked below. Solutions for all 25 days are in one file so it's easy to skim.</p>\n<p><a href=\"https://www.forrestthewoods.com/blog/learning-rust-via-advent-of-code/adventofcode2018_forrestsmith_rust\">Source Code</a><br>\n<a href=\"https://www.forrestthewoods.com/blog/learning-rust-via-advent-of-code/assets/AdventOfCode2018_ForrestSmith_Rust.zip\">Project</a></p>\n<h2>Parsing Text is Hard</h2>\n<p>My first stumbling block was parsing. Almost every AoC problem starts with parsing lines of text from an input file.</p>\n<p>String parsing in Rust is not easy. There's no random access into Rust Strings because they're UTF-8 encoded. The chars iterator is not very ergonomic. Using <code>as_bytes</code> helps only a little.</p>\n<p>My first few attempts were complicated and inefficient. Then I learned how to use Rust's regex library by looking at <a href=\"https://github.com/BurntSushi/advent-of-code\">BurntSushi's AoC solutions</a>.</p>\n<p>I'm not gonna lie. Using regex's feels like overkill. Consider the following line of input:</p>\n<pre>\n#1 @ 338,764: 20x24\n</pre>\n<p>Here's my matching Regex code.</p>\n<pre>\nRegex<span>::</span>new(r<span>\"#\\d+ @ (?P&lt;x&gt;\\d+),(?P&lt;y&gt;\\d+): (?P&lt;w&gt;\\d+)x(?P&lt;h&gt;\\d+)\"</span>).unwrap();\n</pre>\n<p>Is there a better expression? I don't know. Probably. I feel like there should be a helper for <i>simple</i> parse operations.</p>\n<pre>\nparse<span>!</span>(<span>\"#{} @ {},{}: {}x{}\"</span>, id, x, y, w, h);\n</pre>\n<p>This would be a clean inverse of <code>println!</code>. It would be great for simple cases.</p>\n<h3>Rexer</h3>\n<p>I'm not a regex expert. I'm not even an apprentice. I've always joked that regular expressions have the elusive write-once flag. Once you finish writing one you'll never understand what it does ever again.</p>\n<p>To help write my parsing regexes I used the free website <a href=\"https://regexr.com/\">Regexr</a>. It works well for the <a href=\"https://crates.io/crates/regex\">Regex crate</a> which uses <a href=\"https://en.wikipedia.org/wiki/Perl_Compatible_Regular_Expressions\">PCRE</a>-like syntax.</p>\n<p>Using an interactive webtool was pleasant. It is far faster than having to compile and run Rust code.</p>\n<img src=\"https://www.forrestthewoods.com/blog/learning-rust-via-advent-of-code/assets/img/01.png\" alt=\"Regexr Tool\">\n<h2>Iterators</h2>\n<p>My background is C++. In C++ an \"iterator\" often boils down to a raw pointer. Rust iterators are <a href=\"https://doc.rust-lang.org/std/iter/index.html#laziness\">lazy</a>, composable, and impressively powerful.</p>\n<p>I spent a fair amount of time referencing <a href=\"https://doc.rust-lang.org/std/iter/trait.Iterator.html\">iterator API documentation</a>. I'm still learning what features are available and how to use them. I had a lot of fun trying to be clever.</p>\n<h3>Enumerate</h3>\n<p>I love <a href=\"https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.enumerate\">enumerate</a>. It provides a way to use iterators but still have an iteration count.</p>\n<pre>\n<span>let</span> <span>mut</span> values <span>:</span> Vec<span>&lt;</span>usize<span>&gt;</span> <span>=</span> vec<span>!</span>[<span>3</span>,<span>5</span>,<span>8</span>,<span>13</span>,<span>21</span>];\n<span>for</span> (i, value) in values.iter_mut().enumerate() {\n    <span>*</span>value <span>*=</span> i;\n}  \nassert_eq<span>!</span>(values, [<span>0</span>,<span>5</span>,<span>16</span>,<span>39</span>,<span>84</span>]);\n</pre>\n<h3>Custom Iterators</h3>\n<p>Multiple puzzles involved grids and neighbor cells. It was common to perform some action for each neighbor. Iterating neighbors requires checking for borders and possibly neighbor value.</p>\n<p>I wrote my own AdjacencyIterator to iterate neighbors and perform border checks. It was super simple. Way easier than writing a C++ <a href=\"https://stackoverflow.com/questions/8054273/how-to-implement-an-stl-style-iterator-and-avoid-common-pitfalls\">STL-compatible iterator</a>.</p>\n<p>Rust isn't quite as nice or flexible as C# <code>IEnumerable</code>. Maybe someday?</p>\n<h3>Expressiveness</h3>\n<p>Adjacency iterators plus built-in features enabled some delightfully expressive code. Consider the following:</p>\n</div>\n<div>\n<pre>\n<span>let</span> slot <span>=</span> units  \n   .iter()\n   .filter(<span>|</span>unit<span>|</span> self.is_enemy(u)                      <span>// ignore non-enemies  </span>\n   .flat_map(<span>|</span>unit<span>|</span> unit.pos.adjacent_positions(w,h))   <span>// iterate adjacent positions  </span>\n   .filter(<span>|</span>pos<span>|</span> <span>!</span>walls[pos] <span>&amp;&amp;</span> <span>!</span>occupied[pos]          <span>// ignore walls or occupied spaces  </span>\n   .min_by_key(<span>|</span>pos<span>|</span> (self.pos <span>-</span> pos).length_sq());     <span>// pick closest slot  </span>\n</pre>\n</div>\n<div>\n<p>That code will find the closest unoccupied position that is adjacent to an enemy. If I had written that in C++ it might look like this:</p>\n</div>\n<div>\n<pre>\n<span>// track best</span>\n<span>int</span> best_distance_sq <span>=</span> std<span>::</span>numeric_limits<span>&lt;</span><span>int</span><span>&gt;::</span>max();\nVec2i best_slot;\n    \n<span>// iterate units</span>\n<span>for</span> (<span>size_t</span> i <span>=</span> <span>0</span>; i <span>&lt;</span> units.size(); <span>++</span>i) {\n    Unit <span>const</span><span>&amp;</span> unit <span>=</span> units[i];\n    \n    <span>// ignore non-enemies</span>\n    <span>if</span> (<span>this</span><span>-&gt;</span>is_enemy(unit) {\n    \n        <span>// iterate adjacent positions</span>\n        <span>static</span> constexpr std<span>::</span>array<span>&lt;</span>Vec2i<span>&gt;</span> offsets <span>=</span> {{<span>-</span><span>1</span>,<span>0</span>}, {<span>1</span>,<span>0</span>}, {<span>0</span>,<span>-</span><span>1</span>}, {<span>0</span>,<span>1</span>}};\n        <span>for</span> (<span>size_t</span> j <span>=</span> <span>0</span>; j <span>&lt;</span> offsets.size(); <span>++</span>j) {\n            Vec2 pos <span>=</span> unit.pos <span>+</span> offset;\n    \n            <span>// check bounds</span>\n            <span>if</span> (pos.x <span>&gt;=</span> <span>0</span> <span>&amp;&amp;</span> pos.x <span>&lt;</span> width <span>&amp;&amp;</span> pos.y <span>&gt;=</span> <span>0</span> <span>&amp;&amp;</span> pos.y <span>&lt;</span> height) {  \n    \n                <span>// ignore walls and occupied spaces</span>\n                 <span>if</span> (<span>!</span>walls[pos] <span>&amp;&amp;</span> <span>!</span>occupied[pos]) {\n    \n                    <span>// pick closest slot</span>\n                    <span>int</span> dist_sq <span>=</span> (<span>this</span><span>-&gt;</span>pos <span>-</span> pos).length_sq();\n                    <span>if</span> (dist_sq <span>&lt;</span> best_distance_sq) { \n                        best_distance_sq <span>=</span> dist_sq; \n                            best_slot <span>=</span> pos;\n                    }\n                } \n            } \n        }\n    }\n} \n</pre>\n</div>\n<div>\n<p>Those blocks of code will produce the exact same result. In theory, they should have the same performance.</p>\n<p>Remember, Rust iterators are lazy. The function <code>filter</code> doesn't process every element immediately. It creates a struct that stores a closure. That closure only executes when the iterator function <code>next</code> is called. Which doesn't happen until <code>min_by_key</code>.</p>\n<p>I tried to produce a <a href=\"https://godbolt.org/z/61a5O_\">Godbolt</a> example to compare the assembly generated. Unfortunately it requires a lot of boilerplate. The output is too long to reasonably compare.</p>\n<p>Writing idiomatic Rust code seems to require trusting the compiler. This is especially true for closure-based iterators. I don't love this. I've already hit instances where I needed to \"unroll\" simple iterator code to improve performance.</p>\n<h3>Assorted Goodies</h3>\n<p>I used and enjoyed quite a few iterator built-ins. Here's a brief summary of what I used for AoC.</p>\n<ul>\n<li>\n<a href=\"https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.collect\">collect</a> - transform iterator into a collection; such as a Vec</li>\n<li>\n<a href=\"https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.count\">count</a> - counts iterations to reach end</li>\n<li>\n<a href=\"https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.cycle\">cycle</a> - creats iterator that loops</li>\n<li>\n<a href=\"https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.enumerate\">enumerate</a> - creates iterator that returns tuple of iteration count and value</li>\n<li>\n<a href=\"https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.filter\">filter</a> - uses closure to yield values</li>\n<li>\n<a href=\"https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.find\">find</a> - searches for value</li>\n<li>\n<a href=\"https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.flat_map\">flat_map</a> - map plus flatten</li>\n<li>\n<a href=\"https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.fold\">fold</a> - applies function to produce a single value</li>\n<li>\n<a href=\"https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.for_each\">for_each</a> - calls closure for each value</li>\n<li>\n<a href=\"https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.map\">map</a> - transforms each value into another</li>\n<li>\n<a href=\"https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.max\">max</a> - returns largest value in iteration</li>\n<li>\n<a href=\"https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.max_by\">max_by</a> - returns largest value using provided comparison function</li>\n<li>\n<a href=\"https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.min_by_key\">min_by_key</a> - returns value given a function</li>\n<li>\n<a href=\"https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.sum\">sum</a> - returns sum of iterator values</li>\n</ul>\n<h3>Compilation Woes</h3>\n<p>I had to unroll some iterators just to compile. Consider the following:</p>\n<pre>\ndungeon.tiles  \n    .iter()  \n    .filter(<span>|</span>tile<span>|</span> <span>!</span>visited.contains(tile))  \n    .for_each(<span>|</span>tile<span>|</span> {  \n        do_thing(tile);  \n        visited.insert(tile);  \n    }); \n</pre>\n<p>This fails to compile due to the <a href=\"https://doc.rust-lang.org/1.8.0/book/references-and-borrowing.html\">borrow checker</a>.</p>\n<p>The problem is that <code>filter</code> immutably captures visited and <code>for_each</code> mutably captures it. The Rust borrow checker does not allow this.</p>\n<p>We could move <code>.contains(tile)</code> into <code>for_each</code> and it'd compile. That may even be preferable. What's interesting, and often frustrating, is that naive \"unrolling\" will compile while iterators do not.</p>\n<h2>Profiling</h2>\n<p>The Rust profiling story is mixed. It could be worse. It could be a <i>lot</i> better.</p>\n<h3>Sampling</h3>\n<p>I'm a big fan of <a href=\"https://en.wikipedia.org/wiki/Profiling_(computer_programming)#Statistical_profilers\">sampling profilers</a>. Everyone should have a few in their toolkit. A good sampling profiler can give actionable information in four mouse clicks.</p>\n<p>Sampling in Rust works well enough. It'd be better if the function names were demangled.</p>\n<p>I tried, and was pleasantly surprised by, Visual Studio's analyzer.</p>\n<img src=\"https://www.forrestthewoods.com/blog/learning-rust-via-advent-of-code/assets/img/02.png\" alt=\"Visual Studio Analyzer Result\">\n<p>VTune also worked.</p>\n<img src=\"https://www.forrestthewoods.com/blog/learning-rust-via-advent-of-code/assets/img/03.png\" alt=\"VTune Result\">\n<p>I couldn't figure out how to map source files. <a href=\"https://imgur.com/a/V14bu\">Screenshots</a> leads me to believe it's possible. I don't know how. :(</p>\n<h3>Flamegraphs</h3>\n<p>I have mixed opinions on <a href=\"http://www.brendangregg.com/flamegraphs.html\">flamegraphs</a>. They're a nice visualization of sampling data. Width of each node is a proportional to total time spent. I often prefer the call tree. Your mileage may vary.</p>\n<img src=\"https://www.forrestthewoods.com/blog/learning-rust-via-advent-of-code/assets/img/04.png\" alt=\"Canonical Flamegraph\">\n<p>Source: <a href=\"https://queue.acm.org/downloads/2016/Gregg4.svg\">Brendan Gregg</a></p>\n<p>The most recommended Rust profiling tool is the <a href=\"https://crates.io/crates/flame\">flame</a> crate. The <a href=\"https://crates.io/crates/flamer\">flamer</a> crate provides convenience macros.</p>\n<p>Flame is a weird crate. It produces flamegraphs, but requires manual instrumentation. It doesn't offer a timeline or thread based view. I tried to instrument some inner-loops and it produced a 28 megabyte HTML file that wouldn't load. It's kinda the worst of both worlds.</p>\n<p>I ended up using manual timers. :(</p>\n<h3>Instrumention</h3>\n<p>Rust has a big hole in its profiling story.</p>\n<p>Flamegraphs are an important tool, but they aren't nearly enough. They aren't real time. They don't provide multithreading information. They expose a very limited type of data. They can't help with frame spikes. Webtools are janky and slow.</p>\n<p>I'd love to see Rust get some professional grade profiling tools like <a href=\"http://www.radgametools.com/telemetry.htm\">Telemetry</a> or <a href=\"https://www.puredevsoftware.com/framepro/index.htm\">FramePro</a>.</p>\n</div>\n<div>\n<p>C/C++ has many robust profiling options. I've used <a href=\"https://github.com/Celtoys/Remotery\">Remotery</a> and it works well. I found several more options with a few minutes of Googling; <a href=\"https://www.superluminal.eu/\">superluminal</a>, <a href=\"https://github.com/jonasmr/microprofile\">microprofile</a>, <a href=\"https://github.com/yse/easy_profiler\">easy profiler</a>, and <a href=\"https://github.com/bombomby/brofiler\">brofiler</a>.</p>\n<p><a href=\"https://aras-p.info/blog/2017/08/08/Unreasonable-Effectiveness-of-Profilers/\">Chrome Trace</a> via <a href=\"https://github.com/hrydgard/minitrace\">minitrace</a> is another option.</p>\n</div>\n<div>\n<p>The lack of a good instrumented CPU profiler is a huge hole in the Rust ecosystem. It's also a huge opportunity.</p>\n<h2>Benchmarking</h2>\n<p>Rust's benchmarking story is mixed.</p>\n<p>The goto crate is <a href=\"https://docs.rs/criterion/0.2.7/criterion\">Criterion</a>. I had a lot of trouble with it.</p>\n<p>My full solution set takes less than one-second to run. Criterion claims to be a \"statistics-driven micro-benchmarking\" library. Micro appears to be quite literal! Code that takes hundreds of milliseconds may be out of scope.</p>\n<p>I attempted to let Criterion run overnight with default settings. It completed benchmarks for only 15 of 25 days in ~12 hours. &#129335;</p>\n<p>Part of the problem is poor <a href=\"https://docs.rs/criterion/0.2.7/criterion/\">documentation</a>. Functions are documented. How to use them is not. The user guide is insufficient.</p>\n<p>I couldn't figure out how to even call <code>sample_size</code>. I had to search GitHub to find a working example. I tried to set <code>measurement_time</code>. It took more than an order of magnitude longer than specified.</p>\n<p>Criterion produces some pretty charts via <a href=\"http://www.gnuplot.info/\">gnuplot</a>. It has a lot of nice features. I was unable to effectively use the tool.</p>\n<img src=\"https://www.forrestthewoods.com/blog/learning-rust-via-advent-of-code/assets/img/07.png\" alt=\"Criteron Graph\">\n<h2>Multithreading</h2>\n<p>One of Rust's mottos is <a href=\"https://blog.rust-lang.org/2015/04/10/Fearless-Concurrency.html\">fearless concurrency</a>. For AoC I chose to focus on single-threaded performance.</p>\n<p>I've heard so much about <a href=\"https://github.com/rayon-rs/rayon\">Rayon</a> I couldn't resist giving it a try. In 10 minutes I had naive multithreading working. On my 6-core/12-thread Intel i8700k it cut my total run-time from ~750ms to 200ms. Color me impressed!</p>\n<p>That was naively running each puzzle in parallel. Running all solutions 100x it worked out to about 100ms on average. Not bad.</p>\n<p>Proper multithreading requires a lot more than sprinkling <code>par_iter()</code> here and there. But for it to have worked so easily is a little mind blowing. I've had <i>horrible</i> experiences trying to parallelize pre-existing C++. Rayon was a breath of fresh air.</p>\n<h2>Optimization</h2>\n<p>I spent a fair amount of time on optimization. Some of it algorithmic and some Rust specific. For further details please see my other post:</p>\n<p><a href=\"https://www.forrestthewoods.com/blog/solving-advent-of-code-in-under-a-second/\">Solving Advent of Code in Under a Second</a></p>\n<h2>Assorted Thoughts</h2>\n<h3>Rust Playground</h3>\n<p>The <a href=\"https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2015&amp;gist=8cf114170682b9c1381473fca58c7952\">Rust Playground</a> is great. I used it to quickly test questions. For example, what is the std::mem::size_of result for various structs?</p>\n<p>It's also great for creating snippets to share in the <a href=\"https://www.reddit.com/r/rust\">r/rust</a> newbie thread. Which I did on more than a few occassions.</p>\n</div>\n<div><img src=\"https://www.forrestthewoods.com/blog/learning-rust-via-advent-of-code/assets/img/09.png\" alt=\"Rust Playground\"></div>\n<div>\n<h3>Debugging</h3>\n<p>Rust's debugging story is \"needs improvement\".</p>\n<p>Visual Studio Code is pretty easy to configure as a debugger. Step debugging actually works. So does the watch window.</p>\n<p>Unfortunately most containers aren't inspectable. Vec works because it's basically an array. HashMap and HashSet are inscrutable.</p>\n<img src=\"https://www.forrestthewoods.com/blog/learning-rust-via-advent-of-code/assets/img/08.png\" alt=\"VSCode Debugger\">\n<p>Visual Studio has <a href=\"https://docs.microsoft.com/en-us/visualstudio/debugger/create-custom-views-of-native-objects?view=vs-2017\">natvis</a> for C++. It's not great. I have a lot of complaints. It's way better than Rust's nothing.</p>\n<p>I'm hoping Rust 2019 lays the groundwork for improved IDE and debugging in 2020.</p>\n<h3>Bit Packing</h3>\n<p><code>Option&lt;bool&gt;</code> is only one byte. <code>Option</code> is also one byte for an <code>enum</code> when the <code>enum</code> value doesn't need all the bits. This was a pleasant surprise.</p>\n<h3>Implicit Casts</h3>\n<p>Rust doesn't have implicit casts. If you want to pass a <code>u32</code> to a function that needs a <code>usize</code> you have to explicitly cast it.</p>\n<p>I think I like this. It leads to annoyingly verbose code. But it did prevent at least a couple of bugs.</p>\n<h3>Inference</h3>\n<p>Rust is statically typed. However it has robust support for type inference.</p>\n<pre>\n<span>let</span> elem <span>=</span> <span>5</span><span>u8</span>;  \n<span>let</span> <span>mut</span> vec <span>=</span> Vec<span>::</span>new();  \nvec.push(elem);  \nvec.push(<span>6</span><span>u32</span>); <span>// error: expected u8, found u32  </span>\n</pre>\n<p>The type of <code>vec</code> is inferred to be <code>Vec&lt;u8&gt;</code>. You can leave off a <i>shocking</i> amount of type information. For better or worse.</p>\n<h3>rustfmt</h3>\n<p>I enabled rustfmt for auto-formatting. I like it 95% of the time. For AoC I'm jealous of the brevity of Python. Rust is quite verbose, and rustfmt makes it a little worse.</p>\n<p>Rustfmt badly needs a <code>clang-format off</code> feature for block level control.</p>\n<h3>Helper Lambdas</h3>\n<p>I like lambdas in C++11. I use them regularly for small helpers that exist solely within a function.</p>\n<p>This is hard to do in Rust. It causes borrow checker errors similar to iterator closure issue described above.</p>\n<p>What make it frustrating is that an uncompilable helper lambda will often work <i>perfectly</i> if changed to a macro. That feels like a bug to me. This case isn't quite mentioned in a recent post on <a href=\"http://smallcultfollowing.com/babysteps/blog/2018/11/01/after-nll-interprocedural-conflicts/\">non-lexical lifetimes</a>. I think it should be.</p>\n<h3>HashMap Initialization</h3>\n<p>I had a hard time initializing <code>HashMap</code>. Here's what I'd like to do:</p>\n<pre>\n<span>let</span> allowable_gear <span>:</span> HashMap<span>&lt;</span>(TileType,TileType), <span>&amp;</span>[Gear]<span>&gt;</span> <span>=</span> {  \n    (Rocky, Rocky) <span>=</span> <span>&amp;</span>[Climbing, Torch],  \n    (Rocky, Wet) <span>=</span> <span>&amp;</span>[Climbing], \n    (Wet, Narrow) <span>=</span> <span>&amp;</span>[Neither],\n};\n</pre>\n<p>This is a <code>HashMap</code> that maps a pair of <code>TileTypes</code> to an array of <code>Gear</code>. This relationship is constant and known at compile time. I couldn't find a clean, idiomatic way to do this. :(</p>\n<h3>BinaryHeap</h3>\n<p>The standard library provides a <a href=\"https://en.wikipedia.org/wiki/Binary_heap\">max-heap</a>. I regularly needed a min-heap. I got one by making a custom struct with custom <a href=\"https://doc.rust-lang.org/beta/std/cmp/index.html\">compare</a> function.</p>\n<p>This was a bit of a pain. It could have been easier. Priority queues with customizable compare functions seems like a useful thing that would exist. I'm probably doing it wrong?</p>\n<h3>Rc&lt;RefCell&lt;Foo&gt;&gt;</h3>\n<p>I've barely touched <code>Rc</code> and <code>RefCell</code>. For day23 I wrote an Octree and it used an <code>Rc&lt;RefCell&lt;OctreeNode&gt;&gt;</code>. I wanted to typedef that to <code>OctreeNodePtr</code>. Except that didn't work for creating new values.</p>\n<p>Graphs are notoriously difficult in Rust. I'm pretty sure I made my Octree incorrectly. But I'm not sure what I should have done instead. Suggestions welcome!</p>\n<h3>Sorting</h3>\n<p>For several puzzles I sorted a struct based on sequential fields. For example:</p>\n<pre>\ndates.sort_by(<span>|</span>a,b<span>|</span> { \n    <span>if</span> a.year <span>!=</span> b.year { a.year.cmp(<span>&amp;</span>b.year) }  \n    <span>else</span> <span>if</span> a.month <span>!=</span> b.month { a.month.cmp(<span>&amp;</span>b.month) }  \n    <span>else</span> <span>if</span> a.day <span>!=</span> b.day { a.day.cmp(<span>&amp;</span>b.day) } \n    <span>else</span> <span>if</span> a.hour <span>!=</span> b.hour { a.hour.cmp(<span>&amp;</span>b.hour) }\n    <span>else</span> { a.minute.cmp(<span>&amp;</span>b.minute) }\n});\n</pre>\n<p>I wonder if there is a nice macro crate to help with this? I'd love to write:</p>\n<pre>\ncompare<span>!</span>(a, b, year, month, day, hour, minute);\n</pre>\n<p>My sort for day23 was more complex. It sorted by <code>foo.max_possible</code> then <code>foo.bounds.volume()</code> then <code>foo.bounds.distance_from(origin)</code>. Here's one idea for a useful sort API.</p>\n<pre>\nfoos.sort_by(<span>|</span>v<span>|</span> v.max_possible)\n    .then_by(<span>|</span>v<span>|</span> v.bounds())\n    .then_by(<span>|</span>v<span>|</span> v.bounds.distance_from(origin))\n    .sort(); \n</pre>\n<p>That would be great. That API design feels pretty close to right. What do you think?</p>\n<h3>Boilerplate</h3>\n<p>I chose to write a lot of boilerplate in my solutions. I wanted to keep all my code in one place for each puzzle. I didn't want to use ambiguous tuples of unnamed types.</p>\n<p>I wrote <code>struct Pos</code> for 8 out of 25 days. In <code>i8</code>, <code>i16</code>, and <code>i32</code> flavors. I probably should have used <a href=\"https://docs.rs/cgmath/0.16.1/cgmath/\">cgmath</a> or <a href=\"https://www.nalgebra.org/rustdoc/nalgebra/index.html\">nalgebra</a>. One my side projects is a Rust crate for video game 3d math. Maybe it'll be done by Advent of Code 2019.</p>\n<h3>Build Profiles</h3>\n<p>Cargo doesn't have custom build profiles. This blows my mind.</p>\n<p>The included profiles are dev, release, bench, test, and doc. Only dev and release are used for running a program. Historically I've run with debug, internal, release, and retail.</p>\n<p>There is a <a href=\"http://aturon.github.io/2018/04/05/workflows/\">blog post</a> and <a href=\"https://github.com/rust-lang/rust/issues/48683\">tracking issue</a> that lead me to believe custom profiles this will happen someday. It may be awhile.</p>\n<h3>Link-Time Optimization</h3>\n<p>Release builds set link-time optimization to false by default. This is the correct choice due to build times.</p>\n<p>Enabling LTO and changing codegen units reduced my run-time from 700ms to 600ms. That's a 14% improvement from a couple of compiler flags! More details available in <a href=\"https://www.forrestthewoods.com/blog/solving-advent-of-code-in-under-a-second/\">other post</a>.</p>\n<p>When Rust ships custom build profiles I'd love to see a MaxSpeed config. <a href=\"https://github.com/BurntSushi/ripgrep/issues/413\">RipGrep</a> doesn't ship binaries with LTO. I think the lack of custom profiles is causing a <i>lot</i> of shipped Rust code to leave free performance on the table.</p>\n<h3>New Primitive Types</h3>\n<p>I wish Rust provided <code>u24</code> and <code>i24</code> types. They're useful in a few scenarios. They already exist inside various audio crates. I couldn't find a robut standalone implementation.</p>\n<p>I wish there was an <code>f16</code> half-precision float. There's a good <a href=\"https://internals.rust-lang.org/t/adding-minifloats-f24-f16-f8-as-native-types/2367\">internals thread</a> on minifloats that makes me think <code>f16</code> will happen eventually.</p>\n<h2>Crates</h2>\n<p>I used a handful of crates. Here's a brief list.</p>\n<p>I have not tried the parsing libraries <a href=\"https://crates.io/crates/nom\">nom</a> or <a href=\"https://crates.io/crates/pest\">pest</a>. I wonder if they would have made parsing day 24 easy? I'd like to investigate them in the future.</p>\n<h3>Crate Discovery</h3>\n<p>Crate discovery is non-existent. GitHub stars is not a useful metric. Downloads on crates.io is ok but not great. I looked for some replacements for <code>std::collections</code> containers. It was hard to tell which crates were worth trying.</p>\n<p>I got a huge speed-up when I replaced the built-in <code>HashMap</code> with an <code>FnvHashMap</code>. Through dumb luck I found <code>Hashbrown</code>, which is even faster.</p>\n<p>There needs to be a better way to find crates. This is a hard problem.</p>\n<h2>Clippy</h2>\n<p><a href=\"https://github.com/rust-lang/rust-clippy\">Clippy</a> is an easy to use linter to catch common issues.</p>\n<p>I hit and fixed ~25 lints. They were minor issues or recommended improvements. However I did have to disable a few lints.</p>\n<h3>needless_range_loop</h3>\n<p>Bad lint. I iterated <code>0..3</code> to grab components out of multiple <code>Vec2</code> structs. My struct lacked iterators. I could have implemented an iterator and used <code>zip</code>. A simple for-loop is better.</p>\n<h3>too_many_arguments</h3>\n<p>Generally true. I feel my use case was appropriate.</p>\n<h3>map_entry</h3>\n<p>Bad lint. It was straight wrong.</p>\n<p>For day22 I had a HashMap of tiles. Each tile had a cost that was dependent on tiles up and to the left. I wrote this recursively.</p>\n</div>\n<div>\n<pre>\n<span>fn</span> get_tile(<span>&amp;</span><span>mut</span> self, pos<span>:</span> pos) <span>-&gt;</span> <span>&amp;</span><span>mut</span> Tile {  \n    <span>if</span> <span>!</span>self.tiles.contains_key(<span>&amp;</span>pos) {  \n        <span>let</span> new_value <span>=</span> compute_value(self.get_tile(left), self.get_tile(up));\n        self.tiles.insert(pos, new_value);\n    } \n\n    self.tiles.get_mut(<span>&amp;</span>pos)\n}  \n</pre>\n</div>\n<div>\n<p>The lint recommended version is:</p>\n</div>\n<div>\n<pre>\n<span>fn</span> get_tile(<span>&amp;</span><span>mut</span> self, pos<span>:</span> pos) <span>-&gt;</span> <span>&amp;</span><span>mut</span> Tile {  \n    self.tiles\n        .entry(<span>&amp;</span>pos)\n        .or_insert_with(<span>||</span> {\n            <span>let</span> new_value <span>=</span> compute_value(self.get_tile(left), self.get_tile(up));\n            self.tiles.insert(pos, new_value);\n        });\n}  \n</pre>\n</div>\n<div>\n<p>This doesn't compile. <code>entry</code> stores a reference to <code>tiles</code>. Then <code>or_insert_with</code> creates a closure with a mutable reference to <code>tiles</code> for recursion. That's not allowed.</p>\n<p>My recursive pattern isn't common. I'm not surprised Clippy can't handle it. It's a shame because I really like the <code>entry</code> API with <code>or_insert</code> and <code>or_insert_with</code>.</p>\n<h3>Lint Control</h3>\n<p>Clippy needs a way to disable lints for individual functions, blocks, or lines of code. I don't want to turn these lints off everywhere. This is the same issue as wanting <code>clang format off</code> for rustfmt.</p>\n<h2>Sentinels</h2>\n<p>One feature I wish Rust had was a helper struct for sentinel values. Consider an 8-bit value where you want to special case <code>255</code> to mean \"no value\". Or an <code>i32</code> where <code>-1</code> means \"no value\". This is pretty common.</p>\n<p>One Rusty, ahem, option would be an <a href=\"https://doc.rust-lang.org/std/option\">Option</a>; <code>Option&lt;u8&gt;</code>. Another might be an <a href=\"https://doc.rust-lang.org/1.30.0/book/second-edition/ch06-01-defining-an-enum.html\">enum</a>; <code>enum EFoo { None, Foo(u8) }</code>.</p>\n<p>Both these approaches use two bytes of storage. One byte for the <code>u8</code>, and another for a flag. An <code>Option&lt;u32&gt;</code> bloats to a whopping 8 bytes. An <code>Option&lt;u64&gt;</code> is, wait for it, 16 bytes.</p>\n<p>What I want is a struct that is stored as the underlying type and has a getter which returns an <code>Option&lt;T&gt;</code>. The getter returns <code>None</code> if the inner value is a specific value.</p>\n<p>This feature may not be possible today. It might be when when <a href=\"https://github.com/rust-lang/rust/issues/44580\">const generics</a> land.</p>\n<p>There is <a href=\"https://doc.rust-lang.org/beta/std/num/struct.NonZeroU32.html\">NonZeroU32</a>. It's similar-ish, but only works for zero. There isn't a <code>Non255U8</code> or, thankfully, <code>Non4294967296U32</code>.</p>\n<h2>Final Thoughts</h2>\n<p>I used Advent of Code as a means to learn Rust. This was a great idea and one I strongly recommend. AoC is a great way to learn any language.</p>\n<p>I won't claim to know Rust. But I do know a lot more today than I did before. Progress is clear success in my book.</p>\n<p>Thanks for reading.</p>\n<h2>Links</h2>\n<p><a href=\"https://www.forrestthewoods.com/blog/solving-advent-of-code-in-under-a-second/\">Solving Advent of Code in Under a Second</a><br>\n<a href=\"https://www.forrestthewoods.com/blog/learning-rust-via-advent-of-code/adventofcode2018_forrestsmith_rust\">Source Code</a><br>\n<a href=\"https://www.forrestthewoods.com/blog/learning-rust-via-advent-of-code/assets/AdventOfCode2018_ForrestSmith_Rust.zip\">Project</a></p>\n</div>\n</div>\n<br>\n<br>\n<br>\n<br>\n<br>\n<br>\nvia www.forrestthewoods.com http://bit.ly/2UD9L83<br>\n<br>\nFebruary 5, 2019 at 07:40AM","reactions":{"url":"https://api.github.com/repos/guevara/read-it-later/issues/2679/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/guevara/read-it-later/issues/2679/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":2605498456,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI2MDU0OTg0NTY=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/2605498456","actor":{"login":"tesuji","id":15225902,"node_id":"MDQ6VXNlcjE1MjI1OTAy","avatar_url":"https://avatars.githubusercontent.com/u/15225902?v=4","gravatar_id":"","url":"https://api.github.com/users/tesuji","html_url":"https://github.com/tesuji","followers_url":"https://api.github.com/users/tesuji/followers","following_url":"https://api.github.com/users/tesuji/following{/other_user}","gists_url":"https://api.github.com/users/tesuji/gists{/gist_id}","starred_url":"https://api.github.com/users/tesuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tesuji/subscriptions","organizations_url":"https://api.github.com/users/tesuji/orgs","repos_url":"https://api.github.com/users/tesuji/repos","events_url":"https://api.github.com/users/tesuji/events{/privacy}","received_events_url":"https://api.github.com/users/tesuji/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"cd4ebd32542cda174025df549dcdd4b343874dd5","commit_url":"https://api.github.com/repos/tesuji/ripgrep/commits/cd4ebd32542cda174025df549dcdd4b343874dd5","created_at":"2019-09-04T02:29:59Z","performed_via_github_app":null},{"actor":{"login":"tertsdiepraam","id":11643477,"node_id":"MDQ6VXNlcjExNjQzNDc3","avatar_url":"https://avatars.githubusercontent.com/u/11643477?v=4","gravatar_id":"","url":"https://api.github.com/users/tertsdiepraam","html_url":"https://github.com/tertsdiepraam","followers_url":"https://api.github.com/users/tertsdiepraam/followers","following_url":"https://api.github.com/users/tertsdiepraam/following{/other_user}","gists_url":"https://api.github.com/users/tertsdiepraam/gists{/gist_id}","starred_url":"https://api.github.com/users/tertsdiepraam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tertsdiepraam/subscriptions","organizations_url":"https://api.github.com/users/tertsdiepraam/orgs","repos_url":"https://api.github.com/users/tertsdiepraam/repos","events_url":"https://api.github.com/users/tertsdiepraam/events{/privacy}","received_events_url":"https://api.github.com/users/tertsdiepraam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-28T14:33:42Z","updated_at":"2023-02-28T14:33:42Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/uutils/coreutils/issues/4436","repository_url":"https://api.github.com/repos/uutils/coreutils","labels_url":"https://api.github.com/repos/uutils/coreutils/issues/4436/labels{/name}","comments_url":"https://api.github.com/repos/uutils/coreutils/issues/4436/comments","events_url":"https://api.github.com/repos/uutils/coreutils/issues/4436/events","html_url":"https://github.com/uutils/coreutils/pull/4436","id":1599774513,"node_id":"PR_kwDOALTHTM5Kwop7","number":4436,"title":"reduce the final binary size","user":{"login":"tpgxyz","id":13415195,"node_id":"MDQ6VXNlcjEzNDE1MTk1","avatar_url":"https://avatars.githubusercontent.com/u/13415195?v=4","gravatar_id":"","url":"https://api.github.com/users/tpgxyz","html_url":"https://github.com/tpgxyz","followers_url":"https://api.github.com/users/tpgxyz/followers","following_url":"https://api.github.com/users/tpgxyz/following{/other_user}","gists_url":"https://api.github.com/users/tpgxyz/gists{/gist_id}","starred_url":"https://api.github.com/users/tpgxyz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tpgxyz/subscriptions","organizations_url":"https://api.github.com/users/tpgxyz/orgs","repos_url":"https://api.github.com/users/tpgxyz/repos","events_url":"https://api.github.com/users/tpgxyz/events{/privacy}","received_events_url":"https://api.github.com/users/tpgxyz/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":21,"created_at":"2023-02-25T17:25:20Z","updated_at":"2023-03-25T09:59:08Z","closed_at":"2023-03-25T09:58:35Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":11847500,"node_id":"MDEwOlJlcG9zaXRvcnkxMTg0NzUwMA==","name":"coreutils","full_name":"uutils/coreutils","private":false,"owner":{"login":"uutils","id":5148717,"node_id":"MDEyOk9yZ2FuaXphdGlvbjUxNDg3MTc=","avatar_url":"https://avatars.githubusercontent.com/u/5148717?v=4","gravatar_id":"","url":"https://api.github.com/users/uutils","html_url":"https://github.com/uutils","followers_url":"https://api.github.com/users/uutils/followers","following_url":"https://api.github.com/users/uutils/following{/other_user}","gists_url":"https://api.github.com/users/uutils/gists{/gist_id}","starred_url":"https://api.github.com/users/uutils/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uutils/subscriptions","organizations_url":"https://api.github.com/users/uutils/orgs","repos_url":"https://api.github.com/users/uutils/repos","events_url":"https://api.github.com/users/uutils/events{/privacy}","received_events_url":"https://api.github.com/users/uutils/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/uutils/coreutils","description":"Cross-platform Rust rewrite of the GNU coreutils","fork":false,"url":"https://api.github.com/repos/uutils/coreutils","forks_url":"https://api.github.com/repos/uutils/coreutils/forks","keys_url":"https://api.github.com/repos/uutils/coreutils/keys{/key_id}","collaborators_url":"https://api.github.com/repos/uutils/coreutils/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/uutils/coreutils/teams","hooks_url":"https://api.github.com/repos/uutils/coreutils/hooks","issue_events_url":"https://api.github.com/repos/uutils/coreutils/issues/events{/number}","events_url":"https://api.github.com/repos/uutils/coreutils/events","assignees_url":"https://api.github.com/repos/uutils/coreutils/assignees{/user}","branches_url":"https://api.github.com/repos/uutils/coreutils/branches{/branch}","tags_url":"https://api.github.com/repos/uutils/coreutils/tags","blobs_url":"https://api.github.com/repos/uutils/coreutils/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/uutils/coreutils/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/uutils/coreutils/git/refs{/sha}","trees_url":"https://api.github.com/repos/uutils/coreutils/git/trees{/sha}","statuses_url":"https://api.github.com/repos/uutils/coreutils/statuses/{sha}","languages_url":"https://api.github.com/repos/uutils/coreutils/languages","stargazers_url":"https://api.github.com/repos/uutils/coreutils/stargazers","contributors_url":"https://api.github.com/repos/uutils/coreutils/contributors","subscribers_url":"https://api.github.com/repos/uutils/coreutils/subscribers","subscription_url":"https://api.github.com/repos/uutils/coreutils/subscription","commits_url":"https://api.github.com/repos/uutils/coreutils/commits{/sha}","git_commits_url":"https://api.github.com/repos/uutils/coreutils/git/commits{/sha}","comments_url":"https://api.github.com/repos/uutils/coreutils/comments{/number}","issue_comment_url":"https://api.github.com/repos/uutils/coreutils/issues/comments{/number}","contents_url":"https://api.github.com/repos/uutils/coreutils/contents/{+path}","compare_url":"https://api.github.com/repos/uutils/coreutils/compare/{base}...{head}","merges_url":"https://api.github.com/repos/uutils/coreutils/merges","archive_url":"https://api.github.com/repos/uutils/coreutils/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/uutils/coreutils/downloads","issues_url":"https://api.github.com/repos/uutils/coreutils/issues{/number}","pulls_url":"https://api.github.com/repos/uutils/coreutils/pulls{/number}","milestones_url":"https://api.github.com/repos/uutils/coreutils/milestones{/number}","notifications_url":"https://api.github.com/repos/uutils/coreutils/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/uutils/coreutils/labels{/name}","releases_url":"https://api.github.com/repos/uutils/coreutils/releases{/id}","deployments_url":"https://api.github.com/repos/uutils/coreutils/deployments","created_at":"2013-08-02T16:22:56Z","updated_at":"2025-11-09T23:50:56Z","pushed_at":"2025-11-09T22:39:29Z","git_url":"git://github.com/uutils/coreutils.git","ssh_url":"git@github.com:uutils/coreutils.git","clone_url":"https://github.com/uutils/coreutils.git","svn_url":"https://github.com/uutils/coreutils","homepage":"https://uutils.github.io/","size":32609,"stargazers_count":22121,"watchers_count":22121,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":1636,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":515,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["busybox","command-line-tool","coreutils","cross-platform","gnu-coreutils","rust"],"visibility":"public","forks":1636,"open_issues":515,"watchers":22121,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/uutils/coreutils/pulls/4436","html_url":"https://github.com/uutils/coreutils/pull/4436","diff_url":"https://github.com/uutils/coreutils/pull/4436.diff","patch_url":"https://github.com/uutils/coreutils/pull/4436.patch","merged_at":null},"body":"Hi, looks like release binary can be a little bit smaller.\r\n\r\n```\r\n[tpg@omv-rockpro64 LOL]$ stat -c%s uu-coreutils\r\n19810944\r\n[tpg@omv-rockpro64 LOL]$ stat -c%s uu-coreutils-opt \r\n15533632\r\n[tpg@omv-rockpro64 LOL]$ echo $(($(stat -c%s uu-coreutils) - $(stat -c%s uu-coreutils-opt) ))\r\n4277312\r\n[tpg@omv-rockpro64 LOL]$ echo $((($(stat -c%s uu-coreutils) - $(stat -c%s uu-coreutils-opt))/1024/1024 ))\r\n4\r\n```\r\n\r\nComapred to GNu coreutils compiled with corresponding CFLAGS/LDFLAGS and same LLVM toolchain 15.0.7\r\n```\r\n[tpg@omv-rockpro64 coreutils]$ stat -c%s /usr/bin/coreutils \r\n1067680\r\n```","reactions":{"url":"https://api.github.com/repos/uutils/coreutils/issues/4436/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/uutils/coreutils/issues/4436/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"zamazan4ik","id":7355383,"node_id":"MDQ6VXNlcjczNTUzODM=","avatar_url":"https://avatars.githubusercontent.com/u/7355383?v=4","gravatar_id":"","url":"https://api.github.com/users/zamazan4ik","html_url":"https://github.com/zamazan4ik","followers_url":"https://api.github.com/users/zamazan4ik/followers","following_url":"https://api.github.com/users/zamazan4ik/following{/other_user}","gists_url":"https://api.github.com/users/zamazan4ik/gists{/gist_id}","starred_url":"https://api.github.com/users/zamazan4ik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zamazan4ik/subscriptions","organizations_url":"https://api.github.com/users/zamazan4ik/orgs","repos_url":"https://api.github.com/users/zamazan4ik/repos","events_url":"https://api.github.com/users/zamazan4ik/events{/privacy}","received_events_url":"https://api.github.com/users/zamazan4ik/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-27T03:48:53Z","updated_at":"2023-11-27T03:48:53Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1225","repository_url":"https://api.github.com/repos/BurntSushi/ripgrep","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1225/labels{/name}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1225/comments","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1225/events","html_url":"https://github.com/BurntSushi/ripgrep/issues/1225","id":424385071,"node_id":"MDU6SXNzdWU0MjQzODUwNzE=","number":1225,"title":"Speedup ripgrep using profile guided optimization","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":339721683,"node_id":"MDU6TGFiZWwzMzk3MjE2ODM=","url":"https://api.github.com/repos/BurntSushi/ripgrep/labels/question","name":"question","color":"cc317c","default":true,"description":"An issue that is lacking clarity on one or more points."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2019-03-22T20:22:09Z","updated_at":"2023-11-28T02:34:18Z","closed_at":"2019-04-14T17:40:31Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":53631945,"node_id":"MDEwOlJlcG9zaXRvcnk1MzYzMTk0NQ==","name":"ripgrep","full_name":"BurntSushi/ripgrep","private":false,"owner":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/BurntSushi/ripgrep","description":"ripgrep recursively searches directories for a regex pattern while respecting your gitignore","fork":false,"url":"https://api.github.com/repos/BurntSushi/ripgrep","forks_url":"https://api.github.com/repos/BurntSushi/ripgrep/forks","keys_url":"https://api.github.com/repos/BurntSushi/ripgrep/keys{/key_id}","collaborators_url":"https://api.github.com/repos/BurntSushi/ripgrep/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/BurntSushi/ripgrep/teams","hooks_url":"https://api.github.com/repos/BurntSushi/ripgrep/hooks","issue_events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events{/number}","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/events","assignees_url":"https://api.github.com/repos/BurntSushi/ripgrep/assignees{/user}","branches_url":"https://api.github.com/repos/BurntSushi/ripgrep/branches{/branch}","tags_url":"https://api.github.com/repos/BurntSushi/ripgrep/tags","blobs_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/refs{/sha}","trees_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/trees{/sha}","statuses_url":"https://api.github.com/repos/BurntSushi/ripgrep/statuses/{sha}","languages_url":"https://api.github.com/repos/BurntSushi/ripgrep/languages","stargazers_url":"https://api.github.com/repos/BurntSushi/ripgrep/stargazers","contributors_url":"https://api.github.com/repos/BurntSushi/ripgrep/contributors","subscribers_url":"https://api.github.com/repos/BurntSushi/ripgrep/subscribers","subscription_url":"https://api.github.com/repos/BurntSushi/ripgrep/subscription","commits_url":"https://api.github.com/repos/BurntSushi/ripgrep/commits{/sha}","git_commits_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/commits{/sha}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/comments{/number}","issue_comment_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments{/number}","contents_url":"https://api.github.com/repos/BurntSushi/ripgrep/contents/{+path}","compare_url":"https://api.github.com/repos/BurntSushi/ripgrep/compare/{base}...{head}","merges_url":"https://api.github.com/repos/BurntSushi/ripgrep/merges","archive_url":"https://api.github.com/repos/BurntSushi/ripgrep/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/BurntSushi/ripgrep/downloads","issues_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues{/number}","pulls_url":"https://api.github.com/repos/BurntSushi/ripgrep/pulls{/number}","milestones_url":"https://api.github.com/repos/BurntSushi/ripgrep/milestones{/number}","notifications_url":"https://api.github.com/repos/BurntSushi/ripgrep/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/labels{/name}","releases_url":"https://api.github.com/repos/BurntSushi/ripgrep/releases{/id}","deployments_url":"https://api.github.com/repos/BurntSushi/ripgrep/deployments","created_at":"2016-03-11T02:02:33Z","updated_at":"2025-11-09T23:50:59Z","pushed_at":"2025-10-30T17:30:23Z","git_url":"git://github.com/BurntSushi/ripgrep.git","ssh_url":"git@github.com:BurntSushi/ripgrep.git","clone_url":"https://github.com/BurntSushi/ripgrep.git","svn_url":"https://github.com/BurntSushi/ripgrep","homepage":"","size":5534,"stargazers_count":57154,"watchers_count":57154,"language":"Rust","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2304,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":88,"license":{"key":"unlicense","name":"The Unlicense","spdx_id":"Unlicense","url":"https://api.github.com/licenses/unlicense","node_id":"MDc6TGljZW5zZTE1"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["cli","command-line","command-line-tool","gitignore","grep","recursively-search","regex","ripgrep","rust","search"],"visibility":"public","forks":2304,"open_issues":88,"watchers":57154,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Request for improvement\r\n\r\n#### What version of ripgrep are you using?\r\n\r\ncompiled current master (09139721047b1cda6ad88dbf89dc5fa74c66a3a2)\r\n\r\n#### How did you install ripgrep?\r\n\r\ncompiled current master (09139721047b1cda6ad88dbf89dc5fa74c66a3a2)\r\n\r\n#### What operating system are you using ripgrep on?\r\n\r\nLinux Mint 19.1 with kernel 4.18.0-16-lowlatency\r\n\r\n#### Describe your question, feature request, or bug.\r\n\r\nProfile guided optimization works by building the binary with profiling instrumentation first, then running the instrumented binary in a few test cases while saving runtime profiles and then using the profiles to optimize the code for example by reordering functions to improve cachability.\r\n\r\nUsing the very naive benchmark `time sudo target/release/rg --with-filename --word-regexp --line-buffered a /home > /dev/null` ripgrep needed `3.7s` on avg without profile guided optimization on my system and `3.3s` with pgo.\r\n\r\nThis is how I compiled rg with pgo:\r\n````\r\n# make sure we get a profile for each run, %p will be replaced with the pid\r\nexport LLVM_PROFILE_FILE=./target/pgo/pgo-%p.profraw\r\n\r\n# compile instrumented binary\r\nRUSTFLAGS=\"-Z pgo-gen=llvm-profile-file-env-variable-overrides-this\" cargo +nightly build --release\r\n\r\n# run a few test cases (these need to be improved to cover more rg features)\r\ntarget/release/rg --help > /dev/null\r\ntarget/release/rg a > /dev/null\r\ntarget/release/rg B --line-buffered > /dev/null\r\ntarget/release/rg c --word-regexp > /dev/null\r\ntarget/release/rg D --vimgrep > /dev/null\r\ntarget/release/rg e --with-filename > /dev/null\r\ntarget/release/rg f --unrestricted > /dev/null\r\ntarget/release/rg '[A-Z]+_SUSPEND' --with-filename --word-regexp --line-buffered > /dev/null\r\ntarget/release/rg h --unrestricted --with-filename --vimgrep --word-regexp --line-buffered > /dev/null\r\n\r\n# merge profiles\r\nrustup run nightly llvm-profdata merge -o target/pgo/pgo.profdata target/pgo/pgo*.profraw\r\n\r\n# compile with profile in mind\r\nRUSTFLAGS=\"-Z pgo-use=target/pgo/pgo.profdata\" cargo +nightly build --release\r\n````\r\n\r\npgo could speed up ripgrep quite a bit when done correctly.","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1225/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1225/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":20308643541,"node_id":"REFE_lADOAzJbyc4M1L5CzwAAAAS6fU7V","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/20308643541","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"4c953731c4ea06ecce1a6f1e0229f1dc18a967ff","commit_url":"https://api.github.com/repos/BurntSushi/ripgrep/commits/4c953731c4ea06ecce1a6f1e0229f1dc18a967ff","created_at":"2025-10-16T02:53:45Z","performed_via_github_app":null}]