{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1176","repository_url":"https://api.github.com/repos/BurntSushi/ripgrep","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1176/labels{/name}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1176/comments","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1176/events","html_url":"https://github.com/BurntSushi/ripgrep/issues/1176","id":403481334,"node_id":"MDU6SXNzdWU0MDM0ODEzMzQ=","number":1176,"title":"rg does not respect -F when used with -f","user":{"login":"draggo","id":47066082,"node_id":"MDQ6VXNlcjQ3MDY2MDgy","avatar_url":"https://avatars.githubusercontent.com/u/47066082?v=4","gravatar_id":"","url":"https://api.github.com/users/draggo","html_url":"https://github.com/draggo","followers_url":"https://api.github.com/users/draggo/followers","following_url":"https://api.github.com/users/draggo/following{/other_user}","gists_url":"https://api.github.com/users/draggo/gists{/gist_id}","starred_url":"https://api.github.com/users/draggo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/draggo/subscriptions","organizations_url":"https://api.github.com/users/draggo/orgs","repos_url":"https://api.github.com/users/draggo/repos","events_url":"https://api.github.com/users/draggo/events{/privacy}","received_events_url":"https://api.github.com/users/draggo/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-01-26T20:42:31Z","updated_at":"2019-01-26T21:05:55Z","closed_at":"2019-01-26T21:01:59Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"#### What version of ripgrep are you using?\r\n\r\n$ rg --version\r\nripgrep 0.10.0\r\n-SIMD -AVX (compiled)\r\n+SIMD +AVX (runtime)\r\n\r\n$ ripgrep/target/release/rg --version\r\nripgrep 0.10.0 (rev bf842dbc7f)\r\n-SIMD -AVX (compiled)\r\n+SIMD +AVX (runtime)\r\n\r\n#### How did you install ripgrep?\r\n\r\n2 ways:\r\n1. brew install ripgrep\r\n2. local build of source per \"To build ripgrep\" instructions, with Rust installed via 'brew install rust'\r\n\r\n#### What operating system are you using ripgrep on?\r\n\r\nmacOS High Sierra, version 10.13.6 (17G3025)\r\n\r\n#### Describe your question, feature request, or bug.\r\n\r\nEven with -F option, rg attempts to interpret meta characters for patterns supplied in a file.\r\n\r\n#### If this is a bug, what are the steps to reproduce the behavior?\r\n\r\nCreate a simple test file containing meta characters\r\n% echo 'not a (cloud) in the sky' > test.txt\r\n\r\nSearching the file using the file itself as a fixed pattern doesn't find a match.\r\n% rg -F -f test.txt test.txt\r\n[no output]\r\n\r\nBut, searching the file with the fixed pattern specified on the command line does find a match (as desired).\r\n% rg -F 'not a (cloud) in the sky' test.txt\r\n```\r\n1:not a (cloud) in the sky\r\n```\r\n\r\nI believe that the first search should produce the same result as the second one.\r\n\r\n#### If this is a bug, what is the actual behavior?\r\n\r\n$ rg --debug -F -f test.txt test.txt\r\n```\r\nDEBUG|grep_regex::literal|grep-regex/src/literal.rs:58: literal prefixes detected: Literals { lits: [Complete(not a cloud in the sky)], limit_size: 250, limit_class: 10 }\r\nDEBUG|globset|globset/src/lib.rs:429: built glob set; 0 literals, 0 basenames, 8 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes\r\n```\r\n$ rg --debug -F 'not a (cloud) in the sky' test.txt\r\n```\r\nDEBUG|grep_regex::literal|grep-regex/src/literal.rs:58: literal prefixes detected: Literals { lits: [Complete(not a (cloud) in the sky)], limit_size: 250, limit_class: 10 }\r\nDEBUG|globset|globset/src/lib.rs:429: built glob set; 0 literals, 0 basenames, 8 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes\r\n1:not a (cloud) in the sky\r\n```\r\n\r\n#### If this is a bug, what is the expected behavior?\r\n\r\nWhen both -F (or --fixed-strings) and -f (or --file) are given, rg should not attempt to interpret any meta characters in the PATTERNFILE.\r\n\r\nFor reference, the macOS default grep and GNU grep (installed via homebrew) give the expected result.  (But are not nearly as fast as ripgrep for many of my tasks; **thank you for a fantastic tool!**)\r\n\r\n$ grep -F -f test.txt test.txt\r\n```\r\nnot a (cloud) in the sky\r\n```\r\n$ grep -V\r\n```\r\ngrep (BSD grep) 2.5.1-FreeBSD\r\n```\r\n\r\n$ ggrep -F -f test.txt test.txt\r\n```\r\nnot a (cloud) in the sky\r\n```\r\n$ ggrep -V\r\n```\r\nggrep (GNU grep) 3.3\r\nPackaged by Homebrew\r\nCopyright (C) 2018 Free Software Foundation, Inc.\r\nLicense GPLv3+: GNU GPL version 3 or later <https://gnu.org/licenses/gpl.html>.\r\nThis is free software: you are free to change and redistribute it.\r\nThere is NO WARRANTY, to the extent permitted by law.\r\n\r\nWritten by Mike Haertel and others; see\r\n<https://git.sv.gnu.org/cgit/grep.git/tree/AUTHORS>.\r\n```","closed_by":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1176/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1176/timeline","performed_via_github_app":null,"state_reason":"completed"}