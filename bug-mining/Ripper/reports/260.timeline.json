[{"id":2527726721,"node_id":"MDEyOkxhYmVsZWRFdmVudDI1Mjc3MjY3MjE=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/2527726721","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-08-01T20:07:41Z","label":{"name":"bug","color":"fc2929"},"performed_via_github_app":null},{"id":2527855593,"node_id":"MDExOkNsb3NlZEV2ZW50MjUyNzg1NTU5Mw==","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/2527855593","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"adb9332f52b884c8b872d1c969a7841188fe3089","commit_url":"https://api.github.com/repos/BurntSushi/ripgrep/commits/adb9332f52b884c8b872d1c969a7841188fe3089","created_at":"2019-08-01T21:00:19Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/517456159","html_url":"https://github.com/BurntSushi/ripgrep/issues/1334#issuecomment-517456159","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1334","id":517456159,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzQ1NjE1OQ==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T21:00:26Z","updated_at":"2019-08-01T21:00:26Z","body":"Ah thanks for this bug report! Literal optimizations are going to be the death me. I introduced this regression when I added an optimization for the `-F` flag to bypass the regex engine entirely and use Aho-Corasick. There are a number of cases where Aho-Corasick can't be used directly, which I thought I had handled, but one slipped by: ripgrep escapes patterns when the `-F` flag is set before passing them down to the matcher, and those same escaped patterns were being handed to the Aho-Corasick builder directly. So you were _actually_ searching for the literal `1\\.208\\.0\\.0/12`, which is obviously wrong.\r\n\r\nThe offending line of code is here, which also explains why `40` was a magic number: https://github.com/BurntSushi/ripgrep/blob/bc37c32717301abf26e5aecc942688d2ddd63692/grep-regex/src/matcher.rs#L75\r\n\r\n(Specifically, the regex engine, currently, can often search for a small number of literals more quickly than Aho-Corasick, so we were diverting to the regex engine for a smaller number of literals, in which case, using escaped literals is correct.)\r\n\r\nThis is basically one giant mess because all of this should be pushed down into the regex engine, but there's a lot of refactoring work that needs to be done before that can happen. So I tried to paper over it at a higher level and got bit here.\r\n\r\nAnyway, this should be fixed on master. I'm going to see about getting a patch release out soon.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/517456159/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/517460650","html_url":"https://github.com/BurntSushi/ripgrep/issues/1334#issuecomment-517460650","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1334","id":517460650,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzQ2MDY1MA==","user":{"login":"elindsey","id":47579,"node_id":"MDQ6VXNlcjQ3NTc5","avatar_url":"https://avatars.githubusercontent.com/u/47579?v=4","gravatar_id":"","url":"https://api.github.com/users/elindsey","html_url":"https://github.com/elindsey","followers_url":"https://api.github.com/users/elindsey/followers","following_url":"https://api.github.com/users/elindsey/following{/other_user}","gists_url":"https://api.github.com/users/elindsey/gists{/gist_id}","starred_url":"https://api.github.com/users/elindsey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elindsey/subscriptions","organizations_url":"https://api.github.com/users/elindsey/orgs","repos_url":"https://api.github.com/users/elindsey/repos","events_url":"https://api.github.com/users/elindsey/events{/privacy}","received_events_url":"https://api.github.com/users/elindsey/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T21:14:14Z","updated_at":"2019-08-01T21:14:14Z","body":"Thanks Andrew! I really appreciate both the fix and the explanation - interesting edge case. üòÅ ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/517460650/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":2,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"elindsey","id":47579,"node_id":"MDQ6VXNlcjQ3NTc5","avatar_url":"https://avatars.githubusercontent.com/u/47579?v=4","gravatar_id":"","url":"https://api.github.com/users/elindsey","html_url":"https://github.com/elindsey","followers_url":"https://api.github.com/users/elindsey/followers","following_url":"https://api.github.com/users/elindsey/following{/other_user}","gists_url":"https://api.github.com/users/elindsey/gists{/gist_id}","starred_url":"https://api.github.com/users/elindsey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elindsey/subscriptions","organizations_url":"https://api.github.com/users/elindsey/orgs","repos_url":"https://api.github.com/users/elindsey/repos","events_url":"https://api.github.com/users/elindsey/events{/privacy}","received_events_url":"https://api.github.com/users/elindsey/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":13413906732,"node_id":"REFE_lADOAzJbyc4cRZpdzwAAAAMfh_ks","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/13413906732","actor":{"login":"kyagi","id":90729,"node_id":"MDQ6VXNlcjkwNzI5","avatar_url":"https://avatars.githubusercontent.com/u/90729?v=4","gravatar_id":"","url":"https://api.github.com/users/kyagi","html_url":"https://github.com/kyagi","followers_url":"https://api.github.com/users/kyagi/followers","following_url":"https://api.github.com/users/kyagi/following{/other_user}","gists_url":"https://api.github.com/users/kyagi/gists{/gist_id}","starred_url":"https://api.github.com/users/kyagi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kyagi/subscriptions","organizations_url":"https://api.github.com/users/kyagi/orgs","repos_url":"https://api.github.com/users/kyagi/repos","events_url":"https://api.github.com/users/kyagi/events{/privacy}","received_events_url":"https://api.github.com/users/kyagi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"adb9332f52b884c8b872d1c969a7841188fe3089","commit_url":"https://api.github.com/repos/kyagi/ripgrep/commits/adb9332f52b884c8b872d1c969a7841188fe3089","created_at":"2024-07-07T11:30:04Z","performed_via_github_app":null}]