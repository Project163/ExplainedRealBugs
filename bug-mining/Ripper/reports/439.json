{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2770","repository_url":"https://api.github.com/repos/BurntSushi/ripgrep","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2770/labels{/name}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2770/comments","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2770/events","html_url":"https://github.com/BurntSushi/ripgrep/issues/2770","id":2213234127,"node_id":"I_kwDOAzJbyc6D60XP","number":2770,"title":"ripgrep does not properly apply ignore rules from .gitignore in parent directory","user":{"login":"gstokkink","id":14915325,"node_id":"MDQ6VXNlcjE0OTE1MzI1","avatar_url":"https://avatars.githubusercontent.com/u/14915325?v=4","gravatar_id":"","url":"https://api.github.com/users/gstokkink","html_url":"https://github.com/gstokkink","followers_url":"https://api.github.com/users/gstokkink/followers","following_url":"https://api.github.com/users/gstokkink/following{/other_user}","gists_url":"https://api.github.com/users/gstokkink/gists{/gist_id}","starred_url":"https://api.github.com/users/gstokkink/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gstokkink/subscriptions","organizations_url":"https://api.github.com/users/gstokkink/orgs","repos_url":"https://api.github.com/users/gstokkink/repos","events_url":"https://api.github.com/users/gstokkink/events{/privacy}","received_events_url":"https://api.github.com/users/gstokkink/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1849506066,"node_id":"MDU6TGFiZWwxODQ5NTA2MDY2","url":"https://api.github.com/repos/BurntSushi/ripgrep/labels/rollup","name":"rollup","color":"ffccee","default":false,"description":"A PR that has been merged with many others in a rollup."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-03-28T13:21:49Z","updated_at":"2025-10-11T02:07:02Z","closed_at":"2025-10-11T02:07:02Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Please tick this box to confirm you have reviewed the above.\n\n- [X] I have a different issue.\n\n### What version of ripgrep are you using?\n\n```\r\nripgrep 14.1.0\r\n\r\nfeatures:-simd-accel,+pcre2\r\nsimd(compile):+NEON\r\nsimd(runtime):+NEON\r\n\r\nPCRE2 10.42 is available (JIT is available)\r\n```\n\n### How did you install ripgrep?\n\nHomebrew\n\n### What operating system are you using ripgrep on?\n\nmacOS 14.3.1\n\n### Describe your bug.\n\nripgrep does not properly apply a glob pattern from a .gitignore in the parent directory\n\n### What are the steps to reproduce the behavior?\n\n```\r\nmkdir test\r\ncd test\r\ngit init\r\nmkdir -p foo/bar\r\necho quux > foo/bar/baz\r\n\r\nrg -l quux # => foo/bar/baz, as expected\r\n\r\ncd foo\r\n\r\nrg -l quux # => bar/baz, as expected\r\n\r\ncd ..\r\n\r\necho \"**/bar\" > .gitignore\r\n\r\nrg -l quux # => no results, as expected\r\n\r\ncd foo\r\n\r\nrg -l quux # => no results, as expected\r\n\r\ncd ..\r\n\r\necho \"**/bar/*\" > .gitignore\r\n\r\nrg -l quux # => no results, as expected\r\n\r\ncd foo\r\n\r\nrg -l quux # => bar/baz ??\r\n```\r\n\r\nAs you can see, ripgrep does not apply the ignore glob correctly in the last case.\n\n### What is the actual behavior?\n\n```\r\nrg: DEBUG|rg::flags::parse|crates/core/flags/parse.rs:97: no extra arguments found from configuration file\r\nrg: DEBUG|rg::flags::hiargs|crates/core/flags/hiargs.rs:1099: using heuristics to determine whether to read from stdin or search ./ (is_readable_stdin=false, stdin_consumed=false, mode=Search(FilesWithMatches))\r\nrg: DEBUG|rg::flags::hiargs|crates/core/flags/hiargs.rs:1109: heuristic chose to search ./\r\nrg: DEBUG|rg::flags::hiargs|crates/core/flags/hiargs.rs:1260: found hostname for hyperlink configuration: gerjan-macbook-pro.local\r\nrg: DEBUG|rg::flags::hiargs|crates/core/flags/hiargs.rs:1270: hyperlink format: \"\"\r\nrg: DEBUG|rg::flags::hiargs|crates/core/flags/hiargs.rs:174: using 11 thread(s)\r\nrg: DEBUG|grep_regex::config|crates/regex/src/config.rs:175: assembling HIR from 1 fixed string literals\r\nrg: DEBUG|globset|crates/globset/src/lib.rs:453: built glob set; 0 literals, 0 basenames, 12 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes\r\nrg: DEBUG|globset|crates/globset/src/lib.rs:453: built glob set; 0 literals, 1 basenames, 0 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes\r\nrg: DEBUG|globset|crates/globset/src/lib.rs:453: built glob set; 0 literals, 2 basenames, 0 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes\r\nrg: DEBUG|globset|crates/globset/src/lib.rs:448: glob converted to regex: Glob { glob: \"**/bar/*\", re: \"(?-u)^(?:/?|.*/)bar/[^/]*$\", opts: GlobOptions { case_insensitive: false, literal_separator: true, backslash_escape: true, empty_alternates: false }, tokens: Tokens([RecursivePrefix, Literal('b'), Literal('a'), Literal('r'), Literal('/'), ZeroOrMore]) }\r\nrg: DEBUG|globset|crates/globset/src/lib.rs:453: built glob set; 0 literals, 0 basenames, 0 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 1 regexes\r\nbar/baz\r\n```\n\n### What is the expected behavior?\n\nripgrep should not have returned any matches","closed_by":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2770/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/2770/timeline","performed_via_github_app":null,"state_reason":"completed"}