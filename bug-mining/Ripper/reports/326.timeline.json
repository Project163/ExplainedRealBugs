[{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/840072386","html_url":"https://github.com/BurntSushi/ripgrep/issues/1866#issuecomment-840072386","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1866","id":840072386,"node_id":"MDEyOklzc3VlQ29tbWVudDg0MDA3MjM4Ng==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-12T20:23:09Z","updated_at":"2021-05-12T20:23:09Z","body":"> Ideally there would be an option like `--json-pos` that just prints positions of matches for each file, perhaps in json format like following.\r\n\r\nCould you please explain why the existing `--json` flag is insufficient?","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/840072386/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/840076773","html_url":"https://github.com/BurntSushi/ripgrep/issues/1866#issuecomment-840076773","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1866","id":840076773,"node_id":"MDEyOklzc3VlQ29tbWVudDg0MDA3Njc3Mw==","user":{"login":"poetaman","id":71736629,"node_id":"MDQ6VXNlcjcxNzM2NjI5","avatar_url":"https://avatars.githubusercontent.com/u/71736629?v=4","gravatar_id":"","url":"https://api.github.com/users/poetaman","html_url":"https://github.com/poetaman","followers_url":"https://api.github.com/users/poetaman/followers","following_url":"https://api.github.com/users/poetaman/following{/other_user}","gists_url":"https://api.github.com/users/poetaman/gists{/gist_id}","starred_url":"https://api.github.com/users/poetaman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/poetaman/subscriptions","organizations_url":"https://api.github.com/users/poetaman/orgs","repos_url":"https://api.github.com/users/poetaman/repos","events_url":"https://api.github.com/users/poetaman/events{/privacy}","received_events_url":"https://api.github.com/users/poetaman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-12T20:30:33Z","updated_at":"2021-05-12T20:32:27Z","body":"@BurntSushi Hmm, not sure if I understand the format of existing json then... Is there a way to find the information I need for multi-line matches already? Could you provide an example.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/840076773/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"poetaman","id":71736629,"node_id":"MDQ6VXNlcjcxNzM2NjI5","avatar_url":"https://avatars.githubusercontent.com/u/71736629?v=4","gravatar_id":"","url":"https://api.github.com/users/poetaman","html_url":"https://github.com/poetaman","followers_url":"https://api.github.com/users/poetaman/followers","following_url":"https://api.github.com/users/poetaman/following{/other_user}","gists_url":"https://api.github.com/users/poetaman/gists{/gist_id}","starred_url":"https://api.github.com/users/poetaman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/poetaman/subscriptions","organizations_url":"https://api.github.com/users/poetaman/orgs","repos_url":"https://api.github.com/users/poetaman/repos","events_url":"https://api.github.com/users/poetaman/events{/privacy}","received_events_url":"https://api.github.com/users/poetaman/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4738590488,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDczODU5MDQ4OA==","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/4738590488","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-05-12T20:30:34Z","performed_via_github_app":null},{"id":4738590490,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ3Mzg1OTA0OTA=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/4738590490","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-05-12T20:30:34Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/840077526","html_url":"https://github.com/BurntSushi/ripgrep/issues/1866#issuecomment-840077526","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1866","id":840077526,"node_id":"MDEyOklzc3VlQ29tbWVudDg0MDA3NzUyNg==","user":{"login":"poetaman","id":71736629,"node_id":"MDQ6VXNlcjcxNzM2NjI5","avatar_url":"https://avatars.githubusercontent.com/u/71736629?v=4","gravatar_id":"","url":"https://api.github.com/users/poetaman","html_url":"https://github.com/poetaman","followers_url":"https://api.github.com/users/poetaman/followers","following_url":"https://api.github.com/users/poetaman/following{/other_user}","gists_url":"https://api.github.com/users/poetaman/gists{/gist_id}","starred_url":"https://api.github.com/users/poetaman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/poetaman/subscriptions","organizations_url":"https://api.github.com/users/poetaman/orgs","repos_url":"https://api.github.com/users/poetaman/repos","events_url":"https://api.github.com/users/poetaman/events{/privacy}","received_events_url":"https://api.github.com/users/poetaman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-12T20:31:55Z","updated_at":"2021-05-12T20:31:55Z","body":"@BurntSushi Also, for large number big multiline matches, it would be better not to print the text of matches. That I believe would be faster than the existing format that prints a lot of information. ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/840077526/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"poetaman","id":71736629,"node_id":"MDQ6VXNlcjcxNzM2NjI5","avatar_url":"https://avatars.githubusercontent.com/u/71736629?v=4","gravatar_id":"","url":"https://api.github.com/users/poetaman","html_url":"https://github.com/poetaman","followers_url":"https://api.github.com/users/poetaman/followers","following_url":"https://api.github.com/users/poetaman/following{/other_user}","gists_url":"https://api.github.com/users/poetaman/gists{/gist_id}","starred_url":"https://api.github.com/users/poetaman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/poetaman/subscriptions","organizations_url":"https://api.github.com/users/poetaman/orgs","repos_url":"https://api.github.com/users/poetaman/repos","events_url":"https://api.github.com/users/poetaman/events{/privacy}","received_events_url":"https://api.github.com/users/poetaman/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4738595667,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDczODU5NTY2Nw==","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/4738595667","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-05-12T20:31:55Z","performed_via_github_app":null},{"id":4738595671,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ3Mzg1OTU2NzE=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/4738595671","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-05-12T20:31:55Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/840085536","html_url":"https://github.com/BurntSushi/ripgrep/issues/1866#issuecomment-840085536","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1866","id":840085536,"node_id":"MDEyOklzc3VlQ29tbWVudDg0MDA4NTUzNg==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-12T20:46:15Z","updated_at":"2021-05-12T20:46:30Z","body":"The format is documented here: https://docs.rs/grep-printer/0.1.5/grep_printer/struct.JSON.html\r\n\r\nI'm not changing the format unless there's a well motivated benchmark of a real use case in a real environment. If you get that, then we can evaluate options for improving performance like adding `--json-no-text` or something.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/840085536/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/840097908","html_url":"https://github.com/BurntSushi/ripgrep/issues/1866#issuecomment-840097908","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1866","id":840097908,"node_id":"MDEyOklzc3VlQ29tbWVudDg0MDA5NzkwOA==","user":{"login":"poetaman","id":71736629,"node_id":"MDQ6VXNlcjcxNzM2NjI5","avatar_url":"https://avatars.githubusercontent.com/u/71736629?v=4","gravatar_id":"","url":"https://api.github.com/users/poetaman","html_url":"https://github.com/poetaman","followers_url":"https://api.github.com/users/poetaman/followers","following_url":"https://api.github.com/users/poetaman/following{/other_user}","gists_url":"https://api.github.com/users/poetaman/gists{/gist_id}","starred_url":"https://api.github.com/users/poetaman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/poetaman/subscriptions","organizations_url":"https://api.github.com/users/poetaman/orgs","repos_url":"https://api.github.com/users/poetaman/repos","events_url":"https://api.github.com/users/poetaman/events{/privacy}","received_events_url":"https://api.github.com/users/poetaman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-12T21:08:01Z","updated_at":"2021-05-12T21:10:19Z","body":"@BurntSushi Ok, here's one problem: Even if I use ``\"line_number\"`` to get lnum, and  ``\"lines\" -> \"text\"`` to count the number of lines to get end_lnum. The ``\"lines\" -> \"text\"`` prints entire last line of match, not just till the column where the match was hit. How to find the end/start column of match? It seems like one could find that from the ``\"submatches\"``. But is it guaranteed that the 1st sub match always corresponds to the match? (like even when there are capture groups)?\r\n\r\n*Regarding benchmarks*: Let's look at the usecase: I am trying to integrate this in pure vimscript. To be able to find end line number in the multiline example below, I will need to process the string ``\"text\"`` in vim script to find the number of ``\\n``'s and length of text after last ``\\n`` to get the end_col. If one were to assume that such string processing is being done in a fast language like rust, then there is no problem. But that assumes such flexibility on user side, given my target it to integrate some fast search engine within vim in pure vimscript, it is preferable that the search engine (which is written generally in rust/c/c++) which might already have such information in its internal state to print that information. In short I think a benchmark would be useful if one assumes that user applications are written in fast languages, I am afraid thats not true for something like vimcript. The following table compares the performance of incrementing a counter in vimscript to languages like python.\r\n\r\n<img width=\"510\" alt=\"Screen Shot 2021-05-12 at 2 04 52 PM\" src=\"https://user-images.githubusercontent.com/71736629/118044224-3d661d00-b32b-11eb-9843-a6096517a28d.png\">\r\n\r\nSource: https://github.com/vim/vim/blob/master/README_VIM9.md. Note: New vim-9 (Vim new) is still in the works, and many setups lag behind in vim versions anyway.\r\n\r\nHere's one example from my latex file ``decoding.tex`` for pattern ``rg --json -U  \"(?s)usepackage.*?newcommand\" decoding.tex``. \r\n\r\n```json\r\n{\r\n  \"type\": \"match\",\r\n  \"data\": {\r\n    \"path\": {\r\n      \"text\": \"decoding.tex\"\r\n    },\r\n    \"lines\": {\r\n      \"text\": \"\\\\usepackage{blindtext}\\n\\\\usepackage[a4paper,left=0in,right=0in,top=0in,bottom=0in]{geometry}\\n\\\\usepackage{pdfpages}\\n\\n\\\\defaultfontfeatures{\\n    Color=000000,\\n    Ligatures=TeX,\\n    WordSpace={1.0,1.0,1.0},\\n    PunctuationSpace=0,\\n    LetterSpace=0\\n}%Opacity=0.3,\\n\\\\newcommand{\\\\llakkuratstyle}{\\\\addfontfeatures{Opacity=1.0}} \\n\"\r\n    },\r\n    \"line_number\": 9,\r\n    \"absolute_offset\": 147,\r\n    \"submatches\": [\r\n      {\r\n        \"match\": {\r\n          \"text\": \"usepackage{blindtext}\\n\\\\usepackage[a4paper,left=0in,right=0in,top=0in,bottom=0in]{geometry}\\n\\\\usepackage{pdfpages}\\n\\n\\\\defaultfontfeatures{\\n    Color=000000,\\n    Ligatures=TeX,\\n    WordSpace={1.0,1.0,1.0},\\n    PunctuationSpace=0,\\n    LetterSpace=0\\n}%Opacity=0.3,\\n\\\\newcommand\"\r\n        },\r\n        \"start\": 1,\r\n        \"end\": 271\r\n      }\r\n    ]\r\n  }\r\n}\r\n```\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/840097908/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"poetaman","id":71736629,"node_id":"MDQ6VXNlcjcxNzM2NjI5","avatar_url":"https://avatars.githubusercontent.com/u/71736629?v=4","gravatar_id":"","url":"https://api.github.com/users/poetaman","html_url":"https://github.com/poetaman","followers_url":"https://api.github.com/users/poetaman/followers","following_url":"https://api.github.com/users/poetaman/following{/other_user}","gists_url":"https://api.github.com/users/poetaman/gists{/gist_id}","starred_url":"https://api.github.com/users/poetaman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/poetaman/subscriptions","organizations_url":"https://api.github.com/users/poetaman/orgs","repos_url":"https://api.github.com/users/poetaman/repos","events_url":"https://api.github.com/users/poetaman/events{/privacy}","received_events_url":"https://api.github.com/users/poetaman/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4738746649,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDczODc0NjY0OQ==","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/4738746649","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-05-12T21:08:01Z","performed_via_github_app":null},{"id":4738746653,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ3Mzg3NDY2NTM=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/4738746653","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-05-12T21:08:01Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/840137170","html_url":"https://github.com/BurntSushi/ripgrep/issues/1866#issuecomment-840137170","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1866","id":840137170,"node_id":"MDEyOklzc3VlQ29tbWVudDg0MDEzNzE3MA==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-12T22:33:35Z","updated_at":"2021-05-12T22:33:35Z","body":"> Ok, here's one problem: Even if I use `\"line_number\"` to get lnum, and `\"lines\" -> \"text\"` to count the number of lines to get end_lnum. The `\"lines\" -> \"text\"` prints entire last line of match, not just till the column where the match was hit. How to find the end/start column of match?\r\n\r\nThe output includes the byte offsets of the match. You can use those to compute column. And I note that \"column\" is an ill-defined concept in general. I'm sure vim has it more rigorously defined, but I don't know what that definition is and whether it's stable.\r\n\r\n> It seems like one could find that from the `\"submatches\"`. But is it guaranteed that the 1st sub match always corresponds to the match? (like even when there are capture groups)?\r\n\r\nCapture groups aren't reported in the JSON output. Each `submatch` corresponds to a match of the input pattern(s). The \"sub\" here refers to the fact that the overall match is the line (or lines) itself.\r\n\r\n> _Regarding benchmarks_: Let's look at the usecase: I am trying to integrate this in pure vimscript. To be able to find end line number in the multiline example below, I will need to process the string `\"text\"` in vim script to find the number of `\\n`'s and length of text after last `\\n` to get the end_col. If one were to assume that such string processing is being done in a fast language like rust, then there is no problem. But that assumes such flexibility on user side, given my target it to integrate some fast search engine within vim in pure vimscript, it is preferable that the search engine (which is written generally in rust/c/c++) which might already have such information in its internal state to print that information.\r\n\r\nI see why you think this, and you might very well be right. But it's still just a guess. I was serious. I'm _not_ adding flags to ripgrep based on guesses. This is my mantra: make it work, make it right, make it fast. Before adding flags, we should have real repeatable benchmarks based on real use cases in real environments that end users are having problems with. That's what I would like my standard to be.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/840137170/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/840296332","html_url":"https://github.com/BurntSushi/ripgrep/issues/1866#issuecomment-840296332","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1866","id":840296332,"node_id":"MDEyOklzc3VlQ29tbWVudDg0MDI5NjMzMg==","user":{"login":"poetaman","id":71736629,"node_id":"MDQ6VXNlcjcxNzM2NjI5","avatar_url":"https://avatars.githubusercontent.com/u/71736629?v=4","gravatar_id":"","url":"https://api.github.com/users/poetaman","html_url":"https://github.com/poetaman","followers_url":"https://api.github.com/users/poetaman/followers","following_url":"https://api.github.com/users/poetaman/following{/other_user}","gists_url":"https://api.github.com/users/poetaman/gists{/gist_id}","starred_url":"https://api.github.com/users/poetaman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/poetaman/subscriptions","organizations_url":"https://api.github.com/users/poetaman/orgs","repos_url":"https://api.github.com/users/poetaman/repos","events_url":"https://api.github.com/users/poetaman/events{/privacy}","received_events_url":"https://api.github.com/users/poetaman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-13T04:53:08Z","updated_at":"2021-05-13T08:55:23Z","body":"@BurntSushi Some good news: vim has a command ``:goto [count]``. The ``[count]`` is the byte offset from the beginning of file. This is what I did to find the end_lnum and end_col for the example above, run ``:goto 418`` (418 comes from \"absolute_offset\" (147) + \"end\" (271)), then I can query the cursor position from vim ``getpos('.')``. Also vim's cursor position on line (misnamed as \"col\") is actually byte offset from the beginning of the line. To find starting \"col\", it is simply\"start\"+1 from the \"submatch\" entry. We are all set at least for simple matches...\r\n\r\nThough I need to understand submatches a bit more... I have a bunch of questions in mind:\r\n\r\n1) for instance you mention it can be empty for inverted matches, so where would I get the values for end_col, end_lnum, and col?\r\n\r\n2) so far in my testing, all the submatches's beginning byte is on the same line number. Is that right? Will any of the submatches -- for instance in some multiline pattern -- ever begin on a line other than that specified in \"line_number\"??\r\n\r\n\r\n\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/840296332/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"poetaman","id":71736629,"node_id":"MDQ6VXNlcjcxNzM2NjI5","avatar_url":"https://avatars.githubusercontent.com/u/71736629?v=4","gravatar_id":"","url":"https://api.github.com/users/poetaman","html_url":"https://github.com/poetaman","followers_url":"https://api.github.com/users/poetaman/followers","following_url":"https://api.github.com/users/poetaman/following{/other_user}","gists_url":"https://api.github.com/users/poetaman/gists{/gist_id}","starred_url":"https://api.github.com/users/poetaman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/poetaman/subscriptions","organizations_url":"https://api.github.com/users/poetaman/orgs","repos_url":"https://api.github.com/users/poetaman/repos","events_url":"https://api.github.com/users/poetaman/events{/privacy}","received_events_url":"https://api.github.com/users/poetaman/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4739952791,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDczOTk1Mjc5MQ==","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/4739952791","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-05-13T04:53:08Z","performed_via_github_app":null},{"id":4739952793,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ3Mzk5NTI3OTM=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/4739952793","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-05-13T04:53:08Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/840489756","html_url":"https://github.com/BurntSushi/ripgrep/issues/1866#issuecomment-840489756","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1866","id":840489756,"node_id":"MDEyOklzc3VlQ29tbWVudDg0MDQ4OTc1Ng==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-13T11:13:05Z","updated_at":"2021-05-13T11:13:05Z","body":">     1. for instance you mention it can be empty for inverted matches, so where would I get the values for end_col, end_lnum, and col?\r\n\r\nAn inverted match is _a line in which none of the input patterns match_. Thus, the match is the line itself.\r\n\r\n>     2\\. so far in my testing, all the submatches's beginning byte is on the same line number. Is that right? Will any of the submatches -- for instance in some multiline pattern -- ever begin on a line other than that specified in \"line_number\"??\r\n\r\nI _believe_ it's true that the first match will begin on the first line emitted from ripgrep. I am not 100% sure that it's a rock solid guarantee, but I cannot immediately think of any cases where it wouldn't be true. (It would likely be a strange corner case.)","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/840489756/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/840508737","html_url":"https://github.com/BurntSushi/ripgrep/issues/1866#issuecomment-840508737","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1866","id":840508737,"node_id":"MDEyOklzc3VlQ29tbWVudDg0MDUwODczNw==","user":{"login":"poetaman","id":71736629,"node_id":"MDQ6VXNlcjcxNzM2NjI5","avatar_url":"https://avatars.githubusercontent.com/u/71736629?v=4","gravatar_id":"","url":"https://api.github.com/users/poetaman","html_url":"https://github.com/poetaman","followers_url":"https://api.github.com/users/poetaman/followers","following_url":"https://api.github.com/users/poetaman/following{/other_user}","gists_url":"https://api.github.com/users/poetaman/gists{/gist_id}","starred_url":"https://api.github.com/users/poetaman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/poetaman/subscriptions","organizations_url":"https://api.github.com/users/poetaman/orgs","repos_url":"https://api.github.com/users/poetaman/repos","events_url":"https://api.github.com/users/poetaman/events{/privacy}","received_events_url":"https://api.github.com/users/poetaman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-13T11:57:06Z","updated_at":"2021-05-13T11:58:08Z","body":"@BurntSushi Ok thanks for the information. So in that case the meaning of \"submatch\" is the list of all matches starting on \"line_number\". If that is not the case then there is ambiguity in the definition+implementation. I mean if a submatch begins on some other line, then why would it not be in the submatch entry of that line... Did you implement the json emitter? Anyway when you have time, please clarify the definition of submatch (with confidence/expected behavior) & perhaps add it to the documentation.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/840508737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"poetaman","id":71736629,"node_id":"MDQ6VXNlcjcxNzM2NjI5","avatar_url":"https://avatars.githubusercontent.com/u/71736629?v=4","gravatar_id":"","url":"https://api.github.com/users/poetaman","html_url":"https://github.com/poetaman","followers_url":"https://api.github.com/users/poetaman/followers","following_url":"https://api.github.com/users/poetaman/following{/other_user}","gists_url":"https://api.github.com/users/poetaman/gists{/gist_id}","starred_url":"https://api.github.com/users/poetaman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/poetaman/subscriptions","organizations_url":"https://api.github.com/users/poetaman/orgs","repos_url":"https://api.github.com/users/poetaman/repos","events_url":"https://api.github.com/users/poetaman/events{/privacy}","received_events_url":"https://api.github.com/users/poetaman/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4741491959,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDc0MTQ5MTk1OQ==","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/4741491959","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-05-13T11:57:07Z","performed_via_github_app":null},{"id":4741491961,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ3NDE0OTE5NjE=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/4741491961","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-05-13T11:57:07Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/840523293","html_url":"https://github.com/BurntSushi/ripgrep/issues/1866#issuecomment-840523293","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1866","id":840523293,"node_id":"MDEyOklzc3VlQ29tbWVudDg0MDUyMzI5Mw==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-13T12:28:48Z","updated_at":"2021-05-13T12:28:48Z","body":"I don't see what's ambiguous about this:\r\n\r\n> An array of submatch objects corresponding to matches in lines. The offsets included in each submatch correspond to byte offsets into lines. (If lines is base64 encoded, then the byte offsets correspond to the data after base64 decoding.) The submatch objects are guaranteed to be sorted by their starting offsets. Note that it is possible for this array to be empty, for example, when searching reports inverted matches.\r\n\r\nThe wording here looks precisely correct to me.\r\n\r\n>  I mean if a submatch begins on some other line, then why would it not be in the submatch entry of that line...\r\n\r\nI am having a hard time understanding your confusion. To be clear, we're both looking at [the \"match\" message](https://docs.rs/grep-printer/0.1.5/grep_printer/struct.JSON.html#message-match), right? It is not a \"line\" message. It's a \"match\" message. ripgrep does not emit JSON objects for every line. It emits JSON objects for _matches_. In the default non-multiline mode, yes, every match will be limited to precisely one line and every submatch of that match will start and end on that line. That's what it means to be line oriented and it is standard grep behavior.\r\n\r\nBut when multiline mode is enabled, then a match may span _multiple_ lines. In that case, submatches may start on one line and end on another. But, yes, the first submatch should have a starting position on the first line in the \"match\" message. Once a line is included in a \"match\" message, it will not be included in any subsequent messages. That's the point of submatches: it enumerates all possible matches within the region emitted in the \"match\" message. (And in multiline mode, a \"match\" message could be the entire input!)\r\n\r\n> Did you implement the json emitter?\r\n\r\nYes.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/840523293/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/840531948","html_url":"https://github.com/BurntSushi/ripgrep/issues/1866#issuecomment-840531948","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1866","id":840531948,"node_id":"MDEyOklzc3VlQ29tbWVudDg0MDUzMTk0OA==","user":{"login":"poetaman","id":71736629,"node_id":"MDQ6VXNlcjcxNzM2NjI5","avatar_url":"https://avatars.githubusercontent.com/u/71736629?v=4","gravatar_id":"","url":"https://api.github.com/users/poetaman","html_url":"https://github.com/poetaman","followers_url":"https://api.github.com/users/poetaman/followers","following_url":"https://api.github.com/users/poetaman/following{/other_user}","gists_url":"https://api.github.com/users/poetaman/gists{/gist_id}","starred_url":"https://api.github.com/users/poetaman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/poetaman/subscriptions","organizations_url":"https://api.github.com/users/poetaman/orgs","repos_url":"https://api.github.com/users/poetaman/repos","events_url":"https://api.github.com/users/poetaman/events{/privacy}","received_events_url":"https://api.github.com/users/poetaman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-13T12:47:11Z","updated_at":"2021-05-13T12:47:11Z","body":"@BurntSushi What about the other sub matches (other than the first sub-match) for multi line matches. Thatâ€™s the question I have. Can any of such sub-matches begin on lines other than the first line of match? So far in my simple non-multi-line testing, sub matches array just consists of all matches on the same line. The reason I ask this is: in my current implementation, I assume lnum (line number) of all submatches is â€œline_numberâ€ of match. If thatâ€™s not true for all cases, it would be good to have an example. ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/840531948/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"poetaman","id":71736629,"node_id":"MDQ6VXNlcjcxNzM2NjI5","avatar_url":"https://avatars.githubusercontent.com/u/71736629?v=4","gravatar_id":"","url":"https://api.github.com/users/poetaman","html_url":"https://github.com/poetaman","followers_url":"https://api.github.com/users/poetaman/followers","following_url":"https://api.github.com/users/poetaman/following{/other_user}","gists_url":"https://api.github.com/users/poetaman/gists{/gist_id}","starred_url":"https://api.github.com/users/poetaman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/poetaman/subscriptions","organizations_url":"https://api.github.com/users/poetaman/orgs","repos_url":"https://api.github.com/users/poetaman/repos","events_url":"https://api.github.com/users/poetaman/events{/privacy}","received_events_url":"https://api.github.com/users/poetaman/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4741679341,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDc0MTY3OTM0MQ==","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/4741679341","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-05-13T12:47:11Z","performed_via_github_app":null},{"id":4741679343,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ3NDE2NzkzNDM=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/4741679343","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-05-13T12:47:11Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/840534070","html_url":"https://github.com/BurntSushi/ripgrep/issues/1866#issuecomment-840534070","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1866","id":840534070,"node_id":"MDEyOklzc3VlQ29tbWVudDg0MDUzNDA3MA==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-13T12:51:23Z","updated_at":"2021-05-13T12:51:23Z","body":"> Can any of such sub-matches begin on lines other than the first line of match?\r\n\r\nOf course!\r\n\r\n```\r\n$ echo 'foobar\\nfoobar\\nfoo quux' | rg -U 'foobar\\nfoobar\\nfoo|quux' --json\r\n... snip ...\r\n{\r\n  \"type\": \"match\",\r\n  \"data\": {\r\n    \"path\": {\r\n      \"text\": \"<stdin>\"\r\n    },\r\n    \"lines\": {\r\n      \"text\": \"foobar\\nfoobar\\nfoo quux\\n\"\r\n    },\r\n    \"line_number\": 1,\r\n    \"absolute_offset\": 0,\r\n    \"submatches\": [\r\n      {\r\n        \"match\": {\r\n          \"text\": \"foobar\\nfoobar\\nfoo\"\r\n        },\r\n        \"start\": 0,\r\n        \"end\": 17\r\n      },\r\n      {\r\n        \"match\": {\r\n          \"text\": \"quux\"\r\n        },\r\n        \"start\": 18,\r\n        \"end\": 22\r\n      }\r\n    ]\r\n  }\r\n}\r\n... snip ...\r\n```","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/840534070/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/840534879","html_url":"https://github.com/BurntSushi/ripgrep/issues/1866#issuecomment-840534879","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1866","id":840534879,"node_id":"MDEyOklzc3VlQ29tbWVudDg0MDUzNDg3OQ==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-13T12:52:54Z","updated_at":"2021-05-13T12:52:54Z","body":"Or perhaps a bit simpler to read, try `echo 'abc\\nxyz 123' | rg -U '[\\w\\n]+' --json`.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/840534879/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/840542721","html_url":"https://github.com/BurntSushi/ripgrep/issues/1866#issuecomment-840542721","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1866","id":840542721,"node_id":"MDEyOklzc3VlQ29tbWVudDg0MDU0MjcyMQ==","user":{"login":"poetaman","id":71736629,"node_id":"MDQ6VXNlcjcxNzM2NjI5","avatar_url":"https://avatars.githubusercontent.com/u/71736629?v=4","gravatar_id":"","url":"https://api.github.com/users/poetaman","html_url":"https://github.com/poetaman","followers_url":"https://api.github.com/users/poetaman/followers","following_url":"https://api.github.com/users/poetaman/following{/other_user}","gists_url":"https://api.github.com/users/poetaman/gists{/gist_id}","starred_url":"https://api.github.com/users/poetaman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/poetaman/subscriptions","organizations_url":"https://api.github.com/users/poetaman/orgs","repos_url":"https://api.github.com/users/poetaman/repos","events_url":"https://api.github.com/users/poetaman/events{/privacy}","received_events_url":"https://api.github.com/users/poetaman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-13T13:07:29Z","updated_at":"2021-05-13T13:09:31Z","body":"@BurntSushi Ok now itâ€™s clear what sub match means. It could be a regex sub-pattern-match, or one of the multiple matches on the same line for entire regex. You did save lines in json by putting multiple independent full regex matches as â€œsubmatchâ€ of a â€œmatchâ€. Hope you now get what is the source of confusion. \r\n\r\nI will implement a fully functional version of ripgrep in vim & compare it to something like ag (I guess it provides exact information I asked in this ticket). I suspect ripgrep will be slow for such multi line patterns because the start line number for multi line sub matches is not available (& one needs to find with splits on newline character (ouch)).\r\n\r\nDo you have benchmark files and patterns for such cases?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/840542721/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"poetaman","id":71736629,"node_id":"MDQ6VXNlcjcxNzM2NjI5","avatar_url":"https://avatars.githubusercontent.com/u/71736629?v=4","gravatar_id":"","url":"https://api.github.com/users/poetaman","html_url":"https://github.com/poetaman","followers_url":"https://api.github.com/users/poetaman/followers","following_url":"https://api.github.com/users/poetaman/following{/other_user}","gists_url":"https://api.github.com/users/poetaman/gists{/gist_id}","starred_url":"https://api.github.com/users/poetaman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/poetaman/subscriptions","organizations_url":"https://api.github.com/users/poetaman/orgs","repos_url":"https://api.github.com/users/poetaman/repos","events_url":"https://api.github.com/users/poetaman/events{/privacy}","received_events_url":"https://api.github.com/users/poetaman/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4741766184,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDc0MTc2NjE4NA==","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/4741766184","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-05-13T13:07:30Z","performed_via_github_app":null},{"id":4741766186,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ3NDE3NjYxODY=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/4741766186","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-05-13T13:07:30Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/840564811","html_url":"https://github.com/BurntSushi/ripgrep/issues/1866#issuecomment-840564811","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1866","id":840564811,"node_id":"MDEyOklzc3VlQ29tbWVudDg0MDU2NDgxMQ==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-13T13:34:02Z","updated_at":"2021-05-13T13:34:57Z","body":"> I guess it provides exact information I asked in this ticket\r\n\r\nDoes it? Could you show me which command is being run to get such information? `ag` certainly has no JSON output. `ag` has a `--vimgrep` flag, but ripgrep has that too. The only difference is that ripgrep's version isn't riddled with bugs:\r\n\r\n```\r\n$ echo 'abc\\nxyz 123' | rg -U '[\\w\\n]+' --vimgrep --no-filename\r\n1:1:abc\r\n2:1:xyz 123\r\n2:9:xyz 123\r\n\r\n$ echo 'foobar\\nfoobar\\nfoo quux' | rg -U 'foobar\\nfoobar\\nfoo|quux' --vimgrep --no-filename\r\n1:1:foobar\r\n2:1:foobar\r\n3:1:foo quux\r\n3:19:foo quux\r\n\r\n$ echo 'abc\\nxyz 123' | ag '[\\w\\n]+' --vimgrep --no-filename\r\n... uuhhh this doesn't search stdin, instead it searches CWD\r\n$ echo 'abc\\nxyz 123' | ag '[\\w\\n]+' --vimgrep --no-filename -\r\nERR: Error stat()ing: -\r\nERR: Error opening directory -: No such file or directory\r\n... lol really? okay okay, i give up, you win\r\n\r\n$ echo 'abc\\nxyz 123' > /tmp/test-ag-input\r\n$ ag '[\\w\\n]+' --vimgrep --no-filename /tmp/test-ag-input\r\n/tmp/test-ag-input:0:xyz 123\r\n/tmp/test-ag-input:0:\r\n... wat?\r\n\r\n$ echo 'foobar\\nfoobar\\nfoo quux' > /tmp/test-ag-input-2\r\n$ ag 'foobar\\nfoobar\\nfoo|quux' --vimgrep --no-filename /tmp/test-ag-input-2\r\n/tmp/test-ag-input-2:0:foo quux\r\n/tmp/test-ag-input-2:5:foo quux\r\n... again, wat? it dropped the first lines from the match\r\n```\r\n\r\nThe `--vimgrep` flag does seem to give you the line number you want, but it otherwise provides very little info. You don't know where one match begins and the other ends.\r\n\r\nI think it's important to note that I didn't just push out the JSON emitter on a lark. I wrote it specifically for editor integration, and in particular, with VS Code in mind. I got feedback from them before publishing it. Any time you do \"search in files\" in VS Code, it's using `rg --json`. I've never heard about any performance problems with parsing the output.\r\n\r\n> (& one needs to find with splits on newline character (ouch))\r\n\r\nPersonally, I think you're over-estimating the importance of the performance of this. I'm sure you'll be able to find places where this matters, but I suspect it will only occur when either the match frequency is extremely high or when the match itself is extremely large. And in those cases, performance is likely going to suffer for other reasons (latency for high frequency matches or allocating a huge chunk of memory for a large match).\r\n\r\nAnd _that's_ why I ask for benchmarks. It has to be a real and meaningful case. Guesses aren't good enough. A big part of the reason for building ripgrep is speed. That's what I do. It's what I've been doing for a long time. I have some instincts about things, but it's never a substitute for actually measuring things in an environment that matches a real end user's environment as closely as possible.\r\n\r\nIf you go off and implement this, get it working and you come back to me with \"here's a case a real user hit (or is very likely to hit), and there's a user visible performance impact resulting specifically from having to count line numbers,\" then I'd be very very very happy to work with you on fixing that. But that's _not_ what we have here. What we have here are guesses.\r\n\r\n> Do you have benchmark files and patterns for such cases?\r\n\r\nNo, i don't. I don't work on editor integrations.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/840564811/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/840953613","html_url":"https://github.com/BurntSushi/ripgrep/issues/1866#issuecomment-840953613","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1866","id":840953613,"node_id":"MDEyOklzc3VlQ29tbWVudDg0MDk1MzYxMw==","user":{"login":"poetaman","id":71736629,"node_id":"MDQ6VXNlcjcxNzM2NjI5","avatar_url":"https://avatars.githubusercontent.com/u/71736629?v=4","gravatar_id":"","url":"https://api.github.com/users/poetaman","html_url":"https://github.com/poetaman","followers_url":"https://api.github.com/users/poetaman/followers","following_url":"https://api.github.com/users/poetaman/following{/other_user}","gists_url":"https://api.github.com/users/poetaman/gists{/gist_id}","starred_url":"https://api.github.com/users/poetaman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/poetaman/subscriptions","organizations_url":"https://api.github.com/users/poetaman/orgs","repos_url":"https://api.github.com/users/poetaman/repos","events_url":"https://api.github.com/users/poetaman/events{/privacy}","received_events_url":"https://api.github.com/users/poetaman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-14T02:08:59Z","updated_at":"2021-05-14T02:08:59Z","body":"@BurntSushi Sorry I realized it wasn't ``ag`` that produced that. In the communication I had with someone regarding this on vim, they had actually mentioned ``rg`` produces this information. The communication was a month ago, and it seems my ``ag``/``rg`` neurons had merged. Now there is enough differential potential there.\r\n\r\nThanks for the examples. I think I get it how to bend the current information to implement something efficient in vim. Perhaps it will require adding a function in vim to work more efficiently with byte offsets, which I will ask Bram (the creator of Vim).","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/840953613/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"poetaman","id":71736629,"node_id":"MDQ6VXNlcjcxNzM2NjI5","avatar_url":"https://avatars.githubusercontent.com/u/71736629?v=4","gravatar_id":"","url":"https://api.github.com/users/poetaman","html_url":"https://github.com/poetaman","followers_url":"https://api.github.com/users/poetaman/followers","following_url":"https://api.github.com/users/poetaman/following{/other_user}","gists_url":"https://api.github.com/users/poetaman/gists{/gist_id}","starred_url":"https://api.github.com/users/poetaman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/poetaman/subscriptions","organizations_url":"https://api.github.com/users/poetaman/orgs","repos_url":"https://api.github.com/users/poetaman/repos","events_url":"https://api.github.com/users/poetaman/events{/privacy}","received_events_url":"https://api.github.com/users/poetaman/received_events","type":"User","user_view_type":"public","site_admin":false}}]