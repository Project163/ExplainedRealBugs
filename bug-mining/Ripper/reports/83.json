{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/286","repository_url":"https://api.github.com/repos/BurntSushi/ripgrep","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/286/labels{/name}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/286/comments","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/286/events","html_url":"https://github.com/BurntSushi/ripgrep/issues/286","id":197247245,"node_id":"MDU6SXNzdWUxOTcyNDcyNDU=","number":286,"title":"Redirecting ripgrep to a file within the search directory will cause rg to also search that file","user":{"login":"Ophirr33","id":15920577,"node_id":"MDQ6VXNlcjE1OTIwNTc3","avatar_url":"https://avatars.githubusercontent.com/u/15920577?v=4","gravatar_id":"","url":"https://api.github.com/users/Ophirr33","html_url":"https://github.com/Ophirr33","followers_url":"https://api.github.com/users/Ophirr33/followers","following_url":"https://api.github.com/users/Ophirr33/following{/other_user}","gists_url":"https://api.github.com/users/Ophirr33/gists{/gist_id}","starred_url":"https://api.github.com/users/Ophirr33/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ophirr33/subscriptions","organizations_url":"https://api.github.com/users/Ophirr33/orgs","repos_url":"https://api.github.com/users/Ophirr33/repos","events_url":"https://api.github.com/users/Ophirr33/events{/privacy}","received_events_url":"https://api.github.com/users/Ophirr33/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":339721678,"node_id":"MDU6TGFiZWwzMzk3MjE2Nzg=","url":"https://api.github.com/repos/BurntSushi/ripgrep/labels/bug","name":"bug","color":"fc2929","default":true,"description":"A bug."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2016-12-22T19:15:21Z","updated_at":"2017-01-09T21:12:10Z","closed_at":"2017-01-09T21:12:10Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"This leads to ripgrep searching its own output, taking a lot of time and eating up disk space. Here's a minimal example:\r\n```\r\nmkdir rg-test && cd rg-test\r\necho \"hello\" > found.txt\r\nrg -e \"hello\" > tmp.txt\r\nrg -e \"hello\" > tmp2.txt\"\r\nrg -e \"hello\" > tmp3.txt\"\r\n```\r\n\r\nThen, running `rg -e \"hello\"` will output the following:\r\n```\r\nfound.txt\r\n1:hello\r\n\r\ntmp.txt\r\n1:found.txt:hello\r\n2:tmp.txt:found.txt:hello\r\n\r\ntmp2.txt\r\n1:found.txt:hello\r\n2:tmp.txt:found.txt:hello\r\n3:tmp.txt:tmp.txt:found.txt:hello\r\n4:tmp2.txt:found.txt:hello\r\n5:tmp2.txt:tmp.txt:found.txt:hello\r\n6:tmp2.txt:tmp.txt:tmp.txt:found.txt:hello \r\n\r\ntmp3.txt\r\n1:found.txt:hello\r\n2:tmp.txt:found.txt:hello\r\n3:tmp.txt:tmp.txt:found.txt:hello\r\n4:tmp2.txt:found.txt:hello\r\n5:tmp2.txt:tmp.txt:found.txt:hello\r\n6:tmp2.txt:tmp.txt:tmp.txt:found.txt:hello\r\n7:tmp2.txt:tmp2.txt:found.txt:hello\r\n8:tmp2.txt:tmp2.txt:tmp.txt:found.txt:hello\r\n9:tmp2.txt:tmp2.txt:tmp.txt:tmp.txt:found.txt:hello\r\n10:tmp3.txt:found.txt:hello\r\n11:tmp3.txt:tmp.txt:found.txt:hello\r\n12:tmp3.txt:tmp.txt:tmp.txt:found.txt:hello\r\n13:tmp3.txt:tmp2.txt:found.txt:hello\r\n14:tmp3.txt:tmp2.txt:tmp.txt:found.txt:hello\r\n15:tmp3.txt:tmp2.txt:tmp.txt:tmp.txt:found.txt:hello\r\n16:tmp3.txt:tmp2.txt:tmp2.txt:found.txt:hello\r\n17:tmp3.txt:tmp2.txt:tmp2.txt:tmp.txt:found.txt:hello\r\n18:tmp3.txt:tmp2.txt:tmp2.txt:tmp.txt:tmp.txt:found.txt:hello\r\n```\r\n\r\nWhen doing the same with grep instead, we get the expected output (and switching hello with yellow)\r\n\r\n```\r\nfound2.txt\r\n1:yellow\r\n\r\ntemp.txt\r\n1:./found2.txt:yellow\r\n\r\ntemp2.txt\r\n1:./found2.txt:yellow\r\n2:./temp.txt:./found2.txt:yellow\r\n\r\ntemp3.txt\r\n1:./found2.txt:yellow\r\n2:./temp.txt:./found2.txt:yellow\r\n3:./temp2.txt:./found2.txt:yellow\r\n4:./temp2.txt:./temp.txt:./found2.txt:yellow\r\n```\r\n\r\nThe more searches that ripgrep reports, the bigger the file blow up is (I did this on a ripgrep search that had 17,000 hits...). Currently, this can be worked around just by piping to a file outside the directory being searched, or piping into a pager instead.","closed_by":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/286/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/286/timeline","performed_via_github_app":null,"state_reason":"completed"}