[{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/388028643","html_url":"https://github.com/BurntSushi/ripgrep/issues/916#issuecomment-388028643","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/916","id":388028643,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODAyODY0Mw==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-10T11:33:52Z","updated_at":"2018-05-10T11:33:52Z","body":"Fascinating bug! `strace` reveals some of the secrets here:\r\n\r\n```\r\nexecve(\"/home/andrew/rust/ripgrep/target/release/rg\", [\"rg\", \"--files\", \"--no-messages\", \"-j1\", \"/proc/29082\"], 0x7ffc2f21e700 /* 87 vars */) = 0\r\nbrk(NULL)                               = 0x55625317e000\r\naccess(\"/etc/ld.so.preload\", R_OK)      = -1 ENOENT (No such file or directory)\r\nopenat(AT_FDCWD, \"/etc/ld.so.cache\", O_RDONLY|O_CLOEXEC) = 3\r\nfstat(3, {st_mode=S_IFREG|0644, st_size=213799, ...}) = 0\r\nmmap(NULL, 213799, PROT_READ, MAP_PRIVATE, 3, 0) = 0x7f3040e98000\r\nclose(3)                                = 0\r\nopenat(AT_FDCWD, \"/usr/lib/libdl.so.2\", O_RDONLY|O_CLOEXEC) = 3\r\nread(3, \"\\177ELF\\2\\1\\1\\0\\0\\0\\0\\0\\0\\0\\0\\0\\3\\0>\\0\\1\\0\\0\\0@\\r\\0\\0\\0\\0\\0\\0\"..., 832) = 832\r\nfstat(3, {st_mode=S_IFREG|0755, st_size=14160, ...}) = 0\r\nmmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f3040e96000\r\nmmap(NULL, 2109584, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f3040aa5000\r\nmprotect(0x7f3040aa8000, 2093056, PROT_NONE) = 0\r\nmmap(0x7f3040ca7000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x2000) = 0x7f3040ca7000\r\nclose(3)                                = 0\r\nopenat(AT_FDCWD, \"/usr/lib/librt.so.1\", O_RDONLY|O_CLOEXEC) = 3\r\nread(3, \"\\177ELF\\2\\1\\1\\0\\0\\0\\0\\0\\0\\0\\0\\0\\3\\0>\\0\\1\\0\\0\\0000\\36\\0\\0\\0\\0\\0\\0\"..., 832) = 832\r\nfstat(3, {st_mode=S_IFREG|0755, st_size=30920, ...}) = 0\r\nmmap(NULL, 2128376, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f304089d000\r\nmprotect(0x7f30408a4000, 2093056, PROT_NONE) = 0\r\nmmap(0x7f3040aa3000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x6000) = 0x7f3040aa3000\r\nclose(3)                                = 0\r\nopenat(AT_FDCWD, \"/usr/lib/libpthread.so.0\", O_RDONLY|O_CLOEXEC) = 3\r\nread(3, \"\\177ELF\\2\\1\\1\\0\\0\\0\\0\\0\\0\\0\\0\\0\\3\\0>\\0\\1\\0\\0\\0\\0]\\0\\0\\0\\0\\0\\0\"..., 832) = 832\r\nfstat(3, {st_mode=S_IFREG|0755, st_size=145336, ...}) = 0\r\nmmap(NULL, 2216400, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f304067f000\r\nmprotect(0x7f3040698000, 2093056, PROT_NONE) = 0\r\nmmap(0x7f3040897000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x18000) = 0x7f3040897000\r\nmmap(0x7f3040899000, 12752, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7f3040899000\r\nclose(3)                                = 0\r\nopenat(AT_FDCWD, \"/usr/lib/libgcc_s.so.1\", O_RDONLY|O_CLOEXEC) = 3\r\nread(3, \"\\177ELF\\2\\1\\1\\0\\0\\0\\0\\0\\0\\0\\0\\0\\3\\0>\\0\\1\\0\\0\\0\\0(\\0\\0\\0\\0\\0\\0\"..., 832) = 832\r\nfstat(3, {st_mode=S_IFREG|0644, st_size=747480, ...}) = 0\r\nmmap(NULL, 2188016, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f3040468000\r\nmprotect(0x7f304047e000, 2093056, PROT_NONE) = 0\r\nmmap(0x7f304067d000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x15000) = 0x7f304067d000\r\nclose(3)                                = 0\r\nopenat(AT_FDCWD, \"/usr/lib/libc.so.6\", O_RDONLY|O_CLOEXEC) = 3\r\nread(3, \"\\177ELF\\2\\1\\1\\3\\0\\0\\0\\0\\0\\0\\0\\0\\3\\0>\\0\\1\\0\\0\\0`\\20\\2\\0\\0\\0\\0\\0\"..., 832) = 832\r\nfstat(3, {st_mode=S_IFREG|0755, st_size=2065784, ...}) = 0\r\nmmap(NULL, 3893488, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f30400b1000\r\nmprotect(0x7f304025f000, 2093056, PROT_NONE) = 0\r\nmmap(0x7f304045e000, 24576, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x1ad000) = 0x7f304045e000\r\nmmap(0x7f3040464000, 14576, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7f3040464000\r\nclose(3)                                = 0\r\nmmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f3040e94000\r\narch_prctl(ARCH_SET_FS, 0x7f3040e95380) = 0\r\nmprotect(0x7f304045e000, 16384, PROT_READ) = 0\r\nmprotect(0x7f304067d000, 4096, PROT_READ) = 0\r\nmprotect(0x7f3040897000, 4096, PROT_READ) = 0\r\nmprotect(0x7f3040aa3000, 4096, PROT_READ) = 0\r\nmprotect(0x7f3040ca7000, 4096, PROT_READ) = 0\r\nmprotect(0x55625283a000, 176128, PROT_READ) = 0\r\nmprotect(0x7f3040ecd000, 4096, PROT_READ) = 0\r\nmunmap(0x7f3040e98000, 213799)          = 0\r\nset_tid_address(0x7f3040e95650)         = 29186\r\nset_robust_list(0x7f3040e95660, 24)     = 0\r\nrt_sigaction(SIGRTMIN, {sa_handler=0x7f3040684770, sa_mask=[], sa_flags=SA_RESTORER|SA_SIGINFO, sa_restorer=0x7f3040690dd0}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_1, {sa_handler=0x7f3040684810, sa_mask=[], sa_flags=SA_RESTORER|SA_RESTART|SA_SIGINFO, sa_restorer=0x7f3040690dd0}, NULL, 8) = 0\r\nrt_sigprocmask(SIG_UNBLOCK, [RTMIN RT_1], NULL, 8) = 0\r\nprlimit64(0, RLIMIT_STACK, NULL, {rlim_cur=8192*1024, rlim_max=RLIM64_INFINITY}) = 0\r\nreadlink(\"/etc/malloc.conf\", 0x7ffc91c9a220, 4096) = -1 ENOENT (No such file or directory)\r\nopen(\"/proc/sys/vm/overcommit_memory\", O_RDONLY) = 3\r\nread(3, \"0\", 1)                         = 1\r\nclose(3)                                = 0\r\nbrk(NULL)                               = 0x55625317e000\r\nmmap(NULL, 2097152, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS|MAP_NORESERVE, -1, 0) = 0x7f303feb1000\r\nmunmap(0x7f303feb1000, 2097152)         = 0\r\nmmap(NULL, 4190208, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS|MAP_NORESERVE, -1, 0) = 0x7f303fcb2000\r\nmunmap(0x7f303fcb2000, 1368064)         = 0\r\nmunmap(0x7f3040000000, 724992)          = 0\r\nopen(\"/sys/devices/system/cpu/online\", O_RDONLY|O_CLOEXEC) = 3\r\nread(3, \"0-3\\n\", 8192)                  = 4\r\nclose(3)                                = 0\r\nrt_sigaction(SIGPIPE, {sa_handler=SIG_IGN, sa_mask=[PIPE], sa_flags=SA_RESTORER|SA_RESTART, sa_restorer=0x7f30400e58e0}, {sa_handler=SIG_DFL, sa_mask=[], sa_flags=0}, 8) = 0\r\nmmap(NULL, 2097152, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS|MAP_NORESERVE, -1, 0) = 0x7f303fc00000\r\nopen(\"/proc/self/maps\", O_RDONLY|O_CLOEXEC) = 3\r\nprlimit64(0, RLIMIT_STACK, NULL, {rlim_cur=8192*1024, rlim_max=RLIM64_INFINITY}) = 0\r\nfstat(3, {st_mode=S_IFREG|0444, st_size=0, ...}) = 0\r\nread(3, \"5562522d5000-55625263a000 r-xp 0\"..., 1024) = 1024\r\nread(3, \"06                     /usr/lib/\"..., 1024) = 1024\r\nread(3, \" 788474                     /usr\"..., 1024) = 1024\r\nclose(3)                                = 0\r\nsched_getaffinity(29186, 32, [0, 1, 2, 3]) = 32\r\nrt_sigaction(SIGSEGV, {sa_handler=0x5562524f34b0, sa_mask=[], sa_flags=SA_RESTORER|SA_ONSTACK|SA_SIGINFO, sa_restorer=0x7f3040690dd0}, NULL, 8) = 0\r\nrt_sigaction(SIGBUS, {sa_handler=0x5562524f34b0, sa_mask=[], sa_flags=SA_RESTORER|SA_ONSTACK|SA_SIGINFO, sa_restorer=0x7f3040690dd0}, NULL, 8) = 0\r\nsigaltstack(NULL, {ss_sp=NULL, ss_flags=SS_DISABLE, ss_size=0}) = 0\r\nmmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f3040ecb000\r\nsigaltstack({ss_sp=0x7f3040ecb000, ss_flags=0, ss_size=8192}, NULL) = 0\r\nrt_sigaction(SIGPIPE, {sa_handler=SIG_DFL, sa_mask=[PIPE], sa_flags=SA_RESTORER|SA_RESTART, sa_restorer=0x7f30400e58e0}, {sa_handler=SIG_IGN, sa_mask=[PIPE], sa_flags=SA_RESTORER|SA_RESTART, sa_restorer=0x7f30400e58e0}, 8) = 0\r\ngetrandom(\"\", 0, GRND_NONBLOCK)         = 0\r\ngetrandom(\"\\xe7\\x0e\\x06\\xc4\\x60\\xfe\\xff\\xfc\\x06\\x8a\\x55\\x44\\x2c\\xcb\\xeb\\xbb\", 16, GRND_NONBLOCK) = 16\r\nopenat(AT_FDCWD, \"/home/andrew/.ripgreprc\", O_RDONLY|O_CLOEXEC) = 3\r\nioctl(3, FIOCLEX)                       = 0\r\nread(3, \"--max-columns=200\\n--colors=match\"..., 8192) = 167\r\nread(3, \"\", 8192)                       = 0\r\nclose(3)                                = 0\r\nioctl(1, TCGETS, 0x7ffc91c99d10)        = -1 ENOTTY (Inappropriate ioctl for device)\r\nstat(\"/proc/29082\", {st_mode=S_IFDIR|0555, st_size=0, ...}) = 0\r\nstat(\"/proc/29082\", {st_mode=S_IFDIR|0555, st_size=0, ...}) = 0\r\nioctl(1, TCGETS, 0x7ffc91c99d10)        = -1 ENOTTY (Inappropriate ioctl for device)\r\ngetcwd(\"/proc\", 512)                    = 6\r\nioctl(1, TCGETS, 0x7ffc91c99d10)        = -1 ENOTTY (Inappropriate ioctl for device)\r\nfstat(1, {st_mode=S_IFREG|0664, st_size=7514, ...}) = 0\r\nfstat(1, {st_mode=S_IFREG|0664, st_size=7570, ...}) = 0\r\nstat(\"/proc/29082\", {st_mode=S_IFDIR|0555, st_size=0, ...}) = 0\r\nopenat(AT_FDCWD, \"/home/andrew/.gitconfig\", O_RDONLY|O_CLOEXEC) = 3\r\nioctl(3, FIOCLEX)                       = 0\r\nread(3, \"[push]\\n\\tdefault = simple\\n[rerere\"..., 8192) = 224\r\nread(3, \"\", 8192)                       = 0\r\nclose(3)                                = 0\r\nstat(\"/home/andrew/.config/git/ignore\", 0x7ffc91c993c0) = -1 ENOENT (No such file or directory)\r\nstat(\"/proc/29082\", {st_mode=S_IFDIR|0555, st_size=0, ...}) = 0\r\nlstat(\"/proc\", {st_mode=S_IFDIR|0555, st_size=0, ...}) = 0\r\nlstat(\"/proc/29082\", {st_mode=S_IFDIR|0555, st_size=0, ...}) = 0\r\nopenat(AT_FDCWD, \"/.rgignore\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\r\nopenat(AT_FDCWD, \"/.ignore\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\r\nopenat(AT_FDCWD, \"/.gitignore\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\r\nopenat(AT_FDCWD, \"/.git/info/exclude\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\r\nstat(\"/.git\", 0x7ffc91c990d0)           = -1 ENOENT (No such file or directory)\r\nopenat(AT_FDCWD, \"/proc/.rgignore\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\r\nopenat(AT_FDCWD, \"/proc/.ignore\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\r\nopenat(AT_FDCWD, \"/proc/.gitignore\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\r\nopenat(AT_FDCWD, \"/proc/.git/info/exclude\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\r\nstat(\"/proc/.git\", 0x7ffc91c990d0)      = -1 ENOENT (No such file or directory)\r\nstat(\"/proc/29082\", {st_mode=S_IFDIR|0555, st_size=0, ...}) = 0\r\nopen(\"/proc/29082\", O_RDONLY|O_NONBLOCK|O_CLOEXEC|O_DIRECTORY) = 3\r\nfstat(3, {st_mode=S_IFDIR|0555, st_size=0, ...}) = 0\r\nopenat(AT_FDCWD, \"/proc/29082/.rgignore\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\r\nopenat(AT_FDCWD, \"/proc/29082/.ignore\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\r\nopenat(AT_FDCWD, \"/proc/29082/.gitignore\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\r\nopenat(AT_FDCWD, \"/proc/29082/.git/info/exclude\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\r\nstat(\"/proc/29082/.git\", 0x7ffc91c99670) = -1 ENOENT (No such file or directory)\r\ngetdents(3, /* 51 entries */, 32768)    = 1528\r\nopen(\"/proc/29082/task\", O_RDONLY|O_NONBLOCK|O_CLOEXEC|O_DIRECTORY) = 4\r\nfstat(4, {st_mode=S_IFDIR|0555, st_size=0, ...}) = 0\r\nopenat(AT_FDCWD, \"/proc/29082/task/.rgignore\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\r\nopenat(AT_FDCWD, \"/proc/29082/task/.ignore\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\r\nopenat(AT_FDCWD, \"/proc/29082/task/.gitignore\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\r\nopenat(AT_FDCWD, \"/proc/29082/task/.git/info/exclude\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\r\nstat(\"/proc/29082/task/.git\", 0x7ffc91c99670) = -1 ENOENT (No such file or directory)\r\ngetdents(4, /* 3 entries */, 32768)     = 80\r\nopen(\"/proc/29082/task/29082\", O_RDONLY|O_NONBLOCK|O_CLOEXEC|O_DIRECTORY) = 5\r\nfstat(5, {st_mode=S_IFDIR|0555, st_size=0, ...}) = 0\r\nopenat(AT_FDCWD, \"/proc/29082/task/29082/.rgignore\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\r\nopenat(AT_FDCWD, \"/proc/29082/task/29082/.ignore\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\r\nopenat(AT_FDCWD, \"/proc/29082/task/29082/.gitignore\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\r\nopenat(AT_FDCWD, \"/proc/29082/task/29082/.git/info/exclude\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\r\nstat(\"/proc/29082/task/29082/.git\", 0x7ffc91c99670) = -1 ENOENT (No such file or directory)\r\ngetdents(5, /* 45 entries */, 32768)    = 1328\r\nopen(\"/proc/29082/task/29082/fd\", O_RDONLY|O_NONBLOCK|O_CLOEXEC|O_DIRECTORY) = -1 EACCES (Permission denied)\r\nopenat(AT_FDCWD, \"/proc/29082/task/29082/fd/.rgignore\", O_RDONLY|O_CLOEXEC) = -1 EACCES (Permission denied)\r\nopenat(AT_FDCWD, \"/proc/29082/task/29082/fd/.ignore\", O_RDONLY|O_CLOEXEC) = -1 EACCES (Permission denied)\r\nopenat(AT_FDCWD, \"/proc/29082/task/29082/fd/.gitignore\", O_RDONLY|O_CLOEXEC) = -1 EACCES (Permission denied)\r\nopenat(AT_FDCWD, \"/proc/29082/task/29082/fd/.git/info/exclude\", O_RDONLY|O_CLOEXEC) = -1 EACCES (Permission denied)\r\nstat(\"/proc/29082/task/29082/fd/.git\", 0x7ffc91c99670) = -1 EACCES (Permission denied)\r\nopen(\"/proc/29082/task/29082/fdinfo\", O_RDONLY|O_NONBLOCK|O_CLOEXEC|O_DIRECTORY) = -1 EACCES (Permission denied)\r\nopenat(AT_FDCWD, \"/proc/29082/task/29082/fdinfo/.rgignore\", O_RDONLY|O_CLOEXEC) = -1 EACCES (Permission denied)\r\nopenat(AT_FDCWD, \"/proc/29082/task/29082/fdinfo/.ignore\", O_RDONLY|O_CLOEXEC) = -1 EACCES (Permission denied)\r\nopenat(AT_FDCWD, \"/proc/29082/task/29082/fdinfo/.gitignore\", O_RDONLY|O_CLOEXEC) = -1 EACCES (Permission denied)\r\nopenat(AT_FDCWD, \"/proc/29082/task/29082/fdinfo/.git/info/exclude\", O_RDONLY|O_CLOEXEC) = -1 EACCES (Permission denied)\r\nstat(\"/proc/29082/task/29082/fdinfo/.git\", 0x7ffc91c99670) = -1 EACCES (Permission denied)\r\nopen(\"/proc/29082/task/29082/ns\", O_RDONLY|O_NONBLOCK|O_CLOEXEC|O_DIRECTORY) = -1 EACCES (Permission denied)\r\nopenat(AT_FDCWD, \"/proc/29082/task/29082/ns/.rgignore\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\r\nopenat(AT_FDCWD, \"/proc/29082/task/29082/ns/.ignore\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\r\nopenat(AT_FDCWD, \"/proc/29082/task/29082/ns/.gitignore\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\r\nopenat(AT_FDCWD, \"/proc/29082/task/29082/ns/.git/info/exclude\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\r\nstat(\"/proc/29082/task/29082/ns/.git\", 0x7ffc91c99670) = -1 ENOENT (No such file or directory)\r\nopen(\"/proc/29082/task/29082/net\", O_RDONLY|O_NONBLOCK|O_CLOEXEC|O_DIRECTORY) = 6\r\nfstat(6, {st_mode=S_IFDIR|0555, st_size=0, ...}) = 0\r\nopenat(AT_FDCWD, \"/proc/29082/task/29082/net/.rgignore\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\r\nopenat(AT_FDCWD, \"/proc/29082/task/29082/net/.ignore\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\r\nopenat(AT_FDCWD, \"/proc/29082/task/29082/net/.gitignore\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\r\nopenat(AT_FDCWD, \"/proc/29082/task/29082/net/.git/info/exclude\", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)\r\nstat(\"/proc/29082/task/29082/net/.git\", 0x7ffc91c99670) = -1 ENOENT (No such file or directory)\r\ngetdents(6, 0x7f303fd9f5f0, 32768)      = -1 EINVAL (Invalid argument)\r\ngetdents(6, 0x7f303fd9f5f0, 32768)      = -1 EINVAL (Invalid argument)\r\ngetdents(6, 0x7f303fd9f5f0, 32768)      = -1 EINVAL (Invalid argument)\r\ngetdents(6, 0x7f303fd9f5f0, 32768)      = -1 EINVAL (Invalid argument)\r\ngetdents(6, 0x7f303fd9f5f0, 32768)      = -1 EINVAL (Invalid argument)\r\ngetdents(6, 0x7f303fd9f5f0, 32768)      = -1 EINVAL (Invalid argument)\r\ngetdents(6, 0x7f303fd9f5f0, 32768)      = -1 EINVAL (Invalid argument)\r\ngetdents(6, 0x7f303fd9f5f0, 32768)      = -1 EINVAL (Invalid argument)\r\ngetdents(6, 0x7f303fd9f5f0, 32768)      = -1 EINVAL (Invalid argument)\r\ngetdents(6, 0x7f303fd9f5f0, 32768)      = -1 EINVAL (Invalid argument)\r\ngetdents(6, 0x7f303fd9f5f0, 32768)      = -1 EINVAL (Invalid argument)\r\ngetdents(6, 0x7f303fd9f5f0, 32768)      = -1 EINVAL (Invalid argument)\r\ngetdents(6, 0x7f303fd9f5f0, 32768)      = -1 EINVAL (Invalid argument)\r\n...\r\n```\r\n\r\nIn particular, `getdents(6, 0x7f303fd9f5f0, 32768)      = -1 EINVAL (Invalid argument)` is repeated in what appears to be an infinite loop. This happens even when ripgrep uses walkdir directly (forced by passing `-j1`). If I run walkdir's example program on the directory, then I see this output:\r\n\r\n```\r\n/proc/29271\r\n/proc/29271/task\r\n/proc/29271/task/29271\r\n/proc/29271/task/29271/fd\r\nERROR: IO error for operation on /proc/29271/task/29271/fd: Permission denied (os error 13)\r\n/proc/29271/task/29271/fdinfo\r\nERROR: IO error for operation on /proc/29271/task/29271/fdinfo: Permission denied (os error 13)\r\n/proc/29271/task/29271/ns\r\nERROR: IO error for operation on /proc/29271/task/29271/ns: Permission denied (os error 13)\r\n/proc/29271/task/29271/net\r\nERROR: Invalid argument (os error 22)\r\nERROR: Invalid argument (os error 22)\r\nERROR: Invalid argument (os error 22)\r\nERROR: Invalid argument (os error 22)\r\n...\r\n```\r\n\r\nwith the invalid argument error appearing to be coming from a loop.\r\n\r\nIf I look at the strace logs in `find`, I see the same `EINVAL` errors, but no looping.\r\n\r\nReading the man page for `getdents`, it says that `EINVAL` means \"Result buffer is too small.\"\r\n\r\nFollowing the strace logs, the problematic directory appears to be `/proc/31439/task/31439/net`:\r\n\r\n```\r\n$ ls /proc/31439/task/31439/net\r\nls: reading directory '/proc/31439/task/31439/net': Invalid argument\r\n```\r\n\r\nI've scoured the man pages of `readdir(2)` (Linux, no longer relevant?), `readdir(3)` (POSIX) and `getdents` (the last being the raw syscall), and I can't find *anything* that specifies the behavior of these routines when an error is returned. In particular, the fact that `readdir` can return `EINVAL` isn't apparently specified by POSIX. My guess at this particular moment in time is that the directory stream opened by `opendir` is not advanced either when this particular error occurs or when any error occurs. This explains the infinite loop, since errors that occur during directory traversal don't stop traversal.\r\n\r\nGiven the lack of specification, the next best thing is to go out and look at how tools like `find` (or probably `fts`) handle this case. When `readdir` returns an error, do they give up on reading that directory immediately? Is there case analysis on the type of error where some errors result in giving up but others result in mushing on? I don't know.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/388028643/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/388028664","html_url":"https://github.com/BurntSushi/ripgrep/issues/916#issuecomment-388028664","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/916","id":388028664,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODAyODY2NA==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-10T11:34:00Z","updated_at":"2018-05-10T11:34:00Z","body":"Thanks for the excellent reproducible bug report!!","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/388028664/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1619599096,"node_id":"MDEyOkxhYmVsZWRFdmVudDE2MTk1OTkwOTY=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1619599096","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-05-10T11:35:24Z","label":{"name":"bug","color":"fc2929"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/388086746","html_url":"https://github.com/BurntSushi/ripgrep/issues/916#issuecomment-388086746","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/916","id":388086746,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODA4Njc0Ng==","user":{"login":"sharkdp","id":4209276,"node_id":"MDQ6VXNlcjQyMDkyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/4209276?v=4","gravatar_id":"","url":"https://api.github.com/users/sharkdp","html_url":"https://github.com/sharkdp","followers_url":"https://api.github.com/users/sharkdp/followers","following_url":"https://api.github.com/users/sharkdp/following{/other_user}","gists_url":"https://api.github.com/users/sharkdp/gists{/gist_id}","starred_url":"https://api.github.com/users/sharkdp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sharkdp/subscriptions","organizations_url":"https://api.github.com/users/sharkdp/orgs","repos_url":"https://api.github.com/users/sharkdp/repos","events_url":"https://api.github.com/users/sharkdp/events{/privacy}","received_events_url":"https://api.github.com/users/sharkdp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-10T15:21:23Z","updated_at":"2018-05-10T15:21:23Z","body":"Thank you for your detailed response.\r\n\r\n\r\nI can actually reproduce this by using just `std::fs::read_dir`:\r\n\r\n``` rust\r\nuse std::env;\r\nuse std::io;\r\nuse std::fs;\r\nuse std::path::Path;\r\n\r\nfn visit_dirs(dir: &Path) -> io::Result<()> {\r\n    for entry in fs::read_dir(dir)? {\r\n        println!(\"{:?}\", entry);\r\n\r\n        if let Ok(entry) = entry {\r\n            let path = entry.path();\r\n            if path.is_dir() {\r\n                let _ = visit_dirs(&path);\r\n            }\r\n        }\r\n    }\r\n    Ok(())\r\n}\r\n\r\nfn main() {\r\n    let root = env::args().nth(1).unwrap();\r\n    let _ = visit_dirs(Path::new(&root));\r\n}\r\n```\r\n\r\nWhich hangs in the same loop:\r\n```\r\n> cargo run -- /proc/4032\r\n...\r\nErr(Os { code: 22, kind: InvalidInput, message: \"Invalid argument\" })\r\nErr(Os { code: 22, kind: InvalidInput, message: \"Invalid argument\" })\r\nErr(Os { code: 22, kind: InvalidInput, message: \"Invalid argument\" })\r\n...\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/388086746/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sharkdp","id":4209276,"node_id":"MDQ6VXNlcjQyMDkyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/4209276?v=4","gravatar_id":"","url":"https://api.github.com/users/sharkdp","html_url":"https://github.com/sharkdp","followers_url":"https://api.github.com/users/sharkdp/followers","following_url":"https://api.github.com/users/sharkdp/following{/other_user}","gists_url":"https://api.github.com/users/sharkdp/gists{/gist_id}","starred_url":"https://api.github.com/users/sharkdp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sharkdp/subscriptions","organizations_url":"https://api.github.com/users/sharkdp/orgs","repos_url":"https://api.github.com/users/sharkdp/repos","events_url":"https://api.github.com/users/sharkdp/events{/privacy}","received_events_url":"https://api.github.com/users/sharkdp/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/388087437","html_url":"https://github.com/BurntSushi/ripgrep/issues/916#issuecomment-388087437","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/916","id":388087437,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODA4NzQzNw==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-10T15:23:36Z","updated_at":"2018-05-10T15:23:36Z","body":"Ah yeah thanks for doing that. That was going to be my next test, but ran out of time.\r\n\r\nProbably the next step is to scrutinize `find`/`fts` and see how they handle the errors returned by `readdir`. AIUI, `fs::read_dir` is basically just a pretty thin layer on top of a loop that calls `readdir`.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/388087437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/388087748","html_url":"https://github.com/BurntSushi/ripgrep/issues/916#issuecomment-388087748","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/916","id":388087748,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODA4Nzc0OA==","user":{"login":"sharkdp","id":4209276,"node_id":"MDQ6VXNlcjQyMDkyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/4209276?v=4","gravatar_id":"","url":"https://api.github.com/users/sharkdp","html_url":"https://github.com/sharkdp","followers_url":"https://api.github.com/users/sharkdp/followers","following_url":"https://api.github.com/users/sharkdp/following{/other_user}","gists_url":"https://api.github.com/users/sharkdp/gists{/gist_id}","starred_url":"https://api.github.com/users/sharkdp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sharkdp/subscriptions","organizations_url":"https://api.github.com/users/sharkdp/orgs","repos_url":"https://api.github.com/users/sharkdp/repos","events_url":"https://api.github.com/users/sharkdp/events{/privacy}","received_events_url":"https://api.github.com/users/sharkdp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-10T15:24:41Z","updated_at":"2018-05-10T15:24:41Z","body":"Oh, I just found this: https://github.com/BurntSushi/walkdir/issues/98","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/388087748/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sharkdp","id":4209276,"node_id":"MDQ6VXNlcjQyMDkyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/4209276?v=4","gravatar_id":"","url":"https://api.github.com/users/sharkdp","html_url":"https://github.com/sharkdp","followers_url":"https://api.github.com/users/sharkdp/followers","following_url":"https://api.github.com/users/sharkdp/following{/other_user}","gists_url":"https://api.github.com/users/sharkdp/gists{/gist_id}","starred_url":"https://api.github.com/users/sharkdp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sharkdp/subscriptions","organizations_url":"https://api.github.com/users/sharkdp/orgs","repos_url":"https://api.github.com/users/sharkdp/repos","events_url":"https://api.github.com/users/sharkdp/events{/privacy}","received_events_url":"https://api.github.com/users/sharkdp/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/388088401","html_url":"https://github.com/BurntSushi/ripgrep/issues/916#issuecomment-388088401","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/916","id":388088401,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODA4ODQwMQ==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-10T15:26:41Z","updated_at":"2018-05-10T15:26:41Z","body":"Nice! Forgot about that. :-)","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/388088401/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/388127223","html_url":"https://github.com/BurntSushi/ripgrep/issues/916#issuecomment-388127223","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/916","id":388127223,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODEyNzIyMw==","user":{"login":"sharkdp","id":4209276,"node_id":"MDQ6VXNlcjQyMDkyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/4209276?v=4","gravatar_id":"","url":"https://api.github.com/users/sharkdp","html_url":"https://github.com/sharkdp","followers_url":"https://api.github.com/users/sharkdp/followers","following_url":"https://api.github.com/users/sharkdp/following{/other_user}","gists_url":"https://api.github.com/users/sharkdp/gists{/gist_id}","starred_url":"https://api.github.com/users/sharkdp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sharkdp/subscriptions","organizations_url":"https://api.github.com/users/sharkdp/orgs","repos_url":"https://api.github.com/users/sharkdp/repos","events_url":"https://api.github.com/users/sharkdp/events{/privacy}","received_events_url":"https://api.github.com/users/sharkdp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-10T17:37:26Z","updated_at":"2018-05-10T17:37:26Z","body":"So I did some more debugging and I believe I found the cause of this.\r\n\r\nWhen called on `/proc/$ZOMBIE_PID/net`, the `readdir_r` function\r\n\r\n``` c\r\nint readdir_r(DIR *dirp, struct dirent *entry, struct dirent **result);\r\n```\r\n\r\nreturns error code `22` (as we have seen above) and, **at the same time**, returns `NULL` in `*result`, signalling the end of the directory stream. If I am reading the code in the standard library correctly, this case can not be handled properly at the moment.\r\n\r\n``` rust\r\nloop {\r\n    if readdir64_r(self.dirp.0, &mut ret.entry, &mut entry_ptr) != 0 {\r\n        return Some(Err(Error::last_os_error()))\r\n    }\r\n    if entry_ptr.is_null() {\r\n        return None\r\n    }\r\n    if ret.name_bytes() != b\".\" && ret.name_bytes() != b\"..\" {\r\n        return Some(Ok(ret))\r\n    }\r\n}\r\n```\r\n(Code from the `next` function of `impl Iterator for ReadDir`, see https://github.com/rust-lang/rust/blob/f25c2283b3f8a7518b2f83a252b50d29d9bfbfda/src/libstd/sys/unix/fs.rs#L252-L262)\r\n\r\nTo handle this properly (without looping forever), one would probably have to check for `entry_ptr.is_null()` in the first (`Some(Err(...))`) case as well and store the result in some internal state of the iterator. On the next call of `next`, it would have to return `None`.\r\n\r\nWhat do you think? Is this something that should be reported upstream?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/388127223/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sharkdp","id":4209276,"node_id":"MDQ6VXNlcjQyMDkyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/4209276?v=4","gravatar_id":"","url":"https://api.github.com/users/sharkdp","html_url":"https://github.com/sharkdp","followers_url":"https://api.github.com/users/sharkdp/followers","following_url":"https://api.github.com/users/sharkdp/following{/other_user}","gists_url":"https://api.github.com/users/sharkdp/gists{/gist_id}","starred_url":"https://api.github.com/users/sharkdp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sharkdp/subscriptions","organizations_url":"https://api.github.com/users/sharkdp/orgs","repos_url":"https://api.github.com/users/sharkdp/repos","events_url":"https://api.github.com/users/sharkdp/events{/privacy}","received_events_url":"https://api.github.com/users/sharkdp/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/388129440","html_url":"https://github.com/BurntSushi/ripgrep/issues/916#issuecomment-388129440","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/916","id":388129440,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODEyOTQ0MA==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-10T17:44:50Z","updated_at":"2018-05-10T17:44:50Z","body":"@sharkdp Nice find! I think I do indeed agree with your conclusion that this should be fixed upstream.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/388129440/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1620314678,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTYyMDMxNDY3OA==","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1620314678","actor":{"login":"sharkdp","id":4209276,"node_id":"MDQ6VXNlcjQyMDkyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/4209276?v=4","gravatar_id":"","url":"https://api.github.com/users/sharkdp","html_url":"https://github.com/sharkdp","followers_url":"https://api.github.com/users/sharkdp/followers","following_url":"https://api.github.com/users/sharkdp/following{/other_user}","gists_url":"https://api.github.com/users/sharkdp/gists{/gist_id}","starred_url":"https://api.github.com/users/sharkdp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sharkdp/subscriptions","organizations_url":"https://api.github.com/users/sharkdp/orgs","repos_url":"https://api.github.com/users/sharkdp/repos","events_url":"https://api.github.com/users/sharkdp/events{/privacy}","received_events_url":"https://api.github.com/users/sharkdp/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-05-10T17:44:50Z","performed_via_github_app":null},{"id":1620314680,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE2MjAzMTQ2ODA=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1620314680","actor":{"login":"sharkdp","id":4209276,"node_id":"MDQ6VXNlcjQyMDkyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/4209276?v=4","gravatar_id":"","url":"https://api.github.com/users/sharkdp","html_url":"https://github.com/sharkdp","followers_url":"https://api.github.com/users/sharkdp/followers","following_url":"https://api.github.com/users/sharkdp/following{/other_user}","gists_url":"https://api.github.com/users/sharkdp/gists{/gist_id}","starred_url":"https://api.github.com/users/sharkdp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sharkdp/subscriptions","organizations_url":"https://api.github.com/users/sharkdp/orgs","repos_url":"https://api.github.com/users/sharkdp/repos","events_url":"https://api.github.com/users/sharkdp/events{/privacy}","received_events_url":"https://api.github.com/users/sharkdp/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-05-10T17:44:50Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/388142240","html_url":"https://github.com/BurntSushi/ripgrep/issues/916#issuecomment-388142240","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/916","id":388142240,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODE0MjI0MA==","user":{"login":"sharkdp","id":4209276,"node_id":"MDQ6VXNlcjQyMDkyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/4209276?v=4","gravatar_id":"","url":"https://api.github.com/users/sharkdp","html_url":"https://github.com/sharkdp","followers_url":"https://api.github.com/users/sharkdp/followers","following_url":"https://api.github.com/users/sharkdp/following{/other_user}","gists_url":"https://api.github.com/users/sharkdp/gists{/gist_id}","starred_url":"https://api.github.com/users/sharkdp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sharkdp/subscriptions","organizations_url":"https://api.github.com/users/sharkdp/orgs","repos_url":"https://api.github.com/users/sharkdp/repos","events_url":"https://api.github.com/users/sharkdp/events{/privacy}","received_events_url":"https://api.github.com/users/sharkdp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-10T18:27:28Z","updated_at":"2018-05-10T18:27:28Z","body":"Reported here: https://github.com/rust-lang/rust/issues/50619","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/388142240/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sharkdp","id":4209276,"node_id":"MDQ6VXNlcjQyMDkyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/4209276?v=4","gravatar_id":"","url":"https://api.github.com/users/sharkdp","html_url":"https://github.com/sharkdp","followers_url":"https://api.github.com/users/sharkdp/followers","following_url":"https://api.github.com/users/sharkdp/following{/other_user}","gists_url":"https://api.github.com/users/sharkdp/gists{/gist_id}","starred_url":"https://api.github.com/users/sharkdp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sharkdp/subscriptions","organizations_url":"https://api.github.com/users/sharkdp/orgs","repos_url":"https://api.github.com/users/sharkdp/repos","events_url":"https://api.github.com/users/sharkdp/events{/privacy}","received_events_url":"https://api.github.com/users/sharkdp/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/414862784","html_url":"https://github.com/BurntSushi/ripgrep/issues/916#issuecomment-414862784","issue_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/916","id":414862784,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNDg2Mjc4NA==","user":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-08-22T00:12:42Z","updated_at":"2018-08-22T00:12:42Z","body":"This should be fixed in the next stable release (1.29.0). I've confirmed that it is fixed in the current beta of 1.29.0, but is still present in Rust 1.28.0.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments/414862784/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1850680917,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDE4NTA2ODA5MTc=","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/1850680917","actor":{"login":"sharkdp","id":4209276,"node_id":"MDQ6VXNlcjQyMDkyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/4209276?v=4","gravatar_id":"","url":"https://api.github.com/users/sharkdp","html_url":"https://github.com/sharkdp","followers_url":"https://api.github.com/users/sharkdp/followers","following_url":"https://api.github.com/users/sharkdp/following{/other_user}","gists_url":"https://api.github.com/users/sharkdp/gists{/gist_id}","starred_url":"https://api.github.com/users/sharkdp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sharkdp/subscriptions","organizations_url":"https://api.github.com/users/sharkdp/orgs","repos_url":"https://api.github.com/users/sharkdp/repos","events_url":"https://api.github.com/users/sharkdp/events{/privacy}","received_events_url":"https://api.github.com/users/sharkdp/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"121021014e902a335f20e2cb4aff09595bec81f2","commit_url":"https://api.github.com/repos/sharkdp/ripgrep/commits/121021014e902a335f20e2cb4aff09595bec81f2","created_at":"2018-09-17T19:48:05Z","performed_via_github_app":null},{"actor":{"login":"sharkdp","id":4209276,"node_id":"MDQ6VXNlcjQyMDkyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/4209276?v=4","gravatar_id":"","url":"https://api.github.com/users/sharkdp","html_url":"https://github.com/sharkdp","followers_url":"https://api.github.com/users/sharkdp/followers","following_url":"https://api.github.com/users/sharkdp/following{/other_user}","gists_url":"https://api.github.com/users/sharkdp/gists{/gist_id}","starred_url":"https://api.github.com/users/sharkdp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sharkdp/subscriptions","organizations_url":"https://api.github.com/users/sharkdp/orgs","repos_url":"https://api.github.com/users/sharkdp/repos","events_url":"https://api.github.com/users/sharkdp/events{/privacy}","received_events_url":"https://api.github.com/users/sharkdp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-17T19:50:21Z","updated_at":"2018-09-17T19:50:21Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1058","repository_url":"https://api.github.com/repos/BurntSushi/ripgrep","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1058/labels{/name}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1058/comments","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1058/events","html_url":"https://github.com/BurntSushi/ripgrep/pull/1058","id":361017063,"node_id":"MDExOlB1bGxSZXF1ZXN0MjE2MDk0NzAy","number":1058,"title":"Upgrade minimum reqiured version of Rust to 1.29","user":{"login":"sharkdp","id":4209276,"node_id":"MDQ6VXNlcjQyMDkyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/4209276?v=4","gravatar_id":"","url":"https://api.github.com/users/sharkdp","html_url":"https://github.com/sharkdp","followers_url":"https://api.github.com/users/sharkdp/followers","following_url":"https://api.github.com/users/sharkdp/following{/other_user}","gists_url":"https://api.github.com/users/sharkdp/gists{/gist_id}","starred_url":"https://api.github.com/users/sharkdp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sharkdp/subscriptions","organizations_url":"https://api.github.com/users/sharkdp/orgs","repos_url":"https://api.github.com/users/sharkdp/repos","events_url":"https://api.github.com/users/sharkdp/events{/privacy}","received_events_url":"https://api.github.com/users/sharkdp/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-09-17T19:50:21Z","updated_at":"2018-09-17T20:34:34Z","closed_at":"2018-09-17T20:31:03Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"repository":{"id":53631945,"node_id":"MDEwOlJlcG9zaXRvcnk1MzYzMTk0NQ==","name":"ripgrep","full_name":"BurntSushi/ripgrep","private":false,"owner":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/BurntSushi/ripgrep","description":"ripgrep recursively searches directories for a regex pattern while respecting your gitignore","fork":false,"url":"https://api.github.com/repos/BurntSushi/ripgrep","forks_url":"https://api.github.com/repos/BurntSushi/ripgrep/forks","keys_url":"https://api.github.com/repos/BurntSushi/ripgrep/keys{/key_id}","collaborators_url":"https://api.github.com/repos/BurntSushi/ripgrep/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/BurntSushi/ripgrep/teams","hooks_url":"https://api.github.com/repos/BurntSushi/ripgrep/hooks","issue_events_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events{/number}","events_url":"https://api.github.com/repos/BurntSushi/ripgrep/events","assignees_url":"https://api.github.com/repos/BurntSushi/ripgrep/assignees{/user}","branches_url":"https://api.github.com/repos/BurntSushi/ripgrep/branches{/branch}","tags_url":"https://api.github.com/repos/BurntSushi/ripgrep/tags","blobs_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/refs{/sha}","trees_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/trees{/sha}","statuses_url":"https://api.github.com/repos/BurntSushi/ripgrep/statuses/{sha}","languages_url":"https://api.github.com/repos/BurntSushi/ripgrep/languages","stargazers_url":"https://api.github.com/repos/BurntSushi/ripgrep/stargazers","contributors_url":"https://api.github.com/repos/BurntSushi/ripgrep/contributors","subscribers_url":"https://api.github.com/repos/BurntSushi/ripgrep/subscribers","subscription_url":"https://api.github.com/repos/BurntSushi/ripgrep/subscription","commits_url":"https://api.github.com/repos/BurntSushi/ripgrep/commits{/sha}","git_commits_url":"https://api.github.com/repos/BurntSushi/ripgrep/git/commits{/sha}","comments_url":"https://api.github.com/repos/BurntSushi/ripgrep/comments{/number}","issue_comment_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/comments{/number}","contents_url":"https://api.github.com/repos/BurntSushi/ripgrep/contents/{+path}","compare_url":"https://api.github.com/repos/BurntSushi/ripgrep/compare/{base}...{head}","merges_url":"https://api.github.com/repos/BurntSushi/ripgrep/merges","archive_url":"https://api.github.com/repos/BurntSushi/ripgrep/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/BurntSushi/ripgrep/downloads","issues_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues{/number}","pulls_url":"https://api.github.com/repos/BurntSushi/ripgrep/pulls{/number}","milestones_url":"https://api.github.com/repos/BurntSushi/ripgrep/milestones{/number}","notifications_url":"https://api.github.com/repos/BurntSushi/ripgrep/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/BurntSushi/ripgrep/labels{/name}","releases_url":"https://api.github.com/repos/BurntSushi/ripgrep/releases{/id}","deployments_url":"https://api.github.com/repos/BurntSushi/ripgrep/deployments","created_at":"2016-03-11T02:02:33Z","updated_at":"2025-11-09T23:50:59Z","pushed_at":"2025-10-30T17:30:23Z","git_url":"git://github.com/BurntSushi/ripgrep.git","ssh_url":"git@github.com:BurntSushi/ripgrep.git","clone_url":"https://github.com/BurntSushi/ripgrep.git","svn_url":"https://github.com/BurntSushi/ripgrep","homepage":"","size":5534,"stargazers_count":57154,"watchers_count":57154,"language":"Rust","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2304,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":88,"license":{"key":"unlicense","name":"The Unlicense","spdx_id":"Unlicense","url":"https://api.github.com/licenses/unlicense","node_id":"MDc6TGljZW5zZTE1"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["cli","command-line","command-line-tool","gitignore","grep","recursively-search","regex","ripgrep","rust","search"],"visibility":"public","forks":2304,"open_issues":88,"watchers":57154,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/pulls/1058","html_url":"https://github.com/BurntSushi/ripgrep/pull/1058","diff_url":"https://github.com/BurntSushi/ripgrep/pull/1058.diff","patch_url":"https://github.com/BurntSushi/ripgrep/pull/1058.patch","merged_at":null},"body":"This upgrades the minimum required version of Rust to 1.29 in order to fix #916 (Zombie processes cause `rg --files` to hang in `/proc`).\r\n\r\nI have manually confirmed that the bug is fixed when compiling ripgrep with 1.29.\r\n\r\nIt's probably better to merge this just before the next release in order for the current Rust version to still be in present in the README(?).\r\n\r\nSee also:\r\n- Rust compiler bug ticket: https://github.com/rust-lang/rust/issues/50619\r\n- Rust compiler PR with the fix: https://github.com/rust-lang/rust/pull/50630\r\n\r\ncloses #916","reactions":{"url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1058/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/1058/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":2099442771,"node_id":"MDExOkNsb3NlZEV2ZW50MjA5OTQ0Mjc3MQ==","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/2099442771","actor":{"login":"BurntSushi","id":456674,"node_id":"MDQ6VXNlcjQ1NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/456674?v=4","gravatar_id":"","url":"https://api.github.com/users/BurntSushi","html_url":"https://github.com/BurntSushi","followers_url":"https://api.github.com/users/BurntSushi/followers","following_url":"https://api.github.com/users/BurntSushi/following{/other_user}","gists_url":"https://api.github.com/users/BurntSushi/gists{/gist_id}","starred_url":"https://api.github.com/users/BurntSushi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BurntSushi/subscriptions","organizations_url":"https://api.github.com/users/BurntSushi/orgs","repos_url":"https://api.github.com/users/BurntSushi/repos","events_url":"https://api.github.com/users/BurntSushi/events{/privacy}","received_events_url":"https://api.github.com/users/BurntSushi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"386dd2806d3411834b7666db7fc7d7bd3910ce6c","commit_url":"https://api.github.com/repos/BurntSushi/ripgrep/commits/386dd2806d3411834b7666db7fc7d7bd3910ce6c","created_at":"2019-01-27T18:15:53Z","state_reason":null,"performed_via_github_app":null},{"id":8122531450,"node_id":"REFE_lADOAzJbyc4TL4EjzwAAAAHkI_56","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/8122531450","actor":{"login":"tavianator","id":1692591,"node_id":"MDQ6VXNlcjE2OTI1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1692591?v=4","gravatar_id":"","url":"https://api.github.com/users/tavianator","html_url":"https://github.com/tavianator","followers_url":"https://api.github.com/users/tavianator/followers","following_url":"https://api.github.com/users/tavianator/following{/other_user}","gists_url":"https://api.github.com/users/tavianator/gists{/gist_id}","starred_url":"https://api.github.com/users/tavianator/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tavianator/subscriptions","organizations_url":"https://api.github.com/users/tavianator/orgs","repos_url":"https://api.github.com/users/tavianator/repos","events_url":"https://api.github.com/users/tavianator/events{/privacy}","received_events_url":"https://api.github.com/users/tavianator/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"ede2a24a9f2918cf60834c7e162a4d89acbe6216","commit_url":"https://api.github.com/repos/tavianator/ripgrep/commits/ede2a24a9f2918cf60834c7e162a4d89acbe6216","created_at":"2022-12-28T18:13:28Z","performed_via_github_app":null},{"id":13413906615,"node_id":"REFE_lADOAzJbyc4TL4EjzwAAAAMfh_i3","url":"https://api.github.com/repos/BurntSushi/ripgrep/issues/events/13413906615","actor":{"login":"kyagi","id":90729,"node_id":"MDQ6VXNlcjkwNzI5","avatar_url":"https://avatars.githubusercontent.com/u/90729?v=4","gravatar_id":"","url":"https://api.github.com/users/kyagi","html_url":"https://github.com/kyagi","followers_url":"https://api.github.com/users/kyagi/followers","following_url":"https://api.github.com/users/kyagi/following{/other_user}","gists_url":"https://api.github.com/users/kyagi/gists{/gist_id}","starred_url":"https://api.github.com/users/kyagi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kyagi/subscriptions","organizations_url":"https://api.github.com/users/kyagi/orgs","repos_url":"https://api.github.com/users/kyagi/repos","events_url":"https://api.github.com/users/kyagi/events{/privacy}","received_events_url":"https://api.github.com/users/kyagi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"386dd2806d3411834b7666db7fc7d7bd3910ce6c","commit_url":"https://api.github.com/repos/kyagi/ripgrep/commits/386dd2806d3411834b7666db7fc7d7bd3910ce6c","created_at":"2024-07-07T11:30:01Z","performed_via_github_app":null}]