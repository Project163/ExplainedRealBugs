{"url":"https://api.github.com/repos/google/gwtmockito/issues/33","repository_url":"https://api.github.com/repos/google/gwtmockito","labels_url":"https://api.github.com/repos/google/gwtmockito/issues/33/labels{/name}","comments_url":"https://api.github.com/repos/google/gwtmockito/issues/33/comments","events_url":"https://api.github.com/repos/google/gwtmockito/issues/33/events","html_url":"https://github.com/google/gwtmockito/issues/33","id":36330555,"node_id":"MDU6SXNzdWUzNjMzMDU1NQ==","number":33,"title":"ClassCastException: cannot be cast to com.google.gwt.dom.client.AnchorElement","user":{"login":"DKnight2014","id":7968897,"node_id":"MDQ6VXNlcjc5Njg4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/7968897?v=4","gravatar_id":"","url":"https://api.github.com/users/DKnight2014","html_url":"https://github.com/DKnight2014","followers_url":"https://api.github.com/users/DKnight2014/followers","following_url":"https://api.github.com/users/DKnight2014/following{/other_user}","gists_url":"https://api.github.com/users/DKnight2014/gists{/gist_id}","starred_url":"https://api.github.com/users/DKnight2014/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DKnight2014/subscriptions","organizations_url":"https://api.github.com/users/DKnight2014/orgs","repos_url":"https://api.github.com/users/DKnight2014/repos","events_url":"https://api.github.com/users/DKnight2014/events{/privacy}","received_events_url":"https://api.github.com/users/DKnight2014/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2014-06-23T20:57:58Z","updated_at":"2015-02-02T08:14:35Z","closed_at":"2014-07-18T15:03:38Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I am new to gwtmockito and I really like it. But here is an issue that caught me.\n\nA simplified class is like this\n// a class needs to be tested\npublic class MyClass {\n    Anchor obj;\n\n```\npublic MyClass(String userName) {\n        //this will fail with GwtMockito\n        obj= new Anchor();\n}\n```\n\n}\n\nthe class to test it is:\n//a test class\n@RunWith(GwtMockitoTestRunner.class)\npublic class MyClass_Test {\n    MyClass app;\n\n```\n@Before\npublic void setUp() {\n    //this will fail with GwtMockito\n    app = new MyClass(\"\");\n}\n\n@Test\npublic void test1() {\n    Assert.assertTrue(true);\n}\n```\n\n}\n\nhowever, when I run this test code, I get an error like this\n\njava.lang.ClassCastException: com.google.gwt.user.client.Element$$EnhancerByMockitoWithCGLIB$$86942b16 cannot be cast to com.google.gwt.dom.client.AnchorElement\n    at com.google.gwt.dom.client.AnchorElement.as(AnchorElement.java:34)\n    at com.google.gwt.user.client.ui.Anchor.getAnchorElement(Anchor.java:564)\n    at com.google.gwt.user.client.ui.Anchor.<init>(Anchor.java:119)\n    at com.google.gwt.user.client.ui.Anchor.<init>(Anchor.java:104)\n    at com.sample.failed.MyClass.<init>(MyClass.java:13)\n    at com.sample.failed.MyClass_Test.setUp(MyClass_Test.java:22)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)\n    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:309)\n    at com.google.gwtmockito.GwtMockitoTestRunner.run(GwtMockitoTestRunner.java:284)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)\n    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)\n\nI am using gwtmockito 1.1.3 and gwt v2.5.1 with eclipse Kepler v4.3 (x64). GWT doesn't seem to like \"new Anchor()\" with gwtmockito. can you help me on this??\n\nPS, it seems to make the code quoted automatically but improperly, not sure how to make it right, sorry about that.\n\nthanks,\n\nEdit:\nThis seems very common with GWT classes. Here is another example:\njava.lang.ClassCastException: com.google.gwt.user.client.Element$$EnhancerByMockitoWithCGLIB$$44131348 cannot be cast to com.google.gwt.dom.client.SelectElement\n    at com.google.gwt.user.client.ui.ListBox.getSelectElement(ListBox.java:600)\n    at com.google.gwt.user.client.ui.ListBox.insertItem(ListBox.java:346)\n    at com.google.gwt.user.client.ui.ListBox.insertItem(ListBox.java:328)\n    at com.google.gwt.user.client.ui.ListBox.insertItem(ListBox.java:295)\n    at com.google.gwt.user.client.ui.ListBox.addItem(ListBox.java:173)\n\naddItem is called by MyClass, but when testing MyClass, this error occurs. can't GwtMockito handle casting within GWT classes?\n\nPlease help.... this makes me desperate.\n","closed_by":{"login":"DKnight2014","id":7968897,"node_id":"MDQ6VXNlcjc5Njg4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/7968897?v=4","gravatar_id":"","url":"https://api.github.com/users/DKnight2014","html_url":"https://github.com/DKnight2014","followers_url":"https://api.github.com/users/DKnight2014/followers","following_url":"https://api.github.com/users/DKnight2014/following{/other_user}","gists_url":"https://api.github.com/users/DKnight2014/gists{/gist_id}","starred_url":"https://api.github.com/users/DKnight2014/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DKnight2014/subscriptions","organizations_url":"https://api.github.com/users/DKnight2014/orgs","repos_url":"https://api.github.com/users/DKnight2014/repos","events_url":"https://api.github.com/users/DKnight2014/events{/privacy}","received_events_url":"https://api.github.com/users/DKnight2014/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/google/gwtmockito/issues/33/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/google/gwtmockito/issues/33/timeline","performed_via_github_app":null,"state_reason":"completed"}