[{"url":"https://api.github.com/repos/google/gwtmockito/issues/comments/156780451","html_url":"https://github.com/google/gwtmockito/issues/57#issuecomment-156780451","issue_url":"https://api.github.com/repos/google/gwtmockito/issues/57","id":156780451,"node_id":"MDEyOklzc3VlQ29tbWVudDE1Njc4MDQ1MQ==","user":{"login":"ekuefler","id":666477,"node_id":"MDQ6VXNlcjY2NjQ3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/666477?v=4","gravatar_id":"","url":"https://api.github.com/users/ekuefler","html_url":"https://github.com/ekuefler","followers_url":"https://api.github.com/users/ekuefler/followers","following_url":"https://api.github.com/users/ekuefler/following{/other_user}","gists_url":"https://api.github.com/users/ekuefler/gists{/gist_id}","starred_url":"https://api.github.com/users/ekuefler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ekuefler/subscriptions","organizations_url":"https://api.github.com/users/ekuefler/orgs","repos_url":"https://api.github.com/users/ekuefler/repos","events_url":"https://api.github.com/users/ekuefler/events{/privacy}","received_events_url":"https://api.github.com/users/ekuefler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-11-15T04:57:11Z","updated_at":"2015-11-15T04:57:11Z","body":"So to be clear, your proposed resolution is to replace `getParentClassloader` in `GwtMockitoTestRunner` so that it returns `Thread.currentThread().getContextClassLoader()` instead of `ClassLoader.getSystemClassLoader()`?\n\nThis seems to me like it's probably the right thing to do; I'm trying to think if it might have any negative side effects. If I understand correctly, IDEA's test runner presumably works by starting a thread, setting that thread's context classloader to something magical, then executing the test on that thread. By having the parent classloader be the system classloader, we're basically bypassing whatever IDEA had set.\n\nIn most cases the context classloader will be the same as the system classloader, but in the cases where it's not it's because some tool quite explicitly wanted to use a different classloader for that thread. So it's always going to be better to respect that preference than to force the system classloader.\n\nDoes that reasoning sound correct? If so and no one objects I'll make the change. If this is blocking you, you can create your own subclass of `GwtMockitoTestRunner` that overrides the parent classloader in the meantime.\n\nThanks for tracking down the problem, these classloader bugs are always super tricky.\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/google/gwtmockito/issues/comments/156780451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ekuefler","id":666477,"node_id":"MDQ6VXNlcjY2NjQ3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/666477?v=4","gravatar_id":"","url":"https://api.github.com/users/ekuefler","html_url":"https://github.com/ekuefler","followers_url":"https://api.github.com/users/ekuefler/followers","following_url":"https://api.github.com/users/ekuefler/following{/other_user}","gists_url":"https://api.github.com/users/ekuefler/gists{/gist_id}","starred_url":"https://api.github.com/users/ekuefler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ekuefler/subscriptions","organizations_url":"https://api.github.com/users/ekuefler/orgs","repos_url":"https://api.github.com/users/ekuefler/repos","events_url":"https://api.github.com/users/ekuefler/events{/privacy}","received_events_url":"https://api.github.com/users/ekuefler/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/google/gwtmockito/issues/comments/156801568","html_url":"https://github.com/google/gwtmockito/issues/57#issuecomment-156801568","issue_url":"https://api.github.com/repos/google/gwtmockito/issues/57","id":156801568,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NjgwMTU2OA==","user":{"login":"tazle","id":681203,"node_id":"MDQ6VXNlcjY4MTIwMw==","avatar_url":"https://avatars.githubusercontent.com/u/681203?v=4","gravatar_id":"","url":"https://api.github.com/users/tazle","html_url":"https://github.com/tazle","followers_url":"https://api.github.com/users/tazle/followers","following_url":"https://api.github.com/users/tazle/following{/other_user}","gists_url":"https://api.github.com/users/tazle/gists{/gist_id}","starred_url":"https://api.github.com/users/tazle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tazle/subscriptions","organizations_url":"https://api.github.com/users/tazle/orgs","repos_url":"https://api.github.com/users/tazle/repos","events_url":"https://api.github.com/users/tazle/events{/privacy}","received_events_url":"https://api.github.com/users/tazle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-11-15T10:55:35Z","updated_at":"2015-11-27T15:58:08Z","body":"Yes, what I did for the version I'm now using in IDEA and with plain Maven is exactly as you described. \n\nAnd yes, the reasoning sounds correct as well. If you are not interested in resources tied to a particular class, the thread context classloader is always the best bet.\n\nI thought creating a custom subclass would not be all that simple in 1.1.5, but looking at it again now, it seems I might be mistaken. I'll probably try that on Monday.\n\nEdit:\nTried to work around this by subclassing in 1.1.5. Overriding `getParentClassloader()` isn't enough, since the parent class loder isn't explicitly added to the classpath of the ClassPool in 1.1.5. master or 1.1.6 fixes this.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/google/gwtmockito/issues/comments/156801568/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tazle","id":681203,"node_id":"MDQ6VXNlcjY4MTIwMw==","avatar_url":"https://avatars.githubusercontent.com/u/681203?v=4","gravatar_id":"","url":"https://api.github.com/users/tazle","html_url":"https://github.com/tazle","followers_url":"https://api.github.com/users/tazle/followers","following_url":"https://api.github.com/users/tazle/following{/other_user}","gists_url":"https://api.github.com/users/tazle/gists{/gist_id}","starred_url":"https://api.github.com/users/tazle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tazle/subscriptions","organizations_url":"https://api.github.com/users/tazle/orgs","repos_url":"https://api.github.com/users/tazle/repos","events_url":"https://api.github.com/users/tazle/events{/privacy}","received_events_url":"https://api.github.com/users/tazle/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/google/gwtmockito/issues/comments/156806590","html_url":"https://github.com/google/gwtmockito/issues/57#issuecomment-156806590","issue_url":"https://api.github.com/repos/google/gwtmockito/issues/57","id":156806590,"node_id":"MDEyOklzc3VlQ29tbWVudDE1NjgwNjU5MA==","user":{"login":"tbroyer","id":173813,"node_id":"MDQ6VXNlcjE3MzgxMw==","avatar_url":"https://avatars.githubusercontent.com/u/173813?v=4","gravatar_id":"","url":"https://api.github.com/users/tbroyer","html_url":"https://github.com/tbroyer","followers_url":"https://api.github.com/users/tbroyer/followers","following_url":"https://api.github.com/users/tbroyer/following{/other_user}","gists_url":"https://api.github.com/users/tbroyer/gists{/gist_id}","starred_url":"https://api.github.com/users/tbroyer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tbroyer/subscriptions","organizations_url":"https://api.github.com/users/tbroyer/orgs","repos_url":"https://api.github.com/users/tbroyer/repos","events_url":"https://api.github.com/users/tbroyer/events{/privacy}","received_events_url":"https://api.github.com/users/tbroyer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-11-15T11:45:29Z","updated_at":"2015-11-15T11:45:29Z","body":"> If I understand correctly, IDEA's test runner presumably works by starting a thread, setting that thread's context classloader to something magical, then executing the test on that thread.\n\nOr more likely just setting the current thread's context classloader to some kind of `URLClassLoader` to simply isolate your project's classpath from IDEA test runner's one.\nMaven uses some similar techniques under certain conditions so it can happen there too: https://maven.apache.org/surefire/maven-surefire-plugin/examples/class-loading.html\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/google/gwtmockito/issues/comments/156806590/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tbroyer","id":173813,"node_id":"MDQ6VXNlcjE3MzgxMw==","avatar_url":"https://avatars.githubusercontent.com/u/173813?v=4","gravatar_id":"","url":"https://api.github.com/users/tbroyer","html_url":"https://github.com/tbroyer","followers_url":"https://api.github.com/users/tbroyer/followers","following_url":"https://api.github.com/users/tbroyer/following{/other_user}","gists_url":"https://api.github.com/users/tbroyer/gists{/gist_id}","starred_url":"https://api.github.com/users/tbroyer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tbroyer/subscriptions","organizations_url":"https://api.github.com/users/tbroyer/orgs","repos_url":"https://api.github.com/users/tbroyer/repos","events_url":"https://api.github.com/users/tbroyer/events{/privacy}","received_events_url":"https://api.github.com/users/tbroyer/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":471343733,"node_id":"MDExOkNsb3NlZEV2ZW50NDcxMzQzNzMz","url":"https://api.github.com/repos/google/gwtmockito/issues/events/471343733","actor":{"login":"ekuefler","id":666477,"node_id":"MDQ6VXNlcjY2NjQ3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/666477?v=4","gravatar_id":"","url":"https://api.github.com/users/ekuefler","html_url":"https://github.com/ekuefler","followers_url":"https://api.github.com/users/ekuefler/followers","following_url":"https://api.github.com/users/ekuefler/following{/other_user}","gists_url":"https://api.github.com/users/ekuefler/gists{/gist_id}","starred_url":"https://api.github.com/users/ekuefler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ekuefler/subscriptions","organizations_url":"https://api.github.com/users/ekuefler/orgs","repos_url":"https://api.github.com/users/ekuefler/repos","events_url":"https://api.github.com/users/ekuefler/events{/privacy}","received_events_url":"https://api.github.com/users/ekuefler/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"d1ce2f718b65582cecde0deb1707feefedfbb40c","commit_url":"https://api.github.com/repos/google/gwtmockito/commits/d1ce2f718b65582cecde0deb1707feefedfbb40c","created_at":"2015-11-22T01:18:00Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/google/gwtmockito/issues/comments/158698754","html_url":"https://github.com/google/gwtmockito/issues/57#issuecomment-158698754","issue_url":"https://api.github.com/repos/google/gwtmockito/issues/57","id":158698754,"node_id":"MDEyOklzc3VlQ29tbWVudDE1ODY5ODc1NA==","user":{"login":"ekuefler","id":666477,"node_id":"MDQ6VXNlcjY2NjQ3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/666477?v=4","gravatar_id":"","url":"https://api.github.com/users/ekuefler","html_url":"https://github.com/ekuefler","followers_url":"https://api.github.com/users/ekuefler/followers","following_url":"https://api.github.com/users/ekuefler/following{/other_user}","gists_url":"https://api.github.com/users/ekuefler/gists{/gist_id}","starred_url":"https://api.github.com/users/ekuefler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ekuefler/subscriptions","organizations_url":"https://api.github.com/users/ekuefler/orgs","repos_url":"https://api.github.com/users/ekuefler/repos","events_url":"https://api.github.com/users/ekuefler/events{/privacy}","received_events_url":"https://api.github.com/users/ekuefler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-11-22T01:29:29Z","updated_at":"2015-11-22T01:29:29Z","body":"Alright, I've made the change and pushed a new snapshot to Maven. Been a while since the last release, so I'll release 1.1.6 in a week or so if no one reports any problems\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/google/gwtmockito/issues/comments/158698754/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ekuefler","id":666477,"node_id":"MDQ6VXNlcjY2NjQ3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/666477?v=4","gravatar_id":"","url":"https://api.github.com/users/ekuefler","html_url":"https://github.com/ekuefler","followers_url":"https://api.github.com/users/ekuefler/followers","following_url":"https://api.github.com/users/ekuefler/following{/other_user}","gists_url":"https://api.github.com/users/ekuefler/gists{/gist_id}","starred_url":"https://api.github.com/users/ekuefler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ekuefler/subscriptions","organizations_url":"https://api.github.com/users/ekuefler/orgs","repos_url":"https://api.github.com/users/ekuefler/repos","events_url":"https://api.github.com/users/ekuefler/events{/privacy}","received_events_url":"https://api.github.com/users/ekuefler/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/google/gwtmockito/issues/comments/173133870","html_url":"https://github.com/google/gwtmockito/issues/57#issuecomment-173133870","issue_url":"https://api.github.com/repos/google/gwtmockito/issues/57","id":173133870,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MzEzMzg3MA==","user":{"login":"tazle","id":681203,"node_id":"MDQ6VXNlcjY4MTIwMw==","avatar_url":"https://avatars.githubusercontent.com/u/681203?v=4","gravatar_id":"","url":"https://api.github.com/users/tazle","html_url":"https://github.com/tazle","followers_url":"https://api.github.com/users/tazle/followers","following_url":"https://api.github.com/users/tazle/following{/other_user}","gists_url":"https://api.github.com/users/tazle/gists{/gist_id}","starred_url":"https://api.github.com/users/tazle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tazle/subscriptions","organizations_url":"https://api.github.com/users/tazle/orgs","repos_url":"https://api.github.com/users/tazle/repos","events_url":"https://api.github.com/users/tazle/events{/privacy}","received_events_url":"https://api.github.com/users/tazle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-20T08:58:19Z","updated_at":"2016-01-20T08:58:19Z","body":"Still no 1.1.6 release.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/google/gwtmockito/issues/comments/173133870/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tazle","id":681203,"node_id":"MDQ6VXNlcjY4MTIwMw==","avatar_url":"https://avatars.githubusercontent.com/u/681203?v=4","gravatar_id":"","url":"https://api.github.com/users/tazle","html_url":"https://github.com/tazle","followers_url":"https://api.github.com/users/tazle/followers","following_url":"https://api.github.com/users/tazle/following{/other_user}","gists_url":"https://api.github.com/users/tazle/gists{/gist_id}","starred_url":"https://api.github.com/users/tazle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tazle/subscriptions","organizations_url":"https://api.github.com/users/tazle/orgs","repos_url":"https://api.github.com/users/tazle/repos","events_url":"https://api.github.com/users/tazle/events{/privacy}","received_events_url":"https://api.github.com/users/tazle/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/google/gwtmockito/issues/comments/174891487","html_url":"https://github.com/google/gwtmockito/issues/57#issuecomment-174891487","issue_url":"https://api.github.com/repos/google/gwtmockito/issues/57","id":174891487,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NDg5MTQ4Nw==","user":{"login":"ekuefler","id":666477,"node_id":"MDQ6VXNlcjY2NjQ3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/666477?v=4","gravatar_id":"","url":"https://api.github.com/users/ekuefler","html_url":"https://github.com/ekuefler","followers_url":"https://api.github.com/users/ekuefler/followers","following_url":"https://api.github.com/users/ekuefler/following{/other_user}","gists_url":"https://api.github.com/users/ekuefler/gists{/gist_id}","starred_url":"https://api.github.com/users/ekuefler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ekuefler/subscriptions","organizations_url":"https://api.github.com/users/ekuefler/orgs","repos_url":"https://api.github.com/users/ekuefler/repos","events_url":"https://api.github.com/users/ekuefler/events{/privacy}","received_events_url":"https://api.github.com/users/ekuefler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-26T08:41:14Z","updated_at":"2016-01-26T08:41:14Z","body":"Apologies for the long delay. 1.1.6 has been released and should now be available on Maven Central.\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/google/gwtmockito/issues/comments/174891487/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ekuefler","id":666477,"node_id":"MDQ6VXNlcjY2NjQ3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/666477?v=4","gravatar_id":"","url":"https://api.github.com/users/ekuefler","html_url":"https://github.com/ekuefler","followers_url":"https://api.github.com/users/ekuefler/followers","following_url":"https://api.github.com/users/ekuefler/following{/other_user}","gists_url":"https://api.github.com/users/ekuefler/gists{/gist_id}","starred_url":"https://api.github.com/users/ekuefler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ekuefler/subscriptions","organizations_url":"https://api.github.com/users/ekuefler/orgs","repos_url":"https://api.github.com/users/ekuefler/repos","events_url":"https://api.github.com/users/ekuefler/events{/privacy}","received_events_url":"https://api.github.com/users/ekuefler/received_events","type":"User","user_view_type":"public","site_admin":false}}]