diff --git a/src/main/java/com/helger/jcodemodel/AbstractCodeWriter.java b/src/main/java/com/helger/jcodemodel/AbstractCodeWriter.java
index 270c9454..e82014ac 100644
--- a/src/main/java/com/helger/jcodemodel/AbstractCodeWriter.java
+++ b/src/main/java/com/helger/jcodemodel/AbstractCodeWriter.java
@@ -40,6 +40,7 @@
  */
 package com.helger.jcodemodel;
 
+import java.io.BufferedWriter;
 import java.io.Closeable;
 import java.io.IOException;
 import java.io.OutputStream;
@@ -52,6 +53,7 @@ import java.util.BitSet;
 import javax.annotation.Nonnull;
 import javax.annotation.Nullable;
 
+import com.helger.jcodemodel.util.JCValueEnforcer;
 import com.helger.jcodemodel.util.UnicodeEscapeWriter;
 
 /**
@@ -101,10 +103,38 @@ public abstract class AbstractCodeWriter implements Closeable
    * Encoding to be used by the writer. Null means platform specific encoding.
    */
   private final Charset m_aEncoding;
+  private final String m_sNewLine;
 
+  @Nonnull
+  protected static String getDefaultNewLine ()
+  {
+    String ret = null;
+    try
+    {
+      ret = System.getProperty ("line.separator");
+    }
+    catch (final Exception ex)
+    {
+      // Fall through
+    }
+
+    if (ret == null || ret.length () == 0)
+      ret = "\n";
+    return ret;
+  }
+
+  @Deprecated
   protected AbstractCodeWriter (@Nullable final Charset aEncoding)
   {
+    this (aEncoding, getDefaultNewLine ());
+  }
+
+  protected AbstractCodeWriter (@Nullable final Charset aEncoding, @Nonnull final String sNewLine)
+  {
+    JCValueEnforcer.notNull (sNewLine, "NewLine");
+
     m_aEncoding = aEncoding;
+    m_sNewLine = sNewLine;
   }
 
   @Nullable
@@ -113,6 +143,16 @@ public abstract class AbstractCodeWriter implements Closeable
     return m_aEncoding;
   }
 
+  /**
+   * @return The new line string as provided in the constructor. Defaults to
+   *         <code>System.getProperty ("line.separator")</code>
+   */
+  @Nonnull
+  public String getNewLine ()
+  {
+    return m_sNewLine;
+  }
+
   /**
    * Called by CodeModel to store the specified file. The callee must allocate a
    * storage to store the specified file. <br>
@@ -139,7 +179,7 @@ public abstract class AbstractCodeWriter implements Closeable
    *
    * @param pkg
    *        The package of the file to be written.
-   * @param fileName
+   * @param sFilename
    *        File name without the path. Something like "Foo.java" or
    *        "Bar.properties"
    * @return Writer to write to
@@ -147,21 +187,25 @@ public abstract class AbstractCodeWriter implements Closeable
    *         On IO error
    */
   @Nonnull
-  public Writer openSource (@Nonnull final JPackage pkg, @Nonnull final String fileName) throws IOException
+  public SourcePrintWriter openSource (@Nonnull final JPackage pkg, @Nonnull final String sFilename) throws IOException
   {
-    final OutputStream os = openBinary (pkg, fileName);
+    final OutputStream os = openBinary (pkg, sFilename);
     final OutputStreamWriter bw = m_aEncoding != null ? new OutputStreamWriter (os, m_aEncoding)
                                                       : new OutputStreamWriter (os);
 
     // create writer
+    Writer aWriter;
     try
     {
-      return new JavaUnicodeEscapeWriter (bw);
+      aWriter = new JavaUnicodeEscapeWriter (bw);
     }
     catch (final Throwable t)
     {
-      return new UnicodeEscapeWriter (bw);
+      aWriter = new UnicodeEscapeWriter (bw);
     }
+
+    // Ensure result is buffered
+    return new SourcePrintWriter (new BufferedWriter (aWriter), m_sNewLine);
   }
 
   /**
diff --git a/src/main/java/com/helger/jcodemodel/JCodeModel.java b/src/main/java/com/helger/jcodemodel/JCodeModel.java
index 1af55834..df79fffa 100644
--- a/src/main/java/com/helger/jcodemodel/JCodeModel.java
+++ b/src/main/java/com/helger/jcodemodel/JCodeModel.java
@@ -40,21 +40,17 @@
  */
 package com.helger.jcodemodel;
 
-import com.helger.jcodemodel.meta.CodeModelBuildingException;
-import com.helger.jcodemodel.meta.ErrorTypeFound;
-import com.helger.jcodemodel.meta.JCodeModelJavaxLangModelAdapter;
-import com.helger.jcodemodel.util.JCSecureLoader;
-import com.helger.jcodemodel.writer.FileCodeWriter;
-import com.helger.jcodemodel.writer.ProgressCodeWriter;
 import java.io.File;
 import java.io.IOException;
 import java.io.PrintStream;
+import java.nio.charset.Charset;
 import java.util.ArrayList;
 import java.util.Collections;
 import java.util.HashMap;
 import java.util.Iterator;
 import java.util.List;
 import java.util.Map;
+
 import javax.annotation.Nonnegative;
 import javax.annotation.Nonnull;
 import javax.annotation.Nullable;
@@ -62,6 +58,14 @@ import javax.annotation.concurrent.NotThreadSafe;
 import javax.lang.model.element.TypeElement;
 import javax.lang.model.util.Elements;
 
+import com.helger.jcodemodel.meta.CodeModelBuildingException;
+import com.helger.jcodemodel.meta.ErrorTypeFound;
+import com.helger.jcodemodel.meta.JCodeModelJavaxLangModelAdapter;
+import com.helger.jcodemodel.util.JCSecureLoader;
+import com.helger.jcodemodel.util.JCValueEnforcer;
+import com.helger.jcodemodel.writer.FileCodeWriter;
+import com.helger.jcodemodel.writer.ProgressCodeWriter;
+
 /**
  * Root of the code DOM.
  * <p>
@@ -148,18 +152,7 @@ public final class JCodeModel
   public final JPrimitiveType SHORT = new JPrimitiveType (this, "short", Short.class, true);
   public final JPrimitiveType VOID = new JPrimitiveType (this, "void", Void.class, false);
 
-  /**
-   * If the flag is true, we will consider two classes "Foo" and "foo" as a
-   * collision.
-   */
-  protected final boolean isCaseSensitiveFileSystem = getFileSystemCaseSensitivity ();
-
-  /**
-   * Cached for {@link #wildcard()}.
-   */
-  private AbstractJClass m_aWildcard;
-
-  protected boolean getFileSystemCaseSensitivity ()
+  protected static boolean getFileSystemCaseSensitivity ()
   {
     try
     {
@@ -182,6 +175,23 @@ public final class JCodeModel
     return File.separatorChar == '/';
   }
 
+  /**
+   * If the flag is true, we will consider two classes "Foo" and "foo" as a
+   * collision.
+   */
+  protected final boolean isCaseSensitiveFileSystem = getFileSystemCaseSensitivity ();
+
+  /**
+   * Cached for {@link #wildcard()}.
+   */
+  private AbstractJClass m_aWildcard;
+
+  /** The charset used for building the output - null means system default */
+  private Charset m_aBuildingCharset = null;
+
+  /** The newline string to be used. Defaults to system default */
+  private String m_sBuildingNewLine = AbstractCodeWriter.getDefaultNewLine ();
+
   public JCodeModel ()
   {}
 
@@ -363,8 +373,7 @@ public final class JCodeModel
    * @see JErrorClass
    */
   @Nonnull
-  public JErrorClass errorClass (
-    @Nonnull final String sMessage)
+  public JErrorClass errorClass (@Nonnull final String sMessage)
   {
     return errorClass (sMessage, null);
   }
@@ -390,7 +399,8 @@ public final class JCodeModel
    * AbstractJType#isError} method to check for error-types before actually
    * using it's methods.
    *
-   * @param sName name of missing class if it is known
+   * @param sName
+   *        name of missing class if it is known
    * @param sMessage
    *        some free form text message to identify source of error
    * @return New {@link JErrorClass}
@@ -398,9 +408,7 @@ public final class JCodeModel
    * @see JErrorClass
    */
   @Nonnull
-  public JErrorClass errorClass (
-    @Nonnull final String sMessage,
-    @Nullable final String sName)
+  public JErrorClass errorClass (@Nonnull final String sMessage, @Nullable final String sName)
   {
     return new JErrorClass (this, sMessage, sName);
   }
@@ -468,9 +476,58 @@ public final class JCodeModel
     return anonymousClass (ref (aBaseClass));
   }
 
+  /**
+   * @return The default charset used for building. <code>null</code> means
+   *         system default.
+   */
+  @Nullable
+  public Charset getBuildingCharset ()
+  {
+    return m_aBuildingCharset;
+  }
+
+  /**
+   * Set the charset to be used for emitting files.
+   * 
+   * @param aCharset
+   *        The charset to be used. May be <code>null</code> to indicate the use
+   *        of the system default.
+   * @return this for chaining
+   */
+  @Nonnull
+  public JCodeModel setBuildingCharset (@Nullable final Charset aCharset)
+  {
+    m_aBuildingCharset = aCharset;
+    return this;
+  }
+
+  /**
+   * @return The newline string to be used. Defaults to system default
+   */
+  public String getBuildingNewLine ()
+  {
+    return m_sBuildingNewLine;
+  }
+
+  /**
+   * Set the new line string to be used for emitting source files.
+   *
+   * @param sNewLine
+   *        The new line string to be used. May neither be <code>null</code> nor
+   *        empty.
+   * @return this for chaining
+   */
+  @Nonnull
+  public JCodeModel setBuildingNewLine (@Nonnull final String sNewLine)
+  {
+    JCValueEnforcer.notEmpty (sNewLine, "NewLine");
+    m_sBuildingNewLine = sNewLine;
+    return this;
+  }
+
   /**
    * Generates Java source code. A convenience method for
-   * <code>build(destDir,destDir,System.out)</code>.
+   * <code>build(destDir,destDir,status)</code>.
    *
    * @param destDir
    *        source files and resources are generated into this directory.
@@ -502,8 +559,8 @@ public final class JCodeModel
                      @Nonnull final File resourceDir,
                      @Nullable final PrintStream status) throws IOException
   {
-    AbstractCodeWriter res = new FileCodeWriter (resourceDir);
-    AbstractCodeWriter src = new FileCodeWriter (srcDir);
+    AbstractCodeWriter res = new FileCodeWriter (resourceDir, m_aBuildingCharset, m_sBuildingNewLine);
+    AbstractCodeWriter src = new FileCodeWriter (srcDir, m_aBuildingCharset, m_sBuildingNewLine);
     if (status != null)
     {
       src = new ProgressCodeWriter (src, status);
diff --git a/src/main/java/com/helger/jcodemodel/JFormatter.java b/src/main/java/com/helger/jcodemodel/JFormatter.java
index 1d04100d..30941474 100644
--- a/src/main/java/com/helger/jcodemodel/JFormatter.java
+++ b/src/main/java/com/helger/jcodemodel/JFormatter.java
@@ -334,9 +334,9 @@ public class JFormatter implements Closeable
   private final String m_sIndentSpace;
 
   /**
-   * Stream associated with this JFormatter
+   * Writer associated with this {@link JFormatter}
    */
-  private final PrintWriter m_aPW;
+  private final SourcePrintWriter m_aPW;
 
   private char m_cLastChar = 0;
   private boolean m_bAtBeginningOfLine = true;
@@ -348,6 +348,17 @@ public class JFormatter implements Closeable
    */
   private boolean m_bContainsErrorTypes;
 
+  /**
+   * Creates a formatter with default incremental indentations of four spaces.
+   *
+   * @param aPW
+   *        The {@link PrintWriter} to use
+   */
+  public JFormatter (@Nonnull final SourcePrintWriter aPW)
+  {
+    this (aPW, DEFAULT_INDENT_SPACE);
+  }
+
   /**
    * Creates a JFormatter.
    *
@@ -358,7 +369,7 @@ public class JFormatter implements Closeable
    *        Incremental indentation string, similar to tab value. May not be
    *        <code>null</code>.
    */
-  public JFormatter (@Nonnull final PrintWriter aPW, @Nonnull final String sIndentSpace)
+  public JFormatter (@Nonnull final SourcePrintWriter aPW, @Nonnull final String sIndentSpace)
   {
     JCValueEnforcer.notNull (aPW, "PrintWriter");
     JCValueEnforcer.notNull (sIndentSpace, "IndentSpace");
@@ -370,12 +381,12 @@ public class JFormatter implements Closeable
   /**
    * Creates a formatter with default incremental indentations of four spaces.
    *
-   * @param aPW
-   *        The {@link PrintWriter} to use
+   * @param aWriter
+   *        The {@link Writer} to be wrapped in a {@link PrintWriter}
    */
-  public JFormatter (@Nonnull final PrintWriter aPW)
+  public JFormatter (@Nonnull final Writer aWriter)
   {
-    this (aPW, DEFAULT_INDENT_SPACE);
+    this (aWriter, DEFAULT_INDENT_SPACE);
   }
 
   /**
@@ -384,9 +395,22 @@ public class JFormatter implements Closeable
    * @param aWriter
    *        The {@link Writer} to be wrapped in a {@link PrintWriter}
    */
-  public JFormatter (@Nonnull final Writer aWriter)
+  public JFormatter (@Nonnull final Writer aWriter, @Nonnull final String sIndentSpace)
+  {
+    this (aWriter, sIndentSpace, System.getProperty ("line.separator"));
+  }
+
+  /**
+   * Creates a formatter with default incremental indentations of four spaces.
+   *
+   * @param aWriter
+   *        The {@link Writer} to be wrapped in a {@link PrintWriter}
+   */
+  public JFormatter (@Nonnull final Writer aWriter, @Nonnull final String sIndentSpace, @Nonnull final String sNewLine)
   {
-    this (aWriter instanceof PrintWriter ? (PrintWriter) aWriter : new PrintWriter (aWriter));
+    this (aWriter instanceof SourcePrintWriter ? (SourcePrintWriter) aWriter
+                                               : new SourcePrintWriter (aWriter, sNewLine),
+          sIndentSpace);
   }
 
   /**
diff --git a/src/main/java/com/helger/jcodemodel/JMods.java b/src/main/java/com/helger/jcodemodel/JMods.java
index 460e1912..6ec93427 100644
--- a/src/main/java/com/helger/jcodemodel/JMods.java
+++ b/src/main/java/com/helger/jcodemodel/JMods.java
@@ -40,7 +40,6 @@
  */
 package com.helger.jcodemodel;
 
-import java.io.PrintWriter;
 import java.io.StringWriter;
 
 import javax.annotation.Nonnull;
@@ -243,9 +242,9 @@ public class JMods implements IJGenerable
   @Override
   public String toString ()
   {
-    final StringWriter s = new StringWriter ();
-    final JFormatter f = new JFormatter (new PrintWriter (s));
+    final StringWriter aWriter = new StringWriter ();
+    final JFormatter f = new JFormatter (aWriter);
     this.generate (f);
-    return s.toString ();
+    return aWriter.toString ();
   }
 }
diff --git a/src/main/java/com/helger/jcodemodel/JPackage.java b/src/main/java/com/helger/jcodemodel/JPackage.java
index a44cfea5..4d094194 100644
--- a/src/main/java/com/helger/jcodemodel/JPackage.java
+++ b/src/main/java/com/helger/jcodemodel/JPackage.java
@@ -41,12 +41,9 @@
 package com.helger.jcodemodel;
 
 import java.io.BufferedOutputStream;
-import java.io.BufferedWriter;
 import java.io.File;
 import java.io.IOException;
 import java.io.OutputStream;
-import java.io.PrintWriter;
-import java.io.Writer;
 import java.lang.annotation.Annotation;
 import java.util.ArrayList;
 import java.util.Collection;
@@ -650,7 +647,7 @@ public class JPackage implements IJDeclaration, IJGenerable, IJClassContainer <J
   private JFormatter _createJavaSourceFileWriter (@Nonnull final AbstractCodeWriter src,
                                                   @Nonnull final String className) throws IOException
   {
-    final Writer bw = new BufferedWriter (src.openSource (this, className + ".java"));
-    return new JFormatter (new PrintWriter (bw));
+    final SourcePrintWriter aWriter = src.openSource (this, className + ".java");
+    return new JFormatter (aWriter);
   }
 }
diff --git a/src/main/java/com/helger/jcodemodel/SourcePrintWriter.java b/src/main/java/com/helger/jcodemodel/SourcePrintWriter.java
new file mode 100644
index 00000000..2bfe894f
--- /dev/null
+++ b/src/main/java/com/helger/jcodemodel/SourcePrintWriter.java
@@ -0,0 +1,88 @@
+package com.helger.jcodemodel;
+
+import java.io.FilterWriter;
+import java.io.IOException;
+import java.io.Writer;
+
+import javax.annotation.Nonnull;
+
+/**
+ * A special version of {@link java.io.PrintWriter} that has a customizable new
+ * line string.
+ *
+ * @author Philip Helger
+ */
+public final class SourcePrintWriter extends FilterWriter
+{
+  private final String m_sNewLine;
+
+  public SourcePrintWriter (@Nonnull final Writer aWrappedWriter, @Nonnull final String sNewLine)
+  {
+    super (aWrappedWriter);
+    m_sNewLine = sNewLine;
+  }
+
+  private void _handleException (@Nonnull final IOException ex, @Nonnull final String sSource)
+  {
+    System.err.println ("Error on Writer: " + sSource);
+    ex.printStackTrace ();
+  }
+
+  private void _write (final char c)
+  {
+    try
+    {
+      super.write (c);
+    }
+    catch (final IOException ex)
+    {
+      _handleException (ex, "write char");
+    }
+  }
+
+  private void _write (@Nonnull final String sStr)
+  {
+    try
+    {
+      super.write (sStr, 0, sStr.length ());
+    }
+    catch (final IOException ex)
+    {
+      _handleException (ex, "write String");
+    }
+  }
+
+  public void print (final char c)
+  {
+    _write (c);
+  }
+
+  public void print (@Nonnull final String sStr)
+  {
+    _write (sStr);
+  }
+
+  public void println ()
+  {
+    _write (m_sNewLine);
+  }
+
+  public void println (final String sStr)
+  {
+    _write (sStr);
+    _write (m_sNewLine);
+  }
+
+  @Override
+  public void close ()
+  {
+    try
+    {
+      super.close ();
+    }
+    catch (final IOException ex)
+    {
+      _handleException (ex, "close");
+    }
+  }
+}
diff --git a/src/main/java/com/helger/jcodemodel/writer/FileCodeWriter.java b/src/main/java/com/helger/jcodemodel/writer/FileCodeWriter.java
index 9c5bdff6..521958a0 100644
--- a/src/main/java/com/helger/jcodemodel/writer/FileCodeWriter.java
+++ b/src/main/java/com/helger/jcodemodel/writer/FileCodeWriter.java
@@ -61,6 +61,9 @@ import com.helger.jcodemodel.JPackage;
  */
 public class FileCodeWriter extends AbstractCodeWriter
 {
+  public static final boolean DEFAULT_MARK_READ_ONLY = false;
+  public static final Charset DEFAULT_CHARSET = null;
+
   /** The target directory to put source code. */
   private final File m_aTargetDir;
 
@@ -72,24 +75,39 @@ public class FileCodeWriter extends AbstractCodeWriter
 
   public FileCodeWriter (@Nonnull final File aTargetDir) throws IOException
   {
-    this (aTargetDir, false);
+    this (aTargetDir, DEFAULT_MARK_READ_ONLY, DEFAULT_CHARSET, getDefaultNewLine ());
   }
 
   public FileCodeWriter (@Nonnull final File aTargetDir, @Nullable final Charset encoding) throws IOException
   {
-    this (aTargetDir, false, encoding);
+    this (aTargetDir, DEFAULT_MARK_READ_ONLY, encoding, getDefaultNewLine ());
   }
 
   public FileCodeWriter (@Nonnull final File aTargetDir, final boolean bMarkReadOnly) throws IOException
   {
-    this (aTargetDir, bMarkReadOnly, null);
+    this (aTargetDir, bMarkReadOnly, DEFAULT_CHARSET, getDefaultNewLine ());
+  }
+
+  public FileCodeWriter (@Nonnull final File aTargetDir,
+                         @Nullable final Charset encoding,
+                         @Nonnull final String sNewLine) throws IOException
+  {
+    this (aTargetDir, DEFAULT_MARK_READ_ONLY, encoding, sNewLine);
   }
 
   public FileCodeWriter (@Nonnull final File aTargetDir,
                          final boolean bMarkReadOnly,
                          @Nullable final Charset encoding) throws IOException
   {
-    super (encoding);
+    this (aTargetDir, bMarkReadOnly, encoding, getDefaultNewLine ());
+  }
+
+  public FileCodeWriter (@Nonnull final File aTargetDir,
+                         final boolean bMarkReadOnly,
+                         @Nullable final Charset encoding,
+                         @Nonnull final String sNewLine) throws IOException
+  {
+    super (encoding, sNewLine);
     m_aTargetDir = aTargetDir;
     m_bMarkReadOnly = bMarkReadOnly;
     if (!aTargetDir.exists () || !aTargetDir.isDirectory ())
diff --git a/src/main/java/com/helger/jcodemodel/writer/FilterCodeWriter.java b/src/main/java/com/helger/jcodemodel/writer/FilterCodeWriter.java
index b8e28c4d..c2389120 100644
--- a/src/main/java/com/helger/jcodemodel/writer/FilterCodeWriter.java
+++ b/src/main/java/com/helger/jcodemodel/writer/FilterCodeWriter.java
@@ -42,12 +42,12 @@ package com.helger.jcodemodel.writer;
 
 import java.io.IOException;
 import java.io.OutputStream;
-import java.io.Writer;
 
 import javax.annotation.Nonnull;
 
 import com.helger.jcodemodel.AbstractCodeWriter;
 import com.helger.jcodemodel.JPackage;
+import com.helger.jcodemodel.SourcePrintWriter;
 
 /**
  * {@link AbstractCodeWriter} that delegates to another
@@ -61,7 +61,7 @@ public class FilterCodeWriter extends AbstractCodeWriter
 
   public FilterCodeWriter (@Nonnull final AbstractCodeWriter aCore)
   {
-    super (aCore.encoding ());
+    super (aCore.encoding (), aCore.getNewLine ());
     m_aCore = aCore;
   }
 
@@ -78,7 +78,7 @@ public class FilterCodeWriter extends AbstractCodeWriter
   }
 
   @Override
-  public Writer openSource (@Nonnull final JPackage pkg, @Nonnull final String fileName) throws IOException
+  public SourcePrintWriter openSource (@Nonnull final JPackage pkg, @Nonnull final String fileName) throws IOException
   {
     return m_aCore.openSource (pkg, fileName);
   }
diff --git a/src/main/java/com/helger/jcodemodel/writer/OutputStreamCodeWriter.java b/src/main/java/com/helger/jcodemodel/writer/OutputStreamCodeWriter.java
index b7085281..c02a8d4a 100644
--- a/src/main/java/com/helger/jcodemodel/writer/OutputStreamCodeWriter.java
+++ b/src/main/java/com/helger/jcodemodel/writer/OutputStreamCodeWriter.java
@@ -73,7 +73,22 @@ public class OutputStreamCodeWriter extends AbstractCodeWriter
    */
   public OutputStreamCodeWriter (@Nonnull final OutputStream os, @Nullable final Charset encoding)
   {
-    super (encoding);
+    this (os, encoding, getDefaultNewLine ());
+  }
+
+  /**
+   * @param os
+   *        This stream will be closed at the end of the code generation.
+   * @param encoding
+   *        Encoding to be used.
+   * @param sNewLine
+   *        The new line string to be used for source files
+   */
+  public OutputStreamCodeWriter (@Nonnull final OutputStream os,
+                                 @Nullable final Charset encoding,
+                                 @Nonnull final String sNewLine)
+  {
+    super (encoding, sNewLine);
     try
     {
       m_aPS = encoding == null ? new PrintStream (os, false) : new PrintStream (os, false, encoding.name ());
diff --git a/src/main/java/com/helger/jcodemodel/writer/ProgressCodeWriter.java b/src/main/java/com/helger/jcodemodel/writer/ProgressCodeWriter.java
index 047a51d7..5a6130a3 100644
--- a/src/main/java/com/helger/jcodemodel/writer/ProgressCodeWriter.java
+++ b/src/main/java/com/helger/jcodemodel/writer/ProgressCodeWriter.java
@@ -44,17 +44,17 @@ import java.io.File;
 import java.io.IOException;
 import java.io.OutputStream;
 import java.io.PrintStream;
-import java.io.Writer;
 
 import javax.annotation.Nonnull;
 
 import com.helger.jcodemodel.AbstractCodeWriter;
 import com.helger.jcodemodel.JPackage;
+import com.helger.jcodemodel.SourcePrintWriter;
 
 /**
  * Filter CodeWriter that writes a progress message to the specified
  * PrintStream.
- * 
+ *
  * @author Kohsuke Kawaguchi (kohsuke.kawaguchi@sun.com)
  */
 public class ProgressCodeWriter extends FilterCodeWriter
@@ -77,7 +77,7 @@ public class ProgressCodeWriter extends FilterCodeWriter
   }
 
   @Override
-  public Writer openSource (@Nonnull final JPackage pkg, @Nonnull final String fileName) throws IOException
+  public SourcePrintWriter openSource (@Nonnull final JPackage pkg, @Nonnull final String fileName) throws IOException
   {
     _report (pkg, fileName);
     return super.openSource (pkg, fileName);
diff --git a/src/main/java/com/helger/jcodemodel/writer/PrologCodeWriter.java b/src/main/java/com/helger/jcodemodel/writer/PrologCodeWriter.java
index 605c9a26..cef036c9 100644
--- a/src/main/java/com/helger/jcodemodel/writer/PrologCodeWriter.java
+++ b/src/main/java/com/helger/jcodemodel/writer/PrologCodeWriter.java
@@ -41,14 +41,13 @@
 package com.helger.jcodemodel.writer;
 
 import java.io.IOException;
-import java.io.PrintWriter;
-import java.io.Writer;
 
 import javax.annotation.Nonnull;
 import javax.annotation.Nullable;
 
 import com.helger.jcodemodel.AbstractCodeWriter;
 import com.helger.jcodemodel.JPackage;
+import com.helger.jcodemodel.SourcePrintWriter;
 
 /**
  * Writes all the source files under the specified file folder and inserts a
@@ -79,30 +78,24 @@ public class PrologCodeWriter extends FilterCodeWriter
   }
 
   @Override
-  public Writer openSource (@Nonnull final JPackage pkg, @Nonnull final String fileName) throws IOException
+  public SourcePrintWriter openSource (@Nonnull final JPackage pkg, @Nonnull final String fileName) throws IOException
   {
-    final Writer w = super.openSource (pkg, fileName);
-
-    final PrintWriter out = new PrintWriter (w);
+    final SourcePrintWriter w = super.openSource (pkg, fileName);
 
     // write prolog if this is a java source file
     if (m_sProlog != null)
     {
-      out.println ("//");
-
+      w.println ("//");
       String s = m_sProlog;
       int idx;
       while ((idx = s.indexOf ('\n')) != -1)
       {
-        out.println ("// " + s.substring (0, idx));
+        w.println ("// " + s.substring (0, idx));
         s = s.substring (idx + 1);
       }
-      out.println ("//");
-      out.println ();
+      w.println ("//");
+      w.println ();
     }
-    // we can't close the stream for that would close the
-    // underlying stream.
-    out.flush ();
 
     return w;
   }
diff --git a/src/main/java/com/helger/jcodemodel/writer/SingleStreamCodeWriter.java b/src/main/java/com/helger/jcodemodel/writer/SingleStreamCodeWriter.java
index cc850bcc..27a05984 100644
--- a/src/main/java/com/helger/jcodemodel/writer/SingleStreamCodeWriter.java
+++ b/src/main/java/com/helger/jcodemodel/writer/SingleStreamCodeWriter.java
@@ -70,7 +70,19 @@ public class SingleStreamCodeWriter extends AbstractCodeWriter
    */
   public SingleStreamCodeWriter (@Nonnull final OutputStream aOS)
   {
-    super (null);
+    this (aOS, getDefaultNewLine ());
+  }
+
+  /**
+   * @param aOS
+   *        This stream will be closed at the end of the code generation. Except
+   *        it is System.out or System.err
+   * @param sNewLine
+   *        The new line string to be used for source files
+   */
+  public SingleStreamCodeWriter (@Nonnull final OutputStream aOS, @Nonnull final String sNewLine)
+  {
+    super (null, sNewLine);
     // Do not close System.out or System.err
     m_bDoClose = aOS != System.out && aOS != System.err;
     m_aPS = aOS instanceof PrintStream ? (PrintStream) aOS : new PrintStream (aOS);
diff --git a/src/main/java/com/helger/jcodemodel/writer/ZipCodeWriter.java b/src/main/java/com/helger/jcodemodel/writer/ZipCodeWriter.java
index 7c1c083a..64e92cfc 100644
--- a/src/main/java/com/helger/jcodemodel/writer/ZipCodeWriter.java
+++ b/src/main/java/com/helger/jcodemodel/writer/ZipCodeWriter.java
@@ -53,13 +53,13 @@ import com.helger.jcodemodel.JPackage;
 
 /**
  * Writes all the files into a zip file.
- * 
+ *
  * @author Kohsuke Kawaguchi (kohsuke.kawaguchi@sun.com)
  */
 public class ZipCodeWriter extends AbstractCodeWriter
 {
-  private final ZipOutputStream _zip;
-  private final OutputStream _filter;
+  private final ZipOutputStream m_aZOS;
+  private final OutputStream m_aFOS;
 
   /**
    * @param target
@@ -67,10 +67,21 @@ public class ZipCodeWriter extends AbstractCodeWriter
    */
   public ZipCodeWriter (@Nonnull final OutputStream target)
   {
-    super (null);
-    _zip = new ZipOutputStream (target);
+    this (target, getDefaultNewLine ());
+  }
+
+  /**
+   * @param target
+   *        Zip file will be written to this stream.
+   * @param sNewLine
+   *        The new line string to be used for source files
+   */
+  public ZipCodeWriter (@Nonnull final OutputStream target, @Nonnull final String sNewLine)
+  {
+    super (null, sNewLine);
+    m_aZOS = new ZipOutputStream (target);
     // nullify the close method.
-    _filter = new FilterOutputStream (_zip)
+    m_aFOS = new FilterOutputStream (m_aZOS)
     {
       @Override
       public void close ()
@@ -85,8 +96,8 @@ public class ZipCodeWriter extends AbstractCodeWriter
     if (!pkg.isUnnamed ())
       name = _toDirName (pkg) + name;
 
-    _zip.putNextEntry (new ZipEntry (name));
-    return _filter;
+    m_aZOS.putNextEntry (new ZipEntry (name));
+    return m_aFOS;
   }
 
   /** Converts a package name to the directory name. */
@@ -98,6 +109,6 @@ public class ZipCodeWriter extends AbstractCodeWriter
   @Override
   public void close () throws IOException
   {
-    _zip.close ();
+    m_aZOS.close ();
   }
 }
