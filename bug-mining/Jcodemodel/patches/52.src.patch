diff --git a/src/main/java/com/helger/jcodemodel/JCodeModel.java b/src/main/java/com/helger/jcodemodel/JCodeModel.java
index 4ccfd19b..016d2721 100644
--- a/src/main/java/com/helger/jcodemodel/JCodeModel.java
+++ b/src/main/java/com/helger/jcodemodel/JCodeModel.java
@@ -64,8 +64,8 @@ import javax.lang.model.util.Elements;
 import com.helger.jcodemodel.meta.CodeModelBuildingException;
 import com.helger.jcodemodel.meta.ErrorTypeFound;
 import com.helger.jcodemodel.meta.JCodeModelJavaxLangModelAdapter;
-import com.helger.jcodemodel.util.FSName;
 import com.helger.jcodemodel.util.EFileSystemConvention;
+import com.helger.jcodemodel.util.FSName;
 import com.helger.jcodemodel.util.IFileSystemConvention;
 import com.helger.jcodemodel.util.JCFilenameHelper;
 import com.helger.jcodemodel.util.JCSecureLoader;
@@ -373,7 +373,7 @@ public class JCodeModel implements Serializable
       return false;
     // 1. unify name
     final String sCleanPath = _unifyPath (sAbsolutePath);
-    // 2. check existance
+    // 2. check existence
     return m_aResourceDirs.containsKey (_createFSName (sCleanPath));
   }
 
diff --git a/src/main/java/com/helger/jcodemodel/JPackage.java b/src/main/java/com/helger/jcodemodel/JPackage.java
index 6b8e387d..309eab0c 100644
--- a/src/main/java/com/helger/jcodemodel/JPackage.java
+++ b/src/main/java/com/helger/jcodemodel/JPackage.java
@@ -245,18 +245,25 @@ public class JPackage implements
   {
     final FSName aKey = _createFSName (sClassName);
 
-    // Class name unique case sensitive?
+    // Is the class name unique in this package?
     JDefinedClass aDC = m_aClasses.get (aKey);
     if (aDC != null)
       throw new JClassAlreadyExistsException (aDC);
 
-    // Okay, the class name is unique inside this package
-    // Check if a resource with the same name already exists
-    final JResourceDir aRD = m_aOwner.resourceDir (m_sName.replace (SEPARATOR, JResourceDir.SEPARATOR));
-    if (aRD.hasResourceFile (sClassName + ".java"))
-      throw new JResourceAlreadyExistsException (aRD.fullChildName (sClassName + ".java"));
+    final String sResDirName = m_sName.replace (SEPARATOR, JResourceDir.SEPARATOR);
+    final JResourceDir aRD = m_aOwner.resourceDir (sResDirName);
 
-    // XXX problems caught in the NC constructor
+    // Check if a resource file with the same name already exists
+    final String sClassFilename = sClassName + ".java";
+    if (aRD.hasResourceFile (sClassFilename))
+      throw new JResourceAlreadyExistsException (aRD.fullChildName (sClassFilename));
+
+    // CHeck if a sub-directory with the same name already exists (mind the "."
+    // in filename - don't convert to '/' :D)
+    if (m_aOwner.containsResourceDir (aRD.fullChildName (sClassFilename)))
+      throw new JResourceAlreadyExistsException (aRD.fullChildName (sClassFilename));
+
+    // Create a new class
     aDC = new JDefinedClass (this, nMods, sClassName, eClassType);
     m_aClasses.put (aKey, aDC);
 
diff --git a/src/main/java/com/helger/jcodemodel/JResourceDir.java b/src/main/java/com/helger/jcodemodel/JResourceDir.java
index aacc90de..a1b95e43 100644
--- a/src/main/java/com/helger/jcodemodel/JResourceDir.java
+++ b/src/main/java/com/helger/jcodemodel/JResourceDir.java
@@ -164,6 +164,12 @@ public class JResourceDir implements IJOwned
     return FSName.createCaseInsensitive (sName);
   }
 
+  @Nonnull
+  private JPackage _getMatchingPackage ()
+  {
+    return owner ()._package (m_sName.replace (SEPARATOR, JPackage.SEPARATOR));
+  }
+
   /**
    * Adds a new resource file to this package.
    *
@@ -199,9 +205,8 @@ public class JResourceDir implements IJOwned
     // Check if a Java class with the same name already exists
     if (JCStringHelper.endsWithCaseInsensitive (sName, ".java"))
     {
-      final JPackage aPackage = owner ()._package (m_sName.replace (SEPARATOR, JPackage.SEPARATOR));
       // Cut trailing ".java"
-      final JDefinedClass aDC = aPackage._getClass (sName.substring (0, sName.length () - 5));
+      final JDefinedClass aDC = _getMatchingPackage ()._getClass (sName.substring (0, sName.length () - 5));
       if (aDC != null)
         throw new JClassAlreadyExistsException (aDC);
     }
@@ -262,6 +267,15 @@ public class JResourceDir implements IJOwned
     if (hasResourceFile (sSubDirName))
       throw new JResourceAlreadyExistsException (fullChildName (sSubDirName));
 
+    // Check if a Java class with the same name already exists
+    if (JCStringHelper.endsWithCaseInsensitive (sSubDirName, ".java"))
+    {
+      // Cut trailing ".java"
+      final JDefinedClass aDC = _getMatchingPackage ()._getClass (sSubDirName.substring (0, sSubDirName.length () - 5));
+      if (aDC != null)
+        throw new JClassAlreadyExistsException (aDC);
+    }
+
     return owner ().resourceDir (isUnnamed () ? sSubDirName : m_sName + SEPARATOR + sSubDirName);
   }
 
diff --git a/src/test/java/com/helger/jcodemodel/JResourceDirTest.java b/src/test/java/com/helger/jcodemodel/JResourceDirTest.java
index 2d7fcfd5..3a37435b 100644
--- a/src/test/java/com/helger/jcodemodel/JResourceDirTest.java
+++ b/src/test/java/com/helger/jcodemodel/JResourceDirTest.java
@@ -1,5 +1,6 @@
 package com.helger.jcodemodel;
 
+import static org.junit.Assert.assertNotNull;
 import static org.junit.Assert.assertSame;
 import static org.junit.Assert.fail;
 
@@ -61,6 +62,7 @@ public final class JResourceDirTest
   {
     final JCodeModel cm = new JCodeModel ();
     final JResourceDir rd = cm.resourceDir ("a/b");
+    assertNotNull (rd);
     final JResourceDir rd2 = cm.resourceDir ("a").subDir ("b");
     assertSame (rd, rd2);
     final JResourceDir rd3 = cm.resourceDir ("a").subDir ("b/c");
@@ -68,7 +70,7 @@ public final class JResourceDirTest
   }
 
   @Test
-  public void testFilenameFilenameCollisionLinux () throws JCodeModelException
+  public void testCollisionFilenameFilenameLinux () throws JCodeModelException
   {
     final JCodeModel cm = new JCodeModel ().setFileSystemConvention (EFileSystemConvention.LINUX);
     cm.resourceDir ("my").addResourceFile (JTextFile.createFully ("File1", StandardCharsets.UTF_8, "bla"));
@@ -87,7 +89,7 @@ public final class JResourceDirTest
   }
 
   @Test
-  public void testFilenameFilenameCollisionWindows () throws JCodeModelException
+  public void testCollisionFilenameFilenameWindows () throws JCodeModelException
   {
     final JCodeModel cm = new JCodeModel ().setFileSystemConvention (EFileSystemConvention.WINDOWS);
     cm.resourceDir ("my").addResourceFile (JTextFile.createFully ("File1", StandardCharsets.UTF_8, "bla"));
@@ -114,7 +116,7 @@ public final class JResourceDirTest
   }
 
   @Test
-  public void testFilenameDirNameCollisionLinux () throws JCodeModelException
+  public void testCollisionFilenameDirNameLinux () throws JCodeModelException
   {
     final JCodeModel cm = new JCodeModel ().setFileSystemConvention (EFileSystemConvention.LINUX);
     cm.resourceDir ("my").addResourceFile (JTextFile.createFully ("name", StandardCharsets.UTF_8, "bla"));
@@ -133,7 +135,7 @@ public final class JResourceDirTest
   }
 
   @Test
-  public void testFilenameDirNameCollisionWindows () throws JCodeModelException
+  public void testCollisionFilenameDirNameWindows () throws JCodeModelException
   {
     final JCodeModel cm = new JCodeModel ().setFileSystemConvention (EFileSystemConvention.WINDOWS);
     cm.resourceDir ("my").addResourceFile (JTextFile.createFully ("name", StandardCharsets.UTF_8, "bla"));
@@ -160,7 +162,7 @@ public final class JResourceDirTest
   }
 
   @Test
-  public void testFilenameClassNameCollisionLinux () throws JCodeModelException
+  public void testCollisionFilenameClassNameLinux () throws JCodeModelException
   {
     final JCodeModel cm = new JCodeModel ().setFileSystemConvention (EFileSystemConvention.LINUX);
     cm.resourceDir ("my").addResourceFile (JTextFile.createFully ("Name.java", StandardCharsets.UTF_8, "bla"));
@@ -179,7 +181,7 @@ public final class JResourceDirTest
   }
 
   @Test
-  public void testFilenameClassNameCollisionWindows () throws JCodeModelException
+  public void testCollisionFilenameClassNameWindows () throws JCodeModelException
   {
     final JCodeModel cm = new JCodeModel ().setFileSystemConvention (EFileSystemConvention.WINDOWS);
     cm.resourceDir ("my").addResourceFile (JTextFile.createFully ("Name.java", StandardCharsets.UTF_8, "bla"));
@@ -206,7 +208,7 @@ public final class JResourceDirTest
   }
 
   @Test
-  public void testClassNameFilenameCollisionLinux () throws JCodeModelException
+  public void testCollisionClassNameFilenameLinux () throws JCodeModelException
   {
     final JCodeModel cm = new JCodeModel ().setFileSystemConvention (EFileSystemConvention.LINUX);
     cm._package ("my")._class (JMod.PUBLIC, "Name");
@@ -225,7 +227,7 @@ public final class JResourceDirTest
   }
 
   @Test
-  public void testClassNameFileameCollisionWindows () throws JCodeModelException
+  public void testCollisionClassNameFilenameWindows () throws JCodeModelException
   {
     final JCodeModel cm = new JCodeModel ().setFileSystemConvention (EFileSystemConvention.WINDOWS);
     cm._package ("my")._class (JMod.PUBLIC, "Name");
@@ -252,7 +254,53 @@ public final class JResourceDirTest
   }
 
   @Test
-  public void testDirNameFilenameCollisionLinux () throws JCodeModelException
+  public void testCollisionClassNameDirNameLinux () throws JCodeModelException
+  {
+    final JCodeModel cm = new JCodeModel ().setFileSystemConvention (EFileSystemConvention.LINUX);
+    cm._package ("my")._class (JMod.PUBLIC, "Name");
+    try
+    {
+      // this should fail
+      cm.resourceDir ("my").subDir ("Name.java");
+      fail ();
+    }
+    catch (final JClassAlreadyExistsException ex)
+    {
+      // expected
+    }
+    // Adding a different case is totally fine
+    cm.resourceDir ("my").subDir ("NAme.jaVA");
+  }
+
+  @Test
+  public void testCollisionClassNameDirNameWindows () throws JCodeModelException
+  {
+    final JCodeModel cm = new JCodeModel ().setFileSystemConvention (EFileSystemConvention.WINDOWS);
+    cm._package ("my")._class (JMod.PUBLIC, "Name");
+    try
+    {
+      // this should fail
+      cm.resourceDir ("my").subDir ("Name.java");
+      fail ();
+    }
+    catch (final JClassAlreadyExistsException ex)
+    {
+      // expected
+    }
+    try
+    {
+      // Adding a different case doesn't help either
+      cm.resourceDir ("my").subDir ("NAme.jaVA");
+      fail ();
+    }
+    catch (final JClassAlreadyExistsException ex)
+    {
+      // expected
+    }
+  }
+
+  @Test
+  public void testCollisionDirNameFilenameLinux () throws JCodeModelException
   {
     final JCodeModel cm = new JCodeModel ().setFileSystemConvention (EFileSystemConvention.LINUX);
     cm.resourceDir ("my").subDir ("name");
@@ -271,7 +319,7 @@ public final class JResourceDirTest
   }
 
   @Test
-  public void testDirNameFilenameCollisionWindows () throws JCodeModelException
+  public void testCollisionDirNameFilenameWindows () throws JCodeModelException
   {
     final JCodeModel cm = new JCodeModel ().setFileSystemConvention (EFileSystemConvention.WINDOWS);
     cm.resourceDir ("my").subDir ("name");
@@ -296,4 +344,50 @@ public final class JResourceDirTest
       // expected
     }
   }
+
+  @Test
+  public void testCollisionDirNameClassNameLinux () throws JCodeModelException
+  {
+    final JCodeModel cm = new JCodeModel ().setFileSystemConvention (EFileSystemConvention.LINUX);
+    cm.resourceDir ("my").subDir ("Name.java");
+    try
+    {
+      // should fail
+      cm._package ("my")._class (JMod.PUBLIC, "Name");
+      fail ();
+    }
+    catch (final JResourceAlreadyExistsException ex)
+    {
+      // expected
+    }
+    // Different case should work
+    cm._package ("my")._class (JMod.PUBLIC, "name");
+  }
+
+  @Test
+  public void testCollisionDirNameClassNameWindows () throws JCodeModelException
+  {
+    final JCodeModel cm = new JCodeModel ().setFileSystemConvention (EFileSystemConvention.WINDOWS);
+    cm.resourceDir ("my").subDir ("Name.java");
+    try
+    {
+      // should fail
+      cm._package ("my")._class (JMod.PUBLIC, "Name");
+      fail ();
+    }
+    catch (final JResourceAlreadyExistsException ex)
+    {
+      // expected
+    }
+    try
+    {
+      // Different case doesn't help either
+      cm._package ("my")._class (JMod.PUBLIC, "name");
+      fail ();
+    }
+    catch (final JResourceAlreadyExistsException ex)
+    {
+      // expected
+    }
+  }
 }
