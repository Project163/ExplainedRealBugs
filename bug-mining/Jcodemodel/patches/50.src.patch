diff --git a/README.md b/README.md
index d3bf8d8c..92ab6d63 100644
--- a/README.md
+++ b/README.md
@@ -14,8 +14,10 @@ A site with the links to the [API docs](http://phax.github.io/jcodemodel/) etc.
 
 # News and noteworthy
 
-* v3.3.1 - work in progress
+* v3.4.0 - work in progress
     * Added special top-level construct `JResourceDir` to represent pure resource directories ([issue #74](https://github.com/phax/jcodemodel/issues/74) from @guiguilechat)
+    * Added new class `JCodeModelException` as the base class for `JClassAlreadyExistsException` and the new class `JResourceAlreadyExistsException`
+    * Existing APIs were changed to throw `JCodeModelException` instead of `JClassAlreadyExistsException`
 * v3.3.0 - 2019-11-24
     * Added check for package names so that no invalid package names can be created ([issue #70](https://github.com/phax/jcodemodel/issues/70) from @guiguilechat)
     * Added check to avoid creating classes existing in the "java.lang" package ([issue #71](https://github.com/phax/jcodemodel/issues/71) from @guiguilechat)
diff --git a/pom.xml b/pom.xml
index 11f25d2d..6d606fec 100644
--- a/pom.xml
+++ b/pom.xml
@@ -49,7 +49,7 @@
     <version>1.11.0</version>
   </parent>
   <artifactId>jcodemodel</artifactId>
-  <version>3.3.1-SNAPSHOT</version>
+  <version>3.4.0-SNAPSHOT</version>
   <packaging>bundle</packaging>
   <name>jcodemodel</name>
   <description>Java code generation library</description>
diff --git a/src/main/java/com/helger/jcodemodel/AbstractJClassContainer.java b/src/main/java/com/helger/jcodemodel/AbstractJClassContainer.java
index 30f57077..e9336df4 100644
--- a/src/main/java/com/helger/jcodemodel/AbstractJClassContainer.java
+++ b/src/main/java/com/helger/jcodemodel/AbstractJClassContainer.java
@@ -222,7 +222,7 @@ public abstract class AbstractJClassContainer <CLASSTYPE extends AbstractJClassC
   @Nonnull
   public final CLASSTYPE _class (final int nMods,
                                  @Nonnull final String sName,
-                                 @Nonnull final EClassType eClassType) throws JClassAlreadyExistsException
+                                 @Nonnull final EClassType eClassType) throws JCodeModelException
   {
     String sRealName;
     if (JCodeModel.isFileSystemCaseSensitive ())
diff --git a/src/main/java/com/helger/jcodemodel/IJClassContainer.java b/src/main/java/com/helger/jcodemodel/IJClassContainer.java
index 1bdf28c5..e901568c 100644
--- a/src/main/java/com/helger/jcodemodel/IJClassContainer.java
+++ b/src/main/java/com/helger/jcodemodel/IJClassContainer.java
@@ -93,13 +93,11 @@ public interface IJClassContainer <CLASSTYPE extends IJClassContainer <CLASSTYPE
    * @param eClassType
    *        The type of class to create. May not be <code>null</code>.
    * @return The created ...
-   * @throws JClassAlreadyExistsException
+   * @throws JCodeModelException
    *         If another class/interface/... with the same name already exists
    */
   @Nonnull
-  CLASSTYPE _class (int nMods,
-                    @Nonnull String sName,
-                    @Nonnull EClassType eClassType) throws JClassAlreadyExistsException;
+  CLASSTYPE _class (int nMods, @Nonnull String sName, @Nonnull EClassType eClassType) throws JCodeModelException;
 
   /**
    * Add a new public class to this class/package.
@@ -107,11 +105,11 @@ public interface IJClassContainer <CLASSTYPE extends IJClassContainer <CLASSTYPE
    * @param sName
    *        Name of class to be added to this package
    * @return Newly generated class
-   * @throws JClassAlreadyExistsException
+   * @throws JCodeModelException
    *         If another class/interface/... with the same name already exists
    */
   @Nonnull
-  default CLASSTYPE _class (@Nonnull final String sName) throws JClassAlreadyExistsException
+  default CLASSTYPE _class (@Nonnull final String sName) throws JCodeModelException
   {
     return _class (JMod.PUBLIC, sName);
   }
@@ -124,11 +122,11 @@ public interface IJClassContainer <CLASSTYPE extends IJClassContainer <CLASSTYPE
    * @param sName
    *        Name of class to be added to this package
    * @return Newly generated class
-   * @throws JClassAlreadyExistsException
+   * @throws JCodeModelException
    *         If another class/interface/... with the same name already exists
    */
   @Nonnull
-  default CLASSTYPE _class (final int nMods, @Nonnull final String sName) throws JClassAlreadyExistsException
+  default CLASSTYPE _class (final int nMods, @Nonnull final String sName) throws JCodeModelException
   {
     return _class (nMods, sName, EClassType.CLASS);
   }
@@ -139,11 +137,11 @@ public interface IJClassContainer <CLASSTYPE extends IJClassContainer <CLASSTYPE
    * @param sName
    *        Name of interface to be added to this package
    * @return Newly generated interface
-   * @throws JClassAlreadyExistsException
+   * @throws JCodeModelException
    *         If another class/interface/... with the same name already exists
    */
   @Nonnull
-  default CLASSTYPE _interface (@Nonnull final String sName) throws JClassAlreadyExistsException
+  default CLASSTYPE _interface (@Nonnull final String sName) throws JCodeModelException
   {
     return _interface (JMod.PUBLIC, sName);
   }
@@ -156,11 +154,11 @@ public interface IJClassContainer <CLASSTYPE extends IJClassContainer <CLASSTYPE
    * @param sName
    *        Name of interface to be added to this package
    * @return Newly generated interface
-   * @throws JClassAlreadyExistsException
+   * @throws JCodeModelException
    *         If another class/interface/... with the same name already exists
    */
   @Nonnull
-  default CLASSTYPE _interface (final int nMods, @Nonnull final String sName) throws JClassAlreadyExistsException
+  default CLASSTYPE _interface (final int nMods, @Nonnull final String sName) throws JCodeModelException
   {
     return _class (JMod.PUBLIC, sName, EClassType.INTERFACE);
   }
@@ -171,11 +169,11 @@ public interface IJClassContainer <CLASSTYPE extends IJClassContainer <CLASSTYPE
    * @param sName
    *        Name of the annotation Type declaration to be added to this package
    * @return newly created Annotation Type Declaration
-   * @throws JClassAlreadyExistsException
+   * @throws JCodeModelException
    *         If another class/interface/... with the same name already exists
    */
   @Nonnull
-  default CLASSTYPE _annotationTypeDeclaration (@Nonnull final String sName) throws JClassAlreadyExistsException
+  default CLASSTYPE _annotationTypeDeclaration (@Nonnull final String sName) throws JCodeModelException
   {
     return _annotationTypeDeclaration (JMod.PUBLIC, sName);
   }
@@ -188,12 +186,11 @@ public interface IJClassContainer <CLASSTYPE extends IJClassContainer <CLASSTYPE
    * @param sName
    *        Name of the annotation Type declaration to be added to this package
    * @return newly created Annotation Type Declaration
-   * @throws JClassAlreadyExistsException
+   * @throws JCodeModelException
    *         If another class/interface/... with the same name already exists
    */
   @Nonnull
-  default CLASSTYPE _annotationTypeDeclaration (final int nMods,
-                                                @Nonnull final String sName) throws JClassAlreadyExistsException
+  default CLASSTYPE _annotationTypeDeclaration (final int nMods, @Nonnull final String sName) throws JCodeModelException
   {
     return _class (nMods, sName, EClassType.ANNOTATION_TYPE_DECL);
   }
@@ -204,11 +201,11 @@ public interface IJClassContainer <CLASSTYPE extends IJClassContainer <CLASSTYPE
    * @param sName
    *        Name of the enum to be added to this package
    * @return newly created enum
-   * @throws JClassAlreadyExistsException
+   * @throws JCodeModelException
    *         If another class/interface/... with the same name already exists
    */
   @Nonnull
-  default CLASSTYPE _enum (@Nonnull final String sName) throws JClassAlreadyExistsException
+  default CLASSTYPE _enum (@Nonnull final String sName) throws JCodeModelException
   {
     return _enum (JMod.PUBLIC, sName);
   }
@@ -221,11 +218,11 @@ public interface IJClassContainer <CLASSTYPE extends IJClassContainer <CLASSTYPE
    * @param sName
    *        Name of the enum to be added to this package
    * @return newly created Enum
-   * @throws JClassAlreadyExistsException
+   * @throws JCodeModelException
    *         If another class/interface/... with the same name already exists
    */
   @Nonnull
-  default CLASSTYPE _enum (final int nMods, @Nonnull final String sName) throws JClassAlreadyExistsException
+  default CLASSTYPE _enum (final int nMods, @Nonnull final String sName) throws JCodeModelException
   {
     return _class (nMods, sName, EClassType.ENUM);
   }
diff --git a/src/main/java/com/helger/jcodemodel/JClassAlreadyExistsException.java b/src/main/java/com/helger/jcodemodel/JClassAlreadyExistsException.java
index ab839bb7..7d71775e 100644
--- a/src/main/java/com/helger/jcodemodel/JClassAlreadyExistsException.java
+++ b/src/main/java/com/helger/jcodemodel/JClassAlreadyExistsException.java
@@ -45,11 +45,12 @@ import javax.annotation.Nonnull;
 import com.helger.jcodemodel.util.JCValueEnforcer;
 
 /**
- * Indicates that the class is already created.
+ * Indicates that the class is already created.<br>
+ * Up to and including v3.3.0 this was directly derived from Exception
  *
  * @author Kohsuke Kawaguchi (kohsuke.kawaguchi@sun.com)
  */
-public class JClassAlreadyExistsException extends Exception
+public class JClassAlreadyExistsException extends JCodeModelException
 {
   private final AbstractJClass m_aExisting;
 
diff --git a/src/main/java/com/helger/jcodemodel/JCodeModel.java b/src/main/java/com/helger/jcodemodel/JCodeModel.java
index fca20275..cbc2fa6c 100644
--- a/src/main/java/com/helger/jcodemodel/JCodeModel.java
+++ b/src/main/java/com/helger/jcodemodel/JCodeModel.java
@@ -319,13 +319,13 @@ public class JCodeModel implements Serializable
    * @param eClassType
    *        Class type to use (enum/class/interface/annotation)
    * @return New {@link JDefinedClass}
-   * @exception JClassAlreadyExistsException
+   * @exception JCodeModelException
    *            When the specified class/interface was already created.
    */
   @Nonnull
   public JDefinedClass _class (final int nMods,
                                @Nonnull final String sFullyQualifiedClassName,
-                               @Nonnull final EClassType eClassType) throws JClassAlreadyExistsException
+                               @Nonnull final EClassType eClassType) throws JCodeModelException
   {
     final int nIdx = sFullyQualifiedClassName.lastIndexOf ('.');
     if (nIdx < 0)
@@ -342,11 +342,11 @@ public class JCodeModel implements Serializable
    * @param sFullyQualifiedClassName
    *        FQCN
    * @return New {@link JDefinedClass}
-   * @exception JClassAlreadyExistsException
+   * @exception JCodeModelException
    *            When the specified class/interface was already created.
    */
   @Nonnull
-  public JDefinedClass _class (@Nonnull final String sFullyQualifiedClassName) throws JClassAlreadyExistsException
+  public JDefinedClass _class (@Nonnull final String sFullyQualifiedClassName) throws JCodeModelException
   {
     return _class (sFullyQualifiedClassName, EClassType.CLASS);
   }
@@ -359,12 +359,12 @@ public class JCodeModel implements Serializable
    * @param sFullyQualifiedClassName
    *        FQCN
    * @return New {@link JDefinedClass}
-   * @exception JClassAlreadyExistsException
+   * @exception JCodeModelException
    *            When the specified class/interface was already created.
    */
   @Nonnull
   public JDefinedClass _class (final int nMods,
-                               @Nonnull final String sFullyQualifiedClassName) throws JClassAlreadyExistsException
+                               @Nonnull final String sFullyQualifiedClassName) throws JCodeModelException
   {
     return _class (nMods, sFullyQualifiedClassName, EClassType.CLASS);
   }
@@ -377,12 +377,12 @@ public class JCodeModel implements Serializable
    * @param eClassType
    *        Class type to use (enum/class/interface/annotation)
    * @return New {@link JDefinedClass}
-   * @exception JClassAlreadyExistsException
+   * @exception JCodeModelException
    *            When the specified class/interface was already created.
    */
   @Nonnull
   public JDefinedClass _class (@Nonnull final String sFullyQualifiedClassName,
-                               @Nonnull final EClassType eClassType) throws JClassAlreadyExistsException
+                               @Nonnull final EClassType eClassType) throws JCodeModelException
   {
     return _class (JMod.PUBLIC, sFullyQualifiedClassName, eClassType);
   }
diff --git a/src/main/java/com/helger/jcodemodel/JCodeModelException.java b/src/main/java/com/helger/jcodemodel/JCodeModelException.java
new file mode 100644
index 00000000..7afbbf09
--- /dev/null
+++ b/src/main/java/com/helger/jcodemodel/JCodeModelException.java
@@ -0,0 +1,66 @@
+/**
+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS HEADER.
+ *
+ * Copyright (c) 1997-2010 Oracle and/or its affiliates. All rights reserved.
+ * Portions Copyright 2013-2020 Philip Helger + contributors
+ *
+ * The contents of this file are subject to the terms of either the GNU
+ * General Public License Version 2 only ("GPL") or the Common Development
+ * and Distribution License("CDDL") (collectively, the "License").  You
+ * may not use this file except in compliance with the License.  You can
+ * obtain a copy of the License at
+ * https://glassfish.dev.java.net/public/CDDL+GPL_1_1.html
+ * or packager/legal/LICENSE.txt.  See the License for the specific
+ * language governing permissions and limitations under the License.
+ *
+ * When distributing the software, include this License Header Notice in each
+ * file and include the License file at packager/legal/LICENSE.txt.
+ *
+ * GPL Classpath Exception:
+ * Oracle designates this particular file as subject to the "Classpath"
+ * exception as provided by Oracle in the GPL Version 2 section of the License
+ * file that accompanied this code.
+ *
+ * Modifications:
+ * If applicable, add the following below the License Header, with the fields
+ * enclosed by brackets [] replaced by your own identifying information:
+ * "Portions Copyright [year] [name of copyright owner]"
+ *
+ * Contributor(s):
+ * If you wish your version of this file to be governed by only the CDDL or
+ * only the GPL Version 2, indicate your decision by adding "[Contributor]
+ * elects to include this software in this distribution under the [CDDL or GPL
+ * Version 2] license."  If you don't indicate a single choice of license, a
+ * recipient has the option to distribute your version of this file under
+ * either the CDDL, the GPL Version 2 or to extend the choice of license to
+ * its licensees as provided above.  However, if you add GPL Version 2 code
+ * and therefore, elected the GPL Version 2 license, then the option applies
+ * only if the new code is made subject to such option by the copyright
+ * holder.
+ */
+package com.helger.jcodemodel;
+
+import javax.annotation.Nonnull;
+import javax.annotation.Nullable;
+
+/**
+ * Base class for all code model related exception.
+ *
+ * @author Philip Helger
+ * @since 3.4.0
+ */
+public class JCodeModelException extends Exception
+{
+  protected JCodeModelException ()
+  {}
+
+  public JCodeModelException (@Nonnull final String sMsg)
+  {
+    super (sMsg);
+  }
+
+  public JCodeModelException (@Nonnull final String sMsg, @Nullable final Throwable aCause)
+  {
+    super (sMsg, aCause);
+  }
+}
diff --git a/src/main/java/com/helger/jcodemodel/JPackage.java b/src/main/java/com/helger/jcodemodel/JPackage.java
index 91fc775a..838770f5 100644
--- a/src/main/java/com/helger/jcodemodel/JPackage.java
+++ b/src/main/java/com/helger/jcodemodel/JPackage.java
@@ -45,7 +45,6 @@ import java.lang.annotation.Annotation;
 import java.util.ArrayList;
 import java.util.Collection;
 import java.util.Collections;
-import java.util.HashMap;
 import java.util.HashSet;
 import java.util.Iterator;
 import java.util.List;
@@ -149,11 +148,6 @@ public class JPackage implements
    */
   private final Map <String, JDefinedClass> m_aClasses = new TreeMap <> ();
 
-  /**
-   * List of resources files inside this package.
-   */
-  private final Set <AbstractJResourceFile> m_aResources = new HashSet <> ();
-
   /**
    * All {@link AbstractJClass}s in this package keyed the upper case class
    * name. This field is non-null only on Windows, to detect "Foo" and "foo" as
@@ -161,6 +155,11 @@ public class JPackage implements
    */
   private final Map <String, JDefinedClass> m_aUpperCaseClassMap;
 
+  /**
+   * List of resources files inside this package.
+   */
+  private final Set <AbstractJResourceFile> m_aResources = new HashSet <> ();
+
   /**
    * Lazily created list of package annotations.
    */
@@ -200,7 +199,7 @@ public class JPackage implements
     if (JCodeModel.isFileSystemCaseSensitive ())
       m_aUpperCaseClassMap = null;
     else
-      m_aUpperCaseClassMap = new HashMap <> ();
+      m_aUpperCaseClassMap = new TreeMap <> ();
   }
 
   @Nullable
@@ -243,24 +242,42 @@ public class JPackage implements
 
   @Nonnull
   public JDefinedClass _class (final int nMods,
-                               @Nonnull final String sName,
-                               @Nonnull final EClassType eClassType) throws JClassAlreadyExistsException
+                               @Nonnull final String sClassName,
+                               @Nonnull final EClassType eClassType) throws JCodeModelException
   {
-    if (m_aClasses.containsKey (sName))
-      throw new JClassAlreadyExistsException (m_aClasses.get (sName));
+    // Class name unique case sensitive?
+    JDefinedClass aDC = m_aClasses.get (sClassName);
+    if (aDC != null)
+      throw new JClassAlreadyExistsException (aDC);
 
-    // XXX problems caught in the NC constructor
-    final JDefinedClass c = new JDefinedClass (this, nMods, sName, eClassType);
+    // Class name unique case insensitive?
+    final String sUpperClassName = sClassName.toUpperCase (Locale.ROOT);
+    if (m_aUpperCaseClassMap != null)
+    {
+      aDC = m_aUpperCaseClassMap.get (sUpperClassName);
+      if (aDC != null)
+        throw new JClassAlreadyExistsException (aDC);
+    }
+
+    // Okay, the class name is unique inside this package
+    // Check if a resource with the same name already exists
+    JResourceDir aRD = m_aOwner.resourceDir (m_sName.replace ('.', '/'));
+    if (aRD.hasResourceFile (sClassName + ".java"))
+      throw new JResourceAlreadyExistsException (aRD.fullChildName (sClassName + ".java"));
 
     if (m_aUpperCaseClassMap != null)
     {
-      final String sUpperName = sName.toUpperCase (Locale.ROOT);
-      final JDefinedClass dc = m_aUpperCaseClassMap.get (sUpperName);
-      if (dc != null)
-        throw new JClassAlreadyExistsException (dc);
-      m_aUpperCaseClassMap.put (sUpperName, c);
+      aRD = m_aOwner.resourceDir (m_sName.toUpperCase (Locale.ROOT).replace ('.', '/'));
+      if (aRD.hasResourceFile (sUpperClassName + ".java"))
+        throw new JResourceAlreadyExistsException (aRD.fullChildName (sUpperClassName + ".java"));
     }
-    m_aClasses.put (sName, c);
+
+    // XXX problems caught in the NC constructor
+    final JDefinedClass c = new JDefinedClass (this, nMods, sClassName, eClassType);
+    if (m_aUpperCaseClassMap != null)
+      m_aUpperCaseClassMap.put (sUpperClassName, c);
+    m_aClasses.put (sClassName, c);
+
     return c;
   }
 
@@ -277,6 +294,15 @@ public class JPackage implements
     return m_aClasses.get (sName);
   }
 
+  @Nullable
+  JDefinedClass getClassResource (@Nonnull final String sClassName)
+  {
+    JDefinedClass aDC = m_aClasses.get (sClassName);
+    if (aDC == null && m_aUpperCaseClassMap != null)
+      aDC = m_aUpperCaseClassMap.get (sClassName.toUpperCase (Locale.ROOT));
+    return aDC;
+  }
+
   /**
    * Adds a new resource file to this package.
    *
diff --git a/src/main/java/com/helger/jcodemodel/JResourceAlreadyExistsException.java b/src/main/java/com/helger/jcodemodel/JResourceAlreadyExistsException.java
new file mode 100644
index 00000000..8d5eec8c
--- /dev/null
+++ b/src/main/java/com/helger/jcodemodel/JResourceAlreadyExistsException.java
@@ -0,0 +1,72 @@
+/**
+ * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS HEADER.
+ *
+ * Copyright (c) 1997-2010 Oracle and/or its affiliates. All rights reserved.
+ * Portions Copyright 2013-2020 Philip Helger + contributors
+ *
+ * The contents of this file are subject to the terms of either the GNU
+ * General Public License Version 2 only ("GPL") or the Common Development
+ * and Distribution License("CDDL") (collectively, the "License").  You
+ * may not use this file except in compliance with the License.  You can
+ * obtain a copy of the License at
+ * https://glassfish.dev.java.net/public/CDDL+GPL_1_1.html
+ * or packager/legal/LICENSE.txt.  See the License for the specific
+ * language governing permissions and limitations under the License.
+ *
+ * When distributing the software, include this License Header Notice in each
+ * file and include the License file at packager/legal/LICENSE.txt.
+ *
+ * GPL Classpath Exception:
+ * Oracle designates this particular file as subject to the "Classpath"
+ * exception as provided by Oracle in the GPL Version 2 section of the License
+ * file that accompanied this code.
+ *
+ * Modifications:
+ * If applicable, add the following below the License Header, with the fields
+ * enclosed by brackets [] replaced by your own identifying information:
+ * "Portions Copyright [year] [name of copyright owner]"
+ *
+ * Contributor(s):
+ * If you wish your version of this file to be governed by only the CDDL or
+ * only the GPL Version 2, indicate your decision by adding "[Contributor]
+ * elects to include this software in this distribution under the [CDDL or GPL
+ * Version 2] license."  If you don't indicate a single choice of license, a
+ * recipient has the option to distribute your version of this file under
+ * either the CDDL, the GPL Version 2 or to extend the choice of license to
+ * its licensees as provided above.  However, if you add GPL Version 2 code
+ * and therefore, elected the GPL Version 2 license, then the option applies
+ * only if the new code is made subject to such option by the copyright
+ * holder.
+ */
+package com.helger.jcodemodel;
+
+import javax.annotation.Nonnull;
+
+import com.helger.jcodemodel.util.JCValueEnforcer;
+
+/**
+ * Indicates that the class is already created.
+ *
+ * @author Philip Helger
+ * @since 3.4.0
+ */
+public class JResourceAlreadyExistsException extends JCodeModelException
+{
+  private final String m_sFilename;
+
+  public JResourceAlreadyExistsException (@Nonnull final String sFilename)
+  {
+    JCValueEnforcer.notEmpty (sFilename, "Filename");
+    m_sFilename = sFilename;
+  }
+
+  /**
+   * @return The existing filename that already exists as a resource. Neither
+   *         <code>null</code> nor empty.
+   */
+  @Nonnull
+  public String getExistingFilename ()
+  {
+    return m_sFilename;
+  }
+}
diff --git a/src/main/java/com/helger/jcodemodel/JResourceDir.java b/src/main/java/com/helger/jcodemodel/JResourceDir.java
index 4402387b..df0cc7a7 100644
--- a/src/main/java/com/helger/jcodemodel/JResourceDir.java
+++ b/src/main/java/com/helger/jcodemodel/JResourceDir.java
@@ -42,10 +42,11 @@ package com.helger.jcodemodel;
 
 import java.io.File;
 import java.util.ArrayList;
-import java.util.HashSet;
 import java.util.Iterator;
 import java.util.List;
-import java.util.Set;
+import java.util.Locale;
+import java.util.Map;
+import java.util.TreeMap;
 
 import javax.annotation.Nonnegative;
 import javax.annotation.Nonnull;
@@ -95,9 +96,15 @@ public class JResourceDir implements IJOwned
   private final JCodeModel m_aOwner;
 
   /**
-   * List of resources files inside this package.
+   * Map of resources files inside this package.
    */
-  private final Set <AbstractJResourceFile> m_aResources = new HashSet <> ();
+  private final Map <String, AbstractJResourceFile> m_aResources = new TreeMap <> ();
+
+  /**
+   * Map of upper case resource names, if the underlying file system is not case
+   * sensitive (e.g. Windows).
+   */
+  private final Map <String, AbstractJResourceFile> m_aUpperCaseResources;
 
   /**
    * Constructor
@@ -123,6 +130,10 @@ public class JResourceDir implements IJOwned
       String sCleanPath = JCFilenameHelper.getPathUsingUnixSeparator (sName);
       // Ensure last part is not a "/"
       sCleanPath = JCFilenameHelper.ensurePathEndingWithoutSeparator (sCleanPath);
+
+      if (sCleanPath.startsWith ("/"))
+        throw new IllegalArgumentException ("A resource directory may not be an absolute path: '" + sName + "'");
+
       final String [] aParts = JCStringHelper.getExplodedArray (SEPARATOR, sCleanPath);
       for (final String sPart : aParts)
         if (isForbiddenDirectoryNamePart (sPart))
@@ -135,6 +146,11 @@ public class JResourceDir implements IJOwned
     }
     else
       m_sName = "";
+
+    if (JCodeModel.isFileSystemCaseSensitive ())
+      m_aUpperCaseResources = null;
+    else
+      m_aUpperCaseResources = new TreeMap <> ();
   }
 
   /**
@@ -179,18 +195,52 @@ public class JResourceDir implements IJOwned
   /**
    * Adds a new resource file to this package.
    *
-   * @param rsrc
+   * @param aResFile
    *        Resource file to add
    * @return Parameter resource file
    * @param <T>
    *        The implementation type used
+   * @throws JCodeModelException
+   *         if another resource with the same name already exists
    */
   @Nonnull
-  public <T extends AbstractJResourceFile> T addResourceFile (@Nonnull final T rsrc)
+  public <T extends AbstractJResourceFile> T addResourceFile (@Nonnull final T aResFile) throws JCodeModelException
   {
-    JCValueEnforcer.notNull (rsrc, "ResourceFile");
-    m_aResources.add (rsrc);
-    return rsrc;
+    JCValueEnforcer.notNull (aResFile, "ResourceFile");
+
+    // Check uniqueness (case sensitive)
+    final String sName = aResFile.name ();
+    if (m_aResources.containsKey (sName))
+      throw new JResourceAlreadyExistsException (fullChildName (sName));
+
+    // Check uniqueness (case insensitive)
+    final String sUpperName = sName.toUpperCase (Locale.ROOT);
+    if (m_aUpperCaseResources != null)
+    {
+      if (m_aUpperCaseResources.containsKey (sUpperName))
+        throw new JResourceAlreadyExistsException (fullChildName (sName));
+    }
+
+    // Check if a Java class with the same name already exists
+    final boolean bIsPotentiallyJavaSrcFile;
+    if (m_aUpperCaseResources != null)
+      bIsPotentiallyJavaSrcFile = sUpperName.endsWith (".JAVA");
+    else
+      bIsPotentiallyJavaSrcFile = sName.endsWith (".java");
+    if (bIsPotentiallyJavaSrcFile)
+    {
+      final JPackage aPackage = owner ()._package (m_sName.replace ('/', '.'));
+      final JDefinedClass aDC = aPackage.getClassResource (sName.substring (0, sName.length () - 5));
+      if (aDC != null)
+        throw new JClassAlreadyExistsException (aDC);
+    }
+
+    // All checks good - add to map
+    m_aResources.put (sName, aResFile);
+    if (m_aUpperCaseResources != null)
+      m_aUpperCaseResources.put (sUpperName, aResFile);
+
+    return aResFile;
   }
 
   /**
@@ -202,9 +252,8 @@ public class JResourceDir implements IJOwned
    */
   public boolean hasResourceFile (@Nullable final String sName)
   {
-    for (final AbstractJResourceFile r : m_aResources)
-      if (r.name ().equals (sName))
-        return true;
+    if (m_aResources.containsKey (sName))
+      return true;
     return false;
   }
 
@@ -216,7 +265,7 @@ public class JResourceDir implements IJOwned
   @Nonnull
   public Iterator <AbstractJResourceFile> resourceFiles ()
   {
-    return m_aResources.iterator ();
+    return m_aResources.values ().iterator ();
   }
 
   /**
@@ -225,7 +274,7 @@ public class JResourceDir implements IJOwned
   @Nonnull
   public List <AbstractJResourceFile> getAllResourceFiles ()
   {
-    return new ArrayList <> (m_aResources);
+    return new ArrayList <> (m_aResources.values ());
   }
 
   /**
@@ -269,4 +318,10 @@ public class JResourceDir implements IJOwned
   {
     return m_aResources.size ();
   }
+
+  @Nonnull
+  String fullChildName (@Nonnull final String sChildName)
+  {
+    return isUnnamed () ? sChildName : m_sName + '/' + sChildName;
+  }
 }
diff --git a/src/main/java/com/helger/jcodemodel/meta/CodeModelBuildingException.java b/src/main/java/com/helger/jcodemodel/meta/CodeModelBuildingException.java
index d8684daa..70664dbd 100644
--- a/src/main/java/com/helger/jcodemodel/meta/CodeModelBuildingException.java
+++ b/src/main/java/com/helger/jcodemodel/meta/CodeModelBuildingException.java
@@ -40,14 +40,14 @@
  */
 package com.helger.jcodemodel.meta;
 
-import com.helger.jcodemodel.JClassAlreadyExistsException;
+import com.helger.jcodemodel.JCodeModelException;
 
 /**
  * @author Victor Nazarov &lt;asviraspossible@gmail.com&gt;
  */
 public class CodeModelBuildingException extends Exception
 {
-  public CodeModelBuildingException (final JClassAlreadyExistsException ex)
+  public CodeModelBuildingException (final JCodeModelException ex)
   {
     super (ex);
   }
@@ -57,7 +57,7 @@ public class CodeModelBuildingException extends Exception
     super (ex);
   }
 
-  CodeModelBuildingException (final String message, final JClassAlreadyExistsException exception)
+  CodeModelBuildingException (final String message, final JCodeModelException exception)
   {
     super (message, exception);
   }
diff --git a/src/main/java/com/helger/jcodemodel/meta/DecidedErrorTypesModelsAdapter.java b/src/main/java/com/helger/jcodemodel/meta/DecidedErrorTypesModelsAdapter.java
index ec82ae99..25bee077 100644
--- a/src/main/java/com/helger/jcodemodel/meta/DecidedErrorTypesModelsAdapter.java
+++ b/src/main/java/com/helger/jcodemodel/meta/DecidedErrorTypesModelsAdapter.java
@@ -45,6 +45,7 @@ import java.util.Map;
 import java.util.logging.Level;
 import java.util.logging.Logger;
 
+import javax.annotation.Nonnegative;
 import javax.annotation.Nonnull;
 import javax.lang.model.element.AnnotationMirror;
 import javax.lang.model.element.AnnotationValue;
@@ -62,6 +63,7 @@ import com.helger.jcodemodel.AbstractJType;
 import com.helger.jcodemodel.EClassType;
 import com.helger.jcodemodel.JClassAlreadyExistsException;
 import com.helger.jcodemodel.JCodeModel;
+import com.helger.jcodemodel.JCodeModelException;
 import com.helger.jcodemodel.JDefinedClass;
 import com.helger.jcodemodel.JMod;
 import com.helger.jcodemodel.JPackage;
@@ -73,7 +75,8 @@ class DecidedErrorTypesModelsAdapter
 {
   private static final Logger LOGGER = Logger.getLogger (DecidedErrorTypesModelsAdapter.class.getName ());
 
-  static int toJMod (final Collection <Modifier> modifierCollection)
+  @Nonnegative
+  static int toJMod (@Nonnull final Collection <Modifier> modifierCollection)
   {
     int modifiers = 0;
     for (final Modifier eModifier : modifierCollection)
@@ -123,9 +126,10 @@ class DecidedErrorTypesModelsAdapter
     return modifiers;
   }
 
-  private static EClassType _toClassType (@Nonnull final ElementKind kind)
+  @Nonnull
+  private static EClassType _toClassType (@Nonnull final ElementKind eKind)
   {
-    switch (kind)
+    switch (eKind)
     {
       case CLASS:
         return EClassType.CLASS;
@@ -136,7 +140,7 @@ class DecidedErrorTypesModelsAdapter
       case ANNOTATION_TYPE:
         return EClassType.ANNOTATION_TYPE_DECL;
       default:
-        throw new UnsupportedOperationException ("Unsupported ElementKind: " + kind);
+        throw new UnsupportedOperationException ("Unsupported ElementKind: " + eKind);
     }
   }
 
@@ -229,7 +233,7 @@ class DecidedErrorTypesModelsAdapter
     {
       newClass = _package._class (modifiers, element.getSimpleName ().toString (), classType);
     }
-    catch (final JClassAlreadyExistsException ex)
+    catch (final JCodeModelException ex)
     {
       throw new CodeModelBuildingException (ex);
     }
@@ -277,7 +281,7 @@ class DecidedErrorTypesModelsAdapter
         {
           enclosedClass = klass._class (modifiers, enclosedElement.getSimpleName ().toString (), classType);
         }
-        catch (final JClassAlreadyExistsException ex)
+        catch (final JCodeModelException ex)
         {
           throw new CodeModelBuildingException (ex);
         }
diff --git a/src/main/java/com/helger/jcodemodel/writer/JCMWriter.java b/src/main/java/com/helger/jcodemodel/writer/JCMWriter.java
index db066a3c..12537c60 100644
--- a/src/main/java/com/helger/jcodemodel/writer/JCMWriter.java
+++ b/src/main/java/com/helger/jcodemodel/writer/JCMWriter.java
@@ -303,9 +303,9 @@ public class JCMWriter
   @Nonnull
   private JFormatter _createJavaSourceFileWriter (@Nonnull final AbstractCodeWriter aSrcWriter,
                                                   @Nonnull final JPackage aPackage,
-                                                  @Nonnull final String sClassName) throws IOException
+                                                  @Nonnull final String sClassFilename) throws IOException
   {
-    final SourcePrintWriter aWriter = aSrcWriter.openSource (aPackage, sClassName + ".java");
+    final SourcePrintWriter aWriter = aSrcWriter.openSource (aPackage, sClassFilename);
     final JFormatter ret = new JFormatter (aWriter, m_sIndentString);
     // Add all classes to not be imported (may be empty)
     ret.addDontImportClasses (m_aCM.getAllDontImportClasses ());
@@ -326,7 +326,7 @@ public class JCMWriter
         continue;
       }
 
-      try (final JFormatter f = _createJavaSourceFileWriter (aSrcWriter, aPackage, c.name ()))
+      try (final JFormatter f = _createJavaSourceFileWriter (aSrcWriter, aPackage, c.name () + ".java"))
       {
         f.writeClassFull (c);
       }
@@ -337,7 +337,7 @@ public class JCMWriter
     final JDocComment aJavaDoc = aPackage.javadoc ();
     if (!aAnnotations.isEmpty () || !aJavaDoc.isEmpty ())
     {
-      try (final IJFormatter f = _createJavaSourceFileWriter (aSrcWriter, aPackage, "package-info"))
+      try (final IJFormatter f = _createJavaSourceFileWriter (aSrcWriter, aPackage, "package-info.java"))
       {
         if (!aJavaDoc.isEmpty ())
           f.generable (aJavaDoc);
diff --git a/src/test/java/com/helger/jcodemodel/AnnotationUseFuncTest.java b/src/test/java/com/helger/jcodemodel/AnnotationUseFuncTest.java
index dc0e3ff7..21b8e259 100644
--- a/src/test/java/com/helger/jcodemodel/AnnotationUseFuncTest.java
+++ b/src/test/java/com/helger/jcodemodel/AnnotationUseFuncTest.java
@@ -107,11 +107,11 @@ public final class AnnotationUseFuncTest
    * }
    * </pre>
    *
-   * @throws JClassAlreadyExistsException
+   * @throws JCodeModelException
    *         internally only
    */
   @Test
-  public void testMain () throws JClassAlreadyExistsException
+  public void testMain () throws JCodeModelException
   {
     final JCodeModel cm = new JCodeModel ();
     final JDefinedClass cls = cm._class ("Test");
diff --git a/src/test/java/com/helger/jcodemodel/JAnnotationUseTest.java b/src/test/java/com/helger/jcodemodel/JAnnotationUseTest.java
index 125ec899..1205d303 100644
--- a/src/test/java/com/helger/jcodemodel/JAnnotationUseTest.java
+++ b/src/test/java/com/helger/jcodemodel/JAnnotationUseTest.java
@@ -56,7 +56,7 @@ import com.helger.jcodemodel.writer.JCMWriter;
 public final class JAnnotationUseTest
 {
   @Test
-  public void generatesGenericParam () throws JClassAlreadyExistsException
+  public void generatesGenericParam () throws JCodeModelException
   {
     final JCodeModel codeModel = new JCodeModel ();
     final JDefinedClass testClass = codeModel._class ("Test");
@@ -68,7 +68,7 @@ public final class JAnnotationUseTest
   }
 
   @Test
-  public void generatesGenericParam2 () throws JClassAlreadyExistsException
+  public void generatesGenericParam2 () throws JCodeModelException
   {
     final JCodeModel codeModel = new JCodeModel ();
     final JDefinedClass testClass = codeModel._class ("Test");
diff --git a/src/test/java/com/helger/jcodemodel/JCodeModelTest.java b/src/test/java/com/helger/jcodemodel/JCodeModelTest.java
index e2de90b9..7cd994d5 100644
--- a/src/test/java/com/helger/jcodemodel/JCodeModelTest.java
+++ b/src/test/java/com/helger/jcodemodel/JCodeModelTest.java
@@ -86,7 +86,7 @@ public final class JCodeModelTest
   }
 
   @Test
-  public void testCODEMODEL24 () throws JClassAlreadyExistsException
+  public void testCODEMODEL24 () throws JCodeModelException
   {
     final JCodeModel cm = new JCodeModel ();
     final JDefinedClass jClass = cm._class ("dummy", EClassType.INTERFACE);
@@ -95,7 +95,7 @@ public final class JCodeModelTest
   }
 
   @Test
-  public void testEmptyNarrowed () throws JClassAlreadyExistsException
+  public void testEmptyNarrowed () throws JCodeModelException
   {
     final JCodeModel cm = new JCodeModel ();
     final JDefinedClass jClass = cm._class ("EmptyNarrowed", EClassType.INTERFACE);
diff --git a/src/test/java/com/helger/jcodemodel/JLambdaMethodRefTest.java b/src/test/java/com/helger/jcodemodel/JLambdaMethodRefTest.java
index d952979a..733c34e0 100644
--- a/src/test/java/com/helger/jcodemodel/JLambdaMethodRefTest.java
+++ b/src/test/java/com/helger/jcodemodel/JLambdaMethodRefTest.java
@@ -72,7 +72,7 @@ public final class JLambdaMethodRefTest
   }
 
   @Test
-  public void testStaticMethodRef_JMethod () throws JClassAlreadyExistsException
+  public void testStaticMethodRef_JMethod () throws JCodeModelException
   {
     final JCodeModel cm = new JCodeModel ();
     final JDefinedClass cl = cm._class ("com.helger.test.LambdaTest");
@@ -99,7 +99,7 @@ public final class JLambdaMethodRefTest
   }
 
   @Test
-  public void testStaticMethodRef_New () throws JClassAlreadyExistsException
+  public void testStaticMethodRef_New () throws JCodeModelException
   {
     final JCodeModel cm = new JCodeModel ();
     final JDefinedClass cl = cm._class ("com.helger.test.LambdaTest");
@@ -130,7 +130,7 @@ public final class JLambdaMethodRefTest
   }
 
   @Test
-  public void testInstanceMethodRef_JMethod () throws JClassAlreadyExistsException
+  public void testInstanceMethodRef_JMethod () throws JCodeModelException
   {
     final JCodeModel cm = new JCodeModel ();
     final JDefinedClass cl = cm._class ("com.helger.test.LambdaTest");
@@ -151,7 +151,7 @@ public final class JLambdaMethodRefTest
   }
 
   @Test
-  public void testInvocationMethodRef_Name () throws JClassAlreadyExistsException
+  public void testInvocationMethodRef_Name () throws JCodeModelException
   {
     final JCodeModel cm = new JCodeModel ();
     final JDefinedClass cl = cm._class ("com.helger.test.LambdaInvocationMethodRefName");
@@ -167,7 +167,7 @@ public final class JLambdaMethodRefTest
   }
 
   @Test
-  public void testInvocationMethodRef_JMethod () throws JClassAlreadyExistsException
+  public void testInvocationMethodRef_JMethod () throws JCodeModelException
   {
     final JCodeModel cm = new JCodeModel ();
     final JDefinedClass cl = cm._class ("com.helger.test.LambdaInvocationMethodRefJMethod");
diff --git a/src/test/java/com/helger/jcodemodel/JLambdaTest.java b/src/test/java/com/helger/jcodemodel/JLambdaTest.java
index a2aa8b82..50e85a33 100644
--- a/src/test/java/com/helger/jcodemodel/JLambdaTest.java
+++ b/src/test/java/com/helger/jcodemodel/JLambdaTest.java
@@ -151,7 +151,7 @@ public final class JLambdaTest
   }
 
   @Test
-  public void testFullClass () throws JClassAlreadyExistsException
+  public void testFullClass () throws JCodeModelException
   {
     final JCodeModel cm = new JCodeModel ();
     final JDefinedClass cl = cm._package ("test.lambda")._class ("LambdaTest");
diff --git a/src/test/java/com/helger/jcodemodel/JResourceDirTest.java b/src/test/java/com/helger/jcodemodel/JResourceDirTest.java
new file mode 100644
index 00000000..79de2945
--- /dev/null
+++ b/src/test/java/com/helger/jcodemodel/JResourceDirTest.java
@@ -0,0 +1,80 @@
+package com.helger.jcodemodel;
+
+import static org.junit.Assert.fail;
+
+import java.nio.charset.StandardCharsets;
+
+import org.junit.Test;
+
+import com.helger.jcodemodel.fmt.JTextFile;
+
+/**
+ * Test class for class {@link JResourceDir}.
+ *
+ * @author guiguilechat
+ * @author Philip Helger
+ */
+public final class JResourceDirTest
+{
+  @Test (expected = IllegalArgumentException.class)
+  public void testAbsolutePath ()
+  {
+    final JCodeModel cm = new JCodeModel ();
+    // this should fail
+    cm.resourceDir ("/usr");
+  }
+
+  @Test (expected = IllegalArgumentException.class)
+  public void testDoubleSlash ()
+  {
+    final JCodeModel cm = new JCodeModel ();
+    // this should fail because of empty "in-between" directory
+    cm.resourceDir ("usr//bla");
+  }
+
+  @Test (expected = JResourceAlreadyExistsException.class)
+  public void testResNameCollision () throws JCodeModelException
+  {
+    final JCodeModel cm = new JCodeModel ();
+    cm.resourceDir ("my").addResourceFile (JTextFile.createFully ("File1", StandardCharsets.UTF_8, "bla"));
+    // Same name in same folder - error
+    cm.resourceDir ("my").addResourceFile (JTextFile.createFully ("File1", StandardCharsets.UTF_8, "bla"));
+  }
+
+  public void testResNameCollisionCaseInSensitive () throws JCodeModelException
+  {
+    if (JCodeModel.isFileSystemCaseSensitive ())
+    {
+      final JCodeModel cm = new JCodeModel ();
+      cm.resourceDir ("my").addResourceFile (JTextFile.createFully ("myFile", StandardCharsets.UTF_8, "bla"));
+      try
+      {
+        // Same upper case name in same folder - error
+        cm.resourceDir ("my").addResourceFile (JTextFile.createFully ("MYFILE", StandardCharsets.UTF_8, "bla"));
+        fail ();
+      }
+      catch (final JResourceAlreadyExistsException ex)
+      {
+        // expected
+      }
+    }
+  }
+
+  @Test (expected = JClassAlreadyExistsException.class)
+  public void testClassNameCollision1 () throws JCodeModelException
+  {
+    final JCodeModel cm = new JCodeModel ();
+    cm._package ("my")._class (JMod.PUBLIC, "Name");
+    // this should fail
+    cm.resourceDir ("my").addResourceFile (JTextFile.createFully ("Name.java", StandardCharsets.UTF_8, "bla"));
+  }
+
+  @Test (expected = JResourceAlreadyExistsException.class)
+  public void testClassNameCollision2 () throws JCodeModelException
+  {
+    final JCodeModel cm = new JCodeModel ();
+    cm.resourceDir ("my").addResourceFile (JTextFile.createFully ("Name.java", StandardCharsets.UTF_8, "bla"));
+    // should fail
+    cm._package ("my")._class (JMod.PUBLIC, "Name");
+  }
+}
diff --git a/src/test/java/com/helger/jcodemodel/JSwitchTest.java b/src/test/java/com/helger/jcodemodel/JSwitchTest.java
index fe94fc53..08b33570 100644
--- a/src/test/java/com/helger/jcodemodel/JSwitchTest.java
+++ b/src/test/java/com/helger/jcodemodel/JSwitchTest.java
@@ -52,7 +52,7 @@ import com.helger.jcodemodel.util.CodeModelTestsHelper;
 public final class JSwitchTest
 {
   @Test
-  public void testGenerate () throws JClassAlreadyExistsException
+  public void testGenerate () throws JCodeModelException
   {
     final JCodeModel cm = new JCodeModel ();
 
diff --git a/src/test/java/com/helger/jcodemodel/JTypeVarTest.java b/src/test/java/com/helger/jcodemodel/JTypeVarTest.java
index 0b869155..6f3a4a9b 100644
--- a/src/test/java/com/helger/jcodemodel/JTypeVarTest.java
+++ b/src/test/java/com/helger/jcodemodel/JTypeVarTest.java
@@ -56,7 +56,7 @@ import com.helger.jcodemodel.util.CodeModelTestsHelper;
 public final class JTypeVarTest
 {
   @Test
-  public void testBasic () throws JClassAlreadyExistsException
+  public void testBasic () throws JCodeModelException
   {
     final JCodeModel cm = new JCodeModel ();
     final JDefinedClass cls = cm._class ("Test");
@@ -66,8 +66,7 @@ public final class JTypeVarTest
     tv.bound (cm.ref (Serializable.class));
 
     assertEquals ("T extends java.lang.Comparable<T> & java.io.Serializable", CodeModelTestsHelper.toString (tv));
-    assertEquals ("public<T extends java.lang.Comparable<T> & java.io.Serializable> void foo() {\n" +
-                  "}\n",
+    assertEquals ("public<T extends java.lang.Comparable<T> & java.io.Serializable> void foo() {\n" + "}\n",
                   CodeModelTestsHelper.toString (m).replace ("\r", ""));
   }
 }
diff --git a/src/test/java/com/helger/jcodemodel/supplementary/issues/Issue74FuncTest.java b/src/test/java/com/helger/jcodemodel/supplementary/issues/Issue74FuncTest.java
index 0c17874b..fc4495ed 100644
--- a/src/test/java/com/helger/jcodemodel/supplementary/issues/Issue74FuncTest.java
+++ b/src/test/java/com/helger/jcodemodel/supplementary/issues/Issue74FuncTest.java
@@ -61,8 +61,7 @@ public final class Issue74FuncTest
   {
     final JCodeModel cm = new JCodeModel ();
     cm.resourceDir ("META-INF/services/")
-      .addResourceFile (new JTextFile ("Interface1", StandardCharsets.UTF_8))
-      .setContents ("Testing\n");
+      .addResourceFile (JTextFile.createFully ("Interface1", StandardCharsets.UTF_8, "Testing\n"));
     cm.resourceDir ("META-INF/services/")
       .addResourceFile (new JTextFile ("Interface2", StandardCharsets.UTF_8))
       .setContents ("Testing again\n");
