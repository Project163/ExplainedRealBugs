{"url":"https://api.github.com/repos/phax/jcodemodel/issues/70","repository_url":"https://api.github.com/repos/phax/jcodemodel","labels_url":"https://api.github.com/repos/phax/jcodemodel/issues/70/labels{/name}","comments_url":"https://api.github.com/repos/phax/jcodemodel/issues/70/comments","events_url":"https://api.github.com/repos/phax/jcodemodel/issues/70/events","html_url":"https://github.com/phax/jcodemodel/issues/70","id":499773397,"node_id":"MDU6SXNzdWU0OTk3NzMzOTc=","number":70,"title":"[proposal] check packages names","user":{"login":"guiguilechat","id":26408407,"node_id":"MDQ6VXNlcjI2NDA4NDA3","avatar_url":"https://avatars.githubusercontent.com/u/26408407?v=4","gravatar_id":"","url":"https://api.github.com/users/guiguilechat","html_url":"https://github.com/guiguilechat","followers_url":"https://api.github.com/users/guiguilechat/followers","following_url":"https://api.github.com/users/guiguilechat/following{/other_user}","gists_url":"https://api.github.com/users/guiguilechat/gists{/gist_id}","starred_url":"https://api.github.com/users/guiguilechat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guiguilechat/subscriptions","organizations_url":"https://api.github.com/users/guiguilechat/orgs","repos_url":"https://api.github.com/users/guiguilechat/repos","events_url":"https://api.github.com/users/guiguilechat/events{/privacy}","received_events_url":"https://api.github.com/users/guiguilechat/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":55904943,"node_id":"MDU6TGFiZWw1NTkwNDk0Mw==","url":"https://api.github.com/repos/phax/jcodemodel/labels/enhancement","name":"enhancement","color":"84b6eb","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"phax","id":196219,"node_id":"MDQ6VXNlcjE5NjIxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/196219?v=4","gravatar_id":"","url":"https://api.github.com/users/phax","html_url":"https://github.com/phax","followers_url":"https://api.github.com/users/phax/followers","following_url":"https://api.github.com/users/phax/following{/other_user}","gists_url":"https://api.github.com/users/phax/gists{/gist_id}","starred_url":"https://api.github.com/users/phax/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phax/subscriptions","organizations_url":"https://api.github.com/users/phax/orgs","repos_url":"https://api.github.com/users/phax/repos","events_url":"https://api.github.com/users/phax/events{/privacy}","received_events_url":"https://api.github.com/users/phax/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"phax","id":196219,"node_id":"MDQ6VXNlcjE5NjIxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/196219?v=4","gravatar_id":"","url":"https://api.github.com/users/phax","html_url":"https://github.com/phax","followers_url":"https://api.github.com/users/phax/followers","following_url":"https://api.github.com/users/phax/following{/other_user}","gists_url":"https://api.github.com/users/phax/gists{/gist_id}","starred_url":"https://api.github.com/users/phax/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phax/subscriptions","organizations_url":"https://api.github.com/users/phax/orgs","repos_url":"https://api.github.com/users/phax/repos","events_url":"https://api.github.com/users/phax/events{/privacy}","received_events_url":"https://api.github.com/users/phax/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":19,"created_at":"2019-09-28T13:29:58Z","updated_at":"2020-01-03T21:50:35Z","closed_at":"2019-09-30T21:06:51Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"# Issue\r\n\r\nThe JDefinedClass constructor checks the validity of the class name, starting here : \r\n\r\nhttps://github.com/phax/jcodemodel/blob/master/src/main/java/com/helger/jcodemodel/JDefinedClass.java#L214\r\n\r\nThe JPackage constructor, does not, here : \r\n \r\nhttps://github.com/phax/jcodemodel/blob/master/src/main/java/com/helger/jcodemodel/JPackage.java#L116\r\n\r\n# Proposal\r\n\r\nI propose to make the JPackage make a verification test\r\n\r\nhttps://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html\r\n\r\naccording to this : \r\n - sName must not be a reserved keyword\r\n - sName must not contain non-alphanumerical value besides the underscore\r\n - sName must not start with a number.\r\n - (optional) sName must not contain an upper-case character.\r\n\r\n# Implementation\r\n\r\nHere is how I personally do : \r\n\r\n## Reserved keyword\r\n\r\nI keep a list from https://docs.oracle.com/javase/tutorial/java/nutsandbolts/_keywords.html\r\n\r\n\t/** java keywords we can't use as a name for a package or a class */\r\n\tpublic static final Set<String> JAVA_RESERVED_KEYWORDS = Collections.unmodifiableSet(new HashSet<>(\r\n\t\t\tArrays.asList(\"abstract\", \"assert\", \"boolean\", \"break\", \"byte\", \"case\", \"catch\", \"char\", \"class\", \"const\",\r\n\t\t\t\t\t\"continue\", \"default\", \"do\", \"double\", \"else\", \"extends\", \"false\", \"final\", \"finally\", \"float\", \"for\", \"goto\",\r\n\t\t\t\t\t\"if\", \"implements\", \"import\", \"instanceof\", \"int\", \"interface\", \"long\", \"native\", \"new\", \"null\", \"package\",\r\n\t\t\t\t\t\"private\", \"protected\", \"public\", \"return\", \"short\", \"static\", \"strictfp\", \"super\", \"switch\", \"synchronized\",\r\n\t\t\t\t\t\"this\", \"throw\", \"throws\", \"transient\", \"true\", \"try\", \"void\", \"volatile\", \"while\")));\r\n\r\nThen I just check if the name is contained in that set.\r\n\r\n## All alphanumerical, start with non-numerical\r\n\r\n    public static final Pattern VALID_PACKAGE_NAME = Pattern.compile(\"[A-Za-z_][A-Za-z0-9_]*\");\r\n\r\nThen I just check if sName matches this pattern. It can accept \"_\" as a package name, not sure if correct.\r\n\r\n## Optional check lowercase\r\n\r\nAdd a boolean option in JCodeModel::ensurePackagesLowerCase(). default value should be false.\r\nThen create a new Pattern to match the package name\r\n\r\n    public static final Pattern VALID_LOWERCASE_PACKAGE_NAME = Pattern.compile(\"[a-z_][a-z0-9_]*\");\r\n\r\nTo test the name against.","closed_by":{"login":"phax","id":196219,"node_id":"MDQ6VXNlcjE5NjIxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/196219?v=4","gravatar_id":"","url":"https://api.github.com/users/phax","html_url":"https://github.com/phax","followers_url":"https://api.github.com/users/phax/followers","following_url":"https://api.github.com/users/phax/following{/other_user}","gists_url":"https://api.github.com/users/phax/gists{/gist_id}","starred_url":"https://api.github.com/users/phax/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phax/subscriptions","organizations_url":"https://api.github.com/users/phax/orgs","repos_url":"https://api.github.com/users/phax/repos","events_url":"https://api.github.com/users/phax/events{/privacy}","received_events_url":"https://api.github.com/users/phax/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/phax/jcodemodel/issues/70/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/phax/jcodemodel/issues/70/timeline","performed_via_github_app":null,"state_reason":"completed"}