{"url":"https://api.github.com/repos/laravel/framework/issues/52681","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/52681/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/52681/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/52681/events","html_url":"https://github.com/laravel/framework/issues/52681","id":2510489311,"node_id":"I_kwDOAHMwOs6Vowbf","number":52681,"title":"Str::trim changed Behavior ","user":{"login":"mathiasgrimmcycle","id":168722757,"node_id":"U_kgDOCg6BRQ","avatar_url":"https://avatars.githubusercontent.com/u/168722757?v=4","gravatar_id":"","url":"https://api.github.com/users/mathiasgrimmcycle","html_url":"https://github.com/mathiasgrimmcycle","followers_url":"https://api.github.com/users/mathiasgrimmcycle/followers","following_url":"https://api.github.com/users/mathiasgrimmcycle/following{/other_user}","gists_url":"https://api.github.com/users/mathiasgrimmcycle/gists{/gist_id}","starred_url":"https://api.github.com/users/mathiasgrimmcycle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mathiasgrimmcycle/subscriptions","organizations_url":"https://api.github.com/users/mathiasgrimmcycle/orgs","repos_url":"https://api.github.com/users/mathiasgrimmcycle/repos","events_url":"https://api.github.com/users/mathiasgrimmcycle/events{/privacy}","received_events_url":"https://api.github.com/users/mathiasgrimmcycle/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":132990999,"node_id":"MDU6TGFiZWwxMzI5OTA5OTk=","url":"https://api.github.com/repos/laravel/framework/labels/needs%20more%20info","name":"needs more info","color":"fbca04","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2024-09-06T13:50:48Z","updated_at":"2024-09-06T20:28:28Z","closed_at":"2024-09-06T20:28:28Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Laravel Version\r\n\r\n11.22.0\r\n\r\n### PHP Version\r\n\r\n8.3.10\r\n\r\n### Database Driver & Version\r\n\r\n_No response_\r\n\r\n### Description\r\n\r\nPreviously, on Laravel 10, the `str()->trim()->toString()` worked differently.\r\n\r\n### Steps To Reproduce\r\n\r\n```php\r\n\r\n$value = \" \" . chr(0) . \" \";\r\n\r\ndd(\r\n    \"version: \" . app()->version(),\r\n\r\n    \"using str::trim: \" .\r\n        str($value)\r\n            ->trim()\r\n            ->toString(),\r\n\r\n    \"using trim: \" . trim($value),\r\n\r\n    \"using preg_replace: \" .\r\n        preg_replace(\r\n            '~^[\\s\\x{FEFF}\\x{200B}\\x{200E}]+|[\\s\\x{FEFF}\\x{200B}\\x{200E}]+$~u',\r\n            \"\",\r\n            $value\r\n        ),\r\n\r\n    \"FIXED preg_replace: \" .\r\n        preg_replace(\r\n            '~^[\\s\\x{FEFF}\\x{200B}\\x{200E}]+|[\\s\\x{FEFF}\\x{200B}\\x{200E}\\x00]+$~u',\r\n            \"\",\r\n            $value\r\n        ),\r\n\r\n    // Laravel 10: true\r\n    str($value)\r\n        ->trim()\r\n        ->toString() === trim($value),\r\n\r\n    // Laravel 11: false\r\n    str($value)\r\n        ->trim()\r\n        ->toString() === trim($value)\r\n);\r\n\r\n```\r\n\r\n## Output Laravel 10\r\n```\r\n\"version: 10.48.17\"\r\n\"using str::trim: \"\r\n\"using trim: \"\r\n\"using preg_replace: \\x00\"\r\n\"FIXED preg_replace: \"\r\ntrue\r\ntrue\r\n```\r\n\r\n## Output Laravel 11\r\n```\r\n\"version: 11.22.0\"\r\n\"using str::trim: \\x00\"\r\n\"using trim: \"\r\n\"using preg_replace: \\x00\"\r\n\"FIXED preg_replace: \"\r\nfalse\r\nfalse\r\n```\r\n\r\nWe could either use this regex addition `\\x00` or do something like\r\n```php\r\n// added trim here\r\npreg_replace('~^[\\s\\x{FEFF}\\x{200B}\\x{200E}]+|[\\s\\x{FEFF}\\x{200B}\\x{200E}]+$~u', '', trim($value))```\r\n\r\n","closed_by":{"login":"taylorotwell","id":463230,"node_id":"MDQ6VXNlcjQ2MzIzMA==","avatar_url":"https://avatars.githubusercontent.com/u/463230?v=4","gravatar_id":"","url":"https://api.github.com/users/taylorotwell","html_url":"https://github.com/taylorotwell","followers_url":"https://api.github.com/users/taylorotwell/followers","following_url":"https://api.github.com/users/taylorotwell/following{/other_user}","gists_url":"https://api.github.com/users/taylorotwell/gists{/gist_id}","starred_url":"https://api.github.com/users/taylorotwell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/taylorotwell/subscriptions","organizations_url":"https://api.github.com/users/taylorotwell/orgs","repos_url":"https://api.github.com/users/taylorotwell/repos","events_url":"https://api.github.com/users/taylorotwell/events{/privacy}","received_events_url":"https://api.github.com/users/taylorotwell/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/laravel/framework/issues/52681/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/laravel/framework/issues/52681/timeline","performed_via_github_app":null,"state_reason":"completed"}