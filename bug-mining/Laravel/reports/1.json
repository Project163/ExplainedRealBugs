{"url":"https://api.github.com/repos/laravel/framework/issues/47727","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/47727/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/47727/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/47727/events","html_url":"https://github.com/laravel/framework/issues/47727","id":1801039101,"node_id":"I_kwDOAHMwOs5rWaz9","number":47727,"title":"Http\\Client\\Request data-method has incomplete return type or returns wrong value","user":{"login":"renky","id":6528960,"node_id":"MDQ6VXNlcjY1Mjg5NjA=","avatar_url":"https://avatars.githubusercontent.com/u/6528960?v=4","gravatar_id":"","url":"https://api.github.com/users/renky","html_url":"https://github.com/renky","followers_url":"https://api.github.com/users/renky/followers","following_url":"https://api.github.com/users/renky/following{/other_user}","gists_url":"https://api.github.com/users/renky/gists{/gist_id}","starred_url":"https://api.github.com/users/renky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/renky/subscriptions","organizations_url":"https://api.github.com/users/renky/orgs","repos_url":"https://api.github.com/users/renky/repos","events_url":"https://api.github.com/users/renky/events{/privacy}","received_events_url":"https://api.github.com/users/renky/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-07-12T13:54:47Z","updated_at":"2023-07-13T07:42:08Z","closed_at":"2023-07-13T07:42:08Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Laravel Version\r\n\r\n10.13.5\r\n\r\n### PHP Version\r\n\r\n8.2.x\r\n\r\n### Database Driver & Version\r\n\r\nMysql 5.7\r\n\r\n### Description\r\n\r\nFile Http/Client/Request\r\nmethod: data() and json()\r\n\r\nThe Methods both have the return type array (declared in PHPDoc @return array).\r\n\r\nBut there is a possibility that it returns null - in case of a non-valid json body.\r\njson_decode will return null if the content cannot be decoded or the depth is to high.\r\n\r\nso either the return type shall be changed to ?array or the json function should be extended like so\r\n```\r\n$this->data = json_decode($this->body(), true) ?? [];\r\n```\r\n\r\n\r\n\r\nIt isn't a huge issue, but when using PHPStan and doing something like that:\r\n```\r\n$data = $request->data() ?? [];\r\n```\r\nit is always complaining about left part can never be null due to return values...\r\n\r\n","closed_by":{"login":"driesvints","id":594614,"node_id":"MDQ6VXNlcjU5NDYxNA==","avatar_url":"https://avatars.githubusercontent.com/u/594614?v=4","gravatar_id":"","url":"https://api.github.com/users/driesvints","html_url":"https://github.com/driesvints","followers_url":"https://api.github.com/users/driesvints/followers","following_url":"https://api.github.com/users/driesvints/following{/other_user}","gists_url":"https://api.github.com/users/driesvints/gists{/gist_id}","starred_url":"https://api.github.com/users/driesvints/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/driesvints/subscriptions","organizations_url":"https://api.github.com/users/driesvints/orgs","repos_url":"https://api.github.com/users/driesvints/repos","events_url":"https://api.github.com/users/driesvints/events{/privacy}","received_events_url":"https://api.github.com/users/driesvints/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/laravel/framework/issues/47727/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/laravel/framework/issues/47727/timeline","performed_via_github_app":null,"state_reason":"completed"}