{"url":"https://api.github.com/repos/laravel/framework/issues/56760","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/56760/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/56760/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/56760/events","html_url":"https://github.com/laravel/framework/issues/56760","id":3354933031,"node_id":"I_kwDOAHMwOs7H-Dcn","number":56760,"title":"Error when try to validate date format when date_default_timezone_set is set for some specific timezones.","user":{"login":"alustau","id":2944692,"node_id":"MDQ6VXNlcjI5NDQ2OTI=","avatar_url":"https://avatars.githubusercontent.com/u/2944692?v=4","gravatar_id":"","url":"https://api.github.com/users/alustau","html_url":"https://github.com/alustau","followers_url":"https://api.github.com/users/alustau/followers","following_url":"https://api.github.com/users/alustau/following{/other_user}","gists_url":"https://api.github.com/users/alustau/gists{/gist_id}","starred_url":"https://api.github.com/users/alustau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alustau/subscriptions","organizations_url":"https://api.github.com/users/alustau/orgs","repos_url":"https://api.github.com/users/alustau/repos","events_url":"https://api.github.com/users/alustau/events{/privacy}","received_events_url":"https://api.github.com/users/alustau/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":24480042,"node_id":"MDU6TGFiZWwyNDQ4MDA0Mg==","url":"https://api.github.com/repos/laravel/framework/labels/bug","name":"bug","color":"ee0701","default":true,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2025-08-26T09:43:55Z","updated_at":"2025-09-02T17:50:03Z","closed_at":"2025-08-26T16:27:08Z","author_association":"CONTRIBUTOR","type":{"id":153191,"node_id":"IT_kwDOAA6eeM4AAlZn","name":"Bug","description":"An unexpected problem or behavior","color":"red","created_at":"2024-01-25T09:16:16Z","updated_at":"2024-07-26T10:05:51Z","is_enabled":true},"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Laravel Version\n\n12.*\n\n### PHP Version\n\n8.4.*\n\n### Database Driver & Version\n\n_No response_\n\n### Description\n\ndate_format:Y-m-d H:i:s fails for datetimes that fall into DST transitions when the app timezone (or date_default_timezone_set) is set to a DST-observing zone (e.g. Europe/Amsterdam, Europe/London, Europe/Athens).\n\nDuring DST start, certain local times are non-existent (e.g. in Amsterdam on 2025-03-30, 02:00:00 → 02:59:59 does not exist). The validator appears to parse and normalize the input using the current timezone, so DateTime::createFromFormat('!Y-m-d H:i:s', '2025-03-30 02:00:00') becomes 2025-03-30 03:00:00 (normalized), which then fails the strict equality check in the validation rule—even though the input string matches the declared format exactly.\n\nIn short: DST normalization changes the parsed time and the rule reports the format as invalid.\n\n### Steps To Reproduce\n\n1- Set the PHP default timezone to a DST zone (Amsterdam shown here).\n2- Validate a string that matches Y-m-d H:i:s and falls in the DST “gap”.\n\n```php\n<?php\n\nuse Illuminate\\Support\\Facades\\Validator;\n\ndate_default_timezone_set('Europe/Amsterdam');\n\n$payload = ['ts' => '2025-03-30 02:00:00']; // Local time that doesn't exist due to DST shift (+1h)\n$rules   = ['ts' => 'date_format:Y-m-d H:i:s'];\n\n$validator = Validator::make($payload, $rules);\n\nvar_dump($validator->passes()); // false\nvar_dump($validator->errors()->all());\n// [\"The ts does not match the format Y-m-d H:i:s.\"]\n```\n\nScript to find which date will fail:\n```php\n<?php\ndate_default_timezone_set('Europe/Amsterdam');\n\n$year = 2025;\n\nfor ($month = 1; $month <= 12; $month++) {\n    $daysInMonth = match ($month) {\n        1, 3, 5, 7, 8, 10, 12 => 31,\n        4, 6, 9, 11 => 30,\n        2 => 28,\n        default => throw new Exception(\"Invalid month: $month\"),\n    };\n\n    for ($day = 1; $day <= $daysInMonth; $day++) {\n        for ($hour = 0; $hour < 24; $hour++) {\n            \n            $date = sprintf(\"$year-%02d-%02d %02d:00:00\", $month, $day, $hour);\n\n            $dateFormated = DateTime::createFromFormat('!Y-m-d H:i:s', $date)->format('Y-m-d H:i:s');\n\n            if ($dateFormated !== $date) {\n                echo \"Date that will thrown exception: $dateFormated !== $date\\n\";\n            }\n        }\n    }\n}\n```\n\n## Additional Context\n\nTimezones which breaks is when it has a summer time and it's +x","closed_by":{"login":"taylorotwell","id":463230,"node_id":"MDQ6VXNlcjQ2MzIzMA==","avatar_url":"https://avatars.githubusercontent.com/u/463230?v=4","gravatar_id":"","url":"https://api.github.com/users/taylorotwell","html_url":"https://github.com/taylorotwell","followers_url":"https://api.github.com/users/taylorotwell/followers","following_url":"https://api.github.com/users/taylorotwell/following{/other_user}","gists_url":"https://api.github.com/users/taylorotwell/gists{/gist_id}","starred_url":"https://api.github.com/users/taylorotwell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/taylorotwell/subscriptions","organizations_url":"https://api.github.com/users/taylorotwell/orgs","repos_url":"https://api.github.com/users/taylorotwell/repos","events_url":"https://api.github.com/users/taylorotwell/events{/privacy}","received_events_url":"https://api.github.com/users/taylorotwell/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/laravel/framework/issues/56760/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/laravel/framework/issues/56760/timeline","performed_via_github_app":null,"state_reason":"completed"}