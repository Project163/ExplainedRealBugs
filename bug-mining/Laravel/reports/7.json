{"url":"https://api.github.com/repos/laravel/framework/issues/49941","repository_url":"https://api.github.com/repos/laravel/framework","labels_url":"https://api.github.com/repos/laravel/framework/issues/49941/labels{/name}","comments_url":"https://api.github.com/repos/laravel/framework/issues/49941/comments","events_url":"https://api.github.com/repos/laravel/framework/issues/49941/events","html_url":"https://github.com/laravel/framework/issues/49941","id":2112383147,"node_id":"I_kwDOAHMwOs596Gir","number":49941,"title":"Artisan serve doesn't kill it's subprocess if killed with a signal instead of Ctrl + C","user":{"login":"Tofandel","id":6115458,"node_id":"MDQ6VXNlcjYxMTU0NTg=","avatar_url":"https://avatars.githubusercontent.com/u/6115458?v=4","gravatar_id":"","url":"https://api.github.com/users/Tofandel","html_url":"https://github.com/Tofandel","followers_url":"https://api.github.com/users/Tofandel/followers","following_url":"https://api.github.com/users/Tofandel/following{/other_user}","gists_url":"https://api.github.com/users/Tofandel/gists{/gist_id}","starred_url":"https://api.github.com/users/Tofandel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tofandel/subscriptions","organizations_url":"https://api.github.com/users/Tofandel/orgs","repos_url":"https://api.github.com/users/Tofandel/repos","events_url":"https://api.github.com/users/Tofandel/events{/privacy}","received_events_url":"https://api.github.com/users/Tofandel/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-02-01T12:19:37Z","updated_at":"2024-02-01T13:19:48Z","closed_at":"2024-02-01T13:19:48Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Laravel Version\r\n\r\n10.4.1\r\n\r\n### PHP Version\r\n\r\n8.3\r\n\r\n### Database Driver & Version\r\n\r\n_No response_\r\n\r\n### Description\r\n\r\nWhen running `php artisan serve` it creates a subprocess for the server, but it seems to simply forward all it's input to the subprocess which is only listening for Ctrl + C on the keyboard to close, this is is not POSIX compliant\r\n\r\nAs such when we kill the `php artisan serve` command it doesn't do any cleanup itself and the subprocess keeps running\r\n\r\n### Steps To Reproduce\r\n\r\n1. Run `php artisan serve`\r\n2. Open a second terminal\r\n3. Run `ps aux` and get the pid of `php artisan serve`\r\n![image](https://github.com/laravel/framework/assets/6115458/299af716-1e25-4abe-aa6e-3535257ca6e5)\r\n4. Run `kill -SIGTINT $the_pid` which should be equivalent to a Ctrl + C signal\r\n5. Check `ps aux` and notice that the main process is gone but the subprocess is still there\r\n![image](https://github.com/laravel/framework/assets/6115458/e68bfdcb-e9ba-4850-8f4f-7ec36c094d0d)\r\n\r\nThis is a big problem when spawning `php artisan serve` from within another program, because programs should only use signals to kill their offsprings\r\n\r\n","closed_by":{"login":"driesvints","id":594614,"node_id":"MDQ6VXNlcjU5NDYxNA==","avatar_url":"https://avatars.githubusercontent.com/u/594614?v=4","gravatar_id":"","url":"https://api.github.com/users/driesvints","html_url":"https://github.com/driesvints","followers_url":"https://api.github.com/users/driesvints/followers","following_url":"https://api.github.com/users/driesvints/following{/other_user}","gists_url":"https://api.github.com/users/driesvints/gists{/gist_id}","starred_url":"https://api.github.com/users/driesvints/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/driesvints/subscriptions","organizations_url":"https://api.github.com/users/driesvints/orgs","repos_url":"https://api.github.com/users/driesvints/repos","events_url":"https://api.github.com/users/driesvints/events{/privacy}","received_events_url":"https://api.github.com/users/driesvints/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/laravel/framework/issues/49941/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/laravel/framework/issues/49941/timeline","performed_via_github_app":null,"state_reason":"completed"}