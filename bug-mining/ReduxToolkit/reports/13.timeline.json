[{"url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/comments/923187977","html_url":"https://github.com/reduxjs/redux-toolkit/issues/1530#issuecomment-923187977","issue_url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/1530","id":923187977,"node_id":"IC_kwDOB2ACAs43BrsJ","user":{"login":"phryneas","id":4282439,"node_id":"MDQ6VXNlcjQyODI0Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/4282439?v=4","gravatar_id":"","url":"https://api.github.com/users/phryneas","html_url":"https://github.com/phryneas","followers_url":"https://api.github.com/users/phryneas/followers","following_url":"https://api.github.com/users/phryneas/following{/other_user}","gists_url":"https://api.github.com/users/phryneas/gists{/gist_id}","starred_url":"https://api.github.com/users/phryneas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phryneas/subscriptions","organizations_url":"https://api.github.com/users/phryneas/orgs","repos_url":"https://api.github.com/users/phryneas/repos","events_url":"https://api.github.com/users/phryneas/events{/privacy}","received_events_url":"https://api.github.com/users/phryneas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-20T18:50:04Z","updated_at":"2021-09-20T18:50:04Z","body":"Hmm, the questions is really what the best - most correct - behaviour would be. If it's not refetching that data, it might grow stale and not everybody uses `refetchOnMountOrArgChange`.\r\n\r\nThe \"cleanest\" way I see for this would be to just remove that stale data from the store, but that would maybe not be desirable for everyone as well :thinking:.\r\n\r\nMaybe we could make it configurable between\r\n* keep\r\n* refetch\r\n* delete\r\n?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/comments/923187977/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"phryneas","id":4282439,"node_id":"MDQ6VXNlcjQyODI0Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/4282439?v=4","gravatar_id":"","url":"https://api.github.com/users/phryneas","html_url":"https://github.com/phryneas","followers_url":"https://api.github.com/users/phryneas/followers","following_url":"https://api.github.com/users/phryneas/following{/other_user}","gists_url":"https://api.github.com/users/phryneas/gists{/gist_id}","starred_url":"https://api.github.com/users/phryneas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phryneas/subscriptions","organizations_url":"https://api.github.com/users/phryneas/orgs","repos_url":"https://api.github.com/users/phryneas/repos","events_url":"https://api.github.com/users/phryneas/events{/privacy}","received_events_url":"https://api.github.com/users/phryneas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/comments/923678155","html_url":"https://github.com/reduxjs/redux-toolkit/issues/1530#issuecomment-923678155","issue_url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/1530","id":923678155,"node_id":"IC_kwDOB2ACAs43DjXL","user":{"login":"saschametz","id":37977643,"node_id":"MDQ6VXNlcjM3OTc3NjQz","avatar_url":"https://avatars.githubusercontent.com/u/37977643?v=4","gravatar_id":"","url":"https://api.github.com/users/saschametz","html_url":"https://github.com/saschametz","followers_url":"https://api.github.com/users/saschametz/followers","following_url":"https://api.github.com/users/saschametz/following{/other_user}","gists_url":"https://api.github.com/users/saschametz/gists{/gist_id}","starred_url":"https://api.github.com/users/saschametz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saschametz/subscriptions","organizations_url":"https://api.github.com/users/saschametz/orgs","repos_url":"https://api.github.com/users/saschametz/repos","events_url":"https://api.github.com/users/saschametz/events{/privacy}","received_events_url":"https://api.github.com/users/saschametz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-21T06:25:12Z","updated_at":"2021-09-21T06:25:12Z","body":"I'm used to react-query where it only fetches the mounted queries on refocus. But I see this may not be the best solution because `refetchOnMountOrArgChange` is not active by default.\r\n\r\nI was actually surprised at the number of queries on refocus. I just spotted it by accident and I think this can happen to others as well, that they don't even know that they may produce a lot of queries by using `refetchOnFocus`. Would it be an option to change the default value of `refetchOnMountOrArgChange` to `true` so that the default behavior of `refetchOnFocus` refetches only mounted queries?\r\n\r\nHaving the option between keeping the stale data or refetching it for `refetchOnFocus` sounds good to me. I'm not sure about the delete option, though, because if you click on another tab for just one second, the cached data is already deleted.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/comments/923678155/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":2},"performed_via_github_app":null,"event":"commented","actor":{"login":"saschametz","id":37977643,"node_id":"MDQ6VXNlcjM3OTc3NjQz","avatar_url":"https://avatars.githubusercontent.com/u/37977643?v=4","gravatar_id":"","url":"https://api.github.com/users/saschametz","html_url":"https://github.com/saschametz","followers_url":"https://api.github.com/users/saschametz/followers","following_url":"https://api.github.com/users/saschametz/following{/other_user}","gists_url":"https://api.github.com/users/saschametz/gists{/gist_id}","starred_url":"https://api.github.com/users/saschametz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saschametz/subscriptions","organizations_url":"https://api.github.com/users/saschametz/orgs","repos_url":"https://api.github.com/users/saschametz/repos","events_url":"https://api.github.com/users/saschametz/events{/privacy}","received_events_url":"https://api.github.com/users/saschametz/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5508519186,"node_id":"LE_lADOB2ACAs47rT_fzwAAAAFIVVUS","url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/events/5508519186","actor":{"login":"markerikson","id":1128784,"node_id":"MDQ6VXNlcjExMjg3ODQ=","avatar_url":"https://avatars.githubusercontent.com/u/1128784?v=4","gravatar_id":"","url":"https://api.github.com/users/markerikson","html_url":"https://github.com/markerikson","followers_url":"https://api.github.com/users/markerikson/followers","following_url":"https://api.github.com/users/markerikson/following{/other_user}","gists_url":"https://api.github.com/users/markerikson/gists{/gist_id}","starred_url":"https://api.github.com/users/markerikson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markerikson/subscriptions","organizations_url":"https://api.github.com/users/markerikson/orgs","repos_url":"https://api.github.com/users/markerikson/repos","events_url":"https://api.github.com/users/markerikson/events{/privacy}","received_events_url":"https://api.github.com/users/markerikson/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-10-23T17:36:00Z","label":{"name":"rtk-query","color":"33DA90"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/comments/1006508777","html_url":"https://github.com/reduxjs/redux-toolkit/issues/1530#issuecomment-1006508777","issue_url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/1530","id":1006508777,"node_id":"IC_kwDOB2ACAs47_hrp","user":{"login":"AlexanderArvidsson","id":2972103,"node_id":"MDQ6VXNlcjI5NzIxMDM=","avatar_url":"https://avatars.githubusercontent.com/u/2972103?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderArvidsson","html_url":"https://github.com/AlexanderArvidsson","followers_url":"https://api.github.com/users/AlexanderArvidsson/followers","following_url":"https://api.github.com/users/AlexanderArvidsson/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderArvidsson/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderArvidsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderArvidsson/subscriptions","organizations_url":"https://api.github.com/users/AlexanderArvidsson/orgs","repos_url":"https://api.github.com/users/AlexanderArvidsson/repos","events_url":"https://api.github.com/users/AlexanderArvidsson/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderArvidsson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-06T11:39:49Z","updated_at":"2022-01-06T12:14:30Z","body":"I am also noticing this problem and after reading https://github.com/reduxjs/redux-toolkit/issues/1409 it seems like this logic observed here is contradictory to the arguments made in that issue.\r\n\r\nIn that issue, it is mentioned that revalidation only occurs if there are active subscribers to the data. However, here, when focusing, it will refetch ALL endpoints regardless if there are any subscribers.\r\n\r\nI am using the following options on my **API slice** (which means ALL queries use this):\r\n```\r\n  refetchOnMountOrArgChange: 1,\r\n  refetchOnFocus: true,\r\n  refetchOnReconnect: true,\r\n```\r\nI am seeing LOTS of executeQuery actions for endpoints that clearly have no subscribers. Looking in the state before focusing the window, the majority of endpoints have no subscribers. When refocusing, all endpoints are refetched.\r\n\r\nI am noticing, however, that this might actually be a bug.\r\nAfter leaving the page that initiates certain queries and removing the active subscribers, a part of my state looks like this:\r\n![image](https://user-images.githubusercontent.com/2972103/148377469-eef77dad-4fbb-4094-9c63-35a5a2445112.png)\r\n\r\nIf I refresh the page, it looks like this:\r\n![image](https://user-images.githubusercontent.com/2972103/148377576-3594aa7f-425c-493a-a1f8-96fa0b942be9.png)\r\n\r\nClearly, the refetchOnFocus option does not check if the subscription is empty, rather it checks if it exists (empty object counts as existing).\r\n\r\nIs this incorrect behavior?\r\n\r\n--------------\r\n\r\nThe offending code is [here](https://github.com/reduxjs/redux-toolkit/blob/2ff1fa4364ce0dfa82dbbd3187aa0c63e57d5582/packages/toolkit/src/query/core/buildMiddleware/windowEventHandling.ts#L38):\r\n```\r\n        if (\r\n          !subscriptionSubState ||\r\n          !querySubState ||\r\n          querySubState.status === QueryStatus.uninitialized\r\n        )\r\n          return\r\n```\r\nThis does not check if the subscription sub state is **empty**, which it should?\r\n\r\nHow about adding a check `Object.keys(subscriptionSubState).length === 0` here?\r\n\r\n---------------\r\n~An alternative solution would be to make sure the subscription subtree removes its key rather than setting it to `{}`.\r\nHowever, looking at the code [here](https://github.com/reduxjs/redux-toolkit/blob/db0d7dc20939b62f8c59631cc030575b78642296/packages/toolkit/src/query/core/buildMiddleware/cacheCollection.ts#L99) it seems like this should already be handled?~\r\nScratch that, keepUnusedDataFor clears it after a while.\r\nBut shouldn't the refetchOnFocus check if there are active subscriptions regardless?\r\n\r\n\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/comments/1006508777/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AlexanderArvidsson","id":2972103,"node_id":"MDQ6VXNlcjI5NzIxMDM=","avatar_url":"https://avatars.githubusercontent.com/u/2972103?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderArvidsson","html_url":"https://github.com/AlexanderArvidsson","followers_url":"https://api.github.com/users/AlexanderArvidsson/followers","following_url":"https://api.github.com/users/AlexanderArvidsson/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderArvidsson/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderArvidsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderArvidsson/subscriptions","organizations_url":"https://api.github.com/users/AlexanderArvidsson/orgs","repos_url":"https://api.github.com/users/AlexanderArvidsson/repos","events_url":"https://api.github.com/users/AlexanderArvidsson/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderArvidsson/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/comments/1024998390","html_url":"https://github.com/reduxjs/redux-toolkit/issues/1530#issuecomment-1024998390","issue_url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/1530","id":1024998390,"node_id":"IC_kwDOB2ACAs49GDv2","user":{"login":"AlexanderArvidsson","id":2972103,"node_id":"MDQ6VXNlcjI5NzIxMDM=","avatar_url":"https://avatars.githubusercontent.com/u/2972103?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderArvidsson","html_url":"https://github.com/AlexanderArvidsson","followers_url":"https://api.github.com/users/AlexanderArvidsson/followers","following_url":"https://api.github.com/users/AlexanderArvidsson/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderArvidsson/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderArvidsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderArvidsson/subscriptions","organizations_url":"https://api.github.com/users/AlexanderArvidsson/orgs","repos_url":"https://api.github.com/users/AlexanderArvidsson/repos","events_url":"https://api.github.com/users/AlexanderArvidsson/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderArvidsson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-29T22:28:22Z","updated_at":"2022-01-29T22:28:22Z","body":"Any progress on this?\r\n\r\nThis seems like it's a critical bug as it is refetching queries that have no active subscriptions **which is really should not**.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/comments/1024998390/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AlexanderArvidsson","id":2972103,"node_id":"MDQ6VXNlcjI5NzIxMDM=","avatar_url":"https://avatars.githubusercontent.com/u/2972103?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderArvidsson","html_url":"https://github.com/AlexanderArvidsson","followers_url":"https://api.github.com/users/AlexanderArvidsson/followers","following_url":"https://api.github.com/users/AlexanderArvidsson/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderArvidsson/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderArvidsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderArvidsson/subscriptions","organizations_url":"https://api.github.com/users/AlexanderArvidsson/orgs","repos_url":"https://api.github.com/users/AlexanderArvidsson/repos","events_url":"https://api.github.com/users/AlexanderArvidsson/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderArvidsson/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5975596715,"node_id":"REFE_lADOB2ACAs47rT_fzwAAAAFkLF6r","url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/events/5975596715","actor":{"login":"AlexanderArvidsson","id":2972103,"node_id":"MDQ6VXNlcjI5NzIxMDM=","avatar_url":"https://avatars.githubusercontent.com/u/2972103?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderArvidsson","html_url":"https://github.com/AlexanderArvidsson","followers_url":"https://api.github.com/users/AlexanderArvidsson/followers","following_url":"https://api.github.com/users/AlexanderArvidsson/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderArvidsson/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderArvidsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderArvidsson/subscriptions","organizations_url":"https://api.github.com/users/AlexanderArvidsson/orgs","repos_url":"https://api.github.com/users/AlexanderArvidsson/repos","events_url":"https://api.github.com/users/AlexanderArvidsson/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderArvidsson/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"e929ef30a450c995379025af48a19900be03f34e","commit_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/commits/e929ef30a450c995379025af48a19900be03f34e","created_at":"2022-01-29T22:32:22Z","performed_via_github_app":null},{"actor":{"login":"AlexanderArvidsson","id":2972103,"node_id":"MDQ6VXNlcjI5NzIxMDM=","avatar_url":"https://avatars.githubusercontent.com/u/2972103?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderArvidsson","html_url":"https://github.com/AlexanderArvidsson","followers_url":"https://api.github.com/users/AlexanderArvidsson/followers","following_url":"https://api.github.com/users/AlexanderArvidsson/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderArvidsson/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderArvidsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderArvidsson/subscriptions","organizations_url":"https://api.github.com/users/AlexanderArvidsson/orgs","repos_url":"https://api.github.com/users/AlexanderArvidsson/repos","events_url":"https://api.github.com/users/AlexanderArvidsson/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderArvidsson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-29T22:32:39Z","updated_at":"2022-01-29T22:32:39Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/issues/1","repository_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit","labels_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/issues/1/labels{/name}","comments_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/issues/1/comments","events_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/issues/1/events","html_url":"https://github.com/AlexanderArvidsson/redux-toolkit/pull/1","id":1118343018,"node_id":"PR_kwDOGwhgUc4xyH4Q","number":1,"title":"Refetch should not happen if no active subscribers","user":{"login":"AlexanderArvidsson","id":2972103,"node_id":"MDQ6VXNlcjI5NzIxMDM=","avatar_url":"https://avatars.githubusercontent.com/u/2972103?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderArvidsson","html_url":"https://github.com/AlexanderArvidsson","followers_url":"https://api.github.com/users/AlexanderArvidsson/followers","following_url":"https://api.github.com/users/AlexanderArvidsson/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderArvidsson/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderArvidsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderArvidsson/subscriptions","organizations_url":"https://api.github.com/users/AlexanderArvidsson/orgs","repos_url":"https://api.github.com/users/AlexanderArvidsson/repos","events_url":"https://api.github.com/users/AlexanderArvidsson/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderArvidsson/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-01-29T22:32:38Z","updated_at":"2022-02-01T14:04:00Z","closed_at":null,"author_association":"OWNER","active_lock_reason":null,"draft":false,"repository":{"id":453533777,"node_id":"R_kgDOGwhgUQ","name":"redux-toolkit","full_name":"AlexanderArvidsson/redux-toolkit","private":false,"owner":{"login":"AlexanderArvidsson","id":2972103,"node_id":"MDQ6VXNlcjI5NzIxMDM=","avatar_url":"https://avatars.githubusercontent.com/u/2972103?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderArvidsson","html_url":"https://github.com/AlexanderArvidsson","followers_url":"https://api.github.com/users/AlexanderArvidsson/followers","following_url":"https://api.github.com/users/AlexanderArvidsson/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderArvidsson/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderArvidsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderArvidsson/subscriptions","organizations_url":"https://api.github.com/users/AlexanderArvidsson/orgs","repos_url":"https://api.github.com/users/AlexanderArvidsson/repos","events_url":"https://api.github.com/users/AlexanderArvidsson/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderArvidsson/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/AlexanderArvidsson/redux-toolkit","description":"The official, opinionated, batteries-included toolset for efficient Redux development","fork":true,"url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit","forks_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/forks","keys_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/keys{/key_id}","collaborators_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/teams","hooks_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/hooks","issue_events_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/issues/events{/number}","events_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/events","assignees_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/assignees{/user}","branches_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/branches{/branch}","tags_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/tags","blobs_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/git/refs{/sha}","trees_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/git/trees{/sha}","statuses_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/statuses/{sha}","languages_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/languages","stargazers_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/stargazers","contributors_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/contributors","subscribers_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/subscribers","subscription_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/subscription","commits_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/commits{/sha}","git_commits_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/git/commits{/sha}","comments_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/comments{/number}","issue_comment_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/issues/comments{/number}","contents_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/contents/{+path}","compare_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/compare/{base}...{head}","merges_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/merges","archive_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/downloads","issues_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/issues{/number}","pulls_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/pulls{/number}","milestones_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/milestones{/number}","notifications_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/labels{/name}","releases_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/releases{/id}","deployments_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/deployments","created_at":"2022-01-29T22:28:29Z","updated_at":"2022-01-29T18:55:07Z","pushed_at":"2022-02-01T14:04:01Z","git_url":"git://github.com/AlexanderArvidsson/redux-toolkit.git","ssh_url":"git@github.com:AlexanderArvidsson/redux-toolkit.git","clone_url":"https://github.com/AlexanderArvidsson/redux-toolkit.git","svn_url":"https://github.com/AlexanderArvidsson/redux-toolkit","homepage":"https://redux-toolkit.js.org","size":11955,"stargazers_count":0,"watchers_count":0,"language":null,"has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":0,"open_issues":1,"watchers":0,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/pulls/1","html_url":"https://github.com/AlexanderArvidsson/redux-toolkit/pull/1","diff_url":"https://github.com/AlexanderArvidsson/redux-toolkit/pull/1.diff","patch_url":"https://github.com/AlexanderArvidsson/redux-toolkit/pull/1.patch","merged_at":null},"body":"Fixes #1530\r\n\r\nAll logic that checks if there are active subscriptions in the code does a falsey check as well as a keys length check on the subscription sub state, except for the code that refetches valid queries. \r\n[Here is an example from the handleUnsubscribe function.](https://github.com/reduxjs/redux-toolkit/blob/master/packages/toolkit/src/query/core/buildMiddleware/cacheCollection.ts#L98)\r\n[Here is another from invalidateTags.](https://github.com/reduxjs/redux-toolkit/blob/d4e95caa26ea1c76a1ecead8f09b1897b4444d40/packages/toolkit/src/query/core/buildMiddleware/invalidationByTags.ts#L75)\r\nThis PR includes the same check to resolve this issue. See #1530 for more information.","reactions":{"url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/issues/1/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/AlexanderArvidsson/redux-toolkit/issues/1/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"AlexanderArvidsson","id":2972103,"node_id":"MDQ6VXNlcjI5NzIxMDM=","avatar_url":"https://avatars.githubusercontent.com/u/2972103?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderArvidsson","html_url":"https://github.com/AlexanderArvidsson","followers_url":"https://api.github.com/users/AlexanderArvidsson/followers","following_url":"https://api.github.com/users/AlexanderArvidsson/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderArvidsson/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderArvidsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderArvidsson/subscriptions","organizations_url":"https://api.github.com/users/AlexanderArvidsson/orgs","repos_url":"https://api.github.com/users/AlexanderArvidsson/repos","events_url":"https://api.github.com/users/AlexanderArvidsson/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderArvidsson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-29T22:43:06Z","updated_at":"2022-01-29T22:43:06Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/1974","repository_url":"https://api.github.com/repos/reduxjs/redux-toolkit","labels_url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/1974/labels{/name}","comments_url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/1974/comments","events_url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/1974/events","html_url":"https://github.com/reduxjs/redux-toolkit/pull/1974","id":1118344886,"node_id":"PR_kwDOB2ACAs4xyIL_","number":1974,"title":"Refetch should not happen if no active subscribers","user":{"login":"AlexanderArvidsson","id":2972103,"node_id":"MDQ6VXNlcjI5NzIxMDM=","avatar_url":"https://avatars.githubusercontent.com/u/2972103?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderArvidsson","html_url":"https://github.com/AlexanderArvidsson","followers_url":"https://api.github.com/users/AlexanderArvidsson/followers","following_url":"https://api.github.com/users/AlexanderArvidsson/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderArvidsson/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderArvidsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderArvidsson/subscriptions","organizations_url":"https://api.github.com/users/AlexanderArvidsson/orgs","repos_url":"https://api.github.com/users/AlexanderArvidsson/repos","events_url":"https://api.github.com/users/AlexanderArvidsson/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderArvidsson/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2022-01-29T22:43:05Z","updated_at":"2022-02-03T08:43:44Z","closed_at":"2022-02-01T20:53:25Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":123732482,"node_id":"MDEwOlJlcG9zaXRvcnkxMjM3MzI0ODI=","name":"redux-toolkit","full_name":"reduxjs/redux-toolkit","private":false,"owner":{"login":"reduxjs","id":13142323,"node_id":"MDEyOk9yZ2FuaXphdGlvbjEzMTQyMzIz","avatar_url":"https://avatars.githubusercontent.com/u/13142323?v=4","gravatar_id":"","url":"https://api.github.com/users/reduxjs","html_url":"https://github.com/reduxjs","followers_url":"https://api.github.com/users/reduxjs/followers","following_url":"https://api.github.com/users/reduxjs/following{/other_user}","gists_url":"https://api.github.com/users/reduxjs/gists{/gist_id}","starred_url":"https://api.github.com/users/reduxjs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/reduxjs/subscriptions","organizations_url":"https://api.github.com/users/reduxjs/orgs","repos_url":"https://api.github.com/users/reduxjs/repos","events_url":"https://api.github.com/users/reduxjs/events{/privacy}","received_events_url":"https://api.github.com/users/reduxjs/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/reduxjs/redux-toolkit","description":"The official, opinionated, batteries-included toolset for efficient Redux development","fork":false,"url":"https://api.github.com/repos/reduxjs/redux-toolkit","forks_url":"https://api.github.com/repos/reduxjs/redux-toolkit/forks","keys_url":"https://api.github.com/repos/reduxjs/redux-toolkit/keys{/key_id}","collaborators_url":"https://api.github.com/repos/reduxjs/redux-toolkit/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/reduxjs/redux-toolkit/teams","hooks_url":"https://api.github.com/repos/reduxjs/redux-toolkit/hooks","issue_events_url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/events{/number}","events_url":"https://api.github.com/repos/reduxjs/redux-toolkit/events","assignees_url":"https://api.github.com/repos/reduxjs/redux-toolkit/assignees{/user}","branches_url":"https://api.github.com/repos/reduxjs/redux-toolkit/branches{/branch}","tags_url":"https://api.github.com/repos/reduxjs/redux-toolkit/tags","blobs_url":"https://api.github.com/repos/reduxjs/redux-toolkit/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/reduxjs/redux-toolkit/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/reduxjs/redux-toolkit/git/refs{/sha}","trees_url":"https://api.github.com/repos/reduxjs/redux-toolkit/git/trees{/sha}","statuses_url":"https://api.github.com/repos/reduxjs/redux-toolkit/statuses/{sha}","languages_url":"https://api.github.com/repos/reduxjs/redux-toolkit/languages","stargazers_url":"https://api.github.com/repos/reduxjs/redux-toolkit/stargazers","contributors_url":"https://api.github.com/repos/reduxjs/redux-toolkit/contributors","subscribers_url":"https://api.github.com/repos/reduxjs/redux-toolkit/subscribers","subscription_url":"https://api.github.com/repos/reduxjs/redux-toolkit/subscription","commits_url":"https://api.github.com/repos/reduxjs/redux-toolkit/commits{/sha}","git_commits_url":"https://api.github.com/repos/reduxjs/redux-toolkit/git/commits{/sha}","comments_url":"https://api.github.com/repos/reduxjs/redux-toolkit/comments{/number}","issue_comment_url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/comments{/number}","contents_url":"https://api.github.com/repos/reduxjs/redux-toolkit/contents/{+path}","compare_url":"https://api.github.com/repos/reduxjs/redux-toolkit/compare/{base}...{head}","merges_url":"https://api.github.com/repos/reduxjs/redux-toolkit/merges","archive_url":"https://api.github.com/repos/reduxjs/redux-toolkit/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/reduxjs/redux-toolkit/downloads","issues_url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues{/number}","pulls_url":"https://api.github.com/repos/reduxjs/redux-toolkit/pulls{/number}","milestones_url":"https://api.github.com/repos/reduxjs/redux-toolkit/milestones{/number}","notifications_url":"https://api.github.com/repos/reduxjs/redux-toolkit/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/reduxjs/redux-toolkit/labels{/name}","releases_url":"https://api.github.com/repos/reduxjs/redux-toolkit/releases{/id}","deployments_url":"https://api.github.com/repos/reduxjs/redux-toolkit/deployments","created_at":"2018-03-03T21:21:53Z","updated_at":"2025-11-10T06:13:58Z","pushed_at":"2025-11-04T15:35:13Z","git_url":"git://github.com/reduxjs/redux-toolkit.git","ssh_url":"git@github.com:reduxjs/redux-toolkit.git","clone_url":"https://github.com/reduxjs/redux-toolkit.git","svn_url":"https://github.com/reduxjs/redux-toolkit","homepage":"https://redux-toolkit.js.org","size":42258,"stargazers_count":11117,"watchers_count":11117,"language":"TypeScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":1250,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":238,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":1250,"open_issues":238,"watchers":11117,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/reduxjs/redux-toolkit/pulls/1974","html_url":"https://github.com/reduxjs/redux-toolkit/pull/1974","diff_url":"https://github.com/reduxjs/redux-toolkit/pull/1974.diff","patch_url":"https://github.com/reduxjs/redux-toolkit/pull/1974.patch","merged_at":"2022-02-01T20:53:25Z"},"body":"Fixes #1530\r\n\r\nAll logic that checks if there are active subscriptions in the code does a falsey check as well as a keys length check on the subscription sub state, except for the code that refetches valid queries. \r\n[Here is an example from the handleUnsubscribe function.](https://github.com/reduxjs/redux-toolkit/blob/master/packages/toolkit/src/query/core/buildMiddleware/cacheCollection.ts#L98)\r\n[Here is another from invalidateTags.](https://github.com/reduxjs/redux-toolkit/blob/d4e95caa26ea1c76a1ecead8f09b1897b4444d40/packages/toolkit/src/query/core/buildMiddleware/invalidationByTags.ts#L75)\r\nThis PR includes the same check to resolve this issue. See #1530 for more information.\r\nAttempting a refetch for data that has no subscribers should remove it from the cache, similar to `invalidateTags`, because the data would become stale relative to other cache data which would be refetched on focus / reconnect.","reactions":{"url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/1974/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/1974/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/comments/1025000672","html_url":"https://github.com/reduxjs/redux-toolkit/issues/1530#issuecomment-1025000672","issue_url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/1530","id":1025000672,"node_id":"IC_kwDOB2ACAs49GETg","user":{"login":"phryneas","id":4282439,"node_id":"MDQ6VXNlcjQyODI0Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/4282439?v=4","gravatar_id":"","url":"https://api.github.com/users/phryneas","html_url":"https://github.com/phryneas","followers_url":"https://api.github.com/users/phryneas/followers","following_url":"https://api.github.com/users/phryneas/following{/other_user}","gists_url":"https://api.github.com/users/phryneas/gists{/gist_id}","starred_url":"https://api.github.com/users/phryneas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phryneas/subscriptions","organizations_url":"https://api.github.com/users/phryneas/orgs","repos_url":"https://api.github.com/users/phryneas/repos","events_url":"https://api.github.com/users/phryneas/events{/privacy}","received_events_url":"https://api.github.com/users/phryneas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-29T22:44:37Z","updated_at":"2022-01-29T22:44:47Z","body":"Sorry, when you left your last comment I had Covid and I haven't cought up on everything yet.\r\n\r\nGenerally, just \"not refetching\" doesn't really cut it here, as in that case the data has to be completely removed from the cache, so it is re-queried on a remount. Similar logic to invalidation would apply here.\r\nUnfortunately I won't get to it in quite some while as I still have a lot of real life to catch up, but it would be great if you could open a PR on this.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/comments/1025000672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"phryneas","id":4282439,"node_id":"MDQ6VXNlcjQyODI0Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/4282439?v=4","gravatar_id":"","url":"https://api.github.com/users/phryneas","html_url":"https://github.com/phryneas","followers_url":"https://api.github.com/users/phryneas/followers","following_url":"https://api.github.com/users/phryneas/following{/other_user}","gists_url":"https://api.github.com/users/phryneas/gists{/gist_id}","starred_url":"https://api.github.com/users/phryneas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phryneas/subscriptions","organizations_url":"https://api.github.com/users/phryneas/orgs","repos_url":"https://api.github.com/users/phryneas/repos","events_url":"https://api.github.com/users/phryneas/events{/privacy}","received_events_url":"https://api.github.com/users/phryneas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/comments/1025002002","html_url":"https://github.com/reduxjs/redux-toolkit/issues/1530#issuecomment-1025002002","issue_url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/1530","id":1025002002,"node_id":"IC_kwDOB2ACAs49GEoS","user":{"login":"AlexanderArvidsson","id":2972103,"node_id":"MDQ6VXNlcjI5NzIxMDM=","avatar_url":"https://avatars.githubusercontent.com/u/2972103?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderArvidsson","html_url":"https://github.com/AlexanderArvidsson","followers_url":"https://api.github.com/users/AlexanderArvidsson/followers","following_url":"https://api.github.com/users/AlexanderArvidsson/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderArvidsson/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderArvidsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderArvidsson/subscriptions","organizations_url":"https://api.github.com/users/AlexanderArvidsson/orgs","repos_url":"https://api.github.com/users/AlexanderArvidsson/repos","events_url":"https://api.github.com/users/AlexanderArvidsson/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderArvidsson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-29T22:54:29Z","updated_at":"2022-01-29T23:03:45Z","body":"@phryneas I opened a PR for the simple change of adding the condition, but if that is not enough I would need some more information to fix it completely.\r\n\r\nI have not dove too far into the code for RTK Query, but enough to see roughly how it works. \r\nSo if I understand you correctly, in order for the data to be re-queried when mounting the component, the data has to be removed from the cache, else it will not refetch and it will contain stale data? This feels very off to me and not at all what I have observed (if this was the case, this would make every single query have stale data if you enable keepUnusedDataFor, because the cache wouldn't get cleared until the time has passed, _then_ it would refetch the data according to what you said)\r\n\r\nHowever, wouldn't the subscription state become non-empty once you mount your component again, resulting in the if statement not passing and thus refetching the data correctly?\r\nUnless I am missing something, the logic already does this when introducing the change that I have in the PR, it is refetching correctly on mount and it does not refetch if there are no subscriptions.\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/comments/1025002002/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AlexanderArvidsson","id":2972103,"node_id":"MDQ6VXNlcjI5NzIxMDM=","avatar_url":"https://avatars.githubusercontent.com/u/2972103?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderArvidsson","html_url":"https://github.com/AlexanderArvidsson","followers_url":"https://api.github.com/users/AlexanderArvidsson/followers","following_url":"https://api.github.com/users/AlexanderArvidsson/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderArvidsson/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderArvidsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderArvidsson/subscriptions","organizations_url":"https://api.github.com/users/AlexanderArvidsson/orgs","repos_url":"https://api.github.com/users/AlexanderArvidsson/repos","events_url":"https://api.github.com/users/AlexanderArvidsson/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderArvidsson/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5975613298,"node_id":"MEE_lADOB2ACAs47rT_fzwAAAAFkLJ9y","url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/events/5975613298","actor":{"login":"phryneas","id":4282439,"node_id":"MDQ6VXNlcjQyODI0Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/4282439?v=4","gravatar_id":"","url":"https://api.github.com/users/phryneas","html_url":"https://github.com/phryneas","followers_url":"https://api.github.com/users/phryneas/followers","following_url":"https://api.github.com/users/phryneas/following{/other_user}","gists_url":"https://api.github.com/users/phryneas/gists{/gist_id}","starred_url":"https://api.github.com/users/phryneas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phryneas/subscriptions","organizations_url":"https://api.github.com/users/phryneas/orgs","repos_url":"https://api.github.com/users/phryneas/repos","events_url":"https://api.github.com/users/phryneas/events{/privacy}","received_events_url":"https://api.github.com/users/phryneas/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-01-29T22:54:29Z","performed_via_github_app":null},{"id":5975613299,"node_id":"SE_lADOB2ACAs47rT_fzwAAAAFkLJ9z","url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/events/5975613299","actor":{"login":"phryneas","id":4282439,"node_id":"MDQ6VXNlcjQyODI0Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/4282439?v=4","gravatar_id":"","url":"https://api.github.com/users/phryneas","html_url":"https://github.com/phryneas","followers_url":"https://api.github.com/users/phryneas/followers","following_url":"https://api.github.com/users/phryneas/following{/other_user}","gists_url":"https://api.github.com/users/phryneas/gists{/gist_id}","starred_url":"https://api.github.com/users/phryneas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phryneas/subscriptions","organizations_url":"https://api.github.com/users/phryneas/orgs","repos_url":"https://api.github.com/users/phryneas/repos","events_url":"https://api.github.com/users/phryneas/events{/privacy}","received_events_url":"https://api.github.com/users/phryneas/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-01-29T22:54:29Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/comments/1025003531","html_url":"https://github.com/reduxjs/redux-toolkit/issues/1530#issuecomment-1025003531","issue_url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/1530","id":1025003531,"node_id":"IC_kwDOB2ACAs49GFAL","user":{"login":"phryneas","id":4282439,"node_id":"MDQ6VXNlcjQyODI0Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/4282439?v=4","gravatar_id":"","url":"https://api.github.com/users/phryneas","html_url":"https://github.com/phryneas","followers_url":"https://api.github.com/users/phryneas/followers","following_url":"https://api.github.com/users/phryneas/following{/other_user}","gists_url":"https://api.github.com/users/phryneas/gists{/gist_id}","starred_url":"https://api.github.com/users/phryneas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phryneas/subscriptions","organizations_url":"https://api.github.com/users/phryneas/orgs","repos_url":"https://api.github.com/users/phryneas/repos","events_url":"https://api.github.com/users/phryneas/events{/privacy}","received_events_url":"https://api.github.com/users/phryneas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-29T23:05:48Z","updated_at":"2022-01-29T23:05:48Z","body":"It would only refetch if `refetchOnMountOrArgChange` is set - if that is not set it will reuse the existing cache value on mount. So if all other data was refreshed, but this one cache value was not, a newly mounting component will get a cache value that is potentially outdated.\r\n\r\nEssentially the same as with invalidation goes: if it is mounted, it needs a refetch, if it is not mounted, it needs to be cleaned out so it is fetched on a later mount in the future.\r\nhttps://github.com/reduxjs/redux-toolkit/blob/d4e95caa26ea1c76a1ecead8f09b1897b4444d40/packages/toolkit/src/query/core/buildMiddleware/invalidationByTags.ts#L75-L82","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/comments/1025003531/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"phryneas","id":4282439,"node_id":"MDQ6VXNlcjQyODI0Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/4282439?v=4","gravatar_id":"","url":"https://api.github.com/users/phryneas","html_url":"https://github.com/phryneas","followers_url":"https://api.github.com/users/phryneas/followers","following_url":"https://api.github.com/users/phryneas/following{/other_user}","gists_url":"https://api.github.com/users/phryneas/gists{/gist_id}","starred_url":"https://api.github.com/users/phryneas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phryneas/subscriptions","organizations_url":"https://api.github.com/users/phryneas/orgs","repos_url":"https://api.github.com/users/phryneas/repos","events_url":"https://api.github.com/users/phryneas/events{/privacy}","received_events_url":"https://api.github.com/users/phryneas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/comments/1025004796","html_url":"https://github.com/reduxjs/redux-toolkit/issues/1530#issuecomment-1025004796","issue_url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/1530","id":1025004796,"node_id":"IC_kwDOB2ACAs49GFT8","user":{"login":"AlexanderArvidsson","id":2972103,"node_id":"MDQ6VXNlcjI5NzIxMDM=","avatar_url":"https://avatars.githubusercontent.com/u/2972103?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderArvidsson","html_url":"https://github.com/AlexanderArvidsson","followers_url":"https://api.github.com/users/AlexanderArvidsson/followers","following_url":"https://api.github.com/users/AlexanderArvidsson/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderArvidsson/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderArvidsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderArvidsson/subscriptions","organizations_url":"https://api.github.com/users/AlexanderArvidsson/orgs","repos_url":"https://api.github.com/users/AlexanderArvidsson/repos","events_url":"https://api.github.com/users/AlexanderArvidsson/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderArvidsson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-29T23:15:11Z","updated_at":"2022-01-29T23:29:33Z","body":"@phryneas Isn't this already handled by the `handleUnsubscribe` though?\r\n\r\nhttps://github.com/reduxjs/redux-toolkit/blob/d5b0eb59ee6279bbc1e63000655f3432056f06d2/packages/toolkit/src/query/core/buildMiddleware/cacheCollection.ts#L79-L103\r\n\r\nWe have 4 cases:\r\n1. **`keepUnusedDataFor = x` and `refetchOnMountOrArgChange = true`:** Mounting will always refetch regardless if the data is in the query, because mounting results in a new subscription.\r\n\r\n2. **`keepUnusedDataFor = undefined` and `refetchOnMountOrArgChange = true`:** Unmounting the last component (i.e. subscription sub state is empty) will remove the data, and every mount afterwards will query the data again because of `refetchOnMountOrArgChange`.\r\n \r\n3. **`keepUnusedDataFor = undefined` and `refetchOnMountOrArgChange = false`:** Similar to the last, unmounting the last component will clean the query data. The next mount (i.e. first mount) will query the data, but mounting more than one component will use the cached result (as per documentation).\r\n\r\n4. **`keepUnusedDataFor = x` and `refetchOnMountOrArgChange = false`:** Unmounting last component and waiting x seconds will clean up the query data, at which point a mount will query the data. If you try to mount within x time, it will not trigger a query, so the data will be stale (but that is the intended behavior, because if you do not want to refetch on mount then you will have stale data as per the documentation _'This setting allows you to control whether if a cached result is already available RTK Query will only serve a cached result,'_)\r\n\r\nIn all these cases, the fix in my PR works as intended; do not refetch if there are no active subscribers. Have I missed something?\r\nRemoving the query data when you're attempting to refetch (like invalidation does, which _is not the same_) will break `keepUnusedDataFor`.\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/comments/1025004796/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AlexanderArvidsson","id":2972103,"node_id":"MDQ6VXNlcjI5NzIxMDM=","avatar_url":"https://avatars.githubusercontent.com/u/2972103?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderArvidsson","html_url":"https://github.com/AlexanderArvidsson","followers_url":"https://api.github.com/users/AlexanderArvidsson/followers","following_url":"https://api.github.com/users/AlexanderArvidsson/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderArvidsson/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderArvidsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderArvidsson/subscriptions","organizations_url":"https://api.github.com/users/AlexanderArvidsson/orgs","repos_url":"https://api.github.com/users/AlexanderArvidsson/repos","events_url":"https://api.github.com/users/AlexanderArvidsson/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderArvidsson/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5975629240,"node_id":"MEE_lADOB2ACAs47rT_fzwAAAAFkLN24","url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/events/5975629240","actor":{"login":"phryneas","id":4282439,"node_id":"MDQ6VXNlcjQyODI0Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/4282439?v=4","gravatar_id":"","url":"https://api.github.com/users/phryneas","html_url":"https://github.com/phryneas","followers_url":"https://api.github.com/users/phryneas/followers","following_url":"https://api.github.com/users/phryneas/following{/other_user}","gists_url":"https://api.github.com/users/phryneas/gists{/gist_id}","starred_url":"https://api.github.com/users/phryneas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phryneas/subscriptions","organizations_url":"https://api.github.com/users/phryneas/orgs","repos_url":"https://api.github.com/users/phryneas/repos","events_url":"https://api.github.com/users/phryneas/events{/privacy}","received_events_url":"https://api.github.com/users/phryneas/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-01-29T23:15:11Z","performed_via_github_app":null},{"id":5975629242,"node_id":"SE_lADOB2ACAs47rT_fzwAAAAFkLN26","url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/events/5975629242","actor":{"login":"phryneas","id":4282439,"node_id":"MDQ6VXNlcjQyODI0Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/4282439?v=4","gravatar_id":"","url":"https://api.github.com/users/phryneas","html_url":"https://github.com/phryneas","followers_url":"https://api.github.com/users/phryneas/followers","following_url":"https://api.github.com/users/phryneas/following{/other_user}","gists_url":"https://api.github.com/users/phryneas/gists{/gist_id}","starred_url":"https://api.github.com/users/phryneas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phryneas/subscriptions","organizations_url":"https://api.github.com/users/phryneas/orgs","repos_url":"https://api.github.com/users/phryneas/repos","events_url":"https://api.github.com/users/phryneas/events{/privacy}","received_events_url":"https://api.github.com/users/phryneas/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-01-29T23:15:11Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/comments/1025006597","html_url":"https://github.com/reduxjs/redux-toolkit/issues/1530#issuecomment-1025006597","issue_url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/1530","id":1025006597,"node_id":"IC_kwDOB2ACAs49GFwF","user":{"login":"phryneas","id":4282439,"node_id":"MDQ6VXNlcjQyODI0Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/4282439?v=4","gravatar_id":"","url":"https://api.github.com/users/phryneas","html_url":"https://github.com/phryneas","followers_url":"https://api.github.com/users/phryneas/followers","following_url":"https://api.github.com/users/phryneas/following{/other_user}","gists_url":"https://api.github.com/users/phryneas/gists{/gist_id}","starred_url":"https://api.github.com/users/phryneas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phryneas/subscriptions","organizations_url":"https://api.github.com/users/phryneas/orgs","repos_url":"https://api.github.com/users/phryneas/repos","events_url":"https://api.github.com/users/phryneas/events{/privacy}","received_events_url":"https://api.github.com/users/phryneas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-29T23:29:39Z","updated_at":"2022-01-29T23:31:08Z","body":"Case 4 is the default case. `keepUnusedDataFor` defaults to 60 seconds and `refetchOnMountOrArgChange ` defaults to `false`. It will probably be the 90% use case.\r\n\r\n\"serving a cached result\" is different from \"serving something we know to be out of sync with all other cache results\". If you use `refetchOnFocus` you expect all data to be up-to-date after refocus. You would not expect data to stay around for longer and be older than the last refocus when a component mounts with a value that was available in cache.\r\n\r\nThus, that data has to be removed from cache in that case.\r\n\r\nPS: I'd go as far as saying that the current behaviour of \"refetch everything\" would be more correct than \"refetch everything visible and leave the rest potentially outdated\".","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/comments/1025006597/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"phryneas","id":4282439,"node_id":"MDQ6VXNlcjQyODI0Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/4282439?v=4","gravatar_id":"","url":"https://api.github.com/users/phryneas","html_url":"https://github.com/phryneas","followers_url":"https://api.github.com/users/phryneas/followers","following_url":"https://api.github.com/users/phryneas/following{/other_user}","gists_url":"https://api.github.com/users/phryneas/gists{/gist_id}","starred_url":"https://api.github.com/users/phryneas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phryneas/subscriptions","organizations_url":"https://api.github.com/users/phryneas/orgs","repos_url":"https://api.github.com/users/phryneas/repos","events_url":"https://api.github.com/users/phryneas/events{/privacy}","received_events_url":"https://api.github.com/users/phryneas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/comments/1025007197","html_url":"https://github.com/reduxjs/redux-toolkit/issues/1530#issuecomment-1025007197","issue_url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/1530","id":1025007197,"node_id":"IC_kwDOB2ACAs49GF5d","user":{"login":"AlexanderArvidsson","id":2972103,"node_id":"MDQ6VXNlcjI5NzIxMDM=","avatar_url":"https://avatars.githubusercontent.com/u/2972103?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderArvidsson","html_url":"https://github.com/AlexanderArvidsson","followers_url":"https://api.github.com/users/AlexanderArvidsson/followers","following_url":"https://api.github.com/users/AlexanderArvidsson/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderArvidsson/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderArvidsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderArvidsson/subscriptions","organizations_url":"https://api.github.com/users/AlexanderArvidsson/orgs","repos_url":"https://api.github.com/users/AlexanderArvidsson/repos","events_url":"https://api.github.com/users/AlexanderArvidsson/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderArvidsson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-29T23:34:42Z","updated_at":"2022-01-29T23:40:41Z","body":"In my use case, I am using `refetchOnFocus` (throttled, though, custom handler, might make a PR to support this using signature `refetchOnFocus?: boolean | number`), `refetchOnMountOrArgChange` and `keepUnusedDataFor = 60` (default). \r\n\r\nIf I initiate a query and unmount the component, then blur the window and refocus it, it will re-query all data again for the component that was unmounted (no component is listening on the data).\r\n\r\nIf the reasoning is that `refetchOnFocus` is meant to refetch _all_ data, including _unused_ data, then I understand the current logic. \r\n\r\nHowever, my question is then, should we ignore `keepUnusedDataFor` and remove the query data if there are no subscribers when trying to refetch? Should refetching only remove the data if it is older than `keepUnusedDataFor`?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/comments/1025007197/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AlexanderArvidsson","id":2972103,"node_id":"MDQ6VXNlcjI5NzIxMDM=","avatar_url":"https://avatars.githubusercontent.com/u/2972103?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderArvidsson","html_url":"https://github.com/AlexanderArvidsson","followers_url":"https://api.github.com/users/AlexanderArvidsson/followers","following_url":"https://api.github.com/users/AlexanderArvidsson/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderArvidsson/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderArvidsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderArvidsson/subscriptions","organizations_url":"https://api.github.com/users/AlexanderArvidsson/orgs","repos_url":"https://api.github.com/users/AlexanderArvidsson/repos","events_url":"https://api.github.com/users/AlexanderArvidsson/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderArvidsson/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/comments/1025007771","html_url":"https://github.com/reduxjs/redux-toolkit/issues/1530#issuecomment-1025007771","issue_url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/1530","id":1025007771,"node_id":"IC_kwDOB2ACAs49GGCb","user":{"login":"phryneas","id":4282439,"node_id":"MDQ6VXNlcjQyODI0Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/4282439?v=4","gravatar_id":"","url":"https://api.github.com/users/phryneas","html_url":"https://github.com/phryneas","followers_url":"https://api.github.com/users/phryneas/followers","following_url":"https://api.github.com/users/phryneas/following{/other_user}","gists_url":"https://api.github.com/users/phryneas/gists{/gist_id}","starred_url":"https://api.github.com/users/phryneas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phryneas/subscriptions","organizations_url":"https://api.github.com/users/phryneas/orgs","repos_url":"https://api.github.com/users/phryneas/repos","events_url":"https://api.github.com/users/phryneas/events{/privacy}","received_events_url":"https://api.github.com/users/phryneas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-29T23:39:34Z","updated_at":"2022-01-29T23:42:22Z","body":"> However, my question is then, should we ignore keepUnusedDataFor and remove the query data if there are no subscribers when trying to refetch?\r\n\r\nYes, it is the same we do for `invalidate` with `keepUnusedDataFor`. At that point we have to assume the data in the cache is outdated - or at least not \"in sync\" with other stuff we are displaying.\r\nSo we can either refetch it, which can be costly for stuff we maybe never display again. Or we remove it and it will be refetched if it is actually required. Either way, we cannot keep around a potentially outdated version of that data.\r\n\r\nSo I guess that the current behaviour might be overfetching a lot, so at this point I'm leaning towards removing it. We could also think about making that configurable and a user choice, but that might be going too far.\r\n\r\n\r\nPS: \"data older than `keepUnusedDataFor`\" will never happen. That data will be removed once it hits that point.\r\n\r\nPPS: I'm going to bed now, so no more answers from me for today, just so you're not irritated I'm not answering any more ;)","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/comments/1025007771/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"phryneas","id":4282439,"node_id":"MDQ6VXNlcjQyODI0Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/4282439?v=4","gravatar_id":"","url":"https://api.github.com/users/phryneas","html_url":"https://github.com/phryneas","followers_url":"https://api.github.com/users/phryneas/followers","following_url":"https://api.github.com/users/phryneas/following{/other_user}","gists_url":"https://api.github.com/users/phryneas/gists{/gist_id}","starred_url":"https://api.github.com/users/phryneas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phryneas/subscriptions","organizations_url":"https://api.github.com/users/phryneas/orgs","repos_url":"https://api.github.com/users/phryneas/repos","events_url":"https://api.github.com/users/phryneas/events{/privacy}","received_events_url":"https://api.github.com/users/phryneas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/comments/1025010431","html_url":"https://github.com/reduxjs/redux-toolkit/issues/1530#issuecomment-1025010431","issue_url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/1530","id":1025010431,"node_id":"IC_kwDOB2ACAs49GGr_","user":{"login":"AlexanderArvidsson","id":2972103,"node_id":"MDQ6VXNlcjI5NzIxMDM=","avatar_url":"https://avatars.githubusercontent.com/u/2972103?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderArvidsson","html_url":"https://github.com/AlexanderArvidsson","followers_url":"https://api.github.com/users/AlexanderArvidsson/followers","following_url":"https://api.github.com/users/AlexanderArvidsson/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderArvidsson/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderArvidsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderArvidsson/subscriptions","organizations_url":"https://api.github.com/users/AlexanderArvidsson/orgs","repos_url":"https://api.github.com/users/AlexanderArvidsson/repos","events_url":"https://api.github.com/users/AlexanderArvidsson/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderArvidsson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-30T00:01:01Z","updated_at":"2022-01-30T00:04:40Z","body":"> PS: \"data older than keepUnusedDataFor\" will never happen. That data will be removed once it hits that point.\r\n\r\nYes, of course, I was not referring to it as actually existing, it is removed exactly on time due to the setTimeout.\r\n\r\nI am beginning to understand exactly what you are saying and I agree, it really does not make sense to know that the cache _could_ include stale data _relative_ to other cache data. I have implemented the same logic from `invalidateTags` and it works fine for my use case.\r\n\r\nTo be exact with my use case, I am calling the query without hooks (as per documentation) and instantly unsubscribing (I only want the data, I do not want to subscribe). This is because I am storing the results in an entity adaptor that I want to manage manually (experimenting with infinite pagination). The problem then arose where it started refetching my data even though I unsubscribed and that was unnecessary (we have real-time long polling that I will integrate into the entity adaptor to keep in sync). Removing the data like `invalidateTags` works very well in this case.\r\n\r\nI will update my PR with these changes, but first I will also go to bed.\r\nGood talk and appreciate the fast responses!","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/comments/1025010431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AlexanderArvidsson","id":2972103,"node_id":"MDQ6VXNlcjI5NzIxMDM=","avatar_url":"https://avatars.githubusercontent.com/u/2972103?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderArvidsson","html_url":"https://github.com/AlexanderArvidsson","followers_url":"https://api.github.com/users/AlexanderArvidsson/followers","following_url":"https://api.github.com/users/AlexanderArvidsson/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderArvidsson/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderArvidsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderArvidsson/subscriptions","organizations_url":"https://api.github.com/users/AlexanderArvidsson/orgs","repos_url":"https://api.github.com/users/AlexanderArvidsson/repos","events_url":"https://api.github.com/users/AlexanderArvidsson/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderArvidsson/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5991168754,"node_id":"CE_lADOB2ACAs47rT_fzwAAAAFlGfry","url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/events/5991168754","actor":{"login":"phryneas","id":4282439,"node_id":"MDQ6VXNlcjQyODI0Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/4282439?v=4","gravatar_id":"","url":"https://api.github.com/users/phryneas","html_url":"https://github.com/phryneas","followers_url":"https://api.github.com/users/phryneas/followers","following_url":"https://api.github.com/users/phryneas/following{/other_user}","gists_url":"https://api.github.com/users/phryneas/gists{/gist_id}","starred_url":"https://api.github.com/users/phryneas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phryneas/subscriptions","organizations_url":"https://api.github.com/users/phryneas/orgs","repos_url":"https://api.github.com/users/phryneas/repos","events_url":"https://api.github.com/users/phryneas/events{/privacy}","received_events_url":"https://api.github.com/users/phryneas/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2022-02-01T20:53:25Z","state_reason":null,"performed_via_github_app":null},{"id":5991168917,"node_id":"REFE_lADOB2ACAs47rT_fzwAAAAFlGfuV","url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/events/5991168917","actor":{"login":"phryneas","id":4282439,"node_id":"MDQ6VXNlcjQyODI0Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/4282439?v=4","gravatar_id":"","url":"https://api.github.com/users/phryneas","html_url":"https://github.com/phryneas","followers_url":"https://api.github.com/users/phryneas/followers","following_url":"https://api.github.com/users/phryneas/following{/other_user}","gists_url":"https://api.github.com/users/phryneas/gists{/gist_id}","starred_url":"https://api.github.com/users/phryneas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phryneas/subscriptions","organizations_url":"https://api.github.com/users/phryneas/orgs","repos_url":"https://api.github.com/users/phryneas/repos","events_url":"https://api.github.com/users/phryneas/events{/privacy}","received_events_url":"https://api.github.com/users/phryneas/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"67d41a6f8c29603023f586a24689817cd66d2917","commit_url":"https://api.github.com/repos/reduxjs/redux-toolkit/commits/67d41a6f8c29603023f586a24689817cd66d2917","created_at":"2022-02-01T20:53:27Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/comments/1028731762","html_url":"https://github.com/reduxjs/redux-toolkit/issues/1530#issuecomment-1028731762","issue_url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/1530","id":1028731762,"node_id":"IC_kwDOB2ACAs49UTNy","user":{"login":"phryneas","id":4282439,"node_id":"MDQ6VXNlcjQyODI0Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/4282439?v=4","gravatar_id":"","url":"https://api.github.com/users/phryneas","html_url":"https://github.com/phryneas","followers_url":"https://api.github.com/users/phryneas/followers","following_url":"https://api.github.com/users/phryneas/following{/other_user}","gists_url":"https://api.github.com/users/phryneas/gists{/gist_id}","starred_url":"https://api.github.com/users/phryneas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phryneas/subscriptions","organizations_url":"https://api.github.com/users/phryneas/orgs","repos_url":"https://api.github.com/users/phryneas/repos","events_url":"https://api.github.com/users/phryneas/events{/privacy}","received_events_url":"https://api.github.com/users/phryneas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-03T08:41:14Z","updated_at":"2022-02-03T08:41:14Z","body":"Released in https://github.com/reduxjs/redux-toolkit/releases/tag/v1.7.2","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/comments/1028731762/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"phryneas","id":4282439,"node_id":"MDQ6VXNlcjQyODI0Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/4282439?v=4","gravatar_id":"","url":"https://api.github.com/users/phryneas","html_url":"https://github.com/phryneas","followers_url":"https://api.github.com/users/phryneas/followers","following_url":"https://api.github.com/users/phryneas/following{/other_user}","gists_url":"https://api.github.com/users/phryneas/gists{/gist_id}","starred_url":"https://api.github.com/users/phryneas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phryneas/subscriptions","organizations_url":"https://api.github.com/users/phryneas/orgs","repos_url":"https://api.github.com/users/phryneas/repos","events_url":"https://api.github.com/users/phryneas/events{/privacy}","received_events_url":"https://api.github.com/users/phryneas/received_events","type":"User","user_view_type":"public","site_admin":false}}]