{"url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/1530","repository_url":"https://api.github.com/repos/reduxjs/redux-toolkit","labels_url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/1530/labels{/name}","comments_url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/1530/comments","events_url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/1530/events","html_url":"https://github.com/reduxjs/redux-toolkit/issues/1530","id":1001209823,"node_id":"I_kwDOB2ACAs47rT_f","number":1530,"title":"RTK Query - refetchOnFocus refetches unmounted queries","user":{"login":"saschametz","id":37977643,"node_id":"MDQ6VXNlcjM3OTc3NjQz","avatar_url":"https://avatars.githubusercontent.com/u/37977643?v=4","gravatar_id":"","url":"https://api.github.com/users/saschametz","html_url":"https://github.com/saschametz","followers_url":"https://api.github.com/users/saschametz/followers","following_url":"https://api.github.com/users/saschametz/following{/other_user}","gists_url":"https://api.github.com/users/saschametz/gists{/gist_id}","starred_url":"https://api.github.com/users/saschametz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saschametz/subscriptions","organizations_url":"https://api.github.com/users/saschametz/orgs","repos_url":"https://api.github.com/users/saschametz/repos","events_url":"https://api.github.com/users/saschametz/events{/privacy}","received_events_url":"https://api.github.com/users/saschametz/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":3064739336,"node_id":"MDU6TGFiZWwzMDY0NzM5MzM2","url":"https://api.github.com/repos/reduxjs/redux-toolkit/labels/RTK-Query","name":"RTK-Query","color":"33DA90","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2021-09-20T17:17:19Z","updated_at":"2022-02-03T08:41:14Z","closed_at":"2022-02-01T20:53:25Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"We're using the [`refetchOnFocus`](https://redux-toolkit.js.org/rtk-query/api/createApi#refetchonfocus) option and set [`keepUnusedDataFor`](https://redux-toolkit.js.org/rtk-query/api/createApi#keepunuseddatafor) to 5 minutes.\r\n\r\nThe problem is that when the user navigates through the application, this creates a lot of API requests at once when the page is refocused.\r\n\r\nThis question already seems to have been up for discussion in the old repo:\r\n- https://github.com/rtk-incubator/rtk-query/pull/90#discussion_r540368910\r\n- https://github.com/rtk-incubator/rtk-query/issues/99\r\n---\r\nIt would be very useful to change the default behaviour of this (refetch mounted queries only on refocus) or have an option to disable the fetching of unmounted queries.\r\n\r\nChanging the default behaviour would be the preferable way IMHO. We don't have the problem of stale data for unmounted queries because we're using the [`refetchOnMountOrArgChange`](https://redux-toolkit.js.org/rtk-query/api/createApi#refetchonmountorargchange) option.","closed_by":{"login":"phryneas","id":4282439,"node_id":"MDQ6VXNlcjQyODI0Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/4282439?v=4","gravatar_id":"","url":"https://api.github.com/users/phryneas","html_url":"https://github.com/phryneas","followers_url":"https://api.github.com/users/phryneas/followers","following_url":"https://api.github.com/users/phryneas/following{/other_user}","gists_url":"https://api.github.com/users/phryneas/gists{/gist_id}","starred_url":"https://api.github.com/users/phryneas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phryneas/subscriptions","organizations_url":"https://api.github.com/users/phryneas/orgs","repos_url":"https://api.github.com/users/phryneas/repos","events_url":"https://api.github.com/users/phryneas/events{/privacy}","received_events_url":"https://api.github.com/users/phryneas/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/1530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/reduxjs/redux-toolkit/issues/1530/timeline","performed_via_github_app":null,"state_reason":"completed"}