<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:01:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JOHNZON-193] Johnzon is keeping the reference for map/values from JsonObjectBuilder.</title>
                <link>https://issues.apache.org/jira/browse/JOHNZON-193</link>
                <project id="12315523" key="JOHNZON">Johnzon</project>
                    <description>&lt;p&gt;&lt;font color=&quot;#333333&quot;&gt;If you try the follow code:&lt;/font&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; JsonObjectBuilder jsonObjectBuilder = Json.createObjectBuilder();
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; JsonArrayBuilder jsonArrayBuilder = Json.createArrayBuilder();
IntStream.range(1, 10).forEach(numer -&amp;gt; {
&#160;&#160;&#160; jsonObjectBuilder.add(&lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;Key %d&quot;&lt;/span&gt;, numer)); 
&#160;&#160;&#160; jsonObjectBuilder.add(&lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;Value %d&quot;&lt;/span&gt;, numer)); 
&#160;&#160;&#160; jsonArrayBuilder.add(jsonObjectBuilder);
});
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; message = jsonArrayBuilder.build().toString();&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;font color=&quot;#333333&quot;&gt;it is retuning:&lt;/font&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[{&lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Key 9&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Value 9&quot;&lt;/span&gt;},{&lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Key 9&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Value 9&quot;&lt;/span&gt;},{&lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Key 9&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Value 9&quot;&lt;/span&gt;},{&lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Key 9&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Value 9&quot;&lt;/span&gt;},{&lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Key 9&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Value 9&quot;&lt;/span&gt;},{&lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Key 9&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Value 9&quot;&lt;/span&gt;},{&lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Key 9&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Value 9&quot;&lt;/span&gt;},{&lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Key 9&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Value 9&quot;&lt;/span&gt;},{&lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Key 9&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Value 9&quot;&lt;/span&gt;}]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;&lt;font color=&quot;#333333&quot;&gt; But we expect to see:&lt;/font&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[{&lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Key 1&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Value 1&quot;&lt;/span&gt;},{&lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Key 2&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Value 2&quot;&lt;/span&gt;},{&lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Key 3&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Value 3&quot;&lt;/span&gt;},{&lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Key 4&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Value 4&quot;&lt;/span&gt;},{&lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Key 5&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Value 5&quot;&lt;/span&gt;},{&lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Key 6&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Value 6&quot;&lt;/span&gt;},{&lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Key 7&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Value 7&quot;&lt;/span&gt;},{&lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Key 8&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Value 8&quot;&lt;/span&gt;},{&lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Key 9&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Value 9&quot;&lt;/span&gt;}]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13194111">JOHNZON-193</key>
            <summary>Johnzon is keeping the reference for map/values from JsonObjectBuilder.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rsandtner">Reinhard Sandtner</assignee>
                                    <reporter username="danielsoro">Daniel Cunha</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Oct 2018 10:17:26 +0000</created>
                <updated>Sat, 10 Nov 2018 22:59:15 +0000</updated>
                            <resolved>Thu, 25 Oct 2018 10:41:11 +0000</resolved>
                                    <version>1.0.1</version>
                                    <fixVersion>1.1.11</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16663565" author="rsandtner" created="Thu, 25 Oct 2018 10:40:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=danielsoro&quot; class=&quot;user-hover&quot; rel=&quot;danielsoro&quot;&gt;danielsoro&lt;/a&gt; imo this is correct according the java doc of object builder&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/**
 * Add the given &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; value to the JsonObject to be created.
 * If a value with that name already exists it will be replaced by the &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; value.
 * @param name the JSON attribute name
 * @param value the &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; value to add
 * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; the current JsonObjectBuilder
 */
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;it is not specified if the &lt;tt&gt;JsonObjectBuilder&lt;/tt&gt; can be reused or not and johnzon doesn&apos;t clear the builder so you can not reuse it.&lt;br/&gt;
for your usecase the following code should work&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        JsonArrayBuilder builder = Json.createArrayBuilder();
        IntStream.range(1, 10)
                 .forEach(i -&amp;gt; builder.add(Json.createObjectBuilder().add(&lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;Key %d&quot;&lt;/span&gt;, i)).add(&lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;Value %d&quot;&lt;/span&gt;, i))));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16663569" author="romain.manni-bucau" created="Thu, 25 Oct 2018 10:42:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rsandtner&quot; class=&quot;user-hover&quot; rel=&quot;rsandtner&quot;&gt;rsandtner&lt;/a&gt; fixed it cause this is the behavior we impl for array so we should align both IMHO&lt;/p&gt;</comment>
                            <comment id="16663573" author="rsandtner" created="Thu, 25 Oct 2018 10:47:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=romain.manni-bucau&quot; class=&quot;user-hover&quot; rel=&quot;romain.manni-bucau&quot;&gt;romain.manni-bucau&lt;/a&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_up.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; did not see the &lt;tt&gt;return new JsonObjectImpl(dump);&lt;/tt&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 3 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3zmn3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>