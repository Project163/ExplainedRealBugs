<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:21:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[QPID-2848] BasicMessageConsumer_0_10 contains dead and questionable code</title>
                <link>https://issues.apache.org/jira/browse/QPID-2848</link>
                <project id="12310520" key="QPID">Qpid</project>
                    <description>&lt;p&gt;In BasicMessageConsumer_0_10, there is a field named _preAcquire. Its value is set true by default and toggled false at construction time if the given destination is an instance of AMQQueue.&lt;/p&gt;

&lt;p&gt;During the notifyMessage() method, when client side selector evaluation of the incoming message is performed in the checkPreConditions() method, if the filter indicates the message is not a match then the _preAcquire field is used to determine acknowledgment and/or release actions to take that would seem to indicate the _preAcquire field is meant to describe the session acquire mode. Judging this value based on the incoming destination does not seem correct as this is actually a property of the Session used. &lt;/p&gt;

&lt;p&gt;Subsequent to the above mentioned uses the _preAcquire field is also used to determine whether to accept the message.&lt;/p&gt;

&lt;p&gt;Further to the above, the code called to perform acknowledgement and releases is dead and can never actually execute because it too depends on the _preAcquire field but inverted from the previous use:&lt;/p&gt;

&lt;p&gt;if (_preAcquire)&lt;br/&gt;
{&lt;br/&gt;
    ...&lt;br/&gt;
    acknowledgeMessage(message);&lt;br/&gt;
}&lt;br/&gt;
else&lt;br/&gt;
{&lt;br/&gt;
    ...&lt;br/&gt;
    releaseMessage(message);&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;followed by:&lt;/p&gt;

&lt;p&gt;private void acknowledgeMessage(AbstractJMSMessage message) throws AMQException&lt;br/&gt;
{&lt;br/&gt;
    if (!_preAcquire)&lt;/p&gt;
    {
        ...
    }&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
and:&lt;br/&gt;
&lt;br/&gt;
private void releaseMessage(AbstractJMSMessage message) throws AMQException&lt;br/&gt;
{&lt;br/&gt;
    if (_preAcquire)&lt;br/&gt;
    {        ...    }
&lt;p&gt;}&lt;/p&gt;</description>
                <environment></environment>
        <key id="12473347">QPID-2848</key>
            <summary>BasicMessageConsumer_0_10 contains dead and questionable code</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwall">Keith Wall</assignee>
                                    <reporter username="robbie">Robbie Gemmell</reporter>
                        <labels>
                    </labels>
                <created>Sun, 5 Sep 2010 19:54:30 +0000</created>
                <updated>Mon, 7 Nov 2011 08:54:33 +0000</updated>
                            <resolved>Mon, 7 Nov 2011 08:54:32 +0000</resolved>
                                    <version>M3</version>
                    <version>M4</version>
                    <version>0.5</version>
                    <version>0.6</version>
                                                    <component>JMS AMQP 0-x</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                                                            <comments>
                            <comment id="12926884" author="gemmellr" created="Mon, 1 Nov 2010 10:09:36 +0000"  >&lt;p&gt;Updating &apos;Fix For&apos;  to Unknown on issues not targeted for 0.8&lt;/p&gt;</comment>
                            <comment id="13142036" author="k-wall" created="Wed, 2 Nov 2011 10:04:01 +0000"  >&lt;p&gt;(Replaced references to BasicMessageProducer_0_10 with BasicMessageConsumer_0_10 as this was the original intention of the Jira).&lt;/p&gt;</comment>
                            <comment id="13142238" author="alex.rufous" created="Wed, 2 Nov 2011 16:04:28 +0000"  >&lt;p&gt;Attached a patch refactoring message consumer/session for 0-10 code path. &lt;/p&gt;</comment>
                            <comment id="13145289" author="k-wall" created="Mon, 7 Nov 2011 08:54:32 +0000"  >&lt;p&gt;Patch applied.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12501977" name="0001-QPID-2848-refactored-message-consumer-pre-aquire-cap.patch" size="46097" author="orudyy" created="Wed, 2 Nov 2011 16:04:28 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12526659">QPID-3542</subtask>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>169525</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 2 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0bkin:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>65436</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>