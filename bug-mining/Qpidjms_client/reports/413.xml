<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:21:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[QPID-3536] Topic Session Rollback/Recover does not work when using ADDR address destinations</title>
                <link>https://issues.apache.org/jira/browse/QPID-3536</link>
                <project id="12310520" key="QPID">Qpid</project>
                    <description>&lt;p&gt;User should be able to consume a message on topic session and then rollback/recover and re-consume the same message. Currently the rollback/recover appear to be successful, but the user cannot re-receive the same message.&lt;/p&gt;

&lt;p&gt;It appears that the link reliability default options (coming from the ADDR address) are taking precedence over the reliablity implied from the acknowlegeMode specified in the createSession call. &lt;/p&gt;

&lt;p&gt;AMQSession_0_10.sendConsume method uses the Link value if not null to override the acceptMode when using ADDR mode without link reliability explicitly set.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12526440">QPID-3536</key>
            <summary>Topic Session Rollback/Recover does not work when using ADDR address destinations</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwall">Keith Wall</assignee>
                                    <reporter username="macbean">Andrew MacBean</reporter>
                        <labels>
                    </labels>
                <created>Mon, 10 Oct 2011 13:17:19 +0000</created>
                <updated>Mon, 7 Nov 2011 11:07:40 +0000</updated>
                            <resolved>Mon, 7 Nov 2011 11:07:19 +0000</resolved>
                                    <version>0.13</version>
                    <version>0.14</version>
                                                    <component>JMS AMQP 0-x</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13124146" author="macbean" created="Mon, 10 Oct 2011 14:53:23 +0000"  >&lt;p&gt;Removed the logic to override the accept mode value based on the Link Reliability value and added tests to test the rollback and recover cases.&lt;/p&gt;

&lt;p&gt;Also removed the UNSPECIFIED Reliability enum from the Link class as its no longer required.&lt;/p&gt;

&lt;p&gt;Finally, removed part of the AddressBasedDestinationTest that checked for the exception being thrown when the a Topic with &quot;at-least-once&quot; is specified for reliability.&lt;/p&gt;</comment>
                            <comment id="13124148" author="macbean" created="Mon, 10 Oct 2011 14:54:16 +0000"  >&lt;p&gt;Could you please review and commit if happy?&lt;/p&gt;</comment>
                            <comment id="13124895" author="macbean" created="Tue, 11 Oct 2011 09:58:29 +0000"  >&lt;p&gt;Rajith,&lt;/p&gt;



&lt;p&gt;Would you mind having a look at this? I found a few use cases that were not working and had a look back at some commits you did previously for JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-2732&quot; title=&quot;JMS Client should implement the reliability option from the new addressing scheme&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-2732&quot;&gt;&lt;del&gt;QPID-2732&lt;/del&gt;&lt;/a&gt;.  There seemed to be a few commits and the final outcome didn&#8217;t seem to agree with the original description. My change effectively backs out part of this work and so I would like you to review and give comment.&lt;/p&gt;



&lt;p&gt;--Andrew&lt;/p&gt;</comment>
                            <comment id="13124896" author="macbean" created="Tue, 11 Oct 2011 09:59:30 +0000"  >&lt;p&gt;See comments.&lt;/p&gt;</comment>
                            <comment id="13141344" author="rajith" created="Tue, 1 Nov 2011 17:17:10 +0000"  >&lt;p&gt;For Topics we need to figure out a sensible default. Maybe we can use AT_LEAST_ONCE (the solution you&apos;ve used) to support the above case. From a JMS spec perspective I think we need AT_LEAST_ONCE to satisfy all cases. The flip side is that this prevents us from using an optimization for true Topics, where you really don&apos;t care about re-receving the messages. &lt;/p&gt;

&lt;p&gt;In that case then maybe we need to stress in our documentation, that uses need to explicitly specify that they need UNRELIABLE if they don&apos;t care about redelivery in the case of rollback and recover. Thats probably a reasonable compromise. We should definitely release-note this change if we get this into the 0.14 release.&lt;/p&gt;</comment>
                            <comment id="13143189" author="k-wall" created="Thu, 3 Nov 2011 14:10:11 +0000"  >&lt;p&gt;Thanks Rajith. &lt;/p&gt;

&lt;p&gt;&amp;gt; The flip side is that this prevents us from using an optimization for true Topics, where you really don&apos;t care about re-receiving the messages. &lt;/p&gt;

&lt;p&gt;I think if a JMS user didn&apos;t care about re-receiving messages, then i doubt they would choose a transacted or client-acknowledged JMS session, but as you suggest, if a user wants this behaviour, they can always choose to explicitly downgrade the reliability in the address.   I think this is the right approach.&lt;/p&gt;

&lt;p&gt;As there are workaround(s) for this issue, I suggest that this commit will go to trunk after the branch has been taken for 0-14.&lt;/p&gt;











</comment>
                            <comment id="13145340" author="k-wall" created="Mon, 7 Nov 2011 11:07:19 +0000"  >&lt;p&gt;Patch applied.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12498431" name="0001-QPID-3536-0-10-overrides-JMS-AcceptMode-with-a-defau.patch" size="9848" author="macbean" created="Mon, 10 Oct 2011 14:50:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>56755</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 2 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0bkif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>65435</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>