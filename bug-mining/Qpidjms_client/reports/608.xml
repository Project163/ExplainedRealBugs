<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:23:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[QPID-7189] [Java Client 0-8..0-10] Client fails to negotiate AMQP connection after downgrading from 0-10 to 0-91</title>
                <link>https://issues.apache.org/jira/browse/QPID-7189</link>
                <project id="12310520" key="QPID">Qpid</project>
                    <description>&lt;p&gt;If broker replies with AMQP 0.9.1 during protocol negotiation, the client is not able to create a delegate as it is looking for delegate using the code below:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; delegateClassName = &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.qpid.client.AMQConnectionDelegate_s_%s&quot;&lt;/span&gt;,  pe.getMajorVersion(), pe.getMinorVersion());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;There is no delegate AMQConnectionDelegate_0_91&lt;/p&gt;

&lt;p&gt;The client fails with exception as below:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception in thread &quot;main&quot; javax.jms.JMSException: Error creating connection: Protocol: 0.91 is rquired by the broker but is not currently supported by this client library implementation
	at org.apache.qpid.client.AMQConnectionFactory.createConnection(AMQConnectionFactory.java:134)
	at org.apache.qpid.client.AMQConnectionFactory.createConnection(AMQConnectionFactory.java:57)
	at org.apache.qpid.example.Hello.runTest(Hello.java:50)
	at org.apache.qpid.example.Hello.main(Hello.java:36)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
Caused by: org.apache.qpid.AMQProtocolException: Protocol: 0.91 is rquired by the broker but is not currently supported by this client library implementation [error code 543: client unsupported protocol]
	at org.apache.qpid.client.AMQConnection.initDelegate(AMQConnection.java:626)
	at org.apache.qpid.client.AMQConnection.makeConnection(AMQConnection.java:521)
	at org.apache.qpid.client.AMQConnection.&amp;lt;init&amp;gt;(AMQConnection.java:474)
	at org.apache.qpid.client.AMQConnectionFactory.createConnection(AMQConnectionFactory.java:130)
	... 8 more
Caused by: java.lang.ClassNotFoundException: org.apache.qpid.client.AMQConnectionDelegate_0_91
	at java.net.URLClassLoader.findClass(URLClassLoader.java:381)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:424)
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
	at java.lang.Class.forName0(Native Method)
	at java.lang.Class.forName(Class.java:264)
	at org.apache.qpid.client.AMQConnection.initDelegate(AMQConnection.java:616)
	... 11 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12956811">QPID-7189</key>
            <summary>[Java Client 0-8..0-10] Client fails to negotiate AMQP connection after downgrading from 0-10 to 0-91</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwall">Keith Wall</assignee>
                                    <reporter username="orudyy">Alex Rudyy</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Apr 2016 09:40:22 +0000</created>
                <updated>Wed, 2 Oct 2019 19:21:29 +0000</updated>
                            <resolved>Tue, 12 Apr 2016 09:01:14 +0000</resolved>
                                    <version>0.32</version>
                    <version>qpid-java-6.0</version>
                    <version>qpid-java-6.0.1</version>
                                    <fixVersion>qpid-java-6.0.2</fixVersion>
                    <fixVersion>qpid-java-6.1</fixVersion>
                                    <component>JMS AMQP 0-x</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15230329" author="jira-bot" created="Thu, 7 Apr 2016 14:38:43 +0000"  >&lt;p&gt;Commit 1738135 from orudyy@apache.org in branch &apos;java/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1738135&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1738135&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-7189&quot; title=&quot;[Java Client 0-8..0-10] Client fails to negotiate AMQP connection after downgrading from 0-10 to 0-91&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-7189&quot;&gt;&lt;del&gt;QPID-7189&lt;/del&gt;&lt;/a&gt;: Fix creation of delegate for AMQP 0-9-1 in response to broker supported protocol on protocol negotiation&lt;/p&gt;</comment>
                            <comment id="15230386" author="alex.rufous" created="Thu, 7 Apr 2016 15:16:36 +0000"  >&lt;p&gt;Keith,&lt;br/&gt;
Please review the changes&lt;/p&gt;</comment>
                            <comment id="15231420" author="alex.rufous" created="Fri, 8 Apr 2016 00:31:34 +0000"  >&lt;p&gt;Attached a patch renaming delegates to match protocol versions&lt;/p&gt;</comment>
                            <comment id="15232573" author="jira-bot" created="Fri, 8 Apr 2016 17:49:26 +0000"  >&lt;p&gt;Commit 1738271 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwall&quot; class=&quot;user-hover&quot; rel=&quot;kwall&quot;&gt;kwall&lt;/a&gt; in branch &apos;java/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1738271&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1738271&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-7189&quot; title=&quot;[Java Client 0-8..0-10] Client fails to negotiate AMQP connection after downgrading from 0-10 to 0-91&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-7189&quot;&gt;&lt;del&gt;QPID-7189&lt;/del&gt;&lt;/a&gt;: &lt;span class=&quot;error&quot;&gt;&amp;#91;Java Client&amp;#93;&lt;/span&gt; Consistently name the connection delegates&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;The previous inconsistency with the naming of 0-91&apos;s delegate was caused by the fact that&lt;br/&gt;
  AMQP 0-10 implementation misinterpreted 0-91 header.&lt;/li&gt;
	&lt;li&gt;Also on the 0-8..0-91 path ensure that a AMQProtocolHeaderException is promptly reported to the caller (rather than causing a hang).&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15236880" author="alex.rufous" created="Tue, 12 Apr 2016 09:01:14 +0000"  >&lt;p&gt;The change made in commit under revision &lt;a href=&quot;https://svn.apache.org/r1738271&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1738271&lt;/a&gt; looks good to me. We need to port fixes into 6.0.x&lt;/p&gt;</comment>
                            <comment id="15236974" author="jira-bot" created="Tue, 12 Apr 2016 10:37:26 +0000"  >&lt;p&gt;Commit 1738758 from orudyy@apache.org in branch &apos;java/branches/6.0.x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1738758&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1738758&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-7189&quot; title=&quot;[Java Client 0-8..0-10] Client fails to negotiate AMQP connection after downgrading from 0-10 to 0-91&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-7189&quot;&gt;&lt;del&gt;QPID-7189&lt;/del&gt;&lt;/a&gt;: Fix creation of delegate for AMQP 0-9-1 in response to broker supported protocol on protocol negotiation&lt;/p&gt;

&lt;p&gt;          Consistently name the connection delegates&lt;br/&gt;
          The previous inconsistency with the naming of 0-91&apos;s delegate was caused by the fact that&lt;br/&gt;
          AMQP 0-10 implementation misinterpreted 0-91 header.&lt;/p&gt;

&lt;p&gt;          Merged from trunk&lt;br/&gt;
          svn merge -c 1738135,1738271 ^/qpid/java/trunk&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12797644" name="0001-QPID-7189-Rename-connection-delegates-to-match-proto.patch" size="76991" author="orudyy" created="Fri, 8 Apr 2016 00:31:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 31 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2vrwv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>