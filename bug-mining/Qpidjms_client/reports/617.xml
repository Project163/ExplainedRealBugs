<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:23:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[QPID-6377] Connection&apos;s taskpool not shutdown if Connection is closed from the broker side</title>
                <link>https://issues.apache.org/jira/browse/QPID-6377</link>
                <project id="12310520" key="QPID">Qpid</project>
                    <description>&lt;p&gt;If the client&apos;s connection is closed from the Broker side, the taskpool used to deliver unrouteable messages and some asynchronous exceptions is not shutdown.   This will cause a small memory leak and potentially leaked threads too.&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12773848">QPID-6377</key>
            <summary>Connection&apos;s taskpool not shutdown if Connection is closed from the broker side</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lorenz.quack">Lorenz Quack</assignee>
                                    <reporter username="kwall">Keith Wall</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Feb 2015 13:29:11 +0000</created>
                <updated>Wed, 2 Oct 2019 19:21:48 +0000</updated>
                            <resolved>Fri, 29 Jul 2016 09:19:52 +0000</resolved>
                                    <version>0.18</version>
                    <version>0.22</version>
                    <version>0.30</version>
                                    <fixVersion>qpid-java-6.0.5</fixVersion>
                    <fixVersion>qpid-java-6.1</fixVersion>
                                    <component>JMS AMQP 0-x</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15397002" author="jira-bot" created="Thu, 28 Jul 2016 06:12:30 +0000"  >&lt;p&gt;Commit 1754354 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwall&quot; class=&quot;user-hover&quot; rel=&quot;kwall&quot;&gt;kwall&lt;/a&gt; in branch &apos;java/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1754354&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1754354&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-6377&quot; title=&quot;Connection&amp;#39;s taskpool not shutdown if Connection is closed from the broker side&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-6377&quot;&gt;&lt;del&gt;QPID-6377&lt;/del&gt;&lt;/a&gt;: Ensure that calling Connection#close shuts down the taskpool, even if connection is closed from server side&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Also stopped ConnectionTest leaking so many connections&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15397399" author="jira-bot" created="Thu, 28 Jul 2016 11:06:01 +0000"  >&lt;p&gt;Commit 1754392 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwall&quot; class=&quot;user-hover&quot; rel=&quot;kwall&quot;&gt;kwall&lt;/a&gt; in branch &apos;java/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1754392&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1754392&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-6377&quot; title=&quot;Connection&amp;#39;s taskpool not shutdown if Connection is closed from the broker side&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-6377&quot;&gt;&lt;del&gt;QPID-6377&lt;/del&gt;&lt;/a&gt;: &lt;span class=&quot;error&quot;&gt;&amp;#91;Java Client&amp;#93;&lt;/span&gt; Prevent a connection failure on initial connection leaking a taskpool/thread&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Change AMQConnection&apos;s constructor to shutdown the taskpool if the constructor did not complete successfully (i.e. initial connection fails).&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15397423" author="k-wall" created="Thu, 28 Jul 2016 11:30:28 +0000"  >&lt;p&gt;The defect also meant that if the Connection&apos;s first attempt to connect to the Broker failed (i.e. the &lt;tt&gt;AMQConnection&lt;/tt&gt; constructor threw an exception), the task pool and its thread would be leaked.  The application would have no way to free this leak as it has no handle to the connection.  My second commit (r.1754392) resolves this issue.  This defect could affect someone implementing their own connection retry logic, or using a framework that does the same thing.&lt;/p&gt;</comment>
                            <comment id="15397424" author="k-wall" created="Thu, 28 Jul 2016 11:31:50 +0000"  >&lt;p&gt;Lorenz - could you review this commit please?&lt;/p&gt;</comment>
                            <comment id="15397712" author="lorenz.quack" created="Thu, 28 Jul 2016 15:48:21 +0000"  >&lt;p&gt;looks good to me.&lt;br/&gt;
Ready for backporting.&lt;/p&gt;</comment>
                            <comment id="15397748" author="jira-bot" created="Thu, 28 Jul 2016 16:16:53 +0000"  >&lt;p&gt;Commit 1754427 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwall&quot; class=&quot;user-hover&quot; rel=&quot;kwall&quot;&gt;kwall&lt;/a&gt; in branch &apos;java/branches/6.0.x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1754427&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1754427&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-6377&quot; title=&quot;Connection&amp;#39;s taskpool not shutdown if Connection is closed from the broker side&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-6377&quot;&gt;&lt;del&gt;QPID-6377&lt;/del&gt;&lt;/a&gt;: &lt;span class=&quot;error&quot;&gt;&amp;#91;Java Client&amp;#93;&lt;/span&gt;  Ensure that calling Connection#close shuts down the taskpool, even if connection is closed from server side&lt;/p&gt;</comment>
                            <comment id="15397756" author="jira-bot" created="Thu, 28 Jul 2016 16:23:25 +0000"  >&lt;p&gt;Commit 1754428 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwall&quot; class=&quot;user-hover&quot; rel=&quot;kwall&quot;&gt;kwall&lt;/a&gt; in branch &apos;java/branches/6.0.x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1754428&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1754428&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-6377&quot; title=&quot;Connection&amp;#39;s taskpool not shutdown if Connection is closed from the broker side&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-6377&quot;&gt;&lt;del&gt;QPID-6377&lt;/del&gt;&lt;/a&gt;: &lt;span class=&quot;error&quot;&gt;&amp;#91;Java Client&amp;#93;&lt;/span&gt; Prevent a connection failure on initial connection leaking a taskpool/thread&lt;br/&gt;
Merged from trunk with command svn diff -c 1754392 ^/qpid/java/trunk&lt;/p&gt;</comment>
                            <comment id="15397759" author="k-wall" created="Thu, 28 Jul 2016 16:24:25 +0000"  >&lt;p&gt;This was the merge of 1754354.  This needed no intervention.&lt;/p&gt;</comment>
                            <comment id="15397762" author="k-wall" created="Thu, 28 Jul 2016 16:24:57 +0000"  >&lt;p&gt;This merged need manual resolution.&lt;/p&gt;</comment>
                            <comment id="15399021" author="lorenz.quack" created="Fri, 29 Jul 2016 09:19:52 +0000"  >&lt;p&gt;merge looks good&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12820653" name="LeakedConnectionThreadsBefore.png" size="215518" author="kwall" created="Thu, 28 Jul 2016 06:14:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 16 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i25f7j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>