<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:21:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[QPID-3156] Java client implementation of the Address syntax for Destinations throws a ClassCastException when used with the documented &apos;True&apos; or &apos;False&apos; values for node durability</title>
                <link>https://issues.apache.org/jira/browse/QPID-3156</link>
                <project id="12310520" key="QPID">Qpid</project>
                    <description>&lt;p&gt;The Java client implementation of the Address syntax for destinations throws a ClassCastException when used with the documented (&lt;a href=&quot;http://qpid.apache.org/books/0.8/Programming-In-Apache-Qpid/html/ch02s04.html#section-address-string-bnf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://qpid.apache.org/books/0.8/Programming-In-Apache-Qpid/html/ch02s04.html#section-address-string-bnf&lt;/a&gt;) &apos;True&apos; or &apos;False&apos; values for node durability, instead requiring that users specify &apos;true&apos; or &apos;false&apos; as the value to achieve the desired effect. The former is parsed as a boolean value by the AddressParser whereas the later is parsed as a String, but the AddressHelper implementation expects the durable property to be defined as a String and casts the value as such without doing an instanceof check after retrieving it from an untyped Map, thus leading to the ClassCastException observed.&lt;/p&gt;

&lt;p&gt;Ideally I would suggest the parser/helper should accept both variations going forward, thus preserving compatibility for anyone with already functional code and also making it possible for users to use whichever variant they prefer because e.g. it is best suited to a particular implementation language idiom.&lt;/p&gt;


&lt;p&gt;Reported by a user via the dev list:&lt;/p&gt;

&lt;p&gt;I tried to create a durable queue like this&lt;/p&gt;

&lt;p&gt;queue = queueSession.createQueue(&quot;myQueue;{create:always, node:{durable:&lt;br/&gt;
True}}&quot;);&lt;br/&gt;
        QueueSender queueSender = queueSession.createSender(queue);&lt;br/&gt;
        queueSender.send(textMessage);&lt;/p&gt;

&lt;p&gt;and getting this exception.&lt;/p&gt;

&lt;p&gt;Caused by: java.lang.ClassCastException: java.lang.Boolean cannot be cast to java.lang.String&lt;br/&gt;
    at&lt;br/&gt;
org.apache.qpid.client.messaging.address.AddressHelper.getDurability(AddressHelper.java:237)&lt;br/&gt;
    at&lt;br/&gt;
org.apache.qpid.client.messaging.address.AddressHelper.fillInCommonNodeArgs(AddressHelper.java:222)&lt;br/&gt;
    at&lt;br/&gt;
org.apache.qpid.client.messaging.address.AddressHelper.createQueueNode(AddressHelper.java:215)&lt;br/&gt;
    at&lt;br/&gt;
org.apache.qpid.client.messaging.address.AddressHelper.getSourceNode(AddressHelper.java:254)&lt;br/&gt;
    at&lt;br/&gt;
org.apache.qpid.client.AMQDestination.rebuildTargetAndSourceNodes(AMQDestination.java:888)&lt;br/&gt;
    at&lt;br/&gt;
org.apache.qpid.client.AMQSession_0_10.resolveAddressType(AMQSession_0_10.java:1272)&lt;/p&gt;

&lt;p&gt;thanks,&lt;br/&gt;
Amila.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12501887">QPID-3156</key>
            <summary>Java client implementation of the Address syntax for Destinations throws a ClassCastException when used with the documented &apos;True&apos; or &apos;False&apos; values for node durability</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="robbie">Robbie Gemmell</reporter>
                        <labels>
                    </labels>
                <created>Sat, 19 Mar 2011 23:20:11 +0000</created>
                <updated>Tue, 14 Mar 2017 20:07:10 +0000</updated>
                            <resolved>Tue, 12 Jul 2011 14:45:54 +0000</resolved>
                                    <version>0.6</version>
                    <version>0.7</version>
                    <version>0.8</version>
                    <version>0.9</version>
                    <version>0.10</version>
                                    <fixVersion>0.11</fixVersion>
                                    <component>JMS AMQP 0-x</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13009974" author="rajith" created="Wed, 23 Mar 2011 02:32:50 +0000"  >&lt;p&gt;I&apos;ve committed a fix to this on trunk. Should we port this to the 0.10 branch as well ?&lt;br/&gt;
IMO this is not critical as if &apos;true&apos; is used instead of &apos;True&apos; it will work.&lt;br/&gt;
We could probably release note this issue and get away with it.&lt;/p&gt;</comment>
                            <comment id="13010115" author="justi9" created="Wed, 23 Mar 2011 13:35:46 +0000"  >&lt;p&gt;In my opinion, this is a worthy fix for a user gotcha and a low risk change.  I tilt in favor of merging this to 0.10, but I am keen to hear what others think.&lt;/p&gt;</comment>
                            <comment id="13010995" author="andrew.kennedy" created="Thu, 24 Mar 2011 23:12:48 +0000"  >&lt;p&gt;Use existing MapAccessor code to retreive the Boolean property, as in the rest of AddressHelper, rather than duplicating the logic.&lt;/p&gt;

&lt;p&gt;If this is to be included in 0.10, I suggest we use this patch instead.&lt;/p&gt;</comment>
                            <comment id="13011016" author="justi9" created="Thu, 24 Mar 2011 23:48:21 +0000"  >&lt;p&gt;Robbie pointed out on the dev list that this behavior has existed for two releases.  To me, that makes the evident level of user gotcha much less.  Therefore the incentive to merge this to 0.10 is much less as well.  Rejected for 0.10.&lt;/p&gt;
</comment>
                            <comment id="13011201" author="rajith" created="Fri, 25 Mar 2011 13:59:08 +0000"  >&lt;p&gt;Andrew,&lt;/p&gt;

&lt;p&gt;I introduced MapAccessor precisely for that reason, and should have used it.&lt;br/&gt;
However I plan to clean up the code a bit more in this area and I am hoping to commit that in the coming days.&lt;br/&gt;
Will definitely ensure that the proper methods are used.&lt;/p&gt;

&lt;p&gt;Rajith&lt;/p&gt;</comment>
                            <comment id="13011202" author="rajith" created="Fri, 25 Mar 2011 14:00:56 +0000"  >&lt;p&gt;As mentioned I am neutral about including it for 0.10 as there is clearly an alternative to get this working.&lt;br/&gt;
However we need to release note this.&lt;/p&gt;</comment>
                            <comment id="13063937" author="gemmellr" created="Tue, 12 Jul 2011 14:45:54 +0000"  >&lt;p&gt;Closing out, changes were committed long ago to address this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12474567" name="0001-QPID-3156-Use-MapAccessor-to-retrieve-Boolean-proper.patch" size="1456" author="andrew.kennedy" created="Thu, 24 Mar 2011 23:12:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>68265</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 19 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0bnfb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>65907</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>