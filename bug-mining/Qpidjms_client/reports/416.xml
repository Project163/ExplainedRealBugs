<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:21:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[QPID-2703] Transaction Rollback/Recover does not restore consumer credit</title>
                <link>https://issues.apache.org/jira/browse/QPID-2703</link>
                <project id="12310520" key="QPID">Qpid</project>
                    <description>&lt;p&gt;When a transaction rollback/recover occurs on the 0-8/0-9/0-91 code path the messages are put back on to the queue but the subscriber is not credited for them. This can be seen with a small prefetch. The credit is lost and the client starves. Adding a restoreCredit call in the message release will address this issue.&lt;/p&gt;

&lt;p&gt;The same issue exists in 0-10 code path but for &lt;b&gt;different&lt;/b&gt; reasons.  On 0-10, a client is required to complete commands.  The Java client currently fails to complete the message.transfer commands that correspond to those messages that must be returned to the Broker due to the rollback/recover and for this reason the Brokers are failing to recredit.   This problem is evident when using the Java Broker, but is masked when using the CPP Broker (by a credit window issue that results in the Broker expanding credit window beyond the requested limit).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12468138">QPID-2703</key>
            <summary>Transaction Rollback/Recover does not restore consumer credit</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwall">Keith Wall</assignee>
                                    <reporter username="ritchiem">Martin Ritchie</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Jun 2010 09:49:27 +0000</created>
                <updated>Wed, 11 Feb 2015 20:07:33 +0000</updated>
                            <resolved>Thu, 17 Nov 2011 10:26:32 +0000</resolved>
                                    <version>0.6</version>
                    <version>0.8</version>
                    <version>0.10</version>
                    <version>0.12</version>
                                    <fixVersion>0.14</fixVersion>
                                    <component>Broker-J</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12883490" author="ritchiem" created="Tue, 29 Jun 2010 09:50:23 +0000"  >&lt;p&gt;This change was only applied to the 0.5.x-dev branch. It needs to be merged to trunk.&lt;/p&gt;</comment>
                            <comment id="13151929" author="k-wall" created="Thu, 17 Nov 2011 09:09:11 +0000"  >&lt;p&gt;Updated description to describe the same issue on the 0-10 path.&lt;/p&gt;</comment>
                            <comment id="13152096" author="rajith" created="Thu, 17 Nov 2011 15:26:56 +0000"  >&lt;p&gt;Part of the reason is in the java client completions are tied to accepts.&lt;br/&gt;
See &lt;a href=&quot;https://reviews.apache.org/r/2853/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/2853/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13152129" author="rajith" created="Thu, 17 Nov 2011 16:41:57 +0000"  >&lt;p&gt;I think this is a good short term fix for the 0.14 release.&lt;br/&gt;
The patch I&apos;ve worked on is for trunk development and targeted at 0.16&lt;/p&gt;</comment>
                            <comment id="13152161" author="justi9" created="Thu, 17 Nov 2011 17:55:54 +0000"  >&lt;p&gt;Reviewed by Rajith.  Approved for 0.14.&lt;/p&gt;</comment>
                            <comment id="13152211" author="gemmellr" created="Thu, 17 Nov 2011 18:44:33 +0000"  >&lt;p&gt;Merged to 0.14 release branch.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                            <outwardlinks description="is a clone of">
                                        <issuelink>
            <issuekey id="12464272">QPID-2596</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>169396</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 1 week, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0bkbj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>65404</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>