<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:22:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[QPID-5870] Closing a topic consumer should delete its exclusive auto-delete queue</title>
                <link>https://issues.apache.org/jira/browse/QPID-5870</link>
                <project id="12310520" key="QPID">Qpid</project>
                    <description>&lt;p&gt;When a topic consumer is closed, the subscription queue needs to be closed as well.&lt;br/&gt;
Currently this queue is only deleted when the session is closed (due to being marked auto-deleted).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12725123">QPID-5870</key>
            <summary>Closing a topic consumer should delete its exclusive auto-delete queue</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rajith">Rajith Muditha Attapattu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Jul 2014 22:57:35 +0000</created>
                <updated>Tue, 14 Mar 2017 20:12:49 +0000</updated>
                            <resolved>Wed, 1 Apr 2015 20:08:51 +0000</resolved>
                                    <version>0.28</version>
                                    <fixVersion>0.30</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14050842" author="rajith" created="Wed, 2 Jul 2014 23:04:59 +0000"  >&lt;p&gt;The subscription queue is now deleted when the consumer is closed.&lt;/p&gt;</comment>
                            <comment id="14051910" author="k-wall" created="Thu, 3 Jul 2014 21:01:45 +0000"  >&lt;p&gt;Hi Rajith, I&apos;m curious about the background to this defect - please could you add some detail.  When you make the assertion &apos;when a topic consumer is closed, the subscription queue needs to be closed as well&apos; where does this come from?  Is this a 0-10 spec? A defect in the support for ADDR address format?  cheers Keith.&lt;/p&gt;</comment>
                            <comment id="14052427" author="gemmellr" created="Fri, 4 Jul 2014 13:01:55 +0000"  >&lt;p&gt;Seconding Keiths request for more detail. Most of the patch seems to be extracting parameters and adding another method, the key bit seems to be always calling &apos;deleteSubscriptionQueue&apos; rather than only do so if the Address string said to delete always/receiver. I see that checks to ensure that it is a &apos;topic address&apos;, but I wonder what happens around e.g. DurableSubscriptions, are they handled appropriately? Needs some tests.&lt;/p&gt;</comment>
                            <comment id="14052523" author="rajith" created="Fri, 4 Jul 2014 15:47:26 +0000"  >&lt;p&gt;Again I apologize for not providing enough context.&lt;/p&gt;

&lt;p&gt;Yes the key change here is  &quot;deleteSubscriptionQueue&quot; is always being called.&lt;/p&gt;

&lt;p&gt;This is to bring the JMS client inline with the address spec.&lt;br/&gt;
This is something requested by customers and IMO it is the correct behavior as well.&lt;/p&gt;

&lt;p&gt;The delete directive should only apply for node properties (like the exchange or queue being created).&lt;br/&gt;
The subscription queue should not exist beyond the subscription except in the case of durable subscriptions.&lt;/p&gt;

&lt;p&gt;I will make sure the durable subscriptions aren&apos;t affected.&lt;/p&gt;</comment>
                            <comment id="14055294" author="rajith" created="Tue, 8 Jul 2014 18:47:31 +0000"  >&lt;p&gt;I added a check to ensure that the subscription queue is not deleted for durable subscribers.&lt;/p&gt;

&lt;p&gt;All existing tests pass including the durable subscription tests.&lt;/p&gt;</comment>
                            <comment id="14055304" author="rajith" created="Tue, 8 Jul 2014 18:50:39 +0000"  >&lt;p&gt;&amp;gt; but I wonder what happens around e.g. DurableSubscriptions, are they handled appropriately? Needs some tests.&lt;/p&gt;

&lt;p&gt;The testDurableSubscription in AddressBasedDestination test verifies this change.&lt;br/&gt;
If you run the test without part2 of the patch is fails.&lt;/p&gt;</comment>
                            <comment id="14055652" author="jira-bot" created="Tue, 8 Jul 2014 23:18:48 +0000"  >&lt;p&gt;Commit 1608971 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rajith&quot; class=&quot;user-hover&quot; rel=&quot;rajith&quot;&gt;rajith&lt;/a&gt; in branch &apos;qpid/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1608971&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1608971&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-5870&quot; title=&quot;Closing a topic consumer should delete its exclusive auto-delete queue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-5870&quot;&gt;&lt;del&gt;QPID-5870&lt;/del&gt;&lt;/a&gt; A Consumer is now marked if it&apos;s using a durable subscription.&lt;br/&gt;
The topic subscription queue is now deleted when the subscription ends unless it&apos;s marked as a durable-topic-subscription.&lt;/p&gt;</comment>
                            <comment id="14391257" author="scottnicol" created="Wed, 1 Apr 2015 19:09:09 +0000"  >&lt;p&gt;Can you mark this as affect java client version 0.28 and fixed in 0.30.&lt;/p&gt;</comment>
                            <comment id="14391347" author="rgodfrey" created="Wed, 1 Apr 2015 20:08:51 +0000"  >&lt;p&gt;As reported by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ScottNicol&quot; class=&quot;user-hover&quot; rel=&quot;ScottNicol&quot;&gt;ScottNicol&lt;/a&gt; above this defect seems to have been addressed by a commit from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rajith&quot; class=&quot;user-hover&quot; rel=&quot;rajith&quot;&gt;rajith&lt;/a&gt; prior to the 0.30 release (the commit appears to be consistent with the attached patches).&lt;/p&gt;

&lt;p&gt;Marking as resolved as I assume no-one will be going back and adding tests that verify that this change fixed whatever the original &quot;defect&quot; was.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12654640" name="QPID-5870.part2.patch" size="2850" author="rajith" created="Tue, 8 Jul 2014 18:47:31 +0000"/>
                            <attachment id="12653714" name="QPID-5870.patch" size="4151" author="rajith" created="Wed, 2 Jul 2014 23:04:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>403306</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 33 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1xexj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>403358</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>