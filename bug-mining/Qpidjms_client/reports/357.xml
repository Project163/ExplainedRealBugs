<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:21:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[QPID-2979] The following SASL mechanisms [PLAIN] specified by the client are not supported by the broker</title>
                <link>https://issues.apache.org/jira/browse/QPID-2979</link>
                <project id="12310520" key="QPID">Qpid</project>
                    <description>&lt;p&gt;An exception is thrown when connecting from a Java client (v 0.8) to qpidd (v 0.8) run with &quot;--auth no&quot;.&lt;/p&gt;

&lt;p&gt;javax.jms.JMSException: Error creating connection: The following SASL mechanisms &lt;span class=&quot;error&quot;&gt;&amp;#91;PLAIN&amp;#93;&lt;/span&gt; specified by the client are not supported by the broker&lt;br/&gt;
	at org.apache.qpid.client.AMQConnectionFactory.createConnection(AMQConnectionFactory.java:286)&lt;/p&gt;

&lt;p&gt;Used JNDI/JMS configuration:&lt;/p&gt;

&lt;p&gt;java.naming.factory.initial = org.apache.qpid.jndi.PropertiesFileInitialContextFactory&lt;br/&gt;
connectionfactory.qpidConnectionfactory = amqp://guest:guest@clientid/abcd?brokerlist=&apos;tcp://localhost:5672&apos;&lt;br/&gt;
destination.mainSend = direct://amq.direct//step.01&lt;/p&gt;

&lt;p&gt;It worked just fine in 0.6 but no success now in 0.8. &lt;/p&gt;

&lt;p&gt;The broker is from Contributed C++ Packages -&amp;gt; Windows Installer (&lt;a href=&quot;http://www.riverace.com/qpid/qpidc-0.8-x86.msi&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.riverace.com/qpid/qpidc-0.8-x86.msi&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;Logs from qpidd:&lt;/p&gt;

&lt;p&gt;C:Program Filesapache-qpidc-0.8bin&amp;gt;qpidd --auth no --log-enable info+ --log-enable trace+:amqp_0_10&lt;br/&gt;
2010-12-15 11:42:48 info Management enabled&lt;br/&gt;
2010-12-15 11:42:48 notice SASL disabled: No Authentication Performed&lt;br/&gt;
2010-12-15 11:42:48 info Policy file not specified. ACL Disabled, no ACL checking being done!&lt;br/&gt;
2010-12-15 11:42:48 error Failed to initialise SSL listener: The credentials supplied to the package were not recognized (........cpps&lt;br/&gt;
rcqpidbrokerwindowsSslProtocolFactory.cpp:177)&lt;br/&gt;
2010-12-15 11:42:48 notice Listening on TCP port 5672&lt;br/&gt;
5672&lt;br/&gt;
2010-12-15 11:42:48 notice Broker running&lt;br/&gt;
2010-12-15 11:42:53 trace SENT 127.0.0.1:1786 INIT(0-10)&lt;br/&gt;
2010-12-15 11:42:53 trace SENT &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:1786&amp;#93;&lt;/span&gt;: Frame[BEbe; channel=0; {ConnectionStartBody: server-properties=&lt;/p&gt;
{qpid.federation_tag:V2:36:s
tr16(96790865-dc5c-427a-affe-70d021653737)}
&lt;p&gt;; mechanisms=str16&lt;/p&gt;
{V2:9:str16(ANONYMOUS)}
&lt;p&gt;; locales=str16&lt;/p&gt;
{V2:5:str16(en_US)}
&lt;p&gt;; }]&lt;/p&gt;


&lt;p&gt;Run it with the -t option:&lt;/p&gt;

&lt;p&gt;2010-12-15 11:45:56 trace SEND raiseEvent (v1) class=org.apache.qpid.broker.clientDisconnect&lt;br/&gt;
2010-12-15 11:46:01 debug RECV &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:1794&amp;#93;&lt;/span&gt; INIT(0-10)&lt;br/&gt;
2010-12-15 11:46:01 trace SENT 127.0.0.1:1794 INIT(0-10)&lt;br/&gt;
2010-12-15 11:46:01 trace SENT &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:1794&amp;#93;&lt;/span&gt;: Frame[BEbe; channel=0; {ConnectionStartBody: server-properties=&lt;/p&gt;
{qpid.federation_tag:V2:36:s
tr16(96790865-dc5c-427a-affe-70d021653737)}
&lt;p&gt;; mechanisms=str16&lt;/p&gt;
{V2:9:str16(ANONYMOUS)}
&lt;p&gt;; locales=str16&lt;/p&gt;
{V2:5:str16(en_US)}
&lt;p&gt;; }]&lt;br/&gt;
2010-12-15 11:46:01 debug DISCONNECTED &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:1794&amp;#93;&lt;/span&gt;&lt;br/&gt;
2010-12-15 11:46:01 trace SEND raiseEvent (v1) class=org.apache.qpid.broker.clientDisconnect &lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows XP&lt;/p&gt;</environment>
        <key id="12493333">QPID-2979</key>
            <summary>The following SASL mechanisms [PLAIN] specified by the client are not supported by the broker</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gsim">Gordon Sim</assignee>
                                    <reporter username="ibisek">Ibisek</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Dec 2010 14:42:10 +0000</created>
                <updated>Mon, 29 Jul 2013 18:54:09 +0000</updated>
                            <resolved>Tue, 1 Mar 2011 16:59:24 +0000</resolved>
                                    <version>0.8</version>
                                    <fixVersion>0.9</fixVersion>
                                    <component>C++ Broker</component>
                    <component>JMS AMQP 0-x</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12971816" author="shuston" created="Wed, 15 Dec 2010 20:19:26 +0000"  >&lt;p&gt;Comment from this thread in email before it got to JIRA, from Gordon Sim:&lt;/p&gt;

&lt;p&gt;Ok, as you can see the windows broker behaves slightly differently with &lt;br/&gt;
--auth no, and only offers ANONYMOUS.&lt;/p&gt;

&lt;p&gt;Unfortunately at present there is no implementation of that mechanism &lt;br/&gt;
for java (either in the SunSASL provider or explicitly provided by &lt;br/&gt;
Qpid). It would not be difficult to add I imagine.&lt;/p&gt;

&lt;p&gt;Perhaps the behaviour of the windows broker in this regard has changed &lt;br/&gt;
in 0.8, intentionally or otherwise&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. However I can&apos;t see any obvious &lt;br/&gt;
change.&lt;/p&gt;

&lt;p&gt;It would be an easy fix on the broker side (the handling of PLAIN is &lt;br/&gt;
still there for the auth=no case, just need to advertise the mech).&lt;/p&gt;

&lt;p&gt;==============================================================&lt;/p&gt;

&lt;p&gt;Thus, there may be two issues here that are intersecting:&lt;/p&gt;

&lt;p&gt;1. The Java client doesn&apos;t do ANONYMOUS&lt;/p&gt;

&lt;p&gt;2. The C++ Windows broker doesn&apos;t offer PLAIN when --auth no is set (although from the jira report, it once did)&lt;/p&gt;</comment>
                            <comment id="12971817" author="shuston" created="Wed, 15 Dec 2010 20:20:17 +0000"  >&lt;p&gt;Noting that the C++ broker is involved in this report as well.&lt;/p&gt;</comment>
                            <comment id="12991672" author="gemmellr" created="Mon, 7 Feb 2011 22:40:23 +0000"  >&lt;p&gt;Updating Fix For to an unreleased version instead of 0.6.&lt;/p&gt;</comment>
                            <comment id="12991744" author="rajith" created="Tue, 8 Feb 2011 00:42:14 +0000"  >&lt;p&gt;The reason why this used to work before (0.6 release) was due to the Java client silently ignoring SASL negotiation if the broker does not support any of the SASL mechanism the client is configured to use.&lt;br/&gt;
This IMO is a security issue and should be immediately highlighted via an exception.&lt;br/&gt;
Therefore from 0.8 onwards the Java client now throws an exception if the client does not support any of the mechanisms offered by the broker.&lt;/p&gt;

&lt;p&gt;By default the Java client supports PLAIN - and it does not seem to support ANONYMOUS &lt;a href=&quot;#1&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;see #1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://download.oracle.com/javase/6/docs/technotes/guides/security/sasl/sasl-refguide.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://download.oracle.com/javase/6/docs/technotes/guides/security/sasl/sasl-refguide.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12991746" author="rajith" created="Tue, 8 Feb 2011 00:43:50 +0000"  >&lt;p&gt;We could probably have two solutions&lt;br/&gt;
1). If --auth no is specified, then the broker does not send anything in the SASL mechanism array to the client.&lt;br/&gt;
2.) Or if the broker sends ANONYMOUS to the Java client it should just skip SASL negotiation.&lt;/p&gt;

&lt;p&gt;Not sure which option is better &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12998878" author="gsim" created="Thu, 24 Feb 2011 15:02:20 +0000"  >&lt;p&gt;I don&apos;t think either of those is a good solution.&lt;/p&gt;

&lt;p&gt;(1) The broker can&apos;t send nothing in the mechanism array as that means no mechanisms are supported and the sasl handshake that is required part of the AMQP connection handshake could not complete.&lt;/p&gt;

&lt;p&gt;(2) I&apos;m not sure what you mean by having Java &apos;skip SASL negotiation&apos;. It has to send a connection-start-ok anyway; all it needs to do is state ANONYMOUS in the mechanism the response can actually be empty if desired. The neatest way to do this is a simple SASL plugin. &lt;/p&gt;</comment>
                            <comment id="12998881" author="gsim" created="Thu, 24 Feb 2011 15:05:22 +0000"  >&lt;p&gt;This patch provides an ANONYMOUS SaslClient implementation (the broker already seems to have a SaslServer).&lt;/p&gt;

&lt;p&gt;It also adds the factory to the dynamic list properties and registers all factories from AMQConnectionDelegate_0_10 as the registration only seems to happen for 0-8/0-9 paths at present.&lt;/p&gt;</comment>
                            <comment id="12998883" author="gsim" created="Thu, 24 Feb 2011 15:07:28 +0000"  >&lt;p&gt;A further question is why the 0-10 codepath defaults to only accepting PLAIN rather than allowing the underlying Sasl implementation to determine what is available (when no user defined preferences or restrictions are specified)?&lt;/p&gt;</comment>
                            <comment id="12999332" author="gsim" created="Fri, 25 Feb 2011 12:27:40 +0000"  >&lt;p&gt;review requested: &lt;a href=&quot;https://reviews.apache.org/r/445/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/445/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13000664" author="gemmellr" created="Tue, 1 Mar 2011 01:54:39 +0000"  >&lt;p&gt;AnonymousSaslClientFactory#getMechanismNames needs to handle the props map being null. Looks ok other than that.&lt;/p&gt;

&lt;p&gt;Also agree that the 0-10 client restricting to PLAIN would seem a bit odd...&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12427489">QPID-1896</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12471841" name="sasl-anonymous-java-client.patch" size="5936" author="gsim" created="Thu, 24 Feb 2011 15:05:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>169642</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 38 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0botb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>66132</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>