<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:22:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[QPID-6066] [0-8..0-9-1] Client AMQSession#getQueueDepth() call fails against pre 0.30 java brokers</title>
                <link>https://issues.apache.org/jira/browse/QPID-6066</link>
                <project id="12310520" key="QPID">Qpid</project>
                    <description>&lt;p&gt;When I try to enquire queue depth using the non-JMS API (AMQSession#getQueueDepth()) against a pre 0.30 Java Broker using the 0-8..0-9-1 protocol, the call ends with the following exception.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2014-09-02 09:03:42,147 ERROR [IoReceiver - /127.0.0.1:59381] (protocol.AMQProtocolEngine) - Unexpected exception while processing frame.   Closing connection. org.apache.qpid.AMQException: Exchange exchange must not be null at 
org.apache.qpid.server.handler.ExchangeBoundHandler.methodReceived(ExchangeBoundHandler.java:89) at 
org.apache.qpid.server.handler.ServerMethodDispatcherImpl.dispatchExchangeBound(ServerMethodDispatcherImpl.java:458) at 
org.apache.qpid.framing.amqp_0_9.ExchangeBoundBodyImpl.execute(ExchangeBoundBodyImpl.java:130) at 
org.apache.qpid.server.state.AMQStateManager.methodReceived(AMQStateManager.java:120) at 
org.apache.qpid.server.protocol.AMQProtocolEngine.methodFrameReceived(AMQProtocolEngine.java:569) at 
org.apache.qpid.framing.AMQMethodBodyImpl.handle(AMQMethodBodyImpl.java:97) at 
org.apache.qpid.server.protocol.AMQProtocolEngine.frameReceived(AMQProtocolEngine.java:433) at 
org.apache.qpid.server.protocol.AMQProtocolEngine.dataBlockReceived(AMQProtocolEngine.java:356) at 
org.apache.qpid.server.protocol.AMQProtocolEngine.received(AMQProtocolEngine.java:277) at 
org.apache.qpid.server.protocol.AMQProtocolEngine.received(AMQProtocolEngine.java:103) at 
org.apache.qpid.server.protocol.MultiVersionProtocolEngine.received(MultiVersionProtocolEngine.java:118) at 
org.apache.qpid.server.protocol.MultiVersionProtocolEngine.received(MultiVersionProtocolEngine.java:37) at 
org.apache.qpid.transport.network.io.IoReceiver.run(IoReceiver.java:161) at java.lang.Thread.run(Thread.java:745)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

</description>
                <environment></environment>
        <key id="12738736">QPID-6066</key>
            <summary>[0-8..0-9-1] Client AMQSession#getQueueDepth() call fails against pre 0.30 java brokers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="orudyy">Alex Rudyy</assignee>
                                    <reporter username="kwall">Keith Wall</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Sep 2014 07:57:45 +0000</created>
                <updated>Wed, 2 Oct 2019 19:21:43 +0000</updated>
                            <resolved>Wed, 3 Sep 2014 09:42:55 +0000</resolved>
                                    <version>0.30</version>
                                    <fixVersion>0.30</fixVersion>
                    <fixVersion>0.31</fixVersion>
                                    <component>Broker-J</component>
                    <component>JMS AMQP 0-x</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14119520" author="k-wall" created="Wed, 3 Sep 2014 08:05:01 +0000"  >&lt;p&gt;The changes made by &lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-6037&quot; title=&quot;[Java Client] Add basic support for ADDR addresses to the AMQP 0-8/9/9-1 client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-6037&quot;&gt;&lt;del&gt;QPID-6037&lt;/del&gt;&lt;/a&gt; have exposed an defect in earlier versions of the Java Broker:  namely the inability to enquire if a queue is bound to the default exchange (in other words - check if the queue exists).  &lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-6037&quot; title=&quot;[Java Client] Add basic support for ADDR addresses to the AMQP 0-8/9/9-1 client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-6037&quot;&gt;&lt;del&gt;QPID-6037&lt;/del&gt;&lt;/a&gt; changed the client to check for the existence of the queue (using exchange.bound) before checking the queue depth.  This causes Java Brokers &amp;lt;= 0.28 to fail with the above stack trace.&lt;/p&gt;

&lt;p&gt;As AMQSession#getQueueDepth is not part of the core API (not part of JMS), the decision is made to add a system property to the Java Client so that the call to exchange.bound can be omitted.  It is expected that this workaround will be seldom needed in practice.  This system property will only have effect on the 0-8..0-9-1 path.  0-10 is unaffected.&lt;/p&gt;</comment>
                            <comment id="14119526" author="jira-bot" created="Wed, 3 Sep 2014 08:14:59 +0000"  >&lt;p&gt;Commit 1622176 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwall&quot; class=&quot;user-hover&quot; rel=&quot;kwall&quot;&gt;kwall&lt;/a&gt; in branch &apos;qpid/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1622176&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1622176&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-6066&quot; title=&quot;[0-8..0-9-1] Client AMQSession#getQueueDepth() call fails against pre 0.30 java brokers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-6066&quot;&gt;&lt;del&gt;QPID-6066&lt;/del&gt;&lt;/a&gt;: &lt;span class=&quot;error&quot;&gt;&amp;#91;Java Client&amp;#93;&lt;/span&gt;  0-8..0-9-1 only - Add system property to allow call to exchange.bound during AMQSession#getQueueDepth to be omitted&lt;/p&gt;

&lt;p&gt;This prevents interoperabiliy problem with older Java Brokers, and gives users a change to restore old behaviour (AMQChannelException in the event&lt;br/&gt;
that the queue does not exist) if desired.&lt;/p&gt;</comment>
                            <comment id="14119653" author="rgodfrey" created="Wed, 3 Sep 2014 08:37:24 +0000"  >&lt;p&gt;Changes look good to me - do we want to get this into 0.30?&lt;/p&gt;</comment>
                            <comment id="14119700" author="alex.rufous" created="Wed, 3 Sep 2014 09:42:55 +0000"  >&lt;p&gt;The changes look good to me too. They need to be merged into 0.30&lt;/p&gt;</comment>
                            <comment id="14119811" author="justi9" created="Wed, 3 Sep 2014 12:29:30 +0000"  >&lt;p&gt;Reviewed by Rob and Oleksandr.  Approved for 0.30.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://qpid.2158936.n2.nabble.com/Request-For-Inclusion-in-0-30-td7612928.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://qpid.2158936.n2.nabble.com/Request-For-Inclusion-in-0-30-td7612928.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14123080" author="jira-bot" created="Fri, 5 Sep 2014 16:04:35 +0000"  >&lt;p&gt;Commit 1622730 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwall&quot; class=&quot;user-hover&quot; rel=&quot;kwall&quot;&gt;kwall&lt;/a&gt; in branch &apos;qpid/branches/0.30&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1622730&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1622730&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-6066&quot; title=&quot;[0-8..0-9-1] Client AMQSession#getQueueDepth() call fails against pre 0.30 java brokers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-6066&quot;&gt;&lt;del&gt;QPID-6066&lt;/del&gt;&lt;/a&gt;: &lt;span class=&quot;error&quot;&gt;&amp;#91;Java Client&amp;#93;&lt;/span&gt; 0-8..0-9-1 only - Add system property to allow call to exchange.bound during AMQSession#getQueueDepth to be omitted&lt;br/&gt;
This prevents interoperabiliy problem with older Java Brokers, and gives users a change to restore old behaviour (AMQChannelException in the event&lt;br/&gt;
that the queue does not exist) if desired.&lt;/p&gt;

&lt;p&gt;Merged from trunk with command:&lt;/p&gt;

&lt;p&gt;svn merge -c 1622176 &lt;a href=&quot;https://svn.apache.org/repos/asf/qpid/trunk/qpid&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/qpid/trunk/qpid&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14149316" author="justi9" created="Fri, 26 Sep 2014 15:42:37 +0000"  >&lt;p&gt;Released in Qpid 0.30, &lt;a href=&quot;http://qpid.apache.org/releases/qpid-0.30/index.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://qpid.apache.org/releases/qpid-0.30/index.html&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12737829">QPID-6056</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12736256">QPID-6037</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 8 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1zm8n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>