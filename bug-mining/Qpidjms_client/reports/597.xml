<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:22:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[QPID-6744] Java client 0-8..0-91 sends queue.delete with nowait true but then awaits a reply</title>
                <link>https://issues.apache.org/jira/browse/QPID-6744</link>
                <project id="12310520" key="QPID">Qpid</project>
                    <description>&lt;p&gt;The Java Client sends AMQP queue.delete with &lt;tt&gt;nowait&lt;/tt&gt; hard-coded true, but then awaits a queue.delete-ok reply anyway.  This defect is transparent with the Java Broker since the Broker sends the queue.delete-ok regardless of the setting of the nowait flag.&lt;/p&gt;

&lt;p&gt;This defect shows up when inter-operating against the RabbitMQ, which respects the &lt;tt&gt;nowait&lt;/tt&gt; flag.&lt;/p&gt;

&lt;p&gt;This behaviour is longstanding.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12888798">QPID-6744</key>
            <summary>Java client 0-8..0-91 sends queue.delete with nowait true but then awaits a reply</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lorenz.quack">Lorenz Quack</assignee>
                                    <reporter username="kwall">Keith Wall</reporter>
                        <labels>
                            <label>rabbitmq</label>
                    </labels>
                <created>Sat, 19 Sep 2015 20:04:57 +0000</created>
                <updated>Wed, 2 Oct 2019 19:22:33 +0000</updated>
                            <resolved>Wed, 30 Sep 2015 08:15:35 +0000</resolved>
                                    <version>0.18</version>
                    <version>0.22</version>
                    <version>0.32</version>
                                    <fixVersion>qpid-java-6.0</fixVersion>
                                    <component>Broker-J</component>
                    <component>JMS AMQP 0-x</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14933669" author="jira-bot" created="Mon, 28 Sep 2015 17:58:03 +0000"  >&lt;p&gt;Commit 1705736 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwall&quot; class=&quot;user-hover&quot; rel=&quot;kwall&quot;&gt;kwall&lt;/a&gt; in branch &apos;java/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1705736&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1705736&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-6744&quot; title=&quot;Java client 0-8..0-91 sends queue.delete with nowait true but then awaits a reply&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-6744&quot;&gt;&lt;del&gt;QPID-6744&lt;/del&gt;&lt;/a&gt;/&lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-6759&quot; title=&quot;Java client 0-8..0-91 sends exchange.delete but then awaits the wrong response (ExchangeDeclareOk)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-6759&quot;&gt;&lt;del&gt;QPID-6759&lt;/del&gt;&lt;/a&gt;: &lt;span class=&quot;error&quot;&gt;&amp;#91;Java Client/Java Broker&amp;#93;&lt;/span&gt; 0-8..0-91 Correct handling of queue.delete and exchange.delete.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Make client&apos;s use of the queue.delete nowait flag in line with the expectation for a response.&lt;/li&gt;
	&lt;li&gt;Correct client&apos;s response class expectation when performing an exchange delete (previously awaited a ExchangeDeclareOkBody!)&lt;/li&gt;
	&lt;li&gt;Make broker send a queue.delete/exchange.delete response only when nowait = false&lt;/li&gt;
	&lt;li&gt;For backward compatibility, when the peer is identified as an older Qpid client, send an queue delete response regardless.  Identification is performed by checking the product name and product version, the latter can be overriden, which may be useful for private implementations.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14935237" author="lorenz.quack" created="Tue, 29 Sep 2015 14:21:59 +0000"  >&lt;p&gt;Hey Keith, I reviewed your changes:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Not a big fan of these names: &lt;tt&gt;String CONNECTION_QUEUE_DELETE_NOWAIT_VERSION_REGEXP = &quot;connection.queueDeleteNoWaitVersionRegexp&quot;;&lt;/tt&gt; I think I would prefer something along the lines of what you use elsewhere. Something like &lt;tt&gt;sendQueueDeleteOkRegardlessClientVersionRegExp&lt;/tt&gt; Not nice but at least a bit more descriptive. what do you think.&lt;/li&gt;
	&lt;li&gt;In AMQChannel.java:3109 should the creation of the response body not better move inside the new &lt;tt&gt;if(!nowait)&lt;/tt&gt;?&lt;/li&gt;
	&lt;li&gt;May I suggest a slight rewording in AMQPConnection_0_8.java: From &lt;tt&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-6744&quot; title=&quot;Java client 0-8..0-91 sends queue.delete with nowait true but then awaits a reply&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-6744&quot;&gt;&lt;del&gt;QPID-6744&lt;/del&gt;&lt;/a&gt; - Older queue clients (&amp;lt;=0.32) incorrectly set the nowait flag false on the queue.delete method and then await regardless.&lt;/tt&gt; to &lt;tt&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-6744&quot; title=&quot;Java client 0-8..0-91 sends queue.delete with nowait true but then awaits a reply&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-6744&quot;&gt;&lt;del&gt;QPID-6744&lt;/del&gt;&lt;/a&gt; - Older queue clients (&amp;lt;=0.32) set the nowait flag to false on the queue.delete method and then incorrectly await regardless.&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;In AMQPConnection_0_8.java &lt;tt&gt;_sendQueueDeleteOkRegardless&lt;/tt&gt; defaults to &lt;tt&gt;true&lt;/tt&gt;. Is that on purpose?&lt;/li&gt;
	&lt;li&gt;If &lt;tt&gt;Broker.CONNECTION_QUEUE_DELETE_NOWAIT_VERSION_REGEXP&lt;/tt&gt; is not set it defaults to the empty string which will always match. I guess this is not desired. Maybe a regex that never matches would be more appropriate. &lt;a href=&quot;http://stackoverflow.com/a/1845097&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;This stackoverflow answer&lt;/a&gt; suggests &lt;tt&gt;\A(?!x)x&lt;/tt&gt;.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The rest looks good to me!&lt;/p&gt;</comment>
                            <comment id="14935483" author="jira-bot" created="Tue, 29 Sep 2015 17:23:08 +0000"  >&lt;p&gt;Commit 1705898 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwall&quot; class=&quot;user-hover&quot; rel=&quot;kwall&quot;&gt;kwall&lt;/a&gt; in branch &apos;java/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1705898&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1705898&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-6744&quot; title=&quot;Java client 0-8..0-91 sends queue.delete with nowait true but then awaits a reply&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-6744&quot;&gt;&lt;del&gt;QPID-6744&lt;/del&gt;&lt;/a&gt;/&lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-6759&quot; title=&quot;Java client 0-8..0-91 sends exchange.delete but then awaits the wrong response (ExchangeDeclareOk)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-6759&quot;&gt;&lt;del&gt;QPID-6759&lt;/del&gt;&lt;/a&gt;: &lt;span class=&quot;error&quot;&gt;&amp;#91;Java Client/Java Broker&amp;#93;&lt;/span&gt; 0-8..0-91 Correct handling of queue.delete and exchange.delete.&lt;/p&gt;

&lt;p&gt;Address review comments from Lorenz Quack &amp;lt;quack.lorenz@gmail.com&amp;gt;&lt;/p&gt;

&lt;p&gt;Also after reviewing the product/version information sent by older Qpid Client might the checks more stringent.&lt;/p&gt;</comment>
                            <comment id="14936501" author="lorenz.quack" created="Wed, 30 Sep 2015 07:47:40 +0000"  >&lt;p&gt;looks good to me&lt;/p&gt;</comment>
                            <comment id="15019061" author="jira-bot" created="Fri, 20 Nov 2015 23:35:18 +0000"  >&lt;p&gt;Commit 1715445 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gemmellr&quot; class=&quot;user-hover&quot; rel=&quot;gemmellr&quot;&gt;gemmellr&lt;/a&gt; in branch &apos;java/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1715445&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1715445&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-6874&quot; title=&quot;[java] various failures when running the cpp test profile&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-6874&quot;&gt;&lt;del&gt;QPID-6874&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-6744&quot; title=&quot;Java client 0-8..0-91 sends queue.delete with nowait true but then awaits a reply&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-6744&quot;&gt;&lt;del&gt;QPID-6744&lt;/del&gt;&lt;/a&gt;: close the consumer used to retrieve a message when done with it, otherwise the session will likely see a resource-deleted execution exception before failing to create another consumer on the then-deleted queue&lt;/p&gt;</comment>
                            <comment id="15028724" author="alex.rufous" created="Thu, 26 Nov 2015 13:10:02 +0000"  >&lt;p&gt;Changes under revision &lt;a href=&quot;https://svn.apache.org/r1715445&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1715445&lt;/a&gt; are approved for inclusion into 6.0.x branch&lt;/p&gt;</comment>
                            <comment id="15028819" author="jira-bot" created="Thu, 26 Nov 2015 14:03:31 +0000"  >&lt;p&gt;Commit 1716658 from orudyy@apache.org in branch &apos;java/branches/6.0.x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1716658&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1716658&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-6874&quot; title=&quot;[java] various failures when running the cpp test profile&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-6874&quot;&gt;&lt;del&gt;QPID-6874&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-6744&quot; title=&quot;Java client 0-8..0-91 sends queue.delete with nowait true but then awaits a reply&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-6744&quot;&gt;&lt;del&gt;QPID-6744&lt;/del&gt;&lt;/a&gt;: close the consumer used to retrieve a message when done with it, otherwise the session will likely see a resource-deleted execution exception before failing to create another consumer on the then-deleted queue&lt;br/&gt;
------------------------------------------------------------------------&lt;br/&gt;
Merged from trunk with command:&lt;br/&gt;
svn merge -c r1715445 &lt;a href=&quot;https://svn.apache.org/repos/asf/qpid/java/trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/qpid/java/trunk&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 51 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2l5qv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>