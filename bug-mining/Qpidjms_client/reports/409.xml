<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:21:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[QPID-3546] client can reject/release up to the first &lt;total number of messages received on the session&gt; sent by the broker following the first rollback after failover</title>
                <link>https://issues.apache.org/jira/browse/QPID-3546</link>
                <project id="12310520" key="QPID">Qpid</project>
                    <description>&lt;p&gt;The Java client can reject/release up to the first &amp;lt;total number of messages received on the session&amp;gt; sent by the broker following the first rollback after failover.&lt;/p&gt;

&lt;p&gt;When failover occurs, the rollback mark is set to -1 however the highestDeliveryTag is not cleared, and so upon the first rollback performed after failover this will set the rollback mark to &amp;lt;highestDeliveryTag&amp;gt;, which is either the number of messages received by the Session (0-8/0-9/0-9-1) or anything up to that value (0-10, where the message delivery tags are the per-connection command IDs associated with each MessageTransfer, and all other commands). This makes the client reject/release all incoming messages until the deliveryTag passes the rollback mark and the messages are allowed through the Dispatcher.&lt;/p&gt;

&lt;p&gt;This could cause significant delays in message processing after failover, and may result in messages arriving out of order because earlier rejects/release get processed by the broker and cause it to re-dispatch earlier messages on the queue within the ongoing flow of later messages just being sent for the first time.&lt;/p&gt;

&lt;p&gt;The deliveryTag marker should also be reset during the failover cleanup process.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12527007">QPID-3546</key>
            <summary>client can reject/release up to the first &lt;total number of messages received on the session&gt; sent by the broker following the first rollback after failover</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="robbie">Robbie Gemmell</assignee>
                                    <reporter username="robbie">Robbie Gemmell</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Oct 2011 11:21:29 +0000</created>
                <updated>Tue, 14 Mar 2017 20:07:22 +0000</updated>
                            <resolved>Thu, 13 Oct 2011 12:02:00 +0000</resolved>
                                    <version>0.6</version>
                    <version>0.7</version>
                    <version>0.8</version>
                    <version>0.9</version>
                    <version>0.10</version>
                    <version>0.11</version>
                    <version>0.12</version>
                                    <fixVersion>0.13</fixVersion>
                                    <component>JMS AMQP 0-x</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13126501" author="alex.rufous" created="Thu, 13 Oct 2011 11:59:18 +0000"  >&lt;p&gt;Attached a patch fixing the issue  on 0-10 path.&lt;/p&gt;</comment>
                            <comment id="13126502" author="gemmellr" created="Thu, 13 Oct 2011 12:02:00 +0000"  >&lt;p&gt;Patch applied. Only fixed on the 0-10 client path, as fixing this on the 0-8/9/9-1 path currently would cause undesirable interaction with the issue in &lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-3521&quot; title=&quot;failover process for the 0-8 client does not clear the pre-dispatch queue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-3521&quot;&gt;&lt;del&gt;QPID-3521&lt;/del&gt;&lt;/a&gt;, which will be updated to mention this should be fixed for the 0-8/9/9-1 path along with that issue.&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12498873" name="fix-of-message-rejection-issue.patch" size="6134" author="orudyy" created="Thu, 13 Oct 2011 11:59:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>85337</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 6 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0bkpj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>65467</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>