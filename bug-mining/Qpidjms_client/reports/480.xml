<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:22:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[QPID-4389] [Java client] DurableSubscriber resubscription fails when using the &apos;Address&apos; destination syntax</title>
                <link>https://issues.apache.org/jira/browse/QPID-4389</link>
                <project id="12310520" key="QPID">Qpid</project>
                    <description>&lt;p&gt;When testing durable subscibers, I first publish a message to a subscriber to be sure it can receive messages. Checks out ok. Then I bring the subscriber down with subscriber.close() where subscriber is an instance of MessageConsumer. Next, I publish another message while the subscriber is down, then I bring the subsciber back up and wait 10 seconds for a message...no message comes. To be sure the everything is working properly, I create another message and publish it, the subscriber has no problem receiving it. My question is where has the second message gone? I would think that the message would have been queued up some place to be sent out again but that is not the case. Please let me know if I am looking at this totally wrong.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux,Netbeans 7.2&lt;/p&gt;</environment>
        <key id="12613131">QPID-4389</key>
            <summary>[Java client] DurableSubscriber resubscription fails when using the &apos;Address&apos; destination syntax</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="robbie">Robbie Gemmell</assignee>
                                    <reporter username="aburks18">Andrew Burks</reporter>
                        <labels>
                            <label>newbie</label>
                    </labels>
                <created>Tue, 23 Oct 2012 13:13:29 +0000</created>
                <updated>Tue, 14 Mar 2017 20:07:16 +0000</updated>
                            <resolved>Mon, 19 Nov 2012 20:12:54 +0000</resolved>
                                    <version>0.14</version>
                                    <fixVersion>0.19</fixVersion>
                                    <component>JMS AMQP 0-x</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13482344" author="aburks18" created="Tue, 23 Oct 2012 14:07:22 +0000"  >&lt;p&gt;Attached a test project to show my steps&lt;/p&gt;</comment>
                            <comment id="13482865" author="alex.rufous" created="Wed, 24 Oct 2012 00:34:25 +0000"  >&lt;p&gt;Hi Andrew,&lt;/p&gt;

&lt;p&gt;I looked into this issue and found that with Address based syntax the AMQP 0.10 client did not send the subscriber selector expression as part of arguments of ExchangeBind command on creation of durable subscription. As result, on closing and re-opening of durable subscriber the client tried to check whether expected and real binding arguments match and on matching failure the JMS client deleted and re-created the subscription queue on the broker. That caused the losing of all the messages on the queue.&lt;/p&gt;

&lt;p&gt;I fixed this issue on trunk. You can try to checkout fresh Qpid sources and build the java client from java sub-module by running ant command as follows:&lt;/p&gt;

&lt;p&gt;ant clean build release-bin&lt;/p&gt;

&lt;p&gt;The client build will be created in java/client/release folder.&lt;/p&gt;

&lt;p&gt;Alternatively, you can try to use Binding URL syntax for your topics as described at &lt;br/&gt;
&lt;a href=&quot;https://cwiki.apache.org/qpid/bindingurlformat.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/qpid/bindingurlformat.html&lt;/a&gt; . The bug does not occur when Binding URL syntax is used. &lt;/p&gt;

&lt;p&gt;Please note that you need to prefix the binding URL with &quot;BURL:&quot; as Address based syntax is used by default in java Qpid client. Also, you can use JVM setting -Dqpid.dest_syntax=BURL to set the Binding URL syntax as a default for all your queues and topics. &lt;/p&gt;
</comment>
                            <comment id="13482867" author="alex.rufous" created="Wed, 24 Oct 2012 00:36:03 +0000"  >&lt;p&gt;Robbie,&lt;br/&gt;
Could you please review the changes?&lt;/p&gt;</comment>
                            <comment id="13483189" author="aburks18" created="Wed, 24 Oct 2012 12:56:25 +0000"  >&lt;p&gt;So are you presenting the binding URL as an alternative to creating the subscribers programmatically? What I mean is that if I did not want to upgrade my broker (which would be the case if I use the new code fix), could I use the binding URL to accomplish the same task of my end goal to dynamically create/delete topic subscribers?&lt;/p&gt;</comment>
                            <comment id="13483348" author="aburks18" created="Wed, 24 Oct 2012 16:07:53 +0000"  >&lt;p&gt;After checking out the source code, building at the java sub-module, and starting the server up, I am still running into the same issue where the second message is not being picked up for some reason. Again, the first and last messages are received no problem.&lt;/p&gt;</comment>
                            <comment id="13483504" author="aburks18" created="Wed, 24 Oct 2012 19:28:21 +0000"  >&lt;p&gt;I have attached the log if it helps any&lt;/p&gt;</comment>
                            <comment id="13483546" author="gemmellr" created="Wed, 24 Oct 2012 20:14:00 +0000"  >&lt;p&gt;Hi Andrew,&lt;/p&gt;

&lt;p&gt;The issue is actually client side as Alex mentioned, so the change made on trunk doesnt involve the broker.&lt;/p&gt;

&lt;p&gt;The use of the Binding URL format is a workaround if you dont want to update to the latest client, as using BindingURL destination format the issue shouldnt occur (and its proably worth mentioning that in addition to the full syntax outlined on the page, you should jsut be able to use &quot;BURL:your.topic.name&quot; and it will use the amq.topic exchange by default, or set the system property as Alex outlined so that you can emit the BURL: prefix). How your program is written probably shouldnt need to change, just the values used for your destinations.&lt;/p&gt;

&lt;p&gt;Robbie&lt;/p&gt;</comment>
                            <comment id="13483577" author="aburks18" created="Wed, 24 Oct 2012 20:47:07 +0000"  >&lt;p&gt;Ok, so if the issue is with the client, then how am I supposed to test it?&lt;/p&gt;</comment>
                            <comment id="13484101" author="alex.rufous" created="Thu, 25 Oct 2012 13:08:16 +0000"  >&lt;p&gt;Hi Andrew,&lt;br/&gt;
I am not sure that I understood your question.&lt;br/&gt;
If you are asking about setting dependencies in pom.xml to newly built client then you can use system maven dependencies&lt;br/&gt;
and can replace your current dependencies with something like&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.qpid&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;qpid-common&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;0.19&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;system&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;systemPath&amp;gt;&lt;/span&gt;path/to/lib/qpid-common-0.19.jar&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/systemPath&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.qpid&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;qpid-client&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;0.19&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;system&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;systemPath&amp;gt;&lt;/span&gt;path/to/lib/qpid-client-0.19.jar&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/systemPath&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
    
     &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.geronimo.specs&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;geronimo-jms_1.1_spec&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.0&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;provided&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;

&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.slf4j&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;slf4j-log4j12&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.6.4&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;

&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;log4j&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;log4j&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.2.16&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;


&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;In case of using Binding URL, you can replace in your test class line&lt;br/&gt;
Topic topic = ts.createTopic(&quot;amq.topic/sitaware.test&quot;);&lt;br/&gt;
with&lt;br/&gt;
Topic topic = ts.createTopic(&quot;BURL:sitaware.test&quot;);&lt;/p&gt;

</comment>
                            <comment id="13484110" author="aburks18" created="Thu, 25 Oct 2012 13:28:19 +0000"  >&lt;p&gt;Thanks Alex, the dependency layout is what I needed to know. I will let you know what I come up with. Again, thanks Alex and Robbie for bearing with me.&lt;/p&gt;</comment>
                            <comment id="13484147" author="aburks18" created="Thu, 25 Oct 2012 14:10:37 +0000"  >&lt;p&gt;I&apos;ve just tested my scenario out and it worked perfectly. Thanks.&lt;/p&gt;</comment>
                            <comment id="13499976" author="gemmellr" created="Mon, 19 Nov 2012 00:40:52 +0000"  >&lt;p&gt;Small note on this JIRA (which I had forgotten about and thus haven&apos;t reviewed yet), following &lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-4431&quot; title=&quot;deploy snapshot maven artefacts to repository.apache.org from CI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-4431&quot;&gt;&lt;del&gt;QPID-4431&lt;/del&gt;&lt;/a&gt; we are now deploying nightly builds to the ASF snapshots repository at &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12550463" name="DurSubProject.tar.gz" size="8835" author="aburks18" created="Tue, 23 Oct 2012 14:07:22 +0000"/>
                            <attachment id="12550671" name="qpid.log" size="25551" author="aburks18" created="Wed, 24 Oct 2012 19:28:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>250561</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0azav:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>61997</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>