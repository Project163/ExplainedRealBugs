<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:21:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[QPID-3307] ClassNotfound Exception when using Qpid java client in Complex classloading Environments.  </title>
                <link>https://issues.apache.org/jira/browse/QPID-3307</link>
                <project id="12310520" key="QPID">Qpid</project>
                    <description>&lt;p&gt;Hi ,&lt;/p&gt;

&lt;p&gt;When we are using qpid client to receive JMSObject in complex class loading environments like web application containers/Osgi environments .There is a scenario where this issues comes. &lt;/p&gt;

&lt;p&gt;Scenario. &lt;/p&gt;

&lt;p&gt;In a web application container normally they use a class loader per web app. and if we have qpid client libs at the root classloader level this error can come. The reason for this is Serializable  Object types that are used inside the web app are not visible to the class loader that loads the JMSObject message and unmarshall it.    &lt;/p&gt;

&lt;p&gt;thanks,&lt;br/&gt;
Charith&lt;/p&gt;</description>
                <environment></environment>
        <key id="12510391">QPID-3307</key>
            <summary>ClassNotfound Exception when using Qpid java client in Complex classloading Environments.  </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="robbie">Robbie Gemmell</assignee>
                                    <reporter username="charith">Charith Wickramarachchi</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Jun 2011 03:01:57 +0000</created>
                <updated>Tue, 14 Mar 2017 20:07:13 +0000</updated>
                            <resolved>Sun, 21 Aug 2011 15:48:09 +0000</resolved>
                                                    <fixVersion>0.13</fixVersion>
                                    <component>JMS AMQP 0-x</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13049588" author="charith" created="Wed, 15 Jun 2011 03:07:09 +0000"  >&lt;p&gt;Attaching the patch to resolve this issue. &lt;/p&gt;

&lt;p&gt;I looked at the Apache ActiveMQ code and used the method they used to resolve this exact issue. &lt;/p&gt;

&lt;p&gt;thanks,&lt;br/&gt;
Charith&lt;/p&gt;</comment>
                            <comment id="13050943" author="charith" created="Fri, 17 Jun 2011 09:04:55 +0000"  >&lt;p&gt;Re-attaching the patch Granting license to ASF for inclusion in ASF works &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13051741" author="k-wall" created="Sun, 19 Jun 2011 22:33:38 +0000"  >&lt;p&gt;Hi Charith&lt;/p&gt;

&lt;p&gt;I think the patch on the whole looks fine.  My comments would be only a) the absence of a unit test case and b) bracing style does not match &lt;a href=&quot;https://cwiki.apache.org/qpid/java-coding-standards.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/qpid/java-coding-standards.html&lt;/a&gt;.   I think a unit test that exercised the happy/unhappy path with a normal classloader arrangement would suffice.  We do already have a system test, ObjectMessageTest, but I think we should be striving for more unit tests wherever we can.&lt;/p&gt;

&lt;p&gt;cheers Keith.&lt;/p&gt;</comment>
                            <comment id="13051799" author="charith" created="Mon, 20 Jun 2011 04:48:01 +0000"  >&lt;p&gt;Hi Keith ,&lt;/p&gt;

&lt;p&gt;Thanks for the feedback. I have updated the patch by changing the bracing style according to the doc you have pointed. &lt;/p&gt;

&lt;p&gt;I&apos;ll attach another patch for unit tests after i look at the current system test and object message test.&lt;/p&gt;

&lt;p&gt;thanks,&lt;br/&gt;
Charith &lt;/p&gt;</comment>
                            <comment id="13051887" author="charith" created="Mon, 20 Jun 2011 09:44:18 +0000"  >&lt;p&gt;Hi , &lt;/p&gt;

&lt;p&gt;I&apos;m attaching an unit test case which will send receive an Object Message which have a custom Serializable Type inside.In that case the ObjectInputStream i have provided will be used. To re-create the exact class loading scenario I&apos;ll have to find a way to simulate that kind of class loading environment within the Unit test. I&apos;ll have to think through it on how to implement that.&lt;/p&gt;

&lt;p&gt;thanks,&lt;br/&gt;
Charith&lt;/p&gt;</comment>
                            <comment id="13052878" author="k-wall" created="Tue, 21 Jun 2011 22:02:42 +0000"  >&lt;p&gt;Hi Charith&lt;/p&gt;

&lt;p&gt;Did you take a look at the unit tests in directory client/src/test/java in package org.apache.qpid.test.unit.client.message?&lt;/p&gt;

&lt;p&gt;I think the addition of a &apos;pure&apos; unit test, rather than an extension to the system test would be more appropriate.  I&apos;d imagine we&apos;d want a unit test much like client&apos;s BytesMessageTest, which would exercise the happy paths (serialised class, serialised primitive) and the maybe the unhappy path (serialised class not found through I can see this might be tricky).&lt;/p&gt;

&lt;p&gt;I took a look at your extension to the system test ObjectInputStream.  Does the test using CustomSerializableObject give us anything more than the existing tests with ObjectMessageTest.Payload?&lt;/p&gt;

&lt;p&gt;Hope this helps.&lt;/p&gt;




</comment>
                            <comment id="13053031" author="charith" created="Wed, 22 Jun 2011 04:05:30 +0000"  >&lt;p&gt;Hi Keith ,&lt;/p&gt;

&lt;p&gt;Thanks for the feedback. Yes you are correct i was looking at Test cases in systests/src/main/java. As you mentioned the scenario covered by the test case i have provided is already covered in org.apache.qpid.test.unit.client.message.ObjectMessageTest.&lt;/p&gt;

&lt;p&gt;I see there is no unit test for Object messages in package org.apache.qpid.test.unit.client.message to I&apos;ll add an unit test for it and provide a patch. &lt;/p&gt;

&lt;p&gt;thanks,&lt;br/&gt;
Charith&lt;/p&gt;</comment>
                            <comment id="13063894" author="gemmellr" created="Tue, 12 Jul 2011 13:40:57 +0000"  >&lt;p&gt;Hi Charith, &lt;/p&gt;

&lt;p&gt;Have you made any progress on adding at least happy-path unit testing for this? It would be good to get your patch applied.&lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Robbie&lt;/p&gt;</comment>
                            <comment id="13064361" author="charith" created="Wed, 13 Jul 2011 05:19:38 +0000"  >&lt;p&gt;Hi Robbie, &lt;/p&gt;

&lt;p&gt;Sorry for the delay in updating. Actually i found a way to simulate the Environment but i caught  up with some work and couldn&apos;t find a time to work on a unit test case. I think happy path is already covered in the current serialization test cases we have. Only thing is i need to add a test case that simulates the above mentioned class loading environment. Will be able to provide a patch for that soon, possibly in next weekend.&lt;/p&gt;

&lt;p&gt;thanks,&lt;br/&gt;
Charith    &lt;/p&gt;</comment>
                            <comment id="13088397" author="gemmellr" created="Sun, 21 Aug 2011 15:47:57 +0000"  >&lt;p&gt;In the interests of getting this applied I have applied the &apos;&lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-3307&quot; title=&quot;ClassNotfound Exception when using Qpid java client in Complex classloading Environments.  &quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-3307&quot;&gt;&lt;del&gt;QPID-3307&lt;/del&gt;&lt;/a&gt;_patch.txt&apos; from June 20th, and then corrected a couple of style issues and added some basic unit tests myself for ObjectMessage and ClassLoadingAwareObjectInputStream to provide some unit rather than system test coverage of the classes. &lt;/p&gt;

&lt;p&gt;Resolving JIRA.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12483110" name="QPID-3307_patch.txt" size="5974" author="charith" created="Mon, 20 Jun 2011 04:48:01 +0000"/>
                            <attachment id="12482913" name="QPID-3307_patch.txt" size="5836" author="charith" created="Fri, 17 Jun 2011 09:04:55 +0000"/>
                            <attachment id="12482634" name="QPID-3307_patch.txt" size="5836" author="charith" created="Wed, 15 Jun 2011 03:07:09 +0000"/>
                            <attachment id="12483129" name="QPID-3307_patch_unit_test.txt" size="4138" author="charith" created="Mon, 20 Jun 2011 09:44:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>64301</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 13 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0bmrb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>65799</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>