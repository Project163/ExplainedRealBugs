<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:23:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[QPID-7505] [JMS AMQP 0-x Client] [AMQP 0-10] Synchronous #receive(long) might return null even though there are messages on the queue and client has enough credit</title>
                <link>https://issues.apache.org/jira/browse/QPID-7505</link>
                <project id="12310520" key="QPID">Qpid</project>
                    <description>&lt;p&gt;As part of changes made for &lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-1642&quot; title=&quot;JMS ReceiveNowait does not return a message even if the queue is not empty&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-1642&quot;&gt;&lt;del&gt;QPID-1642&lt;/del&gt;&lt;/a&gt; the functionality of BasicMessageConsumer_0_10#receive(long) was changed to force message delivery by sending message.flush when there is no message present locally in a consumer queue. The message.flush is followed by the message.flow to restore the credit as  message.flush forces the broker to exhaust its credit supply making it zero when message.flush command completes. However, no sync is sent after sending message flow. As result, in some cases the credit is not restored promptly impacting various messaging scenarios when message is published immediately after receive() is called but the published message is delivered to another consumer because credits are not restored after message.flush&lt;/p&gt;

&lt;p&gt;This problem was detected by the sporadic failure of ConsumerPriorityTest on the 0-10 path.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13019791">QPID-7505</key>
            <summary>[JMS AMQP 0-x Client] [AMQP 0-10] Synchronous #receive(long) might return null even though there are messages on the queue and client has enough credit</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwall">Keith Wall</assignee>
                                    <reporter username="orudyy">Alex Rudyy</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Nov 2016 10:23:01 +0000</created>
                <updated>Thu, 8 Jun 2017 13:06:26 +0000</updated>
                            <resolved>Thu, 10 Nov 2016 16:47:29 +0000</resolved>
                                    <version>0.18</version>
                    <version>0.20</version>
                    <version>0.22</version>
                    <version>0.24</version>
                    <version>0.26</version>
                    <version>0.28</version>
                    <version>0.30</version>
                    <version>0.32</version>
                    <version>qpid-java-6.0</version>
                    <version>qpid-java-6.0.1</version>
                    <version>qpid-java-6.0.2</version>
                    <version>qpid-java-6.0.3</version>
                    <version>qpid-java-6.0.4</version>
                    <version>qpid-java-6.0.5</version>
                    <version>qpid-java-6.1</version>
                                    <fixVersion>qpid-java-6.0.7</fixVersion>
                    <fixVersion>qpid-java-6.1.3</fixVersion>
                    <fixVersion>qpid-java-client-0-x-6.3.0</fixVersion>
                                    <component>JMS AMQP 0-x</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15653809" author="jira-bot" created="Thu, 10 Nov 2016 11:22:56 +0000"  >&lt;p&gt;Commit 1769088 from orudyy@apache.org in branch &apos;java/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1769088&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1769088&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-7505&quot; title=&quot;[JMS AMQP 0-x Client] [AMQP 0-10] Synchronous #receive(long) might return null even though there are messages on the queue and client has enough credit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-7505&quot;&gt;&lt;del&gt;QPID-7505&lt;/del&gt;&lt;/a&gt;: Sync session after sending flow command to restore credits after credits reset in result of execution of message.flush as part of BaseicMessageConsumer_0_10#receive()&lt;/p&gt;</comment>
                            <comment id="15653856" author="alex.rufous" created="Thu, 10 Nov 2016 11:48:22 +0000"  >&lt;p&gt;Keith,&lt;br/&gt;
Please review the changes made in commit under revision &lt;a href=&quot;https://svn.apache.org/r1769088&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1769088&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15986958" author="alex.rufous" created="Thu, 27 Apr 2017 16:27:15 +0000"  >&lt;p&gt;A number of tests on 6.x branches is failing due to the client issue reported as part of this JIRA. I suggest porting of the changes into 6.x branches to reduce noise.&lt;/p&gt;</comment>
                            <comment id="15988405" author="jira-bot" created="Fri, 28 Apr 2017 08:19:48 +0000"  >&lt;p&gt;Commit fb6e31c6c260f747416baaaaa4abf98a8b071c11 in qpid-broker-j&apos;s branch refs/heads/6.1.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alex.rufous&quot; class=&quot;user-hover&quot; rel=&quot;alex.rufous&quot;&gt;alex.rufous&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=qpid-broker-j.git;h=fb6e31c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=qpid-broker-j.git;h=fb6e31c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-7505&quot; title=&quot;[JMS AMQP 0-x Client] [AMQP 0-10] Synchronous #receive(long) might return null even though there are messages on the queue and client has enough credit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-7505&quot;&gt;&lt;del&gt;QPID-7505&lt;/del&gt;&lt;/a&gt;: Sync session after sending flow command to restore credits after credits reset in result of execution of message.flush as part of BaseicMessageConsumer_0_10#receive()&lt;/p&gt;

&lt;p&gt;(cherry picked from commit f903afcbd534cefb23df21a41224e0774d61adc3)&lt;/p&gt;</comment>
                            <comment id="15988412" author="jira-bot" created="Fri, 28 Apr 2017 08:30:08 +0000"  >&lt;p&gt;Commit 00b7e0d4033ec7e64b8d5c56afa0cf7eb1cd50fd in qpid-broker-j&apos;s branch refs/heads/6.0.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alex.rufous&quot; class=&quot;user-hover&quot; rel=&quot;alex.rufous&quot;&gt;alex.rufous&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=qpid-broker-j.git;h=00b7e0d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=qpid-broker-j.git;h=00b7e0d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-7505&quot; title=&quot;[JMS AMQP 0-x Client] [AMQP 0-10] Synchronous #receive(long) might return null even though there are messages on the queue and client has enough credit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-7505&quot;&gt;&lt;del&gt;QPID-7505&lt;/del&gt;&lt;/a&gt;: Sync session after sending flow command to restore credits after credits reset in result of execution of message.flush as part of BaseicMessageConsumer_0_10#receive()&lt;/p&gt;

&lt;p&gt;(cherry picked from commit f903afcbd534cefb23df21a41224e0774d61adc3)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13050431">QPID-7699</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 29 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3662f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>