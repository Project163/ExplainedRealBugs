<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:22:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[QPID-6052] [Java Client] The client does not correctly set the JMSDestination on a 0-9-1 message in ADDR mode</title>
                <link>https://issues.apache.org/jira/browse/QPID-6052</link>
                <project id="12310520" key="QPID">Qpid</project>
                    <description>&lt;p&gt;Even when using ADDR address in 0-9-1, received messages are created with  a JMSDestination in the form of a BindingURL address.  Where ADDR is the default syntax, an ADDR address should be created.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12737458">QPID-6052</key>
            <summary>[Java Client] The client does not correctly set the JMSDestination on a 0-9-1 message in ADDR mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rgodfrey">Robert Godfrey</assignee>
                                    <reporter username="rgodfrey">Robert Godfrey</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Aug 2014 14:29:51 +0000</created>
                <updated>Fri, 26 Sep 2014 15:42:41 +0000</updated>
                            <resolved>Tue, 2 Sep 2014 16:07:12 +0000</resolved>
                                                    <fixVersion>0.30</fixVersion>
                                    <component>JMS AMQP 0-x</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14113796" author="jira-bot" created="Thu, 28 Aug 2014 14:31:53 +0000"  >&lt;p&gt;Commit 1621143 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=godfrer&quot; class=&quot;user-hover&quot; rel=&quot;godfrer&quot;&gt;godfrer&lt;/a&gt; in branch &apos;qpid/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1621143&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1621143&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-6052&quot; title=&quot;[Java Client] The client does not correctly set the JMSDestination on a 0-9-1 message in ADDR mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-6052&quot;&gt;&lt;del&gt;QPID-6052&lt;/del&gt;&lt;/a&gt; : Use ADDR addresses for JMSDestination on incoming messages in 0-9-1 when the address mode is ADDR&lt;/p&gt;</comment>
                            <comment id="14113821" author="jira-bot" created="Thu, 28 Aug 2014 15:01:07 +0000"  >&lt;p&gt;Commit 1621148 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=godfrer&quot; class=&quot;user-hover&quot; rel=&quot;godfrer&quot;&gt;godfrer&lt;/a&gt; in branch &apos;qpid/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1621148&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1621148&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-6052&quot; title=&quot;[Java Client] The client does not correctly set the JMSDestination on a 0-9-1 message in ADDR mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-6052&quot;&gt;&lt;del&gt;QPID-6052&lt;/del&gt;&lt;/a&gt; : Use ADDR addresses for JMSDestination on incoming messages in 0-9-1 when the address mode is ADDR&lt;/p&gt;</comment>
                            <comment id="14113822" author="jira-bot" created="Thu, 28 Aug 2014 15:01:36 +0000"  >&lt;p&gt;Commit 1621149 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=godfrer&quot; class=&quot;user-hover&quot; rel=&quot;godfrer&quot;&gt;godfrer&lt;/a&gt; in branch &apos;qpid/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1621149&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1621149&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-6052&quot; title=&quot;[Java Client] The client does not correctly set the JMSDestination on a 0-9-1 message in ADDR mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-6052&quot;&gt;&lt;del&gt;QPID-6052&lt;/del&gt;&lt;/a&gt; : Use ADDR addresses for JMSDestination on incoming messages in 0-9-1 when the address mode is ADDR&lt;/p&gt;</comment>
                            <comment id="14113823" author="jira-bot" created="Thu, 28 Aug 2014 15:02:48 +0000"  >&lt;p&gt;Commit 1621150 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=godfrer&quot; class=&quot;user-hover&quot; rel=&quot;godfrer&quot;&gt;godfrer&lt;/a&gt; in branch &apos;qpid/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1621150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1621150&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-6052&quot; title=&quot;[Java Client] The client does not correctly set the JMSDestination on a 0-9-1 message in ADDR mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-6052&quot;&gt;&lt;del&gt;QPID-6052&lt;/del&gt;&lt;/a&gt; : Use ADDR addresses for JMSDestination on incoming messages in 0-9-1 when the address mode is ADDR&lt;/p&gt;</comment>
                            <comment id="14116802" author="gemmellr" created="Sun, 31 Aug 2014 14:37:29 +0000"  >&lt;p&gt;In AMQMessageDelegate_0_8, this code will fail to pass the &apos;subject&apos; of the Address unless the &apos;strict jms&apos; flag is set. Its not clear this is intended, as it seems the code is simply aiming to rewriting the &apos;qpid.subject&apos; property to use a legal JMS property name whenever &apos;strict jms&apos; is set. That looks like a defect introduced when the renaming functionality (which has been copies here) was added in &lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-3838&quot; title=&quot;[JMS] Vendor specific properties should be prefixed with JMS_&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-3838&quot;&gt;&lt;del&gt;QPID-3838&lt;/del&gt;&lt;/a&gt; (via &lt;a href=&quot;http://svn.apache.org/r1480656&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1480656&lt;/a&gt; and some further tidyup commits), which would mean some addresses being returned by convertToAddressBasedDestination(..) will have been different (and presumably wrong) ever since that point unless &apos;strict jms&apos; happened to be set.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+            String subject = null;
+            if (contentHeader.getHeaders() != null
+                &amp;amp;&amp;amp; contentHeader.getHeaders().containsKey(QpidMessageProperties.QPID_SUBJECT)
+                    &amp;amp;&amp;amp; STRICT_JMS)
+            {
+                subject = contentHeader.getHeaders().getString(QpidMessageProperties.QPID_SUBJECT);
+                if (subject != null)
+                {
+                    contentHeader.getHeaders().remove(QpidMessageProperties.QPID_SUBJECT);
+                    contentHeader.getHeaders().setString(&quot;JMS_&quot; + QpidMessageProperties.QPID_SUBJECT_JMS_PROPER,
+                                                         subject);
+                }
+            }
+            if(type == null)
+            {
+                type = addressType;
+            }
+            dest = (AMQDestination) convertToAddressBasedDestination(AMQShortString.toString(exchange),
+                                                                     AMQShortString.toString(routingKey), subject,
+                                                                     true, type);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In relation to the qpid.subject renaming in the above code, there is no matching &apos;compatibility remapping&apos; for accessing the property as is done in AMQMessageDelegate_0_10.getStringProperty(String), might be worth adding for consistency. Even though no existing 0-9-1 users would be expected to be using that property and thus be affected by it being remapped, someone moving from using 0-10 back to 0-9-1 might be...&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        else if (isStrictJMS &amp;amp;&amp;amp; QpidMessageProperties.QPID_SUBJECT.equals(propertyName))
        {
            return (String)getApplicationHeaders().get(&quot;JMS_&quot; + QpidMessageProperties.QPID_SUBJECT_JMS_PROPER);
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The second comment is arguable...someone asking for qpid.subject to be remapped should probably be happy needing to use the remapped name. I only pointed it out as the first comment originally asked &apos;since the 0-9-1 client never really used the illegal property, should it possibly always remap the name to be legal?&apos; but then I removed that &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;</comment>
                            <comment id="14117480" author="jira-bot" created="Mon, 1 Sep 2014 15:20:36 +0000"  >&lt;p&gt;Commit 1621826 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=godfrer&quot; class=&quot;user-hover&quot; rel=&quot;godfrer&quot;&gt;godfrer&lt;/a&gt; in branch &apos;qpid/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1621826&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1621826&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-6052&quot; title=&quot;[Java Client] The client does not correctly set the JMSDestination on a 0-9-1 message in ADDR mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-6052&quot;&gt;&lt;del&gt;QPID-6052&lt;/del&gt;&lt;/a&gt; : Address review comments from Robbie Gemmell&lt;/p&gt;</comment>
                            <comment id="14117486" author="rgodfrey" created="Mon, 1 Sep 2014 15:26:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gemmellr&quot; class=&quot;user-hover&quot; rel=&quot;gemmellr&quot;&gt;gemmellr&lt;/a&gt; Does this meet your concerns.  I&apos;ve not fixed the 0-10 codepath as that&apos;s really an existing bug that should be dealt with separately.  I&apos;d like to get this in for 0.30 as we have users who are seeing the destination issue.&lt;/p&gt;</comment>
                            <comment id="14117512" author="gemmellr" created="Mon, 1 Sep 2014 16:04:04 +0000"  >&lt;p&gt;Yes, and I think including the changes in 0.30 would be good.&lt;/p&gt;</comment>
                            <comment id="14118244" author="gemmellr" created="Tue, 2 Sep 2014 14:41:07 +0000"  >&lt;p&gt;Raised &lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-6064&quot; title=&quot;if &amp;#39;strict jms&amp;#39; mode isnt enabled, the 0-10 client will fail to set &amp;#39;subject&amp;#39; on Address used for JMSDestination in certain cases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-6064&quot;&gt;&lt;del&gt;QPID-6064&lt;/del&gt;&lt;/a&gt; for the existing 0-10 client issue.&lt;/p&gt;</comment>
                            <comment id="14118284" author="justi9" created="Tue, 2 Sep 2014 15:53:16 +0000"  >&lt;p&gt;Reviewed by Robbie.  Approved for 0.30.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://qpid.2158936.n2.nabble.com/Request-For-Inclusion-in-0-30-tt7612928.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://qpid.2158936.n2.nabble.com/Request-For-Inclusion-in-0-30-tt7612928.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14118292" author="jira-bot" created="Tue, 2 Sep 2014 16:06:00 +0000"  >&lt;p&gt;Commit 1622044 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=godfrer&quot; class=&quot;user-hover&quot; rel=&quot;godfrer&quot;&gt;godfrer&lt;/a&gt; in branch &apos;qpid/branches/0.30&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1622044&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1622044&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merged &lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-6052&quot; title=&quot;[Java Client] The client does not correctly set the JMSDestination on a 0-9-1 message in ADDR mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-6052&quot;&gt;&lt;del&gt;QPID-6052&lt;/del&gt;&lt;/a&gt; (r1621143 r1621148 r1621149 r1621150 r1621826) to 0.30 from trunk&lt;/p&gt;</comment>
                            <comment id="14149331" author="justi9" created="Fri, 26 Sep 2014 15:42:41 +0000"  >&lt;p&gt;Released in Qpid 0.30, &lt;a href=&quot;http://qpid.apache.org/releases/qpid-0.30/index.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://qpid.apache.org/releases/qpid-0.30/index.html&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12738439">QPID-6064</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 8 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1zfwf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>