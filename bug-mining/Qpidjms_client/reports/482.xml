<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:22:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[QPID-2796] [Java] implement support for heartbeats following IO changes to the 0-8/0-9/0-9-1/0-10 broker and 0-8/0-9/0-9-1 client</title>
                <link>https://issues.apache.org/jira/browse/QPID-2796</link>
                <project id="12310520" key="QPID">Qpid</project>
                    <description>&lt;p&gt;The Java broker and client are not able to generate AMQP heartbeats following the updates to their IO layer. The 0-8/0-9/0-9-1 codepaths previously relied on the Mina IO layer to support this, and as such can no longer do so. The 0-10 path of the Java broker leverages much of the 0-10 implementation in common originally developed for the 0-10 Java client, which simply reflects heartbeats it receives from a broker and as such no heartbeats will ever be sent by broker or the client despite its support.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12471524">QPID-2796</key>
            <summary>[Java] implement support for heartbeats following IO changes to the 0-8/0-9/0-9-1/0-10 broker and 0-8/0-9/0-9-1 client</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="robbie">Robbie Gemmell</assignee>
                                    <reporter username="robbie">Robbie Gemmell</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Aug 2010 11:10:24 +0000</created>
                <updated>Wed, 11 Feb 2015 20:07:08 +0000</updated>
                            <resolved>Tue, 27 Nov 2012 00:14:38 +0000</resolved>
                                    <version>0.15</version>
                                    <fixVersion>0.20</fixVersion>
                    <fixVersion>0.21</fixVersion>
                                    <component>Broker-J</component>
                    <component>JMS AMQP 0-x</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="12926889" author="gemmellr" created="Mon, 1 Nov 2010 10:09:39 +0000"  >&lt;p&gt;Updating &apos;Fix For&apos;  to Unknown on issues not targeted for 0.8&lt;/p&gt;</comment>
                            <comment id="13202227" author="gemmellr" created="Tue, 7 Feb 2012 10:56:24 +0000"  >&lt;p&gt;Issue updated to reflect scope widening from only the0-10 path being unable to use heartbeats to all protocols paths currently being unable to support heartbeats&lt;/p&gt;</comment>
                            <comment id="13503521" author="rgodfrey" created="Sun, 25 Nov 2012 17:18:03 +0000"  >&lt;p&gt;Added support for sending heartbeats to the Java Broker (all 0-x protocol versions) and Java Client (0-8/9/9-1 protocols).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1413376&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1413376&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Will be adding a system test before resolving the JIRA&lt;/p&gt;</comment>
                            <comment id="13503541" author="gemmellr" created="Sun, 25 Nov 2012 20:23:47 +0000"  >&lt;p&gt;Changes look good so far. A couple of nitpicks and a posible problem:&lt;/p&gt;

&lt;p&gt;In the 0-10 Connection class there was a private implementation of TransportActivity added, but it isnt used. The updated connect() call passes null, which looks unsafe at first when following the subsequent method calls in IoNetowrkTransport but ultimately ends up being ok (because we dont set the reader/writer idle times at all on the 0-10 client side and rely on reflecting the brokers heartbeats if any) but possibly means we are doing socket timesouts with no effect. Given the IoReceiver ignores the ticker if it is null, could we just not create one if we arent going to really use it (as happens in the existing but now-unused IoNetworkConnection constructor)?&lt;/p&gt;

&lt;p&gt;In IdleTimeoutTicker it might be nicer if instead of checking !=0 it used &amp;gt;0 as happens elsewhere.&lt;/p&gt;

&lt;p&gt;Since IdleTimeoutTicker.tick() is only called when we get a SocketTimeoutException in IoReceiver, doesnt that mean its possible we can be in a writer-idle situation and yet never signal so (if the reader keeps getting data within its timeout, which is twice as long as the senders)? The old 0-8/9/9-1 clients will happily kill the connection in this situation if the broker doenst send them anything.&lt;/p&gt;</comment>
                            <comment id="13503707" author="rgodfrey" created="Mon, 26 Nov 2012 10:13:07 +0000"  >&lt;p&gt;Added a system test: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1413539&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1413539&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13503723" author="rgodfrey" created="Mon, 26 Nov 2012 10:49:31 +0000"  >&lt;p&gt;I&apos;ve made a further check-in to address Robbie&apos;s review comments:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1413549&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1413549&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="13504256" author="gemmellr" created="Tue, 27 Nov 2012 00:14:38 +0000"  >&lt;p&gt;Looks good to me.&lt;/p&gt;</comment>
                            <comment id="13505566" author="justi9" created="Wed, 28 Nov 2012 15:41:39 +0000"  >&lt;p&gt;Reviewed by Robbie.  Approved for 0.20.&lt;/p&gt;</comment>
                            <comment id="13505917" author="rgodfrey" created="Wed, 28 Nov 2012 21:35:44 +0000"  >&lt;p&gt;Merged to 0.20 as r1414927.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>169483</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 51 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0bjcn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>65247</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>