diff --git a/client/src/main/java/org/apache/qpid/client/url/URLParser.java b/client/src/main/java/org/apache/qpid/client/url/URLParser.java
index fab95f754..f3f74dd33 100644
--- a/client/src/main/java/org/apache/qpid/client/url/URLParser.java
+++ b/client/src/main/java/org/apache/qpid/client/url/URLParser.java
@@ -58,22 +58,31 @@ public class URLParser
 
             if ((connection.getHost() == null) || connection.getHost().equals(""))
             {
-                String uid = AMQConnectionFactory.getUniqueClientID();
-                if (uid == null)
-                {
-                    throw URLHelper.parseError(-1, "Client Name not specified", fullURL);
+                String tmp = connection.getAuthority();
+                // hack to read a clientid such as "my_clientID"
+                if (tmp != null && tmp.indexOf('@') < tmp.length()-1)
+                {                   
+                    _url.setClientName(tmp.substring(tmp.indexOf('@')+1,tmp.length()));
                 }
                 else
                 {
-                    _url.setClientName(uid);
+                    String uid = AMQConnectionFactory.getUniqueClientID();
+                    if (uid == null)
+                    {
+                        throw URLHelper.parseError(-1, "Client Name not specified", fullURL);
+                    }
+                    else
+                    {
+                        _url.setClientName(uid);
+                    }
                 }
 
-            }
+            }            
             else
             {
                 _url.setClientName(connection.getHost());
             }
-
+            
             String userInfo = connection.getUserInfo();
 
             if (userInfo == null)
diff --git a/client/src/test/java/org/apache/qpid/test/unit/client/connectionurl/ConnectionURLTest.java b/client/src/test/java/org/apache/qpid/test/unit/client/connectionurl/ConnectionURLTest.java
index d05e90823..7400b524f 100644
--- a/client/src/test/java/org/apache/qpid/test/unit/client/connectionurl/ConnectionURLTest.java
+++ b/client/src/test/java/org/apache/qpid/test/unit/client/connectionurl/ConnectionURLTest.java
@@ -375,6 +375,19 @@ public class ConnectionURLTest extends TestCase
         assertTrue(connectionurl.getBrokerCount() == 1);
     }
 
+    public void testClientIDWithUnderscore() throws URLSyntaxException
+    {
+        String url = "amqp://user:pass@client_id/test?brokerlist='tcp://localhost:5672'";
+
+        ConnectionURL connectionurl = new AMQConnectionURL(url);
+
+        assertTrue(connectionurl.getUsername().equals("user"));
+        assertTrue(connectionurl.getPassword().equals("pass"));
+        assertTrue(connectionurl.getVirtualHost().equals("/test"));
+        assertTrue(connectionurl.getClientName().equals("client_id"));
+        
+        assertTrue(connectionurl.getBrokerCount() == 1);
+    }
 
     public void testWrongOptionSeparatorInOptions()
     {
