diff --git a/client/src/main/java/org/apache/qpid/client/AMQConnectionFactory.java b/client/src/main/java/org/apache/qpid/client/AMQConnectionFactory.java
index cc91746d9..8bc815d98 100644
--- a/client/src/main/java/org/apache/qpid/client/AMQConnectionFactory.java
+++ b/client/src/main/java/org/apache/qpid/client/AMQConnectionFactory.java
@@ -55,12 +55,13 @@ public class AMQConnectionFactory implements ConnectionFactory, QueueConnectionF
                                              ObjectFactory, Referenceable, XATopicConnectionFactory,
                                              XAQueueConnectionFactory, XAConnectionFactory
 {
-    private final ConnectionURL _connectionDetails;
+    protected static final String NO_URL_CONFIGURED = "The connection factory wasn't created with a proper URL, the connection details are empty";
+
+    private ConnectionURL _connectionDetails;
 
     // The default constructor is necessary to allow AMQConnectionFactory to be deserialised from JNDI
     public AMQConnectionFactory()
     {
-        _connectionDetails = null;
     }
 
     public AMQConnectionFactory(final String url) throws URLSyntaxException
@@ -106,6 +107,11 @@ public class AMQConnectionFactory implements ConnectionFactory, QueueConnectionF
 
     public Connection createConnection() throws JMSException
     {
+        if(_connectionDetails == null)
+        {
+            throw new JMSException(NO_URL_CONFIGURED);
+        }
+
         try
         {
             if (_connectionDetails.getClientName() == null || _connectionDetails.getClientName().equals(""))
@@ -158,7 +164,7 @@ public class AMQConnectionFactory implements ConnectionFactory, QueueConnectionF
         }
         else
         {
-            throw new JMSException("The connection factory wasn't created with a proper URL, the connection details are empty");
+            throw new JMSException(NO_URL_CONFIGURED);
         }
     }
 
@@ -193,6 +199,12 @@ public class AMQConnectionFactory implements ConnectionFactory, QueueConnectionF
         return _connectionDetails.toString();
     }
 
+    //setter necessary to use instances created with the default constructor (which we can't remove)
+    public final void setConnectionURLString(String url) throws URLSyntaxException
+    {
+        _connectionDetails = new AMQConnectionURL(url);
+    }
+
     /**
      * JNDI interface to create objects from References.
      *
@@ -332,7 +344,7 @@ public class AMQConnectionFactory implements ConnectionFactory, QueueConnectionF
         }
         else
         {
-            throw new JMSException("The connection factory wasn't created with a proper URL, the connection details are empty");
+            throw new JMSException(NO_URL_CONFIGURED);
         }        
     }
 
diff --git a/client/src/test/java/org/apache/qpid/test/unit/jndi/ConnectionFactoryTest.java b/client/src/test/java/org/apache/qpid/client/AMQConnectionFactoryTest.java
similarity index 80%
rename from client/src/test/java/org/apache/qpid/test/unit/jndi/ConnectionFactoryTest.java
rename to client/src/test/java/org/apache/qpid/client/AMQConnectionFactoryTest.java
index 20496026c..bb92fa4ec 100644
--- a/client/src/test/java/org/apache/qpid/test/unit/jndi/ConnectionFactoryTest.java
+++ b/client/src/test/java/org/apache/qpid/client/AMQConnectionFactoryTest.java
@@ -18,7 +18,9 @@
  * under the License.
  *
  */
-package org.apache.qpid.test.unit.jndi;
+package org.apache.qpid.client;
+
+import javax.jms.JMSException;
 
 import junit.framework.TestCase;
 
@@ -26,7 +28,7 @@ import org.apache.qpid.client.AMQConnectionFactory;
 import org.apache.qpid.jms.BrokerDetails;
 import org.apache.qpid.jms.ConnectionURL;
 
-public class ConnectionFactoryTest extends TestCase
+public class AMQConnectionFactoryTest extends TestCase
 {
 
     //URL will be returned with the password field swapped for '********'
@@ -58,6 +60,20 @@ public class ConnectionFactoryTest extends TestCase
         assertEquals("tcp", service.getTransport());
         assertEquals("localhost", service.getHost());
         assertEquals(5672, service.getPort());
+    }
+
+    public void testInstanceCreatedWithDefaultConstructorThrowsExceptionOnCallingConnectWithoutSettingURL() throws Exception
+    {
+        AMQConnectionFactory factory = new AMQConnectionFactory();
 
+        try
+        {
+            factory.createConnection();
+            fail("Expected exception not thrown");
+        }
+        catch(JMSException e)
+        {
+            assertEquals("Unexpected exception", AMQConnectionFactory.NO_URL_CONFIGURED, e.getMessage());
+        }
     }
 }
