diff --git a/gremlin-core/src/main/java/org/apache/tinkerpop/gremlin/process/traversal/dsl/graph/GraphTraversal.java b/gremlin-core/src/main/java/org/apache/tinkerpop/gremlin/process/traversal/dsl/graph/GraphTraversal.java
index 7237ccca0f..ee3a2d444e 100644
--- a/gremlin-core/src/main/java/org/apache/tinkerpop/gremlin/process/traversal/dsl/graph/GraphTraversal.java
+++ b/gremlin-core/src/main/java/org/apache/tinkerpop/gremlin/process/traversal/dsl/graph/GraphTraversal.java
@@ -1608,35 +1608,31 @@ public interface GraphTraversal<S, E> extends Traversal<S, E> {
             return this.hasId((P) id);
         }
         else {
-            Object[] ids;
+            this.asAdmin().getBytecode().addStep(Symbols.hasId, id, otherIds);
+
+            //using ArrayList instead of arrays given P.within() turns all arguments into lists
+            final List<Object> ids = new ArrayList<>();
             if (id instanceof Object[]) {
-                ids = (Object[]) id;
-            } else {
-                ids = new Object[] {id};
-            }
-            int size = ids.length;
-            int capacity = size;
+                Collections.addAll(ids, (Object[]) id);
+            } else if (id instanceof Collection) {
+                // as ids are unrolled when it's in array, they should also be unrolled when it's a list.
+                // this also aligns with behavior of hasId() when it's pushed down to g.V() (TINKERPOP-2863)
+                ids.addAll((Collection<?>) id);
+            } else
+                ids.add(id);
+
+            // unrolling ids from lists works cleaner with Collection too, as otherwise they will need to
+            // be turned into array first
             for (final Object i : otherIds) {
-                if (i.getClass().isArray()) {
-                    final Object[] tmp = (Object[]) i;
-                    int newLength = size + tmp.length;
-                    if (capacity < newLength) {
-                        ids = Arrays.copyOf(ids, capacity = size + tmp.length);
-                    }
-                    System.arraycopy(tmp, 0, ids, size, tmp.length);
-                    size = newLength;
-                } else {
-                    if (capacity == size) {
-                        ids = Arrays.copyOf(ids, capacity = size * 2);
-                    }
-                    ids[size++] = i;
-                }
-            }
-            if (capacity > size) {
-                ids = Arrays.copyOf(ids, size);
+                if (i instanceof Object[]) {
+                    Collections.addAll(ids, (Object[]) i);
+                } else if (i instanceof Collection) {
+                    ids.addAll((Collection<?>) i);
+                } else
+                    ids.add(i);
             }
-            this.asAdmin().getBytecode().addStep(Symbols.hasId, ids);
-            return TraversalHelper.addHasContainer(this.asAdmin(), new HasContainer(T.id.getAccessor(), ids.length == 1 ? P.eq(ids[0]) : P.within(ids)));
+
+            return TraversalHelper.addHasContainer(this.asAdmin(), new HasContainer(T.id.getAccessor(), ids.size() == 1 ? P.eq(ids.get(0)) : P.within(ids)));
         }
     }
 
diff --git a/gremlin-core/src/test/java/org/apache/tinkerpop/gremlin/process/traversal/step/filter/HasStepTest.java b/gremlin-core/src/test/java/org/apache/tinkerpop/gremlin/process/traversal/step/filter/HasStepTest.java
index 215d6c1461..516f759b33 100644
--- a/gremlin-core/src/test/java/org/apache/tinkerpop/gremlin/process/traversal/step/filter/HasStepTest.java
+++ b/gremlin-core/src/test/java/org/apache/tinkerpop/gremlin/process/traversal/step/filter/HasStepTest.java
@@ -25,6 +25,7 @@ import org.apache.tinkerpop.gremlin.process.traversal.step.StepTest;
 import org.junit.Test;
 
 import java.util.Arrays;
+import java.util.Collections;
 import java.util.List;
 
 import static org.apache.tinkerpop.gremlin.process.traversal.P.eq;
@@ -66,11 +67,14 @@ public class HasStepTest extends StepTest {
                 Arrays.asList(
                         __.hasId(1),
                         __.hasId(eq(1)),
-                        __.hasId(new Integer[]{1})),
+                        __.hasId(new Integer[]{1}),
+                        __.hasId(Collections.singletonList(1))),
                 Arrays.asList(
                         __.hasId(1, 2),
                         __.hasId(within(1, 2)),
-                        __.hasId(new Integer[]{1, 2})),
+                        __.hasId(new Integer[]{1, 2}),
+                        __.hasId(Arrays.asList(1, 2)),
+                        __.hasId(Collections.singletonList(1), Collections.singletonList(2))),
 
                 // hasLabel(Object label, Object... moreLabels) should be compatible with hasLabel(Object... labels)
                 Arrays.asList(
