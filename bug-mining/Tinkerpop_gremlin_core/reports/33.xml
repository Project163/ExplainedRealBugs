<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:11:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TINKERPOP-1738] Proper functioning of GraphSONReader depends on order of elements in String representation</title>
                <link>https://issues.apache.org/jira/browse/TINKERPOP-1738</link>
                <project id="12316520" key="TINKERPOP">TinkerPop</project>
                    <description>&lt;p&gt;The following two snippets are basically using the same stringified JSON object, it&apos;s just the order of elements that is different.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;gremlin&amp;gt; GraphSONReader.build().create().readObject(new java.io.ByteArrayInputStream(&apos;{&quot;@value&quot;:{&quot;step&quot;:[[&quot;addV&quot;,&quot;poc_int&quot;],[&quot;property&quot;,&quot;bigint1value&quot;,{&quot;@value&quot;:-4294967295,&quot;@type&quot;:&quot;g:Int32&quot;}]]},&quot;@type&quot;:&quot;g:Bytecode&quot;}&apos;.getBytes()), Bytecode.class)
==&amp;gt;[[], [addV(poc_int), property(bigint1value, 1)]]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;gremlin&amp;gt; GraphSONReader.build().create().readObject(new java.io.ByteArrayInputStream(&apos;{&quot;@type&quot;:&quot;g:Bytecode&quot;,&quot;@value&quot;:{&quot;step&quot;:[[&quot;addV&quot;,&quot;poc_int&quot;],[&quot;property&quot;,&quot;bigint1value&quot;,{&quot;@type&quot;:&quot;g:Int32&quot;,&quot;@value&quot;:-4294967295}]]}}&apos;.getBytes()), Bytecode.class)
Could not deserialize the JSON value as required. Nested exception: org.apache.tinkerpop.shaded.jackson.databind.JsonMappingException: Could not deserialize the JSON value as required. Nested exception: org.apache.tinkerpop.shaded.jackson.core.JsonParseException: Numeric value (-4294967295) out of range of int
 at [Source: java.io.ByteArrayInputStream@6d367020; line: 1, column: 126]
 at [Source: java.io.ByteArrayInputStream@6d367020; line: 1, column: 115] (through reference chain: java.util.ArrayList[1]-&amp;gt;java.util.ArrayList[2])
 at [Source: java.io.ByteArrayInputStream@6d367020; line: 1, column: 115]
Type &apos;:help&apos; or &apos;:h&apos; for help.
Display stack trace? [yN]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13091614">TINKERPOP-1738</key>
            <summary>Proper functioning of GraphSONReader depends on order of elements in String representation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="spmallette">Stephen Mallette</assignee>
                                    <reporter username="dkuppitz">Daniel Kuppitz</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Aug 2017 17:10:36 +0000</created>
                <updated>Thu, 8 Mar 2018 13:09:48 +0000</updated>
                            <resolved>Thu, 8 Mar 2018 13:09:48 +0000</resolved>
                                    <version>3.3.0</version>
                                    <fixVersion>3.2.8</fixVersion>
                    <fixVersion>3.3.2</fixVersion>
                                    <component>io</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16109417" author="dkuppitz" created="Tue, 1 Aug 2017 17:57:02 +0000"  >&lt;p&gt;I created a branch and added a failing test case.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/tinkerpop/tree/TINKERPOP-1738&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/tree/TINKERPOP-1738&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16109614" author="okram" created="Tue, 1 Aug 2017 19:43:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dkuppitz&quot; class=&quot;user-hover&quot; rel=&quot;dkuppitz&quot;&gt;dkuppitz&lt;/a&gt; I assigned this to Stephen given that its GraphSON and Stephen has recently done a refactoring to a &quot;stream based&quot; system.&lt;/p&gt;</comment>
                            <comment id="16118762" author="spmallette" created="Tue, 8 Aug 2017 17:58:09 +0000"  >&lt;p&gt;That test passes if you do &lt;tt&gt;g:Int64&lt;/tt&gt; for the &lt;tt&gt;-4294967295&lt;/tt&gt; value - that number is outside of integer i guess. is there some other problem?&lt;/p&gt;</comment>
                            <comment id="16126008" author="spmallette" created="Mon, 14 Aug 2017 17:17:47 +0000"  >&lt;p&gt;Looks like this is a bug in Jackson - &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=newkek&quot; class=&quot;user-hover&quot; rel=&quot;newkek&quot;&gt;newkek&lt;/a&gt; was good enough to confirm and create an issue:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/FasterXML/jackson-databind/issues/1729&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/FasterXML/jackson-databind/issues/1729&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16362475" author="spmallette" created="Tue, 13 Feb 2018 15:18:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=newkek&quot; class=&quot;user-hover&quot; rel=&quot;newkek&quot;&gt;newkek&lt;/a&gt; i noticed that jackson 2.9.4 released so i tried to implement the update to see if this bug was fixed. sadly, i&apos;m still getting the same error, but perhaps i didn&apos;t implement something right as there were some API changes for Jackson that I had to deal with - my work is here (based from &lt;tt&gt;tp32&lt;/tt&gt;):&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/tinkerpop/tree/TINKERPOP-1738-wip&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/tree/TINKERPOP-1738-wip&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Do you remember if there was anything else we needed to do on our side to fix this issue?&lt;/p&gt;</comment>
                            <comment id="16364747" author="newkek" created="Wed, 14 Feb 2018 20:40:39 +0000"  >&lt;p&gt;Hm well if I remember correctly the issue is that we were &lt;b&gt;not&lt;/b&gt; getting the error consistently previously.&lt;/p&gt;

&lt;p&gt;I.e. if trying to deserialize a value out of bounds for a int32 you should get an error. However with the GraphSON2+ deserialization mechanism sometimes (depending on the order of the values) the deserialization would happen in a &lt;em&gt;Jackson&lt;/em&gt;&#160;TokenBuffer internally and in this TokenBuffer class the out-of-bound wasn&apos;t taken into account and deserialized wrong. With the fix in Jackson now&#160;if calling TokenBuffer.getIntValue() and the content is out-of-bound of an int you would get an exception too.&lt;/p&gt;

&lt;p&gt;TL;DR:&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-quote&quot;&gt;&apos;{&lt;span class=&quot;code-quote&quot;&gt;&quot;@value&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;step&quot;&lt;/span&gt;:[[&lt;span class=&quot;code-quote&quot;&gt;&quot;addV&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;poc_int&quot;&lt;/span&gt;],[&lt;span class=&quot;code-quote&quot;&gt;&quot;property&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;bigint1value&quot;&lt;/span&gt;,{&lt;span class=&quot;code-quote&quot;&gt;&quot;@value&quot;&lt;/span&gt;:-4294967295,&lt;span class=&quot;code-quote&quot;&gt;&quot;@type&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;g:Int32&quot;&lt;/span&gt;}]]},&lt;span class=&quot;code-quote&quot;&gt;&quot;@type&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;g:Bytecode&quot;&lt;/span&gt;}&apos;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-quote&quot;&gt;&apos;{&lt;span class=&quot;code-quote&quot;&gt;&quot;@type&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;g:Bytecode&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;@value&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;step&quot;&lt;/span&gt;:[[&lt;span class=&quot;code-quote&quot;&gt;&quot;addV&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;poc_int&quot;&lt;/span&gt;],[&lt;span class=&quot;code-quote&quot;&gt;&quot;property&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;bigint1value&quot;&lt;/span&gt;,{&lt;span class=&quot;code-quote&quot;&gt;&quot;@type&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;g:Int32&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;@value&quot;&lt;/span&gt;:-4294967295}]]}}&apos;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Should in theory both fail now because trying to deserialize an int that doesn&apos;t fit into an int.&lt;/p&gt;</comment>
                            <comment id="16384421" author="githubbot" created="Sat, 3 Mar 2018 01:51:42 +0000"  >&lt;p&gt;GitHub user spmallette opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/807&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/807&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-1738&quot; title=&quot;Proper functioning of GraphSONReader depends on order of elements in String representation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TINKERPOP-1738&quot;&gt;&lt;del&gt;TINKERPOP-1738&lt;/del&gt;&lt;/a&gt; Bump to jackson 2.9.4&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-1738&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/TINKERPOP-1738&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    This fixes a problem where Jackson was missing an error in GraphSON type information depending on the order of the JSON elements. It required some internal changes to the GraphSONTypeSerializer given API shifts in jackson - should not really affect TinkerPop  users. Modified the original test that demonstrated this problem to be a bit more robust.&lt;/p&gt;

&lt;p&gt;    All tests pass with `docker/build.sh -t -i`&lt;/p&gt;

&lt;p&gt;    VOTE +1&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/apache/tinkerpop&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-1738&quot; title=&quot;Proper functioning of GraphSONReader depends on order of elements in String representation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TINKERPOP-1738&quot;&gt;&lt;del&gt;TINKERPOP-1738&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/807.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/807.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #807&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit f35f04a8da88280e8b121356ac5839fc0b8ac859&lt;br/&gt;
Author: Stephen Mallette &amp;lt;spmva@...&amp;gt;&lt;br/&gt;
Date:   2018-02-13T15:16:46Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-1738&quot; title=&quot;Proper functioning of GraphSONReader depends on order of elements in String representation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TINKERPOP-1738&quot;&gt;&lt;del&gt;TINKERPOP-1738&lt;/del&gt;&lt;/a&gt; Bump to jackson 2.9.4&lt;/p&gt;

&lt;p&gt;    This fixes a problem where Jackson was missing an error in GraphSON type information depending on the order of the JSON elements. It required some internal changes to the GraphSONTypeSerializer given API shifts in jackson - should not really affect TinkerPop  users. Modified the original test that demonstrated this problem to be a bit more robust.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16385469" author="githubbot" created="Mon, 5 Mar 2018 01:38:16 +0000"  >&lt;p&gt;Github user dkuppitz commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/807&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/807&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    VOTE: +1&lt;/p&gt;</comment>
                            <comment id="16386240" author="githubbot" created="Mon, 5 Mar 2018 15:49:13 +0000"  >&lt;p&gt;Github user Joengenduvel commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/807&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/807&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    VOTE: +1&lt;br/&gt;
    We cannot proceed using Jackson 2.9.3 and below: &lt;a href=&quot;https://nvd.nist.gov/vuln/detail/CVE-2017-17485&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://nvd.nist.gov/vuln/detail/CVE-2017-17485&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="16386250" author="githubbot" created="Mon, 5 Mar 2018 15:51:50 +0000"  >&lt;p&gt;Github user TomCools commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/807&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/807&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    VOTE: +1 same issue as Joengenduvel. OWASP scan is required for our project and this is listed as a Major level issue.&lt;/p&gt;</comment>
                            <comment id="16391124" author="githubbot" created="Thu, 8 Mar 2018 11:40:20 +0000"  >&lt;p&gt;Github user jorgebay commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/807&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/807&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    VOTE: +1&lt;/p&gt;</comment>
                            <comment id="16391229" author="githubbot" created="Thu, 8 Mar 2018 13:09:36 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/807&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/807&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 36 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3i9zb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>