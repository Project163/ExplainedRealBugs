<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:11:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TINKERPOP-1832] TraversalHelper.replaceStep sets previousStep to the wrong step</title>
                <link>https://issues.apache.org/jira/browse/TINKERPOP-1832</link>
                <project id="12316520" key="TINKERPOP">TinkerPop</project>
                    <description>&lt;p&gt;The bug is described over &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/tinkerpop-dev/201710.mbox/browser&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I have tested &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dkuppitz&quot; class=&quot;user-hover&quot; rel=&quot;dkuppitz&quot;&gt;dkuppitz&lt;/a&gt; fix for it and all seems well.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &amp;lt;S, E&amp;gt; void replaceStep(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Step&amp;lt;S, E&amp;gt; removeStep, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Step&amp;lt;S, E&amp;gt; insertStep, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Traversal.Admin&amp;lt;?, ?&amp;gt; traversal) {
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i;
        traversal.removeStep(i = stepIndex(removeStep, traversal));
        traversal.addStep(i, insertStep);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13117728">TINKERPOP-1832</key>
            <summary>TraversalHelper.replaceStep sets previousStep to the wrong step</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkuppitz">Daniel Kuppitz</assignee>
                                    <reporter username="pietermartin">pieter martin</reporter>
                        <labels>
                    </labels>
                <created>Sat, 11 Nov 2017 12:00:12 +0000</created>
                <updated>Mon, 27 Nov 2017 13:01:55 +0000</updated>
                            <resolved>Mon, 27 Nov 2017 13:01:55 +0000</resolved>
                                    <version>3.3.0</version>
                                    <fixVersion>3.2.7</fixVersion>
                    <fixVersion>3.3.1</fixVersion>
                                    <component>process</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16257429" author="spmallette" created="Fri, 17 Nov 2017 19:17:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pietermartin&quot; class=&quot;user-hover&quot; rel=&quot;pietermartin&quot;&gt;pietermartin&lt;/a&gt; did you intend to come back to submit a pull request for this? &lt;/p&gt;</comment>
                            <comment id="16258399" author="pietermartin" created="Sun, 19 Nov 2017 09:01:56 +0000"  >&lt;p&gt;Yes I&apos;ll submit a PR for this.&lt;/p&gt;</comment>
                            <comment id="16258432" author="githubbot" created="Sun, 19 Nov 2017 10:30:26 +0000"  >&lt;p&gt;GitHub user pietermartin opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/751&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/751&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-1832&quot; title=&quot;TraversalHelper.replaceStep sets previousStep to the wrong step&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TINKERPOP-1832&quot;&gt;&lt;del&gt;TINKERPOP-1832&lt;/del&gt;&lt;/a&gt;: TraversalHelper.replaceStep sets previousStep to the wrong step&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-1832&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/TINKERPOP-1832&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    `TraversalHelper.replaceStep` needs to first remove the step before adding in the new step. Else it gets its `previousStep` pointer wrong.&lt;/p&gt;

&lt;p&gt;    Added `TraversalHelperTest.shouldSetPreviousStepToEmptyStep` which was the scenario that originally made me aware of the issue.&lt;/p&gt;

&lt;p&gt;    Ran `mvn clean install` and tested Sqlg&apos;s tests with the fix.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/pietermartin/tinkerpop&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/pietermartin/tinkerpop&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-1832&quot; title=&quot;TraversalHelper.replaceStep sets previousStep to the wrong step&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TINKERPOP-1832&quot;&gt;&lt;del&gt;TINKERPOP-1832&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/751.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/751.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #751&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit d40381c337ade06cf02388d014b7cc6d4ac8d7a1&lt;br/&gt;
Author: pieter &amp;lt;pieter.martin@riseup.net&amp;gt;&lt;br/&gt;
Date:   2017-11-19T10:17:50Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-1832&quot; title=&quot;TraversalHelper.replaceStep sets previousStep to the wrong step&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TINKERPOP-1832&quot;&gt;&lt;del&gt;TINKERPOP-1832&lt;/del&gt;&lt;/a&gt; - Fix bug where TraversalHelper.replaceStep sets the steps&apos; previousStep incorrectly.&lt;br/&gt;
    It needs to remove the replaced step before inserting the new step.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16258433" author="githubbot" created="Sun, 19 Nov 2017 10:32:50 +0000"  >&lt;p&gt;Github user pietermartin commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/751&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/751&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    VOTE +1&lt;/p&gt;</comment>
                            <comment id="16259139" author="githubbot" created="Mon, 20 Nov 2017 11:46:31 +0000"  >&lt;p&gt;Github user spmallette commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/751&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/751&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    This PR is targetted at master (3.3.x) - any reason to not also target tp32 (3.2.x) or is this just a problem on the 3.3.x line?&lt;/p&gt;</comment>
                            <comment id="16259144" author="githubbot" created="Mon, 20 Nov 2017 11:51:29 +0000"  >&lt;p&gt;Github user pietermartin commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/751&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/751&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I&apos;d have to check but pretty sure its the same on 3.2.x&lt;/p&gt;</comment>
                            <comment id="16261477" author="githubbot" created="Tue, 21 Nov 2017 20:55:59 +0000"  >&lt;p&gt;Github user dkuppitz commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/751&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/751&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    It is the same in 3.2.x and was actually testing the fix in `tp32` when the discussion first came up.&lt;/p&gt;

&lt;p&gt;    VOTE: +1 (after retargeting)&lt;/p&gt;</comment>
                            <comment id="16262126" author="githubbot" created="Wed, 22 Nov 2017 08:15:23 +0000"  >&lt;p&gt;Github user pietermartin commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/751&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/751&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Closing to retarget tp32&lt;/p&gt;</comment>
                            <comment id="16262127" author="githubbot" created="Wed, 22 Nov 2017 08:15:23 +0000"  >&lt;p&gt;Github user pietermartin closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/751&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/751&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16262188" author="githubbot" created="Wed, 22 Nov 2017 09:09:22 +0000"  >&lt;p&gt;GitHub user pietermartin opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/756&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/756&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-1832&quot; title=&quot;TraversalHelper.replaceStep sets previousStep to the wrong step&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TINKERPOP-1832&quot;&gt;&lt;del&gt;TINKERPOP-1832&lt;/del&gt;&lt;/a&gt;: TraversalHelper.replaceStep sets previousStep to the wrong step&lt;/p&gt;

&lt;p&gt;    `TraversalHelper.replaceStep` needs to first remove the step before adding in the new step. Else it gets its `previousStep` pointer wrong.&lt;/p&gt;

&lt;p&gt;    Added `TraversalHelperTest.shouldSetPreviousStepToEmptyStep` which was the scenario that originally made me aware of the issue.&lt;/p&gt;

&lt;p&gt;    Ran `mvn clean install` and tested Sqlg&apos;s tests with the fix.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/pietermartin/tinkerpop&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/pietermartin/tinkerpop&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-1832&quot; title=&quot;TraversalHelper.replaceStep sets previousStep to the wrong step&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TINKERPOP-1832&quot;&gt;&lt;del&gt;TINKERPOP-1832&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/756.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/756.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #756&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 8bc4b36f52d12e37b7d8f37f7d2240caa233106f&lt;br/&gt;
Author: pieter &amp;lt;pieter.martin@riseup.net&amp;gt;&lt;br/&gt;
Date:   2017-11-22T08:56:43Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-1832&quot; title=&quot;TraversalHelper.replaceStep sets previousStep to the wrong step&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TINKERPOP-1832&quot;&gt;&lt;del&gt;TINKERPOP-1832&lt;/del&gt;&lt;/a&gt; - Fix bug where TraversalHelper.replaceStep sets the steps&apos; previousStep incorrectly.&lt;br/&gt;
    It needs to remove the replaced step before inserting the new step.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16262209" author="githubbot" created="Wed, 22 Nov 2017 09:39:20 +0000"  >&lt;p&gt;Github user pietermartin commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/756&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/756&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    VOTE +1&lt;/p&gt;</comment>
                            <comment id="16263015" author="githubbot" created="Wed, 22 Nov 2017 17:58:35 +0000"  >&lt;p&gt;Github user dkuppitz commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/756&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/756&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    VOTE: +1&lt;/p&gt;</comment>
                            <comment id="16263147" author="githubbot" created="Wed, 22 Nov 2017 18:55:22 +0000"  >&lt;p&gt;Github user spmallette commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/756&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/756&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    All tests pass with `docker/build.sh -t -n -i`&lt;/p&gt;

&lt;p&gt;    VOTE +1&lt;/p&gt;</comment>
                            <comment id="16266752" author="githubbot" created="Mon, 27 Nov 2017 12:54:25 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/756&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/756&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 50 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3mo67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>