<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:12:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TINKERPOP-2579] EventStrategy doesn&apos;t work with anonymous traversal</title>
                <link>https://issues.apache.org/jira/browse/TINKERPOP-2579</link>
                <project id="12316520" key="TINKERPOP">TinkerPop</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Test
    void test() {
        Graph graph = TinkerGraph.open();

        Listener listener = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Listener();
        graph.traversal()
             .withStrategies(EventStrategy.build().addListener(listener).create())
             .addV(&lt;span class=&quot;code-quote&quot;&gt;&quot;V&quot;&lt;/span&gt;)
             .iterate();

        Assertions.assertEquals(1, graph.traversal().V().count().next());
        Assertions.assertTrue(listener.added.get());

        listener = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Listener();
        graph.traversal()
             .withStrategies(EventStrategy.build().addListener(listener).create())
             .V()
             .hasLabel(&lt;span class=&quot;code-quote&quot;&gt;&quot;V&quot;&lt;/span&gt;)
             .has(&lt;span class=&quot;code-quote&quot;&gt;&quot;p&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;v&quot;&lt;/span&gt;)
             .fold()
             .coalesce(__.unfold(), __.addV(&lt;span class=&quot;code-quote&quot;&gt;&quot;V&quot;&lt;/span&gt;))
             .property(&lt;span class=&quot;code-quote&quot;&gt;&quot;p&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;v&quot;&lt;/span&gt;)
             .iterate();
        Assertions.assertEquals(2, graph.traversal().V().count().next());
        Assertions.assertTrue(listener.added.get());
    }

    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Listener &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; MutationListener {
        AtomicBoolean added = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AtomicBoolean(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);

        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void vertexAdded(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Vertex vertex) {
            added.set(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
        }

        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void vertexRemoved(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Vertex vertex) {

        }

        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void vertexPropertyChanged(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Vertex element, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; VertexProperty oldValue, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; setValue,
                                          &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;... vertexPropertyKeyValues) {

        }

        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void vertexPropertyRemoved(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; VertexProperty vertexProperty) {

        }

        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void edgeAdded(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Edge edge) {

        }

        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void edgeRemoved(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Edge edge) {

        }

        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void edgePropertyChanged(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Edge element, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Property oldValue, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; setValue) {

        }

        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void edgePropertyRemoved(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Edge element, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Property property) {

        }

        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void vertexPropertyPropertyChanged(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; VertexProperty element, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Property oldValue, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; setValue) {

        }

        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void vertexPropertyPropertyRemoved(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; VertexProperty element, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Property property) {

        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.opentest4j.AssertionFailedError: 
Expected :&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
Actual   :&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&amp;lt;Click to see difference&amp;gt;


	at org.junit.jupiter.api.AssertionUtils.fail(AssertionUtils.java:55)
	at org.junit.jupiter.api.AssertTrue.assertTrue(AssertTrue.java:40)
	at org.junit.jupiter.api.AssertTrue.assertTrue(AssertTrue.java:35)
	at org.junit.jupiter.api.Assertions.assertTrue(Assertions.java:162)
	at factograph.batch.JobListListenerTest.anonAddTest(JobListListenerTest.java:100)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:675)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:125)
	at org.junit.jupiter.engine.extension.TimeoutInvocation.proceed(TimeoutInvocation.java:46)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:132)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:124)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:74)
	at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:104)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:62)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:43)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:35)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:202)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:198)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:135)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)
	at org.junit.platform.engine.support.hierarchical.ForkJoinPoolHierarchicalTestExecutorService$ExclusiveTask.compute(ForkJoinPoolHierarchicalTestExecutorService.java:171)
	at org.junit.platform.engine.support.hierarchical.ForkJoinPoolHierarchicalTestExecutorService.invokeAll(ForkJoinPoolHierarchicalTestExecutorService.java:115)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)
	at org.junit.platform.engine.support.hierarchical.ForkJoinPoolHierarchicalTestExecutorService$ExclusiveTask.compute(ForkJoinPoolHierarchicalTestExecutorService.java:171)
	at org.junit.platform.engine.support.hierarchical.ForkJoinPoolHierarchicalTestExecutorService.invokeAll(ForkJoinPoolHierarchicalTestExecutorService.java:115)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)
	at org.junit.platform.engine.support.hierarchical.ForkJoinPoolHierarchicalTestExecutorService$ExclusiveTask.compute(ForkJoinPoolHierarchicalTestExecutorService.java:171)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13383422">TINKERPOP-2579</key>
            <summary>EventStrategy doesn&apos;t work with anonymous traversal</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="spmallette">Stephen Mallette</assignee>
                                    <reporter username="Ershov">Pavel</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Jun 2021 13:29:46 +0000</created>
                <updated>Fri, 25 Jun 2021 15:06:15 +0000</updated>
                            <resolved>Fri, 25 Jun 2021 15:06:15 +0000</resolved>
                                    <version>3.5.0</version>
                                    <fixVersion>3.5.1</fixVersion>
                    <fixVersion>3.6.0</fixVersion>
                                    <component>process</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17361793" author="ershov" created="Fri, 11 Jun 2021 13:45:25 +0000"  >&lt;p&gt;possibly related with &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-2568&quot; title=&quot;Graph instance not set for child traversals &quot; class=&quot;issue-link&quot; data-issue-key=&quot;TINKERPOP-2568&quot;&gt;&lt;del&gt;TINKERPOP-2568&lt;/del&gt;&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="17364795" author="ershov" created="Thu, 17 Jun 2021 08:47:52 +0000"  >&lt;p&gt;More interesting reproducing case&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Test
    void event() {
        Graph graph = TinkerGraph.open();

        List&amp;lt;Vertex&amp;gt; vertices = graph.traversal()
                                     .V()
                                     .has(&lt;span class=&quot;code-quote&quot;&gt;&quot;p&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;)
                                     .fold()
                                     .coalesce(__.unfold(), __.addV(&lt;span class=&quot;code-quote&quot;&gt;&quot;V&quot;&lt;/span&gt;))
                                     .property(&lt;span class=&quot;code-quote&quot;&gt;&quot;p&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;)
                                     .toList();
        Assertions.assertEquals(1, graph.traversal().V().count().next());
        Assertions.assertEquals(1, vertices.size());

        vertices = graph.traversal()
                        .withStrategies(EventStrategy.build().create())
                        .V()
                        .has(&lt;span class=&quot;code-quote&quot;&gt;&quot;p&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;b&quot;&lt;/span&gt;)
                        .fold()
                        .coalesce(__.unfold(), __.addV(&lt;span class=&quot;code-quote&quot;&gt;&quot;V&quot;&lt;/span&gt;))
                        .property(&lt;span class=&quot;code-quote&quot;&gt;&quot;p&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;b&quot;&lt;/span&gt;)
                        .toList();

        Assertions.assertEquals(2, graph.traversal().V().count().next());
        Assertions.assertEquals(1, vertices.size());
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17364942" author="spmallette" created="Thu, 17 Jun 2021 13:27:37 +0000"  >&lt;p&gt;Thanks for reporting this and providing a good reproduction of the error. I&apos;ve added a failing test for this here:&#160;&lt;a href=&quot;https://github.com/apache/tinkerpop/commit/d88691e7e82baac7c9f7c98c112d9527fcbf242d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/commit/d88691e7e82baac7c9f7c98c112d9527fcbf242d&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So unfortunate - we never had a test for anonymous traversals and so we never caught the issue for 3.5.0 release. This needs to get fixed as part of 3.5.1.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="13378803">TINKERPOP-2568</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 21 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rvso:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>