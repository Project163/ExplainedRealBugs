<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:12:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TINKERPOP-2911] CountStrategy converts count().is(0) wrongly under ConnectiveStrategy</title>
                <link>https://issues.apache.org/jira/browse/TINKERPOP-2911</link>
                <project id="12316520" key="TINKERPOP">TinkerPop</project>
                    <description>&lt;p&gt;A query example:&lt;/p&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;// 2nd branch is just a dummy, and assuming we don&apos;t have an edge with label &quot;none&quot;
g.V().where(or(out(&quot;none&quot;).out().count().is(0), has(&quot;none&quot;))) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Here, CountStrategy tries to convert &lt;tt&gt;count().is(0)&lt;/tt&gt; to &lt;tt&gt;not(...).&lt;/tt&gt; However, when it is under ConnectiveStrategy, it tries to read Steps from tail to beginning and include Steps until it finds the first non-filter Step. So in this case, it becomes&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[GraphStep(vertex,[]), OrStep([[VertexStep(OUT,[none],vertex), NotStep([VertexStep(OUT,edge)])], [TraversalFilterStep([NeptunePropertiesStep([none],property)])]])]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So the first out(&quot;none&quot;) is outside of NotStep, whereas the 2nd out() is inside.&lt;br/&gt;
The original intention of this query is that the 1st branch under &lt;tt&gt;or&lt;/tt&gt; should return &lt;tt&gt;true&lt;/tt&gt; in the first branch, because there is no such edge with the label &lt;tt&gt;&quot;none&quot;&lt;/tt&gt; and &lt;tt&gt;count = 0&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;However this optimization returns the opposite result. Because the first &lt;tt&gt;VertexStep(OUT,&lt;span class=&quot;error&quot;&gt;&amp;#91;none&amp;#93;&lt;/span&gt;,vertex)&lt;/tt&gt; is now outside of &lt;tt&gt;NotStep&lt;/tt&gt;, the 1st branch returns &lt;tt&gt;false&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;It seems this logic was intentionally introduced while back ago&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/tinkerpop/commit/36bd2a2447529371d950b2df6de36ea49957ab55&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/commit/36bd2a2447529371d950b2df6de36ea49957ab55&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So just reverting this change may not be the permanent fix. We should investigate what should be the correct behavior for CountStrategy to apply under ConnectivityStep.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13529003">TINKERPOP-2911</key>
            <summary>CountStrategy converts count().is(0) wrongly under ConnectiveStrategy</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kenhuuu">Ken Hu</assignee>
                                    <reporter username="redtree1112">Norio Akagi</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Mar 2023 17:16:30 +0000</created>
                <updated>Mon, 17 Apr 2023 17:11:30 +0000</updated>
                            <resolved>Mon, 17 Apr 2023 17:11:30 +0000</resolved>
                                    <version>3.4.13</version>
                    <version>3.6.2</version>
                    <version>3.5.5</version>
                                    <fixVersion>3.7.0</fixVersion>
                    <fixVersion>3.6.3</fixVersion>
                    <fixVersion>3.5.6</fixVersion>
                                    <component>process</component>
                    <component>test-suite</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17710931" author="githubbot" created="Tue, 11 Apr 2023 12:57:32 +0000"  >&lt;p&gt;spmallette opened a new pull request, #2016:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2016&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2016&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-2911&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/TINKERPOP-2911&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   A previous attempt was made at fixing issues around this pattern but it turned out insufficient and needed its own special handling. Added a few other tests as well semi-unrelated to this issue to improve coverage.&lt;/p&gt;

&lt;p&gt;   VOTE +1&lt;/p&gt;

</comment>
                            <comment id="17710944" author="githubbot" created="Tue, 11 Apr 2023 13:13:06 +0000"  >&lt;p&gt;codecov-commenter commented on PR #2016:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2016#issuecomment-1503328884&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2016#issuecomment-1503328884&lt;/a&gt;&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;Codecov&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://codecov.io/gh/apache/tinkerpop/pull/2016?src=pr&amp;amp;el=h1&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://codecov.io/gh/apache/tinkerpop/pull/2016?src=pr&amp;amp;el=h1&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&lt;/a&gt;) Report&lt;br/&gt;
   &amp;gt; Merging &lt;a href=&quot;#2016&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;2016&lt;/a&gt;(&lt;a href=&quot;https://codecov.io/gh/apache/tinkerpop/pull/2016?src=pr&amp;amp;el=desc&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://codecov.io/gh/apache/tinkerpop/pull/2016?src=pr&amp;amp;el=desc&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&lt;/a&gt;) (39e3a74) into &lt;span class=&quot;error&quot;&gt;&amp;#91;3.5-dev&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://codecov.io/gh/apache/tinkerpop/commit/fece764c460be08fb7ce72d63c49244ab6683d1b?el=desc&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://codecov.io/gh/apache/tinkerpop/commit/fece764c460be08fb7ce72d63c49244ab6683d1b?el=desc&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&lt;/a&gt;) (fece764) will *&lt;b&gt;decrease&lt;/b&gt;* coverage by `5.18%`.&lt;br/&gt;
   &amp;gt; The diff coverage is `n/a`.&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   ```diff&lt;br/&gt;
   @@              Coverage Diff              @@&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;3.5-dev    #2016      +/-   ##&lt;br/&gt;
   =============================================&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Coverage      69.33%   64.16%   -5.18%&lt;br/&gt;
   =============================================&lt;br/&gt;
     Files            866       25     -841     &lt;br/&gt;
     Lines          41219     3750   -37469     &lt;br/&gt;
     Branches        5432        0    -5432     &lt;br/&gt;
   =============================================&lt;/li&gt;
	&lt;li&gt;Hits           28580     2406   -26174&lt;br/&gt;
   + Misses         10728     1166    -9562     &lt;br/&gt;
   + Partials        1911      178    -1733     &lt;br/&gt;
   ```&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;   &lt;span class=&quot;error&quot;&gt;&amp;#91;see 841 files with indirect coverage changes&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://codecov.io/gh/apache/tinkerpop/pull/2016/indirect-changes?src=pr&amp;amp;el=tree-more&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://codecov.io/gh/apache/tinkerpop/pull/2016/indirect-changes?src=pr&amp;amp;el=tree-more&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;   :mega: We&#8217;re building smart automated test selection to slash your CI/CD build times. &lt;span class=&quot;error&quot;&gt;&amp;#91;Learn more&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://about.codecov.io/iterative-testing/?utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://about.codecov.io/iterative-testing/?utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&lt;/a&gt;)&lt;/p&gt;


</comment>
                            <comment id="17711132" author="githubbot" created="Tue, 11 Apr 2023 22:12:05 +0000"  >&lt;p&gt;rdtr commented on PR #2016:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2016#issuecomment-1504194490&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2016#issuecomment-1504194490&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   LGTM&lt;/p&gt;

</comment>
                            <comment id="17712543" author="githubbot" created="Fri, 14 Apr 2023 21:07:48 +0000"  >&lt;p&gt;vkagamlyk commented on PR #2016:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2016#issuecomment-1509272585&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2016#issuecomment-1509272585&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   VOTE+1&lt;/p&gt;

</comment>
                            <comment id="17712548" author="githubbot" created="Fri, 14 Apr 2023 21:19:08 +0000"  >&lt;p&gt;kenhuuu commented on PR #2016:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2016#issuecomment-1509284428&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2016#issuecomment-1509284428&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   VOTE +1&lt;/p&gt;

</comment>
                            <comment id="17712550" author="githubbot" created="Fri, 14 Apr 2023 21:20:26 +0000"  >&lt;p&gt;kenhuuu merged PR #2016:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2016&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2016&lt;/a&gt;&lt;/p&gt;

</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 30 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1go1k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>