<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:12:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TINKERPOP-2893] Incorrectly comparing a counted value with multiple predicates</title>
                <link>https://issues.apache.org/jira/browse/TINKERPOP-2893</link>
                <project id="12316520" key="TINKERPOP">TinkerPop</project>
                    <description>&lt;p&gt;We use a composition of two predicates inside(-1,1).and(lt(-1)) to filter numbers that are greater than -1 and less -1. Obviously, no values satisfy this condition. Therefore, we expect Tinkergraph returns an empty set. However, a vertex is returned.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
gremlin&amp;gt; :&amp;gt; g.V().where(__.in(&lt;span class=&quot;code-quote&quot;&gt;&apos;knows&apos;&lt;/span&gt;).count().is(inside(-1,1).and(lt(-1))))
==&amp;gt;v[0] &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The graph of this example is as following.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Vertex bob = g.addV(&lt;span class=&quot;code-quote&quot;&gt;&quot;person&quot;&lt;/span&gt;).property(&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;Bob&quot;&lt;/span&gt;).next(); &lt;span class=&quot;code-comment&quot;&gt;// v[0]
&lt;/span&gt;Vertex alice = g.addV(&lt;span class=&quot;code-quote&quot;&gt;&quot;person&quot;&lt;/span&gt;).property(&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;Alice&quot;&lt;/span&gt;).next(); &lt;span class=&quot;code-comment&quot;&gt;// v[1]
&lt;/span&gt;Edge edge1 = g.addE(&lt;span class=&quot;code-quote&quot;&gt;&quot;knows&quot;&lt;/span&gt;).from(bob).to(alice).next();&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13527379">TINKERPOP-2893</key>
            <summary>Incorrectly comparing a counted value with multiple predicates</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kenhuuu">Ken Hu</assignee>
                                    <reporter username="tangle">DBuser</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Mar 2023 06:32:39 +0000</created>
                <updated>Fri, 21 Apr 2023 23:20:48 +0000</updated>
                            <resolved>Fri, 21 Apr 2023 23:20:48 +0000</resolved>
                                    <version>3.5.5</version>
                                    <fixVersion>3.7.0</fixVersion>
                    <fixVersion>3.6.3</fixVersion>
                    <fixVersion>3.5.6</fixVersion>
                                    <component>process</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17697551" author="spmallette" created="Tue, 7 Mar 2023 17:28:53 +0000"  >&lt;p&gt;Looks like bounds need to be better checked in &lt;tt&gt;CountStrategy&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
gremlin&amp;gt; g.V().filter(__.in(&lt;span class=&quot;code-quote&quot;&gt;&apos;knows&apos;&lt;/span&gt;).count().is(lt(-1l))).explain()
==&amp;gt;Traversal Explanation
===================================================================================================================================================
Original Traversal                    [GraphStep(vertex,[]), TraversalFilterStep([VertexStep(IN,[knows],vertex), CountGlobalStep, IsStep(lt(-1))])]

ConnectiveStrategy              [D]   [GraphStep(vertex,[]), TraversalFilterStep([VertexStep(IN,[knows],vertex), CountGlobalStep, IsStep(lt(-1))])]
IdentityRemovalStrategy         [O]   [GraphStep(vertex,[]), TraversalFilterStep([VertexStep(IN,[knows],vertex), CountGlobalStep, IsStep(lt(-1))])]
MatchPredicateStrategy          [O]   [GraphStep(vertex,[]), TraversalFilterStep([VertexStep(IN,[knows],vertex), CountGlobalStep, IsStep(lt(-1))])]
FilterRankingStrategy           [O]   [GraphStep(vertex,[]), TraversalFilterStep([VertexStep(IN,[knows],vertex), CountGlobalStep, IsStep(lt(-1))])]
InlineFilterStrategy            [O]   [GraphStep(vertex,[]), TraversalFilterStep([VertexStep(IN,[knows],vertex), CountGlobalStep, IsStep(lt(-1))])]
IncidentToAdjacentStrategy      [O]   [GraphStep(vertex,[]), TraversalFilterStep([VertexStep(IN,[knows],vertex), CountGlobalStep, IsStep(lt(-1))])]
RepeatUnrollStrategy            [O]   [GraphStep(vertex,[]), TraversalFilterStep([VertexStep(IN,[knows],vertex), CountGlobalStep, IsStep(lt(-1))])]
PathRetractionStrategy          [O]   [GraphStep(vertex,[]), TraversalFilterStep([VertexStep(IN,[knows],vertex), CountGlobalStep, IsStep(lt(-1))])]
ByModulatorOptimizationStrategy [O]   [GraphStep(vertex,[]), TraversalFilterStep([VertexStep(IN,[knows],vertex), CountGlobalStep, IsStep(lt(-1))])]
AdjacentToIncidentStrategy      [O]   [GraphStep(vertex,[]), TraversalFilterStep([VertexStep(IN,[knows],edge), CountGlobalStep, IsStep(lt(-1))])]
EarlyLimitStrategy              [O]   [GraphStep(vertex,[]), TraversalFilterStep([VertexStep(IN,[knows],edge), CountGlobalStep, IsStep(lt(-1))])]
CountStrategy                   [O]   [GraphStep(vertex,[]), NotStep([VertexStep(IN,[knows],edge)])]
LazyBarrierStrategy             [O]   [GraphStep(vertex,[]), NotStep([VertexStep(IN,[knows],edge)])]
TinkerGraphCountStrategy        [P]   [GraphStep(vertex,[]), NotStep([VertexStep(IN,[knows],edge)])]
TinkerGraphStepStrategy         [P]   [TinkerGraphStep(vertex,[]), NotStep([VertexStep(IN,[knows],edge)])]
ProfileStrategy                 [F]   [TinkerGraphStep(vertex,[]), NotStep([VertexStep(IN,[knows],edge)])]
StandardVerificationStrategy    [V]   [TinkerGraphStep(vertex,[]), NotStep([VertexStep(IN,[knows],edge)])]

Final Traversal                       [TinkerGraphStep(vertex,[]), NotStep([VertexStep(IN,[knows],edge)])]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you are able, feel free to submit a PR to fix that one.&lt;/p&gt;
</comment>
                            <comment id="17714333" author="githubbot" created="Wed, 19 Apr 2023 22:57:54 +0000"  >&lt;p&gt;kenhuuu opened a new pull request, #2033:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2033&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2033&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-2893&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/TINKERPOP-2893&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Predicates that contain negative numbers aren&apos;t handled correctly by the current CountStrategy implementation. In particular, the use of the highRange to determine when to use not() or to remove the count().is() doesn&apos;t account for these cases. This leads to the optimization being applied when it shouldn&apos;t be. This commit temporarily solves this by disabling the optimization in these cases. Further work could be done to selectively apply the optimization as there are some cases even with predicates that contain negative numbers where it could be applied.&lt;/p&gt;

</comment>
                            <comment id="17714413" author="githubbot" created="Thu, 20 Apr 2023 05:11:45 +0000"  >&lt;p&gt;codecov-commenter commented on PR #2033:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2033#issuecomment-1515724183&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2033#issuecomment-1515724183&lt;/a&gt;&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;Codecov&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://codecov.io/gh/apache/tinkerpop/pull/2033?src=pr&amp;amp;el=h1&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://codecov.io/gh/apache/tinkerpop/pull/2033?src=pr&amp;amp;el=h1&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&lt;/a&gt;) Report&lt;br/&gt;
   &amp;gt; Merging &lt;a href=&quot;#2033&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;2033&lt;/a&gt;(&lt;a href=&quot;https://codecov.io/gh/apache/tinkerpop/pull/2033?src=pr&amp;amp;el=desc&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://codecov.io/gh/apache/tinkerpop/pull/2033?src=pr&amp;amp;el=desc&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&lt;/a&gt;) (1e65523) into &lt;span class=&quot;error&quot;&gt;&amp;#91;3.5-dev&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://codecov.io/gh/apache/tinkerpop/commit/783be486b6024adea12502660260ac4cccc38224?el=desc&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://codecov.io/gh/apache/tinkerpop/commit/783be486b6024adea12502660260ac4cccc38224?el=desc&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&lt;/a&gt;) (783be48) will *&lt;b&gt;decrease&lt;/b&gt;* coverage by `5.23%`.&lt;br/&gt;
   &amp;gt; The diff coverage is `n/a`.&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   ```diff&lt;br/&gt;
   @@              Coverage Diff              @@&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;3.5-dev    #2033      +/-   ##&lt;br/&gt;
   =============================================&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Coverage      69.38%   64.16%   -5.23%&lt;br/&gt;
   =============================================&lt;br/&gt;
     Files            866       25     -841     &lt;br/&gt;
     Lines          41227     3750   -37477     &lt;br/&gt;
     Branches        5434        0    -5434     &lt;br/&gt;
   =============================================&lt;/li&gt;
	&lt;li&gt;Hits           28607     2406   -26201&lt;br/&gt;
   + Misses         10710     1166    -9544     &lt;br/&gt;
   + Partials        1910      178    -1732     &lt;br/&gt;
   ```&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;   &lt;span class=&quot;error&quot;&gt;&amp;#91;see 841 files with indirect coverage changes&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://codecov.io/gh/apache/tinkerpop/pull/2033/indirect-changes?src=pr&amp;amp;el=tree-more&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://codecov.io/gh/apache/tinkerpop/pull/2033/indirect-changes?src=pr&amp;amp;el=tree-more&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;   :mega: We&#8217;re building smart automated test selection to slash your CI/CD build times. &lt;span class=&quot;error&quot;&gt;&amp;#91;Learn more&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://about.codecov.io/iterative-testing/?utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://about.codecov.io/iterative-testing/?utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&lt;/a&gt;)&lt;/p&gt;


</comment>
                            <comment id="17714661" author="githubbot" created="Thu, 20 Apr 2023 16:06:36 +0000"  >&lt;p&gt;vkagamlyk commented on PR #2033:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2033#issuecomment-1516593460&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2033#issuecomment-1516593460&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   VOTE+1&lt;/p&gt;

</comment>
                            <comment id="17714752" author="githubbot" created="Thu, 20 Apr 2023 20:55:33 +0000"  >&lt;p&gt;xiazcy commented on PR #2033:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2033#issuecomment-1516937492&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2033#issuecomment-1516937492&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   VOTE +1&lt;/p&gt;

</comment>
                            <comment id="17715120" author="githubbot" created="Fri, 21 Apr 2023 18:14:09 +0000"  >&lt;p&gt;kenhuuu commented on PR #2033:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2033#issuecomment-1518180507&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2033#issuecomment-1518180507&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   VOTE +1&lt;/p&gt;

</comment>
                            <comment id="17715195" author="githubbot" created="Fri, 21 Apr 2023 23:12:58 +0000"  >&lt;p&gt;kenhuuu merged PR #2033:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2033&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2033&lt;/a&gt;&lt;/p&gt;

</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13527373">TINKERPOP-2892</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 29 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1ge0o:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>