<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:12:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TINKERPOP-2621] toString for traversals such as within with empty array returns empty string as argument instead of brackets</title>
                <link>https://issues.apache.org/jira/browse/TINKERPOP-2621</link>
                <project id="12316520" key="TINKERPOP">TinkerPop</project>
                    <description>&lt;p&gt;I use the gremlin Translator to translate bytecode query to script in order to allow sending it to neptune profile/explain endpoints.&lt;/p&gt;

&lt;p&gt;a query which include a steps such as &apos;.within([])&apos;&#160; , notice the empty array, is translated to&#160;&lt;/p&gt;

&lt;p&gt;.within()&#160; &#160;which fails in neptune, where&#160; within([])&#160; with empty brackets actually works.&lt;/p&gt;

&lt;p&gt;now I don&apos;t know if this is neptune blame which should allow such traversal or gremlin (client) issue, and if gremlin should print empty brackets or empty string..&lt;/p&gt;

&lt;p&gt;see:&#160;node_modules/gremlin/lib/process/traversal.js :&lt;/p&gt;

&lt;p&gt;return&#160;this.operator&#160;&lt;ins&gt;&#160;&apos;(&apos;&#160;&lt;/ins&gt;&#160;formatValue(this.value)&#160;+&#160;&apos;)&apos;;&lt;/p&gt;

&lt;p&gt;.toString([])&#160; =&amp;gt; &apos;&apos;&lt;/p&gt;

&lt;p&gt;&#160;&lt;br/&gt;
&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// 
&lt;/span&gt;&#160;&#160;toString()&#160;{
&#160;&#160;&#160;&#160;function&#160;formatValue(value){
&#160;&#160;&#160;&#160;&#160;&#160;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;&#160;(Array.isArray(value))&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let&#160;acc&#160;=&#160;[];
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;&#160;(&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;&#160;item&#160;of&#160;value)&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;acc.push(formatValue(item));
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;&#160;acc;
&#160;&#160;&#160;&#160;&#160;&#160;}
&#160;&#160;&#160;&#160;&#160;&#160;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;&#160;(value&#160;&amp;amp;&amp;amp;&#160;typeof&#160;value&#160;===&#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt;){
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;&#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-quote&quot;&gt;&apos;&quot;&lt;/span&gt;&#160;+&#160;value&#160;+&#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;&apos;&lt;/span&gt;&quot;&lt;/span&gt;;
&#160;&#160;&#160;&#160;&#160;&#160;}
&#160;&#160;&#160;&#160;&#160;&#160;&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;&#160;value;
&#160;&#160;&#160;&#160;}


&#160;&#160;&#160;&#160;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;&#160;(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.other&#160;===&#160;undefined&#160;||&#160;&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.other&#160;===&#160;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;&#160;&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;&#160;+&#160;&lt;span class=&quot;code-quote&quot;&gt;&apos;(&apos;&lt;/span&gt;&#160;+&#160;formatValue(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.value)&#160;+&#160;&lt;span class=&quot;code-quote&quot;&gt;&apos;)&apos;&lt;/span&gt;;
&#160;&#160;&#160;&#160;}
&#160;&#160;&#160;&#160;&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;&#160;&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;&#160;+&#160;&lt;span class=&quot;code-quote&quot;&gt;&apos;(&apos;&lt;/span&gt;&#160;+&#160;formatValue(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.value)&#160;+&#160;&lt;span class=&quot;code-quote&quot;&gt;&apos;,&#160;&apos;&lt;/span&gt;&#160;+&#160;formatValue(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.other)&#160;+&#160;&lt;span class=&quot;code-quote&quot;&gt;&apos;)&apos;&lt;/span&gt;;
&#160;&#160;}&#160;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13400784">TINKERPOP-2621</key>
            <summary>toString for traversals such as within with empty array returns empty string as argument instead of brackets</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="spmallette">Stephen Mallette</assignee>
                                    <reporter username="talron">Tal Ron</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Sep 2021 12:44:23 +0000</created>
                <updated>Fri, 1 Oct 2021 12:42:52 +0000</updated>
                            <resolved>Fri, 1 Oct 2021 12:42:52 +0000</resolved>
                                    <version>3.5.1</version>
                                    <fixVersion>3.6.0</fixVersion>
                    <fixVersion>3.5.2</fixVersion>
                                    <component>language</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17415113" author="spmallette" created="Tue, 14 Sep 2021 19:14:06 +0000"  >&lt;p&gt;Neptune might be to blame in some respect, though I&apos;m not sure TinkerPop has made it clear what the behavior should be. If i try it in Gremlin Console i get the following &lt;tt&gt;toString()&lt;/tt&gt; back which means that it can be called this way:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
gremlin&amp;gt; P.within()
==&amp;gt;within([])
gremlin&amp;gt; g.V().has(&lt;span class=&quot;code-quote&quot;&gt;&apos;name&apos;&lt;/span&gt;,within())
gremlin&amp;gt; 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Since it is valid for varargs (at least in Java/Groovy) to be called with empty arguments, I think Neptune should probably allow it so technically it&apos;s a bug there, but it&apos;s perhaps also a bug in our grammar so this issue should stay open here i believe.&lt;/p&gt;</comment>
                            <comment id="17416546" author="talron" created="Fri, 17 Sep 2021 08:36:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spmallette&quot; class=&quot;user-hover&quot; rel=&quot;spmallette&quot;&gt;spmallette&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;should I file a bug in neptune too?&lt;/p&gt;

&lt;p&gt;if so, where should I do it?&lt;/p&gt;</comment>
                            <comment id="17416780" author="spmallette" created="Fri, 17 Sep 2021 16:03:46 +0000"  >&lt;p&gt;no need for any additional reporting - Neptune is aware of it now.&lt;/p&gt;</comment>
                            <comment id="17419948" author="githubbot" created="Fri, 24 Sep 2021 19:37:26 +0000"  >&lt;p&gt;spmallette opened a new pull request #1481:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/1481&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/1481&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   This functionality was allowed by Java/Groovy so it seems to follow that we have the same here:&lt;/p&gt;

&lt;p&gt;   ```text&lt;br/&gt;
   gremlin&amp;gt; P.within()&lt;br/&gt;
   ==&amp;gt;within([])&lt;br/&gt;
   ```&lt;/p&gt;

&lt;p&gt;   Builds with `mvn clean install` which means that the variants were content with this syntax as well. &lt;/p&gt;

&lt;p&gt;   VOTE +1&lt;/p&gt;


&lt;p&gt;&amp;#8211; &lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;To unsubscribe, e-mail: commits-unsubscribe@tinkerpop.apache.org&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="17419950" author="githubbot" created="Fri, 24 Sep 2021 19:41:22 +0000"  >&lt;p&gt;joshsh commented on pull request #1481:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/1481#issuecomment-926876957&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/1481#issuecomment-926876957&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   VOTE +1&lt;/p&gt;


&lt;p&gt;&amp;#8211; &lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;To unsubscribe, e-mail: commits-unsubscribe@tinkerpop.apache.org&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="17420654" author="githubbot" created="Mon, 27 Sep 2021 10:41:08 +0000"  >&lt;p&gt;divijvaidya commented on pull request #1481:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/1481#issuecomment-927742342&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/1481#issuecomment-927742342&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Could we also please create a JIRA to write an optimizer to handle empty within()/without() steps from the query? Some examples of how the optimizers will behave are as follows (I can add more details in the JIRA later):&lt;br/&gt;
   1. `has(key, within(&apos;&apos;))` is always false in which case we can replace `within(&apos;&apos;)` with `false`. &lt;br/&gt;
   2. `has(hey, without(&apos;&apos;))` is always true in which case this step/`HasContainer` can be removed from the traversal as a filter.&lt;/p&gt;


&lt;p&gt;&amp;#8211; &lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;To unsubscribe, e-mail: commits-unsubscribe@tinkerpop.apache.org&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="17420704" author="githubbot" created="Mon, 27 Sep 2021 12:23:29 +0000"  >&lt;p&gt;spmallette commented on pull request #1481:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/1481#issuecomment-927821801&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/1481#issuecomment-927821801&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &amp;gt; Could we also please create a JIRA to write an optimizer to handle empty within()/without() steps from the query? &lt;/p&gt;

&lt;p&gt;   Sure, i was more focused on just getting this to work for this PR but the thought crossed my mind that we could probably treat these cases a bit better.  Here&apos;s the JIRA: &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-2625&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/TINKERPOP-2625&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;&amp;#8211; &lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;To unsubscribe, e-mail: commits-unsubscribe@tinkerpop.apache.org&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="17423267" author="githubbot" created="Fri, 1 Oct 2021 12:42:00 +0000"  >&lt;p&gt;spmallette merged pull request #1481:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/1481&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/1481&lt;/a&gt;&lt;/p&gt;





&lt;p&gt;&amp;#8211; &lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on to GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;To unsubscribe, e-mail: commits-unsubscribe@tinkerpop.apache.org&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 6 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0uuu0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>