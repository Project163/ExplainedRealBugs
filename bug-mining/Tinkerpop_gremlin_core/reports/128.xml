<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:12:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TINKERPOP-2891] Inconsistent behavior when comparing a counted value with a negative value</title>
                <link>https://issues.apache.org/jira/browse/TINKERPOP-2891</link>
                <project id="12316520" key="TINKERPOP">TinkerPop</project>
                    <description>&lt;p&gt;I compare a value that should be greater than or equal to 0 with a negative value.&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
gremlin&amp;gt; :&amp;gt; g.V().where(__.in().count().is(eq(-3)))
Not a legal range: [0, -2]
gremlin&amp;gt; :&amp;gt; g.V().where(__.in().count().is(eq(-2)))&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I find that Tinkergraph throws an exception when comparing negative values less than -2, but does nothing when comparing with&#160; -2.&lt;/p&gt;

&lt;p&gt;I&apos;m curious why they behave differently.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13527372">TINKERPOP-2891</key>
            <summary>Inconsistent behavior when comparing a counted value with a negative value</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="valentyn">Valentyn Kahamlyk</assignee>
                                    <reporter username="tangle">DBuser</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Mar 2023 03:24:34 +0000</created>
                <updated>Mon, 17 Apr 2023 15:25:11 +0000</updated>
                            <resolved>Mon, 17 Apr 2023 15:25:11 +0000</resolved>
                                    <version>3.5.5</version>
                                    <fixVersion>3.7.0</fixVersion>
                    <fixVersion>3.6.3</fixVersion>
                    <fixVersion>3.5.6</fixVersion>
                                    <component>process</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17697555" author="spmallette" created="Tue, 7 Mar 2023 17:33:45 +0000"  >&lt;p&gt;Not sure what&apos;s wrong, but the error message does appear confusing. Ideally, it wouldn&apos;t throw an exception at all, but minimum fix on this would be to just fix the error message. Please feel free to submit a PR to make an improvement here if you are able.&lt;/p&gt;</comment>
                            <comment id="17712054" author="githubbot" created="Thu, 13 Apr 2023 20:03:40 +0000"  >&lt;p&gt;vkagamlyk opened a new pull request, #2021:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2021&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2021&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Fixed optimization of `count` step inside `CountStrategy`.&lt;/p&gt;

&lt;p&gt;   queries like&lt;br/&gt;
   ` g.V().where(_&lt;em&gt;.in().count().is(eq(-3)))` and  `g.V().where(&lt;/em&gt;&lt;em&gt;.in().count().is(eq(-2)))` are now correctly optimized as `g.V().where(&lt;/em&gt;_.in().limit(0).count().is(eq(-2)))`&lt;/p&gt;

</comment>
                            <comment id="17712126" author="githubbot" created="Thu, 13 Apr 2023 23:46:18 +0000"  >&lt;p&gt;xiazcy commented on code in PR #2021:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2021#discussion_r1166130749&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2021#discussion_r1166130749&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
gremlin-core/src/main/java/org/apache/tinkerpop/gremlin/process/traversal/strategy/optimization/CountStrategy.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -178,7 +178,7 @@ public void apply(final Traversal.Admin&amp;lt;?, ?&amp;gt; traversal) {&lt;br/&gt;
                             }&lt;br/&gt;
                         }&lt;br/&gt;
                     } else {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;TraversalHelper.insertBeforeStep(new RangeGlobalStep&amp;lt;&amp;gt;(traversal, 0L, highRange), curr, traversal);&lt;br/&gt;
+                        TraversalHelper.insertBeforeStep(new RangeGlobalStep&amp;lt;&amp;gt;(traversal, 0L, highRange &amp;lt; 0 ? 0 : highRange), curr, traversal);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Review Comment:&lt;br/&gt;
   It looks like highRange is a Long, should these comparisons be in Long too?&lt;br/&gt;
   ```suggestion&lt;br/&gt;
                           TraversalHelper.insertBeforeStep(new RangeGlobalStep&amp;lt;&amp;gt;(traversal, 0L, highRange &amp;lt; 0L ? 0L : highRange), curr, traversal);&lt;br/&gt;
   ```&lt;/p&gt;


</comment>
                            <comment id="17712549" author="githubbot" created="Fri, 14 Apr 2023 21:19:30 +0000"  >&lt;p&gt;kenhuuu commented on PR #2021:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2021#issuecomment-1509285047&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2021#issuecomment-1509285047&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   VOTE +1&lt;/p&gt;

</comment>
                            <comment id="17712555" author="githubbot" created="Fri, 14 Apr 2023 21:28:29 +0000"  >&lt;p&gt;codecov-commenter commented on PR #2021:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2021#issuecomment-1509295062&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2021#issuecomment-1509295062&lt;/a&gt;&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;Codecov&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://codecov.io/gh/apache/tinkerpop/pull/2021?src=pr&amp;amp;el=h1&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://codecov.io/gh/apache/tinkerpop/pull/2021?src=pr&amp;amp;el=h1&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&lt;/a&gt;) Report&lt;br/&gt;
   &amp;gt; Merging &lt;a href=&quot;#2021&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;2021&lt;/a&gt;(&lt;a href=&quot;https://codecov.io/gh/apache/tinkerpop/pull/2021?src=pr&amp;amp;el=desc&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://codecov.io/gh/apache/tinkerpop/pull/2021?src=pr&amp;amp;el=desc&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&lt;/a&gt;) (6f97bfe) into &lt;span class=&quot;error&quot;&gt;&amp;#91;3.5-dev&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://codecov.io/gh/apache/tinkerpop/commit/deba2153bf3dd5e174db8cbd176eaf37b660033e?el=desc&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://codecov.io/gh/apache/tinkerpop/commit/deba2153bf3dd5e174db8cbd176eaf37b660033e?el=desc&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&lt;/a&gt;) (deba215) will *&lt;b&gt;decrease&lt;/b&gt;* coverage by `5.18%`.&lt;br/&gt;
   &amp;gt; The diff coverage is `n/a`.&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   ```diff&lt;br/&gt;
   @@              Coverage Diff              @@&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;3.5-dev    #2021      +/-   ##&lt;br/&gt;
   =============================================&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Coverage      69.33%   64.16%   -5.18%&lt;br/&gt;
   =============================================&lt;br/&gt;
     Files            866       25     -841     &lt;br/&gt;
     Lines          41219     3750   -37469     &lt;br/&gt;
     Branches        5432        0    -5432     &lt;br/&gt;
   =============================================&lt;/li&gt;
	&lt;li&gt;Hits           28581     2406   -26175&lt;br/&gt;
   + Misses         10722     1166    -9556     &lt;br/&gt;
   + Partials        1916      178    -1738     &lt;br/&gt;
   ```&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;   &lt;span class=&quot;error&quot;&gt;&amp;#91;see 841 files with indirect coverage changes&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://codecov.io/gh/apache/tinkerpop/pull/2021/indirect-changes?src=pr&amp;amp;el=tree-more&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://codecov.io/gh/apache/tinkerpop/pull/2021/indirect-changes?src=pr&amp;amp;el=tree-more&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;   :mega: We&#8217;re building smart automated test selection to slash your CI/CD build times. &lt;span class=&quot;error&quot;&gt;&amp;#91;Learn more&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://about.codecov.io/iterative-testing/?utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://about.codecov.io/iterative-testing/?utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=The+Apache+Software+Foundation&lt;/a&gt;)&lt;/p&gt;


</comment>
                            <comment id="17712558" author="githubbot" created="Fri, 14 Apr 2023 21:32:40 +0000"  >&lt;p&gt;vkagamlyk commented on PR #2021:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2021#issuecomment-1509300370&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2021#issuecomment-1509300370&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   VOTE+1&lt;/p&gt;

</comment>
                            <comment id="17712559" author="githubbot" created="Fri, 14 Apr 2023 21:34:11 +0000"  >&lt;p&gt;vkagamlyk commented on code in PR #2021:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2021#discussion_r1167289250&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2021#discussion_r1167289250&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
gremlin-core/src/main/java/org/apache/tinkerpop/gremlin/process/traversal/strategy/optimization/CountStrategy.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -178,7 +178,7 @@ public void apply(final Traversal.Admin&amp;lt;?, ?&amp;gt; traversal) {&lt;br/&gt;
                             }&lt;br/&gt;
                         }&lt;br/&gt;
                     } else {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;TraversalHelper.insertBeforeStep(new RangeGlobalStep&amp;lt;&amp;gt;(traversal, 0L, highRange), curr, traversal);&lt;br/&gt;
+                        TraversalHelper.insertBeforeStep(new RangeGlobalStep&amp;lt;&amp;gt;(traversal, 0L, highRange &amp;lt; 0 ? 0 : highRange), curr, traversal);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Review Comment:&lt;br/&gt;
   `widening casting` should handle this&lt;/p&gt;


</comment>
                            <comment id="17712567" author="githubbot" created="Fri, 14 Apr 2023 22:17:05 +0000"  >&lt;p&gt;xiazcy commented on code in PR #2021:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2021#discussion_r1167308767&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2021#discussion_r1167308767&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
gremlin-core/src/main/java/org/apache/tinkerpop/gremlin/process/traversal/strategy/optimization/CountStrategy.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -178,7 +178,7 @@ public void apply(final Traversal.Admin&amp;lt;?, ?&amp;gt; traversal) {&lt;br/&gt;
                             }&lt;br/&gt;
                         }&lt;br/&gt;
                     } else {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;TraversalHelper.insertBeforeStep(new RangeGlobalStep&amp;lt;&amp;gt;(traversal, 0L, highRange), curr, traversal);&lt;br/&gt;
+                        TraversalHelper.insertBeforeStep(new RangeGlobalStep&amp;lt;&amp;gt;(traversal, 0L, highRange &amp;lt; 0 ? 0 : highRange), curr, traversal);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Review Comment:&lt;br/&gt;
   Yes, this is more of a nit style/format comment since previous comparisons are done as Long. &lt;/p&gt;


</comment>
                            <comment id="17712568" author="githubbot" created="Fri, 14 Apr 2023 22:17:33 +0000"  >&lt;p&gt;xiazcy commented on PR #2021:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2021#issuecomment-1509350035&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2021#issuecomment-1509350035&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   VOTE +1&lt;/p&gt;

</comment>
                            <comment id="17712572" author="githubbot" created="Fri, 14 Apr 2023 22:40:33 +0000"  >&lt;p&gt;vkagamlyk merged PR #2021:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2021&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2021&lt;/a&gt;&lt;/p&gt;

</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 30 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1gdz4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>