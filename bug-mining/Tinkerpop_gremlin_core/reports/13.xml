<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:11:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TINKERPOP-1405] profile() doesn&apos;t like withPath()</title>
                <link>https://issues.apache.org/jira/browse/TINKERPOP-1405</link>
                <project id="12316520" key="TINKERPOP">TinkerPop</project>
                    <description>&lt;p&gt;&lt;tt&gt;profile()&lt;/tt&gt; fails when used in conjunction with &lt;tt&gt;withPath()&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;gremlin&amp;gt; g.withPath().V().profile()
When specified, the profile()-Step must be the last step or followed only by the cap()-step.
Display stack trace? [yN]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12997200">TINKERPOP-1405</key>
            <summary>profile() doesn&apos;t like withPath()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="twilmes">Ted Wilmes</assignee>
                                    <reporter username="dkuppitz">Daniel Kuppitz</reporter>
                        <labels>
                    </labels>
                <created>Sun, 14 Aug 2016 18:37:21 +0000</created>
                <updated>Tue, 16 Aug 2016 15:50:41 +0000</updated>
                            <resolved>Tue, 16 Aug 2016 15:50:31 +0000</resolved>
                                    <version>3.2.1</version>
                                    <fixVersion>3.2.2</fixVersion>
                                    <component>process</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15420888" author="spmallette" created="Mon, 15 Aug 2016 12:04:11 +0000"  >&lt;p&gt;Is it interesting that this problem doesn&apos;t seem to occur in 3.1.3?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;gremlin&amp;gt; g.withPath().V().profile()
==&amp;gt;v[1]
==&amp;gt;v[2]
==&amp;gt;v[3]
==&amp;gt;v[4]
==&amp;gt;v[5]
==&amp;gt;v[6]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15421587" author="twilmes" created="Mon, 15 Aug 2016 20:10:39 +0000"  >&lt;p&gt;I was wondering if the &lt;tt&gt;PathRetractionStrategy&lt;/tt&gt; was causing issues with this so I took a look and it looks like it&apos;s actually having an issue because the &lt;tt&gt;withPath&lt;/tt&gt; adds a &lt;tt&gt;RequirementsStep&lt;/tt&gt; to the tail end of the traversal which breaks some of the &lt;tt&gt;StandardVerfificationStrategy&lt;/tt&gt; logic.  Looks like a straightforward fix so I can put a PR in shortly if something isn&apos;t already in the works.&lt;/p&gt;</comment>
                            <comment id="15422761" author="githubbot" created="Tue, 16 Aug 2016 14:06:21 +0000"  >&lt;p&gt;GitHub user twilmes opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/381&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/381&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-1405&quot; title=&quot;profile() doesn&amp;#39;t like withPath()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TINKERPOP-1405&quot;&gt;&lt;del&gt;TINKERPOP-1405&lt;/del&gt;&lt;/a&gt; - profile() doesn&apos;t like withPath()&lt;/p&gt;

&lt;p&gt;    Fixed a small bug in `StandardVerificationStrategy` that caused verification to fail when `withPath` was used in conjunction with `ProfileStep`.  Updated `StandardVerificationStrategyTest` to test traversals with `ProfileStep` and added a test to confirm verification failed on a reducing barrier nested within a repeat while I was at it.&lt;/p&gt;

&lt;p&gt;    This issue did not arise in TP31 so I took a look and the TP31 `StandardVerificationStrategy` does not have the `ProfileStep` and some other verification verification logic in it that is in master.  Because of this, I pointed this PR only at master but can re-point to TP31 and add the profile step verification in if you guys think that makes sense.&lt;/p&gt;

&lt;p&gt;    The Travis build appears to have stalled out while downloading artifacts.  Tests passed local with `mvn clean install`&lt;/p&gt;

&lt;p&gt;    ```&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; BUILD SUCCESS&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Total time: 24:25 min&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Finished at: 2016-08-16T08:43:01-05:00&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Final Memory: 140M/843M&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; ------------------------------------------------------------------------&lt;br/&gt;
    ```&lt;/p&gt;

&lt;p&gt;    VOTE: +1&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/apache/tinkerpop&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-1405&quot; title=&quot;profile() doesn&amp;#39;t like withPath()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TINKERPOP-1405&quot;&gt;&lt;del&gt;TINKERPOP-1405&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/381.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/381.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #381&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 226d83e903dc16f5d6da644d7069bb1b54c3878b&lt;br/&gt;
Author: Ted Wilmes &amp;lt;twilmes@gmail.com&amp;gt;&lt;br/&gt;
Date:   2016-08-16T13:04:28Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-1405&quot; title=&quot;profile() doesn&amp;#39;t like withPath()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TINKERPOP-1405&quot;&gt;&lt;del&gt;TINKERPOP-1405&lt;/del&gt;&lt;/a&gt; Fixed a small bug in StandardVerificationStrategy that caused verification to fail when withPath was used in conjunction with ProfileStep.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15422773" author="githubbot" created="Tue, 16 Aug 2016 14:14:15 +0000"  >&lt;p&gt;Github user okram commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/381&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/381&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Nice find. I really do hate `RequirementsStep`.&lt;/p&gt;

&lt;p&gt;    VOTE +1.&lt;/p&gt;</comment>
                            <comment id="15422824" author="githubbot" created="Tue, 16 Aug 2016 14:43:42 +0000"  >&lt;p&gt;Github user dkuppitz commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/381&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/381&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Lots of calls to ` traversal.asAdmin().getEndStep()`. Maybe it&apos;s smarter to call it only once..? More like this:&lt;/p&gt;

&lt;p&gt;    ```&lt;br/&gt;
    // The ProfileSideEffectStep must be the last step, 2nd last step when accompanied by the cap step,&lt;br/&gt;
    // or 3rd to last when the traversal ends with a RequirementsStep.&lt;br/&gt;
    Step endStep;&lt;br/&gt;
    if (TraversalHelper.hasStepOfClass(ProfileSideEffectStep.class, traversal) &amp;amp;&amp;amp;&lt;br/&gt;
       &#160; &#160; &#160;!((endStep = traversal.asAdmin().getEndStep()) instanceof ProfileSideEffectStep ||&lt;br/&gt;
     &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;(endStep instanceof SideEffectCapStep &amp;amp;&amp;amp; endStep.getPreviousStep() instanceof ProfileSideEffectStep) ||&lt;br/&gt;
     &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;(endStep instanceof RequirementsStep &amp;amp;&amp;amp; (&lt;br/&gt;
     &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;endStep.getPreviousStep() instanceof SideEffectCapStep ||&lt;br/&gt;
     &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;endStep.getPreviousStep() instanceof ProfileSideEffectStep)))) &lt;/p&gt;
{
     &#160; &#160;throw new VerificationException(&quot;When specified, the profile()-Step must be the last step or followed only by the cap()-step and/or requirements step.&quot;, traversal);
    }
&lt;p&gt;    ```&lt;/p&gt;

&lt;p&gt;    ^ I also removed all the negations, which makes the chained conditions a bit easier to read IMO.&lt;/p&gt;

&lt;p&gt;    But all in all this PR looks good to me.&lt;/p&gt;

&lt;p&gt;    VOTE: +1&lt;/p&gt;</comment>
                            <comment id="15422874" author="githubbot" created="Tue, 16 Aug 2016 15:18:45 +0000"  >&lt;p&gt;Github user twilmes commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/381&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/381&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Good suggestions Daniel.  I pushed the cleaned up code.  Tests were good on my side but I&apos;ll wait for Travis to finish up and merge if all is good.&lt;/p&gt;</comment>
                            <comment id="15422921" author="githubbot" created="Tue, 16 Aug 2016 15:50:13 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/381&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/381&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 13 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32ax3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>