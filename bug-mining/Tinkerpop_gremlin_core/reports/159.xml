<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:12:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TINKERPOP-3110] Incorrect Bytecode when multiple options are used in traversal</title>
                <link>https://issues.apache.org/jira/browse/TINKERPOP-3110</link>
                <project id="12316520" key="TINKERPOP">TinkerPop</project>
                    <description>&lt;p&gt;When multiple options like with(&quot;x&quot;,1).with(&quot;y&quot;,1) are used to build a traversal, the Bytecode building logic when constructing the traversal on the server keeps appending the Bytecode incrementally instead of replacing the previous Bytecode instruction.&lt;/p&gt;

&lt;p&gt;For a query like below:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
g
.with(&lt;span class=&quot;code-quote&quot;&gt;&apos;evaluationTimeout&apos;&lt;/span&gt;,300000L)
.with(&lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt;, 1)
.with(&lt;span class=&quot;code-quote&quot;&gt;&apos;b&apos;&lt;/span&gt;, 2)
.with(&lt;span class=&quot;code-quote&quot;&gt;&apos;c&apos;&lt;/span&gt;, 3)
.V()&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The Bytecode attached to traversal looks as:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
g
.withStrategies(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; org.apache.tinkerpop.gremlin.process.traversal.strategy.decoration.OptionsStrategy(evaluationTimeout: 300000L))
.withStrategies(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; org.apache.tinkerpop.gremlin.process.traversal.strategy.decoration.OptionsStrategy(evaluationTimeout: 300000L, a: (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) 1))
.withStrategies(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; org.apache.tinkerpop.gremlin.process.traversal.strategy.decoration.OptionsStrategy(evaluationTimeout: 300000L, a: (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) 1, b: (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) 2))
.withStrategies(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; org.apache.tinkerpop.gremlin.process.traversal.strategy.decoration.OptionsStrategy(evaluationTimeout: 300000L, a: (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) 1, b: (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) 2, c: (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) 3))
.V() &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Instead it should be just single instruction for OptionsStrategy as:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
g
.withStrategies(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; org.apache.tinkerpop.gremlin.process.traversal.strategy.decoration.OptionsStrategy(evaluationTimeout: 300000L, a: (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) 1, b: (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) 2, c: (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) 3))
.V() &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;We always build a new OptionsStrategy here and carry over the previous options &lt;a href=&quot;https://github.com/apache/tinkerpop/blob/master/gremlin-core/src/main/java/org/apache/tinkerpop/gremlin/process/traversal/TraversalSource.java#L116-L122&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/blob/master/gremlin-core/src/main/java/org/apache/tinkerpop/gremlin/process/traversal/TraversalSource.java#L116-L122&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;as OptionsStrategy itself is immutable and we cannot add new options after creating it.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;We build the traversal strategies set and bytecode here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/tinkerpop/blob/master/gremlin-core/src/main/java/org/apache/tinkerpop/gremlin/process/traversal/TraversalSource.java#L132-L133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/blob/master/gremlin-core/src/main/java/org/apache/tinkerpop/gremlin/process/traversal/TraversalSource.java#L132-L133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The traversal strategies set itself is built correctly and we remove duplicates &lt;a href=&quot;https://github.com/apache/tinkerpop/blob/master/gremlin-core/src/main/java/org/apache/tinkerpop/gremlin/process/traversal/util/DefaultTraversalStrategies.java#L42-L50&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/blob/master/gremlin-core/src/main/java/org/apache/tinkerpop/gremlin/process/traversal/util/DefaultTraversalStrategies.java#L42-L50&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;But Bytecode just appends the new strategy as instruction &lt;a href=&quot;https://github.com/apache/tinkerpop/blob/master/gremlin-core/src/main/java/org/apache/tinkerpop/gremlin/process/traversal/Bytecode.java#L82-L83&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/blob/master/gremlin-core/src/main/java/org/apache/tinkerpop/gremlin/process/traversal/Bytecode.java#L82-L83&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13590899">TINKERPOP-3110</key>
            <summary>Incorrect Bytecode when multiple options are used in traversal</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="xiazcy">Yang Xia</assignee>
                                    <reporter username="saikiranboga">Saikiran Boga</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Sep 2024 16:53:20 +0000</created>
                <updated>Thu, 5 Sep 2024 20:42:01 +0000</updated>
                            <resolved>Thu, 5 Sep 2024 20:42:01 +0000</resolved>
                                                    <fixVersion>3.7.3</fixVersion>
                                    <component>server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17878958" author="githubbot" created="Tue, 3 Sep 2024 17:26:35 +0000"  >&lt;p&gt;codecov-commenter commented on PR #2757:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2757#issuecomment-2327062224&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2757#issuecomment-2327062224&lt;/a&gt;&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;Codecov&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://app.codecov.io/gh/apache/tinkerpop/pull/2757?dropdown=coverage&amp;amp;src=pr&amp;amp;el=h1&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=apache&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.codecov.io/gh/apache/tinkerpop/pull/2757?dropdown=coverage&amp;amp;src=pr&amp;amp;el=h1&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=apache&lt;/a&gt;) Report&lt;br/&gt;
   Attention: Patch coverage is `86.36364%` with `3 lines` in your changes missing coverage. Please review.&lt;br/&gt;
   &amp;gt; Project coverage is 76.41%. Comparing base &lt;span class=&quot;error&quot;&gt;&amp;#91;(`9b46b67`)&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://app.codecov.io/gh/apache/tinkerpop/commit/9b46b6777d2fa250e41daacf2fa4554605aff53a?dropdown=coverage&amp;amp;el=desc&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=apache&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.codecov.io/gh/apache/tinkerpop/commit/9b46b6777d2fa250e41daacf2fa4554605aff53a?dropdown=coverage&amp;amp;el=desc&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=apache&lt;/a&gt;) to head &lt;span class=&quot;error&quot;&gt;&amp;#91;(`fc6e3ee`)&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://app.codecov.io/gh/apache/tinkerpop/commit/fc6e3ee30cad3549b49ad9d020db49942da22f95?dropdown=coverage&amp;amp;el=desc&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=apache&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.codecov.io/gh/apache/tinkerpop/commit/fc6e3ee30cad3549b49ad9d020db49942da22f95?dropdown=coverage&amp;amp;el=desc&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=apache&lt;/a&gt;).&lt;br/&gt;
   &amp;gt; Report is 201 commits behind head on 3.7-dev.&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Files with missing lines&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://app.codecov.io/gh/apache/tinkerpop/pull/2757?dropdown=coverage&amp;amp;src=pr&amp;amp;el=tree&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=apache&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.codecov.io/gh/apache/tinkerpop/pull/2757?dropdown=coverage&amp;amp;src=pr&amp;amp;el=tree&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=apache&lt;/a&gt;) &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Patch % &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Lines &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;#8212;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;#8212;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;#8212;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;.../tinkerpop/gremlin/process/traversal/Bytecode.java&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://app.codecov.io/gh/apache/tinkerpop/pull/2757?src=pr&amp;amp;el=tree&amp;amp;filepath=gremlin-core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Ftinkerpop%2Fgremlin%2Fprocess%2Ftraversal%2FBytecode.java&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=apache#diff-Z3JlbWxpbi1jb3JlL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS90aW5rZXJwb3AvZ3JlbWxpbi9wcm9jZXNzL3RyYXZlcnNhbC9CeXRlY29kZS5qYXZh&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.codecov.io/gh/apache/tinkerpop/pull/2757?src=pr&amp;amp;el=tree&amp;amp;filepath=gremlin-core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Ftinkerpop%2Fgremlin%2Fprocess%2Ftraversal%2FBytecode.java&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=apache#diff-Z3JlbWxpbi1jb3JlL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS90aW5rZXJwb3AvZ3JlbWxpbi9wcm9jZXNzL3RyYXZlcnNhbC9CeXRlY29kZS5qYXZh&lt;/a&gt;) &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 83.33% &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;1 Missing and 1 partial :warning: &amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://app.codecov.io/gh/apache/tinkerpop/pull/2757?src=pr&amp;amp;el=tree&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=apache&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.codecov.io/gh/apache/tinkerpop/pull/2757?src=pr&amp;amp;el=tree&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=apache&lt;/a&gt;) &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;...gremlin/process/traversal/util/BytecodeHelper.java&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://app.codecov.io/gh/apache/tinkerpop/pull/2757?src=pr&amp;amp;el=tree&amp;amp;filepath=gremlin-core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Ftinkerpop%2Fgremlin%2Fprocess%2Ftraversal%2Futil%2FBytecodeHelper.java&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=apache#diff-Z3JlbWxpbi1jb3JlL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS90aW5rZXJwb3AvZ3JlbWxpbi9wcm9jZXNzL3RyYXZlcnNhbC91dGlsL0J5dGVjb2RlSGVscGVyLmphdmE=&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.codecov.io/gh/apache/tinkerpop/pull/2757?src=pr&amp;amp;el=tree&amp;amp;filepath=gremlin-core%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Ftinkerpop%2Fgremlin%2Fprocess%2Ftraversal%2Futil%2FBytecodeHelper.java&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=apache#diff-Z3JlbWxpbi1jb3JlL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS90aW5rZXJwb3AvZ3JlbWxpbi9wcm9jZXNzL3RyYXZlcnNhbC91dGlsL0J5dGVjb2RlSGVscGVyLmphdmE=&lt;/a&gt;) &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 90.00% &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;0 Missing and 1 partial :warning: &amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://app.codecov.io/gh/apache/tinkerpop/pull/2757?src=pr&amp;amp;el=tree&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=apache&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.codecov.io/gh/apache/tinkerpop/pull/2757?src=pr&amp;amp;el=tree&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=apache&lt;/a&gt;) &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;   &amp;lt;details&amp;gt;&amp;lt;summary&amp;gt;Additional details and impacted files&amp;lt;/summary&amp;gt;&lt;/p&gt;


&lt;p&gt;   ```diff&lt;br/&gt;
   @@              Coverage Diff              @@&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;3.7-dev    #2757      +/-   ##&lt;br/&gt;
   =============================================&lt;br/&gt;
   + Coverage      76.14%   76.41%   +0.27%     &lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Complexity     13152    13203      +51&lt;br/&gt;
   =============================================&lt;br/&gt;
     Files           1084     1060      -24     &lt;br/&gt;
     Lines          65160    61439    -3721     &lt;br/&gt;
     Branches        7285     7315      +30     &lt;br/&gt;
   =============================================&lt;/li&gt;
	&lt;li&gt;Hits           49616    46950    -2666&lt;br/&gt;
   + Misses         12839    11973     -866     &lt;br/&gt;
   + Partials        2705     2516     -189     &lt;br/&gt;
   ```&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   &amp;lt;/details&amp;gt;&lt;/p&gt;

&lt;p&gt;   &lt;span class=&quot;error&quot;&gt;&amp;#91;:umbrella: View full report in Codecov by Sentry&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://app.codecov.io/gh/apache/tinkerpop/pull/2757?dropdown=coverage&amp;amp;src=pr&amp;amp;el=continue&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=apache&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.codecov.io/gh/apache/tinkerpop/pull/2757?dropdown=coverage&amp;amp;src=pr&amp;amp;el=continue&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=apache&lt;/a&gt;).   &lt;br/&gt;
   :loudspeaker: Have feedback on the report? &lt;span class=&quot;error&quot;&gt;&amp;#91;Share it here&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=apache&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=apache&lt;/a&gt;).&lt;/p&gt;


</comment>
                            <comment id="17879189" author="githubbot" created="Wed, 4 Sep 2024 11:06:19 +0000"  >&lt;p&gt;spmallette commented on code in PR #2757:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2757#discussion_r1743553054&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2757#discussion_r1743553054&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
CHANGELOG.asciidoc:&lt;br/&gt;
##########&lt;br/&gt;
@@ -38,6 +38,7 @@ This release also includes changes from &amp;lt;&amp;lt;release-3-6-8, 3.6.8&amp;gt;&amp;gt;.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Added getter method to `ConcatStep`, `ConjoinStep`, `SplitGlobalStep` and `SplitLocalStep` for their private fields.&lt;/li&gt;
	&lt;li&gt;Gremlin Server docker containers shutdown gracefully when receiving a SIGTERM.&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-3080&quot; title=&quot;AggregateStep can support all Operators predefined in TinkerPop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TINKERPOP-3080&quot;&gt;&lt;del&gt;TINKERPOP-3080&lt;/del&gt;&lt;/a&gt; Support to specify Operator as a reducer in withSideEffect when parsing with the grammar&lt;br/&gt;
+* &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-3110&quot; title=&quot;Incorrect Bytecode when multiple options are used in traversal&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TINKERPOP-3110&quot;&gt;&lt;del&gt;TINKERPOP-3110&lt;/del&gt;&lt;/a&gt; Fixed bug in Bytecode build logic for strategies&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Review Comment:&lt;br/&gt;
   the JIRA reference should not be in the CHANGELOG (i know its in the entry above, but that&apos;s not correct either). JIRA references are added on release in a separate listing.&lt;/p&gt;


</comment>
                            <comment id="17879190" author="githubbot" created="Wed, 4 Sep 2024 11:07:39 +0000"  >&lt;p&gt;spmallette commented on code in PR #2757:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2757#discussion_r1743553054&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2757#discussion_r1743553054&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
CHANGELOG.asciidoc:&lt;br/&gt;
##########&lt;br/&gt;
@@ -38,6 +38,7 @@ This release also includes changes from &amp;lt;&amp;lt;release-3-6-8, 3.6.8&amp;gt;&amp;gt;.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Added getter method to `ConcatStep`, `ConjoinStep`, `SplitGlobalStep` and `SplitLocalStep` for their private fields.&lt;/li&gt;
	&lt;li&gt;Gremlin Server docker containers shutdown gracefully when receiving a SIGTERM.&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-3080&quot; title=&quot;AggregateStep can support all Operators predefined in TinkerPop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TINKERPOP-3080&quot;&gt;&lt;del&gt;TINKERPOP-3080&lt;/del&gt;&lt;/a&gt; Support to specify Operator as a reducer in withSideEffect when parsing with the grammar&lt;br/&gt;
+* &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-3110&quot; title=&quot;Incorrect Bytecode when multiple options are used in traversal&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TINKERPOP-3110&quot;&gt;&lt;del&gt;TINKERPOP-3110&lt;/del&gt;&lt;/a&gt; Fixed bug in Bytecode build logic for strategies&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Review Comment:&lt;br/&gt;
   the JIRA reference should not be in the CHANGELOG (i know its in the entry above, but that&apos;s not correct either). JIRA references are added on release in a separate listing. also, could this be a bit more specific by including a few words about what the &quot;bug&quot; was?&lt;/p&gt;


</comment>
                            <comment id="17879191" author="githubbot" created="Wed, 4 Sep 2024 11:08:39 +0000"  >&lt;p&gt;spmallette commented on PR #2757:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2757#issuecomment-2328610840&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2757#issuecomment-2328610840&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   i can&apos;t help wondering if you need additional tests. is there an existing test that ensures that we don&apos;t have duplicate strategies in bytecode anymore? &lt;/p&gt;

</comment>
                            <comment id="17879216" author="githubbot" created="Wed, 4 Sep 2024 12:37:56 +0000"  >&lt;p&gt;saikiranboga commented on code in PR #2757:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2757#discussion_r1743706799&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2757#discussion_r1743706799&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
CHANGELOG.asciidoc:&lt;br/&gt;
##########&lt;br/&gt;
@@ -38,6 +38,7 @@ This release also includes changes from &amp;lt;&amp;lt;release-3-6-8, 3.6.8&amp;gt;&amp;gt;.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Added getter method to `ConcatStep`, `ConjoinStep`, `SplitGlobalStep` and `SplitLocalStep` for their private fields.&lt;/li&gt;
	&lt;li&gt;Gremlin Server docker containers shutdown gracefully when receiving a SIGTERM.&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-3080&quot; title=&quot;AggregateStep can support all Operators predefined in TinkerPop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TINKERPOP-3080&quot;&gt;&lt;del&gt;TINKERPOP-3080&lt;/del&gt;&lt;/a&gt; Support to specify Operator as a reducer in withSideEffect when parsing with the grammar&lt;br/&gt;
+* &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-3110&quot; title=&quot;Incorrect Bytecode when multiple options are used in traversal&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TINKERPOP-3110&quot;&gt;&lt;del&gt;TINKERPOP-3110&lt;/del&gt;&lt;/a&gt; Fixed bug in Bytecode build logic for strategies&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Review Comment:&lt;br/&gt;
   Removed JIRA ref. and expanded on the bug.&lt;/p&gt;


</comment>
                            <comment id="17879218" author="githubbot" created="Wed, 4 Sep 2024 12:43:06 +0000"  >&lt;p&gt;saikiranboga commented on PR #2757:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2757#issuecomment-2328895655&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2757#issuecomment-2328895655&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   &amp;gt; i can&apos;t help wondering if you need additional tests. is there an existing test that ensures that we don&apos;t have duplicate strategies in bytecode anymore?&lt;/p&gt;

&lt;p&gt;   @spmallette, Added few more tests. We do have some tests around strategy validation, but not for duplicate checking.&lt;/p&gt;



</comment>
                            <comment id="17879238" author="githubbot" created="Wed, 4 Sep 2024 13:36:59 +0000"  >&lt;p&gt;spmallette commented on PR #2757:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2757#issuecomment-2329086494&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2757#issuecomment-2329086494&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   thanks for the fixes - VOTE +1&lt;/p&gt;

</comment>
                            <comment id="17879330" author="githubbot" created="Wed, 4 Sep 2024 18:19:24 +0000"  >&lt;p&gt;kenhuuu commented on code in PR #2757:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2757#discussion_r1744235369&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2757#discussion_r1744235369&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
gremlin-core/src/main/java/org/apache/tinkerpop/gremlin/process/traversal/util/BytecodeHelper.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -397,6 +418,8 @@ else if (arguments&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt; instanceof Bytecode)&lt;br/&gt;
         }&lt;br/&gt;
     }&lt;/p&gt;

&lt;p&gt;+&lt;/p&gt;

&lt;p&gt;Review Comment:&lt;br/&gt;
   very small nit: remove added spaces&lt;/p&gt;


</comment>
                            <comment id="17879332" author="githubbot" created="Wed, 4 Sep 2024 18:21:04 +0000"  >&lt;p&gt;kenhuuu commented on code in PR #2757:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2757#discussion_r1744237332&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2757#discussion_r1744237332&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
gremlin-core/src/main/java/org/apache/tinkerpop/gremlin/process/traversal/util/BytecodeHelper.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -350,6 +351,26 @@ public static &amp;lt;A extends TraversalStrategy&amp;gt; Iterator&amp;lt;A&amp;gt; findStrategies(final Byt&lt;br/&gt;
                 os -&amp;gt; (A) os.getArguments()&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;);&lt;br/&gt;
     }&lt;/p&gt;

&lt;p&gt;+    public static &amp;lt;A extends TraversalStrategy&amp;gt; boolean removeStrategies(final Bytecode bytecode, final String operator, final Class&amp;lt;TraversalStrategy&amp;gt;[] clazzes) {&lt;/p&gt;

&lt;p&gt;Review Comment:&lt;br/&gt;
   Is `&amp;lt;A extends TraversalStrategy&amp;gt;`  needed? `A` doesn&apos;t seem to be used.&lt;/p&gt;


</comment>
                            <comment id="17879334" author="githubbot" created="Wed, 4 Sep 2024 18:24:52 +0000"  >&lt;p&gt;kenhuuu commented on PR #2757:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2757#issuecomment-2329713229&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2757#issuecomment-2329713229&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Is there a test for the problem stated in &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-3110&quot; title=&quot;Incorrect Bytecode when multiple options are used in traversal&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TINKERPOP-3110&quot;&gt;&lt;del&gt;TINKERPOP-3110&lt;/del&gt;&lt;/a&gt;? A test that asserts that if multiple with() are used that it is combined into a single OptionsStrategy that contains all the options from all the with()s?&lt;/p&gt;

</comment>
                            <comment id="17879426" author="githubbot" created="Thu, 5 Sep 2024 05:05:47 +0000"  >&lt;p&gt;xiazcy commented on PR #2757:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2757#issuecomment-2330605059&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2757#issuecomment-2330605059&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Thanks @saikiranboga for the changes! Note you may need to resolve some CHANGELOG conflicts. &lt;/p&gt;

&lt;p&gt;   VOTE +1&lt;/p&gt;

</comment>
                            <comment id="17879434" author="githubbot" created="Thu, 5 Sep 2024 05:48:38 +0000"  >&lt;p&gt;saikiranboga commented on PR #2757:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2757#issuecomment-2330654145&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2757#issuecomment-2330654145&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   &amp;gt; Is there a test for the problem stated in &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-3110&quot; title=&quot;Incorrect Bytecode when multiple options are used in traversal&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TINKERPOP-3110&quot;&gt;&lt;del&gt;TINKERPOP-3110&lt;/del&gt;&lt;/a&gt;? A test that asserts that if multiple with() are used that it is combined into a single OptionsStrategy that contains all the options from all the with()s?&lt;/p&gt;

&lt;p&gt;   Yes. See `BytecodeHelperTest#shouldFindStrategy`.&lt;/p&gt;

</comment>
                            <comment id="17879437" author="githubbot" created="Thu, 5 Sep 2024 05:54:06 +0000"  >&lt;p&gt;saikiranboga commented on code in PR #2757:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2757#discussion_r1744843089&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2757#discussion_r1744843089&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
gremlin-core/src/main/java/org/apache/tinkerpop/gremlin/process/traversal/util/BytecodeHelper.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -350,6 +351,26 @@ public static &amp;lt;A extends TraversalStrategy&amp;gt; Iterator&amp;lt;A&amp;gt; findStrategies(final Byt&lt;br/&gt;
                 os -&amp;gt; (A) os.getArguments()&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;);&lt;br/&gt;
     }&lt;/p&gt;

&lt;p&gt;+    public static &amp;lt;A extends TraversalStrategy&amp;gt; boolean removeStrategies(final Bytecode bytecode, final String operator, final Class&amp;lt;TraversalStrategy&amp;gt;[] clazzes) &lt;/p&gt;
{

Review Comment:
   Thanks for noticing. Removed.



##########
gremlin-core/src/main/java/org/apache/tinkerpop/gremlin/process/traversal/util/BytecodeHelper.java:
##########
@@ -397,6 +418,8 @@ else if (arguments[i] instanceof Bytecode)
         }
&lt;p&gt;     }&lt;/p&gt;

&lt;p&gt;+&lt;/p&gt;

&lt;p&gt;Review Comment:&lt;br/&gt;
   Removed.&lt;/p&gt;


</comment>
                            <comment id="17879625" author="githubbot" created="Thu, 5 Sep 2024 16:42:10 +0000"  >&lt;p&gt;kenhuuu commented on PR #2757:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2757#issuecomment-2332194615&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2757#issuecomment-2332194615&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   VOTE +1&lt;/p&gt;

</comment>
                            <comment id="17879635" author="githubbot" created="Thu, 5 Sep 2024 17:13:47 +0000"  >&lt;p&gt;xiazcy merged PR #2757:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2757&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2757&lt;/a&gt;&lt;/p&gt;

</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 9 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1r7ns:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>