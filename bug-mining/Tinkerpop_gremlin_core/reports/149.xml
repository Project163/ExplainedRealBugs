<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:12:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TINKERPOP-3009] SubgraphStrategy produces excessive filtering when multiple labels are filtered upon</title>
                <link>https://issues.apache.org/jira/browse/TINKERPOP-3009</link>
                <project id="12316520" key="TINKERPOP">TinkerPop</project>
                    <description>&lt;p&gt;See the example profile below.  Notice the traversal includes _has _filters everywhere repeatedly applied for vertices which are already filtered before too.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;gremlin&amp;gt; g.withStrategies(SubgraphStrategy.build().
......1&amp;gt;            vertices(hasLabel(&apos;x&apos;,&apos;y&apos;,&apos;z&apos;)).create()).
......2&amp;gt;   V().out().profile()
==&amp;gt;Traversal Metrics
Step                                                               Count  Traversers       Time (ms)    % Dur
=============================================================================================================
TinkerGraphStep(vertex,[~label.within([x, y, z])])                                             0.160    58.50
VertexStep(OUT,edge)                                                                           0.017     6.53
AndStep([[EdgeVertexStep(IN), HasStep([~label.w...                                             0.017     6.19
  EdgeVertexStep(IN)                                                                           0.000
  HasStep([~label.within([x, y, z])])                                                          0.000
  EdgeVertexStep(OUT)                                                                          0.000
  HasStep([~label.within([x, y, z])])                                                          0.000
EdgeVertexStep(IN)                                                                             0.064    23.59
HasStep([~label.within([x, y, z])])                                                            0.014     5.18
                                            &amp;gt;TOTAL                     -           -           0.274        -
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="13555240">TINKERPOP-3009</key>
            <summary>SubgraphStrategy produces excessive filtering when multiple labels are filtered upon</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="spmallette">Stephen Mallette</assignee>
                                    <reporter username="brianok">Brian O&apos;Keefe</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Oct 2023 20:36:18 +0000</created>
                <updated>Wed, 8 Nov 2023 13:13:14 +0000</updated>
                            <resolved>Wed, 8 Nov 2023 13:13:14 +0000</resolved>
                                    <version>3.6.2</version>
                                    <fixVersion>3.6.6</fixVersion>
                    <fixVersion>3.7.1</fixVersion>
                                    <component>process</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17781853" author="spmallette" created="Wed, 1 Nov 2023 18:07:50 +0000"  >&lt;p&gt;Worth noting that you can disable the added filtering with &lt;tt&gt;checkAdjacentVertices:false&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
gremlin&amp;gt; g.withStrategies(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SubgraphStrategy(checkAdjacentVertices:&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;,vertices: __.has(&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;, P.within(&lt;span class=&quot;code-quote&quot;&gt;&quot;josh&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;lop&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;ripple&quot;&lt;/span&gt;)))).V().out().profile()

==&amp;gt;Traversal Metrics

Step                                                               Count  Traversers       Time (ms)    % Dur

=============================================================================================================

TinkerGraphStep(vertex,[name.within([josh, lop,...                     3           3           0.186    38.43

VertexStep(OUT,vertex)                                                 2           2           0.251    51.66

HasStep([name.within([josh, lop, ripple])])                            2           2           0.048     9.91

                                            &amp;gt;TOTAL                     -           -           0.486        -
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As long as you aren&apos;t concerned about potentially traversing edges that may lead to vertices that might be filtered that setting should be needed.&lt;/p&gt;</comment>
                            <comment id="17781895" author="githubbot" created="Wed, 1 Nov 2023 21:03:21 +0000"  >&lt;p&gt;spmallette opened a new pull request, #2322:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2322&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2322&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-3009&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/TINKERPOP-3009&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Note that TraverserGenerators changed a bit because of the filter patterns that were added, thus the assertion adjustments. Basically, rather than adding and(inV()..., outV()...) for every single edge step it&apos;s done more strategically such that only the direction not already traversed gets filtered. Also avoids some retesting of vertices if they were already handled.&lt;/p&gt;

&lt;p&gt;   Before:&lt;/p&gt;

   &lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
   gremlin&amp;gt; g.withStrategies(SubgraphStrategy.build().
   ......1&amp;gt;            vertices(hasLabel(&lt;span class=&quot;code-quote&quot;&gt;&apos;x&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;y&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;z&apos;&lt;/span&gt;)).create()).
   ......2&amp;gt;   V().out().profile()
   ==&amp;gt;Traversal Metrics
   Step                                                               Count  Traversers       Time (ms)    % Dur
   =============================================================================================================
   TinkerGraphStep(vertex,[~label.within([x, y, z])])                                             0.160    58.50
   VertexStep(OUT,edge)                                                                           0.017     6.53
   AndStep([[EdgeVertexStep(IN), HasStep([~label.w...                                             0.017     6.19
     EdgeVertexStep(IN)                                                                           0.000
     HasStep([~label.within([x, y, z])])                                                          0.000
     EdgeVertexStep(OUT)                                                                          0.000
     HasStep([~label.within([x, y, z])])                                                          0.000
   EdgeVertexStep(IN)                                                                             0.064    23.59
   HasStep([~label.within([x, y, z])]) 
   &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;   and after:&lt;/p&gt;

   &lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
   gremlin&amp;gt; g.withStrategies(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SubgraphStrategy(vertices: __.has(&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;, P.within(&lt;span class=&quot;code-quote&quot;&gt;&quot;josh&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;lop&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;ripple&quot;&lt;/span&gt;)))).V().out().profile()
   
   ==&amp;gt;Traversal Metrics
   
   Step                                                               Count  Traversers       Time (ms)    % Dur
   
   =============================================================================================================
   
   TinkerGraphStep(vertex,[name.within([josh, lop,...                     3           3           8.231    95.09
   
   VertexStep(OUT,vertex)                                                 2           2           0.337     3.90
   
   HasStep([name.within([josh, lop, ripple])])                            2           2           0.087     1.01
   
                                               &amp;gt;TOTAL                     -           -           8.656        -
   
   &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

</comment>
                            <comment id="17781896" author="githubbot" created="Wed, 1 Nov 2023 21:15:55 +0000"  >&lt;p&gt;codecov-commenter commented on PR #2322:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2322#issuecomment-1789698764&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2322#issuecomment-1789698764&lt;/a&gt;&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;Codecov&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://app.codecov.io/gh/apache/tinkerpop/pull/2322?src=pr&amp;amp;el=h1&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=apache&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.codecov.io/gh/apache/tinkerpop/pull/2322?src=pr&amp;amp;el=h1&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=apache&lt;/a&gt;) Report&lt;br/&gt;
   &amp;gt; Merging &lt;a href=&quot;#2322&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;2322&lt;/a&gt;(&lt;a href=&quot;https://app.codecov.io/gh/apache/tinkerpop/pull/2322?src=pr&amp;amp;el=desc&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=apache&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.codecov.io/gh/apache/tinkerpop/pull/2322?src=pr&amp;amp;el=desc&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=apache&lt;/a&gt;) (0b69291) into &lt;span class=&quot;error&quot;&gt;&amp;#91;3.6-dev&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://app.codecov.io/gh/apache/tinkerpop/commit/3f1f28df102b151bc62cadd83c3cee8b154236df?el=desc&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=apache&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.codecov.io/gh/apache/tinkerpop/commit/3f1f28df102b151bc62cadd83c3cee8b154236df?el=desc&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=apache&lt;/a&gt;) (3f1f28d) will *&lt;b&gt;decrease&lt;/b&gt;* coverage by `3.97%`.&lt;br/&gt;
   &amp;gt; The diff coverage is `n/a`.&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;   ```diff&lt;br/&gt;
   @@              Coverage Diff              @@&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;
	&lt;ol&gt;
		&lt;li&gt;3.6-dev    #2322      +/-   ##&lt;br/&gt;
   =============================================&lt;/li&gt;
	&lt;/ol&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Coverage      75.15%   71.18%   -3.97%&lt;br/&gt;
   =============================================&lt;br/&gt;
     Files           1056       25    -1031     &lt;br/&gt;
     Lines          63371     3766   -59605     &lt;br/&gt;
     Branches        6924        0    -6924     &lt;br/&gt;
   =============================================&lt;/li&gt;
	&lt;li&gt;Hits           47628     2681   -44947&lt;br/&gt;
   + Misses         13179      898   -12281     &lt;br/&gt;
   + Partials        2564      187    -2377     &lt;br/&gt;
   ```&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;   &lt;span class=&quot;error&quot;&gt;&amp;#91;see 1031 files with indirect coverage changes&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://app.codecov.io/gh/apache/tinkerpop/pull/2322/indirect-changes?src=pr&amp;amp;el=tree-more&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=apache&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://app.codecov.io/gh/apache/tinkerpop/pull/2322/indirect-changes?src=pr&amp;amp;el=tree-more&amp;amp;utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=apache&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;   :mega: We&#8217;re building smart automated test selection to slash your CI/CD build times. &lt;span class=&quot;error&quot;&gt;&amp;#91;Learn more&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://about.codecov.io/iterative-testing/?utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=apache&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://about.codecov.io/iterative-testing/?utm_medium=referral&amp;amp;utm_source=github&amp;amp;utm_content=comment&amp;amp;utm_campaign=pr+comments&amp;amp;utm_term=apache&lt;/a&gt;)&lt;/p&gt;


</comment>
                            <comment id="17782792" author="githubbot" created="Fri, 3 Nov 2023 23:47:24 +0000"  >&lt;p&gt;vkagamlyk commented on PR #2322:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2322#issuecomment-1793246917&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2322#issuecomment-1793246917&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   VOTE +1&lt;/p&gt;

</comment>
                            <comment id="17784044" author="githubbot" created="Wed, 8 Nov 2023 13:12:00 +0000"  >&lt;p&gt;spmallette merged PR #2322:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/2322&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/2322&lt;/a&gt;&lt;/p&gt;

</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1l528:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>