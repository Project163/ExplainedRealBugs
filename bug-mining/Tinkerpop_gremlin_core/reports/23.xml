<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:11:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TINKERPOP-1791] GremlinDsl custom step with generic end type produces invalid code in __.java</title>
                <link>https://issues.apache.org/jira/browse/TINKERPOP-1791</link>
                <project id="12316520" key="TINKERPOP">TinkerPop</project>
                    <description>&lt;p&gt;I&apos;m trying the create a custom step to perform a full-text search in an external index and return the matching vertices or edges, like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@GremlinDsl(traversalSource = &lt;span class=&quot;code-quote&quot;&gt;&quot;com.saillabs.mediaminer.mmgraphdsl.MMGraphTraversalSourceDsl&quot;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; MMGraphTraversalDsl&amp;lt;S, E&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; GraphTraversal.Admin&amp;lt;S, E&amp;gt; {

	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; GraphTraversal&amp;lt;S, E&amp;gt; search(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; field, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; query) {
		&lt;span class=&quot;code-comment&quot;&gt;//TODO:
&lt;/span&gt;		&lt;span class=&quot;code-comment&quot;&gt;// Find vertex ids matching the search query in external index
&lt;/span&gt;		
		Set&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; vids = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashSet&amp;lt;&amp;gt;();
		&lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; now add some hardcoded vertex ids
&lt;/span&gt;		vids.add(&lt;span class=&quot;code-quote&quot;&gt;&quot;vertex1&quot;&lt;/span&gt;);
		vids.add(&lt;span class=&quot;code-quote&quot;&gt;&quot;vertex2&quot;&lt;/span&gt;);
		
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; hasId(P.within(vids));
    }
	
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The code seems correct in my point of view, but the generated code in the __.java is not compilable. It produces this error:&lt;/p&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[ERROR] /C:/svn/start/mm/mmserver/server/mvn/mmgraphdsl/target/generated-sources/annotations/com/saillabs/mediaminer/mmgraphdsl/__.java:[41,41] cannot find symbol
[ERROR] symbol:   class E
[ERROR] location: class com.saillabs.mediaminer.mmgraphdsl.__
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The generated code is this:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &amp;lt;S&amp;gt; MMGraphTraversal&amp;lt;S, E&amp;gt; search(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; field, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; query) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; __.&amp;lt;S&amp;gt;start().search(field,query);
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think the correct generated code should look like this:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &amp;lt;S&amp;gt; MMGraphTraversal&amp;lt;S, S&amp;gt; search(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; field, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; query) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; __.&amp;lt;S&amp;gt;start().search(field,query);
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think it&apos;s a bug in the GremlinDsl code generator, however, I may be wrong. Any help is appreciated.&lt;br/&gt;
Thanks, br&lt;br/&gt;
Severin&lt;/p&gt;</description>
                <environment></environment>
        <key id="13104288">TINKERPOP-1791</key>
            <summary>GremlinDsl custom step with generic end type produces invalid code in __.java</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="spmallette">Stephen Mallette</assignee>
                                    <reporter username="severin.stampler">Severin Stampler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 22 Sep 2017 13:26:50 +0000</created>
                <updated>Thu, 26 Oct 2017 10:45:59 +0000</updated>
                            <resolved>Thu, 26 Oct 2017 10:45:59 +0000</resolved>
                                    <version>3.2.5</version>
                                    <fixVersion>3.2.7</fixVersion>
                    <fixVersion>3.3.1</fixVersion>
                                    <component>process</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16211912" author="spmallette" created="Thu, 19 Oct 2017 23:26:48 +0000"  >&lt;p&gt;Took a quick stab at trying to fix this problem but a simple solution didn&apos;t present itself too well. Was hoping for an easy way to override the type parameters with some configuration options provided as annotations on the DSL method itself, but i&apos;m not sure that&apos;s a good way to do it (plus it didn&apos;t quite work the way i wanted).Will need to re-think this a bit as I&apos;m not seeing a fast easy fix.&lt;/p&gt;</comment>
                            <comment id="16212614" author="githubbot" created="Fri, 20 Oct 2017 13:02:01 +0000"  >&lt;p&gt;GitHub user spmallette opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/736&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/736&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-1791&quot; title=&quot;GremlinDsl custom step with generic end type produces invalid code in __.java&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TINKERPOP-1791&quot;&gt;&lt;del&gt;TINKERPOP-1791&lt;/del&gt;&lt;/a&gt; Added GremlinDsl.AnonymousMethod annotation&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-1791&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/TINKERPOP-1791&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Allows the ability to bypass the type inference system and provides for direct specification of the type parameters when generating anonymous methods.&lt;/p&gt;

&lt;p&gt;    Builds with `mvn clean install`&lt;/p&gt;

&lt;p&gt;    VOTE +1&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/apache/tinkerpop&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-1791&quot; title=&quot;GremlinDsl custom step with generic end type produces invalid code in __.java&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TINKERPOP-1791&quot;&gt;&lt;del&gt;TINKERPOP-1791&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/736.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/736.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #736&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit daa442cd7e100a7f48541cf17bc29b17c68cb5a5&lt;br/&gt;
Author: Stephen Mallette &amp;lt;spmva@genoprime.com&amp;gt;&lt;br/&gt;
Date:   2017-10-20T12:58:52Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-1791&quot; title=&quot;GremlinDsl custom step with generic end type produces invalid code in __.java&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TINKERPOP-1791&quot;&gt;&lt;del&gt;TINKERPOP-1791&lt;/del&gt;&lt;/a&gt; Added GremlinDsl.AnonymousMethod annotation&lt;/p&gt;

&lt;p&gt;    Allows the ability to bypass the type inference system and provides for direct specification of the type parameters when generating anonymous methods.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16212618" author="spmallette" created="Fri, 20 Oct 2017 13:04:04 +0000"  >&lt;p&gt;You can now define your method like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @GremlinDsl.AnonymousMethod(returnTypeParameters = {&lt;span class=&quot;code-quote&quot;&gt;&quot;A&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;A&quot;&lt;/span&gt;}, methodTypeParameters = {&lt;span class=&quot;code-quote&quot;&gt;&quot;A&quot;&lt;/span&gt;})
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; GraphTraversal&amp;lt;S, E&amp;gt; search(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; field, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; query) {
        ...
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and it should compile properly as you can explicitly provide the appropriate type parameters rather than rely on the inference system.&lt;/p&gt;</comment>
                            <comment id="16219605" author="githubbot" created="Wed, 25 Oct 2017 21:51:04 +0000"  >&lt;p&gt;Github user dkuppitz commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/736&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/736&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    VOTE: +1&lt;/p&gt;</comment>
                            <comment id="16219764" author="githubbot" created="Thu, 26 Oct 2017 00:01:07 +0000"  >&lt;p&gt;Github user robertdale commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/736&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/736&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    VOTE +1&lt;/p&gt;</comment>
                            <comment id="16220295" author="githubbot" created="Thu, 26 Oct 2017 10:45:50 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/736&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/736&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 3 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3keyn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>