<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:11:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TINKERPOP-1927] Gherkin scenario expects list with duplicates, but receives g:Set</title>
                <link>https://issues.apache.org/jira/browse/TINKERPOP-1927</link>
                <project id="12316520" key="TINKERPOP">TinkerPop</project>
                    <description>&lt;p&gt;The scenario &lt;tt&gt;g_V_storeXaX_byXoutEXcreatedX_countX_out_out_storeXaX_byXinEXcreatedX_weight_sumX&lt;/tt&gt; expects&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
| result |
| d[1].l |
| d[1].l |
| d[0].l |
| d[0].l |
| d[0].l |
| d[2].l |
| d[1.0].d |
| d[1.0].d |
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but we receive this from the server:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{
    &lt;span class=&quot;code-quote&quot;&gt;&quot;@type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;g:Set&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;@value&quot;&lt;/span&gt;: [
        {
            &lt;span class=&quot;code-quote&quot;&gt;&quot;@type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;g:Int64&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;@value&quot;&lt;/span&gt;: 1
        },
        {
            &lt;span class=&quot;code-quote&quot;&gt;&quot;@type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;g:Int64&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;@value&quot;&lt;/span&gt;: 1
        },
        {
            &lt;span class=&quot;code-quote&quot;&gt;&quot;@type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;g:Int64&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;@value&quot;&lt;/span&gt;: 0
        },
        {
            &lt;span class=&quot;code-quote&quot;&gt;&quot;@type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;g:Int64&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;@value&quot;&lt;/span&gt;: 0
        },
        {
            &lt;span class=&quot;code-quote&quot;&gt;&quot;@type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;g:Int64&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;@value&quot;&lt;/span&gt;: 0
        },
        {
            &lt;span class=&quot;code-quote&quot;&gt;&quot;@type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;g:Int64&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;@value&quot;&lt;/span&gt;: 2
        },
        {
            &lt;span class=&quot;code-quote&quot;&gt;&quot;@type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;g:&lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;@value&quot;&lt;/span&gt;: 1
        },
        {
            &lt;span class=&quot;code-quote&quot;&gt;&quot;@type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;g:&lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;@value&quot;&lt;/span&gt;: 1
        }
    ]
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The set returned by the server contains 4 duplicates that shouldn&apos;t be part of the expected result in the scenario.&lt;/p&gt;

&lt;p&gt;Unfortunately, while working on &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-1865&quot; title=&quot;Run Gremlin .NET GLV tests with GraphSON 3.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TINKERPOP-1865&quot;&gt;&lt;del&gt;TINKERPOP-1865&lt;/del&gt;&lt;/a&gt; we noticed that gremlin-python and gremlin-javascript fail when the scenario is fixed like that. So those two GLVs probably need to be fixed to handle &lt;tt&gt;g:Set&lt;/tt&gt; correctly.&lt;/p&gt;

&lt;p&gt;After fixing the scenario, it can be removed from the list of ignored scenarios in Gremlin.Net.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13146540">TINKERPOP-1927</key>
            <summary>Gherkin scenario expects list with duplicates, but receives g:Set</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="spmallette">Stephen Mallette</assignee>
                                    <reporter username="Florian Hockmann">Florian Hockmann</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Mar 2018 13:20:14 +0000</created>
                <updated>Thu, 12 Apr 2018 14:30:42 +0000</updated>
                            <resolved>Thu, 12 Apr 2018 14:30:42 +0000</resolved>
                                    <version>3.3.1</version>
                                    <fixVersion>3.4.0</fixVersion>
                    <fixVersion>3.3.3</fixVersion>
                                    <component>dotnet</component>
                    <component>javascript</component>
                    <component>python</component>
                    <component>test-suite</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16426852" author="spmallette" created="Thu, 5 Apr 2018 12:43:06 +0000"  >&lt;p&gt;The scenario doesn&apos;t really return a &lt;tt&gt;Set&lt;/tt&gt; - it&apos;s actually a &lt;tt&gt;BulkSet&lt;/tt&gt;. &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
gremlin&amp;gt; bs = g.V().store(&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;).
......1&amp;gt;              by(__.outE(&lt;span class=&quot;code-quote&quot;&gt;&quot;created&quot;&lt;/span&gt;).count()).
......2&amp;gt;         out().out().store(&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;).
......3&amp;gt;                       by(__.inE(&lt;span class=&quot;code-quote&quot;&gt;&quot;created&quot;&lt;/span&gt;).values(&lt;span class=&quot;code-quote&quot;&gt;&quot;weight&quot;&lt;/span&gt;).sum()).
......4&amp;gt;         cap(&lt;span class=&quot;code-quote&quot;&gt;&quot;a&quot;&lt;/span&gt;).next()
==&amp;gt;1
==&amp;gt;1
==&amp;gt;0
==&amp;gt;0
==&amp;gt;0
==&amp;gt;2
==&amp;gt;1.0
==&amp;gt;1.0
gremlin&amp;gt; bs.class
==&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.tinkerpop.gremlin.process.traversal.step.util.BulkSet
gremlin&amp;gt; bs.size()
==&amp;gt;8
gremlin&amp;gt; bs.uniqueSize()
==&amp;gt;4
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and therefore it coerces to &lt;tt&gt;g:Set&lt;/tt&gt; when serialized. &lt;tt&gt;BulkSet&lt;/tt&gt; isn&apos;t a type in GraphSON and we don&apos;t have such infrastructure in the GLVs. I don&apos;t think we need to introduce &lt;tt&gt;BulkSet&lt;/tt&gt; either. Perhaps the easiest fix is to coerce &lt;tt&gt;BulkSet&lt;/tt&gt; to &lt;tt&gt;g:List&lt;/tt&gt; since it behaves that way when iterated. I&apos;ll try that approach unless someone has better ideas.&lt;/p&gt;</comment>
                            <comment id="16431033" author="githubbot" created="Mon, 9 Apr 2018 18:28:32 +0000"  >&lt;p&gt;GitHub user spmallette opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/834&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/834&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-1927&quot; title=&quot;Gherkin scenario expects list with duplicates, but receives g:Set&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TINKERPOP-1927&quot;&gt;&lt;del&gt;TINKERPOP-1927&lt;/del&gt;&lt;/a&gt; Coerced BulkSet to g:List in GraphSON 3.0&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-1927&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/TINKERPOP-1927&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Since GLVs don&apos;t have `BulkSet` infrastructure and the need to include it doesn&apos;t seem high the most direct fix here is to coerce to `g:List` as the behavior for `BulkSet` iteration is basically that same as a List.&lt;/p&gt;

&lt;p&gt;    All tests pass with `docker/build.sh -t -i`&lt;/p&gt;

&lt;p&gt;    VOTE +1&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/apache/tinkerpop&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-1927&quot; title=&quot;Gherkin scenario expects list with duplicates, but receives g:Set&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TINKERPOP-1927&quot;&gt;&lt;del&gt;TINKERPOP-1927&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/834.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/834.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #834&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 2d6c28a4781786238866bbc942d7706e16ec628e&lt;br/&gt;
Author: Stephen Mallette &amp;lt;spmva@...&amp;gt;&lt;br/&gt;
Date:   2018-04-05T12:59:56Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-1927&quot; title=&quot;Gherkin scenario expects list with duplicates, but receives g:Set&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TINKERPOP-1927&quot;&gt;&lt;del&gt;TINKERPOP-1927&lt;/del&gt;&lt;/a&gt; Coerced BulkSet to g:List in GraphSON 3.0&lt;/p&gt;

&lt;p&gt;    Since GLVs don&apos;t have BulkSet infrastructure and the need to include it doesn&apos;t seem high the most direct fix here is to coerce to g:List as the behavior for BulkSet iteration is basically that same as a List.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16431880" author="githubbot" created="Tue, 10 Apr 2018 07:54:38 +0000"  >&lt;p&gt;Github user FlorianHockmann commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/834&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/834&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Nice, no ignored scenarios anymore in Gremlin.Net!&lt;/p&gt;

&lt;p&gt;    VOTE +1&lt;/p&gt;</comment>
                            <comment id="16433529" author="githubbot" created="Wed, 11 Apr 2018 07:50:14 +0000"  >&lt;p&gt;Github user jorgebay commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/834&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/834&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Great!&lt;br/&gt;
    VOTE +1&lt;/p&gt;</comment>
                            <comment id="16435681" author="githubbot" created="Thu, 12 Apr 2018 14:30:39 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/834&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/834&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 31 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3rjmf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>