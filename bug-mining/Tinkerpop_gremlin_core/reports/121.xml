<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:12:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TINKERPOP-2817]  &quot;Could not find a type identifier for the class : class java.lang.Byte&quot; occurs when dumping graph to graphson format</title>
                <link>https://issues.apache.org/jira/browse/TINKERPOP-2817</link>
                <project id="12316520" key="TINKERPOP">TinkerPop</project>
                    <description>&lt;p&gt;When I used hadoop-gremlin 3.4.6 to export a graph to HDFS, I encountered an error.&lt;/p&gt;

&lt;p&gt;My gremlin query looks like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
graph = GraphFactory.open(&lt;span class=&quot;code-quote&quot;&gt;&apos;conf/fdb-psave-export.properties&apos;&lt;/span&gt;)
graph.compute(SparkGraphComputer).program(CloneVertexProgram.build().create()).submit().get()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.tinkerpop.shaded.jackson.databind.JsonMappingException: Could not find a type identifier &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the class : &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;java.lang.&lt;span class=&quot;code-object&quot;&gt;Byte&lt;/span&gt;. Make sure the value to serialize has a type identifier registered &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; its class.
        at org.apache.tinkerpop.shaded.jackson.databind.ser.DefaultSerializerProvider._wrapAsIOE(DefaultSerializerProvider.java:509) ~[gremlin-shaded-3.4.6.jar:3.4.6]
        at org.apache.tinkerpop.shaded.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:482) ~[gremlin-shaded-3.4.6.jar:3.4.6]
        at org.apache.tinkerpop.shaded.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:319) ~[gremlin-shaded-3.4.6.jar:3.4.6]
        at org.apache.tinkerpop.shaded.jackson.databind.ObjectMapper._configAndWriteValue(ObjectMapper.java:3906) ~[gremlin-shaded-3.4.6.jar:3.4.6]
        at org.apache.tinkerpop.shaded.jackson.databind.ObjectMapper.writeValue(ObjectMapper.java:3177) ~[gremlin-shaded-3.4.6.jar:3.4.6]
        at org.apache.tinkerpop.gremlin.structure.io.graphson.GraphSONWriter.writeVertex(GraphSONWriter.java:82) ~[gremlin-core-3.4.6.jar:3.4.6]
        at org.apache.tinkerpop.gremlin.hadoop.structure.io.graphson.GraphSONRecordWriter.write(GraphSONRecordWriter.java:72) ~[hadoop-gremlin-3.4.6.jar:3.4.6]
        at org.apache.tinkerpop.gremlin.hadoop.structure.io.graphson.GraphSONRecordWriter.write(GraphSONRecordWriter.java:42) ~[hadoop-gremlin-3.4.6.jar:3.4.6]
        at org.apache.spark.internal.io.HadoopMapReduceWriteConfigUtil.write(SparkHadoopWriter.scala:356) ~[spark-core_2.11-2.4.0.jar:2.4.0]
        at org.apache.spark.internal.io.SparkHadoopWriter$$anonfun$4.apply(SparkHadoopWriter.scala:130) ~[spark-core_2.11-2.4.0.jar:2.4.0]
        at org.apache.spark.internal.io.SparkHadoopWriter$$anonfun$4.apply(SparkHadoopWriter.scala:127) ~[spark-core_2.11-2.4.0.jar:2.4.0]
        at org.apache.spark.util.Utils$.tryWithSafeFinallyAndFailureCallbacks(Utils.scala:1394) [spark-core_2.11-2.4.0.jar:2.4.0]
        at org.apache.spark.internal.io.SparkHadoopWriter$.org$apache$spark$internal$io$SparkHadoopWriter$$executeTask(SparkHadoopWriter.scala:139) [spark-core_2.11-2.4.0.jar:2.4.0]
        at org.apache.spark.internal.io.SparkHadoopWriter$$anonfun$3.apply(SparkHadoopWriter.scala:83) [spark-core_2.11-2.4.0.jar:2.4.0]
        at org.apache.spark.internal.io.SparkHadoopWriter$$anonfun$3.apply(SparkHadoopWriter.scala:78) [spark-core_2.11-2.4.0.jar:2.4.0]
        at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:90) [spark-core_2.11-2.4.0.jar:2.4.0]
        at org.apache.spark.scheduler.Task.run(Task.scala:121) [spark-core_2.11-2.4.0.jar:2.4.0]
        at org.apache.spark.executor.Executor$TaskRunner$$anonfun$10.apply(Executor.scala:416) [spark-core_2.11-2.4.0.jar:2.4.0]
        at org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1360) [spark-core_2.11-2.4.0.jar:2.4.0]
        at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:422) [spark-core_2.11-2.4.0.jar:2.4.0]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_202]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_202]
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748) [na:1.8.0_202]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It looks like the default GraphSONRecordWriter/GraphSONRecordReader does not support the serialization/deserialization of java.lang.Byte. But according to &lt;a href=&quot;https://tinkerpop.apache.org/docs/3.4.6/dev/io/#_extended_2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://tinkerpop.apache.org/docs/3.4.6/dev/io/#_extended_2&lt;/a&gt;, adding the custom module GraphSONXModuleV2d0/GraphSONXModuleV3d0 can fix this. The experient with a quick fix proves the fix is working.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13486983">TINKERPOP-2817</key>
            <summary> &quot;Could not find a type identifier for the class : class java.lang.Byte&quot; occurs when dumping graph to graphson format</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="spmallette">Stephen Mallette</assignee>
                                    <reporter username="redriver">Redriver</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 Oct 2022 05:21:17 +0000</created>
                <updated>Wed, 16 Nov 2022 16:47:20 +0000</updated>
                            <resolved>Wed, 16 Nov 2022 16:47:20 +0000</resolved>
                                    <version>3.4.6</version>
                                    <fixVersion>3.7.0</fixVersion>
                    <fixVersion>3.6.2</fixVersion>
                    <fixVersion>3.5.5</fixVersion>
                                    <component>hadoop</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17620045" author="githubbot" created="Wed, 19 Oct 2022 06:59:35 +0000"  >&lt;p&gt;ministat opened a new pull request, #1835:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/1835&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/1835&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Hadoop GraphSONRecordReader and GraphSONRecordWriter does not support &apos;java.lang.Byte&apos; type, which is supported by both GraphSONXModuleV2d0 and GraphSONXModuleV3d0, but both of them are custom modules and excluded by default.&lt;/p&gt;

&lt;p&gt;   This fix adds GraphSONXModuleV2d0 and GraphSONXModuleV3d0 as custom module for GraphSON V2_0 and V3_0 by default to avoid the failure of &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-2817&quot; title=&quot; &amp;quot;Could not find a type identifier for the class : class java.lang.Byte&amp;quot; occurs when dumping graph to graphson format&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TINKERPOP-2817&quot;&gt;&lt;del&gt;TINKERPOP-2817&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

</comment>
                            <comment id="17622877" author="githubbot" created="Sun, 23 Oct 2022 20:31:53 +0000"  >&lt;p&gt;spmallette commented on code in PR #1835:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/1835#discussion_r1002767340&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/1835#discussion_r1002767340&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
hadoop-gremlin/src/main/java/org/apache/tinkerpop/gremlin/hadoop/structure/io/graphson/GraphSONRecordReader.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -56,11 +59,33 @@ public GraphSONRecordReader() {&lt;br/&gt;
     public void initialize(final InputSplit genericSplit, final TaskAttemptContext context) throws IOException {&lt;br/&gt;
         this.lineRecordReader.initialize(genericSplit, context);&lt;br/&gt;
         this.hasEdges = context.getConfiguration().getBoolean(Constants.GREMLIN_HADOOP_GRAPH_READER_HAS_EDGES, true);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;this.graphsonReader = GraphSONReader.build().mapper(&lt;/li&gt;
	&lt;li&gt;GraphSONMapper.build().&lt;/li&gt;
	&lt;li&gt;version(GraphSONVersion.valueOf(context.getConfiguration().get(Constants.GREMLIN_HADOOP_GRAPHSON_VERSION, &quot;V3_0&quot;))).&lt;/li&gt;
	&lt;li&gt;typeInfo(TypeInfo.PARTIAL_TYPES).&lt;/li&gt;
	&lt;li&gt;addRegistries(IoRegistryHelper.createRegistries(ConfUtil.makeApacheConfiguration(context.getConfiguration()))).create()).create();&lt;br/&gt;
+        GraphSONVersion graphSONVersion =&lt;br/&gt;
+                GraphSONVersion.valueOf(context.getConfiguration().get(Constants.GREMLIN_HADOOP_GRAPHSON_VERSION, &quot;V3_0&quot;));&lt;br/&gt;
+        Mapper mapper = null;&lt;br/&gt;
+&lt;br/&gt;
+        if (graphSONVersion == GraphSONVersion.V2_0) {&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Review Comment:&lt;br/&gt;
   might be nice if you make this code a bit more compact - like, create a builder instance with the common things and then just `addCustomModule(...)` in the if-then parts. i can do it after it&apos;s merged if you don&apos;t have time. &lt;/p&gt;


</comment>
                            <comment id="17622879" author="githubbot" created="Sun, 23 Oct 2022 20:35:54 +0000"  >&lt;p&gt;spmallette commented on code in PR #1835:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/1835#discussion_r1002767954&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/1835#discussion_r1002767954&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
hadoop-gremlin/src/test/java/org/apache/tinkerpop/gremlin/hadoop/structure/io/graphson/GraphSONXModuleV3d0RecordReaderWriterTest.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -0,0 +1,121 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ *  Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ *  or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ *  distributed with this work for additional information&lt;br/&gt;
+ *  regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ *  to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ *  &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ *  with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *  &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ *  Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ *  software distributed under the License is distributed on an&lt;br/&gt;
+ *  &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ *  KIND, either express or implied.  See the License for the&lt;br/&gt;
+ *  specific language governing permissions and limitations&lt;br/&gt;
+ *  under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.tinkerpop.gremlin.hadoop.structure.io.graphson;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.hadoop.conf.Configuration;&lt;br/&gt;
+import org.apache.hadoop.io.NullWritable;&lt;br/&gt;
+import org.apache.hadoop.mapreduce.*;&lt;br/&gt;
+import org.apache.hadoop.mapreduce.lib.input.FileSplit;&lt;br/&gt;
+import org.apache.hadoop.mapreduce.task.TaskAttemptContextImpl;&lt;br/&gt;
+import org.apache.hadoop.util.ReflectionUtils;&lt;br/&gt;
+import org.apache.tinkerpop.gremlin.hadoop.structure.io.RecordReaderWriterTest;&lt;br/&gt;
+import org.apache.tinkerpop.gremlin.hadoop.structure.io.VertexWritable;&lt;br/&gt;
+import org.apache.tinkerpop.gremlin.structure.Direction;&lt;br/&gt;
+import org.apache.tinkerpop.gremlin.structure.Vertex;&lt;br/&gt;
+import org.apache.tinkerpop.gremlin.util.iterator.IteratorUtils;&lt;br/&gt;
+import org.slf4j.Logger;&lt;br/&gt;
+import org.slf4j.LoggerFactory;&lt;br/&gt;
+&lt;br/&gt;
+import java.io.File;&lt;br/&gt;
+import java.net.URL;&lt;br/&gt;
+import java.util.List;&lt;br/&gt;
+import java.util.Optional;&lt;br/&gt;
+import java.util.UUID;&lt;br/&gt;
+&lt;br/&gt;
+import static org.junit.Assert.assertEquals;&lt;br/&gt;
+import static org.junit.Assert.assertTrue;&lt;br/&gt;
+&lt;br/&gt;
+public class GraphSONXModuleV3d0RecordReaderWriterTest extends RecordReaderWriterTest {&lt;/p&gt;

&lt;p&gt;Review Comment:&lt;br/&gt;
   nice that got some testing in place for this. rather than copy/paste this class would it be possible to just make `RecordReaderWriterTest ` more flexible so as to validate the `Byte`? isn&apos;t that the only difference included in this test?&lt;/p&gt;


</comment>
                            <comment id="17622963" author="githubbot" created="Mon, 24 Oct 2022 06:01:46 +0000"  >&lt;p&gt;ministat commented on code in PR #1835:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/1835#discussion_r1002905316&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/1835#discussion_r1002905316&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
hadoop-gremlin/src/test/java/org/apache/tinkerpop/gremlin/hadoop/structure/io/graphson/GraphSONXModuleV3d0RecordReaderWriterTest.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -0,0 +1,121 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ *  Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ *  or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ *  distributed with this work for additional information&lt;br/&gt;
+ *  regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ *  to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ *  &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ *  with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *  &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ *  Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ *  software distributed under the License is distributed on an&lt;br/&gt;
+ *  &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ *  KIND, either express or implied.  See the License for the&lt;br/&gt;
+ *  specific language governing permissions and limitations&lt;br/&gt;
+ *  under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.tinkerpop.gremlin.hadoop.structure.io.graphson;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.hadoop.conf.Configuration;&lt;br/&gt;
+import org.apache.hadoop.io.NullWritable;&lt;br/&gt;
+import org.apache.hadoop.mapreduce.*;&lt;br/&gt;
+import org.apache.hadoop.mapreduce.lib.input.FileSplit;&lt;br/&gt;
+import org.apache.hadoop.mapreduce.task.TaskAttemptContextImpl;&lt;br/&gt;
+import org.apache.hadoop.util.ReflectionUtils;&lt;br/&gt;
+import org.apache.tinkerpop.gremlin.hadoop.structure.io.RecordReaderWriterTest;&lt;br/&gt;
+import org.apache.tinkerpop.gremlin.hadoop.structure.io.VertexWritable;&lt;br/&gt;
+import org.apache.tinkerpop.gremlin.structure.Direction;&lt;br/&gt;
+import org.apache.tinkerpop.gremlin.structure.Vertex;&lt;br/&gt;
+import org.apache.tinkerpop.gremlin.util.iterator.IteratorUtils;&lt;br/&gt;
+import org.slf4j.Logger;&lt;br/&gt;
+import org.slf4j.LoggerFactory;&lt;br/&gt;
+&lt;br/&gt;
+import java.io.File;&lt;br/&gt;
+import java.net.URL;&lt;br/&gt;
+import java.util.List;&lt;br/&gt;
+import java.util.Optional;&lt;br/&gt;
+import java.util.UUID;&lt;br/&gt;
+&lt;br/&gt;
+import static org.junit.Assert.assertEquals;&lt;br/&gt;
+import static org.junit.Assert.assertTrue;&lt;br/&gt;
+&lt;br/&gt;
+public class GraphSONXModuleV3d0RecordReaderWriterTest extends RecordReaderWriterTest {&lt;/p&gt;

&lt;p&gt;Review Comment:&lt;br/&gt;
   RecordReaderWriterTest expects to use grateful-daed-xxx.json because the validateFileSplits wants to check the vertex count, inEdge count, and outEdge count. I can add another grateful-daed-byteid-xxx.json, then it will reuse RecordReaderWriterTest with a tiny change.&lt;/p&gt;


</comment>
                            <comment id="17622966" author="githubbot" created="Mon, 24 Oct 2022 06:13:51 +0000"  >&lt;p&gt;ministat commented on code in PR #1835:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/1835#discussion_r1002910849&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/1835#discussion_r1002910849&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
hadoop-gremlin/src/main/java/org/apache/tinkerpop/gremlin/hadoop/structure/io/graphson/GraphSONRecordReader.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -56,11 +59,33 @@ public GraphSONRecordReader() {&lt;br/&gt;
     public void initialize(final InputSplit genericSplit, final TaskAttemptContext context) throws IOException {&lt;br/&gt;
         this.lineRecordReader.initialize(genericSplit, context);&lt;br/&gt;
         this.hasEdges = context.getConfiguration().getBoolean(Constants.GREMLIN_HADOOP_GRAPH_READER_HAS_EDGES, true);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;this.graphsonReader = GraphSONReader.build().mapper(&lt;/li&gt;
	&lt;li&gt;GraphSONMapper.build().&lt;/li&gt;
	&lt;li&gt;version(GraphSONVersion.valueOf(context.getConfiguration().get(Constants.GREMLIN_HADOOP_GRAPHSON_VERSION, &quot;V3_0&quot;))).&lt;/li&gt;
	&lt;li&gt;typeInfo(TypeInfo.PARTIAL_TYPES).&lt;/li&gt;
	&lt;li&gt;addRegistries(IoRegistryHelper.createRegistries(ConfUtil.makeApacheConfiguration(context.getConfiguration()))).create()).create();&lt;br/&gt;
+        GraphSONVersion graphSONVersion =&lt;br/&gt;
+                GraphSONVersion.valueOf(context.getConfiguration().get(Constants.GREMLIN_HADOOP_GRAPHSON_VERSION, &quot;V3_0&quot;));&lt;br/&gt;
+        Mapper mapper = null;&lt;br/&gt;
+&lt;br/&gt;
+        if (graphSONVersion == GraphSONVersion.V2_0) {&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Review Comment:&lt;br/&gt;
   I can do that.&lt;/p&gt;


</comment>
                            <comment id="17622970" author="githubbot" created="Mon, 24 Oct 2022 06:18:07 +0000"  >&lt;p&gt;ministat commented on code in PR #1835:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/1835#discussion_r1002905316&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/1835#discussion_r1002905316&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
hadoop-gremlin/src/test/java/org/apache/tinkerpop/gremlin/hadoop/structure/io/graphson/GraphSONXModuleV3d0RecordReaderWriterTest.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -0,0 +1,121 @@&lt;br/&gt;
+/*&lt;br/&gt;
+ *  Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ *  or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
+ *  distributed with this work for additional information&lt;br/&gt;
+ *  regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
+ *  to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ *  &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ *  with the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *  &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ *  Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ *  software distributed under the License is distributed on an&lt;br/&gt;
+ *  &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ *  KIND, either express or implied.  See the License for the&lt;br/&gt;
+ *  specific language governing permissions and limitations&lt;br/&gt;
+ *  under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+&lt;br/&gt;
+package org.apache.tinkerpop.gremlin.hadoop.structure.io.graphson;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.hadoop.conf.Configuration;&lt;br/&gt;
+import org.apache.hadoop.io.NullWritable;&lt;br/&gt;
+import org.apache.hadoop.mapreduce.*;&lt;br/&gt;
+import org.apache.hadoop.mapreduce.lib.input.FileSplit;&lt;br/&gt;
+import org.apache.hadoop.mapreduce.task.TaskAttemptContextImpl;&lt;br/&gt;
+import org.apache.hadoop.util.ReflectionUtils;&lt;br/&gt;
+import org.apache.tinkerpop.gremlin.hadoop.structure.io.RecordReaderWriterTest;&lt;br/&gt;
+import org.apache.tinkerpop.gremlin.hadoop.structure.io.VertexWritable;&lt;br/&gt;
+import org.apache.tinkerpop.gremlin.structure.Direction;&lt;br/&gt;
+import org.apache.tinkerpop.gremlin.structure.Vertex;&lt;br/&gt;
+import org.apache.tinkerpop.gremlin.util.iterator.IteratorUtils;&lt;br/&gt;
+import org.slf4j.Logger;&lt;br/&gt;
+import org.slf4j.LoggerFactory;&lt;br/&gt;
+&lt;br/&gt;
+import java.io.File;&lt;br/&gt;
+import java.net.URL;&lt;br/&gt;
+import java.util.List;&lt;br/&gt;
+import java.util.Optional;&lt;br/&gt;
+import java.util.UUID;&lt;br/&gt;
+&lt;br/&gt;
+import static org.junit.Assert.assertEquals;&lt;br/&gt;
+import static org.junit.Assert.assertTrue;&lt;br/&gt;
+&lt;br/&gt;
+public class GraphSONXModuleV3d0RecordReaderWriterTest extends RecordReaderWriterTest {&lt;/p&gt;

&lt;p&gt;Review Comment:&lt;br/&gt;
   RecordReaderWriterTest is binding with grateful-dead-xxx.json because the validateFileSplits wants to check the vertex count, inEdge count, and outEdge count. I used tinkerpop-classic-xxx.json instead of grateful-dead-xxx.json, because I just replaced the &lt;br/&gt;
    vertex id type from Int32 to Byte since tinkerpop-classic-xxx.json only has 6 vertice. I cannot change any type in grateful-dead-xxx.json to Byte.&lt;/p&gt;


</comment>
                            <comment id="17623029" author="githubbot" created="Mon, 24 Oct 2022 08:06:41 +0000"  >&lt;p&gt;ministat commented on code in PR #1835:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/1835#discussion_r1002997320&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/1835#discussion_r1002997320&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
hadoop-gremlin/src/main/java/org/apache/tinkerpop/gremlin/hadoop/structure/io/graphson/GraphSONRecordReader.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -56,11 +59,33 @@ public GraphSONRecordReader() {&lt;br/&gt;
     public void initialize(final InputSplit genericSplit, final TaskAttemptContext context) throws IOException {&lt;br/&gt;
         this.lineRecordReader.initialize(genericSplit, context);&lt;br/&gt;
         this.hasEdges = context.getConfiguration().getBoolean(Constants.GREMLIN_HADOOP_GRAPH_READER_HAS_EDGES, true);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;this.graphsonReader = GraphSONReader.build().mapper(&lt;/li&gt;
	&lt;li&gt;GraphSONMapper.build().&lt;/li&gt;
	&lt;li&gt;version(GraphSONVersion.valueOf(context.getConfiguration().get(Constants.GREMLIN_HADOOP_GRAPHSON_VERSION, &quot;V3_0&quot;))).&lt;/li&gt;
	&lt;li&gt;typeInfo(TypeInfo.PARTIAL_TYPES).&lt;/li&gt;
	&lt;li&gt;addRegistries(IoRegistryHelper.createRegistries(ConfUtil.makeApacheConfiguration(context.getConfiguration()))).create()).create();&lt;br/&gt;
+        GraphSONVersion graphSONVersion =&lt;br/&gt;
+                GraphSONVersion.valueOf(context.getConfiguration().get(Constants.GREMLIN_HADOOP_GRAPHSON_VERSION, &quot;V3_0&quot;));&lt;br/&gt;
+        Mapper mapper = null;&lt;br/&gt;
+&lt;br/&gt;
+        if (graphSONVersion == GraphSONVersion.V2_0) {&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Review Comment:&lt;br/&gt;
   DONE.&lt;/p&gt;


</comment>
                            <comment id="17623125" author="githubbot" created="Mon, 24 Oct 2022 11:36:32 +0000"  >&lt;p&gt;spmallette commented on code in PR #1835:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/1835#discussion_r1003210814&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/1835#discussion_r1003210814&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
hadoop-gremlin/src/main/java/org/apache/tinkerpop/gremlin/hadoop/structure/io/graphson/GraphSONRecordWriter.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -58,11 +61,15 @@ public final class GraphSONRecordWriter extends RecordWriter&amp;lt;NullWritable, Verte&lt;br/&gt;
     public GraphSONRecordWriter(final DataOutputStream outputStream, final Configuration configuration) {&lt;br/&gt;
         this.outputStream = outputStream;&lt;br/&gt;
         this.hasEdges = configuration.getBoolean(Constants.GREMLIN_HADOOP_GRAPH_WRITER_HAS_EDGES, true);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;this.graphsonWriter = GraphSONWriter.build().mapper(&lt;/li&gt;
	&lt;li&gt;GraphSONMapper.build().&lt;/li&gt;
	&lt;li&gt;version(GraphSONVersion.valueOf(configuration.get(Constants.GREMLIN_HADOOP_GRAPHSON_VERSION, &quot;V3_0&quot;))).&lt;/li&gt;
	&lt;li&gt;typeInfo(TypeInfo.PARTIAL_TYPES).&lt;/li&gt;
	&lt;li&gt;addRegistries(IoRegistryHelper.createRegistries(ConfUtil.makeApacheConfiguration(configuration))).create()).create();&lt;br/&gt;
+        GraphSONVersion graphSONVersion =&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Review Comment:&lt;br/&gt;
   nit: `final` local variables&lt;/p&gt;


</comment>
                            <comment id="17623126" author="githubbot" created="Mon, 24 Oct 2022 11:37:23 +0000"  >&lt;p&gt;spmallette commented on PR #1835:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/1835#issuecomment-1288905211&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/1835#issuecomment-1288905211&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   Aside from a nit and CHANGELOG entry this looks good - the committer can handle both on merge if necessary: VOTE +1&lt;/p&gt;

</comment>
                            <comment id="17623507" author="githubbot" created="Tue, 25 Oct 2022 02:03:15 +0000"  >&lt;p&gt;ministat commented on code in PR #1835:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/1835#discussion_r1003924906&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/1835#discussion_r1003924906&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;##########&lt;br/&gt;
hadoop-gremlin/src/main/java/org/apache/tinkerpop/gremlin/hadoop/structure/io/graphson/GraphSONRecordWriter.java:&lt;br/&gt;
##########&lt;br/&gt;
@@ -58,11 +61,15 @@ public final class GraphSONRecordWriter extends RecordWriter&amp;lt;NullWritable, Verte&lt;br/&gt;
     public GraphSONRecordWriter(final DataOutputStream outputStream, final Configuration configuration) {&lt;br/&gt;
         this.outputStream = outputStream;&lt;br/&gt;
         this.hasEdges = configuration.getBoolean(Constants.GREMLIN_HADOOP_GRAPH_WRITER_HAS_EDGES, true);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;this.graphsonWriter = GraphSONWriter.build().mapper(&lt;/li&gt;
	&lt;li&gt;GraphSONMapper.build().&lt;/li&gt;
	&lt;li&gt;version(GraphSONVersion.valueOf(configuration.get(Constants.GREMLIN_HADOOP_GRAPHSON_VERSION, &quot;V3_0&quot;))).&lt;/li&gt;
	&lt;li&gt;typeInfo(TypeInfo.PARTIAL_TYPES).&lt;/li&gt;
	&lt;li&gt;addRegistries(IoRegistryHelper.createRegistries(ConfUtil.makeApacheConfiguration(configuration))).create()).create();&lt;br/&gt;
+        GraphSONVersion graphSONVersion =&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Review Comment:&lt;br/&gt;
   ack&lt;/p&gt;


</comment>
                            <comment id="17624939" author="githubbot" created="Thu, 27 Oct 2022 07:59:50 +0000"  >&lt;p&gt;ministat commented on PR #1835:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/1835#issuecomment-1293140433&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/1835#issuecomment-1293140433&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   @spmallette Could you please help approve running workflows?&lt;/p&gt;

</comment>
                            <comment id="17634924" author="githubbot" created="Wed, 16 Nov 2022 16:46:40 +0000"  >&lt;p&gt;spmallette commented on PR #1835:&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/1835#issuecomment-1317328761&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/1835#issuecomment-1317328761&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   sorry for the delay here. thanks for your help on this @ministat  - merged with: f73b3f84d6d32e8c1ee8b3fc29749bb89cab2dd9 and included e4775a699e6c2140238add91036b2e6d39da89cb&lt;/p&gt;

</comment>
                            <comment id="17634925" author="githubbot" created="Wed, 16 Nov 2022 16:46:41 +0000"  >&lt;p&gt;spmallette closed pull request #1835: &lt;a href=&quot;https://issues.apache.org/jira/browse/TINKERPOP-2817&quot; title=&quot; &amp;quot;Could not find a type identifier for the class : class java.lang.Byte&amp;quot; occurs when dumping graph to graphson format&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TINKERPOP-2817&quot;&gt;&lt;del&gt;TINKERPOP-2817&lt;/del&gt;&lt;/a&gt; Support java.lang.Byte in hadoop GraphSONRecordWriter/GraphSONRecordReader&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/tinkerpop/pull/1835&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tinkerpop/pull/1835&lt;/a&gt;&lt;/p&gt;

</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>Java</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 51 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z19hfs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>