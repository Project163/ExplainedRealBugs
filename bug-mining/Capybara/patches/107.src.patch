diff --git a/lib/capybara/rspec/matchers/base.rb b/lib/capybara/rspec/matchers/base.rb
index 4f28996a..6a52a08f 100644
--- a/lib/capybara/rspec/matchers/base.rb
+++ b/lib/capybara/rspec/matchers/base.rb
@@ -47,15 +47,19 @@ module Capybara
       end
 
       class WrappedElementMatcher < Base
-        def matches?(actual)
-          element_matches?(wrap(actual))
+        def matches?(actual, &filter_block)
+          with_filter(filter_block) do
+            element_matches?(wrap(actual))
+          end
         rescue Capybara::ExpectationNotMet => e
           @failure_message = e.message
           false
         end
 
-        def does_not_match?(actual)
-          element_does_not_match?(wrap(actual))
+        def does_not_match?(actual, &filter_block)
+          with_filter(filter_block) do
+            element_does_not_match?(wrap(actual))
+          end
         rescue Capybara::ExpectationNotMet => e
           @failure_message_when_negated = e.message
           false
@@ -71,6 +75,14 @@ module Capybara
             Capybara.string(actual.to_s)
           end
         end
+
+        def with_filter(filter_block)
+          previous_filter_block = @filter_block
+          @filter_block = filter_block if filter_block
+          yield
+        ensure
+          @filter_block = previous_filter_block
+        end
       end
 
       class CountableWrappedElementMatcher < WrappedElementMatcher
@@ -86,12 +98,12 @@ module Capybara
           @matcher = matcher
         end
 
-        def matches?(actual)
-          @matcher.does_not_match?(actual)
+        def matches?(actual, &filter_block)
+          @matcher.does_not_match?(actual, &filter_block)
         end
 
-        def does_not_match?(actual)
-          @matcher.matches?(actual)
+        def does_not_match?(actual, &filter_block)
+          @matcher.matches?(actual, &filter_block)
         end
 
         def description
diff --git a/spec/rspec_matchers_spec.rb b/spec/rspec_matchers_spec.rb
index 4166d2e7..0d92e7c0 100644
--- a/spec/rspec_matchers_spec.rb
+++ b/spec/rspec_matchers_spec.rb
@@ -56,6 +56,29 @@ RSpec.describe 'Capybara RSpec Matchers', type: :feature do
     end
   end
 
+  context 'with a filter block' do
+    it 'applies the filter' do
+      visit('/with_html')
+      expect(page).to have_selector(:css, 'input#test_field') { |input| input.value == 'monkey' }
+      expect(page).to have_selector(:css, 'input#test_field') do |input|
+        input.value == 'monkey'
+      end
+      expect(page).to have_no_selector(:css, 'input#test_field') { |input| input.value == 'not a monkey' }
+      expect(page).to have_no_selector(:css, 'input#test_field') do |input|
+        input.value == 'not a monkey'
+      end
+
+      expect(page).not_to have_selector(:css, 'input#test_field') { |input| input.value == 'not a monkey' }
+      expect(page).not_to have_selector(:css, 'input#test_field') do |input|
+        input.value == 'not a monkey'
+      end
+      expect(page).not_to have_no_selector(:css, 'input#test_field') { |input| input.value == 'monkey' }
+      expect(page).not_to have_no_selector(:css, 'input#test_field') do |input|
+        input.value == 'monkey'
+      end
+    end
+  end
+
   def error_msg_for(&block)
     expect(&block).to(raise_error { |e| return e.message })
   end
