diff --git a/lib/capybara/registrations/servers.rb b/lib/capybara/registrations/servers.rb
index 2ec56c1c..91e0e7b7 100644
--- a/lib/capybara/registrations/servers.rb
+++ b/lib/capybara/registrations/servers.rb
@@ -27,19 +27,20 @@ Capybara.register_server :puma do |app, port, host, **options| # rubocop:disable
     require 'rack/handler/puma'
   rescue LoadError
     raise LoadError, 'Capybara is unable to load `puma` for its server, please add `puma` to your project or specify a different server via something like `Capybara.server = :webrick`.'
-  else
-    unless Rack::Handler::Puma.respond_to?(:config)
-      raise LoadError, 'Capybara requires `puma` version 3.8.0 or higher, please upgrade `puma` or register and specify your own server block'
-    end
+  end
+  puma_rack_handler = defined?(Rackup::Handler::Puma) ? Rackup::Handler::Puma : Rack::Handler::Puma
+
+  unless puma_rack_handler.respond_to?(:config)
+    raise LoadError, 'Capybara requires `puma` version 3.8.0 or higher, please upgrade `puma` or register and specify your own server block'
   end
 
   # If we just run the Puma Rack handler it installs signal handlers which prevent us from being able to interrupt tests.
   # Therefore construct and run the Server instance ourselves.
-  # Rack::Handler::Puma.run(app, { Host: host, Port: port, Threads: "0:4", workers: 0, daemon: false }.merge(options))
+  # puma_rack_handler.run(app, { Host: host, Port: port, Threads: "0:4", workers: 0, daemon: false }.merge(options))
   default_options = { Host: host, Port: port, Threads: '0:4', workers: 0, daemon: false }
   options = default_options.merge(options)
 
-  conf = Rack::Handler::Puma.config(app, options)
+  conf = puma_rack_handler.config(app, options)
   conf.clamp
 
   puma_ver = Gem::Version.new(Puma::Const::PUMA_VERSION)
diff --git a/spec/server_spec.rb b/spec/server_spec.rb
index c15c392d..c9e217ae 100644
--- a/spec/server_spec.rb
+++ b/spec/server_spec.rb
@@ -118,6 +118,18 @@ RSpec.describe Capybara::Server do
     Capybara.server = :default
   end
 
+  it 'should not emit any warnings when booting puma' do
+    Capybara.server = :puma
+    app_proc = proc { |_env| [200, {}, ['Hello Puma!']] }
+    require 'puma'
+
+    expect {
+      described_class.new(app_proc).boot
+    }.not_to output.to_stderr
+  ensure
+    Capybara.server = :default
+  end
+
   it 'should support SSL' do
     key = File.join(Dir.pwd, 'spec', 'fixtures', 'key.pem')
     cert = File.join(Dir.pwd, 'spec', 'fixtures', 'certificate.pem')
