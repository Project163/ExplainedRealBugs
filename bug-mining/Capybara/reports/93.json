{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/1611","repository_url":"https://api.github.com/repos/teamcapybara/capybara","labels_url":"https://api.github.com/repos/teamcapybara/capybara/issues/1611/labels{/name}","comments_url":"https://api.github.com/repos/teamcapybara/capybara/issues/1611/comments","events_url":"https://api.github.com/repos/teamcapybara/capybara/issues/1611/events","html_url":"https://github.com/teamcapybara/capybara/issues/1611","id":118263075,"node_id":"MDU6SXNzdWUxMTgyNjMwNzU=","number":1611,"title":"rack_test driver returns unescaped current url which may cause issues with have_current_path","user":{"login":"lukerollans","id":4101096,"node_id":"MDQ6VXNlcjQxMDEwOTY=","avatar_url":"https://avatars.githubusercontent.com/u/4101096?v=4","gravatar_id":"","url":"https://api.github.com/users/lukerollans","html_url":"https://github.com/lukerollans","followers_url":"https://api.github.com/users/lukerollans/followers","following_url":"https://api.github.com/users/lukerollans/following{/other_user}","gists_url":"https://api.github.com/users/lukerollans/gists{/gist_id}","starred_url":"https://api.github.com/users/lukerollans/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukerollans/subscriptions","organizations_url":"https://api.github.com/users/lukerollans/orgs","repos_url":"https://api.github.com/users/lukerollans/repos","events_url":"https://api.github.com/users/lukerollans/events{/privacy}","received_events_url":"https://api.github.com/users/lukerollans/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2015-11-22T13:16:31Z","updated_at":"2019-08-17T04:14:15Z","closed_at":"2016-01-17T23:16:50Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I intend to open a PR to address this issue, just don't have the time right this minute :)\n\nWhen using `have_current_path` to match the request path and query string, it does not work with non alpha numeric characters, most importantly for checkbox arrays\n\nIn my case, when searching \"Location\" objects by an array of categories passed in via a checkbox array\n\n``` ruby\nexpect(page).to have_current_path search_locations_path(categories: [\"awesome-things\"])\n```\n\nproduces this\n\n```\n  1) Location searching allows the user to select from a list of categories\n     Failure/Error: expect(page).to have_current_path search_locations_path(categories: [\"awesome-things\"])\n       expected \"/locations/search?categories[]=awesome-things\" to equal \"/locations/search?categories%5B%5D=awesome-things\"\n```\n\nTo address this bug, I imagine the expected string should be uri encoded.\n\nThoughts?\n","closed_by":{"login":"twalpole","id":16556,"node_id":"MDQ6VXNlcjE2NTU2","avatar_url":"https://avatars.githubusercontent.com/u/16556?v=4","gravatar_id":"","url":"https://api.github.com/users/twalpole","html_url":"https://github.com/twalpole","followers_url":"https://api.github.com/users/twalpole/followers","following_url":"https://api.github.com/users/twalpole/following{/other_user}","gists_url":"https://api.github.com/users/twalpole/gists{/gist_id}","starred_url":"https://api.github.com/users/twalpole/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/twalpole/subscriptions","organizations_url":"https://api.github.com/users/twalpole/orgs","repos_url":"https://api.github.com/users/twalpole/repos","events_url":"https://api.github.com/users/twalpole/events{/privacy}","received_events_url":"https://api.github.com/users/twalpole/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/1611/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/teamcapybara/capybara/issues/1611/timeline","performed_via_github_app":null,"state_reason":"completed"}