{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/1237","repository_url":"https://api.github.com/repos/teamcapybara/capybara","labels_url":"https://api.github.com/repos/teamcapybara/capybara/issues/1237/labels{/name}","comments_url":"https://api.github.com/repos/teamcapybara/capybara/issues/1237/comments","events_url":"https://api.github.com/repos/teamcapybara/capybara/issues/1237/events","html_url":"https://github.com/teamcapybara/capybara/issues/1237","id":26924694,"node_id":"MDU6SXNzdWUyNjkyNDY5NA==","number":1237,"title":"Session's reset! is causing a new browser to launch if the browser has already been quit.","user":{"login":"sbonebrake","id":5275941,"node_id":"MDQ6VXNlcjUyNzU5NDE=","avatar_url":"https://avatars.githubusercontent.com/u/5275941?v=4","gravatar_id":"","url":"https://api.github.com/users/sbonebrake","html_url":"https://github.com/sbonebrake","followers_url":"https://api.github.com/users/sbonebrake/followers","following_url":"https://api.github.com/users/sbonebrake/following{/other_user}","gists_url":"https://api.github.com/users/sbonebrake/gists{/gist_id}","starred_url":"https://api.github.com/users/sbonebrake/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sbonebrake/subscriptions","organizations_url":"https://api.github.com/users/sbonebrake/orgs","repos_url":"https://api.github.com/users/sbonebrake/repos","events_url":"https://api.github.com/users/sbonebrake/events{/privacy}","received_events_url":"https://api.github.com/users/sbonebrake/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":37720,"node_id":"MDU6TGFiZWwzNzcyMA==","url":"https://api.github.com/repos/teamcapybara/capybara/labels/Bug","name":"Bug","color":"f00808","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2014-02-04T23:15:53Z","updated_at":"2019-08-17T07:13:59Z","closed_at":"2015-06-19T19:10:02Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Currently session's reset! is as follows:\n\n``` ruby\ndef reset!\n      if @touched\n        driver.reset!\n        assert_no_selector :xpath, \"/html/body/*\"\n        @touched = false\n      end\n      raise @server.error if Capybara.raise_server_errors and @server and @server.error\n    ensure\n      @server.reset_error! if @server\n    end\n```\n\nIf driver.quit has been called sometime during the test, the call to assert_no_selector will eventually cause the browser to get initialized again.  This is causing an additional Saucelabs session to open during the rspec.rb's config.after method.\nIt seems to me that the reset! method should be something like:\n\n``` ruby\ndef reset!\n      if @touched && driver.browser_initialized?\n      ...\n```\n","closed_by":{"login":"twalpole","id":16556,"node_id":"MDQ6VXNlcjE2NTU2","avatar_url":"https://avatars.githubusercontent.com/u/16556?v=4","gravatar_id":"","url":"https://api.github.com/users/twalpole","html_url":"https://github.com/twalpole","followers_url":"https://api.github.com/users/twalpole/followers","following_url":"https://api.github.com/users/twalpole/following{/other_user}","gists_url":"https://api.github.com/users/twalpole/gists{/gist_id}","starred_url":"https://api.github.com/users/twalpole/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/twalpole/subscriptions","organizations_url":"https://api.github.com/users/twalpole/orgs","repos_url":"https://api.github.com/users/twalpole/repos","events_url":"https://api.github.com/users/twalpole/events{/privacy}","received_events_url":"https://api.github.com/users/twalpole/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/1237/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/teamcapybara/capybara/issues/1237/timeline","performed_via_github_app":null,"state_reason":"completed"}