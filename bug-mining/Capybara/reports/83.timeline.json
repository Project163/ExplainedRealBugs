[{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/19274996","html_url":"https://github.com/teamcapybara/capybara/issues/1097#issuecomment-19274996","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/1097","id":19274996,"node_id":"MDEyOklzc3VlQ29tbWVudDE5Mjc0OTk2","user":{"login":"twalpole","id":16556,"node_id":"MDQ6VXNlcjE2NTU2","avatar_url":"https://avatars.githubusercontent.com/u/16556?v=4","gravatar_id":"","url":"https://api.github.com/users/twalpole","html_url":"https://github.com/twalpole","followers_url":"https://api.github.com/users/twalpole/followers","following_url":"https://api.github.com/users/twalpole/following{/other_user}","gists_url":"https://api.github.com/users/twalpole/gists{/gist_id}","starred_url":"https://api.github.com/users/twalpole/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/twalpole/subscriptions","organizations_url":"https://api.github.com/users/twalpole/orgs","repos_url":"https://api.github.com/users/twalpole/repos","events_url":"https://api.github.com/users/twalpole/events{/privacy}","received_events_url":"https://api.github.com/users/twalpole/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-06-11T16:57:11Z","updated_at":"2013-06-11T16:57:11Z","body":"Moving the creation of the  Capybara::Result inside the synchronize block would probably fix that - but I think writing a reliable test for it would be really tough due to the narrow timings.  \n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/19274996/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"twalpole","id":16556,"node_id":"MDQ6VXNlcjE2NTU2","avatar_url":"https://avatars.githubusercontent.com/u/16556?v=4","gravatar_id":"","url":"https://api.github.com/users/twalpole","html_url":"https://github.com/twalpole","followers_url":"https://api.github.com/users/twalpole/followers","following_url":"https://api.github.com/users/twalpole/following{/other_user}","gists_url":"https://api.github.com/users/twalpole/gists{/gist_id}","starred_url":"https://api.github.com/users/twalpole/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/twalpole/subscriptions","organizations_url":"https://api.github.com/users/twalpole/orgs","repos_url":"https://api.github.com/users/twalpole/repos","events_url":"https://api.github.com/users/twalpole/events{/privacy}","received_events_url":"https://api.github.com/users/twalpole/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/19295824","html_url":"https://github.com/teamcapybara/capybara/issues/1097#issuecomment-19295824","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/1097","id":19295824,"node_id":"MDEyOklzc3VlQ29tbWVudDE5Mjk1ODI0","user":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-06-11T22:09:19Z","updated_at":"2013-06-11T22:09:19Z","body":"Indeed, that looks like a regression to me. It should definitely be inside the synchronize block.\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/19295824/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/19329906","html_url":"https://github.com/teamcapybara/capybara/issues/1097#issuecomment-19329906","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/1097","id":19329906,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MzI5OTA2","user":{"login":"alishutc","id":1273291,"node_id":"MDQ6VXNlcjEyNzMyOTE=","avatar_url":"https://avatars.githubusercontent.com/u/1273291?v=4","gravatar_id":"","url":"https://api.github.com/users/alishutc","html_url":"https://github.com/alishutc","followers_url":"https://api.github.com/users/alishutc/followers","following_url":"https://api.github.com/users/alishutc/following{/other_user}","gists_url":"https://api.github.com/users/alishutc/gists{/gist_id}","starred_url":"https://api.github.com/users/alishutc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alishutc/subscriptions","organizations_url":"https://api.github.com/users/alishutc/orgs","repos_url":"https://api.github.com/users/alishutc/repos","events_url":"https://api.github.com/users/alishutc/events{/privacy}","received_events_url":"https://api.github.com/users/alishutc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-06-12T14:37:18Z","updated_at":"2013-06-12T14:37:18Z","body":"Thanks, good to know and that looks like a quick fix. I agree though, it is a tricky behaviour to spec.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/19329906/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"alishutc","id":1273291,"node_id":"MDQ6VXNlcjEyNzMyOTE=","avatar_url":"https://avatars.githubusercontent.com/u/1273291?v=4","gravatar_id":"","url":"https://api.github.com/users/alishutc","html_url":"https://github.com/alishutc","followers_url":"https://api.github.com/users/alishutc/followers","following_url":"https://api.github.com/users/alishutc/following{/other_user}","gists_url":"https://api.github.com/users/alishutc/gists{/gist_id}","starred_url":"https://api.github.com/users/alishutc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alishutc/subscriptions","organizations_url":"https://api.github.com/users/alishutc/orgs","repos_url":"https://api.github.com/users/alishutc/repos","events_url":"https://api.github.com/users/alishutc/events{/privacy}","received_events_url":"https://api.github.com/users/alishutc/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":52369386,"node_id":"MDExOkNsb3NlZEV2ZW50NTIzNjkzODY=","url":"https://api.github.com/repos/teamcapybara/capybara/issues/events/52369386","actor":{"login":"alishutc","id":1273291,"node_id":"MDQ6VXNlcjEyNzMyOTE=","avatar_url":"https://avatars.githubusercontent.com/u/1273291?v=4","gravatar_id":"","url":"https://api.github.com/users/alishutc","html_url":"https://github.com/alishutc","followers_url":"https://api.github.com/users/alishutc/followers","following_url":"https://api.github.com/users/alishutc/following{/other_user}","gists_url":"https://api.github.com/users/alishutc/gists{/gist_id}","starred_url":"https://api.github.com/users/alishutc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alishutc/subscriptions","organizations_url":"https://api.github.com/users/alishutc/orgs","repos_url":"https://api.github.com/users/alishutc/repos","events_url":"https://api.github.com/users/alishutc/events{/privacy}","received_events_url":"https://api.github.com/users/alishutc/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2013-06-12T14:44:18Z","state_reason":null,"performed_via_github_app":null},{"id":52369392,"node_id":"MDEzOlJlb3BlbmVkRXZlbnQ1MjM2OTM5Mg==","url":"https://api.github.com/repos/teamcapybara/capybara/issues/events/52369392","actor":{"login":"alishutc","id":1273291,"node_id":"MDQ6VXNlcjEyNzMyOTE=","avatar_url":"https://avatars.githubusercontent.com/u/1273291?v=4","gravatar_id":"","url":"https://api.github.com/users/alishutc","html_url":"https://github.com/alishutc","followers_url":"https://api.github.com/users/alishutc/followers","following_url":"https://api.github.com/users/alishutc/following{/other_user}","gists_url":"https://api.github.com/users/alishutc/gists{/gist_id}","starred_url":"https://api.github.com/users/alishutc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alishutc/subscriptions","organizations_url":"https://api.github.com/users/alishutc/orgs","repos_url":"https://api.github.com/users/alishutc/repos","events_url":"https://api.github.com/users/alishutc/events{/privacy}","received_events_url":"https://api.github.com/users/alishutc/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"reopened","commit_id":null,"commit_url":null,"created_at":"2013-06-12T14:44:20Z","state_reason":null,"performed_via_github_app":null},{"id":52372248,"node_id":"MDExOkNsb3NlZEV2ZW50NTIzNzIyNDg=","url":"https://api.github.com/repos/teamcapybara/capybara/issues/events/52372248","actor":{"login":"alishutc","id":1273291,"node_id":"MDQ6VXNlcjEyNzMyOTE=","avatar_url":"https://avatars.githubusercontent.com/u/1273291?v=4","gravatar_id":"","url":"https://api.github.com/users/alishutc","html_url":"https://github.com/alishutc","followers_url":"https://api.github.com/users/alishutc/followers","following_url":"https://api.github.com/users/alishutc/following{/other_user}","gists_url":"https://api.github.com/users/alishutc/gists{/gist_id}","starred_url":"https://api.github.com/users/alishutc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alishutc/subscriptions","organizations_url":"https://api.github.com/users/alishutc/orgs","repos_url":"https://api.github.com/users/alishutc/repos","events_url":"https://api.github.com/users/alishutc/events{/privacy}","received_events_url":"https://api.github.com/users/alishutc/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2013-06-12T15:00:46Z","state_reason":null,"performed_via_github_app":null},{"id":52372264,"node_id":"MDEzOlJlb3BlbmVkRXZlbnQ1MjM3MjI2NA==","url":"https://api.github.com/repos/teamcapybara/capybara/issues/events/52372264","actor":{"login":"alishutc","id":1273291,"node_id":"MDQ6VXNlcjEyNzMyOTE=","avatar_url":"https://avatars.githubusercontent.com/u/1273291?v=4","gravatar_id":"","url":"https://api.github.com/users/alishutc","html_url":"https://github.com/alishutc","followers_url":"https://api.github.com/users/alishutc/followers","following_url":"https://api.github.com/users/alishutc/following{/other_user}","gists_url":"https://api.github.com/users/alishutc/gists{/gist_id}","starred_url":"https://api.github.com/users/alishutc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alishutc/subscriptions","organizations_url":"https://api.github.com/users/alishutc/orgs","repos_url":"https://api.github.com/users/alishutc/repos","events_url":"https://api.github.com/users/alishutc/events{/privacy}","received_events_url":"https://api.github.com/users/alishutc/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"reopened","commit_id":null,"commit_url":null,"created_at":"2013-06-12T15:00:48Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/19332173","html_url":"https://github.com/teamcapybara/capybara/issues/1097#issuecomment-19332173","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/1097","id":19332173,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MzMyMTcz","user":{"login":"alishutc","id":1273291,"node_id":"MDQ6VXNlcjEyNzMyOTE=","avatar_url":"https://avatars.githubusercontent.com/u/1273291?v=4","gravatar_id":"","url":"https://api.github.com/users/alishutc","html_url":"https://github.com/alishutc","followers_url":"https://api.github.com/users/alishutc/followers","following_url":"https://api.github.com/users/alishutc/following{/other_user}","gists_url":"https://api.github.com/users/alishutc/gists{/gist_id}","starred_url":"https://api.github.com/users/alishutc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alishutc/subscriptions","organizations_url":"https://api.github.com/users/alishutc/orgs","repos_url":"https://api.github.com/users/alishutc/repos","events_url":"https://api.github.com/users/alishutc/events{/privacy}","received_events_url":"https://api.github.com/users/alishutc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-06-12T15:09:42Z","updated_at":"2013-06-12T15:09:42Z","body":"I've managed to recreate this reliably in a spec by execing some javascript on the page to modify the element.\n\nI'll try to tidy it up a bit and submit a PR.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/19332173/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"alishutc","id":1273291,"node_id":"MDQ6VXNlcjEyNzMyOTE=","avatar_url":"https://avatars.githubusercontent.com/u/1273291?v=4","gravatar_id":"","url":"https://api.github.com/users/alishutc","html_url":"https://github.com/alishutc","followers_url":"https://api.github.com/users/alishutc/followers","following_url":"https://api.github.com/users/alishutc/following{/other_user}","gists_url":"https://api.github.com/users/alishutc/gists{/gist_id}","starred_url":"https://api.github.com/users/alishutc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alishutc/subscriptions","organizations_url":"https://api.github.com/users/alishutc/orgs","repos_url":"https://api.github.com/users/alishutc/repos","events_url":"https://api.github.com/users/alishutc/events{/privacy}","received_events_url":"https://api.github.com/users/alishutc/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/19343961","html_url":"https://github.com/teamcapybara/capybara/issues/1097#issuecomment-19343961","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/1097","id":19343961,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MzQzOTYx","user":{"login":"alishutc","id":1273291,"node_id":"MDQ6VXNlcjEyNzMyOTE=","avatar_url":"https://avatars.githubusercontent.com/u/1273291?v=4","gravatar_id":"","url":"https://api.github.com/users/alishutc","html_url":"https://github.com/alishutc","followers_url":"https://api.github.com/users/alishutc/followers","following_url":"https://api.github.com/users/alishutc/following{/other_user}","gists_url":"https://api.github.com/users/alishutc/gists{/gist_id}","starred_url":"https://api.github.com/users/alishutc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alishutc/subscriptions","organizations_url":"https://api.github.com/users/alishutc/orgs","repos_url":"https://api.github.com/users/alishutc/repos","events_url":"https://api.github.com/users/alishutc/events{/privacy}","received_events_url":"https://api.github.com/users/alishutc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-06-12T18:09:09Z","updated_at":"2013-06-12T18:09:09Z","body":"Hmm, looking in to this further there are other problems.\nThe problem I'm having actually involves finding elements by their text, something like `find 'a', text: 'foo'`.\nNormally this behaves as expected and the synchronize block catches the error and retries if the element disappears between being found and checking the text.\nHowever if you happen to be inside a block where the default wait time is 0, then you lose this because the synchronize block never retries.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/19343961/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"alishutc","id":1273291,"node_id":"MDQ6VXNlcjEyNzMyOTE=","avatar_url":"https://avatars.githubusercontent.com/u/1273291?v=4","gravatar_id":"","url":"https://api.github.com/users/alishutc","html_url":"https://github.com/alishutc","followers_url":"https://api.github.com/users/alishutc/followers","following_url":"https://api.github.com/users/alishutc/following{/other_user}","gists_url":"https://api.github.com/users/alishutc/gists{/gist_id}","starred_url":"https://api.github.com/users/alishutc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alishutc/subscriptions","organizations_url":"https://api.github.com/users/alishutc/orgs","repos_url":"https://api.github.com/users/alishutc/repos","events_url":"https://api.github.com/users/alishutc/events{/privacy}","received_events_url":"https://api.github.com/users/alishutc/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":52408505,"node_id":"MDExOkNsb3NlZEV2ZW50NTI0MDg1MDU=","url":"https://api.github.com/repos/teamcapybara/capybara/issues/events/52408505","actor":{"login":"alishutc","id":1273291,"node_id":"MDQ6VXNlcjEyNzMyOTE=","avatar_url":"https://avatars.githubusercontent.com/u/1273291?v=4","gravatar_id":"","url":"https://api.github.com/users/alishutc","html_url":"https://github.com/alishutc","followers_url":"https://api.github.com/users/alishutc/followers","following_url":"https://api.github.com/users/alishutc/following{/other_user}","gists_url":"https://api.github.com/users/alishutc/gists{/gist_id}","starred_url":"https://api.github.com/users/alishutc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alishutc/subscriptions","organizations_url":"https://api.github.com/users/alishutc/orgs","repos_url":"https://api.github.com/users/alishutc/repos","events_url":"https://api.github.com/users/alishutc/events{/privacy}","received_events_url":"https://api.github.com/users/alishutc/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2013-06-12T18:27:19Z","state_reason":null,"performed_via_github_app":null},{"id":52408511,"node_id":"MDEzOlJlb3BlbmVkRXZlbnQ1MjQwODUxMQ==","url":"https://api.github.com/repos/teamcapybara/capybara/issues/events/52408511","actor":{"login":"alishutc","id":1273291,"node_id":"MDQ6VXNlcjEyNzMyOTE=","avatar_url":"https://avatars.githubusercontent.com/u/1273291?v=4","gravatar_id":"","url":"https://api.github.com/users/alishutc","html_url":"https://github.com/alishutc","followers_url":"https://api.github.com/users/alishutc/followers","following_url":"https://api.github.com/users/alishutc/following{/other_user}","gists_url":"https://api.github.com/users/alishutc/gists{/gist_id}","starred_url":"https://api.github.com/users/alishutc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alishutc/subscriptions","organizations_url":"https://api.github.com/users/alishutc/orgs","repos_url":"https://api.github.com/users/alishutc/repos","events_url":"https://api.github.com/users/alishutc/events{/privacy}","received_events_url":"https://api.github.com/users/alishutc/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"reopened","commit_id":null,"commit_url":null,"created_at":"2013-06-12T18:27:22Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/19345166","html_url":"https://github.com/teamcapybara/capybara/issues/1097#issuecomment-19345166","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/1097","id":19345166,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MzQ1MTY2","user":{"login":"alishutc","id":1273291,"node_id":"MDQ6VXNlcjEyNzMyOTE=","avatar_url":"https://avatars.githubusercontent.com/u/1273291?v=4","gravatar_id":"","url":"https://api.github.com/users/alishutc","html_url":"https://github.com/alishutc","followers_url":"https://api.github.com/users/alishutc/followers","following_url":"https://api.github.com/users/alishutc/following{/other_user}","gists_url":"https://api.github.com/users/alishutc/gists{/gist_id}","starred_url":"https://api.github.com/users/alishutc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alishutc/subscriptions","organizations_url":"https://api.github.com/users/alishutc/orgs","repos_url":"https://api.github.com/users/alishutc/repos","events_url":"https://api.github.com/users/alishutc/events{/privacy}","received_events_url":"https://api.github.com/users/alishutc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-06-12T18:28:01Z","updated_at":"2013-06-12T18:36:03Z","body":"Sorry! keep hitting close by mistake.\nIt seems like, regardless of the wait time or anything else, elements that have become stale should be filtered out at the point the query result is built. So if you happen to grab something and it disappears before you can check the text/visibility/anything else, the correct response is that the element is not present.\nDoes that sound sensible?\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/19345166/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"alishutc","id":1273291,"node_id":"MDQ6VXNlcjEyNzMyOTE=","avatar_url":"https://avatars.githubusercontent.com/u/1273291?v=4","gravatar_id":"","url":"https://api.github.com/users/alishutc","html_url":"https://github.com/alishutc","followers_url":"https://api.github.com/users/alishutc/followers","following_url":"https://api.github.com/users/alishutc/following{/other_user}","gists_url":"https://api.github.com/users/alishutc/gists{/gist_id}","starred_url":"https://api.github.com/users/alishutc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alishutc/subscriptions","organizations_url":"https://api.github.com/users/alishutc/orgs","repos_url":"https://api.github.com/users/alishutc/repos","events_url":"https://api.github.com/users/alishutc/events{/privacy}","received_events_url":"https://api.github.com/users/alishutc/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/19347052","html_url":"https://github.com/teamcapybara/capybara/issues/1097#issuecomment-19347052","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/1097","id":19347052,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MzQ3MDUy","user":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-06-12T18:56:47Z","updated_at":"2013-06-12T18:56:47Z","body":"The problem is that you're invariably going to run into race conditions with this. The only way to filter out an element that is stale is to actually try calling something on it. Explicitly checking is always going to be race-condition prone. Recovering from the exception then is pretty tricky.\n\nIf you set the wait_time to 0 then race conditions can and will occur, this is why it is there in the first place.\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/19347052/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/19451954","html_url":"https://github.com/teamcapybara/capybara/issues/1097#issuecomment-19451954","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/1097","id":19451954,"node_id":"MDEyOklzc3VlQ29tbWVudDE5NDUxOTU0","user":{"login":"alishutc","id":1273291,"node_id":"MDQ6VXNlcjEyNzMyOTE=","avatar_url":"https://avatars.githubusercontent.com/u/1273291?v=4","gravatar_id":"","url":"https://api.github.com/users/alishutc","html_url":"https://github.com/alishutc","followers_url":"https://api.github.com/users/alishutc/followers","following_url":"https://api.github.com/users/alishutc/following{/other_user}","gists_url":"https://api.github.com/users/alishutc/gists{/gist_id}","starred_url":"https://api.github.com/users/alishutc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alishutc/subscriptions","organizations_url":"https://api.github.com/users/alishutc/orgs","repos_url":"https://api.github.com/users/alishutc/repos","events_url":"https://api.github.com/users/alishutc/events{/privacy}","received_events_url":"https://api.github.com/users/alishutc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-06-14T11:27:11Z","updated_at":"2013-06-14T11:29:15Z","body":"I sort of agree, but it also seems like the synchronize block is being used for two separate concerns:\nThere's the asynchronous behaviour detailed in the README - waiting a certain amount of time for elements to appear. Then there's the secondary thing of retrying on errors.\n\nIn some cases I'm not even sure that the retry logic is actually beneficial. As an example, lets say I find an element, that element is subsequently removed for some reason, and then I later call #text on that element.\n\nAFAIK Capybara will catch the stale element error and retry until the wait time expires. But in this case once an element is stale it's never coming back so all we're really doing is delaying the inevitable raise and slowing things down.\n\nSorry I'm not providing much in terms of a solution here, more outlining the problem as I see it. But I certainly think you could make a case for separating out the error handling from the asynchronous retry logic.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/19451954/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"alishutc","id":1273291,"node_id":"MDQ6VXNlcjEyNzMyOTE=","avatar_url":"https://avatars.githubusercontent.com/u/1273291?v=4","gravatar_id":"","url":"https://api.github.com/users/alishutc","html_url":"https://github.com/alishutc","followers_url":"https://api.github.com/users/alishutc/followers","following_url":"https://api.github.com/users/alishutc/following{/other_user}","gists_url":"https://api.github.com/users/alishutc/gists{/gist_id}","starred_url":"https://api.github.com/users/alishutc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alishutc/subscriptions","organizations_url":"https://api.github.com/users/alishutc/orgs","repos_url":"https://api.github.com/users/alishutc/repos","events_url":"https://api.github.com/users/alishutc/events{/privacy}","received_events_url":"https://api.github.com/users/alishutc/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/20461560","html_url":"https://github.com/teamcapybara/capybara/issues/1097#issuecomment-20461560","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/1097","id":20461560,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNDYxNTYw","user":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-07-04T06:47:36Z","updated_at":"2013-07-04T06:47:36Z","body":"@alishutc we actually handle that case. The synchronize behaviour has gone through a lot of iterations, and I think the current behaviour is quite sophisticated and should cover most cases quite well. Bugs like this aside ;)\n\n`synchronize` actually does nothing when it called inside another `synchronize` block. Since pretty much every call you make into Capybara is wrapped in `synchronize`, this means that sub-operations, such as getting the text of an element, never actually get stuck at waiting for a removed element. Instead the error will bubble, and the whole operation will retry instead.\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/20461560/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":55224779,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NTUyMjQ3Nzk=","url":"https://api.github.com/repos/teamcapybara/capybara/issues/events/55224779","actor":{"login":"alishutc","id":1273291,"node_id":"MDQ6VXNlcjEyNzMyOTE=","avatar_url":"https://avatars.githubusercontent.com/u/1273291?v=4","gravatar_id":"","url":"https://api.github.com/users/alishutc","html_url":"https://github.com/alishutc","followers_url":"https://api.github.com/users/alishutc/followers","following_url":"https://api.github.com/users/alishutc/following{/other_user}","gists_url":"https://api.github.com/users/alishutc/gists{/gist_id}","starred_url":"https://api.github.com/users/alishutc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alishutc/subscriptions","organizations_url":"https://api.github.com/users/alishutc/orgs","repos_url":"https://api.github.com/users/alishutc/repos","events_url":"https://api.github.com/users/alishutc/events{/privacy}","received_events_url":"https://api.github.com/users/alishutc/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2013-07-04T06:47:36Z","performed_via_github_app":null},{"id":55224780,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDU1MjI0Nzgw","url":"https://api.github.com/repos/teamcapybara/capybara/issues/events/55224780","actor":{"login":"alishutc","id":1273291,"node_id":"MDQ6VXNlcjEyNzMyOTE=","avatar_url":"https://avatars.githubusercontent.com/u/1273291?v=4","gravatar_id":"","url":"https://api.github.com/users/alishutc","html_url":"https://github.com/alishutc","followers_url":"https://api.github.com/users/alishutc/followers","following_url":"https://api.github.com/users/alishutc/following{/other_user}","gists_url":"https://api.github.com/users/alishutc/gists{/gist_id}","starred_url":"https://api.github.com/users/alishutc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alishutc/subscriptions","organizations_url":"https://api.github.com/users/alishutc/orgs","repos_url":"https://api.github.com/users/alishutc/repos","events_url":"https://api.github.com/users/alishutc/events{/privacy}","received_events_url":"https://api.github.com/users/alishutc/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2013-07-04T06:47:36Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/20461594","html_url":"https://github.com/teamcapybara/capybara/issues/1097#issuecomment-20461594","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/1097","id":20461594,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNDYxNTk0","user":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-07-04T06:48:51Z","updated_at":"2013-07-04T06:48:51Z","body":"And if you're calling #text on the element yourself, you probably _want_ to get an exception if it's no longer there.\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/20461594/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":71259527,"node_id":"MDExOkNsb3NlZEV2ZW50NzEyNTk1Mjc=","url":"https://api.github.com/repos/teamcapybara/capybara/issues/events/71259527","actor":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"823c18bfc341229eb43d021e4ed04e74266cdb7d","commit_url":"https://api.github.com/repos/teamcapybara/capybara/commits/823c18bfc341229eb43d021e4ed04e74266cdb7d","created_at":"2013-10-20T17:29:43Z","state_reason":null,"performed_via_github_app":null},{"id":2563985510,"node_id":"MDExOkxvY2tlZEV2ZW50MjU2Mzk4NTUxMA==","url":"https://api.github.com/repos/teamcapybara/capybara/issues/events/2563985510","actor":{"login":"lock[bot]","id":33595554,"node_id":"MDM6Qm90MzM1OTU1NTQ=","avatar_url":"https://avatars.githubusercontent.com/in/6672?v=4","gravatar_id":"","url":"https://api.github.com/users/lock%5Bbot%5D","html_url":"https://github.com/apps/lock","followers_url":"https://api.github.com/users/lock%5Bbot%5D/followers","following_url":"https://api.github.com/users/lock%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/lock%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/lock%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lock%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/lock%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/lock%5Bbot%5D/repos","events_url":"https://api.github.com/users/lock%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/lock%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"locked","commit_id":null,"commit_url":null,"created_at":"2019-08-17T14:14:09Z","lock_reason":null,"performed_via_github_app":null}]