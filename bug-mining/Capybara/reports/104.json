{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/2380","repository_url":"https://api.github.com/repos/teamcapybara/capybara","labels_url":"https://api.github.com/repos/teamcapybara/capybara/issues/2380/labels{/name}","comments_url":"https://api.github.com/repos/teamcapybara/capybara/issues/2380/comments","events_url":"https://api.github.com/repos/teamcapybara/capybara/issues/2380/events","html_url":"https://github.com/teamcapybara/capybara/issues/2380","id":678977250,"node_id":"MDU6SXNzdWU2Nzg5NzcyNTA=","number":2380,"title":"Se4 - Remote - Firefox: Creating driver throws private method error on driver specialization","user":{"login":"luke-hill","id":20105237,"node_id":"MDQ6VXNlcjIwMTA1MjM3","avatar_url":"https://avatars.githubusercontent.com/u/20105237?v=4","gravatar_id":"","url":"https://api.github.com/users/luke-hill","html_url":"https://github.com/luke-hill","followers_url":"https://api.github.com/users/luke-hill/followers","following_url":"https://api.github.com/users/luke-hill/following{/other_user}","gists_url":"https://api.github.com/users/luke-hill/gists{/gist_id}","starred_url":"https://api.github.com/users/luke-hill/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luke-hill/subscriptions","organizations_url":"https://api.github.com/users/luke-hill/orgs","repos_url":"https://api.github.com/users/luke-hill/repos","events_url":"https://api.github.com/users/luke-hill/events{/privacy}","received_events_url":"https://api.github.com/users/luke-hill/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-08-14T07:58:47Z","updated_at":"2020-09-06T22:31:28Z","closed_at":"2020-09-06T22:31:28Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Meta\r\nCapybara Version: `3.29.0`\r\nDriver Information (and browser if relevant): selenium-webdriver `4.0.alpha6` with Firefox `77` #Works fine on Selenium3.14 with everything else identical\r\n\r\n## Expected Behavior\r\nA driver can be instantiated\r\n\r\n## Actual Behavior\r\n```\r\nprivate method `commands' called for #<Selenium::WebDriver::Remote::Bridge:0x0000555e81b80d00> (NoMethodError)\r\n/home/luke/.rvm/gems/ruby-2.6.6/gems/capybara-3.29.0/lib/capybara/selenium/driver_specializations/firefox_driver.rb:9:in `extended'\r\n/home/luke/.rvm/gems/ruby-2.6.6/gems/capybara-3.29.0/lib/capybara/selenium/driver.rb:440:in `extend'\r\n/home/luke/.rvm/gems/ruby-2.6.6/gems/capybara-3.29.0/lib/capybara/selenium/driver.rb:440:in `block in specialize_driver'\r\n/home/luke/.rvm/gems/ruby-2.6.6/gems/capybara-3.29.0/lib/capybara/selenium/driver.rb:439:in `each_value'\r\n/home/luke/.rvm/gems/ruby-2.6.6/gems/capybara-3.29.0/lib/capybara/selenium/driver.rb:439:in `specialize_driver'\r\n/home/luke/.rvm/gems/ruby-2.6.6/gems/capybara-3.29.0/lib/capybara/selenium/driver.rb:51:in `browser'\r\n```\r\n## Steps to reproduce\r\nStandard cucumber project. Driver creation/capabilities are as follows\r\n```\r\ndesired_capabilities = \r\n        {\r\n          \"browserName\" => \"firefox\",\r\n          \"browserVersion\" => \"77\" # Also on 76/75 this fails\r\n          \"bstack:options\" => {\r\n            \"buildName\" => \"build_name\",\r\n            \"projectName\" => \"projectName\",\r\n            \"sessionName\" => \"session\",\r\n            \"os\" => \"Windows\",\r\n            \"osVersion\" => \"10\", # Also on 7 this fails\r\n            \"local\" => \"false\",\r\n            \"seleniumVersion\" => \"4.0.0-alpha-6\",\r\n            \"debug\" => \"false\",\r\n            \"consoleLogs\" => \"verbose\",\r\n            \"networkLogs\" => \"false\",\r\n            \"resolution\" => \"1920x1080\"\r\n          }\r\n        }\r\n\r\noptions = Selenium::WebDriver::Firefox::Options.new(log_level: \"info\")\r\n\r\n      def register\r\n        Capybara.register_driver :selenium do |app|\r\n          Capybara::Selenium::Driver.new(\r\n            app,\r\n            browser: :remote,\r\n            capabilities: [desired_capabilities, options],\r\n            url: browserstack_hub_url\r\n          )\r\n        end\r\n      end\r\n```\r\n","closed_by":{"login":"twalpole","id":16556,"node_id":"MDQ6VXNlcjE2NTU2","avatar_url":"https://avatars.githubusercontent.com/u/16556?v=4","gravatar_id":"","url":"https://api.github.com/users/twalpole","html_url":"https://github.com/twalpole","followers_url":"https://api.github.com/users/twalpole/followers","following_url":"https://api.github.com/users/twalpole/following{/other_user}","gists_url":"https://api.github.com/users/twalpole/gists{/gist_id}","starred_url":"https://api.github.com/users/twalpole/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/twalpole/subscriptions","organizations_url":"https://api.github.com/users/twalpole/orgs","repos_url":"https://api.github.com/users/twalpole/repos","events_url":"https://api.github.com/users/twalpole/events{/privacy}","received_events_url":"https://api.github.com/users/twalpole/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/2380/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/teamcapybara/capybara/issues/2380/timeline","performed_via_github_app":null,"state_reason":"completed"}