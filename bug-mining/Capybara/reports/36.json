{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/396","repository_url":"https://api.github.com/repos/teamcapybara/capybara","labels_url":"https://api.github.com/repos/teamcapybara/capybara/issues/396/labels{/name}","comments_url":"https://api.github.com/repos/teamcapybara/capybara/issues/396/comments","events_url":"https://api.github.com/repos/teamcapybara/capybara/issues/396/events","html_url":"https://github.com/teamcapybara/capybara/issues/396","id":1120496,"node_id":"MDU6SXNzdWUxMTIwNDk2","number":396,"title":"Filling fields with maxlength=\"\" or maxlength=\"0\"","user":{"login":"yorickpeterse","id":86065,"node_id":"MDQ6VXNlcjg2MDY1","avatar_url":"https://avatars.githubusercontent.com/u/86065?v=4","gravatar_id":"","url":"https://api.github.com/users/yorickpeterse","html_url":"https://github.com/yorickpeterse","followers_url":"https://api.github.com/users/yorickpeterse/followers","following_url":"https://api.github.com/users/yorickpeterse/following{/other_user}","gists_url":"https://api.github.com/users/yorickpeterse/gists{/gist_id}","starred_url":"https://api.github.com/users/yorickpeterse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yorickpeterse/subscriptions","organizations_url":"https://api.github.com/users/yorickpeterse/orgs","repos_url":"https://api.github.com/users/yorickpeterse/repos","events_url":"https://api.github.com/users/yorickpeterse/events{/privacy}","received_events_url":"https://api.github.com/users/yorickpeterse/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2011-06-27T09:26:31Z","updated_at":"2019-08-18T04:14:11Z","closed_at":"2011-07-08T10:58:02Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"First of all I have to say I'm not 100% sure if this is a problem with my tests or whether it's capybara. After having updated Capybara to v1 (I was using 0.4 before) it seems 3 of my tests fail. The problem is caused because Capybara is for some reason unable to properly fill the field with the label text \"Spec field\". The HTML for this spec looks like the following (I've removed everything that wasn't important):\n\n``` html\n<form method=\"post\" action=\"/admin/section-entries/save\" id=\"section_entry_form\">\n    <input type=\"hidden\" name=\"section_id\" value=\"13\">\n    <input type=\"hidden\" name=\"id\" value=\"\">\n\n    <div id=\"basic\">\n        <p>\n            <label for=\"form_title\">Title</label>\n            <input type=\"text\" name=\"title\" id=\"form_title\" value=\"\">\n        </p>\n        <p>\n            <label for=\"form_slug\">Slug</label>\n            <input type=\"text\" name=\"slug\" id=\"form_slug\" value=\"\">\n        </p>\n        <p>\n            <label for=\"form_created_at\">Created at</label>\n            <input class=\"date\" type=\"text\" name=\"created_at\" id=\"form_created_at\" value=\"\">\n        </p>\n        <p>\n            <label for=\"form_user_id\">Author</label>\n            <select size=\"1\" name=\"user_id\" id=\"form_user_id\">\n                <option value=\"1\">Spec</option>\n            </select>\n        </p>\n        <p>\n            <label for=\"form_section_entry_status_id\">Status</label>\n            <select size=\"1\" name=\"section_entry_status_id\" id=\"form_section_entry_status_id\">\n                <option value=\"1\">Published</option>\n                <option value=\"2\">Draft</option>\n            </select>\n        </p>\n    </div>\n\n    <div id=\"group_13\">\n        <p>\n            <label for=\"form_custom_field_values[13]\">Spec field</label>\n            <input maxlength=\"\" value=\"\" placeholder=\"\" data-format=\"markdown\" type=\"text\" name=\"custom_field_values[13]\" id=\"form_custom_field_values[13]\">\n        </p>\n    </div>\n\n    <div class=\"clearfix\">\n        <div class=\"button\">\n            <input type=\"submit\" value=\"Save entry\">\n        </div>\n    </div>\n</form>\n```\n\nNote that the `div` elements around the input fields are required as they're used to show/hide fields based on a certain element's state (in this case a tab based menu). What I noticed is that while Capybara is able to find the element (since it doesn't trigger any warnings for it) it somehow fails to fill the field properly. The code for this test is the following (again stripped down to the essentials):\n\n``` ruby\nwithin('#section_entry_form') do\n  fill_in('title', :with => 'Spec entry')\n  select('Published', :from => 'form_section_entry_status_id')\n  fill_in('Spec field', :with => 'Spec field value')\n  click_on('Save entry')\nend\n```\n\nDumping the POST data in this test shows that the field \"custom_field_values[13]\" has no value while others have, this causes the form validation system I'm using to show an error and thus the test fails. I'm not entirely sure what might cause this, it runs fine in 0.4 but fails in 1.0 so this makes me wonder if something in Capybara was either changed or broken. Also note that not using the label text but the name (or ID) makes no difference, the field still remains empty.\n\nSystem specs:\n- ruby 1.9.2p180 (2011-02-18 revision 30909) [x86_64-darwin10.7.0]\n- Mac OS X 10.6.7\n- RSpec 2.6.0\n- Capybara 1.0.0 (0.4.1.2 works just fine)\n","closed_by":{"login":"joliss","id":524783,"node_id":"MDQ6VXNlcjUyNDc4Mw==","avatar_url":"https://avatars.githubusercontent.com/u/524783?v=4","gravatar_id":"","url":"https://api.github.com/users/joliss","html_url":"https://github.com/joliss","followers_url":"https://api.github.com/users/joliss/followers","following_url":"https://api.github.com/users/joliss/following{/other_user}","gists_url":"https://api.github.com/users/joliss/gists{/gist_id}","starred_url":"https://api.github.com/users/joliss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joliss/subscriptions","organizations_url":"https://api.github.com/users/joliss/orgs","repos_url":"https://api.github.com/users/joliss/repos","events_url":"https://api.github.com/users/joliss/events{/privacy}","received_events_url":"https://api.github.com/users/joliss/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/396/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/teamcapybara/capybara/issues/396/timeline","performed_via_github_app":null,"state_reason":"completed"}