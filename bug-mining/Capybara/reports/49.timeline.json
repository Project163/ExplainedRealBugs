[{"id":15888201,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE1ODg4MjAx","url":"https://api.github.com/repos/teamcapybara/capybara/issues/events/15888201","actor":{"login":"artem-mindrov","id":1575475,"node_id":"MDQ6VXNlcjE1NzU0NzU=","avatar_url":"https://avatars.githubusercontent.com/u/1575475?v=4","gravatar_id":"","url":"https://api.github.com/users/artem-mindrov","html_url":"https://github.com/artem-mindrov","followers_url":"https://api.github.com/users/artem-mindrov/followers","following_url":"https://api.github.com/users/artem-mindrov/following{/other_user}","gists_url":"https://api.github.com/users/artem-mindrov/gists{/gist_id}","starred_url":"https://api.github.com/users/artem-mindrov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/artem-mindrov/subscriptions","organizations_url":"https://api.github.com/users/artem-mindrov/orgs","repos_url":"https://api.github.com/users/artem-mindrov/repos","events_url":"https://api.github.com/users/artem-mindrov/events{/privacy}","received_events_url":"https://api.github.com/users/artem-mindrov/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2012-05-21T12:37:11Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/5822384","html_url":"https://github.com/teamcapybara/capybara/issues/713#issuecomment-5822384","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/713","id":5822384,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MjIzODQ=","user":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-05-21T13:28:59Z","updated_at":"2012-05-21T13:28:59Z","body":"This does indeed sound like a bug. I think what's happening is that Capybara's implicit reloading doesn't handle the case of elements being found with `all` very well. In this case, Capybara tries to rerun the query which found the element, but instead of picking the n-th element, it picks the first. I checked the code, and it seems like this is what Capybara is doing. \n\nI don't really think that there is a way to reliably re-run an `all` query, since the order of elements could have changed since the query was originally run, so Capybara probably should just not reload these elements. Unfortunately that opens up the possibility of timing errors, but as this example clearly shows, the current behaviour is simply wrong.\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/5822384/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":15892342,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE1ODkyMzQy","url":"https://api.github.com/repos/teamcapybara/capybara/issues/events/15892342","actor":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2012-05-21T13:28:59Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/5822989","html_url":"https://github.com/teamcapybara/capybara/issues/713#issuecomment-5822989","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/713","id":5822989,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MjI5ODk=","user":{"login":"artem-mindrov","id":1575475,"node_id":"MDQ6VXNlcjE1NzU0NzU=","avatar_url":"https://avatars.githubusercontent.com/u/1575475?v=4","gravatar_id":"","url":"https://api.github.com/users/artem-mindrov","html_url":"https://github.com/artem-mindrov","followers_url":"https://api.github.com/users/artem-mindrov/followers","following_url":"https://api.github.com/users/artem-mindrov/following{/other_user}","gists_url":"https://api.github.com/users/artem-mindrov/gists{/gist_id}","starred_url":"https://api.github.com/users/artem-mindrov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/artem-mindrov/subscriptions","organizations_url":"https://api.github.com/users/artem-mindrov/orgs","repos_url":"https://api.github.com/users/artem-mindrov/repos","events_url":"https://api.github.com/users/artem-mindrov/events{/privacy}","received_events_url":"https://api.github.com/users/artem-mindrov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-05-21T13:53:58Z","updated_at":"2012-05-21T13:53:58Z","body":"I'd expect the order to be the same except for when one of my scripts triggered by a user action changes it. At least I'd be frustrated if I found out that something is messing with my DOM tree under the covers, breaking my tests and making me think I've started losing my sanity. So off the top of my head, I can't think of a better way to deal with this, other than assuming that the sub-tree structure hasn't changed since it was first queried, as you suggest. I imagine it wouldn't be an easy task checking if your element references have become stale between requests, right?\n\nOTOH, I can use `page` as search base, but I think if my DOM tree is large enough, it will become a bit expensive, so it's always nice to have a means to narrow down the scope...\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/5822989/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"artem-mindrov","id":1575475,"node_id":"MDQ6VXNlcjE1NzU0NzU=","avatar_url":"https://avatars.githubusercontent.com/u/1575475?v=4","gravatar_id":"","url":"https://api.github.com/users/artem-mindrov","html_url":"https://github.com/artem-mindrov","followers_url":"https://api.github.com/users/artem-mindrov/followers","following_url":"https://api.github.com/users/artem-mindrov/following{/other_user}","gists_url":"https://api.github.com/users/artem-mindrov/gists{/gist_id}","starred_url":"https://api.github.com/users/artem-mindrov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/artem-mindrov/subscriptions","organizations_url":"https://api.github.com/users/artem-mindrov/orgs","repos_url":"https://api.github.com/users/artem-mindrov/repos","events_url":"https://api.github.com/users/artem-mindrov/events{/privacy}","received_events_url":"https://api.github.com/users/artem-mindrov/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/5823158","html_url":"https://github.com/teamcapybara/capybara/issues/713#issuecomment-5823158","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/713","id":5823158,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MjMxNTg=","user":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-05-21T14:00:39Z","updated_at":"2012-05-21T14:00:39Z","body":"Since the browser can execute stuff asynchronously, stuff can and will change under your feet. That's a fact of life when dealing with JS capable browsers. The question is how we handle that...\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/5823158/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/5857794","html_url":"https://github.com/teamcapybara/capybara/issues/713#issuecomment-5857794","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/713","id":5857794,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NTc3OTQ=","user":{"login":"artem-mindrov","id":1575475,"node_id":"MDQ6VXNlcjE1NzU0NzU=","avatar_url":"https://avatars.githubusercontent.com/u/1575475?v=4","gravatar_id":"","url":"https://api.github.com/users/artem-mindrov","html_url":"https://github.com/artem-mindrov","followers_url":"https://api.github.com/users/artem-mindrov/followers","following_url":"https://api.github.com/users/artem-mindrov/following{/other_user}","gists_url":"https://api.github.com/users/artem-mindrov/gists{/gist_id}","starred_url":"https://api.github.com/users/artem-mindrov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/artem-mindrov/subscriptions","organizations_url":"https://api.github.com/users/artem-mindrov/orgs","repos_url":"https://api.github.com/users/artem-mindrov/repos","events_url":"https://api.github.com/users/artem-mindrov/events{/privacy}","received_events_url":"https://api.github.com/users/artem-mindrov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-05-22T20:23:15Z","updated_at":"2012-05-22T20:23:15Z","body":"From a quick glance at Selenium driver code, it's able to compare elements using their refnums. I'm wondering if there is some driver-agnostic way to do this. If so, re-queried collection elements could be matched against the old set so you can rebuild your references in a consistent manner, or raise an exception saying that the element you're looking for is no longer there.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/5857794/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"artem-mindrov","id":1575475,"node_id":"MDQ6VXNlcjE1NzU0NzU=","avatar_url":"https://avatars.githubusercontent.com/u/1575475?v=4","gravatar_id":"","url":"https://api.github.com/users/artem-mindrov","html_url":"https://github.com/artem-mindrov","followers_url":"https://api.github.com/users/artem-mindrov/followers","following_url":"https://api.github.com/users/artem-mindrov/following{/other_user}","gists_url":"https://api.github.com/users/artem-mindrov/gists{/gist_id}","starred_url":"https://api.github.com/users/artem-mindrov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/artem-mindrov/subscriptions","organizations_url":"https://api.github.com/users/artem-mindrov/orgs","repos_url":"https://api.github.com/users/artem-mindrov/repos","events_url":"https://api.github.com/users/artem-mindrov/events{/privacy}","received_events_url":"https://api.github.com/users/artem-mindrov/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/5894399","html_url":"https://github.com/teamcapybara/capybara/issues/713#issuecomment-5894399","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/713","id":5894399,"node_id":"MDEyOklzc3VlQ29tbWVudDU4OTQzOTk=","user":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-05-24T07:30:20Z","updated_at":"2012-05-24T07:30:20Z","body":"I think that even with comparing refnums and stuff, we'll never be able to accurately capture the intent of the user. I think we'll be better off just not reloading in this case.\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/5894399/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/5959515","html_url":"https://github.com/teamcapybara/capybara/issues/713#issuecomment-5959515","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/713","id":5959515,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NTk1MTU=","user":{"login":"artem-mindrov","id":1575475,"node_id":"MDQ6VXNlcjE1NzU0NzU=","avatar_url":"https://avatars.githubusercontent.com/u/1575475?v=4","gravatar_id":"","url":"https://api.github.com/users/artem-mindrov","html_url":"https://github.com/artem-mindrov","followers_url":"https://api.github.com/users/artem-mindrov/followers","following_url":"https://api.github.com/users/artem-mindrov/following{/other_user}","gists_url":"https://api.github.com/users/artem-mindrov/gists{/gist_id}","starred_url":"https://api.github.com/users/artem-mindrov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/artem-mindrov/subscriptions","organizations_url":"https://api.github.com/users/artem-mindrov/orgs","repos_url":"https://api.github.com/users/artem-mindrov/repos","events_url":"https://api.github.com/users/artem-mindrov/events{/privacy}","received_events_url":"https://api.github.com/users/artem-mindrov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-05-28T05:54:38Z","updated_at":"2012-05-28T05:54:38Z","body":"This too seems like an OK solution. Do you think it's worth being documented?\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/5959515/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"artem-mindrov","id":1575475,"node_id":"MDQ6VXNlcjE1NzU0NzU=","avatar_url":"https://avatars.githubusercontent.com/u/1575475?v=4","gravatar_id":"","url":"https://api.github.com/users/artem-mindrov","html_url":"https://github.com/artem-mindrov","followers_url":"https://api.github.com/users/artem-mindrov/followers","following_url":"https://api.github.com/users/artem-mindrov/following{/other_user}","gists_url":"https://api.github.com/users/artem-mindrov/gists{/gist_id}","starred_url":"https://api.github.com/users/artem-mindrov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/artem-mindrov/subscriptions","organizations_url":"https://api.github.com/users/artem-mindrov/orgs","repos_url":"https://api.github.com/users/artem-mindrov/repos","events_url":"https://api.github.com/users/artem-mindrov/events{/privacy}","received_events_url":"https://api.github.com/users/artem-mindrov/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":17417184,"node_id":"MDExOkNsb3NlZEV2ZW50MTc0MTcxODQ=","url":"https://api.github.com/repos/teamcapybara/capybara/issues/events/17417184","actor":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"453cec449d9209330f6db0d89cf0c104dd3b7ee0","commit_url":"https://api.github.com/repos/teamcapybara/capybara/commits/453cec449d9209330f6db0d89cf0c104dd3b7ee0","created_at":"2012-06-11T15:30:12Z","state_reason":null,"performed_via_github_app":null},{"id":2564190121,"node_id":"MDExOkxvY2tlZEV2ZW50MjU2NDE5MDEyMQ==","url":"https://api.github.com/repos/teamcapybara/capybara/issues/events/2564190121","actor":{"login":"lock[bot]","id":33595554,"node_id":"MDM6Qm90MzM1OTU1NTQ=","avatar_url":"https://avatars.githubusercontent.com/in/6672?v=4","gravatar_id":"","url":"https://api.github.com/users/lock%5Bbot%5D","html_url":"https://github.com/apps/lock","followers_url":"https://api.github.com/users/lock%5Bbot%5D/followers","following_url":"https://api.github.com/users/lock%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/lock%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/lock%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lock%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/lock%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/lock%5Bbot%5D/repos","events_url":"https://api.github.com/users/lock%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/lock%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"locked","commit_id":null,"commit_url":null,"created_at":"2019-08-17T23:13:59Z","lock_reason":null,"performed_via_github_app":null}]