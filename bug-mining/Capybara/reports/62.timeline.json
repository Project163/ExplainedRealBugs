[{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/9210692","html_url":"https://github.com/teamcapybara/capybara/issues/843#issuecomment-9210692","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/843","id":9210692,"node_id":"MDEyOklzc3VlQ29tbWVudDkyMTA2OTI=","user":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-10-07T18:26:40Z","updated_at":"2012-10-07T18:26:40Z","body":"Interestingly I was just working on this issue today. @ramhoj and I discovered this a couple of weeks ago, kind of boggles my mind that no one has noticed it until now. It's damned difficult to write a test case for it though.\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/9210692/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":26352801,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjYzNTI4MDE=","url":"https://api.github.com/repos/teamcapybara/capybara/issues/events/26352801","actor":{"login":"ramhoj","id":116923,"node_id":"MDQ6VXNlcjExNjkyMw==","avatar_url":"https://avatars.githubusercontent.com/u/116923?v=4","gravatar_id":"","url":"https://api.github.com/users/ramhoj","html_url":"https://github.com/ramhoj","followers_url":"https://api.github.com/users/ramhoj/followers","following_url":"https://api.github.com/users/ramhoj/following{/other_user}","gists_url":"https://api.github.com/users/ramhoj/gists{/gist_id}","starred_url":"https://api.github.com/users/ramhoj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ramhoj/subscriptions","organizations_url":"https://api.github.com/users/ramhoj/orgs","repos_url":"https://api.github.com/users/ramhoj/repos","events_url":"https://api.github.com/users/ramhoj/events{/privacy}","received_events_url":"https://api.github.com/users/ramhoj/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2012-10-07T18:26:40Z","performed_via_github_app":null},{"id":26352802,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI2MzUyODAy","url":"https://api.github.com/repos/teamcapybara/capybara/issues/events/26352802","actor":{"login":"ramhoj","id":116923,"node_id":"MDQ6VXNlcjExNjkyMw==","avatar_url":"https://avatars.githubusercontent.com/u/116923?v=4","gravatar_id":"","url":"https://api.github.com/users/ramhoj","html_url":"https://github.com/ramhoj","followers_url":"https://api.github.com/users/ramhoj/followers","following_url":"https://api.github.com/users/ramhoj/following{/other_user}","gists_url":"https://api.github.com/users/ramhoj/gists{/gist_id}","starred_url":"https://api.github.com/users/ramhoj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ramhoj/subscriptions","organizations_url":"https://api.github.com/users/ramhoj/orgs","repos_url":"https://api.github.com/users/ramhoj/repos","events_url":"https://api.github.com/users/ramhoj/events{/privacy}","received_events_url":"https://api.github.com/users/ramhoj/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2012-10-07T18:26:40Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/9210698","html_url":"https://github.com/teamcapybara/capybara/issues/843#issuecomment-9210698","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/843","id":9210698,"node_id":"MDEyOklzc3VlQ29tbWVudDkyMTA2OTg=","user":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-10-07T18:27:39Z","updated_at":"2012-10-07T18:27:39Z","body":"I know exactly what is causing the problem, but it's a bit difficult to explain and the solution is the easy part anyway ;)\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/9210698/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/9211168","html_url":"https://github.com/teamcapybara/capybara/issues/843#issuecomment-9211168","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/843","id":9211168,"node_id":"MDEyOklzc3VlQ29tbWVudDkyMTExNjg=","user":{"login":"shepmaster","id":174509,"node_id":"MDQ6VXNlcjE3NDUwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/174509?v=4","gravatar_id":"","url":"https://api.github.com/users/shepmaster","html_url":"https://github.com/shepmaster","followers_url":"https://api.github.com/users/shepmaster/followers","following_url":"https://api.github.com/users/shepmaster/following{/other_user}","gists_url":"https://api.github.com/users/shepmaster/gists{/gist_id}","starred_url":"https://api.github.com/users/shepmaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shepmaster/subscriptions","organizations_url":"https://api.github.com/users/shepmaster/orgs","repos_url":"https://api.github.com/users/shepmaster/repos","events_url":"https://api.github.com/users/shepmaster/events{/privacy}","received_events_url":"https://api.github.com/users/shepmaster/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-10-07T19:09:40Z","updated_at":"2012-10-07T19:09:40Z","body":"I'm interested to see the solution. I had a few (bad) ideas:\n1. Load all the data immediately instead of looking it up later, which seems really expensive.\n2. Inform the driver what information you will want later and have it load e.g. the text, which seems to smear the logic all around the place.\n3. Catch the error and retry, but then you have to catch the right error at all the right places.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/9211168/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"shepmaster","id":174509,"node_id":"MDQ6VXNlcjE3NDUwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/174509?v=4","gravatar_id":"","url":"https://api.github.com/users/shepmaster","html_url":"https://github.com/shepmaster","followers_url":"https://api.github.com/users/shepmaster/followers","following_url":"https://api.github.com/users/shepmaster/following{/other_user}","gists_url":"https://api.github.com/users/shepmaster/gists{/gist_id}","starred_url":"https://api.github.com/users/shepmaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shepmaster/subscriptions","organizations_url":"https://api.github.com/users/shepmaster/orgs","repos_url":"https://api.github.com/users/shepmaster/repos","events_url":"https://api.github.com/users/shepmaster/events{/privacy}","received_events_url":"https://api.github.com/users/shepmaster/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/9211187","html_url":"https://github.com/teamcapybara/capybara/issues/843#issuecomment-9211187","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/843","id":9211187,"node_id":"MDEyOklzc3VlQ29tbWVudDkyMTExODc=","user":{"login":"shepmaster","id":174509,"node_id":"MDQ6VXNlcjE3NDUwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/174509?v=4","gravatar_id":"","url":"https://api.github.com/users/shepmaster","html_url":"https://github.com/shepmaster","followers_url":"https://api.github.com/users/shepmaster/followers","following_url":"https://api.github.com/users/shepmaster/following{/other_user}","gists_url":"https://api.github.com/users/shepmaster/gists{/gist_id}","starred_url":"https://api.github.com/users/shepmaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shepmaster/subscriptions","organizations_url":"https://api.github.com/users/shepmaster/orgs","repos_url":"https://api.github.com/users/shepmaster/repos","events_url":"https://api.github.com/users/shepmaster/events{/privacy}","received_events_url":"https://api.github.com/users/shepmaster/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-10-07T19:11:44Z","updated_at":"2012-10-07T19:11:44Z","body":"> no one has noticed it until now\n\nIn our case, we've noticed the problem for weeks and/or months. Retriggering our automated build _usually_ causes the problem to go away, so we do that and move on. I'm sure lots of people have similar experiences.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/9211187/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"shepmaster","id":174509,"node_id":"MDQ6VXNlcjE3NDUwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/174509?v=4","gravatar_id":"","url":"https://api.github.com/users/shepmaster","html_url":"https://github.com/shepmaster","followers_url":"https://api.github.com/users/shepmaster/followers","following_url":"https://api.github.com/users/shepmaster/following{/other_user}","gists_url":"https://api.github.com/users/shepmaster/gists{/gist_id}","starred_url":"https://api.github.com/users/shepmaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shepmaster/subscriptions","organizations_url":"https://api.github.com/users/shepmaster/orgs","repos_url":"https://api.github.com/users/shepmaster/repos","events_url":"https://api.github.com/users/shepmaster/events{/privacy}","received_events_url":"https://api.github.com/users/shepmaster/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/9212176","html_url":"https://github.com/teamcapybara/capybara/issues/843#issuecomment-9212176","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/843","id":9212176,"node_id":"MDEyOklzc3VlQ29tbWVudDkyMTIxNzY=","user":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-10-07T20:33:25Z","updated_at":"2012-10-07T20:34:07Z","body":"We already have all the relevant logic in place. If this is the same issue that I've found, and I think it is, then this should actually be fixed on master. It also shouldn't be hard to fix for 1.1.x at all.\n\nWhat's happening is that when an Element is initialized, we send in whatever selector was used to find that element. We can then use that selector to reload the Element at a later time, in case it has gone stale. Check out the implementation of first in Capybara 1.1.2:\n\n``` ruby\n      def first(*args)\n        options = extract_normalized_options(args)\n        found_elements = []\n\n        selector = Capybara::Selector.normalize(*args)\n        selector.xpaths.each do |path|\n          find_in_base(selector, path).each do |node|\n            if matches_options(node, options)\n              found_elements << node\n              return found_elements.last if not Capybara.prefer_visible_elements or node.visible?\n            end\n          end\n        end\n        found_elements.first\n      end\n```\n\nThe first three lines are where the bug occurs. We first extract the options from the arguments, this will actually remove them from the args array. Then we call `Capybara::Selector.normalize`, sending in all arguments, except we aren't because we just removed all the options. So effectively we are sending in the same selector, but without any options. Now #first itself will still work as intended, because we never actually use the options from the selector here. They only become useful when we try to reload the node. Which is why this appears as a race-condition/random failure, because if #first succeeds on the first try, everything is fine.\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/9212176/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/9259463","html_url":"https://github.com/teamcapybara/capybara/issues/843#issuecomment-9259463","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/843","id":9259463,"node_id":"MDEyOklzc3VlQ29tbWVudDkyNTk0NjM=","user":{"login":"shepmaster","id":174509,"node_id":"MDQ6VXNlcjE3NDUwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/174509?v=4","gravatar_id":"","url":"https://api.github.com/users/shepmaster","html_url":"https://github.com/shepmaster","followers_url":"https://api.github.com/users/shepmaster/followers","following_url":"https://api.github.com/users/shepmaster/following{/other_user}","gists_url":"https://api.github.com/users/shepmaster/gists{/gist_id}","starred_url":"https://api.github.com/users/shepmaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shepmaster/subscriptions","organizations_url":"https://api.github.com/users/shepmaster/orgs","repos_url":"https://api.github.com/users/shepmaster/repos","events_url":"https://api.github.com/users/shepmaster/events{/privacy}","received_events_url":"https://api.github.com/users/shepmaster/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-10-09T12:59:28Z","updated_at":"2012-10-09T12:59:28Z","body":"I'm trying to understand more, so just let me know when I'm too annoying and I'll stop asking questions. :-)\n\nIf the problem is because the selector doesn't have the right options, then why is a `StaleElementReferenceError` exception thrown? Wouldn't it just be an error where the node is incorrectly found or not found? At which point is the node reloaded? I've only looked at `all`, but I think the same behavior would occur in `first` if you added a sleep between `find_in_base` and `matches_options`. That would then throw StaleElementReferenceError, which would need to be handled by `wait_until`, right?\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/9259463/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"shepmaster","id":174509,"node_id":"MDQ6VXNlcjE3NDUwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/174509?v=4","gravatar_id":"","url":"https://api.github.com/users/shepmaster","html_url":"https://github.com/shepmaster","followers_url":"https://api.github.com/users/shepmaster/followers","following_url":"https://api.github.com/users/shepmaster/following{/other_user}","gists_url":"https://api.github.com/users/shepmaster/gists{/gist_id}","starred_url":"https://api.github.com/users/shepmaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shepmaster/subscriptions","organizations_url":"https://api.github.com/users/shepmaster/orgs","repos_url":"https://api.github.com/users/shepmaster/repos","events_url":"https://api.github.com/users/shepmaster/events{/privacy}","received_events_url":"https://api.github.com/users/shepmaster/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/9276832","html_url":"https://github.com/teamcapybara/capybara/issues/843#issuecomment-9276832","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/843","id":9276832,"node_id":"MDEyOklzc3VlQ29tbWVudDkyNzY4MzI=","user":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-10-09T20:03:01Z","updated_at":"2012-10-09T20:03:01Z","body":"Hmm, that's a good point. The only scenario where this would throw a `StaleElementReferenceError` would be if the lack of options would cause the reload to fail, which would only occur if the lack of options would cause there to be _less_ results. AFAIK the only option which _increases_ the number of nodes found would be `visible: false` if `Capybara.ignore_hidden_elements` is set to true. I don't think that is the case here. I will investigate this further. Let me know if you come up with any further insights.\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/9276832/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/9620380","html_url":"https://github.com/teamcapybara/capybara/issues/843#issuecomment-9620380","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/843","id":9620380,"node_id":"MDEyOklzc3VlQ29tbWVudDk2MjAzODA=","user":{"login":"shepmaster","id":174509,"node_id":"MDQ6VXNlcjE3NDUwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/174509?v=4","gravatar_id":"","url":"https://api.github.com/users/shepmaster","html_url":"https://github.com/shepmaster","followers_url":"https://api.github.com/users/shepmaster/followers","following_url":"https://api.github.com/users/shepmaster/following{/other_user}","gists_url":"https://api.github.com/users/shepmaster/gists{/gist_id}","starred_url":"https://api.github.com/users/shepmaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shepmaster/subscriptions","organizations_url":"https://api.github.com/users/shepmaster/orgs","repos_url":"https://api.github.com/users/shepmaster/repos","events_url":"https://api.github.com/users/shepmaster/events{/privacy}","received_events_url":"https://api.github.com/users/shepmaster/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-10-19T21:02:53Z","updated_at":"2012-10-19T21:02:53Z","body":"What about this idea.\n\nfrom Capybara::Node::Element#reload\n\n``` ruby\nreloaded = parent.reload.first(@selector.name, @selector.locator, @selector.options)\n@base = reloaded.base if reloaded\n```\n\nWhat is the expected code flow when the element appears (so `@base` is originally set), then we reload waiting for the element to disappear? If the element disappears, reloaded would be nil, so it wouldn't replace `@base`, which still points to the old element. Then we eventually run out of retry time and fail.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/9620380/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"shepmaster","id":174509,"node_id":"MDQ6VXNlcjE3NDUwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/174509?v=4","gravatar_id":"","url":"https://api.github.com/users/shepmaster","html_url":"https://github.com/shepmaster","followers_url":"https://api.github.com/users/shepmaster/followers","following_url":"https://api.github.com/users/shepmaster/following{/other_user}","gists_url":"https://api.github.com/users/shepmaster/gists{/gist_id}","starred_url":"https://api.github.com/users/shepmaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shepmaster/subscriptions","organizations_url":"https://api.github.com/users/shepmaster/orgs","repos_url":"https://api.github.com/users/shepmaster/repos","events_url":"https://api.github.com/users/shepmaster/events{/privacy}","received_events_url":"https://api.github.com/users/shepmaster/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/9811136","html_url":"https://github.com/teamcapybara/capybara/issues/843#issuecomment-9811136","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/843","id":9811136,"node_id":"MDEyOklzc3VlQ29tbWVudDk4MTExMzY=","user":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-10-26T12:22:26Z","updated_at":"2012-10-26T12:23:24Z","body":"I finally had some time to look at this problem, and I think I understand what's happening now. Your description of the error seems spot on to me. I ran RSpec in a loop and the problem only manifested after 20 or so successful attempts, so it seems the race condition is quite rare, and that's to be expected, considering it would only occur if the element is deleted between when it is found and Capybara checks the text content.\n\nWhen #text is called, it tries to reload the element it is being called on, for a period of time. Unfortunately this doesn't help us in this case, since the Element is gone, and not coming back, so #text tries in vain to reload it. In this case we would have been satisfied with the element being gone, and we could have simply returned a negative match.\n\nWe could change the behaviour of #text to return `nil` if it can't reload the element, but I'm not sure I like the implications of that. What is the content of an element that no longer exists? Is it an empty string, nil? An exception seems like the most sane response to asking for the text of an element that doesn't exist. This would also throw us into a loop of waiting for the answer until we can get a valid element, which we never will.\n\nI'm thinking we should have some way of bypassing synchronization entirely. I don't know exactly how that would work. Maybe have a method on the session which takes a block and call it something like `without_synchronizing` or something. Then we could wrap the text comparison in this bypass block. If it would fail, it would simply return nil.\n\nThe semantics of this are pretty weird, so I'm not really sure how to make this understandable.\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/9811136/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/9821160","html_url":"https://github.com/teamcapybara/capybara/issues/843#issuecomment-9821160","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/843","id":9821160,"node_id":"MDEyOklzc3VlQ29tbWVudDk4MjExNjA=","user":{"login":"shepmaster","id":174509,"node_id":"MDQ6VXNlcjE3NDUwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/174509?v=4","gravatar_id":"","url":"https://api.github.com/users/shepmaster","html_url":"https://github.com/shepmaster","followers_url":"https://api.github.com/users/shepmaster/followers","following_url":"https://api.github.com/users/shepmaster/following{/other_user}","gists_url":"https://api.github.com/users/shepmaster/gists{/gist_id}","starred_url":"https://api.github.com/users/shepmaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shepmaster/subscriptions","organizations_url":"https://api.github.com/users/shepmaster/orgs","repos_url":"https://api.github.com/users/shepmaster/repos","events_url":"https://api.github.com/users/shepmaster/events{/privacy}","received_events_url":"https://api.github.com/users/shepmaster/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-10-26T17:46:07Z","updated_at":"2012-10-26T17:46:07Z","body":"I'm surprised that you saw it reproduce so infrequently. The testcase I created has large sleeps that should make it very easy to trigger - I saw it reproduce 100%. In the wild it would certainly be harder to reproduce.\n\nI agree that `#text` shouldn't be changed to return `nil`. That would confuse the semantics too much. This statement made me think though:\n\n> What is the content of an element that no longer exists?\n\nExistence is a first-class state of an element. Perhaps `Capybara::Node::Element` (or wherever appropriate) needs to have an `#exists?` method added. Then we can just check if the element exists. If the element doesn't exist inside `#has_selector`, then that would be a fast failure. Inside `#has_no_selector` it could be a fast success, equivalent to the current `results.empty` test.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/9821160/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"shepmaster","id":174509,"node_id":"MDQ6VXNlcjE3NDUwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/174509?v=4","gravatar_id":"","url":"https://api.github.com/users/shepmaster","html_url":"https://github.com/shepmaster","followers_url":"https://api.github.com/users/shepmaster/followers","following_url":"https://api.github.com/users/shepmaster/following{/other_user}","gists_url":"https://api.github.com/users/shepmaster/gists{/gist_id}","starred_url":"https://api.github.com/users/shepmaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shepmaster/subscriptions","organizations_url":"https://api.github.com/users/shepmaster/orgs","repos_url":"https://api.github.com/users/shepmaster/repos","events_url":"https://api.github.com/users/shepmaster/events{/privacy}","received_events_url":"https://api.github.com/users/shepmaster/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/9828672","html_url":"https://github.com/teamcapybara/capybara/issues/843#issuecomment-9828672","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/843","id":9828672,"node_id":"MDEyOklzc3VlQ29tbWVudDk4Mjg2NzI=","user":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-10-26T22:10:02Z","updated_at":"2012-10-26T22:10:02Z","body":"Not a bad idea, but that would still leave us open to race conditions, what if it still exists when we call exists? and then ceases to exist just before we call #text.\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/9828672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/9899676","html_url":"https://github.com/teamcapybara/capybara/issues/843#issuecomment-9899676","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/843","id":9899676,"node_id":"MDEyOklzc3VlQ29tbWVudDk4OTk2NzY=","user":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-10-30T09:46:21Z","updated_at":"2012-10-30T09:46:21Z","body":"This is a simplified version of the example app, in a single file, way easier to work with. https://gist.github.com/d5a497aa4a5ff52b2a8b\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/9899676/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":28099609,"node_id":"MDExOkNsb3NlZEV2ZW50MjgwOTk2MDk=","url":"https://api.github.com/repos/teamcapybara/capybara/issues/events/28099609","actor":null,"event":"closed","commit_id":"792781f00b793056c8ec85a5b559f1f8e480515d","commit_url":"https://api.github.com/repos/teamcapybara/capybara/commits/792781f00b793056c8ec85a5b559f1f8e480515d","created_at":"2012-10-30T10:09:14Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/9900322","html_url":"https://github.com/teamcapybara/capybara/issues/843#issuecomment-9900322","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/843","id":9900322,"node_id":"MDEyOklzc3VlQ29tbWVudDk5MDAzMjI=","user":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-10-30T10:11:11Z","updated_at":"2012-10-30T10:11:11Z","body":"I couldn't come up with any way of testing this, short of running a loop until it fails, which isn't an awesome test case. So no tests for this, sorry.\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/9900322/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/9900330","html_url":"https://github.com/teamcapybara/capybara/issues/843#issuecomment-9900330","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/843","id":9900330,"node_id":"MDEyOklzc3VlQ29tbWVudDk5MDAzMzA=","user":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-10-30T10:11:36Z","updated_at":"2012-10-30T10:11:36Z","body":"Also, still working on fixing this on 1.1_stable, and we'll do a new gem release on that branch.\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/9900330/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/9900377","html_url":"https://github.com/teamcapybara/capybara/issues/843#issuecomment-9900377","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/843","id":9900377,"node_id":"MDEyOklzc3VlQ29tbWVudDk5MDAzNzc=","user":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-10-30T10:13:14Z","updated_at":"2012-10-30T10:13:26Z","body":"(forgot to change the git name on the machine I was working in, I authored that commit, not @ramhoj ;))\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/9900377/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":28099830,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjgwOTk4MzA=","url":"https://api.github.com/repos/teamcapybara/capybara/issues/events/28099830","actor":{"login":"ramhoj","id":116923,"node_id":"MDQ6VXNlcjExNjkyMw==","avatar_url":"https://avatars.githubusercontent.com/u/116923?v=4","gravatar_id":"","url":"https://api.github.com/users/ramhoj","html_url":"https://github.com/ramhoj","followers_url":"https://api.github.com/users/ramhoj/followers","following_url":"https://api.github.com/users/ramhoj/following{/other_user}","gists_url":"https://api.github.com/users/ramhoj/gists{/gist_id}","starred_url":"https://api.github.com/users/ramhoj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ramhoj/subscriptions","organizations_url":"https://api.github.com/users/ramhoj/orgs","repos_url":"https://api.github.com/users/ramhoj/repos","events_url":"https://api.github.com/users/ramhoj/events{/privacy}","received_events_url":"https://api.github.com/users/ramhoj/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2012-10-30T10:13:14Z","performed_via_github_app":null},{"id":28099831,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI4MDk5ODMx","url":"https://api.github.com/repos/teamcapybara/capybara/issues/events/28099831","actor":{"login":"ramhoj","id":116923,"node_id":"MDQ6VXNlcjExNjkyMw==","avatar_url":"https://avatars.githubusercontent.com/u/116923?v=4","gravatar_id":"","url":"https://api.github.com/users/ramhoj","html_url":"https://github.com/ramhoj","followers_url":"https://api.github.com/users/ramhoj/followers","following_url":"https://api.github.com/users/ramhoj/following{/other_user}","gists_url":"https://api.github.com/users/ramhoj/gists{/gist_id}","starred_url":"https://api.github.com/users/ramhoj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ramhoj/subscriptions","organizations_url":"https://api.github.com/users/ramhoj/orgs","repos_url":"https://api.github.com/users/ramhoj/repos","events_url":"https://api.github.com/users/ramhoj/events{/privacy}","received_events_url":"https://api.github.com/users/ramhoj/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2012-10-30T10:13:14Z","performed_via_github_app":null},{"id":28100827,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI4MTAwODI3","url":"https://api.github.com/repos/teamcapybara/capybara/issues/events/28100827","actor":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"3a83c53adcb55e08dd8acd02fb061392f5d8482b","commit_url":"https://api.github.com/repos/teamcapybara/capybara/commits/3a83c53adcb55e08dd8acd02fb061392f5d8482b","created_at":"2012-10-30T10:27:05Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/10916404","html_url":"https://github.com/teamcapybara/capybara/issues/843#issuecomment-10916404","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/843","id":10916404,"node_id":"MDEyOklzc3VlQ29tbWVudDEwOTE2NDA0","user":{"login":"wmadden","id":12165,"node_id":"MDQ6VXNlcjEyMTY1","avatar_url":"https://avatars.githubusercontent.com/u/12165?v=4","gravatar_id":"","url":"https://api.github.com/users/wmadden","html_url":"https://github.com/wmadden","followers_url":"https://api.github.com/users/wmadden/followers","following_url":"https://api.github.com/users/wmadden/following{/other_user}","gists_url":"https://api.github.com/users/wmadden/gists{/gist_id}","starred_url":"https://api.github.com/users/wmadden/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wmadden/subscriptions","organizations_url":"https://api.github.com/users/wmadden/orgs","repos_url":"https://api.github.com/users/wmadden/repos","events_url":"https://api.github.com/users/wmadden/events{/privacy}","received_events_url":"https://api.github.com/users/wmadden/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-12-01T12:02:16Z","updated_at":"2012-12-01T12:02:16Z","body":"I get the same behaviour consistently using `expect(page).to have_css('.foo', count: 4)`\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/10916404/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wmadden","id":12165,"node_id":"MDQ6VXNlcjEyMTY1","avatar_url":"https://avatars.githubusercontent.com/u/12165?v=4","gravatar_id":"","url":"https://api.github.com/users/wmadden","html_url":"https://github.com/wmadden","followers_url":"https://api.github.com/users/wmadden/followers","following_url":"https://api.github.com/users/wmadden/following{/other_user}","gists_url":"https://api.github.com/users/wmadden/gists{/gist_id}","starred_url":"https://api.github.com/users/wmadden/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wmadden/subscriptions","organizations_url":"https://api.github.com/users/wmadden/orgs","repos_url":"https://api.github.com/users/wmadden/repos","events_url":"https://api.github.com/users/wmadden/events{/privacy}","received_events_url":"https://api.github.com/users/wmadden/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/10916644","html_url":"https://github.com/teamcapybara/capybara/issues/843#issuecomment-10916644","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/843","id":10916644,"node_id":"MDEyOklzc3VlQ29tbWVudDEwOTE2NjQ0","user":{"login":"wmadden","id":12165,"node_id":"MDQ6VXNlcjEyMTY1","avatar_url":"https://avatars.githubusercontent.com/u/12165?v=4","gravatar_id":"","url":"https://api.github.com/users/wmadden","html_url":"https://github.com/wmadden","followers_url":"https://api.github.com/users/wmadden/followers","following_url":"https://api.github.com/users/wmadden/following{/other_user}","gists_url":"https://api.github.com/users/wmadden/gists{/gist_id}","starred_url":"https://api.github.com/users/wmadden/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wmadden/subscriptions","organizations_url":"https://api.github.com/users/wmadden/orgs","repos_url":"https://api.github.com/users/wmadden/repos","events_url":"https://api.github.com/users/wmadden/events{/privacy}","received_events_url":"https://api.github.com/users/wmadden/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2012-12-01T12:38:52Z","updated_at":"2012-12-01T12:38:52Z","body":"In fact it occurs while generating the expectation failure message:\n\n```\nSelenium::WebDriver::Error::StaleElementReferenceError: Element not found in the cache - perhaps the page has changed since it was looked up\n[remote server] resource://fxdriver/modules/web_element_cache.js:7281:in `unknown'\n[remote server] file:///var/folders/r4/3w9pk18923vfxq_l5c2brbfw0000gn/T/webdriver-profile20121201-83055-nhcx5m/extensions/fxdriver@googlecode.com/components/command_processor.js:6903:in `unknown'\n[remote server] file:///var/folders/r4/3w9pk18923vfxq_l5c2brbfw0000gn/T/webdriver-profile20121201-83055-nhcx5m/extensions/fxdriver@googlecode.com/components/command_processor.js:9793:in `unknown'\n[remote server] file:///var/folders/r4/3w9pk18923vfxq_l5c2brbfw0000gn/T/webdriver-profile20121201-83055-nhcx5m/extensions/fxdriver@googlecode.com/components/command_processor.js:10337:in `unknown'\n[remote server] file:///var/folders/r4/3w9pk18923vfxq_l5c2brbfw0000gn/T/webdriver-profile20121201-83055-nhcx5m/extensions/fxdriver@googlecode.com/components/command_processor.js:10342:in `unknown'\n[remote server] file:///var/folders/r4/3w9pk18923vfxq_l5c2brbfw0000gn/T/webdriver-profile20121201-83055-nhcx5m/extensions/fxdriver@googlecode.com/components/command_processor.js:10282:in `unknown'\n/Users/will/.rvm/gems/ruby-1.9.3-p194@education/gems/selenium-webdriver-2.26.0/lib/selenium/webdriver/remote/response.rb:52:in `assert_ok'\n/Users/will/.rvm/gems/ruby-1.9.3-p194@education/gems/selenium-webdriver-2.26.0/lib/selenium/webdriver/remote/response.rb:15:in `initialize'\n/Users/will/.rvm/gems/ruby-1.9.3-p194@education/gems/selenium-webdriver-2.26.0/lib/selenium/webdriver/remote/http/common.rb:59:in `new'\n/Users/will/.rvm/gems/ruby-1.9.3-p194@education/gems/selenium-webdriver-2.26.0/lib/selenium/webdriver/remote/http/common.rb:59:in `create_response'\n/Users/will/.rvm/gems/ruby-1.9.3-p194@education/gems/selenium-webdriver-2.26.0/lib/selenium/webdriver/remote/http/default.rb:66:in `request'\n/Users/will/.rvm/gems/ruby-1.9.3-p194@education/gems/selenium-webdriver-2.26.0/lib/selenium/webdriver/remote/http/common.rb:40:in `call'\n/Users/will/.rvm/gems/ruby-1.9.3-p194@education/gems/selenium-webdriver-2.26.0/lib/selenium/webdriver/remote/bridge.rb:598:in `raw_execute'\n/Users/will/.rvm/gems/ruby-1.9.3-p194@education/gems/selenium-webdriver-2.26.0/lib/selenium/webdriver/remote/bridge.rb:576:in `execute'\n/Users/will/.rvm/gems/ruby-1.9.3-p194@education/gems/selenium-webdriver-2.26.0/lib/selenium/webdriver/remote/bridge.rb:487:in `getElementText'\n/Users/will/.rvm/gems/ruby-1.9.3-p194@education/gems/selenium-webdriver-2.26.0/lib/selenium/webdriver/common/element.rb:108:in `text'\n/Users/will/.rvm/gems/ruby-1.9.3-p194@education/gems/capybara-2.0.1/lib/capybara/selenium/node.rb:4:in `text'\n/Users/will/.rvm/gems/ruby-1.9.3-p194@education/gems/capybara-2.0.1/lib/capybara/node/element.rb:48:in `block in text'\n/Users/will/.rvm/gems/ruby-1.9.3-p194@education/gems/capybara-2.0.1/lib/capybara/node/base.rb:77:in `synchronize'\n/Users/will/.rvm/gems/ruby-1.9.3-p194@education/gems/capybara-2.0.1/lib/capybara/node/element.rb:48:in `text'\n/Users/will/.rvm/gems/ruby-1.9.3-p194@education/gems/capybara-2.0.1/lib/capybara/result.rb:47:in `map'\n/Users/will/.rvm/gems/ruby-1.9.3-p194@education/gems/capybara-2.0.1/lib/capybara/result.rb:47:in `failure_message'\n/Users/will/.rvm/gems/ruby-1.9.3-p194@education/gems/capybara-2.0.1/lib/capybara/node/matchers.rb:86:in `block in assert_selector'\n/Users/will/.rvm/gems/ruby-1.9.3-p194@education/gems/capybara-2.0.1/lib/capybara/node/base.rb:77:in `synchronize'\n/Users/will/.rvm/gems/ruby-1.9.3-p194@education/gems/capybara-2.0.1/lib/capybara/node/matchers.rb:84:in `assert_selector'\n/Users/will/.rvm/gems/ruby-1.9.3-p194@education/gems/capybara-2.0.1/lib/capybara/session.rb:338:in `block (2 levels) in <class:Session>'\n/Users/will/.rvm/gems/ruby-1.9.3-p194@education/gems/capybara-2.0.1/lib/capybara/rspec/matchers.rb:9:in `matches?'\n/Users/will/.rvm/gems/ruby-1.9.3-p194@education/gems/rspec-expectations-2.12.0/lib/rspec/expectations/handler.rb:23:in `handle_matcher'\n/Users/will/.rvm/gems/ruby-1.9.3-p194@education/gems/rspec-expectations-2.12.0/lib/rspec/expectations/expectation_target.rb:34:in `to'\n```\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/10916644/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wmadden","id":12165,"node_id":"MDQ6VXNlcjEyMTY1","avatar_url":"https://avatars.githubusercontent.com/u/12165?v=4","gravatar_id":"","url":"https://api.github.com/users/wmadden","html_url":"https://github.com/wmadden","followers_url":"https://api.github.com/users/wmadden/followers","following_url":"https://api.github.com/users/wmadden/following{/other_user}","gists_url":"https://api.github.com/users/wmadden/gists{/gist_id}","starred_url":"https://api.github.com/users/wmadden/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wmadden/subscriptions","organizations_url":"https://api.github.com/users/wmadden/orgs","repos_url":"https://api.github.com/users/wmadden/repos","events_url":"https://api.github.com/users/wmadden/events{/privacy}","received_events_url":"https://api.github.com/users/wmadden/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/13130234","html_url":"https://github.com/teamcapybara/capybara/issues/843#issuecomment-13130234","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/843","id":13130234,"node_id":"MDEyOklzc3VlQ29tbWVudDEzMTMwMjM0","user":{"login":"ffess","id":3404622,"node_id":"MDQ6VXNlcjM0MDQ2MjI=","avatar_url":"https://avatars.githubusercontent.com/u/3404622?v=4","gravatar_id":"","url":"https://api.github.com/users/ffess","html_url":"https://github.com/ffess","followers_url":"https://api.github.com/users/ffess/followers","following_url":"https://api.github.com/users/ffess/following{/other_user}","gists_url":"https://api.github.com/users/ffess/gists{/gist_id}","starred_url":"https://api.github.com/users/ffess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ffess/subscriptions","organizations_url":"https://api.github.com/users/ffess/orgs","repos_url":"https://api.github.com/users/ffess/repos","events_url":"https://api.github.com/users/ffess/events{/privacy}","received_events_url":"https://api.github.com/users/ffess/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-02-05T13:59:45Z","updated_at":"2013-02-05T14:01:03Z","body":"I have the same problem using \n`expect(element).to have_text \"foo\"`\ninside synchronize method. And btw this exception appears regularly (I mean every time)\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/13130234/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ffess","id":3404622,"node_id":"MDQ6VXNlcjM0MDQ2MjI=","avatar_url":"https://avatars.githubusercontent.com/u/3404622?v=4","gravatar_id":"","url":"https://api.github.com/users/ffess","html_url":"https://github.com/ffess","followers_url":"https://api.github.com/users/ffess/followers","following_url":"https://api.github.com/users/ffess/following{/other_user}","gists_url":"https://api.github.com/users/ffess/gists{/gist_id}","starred_url":"https://api.github.com/users/ffess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ffess/subscriptions","organizations_url":"https://api.github.com/users/ffess/orgs","repos_url":"https://api.github.com/users/ffess/repos","events_url":"https://api.github.com/users/ffess/events{/privacy}","received_events_url":"https://api.github.com/users/ffess/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/13138888","html_url":"https://github.com/teamcapybara/capybara/issues/843#issuecomment-13138888","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/843","id":13138888,"node_id":"MDEyOklzc3VlQ29tbWVudDEzMTM4ODg4","user":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-02-05T16:46:52Z","updated_at":"2013-02-05T16:46:52Z","body":"@ffess That's one reason you should be careful of using `synchronize`. It's a powerful methods, but it's semantics are very subtle. You will probably have to strategically call `unsychronized`, to fix these race conditions.\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/13138888/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":36772139,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzY3NzIxMzk=","url":"https://api.github.com/repos/teamcapybara/capybara/issues/events/36772139","actor":{"login":"ffess","id":3404622,"node_id":"MDQ6VXNlcjM0MDQ2MjI=","avatar_url":"https://avatars.githubusercontent.com/u/3404622?v=4","gravatar_id":"","url":"https://api.github.com/users/ffess","html_url":"https://github.com/ffess","followers_url":"https://api.github.com/users/ffess/followers","following_url":"https://api.github.com/users/ffess/following{/other_user}","gists_url":"https://api.github.com/users/ffess/gists{/gist_id}","starred_url":"https://api.github.com/users/ffess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ffess/subscriptions","organizations_url":"https://api.github.com/users/ffess/orgs","repos_url":"https://api.github.com/users/ffess/repos","events_url":"https://api.github.com/users/ffess/events{/privacy}","received_events_url":"https://api.github.com/users/ffess/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2013-02-05T16:46:52Z","performed_via_github_app":null},{"id":36772140,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM2NzcyMTQw","url":"https://api.github.com/repos/teamcapybara/capybara/issues/events/36772140","actor":{"login":"ffess","id":3404622,"node_id":"MDQ6VXNlcjM0MDQ2MjI=","avatar_url":"https://avatars.githubusercontent.com/u/3404622?v=4","gravatar_id":"","url":"https://api.github.com/users/ffess","html_url":"https://github.com/ffess","followers_url":"https://api.github.com/users/ffess/followers","following_url":"https://api.github.com/users/ffess/following{/other_user}","gists_url":"https://api.github.com/users/ffess/gists{/gist_id}","starred_url":"https://api.github.com/users/ffess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ffess/subscriptions","organizations_url":"https://api.github.com/users/ffess/orgs","repos_url":"https://api.github.com/users/ffess/repos","events_url":"https://api.github.com/users/ffess/events{/privacy}","received_events_url":"https://api.github.com/users/ffess/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2013-02-05T16:46:52Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/13139495","html_url":"https://github.com/teamcapybara/capybara/issues/843#issuecomment-13139495","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/843","id":13139495,"node_id":"MDEyOklzc3VlQ29tbWVudDEzMTM5NDk1","user":{"login":"ffess","id":3404622,"node_id":"MDQ6VXNlcjM0MDQ2MjI=","avatar_url":"https://avatars.githubusercontent.com/u/3404622?v=4","gravatar_id":"","url":"https://api.github.com/users/ffess","html_url":"https://github.com/ffess","followers_url":"https://api.github.com/users/ffess/followers","following_url":"https://api.github.com/users/ffess/following{/other_user}","gists_url":"https://api.github.com/users/ffess/gists{/gist_id}","starred_url":"https://api.github.com/users/ffess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ffess/subscriptions","organizations_url":"https://api.github.com/users/ffess/orgs","repos_url":"https://api.github.com/users/ffess/repos","events_url":"https://api.github.com/users/ffess/events{/privacy}","received_events_url":"https://api.github.com/users/ffess/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-02-05T16:58:25Z","updated_at":"2013-02-05T17:02:21Z","body":"Hi jnicklas, I've asked on google groups how to use the synchronize method exactly, but no one answered me (I'm new to capybara and I use it about 2 months at all and lot of investigating didn't help me to learn how to use the method, but I really need it)\n\nI found that while implementing the yield provided with synchronize method it should rescue the StaleElementReferenceError but it's not:(\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/13139495/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ffess","id":3404622,"node_id":"MDQ6VXNlcjM0MDQ2MjI=","avatar_url":"https://avatars.githubusercontent.com/u/3404622?v=4","gravatar_id":"","url":"https://api.github.com/users/ffess","html_url":"https://github.com/ffess","followers_url":"https://api.github.com/users/ffess/followers","following_url":"https://api.github.com/users/ffess/following{/other_user}","gists_url":"https://api.github.com/users/ffess/gists{/gist_id}","starred_url":"https://api.github.com/users/ffess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ffess/subscriptions","organizations_url":"https://api.github.com/users/ffess/orgs","repos_url":"https://api.github.com/users/ffess/repos","events_url":"https://api.github.com/users/ffess/events{/privacy}","received_events_url":"https://api.github.com/users/ffess/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/13139726","html_url":"https://github.com/teamcapybara/capybara/issues/843#issuecomment-13139726","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/843","id":13139726,"node_id":"MDEyOklzc3VlQ29tbWVudDEzMTM5NzI2","user":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-02-05T17:02:53Z","updated_at":"2013-02-05T17:02:53Z","body":"Did you read this? http://www.elabs.se/blog/53-why-wait_until-was-removed-from-capybara\n\nUnless you have a very good understanding of how the Capybara codebase works, I would recommend not to use `synchronize` at all, it's a very tricky method. If you really must use a waiting function, you can find one in the linked blog post, but I suggest you try to understand the point it makes and avoid using it in the first place, there are very few cases where you need to wait with Capybara.\n\nAs for the mailing list, I try to answer as many questions as I can, but sometimes I just don't have the time or energy.\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/13139726/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jnicklas","id":134,"node_id":"MDQ6VXNlcjEzNA==","avatar_url":"https://avatars.githubusercontent.com/u/134?v=4","gravatar_id":"","url":"https://api.github.com/users/jnicklas","html_url":"https://github.com/jnicklas","followers_url":"https://api.github.com/users/jnicklas/followers","following_url":"https://api.github.com/users/jnicklas/following{/other_user}","gists_url":"https://api.github.com/users/jnicklas/gists{/gist_id}","starred_url":"https://api.github.com/users/jnicklas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnicklas/subscriptions","organizations_url":"https://api.github.com/users/jnicklas/orgs","repos_url":"https://api.github.com/users/jnicklas/repos","events_url":"https://api.github.com/users/jnicklas/events{/privacy}","received_events_url":"https://api.github.com/users/jnicklas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/13176232","html_url":"https://github.com/teamcapybara/capybara/issues/843#issuecomment-13176232","issue_url":"https://api.github.com/repos/teamcapybara/capybara/issues/843","id":13176232,"node_id":"MDEyOklzc3VlQ29tbWVudDEzMTc2MjMy","user":{"login":"ffess","id":3404622,"node_id":"MDQ6VXNlcjM0MDQ2MjI=","avatar_url":"https://avatars.githubusercontent.com/u/3404622?v=4","gravatar_id":"","url":"https://api.github.com/users/ffess","html_url":"https://github.com/ffess","followers_url":"https://api.github.com/users/ffess/followers","following_url":"https://api.github.com/users/ffess/following{/other_user}","gists_url":"https://api.github.com/users/ffess/gists{/gist_id}","starred_url":"https://api.github.com/users/ffess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ffess/subscriptions","organizations_url":"https://api.github.com/users/ffess/orgs","repos_url":"https://api.github.com/users/ffess/repos","events_url":"https://api.github.com/users/ffess/events{/privacy}","received_events_url":"https://api.github.com/users/ffess/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-02-06T10:49:14Z","updated_at":"2013-02-06T10:52:40Z","body":"Hi again,\nSorry for answering here, but I don't know how to contact you in other way.\nI've read the article (not the first time but anyway) but it can't help me, I decided to avoid the synchronize method using. And now the line:\n`expect(page).to have_selector(\"#foo\", text: \"foo\")`\nthrows the\n\nStaleElementReferenceError: findElements execution failed;\nElement does not exist in cache\n\nfrom the inside synchronize method. \nBut am I right thinking that this particular exception should be rescued by synchronize method?\nI concluded it from the line:\n`raise e unless driver.invalid_element_errors.include?(e.class) || e.is_a?(Capybara::ElementNotFound)`\nand\none of  `invalid_element_errors` is StaleElementReferenceError\n\nupd: should I use the wait_until provided by you in https://gist.github.com/jnicklas/d8da686061f0a59ffdf7?\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/teamcapybara/capybara/issues/comments/13176232/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ffess","id":3404622,"node_id":"MDQ6VXNlcjM0MDQ2MjI=","avatar_url":"https://avatars.githubusercontent.com/u/3404622?v=4","gravatar_id":"","url":"https://api.github.com/users/ffess","html_url":"https://github.com/ffess","followers_url":"https://api.github.com/users/ffess/followers","following_url":"https://api.github.com/users/ffess/following{/other_user}","gists_url":"https://api.github.com/users/ffess/gists{/gist_id}","starred_url":"https://api.github.com/users/ffess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ffess/subscriptions","organizations_url":"https://api.github.com/users/ffess/orgs","repos_url":"https://api.github.com/users/ffess/repos","events_url":"https://api.github.com/users/ffess/events{/privacy}","received_events_url":"https://api.github.com/users/ffess/received_events","type":"User","user_view_type":"public","site_admin":false}}]