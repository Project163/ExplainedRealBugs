<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:41:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CRYPTO-45] Document how to build Commons Crypto</title>
                <link>https://issues.apache.org/jira/browse/CRYPTO-45</link>
                <project id="12320024" key="CRYPTO">Commons Crypto</project>
                    <description>&lt;p&gt;While trying to deploy the website I run into this problem:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[INFO] --- maven-antrun-plugin:1.7:run (make) @ commons-crypto ---
[INFO] Executing tasks

make:
     [exec] compiling OSInfo.java
     [exec] &lt;span class=&quot;code-quote&quot;&gt;&quot;$JAVA_HOME/bin/javac&quot;&lt;/span&gt; -source 1.6 -target 1.6 -d target/jni-classes -sourcepath src/main/java src/main/java/org/apache/commons/crypto/random/OpensslCryptoRandomNative.java
     [exec] warning: [options] bootstrap &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;path not set in conjunction with -source 1.6
     [exec] 1 warning
     [exec] &lt;span class=&quot;code-quote&quot;&gt;&quot;$JAVA_HOME/bin/javah&quot;&lt;/span&gt; -force -classpath target/jni-classes -o target/jni-classes/org/apache/commons/crypto/random/OpensslCryptoRandomNative.h org.apache.commons.crypto.random.OpensslCryptoRandomNative
     [exec] gcc -arch x86_64 -Ilib/inc_mac -I/Library/Java/JavaVirtualMachines/jdk1.8.0_65.jdk/Contents/Home/include -O2 -fPIC -mmacosx-version-min=10.5 -fvisibility=hidden -Ilib/include -I/usr/include -I&lt;span class=&quot;code-quote&quot;&gt;&quot;src/main/&lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;/org/apache/commons/crypto/&quot;&lt;/span&gt; -I&lt;span class=&quot;code-quote&quot;&gt;&quot;/Library/Java/JavaVirtualMachines/jdk1.8.0_65.jdk/Contents/Home/include/darwin&quot;&lt;/span&gt; -I&lt;span class=&quot;code-quote&quot;&gt;&quot;target/jni-classes/org/apache/commons/crypto/cipher&quot;&lt;/span&gt; -I&lt;span class=&quot;code-quote&quot;&gt;&quot;target/jni-classes/org/apache/commons/crypto/random&quot;&lt;/span&gt; -c src/main/&lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;/org/apache/commons/crypto/random/OpensslCryptoRandomNative.c -o target/commons-crypto-1.0.0-SNAPSHOT-Mac-x86_64/OpensslCryptoRandom.o
     [exec] In file included from src/main/&lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;/org/apache/commons/crypto/random/OpensslCryptoRandomNative.c:19:
     [exec] In file included from src/main/&lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;/org/apache/commons/crypto/random/org_apache_commons_crypto_random.h:22:
     [exec] src/main/&lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;/org/apache/commons/crypto/org_apache_commons_crypto.h:196:10: fatal error: &lt;span class=&quot;code-quote&quot;&gt;&apos;openssl/aes.h&apos;&lt;/span&gt; file not found
     [exec] #include &amp;lt;openssl/aes.h&amp;gt;
     [exec]          ^
     [exec] 1 error generated.
     [exec] make: *** [target/commons-crypto-1.0.0-SNAPSHOT-Mac-x86_64/OpensslCryptoRandom.o] Error 1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;m pretty lost, since I don&apos;t know c programming. Would be good to have some documentation on how to set up the development environment (on Linux/Mac OS/Windows) for building crypto.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12964137">CRYPTO-45</key>
            <summary>Document how to build Commons Crypto</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dian.fu">Dian Fu</assignee>
                                    <reporter username="britter">Benedikt Ritter</reporter>
                        <labels>
                    </labels>
                <created>Sun, 1 May 2016 10:09:42 +0000</created>
                <updated>Thu, 5 May 2016 02:14:09 +0000</updated>
                            <resolved>Thu, 5 May 2016 02:14:09 +0000</resolved>
                                                    <fixVersion>1.0.0</fixVersion>
                                    <component>Document</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15265694" author="britter" created="Sun, 1 May 2016 10:10:01 +0000"  >&lt;p&gt;Not sure whether this should be a subtask of &lt;a href=&quot;https://issues.apache.org/jira/browse/CRYPTO-1&quot; title=&quot;Prepare Apache Commons Crypto for Apache release&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CRYPTO-1&quot;&gt;&lt;del&gt;CRYPTO-1&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15265699" author="britter" created="Sun, 1 May 2016 10:23:28 +0000"  >&lt;p&gt;Googling around I found this: &lt;a href=&quot;https://cryptography.io/en/latest/faq/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cryptography.io/en/latest/faq/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;seems like this is a common problem on Mac OS 10.11+. I don&apos;t know how to fix this yet.&lt;/p&gt;</comment>
                            <comment id="15265861" author="britter" created="Sun, 1 May 2016 18:14:40 +0000"  >&lt;p&gt;Using this changes in the Makefile, I was finally able to run the native build:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;diff --git a/Makefile b/Makefile
index 9759b06..9624365 100644
--- a/Makefile
+++ b/Makefile
@@ -49,14 +49,14 @@ $(TARGET)/jni-classes/org/apache/commons/crypto/random/OpensslCryptoRandomNative

 $(COMMONS_CRYPTO_OUT)/OpensslNative.o : $(SRC_NATIVE)/org/apache/commons/crypto/cipher/OpensslNative.c $(TARGET)/jni-classes/org/apache/commons/crypto/cipher/OpensslNative.h
        @mkdir -p $(@D)
-       $(CC) $(CFLAGS) -c $&amp;lt; -o $@
+       $(CC) $(CFLAGS) -I/usr/local/opt/openssl/include -c $&amp;lt; -o $@

 $(COMMONS_CRYPTO_OUT)/OpensslCryptoRandom.o : $(SRC_NATIVE)/org/apache/commons/crypto/random/OpensslCryptoRandomNative.c $(TARGET)/jni-classes/org/apache/commons/crypto/random/OpensslCryptoRandomNative.h
        @mkdir -p $(@D)
-       $(CC) $(CFLAGS) -c $&amp;lt; -o $@
+       $(CC) $(CFLAGS) -I/usr/local/opt/openssl/include -c $&amp;lt; -o $@

 $(COMMONS_CRYPTO_OUT)/$(LIBNAME): $(COMMONS_CRYPTO_OBJ)
-       $(CXX) $(CXXFLAGS) -o $@ $+ $(LINKFLAGS)
+       $(CXX) $(CXXFLAGS) -o $@ $+ $(LINKFLAGS) -L/usr/local/opt/openssl/lib
        $(STRIP) $@

 clean:
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;How ever, I got several failing tests when building with Java 8. Further more the site build failed because of malformed JavaDoc. So I switched to Java 6. Using Java 6, the native builds started failing again, this time with:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[INFO] --- maven-antrun-plugin:1.7:run (make) @ commons-crypto ---
[INFO] Executing tasks

make:
     [exec] compiling OSInfo.java
     [exec] &lt;span class=&quot;code-quote&quot;&gt;&quot;$JAVA_HOME/bin/javac&quot;&lt;/span&gt; -source 1.6 -target 1.6 -d target/jni-classes -sourcepath src/main/java src/main/java/org/apache/commons/crypto/random/OpensslCryptoRandomNative.java
     [exec] &lt;span class=&quot;code-quote&quot;&gt;&quot;$JAVA_HOME/bin/javah&quot;&lt;/span&gt; -force -classpath target/jni-classes -o target/jni-classes/org/apache/commons/crypto/random/OpensslCryptoRandomNative.h org.apache.commons.crypto.random.OpensslCryptoRandomNative
     [exec] gcc -arch x86_64 -Ilib/inc_mac -I/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/include -O2 -fPIC -mmacosx-version-miIn file included from src/main/&lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;/org/apache/commons/crypto/random/OpensslCryptoRandomNative.c:19:
     [exec] In file included from src/main/&lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;/org/apache/commons/crypto/random/org_apache_commons_crypto_random.h:22:
     [exec] src/main/&lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;/org/apache/commons/crypto/on=10.5 -fvisibility=hidden -Ilib/include -I/usr/include -I&lt;span class=&quot;code-quote&quot;&gt;&quot;src/main/&lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;/org/apache/commons/crypto/&quot;&lt;/span&gt; -I/usr/local/opt/openssl/rg_apache_commons_crypto.h:67:10: fatal error: &lt;span class=&quot;code-quote&quot;&gt;&apos;jni.h&apos;&lt;/span&gt; file not found
     [exec] #include &amp;lt;jni.h&amp;gt;
     [exec]          ^
     [exec] include -c src/main/&lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;/org/apache/commons/crypto/random/OpensslCryptoRandomNative.c -o target/commons-crypto-1.0.0-SNAPSHOT-Mac-x86_64/OpensslCryptoRandom.o
     [exec] 1 error generated.
     [exec] make: *** [target/commons-crypto-1.0.0-SNAPSHOT-Mac-x86_64/OpensslCryptoRandom.o] Error 1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15268173" author="jerrychenhf" created="Tue, 3 May 2016 06:14:50 +0000"  >&lt;p&gt;Thanks Benedikt  finding this.&lt;br/&gt;
This problem is due to the openssl version in the building OS is too lower. &lt;br/&gt;
We will document the specific requirement to build the native in one section of User Guide document.&lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Haifeng&lt;/p&gt;</comment>
                            <comment id="15268214" author="britter" created="Tue, 3 May 2016 06:46:27 +0000"  >&lt;p&gt;Hello Haifeng,&lt;/p&gt;

&lt;p&gt;I&apos;d suggest to split this up into a User Guide and a Developer Guide. Most users won&apos;t be interested in the details of how to build the component.&lt;/p&gt;

&lt;p&gt;What do you think?&lt;br/&gt;
Benedikt&lt;/p&gt;</comment>
                            <comment id="15268372" author="jerrychenhf" created="Tue, 3 May 2016 08:43:01 +0000"  >&lt;p&gt;Hi Benedikt,&lt;br/&gt;
Agree, your suggestion makes sense.  So,&lt;br/&gt;
The User Guide will cover how to refer the library and use it in their code.&lt;br/&gt;
The Developer Guide will cover how to get the code and how to setup the environment for building.&lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Haifeng&lt;/p&gt;
</comment>
                            <comment id="15269490" author="cnauroth" created="Tue, 3 May 2016 20:11:48 +0000"  >&lt;p&gt;In this documentation, let&apos;s please include a note that running the tests requires installation of the JCE Unlimited Strength Policy.  I think some package maintainers include it automatically, but it&apos;s generally not included in a stock Oracle JDK download.  For example, the OpenJDK 7 package on my CentOS VM came with it.  We can hyperlink to the instructions for installing it.&lt;/p&gt;

&lt;p&gt;Without JCE Unlimited Strength, there will be a test failure in &lt;tt&gt;JceCipherTest&lt;/tt&gt;, like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Running org.apache.commons.crypto.cipher.JceCipherTest
Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.634 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.commons.crypto.cipher.JceCipherTest
cryptoTest(org.apache.commons.crypto.cipher.JceCipherTest)  Time elapsed: 0.632 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError: AES failed initialisation - java.security.InvalidKeyException: Illegal key size
	at org.junit.Assert.fail(Assert.java:91)
	at org.apache.commons.crypto.cipher.AbstractCipherTest.byteBufferTest(AbstractCipherTest.java:107)
	at org.apache.commons.crypto.cipher.AbstractCipherTest.cryptoTest(AbstractCipherTest.java:84)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
	at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15269541" author="sebb@apache.org" created="Tue, 3 May 2016 20:39:48 +0000"  >&lt;p&gt;Better would be to detect the condition in the test case and log a suitable message.&lt;/p&gt;</comment>
                            <comment id="15270087" author="dian.fu" created="Wed, 4 May 2016 03:56:21 +0000"  >&lt;p&gt;Have created a &lt;a href=&quot;https://github.com/apache/commons-crypto/pull/35&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR&lt;/a&gt; which adds documentation about the &lt;tt&gt;Developer Guide&lt;/tt&gt;. For the &lt;tt&gt;User Guide&lt;/tt&gt;, it&apos;s already available in &lt;tt&gt;src/site/xdoc/userguide.xml&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="15270894" author="cnauroth" created="Wed, 4 May 2016 16:04:29 +0000"  >&lt;blockquote&gt;&lt;p&gt;Better would be to detect the condition in the test case and log a suitable message.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That&apos;s a good idea.  I filed a separate issue, &lt;a href=&quot;https://issues.apache.org/jira/browse/CRYPTO-52&quot; title=&quot;Improve assertion message when test fails due to lack of JCE Unlimited Strength Jurisdiction Policy Files.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CRYPTO-52&quot;&gt;&lt;del&gt;CRYPTO-52&lt;/del&gt;&lt;/a&gt;, with a pull request to provide a more descriptive assertion message.&lt;/p&gt;</comment>
                            <comment id="15271798" author="dian.fu" created="Thu, 5 May 2016 02:13:39 +0000"  >&lt;p&gt;Committed. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=britter&quot; class=&quot;user-hover&quot; rel=&quot;britter&quot;&gt;britter&lt;/a&gt; for reporting this issue and everyone for your discussion and review.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 28 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2x0if:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>