{"url":"https://api.github.com/repos/bevyengine/bevy/issues/16474","repository_url":"https://api.github.com/repos/bevyengine/bevy","labels_url":"https://api.github.com/repos/bevyengine/bevy/issues/16474/labels{/name}","comments_url":"https://api.github.com/repos/bevyengine/bevy/issues/16474/comments","events_url":"https://api.github.com/repos/bevyengine/bevy/issues/16474/events","html_url":"https://github.com/bevyengine/bevy/issues/16474","id":2682264093,"node_id":"I_kwDODf6-U86f4Bod","number":16474,"title":"Calling `Image::get_color_at` panics","user":{"login":"andriyDev","id":22285953,"node_id":"MDQ6VXNlcjIyMjg1OTUz","avatar_url":"https://avatars.githubusercontent.com/u/22285953?v=4","gravatar_id":"","url":"https://api.github.com/users/andriyDev","html_url":"https://github.com/andriyDev","followers_url":"https://api.github.com/users/andriyDev/followers","following_url":"https://api.github.com/users/andriyDev/following{/other_user}","gists_url":"https://api.github.com/users/andriyDev/gists{/gist_id}","starred_url":"https://api.github.com/users/andriyDev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andriyDev/subscriptions","organizations_url":"https://api.github.com/users/andriyDev/orgs","repos_url":"https://api.github.com/users/andriyDev/repos","events_url":"https://api.github.com/users/andriyDev/events{/privacy}","received_events_url":"https://api.github.com/users/andriyDev/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1795619323,"node_id":"MDU6TGFiZWwxNzk1NjE5MzIz","url":"https://api.github.com/repos/bevyengine/bevy/labels/C-Bug","name":"C-Bug","color":"d73a4a","default":false,"description":"An unexpected or incorrect behavior"},{"id":2045383863,"node_id":"MDU6TGFiZWwyMDQ1MzgzODYz","url":"https://api.github.com/repos/bevyengine/bevy/labels/A-Rendering","name":"A-Rendering","color":"C6A751","default":false,"description":"Drawing game state to the screen"},{"id":3166151441,"node_id":"MDU6TGFiZWwzMTY2MTUxNDQx","url":"https://api.github.com/repos/bevyengine/bevy/labels/S-Ready-For-Implementation","name":"S-Ready-For-Implementation","color":"D876E3","default":false,"description":"This issue is ready for an implementation PR. Go for it!"},{"id":6899571146,"node_id":"LA_kwDODf6-U88AAAABmz8Zyg","url":"https://api.github.com/repos/bevyengine/bevy/labels/D-Straightforward","name":"D-Straightforward","color":"008672","default":false,"description":"Simple bug fixes and API improvements, docs, test and examples"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-11-22T08:05:34Z","updated_at":"2024-11-22T18:34:57Z","closed_at":"2024-11-22T18:34:57Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"On #16388, we are using `Image::get_color_at` to determine a pixel's alpha value. There is no unwrap occuring, so we expect there to be no panics, however another user noted the following:\r\n\r\nTesting the changes got this error after a crash:\r\n```\r\n2024-11-22T07:39:32.137594Z  INFO bevy_winit::system: Creating new window \"App\" (0v1#4294967296)\r\n2024-11-22T07:39:32.137772Z  INFO winit::platform_impl::platform::x11::window: Guessed window scale factor: 1\r\n2024-11-22T07:39:32.326951Z  WARN bevy_render::view::window: Couldn't get swap chain texture after configuring. Cause: 'The underlying surface has changed, and therefore the swap chain must be updated'\r\nthread 'Compute Task Pool (4)' panicked at /home/adrian/bevy_testing/bevy/crates/bevy_image/src/image.rs:974:36:\r\nrange end index 8 out of range for slice of length 4\r\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\r\nEncountered a panic in system `bevy_sprite::picking_backend::sprite_picking`!\r\nEncountered a panic in system `bevy_app::main_schedule::Main::run_main`!\r\n```\r\nI'm using 0.15 release branch with the changes applied on top. Running the sprite_picking example\r\nThe sprite on the right works fine, but the squares and bevy logos works quite bad and make the app crash.\r\nThe test run on linux with x11 as you can see in the errors\r\n\r\n_Originally posted by @MonforteAdrian in https://github.com/bevyengine/bevy/issues/16388#issuecomment-2493084194_","closed_by":{"login":"alice-i-cecile","id":3579909,"node_id":"MDQ6VXNlcjM1Nzk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3579909?v=4","gravatar_id":"","url":"https://api.github.com/users/alice-i-cecile","html_url":"https://github.com/alice-i-cecile","followers_url":"https://api.github.com/users/alice-i-cecile/followers","following_url":"https://api.github.com/users/alice-i-cecile/following{/other_user}","gists_url":"https://api.github.com/users/alice-i-cecile/gists{/gist_id}","starred_url":"https://api.github.com/users/alice-i-cecile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alice-i-cecile/subscriptions","organizations_url":"https://api.github.com/users/alice-i-cecile/orgs","repos_url":"https://api.github.com/users/alice-i-cecile/repos","events_url":"https://api.github.com/users/alice-i-cecile/events{/privacy}","received_events_url":"https://api.github.com/users/alice-i-cecile/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/16474/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bevyengine/bevy/issues/16474/timeline","performed_via_github_app":null,"state_reason":"completed"}