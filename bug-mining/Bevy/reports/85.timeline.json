[{"id":11922601709,"node_id":"LE_lADODf6-U86AaPjMzwAAAALGpHbt","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/11922601709","actor":{"login":"camblomquist","id":36173306,"node_id":"MDQ6VXNlcjM2MTczMzA2","avatar_url":"https://avatars.githubusercontent.com/u/36173306?v=4","gravatar_id":"","url":"https://api.github.com/users/camblomquist","html_url":"https://github.com/camblomquist","followers_url":"https://api.github.com/users/camblomquist/followers","following_url":"https://api.github.com/users/camblomquist/following{/other_user}","gists_url":"https://api.github.com/users/camblomquist/gists{/gist_id}","starred_url":"https://api.github.com/users/camblomquist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/camblomquist/subscriptions","organizations_url":"https://api.github.com/users/camblomquist/orgs","repos_url":"https://api.github.com/users/camblomquist/repos","events_url":"https://api.github.com/users/camblomquist/events{/privacy}","received_events_url":"https://api.github.com/users/camblomquist/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-02-26T14:47:25Z","label":{"name":"C-Bug","color":"d73a4a"},"performed_via_github_app":null},{"id":11922601718,"node_id":"LE_lADODf6-U86AaPjMzwAAAALGpHb2","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/11922601718","actor":{"login":"camblomquist","id":36173306,"node_id":"MDQ6VXNlcjM2MTczMzA2","avatar_url":"https://avatars.githubusercontent.com/u/36173306?v=4","gravatar_id":"","url":"https://api.github.com/users/camblomquist","html_url":"https://github.com/camblomquist","followers_url":"https://api.github.com/users/camblomquist/followers","following_url":"https://api.github.com/users/camblomquist/following{/other_user}","gists_url":"https://api.github.com/users/camblomquist/gists{/gist_id}","starred_url":"https://api.github.com/users/camblomquist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/camblomquist/subscriptions","organizations_url":"https://api.github.com/users/camblomquist/orgs","repos_url":"https://api.github.com/users/camblomquist/repos","events_url":"https://api.github.com/users/camblomquist/events{/privacy}","received_events_url":"https://api.github.com/users/camblomquist/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-02-26T14:47:25Z","label":{"name":"S-Needs-Triage","color":"D876e3"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1964341688","html_url":"https://github.com/bevyengine/bevy/issues/12126#issuecomment-1964341688","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/12126","id":1964341688,"node_id":"IC_kwDODf6-U851FXm4","user":{"login":"thebluefish","id":4490910,"node_id":"MDQ6VXNlcjQ0OTA5MTA=","avatar_url":"https://avatars.githubusercontent.com/u/4490910?v=4","gravatar_id":"","url":"https://api.github.com/users/thebluefish","html_url":"https://github.com/thebluefish","followers_url":"https://api.github.com/users/thebluefish/followers","following_url":"https://api.github.com/users/thebluefish/following{/other_user}","gists_url":"https://api.github.com/users/thebluefish/gists{/gist_id}","starred_url":"https://api.github.com/users/thebluefish/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thebluefish/subscriptions","organizations_url":"https://api.github.com/users/thebluefish/orgs","repos_url":"https://api.github.com/users/thebluefish/repos","events_url":"https://api.github.com/users/thebluefish/events{/privacy}","received_events_url":"https://api.github.com/users/thebluefish/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-26T14:56:21Z","updated_at":"2024-02-26T17:33:25Z","body":"Edit: On further investigation, this appears to be caused when the game (or tab?) dies and restarts, and is unrelated to the OP's issue.\r\n\r\nI was able to get a better stack trace by enabling debug symbols and breaking on exception:\r\n```\r\npanicked at C:\\Users\\s33n\\.cargo\\registry\\src\\index.crates.io-6f17d22bba15001f\\winit-0.29.11\\src\\platform_impl\\web\\event_loop\\runner.rs:714:69:\r\nalready borrowed: BorrowMutError\r\n\r\nStack:\r\n\r\n__wbg_get_imports/imports.wbg.__wbg_new_abda76e883ba8a5f@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff.js:478:21\r\nconsole_error_panic_hook::hook::he531542cb2a11f4d@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[11917]:0x12226e2\r\ncore::ops::function::Fn::call::h1b3a3bd68b7d52c4@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[82402]:0x1b8ec18\r\nstd::panicking::rust_panic_with_hook::h1e6ac5d404b8e31b@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[28162]:0x1864bc0\r\nstd::panicking::begin_panic_handler::{{closure}}::h24b0f4622f2766a5@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[33497]:0x1971f77\r\nstd::sys_common::backtrace::__rust_end_short_backtrace::h19f35d272c126e7c@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[81303]:0x1b8c596\r\nrust_begin_unwind@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[43880]:0x1a97e82\r\ncore::panicking::panic_fmt::h87755523850ece9e@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[45132]:0x1aac145\r\ncore::cell::panic_already_borrowed::hdfd15bcb019b1598@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[42457]:0x1a7d66f\r\nwinit::platform_impl::platform::event_loop::runner::Shared::apply_control_flow::h0a2542bf92d1fda4@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[11987]:0x122d594\r\nwinit::platform_impl::platform::event_loop::runner::Shared::set_listener::{{closure}}::h7a2e10b8b744584c@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[29066]:0x18961f3\r\n<dyn core::ops::function::FnMut<(A,)>+Output = R as wasm_bindgen::closure::WasmClosure>::describe::invoke::h2780faf478a86068@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[49860]:0x1ae6010\r\n__wbg_adapter_51@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff.js:237:10\r\nreal@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff.js:210:20\r\nregex_automata::nfa::thompson::builder::Builder::patch::hda9f81aa4e2ab4c7@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[15127]:0x13f005c\r\nregex_automata::nfa::thompson::compiler::Compiler::c::ha5cc3249d565ed4e@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[520]:0x18b936\r\nregex_automata::nfa::thompson::compiler::Compiler::c_at_least::ha1ca0da71f7b6e2f@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[817]:0x3ba476\r\nregex_automata::nfa::thompson::compiler::Compiler::c::ha5cc3249d565ed4e@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[520]:0x18923e\r\nregex_automata::nfa::thompson::compiler::Compiler::c_cap::ha5ac77b91b1add35@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[4008]:0xb23374\r\nregex_automata::nfa::thompson::compiler::Compiler::c::ha5cc3249d565ed4e@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[520]:0x18954a\r\nregex_automata::nfa::thompson::compiler::Compiler::c::ha5cc3249d565ed4e@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[520]:0x189628\r\nregex_automata::nfa::thompson::compiler::Compiler::c_cap::ha5ac77b91b1add35@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[4008]:0xb23374\r\n<core::iter::adapters::map::Map<I,F> as core::iter::traits::iterator::Iterator>::next::hbdacfcf900f91786@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[5231]:0xcc330c\r\nregex_automata::nfa::thompson::compiler::Compiler::compile::h4143635c213a721a@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[1242]:0x57ac3d\r\nregex_automata::meta::strategy::new::h09bb82f77c7d9b93@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[476]:0x48dff\r\nregex_automata::meta::regex::Builder::build::h8c055e910a37e48c@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[1451]:0x634e5d\r\nregex::builders::Builder::build_one_string::ha4a066d798839af7@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[4760]:0xc2fad6\r\nregex::regex::string::Regex::new::h3f1e1a4b531a2fb6@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[18378]:0x156acff\r\n<naga_oil::compose::preprocess::Preprocessor as core::default::Default>::default::h05bcda1ea4cf9833@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[4129]:0xb51f90\r\n<naga_oil::compose::Composer as core::default::Default>::default::hb0f7a1f92b90b478@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[2795]:0x93ced1\r\nbevy_render::render_resource::pipeline_cache::PipelineCache::new::h99005de2068fbc46@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[14173]:0x136cb67\r\n<bevy_render::RenderPlugin as bevy_app::plugin::Plugin>::finish::haaa4c77178cdbd71@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[1812]:0x739326\r\nbevy_app::app::App::finish::hcfe8cb00221c68ae@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[18033]:0x1546d18\r\nbevy_winit::handle_winit_event::h3ece59e653fcb5e6@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[626]:0x2a4905\r\nwinit::platform_impl::platform::event_loop::EventLoop<T>::run::{{closure}}::h4ddb979efdb0fc26@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[19020]:0x15ade7f\r\nwinit::platform_impl::platform::event_loop::runner::Shared::handle_event::h958e3a01f9001cac@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[4253]:0xb7ff7f\r\nwinit::platform_impl::platform::event_loop::runner::Shared::request_redraw::he3c836ca676a301a@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[5964]:0xd8b13f\r\nwinit::platform_impl::platform::backend::animation_frame::AnimationFrameHandler::on_animation_frame::{{closure}}::h2f927ce8b2864c10@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[49854]:0x1ae5f46\r\n<dyn core::ops::function::FnMut<()>+Output = R as wasm_bindgen::closure::WasmClosure>::describe::invoke::h5449f5c284d5b8bb@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[50126]:0x1ae82a6\r\n__wbg_adapter_39@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff.js:229:10\r\nreal@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff.js:210:20\r\nFrameRequestCallback*__wbg_get_imports/imports.wbg.__wbg_requestAnimationFrame_1820a8e6b645ec5a/<@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff.js:1021:37\r\nhandleError@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff.js:254:18\r\n__wbg_get_imports/imports.wbg.__wbg_requestAnimationFrame_1820a8e6b645ec5a@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff.js:1020:84\r\nweb_sys::features::gen_Window::Window::request_animation_frame::he5a2f9cd1cf6d957@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[42830]:0x1a84778\r\nwinit::platform_impl::platform::backend::animation_frame::AnimationFrameHandler::request::h010f975c78fe0941@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[32477]:0x1943109\r\nwinit::platform_impl::platform::window::Inner::request_redraw::h69ed68b570a79f34@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[43933]:0x1a98d80\r\nwinit::platform_impl::platform::async::dispatcher::Dispatcher<T>::dispatch::h7a1d2b2459c4cb27@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[33950]:0x1985182\r\nbevy_winit::handle_winit_event::h3ece59e653fcb5e6@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[626]:0x2a56f1\r\nwinit::platform_impl::platform::event_loop::EventLoop<T>::run::{{closure}}::h4ddb979efdb0fc26@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[19020]:0x15ade7f\r\nwinit::platform_impl::platform::event_loop::runner::Shared::handle_event::h3551d95a79de6045@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[4444]:0xbc3f8f\r\nwinit::platform_impl::platform::event_loop::runner::Shared::set_listener::h20e5bb3dd9a9a5f5@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[795]:0x39e484\r\nwinit::platform_impl::platform::event_loop::window_target::EventLoopWindowTarget<T>::run::h9f1d8c15082519e0@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[53203]:0x1b004c6\r\nwinit::platform_impl::platform::event_loop::EventLoop<T>::run::h06e24916922d22d8@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[39865]:0x1a4174b\r\nbevy_winit::winit_runner::h2efeb4dfd46e0702@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[894]:0x414c26\r\ncore::ops::function::FnOnce::call_once{{vtable.shim}}::h15ee873e6523aa96@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[47829]:0x1ad1002\r\nbevy_app::app::App::run::h92048922ba290193@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[16298]:0x1484671\r\nbevy_mre::main::h193be164b9592b2d@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[5557]:0xd20281\r\nstd::sys_common::backtrace::__rust_begin_short_backtrace::hfca521c36102dbc6@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[81307]:0x1b8c5be\r\nstd::rt::lang_start::{{closure}}::hcbfa9f944d499846@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[76428]:0x1b7de19\r\nstd::rt::lang_start_internal::h658afcf1f1425f65@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[23156]:0x171f347\r\nmain@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[47260]:0x1ac9465\r\n@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:wasm-function[76420]:0x1b7dda5\r\n__wbg_finalize_init@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff.js:2122:10\r\n__wbg_init@http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff.js:2158:12\r\nasync*@http://127.0.0.1:8080/:21:5\r\n\r\n\r\nbevy_mre-60876d34ec8755ff.js:494:21\r\n    __wbg_error_f851667af71bcfc6 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff.js:494\r\n    he531542cb2a11f4d http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:19015626\r\n    h1b3a3bd68b7d52c4 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:28896280\r\n    h1e6ac5d404b8e31b http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:25578432\r\n    h24b0f4622f2766a5 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:26681207\r\n    h19f35d272c126e7c http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:28886422\r\n    rust_begin_unwind http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:27885186\r\n    h87755523850ece9e http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:27967813\r\n    hdfd15bcb019b1598 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:27776623\r\n    h0a2542bf92d1fda4 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:19060116\r\n    h7a2e10b8b744584c http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:25780723\r\n    <dyn core::ops::function::FnMut<(A,)>+Output = R as wasm_bindgen::closure::WasmClosure>::describe::invoke::h2780faf478a86068 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:28205072\r\n    __wbg_adapter_51 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff.js:237\r\n    real http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff.js:210\r\n    hda9f81aa4e2ab4c7 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:20906076\r\n    ha5cc3249d565ed4e http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:1620278\r\n    ha1ca0da71f7b6e2f http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:3908726\r\n    ha5cc3249d565ed4e http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:1610302\r\n    ha5ac77b91b1add35 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:11678580\r\n    ha5cc3249d565ed4e http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:1611082\r\n    ha5cc3249d565ed4e http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:1611304\r\n    ha5ac77b91b1add35 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:11678580\r\n    <core::iter::adapters::map::Map<I,F> as core::iter::traits::iterator::Iterator>::next::hbdacfcf900f91786 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:13382412\r\n    h4143635c213a721a http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:5745725\r\n    h09bb82f77c7d9b93 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:298495\r\n    h8c055e910a37e48c http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:6508125\r\n    ha4a066d798839af7 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:12778198\r\n    h3f1e1a4b531a2fb6 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:22457599\r\n    <naga_oil::compose::preprocess::Preprocessor as core::default::Default>::default::h05bcda1ea4cf9833 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:11870096\r\n    <naga_oil::compose::Composer as core::default::Default>::default::hb0f7a1f92b90b478 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:9686737\r\n    h99005de2068fbc46 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:20368231\r\n    <bevy_render::RenderPlugin as bevy_app::plugin::Plugin>::finish::haaa4c77178cdbd71 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:7574310\r\n    hcfe8cb00221c68ae http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:22310168\r\n    h3ece59e653fcb5e6 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:2771205\r\n    h4ddb979efdb0fc26 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:22732415\r\n    h958e3a01f9001cac http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:12058495\r\n    he3c836ca676a301a http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:14201151\r\n    h2f927ce8b2864c10 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:28204870\r\n    <dyn core::ops::function::FnMut<()>+Output = R as wasm_bindgen::closure::WasmClosure>::describe::invoke::h5449f5c284d5b8bb http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:28213926\r\n    __wbg_adapter_39 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff.js:229\r\n    real http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff.js:210\r\n    (Async: FrameRequestCallback)\r\n    __wbg_requestAnimationFrame_1820a8e6b645ec5a http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff.js:1021\r\n    handleError http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff.js:254\r\n    __wbg_requestAnimationFrame_1820a8e6b645ec5a http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff.js:1020\r\n    he5a2f9cd1cf6d957 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:27805560\r\n    h010f975c78fe0941 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:26489097\r\n    h69ed68b570a79f34 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:27889024\r\n    h7a1d2b2459c4cb27 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:26759554\r\n    h3ece59e653fcb5e6 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:2774769\r\n    h4ddb979efdb0fc26 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:22732415\r\n    h3551d95a79de6045 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:12337039\r\n    h20e5bb3dd9a9a5f5 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:3794052\r\n    h9f1d8c15082519e0 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:28312774\r\n    h06e24916922d22d8 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:27531083\r\n    h2efeb4dfd46e0702 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:4279334\r\n    h15ee873e6523aa96 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:28119042\r\n    h92048922ba290193 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:21513841\r\n    h193be164b9592b2d http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:13763201\r\n    hfca521c36102dbc6 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:28886462\r\n    hcbfa9f944d499846 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:28827161\r\n    h658afcf1f1425f65 http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:24245063\r\n    main http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:28087397\r\n    <anonymous> http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff_bg.wasm:28827045\r\n    __wbg_finalize_init http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff.js:2122\r\n    __wbg_init http://127.0.0.1:8080/bevy_mre-60876d34ec8755ff.js:2158\r\n    <anonymous> http://127.0.0.1:8080/:21\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1964341688/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"thebluefish","id":4490910,"node_id":"MDQ6VXNlcjQ0OTA5MTA=","avatar_url":"https://avatars.githubusercontent.com/u/4490910?v=4","gravatar_id":"","url":"https://api.github.com/users/thebluefish","html_url":"https://github.com/thebluefish","followers_url":"https://api.github.com/users/thebluefish/followers","following_url":"https://api.github.com/users/thebluefish/following{/other_user}","gists_url":"https://api.github.com/users/thebluefish/gists{/gist_id}","starred_url":"https://api.github.com/users/thebluefish/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thebluefish/subscriptions","organizations_url":"https://api.github.com/users/thebluefish/orgs","repos_url":"https://api.github.com/users/thebluefish/repos","events_url":"https://api.github.com/users/thebluefish/events{/privacy}","received_events_url":"https://api.github.com/users/thebluefish/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"thebluefish","id":4490910,"node_id":"MDQ6VXNlcjQ0OTA5MTA=","avatar_url":"https://avatars.githubusercontent.com/u/4490910?v=4","gravatar_id":"","url":"https://api.github.com/users/thebluefish","html_url":"https://github.com/thebluefish","followers_url":"https://api.github.com/users/thebluefish/followers","following_url":"https://api.github.com/users/thebluefish/following{/other_user}","gists_url":"https://api.github.com/users/thebluefish/gists{/gist_id}","starred_url":"https://api.github.com/users/thebluefish/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thebluefish/subscriptions","organizations_url":"https://api.github.com/users/thebluefish/orgs","repos_url":"https://api.github.com/users/thebluefish/repos","events_url":"https://api.github.com/users/thebluefish/events{/privacy}","received_events_url":"https://api.github.com/users/thebluefish/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-26T20:33:16Z","updated_at":"2024-02-26T20:33:16Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rust-windowing/winit/issues/3528","repository_url":"https://api.github.com/repos/rust-windowing/winit","labels_url":"https://api.github.com/repos/rust-windowing/winit/issues/3528/labels{/name}","comments_url":"https://api.github.com/repos/rust-windowing/winit/issues/3528/comments","events_url":"https://api.github.com/repos/rust-windowing/winit/issues/3528/events","html_url":"https://github.com/rust-windowing/winit/issues/3528","id":2155070672,"node_id":"I_kwDOAx7ZgM6Ac8TQ","number":3528,"title":"ControlFlow::WaitUntil race on Firefox","user":{"login":"thebluefish","id":4490910,"node_id":"MDQ6VXNlcjQ0OTA5MTA=","avatar_url":"https://avatars.githubusercontent.com/u/4490910?v=4","gravatar_id":"","url":"https://api.github.com/users/thebluefish","html_url":"https://github.com/thebluefish","followers_url":"https://api.github.com/users/thebluefish/followers","following_url":"https://api.github.com/users/thebluefish/following{/other_user}","gists_url":"https://api.github.com/users/thebluefish/gists{/gist_id}","starred_url":"https://api.github.com/users/thebluefish/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thebluefish/subscriptions","organizations_url":"https://api.github.com/users/thebluefish/orgs","repos_url":"https://api.github.com/users/thebluefish/repos","events_url":"https://api.github.com/users/thebluefish/events{/privacy}","received_events_url":"https://api.github.com/users/thebluefish/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":330617020,"node_id":"MDU6TGFiZWwzMzA2MTcwMjA=","url":"https://api.github.com/repos/rust-windowing/winit/labels/B%20-%20bug","name":"B - bug","color":"B60205","default":false,"description":"Dang, that shouldn't have happened"},{"id":924436465,"node_id":"MDU6TGFiZWw5MjQ0MzY0NjU=","url":"https://api.github.com/repos/rust-windowing/winit/labels/DS%20-%20web","name":"DS - web","color":"FBCA04","default":false,"description":"Affects the Web backend (WebAssembly/WASM)"},{"id":4315125643,"node_id":"LA_kwDOAx7ZgM8AAAABATOXiw","url":"https://api.github.com/repos/rust-windowing/winit/labels/A%20-%20needs%20repro","name":"A - needs repro","color":"FEF2C0","default":false,"description":"waiting for a way to reproduce"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-02-26T20:33:15Z","updated_at":"2024-03-02T14:23:38Z","closed_at":"2024-02-28T14:56:36Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":52353408,"node_id":"MDEwOlJlcG9zaXRvcnk1MjM1MzQwOA==","name":"winit","full_name":"rust-windowing/winit","private":false,"owner":{"login":"rust-windowing","id":49372933,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQ5MzcyOTMz","avatar_url":"https://avatars.githubusercontent.com/u/49372933?v=4","gravatar_id":"","url":"https://api.github.com/users/rust-windowing","html_url":"https://github.com/rust-windowing","followers_url":"https://api.github.com/users/rust-windowing/followers","following_url":"https://api.github.com/users/rust-windowing/following{/other_user}","gists_url":"https://api.github.com/users/rust-windowing/gists{/gist_id}","starred_url":"https://api.github.com/users/rust-windowing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rust-windowing/subscriptions","organizations_url":"https://api.github.com/users/rust-windowing/orgs","repos_url":"https://api.github.com/users/rust-windowing/repos","events_url":"https://api.github.com/users/rust-windowing/events{/privacy}","received_events_url":"https://api.github.com/users/rust-windowing/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rust-windowing/winit","description":"Window handling library in pure Rust","fork":false,"url":"https://api.github.com/repos/rust-windowing/winit","forks_url":"https://api.github.com/repos/rust-windowing/winit/forks","keys_url":"https://api.github.com/repos/rust-windowing/winit/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rust-windowing/winit/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rust-windowing/winit/teams","hooks_url":"https://api.github.com/repos/rust-windowing/winit/hooks","issue_events_url":"https://api.github.com/repos/rust-windowing/winit/issues/events{/number}","events_url":"https://api.github.com/repos/rust-windowing/winit/events","assignees_url":"https://api.github.com/repos/rust-windowing/winit/assignees{/user}","branches_url":"https://api.github.com/repos/rust-windowing/winit/branches{/branch}","tags_url":"https://api.github.com/repos/rust-windowing/winit/tags","blobs_url":"https://api.github.com/repos/rust-windowing/winit/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rust-windowing/winit/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rust-windowing/winit/git/refs{/sha}","trees_url":"https://api.github.com/repos/rust-windowing/winit/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rust-windowing/winit/statuses/{sha}","languages_url":"https://api.github.com/repos/rust-windowing/winit/languages","stargazers_url":"https://api.github.com/repos/rust-windowing/winit/stargazers","contributors_url":"https://api.github.com/repos/rust-windowing/winit/contributors","subscribers_url":"https://api.github.com/repos/rust-windowing/winit/subscribers","subscription_url":"https://api.github.com/repos/rust-windowing/winit/subscription","commits_url":"https://api.github.com/repos/rust-windowing/winit/commits{/sha}","git_commits_url":"https://api.github.com/repos/rust-windowing/winit/git/commits{/sha}","comments_url":"https://api.github.com/repos/rust-windowing/winit/comments{/number}","issue_comment_url":"https://api.github.com/repos/rust-windowing/winit/issues/comments{/number}","contents_url":"https://api.github.com/repos/rust-windowing/winit/contents/{+path}","compare_url":"https://api.github.com/repos/rust-windowing/winit/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rust-windowing/winit/merges","archive_url":"https://api.github.com/repos/rust-windowing/winit/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rust-windowing/winit/downloads","issues_url":"https://api.github.com/repos/rust-windowing/winit/issues{/number}","pulls_url":"https://api.github.com/repos/rust-windowing/winit/pulls{/number}","milestones_url":"https://api.github.com/repos/rust-windowing/winit/milestones{/number}","notifications_url":"https://api.github.com/repos/rust-windowing/winit/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rust-windowing/winit/labels{/name}","releases_url":"https://api.github.com/repos/rust-windowing/winit/releases{/id}","deployments_url":"https://api.github.com/repos/rust-windowing/winit/deployments","created_at":"2016-02-23T11:17:06Z","updated_at":"2025-11-09T09:07:02Z","pushed_at":"2025-11-06T05:46:28Z","git_url":"git://github.com/rust-windowing/winit.git","ssh_url":"git@github.com:rust-windowing/winit.git","clone_url":"https://github.com/rust-windowing/winit.git","svn_url":"https://github.com/rust-windowing/winit","homepage":"https://docs.rs/winit/","size":13123,"stargazers_count":5644,"watchers_count":5644,"language":"Rust","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":true,"forks_count":1121,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":566,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["android","gui","ios","macos","rust","rust-lang","wasm","wayland","windowing","windows","x11"],"visibility":"public","forks":1121,"open_issues":566,"watchers":5644,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"[Original issue](https://github.com/bevyengine/bevy/issues/12126)\r\n\r\n---\r\n\r\n[Here is an example project](https://github.com/camblomquist/bevy_fps_mre) based on bevy. I am too unfamiliar with using winit directly to boil it down without bevy.\r\n\r\nRun the example with `trunk serve` and browse to it. \r\n\r\nThe game should start out focused and run at roughly vsync, control flow is set to `Poll`.\r\n\r\nUnfocus the game element, and the console will start spamming with errors like\r\n> Uncaught Error: closure invoked recursively or after being dropped\r\n    __wbindgen_throw https://bevy-webgl2-examples.pages.dev/Games/breakout/wasm_example.js:2035\r\n    __wbg_adapter_51 https://bevy-webgl2-examples.pages.dev/Games/breakout/wasm_example.js:237\r\n    real https://bevy-webgl2-examples.pages.dev/Games/breakout/wasm_example.js:210\r\n\r\nNotably the game should run at half vsync while unfocused, and control flow is set to `WaitUntil`.\r\n\r\nFocus the game element again, and the FPS should drop significantly while under `Poll`.\r\n\r\n---\r\n\r\nFrom placing logging points around bevy and winit, the problem appears to start when `winit::platform_impl::platform::event_loop::runner::apply_control_flow` processes a `ControlFlow::WaitUntil(_)` where the calculated `delay` is zero. Notably not all logs with a `delay` of 0 appear to cause this, but I am unable to find another factor.\r\n\r\nThis issue can be patched by introducing a minimum 1ms delay:\r\n```rust\r\nlet delay = if end <= start {\r\n    Duration::from_millis(1)\r\n} else {\r\n    end - start\r\n};\r\n```\r\n\r\nThis is not a proper solution, since adding an unnecessary random delay is generally unacceptable.\r\n\r\n---\r\n\r\nWhile investigating this, I noticed that any attempts to handle `WaitUntil` *like* `Poll` have produced the same FPS drop on bevy-side while eliminating the console error spam. This leads me to suspect that part of the issue may lie in bevy, but I have been unsuccessful poking around bevy_winit's runner.","reactions":{"url":"https://api.github.com/repos/rust-windowing/winit/issues/3528/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rust-windowing/winit/issues/3528/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":11947125104,"node_id":"UNLE_lADODf6-U86AaPjMzwAAAALIGqlw","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/11947125104","actor":{"login":"TrialDragon","id":31419708,"node_id":"MDQ6VXNlcjMxNDE5NzA4","avatar_url":"https://avatars.githubusercontent.com/u/31419708?v=4","gravatar_id":"","url":"https://api.github.com/users/TrialDragon","html_url":"https://github.com/TrialDragon","followers_url":"https://api.github.com/users/TrialDragon/followers","following_url":"https://api.github.com/users/TrialDragon/following{/other_user}","gists_url":"https://api.github.com/users/TrialDragon/gists{/gist_id}","starred_url":"https://api.github.com/users/TrialDragon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TrialDragon/subscriptions","organizations_url":"https://api.github.com/users/TrialDragon/orgs","repos_url":"https://api.github.com/users/TrialDragon/repos","events_url":"https://api.github.com/users/TrialDragon/events{/privacy}","received_events_url":"https://api.github.com/users/TrialDragon/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2024-02-28T06:49:05Z","label":{"name":"S-Needs-Triage","color":"D876e3"},"performed_via_github_app":null},{"id":11947125110,"node_id":"LE_lADODf6-U86AaPjMzwAAAALIGql2","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/11947125110","actor":{"login":"TrialDragon","id":31419708,"node_id":"MDQ6VXNlcjMxNDE5NzA4","avatar_url":"https://avatars.githubusercontent.com/u/31419708?v=4","gravatar_id":"","url":"https://api.github.com/users/TrialDragon","html_url":"https://github.com/TrialDragon","followers_url":"https://api.github.com/users/TrialDragon/followers","following_url":"https://api.github.com/users/TrialDragon/following{/other_user}","gists_url":"https://api.github.com/users/TrialDragon/gists{/gist_id}","starred_url":"https://api.github.com/users/TrialDragon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TrialDragon/subscriptions","organizations_url":"https://api.github.com/users/TrialDragon/orgs","repos_url":"https://api.github.com/users/TrialDragon/repos","events_url":"https://api.github.com/users/TrialDragon/events{/privacy}","received_events_url":"https://api.github.com/users/TrialDragon/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-02-28T06:49:05Z","label":{"name":"C-Performance","color":"B8B8B8"},"performed_via_github_app":null},{"id":11947125113,"node_id":"LE_lADODf6-U86AaPjMzwAAAALIGql5","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/11947125113","actor":{"login":"TrialDragon","id":31419708,"node_id":"MDQ6VXNlcjMxNDE5NzA4","avatar_url":"https://avatars.githubusercontent.com/u/31419708?v=4","gravatar_id":"","url":"https://api.github.com/users/TrialDragon","html_url":"https://github.com/TrialDragon","followers_url":"https://api.github.com/users/TrialDragon/followers","following_url":"https://api.github.com/users/TrialDragon/following{/other_user}","gists_url":"https://api.github.com/users/TrialDragon/gists{/gist_id}","starred_url":"https://api.github.com/users/TrialDragon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TrialDragon/subscriptions","organizations_url":"https://api.github.com/users/TrialDragon/orgs","repos_url":"https://api.github.com/users/TrialDragon/repos","events_url":"https://api.github.com/users/TrialDragon/events{/privacy}","received_events_url":"https://api.github.com/users/TrialDragon/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-02-28T06:49:05Z","label":{"name":"O-Web","color":"2e6991"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1971437860","html_url":"https://github.com/bevyengine/bevy/issues/12126#issuecomment-1971437860","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/12126","id":1971437860,"node_id":"IC_kwDODf6-U851gcEk","user":{"login":"SnowdenWintermute","id":29361723,"node_id":"MDQ6VXNlcjI5MzYxNzIz","avatar_url":"https://avatars.githubusercontent.com/u/29361723?v=4","gravatar_id":"","url":"https://api.github.com/users/SnowdenWintermute","html_url":"https://github.com/SnowdenWintermute","followers_url":"https://api.github.com/users/SnowdenWintermute/followers","following_url":"https://api.github.com/users/SnowdenWintermute/following{/other_user}","gists_url":"https://api.github.com/users/SnowdenWintermute/gists{/gist_id}","starred_url":"https://api.github.com/users/SnowdenWintermute/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SnowdenWintermute/subscriptions","organizations_url":"https://api.github.com/users/SnowdenWintermute/orgs","repos_url":"https://api.github.com/users/SnowdenWintermute/repos","events_url":"https://api.github.com/users/SnowdenWintermute/events{/privacy}","received_events_url":"https://api.github.com/users/SnowdenWintermute/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-29T15:54:21Z","updated_at":"2024-02-29T15:54:21Z","body":"A similar thing is happening for me on Firefox 123.0 on Manjaro Linux. I am using trunk to serve the application. My console continuously prints the error log:\r\n```\r\nUncaught Error: closure invoked recursively or after being dropped\r\n```\r\nWhen using Bevy 0.12.0 I do not get the error.\r\n\r\nMy Cargo.toml:\r\n```\r\n[package]\r\nname = \"bevy-yew-test\"\r\nversion = \"0.1.0\"\r\nedition = \"2021\"\r\n\r\n[dependencies]\r\nbevy = \"0.13.0\" \r\nwasm-bindgen = \"0.2.91\"\r\n```\r\nMy index.html\r\n```\r\n<html>\r\n  <body class=\"h-screen w-screen\">\r\n    <link data-trunk rel=\"copy-dir\" href=\"assets/\" />\r\n    <link data-trunk href=\"./style/output.css\" rel=\"css\" />\r\n    <canvas id=\"bevy\" stlye=\"!w-screen !h-screen\"></canvas>\r\n  </body>\r\n</html>\r\n```\r\n\r\nBevy main\r\n```\r\nuse bevy::prelude::*;\r\npub fn bevy_main() {\r\n    App::new()\r\n        .add_plugins(DefaultPlugins.set(WindowPlugin {\r\n            primary_window: Some(Window {\r\n                canvas: Some(\"#bevy\".to_string()),\r\n                ..Default::default()\r\n            }),\r\n            ..default()\r\n        }))\r\n        .run();\r\n}\r\n```\r\n\r\nWhen I click the link printed by the error in the browser devtools it brings me to this line in the javascript:\r\n```\r\nimports.wbg.__wbindgen_throw = function(arg0, arg1) {\r\n        throw new Error(getStringFromWasm0(arg0, arg1));\r\n    };\r\n```\r\n\r\nIf I do not click anywhere outside the Bevy window the error doesn't happen, but as soon as I click out of the window either inside the browser or otherwise, it starts. The issue doesn't happen on Chromium or Brave. Adding the WinitSettings resource as suggested works to fix the problem. Thank you to s33n on the discord for linking me to this issue and providing that fix!","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1971437860/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"SnowdenWintermute","id":29361723,"node_id":"MDQ6VXNlcjI5MzYxNzIz","avatar_url":"https://avatars.githubusercontent.com/u/29361723?v=4","gravatar_id":"","url":"https://api.github.com/users/SnowdenWintermute","html_url":"https://github.com/SnowdenWintermute","followers_url":"https://api.github.com/users/SnowdenWintermute/followers","following_url":"https://api.github.com/users/SnowdenWintermute/following{/other_user}","gists_url":"https://api.github.com/users/SnowdenWintermute/gists{/gist_id}","starred_url":"https://api.github.com/users/SnowdenWintermute/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SnowdenWintermute/subscriptions","organizations_url":"https://api.github.com/users/SnowdenWintermute/orgs","repos_url":"https://api.github.com/users/SnowdenWintermute/repos","events_url":"https://api.github.com/users/SnowdenWintermute/events{/privacy}","received_events_url":"https://api.github.com/users/SnowdenWintermute/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1972826989","html_url":"https://github.com/bevyengine/bevy/issues/12126#issuecomment-1972826989","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/12126","id":1972826989,"node_id":"IC_kwDODf6-U851lvNt","user":{"login":"daxpedda","id":1645124,"node_id":"MDQ6VXNlcjE2NDUxMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1645124?v=4","gravatar_id":"","url":"https://api.github.com/users/daxpedda","html_url":"https://github.com/daxpedda","followers_url":"https://api.github.com/users/daxpedda/followers","following_url":"https://api.github.com/users/daxpedda/following{/other_user}","gists_url":"https://api.github.com/users/daxpedda/gists{/gist_id}","starred_url":"https://api.github.com/users/daxpedda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daxpedda/subscriptions","organizations_url":"https://api.github.com/users/daxpedda/orgs","repos_url":"https://api.github.com/users/daxpedda/repos","events_url":"https://api.github.com/users/daxpedda/events{/privacy}","received_events_url":"https://api.github.com/users/daxpedda/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-01T09:27:27Z","updated_at":"2024-03-01T09:27:27Z","body":"From the stacktrace in https://github.com/bevyengine/bevy/issues/12126#issuecomment-1964341688 my assumption is that this is not an issue from Bevy.\r\nConsidering that the fix seems to be to use `unfocused_mode: UpdateMode::Continuous`, I have the following theory:\r\n\r\nThe last call that triggers the issue is `winit::platform_impl::platform::event_loop::runner::Shared::apply_control_flow`, which schedules the next tick. This is done in [`Scheduler::new()`](https://github.com/rust-windowing/winit/blob/f0b4889227a797834fd3aa9c5b6e47c1a485b722/src/platform_impl/web/web_sys/schedule.rs#L35-L46) (which doesn't appear in the stacktrace maybe because its inlined?), which schedules it via `setTimeout()` (at least on Firefox).\r\n\r\nThis should absolutely never cause recursive invocation of the supplied `Closure`s, but we have encountered bugs before:\r\n- https://bugzilla.mozilla.org/show_bug.cgi?id=1855409\r\n- https://bugzilla.mozilla.org/show_bug.cgi?id=1451717\r\n\r\nSo it might simply be that some very specific interaction causes Firefox to fire the closure passed into `setTimeout()` immediately in place instead of after finishing the current execution. This would be a bug in Firefox!\r\nUnfortunately this is really hard to debug, which is why it would be important to boil this down to a very small reproducible example, one that doesn't involve Bevy.\r\n\r\nKeep in mind that I'm not familiar with Bevy's codebase at all and might have missed something.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1972826989/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"daxpedda","id":1645124,"node_id":"MDQ6VXNlcjE2NDUxMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1645124?v=4","gravatar_id":"","url":"https://api.github.com/users/daxpedda","html_url":"https://github.com/daxpedda","followers_url":"https://api.github.com/users/daxpedda/followers","following_url":"https://api.github.com/users/daxpedda/following{/other_user}","gists_url":"https://api.github.com/users/daxpedda/gists{/gist_id}","starred_url":"https://api.github.com/users/daxpedda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daxpedda/subscriptions","organizations_url":"https://api.github.com/users/daxpedda/orgs","repos_url":"https://api.github.com/users/daxpedda/repos","events_url":"https://api.github.com/users/daxpedda/events{/privacy}","received_events_url":"https://api.github.com/users/daxpedda/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1973500358","html_url":"https://github.com/bevyengine/bevy/issues/12126#issuecomment-1973500358","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/12126","id":1973500358,"node_id":"IC_kwDODf6-U851oTnG","user":{"login":"camblomquist","id":36173306,"node_id":"MDQ6VXNlcjM2MTczMzA2","avatar_url":"https://avatars.githubusercontent.com/u/36173306?v=4","gravatar_id":"","url":"https://api.github.com/users/camblomquist","html_url":"https://github.com/camblomquist","followers_url":"https://api.github.com/users/camblomquist/followers","following_url":"https://api.github.com/users/camblomquist/following{/other_user}","gists_url":"https://api.github.com/users/camblomquist/gists{/gist_id}","starred_url":"https://api.github.com/users/camblomquist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/camblomquist/subscriptions","organizations_url":"https://api.github.com/users/camblomquist/orgs","repos_url":"https://api.github.com/users/camblomquist/repos","events_url":"https://api.github.com/users/camblomquist/events{/privacy}","received_events_url":"https://api.github.com/users/camblomquist/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-01T16:32:25Z","updated_at":"2024-03-01T16:32:25Z","body":"A bisect puts the first bad commit as aeab690 which just changed the default update mode config. I don't know if that pins the issue in bevy or winit. It looks like my MRE needs to be updated to explicitly use ReactiveLowPower to get a better read.\r\nThe only place where the wait value is referenced is in `run_app_update_if_should` within bevy_winit.\r\n```rs\r\nmatch config.update_mode(focused) {\r\n    UpdateMode::Continuous => {\r\n        runner_state.redraw_requested = true;\r\n    }\r\n    UpdateMode::Reactive { wait } | UpdateMode::ReactiveLowPower { wait } => {\r\n        // TODO(bug): this is unexpected behavior.\r\n        // When Reactive, user expects bevy to actually wait that amount of time,\r\n        // and not potentially infinitely depending on plateform specifics (which this does)\r\n        // Need to verify the plateform specifics (whether this can occur in\r\n        // rare-but-possible cases) and replace this with a panic or a log warn!\r\n        if let Some(next) = runner_state.last_update.checked_add(*wait) {\r\n            runner_state.scheduled_update = Some(next);\r\n            event_loop.set_control_flow(ControlFlow::WaitUntil(next));\r\n        } else {\r\n            runner_state.scheduled_update = None;\r\n            event_loop.set_control_flow(ControlFlow::Wait);\r\n        }\r\n    }\r\n}\r\n```\r\nThe default wait time is 1/60th of a second. Adding that to the last update time (which would've been 1/60th of a second ago,) it might end up giving a negative or zero wait time. [whatwg](https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#timers) requires that negative times are set to zero but as far as I can tell it doesn't outright say that it must yield to the event loop despite implying that it must in a few sections. I'd have a hard time believing that Firefox would go against the grain here.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1973500358/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"camblomquist","id":36173306,"node_id":"MDQ6VXNlcjM2MTczMzA2","avatar_url":"https://avatars.githubusercontent.com/u/36173306?v=4","gravatar_id":"","url":"https://api.github.com/users/camblomquist","html_url":"https://github.com/camblomquist","followers_url":"https://api.github.com/users/camblomquist/followers","following_url":"https://api.github.com/users/camblomquist/following{/other_user}","gists_url":"https://api.github.com/users/camblomquist/gists{/gist_id}","starred_url":"https://api.github.com/users/camblomquist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/camblomquist/subscriptions","organizations_url":"https://api.github.com/users/camblomquist/orgs","repos_url":"https://api.github.com/users/camblomquist/repos","events_url":"https://api.github.com/users/camblomquist/events{/privacy}","received_events_url":"https://api.github.com/users/camblomquist/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1973523004","html_url":"https://github.com/bevyengine/bevy/issues/12126#issuecomment-1973523004","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/12126","id":1973523004,"node_id":"IC_kwDODf6-U851oZI8","user":{"login":"thebluefish","id":4490910,"node_id":"MDQ6VXNlcjQ0OTA5MTA=","avatar_url":"https://avatars.githubusercontent.com/u/4490910?v=4","gravatar_id":"","url":"https://api.github.com/users/thebluefish","html_url":"https://github.com/thebluefish","followers_url":"https://api.github.com/users/thebluefish/followers","following_url":"https://api.github.com/users/thebluefish/following{/other_user}","gists_url":"https://api.github.com/users/thebluefish/gists{/gist_id}","starred_url":"https://api.github.com/users/thebluefish/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thebluefish/subscriptions","organizations_url":"https://api.github.com/users/thebluefish/orgs","repos_url":"https://api.github.com/users/thebluefish/repos","events_url":"https://api.github.com/users/thebluefish/events{/privacy}","received_events_url":"https://api.github.com/users/thebluefish/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-01T16:45:10Z","updated_at":"2024-03-01T16:46:39Z","body":"I had some findings from earlier that I forgot to post here.\r\n\r\n---\r\n\r\nWithin `apply_control_flow` I can make a change that resolves both pieces of this issue:\r\n```rust\r\nlet delay = if end <= start {\r\n    Duration::from_millis(1)\r\n} else {\r\n    end - start\r\n};\r\n```\r\n\r\nI can also make a change that resolves just the error log spam:\r\n```rust\r\nfn apply_control_flow(&self) {\r\n    let new_state = if self.exiting() {\r\n        State::Exit\r\n    } else {\r\n        let cloned = self.clone();\r\n        State::Poll {\r\n            request: backend::Schedule::new(\r\n                self.poll_strategy(),\r\n                self.window(),\r\n                move || cloned.poll(),\r\n            ),\r\n        }\r\n    };\r\n\r\n    if let RunnerEnum::Running(ref mut runner) = *self.0.runner.borrow_mut() {\r\n        runner.state = new_state;\r\n    }\r\n}\r\n```\r\n\r\nWhile reducing bevy's framerate to what we experience with the root behavior. Pretty much any variation of change that causes Bevy's `UpdateMode` to differ from the underlying `ControlFlow` representation seems to cause the same slowdown behavior. which leads me to think we have some sort of timing problem. It also leads me to suspect the slowdown issue is only tangentially related to the console error spam.\r\n\r\n---\r\n\r\nSince aeab690 just changes the default config mode *from* the one we know works, any chance we could bisect the commit that causes this issue with \r\n```rust\r\n    .insert_resource(WinitSettings {\r\n        focused_mode: UpdateMode::Continuous,\r\n        unfocused_mode: UpdateMode::Continuous,\r\n    })```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1973523004/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"thebluefish","id":4490910,"node_id":"MDQ6VXNlcjQ0OTA5MTA=","avatar_url":"https://avatars.githubusercontent.com/u/4490910?v=4","gravatar_id":"","url":"https://api.github.com/users/thebluefish","html_url":"https://github.com/thebluefish","followers_url":"https://api.github.com/users/thebluefish/followers","following_url":"https://api.github.com/users/thebluefish/following{/other_user}","gists_url":"https://api.github.com/users/thebluefish/gists{/gist_id}","starred_url":"https://api.github.com/users/thebluefish/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thebluefish/subscriptions","organizations_url":"https://api.github.com/users/thebluefish/orgs","repos_url":"https://api.github.com/users/thebluefish/repos","events_url":"https://api.github.com/users/thebluefish/events{/privacy}","received_events_url":"https://api.github.com/users/thebluefish/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1973542495","html_url":"https://github.com/bevyengine/bevy/issues/12126#issuecomment-1973542495","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/12126","id":1973542495,"node_id":"IC_kwDODf6-U851od5f","user":{"login":"thebluefish","id":4490910,"node_id":"MDQ6VXNlcjQ0OTA5MTA=","avatar_url":"https://avatars.githubusercontent.com/u/4490910?v=4","gravatar_id":"","url":"https://api.github.com/users/thebluefish","html_url":"https://github.com/thebluefish","followers_url":"https://api.github.com/users/thebluefish/followers","following_url":"https://api.github.com/users/thebluefish/following{/other_user}","gists_url":"https://api.github.com/users/thebluefish/gists{/gist_id}","starred_url":"https://api.github.com/users/thebluefish/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thebluefish/subscriptions","organizations_url":"https://api.github.com/users/thebluefish/orgs","repos_url":"https://api.github.com/users/thebluefish/repos","events_url":"https://api.github.com/users/thebluefish/events{/privacy}","received_events_url":"https://api.github.com/users/thebluefish/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-01T16:57:10Z","updated_at":"2024-03-01T16:57:10Z","body":"> So it might simply be that some very specific interaction causes Firefox to fire the closure passed into `setTimeout()` immediately in place instead of after finishing the current execution. This would be a bug in Firefox! \r\n\r\nI checked this by adding some console logging\r\n```rs\r\nfn apply_control_flow(&self) {\r\n    let new_state = if self.exiting() {\r\n        State::Exit\r\n    } else {\r\n        match self.control_flow() {\r\n            ControlFlow::Poll => {\r\n                let cloned = self.clone();\r\n                State::Poll {\r\n                    request: backend::Schedule::new(\r\n                        self.poll_strategy(),\r\n                        self.window(),\r\n                        move || cloned.poll(),\r\n                    ),\r\n                }\r\n            }\r\n            ControlFlow::Wait => State::Wait {\r\n                start: Instant::now(),\r\n            },\r\n            ControlFlow::WaitUntil(end) => {\r\n                let start = Instant::now();\r\n\r\n                let delay = if end <= start {\r\n                    Duration::from_millis(0)\r\n                } else {\r\n                    end - start\r\n                };\r\n\r\n                let cloned = self.clone();\r\n\r\n                warn!(\"State::WaitUntil\");\r\n                State::WaitUntil {\r\n                    start,\r\n                    end,\r\n                    timeout: backend::Schedule::new_with_duration(\r\n                        self.window(),\r\n                        move || {\r\n                            warn!(\"resume_time_reached\");\r\n                            cloned.resume_time_reached(start, end)\r\n                        },\r\n                        delay,\r\n                    ),\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    warn!(\"runner.state = new_state\");\r\n    if let RunnerEnum::Running(ref mut runner) = *self.0.runner.borrow_mut() {\r\n        runner.state = new_state;\r\n    }\r\n}\r\n```\r\nThese always come in the order:\r\n- `State::WaitUntil`\r\n- `runner.state = new_state`\r\n- `resume_time_reached`\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1973542495/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"thebluefish","id":4490910,"node_id":"MDQ6VXNlcjQ0OTA5MTA=","avatar_url":"https://avatars.githubusercontent.com/u/4490910?v=4","gravatar_id":"","url":"https://api.github.com/users/thebluefish","html_url":"https://github.com/thebluefish","followers_url":"https://api.github.com/users/thebluefish/followers","following_url":"https://api.github.com/users/thebluefish/following{/other_user}","gists_url":"https://api.github.com/users/thebluefish/gists{/gist_id}","starred_url":"https://api.github.com/users/thebluefish/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thebluefish/subscriptions","organizations_url":"https://api.github.com/users/thebluefish/orgs","repos_url":"https://api.github.com/users/thebluefish/repos","events_url":"https://api.github.com/users/thebluefish/events{/privacy}","received_events_url":"https://api.github.com/users/thebluefish/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1973588035","html_url":"https://github.com/bevyengine/bevy/issues/12126#issuecomment-1973588035","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/12126","id":1973588035,"node_id":"IC_kwDODf6-U851opBD","user":{"login":"camblomquist","id":36173306,"node_id":"MDQ6VXNlcjM2MTczMzA2","avatar_url":"https://avatars.githubusercontent.com/u/36173306?v=4","gravatar_id":"","url":"https://api.github.com/users/camblomquist","html_url":"https://github.com/camblomquist","followers_url":"https://api.github.com/users/camblomquist/followers","following_url":"https://api.github.com/users/camblomquist/following{/other_user}","gists_url":"https://api.github.com/users/camblomquist/gists{/gist_id}","starred_url":"https://api.github.com/users/camblomquist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/camblomquist/subscriptions","organizations_url":"https://api.github.com/users/camblomquist/orgs","repos_url":"https://api.github.com/users/camblomquist/repos","events_url":"https://api.github.com/users/camblomquist/events{/privacy}","received_events_url":"https://api.github.com/users/camblomquist/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-01T17:24:02Z","updated_at":"2024-03-01T17:25:34Z","body":"Finished the bisect with the explicit WinitSettings. This time I landed on 79021c78c629d97ef1207378a7ecf93bf4f0e6ce\r\nfrom #11227 ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1973588035/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"camblomquist","id":36173306,"node_id":"MDQ6VXNlcjM2MTczMzA2","avatar_url":"https://avatars.githubusercontent.com/u/36173306?v=4","gravatar_id":"","url":"https://api.github.com/users/camblomquist","html_url":"https://github.com/camblomquist","followers_url":"https://api.github.com/users/camblomquist/followers","following_url":"https://api.github.com/users/camblomquist/following{/other_user}","gists_url":"https://api.github.com/users/camblomquist/gists{/gist_id}","starred_url":"https://api.github.com/users/camblomquist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/camblomquist/subscriptions","organizations_url":"https://api.github.com/users/camblomquist/orgs","repos_url":"https://api.github.com/users/camblomquist/repos","events_url":"https://api.github.com/users/camblomquist/events{/privacy}","received_events_url":"https://api.github.com/users/camblomquist/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1973655609","html_url":"https://github.com/bevyengine/bevy/issues/12126#issuecomment-1973655609","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/12126","id":1973655609,"node_id":"IC_kwDODf6-U851o5g5","user":{"login":"thebluefish","id":4490910,"node_id":"MDQ6VXNlcjQ0OTA5MTA=","avatar_url":"https://avatars.githubusercontent.com/u/4490910?v=4","gravatar_id":"","url":"https://api.github.com/users/thebluefish","html_url":"https://github.com/thebluefish","followers_url":"https://api.github.com/users/thebluefish/followers","following_url":"https://api.github.com/users/thebluefish/following{/other_user}","gists_url":"https://api.github.com/users/thebluefish/gists{/gist_id}","starred_url":"https://api.github.com/users/thebluefish/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thebluefish/subscriptions","organizations_url":"https://api.github.com/users/thebluefish/orgs","repos_url":"https://api.github.com/users/thebluefish/repos","events_url":"https://api.github.com/users/thebluefish/events{/privacy}","received_events_url":"https://api.github.com/users/thebluefish/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-01T18:04:44Z","updated_at":"2024-03-01T18:25:58Z","body":"Something interesting I found.\r\n\r\n`Event::AboutToWait` is being sent at approximately framerate (~60 times per second on my machine) before the issue starts. This blows up significantly to hundreds per second upon first clicking away.\r\n\r\nNormal behavior:\r\n![image](https://github.com/bevyengine/bevy/assets/4490910/70ca708a-98cd-4f85-b543-51d1a41ecee8)\r\n\r\nBad behavior:\r\n![image](https://github.com/bevyengine/bevy/assets/4490910/710fa040-a8b1-4ded-a292-3226c5bcb30a)\r\n\r\nNote that there still appears to be \"normal\" frame times peppered throughout the bad log. I'm yet unsure where these other events are coming from.\r\n\r\nEdit: After further measurements, it appears to increase to ~300 times per second while out of focus and ~1200 times per second while in focus.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1973655609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"thebluefish","id":4490910,"node_id":"MDQ6VXNlcjQ0OTA5MTA=","avatar_url":"https://avatars.githubusercontent.com/u/4490910?v=4","gravatar_id":"","url":"https://api.github.com/users/thebluefish","html_url":"https://github.com/thebluefish","followers_url":"https://api.github.com/users/thebluefish/followers","following_url":"https://api.github.com/users/thebluefish/following{/other_user}","gists_url":"https://api.github.com/users/thebluefish/gists{/gist_id}","starred_url":"https://api.github.com/users/thebluefish/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thebluefish/subscriptions","organizations_url":"https://api.github.com/users/thebluefish/orgs","repos_url":"https://api.github.com/users/thebluefish/repos","events_url":"https://api.github.com/users/thebluefish/events{/privacy}","received_events_url":"https://api.github.com/users/thebluefish/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"thebluefish","id":4490910,"node_id":"MDQ6VXNlcjQ0OTA5MTA=","avatar_url":"https://avatars.githubusercontent.com/u/4490910?v=4","gravatar_id":"","url":"https://api.github.com/users/thebluefish","html_url":"https://github.com/thebluefish","followers_url":"https://api.github.com/users/thebluefish/followers","following_url":"https://api.github.com/users/thebluefish/following{/other_user}","gists_url":"https://api.github.com/users/thebluefish/gists{/gist_id}","starred_url":"https://api.github.com/users/thebluefish/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thebluefish/subscriptions","organizations_url":"https://api.github.com/users/thebluefish/orgs","repos_url":"https://api.github.com/users/thebluefish/repos","events_url":"https://api.github.com/users/thebluefish/events{/privacy}","received_events_url":"https://api.github.com/users/thebluefish/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-01T20:36:33Z","updated_at":"2024-03-01T20:36:33Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/12239","repository_url":"https://api.github.com/repos/bevyengine/bevy","labels_url":"https://api.github.com/repos/bevyengine/bevy/issues/12239/labels{/name}","comments_url":"https://api.github.com/repos/bevyengine/bevy/issues/12239/comments","events_url":"https://api.github.com/repos/bevyengine/bevy/issues/12239/events","html_url":"https://github.com/bevyengine/bevy/pull/12239","id":2164134876,"node_id":"PR_kwDODf6-U85ocuhp","number":12239,"title":"Fix winit control flow when re-focusing game","user":{"login":"thebluefish","id":4490910,"node_id":"MDQ6VXNlcjQ0OTA5MTA=","avatar_url":"https://avatars.githubusercontent.com/u/4490910?v=4","gravatar_id":"","url":"https://api.github.com/users/thebluefish","html_url":"https://github.com/thebluefish","followers_url":"https://api.github.com/users/thebluefish/followers","following_url":"https://api.github.com/users/thebluefish/following{/other_user}","gists_url":"https://api.github.com/users/thebluefish/gists{/gist_id}","starred_url":"https://api.github.com/users/thebluefish/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thebluefish/subscriptions","organizations_url":"https://api.github.com/users/thebluefish/orgs","repos_url":"https://api.github.com/users/thebluefish/repos","events_url":"https://api.github.com/users/thebluefish/events{/privacy}","received_events_url":"https://api.github.com/users/thebluefish/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1795619323,"node_id":"MDU6TGFiZWwxNzk1NjE5MzIz","url":"https://api.github.com/repos/bevyengine/bevy/labels/C-Bug","name":"C-Bug","color":"d73a4a","default":false,"description":"An unexpected or incorrect behavior"},{"id":2272055811,"node_id":"MDU6TGFiZWwyMjcyMDU1ODEx","url":"https://api.github.com/repos/bevyengine/bevy/labels/A-Windowing","name":"A-Windowing","color":"c6a751","default":false,"description":"Platform-agnostic interface layer to run your app in"},{"id":2351483673,"node_id":"MDU6TGFiZWwyMzUxNDgzNjcz","url":"https://api.github.com/repos/bevyengine/bevy/labels/O-Web","name":"O-Web","color":"2e6991","default":false,"description":"Specific to web (WASM) builds"},{"id":2747865511,"node_id":"MDU6TGFiZWwyNzQ3ODY1NTEx","url":"https://api.github.com/repos/bevyengine/bevy/labels/S-Ready-For-Final-Review","name":"S-Ready-For-Final-Review","color":"D876E3","default":false,"description":"This PR has been approved by the community. It's ready for a maintainer to consider merging it"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/bevyengine/bevy/milestones/21","html_url":"https://github.com/bevyengine/bevy/milestone/21","labels_url":"https://api.github.com/repos/bevyengine/bevy/milestones/21/labels","id":10570096,"node_id":"MI_kwDODf6-U84AoUlw","number":21,"title":"0.13.1","description":"","creator":{"login":"cart","id":2694663,"node_id":"MDQ6VXNlcjI2OTQ2NjM=","avatar_url":"https://avatars.githubusercontent.com/u/2694663?v=4","gravatar_id":"","url":"https://api.github.com/users/cart","html_url":"https://github.com/cart","followers_url":"https://api.github.com/users/cart/followers","following_url":"https://api.github.com/users/cart/following{/other_user}","gists_url":"https://api.github.com/users/cart/gists{/gist_id}","starred_url":"https://api.github.com/users/cart/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cart/subscriptions","organizations_url":"https://api.github.com/users/cart/orgs","repos_url":"https://api.github.com/users/cart/repos","events_url":"https://api.github.com/users/cart/events{/privacy}","received_events_url":"https://api.github.com/users/cart/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":59,"state":"closed","created_at":"2024-02-16T19:38:53Z","updated_at":"2024-03-18T22:44:09Z","due_on":null,"closed_at":"2024-03-18T22:44:09Z"},"comments":1,"created_at":"2024-03-01T20:36:33Z","updated_at":"2024-03-25T04:11:37Z","closed_at":"2024-03-04T19:30:18Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":234798675,"node_id":"MDEwOlJlcG9zaXRvcnkyMzQ3OTg2NzU=","name":"bevy","full_name":"bevyengine/bevy","private":false,"owner":{"login":"bevyengine","id":60047606,"node_id":"MDEyOk9yZ2FuaXphdGlvbjYwMDQ3NjA2","avatar_url":"https://avatars.githubusercontent.com/u/60047606?v=4","gravatar_id":"","url":"https://api.github.com/users/bevyengine","html_url":"https://github.com/bevyengine","followers_url":"https://api.github.com/users/bevyengine/followers","following_url":"https://api.github.com/users/bevyengine/following{/other_user}","gists_url":"https://api.github.com/users/bevyengine/gists{/gist_id}","starred_url":"https://api.github.com/users/bevyengine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bevyengine/subscriptions","organizations_url":"https://api.github.com/users/bevyengine/orgs","repos_url":"https://api.github.com/users/bevyengine/repos","events_url":"https://api.github.com/users/bevyengine/events{/privacy}","received_events_url":"https://api.github.com/users/bevyengine/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/bevyengine/bevy","description":"A refreshingly simple data-driven game engine built in Rust","fork":false,"url":"https://api.github.com/repos/bevyengine/bevy","forks_url":"https://api.github.com/repos/bevyengine/bevy/forks","keys_url":"https://api.github.com/repos/bevyengine/bevy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/bevyengine/bevy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/bevyengine/bevy/teams","hooks_url":"https://api.github.com/repos/bevyengine/bevy/hooks","issue_events_url":"https://api.github.com/repos/bevyengine/bevy/issues/events{/number}","events_url":"https://api.github.com/repos/bevyengine/bevy/events","assignees_url":"https://api.github.com/repos/bevyengine/bevy/assignees{/user}","branches_url":"https://api.github.com/repos/bevyengine/bevy/branches{/branch}","tags_url":"https://api.github.com/repos/bevyengine/bevy/tags","blobs_url":"https://api.github.com/repos/bevyengine/bevy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/bevyengine/bevy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/bevyengine/bevy/git/refs{/sha}","trees_url":"https://api.github.com/repos/bevyengine/bevy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/bevyengine/bevy/statuses/{sha}","languages_url":"https://api.github.com/repos/bevyengine/bevy/languages","stargazers_url":"https://api.github.com/repos/bevyengine/bevy/stargazers","contributors_url":"https://api.github.com/repos/bevyengine/bevy/contributors","subscribers_url":"https://api.github.com/repos/bevyengine/bevy/subscribers","subscription_url":"https://api.github.com/repos/bevyengine/bevy/subscription","commits_url":"https://api.github.com/repos/bevyengine/bevy/commits{/sha}","git_commits_url":"https://api.github.com/repos/bevyengine/bevy/git/commits{/sha}","comments_url":"https://api.github.com/repos/bevyengine/bevy/comments{/number}","issue_comment_url":"https://api.github.com/repos/bevyengine/bevy/issues/comments{/number}","contents_url":"https://api.github.com/repos/bevyengine/bevy/contents/{+path}","compare_url":"https://api.github.com/repos/bevyengine/bevy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/bevyengine/bevy/merges","archive_url":"https://api.github.com/repos/bevyengine/bevy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/bevyengine/bevy/downloads","issues_url":"https://api.github.com/repos/bevyengine/bevy/issues{/number}","pulls_url":"https://api.github.com/repos/bevyengine/bevy/pulls{/number}","milestones_url":"https://api.github.com/repos/bevyengine/bevy/milestones{/number}","notifications_url":"https://api.github.com/repos/bevyengine/bevy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/bevyengine/bevy/labels{/name}","releases_url":"https://api.github.com/repos/bevyengine/bevy/releases{/id}","deployments_url":"https://api.github.com/repos/bevyengine/bevy/deployments","created_at":"2020-01-18T21:13:55Z","updated_at":"2025-11-10T00:30:24Z","pushed_at":"2025-11-09T20:05:46Z","git_url":"git://github.com/bevyengine/bevy.git","ssh_url":"git@github.com:bevyengine/bevy.git","clone_url":"https://github.com/bevyengine/bevy.git","svn_url":"https://github.com/bevyengine/bevy","homepage":"https://bevy.org","size":152673,"stargazers_count":42996,"watchers_count":42996,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":true,"forks_count":4220,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3116,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["bevy","game-development","game-engine","gamedev","open-source","rust"],"visibility":"public","forks":4220,"open_issues":3116,"watchers":42996,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/bevyengine/bevy/pulls/12239","html_url":"https://github.com/bevyengine/bevy/pull/12239","diff_url":"https://github.com/bevyengine/bevy/pull/12239.diff","patch_url":"https://github.com/bevyengine/bevy/pull/12239.patch","merged_at":"2024-03-04T19:30:18Z"},"body":"# Objective\r\n\r\nFixes #12126\r\n\r\nNotably this does not appear to fix the console error spam that appears to be coming from winit, only the performance bug that occurs when tabbing out and back into the game.\r\n\r\n## Solution\r\n\r\nThe winit event loop starts out as `ControlFlow::Wait` by default. When switching to `UpdateMode::Reactive` or `UpdateMode::ReactiveLowPower`, we repeatedly update this to `ControlFlow::WaitUntil(next)`. When switching back to `UpdateMode::Continuous`, the event loop is erroneously stuck at the latest `ControlFlow::WaitUntil(next)` that was issued.\r\n\r\nI also changed how we handle `Event::NewEvents` since the `StartCause` already tells us enough information to make that decision. This came about my debugging and I left it in as an improvement.","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/12239/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bevyengine/bevy/issues/12239/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1973928570","html_url":"https://github.com/bevyengine/bevy/issues/12126#issuecomment-1973928570","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/12126","id":1973928570,"node_id":"IC_kwDODf6-U851p8J6","user":{"login":"thebluefish","id":4490910,"node_id":"MDQ6VXNlcjQ0OTA5MTA=","avatar_url":"https://avatars.githubusercontent.com/u/4490910?v=4","gravatar_id":"","url":"https://api.github.com/users/thebluefish","html_url":"https://github.com/thebluefish","followers_url":"https://api.github.com/users/thebluefish/followers","following_url":"https://api.github.com/users/thebluefish/following{/other_user}","gists_url":"https://api.github.com/users/thebluefish/gists{/gist_id}","starred_url":"https://api.github.com/users/thebluefish/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thebluefish/subscriptions","organizations_url":"https://api.github.com/users/thebluefish/orgs","repos_url":"https://api.github.com/users/thebluefish/repos","events_url":"https://api.github.com/users/thebluefish/events{/privacy}","received_events_url":"https://api.github.com/users/thebluefish/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-01T21:15:35Z","updated_at":"2024-03-01T21:16:37Z","body":"@daxpedda This PR addresses the bevy slowdown issue that we were experiencing, however Firefox's console continues to spam errors at us when the window is out of focus. These errors appear to occur when we `Schedule::new_with_duration` where the elapsed time is zero. I was able to fix them by patching `apply_control_flow` with\r\n```rust\r\nControlFlow::WaitUntil(end) => {\r\n    let start = Instant::now();\r\n    let cloned = self.clone();\r\n\r\n    if end <= start {\r\n        State::Wait {\r\n            start,\r\n        }\r\n    } else {\r\n        State::WaitUntil {\r\n            start,\r\n            end,\r\n            timeout: backend::Schedule::new_with_duration(\r\n                self.window(),\r\n                move || cloned.resume_time_reached(start, end),\r\n                end - start,\r\n            ),\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThis makes sense to me as an overall improvement, but I do not know if there are greater ramifications to this approach. I would like to PR this change to `winit`, but can't boil it down to a bevy-less reproduction of the problem.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1973928570/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"thebluefish","id":4490910,"node_id":"MDQ6VXNlcjQ0OTA5MTA=","avatar_url":"https://avatars.githubusercontent.com/u/4490910?v=4","gravatar_id":"","url":"https://api.github.com/users/thebluefish","html_url":"https://github.com/thebluefish","followers_url":"https://api.github.com/users/thebluefish/followers","following_url":"https://api.github.com/users/thebluefish/following{/other_user}","gists_url":"https://api.github.com/users/thebluefish/gists{/gist_id}","starred_url":"https://api.github.com/users/thebluefish/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thebluefish/subscriptions","organizations_url":"https://api.github.com/users/thebluefish/orgs","repos_url":"https://api.github.com/users/thebluefish/repos","events_url":"https://api.github.com/users/thebluefish/events{/privacy}","received_events_url":"https://api.github.com/users/thebluefish/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11984252406,"node_id":"MEE_lADODf6-U86AaPjMzwAAAALKUS32","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/11984252406","actor":{"login":"daxpedda","id":1645124,"node_id":"MDQ6VXNlcjE2NDUxMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1645124?v=4","gravatar_id":"","url":"https://api.github.com/users/daxpedda","html_url":"https://github.com/daxpedda","followers_url":"https://api.github.com/users/daxpedda/followers","following_url":"https://api.github.com/users/daxpedda/following{/other_user}","gists_url":"https://api.github.com/users/daxpedda/gists{/gist_id}","starred_url":"https://api.github.com/users/daxpedda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daxpedda/subscriptions","organizations_url":"https://api.github.com/users/daxpedda/orgs","repos_url":"https://api.github.com/users/daxpedda/repos","events_url":"https://api.github.com/users/daxpedda/events{/privacy}","received_events_url":"https://api.github.com/users/daxpedda/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-03-01T21:15:37Z","performed_via_github_app":null},{"id":11984252411,"node_id":"SE_lADODf6-U86AaPjMzwAAAALKUS37","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/11984252411","actor":{"login":"daxpedda","id":1645124,"node_id":"MDQ6VXNlcjE2NDUxMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1645124?v=4","gravatar_id":"","url":"https://api.github.com/users/daxpedda","html_url":"https://github.com/daxpedda","followers_url":"https://api.github.com/users/daxpedda/followers","following_url":"https://api.github.com/users/daxpedda/following{/other_user}","gists_url":"https://api.github.com/users/daxpedda/gists{/gist_id}","starred_url":"https://api.github.com/users/daxpedda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daxpedda/subscriptions","organizations_url":"https://api.github.com/users/daxpedda/orgs","repos_url":"https://api.github.com/users/daxpedda/repos","events_url":"https://api.github.com/users/daxpedda/events{/privacy}","received_events_url":"https://api.github.com/users/daxpedda/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-03-01T21:15:37Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1974749310","html_url":"https://github.com/bevyengine/bevy/issues/12126#issuecomment-1974749310","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/12126","id":1974749310,"node_id":"IC_kwDODf6-U851tEh-","user":{"login":"daxpedda","id":1645124,"node_id":"MDQ6VXNlcjE2NDUxMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1645124?v=4","gravatar_id":"","url":"https://api.github.com/users/daxpedda","html_url":"https://github.com/daxpedda","followers_url":"https://api.github.com/users/daxpedda/followers","following_url":"https://api.github.com/users/daxpedda/following{/other_user}","gists_url":"https://api.github.com/users/daxpedda/gists{/gist_id}","starred_url":"https://api.github.com/users/daxpedda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daxpedda/subscriptions","organizations_url":"https://api.github.com/users/daxpedda/orgs","repos_url":"https://api.github.com/users/daxpedda/repos","events_url":"https://api.github.com/users/daxpedda/events{/privacy}","received_events_url":"https://api.github.com/users/daxpedda/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-02T09:49:30Z","updated_at":"2024-03-02T09:49:30Z","body":"> This makes sense to me as an overall improvement, but I do not know if there are greater ramifications to this approach.\r\n\r\nUnfortunately this is not really an acceptable solution. This would break `WaitUntil`, changing the behavior of `WaitUntil(Instant::now())` switching to `Wait` instead of continuing immediately. `Wait` doesn't continue immediately but waits for the next event, so this would be very wrong.\r\n\r\n> [whatwg](https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#timers) requires that negative times are set to zero but as far as I can tell it doesn't outright say that it must yield to the event loop despite implying that it must in a few sections. I'd have a hard time believing that Firefox would go against the grain here.\r\n\r\n`setTimeout(() => ())` or `setTimeout(() => (), 0)` per spec has to yield to the event loop:\r\nhttps://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#timer-initialisation-steps\r\n> Let *completionStep* be an algorithm step which [queues a global task](https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task) on the **timer task source** given global to run task.\r\n\r\nIf you follow what \"queues a global task\" is, you will find that it **must** yield to the event loop.\r\n\r\nNowhere does it specify that if the `delay` is `0` it follows a different path and executes the `handler` immediately. I'm definitely not an expert in reading these specs, but if Firefox is really doing what we suspect here, it would be most definitely a bug in Firefox, which as already pointed out ([#1](https://bugzilla.mozilla.org/show_bug.cgi?id=1855409), [#2](https://bugzilla.mozilla.org/show_bug.cgi?id=1451717)), has indeed happened before.\r\n\r\n---\r\n\r\nWe could try and fix the bug by not using `setTimeout` at all when the `delay` is `0` and only use the `MessagePort`. But I would like to make sure that we are actually following the right path here, I will experiment a bit and come back when I find anything.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1974749310/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"daxpedda","id":1645124,"node_id":"MDQ6VXNlcjE2NDUxMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1645124?v=4","gravatar_id":"","url":"https://api.github.com/users/daxpedda","html_url":"https://github.com/daxpedda","followers_url":"https://api.github.com/users/daxpedda/followers","following_url":"https://api.github.com/users/daxpedda/following{/other_user}","gists_url":"https://api.github.com/users/daxpedda/gists{/gist_id}","starred_url":"https://api.github.com/users/daxpedda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daxpedda/subscriptions","organizations_url":"https://api.github.com/users/daxpedda/orgs","repos_url":"https://api.github.com/users/daxpedda/repos","events_url":"https://api.github.com/users/daxpedda/events{/privacy}","received_events_url":"https://api.github.com/users/daxpedda/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1974769907","html_url":"https://github.com/bevyengine/bevy/issues/12126#issuecomment-1974769907","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/12126","id":1974769907,"node_id":"IC_kwDODf6-U851tJjz","user":{"login":"daxpedda","id":1645124,"node_id":"MDQ6VXNlcjE2NDUxMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1645124?v=4","gravatar_id":"","url":"https://api.github.com/users/daxpedda","html_url":"https://github.com/daxpedda","followers_url":"https://api.github.com/users/daxpedda/followers","following_url":"https://api.github.com/users/daxpedda/following{/other_user}","gists_url":"https://api.github.com/users/daxpedda/gists{/gist_id}","starred_url":"https://api.github.com/users/daxpedda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daxpedda/subscriptions","organizations_url":"https://api.github.com/users/daxpedda/orgs","repos_url":"https://api.github.com/users/daxpedda/repos","events_url":"https://api.github.com/users/daxpedda/events{/privacy}","received_events_url":"https://api.github.com/users/daxpedda/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-02T11:25:19Z","updated_at":"2024-03-02T11:51:01Z","body":"> But I would like to make sure that we are actually following the right path here, I will experiment a bit and come back when I find anything.\r\n\r\nSo my initial assumption turned out to be wrong, it was unrelated to the issue.\r\n\r\nThe issue seems to be quite simple: closing the `MessagePort` doesn't actually stop already delivered messages from triggering the message handler. So when we drop the message handler beforehand, it can cause a crash. I don't know if this is a bug in Firefox, I'll try to figure it out in the spec and potentially ask or file a bug report.\r\n\r\nHere is the PR: https://github.com/rust-windowing/winit/pull/3553. Let me know if this indeed fixes the problem.\r\nI will do my best to make a backport and release for Winit ASAP.\r\n\r\nOne thing I noticed is that something seems to be wrong with the time passed into `ControlFlow` by Bevy, as it seems to be almost always `0`, instead of actually slowing down when unfocused.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1974769907/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"daxpedda","id":1645124,"node_id":"MDQ6VXNlcjE2NDUxMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1645124?v=4","gravatar_id":"","url":"https://api.github.com/users/daxpedda","html_url":"https://github.com/daxpedda","followers_url":"https://api.github.com/users/daxpedda/followers","following_url":"https://api.github.com/users/daxpedda/following{/other_user}","gists_url":"https://api.github.com/users/daxpedda/gists{/gist_id}","starred_url":"https://api.github.com/users/daxpedda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daxpedda/subscriptions","organizations_url":"https://api.github.com/users/daxpedda/orgs","repos_url":"https://api.github.com/users/daxpedda/repos","events_url":"https://api.github.com/users/daxpedda/events{/privacy}","received_events_url":"https://api.github.com/users/daxpedda/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1974772240","html_url":"https://github.com/bevyengine/bevy/issues/12126#issuecomment-1974772240","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/12126","id":1974772240,"node_id":"IC_kwDODf6-U851tKIQ","user":{"login":"camblomquist","id":36173306,"node_id":"MDQ6VXNlcjM2MTczMzA2","avatar_url":"https://avatars.githubusercontent.com/u/36173306?v=4","gravatar_id":"","url":"https://api.github.com/users/camblomquist","html_url":"https://github.com/camblomquist","followers_url":"https://api.github.com/users/camblomquist/followers","following_url":"https://api.github.com/users/camblomquist/following{/other_user}","gists_url":"https://api.github.com/users/camblomquist/gists{/gist_id}","starred_url":"https://api.github.com/users/camblomquist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/camblomquist/subscriptions","organizations_url":"https://api.github.com/users/camblomquist/orgs","repos_url":"https://api.github.com/users/camblomquist/repos","events_url":"https://api.github.com/users/camblomquist/events{/privacy}","received_events_url":"https://api.github.com/users/camblomquist/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-02T11:36:47Z","updated_at":"2024-03-02T11:36:47Z","body":"> If you follow what \"queues a global task\" is, you will find that it **must** yield to the event loop.\r\n\r\nThanks for catching that, I'm not used to reading the standard. Knew I had to be missing something.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1974772240/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"camblomquist","id":36173306,"node_id":"MDQ6VXNlcjM2MTczMzA2","avatar_url":"https://avatars.githubusercontent.com/u/36173306?v=4","gravatar_id":"","url":"https://api.github.com/users/camblomquist","html_url":"https://github.com/camblomquist","followers_url":"https://api.github.com/users/camblomquist/followers","following_url":"https://api.github.com/users/camblomquist/following{/other_user}","gists_url":"https://api.github.com/users/camblomquist/gists{/gist_id}","starred_url":"https://api.github.com/users/camblomquist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/camblomquist/subscriptions","organizations_url":"https://api.github.com/users/camblomquist/orgs","repos_url":"https://api.github.com/users/camblomquist/repos","events_url":"https://api.github.com/users/camblomquist/events{/privacy}","received_events_url":"https://api.github.com/users/camblomquist/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"daxpedda","id":1645124,"node_id":"MDQ6VXNlcjE2NDUxMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1645124?v=4","gravatar_id":"","url":"https://api.github.com/users/daxpedda","html_url":"https://github.com/daxpedda","followers_url":"https://api.github.com/users/daxpedda/followers","following_url":"https://api.github.com/users/daxpedda/following{/other_user}","gists_url":"https://api.github.com/users/daxpedda/gists{/gist_id}","starred_url":"https://api.github.com/users/daxpedda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daxpedda/subscriptions","organizations_url":"https://api.github.com/users/daxpedda/orgs","repos_url":"https://api.github.com/users/daxpedda/repos","events_url":"https://api.github.com/users/daxpedda/events{/privacy}","received_events_url":"https://api.github.com/users/daxpedda/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-02T11:44:04Z","updated_at":"2024-03-02T11:44:04Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rust-windowing/winit/issues/3554","repository_url":"https://api.github.com/repos/rust-windowing/winit","labels_url":"https://api.github.com/repos/rust-windowing/winit/issues/3554/labels{/name}","comments_url":"https://api.github.com/repos/rust-windowing/winit/issues/3554/comments","events_url":"https://api.github.com/repos/rust-windowing/winit/issues/3554/events","html_url":"https://github.com/rust-windowing/winit/pull/3554","id":2164769108,"node_id":"PR_kwDOAx7ZgM5oe2L5","number":3554,"title":"Winit version 0.29.13","user":{"login":"daxpedda","id":1645124,"node_id":"MDQ6VXNlcjE2NDUxMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1645124?v=4","gravatar_id":"","url":"https://api.github.com/users/daxpedda","html_url":"https://github.com/daxpedda","followers_url":"https://api.github.com/users/daxpedda/followers","following_url":"https://api.github.com/users/daxpedda/following{/other_user}","gists_url":"https://api.github.com/users/daxpedda/gists{/gist_id}","starred_url":"https://api.github.com/users/daxpedda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daxpedda/subscriptions","organizations_url":"https://api.github.com/users/daxpedda/orgs","repos_url":"https://api.github.com/users/daxpedda/repos","events_url":"https://api.github.com/users/daxpedda/events{/privacy}","received_events_url":"https://api.github.com/users/daxpedda/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-03-02T11:30:17Z","updated_at":"2024-03-02T11:56:02Z","closed_at":"2024-03-02T11:56:02Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":52353408,"node_id":"MDEwOlJlcG9zaXRvcnk1MjM1MzQwOA==","name":"winit","full_name":"rust-windowing/winit","private":false,"owner":{"login":"rust-windowing","id":49372933,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQ5MzcyOTMz","avatar_url":"https://avatars.githubusercontent.com/u/49372933?v=4","gravatar_id":"","url":"https://api.github.com/users/rust-windowing","html_url":"https://github.com/rust-windowing","followers_url":"https://api.github.com/users/rust-windowing/followers","following_url":"https://api.github.com/users/rust-windowing/following{/other_user}","gists_url":"https://api.github.com/users/rust-windowing/gists{/gist_id}","starred_url":"https://api.github.com/users/rust-windowing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rust-windowing/subscriptions","organizations_url":"https://api.github.com/users/rust-windowing/orgs","repos_url":"https://api.github.com/users/rust-windowing/repos","events_url":"https://api.github.com/users/rust-windowing/events{/privacy}","received_events_url":"https://api.github.com/users/rust-windowing/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rust-windowing/winit","description":"Window handling library in pure Rust","fork":false,"url":"https://api.github.com/repos/rust-windowing/winit","forks_url":"https://api.github.com/repos/rust-windowing/winit/forks","keys_url":"https://api.github.com/repos/rust-windowing/winit/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rust-windowing/winit/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rust-windowing/winit/teams","hooks_url":"https://api.github.com/repos/rust-windowing/winit/hooks","issue_events_url":"https://api.github.com/repos/rust-windowing/winit/issues/events{/number}","events_url":"https://api.github.com/repos/rust-windowing/winit/events","assignees_url":"https://api.github.com/repos/rust-windowing/winit/assignees{/user}","branches_url":"https://api.github.com/repos/rust-windowing/winit/branches{/branch}","tags_url":"https://api.github.com/repos/rust-windowing/winit/tags","blobs_url":"https://api.github.com/repos/rust-windowing/winit/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rust-windowing/winit/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rust-windowing/winit/git/refs{/sha}","trees_url":"https://api.github.com/repos/rust-windowing/winit/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rust-windowing/winit/statuses/{sha}","languages_url":"https://api.github.com/repos/rust-windowing/winit/languages","stargazers_url":"https://api.github.com/repos/rust-windowing/winit/stargazers","contributors_url":"https://api.github.com/repos/rust-windowing/winit/contributors","subscribers_url":"https://api.github.com/repos/rust-windowing/winit/subscribers","subscription_url":"https://api.github.com/repos/rust-windowing/winit/subscription","commits_url":"https://api.github.com/repos/rust-windowing/winit/commits{/sha}","git_commits_url":"https://api.github.com/repos/rust-windowing/winit/git/commits{/sha}","comments_url":"https://api.github.com/repos/rust-windowing/winit/comments{/number}","issue_comment_url":"https://api.github.com/repos/rust-windowing/winit/issues/comments{/number}","contents_url":"https://api.github.com/repos/rust-windowing/winit/contents/{+path}","compare_url":"https://api.github.com/repos/rust-windowing/winit/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rust-windowing/winit/merges","archive_url":"https://api.github.com/repos/rust-windowing/winit/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rust-windowing/winit/downloads","issues_url":"https://api.github.com/repos/rust-windowing/winit/issues{/number}","pulls_url":"https://api.github.com/repos/rust-windowing/winit/pulls{/number}","milestones_url":"https://api.github.com/repos/rust-windowing/winit/milestones{/number}","notifications_url":"https://api.github.com/repos/rust-windowing/winit/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rust-windowing/winit/labels{/name}","releases_url":"https://api.github.com/repos/rust-windowing/winit/releases{/id}","deployments_url":"https://api.github.com/repos/rust-windowing/winit/deployments","created_at":"2016-02-23T11:17:06Z","updated_at":"2025-11-09T09:07:02Z","pushed_at":"2025-11-06T05:46:28Z","git_url":"git://github.com/rust-windowing/winit.git","ssh_url":"git@github.com:rust-windowing/winit.git","clone_url":"https://github.com/rust-windowing/winit.git","svn_url":"https://github.com/rust-windowing/winit","homepage":"https://docs.rs/winit/","size":13123,"stargazers_count":5644,"watchers_count":5644,"language":"Rust","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":true,"forks_count":1121,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":566,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["android","gui","ios","macos","rust","rust-lang","wasm","wayland","windowing","windows","x11"],"visibility":"public","forks":1121,"open_issues":566,"watchers":5644,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/rust-windowing/winit/pulls/3554","html_url":"https://github.com/rust-windowing/winit/pull/3554","diff_url":"https://github.com/rust-windowing/winit/pull/3554.diff","patch_url":"https://github.com/rust-windowing/winit/pull/3554.patch","merged_at":"2024-03-02T11:56:02Z"},"body":null,"reactions":{"url":"https://api.github.com/repos/rust-windowing/winit/issues/3554/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rust-windowing/winit/issues/3554/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1974779171","html_url":"https://github.com/bevyengine/bevy/issues/12126#issuecomment-1974779171","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/12126","id":1974779171,"node_id":"IC_kwDODf6-U851tL0j","user":{"login":"daxpedda","id":1645124,"node_id":"MDQ6VXNlcjE2NDUxMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1645124?v=4","gravatar_id":"","url":"https://api.github.com/users/daxpedda","html_url":"https://github.com/daxpedda","followers_url":"https://api.github.com/users/daxpedda/followers","following_url":"https://api.github.com/users/daxpedda/following{/other_user}","gists_url":"https://api.github.com/users/daxpedda/gists{/gist_id}","starred_url":"https://api.github.com/users/daxpedda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daxpedda/subscriptions","organizations_url":"https://api.github.com/users/daxpedda/orgs","repos_url":"https://api.github.com/users/daxpedda/repos","events_url":"https://api.github.com/users/daxpedda/events{/privacy}","received_events_url":"https://api.github.com/users/daxpedda/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-02T12:08:02Z","updated_at":"2024-03-02T12:08:02Z","body":"A new version of Winit with the fix just got released: [v0.29.13](https://crates.io/crates/winit/0.29.13).\r\n\r\nI also filed a bug report at Firefox (it might be a bug in Chrome instead, we will see what happens): https://bugzilla.mozilla.org/show_bug.cgi?id=1883187.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1974779171/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"daxpedda","id":1645124,"node_id":"MDQ6VXNlcjE2NDUxMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1645124?v=4","gravatar_id":"","url":"https://api.github.com/users/daxpedda","html_url":"https://github.com/daxpedda","followers_url":"https://api.github.com/users/daxpedda/followers","following_url":"https://api.github.com/users/daxpedda/following{/other_user}","gists_url":"https://api.github.com/users/daxpedda/gists{/gist_id}","starred_url":"https://api.github.com/users/daxpedda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daxpedda/subscriptions","organizations_url":"https://api.github.com/users/daxpedda/orgs","repos_url":"https://api.github.com/users/daxpedda/repos","events_url":"https://api.github.com/users/daxpedda/events{/privacy}","received_events_url":"https://api.github.com/users/daxpedda/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1974779886","html_url":"https://github.com/bevyengine/bevy/issues/12126#issuecomment-1974779886","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/12126","id":1974779886,"node_id":"IC_kwDODf6-U851tL_u","user":{"login":"thebluefish","id":4490910,"node_id":"MDQ6VXNlcjQ0OTA5MTA=","avatar_url":"https://avatars.githubusercontent.com/u/4490910?v=4","gravatar_id":"","url":"https://api.github.com/users/thebluefish","html_url":"https://github.com/thebluefish","followers_url":"https://api.github.com/users/thebluefish/followers","following_url":"https://api.github.com/users/thebluefish/following{/other_user}","gists_url":"https://api.github.com/users/thebluefish/gists{/gist_id}","starred_url":"https://api.github.com/users/thebluefish/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thebluefish/subscriptions","organizations_url":"https://api.github.com/users/thebluefish/orgs","repos_url":"https://api.github.com/users/thebluefish/repos","events_url":"https://api.github.com/users/thebluefish/events{/privacy}","received_events_url":"https://api.github.com/users/thebluefish/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-02T12:11:20Z","updated_at":"2024-03-02T12:11:20Z","body":"Beautiful, thanks much for your help\r\n\r\nOn Sat, Mar 2, 2024, 4:08 AM daxpedda ***@***.***> wrote:\r\n\r\n> A new version of Winit with the fix just got released: v0.29.13\r\n> <https://crates.io/crates/winit/0.29.13>.\r\n>\r\n> I also filed a bug report at Firefox (it might be a bug in Chrome instead,\r\n> we will see what happens):\r\n> https://bugzilla.mozilla.org/show_bug.cgi?id=1883187.\r\n>\r\n> \r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/bevyengine/bevy/issues/12126#issuecomment-1974779171>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/ABCINHWPRCI2OKJF7G4MH7LYWG6K3AVCNFSM6AAAAABD2K2M6OVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMYTSNZUG43TSMJXGE>\r\n> .\r\n> You are receiving this because you commented.Message ID:\r\n> ***@***.***>\r\n>\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1974779886/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"thebluefish","id":4490910,"node_id":"MDQ6VXNlcjQ0OTA5MTA=","avatar_url":"https://avatars.githubusercontent.com/u/4490910?v=4","gravatar_id":"","url":"https://api.github.com/users/thebluefish","html_url":"https://github.com/thebluefish","followers_url":"https://api.github.com/users/thebluefish/followers","following_url":"https://api.github.com/users/thebluefish/following{/other_user}","gists_url":"https://api.github.com/users/thebluefish/gists{/gist_id}","starred_url":"https://api.github.com/users/thebluefish/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thebluefish/subscriptions","organizations_url":"https://api.github.com/users/thebluefish/orgs","repos_url":"https://api.github.com/users/thebluefish/repos","events_url":"https://api.github.com/users/thebluefish/events{/privacy}","received_events_url":"https://api.github.com/users/thebluefish/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12003660787,"node_id":"CE_lADODf6-U86AaPjMzwAAAALLeVPz","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/12003660787","actor":{"login":"alice-i-cecile","id":3579909,"node_id":"MDQ6VXNlcjM1Nzk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3579909?v=4","gravatar_id":"","url":"https://api.github.com/users/alice-i-cecile","html_url":"https://github.com/alice-i-cecile","followers_url":"https://api.github.com/users/alice-i-cecile/followers","following_url":"https://api.github.com/users/alice-i-cecile/following{/other_user}","gists_url":"https://api.github.com/users/alice-i-cecile/gists{/gist_id}","starred_url":"https://api.github.com/users/alice-i-cecile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alice-i-cecile/subscriptions","organizations_url":"https://api.github.com/users/alice-i-cecile/orgs","repos_url":"https://api.github.com/users/alice-i-cecile/repos","events_url":"https://api.github.com/users/alice-i-cecile/events{/privacy}","received_events_url":"https://api.github.com/users/alice-i-cecile/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2024-03-04T19:15:21Z","state_reason":null,"performed_via_github_app":null},{"id":12003822619,"node_id":"REFE_lADODf6-U86AaPjMzwAAAALLe8wb","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/12003822619","actor":{"login":"github-merge-queue[bot]","id":118344674,"node_id":"BOT_kgDOBw3L4g","avatar_url":"https://avatars.githubusercontent.com/u/9919?v=4","gravatar_id":"","url":"https://api.github.com/users/github-merge-queue%5Bbot%5D","html_url":"https://github.com/apps/github-merge-queue","followers_url":"https://api.github.com/users/github-merge-queue%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-merge-queue%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-merge-queue%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-merge-queue%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-merge-queue%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-merge-queue%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-merge-queue%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-merge-queue%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-merge-queue%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"d6a7319106e55222e9ad215f27a20bc5ad8b27b1","commit_url":"https://api.github.com/repos/bevyengine/bevy/commits/d6a7319106e55222e9ad215f27a20bc5ad8b27b1","created_at":"2024-03-04T19:30:19Z","performed_via_github_app":null},{"id":12019687952,"node_id":"REFE_lADODf6-U86AaPjMzwAAAALMbeIQ","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/12019687952","actor":{"login":"mockersf","id":8672791,"node_id":"MDQ6VXNlcjg2NzI3OTE=","avatar_url":"https://avatars.githubusercontent.com/u/8672791?v=4","gravatar_id":"","url":"https://api.github.com/users/mockersf","html_url":"https://github.com/mockersf","followers_url":"https://api.github.com/users/mockersf/followers","following_url":"https://api.github.com/users/mockersf/following{/other_user}","gists_url":"https://api.github.com/users/mockersf/gists{/gist_id}","starred_url":"https://api.github.com/users/mockersf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mockersf/subscriptions","organizations_url":"https://api.github.com/users/mockersf/orgs","repos_url":"https://api.github.com/users/mockersf/repos","events_url":"https://api.github.com/users/mockersf/events{/privacy}","received_events_url":"https://api.github.com/users/mockersf/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"54f0c556f60064c4b7f4026e497524a3fdd417be","commit_url":"https://api.github.com/repos/bevyengine/bevy/commits/54f0c556f60064c4b7f4026e497524a3fdd417be","created_at":"2024-03-05T21:10:56Z","performed_via_github_app":null},{"id":12062713757,"node_id":"REFE_lADODf6-U86AaPjMzwAAAALO_med","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/12062713757","actor":{"login":"spectria-limina","id":118812919,"node_id":"U_kgDOBxTw9w","avatar_url":"https://avatars.githubusercontent.com/u/118812919?v=4","gravatar_id":"","url":"https://api.github.com/users/spectria-limina","html_url":"https://github.com/spectria-limina","followers_url":"https://api.github.com/users/spectria-limina/followers","following_url":"https://api.github.com/users/spectria-limina/following{/other_user}","gists_url":"https://api.github.com/users/spectria-limina/gists{/gist_id}","starred_url":"https://api.github.com/users/spectria-limina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spectria-limina/subscriptions","organizations_url":"https://api.github.com/users/spectria-limina/orgs","repos_url":"https://api.github.com/users/spectria-limina/repos","events_url":"https://api.github.com/users/spectria-limina/events{/privacy}","received_events_url":"https://api.github.com/users/spectria-limina/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"3c6f5e7c9b899d74c65b685ed698303e9ac08b1f","commit_url":"https://api.github.com/repos/spectria-limina/bevy/commits/3c6f5e7c9b899d74c65b685ed698303e9ac08b1f","created_at":"2024-03-09T08:36:46Z","performed_via_github_app":null},{"actor":{"login":"james7132","id":3137680,"node_id":"MDQ6VXNlcjMxMzc2ODA=","avatar_url":"https://avatars.githubusercontent.com/u/3137680?v=4","gravatar_id":"","url":"https://api.github.com/users/james7132","html_url":"https://github.com/james7132","followers_url":"https://api.github.com/users/james7132/followers","following_url":"https://api.github.com/users/james7132/following{/other_user}","gists_url":"https://api.github.com/users/james7132/gists{/gist_id}","starred_url":"https://api.github.com/users/james7132/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/james7132/subscriptions","organizations_url":"https://api.github.com/users/james7132/orgs","repos_url":"https://api.github.com/users/james7132/repos","events_url":"https://api.github.com/users/james7132/events{/privacy}","received_events_url":"https://api.github.com/users/james7132/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-13T04:00:28Z","updated_at":"2024-03-13T04:00:28Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/12434","repository_url":"https://api.github.com/repos/bevyengine/bevy","labels_url":"https://api.github.com/repos/bevyengine/bevy/issues/12434/labels{/name}","comments_url":"https://api.github.com/repos/bevyengine/bevy/issues/12434/comments","events_url":"https://api.github.com/repos/bevyengine/bevy/issues/12434/events","html_url":"https://github.com/bevyengine/bevy/issues/12434","id":2181248772,"node_id":"I_kwDODf6-U86CAzcE","number":12434,"title":"The published web examples panic when opening Print dialog","user":{"login":"maximetinu","id":16073309,"node_id":"MDQ6VXNlcjE2MDczMzA5","avatar_url":"https://avatars.githubusercontent.com/u/16073309?v=4","gravatar_id":"","url":"https://api.github.com/users/maximetinu","html_url":"https://github.com/maximetinu","followers_url":"https://api.github.com/users/maximetinu/followers","following_url":"https://api.github.com/users/maximetinu/following{/other_user}","gists_url":"https://api.github.com/users/maximetinu/gists{/gist_id}","starred_url":"https://api.github.com/users/maximetinu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maximetinu/subscriptions","organizations_url":"https://api.github.com/users/maximetinu/orgs","repos_url":"https://api.github.com/users/maximetinu/repos","events_url":"https://api.github.com/users/maximetinu/events{/privacy}","received_events_url":"https://api.github.com/users/maximetinu/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1795619323,"node_id":"MDU6TGFiZWwxNzk1NjE5MzIz","url":"https://api.github.com/repos/bevyengine/bevy/labels/C-Bug","name":"C-Bug","color":"d73a4a","default":false,"description":"An unexpected or incorrect behavior"},{"id":2272055811,"node_id":"MDU6TGFiZWwyMjcyMDU1ODEx","url":"https://api.github.com/repos/bevyengine/bevy/labels/A-Windowing","name":"A-Windowing","color":"c6a751","default":false,"description":"Platform-agnostic interface layer to run your app in"},{"id":2351483673,"node_id":"MDU6TGFiZWwyMzUxNDgzNjcz","url":"https://api.github.com/repos/bevyengine/bevy/labels/O-Web","name":"O-Web","color":"2e6991","default":false,"description":"Specific to web (WASM) builds"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-03-12T10:22:43Z","updated_at":"2024-03-13T22:08:26Z","closed_at":null,"author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":234798675,"node_id":"MDEwOlJlcG9zaXRvcnkyMzQ3OTg2NzU=","name":"bevy","full_name":"bevyengine/bevy","private":false,"owner":{"login":"bevyengine","id":60047606,"node_id":"MDEyOk9yZ2FuaXphdGlvbjYwMDQ3NjA2","avatar_url":"https://avatars.githubusercontent.com/u/60047606?v=4","gravatar_id":"","url":"https://api.github.com/users/bevyengine","html_url":"https://github.com/bevyengine","followers_url":"https://api.github.com/users/bevyengine/followers","following_url":"https://api.github.com/users/bevyengine/following{/other_user}","gists_url":"https://api.github.com/users/bevyengine/gists{/gist_id}","starred_url":"https://api.github.com/users/bevyengine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bevyengine/subscriptions","organizations_url":"https://api.github.com/users/bevyengine/orgs","repos_url":"https://api.github.com/users/bevyengine/repos","events_url":"https://api.github.com/users/bevyengine/events{/privacy}","received_events_url":"https://api.github.com/users/bevyengine/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/bevyengine/bevy","description":"A refreshingly simple data-driven game engine built in Rust","fork":false,"url":"https://api.github.com/repos/bevyengine/bevy","forks_url":"https://api.github.com/repos/bevyengine/bevy/forks","keys_url":"https://api.github.com/repos/bevyengine/bevy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/bevyengine/bevy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/bevyengine/bevy/teams","hooks_url":"https://api.github.com/repos/bevyengine/bevy/hooks","issue_events_url":"https://api.github.com/repos/bevyengine/bevy/issues/events{/number}","events_url":"https://api.github.com/repos/bevyengine/bevy/events","assignees_url":"https://api.github.com/repos/bevyengine/bevy/assignees{/user}","branches_url":"https://api.github.com/repos/bevyengine/bevy/branches{/branch}","tags_url":"https://api.github.com/repos/bevyengine/bevy/tags","blobs_url":"https://api.github.com/repos/bevyengine/bevy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/bevyengine/bevy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/bevyengine/bevy/git/refs{/sha}","trees_url":"https://api.github.com/repos/bevyengine/bevy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/bevyengine/bevy/statuses/{sha}","languages_url":"https://api.github.com/repos/bevyengine/bevy/languages","stargazers_url":"https://api.github.com/repos/bevyengine/bevy/stargazers","contributors_url":"https://api.github.com/repos/bevyengine/bevy/contributors","subscribers_url":"https://api.github.com/repos/bevyengine/bevy/subscribers","subscription_url":"https://api.github.com/repos/bevyengine/bevy/subscription","commits_url":"https://api.github.com/repos/bevyengine/bevy/commits{/sha}","git_commits_url":"https://api.github.com/repos/bevyengine/bevy/git/commits{/sha}","comments_url":"https://api.github.com/repos/bevyengine/bevy/comments{/number}","issue_comment_url":"https://api.github.com/repos/bevyengine/bevy/issues/comments{/number}","contents_url":"https://api.github.com/repos/bevyengine/bevy/contents/{+path}","compare_url":"https://api.github.com/repos/bevyengine/bevy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/bevyengine/bevy/merges","archive_url":"https://api.github.com/repos/bevyengine/bevy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/bevyengine/bevy/downloads","issues_url":"https://api.github.com/repos/bevyengine/bevy/issues{/number}","pulls_url":"https://api.github.com/repos/bevyengine/bevy/pulls{/number}","milestones_url":"https://api.github.com/repos/bevyengine/bevy/milestones{/number}","notifications_url":"https://api.github.com/repos/bevyengine/bevy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/bevyengine/bevy/labels{/name}","releases_url":"https://api.github.com/repos/bevyengine/bevy/releases{/id}","deployments_url":"https://api.github.com/repos/bevyengine/bevy/deployments","created_at":"2020-01-18T21:13:55Z","updated_at":"2025-11-10T00:30:24Z","pushed_at":"2025-11-09T20:05:46Z","git_url":"git://github.com/bevyengine/bevy.git","ssh_url":"git@github.com:bevyengine/bevy.git","clone_url":"https://github.com/bevyengine/bevy.git","svn_url":"https://github.com/bevyengine/bevy","homepage":"https://bevy.org","size":152673,"stargazers_count":42996,"watchers_count":42996,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":true,"forks_count":4220,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3116,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["bevy","game-development","game-engine","gamedev","open-source","rust"],"visibility":"public","forks":4220,"open_issues":3116,"watchers":42996,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"## Bevy version\r\n\r\nATOW, if I'm not mistaken, the web examples are using latest Bevy 0.13\r\n\r\n## What you did\r\n\r\n- Open any Bevy example, like this one: https://bevyengine.org/examples/2D%20Rendering/sprite/\r\n- Open the print dialog of the browser. In Google Chrome, it is `File > Print...` or pressing `Ctrl+P` or `Cmd+P`\r\n- Alternatively, you can call `print()` in the JS console\r\n- \r\n## What went wrong\r\n\r\nThe print dialog opens successfully, and even shows a picture of the canvas at the time of opening the dialog:\r\n\r\n![image](https://github.com/bevyengine/bevy/assets/16073309/a16f6c2e-2c93-4ed2-adb2-a0ea91a26c13)\r\n\r\nHowever, Bevy panics at `wasm_example.js:494 panicked at /Users/runner/.cargo/registry/src/index.crates.io-6f17d22bba15001f/winit-0.29.10/src/platform_impl/web/web_sys/resize_scaling.rs:129:9:\r\ncreated media query doesn't match, 2 != 2`\r\n\r\n\r\n![image](https://github.com/bevyengine/bevy/assets/16073309/dc898906-66ec-44e9-8022-a7ea3038744e)\r\n\r\n\r\n## Additional information\r\n\r\n- I opened an issue on Winit's side: https://github.com/rust-windowing/winit/issues/3579 but apparently they can't reproduce on a minimal example\r\n- Besides, it smells like it could be a browser's bug, because it is reproduceable in Google Chrome and Safari, but not in Firefox\r\n- However, I'm opening this issue to Bevy because the asset being hit is a `debug_assert!` ([this one](https://github.com/rust-windowing/winit/blob/aaaf08972dee4ebdbee5d243d5022da76d3efd0c/src/platform_impl/web/web_sys/resize_scaling.rs#L129)), which shouldn't crash on release builds\r\n- And, AFAIK, [Bevy builds the example showcase in Release mode](https://github.com/Maximetinu/bevy/blob/main/tools/example-showcase/src/main.rs#L22), so it shouldn't be crashing\r\n","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/12434/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bevyengine/bevy/issues/12434/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1994843992","html_url":"https://github.com/bevyengine/bevy/issues/12126#issuecomment-1994843992","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/12126","id":1994843992,"node_id":"IC_kwDODf6-U8525udY","user":{"login":"NiklasEi","id":12236672,"node_id":"MDQ6VXNlcjEyMjM2Njcy","avatar_url":"https://avatars.githubusercontent.com/u/12236672?v=4","gravatar_id":"","url":"https://api.github.com/users/NiklasEi","html_url":"https://github.com/NiklasEi","followers_url":"https://api.github.com/users/NiklasEi/followers","following_url":"https://api.github.com/users/NiklasEi/following{/other_user}","gists_url":"https://api.github.com/users/NiklasEi/gists{/gist_id}","starred_url":"https://api.github.com/users/NiklasEi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NiklasEi/subscriptions","organizations_url":"https://api.github.com/users/NiklasEi/orgs","repos_url":"https://api.github.com/users/NiklasEi/repos","events_url":"https://api.github.com/users/NiklasEi/events{/privacy}","received_events_url":"https://api.github.com/users/NiklasEi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-13T16:16:37Z","updated_at":"2024-03-13T16:19:20Z","body":"For me, the new winit version removed the warning but did not improve the performance issue. For example: [the deployed WASM build of bevy_game_template](https://niklasei.github.io/bevy_game_template/) runs with 60 FPS in my Firefox, until I click outside for the first time. Afterwards, the \"game\" visibly stutters (FPS drop to ~3-10).\r\n\r\nEdit: for everyone stumbling over this after me. This is expected. #12239 fixed the performance issue, but will only come with the next Bevy release. The winit upgrade only fixed the spamming log message.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1994843992/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"NiklasEi","id":12236672,"node_id":"MDQ6VXNlcjEyMjM2Njcy","avatar_url":"https://avatars.githubusercontent.com/u/12236672?v=4","gravatar_id":"","url":"https://api.github.com/users/NiklasEi","html_url":"https://github.com/NiklasEi","followers_url":"https://api.github.com/users/NiklasEi/followers","following_url":"https://api.github.com/users/NiklasEi/following{/other_user}","gists_url":"https://api.github.com/users/NiklasEi/gists{/gist_id}","starred_url":"https://api.github.com/users/NiklasEi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NiklasEi/subscriptions","organizations_url":"https://api.github.com/users/NiklasEi/orgs","repos_url":"https://api.github.com/users/NiklasEi/repos","events_url":"https://api.github.com/users/NiklasEi/events{/privacy}","received_events_url":"https://api.github.com/users/NiklasEi/received_events","type":"User","user_view_type":"public","site_admin":false}}]