[{"id":15074618733,"node_id":"LE_lADODf6-U86cwAd6zwAAAAOChG1t","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/15074618733","actor":{"login":"nakedible","id":445682,"node_id":"MDQ6VXNlcjQ0NTY4Mg==","avatar_url":"https://avatars.githubusercontent.com/u/445682?v=4","gravatar_id":"","url":"https://api.github.com/users/nakedible","html_url":"https://github.com/nakedible","followers_url":"https://api.github.com/users/nakedible/followers","following_url":"https://api.github.com/users/nakedible/following{/other_user}","gists_url":"https://api.github.com/users/nakedible/gists{/gist_id}","starred_url":"https://api.github.com/users/nakedible/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nakedible/subscriptions","organizations_url":"https://api.github.com/users/nakedible/orgs","repos_url":"https://api.github.com/users/nakedible/repos","events_url":"https://api.github.com/users/nakedible/events{/privacy}","received_events_url":"https://api.github.com/users/nakedible/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-11-01T20:36:30Z","label":{"name":"C-Feature","color":"b8b8b8"},"performed_via_github_app":null},{"id":15074618738,"node_id":"LE_lADODf6-U86cwAd6zwAAAAOChG1y","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/15074618738","actor":{"login":"nakedible","id":445682,"node_id":"MDQ6VXNlcjQ0NTY4Mg==","avatar_url":"https://avatars.githubusercontent.com/u/445682?v=4","gravatar_id":"","url":"https://api.github.com/users/nakedible","html_url":"https://github.com/nakedible","followers_url":"https://api.github.com/users/nakedible/followers","following_url":"https://api.github.com/users/nakedible/following{/other_user}","gists_url":"https://api.github.com/users/nakedible/gists{/gist_id}","starred_url":"https://api.github.com/users/nakedible/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nakedible/subscriptions","organizations_url":"https://api.github.com/users/nakedible/orgs","repos_url":"https://api.github.com/users/nakedible/repos","events_url":"https://api.github.com/users/nakedible/events{/privacy}","received_events_url":"https://api.github.com/users/nakedible/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-11-01T20:36:30Z","label":{"name":"S-Needs-Triage","color":"D876e3"},"performed_via_github_app":null},{"id":15074663260,"node_id":"UNLE_lADODf6-U86cwAd6zwAAAAOChRtc","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/15074663260","actor":{"login":"iiYese","id":83026177,"node_id":"MDQ6VXNlcjgzMDI2MTc3","avatar_url":"https://avatars.githubusercontent.com/u/83026177?v=4","gravatar_id":"","url":"https://api.github.com/users/iiYese","html_url":"https://github.com/iiYese","followers_url":"https://api.github.com/users/iiYese/followers","following_url":"https://api.github.com/users/iiYese/following{/other_user}","gists_url":"https://api.github.com/users/iiYese/gists{/gist_id}","starred_url":"https://api.github.com/users/iiYese/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iiYese/subscriptions","organizations_url":"https://api.github.com/users/iiYese/orgs","repos_url":"https://api.github.com/users/iiYese/repos","events_url":"https://api.github.com/users/iiYese/events{/privacy}","received_events_url":"https://api.github.com/users/iiYese/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2024-11-01T20:41:54Z","label":{"name":"S-Needs-Triage","color":"D876e3"},"performed_via_github_app":null},{"id":15074663263,"node_id":"LE_lADODf6-U86cwAd6zwAAAAOChRtf","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/15074663263","actor":{"login":"iiYese","id":83026177,"node_id":"MDQ6VXNlcjgzMDI2MTc3","avatar_url":"https://avatars.githubusercontent.com/u/83026177?v=4","gravatar_id":"","url":"https://api.github.com/users/iiYese","html_url":"https://github.com/iiYese","followers_url":"https://api.github.com/users/iiYese/followers","following_url":"https://api.github.com/users/iiYese/following{/other_user}","gists_url":"https://api.github.com/users/iiYese/gists{/gist_id}","starred_url":"https://api.github.com/users/iiYese/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iiYese/subscriptions","organizations_url":"https://api.github.com/users/iiYese/orgs","repos_url":"https://api.github.com/users/iiYese/repos","events_url":"https://api.github.com/users/iiYese/events{/privacy}","received_events_url":"https://api.github.com/users/iiYese/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-11-01T20:41:54Z","label":{"name":"A-ECS","color":"c6a751"},"performed_via_github_app":null},{"id":15074663268,"node_id":"LE_lADODf6-U86cwAd6zwAAAAOChRtk","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/15074663268","actor":{"login":"iiYese","id":83026177,"node_id":"MDQ6VXNlcjgzMDI2MTc3","avatar_url":"https://avatars.githubusercontent.com/u/83026177?v=4","gravatar_id":"","url":"https://api.github.com/users/iiYese","html_url":"https://github.com/iiYese","followers_url":"https://api.github.com/users/iiYese/followers","following_url":"https://api.github.com/users/iiYese/following{/other_user}","gists_url":"https://api.github.com/users/iiYese/gists{/gist_id}","starred_url":"https://api.github.com/users/iiYese/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iiYese/subscriptions","organizations_url":"https://api.github.com/users/iiYese/orgs","repos_url":"https://api.github.com/users/iiYese/repos","events_url":"https://api.github.com/users/iiYese/events{/privacy}","received_events_url":"https://api.github.com/users/iiYese/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-11-01T20:41:54Z","label":{"name":"D-Modest","color":"008672"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/2452613304","html_url":"https://github.com/bevyengine/bevy/issues/16208#issuecomment-2452613304","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/16208","id":2452613304,"node_id":"IC_kwDODf6-U86SL-i4","user":{"login":"bushrat011899","id":2217286,"node_id":"MDQ6VXNlcjIyMTcyODY=","avatar_url":"https://avatars.githubusercontent.com/u/2217286?v=4","gravatar_id":"","url":"https://api.github.com/users/bushrat011899","html_url":"https://github.com/bushrat011899","followers_url":"https://api.github.com/users/bushrat011899/followers","following_url":"https://api.github.com/users/bushrat011899/following{/other_user}","gists_url":"https://api.github.com/users/bushrat011899/gists{/gist_id}","starred_url":"https://api.github.com/users/bushrat011899/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bushrat011899/subscriptions","organizations_url":"https://api.github.com/users/bushrat011899/orgs","repos_url":"https://api.github.com/users/bushrat011899/repos","events_url":"https://api.github.com/users/bushrat011899/events{/privacy}","received_events_url":"https://api.github.com/users/bushrat011899/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-01T21:25:47Z","updated_at":"2024-11-01T21:25:47Z","body":"The status-quo for this is to create a private `Component` and a public `QueryData`, but that doesn't allow replacing the value (instead you'd need to also add some commands). Supporting an immutable `Component` would eliminate this boilerplate.\n\nIdeally, it would be a compiler error to ask for a mutable reference to an immutable component. Perhaps `Component` as a trait could be modified to include a parameter indicating mutability, and the mutable `QueryData` implementation would not be available for said parameter? Or `Component` could be split into a `Component` and `ComponentMut` pair of traits? ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/2452613304/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bushrat011899","id":2217286,"node_id":"MDQ6VXNlcjIyMTcyODY=","avatar_url":"https://avatars.githubusercontent.com/u/2217286?v=4","gravatar_id":"","url":"https://api.github.com/users/bushrat011899","html_url":"https://github.com/bushrat011899","followers_url":"https://api.github.com/users/bushrat011899/followers","following_url":"https://api.github.com/users/bushrat011899/following{/other_user}","gists_url":"https://api.github.com/users/bushrat011899/gists{/gist_id}","starred_url":"https://api.github.com/users/bushrat011899/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bushrat011899/subscriptions","organizations_url":"https://api.github.com/users/bushrat011899/orgs","repos_url":"https://api.github.com/users/bushrat011899/repos","events_url":"https://api.github.com/users/bushrat011899/events{/privacy}","received_events_url":"https://api.github.com/users/bushrat011899/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/2452633963","html_url":"https://github.com/bevyengine/bevy/issues/16208#issuecomment-2452633963","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/16208","id":2452633963,"node_id":"IC_kwDODf6-U86SMDlr","user":{"login":"iiYese","id":83026177,"node_id":"MDQ6VXNlcjgzMDI2MTc3","avatar_url":"https://avatars.githubusercontent.com/u/83026177?v=4","gravatar_id":"","url":"https://api.github.com/users/iiYese","html_url":"https://github.com/iiYese","followers_url":"https://api.github.com/users/iiYese/followers","following_url":"https://api.github.com/users/iiYese/following{/other_user}","gists_url":"https://api.github.com/users/iiYese/gists{/gist_id}","starred_url":"https://api.github.com/users/iiYese/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iiYese/subscriptions","organizations_url":"https://api.github.com/users/iiYese/orgs","repos_url":"https://api.github.com/users/iiYese/repos","events_url":"https://api.github.com/users/iiYese/events{/privacy}","received_events_url":"https://api.github.com/users/iiYese/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-01T21:45:55Z","updated_at":"2024-11-02T22:56:13Z","body":"It could be as simple as the `Component` derive also adding an impl for a `Mutable` trait. You can have a `#[immutable]` attribute macro that opts out of the `Mutable` impl. Then just:\n```rs\nimpl<T: Component + Mutable> QueryData for &'_ mut T {\n    // ..\n}\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/2452633963/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"iiYese","id":83026177,"node_id":"MDQ6VXNlcjgzMDI2MTc3","avatar_url":"https://avatars.githubusercontent.com/u/83026177?v=4","gravatar_id":"","url":"https://api.github.com/users/iiYese","html_url":"https://github.com/iiYese","followers_url":"https://api.github.com/users/iiYese/followers","following_url":"https://api.github.com/users/iiYese/following{/other_user}","gists_url":"https://api.github.com/users/iiYese/gists{/gist_id}","starred_url":"https://api.github.com/users/iiYese/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iiYese/subscriptions","organizations_url":"https://api.github.com/users/iiYese/orgs","repos_url":"https://api.github.com/users/iiYese/repos","events_url":"https://api.github.com/users/iiYese/events{/privacy}","received_events_url":"https://api.github.com/users/iiYese/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":15075164957,"node_id":"LE_lADODf6-U86cwAd6zwAAAAOCjMMd","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/15075164957","actor":{"login":"iiYese","id":83026177,"node_id":"MDQ6VXNlcjgzMDI2MTc3","avatar_url":"https://avatars.githubusercontent.com/u/83026177?v=4","gravatar_id":"","url":"https://api.github.com/users/iiYese","html_url":"https://github.com/iiYese","followers_url":"https://api.github.com/users/iiYese/followers","following_url":"https://api.github.com/users/iiYese/following{/other_user}","gists_url":"https://api.github.com/users/iiYese/gists{/gist_id}","starred_url":"https://api.github.com/users/iiYese/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iiYese/subscriptions","organizations_url":"https://api.github.com/users/iiYese/orgs","repos_url":"https://api.github.com/users/iiYese/repos","events_url":"https://api.github.com/users/iiYese/events{/privacy}","received_events_url":"https://api.github.com/users/iiYese/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-11-01T21:51:29Z","label":{"name":"S-Needs-Design","color":"D876E3"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/2452678107","html_url":"https://github.com/bevyengine/bevy/issues/16208#issuecomment-2452678107","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/16208","id":2452678107,"node_id":"IC_kwDODf6-U86SMOXb","user":{"login":"SpecificProtagonist","id":30270112,"node_id":"MDQ6VXNlcjMwMjcwMTEy","avatar_url":"https://avatars.githubusercontent.com/u/30270112?v=4","gravatar_id":"","url":"https://api.github.com/users/SpecificProtagonist","html_url":"https://github.com/SpecificProtagonist","followers_url":"https://api.github.com/users/SpecificProtagonist/followers","following_url":"https://api.github.com/users/SpecificProtagonist/following{/other_user}","gists_url":"https://api.github.com/users/SpecificProtagonist/gists{/gist_id}","starred_url":"https://api.github.com/users/SpecificProtagonist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SpecificProtagonist/subscriptions","organizations_url":"https://api.github.com/users/SpecificProtagonist/orgs","repos_url":"https://api.github.com/users/SpecificProtagonist/repos","events_url":"https://api.github.com/users/SpecificProtagonist/events{/privacy}","received_events_url":"https://api.github.com/users/SpecificProtagonist/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-01T22:36:42Z","updated_at":"2024-11-01T22:36:42Z","body":"> Then just impl<T: Component + Mutable> QueryData for &'static mut T\n\nI like this. Additionally we still need to store a mutability flag in the `ComponentInfo` and then check it when accessing components by id.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/2452678107/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"SpecificProtagonist","id":30270112,"node_id":"MDQ6VXNlcjMwMjcwMTEy","avatar_url":"https://avatars.githubusercontent.com/u/30270112?v=4","gravatar_id":"","url":"https://api.github.com/users/SpecificProtagonist","html_url":"https://github.com/SpecificProtagonist","followers_url":"https://api.github.com/users/SpecificProtagonist/followers","following_url":"https://api.github.com/users/SpecificProtagonist/following{/other_user}","gists_url":"https://api.github.com/users/SpecificProtagonist/gists{/gist_id}","starred_url":"https://api.github.com/users/SpecificProtagonist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SpecificProtagonist/subscriptions","organizations_url":"https://api.github.com/users/SpecificProtagonist/orgs","repos_url":"https://api.github.com/users/SpecificProtagonist/repos","events_url":"https://api.github.com/users/SpecificProtagonist/events{/privacy}","received_events_url":"https://api.github.com/users/SpecificProtagonist/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/2472256332","html_url":"https://github.com/bevyengine/bevy/issues/16208#issuecomment-2472256332","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/16208","id":2472256332,"node_id":"IC_kwDODf6-U86TW6NM","user":{"login":"alice-i-cecile","id":3579909,"node_id":"MDQ6VXNlcjM1Nzk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3579909?v=4","gravatar_id":"","url":"https://api.github.com/users/alice-i-cecile","html_url":"https://github.com/alice-i-cecile","followers_url":"https://api.github.com/users/alice-i-cecile/followers","following_url":"https://api.github.com/users/alice-i-cecile/following{/other_user}","gists_url":"https://api.github.com/users/alice-i-cecile/gists{/gist_id}","starred_url":"https://api.github.com/users/alice-i-cecile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alice-i-cecile/subscriptions","organizations_url":"https://api.github.com/users/alice-i-cecile/orgs","repos_url":"https://api.github.com/users/alice-i-cecile/repos","events_url":"https://api.github.com/users/alice-i-cecile/events{/privacy}","received_events_url":"https://api.github.com/users/alice-i-cecile/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-13T02:47:48Z","updated_at":"2024-11-13T02:47:48Z","body":"Following some [more discussion on Discord](https://discord.com/channels/691052431525675048/1306082486492856363/1306084055867068519), there seems to be broad consensus that this feature is desirable and that we should use the design laid out in https://github.com/bevyengine/bevy/issues/16208#issuecomment-2452633963, which allows this to be easily extended to `Resource` as well.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/2472256332/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"alice-i-cecile","id":3579909,"node_id":"MDQ6VXNlcjM1Nzk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3579909?v=4","gravatar_id":"","url":"https://api.github.com/users/alice-i-cecile","html_url":"https://github.com/alice-i-cecile","followers_url":"https://api.github.com/users/alice-i-cecile/followers","following_url":"https://api.github.com/users/alice-i-cecile/following{/other_user}","gists_url":"https://api.github.com/users/alice-i-cecile/gists{/gist_id}","starred_url":"https://api.github.com/users/alice-i-cecile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alice-i-cecile/subscriptions","organizations_url":"https://api.github.com/users/alice-i-cecile/orgs","repos_url":"https://api.github.com/users/alice-i-cecile/repos","events_url":"https://api.github.com/users/alice-i-cecile/events{/privacy}","received_events_url":"https://api.github.com/users/alice-i-cecile/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"bushrat011899","id":2217286,"node_id":"MDQ6VXNlcjIyMTcyODY=","avatar_url":"https://avatars.githubusercontent.com/u/2217286?v=4","gravatar_id":"","url":"https://api.github.com/users/bushrat011899","html_url":"https://github.com/bushrat011899","followers_url":"https://api.github.com/users/bushrat011899/followers","following_url":"https://api.github.com/users/bushrat011899/following{/other_user}","gists_url":"https://api.github.com/users/bushrat011899/gists{/gist_id}","starred_url":"https://api.github.com/users/bushrat011899/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bushrat011899/subscriptions","organizations_url":"https://api.github.com/users/bushrat011899/orgs","repos_url":"https://api.github.com/users/bushrat011899/repos","events_url":"https://api.github.com/users/bushrat011899/events{/privacy}","received_events_url":"https://api.github.com/users/bushrat011899/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-13T06:32:54Z","updated_at":"2024-11-13T06:32:54Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/16372","repository_url":"https://api.github.com/repos/bevyengine/bevy","labels_url":"https://api.github.com/repos/bevyengine/bevy/issues/16372/labels{/name}","comments_url":"https://api.github.com/repos/bevyengine/bevy/issues/16372/comments","events_url":"https://api.github.com/repos/bevyengine/bevy/issues/16372/events","html_url":"https://github.com/bevyengine/bevy/pull/16372","id":2654372512,"node_id":"PR_kwDODf6-U86BuywU","number":16372,"title":"Add Immutable `Component` Support","user":{"login":"bushrat011899","id":2217286,"node_id":"MDQ6VXNlcjIyMTcyODY=","avatar_url":"https://avatars.githubusercontent.com/u/2217286?v=4","gravatar_id":"","url":"https://api.github.com/users/bushrat011899","html_url":"https://github.com/bushrat011899","followers_url":"https://api.github.com/users/bushrat011899/followers","following_url":"https://api.github.com/users/bushrat011899/following{/other_user}","gists_url":"https://api.github.com/users/bushrat011899/gists{/gist_id}","starred_url":"https://api.github.com/users/bushrat011899/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bushrat011899/subscriptions","organizations_url":"https://api.github.com/users/bushrat011899/orgs","repos_url":"https://api.github.com/users/bushrat011899/repos","events_url":"https://api.github.com/users/bushrat011899/events{/privacy}","received_events_url":"https://api.github.com/users/bushrat011899/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1795619326,"node_id":"MDU6TGFiZWwxNzk1NjE5MzI2","url":"https://api.github.com/repos/bevyengine/bevy/labels/C-Feature","name":"C-Feature","color":"b8b8b8","default":false,"description":"A new feature, making something new possible"},{"id":2197761682,"node_id":"MDU6TGFiZWwyMTk3NzYxNjgy","url":"https://api.github.com/repos/bevyengine/bevy/labels/A-ECS","name":"A-ECS","color":"c6a751","default":false,"description":"Entities, components, systems, and events"},{"id":2747865511,"node_id":"MDU6TGFiZWwyNzQ3ODY1NTEx","url":"https://api.github.com/repos/bevyengine/bevy/labels/S-Ready-For-Final-Review","name":"S-Ready-For-Final-Review","color":"D876E3","default":false,"description":"This PR has been approved by the community. It's ready for a maintainer to consider merging it"},{"id":2914600295,"node_id":"MDU6TGFiZWwyOTE0NjAwMjk1","url":"https://api.github.com/repos/bevyengine/bevy/labels/A-Reflection","name":"A-Reflection","color":"c6a751","default":false,"description":"Runtime information about types"},{"id":3166133948,"node_id":"MDU6TGFiZWwzMTY2MTMzOTQ4","url":"https://api.github.com/repos/bevyengine/bevy/labels/M-Migration-Guide","name":"M-Migration-Guide","color":"006B75","default":false,"description":"A breaking change to Bevy's public API that needs to be noted in a migration guide"},{"id":6600141374,"node_id":"LA_kwDODf6-U88AAAABiWYqPg","url":"https://api.github.com/repos/bevyengine/bevy/labels/M-Release-Note","name":"M-Release-Note","color":"006B75","default":false,"description":"Work that should be called out in the blog due to impact"},{"id":6899549740,"node_id":"LA_kwDODf6-U88AAAABmz7GLA","url":"https://api.github.com/repos/bevyengine/bevy/labels/X-Uncontroversial","name":"X-Uncontroversial","color":"d93f0b","default":false,"description":"This work is generally agreed upon"},{"id":6968727485,"node_id":"LA_kwDODf6-U88AAAABn15XvQ","url":"https://api.github.com/repos/bevyengine/bevy/labels/D-Macros","name":"D-Macros","color":"008672","default":false,"description":"Code that generates Rust code"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/bevyengine/bevy/milestones/28","html_url":"https://github.com/bevyengine/bevy/milestone/28","labels_url":"https://api.github.com/repos/bevyengine/bevy/milestones/28/labels","id":11655039,"node_id":"MI_kwDODf6-U84Asdd_","number":28,"title":"0.16","description":"","creator":{"login":"alice-i-cecile","id":3579909,"node_id":"MDQ6VXNlcjM1Nzk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3579909?v=4","gravatar_id":"","url":"https://api.github.com/users/alice-i-cecile","html_url":"https://github.com/alice-i-cecile","followers_url":"https://api.github.com/users/alice-i-cecile/followers","following_url":"https://api.github.com/users/alice-i-cecile/following{/other_user}","gists_url":"https://api.github.com/users/alice-i-cecile/gists{/gist_id}","starred_url":"https://api.github.com/users/alice-i-cecile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alice-i-cecile/subscriptions","organizations_url":"https://api.github.com/users/alice-i-cecile/orgs","repos_url":"https://api.github.com/users/alice-i-cecile/repos","events_url":"https://api.github.com/users/alice-i-cecile/events{/privacy}","received_events_url":"https://api.github.com/users/alice-i-cecile/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":558,"state":"closed","created_at":"2024-09-30T20:15:21Z","updated_at":"2025-04-25T13:01:43Z","due_on":null,"closed_at":"2025-04-25T13:01:43Z"},"comments":34,"created_at":"2024-11-13T06:32:53Z","updated_at":"2025-03-25T20:06:46Z","closed_at":"2024-12-05T14:46:53Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":234798675,"node_id":"MDEwOlJlcG9zaXRvcnkyMzQ3OTg2NzU=","name":"bevy","full_name":"bevyengine/bevy","private":false,"owner":{"login":"bevyengine","id":60047606,"node_id":"MDEyOk9yZ2FuaXphdGlvbjYwMDQ3NjA2","avatar_url":"https://avatars.githubusercontent.com/u/60047606?v=4","gravatar_id":"","url":"https://api.github.com/users/bevyengine","html_url":"https://github.com/bevyengine","followers_url":"https://api.github.com/users/bevyengine/followers","following_url":"https://api.github.com/users/bevyengine/following{/other_user}","gists_url":"https://api.github.com/users/bevyengine/gists{/gist_id}","starred_url":"https://api.github.com/users/bevyengine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bevyengine/subscriptions","organizations_url":"https://api.github.com/users/bevyengine/orgs","repos_url":"https://api.github.com/users/bevyengine/repos","events_url":"https://api.github.com/users/bevyengine/events{/privacy}","received_events_url":"https://api.github.com/users/bevyengine/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/bevyengine/bevy","description":"A refreshingly simple data-driven game engine built in Rust","fork":false,"url":"https://api.github.com/repos/bevyengine/bevy","forks_url":"https://api.github.com/repos/bevyengine/bevy/forks","keys_url":"https://api.github.com/repos/bevyengine/bevy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/bevyengine/bevy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/bevyengine/bevy/teams","hooks_url":"https://api.github.com/repos/bevyengine/bevy/hooks","issue_events_url":"https://api.github.com/repos/bevyengine/bevy/issues/events{/number}","events_url":"https://api.github.com/repos/bevyengine/bevy/events","assignees_url":"https://api.github.com/repos/bevyengine/bevy/assignees{/user}","branches_url":"https://api.github.com/repos/bevyengine/bevy/branches{/branch}","tags_url":"https://api.github.com/repos/bevyengine/bevy/tags","blobs_url":"https://api.github.com/repos/bevyengine/bevy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/bevyengine/bevy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/bevyengine/bevy/git/refs{/sha}","trees_url":"https://api.github.com/repos/bevyengine/bevy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/bevyengine/bevy/statuses/{sha}","languages_url":"https://api.github.com/repos/bevyengine/bevy/languages","stargazers_url":"https://api.github.com/repos/bevyengine/bevy/stargazers","contributors_url":"https://api.github.com/repos/bevyengine/bevy/contributors","subscribers_url":"https://api.github.com/repos/bevyengine/bevy/subscribers","subscription_url":"https://api.github.com/repos/bevyengine/bevy/subscription","commits_url":"https://api.github.com/repos/bevyengine/bevy/commits{/sha}","git_commits_url":"https://api.github.com/repos/bevyengine/bevy/git/commits{/sha}","comments_url":"https://api.github.com/repos/bevyengine/bevy/comments{/number}","issue_comment_url":"https://api.github.com/repos/bevyengine/bevy/issues/comments{/number}","contents_url":"https://api.github.com/repos/bevyengine/bevy/contents/{+path}","compare_url":"https://api.github.com/repos/bevyengine/bevy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/bevyengine/bevy/merges","archive_url":"https://api.github.com/repos/bevyengine/bevy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/bevyengine/bevy/downloads","issues_url":"https://api.github.com/repos/bevyengine/bevy/issues{/number}","pulls_url":"https://api.github.com/repos/bevyengine/bevy/pulls{/number}","milestones_url":"https://api.github.com/repos/bevyengine/bevy/milestones{/number}","notifications_url":"https://api.github.com/repos/bevyengine/bevy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/bevyengine/bevy/labels{/name}","releases_url":"https://api.github.com/repos/bevyengine/bevy/releases{/id}","deployments_url":"https://api.github.com/repos/bevyengine/bevy/deployments","created_at":"2020-01-18T21:13:55Z","updated_at":"2025-11-10T00:30:24Z","pushed_at":"2025-11-09T20:05:46Z","git_url":"git://github.com/bevyengine/bevy.git","ssh_url":"git@github.com:bevyengine/bevy.git","clone_url":"https://github.com/bevyengine/bevy.git","svn_url":"https://github.com/bevyengine/bevy","homepage":"https://bevy.org","size":152673,"stargazers_count":42996,"watchers_count":42996,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":true,"forks_count":4220,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3116,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["bevy","game-development","game-engine","gamedev","open-source","rust"],"visibility":"public","forks":4220,"open_issues":3116,"watchers":42996,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/bevyengine/bevy/pulls/16372","html_url":"https://github.com/bevyengine/bevy/pull/16372","diff_url":"https://github.com/bevyengine/bevy/pull/16372.diff","patch_url":"https://github.com/bevyengine/bevy/pull/16372.patch","merged_at":"2024-12-05T14:46:53Z"},"body":"# Objective\r\n\r\n- Fixes #16208\r\n\r\n## Solution\r\n\r\n- Added an associated type to `Component`, `Mutability`, which flags whether a component is mutable, or immutable. If `Mutability= Mutable`, the component is mutable. If `Mutability= Immutable`, the component is immutable.\r\n- Updated `derive_component` to default to mutable unless an `#[component(immutable)]` attribute is added.\r\n- Updated `ReflectComponent` to check if a component is mutable and, if not, panic when attempting to mutate.\r\n\r\n## Testing\r\n\r\n- CI\r\n- `immutable_components` example.\r\n\r\n---\r\n\r\n## Showcase\r\n\r\nUsers can now mark a component as `#[component(immutable)]` to prevent safe mutation of a component while it is attached to an entity:\r\n\r\n```rust\r\n#[derive(Component)]\r\n#[component(immutable)]\r\nstruct Foo {\r\n    // ...\r\n}\r\n```\r\n\r\nThis prevents creating an exclusive reference to the component while it is attached to an entity. This is particularly powerful when combined with component hooks, as you can now fully track a component's value, ensuring whatever invariants you desire are upheld. Before this would be done my making a component private, and manually creating a `QueryData` implementation which only permitted read access.\r\n\r\n<details>\r\n  <summary>Using immutable components as an index</summary>\r\n  \r\n```rust\r\n/// This is an example of a component like [`Name`](bevy::prelude::Name), but immutable.\r\n#[derive(Clone, Copy, PartialEq, Eq, PartialOrd, Ord, Hash, Component)]\r\n#[component(\r\n    immutable,\r\n    on_insert = on_insert_name,\r\n    on_replace = on_replace_name,\r\n)]\r\npub struct Name(pub &'static str);\r\n\r\n/// This index allows for O(1) lookups of an [`Entity`] by its [`Name`].\r\n#[derive(Resource, Default)]\r\nstruct NameIndex {\r\n    name_to_entity: HashMap<Name, Entity>,\r\n}\r\n\r\nimpl NameIndex {\r\n    fn get_entity(&self, name: &'static str) -> Option<Entity> {\r\n        self.name_to_entity.get(&Name(name)).copied()\r\n    }\r\n}\r\n\r\nfn on_insert_name(mut world: DeferredWorld<'_>, entity: Entity, _component: ComponentId) {\r\n    let Some(&name) = world.entity(entity).get::<Name>() else {\r\n        unreachable!()\r\n    };\r\n    let Some(mut index) = world.get_resource_mut::<NameIndex>() else {\r\n        return;\r\n    };\r\n\r\n    index.name_to_entity.insert(name, entity);\r\n}\r\n\r\nfn on_replace_name(mut world: DeferredWorld<'_>, entity: Entity, _component: ComponentId) {\r\n    let Some(&name) = world.entity(entity).get::<Name>() else {\r\n        unreachable!()\r\n    };\r\n    let Some(mut index) = world.get_resource_mut::<NameIndex>() else {\r\n        return;\r\n    };\r\n\r\n    index.name_to_entity.remove(&name);\r\n}\r\n\r\n// Setup our name index\r\nworld.init_resource::<NameIndex>();\r\n\r\n// Spawn some entities!\r\nlet alyssa = world.spawn(Name(\"Alyssa\")).id();\r\nlet javier = world.spawn(Name(\"Javier\")).id();\r\n\r\n// Check our index\r\nlet index = world.resource::<NameIndex>();\r\n\r\nassert_eq!(index.get_entity(\"Alyssa\"), Some(alyssa));\r\nassert_eq!(index.get_entity(\"Javier\"), Some(javier));\r\n\r\n// Changing the name of an entity is also fully capture by our index\r\nworld.entity_mut(javier).insert(Name(\"Steven\"));\r\n\r\n// Javier changed their name to Steven\r\nlet steven = javier;\r\n\r\n// Check our index\r\nlet index = world.resource::<NameIndex>();\r\n\r\nassert_eq!(index.get_entity(\"Javier\"), None);\r\nassert_eq!(index.get_entity(\"Steven\"), Some(steven));\r\n```\r\n  \r\n</details>\r\n\r\nAdditionally, users can use `Component<Mutability = ...>` in trait bounds to enforce that a component _is_ mutable or _is_ immutable. When using `Component` as a trait bound without specifying `Mutability`, any component is applicable. However, methods which only work on mutable or immutable components are unavailable, since the compiler must be pessimistic about the type.\r\n\r\n## Migration Guide\r\n\r\n- When implementing `Component` manually, you must now provide a type for `Mutability`. The type `Mutable` provides equivalent behaviour to earlier versions of `Component`:\r\n```rust\r\nimpl Component for Foo {\r\n    type Mutability = Mutable;\r\n    // ...\r\n}\r\n```\r\n- When working with generic components, you may need to specify that your generic parameter implements `Component<Mutability = Mutable>` rather than `Component` if you require mutable access to said component.\r\n- The entity entry API has had to have some changes made to minimise friction when working with immutable components. Methods which previously returned a `Mut<T>` will now typically return an `OccupiedEntry<T>` instead, requiring you to add an `into_mut()` to get the `Mut<T>` item again.\r\n\r\n## Draft Release Notes\r\n\r\nComponents can now be made immutable while stored within the ECS.\r\n\r\nComponents are the fundamental unit of data within an ECS, and Bevy provides a number of ways to work with them that align with Rust's rules around ownership and borrowing. One part of this is hooks, which allow for defining custom behavior at key points in a component's lifecycle, such as addition and removal. However, there is currently no way to respond to _mutation_ of a component using hooks. The reasons for this are quite technical, but to summarize, their addition poses a significant challenge to Bevy's core promises around performance. Without mutation hooks, it's relatively trivial to modify a component in such a way that breaks invariants it intends to uphold. For example, you can use `core::mem::swap` to swap the components of two entities, bypassing the insertion and removal hooks.\r\n\r\nThis means the only way to react to this modification is via change detection in a system, which then begs the question of what happens _between_ that alteration and the next run of that system? Alternatively, you could make your component private to prevent mutation, but now you need to provide commands and a custom `QueryData` implementation to allow users to interact with your component at all.\r\n\r\nImmutable components solve this problem by preventing the creation of an exclusive reference to the component entirely. Without an exclusive reference, the only way to modify an immutable component is via removal or replacement, which is fully captured by component hooks. To make a component immutable, simply add `#[component(immutable)]`:\r\n\r\n```rust\r\n#[derive(Component)]\r\n#[component(immutable)]\r\nstruct Foo {\r\n    // ...\r\n}\r\n```\r\n\r\nWhen implementing `Component` manually, there is an associated type `Mutability` which controls this behavior:\r\n\r\n```rust\r\nimpl Component for Foo {\r\n    type Mutability = Mutable;\r\n    // ...\r\n}\r\n```\r\n\r\nNote that this means when working with generic components, you may need to specify that a component is mutable to gain access to certain methods:\r\n\r\n```rust\r\n// Before\r\nfn bar<C: Component>() {\r\n    // ...\r\n}\r\n\r\n// After\r\nfn bar<C: Component<Mutability = Mutable>>() {\r\n    // ...\r\n}\r\n```\r\n\r\nWith this new tool, creating index components, or caching data on an entity should be more user friendly, allowing libraries to provide APIs relying on components and hooks to uphold their invariants.\r\n\r\n## Notes\r\n\r\n- ~~I've done my best to implement this feature, but I'm not happy with how reflection has turned out. If any reflection SMEs know a way to improve this situation I'd greatly appreciate it.~~ There is an outstanding issue around the fallibility of mutable methods on `ReflectComponent`, but the DX is largely unchanged from `main` now.\r\n- I've attempted to prevent all safe mutable access to a component that does not implement `Component<Mutability = Mutable>`, but there may still be some methods I have missed. Please indicate so and I will address them, as they are bugs.\r\n- Unsafe is an escape hatch I am _not_ attempting to prevent. Whatever you do with unsafe is between you and your compiler.\r\n- I am marking this PR as ready, but I suspect it will undergo fairly major revisions based on SME feedback.\r\n- I've marked this PR as _Uncontroversial_ based on the feature, not the implementation.\r\n","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/16372/reactions","total_count":9,"+1":0,"-1":0,"laugh":0,"hooray":6,"confused":0,"heart":0,"rocket":0,"eyes":3},"timeline_url":"https://api.github.com/repos/bevyengine/bevy/issues/16372/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"alice-i-cecile","id":3579909,"node_id":"MDQ6VXNlcjM1Nzk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3579909?v=4","gravatar_id":"","url":"https://api.github.com/users/alice-i-cecile","html_url":"https://github.com/alice-i-cecile","followers_url":"https://api.github.com/users/alice-i-cecile/followers","following_url":"https://api.github.com/users/alice-i-cecile/following{/other_user}","gists_url":"https://api.github.com/users/alice-i-cecile/gists{/gist_id}","starred_url":"https://api.github.com/users/alice-i-cecile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alice-i-cecile/subscriptions","organizations_url":"https://api.github.com/users/alice-i-cecile/orgs","repos_url":"https://api.github.com/users/alice-i-cecile/repos","events_url":"https://api.github.com/users/alice-i-cecile/events{/privacy}","received_events_url":"https://api.github.com/users/alice-i-cecile/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-13T17:39:10Z","updated_at":"2024-11-13T17:39:10Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/4513","repository_url":"https://api.github.com/repos/bevyengine/bevy","labels_url":"https://api.github.com/repos/bevyengine/bevy/issues/4513/labels{/name}","comments_url":"https://api.github.com/repos/bevyengine/bevy/issues/4513/comments","events_url":"https://api.github.com/repos/bevyengine/bevy/issues/4513/events","html_url":"https://github.com/bevyengine/bevy/issues/4513","id":1206606278,"node_id":"I_kwDODf6-U85H61nG","number":4513,"title":"Indexes: look up entities by the value of their components","user":{"login":"alice-i-cecile","id":3579909,"node_id":"MDQ6VXNlcjM1Nzk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3579909?v=4","gravatar_id":"","url":"https://api.github.com/users/alice-i-cecile","html_url":"https://github.com/alice-i-cecile","followers_url":"https://api.github.com/users/alice-i-cecile/followers","following_url":"https://api.github.com/users/alice-i-cecile/following{/other_user}","gists_url":"https://api.github.com/users/alice-i-cecile/gists{/gist_id}","starred_url":"https://api.github.com/users/alice-i-cecile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alice-i-cecile/subscriptions","organizations_url":"https://api.github.com/users/alice-i-cecile/orgs","repos_url":"https://api.github.com/users/alice-i-cecile/repos","events_url":"https://api.github.com/users/alice-i-cecile/events{/privacy}","received_events_url":"https://api.github.com/users/alice-i-cecile/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1795619326,"node_id":"MDU6TGFiZWwxNzk1NjE5MzI2","url":"https://api.github.com/repos/bevyengine/bevy/labels/C-Feature","name":"C-Feature","color":"b8b8b8","default":false,"description":"A new feature, making something new possible"},{"id":2197761682,"node_id":"MDU6TGFiZWwyMTk3NzYxNjgy","url":"https://api.github.com/repos/bevyengine/bevy/labels/A-ECS","name":"A-ECS","color":"c6a751","default":false,"description":"Entities, components, systems, and events"},{"id":2941888683,"node_id":"MDU6TGFiZWwyOTQxODg4Njgz","url":"https://api.github.com/repos/bevyengine/bevy/labels/S-Needs-Design-Doc","name":"S-Needs-Design-Doc","color":"D876e3","default":false,"description":"This issue or PR is particularly complex, and needs an approved design doc before it can be merged"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2022-04-18T03:10:35Z","updated_at":"2024-11-13T17:39:10Z","closed_at":null,"author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":234798675,"node_id":"MDEwOlJlcG9zaXRvcnkyMzQ3OTg2NzU=","name":"bevy","full_name":"bevyengine/bevy","private":false,"owner":{"login":"bevyengine","id":60047606,"node_id":"MDEyOk9yZ2FuaXphdGlvbjYwMDQ3NjA2","avatar_url":"https://avatars.githubusercontent.com/u/60047606?v=4","gravatar_id":"","url":"https://api.github.com/users/bevyengine","html_url":"https://github.com/bevyengine","followers_url":"https://api.github.com/users/bevyengine/followers","following_url":"https://api.github.com/users/bevyengine/following{/other_user}","gists_url":"https://api.github.com/users/bevyengine/gists{/gist_id}","starred_url":"https://api.github.com/users/bevyengine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bevyengine/subscriptions","organizations_url":"https://api.github.com/users/bevyengine/orgs","repos_url":"https://api.github.com/users/bevyengine/repos","events_url":"https://api.github.com/users/bevyengine/events{/privacy}","received_events_url":"https://api.github.com/users/bevyengine/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/bevyengine/bevy","description":"A refreshingly simple data-driven game engine built in Rust","fork":false,"url":"https://api.github.com/repos/bevyengine/bevy","forks_url":"https://api.github.com/repos/bevyengine/bevy/forks","keys_url":"https://api.github.com/repos/bevyengine/bevy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/bevyengine/bevy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/bevyengine/bevy/teams","hooks_url":"https://api.github.com/repos/bevyengine/bevy/hooks","issue_events_url":"https://api.github.com/repos/bevyengine/bevy/issues/events{/number}","events_url":"https://api.github.com/repos/bevyengine/bevy/events","assignees_url":"https://api.github.com/repos/bevyengine/bevy/assignees{/user}","branches_url":"https://api.github.com/repos/bevyengine/bevy/branches{/branch}","tags_url":"https://api.github.com/repos/bevyengine/bevy/tags","blobs_url":"https://api.github.com/repos/bevyengine/bevy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/bevyengine/bevy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/bevyengine/bevy/git/refs{/sha}","trees_url":"https://api.github.com/repos/bevyengine/bevy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/bevyengine/bevy/statuses/{sha}","languages_url":"https://api.github.com/repos/bevyengine/bevy/languages","stargazers_url":"https://api.github.com/repos/bevyengine/bevy/stargazers","contributors_url":"https://api.github.com/repos/bevyengine/bevy/contributors","subscribers_url":"https://api.github.com/repos/bevyengine/bevy/subscribers","subscription_url":"https://api.github.com/repos/bevyengine/bevy/subscription","commits_url":"https://api.github.com/repos/bevyengine/bevy/commits{/sha}","git_commits_url":"https://api.github.com/repos/bevyengine/bevy/git/commits{/sha}","comments_url":"https://api.github.com/repos/bevyengine/bevy/comments{/number}","issue_comment_url":"https://api.github.com/repos/bevyengine/bevy/issues/comments{/number}","contents_url":"https://api.github.com/repos/bevyengine/bevy/contents/{+path}","compare_url":"https://api.github.com/repos/bevyengine/bevy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/bevyengine/bevy/merges","archive_url":"https://api.github.com/repos/bevyengine/bevy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/bevyengine/bevy/downloads","issues_url":"https://api.github.com/repos/bevyengine/bevy/issues{/number}","pulls_url":"https://api.github.com/repos/bevyengine/bevy/pulls{/number}","milestones_url":"https://api.github.com/repos/bevyengine/bevy/milestones{/number}","notifications_url":"https://api.github.com/repos/bevyengine/bevy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/bevyengine/bevy/labels{/name}","releases_url":"https://api.github.com/repos/bevyengine/bevy/releases{/id}","deployments_url":"https://api.github.com/repos/bevyengine/bevy/deployments","created_at":"2020-01-18T21:13:55Z","updated_at":"2025-11-10T00:30:24Z","pushed_at":"2025-11-09T20:05:46Z","git_url":"git://github.com/bevyengine/bevy.git","ssh_url":"git@github.com:bevyengine/bevy.git","clone_url":"https://github.com/bevyengine/bevy.git","svn_url":"https://github.com/bevyengine/bevy","homepage":"https://bevy.org","size":152673,"stargazers_count":42996,"watchers_count":42996,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":true,"forks_count":4220,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3116,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["bevy","game-development","game-engine","gamedev","open-source","rust"],"visibility":"public","forks":4220,"open_issues":3116,"watchers":42996,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"## What problem does this solve or what need does it fill?\r\n\r\nAn \"index\" is a way to quickly find entries based on their value.\r\nIn the context of an ECS, indexes would let us e.g. \"find all entities with components of this enum value\", identify all entities inside a spatial region using a quadtree on `Transform`, quickly look up entities by their `Name`, or filter entities to find all components whose value lies within a range. \r\n\r\n## What solution would you like?\r\n\r\nProvide a native, efficient, fool-proof indexing solution.\r\nIdeally, this should be user-extensible to account for other forms of acceleration data-structure.\r\nThis will be naturally coupled with change detection to ensure efficient updating.\r\n\r\nThe design of this is rather challenging, and requires a full RFC.\r\n\r\n## What alternative(s) have you considered?\r\n\r\nLinear time search will always work... slowly. Parallel query tools will help though.\r\n\r\nUsers can hand-roll this themselves right now, using a resource and `Query::get`. This is not particularly ergonomic, requires writing a lot of boilerplate, forces users to duplicate the API work for each project, and forces them to reckon with the perils of synchronization alone.\r\n\r\n## Additional context\r\n\r\nMay be useful for #3742. Would be useful for #1470. #1205 discusses some of the challenges and possible designs for data synchronization.","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/4513/reactions","total_count":23,"+1":22,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/bevyengine/bevy/issues/4513/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"alice-i-cecile","id":3579909,"node_id":"MDQ6VXNlcjM1Nzk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3579909?v=4","gravatar_id":"","url":"https://api.github.com/users/alice-i-cecile","html_url":"https://github.com/alice-i-cecile","followers_url":"https://api.github.com/users/alice-i-cecile/followers","following_url":"https://api.github.com/users/alice-i-cecile/following{/other_user}","gists_url":"https://api.github.com/users/alice-i-cecile/gists{/gist_id}","starred_url":"https://api.github.com/users/alice-i-cecile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alice-i-cecile/subscriptions","organizations_url":"https://api.github.com/users/alice-i-cecile/orgs","repos_url":"https://api.github.com/users/alice-i-cecile/repos","events_url":"https://api.github.com/users/alice-i-cecile/events{/privacy}","received_events_url":"https://api.github.com/users/alice-i-cecile/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-13T17:43:13Z","updated_at":"2024-11-13T17:43:13Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/16183","repository_url":"https://api.github.com/repos/bevyengine/bevy","labels_url":"https://api.github.com/repos/bevyengine/bevy/issues/16183/labels{/name}","comments_url":"https://api.github.com/repos/bevyengine/bevy/issues/16183/comments","events_url":"https://api.github.com/repos/bevyengine/bevy/issues/16183/events","html_url":"https://github.com/bevyengine/bevy/pull/16183","id":2626186709,"node_id":"PR_kwDODf6-U86AfXCz","number":16183,"title":"Mutate Observer","user":{"login":"pyhinox","id":85220296,"node_id":"MDQ6VXNlcjg1MjIwMjk2","avatar_url":"https://avatars.githubusercontent.com/u/85220296?v=4","gravatar_id":"","url":"https://api.github.com/users/pyhinox","html_url":"https://github.com/pyhinox","followers_url":"https://api.github.com/users/pyhinox/followers","following_url":"https://api.github.com/users/pyhinox/following{/other_user}","gists_url":"https://api.github.com/users/pyhinox/gists{/gist_id}","starred_url":"https://api.github.com/users/pyhinox/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pyhinox/subscriptions","organizations_url":"https://api.github.com/users/pyhinox/orgs","repos_url":"https://api.github.com/users/pyhinox/repos","events_url":"https://api.github.com/users/pyhinox/events{/privacy}","received_events_url":"https://api.github.com/users/pyhinox/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2197761682,"node_id":"MDU6TGFiZWwyMTk3NzYxNjgy","url":"https://api.github.com/repos/bevyengine/bevy/labels/A-ECS","name":"A-ECS","color":"c6a751","default":false,"description":"Entities, components, systems, and events"},{"id":4058407495,"node_id":"LA_kwDODf6-U87x5mJH","url":"https://api.github.com/repos/bevyengine/bevy/labels/X-Controversial","name":"X-Controversial","color":"D93F0B","default":false,"description":"There is active debate or serious implications around merging this PR"},{"id":6600141374,"node_id":"LA_kwDODf6-U88AAAABiWYqPg","url":"https://api.github.com/repos/bevyengine/bevy/labels/M-Release-Note","name":"M-Release-Note","color":"006B75","default":false,"description":"Work that should be called out in the blog due to impact"},{"id":6899576022,"node_id":"LA_kwDODf6-U88AAAABmz8s1g","url":"https://api.github.com/repos/bevyengine/bevy/labels/D-Modest","name":"D-Modest","color":"008672","default":false,"description":"A \"normal\" level of difficulty; suitable for simple features or challenging fixes"},{"id":6899591173,"node_id":"LA_kwDODf6-U88AAAABmz9oBQ","url":"https://api.github.com/repos/bevyengine/bevy/labels/S-Waiting-on-Author","name":"S-Waiting-on-Author","color":"D876E3","default":false,"description":"The author needs to make changes or address concerns before this can be merged"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":19,"created_at":"2024-10-31T07:40:47Z","updated_at":"2024-12-11T00:32:47Z","closed_at":null,"author_association":"NONE","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":234798675,"node_id":"MDEwOlJlcG9zaXRvcnkyMzQ3OTg2NzU=","name":"bevy","full_name":"bevyengine/bevy","private":false,"owner":{"login":"bevyengine","id":60047606,"node_id":"MDEyOk9yZ2FuaXphdGlvbjYwMDQ3NjA2","avatar_url":"https://avatars.githubusercontent.com/u/60047606?v=4","gravatar_id":"","url":"https://api.github.com/users/bevyengine","html_url":"https://github.com/bevyengine","followers_url":"https://api.github.com/users/bevyengine/followers","following_url":"https://api.github.com/users/bevyengine/following{/other_user}","gists_url":"https://api.github.com/users/bevyengine/gists{/gist_id}","starred_url":"https://api.github.com/users/bevyengine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bevyengine/subscriptions","organizations_url":"https://api.github.com/users/bevyengine/orgs","repos_url":"https://api.github.com/users/bevyengine/repos","events_url":"https://api.github.com/users/bevyengine/events{/privacy}","received_events_url":"https://api.github.com/users/bevyengine/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/bevyengine/bevy","description":"A refreshingly simple data-driven game engine built in Rust","fork":false,"url":"https://api.github.com/repos/bevyengine/bevy","forks_url":"https://api.github.com/repos/bevyengine/bevy/forks","keys_url":"https://api.github.com/repos/bevyengine/bevy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/bevyengine/bevy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/bevyengine/bevy/teams","hooks_url":"https://api.github.com/repos/bevyengine/bevy/hooks","issue_events_url":"https://api.github.com/repos/bevyengine/bevy/issues/events{/number}","events_url":"https://api.github.com/repos/bevyengine/bevy/events","assignees_url":"https://api.github.com/repos/bevyengine/bevy/assignees{/user}","branches_url":"https://api.github.com/repos/bevyengine/bevy/branches{/branch}","tags_url":"https://api.github.com/repos/bevyengine/bevy/tags","blobs_url":"https://api.github.com/repos/bevyengine/bevy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/bevyengine/bevy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/bevyengine/bevy/git/refs{/sha}","trees_url":"https://api.github.com/repos/bevyengine/bevy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/bevyengine/bevy/statuses/{sha}","languages_url":"https://api.github.com/repos/bevyengine/bevy/languages","stargazers_url":"https://api.github.com/repos/bevyengine/bevy/stargazers","contributors_url":"https://api.github.com/repos/bevyengine/bevy/contributors","subscribers_url":"https://api.github.com/repos/bevyengine/bevy/subscribers","subscription_url":"https://api.github.com/repos/bevyengine/bevy/subscription","commits_url":"https://api.github.com/repos/bevyengine/bevy/commits{/sha}","git_commits_url":"https://api.github.com/repos/bevyengine/bevy/git/commits{/sha}","comments_url":"https://api.github.com/repos/bevyengine/bevy/comments{/number}","issue_comment_url":"https://api.github.com/repos/bevyengine/bevy/issues/comments{/number}","contents_url":"https://api.github.com/repos/bevyengine/bevy/contents/{+path}","compare_url":"https://api.github.com/repos/bevyengine/bevy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/bevyengine/bevy/merges","archive_url":"https://api.github.com/repos/bevyengine/bevy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/bevyengine/bevy/downloads","issues_url":"https://api.github.com/repos/bevyengine/bevy/issues{/number}","pulls_url":"https://api.github.com/repos/bevyengine/bevy/pulls{/number}","milestones_url":"https://api.github.com/repos/bevyengine/bevy/milestones{/number}","notifications_url":"https://api.github.com/repos/bevyengine/bevy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/bevyengine/bevy/labels{/name}","releases_url":"https://api.github.com/repos/bevyengine/bevy/releases{/id}","deployments_url":"https://api.github.com/repos/bevyengine/bevy/deployments","created_at":"2020-01-18T21:13:55Z","updated_at":"2025-11-10T00:30:24Z","pushed_at":"2025-11-09T20:05:46Z","git_url":"git://github.com/bevyengine/bevy.git","ssh_url":"git@github.com:bevyengine/bevy.git","clone_url":"https://github.com/bevyengine/bevy.git","svn_url":"https://github.com/bevyengine/bevy","homepage":"https://bevy.org","size":152673,"stargazers_count":42996,"watchers_count":42996,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":true,"forks_count":4220,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3116,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["bevy","game-development","game-engine","gamedev","open-source","rust"],"visibility":"public","forks":4220,"open_issues":3116,"watchers":42996,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/bevyengine/bevy/pulls/16183","html_url":"https://github.com/bevyengine/bevy/pull/16183","diff_url":"https://github.com/bevyengine/bevy/pull/16183.diff","patch_url":"https://github.com/bevyengine/bevy/pull/16183.patch","merged_at":null},"body":"# Objective\r\n\r\n* Adopts https://github.com/bevyengine/bevy/pull/14520 and adds OnMutate observers.\r\n* Provide a mechanism for immediate changes in response to mutate event.\r\n\r\n## Solution\r\n\r\n  A `EntityChanges` which stores the change list is added to `World`. When `Mut::set_changed` is called, a change record will be added to the `EntityChanges`. \r\n  When `World::flush` is called, `EntityChanges` will be clear and trigger `OnMutate` event to each relative entity.\r\n\r\n## Example\r\n```rust\r\nworld.observe(|trigger: Trigger<OnMutate, Transform>, query: Query<&Transform>| {\r\n    let transform = query.get(trigger.entity()).unwrap();\r\n});\r\n```\r\n\r\n## Testing\r\n\r\n- Did you test these changes? If so, how?      \r\n    Just test for the base function, I don't know which test i should do.\r\n- Are there any parts that need more testing?\r\n    `Query::iter` and `Query::get_mut`'s benchmark\r\n- How can other people (reviewers) test your changes? Is there anything specific they need to know?\r\n     Just treat the `OnMutate` as a common observer. Nothing is specific.\r\n- If relevant, what platforms did you test these changes on, and are there any important ones you can't test?\r\n    Mac\r\n\r\n### Possible Follow-ups\r\n1. Add an `OnMutate` hook\r\n","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/16183/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/bevyengine/bevy/issues/16183/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":15289134471,"node_id":"SE_lADODf6-U86cwAd6zwAAAAOPTa2H","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/15289134471","actor":{"login":"teohhanhui","id":548843,"node_id":"MDQ6VXNlcjU0ODg0Mw==","avatar_url":"https://avatars.githubusercontent.com/u/548843?v=4","gravatar_id":"","url":"https://api.github.com/users/teohhanhui","html_url":"https://github.com/teohhanhui","followers_url":"https://api.github.com/users/teohhanhui/followers","following_url":"https://api.github.com/users/teohhanhui/following{/other_user}","gists_url":"https://api.github.com/users/teohhanhui/gists{/gist_id}","starred_url":"https://api.github.com/users/teohhanhui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/teohhanhui/subscriptions","organizations_url":"https://api.github.com/users/teohhanhui/orgs","repos_url":"https://api.github.com/users/teohhanhui/repos","events_url":"https://api.github.com/users/teohhanhui/events{/privacy}","received_events_url":"https://api.github.com/users/teohhanhui/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-11-13T20:47:18Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/2508885396","html_url":"https://github.com/bevyengine/bevy/issues/16208#issuecomment-2508885396","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/16208","id":2508885396,"node_id":"IC_kwDODf6-U86Vio2U","user":{"login":"onkoe","id":66580279,"node_id":"MDQ6VXNlcjY2NTgwMjc5","avatar_url":"https://avatars.githubusercontent.com/u/66580279?v=4","gravatar_id":"","url":"https://api.github.com/users/onkoe","html_url":"https://github.com/onkoe","followers_url":"https://api.github.com/users/onkoe/followers","following_url":"https://api.github.com/users/onkoe/following{/other_user}","gists_url":"https://api.github.com/users/onkoe/gists{/gist_id}","starred_url":"https://api.github.com/users/onkoe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/onkoe/subscriptions","organizations_url":"https://api.github.com/users/onkoe/orgs","repos_url":"https://api.github.com/users/onkoe/repos","events_url":"https://api.github.com/users/onkoe/events{/privacy}","received_events_url":"https://api.github.com/users/onkoe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-30T08:27:15Z","updated_at":"2024-11-30T08:27:15Z","body":"Hey there! Just wanted to quickly drop in and say that this feels very useful. Please keep up the great work! :)\n\n----\nOtherwise, the design discussion on discord was pretty cool! I immediately thought of a scorched-earth solution, which is pretty much a secondary Component trait (like `ComponentMut`) that's opt-out through some kind of `#[component::immutable]` attr. Buuuuut... that seems somewhat hard to reason about, especially if anyone manually implements `Component`, then finds mysterious mutability errors everywhere. That's probably fixable through our god-given `#[diagnostic::on_unimplemented(...)]`. The discussion on reflection and a better implementation feels pretty solid, though, so I can't wait to see it materialize further!\n\nOverall, I think most folks could get some decent use out of this. That's doubly so for large codebases","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/2508885396/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"onkoe","id":66580279,"node_id":"MDQ6VXNlcjY2NTgwMjc5","avatar_url":"https://avatars.githubusercontent.com/u/66580279?v=4","gravatar_id":"","url":"https://api.github.com/users/onkoe","html_url":"https://github.com/onkoe","followers_url":"https://api.github.com/users/onkoe/followers","following_url":"https://api.github.com/users/onkoe/following{/other_user}","gists_url":"https://api.github.com/users/onkoe/gists{/gist_id}","starred_url":"https://api.github.com/users/onkoe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/onkoe/subscriptions","organizations_url":"https://api.github.com/users/onkoe/orgs","repos_url":"https://api.github.com/users/onkoe/repos","events_url":"https://api.github.com/users/onkoe/events{/privacy}","received_events_url":"https://api.github.com/users/onkoe/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/2508913666","html_url":"https://github.com/bevyengine/bevy/issues/16208#issuecomment-2508913666","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/16208","id":2508913666,"node_id":"IC_kwDODf6-U86VivwC","user":{"login":"maximetinu","id":16073309,"node_id":"MDQ6VXNlcjE2MDczMzA5","avatar_url":"https://avatars.githubusercontent.com/u/16073309?v=4","gravatar_id":"","url":"https://api.github.com/users/maximetinu","html_url":"https://github.com/maximetinu","followers_url":"https://api.github.com/users/maximetinu/followers","following_url":"https://api.github.com/users/maximetinu/following{/other_user}","gists_url":"https://api.github.com/users/maximetinu/gists{/gist_id}","starred_url":"https://api.github.com/users/maximetinu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maximetinu/subscriptions","organizations_url":"https://api.github.com/users/maximetinu/orgs","repos_url":"https://api.github.com/users/maximetinu/repos","events_url":"https://api.github.com/users/maximetinu/events{/privacy}","received_events_url":"https://api.github.com/users/maximetinu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-30T10:24:14Z","updated_at":"2024-11-30T10:24:14Z","body":"Immutable components sound great !\n\nI'm interested to know, although I can imagine: why an `on_mutate` hook is so tricky to implement ? \n\nI guess that, when component hooks were first implemented, there were conversations about this, because `on_mutate` feels like a natural companion to `on_insert`, `on remove`, etc; but I missed them","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/2508913666/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"maximetinu","id":16073309,"node_id":"MDQ6VXNlcjE2MDczMzA5","avatar_url":"https://avatars.githubusercontent.com/u/16073309?v=4","gravatar_id":"","url":"https://api.github.com/users/maximetinu","html_url":"https://github.com/maximetinu","followers_url":"https://api.github.com/users/maximetinu/followers","following_url":"https://api.github.com/users/maximetinu/following{/other_user}","gists_url":"https://api.github.com/users/maximetinu/gists{/gist_id}","starred_url":"https://api.github.com/users/maximetinu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maximetinu/subscriptions","organizations_url":"https://api.github.com/users/maximetinu/orgs","repos_url":"https://api.github.com/users/maximetinu/repos","events_url":"https://api.github.com/users/maximetinu/events{/privacy}","received_events_url":"https://api.github.com/users/maximetinu/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/2508914120","html_url":"https://github.com/bevyengine/bevy/issues/16208#issuecomment-2508914120","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/16208","id":2508914120,"node_id":"IC_kwDODf6-U86Viv3I","user":{"login":"BenjaminBrienen","id":42162869,"node_id":"MDQ6VXNlcjQyMTYyODY5","avatar_url":"https://avatars.githubusercontent.com/u/42162869?v=4","gravatar_id":"","url":"https://api.github.com/users/BenjaminBrienen","html_url":"https://github.com/BenjaminBrienen","followers_url":"https://api.github.com/users/BenjaminBrienen/followers","following_url":"https://api.github.com/users/BenjaminBrienen/following{/other_user}","gists_url":"https://api.github.com/users/BenjaminBrienen/gists{/gist_id}","starred_url":"https://api.github.com/users/BenjaminBrienen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BenjaminBrienen/subscriptions","organizations_url":"https://api.github.com/users/BenjaminBrienen/orgs","repos_url":"https://api.github.com/users/BenjaminBrienen/repos","events_url":"https://api.github.com/users/BenjaminBrienen/events{/privacy}","received_events_url":"https://api.github.com/users/BenjaminBrienen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-30T10:26:14Z","updated_at":"2024-11-30T10:26:14Z","body":"> Immutable components sound great !\n> \n> I'm interested to know, although I can imagine: why an `on_mutate` hook is so tricky to implement ? \n> \n> I guess that, when component hooks were first implemented, there were conversations about this, because `on_mutate` feels like a natural companion to `on_insert`, `on remove`, etc; but I missed them\n\nI think due to mem::swap but I could be wrong","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/2508914120/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"BenjaminBrienen","id":42162869,"node_id":"MDQ6VXNlcjQyMTYyODY5","avatar_url":"https://avatars.githubusercontent.com/u/42162869?v=4","gravatar_id":"","url":"https://api.github.com/users/BenjaminBrienen","html_url":"https://github.com/BenjaminBrienen","followers_url":"https://api.github.com/users/BenjaminBrienen/followers","following_url":"https://api.github.com/users/BenjaminBrienen/following{/other_user}","gists_url":"https://api.github.com/users/BenjaminBrienen/gists{/gist_id}","starred_url":"https://api.github.com/users/BenjaminBrienen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BenjaminBrienen/subscriptions","organizations_url":"https://api.github.com/users/BenjaminBrienen/orgs","repos_url":"https://api.github.com/users/BenjaminBrienen/repos","events_url":"https://api.github.com/users/BenjaminBrienen/events{/privacy}","received_events_url":"https://api.github.com/users/BenjaminBrienen/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/2508965340","html_url":"https://github.com/bevyengine/bevy/issues/16208#issuecomment-2508965340","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/16208","id":2508965340,"node_id":"IC_kwDODf6-U86Vi8Xc","user":{"login":"alice-i-cecile","id":3579909,"node_id":"MDQ6VXNlcjM1Nzk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3579909?v=4","gravatar_id":"","url":"https://api.github.com/users/alice-i-cecile","html_url":"https://github.com/alice-i-cecile","followers_url":"https://api.github.com/users/alice-i-cecile/followers","following_url":"https://api.github.com/users/alice-i-cecile/following{/other_user}","gists_url":"https://api.github.com/users/alice-i-cecile/gists{/gist_id}","starred_url":"https://api.github.com/users/alice-i-cecile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alice-i-cecile/subscriptions","organizations_url":"https://api.github.com/users/alice-i-cecile/orgs","repos_url":"https://api.github.com/users/alice-i-cecile/repos","events_url":"https://api.github.com/users/alice-i-cecile/events{/privacy}","received_events_url":"https://api.github.com/users/alice-i-cecile/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-30T13:36:32Z","updated_at":"2024-11-30T13:36:32Z","body":"> I'm interested to know, although I can imagine: why an on_mutate hook is so tricky to implement ? \n\nHooks, and to a lesser extent observers, want to run *immediately* after the change is made. Because of Bevy's access model, users can mutate data without having access to the full world, delaying the effect. Even if this wasn't true, there would be a serious performance risk due to the loss of cache locality during table iteration.\n\nWe can get around this by only implementing on_mutate observers, but there are still concerns around efficiently checking what has been changed. The current change detection impl relies on an O(n) scan every time, which could get expensive very fast, in hard to debug ways.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/2508965340/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"alice-i-cecile","id":3579909,"node_id":"MDQ6VXNlcjM1Nzk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3579909?v=4","gravatar_id":"","url":"https://api.github.com/users/alice-i-cecile","html_url":"https://github.com/alice-i-cecile","followers_url":"https://api.github.com/users/alice-i-cecile/followers","following_url":"https://api.github.com/users/alice-i-cecile/following{/other_user}","gists_url":"https://api.github.com/users/alice-i-cecile/gists{/gist_id}","starred_url":"https://api.github.com/users/alice-i-cecile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alice-i-cecile/subscriptions","organizations_url":"https://api.github.com/users/alice-i-cecile/orgs","repos_url":"https://api.github.com/users/alice-i-cecile/repos","events_url":"https://api.github.com/users/alice-i-cecile/events{/privacy}","received_events_url":"https://api.github.com/users/alice-i-cecile/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":15545338425,"node_id":"REFE_lADODf6-U86cwAd6zwAAAAOekwo5","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/15545338425","actor":{"login":"github-merge-queue[bot]","id":118344674,"node_id":"BOT_kgDOBw3L4g","avatar_url":"https://avatars.githubusercontent.com/u/9919?v=4","gravatar_id":"","url":"https://api.github.com/users/github-merge-queue%5Bbot%5D","html_url":"https://github.com/apps/github-merge-queue","followers_url":"https://api.github.com/users/github-merge-queue%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-merge-queue%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-merge-queue%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-merge-queue%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-merge-queue%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-merge-queue%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-merge-queue%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-merge-queue%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-merge-queue%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"a35811d0885a52f890e435b08154f0f11cab5f8b","commit_url":"https://api.github.com/repos/bevyengine/bevy/commits/a35811d0885a52f890e435b08154f0f11cab5f8b","created_at":"2024-12-05T14:46:53Z","performed_via_github_app":null},{"id":15545338631,"node_id":"CE_lADODf6-U86cwAd6zwAAAAOekwsH","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/15545338631","actor":{"login":"alice-i-cecile","id":3579909,"node_id":"MDQ6VXNlcjM1Nzk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3579909?v=4","gravatar_id":"","url":"https://api.github.com/users/alice-i-cecile","html_url":"https://github.com/alice-i-cecile","followers_url":"https://api.github.com/users/alice-i-cecile/followers","following_url":"https://api.github.com/users/alice-i-cecile/following{/other_user}","gists_url":"https://api.github.com/users/alice-i-cecile/gists{/gist_id}","starred_url":"https://api.github.com/users/alice-i-cecile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alice-i-cecile/subscriptions","organizations_url":"https://api.github.com/users/alice-i-cecile/orgs","repos_url":"https://api.github.com/users/alice-i-cecile/repos","events_url":"https://api.github.com/users/alice-i-cecile/events{/privacy}","received_events_url":"https://api.github.com/users/alice-i-cecile/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2024-12-05T14:46:54Z","state_reason":null,"performed_via_github_app":null},{"id":15830457971,"node_id":"REFE_lADODf6-U86cwAd6zwAAAAOvkZ5z","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/15830457971","actor":{"login":"ecoskey","id":56370779,"node_id":"MDQ6VXNlcjU2MzcwNzc5","avatar_url":"https://avatars.githubusercontent.com/u/56370779?v=4","gravatar_id":"","url":"https://api.github.com/users/ecoskey","html_url":"https://github.com/ecoskey","followers_url":"https://api.github.com/users/ecoskey/followers","following_url":"https://api.github.com/users/ecoskey/following{/other_user}","gists_url":"https://api.github.com/users/ecoskey/gists{/gist_id}","starred_url":"https://api.github.com/users/ecoskey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ecoskey/subscriptions","organizations_url":"https://api.github.com/users/ecoskey/orgs","repos_url":"https://api.github.com/users/ecoskey/repos","events_url":"https://api.github.com/users/ecoskey/events{/privacy}","received_events_url":"https://api.github.com/users/ecoskey/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"ec733d5d75b0efd360db5d02b8423321f4ec873e","commit_url":"https://api.github.com/repos/ecoskey/bevy/commits/ec733d5d75b0efd360db5d02b8423321f4ec873e","created_at":"2025-01-06T20:11:16Z","performed_via_github_app":null}]