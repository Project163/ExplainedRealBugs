[{"id":11837579526,"node_id":"LE_lADODf6-U85_mFDWzwAAAALBkyEG","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/11837579526","actor":{"login":"chengts95","id":6616679,"node_id":"MDQ6VXNlcjY2MTY2Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/6616679?v=4","gravatar_id":"","url":"https://api.github.com/users/chengts95","html_url":"https://github.com/chengts95","followers_url":"https://api.github.com/users/chengts95/followers","following_url":"https://api.github.com/users/chengts95/following{/other_user}","gists_url":"https://api.github.com/users/chengts95/gists{/gist_id}","starred_url":"https://api.github.com/users/chengts95/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chengts95/subscriptions","organizations_url":"https://api.github.com/users/chengts95/orgs","repos_url":"https://api.github.com/users/chengts95/repos","events_url":"https://api.github.com/users/chengts95/events{/privacy}","received_events_url":"https://api.github.com/users/chengts95/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-02-18T01:32:23Z","label":{"name":"C-Bug","color":"d73a4a"},"performed_via_github_app":null},{"id":11837579528,"node_id":"LE_lADODf6-U85_mFDWzwAAAALBkyEI","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/11837579528","actor":{"login":"chengts95","id":6616679,"node_id":"MDQ6VXNlcjY2MTY2Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/6616679?v=4","gravatar_id":"","url":"https://api.github.com/users/chengts95","html_url":"https://github.com/chengts95","followers_url":"https://api.github.com/users/chengts95/followers","following_url":"https://api.github.com/users/chengts95/following{/other_user}","gists_url":"https://api.github.com/users/chengts95/gists{/gist_id}","starred_url":"https://api.github.com/users/chengts95/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chengts95/subscriptions","organizations_url":"https://api.github.com/users/chengts95/orgs","repos_url":"https://api.github.com/users/chengts95/repos","events_url":"https://api.github.com/users/chengts95/events{/privacy}","received_events_url":"https://api.github.com/users/chengts95/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-02-18T01:32:23Z","label":{"name":"C-Performance","color":"B8B8B8"},"performed_via_github_app":null},{"id":11837579530,"node_id":"LE_lADODf6-U85_mFDWzwAAAALBkyEK","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/11837579530","actor":{"login":"chengts95","id":6616679,"node_id":"MDQ6VXNlcjY2MTY2Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/6616679?v=4","gravatar_id":"","url":"https://api.github.com/users/chengts95","html_url":"https://github.com/chengts95","followers_url":"https://api.github.com/users/chengts95/followers","following_url":"https://api.github.com/users/chengts95/following{/other_user}","gists_url":"https://api.github.com/users/chengts95/gists{/gist_id}","starred_url":"https://api.github.com/users/chengts95/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chengts95/subscriptions","organizations_url":"https://api.github.com/users/chengts95/orgs","repos_url":"https://api.github.com/users/chengts95/repos","events_url":"https://api.github.com/users/chengts95/events{/privacy}","received_events_url":"https://api.github.com/users/chengts95/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-02-18T01:32:23Z","label":{"name":"C-Regression","color":"B8b8b8"},"performed_via_github_app":null},{"id":11837579531,"node_id":"LE_lADODf6-U85_mFDWzwAAAALBkyEL","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/11837579531","actor":{"login":"chengts95","id":6616679,"node_id":"MDQ6VXNlcjY2MTY2Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/6616679?v=4","gravatar_id":"","url":"https://api.github.com/users/chengts95","html_url":"https://github.com/chengts95","followers_url":"https://api.github.com/users/chengts95/followers","following_url":"https://api.github.com/users/chengts95/following{/other_user}","gists_url":"https://api.github.com/users/chengts95/gists{/gist_id}","starred_url":"https://api.github.com/users/chengts95/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chengts95/subscriptions","organizations_url":"https://api.github.com/users/chengts95/orgs","repos_url":"https://api.github.com/users/chengts95/repos","events_url":"https://api.github.com/users/chengts95/events{/privacy}","received_events_url":"https://api.github.com/users/chengts95/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-02-18T01:32:23Z","label":{"name":"S-Needs-Triage","color":"D876e3"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1950730592","html_url":"https://github.com/bevyengine/bevy/issues/11932#issuecomment-1950730592","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/11932","id":1950730592,"node_id":"IC_kwDODf6-U850Rclg","user":{"login":"jdm","id":27658,"node_id":"MDQ6VXNlcjI3NjU4","avatar_url":"https://avatars.githubusercontent.com/u/27658?v=4","gravatar_id":"","url":"https://api.github.com/users/jdm","html_url":"https://github.com/jdm","followers_url":"https://api.github.com/users/jdm/followers","following_url":"https://api.github.com/users/jdm/following{/other_user}","gists_url":"https://api.github.com/users/jdm/gists{/gist_id}","starred_url":"https://api.github.com/users/jdm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdm/subscriptions","organizations_url":"https://api.github.com/users/jdm/orgs","repos_url":"https://api.github.com/users/jdm/repos","events_url":"https://api.github.com/users/jdm/events{/privacy}","received_events_url":"https://api.github.com/users/jdm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-18T01:35:55Z","updated_at":"2024-02-18T01:35:55Z","body":"Might be related to #11931.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1950730592/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jdm","id":27658,"node_id":"MDQ6VXNlcjI3NjU4","avatar_url":"https://avatars.githubusercontent.com/u/27658?v=4","gravatar_id":"","url":"https://api.github.com/users/jdm","html_url":"https://github.com/jdm","followers_url":"https://api.github.com/users/jdm/followers","following_url":"https://api.github.com/users/jdm/following{/other_user}","gists_url":"https://api.github.com/users/jdm/gists{/gist_id}","starred_url":"https://api.github.com/users/jdm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdm/subscriptions","organizations_url":"https://api.github.com/users/jdm/orgs","repos_url":"https://api.github.com/users/jdm/repos","events_url":"https://api.github.com/users/jdm/events{/privacy}","received_events_url":"https://api.github.com/users/jdm/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11837585064,"node_id":"UNLE_lADODf6-U85_mFDWzwAAAALBkzao","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/11837585064","actor":{"login":"alice-i-cecile","id":3579909,"node_id":"MDQ6VXNlcjM1Nzk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3579909?v=4","gravatar_id":"","url":"https://api.github.com/users/alice-i-cecile","html_url":"https://github.com/alice-i-cecile","followers_url":"https://api.github.com/users/alice-i-cecile/followers","following_url":"https://api.github.com/users/alice-i-cecile/following{/other_user}","gists_url":"https://api.github.com/users/alice-i-cecile/gists{/gist_id}","starred_url":"https://api.github.com/users/alice-i-cecile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alice-i-cecile/subscriptions","organizations_url":"https://api.github.com/users/alice-i-cecile/orgs","repos_url":"https://api.github.com/users/alice-i-cecile/repos","events_url":"https://api.github.com/users/alice-i-cecile/events{/privacy}","received_events_url":"https://api.github.com/users/alice-i-cecile/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2024-02-18T01:37:16Z","label":{"name":"S-Needs-Triage","color":"D876e3"},"performed_via_github_app":null},{"id":11837585065,"node_id":"LE_lADODf6-U85_mFDWzwAAAALBkzap","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/11837585065","actor":{"login":"alice-i-cecile","id":3579909,"node_id":"MDQ6VXNlcjM1Nzk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3579909?v=4","gravatar_id":"","url":"https://api.github.com/users/alice-i-cecile","html_url":"https://github.com/alice-i-cecile","followers_url":"https://api.github.com/users/alice-i-cecile/followers","following_url":"https://api.github.com/users/alice-i-cecile/following{/other_user}","gists_url":"https://api.github.com/users/alice-i-cecile/gists{/gist_id}","starred_url":"https://api.github.com/users/alice-i-cecile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alice-i-cecile/subscriptions","organizations_url":"https://api.github.com/users/alice-i-cecile/orgs","repos_url":"https://api.github.com/users/alice-i-cecile/repos","events_url":"https://api.github.com/users/alice-i-cecile/events{/privacy}","received_events_url":"https://api.github.com/users/alice-i-cecile/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-02-18T01:37:16Z","label":{"name":"S-Needs-Investigation","color":"D876E1"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1950734195","html_url":"https://github.com/bevyengine/bevy/issues/11932#issuecomment-1950734195","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/11932","id":1950734195,"node_id":"IC_kwDODf6-U850Rddz","user":{"login":"alice-i-cecile","id":3579909,"node_id":"MDQ6VXNlcjM1Nzk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3579909?v=4","gravatar_id":"","url":"https://api.github.com/users/alice-i-cecile","html_url":"https://github.com/alice-i-cecile","followers_url":"https://api.github.com/users/alice-i-cecile/followers","following_url":"https://api.github.com/users/alice-i-cecile/following{/other_user}","gists_url":"https://api.github.com/users/alice-i-cecile/gists{/gist_id}","starred_url":"https://api.github.com/users/alice-i-cecile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alice-i-cecile/subscriptions","organizations_url":"https://api.github.com/users/alice-i-cecile/orgs","repos_url":"https://api.github.com/users/alice-i-cecile/repos","events_url":"https://api.github.com/users/alice-i-cecile/events{/privacy}","received_events_url":"https://api.github.com/users/alice-i-cecile/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-18T01:38:19Z","updated_at":"2024-02-18T01:38:19Z","body":"Note that on Discord we looked into this a bit more, and still got a regression vs 0.12 with system stepping off. It worsened the problem, but wasn't fully the cause.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1950734195/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"alice-i-cecile","id":3579909,"node_id":"MDQ6VXNlcjM1Nzk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3579909?v=4","gravatar_id":"","url":"https://api.github.com/users/alice-i-cecile","html_url":"https://github.com/alice-i-cecile","followers_url":"https://api.github.com/users/alice-i-cecile/followers","following_url":"https://api.github.com/users/alice-i-cecile/following{/other_user}","gists_url":"https://api.github.com/users/alice-i-cecile/gists{/gist_id}","starred_url":"https://api.github.com/users/alice-i-cecile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alice-i-cecile/subscriptions","organizations_url":"https://api.github.com/users/alice-i-cecile/orgs","repos_url":"https://api.github.com/users/alice-i-cecile/repos","events_url":"https://api.github.com/users/alice-i-cecile/events{/privacy}","received_events_url":"https://api.github.com/users/alice-i-cecile/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1950749573","html_url":"https://github.com/bevyengine/bevy/issues/11932#issuecomment-1950749573","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/11932","id":1950749573,"node_id":"IC_kwDODf6-U850RhOF","user":{"login":"hymm","id":2180432,"node_id":"MDQ6VXNlcjIxODA0MzI=","avatar_url":"https://avatars.githubusercontent.com/u/2180432?v=4","gravatar_id":"","url":"https://api.github.com/users/hymm","html_url":"https://github.com/hymm","followers_url":"https://api.github.com/users/hymm/followers","following_url":"https://api.github.com/users/hymm/following{/other_user}","gists_url":"https://api.github.com/users/hymm/gists{/gist_id}","starred_url":"https://api.github.com/users/hymm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hymm/subscriptions","organizations_url":"https://api.github.com/users/hymm/orgs","repos_url":"https://api.github.com/users/hymm/repos","events_url":"https://api.github.com/users/hymm/events{/privacy}","received_events_url":"https://api.github.com/users/hymm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-18T01:48:06Z","updated_at":"2024-02-18T01:48:06Z","body":"I was able to bisect it to #8453, but not sure what could be causing it yet. Everything obvious seems to be `cfg`'ed out.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1950749573/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hymm","id":2180432,"node_id":"MDQ6VXNlcjIxODA0MzI=","avatar_url":"https://avatars.githubusercontent.com/u/2180432?v=4","gravatar_id":"","url":"https://api.github.com/users/hymm","html_url":"https://github.com/hymm","followers_url":"https://api.github.com/users/hymm/followers","following_url":"https://api.github.com/users/hymm/following{/other_user}","gists_url":"https://api.github.com/users/hymm/gists{/gist_id}","starred_url":"https://api.github.com/users/hymm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hymm/subscriptions","organizations_url":"https://api.github.com/users/hymm/orgs","repos_url":"https://api.github.com/users/hymm/repos","events_url":"https://api.github.com/users/hymm/events{/privacy}","received_events_url":"https://api.github.com/users/hymm/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1950862383","html_url":"https://github.com/bevyengine/bevy/issues/11932#issuecomment-1950862383","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/11932","id":1950862383,"node_id":"IC_kwDODf6-U850R8wv","user":{"login":"hymm","id":2180432,"node_id":"MDQ6VXNlcjIxODA0MzI=","avatar_url":"https://avatars.githubusercontent.com/u/2180432?v=4","gravatar_id":"","url":"https://api.github.com/users/hymm","html_url":"https://github.com/hymm","followers_url":"https://api.github.com/users/hymm/followers","following_url":"https://api.github.com/users/hymm/following{/other_user}","gists_url":"https://api.github.com/users/hymm/gists{/gist_id}","starred_url":"https://api.github.com/users/hymm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hymm/subscriptions","organizations_url":"https://api.github.com/users/hymm/orgs","repos_url":"https://api.github.com/users/hymm/repos","events_url":"https://api.github.com/users/hymm/events{/privacy}","received_events_url":"https://api.github.com/users/hymm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-18T03:04:40Z","updated_at":"2024-02-18T03:04:54Z","body":"I tried cfg'ing out the changes to the run function signature and it seemed to get rid of most of the extra overhead. Not sure why that helped and we probably don't want to be changing function signatures, so not goinig to pr it. https://github.com/bevyengine/bevy/compare/main...hymm:bevy:investigate-empty-system-overhead","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1950862383/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hymm","id":2180432,"node_id":"MDQ6VXNlcjIxODA0MzI=","avatar_url":"https://avatars.githubusercontent.com/u/2180432?v=4","gravatar_id":"","url":"https://api.github.com/users/hymm","html_url":"https://github.com/hymm","followers_url":"https://api.github.com/users/hymm/followers","following_url":"https://api.github.com/users/hymm/following{/other_user}","gists_url":"https://api.github.com/users/hymm/gists{/gist_id}","starred_url":"https://api.github.com/users/hymm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hymm/subscriptions","organizations_url":"https://api.github.com/users/hymm/orgs","repos_url":"https://api.github.com/users/hymm/repos","events_url":"https://api.github.com/users/hymm/events{/privacy}","received_events_url":"https://api.github.com/users/hymm/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11837722519,"node_id":"UE_lADODf6-U85_mFDWzwAAAALBlU-X","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/11837722519","actor":{"login":"Retrodad0001","id":9283221,"node_id":"MDQ6VXNlcjkyODMyMjE=","avatar_url":"https://avatars.githubusercontent.com/u/9283221?v=4","gravatar_id":"","url":"https://api.github.com/users/Retrodad0001","html_url":"https://github.com/Retrodad0001","followers_url":"https://api.github.com/users/Retrodad0001/followers","following_url":"https://api.github.com/users/Retrodad0001/following{/other_user}","gists_url":"https://api.github.com/users/Retrodad0001/gists{/gist_id}","starred_url":"https://api.github.com/users/Retrodad0001/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Retrodad0001/subscriptions","organizations_url":"https://api.github.com/users/Retrodad0001/orgs","repos_url":"https://api.github.com/users/Retrodad0001/repos","events_url":"https://api.github.com/users/Retrodad0001/events{/privacy}","received_events_url":"https://api.github.com/users/Retrodad0001/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unsubscribed","commit_id":null,"commit_url":null,"created_at":"2024-02-18T03:11:53Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1950879304","html_url":"https://github.com/bevyengine/bevy/issues/11932#issuecomment-1950879304","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/11932","id":1950879304,"node_id":"IC_kwDODf6-U850SA5I","user":{"login":"dmlary","id":857742,"node_id":"MDQ6VXNlcjg1Nzc0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/857742?v=4","gravatar_id":"","url":"https://api.github.com/users/dmlary","html_url":"https://github.com/dmlary","followers_url":"https://api.github.com/users/dmlary/followers","following_url":"https://api.github.com/users/dmlary/following{/other_user}","gists_url":"https://api.github.com/users/dmlary/gists{/gist_id}","starred_url":"https://api.github.com/users/dmlary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmlary/subscriptions","organizations_url":"https://api.github.com/users/dmlary/orgs","repos_url":"https://api.github.com/users/dmlary/repos","events_url":"https://api.github.com/users/dmlary/events{/privacy}","received_events_url":"https://api.github.com/users/dmlary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-18T03:16:15Z","updated_at":"2024-02-18T03:16:15Z","body":"I dug into the `Stepping` side of this with the help of @chengts95: https://discord.com/channels/691052431525675048/1208572214442594374\r\n\r\n## Empty Schedule Benchmark for `benches`\r\n\r\nI took his example and converted it to a criterion benchmark:\r\n```rust\r\npub fn run_empty_schedules_five(criterion: &mut Criterion) {\r\n    let mut app = bevy_app::App::default();\r\n    app.add_schedule(Schedule::new(bevy_app::First));\r\n    app.add_schedule(Schedule::new(bevy_app::PreUpdate));\r\n    app.add_schedule(Schedule::new(bevy_app::Update));\r\n    app.add_schedule(Schedule::new(bevy_app::PostUpdate));\r\n    app.add_schedule(Schedule::new(bevy_app::Last));\r\n\r\n    let mut group = criterion.benchmark_group(\"run_empty_schedules\");\r\n    group.warm_up_time(std::time::Duration::from_secs(1));\r\n    group.measurement_time(std::time::Duration::from_secs(15));\r\n    group.bench_function(\"five\", |bencher| {\r\n        bencher.iter(|| app.update());\r\n    });\r\n    group.finish();\r\n}\r\n```\r\n\r\nI quickly discovered that MacOS cannot be trusted for benchmarking.  I was seeing 8% variance between individual runs using the same bevy version, even with the warmup extended to 5 seconds.  Worse was when I disabled stepping, I didn't see an improvement.\r\n\r\nI confirmed that @chengts95 ran his benchmark multiple times and saw consistent results for v0.13.0.\r\n\r\nHere's a patch against bevy/benches to run the benchmarks I've been unable to reproduce with.  If anyone not on a macbook feels up to it, I'd be curious if they also get variable results from `cargo bench --bench ecs -- empty_sched`.\r\n[benches-empty_schedules.diff](https://github.com/bevyengine/bevy/files/14320953/benches-empty_schedules.txt)\r\n\r\n\r\n## Stepping Performance Details\r\nThere's three places stepping is hooked into the hot path:\r\n* the `begin_frame()` system called before `run_main()` https://github.com/bevyengine/bevy/blob/abb8c353f49a6fe9e039e82adbe1040488ad910a/crates/bevy_app/src/main_schedule.rs#L260-L264\r\n* in `Schedule::run()` https://github.com/bevyengine/bevy/blob/abb8c353f49a6fe9e039e82adbe1040488ad910a/crates/bevy_ecs/src/schedule/schedule.rs#L338-L342\r\n* in the executors: https://github.com/bevyengine/bevy/blob/abb8c353f49a6fe9e039e82adbe1040488ad910a/crates/bevy_ecs/src/schedule/executor/multi_threaded.rs#L192\r\n    * check if `_skip_systems` is `None`\r\n\r\nBased on the structure of the benchmark (five empty schedules), the changes to `Schedule::run()` (the `get_resource_mut()`) is being hit 5x more than `begin_frame()`, but honestly that reflects real-world use.\r\n\r\n## Stepping Performance Improvement Idea\r\nEven without concrete numbers, there are a couple of ways we can remove any stepping performance impacts:\r\n\r\nThe biggest performance win will be to move the skip list from `Stepping` into the `Schedule`.  Then have `Stepping` apply changes to the step list during `begin_frame()`.  This eliminates the `get_resource_mut()` for every schedule every frame.  Side effect of this is that `Stepping` loses dynamic schedule order detection, which honestly was a bad idea on my part.  Instead we can just use the explicit order the schedules were added to `Stepping`, and provide mechanisms to change the order.\r\n\r\nA second performance improvement is to remove the `begin_frame()` system unless the `Stepping` resource is present.  Right now we check for the resource every frame, but we could eliminate that if we could add/remove systems at runtime.  As that's not currently possible, we can add a condition to the `begin_frame()` that checks some global variable in `schedule::stepping` to see if it should run.\r\n\r\nAs an alternative to both of these, we can move the needed stepping run state out of the resource and into a global variable.  It's effectively the combination of the two options above.  The `Stepping` resource either goes away or becomes an interface to that global state.  I'm not really a fan of this as it feels very dirty, but it should be mentioned.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1950879304/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dmlary","id":857742,"node_id":"MDQ6VXNlcjg1Nzc0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/857742?v=4","gravatar_id":"","url":"https://api.github.com/users/dmlary","html_url":"https://github.com/dmlary","followers_url":"https://api.github.com/users/dmlary/followers","following_url":"https://api.github.com/users/dmlary/following{/other_user}","gists_url":"https://api.github.com/users/dmlary/gists{/gist_id}","starred_url":"https://api.github.com/users/dmlary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmlary/subscriptions","organizations_url":"https://api.github.com/users/dmlary/orgs","repos_url":"https://api.github.com/users/dmlary/repos","events_url":"https://api.github.com/users/dmlary/events{/privacy}","received_events_url":"https://api.github.com/users/dmlary/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11837729521,"node_id":"MEE_lADODf6-U85_mFDWzwAAAALBlWrx","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/11837729521","actor":{"login":"chengts95","id":6616679,"node_id":"MDQ6VXNlcjY2MTY2Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/6616679?v=4","gravatar_id":"","url":"https://api.github.com/users/chengts95","html_url":"https://github.com/chengts95","followers_url":"https://api.github.com/users/chengts95/followers","following_url":"https://api.github.com/users/chengts95/following{/other_user}","gists_url":"https://api.github.com/users/chengts95/gists{/gist_id}","starred_url":"https://api.github.com/users/chengts95/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chengts95/subscriptions","organizations_url":"https://api.github.com/users/chengts95/orgs","repos_url":"https://api.github.com/users/chengts95/repos","events_url":"https://api.github.com/users/chengts95/events{/privacy}","received_events_url":"https://api.github.com/users/chengts95/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-02-18T03:16:16Z","performed_via_github_app":null},{"id":11837729524,"node_id":"SE_lADODf6-U85_mFDWzwAAAALBlWr0","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/11837729524","actor":{"login":"chengts95","id":6616679,"node_id":"MDQ6VXNlcjY2MTY2Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/6616679?v=4","gravatar_id":"","url":"https://api.github.com/users/chengts95","html_url":"https://github.com/chengts95","followers_url":"https://api.github.com/users/chengts95/followers","following_url":"https://api.github.com/users/chengts95/following{/other_user}","gists_url":"https://api.github.com/users/chengts95/gists{/gist_id}","starred_url":"https://api.github.com/users/chengts95/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chengts95/subscriptions","organizations_url":"https://api.github.com/users/chengts95/orgs","repos_url":"https://api.github.com/users/chengts95/repos","events_url":"https://api.github.com/users/chengts95/events{/privacy}","received_events_url":"https://api.github.com/users/chengts95/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-02-18T03:16:17Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1950883073","html_url":"https://github.com/bevyengine/bevy/issues/11932#issuecomment-1950883073","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/11932","id":1950883073,"node_id":"IC_kwDODf6-U850SB0B","user":{"login":"dmlary","id":857742,"node_id":"MDQ6VXNlcjg1Nzc0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/857742?v=4","gravatar_id":"","url":"https://api.github.com/users/dmlary","html_url":"https://github.com/dmlary","followers_url":"https://api.github.com/users/dmlary/followers","following_url":"https://api.github.com/users/dmlary/following{/other_user}","gists_url":"https://api.github.com/users/dmlary/gists{/gist_id}","starred_url":"https://api.github.com/users/dmlary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmlary/subscriptions","organizations_url":"https://api.github.com/users/dmlary/orgs","repos_url":"https://api.github.com/users/dmlary/repos","events_url":"https://api.github.com/users/dmlary/events{/privacy}","received_events_url":"https://api.github.com/users/dmlary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-18T03:18:48Z","updated_at":"2024-02-18T03:18:48Z","body":"> I tried cfg'ing out the changes to the run function signature and it seemed to get rid of most of the extra overhead.\r\n\r\nThat's crazy, just the removal of the `_skip_systems: Option<FixedBitSet>` for the executor `run()` cleared up the rest of the perf difference?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1950883073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dmlary","id":857742,"node_id":"MDQ6VXNlcjg1Nzc0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/857742?v=4","gravatar_id":"","url":"https://api.github.com/users/dmlary","html_url":"https://github.com/dmlary","followers_url":"https://api.github.com/users/dmlary/followers","following_url":"https://api.github.com/users/dmlary/following{/other_user}","gists_url":"https://api.github.com/users/dmlary/gists{/gist_id}","starred_url":"https://api.github.com/users/dmlary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmlary/subscriptions","organizations_url":"https://api.github.com/users/dmlary/orgs","repos_url":"https://api.github.com/users/dmlary/repos","events_url":"https://api.github.com/users/dmlary/events{/privacy}","received_events_url":"https://api.github.com/users/dmlary/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1950890315","html_url":"https://github.com/bevyengine/bevy/issues/11932#issuecomment-1950890315","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/11932","id":1950890315,"node_id":"IC_kwDODf6-U850SDlL","user":{"login":"dmlary","id":857742,"node_id":"MDQ6VXNlcjg1Nzc0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/857742?v=4","gravatar_id":"","url":"https://api.github.com/users/dmlary","html_url":"https://github.com/dmlary","followers_url":"https://api.github.com/users/dmlary/followers","following_url":"https://api.github.com/users/dmlary/following{/other_user}","gists_url":"https://api.github.com/users/dmlary/gists{/gist_id}","starred_url":"https://api.github.com/users/dmlary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmlary/subscriptions","organizations_url":"https://api.github.com/users/dmlary/orgs","repos_url":"https://api.github.com/users/dmlary/repos","events_url":"https://api.github.com/users/dmlary/events{/privacy}","received_events_url":"https://api.github.com/users/dmlary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-18T03:23:47Z","updated_at":"2024-02-18T03:23:47Z","body":"Oh that's very weird.  Wait, could this be that `Option<FixedBitSet>` is allocating enough space for `FixedBitSet` on the stack even when the value is `None`?  I don't know rust calling convention at that level.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1950890315/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dmlary","id":857742,"node_id":"MDQ6VXNlcjg1Nzc0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/857742?v=4","gravatar_id":"","url":"https://api.github.com/users/dmlary","html_url":"https://github.com/dmlary","followers_url":"https://api.github.com/users/dmlary/followers","following_url":"https://api.github.com/users/dmlary/following{/other_user}","gists_url":"https://api.github.com/users/dmlary/gists{/gist_id}","starred_url":"https://api.github.com/users/dmlary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmlary/subscriptions","organizations_url":"https://api.github.com/users/dmlary/orgs","repos_url":"https://api.github.com/users/dmlary/repos","events_url":"https://api.github.com/users/dmlary/events{/privacy}","received_events_url":"https://api.github.com/users/dmlary/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1950897980","html_url":"https://github.com/bevyengine/bevy/issues/11932#issuecomment-1950897980","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/11932","id":1950897980,"node_id":"IC_kwDODf6-U850SFc8","user":{"login":"hymm","id":2180432,"node_id":"MDQ6VXNlcjIxODA0MzI=","avatar_url":"https://avatars.githubusercontent.com/u/2180432?v=4","gravatar_id":"","url":"https://api.github.com/users/hymm","html_url":"https://github.com/hymm","followers_url":"https://api.github.com/users/hymm/followers","following_url":"https://api.github.com/users/hymm/following{/other_user}","gists_url":"https://api.github.com/users/hymm/gists{/gist_id}","starred_url":"https://api.github.com/users/hymm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hymm/subscriptions","organizations_url":"https://api.github.com/users/hymm/orgs","repos_url":"https://api.github.com/users/hymm/repos","events_url":"https://api.github.com/users/hymm/events{/privacy}","received_events_url":"https://api.github.com/users/hymm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-18T03:29:02Z","updated_at":"2024-02-18T03:29:02Z","body":"> Oh that's very weird. Wait, could this be that Option<FixedBitSet> is allocating enough space for FixedBitSet on the stack even when the value is None? I don't know rust calling convention at that level.\r\n\r\nOh yeah, if we're hitting the allocator there, that might be it.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1950897980/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hymm","id":2180432,"node_id":"MDQ6VXNlcjIxODA0MzI=","avatar_url":"https://avatars.githubusercontent.com/u/2180432?v=4","gravatar_id":"","url":"https://api.github.com/users/hymm","html_url":"https://github.com/hymm","followers_url":"https://api.github.com/users/hymm/followers","following_url":"https://api.github.com/users/hymm/following{/other_user}","gists_url":"https://api.github.com/users/hymm/gists{/gist_id}","starred_url":"https://api.github.com/users/hymm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hymm/subscriptions","organizations_url":"https://api.github.com/users/hymm/orgs","repos_url":"https://api.github.com/users/hymm/repos","events_url":"https://api.github.com/users/hymm/events{/privacy}","received_events_url":"https://api.github.com/users/hymm/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1950918910","html_url":"https://github.com/bevyengine/bevy/issues/11932#issuecomment-1950918910","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/11932","id":1950918910,"node_id":"IC_kwDODf6-U850SKj-","user":{"login":"dmlary","id":857742,"node_id":"MDQ6VXNlcjg1Nzc0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/857742?v=4","gravatar_id":"","url":"https://api.github.com/users/dmlary","html_url":"https://github.com/dmlary","followers_url":"https://api.github.com/users/dmlary/followers","following_url":"https://api.github.com/users/dmlary/following{/other_user}","gists_url":"https://api.github.com/users/dmlary/gists{/gist_id}","starred_url":"https://api.github.com/users/dmlary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmlary/subscriptions","organizations_url":"https://api.github.com/users/dmlary/orgs","repos_url":"https://api.github.com/users/dmlary/repos","events_url":"https://api.github.com/users/dmlary/events{/privacy}","received_events_url":"https://api.github.com/users/dmlary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-18T03:43:13Z","updated_at":"2024-02-18T03:52:57Z","body":"> > Oh that's very weird. Wait, could this be that Option is allocating enough space for FixedBitSet on the stack even when the value is None? I don't know rust calling convention at that level.\r\n> \r\n> Oh yeah, if we're hitting the allocator there, that might be it.\r\n\r\nI jumped the gun, that's actually a call to `Vec::len()`.\r\n\r\n~~Confirmed, we are calling the allocator:~~\r\n```txt\r\n# verifying the address is `MultithreadedExecutor::run()`\r\n(lldb) image lookup -a 0x00000001032b4d40\r\n      Address: breakout[0x00000001032b4d40] (breakout.__TEXT.__text + 53158848)\r\n      Summary: breakout`_$LT$bevy_ecs..schedule..executor..multi_threaded..MultiThreadedExecutor$u20$as$u20$bevy_ecs..schedule..executor..SystemExecutor$GT$::run::hdf2d2d0ce9eb657b at multi_threaded.rs:166\r\n      \r\n# disassemble `MultithreadedExecutor::run()`:\r\n(lldb) x/40i 0x00000001032b4d40\r\n0x1032b4d40: 55                             other       pushq  %rbp\r\n0x1032b4d41: 48 89 e5                       other       movq   %rsp, %rbp\r\n0x1032b4d44: 48 81 ec b0 04 00 00           other       subq   $0x4b0, %rsp              ; imm = 0x4B0\r\n0x1032b4d4b: 48 89 b5 88 fc ff ff           other       movq   %rsi, -0x378(%rbp)\r\n0x1032b4d52: 48 89 f8                       other       movq   %rdi, %rax\r\n0x1032b4d55: 48 8b bd 88 fc ff ff           other       movq   -0x378(%rbp), %rdi\r\n0x1032b4d5c: 48 89 85 90 fc ff ff           other       movq   %rax, -0x370(%rbp)\r\n0x1032b4d63: 48 89 bd 98 fc ff ff           other       movq   %rdi, -0x368(%rbp)\r\n0x1032b4d6a: 48 89 95 a0 fc ff ff           other       movq   %rdx, -0x360(%rbp)\r\n0x1032b4d71: 48 89 8d a8 fc ff ff           other       movq   %rcx, -0x358(%rbp)\r\n0x1032b4d78: 48 89 45 88                    other       movq   %rax, -0x78(%rbp)\r\n0x1032b4d7c: 48 89 7d 90                    other       movq   %rdi, -0x70(%rbp)\r\n0x1032b4d80: 48 89 4d 98                    other       movq   %rcx, -0x68(%rbp)\r\n0x1032b4d84: c6 45 87 00                    other       movb   $0x0, -0x79(%rbp)\r\n0x1032b4d88: c6 45 86 00                    other       movb   $0x0, -0x7a(%rbp)\r\n0x1032b4d8c: c6 45 85 00                    other       movb   $0x0, -0x7b(%rbp)\r\n0x1032b4d90: c6 45 84 00                    other       movb   $0x0, -0x7c(%rbp)\r\n0x1032b4d94: c6 45 83 00                    other       movb   $0x0, -0x7d(%rbp)\r\n0x1032b4d98: c6 45 84 01                    other       movb   $0x1, -0x7c(%rbp)\r\n0x1032b4d9c: 48 83 c7 18                    other       addq   $0x18, %rdi\r\n0x1032b4da0: e8 cb 7d fe ff                 call        callq  0x10329cb70\r\n0x1032b4da5: 48 89 85 b0 fc ff ff           other       movq   %rax, -0x350(%rbp)\r\n0x1032b4dac: eb 3c                          jump        jmp    0x1032b4dea\r\n0x1032b4dae: 48 8b 95 a0 fc ff ff           other       movq   -0x360(%rbp), %rdx\r\n0x1032b4db5: 48 be 00 00 00 00 00 00 00 80  other       movabsq $-0x8000000000000000, %rsi ; imm = 0x8000000000000000\r\n0x1032b4dbf: b8 01 00 00 00                 other       movl   $0x1, %eax\r\n0x1032b4dc4: 31 c9                          other       xorl   %ecx, %ecx\r\n0x1032b4dc6: 48 39 32                       other       cmpq   %rsi, (%rdx)\r\n0x1032b4dc9: 48 0f 44 c1                    other       cmoveq %rcx, %rax\r\n0x1032b4dcd: 48 83 f8 01                    other       cmpq   $0x1, %rax\r\n0x1032b4dd1: 0f 84 43 0c 00 00              cond jump   je     0x1032b5a1a\r\n0x1032b4dd7: e9 44 0c 00 00                 jump        jmp    0x1032b5a20\r\n0x1032b4ddc: 48 89 c1                       other       movq   %rax, %rcx\r\n0x1032b4ddf: 89 d0                          other       movl   %edx, %eax\r\n0x1032b4de1: 48 89 4d a0                    other       movq   %rcx, -0x60(%rbp)\r\n0x1032b4de5: 89 45 a8                       other       movl   %eax, -0x58(%rbp)\r\n0x1032b4de8: eb c4                          jump        jmp    0x1032b4dae\r\n0x1032b4dea: 48 8b 85 90 fc ff ff           other       movq   -0x370(%rbp), %rax\r\n0x1032b4df1: 48 8b 8d b0 fc ff ff           other       movq   -0x350(%rbp), %rcx\r\n0x1032b4df8: 48 89 88 c8 01 00 00           other       movq   %rcx, 0x1c8(%rax)\r\n\r\n# Check the first call, looks like a Vec alloc -- NOPE, is Vec::len()\r\n(lldb) image lookup -a 0x10329cb70\r\n      Address: breakout[0x000000010329cb70] (breakout.__TEXT.__text + 53060080)\r\n      Summary: breakout`alloc::vec::Vec$LT$T$C$A$GT$::len::hed1b7d1b42e2eadd at mod.rs:2141\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1950918910/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dmlary","id":857742,"node_id":"MDQ6VXNlcjg1Nzc0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/857742?v=4","gravatar_id":"","url":"https://api.github.com/users/dmlary","html_url":"https://github.com/dmlary","followers_url":"https://api.github.com/users/dmlary/followers","following_url":"https://api.github.com/users/dmlary/following{/other_user}","gists_url":"https://api.github.com/users/dmlary/gists{/gist_id}","starred_url":"https://api.github.com/users/dmlary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmlary/subscriptions","organizations_url":"https://api.github.com/users/dmlary/orgs","repos_url":"https://api.github.com/users/dmlary/repos","events_url":"https://api.github.com/users/dmlary/events{/privacy}","received_events_url":"https://api.github.com/users/dmlary/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1950922950","html_url":"https://github.com/bevyengine/bevy/issues/11932#issuecomment-1950922950","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/11932","id":1950922950,"node_id":"IC_kwDODf6-U850SLjG","user":{"login":"dmlary","id":857742,"node_id":"MDQ6VXNlcjg1Nzc0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/857742?v=4","gravatar_id":"","url":"https://api.github.com/users/dmlary","html_url":"https://github.com/dmlary","followers_url":"https://api.github.com/users/dmlary/followers","following_url":"https://api.github.com/users/dmlary/following{/other_user}","gists_url":"https://api.github.com/users/dmlary/gists{/gist_id}","starred_url":"https://api.github.com/users/dmlary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmlary/subscriptions","organizations_url":"https://api.github.com/users/dmlary/orgs","repos_url":"https://api.github.com/users/dmlary/repos","events_url":"https://api.github.com/users/dmlary/events{/privacy}","received_events_url":"https://api.github.com/users/dmlary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-18T03:45:53Z","updated_at":"2024-02-18T17:34:47Z","body":"~~As I don't trust my perf numbers, @hymm  would you mind trying a branch with `Option<&FixedBitSet>` instead of the `cfg` gate?~~","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1950922950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dmlary","id":857742,"node_id":"MDQ6VXNlcjg1Nzc0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/857742?v=4","gravatar_id":"","url":"https://api.github.com/users/dmlary","html_url":"https://github.com/dmlary","followers_url":"https://api.github.com/users/dmlary/followers","following_url":"https://api.github.com/users/dmlary/following{/other_user}","gists_url":"https://api.github.com/users/dmlary/gists{/gist_id}","starred_url":"https://api.github.com/users/dmlary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmlary/subscriptions","organizations_url":"https://api.github.com/users/dmlary/orgs","repos_url":"https://api.github.com/users/dmlary/repos","events_url":"https://api.github.com/users/dmlary/events{/privacy}","received_events_url":"https://api.github.com/users/dmlary/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11837773998,"node_id":"MEE_lADODf6-U85_mFDWzwAAAALBlhiu","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/11837773998","actor":{"login":"hymm","id":2180432,"node_id":"MDQ6VXNlcjIxODA0MzI=","avatar_url":"https://avatars.githubusercontent.com/u/2180432?v=4","gravatar_id":"","url":"https://api.github.com/users/hymm","html_url":"https://github.com/hymm","followers_url":"https://api.github.com/users/hymm/followers","following_url":"https://api.github.com/users/hymm/following{/other_user}","gists_url":"https://api.github.com/users/hymm/gists{/gist_id}","starred_url":"https://api.github.com/users/hymm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hymm/subscriptions","organizations_url":"https://api.github.com/users/hymm/orgs","repos_url":"https://api.github.com/users/hymm/repos","events_url":"https://api.github.com/users/hymm/events{/privacy}","received_events_url":"https://api.github.com/users/hymm/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-02-18T03:45:54Z","performed_via_github_app":null},{"id":11837774000,"node_id":"SE_lADODf6-U85_mFDWzwAAAALBlhiw","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/11837774000","actor":{"login":"hymm","id":2180432,"node_id":"MDQ6VXNlcjIxODA0MzI=","avatar_url":"https://avatars.githubusercontent.com/u/2180432?v=4","gravatar_id":"","url":"https://api.github.com/users/hymm","html_url":"https://github.com/hymm","followers_url":"https://api.github.com/users/hymm/followers","following_url":"https://api.github.com/users/hymm/following{/other_user}","gists_url":"https://api.github.com/users/hymm/gists{/gist_id}","starred_url":"https://api.github.com/users/hymm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hymm/subscriptions","organizations_url":"https://api.github.com/users/hymm/orgs","repos_url":"https://api.github.com/users/hymm/repos","events_url":"https://api.github.com/users/hymm/events{/privacy}","received_events_url":"https://api.github.com/users/hymm/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-02-18T03:45:54Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1950937671","html_url":"https://github.com/bevyengine/bevy/issues/11932#issuecomment-1950937671","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/11932","id":1950937671,"node_id":"IC_kwDODf6-U850SPJH","user":{"login":"dmlary","id":857742,"node_id":"MDQ6VXNlcjg1Nzc0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/857742?v=4","gravatar_id":"","url":"https://api.github.com/users/dmlary","html_url":"https://github.com/dmlary","followers_url":"https://api.github.com/users/dmlary/followers","following_url":"https://api.github.com/users/dmlary/following{/other_user}","gists_url":"https://api.github.com/users/dmlary/gists{/gist_id}","starred_url":"https://api.github.com/users/dmlary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmlary/subscriptions","organizations_url":"https://api.github.com/users/dmlary/orgs","repos_url":"https://api.github.com/users/dmlary/repos","events_url":"https://api.github.com/users/dmlary/events{/privacy}","received_events_url":"https://api.github.com/users/dmlary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-18T03:56:01Z","updated_at":"2024-02-18T03:56:01Z","body":"I read further into the mangled function name; it's not an alloc; it's a `Vec::len()` call.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1950937671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dmlary","id":857742,"node_id":"MDQ6VXNlcjg1Nzc0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/857742?v=4","gravatar_id":"","url":"https://api.github.com/users/dmlary","html_url":"https://github.com/dmlary","followers_url":"https://api.github.com/users/dmlary/followers","following_url":"https://api.github.com/users/dmlary/following{/other_user}","gists_url":"https://api.github.com/users/dmlary/gists{/gist_id}","starred_url":"https://api.github.com/users/dmlary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmlary/subscriptions","organizations_url":"https://api.github.com/users/dmlary/orgs","repos_url":"https://api.github.com/users/dmlary/repos","events_url":"https://api.github.com/users/dmlary/events{/privacy}","received_events_url":"https://api.github.com/users/dmlary/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1950956892","html_url":"https://github.com/bevyengine/bevy/issues/11932#issuecomment-1950956892","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/11932","id":1950956892,"node_id":"IC_kwDODf6-U850ST1c","user":{"login":"dmlary","id":857742,"node_id":"MDQ6VXNlcjg1Nzc0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/857742?v=4","gravatar_id":"","url":"https://api.github.com/users/dmlary","html_url":"https://github.com/dmlary","followers_url":"https://api.github.com/users/dmlary/followers","following_url":"https://api.github.com/users/dmlary/following{/other_user}","gists_url":"https://api.github.com/users/dmlary/gists{/gist_id}","starred_url":"https://api.github.com/users/dmlary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmlary/subscriptions","organizations_url":"https://api.github.com/users/dmlary/orgs","repos_url":"https://api.github.com/users/dmlary/repos","events_url":"https://api.github.com/users/dmlary/events{/privacy}","received_events_url":"https://api.github.com/users/dmlary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-18T04:14:52Z","updated_at":"2024-02-18T04:14:52Z","body":"> As I don't trust my perf numbers, @hymm would you mind trying a branch with `Option<&FixedBitSet>` instead of the `cfg` gate?\r\n\r\nI retract my request.  I'm making this code change and it's getting complicated quickly.  I'll keep poking at it trying to figure out why the argument is causing problems.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1950956892/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dmlary","id":857742,"node_id":"MDQ6VXNlcjg1Nzc0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/857742?v=4","gravatar_id":"","url":"https://api.github.com/users/dmlary","html_url":"https://github.com/dmlary","followers_url":"https://api.github.com/users/dmlary/followers","following_url":"https://api.github.com/users/dmlary/following{/other_user}","gists_url":"https://api.github.com/users/dmlary/gists{/gist_id}","starred_url":"https://api.github.com/users/dmlary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmlary/subscriptions","organizations_url":"https://api.github.com/users/dmlary/orgs","repos_url":"https://api.github.com/users/dmlary/repos","events_url":"https://api.github.com/users/dmlary/events{/privacy}","received_events_url":"https://api.github.com/users/dmlary/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11837824556,"node_id":"MEE_lADODf6-U85_mFDWzwAAAALBlt4s","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/11837824556","actor":{"login":"hymm","id":2180432,"node_id":"MDQ6VXNlcjIxODA0MzI=","avatar_url":"https://avatars.githubusercontent.com/u/2180432?v=4","gravatar_id":"","url":"https://api.github.com/users/hymm","html_url":"https://github.com/hymm","followers_url":"https://api.github.com/users/hymm/followers","following_url":"https://api.github.com/users/hymm/following{/other_user}","gists_url":"https://api.github.com/users/hymm/gists{/gist_id}","starred_url":"https://api.github.com/users/hymm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hymm/subscriptions","organizations_url":"https://api.github.com/users/hymm/orgs","repos_url":"https://api.github.com/users/hymm/repos","events_url":"https://api.github.com/users/hymm/events{/privacy}","received_events_url":"https://api.github.com/users/hymm/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-02-18T04:14:53Z","performed_via_github_app":null},{"id":11837824559,"node_id":"SE_lADODf6-U85_mFDWzwAAAALBlt4v","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/11837824559","actor":{"login":"hymm","id":2180432,"node_id":"MDQ6VXNlcjIxODA0MzI=","avatar_url":"https://avatars.githubusercontent.com/u/2180432?v=4","gravatar_id":"","url":"https://api.github.com/users/hymm","html_url":"https://github.com/hymm","followers_url":"https://api.github.com/users/hymm/followers","following_url":"https://api.github.com/users/hymm/following{/other_user}","gists_url":"https://api.github.com/users/hymm/gists{/gist_id}","starred_url":"https://api.github.com/users/hymm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hymm/subscriptions","organizations_url":"https://api.github.com/users/hymm/orgs","repos_url":"https://api.github.com/users/hymm/repos","events_url":"https://api.github.com/users/hymm/events{/privacy}","received_events_url":"https://api.github.com/users/hymm/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-02-18T04:14:53Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1950970236","html_url":"https://github.com/bevyengine/bevy/issues/11932#issuecomment-1950970236","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/11932","id":1950970236,"node_id":"IC_kwDODf6-U850SXF8","user":{"login":"chengts95","id":6616679,"node_id":"MDQ6VXNlcjY2MTY2Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/6616679?v=4","gravatar_id":"","url":"https://api.github.com/users/chengts95","html_url":"https://github.com/chengts95","followers_url":"https://api.github.com/users/chengts95/followers","following_url":"https://api.github.com/users/chengts95/following{/other_user}","gists_url":"https://api.github.com/users/chengts95/gists{/gist_id}","starred_url":"https://api.github.com/users/chengts95/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chengts95/subscriptions","organizations_url":"https://api.github.com/users/chengts95/orgs","repos_url":"https://api.github.com/users/chengts95/repos","events_url":"https://api.github.com/users/chengts95/events{/privacy}","received_events_url":"https://api.github.com/users/chengts95/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-18T05:46:24Z","updated_at":"2024-02-18T05:47:46Z","body":"I have changed the benchmark to \r\n```rust\r\nfn main() {\r\n    let mut app = bevy_app::App::default();\r\n    let mut a1 = schedule::Schedule::new(First);\r\n    a1.set_executor_kind(schedule::ExecutorKind::SingleThreaded);\r\n \r\n\r\n    let now = Instant::now();\r\n    for _i in 0..200_000_000 {\r\n        a1.run(&mut app.world);\r\n\r\n    }\r\n    println!(\"{}\", now.elapsed().as_micros() as f64 / 1e6);\r\n  \r\n} \r\n``` \r\n\r\nThe reason to directly run the schedule on the world is that in an app, every schedule in a hashmap must be removed and added back to the schedule's hashmap, which is very slow and calls memcpy frequently. So it cannot measure the time accurately for this regression.\r\nThe code takes 1.71s in 0.12 and 2.34s in 0.13 even with the cargo feature disabled. This indicates a 40% overhead increase in the scheduled run.  \r\n\r\nThis is the test run from Intel VTune Profiler:\r\nBevy 0.12.0\r\n<img width=\"576\" alt=\"image\" src=\"https://github.com/bevyengine/bevy/assets/6616679/774c2b21-b2f8-4ee0-b48d-c4f9d7247b89\">\r\nBevy 0.13 with stepping disabled\r\n<img width=\"584\" alt=\"image\" src=\"https://github.com/bevyengine/bevy/assets/6616679/f839f8e2-c84d-4894-9324-0f952f560278\">\r\n\r\nWith the Intel profiler's results, the 0.13 CPU time is 40% more than 0.12.\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1950970236/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"chengts95","id":6616679,"node_id":"MDQ6VXNlcjY2MTY2Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/6616679?v=4","gravatar_id":"","url":"https://api.github.com/users/chengts95","html_url":"https://github.com/chengts95","followers_url":"https://api.github.com/users/chengts95/followers","following_url":"https://api.github.com/users/chengts95/following{/other_user}","gists_url":"https://api.github.com/users/chengts95/gists{/gist_id}","starred_url":"https://api.github.com/users/chengts95/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chengts95/subscriptions","organizations_url":"https://api.github.com/users/chengts95/orgs","repos_url":"https://api.github.com/users/chengts95/repos","events_url":"https://api.github.com/users/chengts95/events{/privacy}","received_events_url":"https://api.github.com/users/chengts95/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1950985153","html_url":"https://github.com/bevyengine/bevy/issues/11932#issuecomment-1950985153","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/11932","id":1950985153,"node_id":"IC_kwDODf6-U850SavB","user":{"login":"dmlary","id":857742,"node_id":"MDQ6VXNlcjg1Nzc0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/857742?v=4","gravatar_id":"","url":"https://api.github.com/users/dmlary","html_url":"https://github.com/dmlary","followers_url":"https://api.github.com/users/dmlary/followers","following_url":"https://api.github.com/users/dmlary/following{/other_user}","gists_url":"https://api.github.com/users/dmlary/gists{/gist_id}","starred_url":"https://api.github.com/users/dmlary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmlary/subscriptions","organizations_url":"https://api.github.com/users/dmlary/orgs","repos_url":"https://api.github.com/users/dmlary/repos","events_url":"https://api.github.com/users/dmlary/events{/privacy}","received_events_url":"https://api.github.com/users/dmlary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-18T07:07:52Z","updated_at":"2024-02-18T07:08:54Z","body":"Alright, I broke down the disassembly of `Schedule::run()`, `SingleThreadedExecutor::run()`, and `MultiThreadedExecutor::run()` with stepping enabled, another version with v0.13 with stepping disabled, and a third version with @hymm 's changes and stepping disabled.\r\n\r\n[v0.13.0 stepping enabled](https://github.com/bevyengine/bevy/files/14321291/disass-run-stepping.txt)\r\n[v0.13.0 stepping disabled](https://github.com/bevyengine/bevy/files/14321391/disass-run-without-stepping-013.txt)\r\n[cfg gated args w/ stepping diabled; hymm's branch](https://github.com/bevyengine/bevy/files/14321292/disass-run-without-stepping.txt)\r\n\r\nWe're not explicitly allocing from what I can see here with stepping disabled, but what I do see is calls to `core::ptr::drop_in_place()` for `FixedBitSet` or `Option<FixedBitSet>`.\r\n\r\n```txt\r\n# calls to `drop_in_place()` for FixedBitSet in v0.13 with stepping enabled\r\ndmlary@beast:~/src/bevy/vendor/bevy/benches> grep callq ../disass-run-stepping.txt | grep drop_in_place | grep fixedbitset\r\n    0x100445970 <+208>:  callq  0x1005c3c50               ; core::ptr::drop_in_place$LT$fixedbitset..FixedBitSet$GT$::h6dcfbf4b71ae901f at mod.rs:507\r\n    0x10044598c <+236>:  callq  0x1005c3c50               ; core::ptr::drop_in_place$LT$fixedbitset..FixedBitSet$GT$::h6dcfbf4b71ae901f at mod.rs:507\r\n    0x100445b23 <+643>:  callq  0x1005c3c50               ; core::ptr::drop_in_place$LT$fixedbitset..FixedBitSet$GT$::h6dcfbf4b71ae901f at mod.rs:507\r\n    0x1004460fb <+2139>: callq  0x1005c3c50               ; core::ptr::drop_in_place$LT$fixedbitset..FixedBitSet$GT$::h6dcfbf4b71ae901f at mod.rs:507\r\n    0x10043d400 <+208>:  callq  0x1004f4c50               ; core::ptr::drop_in_place$LT$core..option..Option$LT$fixedbitset..FixedBitSet$GT$$GT$::h2cecbb3fcde869ed at mod.rs:507\r\n    0x10043d8a9 <+1401>: callq  0x1005c3c50               ; core::ptr::drop_in_place$LT$fixedbitset..FixedBitSet$GT$::h6dcfbf4b71ae901f at mod.rs:507\r\n    0x10043dfc4 <+3220>: callq  0x1005c3c50               ; core::ptr::drop_in_place$LT$fixedbitset..FixedBitSet$GT$::h6dcfbf4b71ae901f at mod.rs:507\r\n    0x10043e020 <+3312>: callq  0x1005c3c50               ; core::ptr::drop_in_place$LT$fixedbitset..FixedBitSet$GT$::h6dcfbf4b71ae901f at mod.rs:507\r\n    \r\n# Calls for `drop_in_place()` for `Option<FixedBitSet>` in v0.13 with stepping disabled\r\ndmlary@beast:~/src/bevy/vendor/bevy/benches> grep callq ../disass-run-without-stepping-013.txt | grep drop_in_place | grep fixedbitset\r\n    0x100484d85 <+101>:  callq  0x100434aa0               ; core::ptr::drop_in_place$LT$core..option..Option$LT$fixedbitset..FixedBitSet$GT$$GT$::hc51e23594530a709 at mod.rs:507\r\n    0x100484eb5 <+405>:  callq  0x100434aa0               ; core::ptr::drop_in_place$LT$core..option..Option$LT$fixedbitset..FixedBitSet$GT$$GT$::hc51e23594530a709 at mod.rs:507\r\n    0x100489ea9 <+105>:  callq  0x100434aa0               ; core::ptr::drop_in_place$LT$core..option..Option$LT$fixedbitset..FixedBitSet$GT$$GT$::hc51e23594530a709 at mod.rs:507\r\n    0x100489ee7 <+167>:  callq  0x100434aa0               ; core::ptr::drop_in_place$LT$core..option..Option$LT$fixedbitset..FixedBitSet$GT$$GT$::hc51e23594530a709 at mod.rs:507\r\n    0x10048a773 <+2355>: callq  0x100434aa0               ; core::ptr::drop_in_place$LT$core..option..Option$LT$fixedbitset..FixedBitSet$GT$$GT$::hc51e23594530a709 at mod.rs:507\r\n    \r\n# calls to `drop_in_place()` for Option<FixedBitSet>  with @hymm's feature gate on the arg\r\ndmlary@beast:~/src/bevy/vendor/bevy/benches> grep callq ../disass-run-without-stepping.txt | grep drop_in_place | grep fixedbitset\r\n    0x1004d3b7a <+186>: callq  0x100434e20               ; core::ptr::drop_in_place$LT$core..option..Option$LT$fixedbitset..FixedBitSet$GT$$GT$::hc51e23594530a709 at mod.rs:507\r\n    0x1004d3b93 <+211>: callq  0x100434e20               ; core::ptr::drop_in_place$LT$core..option..Option$LT$fixedbitset..FixedBitSet$GT$$GT$::hc51e23594530a709 at mod.rs:507\r\n ```\r\n\r\nJust looking at the differences between @hymm 's version and v0.13, both with stepping disabled, my best guess is that the cost of dropping `Option<FixedBitSet>` is higher when we drop it within `SystemExecutor::run()`.  I'm not able to pinpoint exactly why though.\r\n\r\nFor v0.13 with stepping disabled, we do allocate an additional 80 bytes on the stack versus hymm's with stepping disabled, but I wasn't able to find us copying those 80 bytes over when `skip_systems` is `None`.\r\n\r\nI'm unable to explain this behavior for now.  I'll take another look tomorrow.\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1950985153/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dmlary","id":857742,"node_id":"MDQ6VXNlcjg1Nzc0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/857742?v=4","gravatar_id":"","url":"https://api.github.com/users/dmlary","html_url":"https://github.com/dmlary","followers_url":"https://api.github.com/users/dmlary/followers","following_url":"https://api.github.com/users/dmlary/following{/other_user}","gists_url":"https://api.github.com/users/dmlary/gists{/gist_id}","starred_url":"https://api.github.com/users/dmlary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmlary/subscriptions","organizations_url":"https://api.github.com/users/dmlary/orgs","repos_url":"https://api.github.com/users/dmlary/repos","events_url":"https://api.github.com/users/dmlary/events{/privacy}","received_events_url":"https://api.github.com/users/dmlary/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11838331084,"node_id":"MEE_lADODf6-U85_mFDWzwAAAALBnpjM","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/11838331084","actor":{"login":"hymm","id":2180432,"node_id":"MDQ6VXNlcjIxODA0MzI=","avatar_url":"https://avatars.githubusercontent.com/u/2180432?v=4","gravatar_id":"","url":"https://api.github.com/users/hymm","html_url":"https://github.com/hymm","followers_url":"https://api.github.com/users/hymm/followers","following_url":"https://api.github.com/users/hymm/following{/other_user}","gists_url":"https://api.github.com/users/hymm/gists{/gist_id}","starred_url":"https://api.github.com/users/hymm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hymm/subscriptions","organizations_url":"https://api.github.com/users/hymm/orgs","repos_url":"https://api.github.com/users/hymm/repos","events_url":"https://api.github.com/users/hymm/events{/privacy}","received_events_url":"https://api.github.com/users/hymm/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-02-18T07:07:54Z","performed_via_github_app":null},{"id":11838331092,"node_id":"SE_lADODf6-U85_mFDWzwAAAALBnpjU","url":"https://api.github.com/repos/bevyengine/bevy/issues/events/11838331092","actor":{"login":"hymm","id":2180432,"node_id":"MDQ6VXNlcjIxODA0MzI=","avatar_url":"https://avatars.githubusercontent.com/u/2180432?v=4","gravatar_id":"","url":"https://api.github.com/users/hymm","html_url":"https://github.com/hymm","followers_url":"https://api.github.com/users/hymm/followers","following_url":"https://api.github.com/users/hymm/following{/other_user}","gists_url":"https://api.github.com/users/hymm/gists{/gist_id}","starred_url":"https://api.github.com/users/hymm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hymm/subscriptions","organizations_url":"https://api.github.com/users/hymm/orgs","repos_url":"https://api.github.com/users/hymm/repos","events_url":"https://api.github.com/users/hymm/events{/privacy}","received_events_url":"https://api.github.com/users/hymm/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-02-18T07:07:54Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1951403757","html_url":"https://github.com/bevyengine/bevy/issues/11932#issuecomment-1951403757","issue_url":"https://api.github.com/repos/bevyengine/bevy/issues/11932","id":1951403757,"node_id":"IC_kwDODf6-U850UA7t","user":{"login":"dmlary","id":857742,"node_id":"MDQ6VXNlcjg1Nzc0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/857742?v=4","gravatar_id":"","url":"https://api.github.com/users/dmlary","html_url":"https://github.com/dmlary","followers_url":"https://api.github.com/users/dmlary/followers","following_url":"https://api.github.com/users/dmlary/following{/other_user}","gists_url":"https://api.github.com/users/dmlary/gists{/gist_id}","starred_url":"https://api.github.com/users/dmlary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmlary/subscriptions","organizations_url":"https://api.github.com/users/dmlary/orgs","repos_url":"https://api.github.com/users/dmlary/repos","events_url":"https://api.github.com/users/dmlary/events{/privacy}","received_events_url":"https://api.github.com/users/dmlary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-18T18:12:37Z","updated_at":"2024-02-18T18:12:37Z","body":"Just to rule it out, I tried `&Option<FixedBitSet>` as an argument; it didn't resolve the issue.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/comments/1951403757/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dmlary","id":857742,"node_id":"MDQ6VXNlcjg1Nzc0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/857742?v=4","gravatar_id":"","url":"https://api.github.com/users/dmlary","html_url":"https://github.com/dmlary","followers_url":"https://api.github.com/users/dmlary/followers","following_url":"https://api.github.com/users/dmlary/following{/other_user}","gists_url":"https://api.github.com/users/dmlary/gists{/gist_id}","starred_url":"https://api.github.com/users/dmlary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmlary/subscriptions","organizations_url":"https://api.github.com/users/dmlary/orgs","repos_url":"https://api.github.com/users/dmlary/repos","events_url":"https://api.github.com/users/dmlary/events{/privacy}","received_events_url":"https://api.github.com/users/dmlary/received_events","type":"User","user_view_type":"public","site_admin":false}}]