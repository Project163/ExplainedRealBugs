{"url":"https://api.github.com/repos/bevyengine/bevy/issues/18600","repository_url":"https://api.github.com/repos/bevyengine/bevy","labels_url":"https://api.github.com/repos/bevyengine/bevy/issues/18600/labels{/name}","comments_url":"https://api.github.com/repos/bevyengine/bevy/issues/18600/comments","events_url":"https://api.github.com/repos/bevyengine/bevy/issues/18600/events","html_url":"https://github.com/bevyengine/bevy/issues/18600","id":2957657157,"node_id":"I_kwDODf6-U86wSkRF","number":18600,"title":"Creating a StandardMaterial from a Color with non-1.0 alpha fails to compile pre-pass shader","user":{"login":"aloucks","id":221559,"node_id":"MDQ6VXNlcjIyMTU1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/221559?v=4","gravatar_id":"","url":"https://api.github.com/users/aloucks","html_url":"https://github.com/aloucks","followers_url":"https://api.github.com/users/aloucks/followers","following_url":"https://api.github.com/users/aloucks/following{/other_user}","gists_url":"https://api.github.com/users/aloucks/gists{/gist_id}","starred_url":"https://api.github.com/users/aloucks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aloucks/subscriptions","organizations_url":"https://api.github.com/users/aloucks/orgs","repos_url":"https://api.github.com/users/aloucks/repos","events_url":"https://api.github.com/users/aloucks/events{/privacy}","received_events_url":"https://api.github.com/users/aloucks/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1795619323,"node_id":"MDU6TGFiZWwxNzk1NjE5MzIz","url":"https://api.github.com/repos/bevyengine/bevy/labels/C-Bug","name":"C-Bug","color":"d73a4a","default":false,"description":"An unexpected or incorrect behavior"},{"id":2045383863,"node_id":"MDU6TGFiZWwyMDQ1MzgzODYz","url":"https://api.github.com/repos/bevyengine/bevy/labels/A-Rendering","name":"A-Rendering","color":"C6A751","default":false,"description":"Drawing game state to the screen"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/bevyengine/bevy/milestones/28","html_url":"https://github.com/bevyengine/bevy/milestone/28","labels_url":"https://api.github.com/repos/bevyengine/bevy/milestones/28/labels","id":11655039,"node_id":"MI_kwDODf6-U84Asdd_","number":28,"title":"0.16","description":"","creator":{"login":"alice-i-cecile","id":3579909,"node_id":"MDQ6VXNlcjM1Nzk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3579909?v=4","gravatar_id":"","url":"https://api.github.com/users/alice-i-cecile","html_url":"https://github.com/alice-i-cecile","followers_url":"https://api.github.com/users/alice-i-cecile/followers","following_url":"https://api.github.com/users/alice-i-cecile/following{/other_user}","gists_url":"https://api.github.com/users/alice-i-cecile/gists{/gist_id}","starred_url":"https://api.github.com/users/alice-i-cecile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alice-i-cecile/subscriptions","organizations_url":"https://api.github.com/users/alice-i-cecile/orgs","repos_url":"https://api.github.com/users/alice-i-cecile/repos","events_url":"https://api.github.com/users/alice-i-cecile/events{/privacy}","received_events_url":"https://api.github.com/users/alice-i-cecile/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":558,"state":"closed","created_at":"2024-09-30T20:15:21Z","updated_at":"2025-04-25T13:01:43Z","due_on":null,"closed_at":"2025-04-25T13:01:43Z"},"comments":0,"created_at":"2025-03-29T02:05:49Z","updated_at":"2025-03-30T01:44:33Z","closed_at":"2025-03-30T01:44:32Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Bevy version\n\n`0.16.0-rc.2`\n\n\n## Relevant system information\n\n```\n2025-03-29T01:43:19.543712Z  INFO bevy_render::renderer: AdapterInfo { name: \"Apple M4\", vendor: 0, device: 0, device_type: IntegratedGpu, driver: \"\", driver_info: \"\", backend: Metal }\n```\n\nI've also observed the logged error on Windows with the Vulkan backend.\n\n## What you did\n\nI used a `StandardMaterial` created from a color with alpha of `0.0`. It seems to log the error whenever the alpha is `< 1.0`.\n\n```rust\nlet material = materials.add(color.with_alpha(0.0));\n```\n\nThe entity was then spawned with `Mesh3d` and `MeshMaterial3d`. The alpha is later updated in a system. I've been setting it to a `non-1.0` value initially for force blend to be enabled.\n\n**EDIT**: I think the issue is that i'm using a `LineList` and have no UVs. The `flags` are defined in a pre-processor `#ifdef VERTEX_UVS`. \n\n## What went wrong\n\n```\n2025-03-29T01:43:19.855026Z ERROR bevy_render::render_resource::pipeline_cache: failed to process shader:\nerror: no definition in scope for identifier: `flags`\n   ┌─ /Users/aloucks/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/bevy_pbr-0.16.0-rc.2/src/render/pbr_prepass_functions.wgsl:63:22\n   │\n63 │     let alpha_mode = flags & bevy_pbr::pbr_types::STANDARD_MATERIAL_FLAGS_ALPHA_MODE_RESERVED_BITS;\n   │                      ^^^^^ unknown identifier\n   │\n   = no definition in scope for identifier: `flags`\n```\n\n","closed_by":{"login":"alice-i-cecile","id":3579909,"node_id":"MDQ6VXNlcjM1Nzk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3579909?v=4","gravatar_id":"","url":"https://api.github.com/users/alice-i-cecile","html_url":"https://github.com/alice-i-cecile","followers_url":"https://api.github.com/users/alice-i-cecile/followers","following_url":"https://api.github.com/users/alice-i-cecile/following{/other_user}","gists_url":"https://api.github.com/users/alice-i-cecile/gists{/gist_id}","starred_url":"https://api.github.com/users/alice-i-cecile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alice-i-cecile/subscriptions","organizations_url":"https://api.github.com/users/alice-i-cecile/orgs","repos_url":"https://api.github.com/users/alice-i-cecile/repos","events_url":"https://api.github.com/users/alice-i-cecile/events{/privacy}","received_events_url":"https://api.github.com/users/alice-i-cecile/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/18600/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bevyengine/bevy/issues/18600/timeline","performed_via_github_app":null,"state_reason":"completed"}