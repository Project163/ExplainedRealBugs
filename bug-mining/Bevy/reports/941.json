{"url":"https://api.github.com/repos/bevyengine/bevy/issues/20365","repository_url":"https://api.github.com/repos/bevyengine/bevy","labels_url":"https://api.github.com/repos/bevyengine/bevy/issues/20365/labels{/name}","comments_url":"https://api.github.com/repos/bevyengine/bevy/issues/20365/comments","events_url":"https://api.github.com/repos/bevyengine/bevy/issues/20365/events","html_url":"https://github.com/bevyengine/bevy/issues/20365","id":3283122849,"node_id":"I_kwDODf6-U87DsHqh","number":20365,"title":"sprite picking on a compressed texture panic","user":{"login":"mirsella","id":45905567,"node_id":"MDQ6VXNlcjQ1OTA1NTY3","avatar_url":"https://avatars.githubusercontent.com/u/45905567?v=4","gravatar_id":"","url":"https://api.github.com/users/mirsella","html_url":"https://github.com/mirsella","followers_url":"https://api.github.com/users/mirsella/followers","following_url":"https://api.github.com/users/mirsella/following{/other_user}","gists_url":"https://api.github.com/users/mirsella/gists{/gist_id}","starred_url":"https://api.github.com/users/mirsella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mirsella/subscriptions","organizations_url":"https://api.github.com/users/mirsella/orgs","repos_url":"https://api.github.com/users/mirsella/repos","events_url":"https://api.github.com/users/mirsella/events{/privacy}","received_events_url":"https://api.github.com/users/mirsella/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1795619323,"node_id":"MDU6TGFiZWwxNzk1NjE5MzIz","url":"https://api.github.com/repos/bevyengine/bevy/labels/C-Bug","name":"C-Bug","color":"d73a4a","default":false,"description":"An unexpected or incorrect behavior"},{"id":2272057257,"node_id":"MDU6TGFiZWwyMjcyMDU3MjU3","url":"https://api.github.com/repos/bevyengine/bevy/labels/P-Crash","name":"P-Crash","color":"FF7b00","default":false,"description":"A sudden unexpected crash"},{"id":3166151441,"node_id":"MDU6TGFiZWwzMTY2MTUxNDQx","url":"https://api.github.com/repos/bevyengine/bevy/labels/S-Ready-For-Implementation","name":"S-Ready-For-Implementation","color":"D876E3","default":false,"description":"This issue is ready for an implementation PR. Go for it!"},{"id":6899549740,"node_id":"LA_kwDODf6-U88AAAABmz7GLA","url":"https://api.github.com/repos/bevyengine/bevy/labels/X-Uncontroversial","name":"X-Uncontroversial","color":"d93f0b","default":false,"description":"This work is generally agreed upon"},{"id":6899571146,"node_id":"LA_kwDODf6-U88AAAABmz8Zyg","url":"https://api.github.com/repos/bevyengine/bevy/labels/D-Straightforward","name":"D-Straightforward","color":"008672","default":false,"description":"Simple bug fixes and API improvements, docs, test and examples"},{"id":7040334053,"node_id":"LA_kwDODf6-U88AAAABo6L45Q","url":"https://api.github.com/repos/bevyengine/bevy/labels/A-Picking","name":"A-Picking","color":"c6A751","default":false,"description":"Pointing at and selecting objects of all sorts"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2025-08-01T08:56:43Z","updated_at":"2025-08-24T21:11:19Z","closed_at":"2025-08-24T21:11:19Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Bevy version\n\n0.16.1\n\n## What you did\n\nspawn a `Sprite` and `Pickable::default()`.\n\n## What went wrong\n\n```\nbevy_image/src/image.rs:1598:18:\nUsing pixel_size for compressed textures is invalid\nEncountered a panic in system `bevy_sprite::picking_backend::sprite_picking`!\n```\n\n## Additional information\n\nthis panic https://github.com/bevyengine/bevy/blob/f96eaa4a80b2a6be735184a316c176a918e0f364/crates/bevy_image/src/image.rs#L1733\n\nthis is because we can't get the pixel at a certain coordinate in a compressed texture format like ktx2 for example, as they are compressed.\n\nsprite picking tries to get the pixel color at the location of the click to determine if it should hit or not this sprite based on the alpha threshold setting, and so trigger the panic on a compressed texture.\n\nat least not panicing would be good i think ?\nmaybe `pixel_size()` can return a Option instead ?\n\nfor my game, ive made a workaround to use the original .png assets instead of compressed where picking was needed, but having the option to still use the compressed asset and just ignore the alpha setting would be useful","closed_by":{"login":"alice-i-cecile","id":3579909,"node_id":"MDQ6VXNlcjM1Nzk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3579909?v=4","gravatar_id":"","url":"https://api.github.com/users/alice-i-cecile","html_url":"https://github.com/alice-i-cecile","followers_url":"https://api.github.com/users/alice-i-cecile/followers","following_url":"https://api.github.com/users/alice-i-cecile/following{/other_user}","gists_url":"https://api.github.com/users/alice-i-cecile/gists{/gist_id}","starred_url":"https://api.github.com/users/alice-i-cecile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alice-i-cecile/subscriptions","organizations_url":"https://api.github.com/users/alice-i-cecile/orgs","repos_url":"https://api.github.com/users/alice-i-cecile/repos","events_url":"https://api.github.com/users/alice-i-cecile/events{/privacy}","received_events_url":"https://api.github.com/users/alice-i-cecile/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/20365/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bevyengine/bevy/issues/20365/timeline","performed_via_github_app":null,"state_reason":"completed"}