{"url":"https://api.github.com/repos/bevyengine/bevy/issues/12056","repository_url":"https://api.github.com/repos/bevyengine/bevy","labels_url":"https://api.github.com/repos/bevyengine/bevy/issues/12056/labels{/name}","comments_url":"https://api.github.com/repos/bevyengine/bevy/issues/12056/comments","events_url":"https://api.github.com/repos/bevyengine/bevy/issues/12056/events","html_url":"https://github.com/bevyengine/bevy/issues/12056","id":2150103100,"node_id":"I_kwDODf6-U86AJ_g8","number":12056,"title":"bevy_color migration plan","user":{"login":"viridia","id":1166135,"node_id":"MDQ6VXNlcjExNjYxMzU=","avatar_url":"https://avatars.githubusercontent.com/u/1166135?v=4","gravatar_id":"","url":"https://api.github.com/users/viridia","html_url":"https://github.com/viridia","followers_url":"https://api.github.com/users/viridia/followers","following_url":"https://api.github.com/users/viridia/following{/other_user}","gists_url":"https://api.github.com/users/viridia/gists{/gist_id}","starred_url":"https://api.github.com/users/viridia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/viridia/subscriptions","organizations_url":"https://api.github.com/users/viridia/orgs","repos_url":"https://api.github.com/users/viridia/repos","events_url":"https://api.github.com/users/viridia/events{/privacy}","received_events_url":"https://api.github.com/users/viridia/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1795619326,"node_id":"MDU6TGFiZWwxNzk1NjE5MzI2","url":"https://api.github.com/repos/bevyengine/bevy/labels/C-Feature","name":"C-Feature","color":"b8b8b8","default":false,"description":"A new feature, making something new possible"},{"id":2045383863,"node_id":"MDU6TGFiZWwyMDQ1MzgzODYz","url":"https://api.github.com/repos/bevyengine/bevy/labels/A-Rendering","name":"A-Rendering","color":"C6A751","default":false,"description":"Drawing game state to the screen"},{"id":6905405310,"node_id":"LA_kwDODf6-U88AAAABm5gffg","url":"https://api.github.com/repos/bevyengine/bevy/labels/A-Color","name":"A-Color","color":"c6A751","default":false,"description":"Color spaces and color math"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/bevyengine/bevy/milestones/20","html_url":"https://github.com/bevyengine/bevy/milestone/20","labels_url":"https://api.github.com/repos/bevyengine/bevy/milestones/20/labels","id":10463467,"node_id":"MI_kwDODf6-U84An6jr","number":20,"title":"0.14","description":"","creator":{"login":"alice-i-cecile","id":3579909,"node_id":"MDQ6VXNlcjM1Nzk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3579909?v=4","gravatar_id":"","url":"https://api.github.com/users/alice-i-cecile","html_url":"https://github.com/alice-i-cecile","followers_url":"https://api.github.com/users/alice-i-cecile/followers","following_url":"https://api.github.com/users/alice-i-cecile/following{/other_user}","gists_url":"https://api.github.com/users/alice-i-cecile/gists{/gist_id}","starred_url":"https://api.github.com/users/alice-i-cecile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alice-i-cecile/subscriptions","organizations_url":"https://api.github.com/users/alice-i-cecile/orgs","repos_url":"https://api.github.com/users/alice-i-cecile/repos","events_url":"https://api.github.com/users/alice-i-cecile/events{/privacy}","received_events_url":"https://api.github.com/users/alice-i-cecile/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":404,"state":"closed","created_at":"2024-01-24T15:23:42Z","updated_at":"2024-07-04T20:09:44Z","due_on":null,"closed_at":"2024-07-04T20:09:44Z"},"comments":19,"created_at":"2024-02-22T23:13:09Z","updated_at":"2024-05-03T20:28:33Z","closed_at":"2024-02-29T19:50:14Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"This ticket outlines a plan for integrating bevy_color into the rest of Bevy. The plan consists of several phases.\r\n\r\n## Phase 1\r\n\r\nIn Phase 1, the public-facing Bevy APIs will not be changed, but the bevy_color crate will be integrated in ways that do not impact end users. During this phase, the following tasks will be performed:\r\n\r\n* Refine and enhance the bevy_color crate with additional features, such as fluent builder methods.\r\n* Do a mass renaming of the existing `Color` type to `LegacyColor`, and then provide a type alias `Color = LegacyColor`. The purpose of this change is to allow measurement of the migration progress by searching for the symbol `LegacyColor`. Because of the type alias, no end-user code will be broken. This step should be performed by an SME so that it can be done atomically, minimizing merge conflicts with any in-flight PRs that might be impacted.\r\n* Replace internal uses of `LegacyColor` that are not exposed to end users, especially constant color values (I counted 601 color constants in the current code base).\r\n* Color conversion functions in bevy_render will be moved to bevy_color. What we want to end up with is a one-way dependency such that render depends on color, and not the other way around.\r\n* We may also want to move the `From` implementations for `LegacyColor` into the same module as `LegacyColor`.\r\n\r\n## Phase 2\r\n\r\nIn Phase 2, we will modify Bevy APIs, but only the ones that can be modified in a backwards-compatible way. For example, the Gizmo APIs which accept a `LegacyColor` argument can be changed to accept `impl Into<LinearRgba>`, allowing either the old or new color types to be passed in without needing to call `.into()`.\r\n\r\nAlso during this phase, we'll add new APIs for bundle types such as `Fog` or `BackgroundColor` which currently accept a `LegacyColor` as a property - the new APIs will have constructors that take an `impl Into<LinearRgba>`. This means that users who want to use the new color types can do so in a forward-compatible way.\r\n\r\n## Phase 3\r\n\r\nIn Phase 3, the remaining APIs - the ones that cannot be made backwards compatible - will be migrated. This includes things like bundle properties. In most cases, low-level color attributes will use the `LinearRgba` type.\r\n\r\nUsers will need to update their code, at minimum adding a call to `.into()` when passing a legacy color into an API that accepts the new color types.\r\n\r\n## Timing\r\n\r\nI'm assuming that these three phases will be spread out over several Bevy release cycles. The reason for this is that we'll want to give users plenty of warning that this breaking change is coming. However, this decision - whether to try and fit all of the migration into a single Bevy release cycle or not - is above my pay grade.\r\n","closed_by":{"login":"alice-i-cecile","id":3579909,"node_id":"MDQ6VXNlcjM1Nzk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3579909?v=4","gravatar_id":"","url":"https://api.github.com/users/alice-i-cecile","html_url":"https://github.com/alice-i-cecile","followers_url":"https://api.github.com/users/alice-i-cecile/followers","following_url":"https://api.github.com/users/alice-i-cecile/following{/other_user}","gists_url":"https://api.github.com/users/alice-i-cecile/gists{/gist_id}","starred_url":"https://api.github.com/users/alice-i-cecile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alice-i-cecile/subscriptions","organizations_url":"https://api.github.com/users/alice-i-cecile/orgs","repos_url":"https://api.github.com/users/alice-i-cecile/repos","events_url":"https://api.github.com/users/alice-i-cecile/events{/privacy}","received_events_url":"https://api.github.com/users/alice-i-cecile/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/12056/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bevyengine/bevy/issues/12056/timeline","performed_via_github_app":null,"state_reason":"completed"}