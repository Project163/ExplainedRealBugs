{"url":"https://api.github.com/repos/bevyengine/bevy/issues/13235","repository_url":"https://api.github.com/repos/bevyengine/bevy","labels_url":"https://api.github.com/repos/bevyengine/bevy/issues/13235/labels{/name}","comments_url":"https://api.github.com/repos/bevyengine/bevy/issues/13235/comments","events_url":"https://api.github.com/repos/bevyengine/bevy/issues/13235/events","html_url":"https://github.com/bevyengine/bevy/issues/13235","id":2279105558,"node_id":"I_kwDODf6-U86H2GQW","number":13235,"title":"Bevy panics when running empty scene","user":{"login":"s-puig","id":39652109,"node_id":"MDQ6VXNlcjM5NjUyMTA5","avatar_url":"https://avatars.githubusercontent.com/u/39652109?v=4","gravatar_id":"","url":"https://api.github.com/users/s-puig","html_url":"https://github.com/s-puig","followers_url":"https://api.github.com/users/s-puig/followers","following_url":"https://api.github.com/users/s-puig/following{/other_user}","gists_url":"https://api.github.com/users/s-puig/gists{/gist_id}","starred_url":"https://api.github.com/users/s-puig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s-puig/subscriptions","organizations_url":"https://api.github.com/users/s-puig/orgs","repos_url":"https://api.github.com/users/s-puig/repos","events_url":"https://api.github.com/users/s-puig/events{/privacy}","received_events_url":"https://api.github.com/users/s-puig/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1795619323,"node_id":"MDU6TGFiZWwxNzk1NjE5MzIz","url":"https://api.github.com/repos/bevyengine/bevy/labels/C-Bug","name":"C-Bug","color":"d73a4a","default":false,"description":"An unexpected or incorrect behavior"},{"id":2045383863,"node_id":"MDU6TGFiZWwyMDQ1MzgzODYz","url":"https://api.github.com/repos/bevyengine/bevy/labels/A-Rendering","name":"A-Rendering","color":"C6A751","default":false,"description":"Drawing game state to the screen"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/bevyengine/bevy/milestones/20","html_url":"https://github.com/bevyengine/bevy/milestone/20","labels_url":"https://api.github.com/repos/bevyengine/bevy/milestones/20/labels","id":10463467,"node_id":"MI_kwDODf6-U84An6jr","number":20,"title":"0.14","description":"","creator":{"login":"alice-i-cecile","id":3579909,"node_id":"MDQ6VXNlcjM1Nzk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3579909?v=4","gravatar_id":"","url":"https://api.github.com/users/alice-i-cecile","html_url":"https://github.com/alice-i-cecile","followers_url":"https://api.github.com/users/alice-i-cecile/followers","following_url":"https://api.github.com/users/alice-i-cecile/following{/other_user}","gists_url":"https://api.github.com/users/alice-i-cecile/gists{/gist_id}","starred_url":"https://api.github.com/users/alice-i-cecile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alice-i-cecile/subscriptions","organizations_url":"https://api.github.com/users/alice-i-cecile/orgs","repos_url":"https://api.github.com/users/alice-i-cecile/repos","events_url":"https://api.github.com/users/alice-i-cecile/events{/privacy}","received_events_url":"https://api.github.com/users/alice-i-cecile/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":404,"state":"closed","created_at":"2024-01-24T15:23:42Z","updated_at":"2024-07-04T20:09:44Z","due_on":null,"closed_at":"2024-07-04T20:09:44Z"},"comments":0,"created_at":"2024-05-04T16:36:29Z","updated_at":"2024-05-05T22:30:24Z","closed_at":"2024-05-05T22:30:24Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Bevy version\r\n\r\nmain\r\n\r\n## \\[Optional\\] Relevant system information\r\n\r\n\r\n```ignore\r\nSystemInfo { os: \"Linux 23.10 Ubuntu\", kernel: \"6.5.0-28-generic\", cpu: \"Intel(R) Core(TM) i5-4670K CPU @ 3.40GHz\", core_count: \"4\", memory: \"23.3 GiB\" }\r\nAdapterInfo { name: \"AMD Radeon RX 580 Series (RADV POLARIS10)\", vendor: 4098, device: 26591, device_type: DiscreteGpu, driver: \"radv\", driver_info: \"Mesa 23.2.1-1ubuntu3.1\", backend: Vulkan }\r\n```\r\n\r\nHappens in both x11 and wayland.\r\n\r\n## What you did\r\n\r\nRun texture_atlas example.\r\n\r\n## What went wrong\r\n\r\nApp instantly panicked.\r\n\r\n## Additional information\r\n\r\nIsolated the problem to #12792\r\n\r\nTried to reproduce in a minimal environment and still crashed:\r\n\r\n```rs\r\nfn main() {\r\n    App::new()\r\n        .add_plugins(DefaultPlugins)\r\n        .run();\r\n}\r\n```\r\nMy guess is that it can't handle a scenario when there aren't any sprites to draw.\r\n\r\n<details>\r\n<summary>Logs</summary>\r\nthread 'Compute Task Pool (0)' panicked at /home/puig/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wgpu-0.19.4/src/backend/wgpu_core.rs:3006:5:\r\nwgpu error: Validation Error\r\n\r\nCaused by:\r\n    In Device::create_bind_group\r\n      note: label = `sprite_view_bind_group`\r\n    Bound buffer range 0..752 does not fit in buffer of size 0\r\n      note: buffer = `<Buffer-(7, 1, Vulkan)>`\r\n\r\n\r\nstack backtrace:\r\n   0: rust_begin_unwind\r\n             at /rustc/9b00956e56009bab2aa15d7bff10916599e3d6d6/library/std/src/panicking.rs:645:5\r\n   1: core::panicking::panic_fmt\r\n             at /rustc/9b00956e56009bab2aa15d7bff10916599e3d6d6/library/core/src/panicking.rs:72:14\r\n   2: wgpu::backend::wgpu_core::default_error_handler\r\n             at /home/puig/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wgpu-0.19.4/src/backend/wgpu_core.rs:3006:5\r\n   3: core::ops::function::Fn::call\r\n             at /rustc/9b00956e56009bab2aa15d7bff10916599e3d6d6/library/core/src/ops/function.rs:79:5\r\n   4: <alloc::boxed::Box<F,A> as core::ops::function::Fn<Args>>::call\r\n             at /rustc/9b00956e56009bab2aa15d7bff10916599e3d6d6/library/alloc/src/boxed.rs:2034:9\r\n   5: wgpu::backend::wgpu_core::ErrorSinkRaw::handle_error\r\n             at /home/puig/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wgpu-0.19.4/src/backend/wgpu_core.rs:2992:17\r\n   6: wgpu::backend::wgpu_core::ContextWgpuCore::handle_error\r\n             at /home/puig/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wgpu-0.19.4/src/backend/wgpu_core.rs:262:9\r\n   7: <wgpu::backend::wgpu_core::ContextWgpuCore as wgpu::context::Context>::device_create_bind_group\r\n             at /home/puig/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wgpu-0.19.4/src/backend/wgpu_core.rs:1040:13\r\n   8: <T as wgpu::context::DynContext>::device_create_bind_group\r\n             at /home/puig/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wgpu-0.19.4/src/context.rs:2236:13\r\n   9: wgpu::Device::create_bind_group\r\n             at /home/puig/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wgpu-0.19.4/src/lib.rs:2431:26\r\n  10: bevy_render::renderer::render_device::RenderDevice::create_bind_group\r\n             at ./crates/bevy_render/src/renderer/render_device.rs:95:31\r\n  11: bevy_sprite::render::prepare_sprites\r\n             at ./crates/bevy_sprite/src/render/mod.rs:559:44\r\n  12: core::ops::function::FnMut::call_mut\r\n             at /rustc/9b00956e56009bab2aa15d7bff10916599e3d6d6/library/core/src/ops/function.rs:166:5\r\n  13: core::ops::function::impls::<impl core::ops::function::FnMut<A> for &mut F>::call_mut\r\n             at /rustc/9b00956e56009bab2aa15d7bff10916599e3d6d6/library/core/src/ops/function.rs:294:13\r\n  14: <Func as bevy_ecs::system::function_system::SystemParamFunction<fn(F0,F1,F2,F3,F4,F5,F6,F7,F8,F9,F10,F11) .> Out>>::run::call_inner\r\n             at ./crates/bevy_ecs/src/system/function_system.rs:665:21\r\n  15: <Func as bevy_ecs::system::function_system::SystemParamFunction<fn(F0,F1,F2,F3,F4,F5,F6,F7,F8,F9,F10,F11) .> Out>>::run\r\n             at ./crates/bevy_ecs/src/system/function_system.rs:668:17\r\n  16: <bevy_ecs::system::function_system::FunctionSystem<Marker,F> as bevy_ecs::system::system::System>::run_unsafe\r\n             at ./crates/bevy_ecs/src/system/function_system.rs:507:19\r\nnote: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.\r\nEncountered a panic in system `bevy_sprite::render::prepare_sprites`!\r\n2024-05-04T16:18:20.544078Z ERROR wgpu::backend::wgpu_core: Handling wgpu errors as fatal by default    \r\nthread 'Compute Task Pool (1)' panicked at /home/puig/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wgpu-0.19.4/src/backend/wgpu_core.rs:3006:5:\r\nwgpu error: Validation Error\r\n\r\nCaused by:\r\n    In Device::create_bind_group\r\n      note: label = `ui_view_bind_group`\r\n    Bound buffer range 0..752 does not fit in buffer of size 0\r\n      note: buffer = `<Buffer-(7, 1, Vulkan)>`\r\n\r\n\r\nstack backtrace:\r\n   0: rust_begin_unwind\r\n             at /rustc/9b00956e56009bab2aa15d7bff10916599e3d6d6/library/std/src/panicking.rs:645:5\r\n   1: core::panicking::panic_fmt\r\n             at /rustc/9b00956e56009bab2aa15d7bff10916599e3d6d6/library/core/src/panicking.rs:72:14\r\n   2: wgpu::backend::wgpu_core::default_error_handler\r\n             at /home/puig/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wgpu-0.19.4/src/backend/wgpu_core.rs:3006:5\r\n   3: core::ops::function::Fn::call\r\n             at /rustc/9b00956e56009bab2aa15d7bff10916599e3d6d6/library/core/src/ops/function.rs:79:5\r\n   4: <alloc::boxed::Box<F,A> as core::ops::function::Fn<Args>>::call\r\n             at /rustc/9b00956e56009bab2aa15d7bff10916599e3d6d6/library/alloc/src/boxed.rs:2034:9\r\n   5: wgpu::backend::wgpu_core::ErrorSinkRaw::handle_error\r\n             at /home/puig/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wgpu-0.19.4/src/backend/wgpu_core.rs:2992:17\r\n   6: wgpu::backend::wgpu_core::ContextWgpuCore::handle_error\r\n             at /home/puig/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wgpu-0.19.4/src/backend/wgpu_core.rs:262:9\r\n   7: <wgpu::backend::wgpu_core::ContextWgpuCore as wgpu::context::Context>::device_create_bind_group\r\n             at /home/puig/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wgpu-0.19.4/src/backend/wgpu_core.rs:1040:13\r\n   8: <T as wgpu::context::DynContext>::device_create_bind_group\r\n             at /home/puig/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wgpu-0.19.4/src/context.rs:2236:13\r\n   9: wgpu::Device::create_bind_group\r\n             at /home/puig/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wgpu-0.19.4/src/lib.rs:2431:26\r\n  10: bevy_render::renderer::render_device::RenderDevice::create_bind_group\r\n             at ./crates/bevy_render/src/renderer/render_device.rs:95:31\r\n  11: bevy_ui::render::prepare_uinodes\r\n             at ./crates/bevy_ui/src/render/mod.rs:951:40\r\n  12: core::ops::function::FnMut::call_mut\r\n             at /rustc/9b00956e56009bab2aa15d7bff10916599e3d6d6/library/core/src/ops/function.rs:166:5\r\n  13: core::ops::function::impls::<impl core::ops::function::FnMut<A> for &mut F>::call_mut\r\n             at /rustc/9b00956e56009bab2aa15d7bff10916599e3d6d6/library/core/src/ops/function.rs:294:13\r\n  14: <Func as bevy_ecs::system::function_system::SystemParamFunction<fn(F0,F1,F2,F3,F4,F5,F6,F7,F8,F9,F10,F11) .> Out>>::run::call_inner\r\n             at ./crates/bevy_ecs/src/system/function_system.rs:665:21\r\n  15: <Func as bevy_ecs::system::function_system::SystemParamFunction<fn(F0,F1,F2,F3,F4,F5,F6,F7,F8,F9,F10,F11) .> Out>>::run\r\n             at ./crates/bevy_ecs/src/system/function_system.rs:668:17\r\n  16: <bevy_ecs::system::function_system::FunctionSystem<Marker,F> as bevy_ecs::system::system::System>::run_unsafe\r\n             at ./crates/bevy_ecs/src/system/function_system.rs:507:19\r\nnote: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.\r\nEncountered a panic in system `bevy_ui::render::prepare_uinodes`!\r\n2024-05-04T16:18:20.548270Z ERROR wgpu::backend::wgpu_core: Handling wgpu errors as fatal by default    \r\nthread 'main' panicked at /home/puig/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wgpu-0.19.4/src/backend/wgpu_core.rs:3006:5:\r\nwgpu error: Validation Error\r\n\r\nCaused by:\r\n    In Device::create_bind_group\r\n      note: label = `prepass_view_no_motion_vectors_bind_group`\r\n    Bound buffer range 0..752 does not fit in buffer of size 0\r\n      note: buffer = `<Buffer-(7, 1, Vulkan)>`\r\n\r\n\r\nstack backtrace:\r\n   0: rust_begin_unwind\r\n             at /rustc/9b00956e56009bab2aa15d7bff10916599e3d6d6/library/std/src/panicking.rs:645:5\r\n   1: core::panicking::panic_fmt\r\n             at /rustc/9b00956e56009bab2aa15d7bff10916599e3d6d6/library/core/src/panicking.rs:72:14\r\n   2: wgpu::backend::wgpu_core::default_error_handler\r\n             at /home/puig/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wgpu-0.19.4/src/backend/wgpu_core.rs:3006:5\r\n   3: core::ops::function::Fn::call\r\n             at /rustc/9b00956e56009bab2aa15d7bff10916599e3d6d6/library/core/src/ops/function.rs:79:5\r\n   4: <alloc::boxed::Box<F,A> as core::ops::function::Fn<Args>>::call\r\n             at /rustc/9b00956e56009bab2aa15d7bff10916599e3d6d6/library/alloc/src/boxed.rs:2034:9\r\n   5: wgpu::backend::wgpu_core::ErrorSinkRaw::handle_error\r\n             at /home/puig/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wgpu-0.19.4/src/backend/wgpu_core.rs:2992:17\r\n   6: wgpu::backend::wgpu_core::ContextWgpuCore::handle_error\r\n             at /home/puig/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wgpu-0.19.4/src/backend/wgpu_core.rs:262:9\r\n   7: <wgpu::backend::wgpu_core::ContextWgpuCore as wgpu::context::Context>::device_create_bind_group\r\n             at /home/puig/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wgpu-0.19.4/src/backend/wgpu_core.rs:1040:13\r\n   8: <T as wgpu::context::DynContext>::device_create_bind_group\r\n             at /home/puig/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wgpu-0.19.4/src/context.rs:2236:13\r\n   9: wgpu::Device::create_bind_group\r\n             at /home/puig/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wgpu-0.19.4/src/lib.rs:2431:26\r\n  10: bevy_render::renderer::render_device::RenderDevice::create_bind_group\r\n             at ./crates/bevy_render/src/renderer/render_device.rs:95:31\r\n  11: bevy_pbr::prepass::prepare_prepass_view_bind_group\r\n             at ./crates/bevy_pbr/src/prepass/mod.rs:679:58\r\n  12: core::ops::function::FnMut::call_mut\r\n             at /rustc/9b00956e56009bab2aa15d7bff10916599e3d6d6/library/core/src/ops/function.rs:166:5\r\n  13: core::ops::function::impls::<impl core::ops::function::FnMut<A> for &mut F>::call_mut\r\n             at /rustc/9b00956e56009bab2aa15d7bff10916599e3d6d6/library/core/src/ops/function.rs:294:13\r\n  14: <Func as bevy_ecs::system::function_system::SystemParamFunction<fn(F0,F1,F2,F3,F4,F5) .> Out>>::run::call_inner\r\n             at ./crates/bevy_ecs/src/system/function_system.rs:665:21\r\n  15: <Func as bevy_ecs::system::function_system::SystemParamFunction<fn(F0,F1,F2,F3,F4,F5) .> Out>>::run\r\n             at ./crates/bevy_ecs/src/system/function_system.rs:668:17\r\n  16: <bevy_ecs::system::function_system::FunctionSystem<Marker,F> as bevy_ecs::system::system::System>::run_unsafe\r\n             at ./crates/bevy_ecs/src/system/function_system.rs:507:19\r\nnote: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.\r\nEncountered a panic in system `bevy_pbr::prepass::prepare_prepass_view_bind_group<bevy_pbr::pbr_material::StandardMaterial>`!\r\n</details>\r\n","closed_by":{"login":"mockersf","id":8672791,"node_id":"MDQ6VXNlcjg2NzI3OTE=","avatar_url":"https://avatars.githubusercontent.com/u/8672791?v=4","gravatar_id":"","url":"https://api.github.com/users/mockersf","html_url":"https://github.com/mockersf","followers_url":"https://api.github.com/users/mockersf/followers","following_url":"https://api.github.com/users/mockersf/following{/other_user}","gists_url":"https://api.github.com/users/mockersf/gists{/gist_id}","starred_url":"https://api.github.com/users/mockersf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mockersf/subscriptions","organizations_url":"https://api.github.com/users/mockersf/orgs","repos_url":"https://api.github.com/users/mockersf/repos","events_url":"https://api.github.com/users/mockersf/events{/privacy}","received_events_url":"https://api.github.com/users/mockersf/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/13235/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bevyengine/bevy/issues/13235/timeline","performed_via_github_app":null,"state_reason":"completed"}