{"url":"https://api.github.com/repos/bevyengine/bevy/issues/19626","repository_url":"https://api.github.com/repos/bevyengine/bevy","labels_url":"https://api.github.com/repos/bevyengine/bevy/issues/19626/labels{/name}","comments_url":"https://api.github.com/repos/bevyengine/bevy/issues/19626/comments","events_url":"https://api.github.com/repos/bevyengine/bevy/issues/19626/events","html_url":"https://github.com/bevyengine/bevy/issues/19626","id":3144277434,"node_id":"I_kwDODf6-U867ad26","number":19626,"title":"Directional lights ignore walls on WebGPU when the camera is too parallel to them","user":{"login":"janhohenheim","id":9047632,"node_id":"MDQ6VXNlcjkwNDc2MzI=","avatar_url":"https://avatars.githubusercontent.com/u/9047632?v=4","gravatar_id":"","url":"https://api.github.com/users/janhohenheim","html_url":"https://github.com/janhohenheim","followers_url":"https://api.github.com/users/janhohenheim/followers","following_url":"https://api.github.com/users/janhohenheim/following{/other_user}","gists_url":"https://api.github.com/users/janhohenheim/gists{/gist_id}","starred_url":"https://api.github.com/users/janhohenheim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janhohenheim/subscriptions","organizations_url":"https://api.github.com/users/janhohenheim/orgs","repos_url":"https://api.github.com/users/janhohenheim/repos","events_url":"https://api.github.com/users/janhohenheim/events{/privacy}","received_events_url":"https://api.github.com/users/janhohenheim/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1795619323,"node_id":"MDU6TGFiZWwxNzk1NjE5MzIz","url":"https://api.github.com/repos/bevyengine/bevy/labels/C-Bug","name":"C-Bug","color":"d73a4a","default":false,"description":"An unexpected or incorrect behavior"},{"id":2045383863,"node_id":"MDU6TGFiZWwyMDQ1MzgzODYz","url":"https://api.github.com/repos/bevyengine/bevy/labels/A-Rendering","name":"A-Rendering","color":"C6A751","default":false,"description":"Drawing game state to the screen"},{"id":2351483673,"node_id":"MDU6TGFiZWwyMzUxNDgzNjcz","url":"https://api.github.com/repos/bevyengine/bevy/labels/O-Web","name":"O-Web","color":"2e6991","default":false,"description":"Specific to web (WASM) builds"},{"id":5795668713,"node_id":"LA_kwDODf6-U88AAAABWXLi6Q","url":"https://api.github.com/repos/bevyengine/bevy/labels/O-WebGPU","name":"O-WebGPU","color":"2E6991","default":false,"description":"Specific to the WebGPU render API"},{"id":6899591173,"node_id":"LA_kwDODf6-U88AAAABmz9oBQ","url":"https://api.github.com/repos/bevyengine/bevy/labels/S-Waiting-on-Author","name":"S-Waiting-on-Author","color":"D876E3","default":false,"description":"The author needs to make changes or address concerns before this can be merged"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/bevyengine/bevy/milestones/32","html_url":"https://github.com/bevyengine/bevy/milestone/32","labels_url":"https://api.github.com/repos/bevyengine/bevy/milestones/32/labels","id":12377016,"node_id":"MI_kwDODf6-U84AvNu4","number":32,"title":"0.17","description":"","creator":{"login":"alice-i-cecile","id":3579909,"node_id":"MDQ6VXNlcjM1Nzk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3579909?v=4","gravatar_id":"","url":"https://api.github.com/users/alice-i-cecile","html_url":"https://github.com/alice-i-cecile","followers_url":"https://api.github.com/users/alice-i-cecile/followers","following_url":"https://api.github.com/users/alice-i-cecile/following{/other_user}","gists_url":"https://api.github.com/users/alice-i-cecile/gists{/gist_id}","starred_url":"https://api.github.com/users/alice-i-cecile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alice-i-cecile/subscriptions","organizations_url":"https://api.github.com/users/alice-i-cecile/orgs","repos_url":"https://api.github.com/users/alice-i-cecile/repos","events_url":"https://api.github.com/users/alice-i-cecile/events{/privacy}","received_events_url":"https://api.github.com/users/alice-i-cecile/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":584,"state":"closed","created_at":"2025-02-24T21:56:04Z","updated_at":"2025-09-30T22:33:43Z","due_on":null,"closed_at":"2025-09-30T22:33:43Z"},"comments":5,"created_at":"2025-06-13T17:39:36Z","updated_at":"2025-08-02T17:29:49Z","closed_at":"2025-08-02T17:29:48Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Bevy version\n\n0.16.2\n\n## Relevant system information\n\nUsing Google Chrome: Version 137.0.7151.68 (Official Build) (64-bit)\n\n```ignore\nAdapterInfo { name: \"\", vendor: 0, device: 0, device_type: Other, driver: \"\", driver_info: \"\", backend: BrowserWebGpu }\n```\n\nNote this *only* happens on WebGPU\n\n## What you did\n\n```rust\nuse bevy::{color::palettes::tailwind, pbr::CascadeShadowConfigBuilder, prelude::*};\n\nfn main() -> AppExit {\n    App::new()\n        .add_plugins(DefaultPlugins)\n        .add_systems(Startup, setup)\n        .add_systems(Update, rotate_camera)\n        .run()\n}\n\nfn setup(\n    mut commands: Commands,\n    mut meshes: ResMut<Assets<Mesh>>,\n    mut materials: ResMut<Assets<StandardMaterial>>,\n) {\n    let ground_material = materials.add(StandardMaterial {\n        base_color: Color::from(tailwind::RED_400),\n        ..default()\n    });\n    let wall_material = materials.add(StandardMaterial {\n        base_color: Color::from(tailwind::BLUE_400),\n        ..default()\n    });\n    \n    // Light\n    commands.spawn((\n        DirectionalLight {\n            illuminance: 5_000.0,\n            shadows_enabled: true,\n            ..default()\n        },\n        CascadeShadowConfigBuilder {\n            num_cascades: 1,\n            ..default()\n        }\n        .build(),\n        Transform::from_xyz(0.0, 5.0, -8.0).looking_at(Vec3::ZERO, Vec3::Y),\n    ));\n\n    // Ground\n    commands.spawn((\n        Transform::from_xyz(0.0, 0.0, 0.0),\n        Mesh3d(meshes.add(Plane3d::new(Vec3::Y, Vec2::splat(10.0)))),\n        MeshMaterial3d(ground_material.clone()),\n    ));\n\n    // Wall\n    commands.spawn((\n        Transform::from_xyz(0.0, 1.0, -4.0),\n        Mesh3d(meshes.add(Cuboid::new(10.0, 15.0, 0.5))),\n        MeshMaterial3d(wall_material.clone()),\n    ));\n\n    // Camera\n    commands.spawn((Camera3d::default(), Transform::from_xyz(0.0, 1.0, 0.0)));\n}\n\nfn rotate_camera(mut camera: Single<&mut Transform, With<Camera>>, time: Res<Time>) {\n    camera.rotate_y(time.delta_secs() * 1.5);\n}\n```\n\n## What went wrong\n\nnative:\n\nhttps://github.com/user-attachments/assets/33e26e18-e6cb-4320-990b-6c32ee3f63d7\n\nweb:\n\nhttps://github.com/user-attachments/assets/6e72f302-7031-4176-bd86-a014bcc6eba8\n\nThe issue gets worse with increased shadow cascades, but it's hard to notice on the minimal example. So let's look at [Chainboom](https://janhohenheim.itch.io/boomchain).\n\nIn Chainboom using the default shadow cascade config (4 I believe):\n\nhttps://github.com/user-attachments/assets/c7afadc5-4648-4244-ac25-29efcf446e1e\n\nIn Chainboom using only a single shadow cascade:\n\nhttps://github.com/user-attachments/assets/d125e3d0-9415-49bd-92c8-fbf13e1a8e1c\n\n## Additional information\n\nOur workaround for Chainboom was to simply disable the directional light if it would start causing trouble, as a workaround.","closed_by":{"login":"mockersf","id":8672791,"node_id":"MDQ6VXNlcjg2NzI3OTE=","avatar_url":"https://avatars.githubusercontent.com/u/8672791?v=4","gravatar_id":"","url":"https://api.github.com/users/mockersf","html_url":"https://github.com/mockersf","followers_url":"https://api.github.com/users/mockersf/followers","following_url":"https://api.github.com/users/mockersf/following{/other_user}","gists_url":"https://api.github.com/users/mockersf/gists{/gist_id}","starred_url":"https://api.github.com/users/mockersf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mockersf/subscriptions","organizations_url":"https://api.github.com/users/mockersf/orgs","repos_url":"https://api.github.com/users/mockersf/repos","events_url":"https://api.github.com/users/mockersf/events{/privacy}","received_events_url":"https://api.github.com/users/mockersf/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/19626/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bevyengine/bevy/issues/19626/timeline","performed_via_github_app":null,"state_reason":"completed"}