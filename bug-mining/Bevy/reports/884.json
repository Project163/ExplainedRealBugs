{"url":"https://api.github.com/repos/bevyengine/bevy/issues/19692","repository_url":"https://api.github.com/repos/bevyengine/bevy","labels_url":"https://api.github.com/repos/bevyengine/bevy/issues/19692/labels{/name}","comments_url":"https://api.github.com/repos/bevyengine/bevy/issues/19692/comments","events_url":"https://api.github.com/repos/bevyengine/bevy/issues/19692/events","html_url":"https://github.com/bevyengine/bevy/issues/19692","id":3153445856,"node_id":"I_kwDODf6-U8679cPg","number":19692,"title":"(UI) picking unexpectedly triggers outside the viewport","user":{"login":"jannik4","id":50554200,"node_id":"MDQ6VXNlcjUwNTU0MjAw","avatar_url":"https://avatars.githubusercontent.com/u/50554200?v=4","gravatar_id":"","url":"https://api.github.com/users/jannik4","html_url":"https://github.com/jannik4","followers_url":"https://api.github.com/users/jannik4/followers","following_url":"https://api.github.com/users/jannik4/following{/other_user}","gists_url":"https://api.github.com/users/jannik4/gists{/gist_id}","starred_url":"https://api.github.com/users/jannik4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jannik4/subscriptions","organizations_url":"https://api.github.com/users/jannik4/orgs","repos_url":"https://api.github.com/users/jannik4/repos","events_url":"https://api.github.com/users/jannik4/events{/privacy}","received_events_url":"https://api.github.com/users/jannik4/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1795619323,"node_id":"MDU6TGFiZWwxNzk1NjE5MzIz","url":"https://api.github.com/repos/bevyengine/bevy/labels/C-Bug","name":"C-Bug","color":"d73a4a","default":false,"description":"An unexpected or incorrect behavior"},{"id":3166151441,"node_id":"MDU6TGFiZWwzMTY2MTUxNDQx","url":"https://api.github.com/repos/bevyengine/bevy/labels/S-Ready-For-Implementation","name":"S-Ready-For-Implementation","color":"D876E3","default":false,"description":"This issue is ready for an implementation PR. Go for it!"},{"id":6899576022,"node_id":"LA_kwDODf6-U88AAAABmz8s1g","url":"https://api.github.com/repos/bevyengine/bevy/labels/D-Modest","name":"D-Modest","color":"008672","default":false,"description":"A \"normal\" level of difficulty; suitable for simple features or challenging fixes"},{"id":7040334053,"node_id":"LA_kwDODf6-U88AAAABo6L45Q","url":"https://api.github.com/repos/bevyengine/bevy/labels/A-Picking","name":"A-Picking","color":"c6A751","default":false,"description":"Pointing at and selecting objects of all sorts"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2025-06-17T13:05:35Z","updated_at":"2025-06-30T23:06:39Z","closed_at":"2025-06-30T23:06:39Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Bevy version\n\n- Bevy 0.16.1\n- main ([2078137](https://github.com/bevyengine/bevy/tree/20781371e8022421a2d544e217f266360b7c8e5e))\n\n## What you did\n\nDrag a UI node outside of the viewport. I would then expect that I can not click/drag this node anymore.\n\n## What went wrong\n\nClicking/Start dragging works outside of the viewport.\n\n## Code\n\n<details>\n<summary>Click to expand code</summary>\n\n```rust\nuse bevy::{\n    prelude::*, render::camera::Viewport, window::SystemCursorIcon, winit::cursor::CursorIcon,\n};\n\nfn main() -> AppExit {\n    App::new()\n        .add_plugins(DefaultPlugins)\n        .add_systems(Startup, setup)\n        .insert_resource(ClearColor(Color::BLACK))\n        .run()\n}\n\nfn setup(mut commands: Commands, window: Single<&Window>) {\n    commands.spawn((\n        Camera2d,\n        Camera {\n            clear_color: ClearColorConfig::Custom(Color::WHITE),\n            viewport: Some(Viewport {\n                physical_position: UVec2::ZERO,\n                physical_size: UVec2::new(window.physical_width() / 2, window.physical_height()),\n                ..default()\n            }),\n            ..default()\n        },\n    ));\n\n    commands\n        .spawn((\n            Node {\n                top: Val::Px(100.0),\n                left: Val::Px(100.0),\n                width: Val::Px(200.0),\n                height: Val::Px(200.0),\n                ..default()\n            },\n            BackgroundColor(Color::srgb(1.0, 0.0, 0.0)),\n        ))\n        .observe(|trigger: On<Pointer<Drag>>, mut node: Query<&mut Node>| {\n            let mut node = node.get_mut(trigger.target()).unwrap();\n            node.left = Val::Px(px(node.left) + trigger.delta.x);\n            node.top = Val::Px(px(node.top) + trigger.delta.y);\n        })\n        .observe(\n            |_: On<Pointer<DragStart>>,\n             window: Single<Entity, With<Window>>,\n             mut commands: Commands| {\n                commands\n                    .entity(*window)\n                    .insert(CursorIcon::from(SystemCursorIcon::Grabbing));\n            },\n        )\n        .observe(\n            |_: On<Pointer<DragEnd>>,\n             window: Single<Entity, With<Window>>,\n             mut commands: Commands| {\n                commands.entity(*window).remove::<CursorIcon>();\n            },\n        );\n}\n\nfn px(val: Val) -> f32 {\n    match val {\n        Val::Px(px) => px,\n        _ => 0.0,\n    }\n}\n```\n</details>\n\n## Video\n\n(White is the viewport of the camera)\n\nhttps://github.com/user-attachments/assets/2ca729f9-d90a-4cca-8228-903a7b1995ab\n\n## Additional information\n\nI don't know if this is specific to UI or also happens on other picking backends.","closed_by":{"login":"alice-i-cecile","id":3579909,"node_id":"MDQ6VXNlcjM1Nzk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3579909?v=4","gravatar_id":"","url":"https://api.github.com/users/alice-i-cecile","html_url":"https://github.com/alice-i-cecile","followers_url":"https://api.github.com/users/alice-i-cecile/followers","following_url":"https://api.github.com/users/alice-i-cecile/following{/other_user}","gists_url":"https://api.github.com/users/alice-i-cecile/gists{/gist_id}","starred_url":"https://api.github.com/users/alice-i-cecile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alice-i-cecile/subscriptions","organizations_url":"https://api.github.com/users/alice-i-cecile/orgs","repos_url":"https://api.github.com/users/alice-i-cecile/repos","events_url":"https://api.github.com/users/alice-i-cecile/events{/privacy}","received_events_url":"https://api.github.com/users/alice-i-cecile/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/19692/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bevyengine/bevy/issues/19692/timeline","performed_via_github_app":null,"state_reason":"completed"}