{"url":"https://api.github.com/repos/bevyengine/bevy/issues/14084","repository_url":"https://api.github.com/repos/bevyengine/bevy","labels_url":"https://api.github.com/repos/bevyengine/bevy/issues/14084/labels{/name}","comments_url":"https://api.github.com/repos/bevyengine/bevy/issues/14084/comments","events_url":"https://api.github.com/repos/bevyengine/bevy/issues/14084/events","html_url":"https://github.com/bevyengine/bevy/issues/14084","id":2382511533,"node_id":"I_kwDODf6-U86OAj2t","number":14084,"title":"Improve observers documentation","user":{"login":"cBournhonesque","id":8112632,"node_id":"MDQ6VXNlcjgxMTI2MzI=","avatar_url":"https://avatars.githubusercontent.com/u/8112632?v=4","gravatar_id":"","url":"https://api.github.com/users/cBournhonesque","html_url":"https://github.com/cBournhonesque","followers_url":"https://api.github.com/users/cBournhonesque/followers","following_url":"https://api.github.com/users/cBournhonesque/following{/other_user}","gists_url":"https://api.github.com/users/cBournhonesque/gists{/gist_id}","starred_url":"https://api.github.com/users/cBournhonesque/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cBournhonesque/subscriptions","organizations_url":"https://api.github.com/users/cBournhonesque/orgs","repos_url":"https://api.github.com/users/cBournhonesque/repos","events_url":"https://api.github.com/users/cBournhonesque/events{/privacy}","received_events_url":"https://api.github.com/users/cBournhonesque/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1795619324,"node_id":"MDU6TGFiZWwxNzk1NjE5MzI0","url":"https://api.github.com/repos/bevyengine/bevy/labels/C-Docs","name":"C-Docs","color":"B8b8b8","default":false,"description":"An addition or correction to our documentation"},{"id":2197761682,"node_id":"MDU6TGFiZWwyMTk3NzYxNjgy","url":"https://api.github.com/repos/bevyengine/bevy/labels/A-ECS","name":"A-ECS","color":"c6a751","default":false,"description":"Entities, components, systems, and events"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-07-01T00:04:04Z","updated_at":"2025-06-11T22:23:12Z","closed_at":"2025-06-11T22:23:12Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Observers is a super cool new feature, but I think there might be some gaps currently in the documentation around them, especially w.r.t when to use observers vs events.\n\nA quick list of things to mention:\n\n- [x] Explain that an observer system needs to have `Trigger` in the first position of the SystemParam list, but otherwise it's the same as another system (actually it's mentioned here already: https://github.com/bevyengine/bevy/blob/main/crates/bevy_ecs/src/observer/runner.rs#L152-L152)\n\n- [x] Make the distinction between the `OnAdd` and `OnInsert` triggers more clear. Also explain that `OnInsert` only happens if a new version of the component is inserted on the entity; it is not triggered if the component is simply mutated\n\n- [ ] Observer vs events:\n  - maybe mention that observers/EventReaders are basically two ways to react to events. One is more push-based and the other pull-based\n  - explain that one of the key strengths of observers systems is that they only run when the event is triggered. This can be more performant than having a system run every frame and read events from a `EventReader`. In the case where the events are emitted infrequently, the system is scheduled every frame but would often do nothing, whereas the observer systems only runs when the event is actually triggered. Conversely, if an event is triggered multiple times every frame, it is more efficient to have a system that reads all buffered events from `EventReader` than to trigger the observer system individually for each event. (we need benchmarks to compare the two)\n  \n - [ ] Maybe better explain the concept of the observer target?\n The trigger is an `Event` which can target optionally for one or more entities, one or more components. I feel like the docs on `TriggerTargets` and `TriggerEvent` are pretty light, whereas the concepts are not that straightforward.\n I think this is the part that needs the most work. For example I see in the code that `Vec<ComponentId>` can be a target, but then it seems like each observer actually only fires for at most 1 componentId. (see https://github.com/bevyengine/bevy/blob/main/crates/bevy_ecs/src/observer/mod.rs#L135-L135)\n \n - [ ] Clarify how to access component data from the trigger. Is it this function? https://github.com/bevyengine/bevy/blob/main/crates/bevy_ecs/src/observer/mod.rs#L51\n \n \n - [ ] There's a lot of questions on discord about observers vs hooks, and observer order\n \n - [ ] Users could more or less not worry at all about applying the command buffers since the `apply_command_buffers` system was added automatically in the schedule if there is an ordering dependency between systems that use Commands. It is not really true anymore, with observers you have to think about:\n\n   - applying command_buffers after calls to `commands.trigger(event)` to make sure that the observers are triggered\n   - applying command_buffers after the observer triggers so that any commands buffered by the observer are applied. \n \n - [ ] Clarify current observer limitations:\n   - can't update an observers component or entity targets after the observer has been spawned","closed_by":{"login":"alice-i-cecile","id":3579909,"node_id":"MDQ6VXNlcjM1Nzk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3579909?v=4","gravatar_id":"","url":"https://api.github.com/users/alice-i-cecile","html_url":"https://github.com/alice-i-cecile","followers_url":"https://api.github.com/users/alice-i-cecile/followers","following_url":"https://api.github.com/users/alice-i-cecile/following{/other_user}","gists_url":"https://api.github.com/users/alice-i-cecile/gists{/gist_id}","starred_url":"https://api.github.com/users/alice-i-cecile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alice-i-cecile/subscriptions","organizations_url":"https://api.github.com/users/alice-i-cecile/orgs","repos_url":"https://api.github.com/users/alice-i-cecile/repos","events_url":"https://api.github.com/users/alice-i-cecile/events{/privacy}","received_events_url":"https://api.github.com/users/alice-i-cecile/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/14084/reactions","total_count":14,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":11,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bevyengine/bevy/issues/14084/timeline","performed_via_github_app":null,"state_reason":"completed"}