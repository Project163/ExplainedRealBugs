{"url":"https://api.github.com/repos/bevyengine/bevy/issues/18461","repository_url":"https://api.github.com/repos/bevyengine/bevy","labels_url":"https://api.github.com/repos/bevyengine/bevy/issues/18461/labels{/name}","comments_url":"https://api.github.com/repos/bevyengine/bevy/issues/18461/comments","events_url":"https://api.github.com/repos/bevyengine/bevy/issues/18461/events","html_url":"https://github.com/bevyengine/bevy/issues/18461","id":2938229814,"node_id":"I_kwDODf6-U86vIdQ2","number":18461,"title":"`file_watcher` feature does not work correctly","user":{"login":"eckz","id":567737,"node_id":"MDQ6VXNlcjU2NzczNw==","avatar_url":"https://avatars.githubusercontent.com/u/567737?v=4","gravatar_id":"","url":"https://api.github.com/users/eckz","html_url":"https://github.com/eckz","followers_url":"https://api.github.com/users/eckz/followers","following_url":"https://api.github.com/users/eckz/following{/other_user}","gists_url":"https://api.github.com/users/eckz/gists{/gist_id}","starred_url":"https://api.github.com/users/eckz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eckz/subscriptions","organizations_url":"https://api.github.com/users/eckz/orgs","repos_url":"https://api.github.com/users/eckz/repos","events_url":"https://api.github.com/users/eckz/events{/privacy}","received_events_url":"https://api.github.com/users/eckz/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1795619323,"node_id":"MDU6TGFiZWwxNzk1NjE5MzIz","url":"https://api.github.com/repos/bevyengine/bevy/labels/C-Bug","name":"C-Bug","color":"d73a4a","default":false,"description":"An unexpected or incorrect behavior"},{"id":2272055462,"node_id":"MDU6TGFiZWwyMjcyMDU1NDYy","url":"https://api.github.com/repos/bevyengine/bevy/labels/A-Assets","name":"A-Assets","color":"c6a751","default":false,"description":"Load files from disk to use for things like images, models, and sounds"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/bevyengine/bevy/milestones/28","html_url":"https://github.com/bevyengine/bevy/milestone/28","labels_url":"https://api.github.com/repos/bevyengine/bevy/milestones/28/labels","id":11655039,"node_id":"MI_kwDODf6-U84Asdd_","number":28,"title":"0.16","description":"","creator":{"login":"alice-i-cecile","id":3579909,"node_id":"MDQ6VXNlcjM1Nzk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3579909?v=4","gravatar_id":"","url":"https://api.github.com/users/alice-i-cecile","html_url":"https://github.com/alice-i-cecile","followers_url":"https://api.github.com/users/alice-i-cecile/followers","following_url":"https://api.github.com/users/alice-i-cecile/following{/other_user}","gists_url":"https://api.github.com/users/alice-i-cecile/gists{/gist_id}","starred_url":"https://api.github.com/users/alice-i-cecile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alice-i-cecile/subscriptions","organizations_url":"https://api.github.com/users/alice-i-cecile/orgs","repos_url":"https://api.github.com/users/alice-i-cecile/repos","events_url":"https://api.github.com/users/alice-i-cecile/events{/privacy}","received_events_url":"https://api.github.com/users/alice-i-cecile/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":558,"state":"closed","created_at":"2024-09-30T20:15:21Z","updated_at":"2025-04-25T13:01:43Z","due_on":null,"closed_at":"2025-04-25T13:01:43Z"},"comments":1,"created_at":"2025-03-21T12:17:54Z","updated_at":"2025-03-25T04:44:46Z","closed_at":"2025-03-25T04:44:46Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Bevy version\n\n`main (116484b37)`\n\n## Relevant system information\n\n```SystemInfo { os: \"macOS 14.7 Sonoma\", kernel: \"23.6.0\", cpu: \"Apple M1 Pro\", core_count: \"10\", memory: \"32.0 GiB\" }```\n\n`rust 1.85.1`\n\n\n## What you did\n\nRunning\n\n```\nRUST_BACKTRACE=full cargo run --package bevy --features=file_watcher --example scene\n```\n\n## What went wrong\n\nIf the file `load_scene_example.scn.ron` is getting modified the following exception is thrown in the console\n\n```\n\n2025-03-21T10:48:57.981886Z  INFO bevy_asset::server: Reloading scenes/load_scene_example-new.scn.ron because it has changed\n\nthread 'notify-rs debouncer loop' panicked at crates/bevy_asset/src/io/file/file_watcher.rs:265:58:\ncalled `Result::unwrap()` on an `Err` value: Os { code: 2, kind: NotFound, message: \"No such file or directory\" }\nstack backtrace:\n2025-03-21T10:49:08.655589Z  INFO bevy_asset::server: Reloading scenes/load_scene_example.scn.ron because it has changed\n   0:        0x1030dd068 - std::backtrace_rs::backtrace::libunwind::trace::h7f51f64da084d564\n                               at /rustc/4eb161250e340c8f48f66e2b929ef4a5bed7c181/library/std/src/../../backtrace/src/backtrace/libunwind.rs:116:5\n   1:        0x1030dd068 - std::backtrace_rs::backtrace::trace_unsynchronized::h0c7f623a469276df\n                               at /rustc/4eb161250e340c8f48f66e2b929ef4a5bed7c181/library/std/src/../../backtrace/src/backtrace/mod.rs:66:5\n   2:        0x1030dd068 - std::sys::backtrace::_print_fmt::hd4ebb49eee8ba9e9\n                               at /rustc/4eb161250e340c8f48f66e2b929ef4a5bed7c181/library/std/src/sys/backtrace.rs:66:9\n   3:        0x1030dd068 - <std::sys::backtrace::BacktraceLock::print::DisplayBacktrace as core::fmt::Display>::fmt::h4b01b56329a0a8fc\n                               at /rustc/4eb161250e340c8f48f66e2b929ef4a5bed7c181/library/std/src/sys/backtrace.rs:39:26\n   4:        0x1030f9b84 - core::fmt::rt::Argument::fmt::h06e9a80dc1e58715\n                               at /rustc/4eb161250e340c8f48f66e2b929ef4a5bed7c181/library/core/src/fmt/rt.rs:177:76\n   5:        0x1030f9b84 - core::fmt::write::h5ac783d2f16cae69\n                               at /rustc/4eb161250e340c8f48f66e2b929ef4a5bed7c181/library/core/src/fmt/mod.rs:1440:21\n   6:        0x1030d99ac - std::io::Write::write_fmt::h740ae8bf4425e1f4\n                               at /rustc/4eb161250e340c8f48f66e2b929ef4a5bed7c181/library/std/src/io/mod.rs:1887:15\n   7:        0x1030dcf1c - std::sys::backtrace::BacktraceLock::print::h822ac0a1da741b33\n                               at /rustc/4eb161250e340c8f48f66e2b929ef4a5bed7c181/library/std/src/sys/backtrace.rs:42:9\n   8:        0x1030de128 - std::panicking::default_hook::{{closure}}::h182e34e1427a763f\n                               at /rustc/4eb161250e340c8f48f66e2b929ef4a5bed7c181/library/std/src/panicking.rs:295:22\n   9:        0x1030ddf1c - std::panicking::default_hook::hf3c673ab0d652139\n                               at /rustc/4eb161250e340c8f48f66e2b929ef4a5bed7c181/library/std/src/panicking.rs:322:9\n  10:        0x1030deab4 - <alloc::boxed::Box<F,A> as core::ops::function::Fn<Args>>::call::h7a45b14880faeee7\n                               at /rustc/4eb161250e340c8f48f66e2b929ef4a5bed7c181/library/alloc/src/boxed.rs:2007:9\n  11:        0x1030deab4 - std::panicking::rust_panic_with_hook::ha68643d4311595e9\n                               at /rustc/4eb161250e340c8f48f66e2b929ef4a5bed7c181/library/std/src/panicking.rs:836:13\n  12:        0x1030de61c - std::panicking::begin_panic_handler::{{closure}}::h0edcf2e5c8ce9186\n                               at /rustc/4eb161250e340c8f48f66e2b929ef4a5bed7c181/library/std/src/panicking.rs:701:13\n  13:        0x1030dd528 - std::sys::backtrace::__rust_end_short_backtrace::h25049b070cf1a527\n                               at /rustc/4eb161250e340c8f48f66e2b929ef4a5bed7c181/library/std/src/sys/backtrace.rs:168:18\n  14:        0x1030de2d4 - rust_begin_unwind\n                               at /rustc/4eb161250e340c8f48f66e2b929ef4a5bed7c181/library/std/src/panicking.rs:692:5\n  15:        0x1031dfecc - core::panicking::panic_fmt::ha0b5c5252c2f1706\n                               at /rustc/4eb161250e340c8f48f66e2b929ef4a5bed7c181/library/core/src/panicking.rs:75:14\n  16:        0x1031e02b4 - core::result::unwrap_failed::h49b97238f5f454fc\n                               at /rustc/4eb161250e340c8f48f66e2b929ef4a5bed7c181/library/core/src/result.rs:1704:5\n  17:        0x1028d8aec - core::result::Result<T,E>::unwrap::h3d4a5d3eb6155d3f\n                               at /Users/eaarranz/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/result.rs:1109:23\n  18:        0x1028d8aec - <bevy_asset::io::file::file_watcher::FileEventHandler as bevy_asset::io::file::file_watcher::FilesystemEventHandler>::get_path::hafd7ed0005857064\n                               at /Volumes/code/rust/repos/bevy/crates/bevy_asset/src/io/file/file_watcher.rs:265:29\n  19:        0x102981344 - bevy_asset::io::file::file_watcher::new_asset_event_debouncer::{{closure}}::hf3426735c3b7736b\n                               at /Volumes/code/rust/repos/bevy/crates/bevy_asset/src/io/file/file_watcher.rs:205:61\n  20:        0x102981344 - <F as notify_debouncer_full::DebounceEventHandler>::handle_event::h1da6f0089f94eac7\n                               at /Users/eaarranz/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/notify-debouncer-full-0.5.0/src/lib.rs:124:9\n  21:        0x102975110 - notify_debouncer_full::new_debouncer_opt::{{closure}}::hc11ae12ee2845435\n                               at /Users/eaarranz/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/notify-debouncer-full-0.5.0/src/lib.rs:659:17\n  22:        0x102975110 - std::sys::backtrace::__rust_begin_short_backtrace::hb0d1558078618a9c\n                               at /Users/eaarranz/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/std/src/sys/backtrace.rs:152:18\n  23:        0x102907c78 - std::thread::Builder::spawn_unchecked_::{{closure}}::{{closure}}::hb460119a66d25da1\n                               at /Users/eaarranz/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/std/src/thread/mod.rs:564:17\n  24:        0x102907c78 - <core::panic::unwind_safe::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once::hfb2665febc3e57c6\n                               at /Users/eaarranz/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/panic/unwind_safe.rs:272:9\n  25:        0x102907c78 - std::panicking::try::do_call::h217ce2e595719a27\n                               at /Users/eaarranz/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/std/src/panicking.rs:584:40\n  26:        0x102907c78 - std::panicking::try::he4e47f07c55b9023\n                               at /Users/eaarranz/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/std/src/panicking.rs:547:19\n  27:        0x102907c78 - std::panic::catch_unwind::hf3105723ecd50d36\n                               at /Users/eaarranz/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/std/src/panic.rs:358:14\n  28:        0x102907c78 - std::thread::Builder::spawn_unchecked_::{{closure}}::h89decdd5d20150f1\n                               at /Users/eaarranz/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/std/src/thread/mod.rs:562:30\n  29:        0x102907c78 - core::ops::function::FnOnce::call_once{{vtable.shim}}::h8711e474e4689b9e\n                               at /Users/eaarranz/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/ops/function.rs:250:5\n  30:        0x1030e187c - <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once::h98145db6800904f2\n                               at /rustc/4eb161250e340c8f48f66e2b929ef4a5bed7c181/library/alloc/src/boxed.rs:1993:9\n  31:        0x1030e187c - <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once::hcd35def5feddfd9f\n                               at /rustc/4eb161250e340c8f48f66e2b929ef4a5bed7c181/library/alloc/src/boxed.rs:1993:9\n  32:        0x1030e187c - std::sys::pal::unix::thread::Thread::new::thread_start::hdb877a8060df0ba1\n                               at /rustc/4eb161250e340c8f48f66e2b929ef4a5bed7c181/library/std/src/sys/pal/unix/thread.rs:106:17\n  33:        0x192d4df94 - __pthread_joiner_wake\n2025-03-21T10:49:08.787728Z  INFO scene:   Entity(11)\n2025-03-21T10:49:08.787749Z  INFO scene:     ComponentA: { x: 1 y: 2 }\n\n2025-03-21T10:49:08.787753Z  INFO scene:   Entity(12)\n2025-03-21T10:49:08.787755Z  INFO scene:     ComponentA: { x: 3 y: 4 }\n```\n\nAnd from that moment, asset reloading stops working\n\nThis is not specific to this example, it fails for any type of assets, it's just the easiest way to reproduce.\n\n\n## Additional information\n\n\n- I've tested that in v.0.15.3, the issue is not there","closed_by":{"login":"alice-i-cecile","id":3579909,"node_id":"MDQ6VXNlcjM1Nzk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3579909?v=4","gravatar_id":"","url":"https://api.github.com/users/alice-i-cecile","html_url":"https://github.com/alice-i-cecile","followers_url":"https://api.github.com/users/alice-i-cecile/followers","following_url":"https://api.github.com/users/alice-i-cecile/following{/other_user}","gists_url":"https://api.github.com/users/alice-i-cecile/gists{/gist_id}","starred_url":"https://api.github.com/users/alice-i-cecile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alice-i-cecile/subscriptions","organizations_url":"https://api.github.com/users/alice-i-cecile/orgs","repos_url":"https://api.github.com/users/alice-i-cecile/repos","events_url":"https://api.github.com/users/alice-i-cecile/events{/privacy}","received_events_url":"https://api.github.com/users/alice-i-cecile/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/18461/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bevyengine/bevy/issues/18461/timeline","performed_via_github_app":null,"state_reason":"completed"}