{"url":"https://api.github.com/repos/bevyengine/bevy/issues/13384","repository_url":"https://api.github.com/repos/bevyengine/bevy","labels_url":"https://api.github.com/repos/bevyengine/bevy/issues/13384/labels{/name}","comments_url":"https://api.github.com/repos/bevyengine/bevy/issues/13384/comments","events_url":"https://api.github.com/repos/bevyengine/bevy/issues/13384/events","html_url":"https://github.com/bevyengine/bevy/issues/13384","id":2299197789,"node_id":"I_kwDODf6-U86JCvld","number":13384,"title":"Skewed output when changing resolution of new `headless_renderer` example","user":{"login":"cxreiff","id":8195503,"node_id":"MDQ6VXNlcjgxOTU1MDM=","avatar_url":"https://avatars.githubusercontent.com/u/8195503?v=4","gravatar_id":"","url":"https://api.github.com/users/cxreiff","html_url":"https://github.com/cxreiff","followers_url":"https://api.github.com/users/cxreiff/followers","following_url":"https://api.github.com/users/cxreiff/following{/other_user}","gists_url":"https://api.github.com/users/cxreiff/gists{/gist_id}","starred_url":"https://api.github.com/users/cxreiff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cxreiff/subscriptions","organizations_url":"https://api.github.com/users/cxreiff/orgs","repos_url":"https://api.github.com/users/cxreiff/repos","events_url":"https://api.github.com/users/cxreiff/events{/privacy}","received_events_url":"https://api.github.com/users/cxreiff/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1795619323,"node_id":"MDU6TGFiZWwxNzk1NjE5MzIz","url":"https://api.github.com/repos/bevyengine/bevy/labels/C-Bug","name":"C-Bug","color":"d73a4a","default":false,"description":"An unexpected or incorrect behavior"},{"id":2488007862,"node_id":"MDU6TGFiZWwyNDg4MDA3ODYy","url":"https://api.github.com/repos/bevyengine/bevy/labels/S-Needs-Triage","name":"S-Needs-Triage","color":"D876e3","default":false,"description":"This issue needs to be labelled"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2024-05-16T02:24:03Z","updated_at":"2024-05-19T00:30:20Z","closed_at":"2024-05-19T00:30:20Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Bevy version\r\nmain\r\nv0.14.0-dev\r\nf91fd32\r\n\r\n## Relevant system information\r\n\r\nrustc/cargo 1.78.0\r\n\r\n```ignore\r\n`SystemInfo { os: \"MacOS 14.4.1 \", kernel: \"23.4.0\", cpu: \"Apple M2 Max\", core_count: \"12\", memory: \"96.0 GiB\" }`\r\n`AdapterInfo { name: \"Apple M2 Max\", vendor: 0, device: 0, device_type: IntegratedGpu, driver: \"\", driver_info: \"\", backend: Metal }`\r\n```\r\n\r\n## What you did\r\n\r\nHello all - I am taking a look at the new headless_renderer example in the repo: https://github.com/bevyengine/bevy/blob/main/examples/app/headless_renderer.rs\r\nhttps://github.com/bevyengine/bevy/pull/13006\r\n\r\nI have a use case where I would need to set the dimensions of the output image based on something outside of bevy. So I ran the example after changing the configured dimensions (on line 69 in the AppConfig struct).\r\n\r\n## What went wrong\r\n\r\nI expected the output image to be properly formatted at the indicated resolution. However, just changing the width by 1 or a few results in output that is skewed/misaligned (examples attached).\r\n\r\nI sort of suspected that this had to do with bevy's default output, which doesn't match the resolution in the example but does have the same aspect ratio. So I changed the primary_window in WindowPlugin from None to a window with the config-defined dimensions:\r\n\r\n```rust\r\nprimary_window: Some(Window {\r\n  resolution: WindowResolution::new(config.width as f32, config.height as f32),\r\n  ..default()\r\n}),\r\n```\r\n\r\n...but it didn't change the output at all (and in fact no window appears, I assume because the camera's target is still set to a texture). \r\n\r\n## Additional information\r\n\r\nI assume its most likely some kind of bit alignment issue where the resolution needs to be a certain aspect ratio or along certain increments, but I tried changing the width by increments of 4, 8, etc, and had no luck.\r\n\r\nThank you.\r\n\r\n![001](https://github.com/bevyengine/bevy/assets/8195503/5560ffe6-60e9-4762-95b1-15bc9191d8c2)\r\n![000](https://github.com/bevyengine/bevy/assets/8195503/e72e44f8-2dc6-45e3-8921-2cd3843587b2)\r\n","closed_by":{"login":"mockersf","id":8672791,"node_id":"MDQ6VXNlcjg2NzI3OTE=","avatar_url":"https://avatars.githubusercontent.com/u/8672791?v=4","gravatar_id":"","url":"https://api.github.com/users/mockersf","html_url":"https://github.com/mockersf","followers_url":"https://api.github.com/users/mockersf/followers","following_url":"https://api.github.com/users/mockersf/following{/other_user}","gists_url":"https://api.github.com/users/mockersf/gists{/gist_id}","starred_url":"https://api.github.com/users/mockersf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mockersf/subscriptions","organizations_url":"https://api.github.com/users/mockersf/orgs","repos_url":"https://api.github.com/users/mockersf/repos","events_url":"https://api.github.com/users/mockersf/events{/privacy}","received_events_url":"https://api.github.com/users/mockersf/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/13384/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bevyengine/bevy/issues/13384/timeline","performed_via_github_app":null,"state_reason":"completed"}