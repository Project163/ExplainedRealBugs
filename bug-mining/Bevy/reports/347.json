{"url":"https://api.github.com/repos/bevyengine/bevy/issues/14655","repository_url":"https://api.github.com/repos/bevyengine/bevy","labels_url":"https://api.github.com/repos/bevyengine/bevy/issues/14655/labels{/name}","comments_url":"https://api.github.com/repos/bevyengine/bevy/issues/14655/comments","events_url":"https://api.github.com/repos/bevyengine/bevy/issues/14655/events","html_url":"https://github.com/bevyengine/bevy/issues/14655","id":2455592061,"node_id":"I_kwDODf6-U86SXVx9","number":14655,"title":"Grid gizmo seems hard to handle","user":{"login":"RobWalt","id":26892280,"node_id":"MDQ6VXNlcjI2ODkyMjgw","avatar_url":"https://avatars.githubusercontent.com/u/26892280?v=4","gravatar_id":"","url":"https://api.github.com/users/RobWalt","html_url":"https://github.com/RobWalt","followers_url":"https://api.github.com/users/RobWalt/followers","following_url":"https://api.github.com/users/RobWalt/following{/other_user}","gists_url":"https://api.github.com/users/RobWalt/gists{/gist_id}","starred_url":"https://api.github.com/users/RobWalt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RobWalt/subscriptions","organizations_url":"https://api.github.com/users/RobWalt/orgs","repos_url":"https://api.github.com/users/RobWalt/repos","events_url":"https://api.github.com/users/RobWalt/events{/privacy}","received_events_url":"https://api.github.com/users/RobWalt/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1795619323,"node_id":"MDU6TGFiZWwxNzk1NjE5MzIz","url":"https://api.github.com/repos/bevyengine/bevy/labels/C-Bug","name":"C-Bug","color":"d73a4a","default":false,"description":"An unexpected or incorrect behavior"},{"id":3166124969,"node_id":"MDU6TGFiZWwzMTY2MTI0OTY5","url":"https://api.github.com/repos/bevyengine/bevy/labels/A-Math","name":"A-Math","color":"c6a751","default":false,"description":"Fundamental domain-agnostic mathematical operations"},{"id":5303071651,"node_id":"LA_kwDODf6-U88AAAABPBZzow","url":"https://api.github.com/repos/bevyengine/bevy/labels/A-Gizmos","name":"A-Gizmos","color":"c6a751","default":false,"description":"Visual editor and debug gizmos"},{"id":6899588994,"node_id":"LA_kwDODf6-U88AAAABmz9fgg","url":"https://api.github.com/repos/bevyengine/bevy/labels/S-Needs-Review","name":"S-Needs-Review","color":"D876E3","default":false,"description":"Needs reviewer attention (from anyone!) to move forward"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-08-08T11:46:54Z","updated_at":"2024-08-16T23:56:39Z","closed_at":"2024-08-16T23:56:39Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Bevy version\r\n\r\n0.14\r\n\r\n## What you did\r\n\r\nI used a grid gizmo + the arrow gizmo to draw a plane with a normal. The arrows `start` position is set to the same as the grids `position` position. Additionally I applied some rotation to the grid so that the arrow is always normal to it.\r\n\r\n```rust\r\n    fn plane_3d(&mut self, origin: Vec3, normal: Dir3, color: impl Into<Color>) {\r\n        let color = color.into();\r\n        self.arrow(origin, origin + normal.as_vec3(), color);\r\n        let rotation = Quat::from_rotation_arc(Vec3::Z, normal.as_vec3());\r\n        self.grid(origin, rotation, UVec2::splat(100), Vec2::splat(1.0), color);\r\n    }\r\n```\r\n\r\n## What went wrong\r\n\r\nThe arrow clearly doesn't start in the grids center:\r\n\r\n![image](https://github.com/user-attachments/assets/c357299c-9e57-4886-96ce-c6217ae089ff)\r\n\r\nI think this is due to the fact that the transforms in the grid gizmos might happen in the wrong order:\r\n\r\nIn this line https://github.com/bevyengine/bevy/blob/main/crates/bevy_gizmos/src/grid.rs#L383 we're creating the points of the grid using the `position` argument which is basically the grids translation. After that in https://github.com/bevyengine/bevy/blob/main/crates/bevy_gizmos/src/grid.rs#L418 the rotations are applied.\r\n\r\nThe two operations don't commute and I think rotating and then translating is the more intuitive order of operations.","closed_by":{"login":"alice-i-cecile","id":3579909,"node_id":"MDQ6VXNlcjM1Nzk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3579909?v=4","gravatar_id":"","url":"https://api.github.com/users/alice-i-cecile","html_url":"https://github.com/alice-i-cecile","followers_url":"https://api.github.com/users/alice-i-cecile/followers","following_url":"https://api.github.com/users/alice-i-cecile/following{/other_user}","gists_url":"https://api.github.com/users/alice-i-cecile/gists{/gist_id}","starred_url":"https://api.github.com/users/alice-i-cecile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alice-i-cecile/subscriptions","organizations_url":"https://api.github.com/users/alice-i-cecile/orgs","repos_url":"https://api.github.com/users/alice-i-cecile/repos","events_url":"https://api.github.com/users/alice-i-cecile/events{/privacy}","received_events_url":"https://api.github.com/users/alice-i-cecile/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/14655/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bevyengine/bevy/issues/14655/timeline","performed_via_github_app":null,"state_reason":"completed"}