{"url":"https://api.github.com/repos/bevyengine/bevy/issues/12480","repository_url":"https://api.github.com/repos/bevyengine/bevy","labels_url":"https://api.github.com/repos/bevyengine/bevy/issues/12480/labels{/name}","comments_url":"https://api.github.com/repos/bevyengine/bevy/issues/12480/comments","events_url":"https://api.github.com/repos/bevyengine/bevy/issues/12480/events","html_url":"https://github.com/bevyengine/bevy/issues/12480","id":2186632729,"node_id":"I_kwDODf6-U86CVV4Z","number":12480,"title":"Area of icosphere mesh triangles is inconsistent","user":{"login":"EmiOnGit","id":95967983,"node_id":"U_kgDOBbha7w","avatar_url":"https://avatars.githubusercontent.com/u/95967983?v=4","gravatar_id":"","url":"https://api.github.com/users/EmiOnGit","html_url":"https://github.com/EmiOnGit","followers_url":"https://api.github.com/users/EmiOnGit/followers","following_url":"https://api.github.com/users/EmiOnGit/following{/other_user}","gists_url":"https://api.github.com/users/EmiOnGit/gists{/gist_id}","starred_url":"https://api.github.com/users/EmiOnGit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EmiOnGit/subscriptions","organizations_url":"https://api.github.com/users/EmiOnGit/orgs","repos_url":"https://api.github.com/users/EmiOnGit/repos","events_url":"https://api.github.com/users/EmiOnGit/events{/privacy}","received_events_url":"https://api.github.com/users/EmiOnGit/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1795619324,"node_id":"MDU6TGFiZWwxNzk1NjE5MzI0","url":"https://api.github.com/repos/bevyengine/bevy/labels/C-Docs","name":"C-Docs","color":"B8b8b8","default":false,"description":"An addition or correction to our documentation"},{"id":1795619327,"node_id":"MDU6TGFiZWwxNzk1NjE5MzI3","url":"https://api.github.com/repos/bevyengine/bevy/labels/D-Trivial","name":"D-Trivial","color":"008672","default":false,"description":"Nice and easy! A great choice to get started with Bevy"},{"id":2045383863,"node_id":"MDU6TGFiZWwyMDQ1MzgzODYz","url":"https://api.github.com/repos/bevyengine/bevy/labels/A-Rendering","name":"A-Rendering","color":"C6A751","default":false,"description":"Drawing game state to the screen"},{"id":3166124969,"node_id":"MDU6TGFiZWwzMTY2MTI0OTY5","url":"https://api.github.com/repos/bevyengine/bevy/labels/A-Math","name":"A-Math","color":"c6a751","default":false,"description":"Fundamental domain-agnostic mathematical operations"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2024-03-14T15:14:58Z","updated_at":"2024-03-15T03:49:58Z","closed_at":"2024-03-15T03:49:58Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Bevy version\r\n0.13\r\n\r\n## What you did\r\nI've noticed that the mesh generated by `Sphere` is not containing equally sized triangles.\r\nSee below for the minimal required code.\r\n\r\n`Sphere::default().mesh()` creates a `SphereMeshBuilder` with `SphereMeshBuilder::kind == SphereKind::Ico`.\r\nAs normally expected, the documentation for `SphereKind::Ico` states: \r\n> An icosphere, a spherical mesh that consists of equally sized triangles.\r\n\r\nHowever, I couldn't validate this with following code:\r\n```rust\r\nuse bevy::{prelude::*, render::mesh::PrimitiveTopology};\r\n\r\nfn main() {\r\n    let sphere_mesh_builder = Sphere::default().mesh();\r\n    // Make sure we use a `Icosphere`\r\n    match sphere_mesh_builder.kind {\r\n        SphereKind::Ico { .. } => {}\r\n        _ => panic!(),\r\n    }\r\n\r\n    let mesh = sphere_mesh_builder.build();\r\n\r\n    // indices of vertices\r\n    let indices: Vec<usize> = mesh.indices().unwrap().iter().collect();\r\n    // Extract position of vertices\r\n    let positions = mesh\r\n        .attribute(Mesh::ATTRIBUTE_POSITION)\r\n        .unwrap()\r\n        .as_float3()\r\n        .unwrap();\r\n    // Vertices 0,1,2,3,4,5 create triangles 0,1,2 and 3,4,5 since we have a `TriangleList`.\r\n    assert_eq!(mesh.primitive_topology(), PrimitiveTopology::TriangleList);\r\n    let areas: Vec<f32> = indices\r\n        .chunks_exact(3)\r\n        // triangle is &[usize;3]\r\n        .map(|triangle| {\r\n            let a = Vec3::from_array(positions[triangle[0]]);\r\n            let b = Vec3::from_array(positions[triangle[1]]);\r\n            let c = Vec3::from_array(positions[triangle[2]]);\r\n            // a,b,c are the three corner points of the triangle\r\n            (a, b, c)\r\n        })\r\n        .map(|(a, b, c)| area_of_triangle(a, b, c))\r\n        .collect();\r\n    println!(\"max area {:?}\", areas.clone().into_iter().reduce(f32::max));\r\n    println!(\"min area {:?}\", areas.clone().into_iter().reduce(f32::min));\r\n    println!(\"first 10 {:?}\", &areas[..10]);\r\n}\r\nfn area_of_triangle(a: Vec3, b: Vec3, c: Vec3) -> f32 {\r\n    let ab = b - a;\r\n    let ac = c - a;\r\n    ab.cross(ac).length() / 2.\r\n}\r\n```\r\n```bash\r\nmax area Some(0.0743312)\r\nmin area Some(0.06445146)\r\nfirst 10 [0.06445148, 0.064451486, 0.064451486, 0.06595752, 0.06595752, 0.06595753, 0.06482972, 0.0724672, 0.06482972, 0.07246719]\r\n```\r\nThe formula for calculating the area of the triangle can be found here for example: [1](https://math.stackexchange.com/questions/2587133/computing-an-area-of-a-triangle-in-3d?noredirect=1&lq=1) [2](https://math.stackexchange.com/questions/128991/how-to-calculate-the-area-of-a-3d-triangle)\r\n\r\n","closed_by":{"login":"alice-i-cecile","id":3579909,"node_id":"MDQ6VXNlcjM1Nzk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3579909?v=4","gravatar_id":"","url":"https://api.github.com/users/alice-i-cecile","html_url":"https://github.com/alice-i-cecile","followers_url":"https://api.github.com/users/alice-i-cecile/followers","following_url":"https://api.github.com/users/alice-i-cecile/following{/other_user}","gists_url":"https://api.github.com/users/alice-i-cecile/gists{/gist_id}","starred_url":"https://api.github.com/users/alice-i-cecile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alice-i-cecile/subscriptions","organizations_url":"https://api.github.com/users/alice-i-cecile/orgs","repos_url":"https://api.github.com/users/alice-i-cecile/repos","events_url":"https://api.github.com/users/alice-i-cecile/events{/privacy}","received_events_url":"https://api.github.com/users/alice-i-cecile/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/12480/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bevyengine/bevy/issues/12480/timeline","performed_via_github_app":null,"state_reason":"completed"}