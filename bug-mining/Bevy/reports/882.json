{"url":"https://api.github.com/repos/bevyengine/bevy/issues/18075","repository_url":"https://api.github.com/repos/bevyengine/bevy","labels_url":"https://api.github.com/repos/bevyengine/bevy/issues/18075/labels{/name}","comments_url":"https://api.github.com/repos/bevyengine/bevy/issues/18075/comments","events_url":"https://api.github.com/repos/bevyengine/bevy/issues/18075/events","html_url":"https://github.com/bevyengine/bevy/issues/18075","id":2885615603,"node_id":"I_kwDODf6-U86r_v_z","number":18075,"title":"Type erased / dynamic runtime materials","user":{"login":"tychedelia","id":10366310,"node_id":"MDQ6VXNlcjEwMzY2MzEw","avatar_url":"https://avatars.githubusercontent.com/u/10366310?v=4","gravatar_id":"","url":"https://api.github.com/users/tychedelia","html_url":"https://github.com/tychedelia","followers_url":"https://api.github.com/users/tychedelia/followers","following_url":"https://api.github.com/users/tychedelia/following{/other_user}","gists_url":"https://api.github.com/users/tychedelia/gists{/gist_id}","starred_url":"https://api.github.com/users/tychedelia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tychedelia/subscriptions","organizations_url":"https://api.github.com/users/tychedelia/orgs","repos_url":"https://api.github.com/users/tychedelia/repos","events_url":"https://api.github.com/users/tychedelia/events{/privacy}","received_events_url":"https://api.github.com/users/tychedelia/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1795619326,"node_id":"MDU6TGFiZWwxNzk1NjE5MzI2","url":"https://api.github.com/repos/bevyengine/bevy/labels/C-Feature","name":"C-Feature","color":"b8b8b8","default":false,"description":"A new feature, making something new possible"},{"id":2045383863,"node_id":"MDU6TGFiZWwyMDQ1MzgzODYz","url":"https://api.github.com/repos/bevyengine/bevy/labels/A-Rendering","name":"A-Rendering","color":"C6A751","default":false,"description":"Drawing game state to the screen"},{"id":3166152189,"node_id":"MDU6TGFiZWwzMTY2MTUyMTg5","url":"https://api.github.com/repos/bevyengine/bevy/labels/S-Needs-Design","name":"S-Needs-Design","color":"D876E3","default":false,"description":"This issue requires design work to think about how it would best be accomplished"},{"id":6899580004,"node_id":"LA_kwDODf6-U88AAAABmz88ZA","url":"https://api.github.com/repos/bevyengine/bevy/labels/D-Domain-Expert","name":"D-Domain-Expert","color":"008672","default":false,"description":"Requires deep knowledge in a given domain"},{"id":6900948640,"node_id":"LA_kwDODf6-U88AAAABm1QeoA","url":"https://api.github.com/repos/bevyengine/bevy/labels/D-Shaders","name":"D-Shaders","color":"008672","default":false,"description":"This code uses GPU shader languages"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2025-02-27T21:11:02Z","updated_at":"2025-06-27T23:17:17Z","closed_at":"2025-06-27T23:17:17Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## What problem does this solve or what need does it fill?\n\nRight now, the Bevy material API is fully typeful and relies on users implementing the `Material` trait for their struct, as well as adding the material plugin which includes a bunch of parameterized material systems for each material type.\n\nWhile this pattern is ergonomic for pure Rust materials and nicely leverages ECS parallelism, it poses a number of problems for implementing higher level tools for working with materials, for example materials that are built with a shader graph ui or materials that are fully reflected from some kind of other asset, i.e. materials whose type cannot be fully known at compile time.\n\n## What solution would you like?\n\nWe should rework our material API to not require statically defined materials. There are a few different approaches this might take:\n1. Componentizing all the requisite material data. For example, using a component that describes the material's layout rather than calling a method on `AsBindGroup`.\n2. Make the `Material` trait take `self` in more parameters so that we can implement opaque material structs that reference some kind of internal data.\n3. Continue to use the `Material` trait and asset system in the main world, but use untyped asset IDs in the render world with more flexibility with regard to layout, etc.\n\nCare should be taken to ensure that materials are still ergonomic to work with in pure Rust code.\n\n## What alternative(s) have you considered?\n\nNot shipping higher level material features.\n\n## Additional context\n\nHere's some prior art that hacked together a way to make a fully reflectable dynamic shader.\n\nhttps://github.com/user-attachments/assets/9a0d3acc-1911-48fc-8046-730eb2404759\n\nhttps://github.com/bevyengine/bevy/pull/14856","closed_by":{"login":"alice-i-cecile","id":3579909,"node_id":"MDQ6VXNlcjM1Nzk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3579909?v=4","gravatar_id":"","url":"https://api.github.com/users/alice-i-cecile","html_url":"https://github.com/alice-i-cecile","followers_url":"https://api.github.com/users/alice-i-cecile/followers","following_url":"https://api.github.com/users/alice-i-cecile/following{/other_user}","gists_url":"https://api.github.com/users/alice-i-cecile/gists{/gist_id}","starred_url":"https://api.github.com/users/alice-i-cecile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alice-i-cecile/subscriptions","organizations_url":"https://api.github.com/users/alice-i-cecile/orgs","repos_url":"https://api.github.com/users/alice-i-cecile/repos","events_url":"https://api.github.com/users/alice-i-cecile/events{/privacy}","received_events_url":"https://api.github.com/users/alice-i-cecile/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/18075/reactions","total_count":3,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bevyengine/bevy/issues/18075/timeline","performed_via_github_app":null,"state_reason":"completed"}