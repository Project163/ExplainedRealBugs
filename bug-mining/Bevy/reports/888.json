{"url":"https://api.github.com/repos/bevyengine/bevy/issues/18796","repository_url":"https://api.github.com/repos/bevyengine/bevy","labels_url":"https://api.github.com/repos/bevyengine/bevy/issues/18796/labels{/name}","comments_url":"https://api.github.com/repos/bevyengine/bevy/issues/18796/comments","events_url":"https://api.github.com/repos/bevyengine/bevy/issues/18796/events","html_url":"https://github.com/bevyengine/bevy/issues/18796","id":2986613582,"node_id":"I_kwDODf6-U86yBBtO","number":18796,"title":"Eager system parameter validation causes issues with combinator and piped systems","user":{"login":"alice-i-cecile","id":3579909,"node_id":"MDQ6VXNlcjM1Nzk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3579909?v=4","gravatar_id":"","url":"https://api.github.com/users/alice-i-cecile","html_url":"https://github.com/alice-i-cecile","followers_url":"https://api.github.com/users/alice-i-cecile/followers","following_url":"https://api.github.com/users/alice-i-cecile/following{/other_user}","gists_url":"https://api.github.com/users/alice-i-cecile/gists{/gist_id}","starred_url":"https://api.github.com/users/alice-i-cecile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alice-i-cecile/subscriptions","organizations_url":"https://api.github.com/users/alice-i-cecile/orgs","repos_url":"https://api.github.com/users/alice-i-cecile/repos","events_url":"https://api.github.com/users/alice-i-cecile/events{/privacy}","received_events_url":"https://api.github.com/users/alice-i-cecile/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2197761682,"node_id":"MDU6TGFiZWwyMTk3NzYxNjgy","url":"https://api.github.com/repos/bevyengine/bevy/labels/A-ECS","name":"A-ECS","color":"c6a751","default":false,"description":"Entities, components, systems, and events"},{"id":2941888683,"node_id":"MDU6TGFiZWwyOTQxODg4Njgz","url":"https://api.github.com/repos/bevyengine/bevy/labels/S-Needs-Design-Doc","name":"S-Needs-Design-Doc","color":"D876e3","default":false,"description":"This issue or PR is particularly complex, and needs an approved design doc before it can be merged"},{"id":3166143717,"node_id":"MDU6TGFiZWwzMTY2MTQzNzE3","url":"https://api.github.com/repos/bevyengine/bevy/labels/D-Complex","name":"D-Complex","color":"008672","default":false,"description":"Quite challenging from either a design or technical perspective. Ask for help!"},{"id":4058407495,"node_id":"LA_kwDODf6-U87x5mJH","url":"https://api.github.com/repos/bevyengine/bevy/labels/X-Controversial","name":"X-Controversial","color":"D93F0B","default":false,"description":"There is active debate or serious implications around merging this PR"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2025-04-10T19:01:16Z","updated_at":"2025-07-03T22:08:12Z","closed_at":"2025-07-03T22:08:12Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"> For some history, see https://github.com/bevyengine/bevy/pull/16638#issuecomment-2526191119:\n> \n> In a combination system, like `a.and(b)` or `a.pipe(b)` we're running param checks for _all_ systems before running any of them. This results in `resource_exists::<MyRes>.and(do_stuff)` failing params, because `do_stuff` doesn't have `MyRes` even though it wouldn't run because of failed condition. \n> ...\n> Since combination systems are incomplete, let's just ensure the first system (or _the_ system, if no combinations are used) works correctly with fallible params, do not check params for subsequent ones and just let app crash like it did in 0.14. In 0.16 we can ship the correct param checking behavior, where we do it directly before running a system.\n\n _Originally posted by @chescock in [#18755](https://github.com/bevyengine/bevy/issues/18755#issuecomment-2784816916)_\n\nThe same problem occurs with combinator systems, particularly when using the short-circuiting `and` behavior. The same bug as in #18755 exists for combinator systems, but fixing it breaks much more normal use cases (and one of our doc tests!).\n\n## Proposed solution\n\nIn order to resolve this (and other issues, see #8857, #2381), we need to retain the unique identity of systems even when piped.\n\n> we can ship the correct param checking behavior, where we do it directly before running a system.\n\nThis is the ideal solution, but can't work with the current architecture. These systems, from the perspective of the schedule (and thus the executor), are only one system.","closed_by":{"login":"alice-i-cecile","id":3579909,"node_id":"MDQ6VXNlcjM1Nzk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3579909?v=4","gravatar_id":"","url":"https://api.github.com/users/alice-i-cecile","html_url":"https://github.com/alice-i-cecile","followers_url":"https://api.github.com/users/alice-i-cecile/followers","following_url":"https://api.github.com/users/alice-i-cecile/following{/other_user}","gists_url":"https://api.github.com/users/alice-i-cecile/gists{/gist_id}","starred_url":"https://api.github.com/users/alice-i-cecile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alice-i-cecile/subscriptions","organizations_url":"https://api.github.com/users/alice-i-cecile/orgs","repos_url":"https://api.github.com/users/alice-i-cecile/repos","events_url":"https://api.github.com/users/alice-i-cecile/events{/privacy}","received_events_url":"https://api.github.com/users/alice-i-cecile/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/18796/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bevyengine/bevy/issues/18796/timeline","performed_via_github_app":null,"state_reason":"completed"}