{"url":"https://api.github.com/repos/bevyengine/bevy/issues/12478","repository_url":"https://api.github.com/repos/bevyengine/bevy","labels_url":"https://api.github.com/repos/bevyengine/bevy/issues/12478/labels{/name}","comments_url":"https://api.github.com/repos/bevyengine/bevy/issues/12478/comments","events_url":"https://api.github.com/repos/bevyengine/bevy/issues/12478/events","html_url":"https://github.com/bevyengine/bevy/issues/12478","id":2186563213,"node_id":"I_kwDODf6-U86CVE6N","number":12478,"title":"Screenshots from any render target not just windows","user":{"login":"torsteingrindvik","id":52322338,"node_id":"MDQ6VXNlcjUyMzIyMzM4","avatar_url":"https://avatars.githubusercontent.com/u/52322338?v=4","gravatar_id":"","url":"https://api.github.com/users/torsteingrindvik","html_url":"https://github.com/torsteingrindvik","followers_url":"https://api.github.com/users/torsteingrindvik/followers","following_url":"https://api.github.com/users/torsteingrindvik/following{/other_user}","gists_url":"https://api.github.com/users/torsteingrindvik/gists{/gist_id}","starred_url":"https://api.github.com/users/torsteingrindvik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/torsteingrindvik/subscriptions","organizations_url":"https://api.github.com/users/torsteingrindvik/orgs","repos_url":"https://api.github.com/users/torsteingrindvik/repos","events_url":"https://api.github.com/users/torsteingrindvik/events{/privacy}","received_events_url":"https://api.github.com/users/torsteingrindvik/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1795619326,"node_id":"MDU6TGFiZWwxNzk1NjE5MzI2","url":"https://api.github.com/repos/bevyengine/bevy/labels/C-Feature","name":"C-Feature","color":"b8b8b8","default":false,"description":"A new feature, making something new possible"},{"id":2045383863,"node_id":"MDU6TGFiZWwyMDQ1MzgzODYz","url":"https://api.github.com/repos/bevyengine/bevy/labels/A-Rendering","name":"A-Rendering","color":"C6A751","default":false,"description":"Drawing game state to the screen"},{"id":6899549740,"node_id":"LA_kwDODf6-U88AAAABmz7GLA","url":"https://api.github.com/repos/bevyengine/bevy/labels/X-Uncontroversial","name":"X-Uncontroversial","color":"d93f0b","default":false,"description":"This work is generally agreed upon"},{"id":6899571146,"node_id":"LA_kwDODf6-U88AAAABmz8Zyg","url":"https://api.github.com/repos/bevyengine/bevy/labels/D-Straightforward","name":"D-Straightforward","color":"008672","default":false,"description":"Simple bug fixes and API improvements, docs, test and examples"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-03-14T14:45:05Z","updated_at":"2024-08-25T14:30:27Z","closed_at":"2024-08-25T14:30:27Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## What problem does this solve or what need does it fill?\r\n\r\nExample use cases:\r\n\r\n1. If rendering to a non-window target we should be able to take screenshots of what's rendered.\r\n2. In cases such as 4-player split screen we should be able to take individual screenshots of each split (likely covered by 1. if the split screen is implemented via first off-screen rendering then composited into a window)\r\n\r\n## What solution would you like?\r\n\r\nAllow taking screenshots of any render target: http://dev-docs.bevyengine.org/bevy/render/camera/enum.RenderTarget.html \r\n\r\n## What alternative(s) have you considered?\r\n\r\n1. Spawning a dedicated window showing my offscreen rendered texture then taking a screenshot of that\r\n2. Doing a manual texture-to-buffer copy then converting this to an image\r\n\r\n## Additional context\r\n\r\n_Just initial thoughts on how it might work_\r\n\r\nFrom a quick look it seems that currently extracted windows have a special field: https://github.com/bevyengine/bevy/blob/main/crates/bevy_render/src/view/window/mod.rs#L73 \r\n\r\n`pub screenshot_memory: Option<ScreenshotPreparedState>`\r\n\r\nit seems to me that this shouldn't be necessary- perhaps a solution where something like\r\n\r\n```rust\r\n#[derive(..., Component)]\r\nstruct ScreenshotTarget {\r\n  buf: Buffer\r\n  ...\r\n}\r\n```\r\n\r\ncould be considered, and cameras (and windows?) with this component can have their screenshots taken.\r\n\r\nThis would also allow things like\r\n\r\n```rust\r\n// Screenshot with same width, height as camera target\r\ncommands.spawn((Camera3dBundle { ... }, ScreenshotTarget::default());\r\n\r\n// Screenshot by sampling the camera no matter its size, then output to a FullHD sized image\r\ncommands.spawn((Camera3dBundle { ... }, ScreenshotTarget::with_size(1920, 1080));\r\n\r\n// In both cases it doesn't matter if the cameras are 3D, 2D, if they render to separate windows, the same window, or not a window at all\r\n```\r\n\r\nThere might be a loss of ergonomics if a user wants to take a screenshot of a window since they would have to add the `ScreenshotTarget` to the window entity (or entities), but an alternative could be to have windows spawn with this by default and rather have it opt-out.","closed_by":{"login":"alice-i-cecile","id":3579909,"node_id":"MDQ6VXNlcjM1Nzk5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3579909?v=4","gravatar_id":"","url":"https://api.github.com/users/alice-i-cecile","html_url":"https://github.com/alice-i-cecile","followers_url":"https://api.github.com/users/alice-i-cecile/followers","following_url":"https://api.github.com/users/alice-i-cecile/following{/other_user}","gists_url":"https://api.github.com/users/alice-i-cecile/gists{/gist_id}","starred_url":"https://api.github.com/users/alice-i-cecile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alice-i-cecile/subscriptions","organizations_url":"https://api.github.com/users/alice-i-cecile/orgs","repos_url":"https://api.github.com/users/alice-i-cecile/repos","events_url":"https://api.github.com/users/alice-i-cecile/events{/privacy}","received_events_url":"https://api.github.com/users/alice-i-cecile/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bevyengine/bevy/issues/12478/reactions","total_count":3,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":2,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/bevyengine/bevy/issues/12478/timeline","performed_via_github_app":null,"state_reason":"completed"}