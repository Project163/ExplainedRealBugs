diff --git a/extensions/grpc/deployment/src/main/java/io/quarkus/grpc/deployment/GrpcServerProcessor.java b/extensions/grpc/deployment/src/main/java/io/quarkus/grpc/deployment/GrpcServerProcessor.java
index f7fe510f9e2..b962b280d45 100644
--- a/extensions/grpc/deployment/src/main/java/io/quarkus/grpc/deployment/GrpcServerProcessor.java
+++ b/extensions/grpc/deployment/src/main/java/io/quarkus/grpc/deployment/GrpcServerProcessor.java
@@ -491,10 +491,17 @@ public boolean appliesTo(Kind kind) {
                         return kind == Kind.CLASS;
                     }
 
+                    @Override
+                    public int priority() {
+                        // Must run after the SpringDIProcessor annotation transformer, which has default priority 1000
+                        return 500;
+                    }
+
                     @Override
                     public void transform(TransformationContext context) {
                         ClassInfo clazz = context.getTarget().asClass();
-                        if (userDefinedServices.contains(clazz.name()) && !customScopes.isScopeDeclaredOn(clazz)) {
+                        if (userDefinedServices.contains(clazz.name())
+                                && !customScopes.isScopeIn(context.getAnnotations())) {
                             // Add @Singleton to make it a bean
                             context.transform()
                                     .add(BuiltinScope.SINGLETON.getName())
diff --git a/extensions/smallrye-reactive-messaging/deployment/src/main/java/io/quarkus/smallrye/reactivemessaging/deployment/SmallRyeReactiveMessagingProcessor.java b/extensions/smallrye-reactive-messaging/deployment/src/main/java/io/quarkus/smallrye/reactivemessaging/deployment/SmallRyeReactiveMessagingProcessor.java
index 1fa7cdf9799..988ee811fef 100644
--- a/extensions/smallrye-reactive-messaging/deployment/src/main/java/io/quarkus/smallrye/reactivemessaging/deployment/SmallRyeReactiveMessagingProcessor.java
+++ b/extensions/smallrye-reactive-messaging/deployment/src/main/java/io/quarkus/smallrye/reactivemessaging/deployment/SmallRyeReactiveMessagingProcessor.java
@@ -134,12 +134,18 @@ public boolean appliesTo(AnnotationTarget.Kind kind) {
                 return kind == org.jboss.jandex.AnnotationTarget.Kind.CLASS;
             }
 
+            @Override
+            public int priority() {
+                // Must run after the SpringDIProcessor annotation transformer, which has default priority 1000
+                return 500;
+            }
+
             @Override
             public void transform(AnnotationsTransformer.TransformationContext ctx) {
                 if (ctx.isClass()) {
                     ClassInfo clazz = ctx.getTarget().asClass();
                     Map<DotName, List<AnnotationInstance>> annotations = clazz.annotationsMap();
-                    if (scopes.isScopeDeclaredOn(clazz)
+                    if (scopes.isScopeIn(ctx.getAnnotations())
                             || annotations.containsKey(ReactiveMessagingDotNames.JAXRS_PATH)
                             || annotations.containsKey(ReactiveMessagingDotNames.REST_CONTROLLER)
                             || annotations.containsKey(ReactiveMessagingDotNames.JAXRS_PROVIDER)) {
