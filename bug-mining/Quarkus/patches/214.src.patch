diff --git a/core/deployment/src/main/java/io/quarkus/deployment/Capability.java b/core/deployment/src/main/java/io/quarkus/deployment/Capability.java
index 27a7d5d81b4..87be9f42852 100644
--- a/core/deployment/src/main/java/io/quarkus/deployment/Capability.java
+++ b/core/deployment/src/main/java/io/quarkus/deployment/Capability.java
@@ -127,6 +127,7 @@ public interface Capability {
     String SMALLRYE_OPENAPI = QUARKUS_PREFIX + ".smallrye.openapi";
     String SMALLRYE_GRAPHQL = QUARKUS_PREFIX + ".smallrye.graphql";
     String SMALLRYE_FAULT_TOLERANCE = QUARKUS_PREFIX + ".smallrye.faulttolerance";
+    String SMALLRYE_STORK = QUARKUS_PREFIX + ".smallrye.stork";
 
     String SPRING_WEB = QUARKUS_PREFIX + ".spring.web";
 
diff --git a/docs/src/main/asciidoc/stork-kubernetes.adoc b/docs/src/main/asciidoc/stork-kubernetes.adoc
index b841e3da934..d39d50af506 100644
--- a/docs/src/main/asciidoc/stork-kubernetes.adoc
+++ b/docs/src/main/asciidoc/stork-kubernetes.adoc
@@ -61,10 +61,10 @@ The various integrations in Quarkus extract the location of the service from tha
 
 == Bootstrapping the project
 
-Create a Quarkus project importing the quarkus-rest-client and quarkus-rest extensions using your favorite approach:
+Create a Quarkus project importing the quarkus-rest-client, quarkus-rest, and quarkus-smallrye-stork extensions using your favorite approach:
 
 :create-app-artifact-id: stork-kubernetes-quickstart
-:create-app-extensions: quarkus-rest-client,quarkus-rest
+:create-app-extensions: quarkus-rest-client,quarkus-rest,quarkus-smallrye-stork
 include::{includes}/devtools/create-app.adoc[]
 
 In the generated project, also add the following dependencies:
diff --git a/docs/src/main/asciidoc/stork.adoc b/docs/src/main/asciidoc/stork.adoc
index 5f2fe9e2329..baa0ce402cb 100644
--- a/docs/src/main/asciidoc/stork.adoc
+++ b/docs/src/main/asciidoc/stork.adoc
@@ -70,10 +70,10 @@ image::stork-process.png[Discovery and Selection of services,width=50%, align=ce
 
 == Bootstrapping the project
 
-Create a Quarkus project importing the quarkus-rest-client and quarkus-rest extensions using your favorite approach:
+Create a Quarkus project importing the quarkus-rest-client, quarkus-rest, and quarkus-smallrye-stork extensions using your favorite approach:
 
 :create-app-artifact-id: stork-quickstart
-:create-app-extensions: quarkus-rest-client,quarkus-rest
+:create-app-extensions: quarkus-rest-client,quarkus-rest,quarkus-smallrye-stork
 include::{includes}/devtools/create-app.adoc[]
 
 In the generated project, also add the following dependencies:
diff --git a/extensions/micrometer/deployment/pom.xml b/extensions/micrometer/deployment/pom.xml
index d91b1405518..cf381f90c84 100644
--- a/extensions/micrometer/deployment/pom.xml
+++ b/extensions/micrometer/deployment/pom.xml
@@ -91,6 +91,12 @@
             <scope>test</scope>
         </dependency>
 
+        <dependency>
+            <groupId>io.quarkus</groupId>
+            <artifactId>quarkus-smallrye-stork-deployment</artifactId>
+            <scope>test</scope>
+        </dependency>
+
         <dependency>
             <groupId>io.quarkus</groupId>
             <artifactId>quarkus-rest-jackson-deployment</artifactId>
diff --git a/extensions/resteasy-reactive/rest-client-jaxrs/deployment/src/main/java/io/quarkus/jaxrs/client/reactive/deployment/JaxrsClientReactiveProcessor.java b/extensions/resteasy-reactive/rest-client-jaxrs/deployment/src/main/java/io/quarkus/jaxrs/client/reactive/deployment/JaxrsClientReactiveProcessor.java
index 96ff4bd1d5c..d995dd3c83a 100644
--- a/extensions/resteasy-reactive/rest-client-jaxrs/deployment/src/main/java/io/quarkus/jaxrs/client/reactive/deployment/JaxrsClientReactiveProcessor.java
+++ b/extensions/resteasy-reactive/rest-client-jaxrs/deployment/src/main/java/io/quarkus/jaxrs/client/reactive/deployment/JaxrsClientReactiveProcessor.java
@@ -259,9 +259,14 @@ void initializeRuntimeInitializedClasses(BuildProducer<RuntimeInitializedClassBu
     }
 
     @BuildStep
-    void initializeStorkFilter(BuildProducer<AdditionalBeanBuildItem> additionalBeans,
+    void initializeStorkFilter(Capabilities capabilities,
+            BuildProducer<AdditionalBeanBuildItem> additionalBeans,
             BuildProducer<ReflectiveClassBuildItem> reflectiveClass,
             BuildProducer<AdditionalIndexedClassesBuildItem> additionalIndexedClassesBuildItem) {
+        if (!capabilities.isPresent(Capability.SMALLRYE_STORK)) {
+            return;
+        }
+
         additionalBeans.produce(AdditionalBeanBuildItem.unremovableOf(StorkClientRequestFilter.class));
         additionalIndexedClassesBuildItem
                 .produce(new AdditionalIndexedClassesBuildItem(StorkClientRequestFilter.class.getName()));
diff --git a/extensions/resteasy-reactive/rest-client/deployment/pom.xml b/extensions/resteasy-reactive/rest-client/deployment/pom.xml
index d0a49dc0fc3..cbed3dd2a3d 100644
--- a/extensions/resteasy-reactive/rest-client/deployment/pom.xml
+++ b/extensions/resteasy-reactive/rest-client/deployment/pom.xml
@@ -24,10 +24,6 @@
             <groupId>io.quarkus</groupId>
             <artifactId>quarkus-rest-client-jaxrs-deployment</artifactId>
         </dependency>
-        <dependency>
-            <groupId>io.quarkus</groupId>
-            <artifactId>quarkus-smallrye-stork-deployment</artifactId>
-        </dependency>
         <dependency>
             <groupId>io.quarkus</groupId>
             <artifactId>quarkus-rest-client-config-deployment</artifactId>
@@ -101,6 +97,11 @@
             <artifactId>stork-load-balancer-least-response-time</artifactId>
             <scope>test</scope>
         </dependency>
+        <dependency>
+            <groupId>io.quarkus</groupId>
+            <artifactId>quarkus-smallrye-stork-deployment</artifactId>
+            <scope>test</scope>
+        </dependency>
         <dependency>
             <groupId>io.smallrye.stork</groupId>
             <artifactId>stork-service-discovery-static-list</artifactId>
diff --git a/extensions/resteasy-reactive/rest-client/runtime/pom.xml b/extensions/resteasy-reactive/rest-client/runtime/pom.xml
index 17d8aff7380..531aa0c4d32 100644
--- a/extensions/resteasy-reactive/rest-client/runtime/pom.xml
+++ b/extensions/resteasy-reactive/rest-client/runtime/pom.xml
@@ -18,10 +18,6 @@
             <groupId>io.quarkus</groupId>
             <artifactId>quarkus-rest-client-jaxrs</artifactId>
         </dependency>
-        <dependency>
-            <groupId>io.quarkus</groupId>
-            <artifactId>quarkus-smallrye-stork</artifactId>
-        </dependency>
         <dependency>
             <groupId>io.quarkus</groupId>
             <artifactId>quarkus-rest-client-config</artifactId>
@@ -30,14 +26,6 @@
             <groupId>io.quarkus</groupId>
             <artifactId>quarkus-tls-registry</artifactId>
         </dependency>
-        <dependency>
-            <groupId>io.smallrye.stork</groupId>
-            <artifactId>stork-api</artifactId>
-        </dependency>
-        <dependency>
-            <groupId>io.smallrye.stork</groupId>
-            <artifactId>stork-core</artifactId>
-        </dependency>
         <dependency>
             <groupId>org.eclipse.microprofile.rest.client</groupId>
             <artifactId>microprofile-rest-client-api</artifactId>
diff --git a/extensions/smallrye-stork/runtime/pom.xml b/extensions/smallrye-stork/runtime/pom.xml
index e39c5d036c0..e8ce7252ecf 100644
--- a/extensions/smallrye-stork/runtime/pom.xml
+++ b/extensions/smallrye-stork/runtime/pom.xml
@@ -41,6 +41,11 @@
             <plugin>
                 <groupId>io.quarkus</groupId>
                 <artifactId>quarkus-extension-maven-plugin</artifactId>
+                <configuration>
+                    <capabilities>
+                        <provides>io.quarkus.smallrye.stork</provides>
+                    </capabilities>
+                </configuration>
             </plugin>
             <plugin>
                 <artifactId>maven-compiler-plugin</artifactId>
diff --git a/independent-projects/resteasy-reactive/client/runtime/pom.xml b/independent-projects/resteasy-reactive/client/runtime/pom.xml
index 7c15c528f90..92e68aeaa6f 100644
--- a/independent-projects/resteasy-reactive/client/runtime/pom.xml
+++ b/independent-projects/resteasy-reactive/client/runtime/pom.xml
@@ -17,6 +17,11 @@
         <dependency>
             <groupId>io.smallrye.stork</groupId>
             <artifactId>stork-core</artifactId>
+            <optional>true</optional>
+        </dependency>
+        <dependency>
+            <groupId>io.smallrye.stork</groupId>
+            <artifactId>stork-api</artifactId>
         </dependency>
         <dependency>
             <groupId>io.quarkus.resteasy.reactive</groupId>
diff --git a/independent-projects/resteasy-reactive/client/runtime/src/main/java/org/jboss/resteasy/reactive/client/impl/StorkClientRequestFilter.java b/independent-projects/resteasy-reactive/client/runtime/src/main/java/org/jboss/resteasy/reactive/client/impl/StorkClientRequestFilter.java
index 92ec1af8334..ea966459e81 100644
--- a/independent-projects/resteasy-reactive/client/runtime/src/main/java/org/jboss/resteasy/reactive/client/impl/StorkClientRequestFilter.java
+++ b/independent-projects/resteasy-reactive/client/runtime/src/main/java/org/jboss/resteasy/reactive/client/impl/StorkClientRequestFilter.java
@@ -20,8 +20,25 @@
 @Priority(Priorities.AUTHENTICATION)
 @Provider
 public class StorkClientRequestFilter implements ResteasyReactiveClientRequestFilter {
+
     private static final Logger log = Logger.getLogger(StorkClientRequestFilter.class);
 
+    private final Stork stork;
+
+    public StorkClientRequestFilter() {
+        try {
+            stork = Stork.getInstance();
+
+            if (stork == null) {
+                throw new IllegalStateException(
+                        "Trying to use a StorkClientRequestFilter but the quarkus-smallrye-stork extension is missing, please add the extension.");
+            }
+        } catch (Exception e) {
+            throw new IllegalStateException(
+                    "Trying to use a StorkClientRequestFilter but the quarkus-smallrye-stork extension is missing, please add the extension.");
+        }
+    }
+
     @Override
     public void filter(ResteasyReactiveClientRequestContext requestContext) {
         URI uri = requestContext.getUri();
@@ -34,8 +51,7 @@ public void filter(ResteasyReactiveClientRequestContext requestContext) {
             requestContext.suspend();
             boolean measureTime = shouldMeasureTime(requestContext.getResponseType());
             try {
-                Stork.getInstance()
-                        .getService(serviceName)
+                stork.getService(serviceName)
                         .selectInstanceAndRecordStart(measureTime)
                         .subscribe()
                         .with(instance -> {
diff --git a/integration-tests/rest-client-reactive-stork/pom.xml b/integration-tests/rest-client-reactive-stork/pom.xml
index d2de2b01f10..b84cee3058b 100644
--- a/integration-tests/rest-client-reactive-stork/pom.xml
+++ b/integration-tests/rest-client-reactive-stork/pom.xml
@@ -22,6 +22,10 @@
             <groupId>io.quarkus</groupId>
             <artifactId>quarkus-rest-client-jackson</artifactId>
         </dependency>
+        <dependency>
+            <groupId>io.quarkus</groupId>
+            <artifactId>quarkus-smallrye-stork</artifactId>
+        </dependency>
         <dependency>
             <groupId>io.quarkus</groupId>
             <artifactId>quarkus-rest-jackson</artifactId>
@@ -93,6 +97,19 @@
                 </exclusion>
             </exclusions>
         </dependency>
+        <dependency>
+            <groupId>io.quarkus</groupId>
+            <artifactId>quarkus-smallrye-stork-deployment</artifactId>
+            <version>${project.version}</version>
+            <type>pom</type>
+            <scope>test</scope>
+            <exclusions>
+                <exclusion>
+                    <groupId>*</groupId>
+                    <artifactId>*</artifactId>
+                </exclusion>
+            </exclusions>
+        </dependency>
         <dependency>
             <groupId>io.quarkus</groupId>
             <artifactId>quarkus-vertx-http-deployment</artifactId>
