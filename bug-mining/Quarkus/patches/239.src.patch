diff --git a/devtools/gradle/gradle-model/src/main/java/io/quarkus/gradle/dependency/ConditionalDependenciesEnabler.java b/devtools/gradle/gradle-model/src/main/java/io/quarkus/gradle/dependency/ConditionalDependenciesEnabler.java
index 162dc917457..1611d0ff458 100644
--- a/devtools/gradle/gradle-model/src/main/java/io/quarkus/gradle/dependency/ConditionalDependenciesEnabler.java
+++ b/devtools/gradle/gradle-model/src/main/java/io/quarkus/gradle/dependency/ConditionalDependenciesEnabler.java
@@ -180,9 +180,10 @@ private Configuration createConditionalDependenciesConfiguration(Project project
         // (https://github.com/quarkusio/quarkus/issues/41825) and ./gradlew refreshVersions seems to break as well.
         Configuration conditionalDepConfiguration = project.getConfigurations().detachedConfiguration();
         enforcedPlatforms.getExcludeRules().forEach(rule -> {
-            conditionalDepConfiguration.exclude(Map.of(
-                    "group", rule.getGroup(),
-                    "module", rule.getModule()));
+            Map<String, String> excludeProperties = new HashMap<>();
+            excludeProperties.put("group", rule.getGroup());
+            excludeProperties.put("module", rule.getModule());
+            conditionalDepConfiguration.exclude(excludeProperties);
         });
         enforcedPlatforms.getAllDependencies().forEach(dependency -> {
             conditionalDepConfiguration.getDependencies().add(dependency);
