diff --git a/extensions/undertow/runtime/src/main/java/io/quarkus/undertow/runtime/UndertowDeploymentRecorder.java b/extensions/undertow/runtime/src/main/java/io/quarkus/undertow/runtime/UndertowDeploymentRecorder.java
index 5b125f47f90..8ad7fdadbf0 100644
--- a/extensions/undertow/runtime/src/main/java/io/quarkus/undertow/runtime/UndertowDeploymentRecorder.java
+++ b/extensions/undertow/runtime/src/main/java/io/quarkus/undertow/runtime/UndertowDeploymentRecorder.java
@@ -177,14 +177,12 @@ public RuntimeValue<DeploymentInfo> createDeployment(String name, Set<String> kn
         d.setDefaultResponseEncoding(responseCharacterEncoding);
         d.setDefaultEncoding(defaultCharset);
         d.setSessionIdGenerator(new QuarkusSessionIdGenerator());
-        d.setClassLoader(getClass().getClassLoader());
         d.setDeploymentName(name);
         d.setContextPath(mountPoint);
         d.setEagerFilterInit(true);
         ClassLoader cl = Thread.currentThread().getContextClassLoader();
         if (cl == null) {
-            cl = new ClassLoader() {
-            };
+            cl = ClassLoader.getSystemClassLoader();
         }
         d.setClassLoader(cl);
         //TODO: we need better handling of static resources
