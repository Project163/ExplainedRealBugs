{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/43997","repository_url":"https://api.github.com/repos/quarkusio/quarkus","labels_url":"https://api.github.com/repos/quarkusio/quarkus/issues/43997/labels{/name}","comments_url":"https://api.github.com/repos/quarkusio/quarkus/issues/43997/comments","events_url":"https://api.github.com/repos/quarkusio/quarkus/issues/43997/events","html_url":"https://github.com/quarkusio/quarkus/issues/43997","id":2602923089,"node_id":"I_kwDOCFbutM6bJXRR","number":43997,"title":"Some Native tests don't run due to failsafe <skip>true</skip>","user":{"login":"Karm","id":691097,"node_id":"MDQ6VXNlcjY5MTA5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/691097?v=4","gravatar_id":"","url":"https://api.github.com/users/Karm","html_url":"https://github.com/Karm","followers_url":"https://api.github.com/users/Karm/followers","following_url":"https://api.github.com/users/Karm/following{/other_user}","gists_url":"https://api.github.com/users/Karm/gists{/gist_id}","starred_url":"https://api.github.com/users/Karm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Karm/subscriptions","organizations_url":"https://api.github.com/users/Karm/orgs","repos_url":"https://api.github.com/users/Karm/repos","events_url":"https://api.github.com/users/Karm/events{/privacy}","received_events_url":"https://api.github.com/users/Karm/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1710069947,"node_id":"MDU6TGFiZWwxNzEwMDY5OTQ3","url":"https://api.github.com/repos/quarkusio/quarkus/labels/area/housekeeping","name":"area/housekeeping","color":"d1d86a","default":false,"description":"Issue type for generalized tasks not related to bugs or enhancements"},{"id":2497075451,"node_id":"MDU6TGFiZWwyNDk3MDc1NDUx","url":"https://api.github.com/repos/quarkusio/quarkus/labels/area/native-image","name":"area/native-image","color":"0366d6","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"gsmet","id":1279749,"node_id":"MDQ6VXNlcjEyNzk3NDk=","avatar_url":"https://avatars.githubusercontent.com/u/1279749?v=4","gravatar_id":"","url":"https://api.github.com/users/gsmet","html_url":"https://github.com/gsmet","followers_url":"https://api.github.com/users/gsmet/followers","following_url":"https://api.github.com/users/gsmet/following{/other_user}","gists_url":"https://api.github.com/users/gsmet/gists{/gist_id}","starred_url":"https://api.github.com/users/gsmet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gsmet/subscriptions","organizations_url":"https://api.github.com/users/gsmet/orgs","repos_url":"https://api.github.com/users/gsmet/repos","events_url":"https://api.github.com/users/gsmet/events{/privacy}","received_events_url":"https://api.github.com/users/gsmet/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"gsmet","id":1279749,"node_id":"MDQ6VXNlcjEyNzk3NDk=","avatar_url":"https://avatars.githubusercontent.com/u/1279749?v=4","gravatar_id":"","url":"https://api.github.com/users/gsmet","html_url":"https://github.com/gsmet","followers_url":"https://api.github.com/users/gsmet/followers","following_url":"https://api.github.com/users/gsmet/following{/other_user}","gists_url":"https://api.github.com/users/gsmet/gists{/gist_id}","starred_url":"https://api.github.com/users/gsmet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gsmet/subscriptions","organizations_url":"https://api.github.com/users/gsmet/orgs","repos_url":"https://api.github.com/users/gsmet/repos","events_url":"https://api.github.com/users/gsmet/events{/privacy}","received_events_url":"https://api.github.com/users/gsmet/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/quarkusio/quarkus/milestones/356","html_url":"https://github.com/quarkusio/quarkus/milestone/356","labels_url":"https://api.github.com/repos/quarkusio/quarkus/milestones/356/labels","id":11752399,"node_id":"MI_kwDOCFbutM4As1PP","number":356,"title":"3.15.2","description":"","creator":{"login":"gsmet","id":1279749,"node_id":"MDQ6VXNlcjEyNzk3NDk=","avatar_url":"https://avatars.githubusercontent.com/u/1279749?v=4","gravatar_id":"","url":"https://api.github.com/users/gsmet","html_url":"https://github.com/gsmet","followers_url":"https://api.github.com/users/gsmet/followers","following_url":"https://api.github.com/users/gsmet/following{/other_user}","gists_url":"https://api.github.com/users/gsmet/gists{/gist_id}","starred_url":"https://api.github.com/users/gsmet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gsmet/subscriptions","organizations_url":"https://api.github.com/users/gsmet/orgs","repos_url":"https://api.github.com/users/gsmet/repos","events_url":"https://api.github.com/users/gsmet/events{/privacy}","received_events_url":"https://api.github.com/users/gsmet/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":135,"state":"closed","created_at":"2024-10-18T12:01:11Z","updated_at":"2025-01-21T21:14:01Z","due_on":null,"closed_at":"2024-11-18T12:37:45Z"},"comments":3,"created_at":"2024-10-21T15:32:01Z","updated_at":"2024-11-13T12:52:06Z","closed_at":"2024-10-29T10:49:38Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Description\n\nWhile reviewing https://github.com/quarkusio/quarkus/pull/43829 I noticed the GHA has been giving us false negative, not running `awt` integration test.\n\nWhen I tried locally, I wasn't able to make maven run the awt testsuite with native-image either. The harness runs HotSpot tests, then it builds the native-image but it doesn't run any tests with it.\n\n```\n./mvnw verify -f integration-tests/pom.xml -pl awt  -Pnative\n```\n\nI did try to fiddle with various maven flags like `-DskipITs=false` to no avail.\n\nTrying to run the test in container had a similar result, the harness executed HotSpot tests, it went on to build the native executable using builder-image, then it built a runtime container image and copied the executable in it, then it started the runtime container and terminated there, not executing any actual tests.\n\n```\n./mvnw verify -f integration-tests/pom.xml -pl awt -Ddocker -Pnative -Dquarkus.native.container-build=true -Dquarkus.container-image.build=true -Dquarkus.native.builder-image=quay.io/quarkus/ubi-quarkus-mandrel-builder-image:jdk-21 -Dquarkus.native.container-runtime=podman -DskipITs=false 2>&1 | tee log.log\n\n```\n\nI had to manually patch the pom.xml to make it run the testsuite properly:\n\n```diff\ntester@mandrel2:~/karm/quarkus (2024-10-11-awt-processor-refactor *%=)$ git diff\ndiff --git a/integration-tests/awt/pom.xml b/integration-tests/awt/pom.xml\nindex f71302da2c2..eb290a5e037 100644\n--- a/integration-tests/awt/pom.xml\n+++ b/integration-tests/awt/pom.xml\n@@ -164,7 +164,7 @@\n             <plugin>\n                 <artifactId>maven-failsafe-plugin</artifactId>\n                 <configuration>\n-                    <skip>true</skip>\n+                    <skip>false</skip>\n                 </configuration>\n             </plugin>\n         </plugins>\n\n```\n\nIt seems that this is the change that has brought the `skip>true</skip>` in: https://github.com/quarkusio/quarkus/commit/9f3ba1922d2\n\n## Question\n\n * Isn't there any Maven flag missing from our GHA yaml? Which is it and how it was meant to be executed?\n * Aren't there many more native-image integration tests affected? Merely building the executables but silently not running any tests? A casual find && grep tells me that it might be the case.\n\nThx\nK.\n\n### Implementation ideas\n\n_No response_","closed_by":{"login":"gsmet","id":1279749,"node_id":"MDQ6VXNlcjEyNzk3NDk=","avatar_url":"https://avatars.githubusercontent.com/u/1279749?v=4","gravatar_id":"","url":"https://api.github.com/users/gsmet","html_url":"https://github.com/gsmet","followers_url":"https://api.github.com/users/gsmet/followers","following_url":"https://api.github.com/users/gsmet/following{/other_user}","gists_url":"https://api.github.com/users/gsmet/gists{/gist_id}","starred_url":"https://api.github.com/users/gsmet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gsmet/subscriptions","organizations_url":"https://api.github.com/users/gsmet/orgs","repos_url":"https://api.github.com/users/gsmet/repos","events_url":"https://api.github.com/users/gsmet/events{/privacy}","received_events_url":"https://api.github.com/users/gsmet/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/43997/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/quarkusio/quarkus/issues/43997/timeline","performed_via_github_app":null,"state_reason":"completed"}