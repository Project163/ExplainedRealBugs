{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/50571","repository_url":"https://api.github.com/repos/quarkusio/quarkus","labels_url":"https://api.github.com/repos/quarkusio/quarkus/issues/50571/labels{/name}","comments_url":"https://api.github.com/repos/quarkusio/quarkus/issues/50571/comments","events_url":"https://api.github.com/repos/quarkusio/quarkus/issues/50571/events","html_url":"https://github.com/quarkusio/quarkus/issues/50571","id":3516819348,"node_id":"I_kwDOCFbutM7RnmeU","number":50571,"title":"WorkspaceLoader fails if a Maven module tag references a pom file instead of a directory","user":{"login":"mcollovati","id":4648894,"node_id":"MDQ6VXNlcjQ2NDg4OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/4648894?v=4","gravatar_id":"","url":"https://api.github.com/users/mcollovati","html_url":"https://github.com/mcollovati","followers_url":"https://api.github.com/users/mcollovati/followers","following_url":"https://api.github.com/users/mcollovati/following{/other_user}","gists_url":"https://api.github.com/users/mcollovati/gists{/gist_id}","starred_url":"https://api.github.com/users/mcollovati/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcollovati/subscriptions","organizations_url":"https://api.github.com/users/mcollovati/orgs","repos_url":"https://api.github.com/users/mcollovati/repos","events_url":"https://api.github.com/users/mcollovati/events{/privacy}","received_events_url":"https://api.github.com/users/mcollovati/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":985346620,"node_id":"MDU6TGFiZWw5ODUzNDY2MjA=","url":"https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug","name":"kind/bug","color":"d73a4a","default":false,"description":"Something isn't working"},{"id":1282136257,"node_id":"MDU6TGFiZWwxMjgyMTM2MjU3","url":"https://api.github.com/repos/quarkusio/quarkus/labels/area/maven","name":"area/maven","color":"0366d6","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/quarkusio/quarkus/milestones/444","html_url":"https://github.com/quarkusio/quarkus/milestone/444","labels_url":"https://api.github.com/repos/quarkusio/quarkus/milestones/444/labels","id":13896792,"node_id":"MI_kwDOCFbutM4A1AxY","number":444,"title":"3.27.1","description":"","creator":{"login":"jmartisk","id":937315,"node_id":"MDQ6VXNlcjkzNzMxNQ==","avatar_url":"https://avatars.githubusercontent.com/u/937315?v=4","gravatar_id":"","url":"https://api.github.com/users/jmartisk","html_url":"https://github.com/jmartisk","followers_url":"https://api.github.com/users/jmartisk/followers","following_url":"https://api.github.com/users/jmartisk/following{/other_user}","gists_url":"https://api.github.com/users/jmartisk/gists{/gist_id}","starred_url":"https://api.github.com/users/jmartisk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmartisk/subscriptions","organizations_url":"https://api.github.com/users/jmartisk/orgs","repos_url":"https://api.github.com/users/jmartisk/repos","events_url":"https://api.github.com/users/jmartisk/events{/privacy}","received_events_url":"https://api.github.com/users/jmartisk/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":1,"closed_issues":108,"state":"open","created_at":"2025-10-15T10:26:00Z","updated_at":"2025-11-05T14:33:46Z","due_on":null,"closed_at":null},"comments":10,"created_at":"2025-10-15T07:51:21Z","updated_at":"2025-10-29T12:52:23Z","closed_at":"2025-10-16T17:25:18Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\n\nWe have a multimodule project, and one of the modules is a quarkus extension.\nThe structure is similar to the following (many modules are omitted for brevity)\n\n```\n├── vaadin\n├── vaadin-bom\n├── vaadin-core\n├── vaadin-gradle-plugin\n├── vaadin-platform-test\n├── vaadin-prod-bundle\n├── vaadin-quarkus\n│   ├── vaadin-quarkus-extension\n│   └── vaadin-quarkus-extension-deployment\n```\n\nIn the root POM file, some modules are pointing at POM files instead of directories, like in the following snippet.\n\n```xml\n<modules>\n    ...\n    <module>vaadin-gradle-plugin/pom-portal.xml</module>\n    ...    \n</modules>        \n```\n\nWith Quarkus 3.27 (we use the latest LTS version), the build of `vaadin-quarkus-extension` modules fails with the following errors.\n\n```\n[ERROR] Failed to execute goal io.quarkus:quarkus-extension-maven-plugin:3.27.0:extension-descriptor (default) on project vaadin-quarkus-extension: Execution default of goal io.quarkus:quarkus-extension-maven-plugin:3.27.0:extension-descriptor failed: The following errors were encountered while processing Quarkus application dependencies:\n[ERROR] 1) Failed to load POM from /xxxxx/vaadin-platform-test/pom-dev.xml/pom.xml\n[ERROR]   at io.quarkus.bootstrap.resolver.maven.workspace.WorkspaceLoader.readModel(WorkspaceLoader.java:63)\n[ERROR]   ...\n[ERROR] 2) Failed to load POM from /xxxxx/vaadin-gradle-plugin/pom-portal.xml/pom.xml\n[ERROR]   at io.quarkus.bootstrap.resolver.maven.workspace.WorkspaceLoader.readModel(WorkspaceLoader.java:63)\n[ERROR]   ...\n[ERROR] 3) Failed to load POM from /xxxxx/vaadin-prod-bundle/pom-unoptimized.xml/pom.xml\n[ERROR]   at io.quarkus.bootstrap.resolver.maven.workspace.WorkspaceLoader.readModel(WorkspaceLoader.java:63)\n[ERROR]   ...\n```\n\nThe problem seems to be that Quarkus always expects `<module>` entries to reference a directory, so it tries to find a POM file in a wrong location (e.g. `/xxxxx/vaadin-prod-bundle/pom-unoptimized.xml/pom.xml`).\n\nLooking at the Maven documentation (https://maven.apache.org/pom.html, Aggregation (or Multi-Module)\n section) it seems that using POM files with `<module>` is a valid configuration.\n \n > A pom packaged project may aggregate the build of a set of projects by listing them as modules, which are relative paths to the directories or the POM files of those projects.\n\nSo, I wonder if this could be a bug in the Quarkus workspace loader.\n\nTo be noted that the error does not occur with Quarkus 3.20.\n\n\nFull stacktrace\n\n```\n[INFO] --- quarkus-extension:3.27.0:extension-descriptor (default) @ vaadin-quarkus-extension ---\nOct 15, 2025 9:52:45 AM io.quarkus.bootstrap.resolver.maven.NonBlockingModelResolutionTaskRunner assertNoErrors\nERROR: The following errors were encountered while processing Quarkus application dependencies:\nOct 15, 2025 9:52:45 AM io.quarkus.bootstrap.resolver.maven.NonBlockingModelResolutionTaskRunner assertNoErrors\nERROR: 1)\njava.io.UncheckedIOException: Failed to load POM from /xxxxx/vaadin-platform-test/pom-dev.xml/pom.xml\n        at io.quarkus.bootstrap.resolver.maven.workspace.WorkspaceLoader.readModel(WorkspaceLoader.java:63)\n        at io.quarkus.bootstrap.resolver.maven.workspace.WorkspaceModulePom.getModel(WorkspaceModulePom.java:33)\n        at io.quarkus.bootstrap.resolver.maven.workspace.WorkspaceLoader.loadModule(WorkspaceLoader.java:208)\n        at io.quarkus.bootstrap.resolver.maven.workspace.WorkspaceLoader.lambda$load$0(WorkspaceLoader.java:133)\n        at io.quarkus.bootstrap.resolver.maven.NonBlockingModelResolutionTaskRunner.lambda$run$0(NonBlockingModelResolutionTaskRunner.java:34)\n        at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\n        at java.base/java.util.concurrent.CompletableFuture$AsyncRun.exec(CompletableFuture.java:1796)\n        at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)\n        at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1312)\n        at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1843)\n        at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1808)\n        at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)\nCaused by: java.nio.file.FileSystemException: /xxxxx/vaadin-platform-test/pom-dev.xml/pom.xml: Not a directory\n        at java.base/sun.nio.fs.UnixException.translateToIOException(UnixException.java:100)\n        at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:106)\n        at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:111)\n        at java.base/sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:261)\n        at java.base/java.nio.file.Files.newByteChannel(Files.java:380)\n        at java.base/java.nio.file.Files.newByteChannel(Files.java:432)\n        at java.base/java.nio.file.spi.FileSystemProvider.newInputStream(FileSystemProvider.java:420)\n        at java.base/java.nio.file.Files.newInputStream(Files.java:160)\n        at io.quarkus.bootstrap.resolver.maven.workspace.ModelUtils.readModel(ModelUtils.java:235)\n        at io.quarkus.bootstrap.resolver.maven.workspace.WorkspaceLoader.readModel(WorkspaceLoader.java:53)\n        ... 11 more\n\nOct 15, 2025 9:52:45 AM io.quarkus.bootstrap.resolver.maven.NonBlockingModelResolutionTaskRunner assertNoErrors\nERROR: 2)\njava.io.UncheckedIOException: Failed to load POM from /xxxxx/vaadin-gradle-plugin/pom-portal.xml/pom.xml\n        at io.quarkus.bootstrap.resolver.maven.workspace.WorkspaceLoader.readModel(WorkspaceLoader.java:63)\n        at io.quarkus.bootstrap.resolver.maven.workspace.WorkspaceModulePom.getModel(WorkspaceModulePom.java:33)\n        at io.quarkus.bootstrap.resolver.maven.workspace.WorkspaceLoader.loadModule(WorkspaceLoader.java:208)\n        at io.quarkus.bootstrap.resolver.maven.workspace.WorkspaceLoader.lambda$load$0(WorkspaceLoader.java:133)\n        at io.quarkus.bootstrap.resolver.maven.NonBlockingModelResolutionTaskRunner.lambda$run$0(NonBlockingModelResolutionTaskRunner.java:34)\n        at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\n        at java.base/java.util.concurrent.CompletableFuture$AsyncRun.exec(CompletableFuture.java:1796)\n        at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)\n        at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1312)\n        at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1843)\n        at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1808)\n        at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)\nCaused by: java.nio.file.FileSystemException: /xxxxx/vaadin-gradle-plugin/pom-portal.xml/pom.xml: Not a directory\n        at java.base/sun.nio.fs.UnixException.translateToIOException(UnixException.java:100)\n        at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:106)\n        at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:111)\n        at java.base/sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:261)\n        at java.base/java.nio.file.Files.newByteChannel(Files.java:380)\n        at java.base/java.nio.file.Files.newByteChannel(Files.java:432)\n        at java.base/java.nio.file.spi.FileSystemProvider.newInputStream(FileSystemProvider.java:420)\n        at java.base/java.nio.file.Files.newInputStream(Files.java:160)\n        at io.quarkus.bootstrap.resolver.maven.workspace.ModelUtils.readModel(ModelUtils.java:235)\n        at io.quarkus.bootstrap.resolver.maven.workspace.WorkspaceLoader.readModel(WorkspaceLoader.java:53)\n        ... 11 more\n\nOct 15, 2025 9:52:45 AM io.quarkus.bootstrap.resolver.maven.NonBlockingModelResolutionTaskRunner assertNoErrors\nERROR: 3)\njava.io.UncheckedIOException: Failed to load POM from /xxxxx/vaadin-prod-bundle/pom-unoptimized.xml/pom.xml\n        at io.quarkus.bootstrap.resolver.maven.workspace.WorkspaceLoader.readModel(WorkspaceLoader.java:63)\n        at io.quarkus.bootstrap.resolver.maven.workspace.WorkspaceModulePom.getModel(WorkspaceModulePom.java:33)\n        at io.quarkus.bootstrap.resolver.maven.workspace.WorkspaceLoader.loadModule(WorkspaceLoader.java:208)\n        at io.quarkus.bootstrap.resolver.maven.workspace.WorkspaceLoader.lambda$load$0(WorkspaceLoader.java:133)\n        at io.quarkus.bootstrap.resolver.maven.NonBlockingModelResolutionTaskRunner.lambda$run$0(NonBlockingModelResolutionTaskRunner.java:34)\n        at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804)\n        at java.base/java.util.concurrent.CompletableFuture$AsyncRun.exec(CompletableFuture.java:1796)\n        at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)\n        at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1312)\n        at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1843)\n        at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1808)\n        at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)\nCaused by: java.nio.file.FileSystemException: /xxxxx/vaadin-prod-bundle/pom-unoptimized.xml/pom.xml: Not a directory\n        at java.base/sun.nio.fs.UnixException.translateToIOException(UnixException.java:100)\n        at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:106)\n        at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:111)\n        at java.base/sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:261)\n        at java.base/java.nio.file.Files.newByteChannel(Files.java:380)\n        at java.base/java.nio.file.Files.newByteChannel(Files.java:432)\n        at java.base/java.nio.file.spi.FileSystemProvider.newInputStream(FileSystemProvider.java:420)\n        at java.base/java.nio.file.Files.newInputStream(Files.java:160)\n        at io.quarkus.bootstrap.resolver.maven.workspace.ModelUtils.readModel(ModelUtils.java:235)\n        at io.quarkus.bootstrap.resolver.maven.workspace.WorkspaceLoader.readModel(WorkspaceLoader.java:53)\n        ... 11 more\n```\n\nEDIT: update stacktrace because it was produced with Quarkus 3.24.0 instead of 3.27.0\n\n### Expected behavior\n\nQuarkus maven extension plugin should not fail to load the workspace when POM files are used to setup submodules in Maven projects.\n\n### Actual behavior\n\nThe plugin fails because it tries to resolve a wrong path for submodule POM.\n\n### How to Reproduce?\n\nCreate a multi-module maven project and make at least one of the `<module>` entries point to a POM file instead of a directory.\n\n### Output of `uname -a` or `ver`\n\nLinux  6.8.0-85-generic\n\n### Output of `java -version`\n\nTemurin-21.0.6+7\n\n### Quarkus version or git rev\n\n3.27.0\n\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\n\nMaven 3.9.11\n\n### Additional information\n\n_No response_","closed_by":{"login":"gsmet","id":1279749,"node_id":"MDQ6VXNlcjEyNzk3NDk=","avatar_url":"https://avatars.githubusercontent.com/u/1279749?v=4","gravatar_id":"","url":"https://api.github.com/users/gsmet","html_url":"https://github.com/gsmet","followers_url":"https://api.github.com/users/gsmet/followers","following_url":"https://api.github.com/users/gsmet/following{/other_user}","gists_url":"https://api.github.com/users/gsmet/gists{/gist_id}","starred_url":"https://api.github.com/users/gsmet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gsmet/subscriptions","organizations_url":"https://api.github.com/users/gsmet/orgs","repos_url":"https://api.github.com/users/gsmet/repos","events_url":"https://api.github.com/users/gsmet/events{/privacy}","received_events_url":"https://api.github.com/users/gsmet/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/50571/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/quarkusio/quarkus/issues/50571/timeline","performed_via_github_app":null,"state_reason":"completed"}