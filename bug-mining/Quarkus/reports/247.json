{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/49238","repository_url":"https://api.github.com/repos/quarkusio/quarkus","labels_url":"https://api.github.com/repos/quarkusio/quarkus/issues/49238/labels{/name}","comments_url":"https://api.github.com/repos/quarkusio/quarkus/issues/49238/comments","events_url":"https://api.github.com/repos/quarkusio/quarkus/issues/49238/events","html_url":"https://github.com/quarkusio/quarkus/issues/49238","id":3280325158,"node_id":"I_kwDOCFbutM7Dhcom","number":49238,"title":"ClassTooLargeException in JacocoProcessor during instrumentation","user":{"login":"dagrammy","id":14089875,"node_id":"MDQ6VXNlcjE0MDg5ODc1","avatar_url":"https://avatars.githubusercontent.com/u/14089875?v=4","gravatar_id":"","url":"https://api.github.com/users/dagrammy","html_url":"https://github.com/dagrammy","followers_url":"https://api.github.com/users/dagrammy/followers","following_url":"https://api.github.com/users/dagrammy/following{/other_user}","gists_url":"https://api.github.com/users/dagrammy/gists{/gist_id}","starred_url":"https://api.github.com/users/dagrammy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagrammy/subscriptions","organizations_url":"https://api.github.com/users/dagrammy/orgs","repos_url":"https://api.github.com/users/dagrammy/repos","events_url":"https://api.github.com/users/dagrammy/events{/privacy}","received_events_url":"https://api.github.com/users/dagrammy/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":7801196934,"node_id":"LA_kwDOCFbutM8AAAAB0PzRhg","url":"https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug-thirdparty","name":"kind/bug-thirdparty","color":"d73a4a","default":false,"description":"Bugs that are caused by third-party components and not causing a major dysfunction of core Quarkus."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/quarkusio/quarkus/milestones/423","html_url":"https://github.com/quarkusio/quarkus/milestone/423","labels_url":"https://api.github.com/repos/quarkusio/quarkus/milestones/423/labels","id":13446064,"node_id":"MI_kwDOCFbutM4AzSuw","number":423,"title":"3.25.2","description":"","creator":{"login":"gsmet","id":1279749,"node_id":"MDQ6VXNlcjEyNzk3NDk=","avatar_url":"https://avatars.githubusercontent.com/u/1279749?v=4","gravatar_id":"","url":"https://api.github.com/users/gsmet","html_url":"https://github.com/gsmet","followers_url":"https://api.github.com/users/gsmet/followers","following_url":"https://api.github.com/users/gsmet/following{/other_user}","gists_url":"https://api.github.com/users/gsmet/gists{/gist_id}","starred_url":"https://api.github.com/users/gsmet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gsmet/subscriptions","organizations_url":"https://api.github.com/users/gsmet/orgs","repos_url":"https://api.github.com/users/gsmet/repos","events_url":"https://api.github.com/users/gsmet/events{/privacy}","received_events_url":"https://api.github.com/users/gsmet/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":10,"state":"closed","created_at":"2025-08-07T13:50:59Z","updated_at":"2025-08-27T11:25:12Z","due_on":null,"closed_at":"2025-08-08T13:25:22Z"},"comments":15,"created_at":"2025-07-31T12:42:35Z","updated_at":"2025-08-08T08:20:53Z","closed_at":"2025-08-05T18:54:10Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\n\nHello everyone,\n\nI'm not sure if this problem belongs here or https://github.com/quarkiverse/quarkus-amazon-services.\n\nWe have updated our project to Quarkus 3.25. There is a problem with Jacoco and the AWS services, more precisely the `DefaultSsmAsyncClient`. \n\nDuring instrumentation there is a `ClassTooLargeException` concerning `DefaultSsmAsyncClient` in the quarkus `JacocoProcessor`\n\nStack trace (complete stack trace s. readme of reproducer repo)\n\n```\nCaused by: java.lang.RuntimeException: java.io.IOException: Error while instrumenting software.amazon.awssdk.services.ssm.DefaultSsmAsyncClient with JaCoCo 0.8.13.202504020838/78d5eff.\n\tat io.quarkus.jacoco.deployment.JacocoProcessor$1.apply(JacocoProcessor.java:93)\n\tat io.quarkus.jacoco.deployment.JacocoProcessor$1.apply(JacocoProcessor.java:83)\n\tat io.quarkus.deployment.steps.ClassTransformingBuildStep.transformClass(ClassTransformingBuildStep.java:350)\n\tat io.quarkus.deployment.steps.ClassTransformingBuildStep$2.call(ClassTransformingBuildStep.java:238)\n\tat io.quarkus.deployment.steps.ClassTransformingBuildStep$2.call(ClassTransformingBuildStep.java:225)\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)\n\t... 7 more\nCaused by: java.io.IOException: Error while instrumenting software.amazon.awssdk.services.ssm.DefaultSsmAsyncClient with JaCoCo 0.8.13.202504020838/78d5eff.\n\tat org.jacoco.core.instr.Instrumenter.instrumentError(Instrumenter.java:161)\n\tat org.jacoco.core.instr.Instrumenter.instrument(Instrumenter.java:111)\n\tat io.quarkus.jacoco.deployment.JacocoProcessor$1.apply(JacocoProcessor.java:87)\n\t... 12 more\nCaused by: org.objectweb.asm.ClassTooLargeException: Class too large: software/amazon/awssdk/services/ssm/DefaultSsmAsyncClient\n\tat org.objectweb.asm.ClassWriter.toByteArray(ClassWriter.java:616)\n\tat org.jacoco.core.instr.Instrumenter.instrument(Instrumenter.java:92)\n\tat org.jacoco.core.instr.Instrumenter.instrument(Instrumenter.java:109)\n\t... 13 more\n```\n\nI also tried to add the class to `quarkus.jacoco.excludes`, but this config property seems only to exclude classes from the report.\n\n### Expected behavior\n\nThe build is successful and Jacoco report generated.\n\n### Actual behavior\n\nThe build fails.\n\n### How to Reproduce?\n\nClone https://github.com/dagrammy/jacoco-ssm-reproducer and run `./gradlew build`.\n\n\n\n### Output of `uname -a` or `ver`\n\nDarwin  23.4.0 Darwin Kernel Version 23.4.0: Wed Feb 21 21:44:54 PST 2024; root:xnu-10063.101.15~2/RELEASE_ARM64_T6030 arm64\n\n### Output of `java -version`\n\nOpenJDK Runtime Environment GraalVM CE 21.0.2+13.1 (build 21.0.2+13-jvmci-23.1-b30)\n\n### Quarkus version or git rev\n\n3.25.0\n\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\n\nGradle 8.14\n\n### Additional information\n\n_No response_","closed_by":{"login":"gsmet","id":1279749,"node_id":"MDQ6VXNlcjEyNzk3NDk=","avatar_url":"https://avatars.githubusercontent.com/u/1279749?v=4","gravatar_id":"","url":"https://api.github.com/users/gsmet","html_url":"https://github.com/gsmet","followers_url":"https://api.github.com/users/gsmet/followers","following_url":"https://api.github.com/users/gsmet/following{/other_user}","gists_url":"https://api.github.com/users/gsmet/gists{/gist_id}","starred_url":"https://api.github.com/users/gsmet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gsmet/subscriptions","organizations_url":"https://api.github.com/users/gsmet/orgs","repos_url":"https://api.github.com/users/gsmet/repos","events_url":"https://api.github.com/users/gsmet/events{/privacy}","received_events_url":"https://api.github.com/users/gsmet/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/49238/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/quarkusio/quarkus/issues/49238/timeline","performed_via_github_app":null,"state_reason":"completed"}