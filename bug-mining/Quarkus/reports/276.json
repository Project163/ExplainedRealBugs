{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/50619","repository_url":"https://api.github.com/repos/quarkusio/quarkus","labels_url":"https://api.github.com/repos/quarkusio/quarkus/issues/50619/labels{/name}","comments_url":"https://api.github.com/repos/quarkusio/quarkus/issues/50619/comments","events_url":"https://api.github.com/repos/quarkusio/quarkus/issues/50619/events","html_url":"https://github.com/quarkusio/quarkus/issues/50619","id":3526435788,"node_id":"I_kwDOCFbutM7SMSPM","number":50619,"title":"FORMAT_FAILURE encountered in Camel logging from dev mode","user":{"login":"jamesnetherton","id":4721408,"node_id":"MDQ6VXNlcjQ3MjE0MDg=","avatar_url":"https://avatars.githubusercontent.com/u/4721408?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesnetherton","html_url":"https://github.com/jamesnetherton","followers_url":"https://api.github.com/users/jamesnetherton/followers","following_url":"https://api.github.com/users/jamesnetherton/following{/other_user}","gists_url":"https://api.github.com/users/jamesnetherton/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesnetherton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesnetherton/subscriptions","organizations_url":"https://api.github.com/users/jamesnetherton/orgs","repos_url":"https://api.github.com/users/jamesnetherton/repos","events_url":"https://api.github.com/users/jamesnetherton/events{/privacy}","received_events_url":"https://api.github.com/users/jamesnetherton/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1273039603,"node_id":"MDU6TGFiZWwxMjczMDM5NjAz","url":"https://api.github.com/repos/quarkusio/quarkus/labels/area/devmode","name":"area/devmode","color":"0366d6","default":false,"description":""},{"id":1283428650,"node_id":"MDU6TGFiZWwxMjgzNDI4NjUw","url":"https://api.github.com/repos/quarkusio/quarkus/labels/area/logging","name":"area/logging","color":"0366d6","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/quarkusio/quarkus/milestones/450","html_url":"https://github.com/quarkusio/quarkus/milestone/450","labels_url":"https://api.github.com/repos/quarkusio/quarkus/milestones/450/labels","id":14054530,"node_id":"MI_kwDOCFbutM4A1nSC","number":450,"title":"3.29.1","description":"","creator":{"login":"gsmet","id":1279749,"node_id":"MDQ6VXNlcjEyNzk3NDk=","avatar_url":"https://avatars.githubusercontent.com/u/1279749?v=4","gravatar_id":"","url":"https://api.github.com/users/gsmet","html_url":"https://github.com/gsmet","followers_url":"https://api.github.com/users/gsmet/followers","following_url":"https://api.github.com/users/gsmet/following{/other_user}","gists_url":"https://api.github.com/users/gsmet/gists{/gist_id}","starred_url":"https://api.github.com/users/gsmet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gsmet/subscriptions","organizations_url":"https://api.github.com/users/gsmet/orgs","repos_url":"https://api.github.com/users/gsmet/repos","events_url":"https://api.github.com/users/gsmet/events{/privacy}","received_events_url":"https://api.github.com/users/gsmet/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":42,"state":"closed","created_at":"2025-11-05T08:40:00Z","updated_at":"2025-11-05T16:20:24Z","due_on":null,"closed_at":"2025-11-05T16:20:24Z"},"comments":10,"created_at":"2025-10-17T14:42:25Z","updated_at":"2025-11-05T08:46:29Z","closed_at":"2025-10-30T12:49:08Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Originally reported for Camel Quarkus here:\n\nhttps://github.com/apache/camel-quarkus/issues/7843\n\nThere's a reproducer project here (run with `mvn clean quarkus:dev`):\n\nhttps://github.com/jam01/camel-log-repro/tree/main\n\nWhen an exception is thrown from within Camel route processing, Camel will include some extended information about the message exchange in the generated log message.\n\nCamel wraps the message exchange body within the log message between `{}` (not entirely sure why TBH). This seems to break JBoss logging formatting.\n\nE.g if the message body is a string like `foo`, then you get a log message string like:\n\n```\nMessage History (source location is disabled)\n---------------------------------------------------------------------------------------------------------------------------------------\nSource                                   ID                             Processor                                          Elapsed (ms)\n                                         route1/route1                  from[timer://foo?period=1s]                                  12\n                                         route1/setBody1                setBody[constant{foo}]                                        2\n```\n\nIn dev mode it results in (due to the `setBody[constant{foo}]`):\n\n```\nLogManager error of type FORMAT_FAILURE: Formatting error\njava.lang.IllegalArgumentException: can't parse argument number: foo\n\tat java.base/java.text.MessageFormat.makeFormat(MessageFormat.java:1479)\n\tat java.base/java.text.MessageFormat.applyPattern(MessageFormat.java:511)\n\tat java.base/java.text.MessageFormat.<init>(MessageFormat.java:382)\n\tat java.base/java.text.MessageFormat.format(MessageFormat.java:882)\n\tat org.jboss.logmanager.ExtFormatter.formatMessageLegacy(ExtFormatter.java:133)\n\tat org.jboss.logmanager.ExtFormatter.formatMessage(ExtFormatter.java:96)\n\tat org.jboss.logmanager.formatters.Formatters$16.renderRaw(Formatters.java:832)\n\tat org.jboss.logmanager.formatters.Formatters$JustifyingFormatStep.render(Formatters.java:227)\n\tat org.jboss.logmanager.formatters.MultistepFormatter.format(MultistepFormatter.java:90)\n\tat org.jboss.logmanager.ExtFormatter.format(ExtFormatter.java:58)\n\tat org.jboss.logmanager.handlers.WriterHandler.doPublish(WriterHandler.java:54)\n\tat org.jboss.logmanager.ExtHandler.publish(ExtHandler.java:88)\n\tat org.jboss.logmanager.ExtHandler.publishToNestedHandlers(ExtHandler.java:125)\n\tat io.quarkus.bootstrap.logging.QuarkusDelayedHandler.doPublish(QuarkusDelayedHandler.java:81)\n\tat org.jboss.logmanager.ExtHandler.publish(ExtHandler.java:88)\n\tat org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:437)\n\tat org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:479)\n\tat org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:479)\n\tat org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:479)\n\tat org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:479)\n\tat org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:479)\n\tat org.jboss.logmanager.LoggerNode.publish(LoggerNode.java:479)\n\tat org.jboss.logmanager.Logger.logRaw(Logger.java:921)\n\tat org.slf4j.impl.Slf4jLogger.log(Slf4jLogger.java:574)\n\tat org.slf4j.impl.Slf4jLogger.error(Slf4jLogger.java:515)\n\tat org.apache.camel.spi.CamelLogger.log(CamelLogger.java:205)\n\tat org.apache.camel.spi.CamelLogger.log(CamelLogger.java:222)\n\tat org.apache.camel.spi.CamelLogger.log(CamelLogger.java:113)\n\tat org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.logFailedDelivery(RedeliveryErrorHandler.java:631)\n\tat org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.prepareExchangeAfterFailureNotHandled(RedeliveryErrorHandler.java:578)\n\tat org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.prepareExchangeAfterFailure(RedeliveryErrorHandler.java:557)\n\tat org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handlePreviousFailure(RedeliveryErrorHandler.java:446)\n\tat org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:413)\n\tat org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.done(RedeliveryErrorHandler.java:392)\n\tat org.apache.camel.processor.ThrowExceptionProcessor.process(ThrowExceptionProcessor.java:82)\n\tat org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:440)\n\tat org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:416)\n\tat org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)\n\tat org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)\n\tat org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)\n\tat org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)\n\tat org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)\n\tat org.apache.camel.processor.Pipeline.process(Pipeline.java:162)\n\tat org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:370)\n\tat org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:346)\n\tat org.apache.camel.component.timer.TimerConsumer.sendTimerExchange(TimerConsumer.java:293)\n\tat org.apache.camel.component.timer.TimerConsumer$1.doRun(TimerConsumer.java:164)\n\tat org.apache.camel.component.timer.TimerConsumer$1.run(TimerConsumer.java:136)\n\tat java.base/java.util.TimerThread.mainLoop(Timer.java:566)\n\tat java.base/java.util.TimerThread.run(Timer.java:516)\nCaused by: java.lang.NumberFormatException: For input string: \"foo\"\n\tat java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67)\n\tat java.base/java.lang.Integer.parseInt(Integer.java:662)\n``` \n\nIn prod mode, things seem to be working ok. There's no exception visible in the logs emanating from JBoss Logging. ","closed_by":{"login":"gsmet","id":1279749,"node_id":"MDQ6VXNlcjEyNzk3NDk=","avatar_url":"https://avatars.githubusercontent.com/u/1279749?v=4","gravatar_id":"","url":"https://api.github.com/users/gsmet","html_url":"https://github.com/gsmet","followers_url":"https://api.github.com/users/gsmet/followers","following_url":"https://api.github.com/users/gsmet/following{/other_user}","gists_url":"https://api.github.com/users/gsmet/gists{/gist_id}","starred_url":"https://api.github.com/users/gsmet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gsmet/subscriptions","organizations_url":"https://api.github.com/users/gsmet/orgs","repos_url":"https://api.github.com/users/gsmet/repos","events_url":"https://api.github.com/users/gsmet/events{/privacy}","received_events_url":"https://api.github.com/users/gsmet/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/50619/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/quarkusio/quarkus/issues/50619/timeline","performed_via_github_app":null,"state_reason":"completed"}