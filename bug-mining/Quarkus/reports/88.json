{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/42865","repository_url":"https://api.github.com/repos/quarkusio/quarkus","labels_url":"https://api.github.com/repos/quarkusio/quarkus/issues/42865/labels{/name}","comments_url":"https://api.github.com/repos/quarkusio/quarkus/issues/42865/comments","events_url":"https://api.github.com/repos/quarkusio/quarkus/issues/42865/events","html_url":"https://github.com/quarkusio/quarkus/issues/42865","id":2494429427,"node_id":"I_kwDOCFbutM6Urfjz","number":42865,"title":"kafka_version label is unkown in native mode","user":{"login":"jcarranzan","id":75727563,"node_id":"MDQ6VXNlcjc1NzI3NTYz","avatar_url":"https://avatars.githubusercontent.com/u/75727563?v=4","gravatar_id":"","url":"https://api.github.com/users/jcarranzan","html_url":"https://github.com/jcarranzan","followers_url":"https://api.github.com/users/jcarranzan/followers","following_url":"https://api.github.com/users/jcarranzan/following{/other_user}","gists_url":"https://api.github.com/users/jcarranzan/gists{/gist_id}","starred_url":"https://api.github.com/users/jcarranzan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jcarranzan/subscriptions","organizations_url":"https://api.github.com/users/jcarranzan/orgs","repos_url":"https://api.github.com/users/jcarranzan/repos","events_url":"https://api.github.com/users/jcarranzan/events{/privacy}","received_events_url":"https://api.github.com/users/jcarranzan/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":985346620,"node_id":"MDU6TGFiZWw5ODUzNDY2MjA=","url":"https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug","name":"kind/bug","color":"d73a4a","default":false,"description":"Something isn't working"},{"id":1658790125,"node_id":"MDU6TGFiZWwxNjU4NzkwMTI1","url":"https://api.github.com/repos/quarkusio/quarkus/labels/area/kafka","name":"area/kafka","color":"0366d6","default":false,"description":""},{"id":2497075451,"node_id":"MDU6TGFiZWwyNDk3MDc1NDUx","url":"https://api.github.com/repos/quarkusio/quarkus/labels/area/native-image","name":"area/native-image","color":"0366d6","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"ozangunalp","id":294765,"node_id":"MDQ6VXNlcjI5NDc2NQ==","avatar_url":"https://avatars.githubusercontent.com/u/294765?v=4","gravatar_id":"","url":"https://api.github.com/users/ozangunalp","html_url":"https://github.com/ozangunalp","followers_url":"https://api.github.com/users/ozangunalp/followers","following_url":"https://api.github.com/users/ozangunalp/following{/other_user}","gists_url":"https://api.github.com/users/ozangunalp/gists{/gist_id}","starred_url":"https://api.github.com/users/ozangunalp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ozangunalp/subscriptions","organizations_url":"https://api.github.com/users/ozangunalp/orgs","repos_url":"https://api.github.com/users/ozangunalp/repos","events_url":"https://api.github.com/users/ozangunalp/events{/privacy}","received_events_url":"https://api.github.com/users/ozangunalp/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"ozangunalp","id":294765,"node_id":"MDQ6VXNlcjI5NDc2NQ==","avatar_url":"https://avatars.githubusercontent.com/u/294765?v=4","gravatar_id":"","url":"https://api.github.com/users/ozangunalp","html_url":"https://github.com/ozangunalp","followers_url":"https://api.github.com/users/ozangunalp/followers","following_url":"https://api.github.com/users/ozangunalp/following{/other_user}","gists_url":"https://api.github.com/users/ozangunalp/gists{/gist_id}","starred_url":"https://api.github.com/users/ozangunalp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ozangunalp/subscriptions","organizations_url":"https://api.github.com/users/ozangunalp/orgs","repos_url":"https://api.github.com/users/ozangunalp/repos","events_url":"https://api.github.com/users/ozangunalp/events{/privacy}","received_events_url":"https://api.github.com/users/ozangunalp/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/quarkusio/quarkus/milestones/349","html_url":"https://github.com/quarkusio/quarkus/milestone/349","labels_url":"https://api.github.com/repos/quarkusio/quarkus/milestones/349/labels","id":11519060,"node_id":"MI_kwDOCFbutM4Ar8RU","number":349,"title":"3.14.2","description":"","creator":{"login":"gsmet","id":1279749,"node_id":"MDQ6VXNlcjEyNzk3NDk=","avatar_url":"https://avatars.githubusercontent.com/u/1279749?v=4","gravatar_id":"","url":"https://api.github.com/users/gsmet","html_url":"https://github.com/gsmet","followers_url":"https://api.github.com/users/gsmet/followers","following_url":"https://api.github.com/users/gsmet/following{/other_user}","gists_url":"https://api.github.com/users/gsmet/gists{/gist_id}","starred_url":"https://api.github.com/users/gsmet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gsmet/subscriptions","organizations_url":"https://api.github.com/users/gsmet/orgs","repos_url":"https://api.github.com/users/gsmet/repos","events_url":"https://api.github.com/users/gsmet/events{/privacy}","received_events_url":"https://api.github.com/users/gsmet/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":117,"state":"closed","created_at":"2024-08-30T16:14:50Z","updated_at":"2024-09-30T09:32:23Z","due_on":null,"closed_at":"2024-09-04T10:38:46Z"},"comments":3,"created_at":"2024-08-29T13:20:52Z","updated_at":"2024-09-02T16:38:52Z","closed_at":"2024-09-02T12:23:42Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\r\n\r\nVerifying backport for 3.8.6 https://github.com/quarkusio/quarkus/pull/41278 (_Add kafka-version.properties as a native image resource _ ), and attempting to do a test coverage for our Quarkus test suite.\r\n\r\nI've noticed that the kafka_version=\"unknown\" label still appears during native mode execution\r\n\r\n\r\n### Expected behavior\r\n\r\n``kafka_consumer_request_total{client_id=\"kafka-consumer-words-in\",kafka_version=\"3.7.1}`\"`\r\n\r\n### Actual behavior\r\n\r\n`kafka_consumer_request_total{client_id=\"kafka-consumer-words-in\",kafka_version=\"unknown\"}`\r\n\r\n### How to Reproduce?\r\n\r\n\r\n1. Clone my reproducer:\r\n\r\n`    git clone -b kafkaversion-unknown-native https://github.com/jcarranzan/quarkus-reproducer.git `\r\n\r\n2.  Execute maven command:\r\n\r\n`mvn clean verify -Pnative`\r\n\r\n3. See at the end of logs on the native execution:\r\n    \r\n   ```\r\n ```\r\n    2024-08-29 15:10:17,902 INFO  [io.sma.rea.mes.kafka] (main) SRMSG18229: Configured topics for channel 'words-in': [words]\r\n2024-08-29 15:10:17,903 INFO  [io.sma.rea.mes.kafka] (main) SRMSG18214: Key deserializer omitted, using String as default\r\n2024-08-29 15:10:17,914 INFO  [io.sma.rea.mes.kafka] (smallrye-kafka-producer-thread-0) SRMSG18258: Kafka producer kafka-producer-words-out, connected to Kafka brokers 'OUTSIDE://localhost:32797', is configured to write records to 'words'\r\n2024-08-29 15:10:17,918 INFO  [io.sma.rea.mes.kafka] (smallrye-kafka-consumer-thread-0) SRMSG18257: Kafka consumer kafka-consumer-words-in, connected to Kafka brokers 'OUTSIDE://localhost:32797', belongs to the 'code-with-quarkus' consumer group and is configured to poll records from [words]\r\n2024-08-29 15:10:17,919 INFO  [io.quarkus] (main) code-with-quarkus 1.0.0-SNAPSHOT native (powered by Quarkus 3.14.1) started in 0.040s. Listening on: http://0.0.0.0:8081\r\n2024-08-29 15:10:17,919 INFO  [io.quarkus] (main) Profile prod activated. \r\n2024-08-29 15:10:17,919 INFO  [io.quarkus] (main) Installed features: [cdi, kafka-client, messaging, messaging-kafka, micrometer, resteasy, smallrye-context-propagation, vertx]\r\nRESPONEEEEEE  # TYPE kafka_consumer_fetch_manager_fetch_latency_max gauge\r\n# HELP kafka_consumer_fetch_manager_fetch_latency_max The max time taken for any fetch request.\r\nkafka_consumer_fetch_manager_fetch_latency_max{client_id=\"kafka-consumer-words-in\",kafka_version=\"unknown\"} 500.0\r\n# TYPE kafka_consumer_coordinator_rebalance_latency_max gauge\r\n# HELP kafka_consumer_coordinator_rebalance_latency_max The max time taken for a group to complete a successful rebalance, which may be composed of several failed re-trials until it succeeded\r\nkafka_consumer_coordinator_rebalance_latency_max{client_id=\"kafka-consumer-words-in\",kafka_version=\"unknown\"} 2.0\r\n```\r\n\r\n    \r\n\r\n    \r\n","closed_by":{"login":"gsmet","id":1279749,"node_id":"MDQ6VXNlcjEyNzk3NDk=","avatar_url":"https://avatars.githubusercontent.com/u/1279749?v=4","gravatar_id":"","url":"https://api.github.com/users/gsmet","html_url":"https://github.com/gsmet","followers_url":"https://api.github.com/users/gsmet/followers","following_url":"https://api.github.com/users/gsmet/following{/other_user}","gists_url":"https://api.github.com/users/gsmet/gists{/gist_id}","starred_url":"https://api.github.com/users/gsmet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gsmet/subscriptions","organizations_url":"https://api.github.com/users/gsmet/orgs","repos_url":"https://api.github.com/users/gsmet/repos","events_url":"https://api.github.com/users/gsmet/events{/privacy}","received_events_url":"https://api.github.com/users/gsmet/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/42865/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/quarkusio/quarkus/issues/42865/timeline","performed_via_github_app":null,"state_reason":"completed"}