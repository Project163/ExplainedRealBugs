{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/45676","repository_url":"https://api.github.com/repos/quarkusio/quarkus","labels_url":"https://api.github.com/repos/quarkusio/quarkus/issues/45676/labels{/name}","comments_url":"https://api.github.com/repos/quarkusio/quarkus/issues/45676/comments","events_url":"https://api.github.com/repos/quarkusio/quarkus/issues/45676/events","html_url":"https://github.com/quarkusio/quarkus/issues/45676","id":2794940111,"node_id":"I_kwDOCFbutM6ml2bP","number":45676,"title":"Quarkus reports a NoSuchMethod hiding the real cause when it fails to start","user":{"login":"ia3andy","id":2223984,"node_id":"MDQ6VXNlcjIyMjM5ODQ=","avatar_url":"https://avatars.githubusercontent.com/u/2223984?v=4","gravatar_id":"","url":"https://api.github.com/users/ia3andy","html_url":"https://github.com/ia3andy","followers_url":"https://api.github.com/users/ia3andy/followers","following_url":"https://api.github.com/users/ia3andy/following{/other_user}","gists_url":"https://api.github.com/users/ia3andy/gists{/gist_id}","starred_url":"https://api.github.com/users/ia3andy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ia3andy/subscriptions","organizations_url":"https://api.github.com/users/ia3andy/orgs","repos_url":"https://api.github.com/users/ia3andy/repos","events_url":"https://api.github.com/users/ia3andy/events{/privacy}","received_events_url":"https://api.github.com/users/ia3andy/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":985346620,"node_id":"MDU6TGFiZWw5ODUzNDY2MjA=","url":"https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug","name":"kind/bug","color":"d73a4a","default":false,"description":"Something isn't working"},{"id":1273027849,"node_id":"MDU6TGFiZWwxMjczMDI3ODQ5","url":"https://api.github.com/repos/quarkusio/quarkus/labels/area/core","name":"area/core","color":"0366d6","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/quarkusio/quarkus/milestones/372","html_url":"https://github.com/quarkusio/quarkus/milestone/372","labels_url":"https://api.github.com/repos/quarkusio/quarkus/milestones/372/labels","id":12181460,"node_id":"MI_kwDOCFbutM4Aud_U","number":372,"title":"3.15.4","description":"","creator":{"login":"gsmet","id":1279749,"node_id":"MDQ6VXNlcjEyNzk3NDk=","avatar_url":"https://avatars.githubusercontent.com/u/1279749?v=4","gravatar_id":"","url":"https://api.github.com/users/gsmet","html_url":"https://github.com/gsmet","followers_url":"https://api.github.com/users/gsmet/followers","following_url":"https://api.github.com/users/gsmet/following{/other_user}","gists_url":"https://api.github.com/users/gsmet/gists{/gist_id}","starred_url":"https://api.github.com/users/gsmet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gsmet/subscriptions","organizations_url":"https://api.github.com/users/gsmet/orgs","repos_url":"https://api.github.com/users/gsmet/repos","events_url":"https://api.github.com/users/gsmet/events{/privacy}","received_events_url":"https://api.github.com/users/gsmet/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":105,"state":"closed","created_at":"2025-01-17T08:42:44Z","updated_at":"2025-07-09T16:36:56Z","due_on":null,"closed_at":"2025-03-11T14:00:10Z"},"comments":5,"created_at":"2025-01-17T09:09:30Z","updated_at":"2025-02-20T12:33:02Z","closed_at":"2025-01-17T14:39:54Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\n\nQuarkus reports a NoSuchMethod hiding the real cause when it fails to start.\n\n```\n2025-01-17 10:05:30,287 ERROR [io.qua.dep.dev.IsolatedDevModeMain] (main) Failed to recover after failed start: java.lang.RuntimeException: java.lang.RuntimeException: java.lang.RuntimeException: java.lang.NoSuchMethodException: java.util.OptionalInt.<init>()\n\tat io.quarkus.vertx.http.runtime.VertxHttpRecorder.startServerAfterFailedStart(VertxHttpRecorder.java:308)\n\tat io.quarkus.vertx.http.runtime.devmode.VertxHttpHotReplacementSetup.handleFailedInitialStart(VertxHttpHotReplacementSetup.java:73)\n\tat io.quarkus.deployment.dev.RuntimeUpdatesProcessor.startupFailed(RuntimeUpdatesProcessor.java:1299)\n\tat io.quarkus.deployment.dev.IsolatedDevModeMain.firstStart(IsolatedDevModeMain.java:126)\n\tat io.quarkus.deployment.dev.IsolatedDevModeMain.accept(IsolatedDevModeMain.java:428)\n\tat io.quarkus.deployment.dev.IsolatedDevModeMain.accept(IsolatedDevModeMain.java:55)\n\tat io.quarkus.bootstrap.app.CuratedApplication.runInCl(CuratedApplication.java:138)\n\tat io.quarkus.bootstrap.app.CuratedApplication.runInAugmentClassLoader(CuratedApplication.java:93)\n\tat io.quarkus.deployment.dev.DevModeMain.start(DevModeMain.java:131)\n\tat io.quarkus.deployment.dev.DevModeMain.main(DevModeMain.java:62)\nCaused by: java.lang.RuntimeException: java.lang.RuntimeException: java.lang.NoSuchMethodException: java.util.OptionalInt.<init>()\n\tat io.quarkus.runtime.configuration.ConfigInstantiator.handleObject(ConfigInstantiator.java:139)\n\tat io.quarkus.runtime.configuration.ConfigInstantiator.handleObject(ConfigInstantiator.java:78)\n\tat io.quarkus.runtime.configuration.ConfigInstantiator.handleObject(ConfigInstantiator.java:57)\n\tat io.quarkus.vertx.http.runtime.VertxHttpRecorder.startServerAfterFailedStart(VertxHttpRecorder.java:277)\n\t... 9 more\nCaused by: java.lang.RuntimeException: java.lang.NoSuchMethodException: java.util.OptionalInt.<init>()\n\tat io.quarkus.runtime.configuration.ConfigInstantiator.handleObject(ConfigInstantiator.java:139)\n\tat io.quarkus.runtime.configuration.ConfigInstantiator.handleMap(ConfigInstantiator.java:178)\n\tat io.quarkus.runtime.configuration.ConfigInstantiator.handleObject(ConfigInstantiator.java:121)\n\t... 12 more\nCaused by: java.lang.NoSuchMethodException: java.util.OptionalInt.<init>()\n\tat java.base/java.lang.Class.getConstructor0(Class.java:3833)\n\tat java.base/java.lang.Class.getConstructor(Class.java:2501)\n\tat io.quarkus.runtime.configuration.ConfigInstantiator.handleObject(ConfigInstantiator.java:106)\n\t... 14 more\n```\n\nThis only happens when using this in the config:\n```properties\n%dev.quarkus.http.static-resources.caching-enabled=false\n%dev.quarkus.http.filter.static.header.\"Cache-Control\"=no-cache\n%dev.quarkus.http.filter.static.matches=/static/bundle/.+\n%dev.quarkus.http.filter.static.methods=GET\n````\n\n\nI am not sure why it doesn't happen when there is no initial error.\n\nIt is causes by:\nhttps://github.com/quarkusio/quarkus/blob/main/extensions/vertx-http/runtime/src/main/java/io/quarkus/vertx/http/runtime/FilterConfig.java#L37\n(public java.util.OptionalInt io.quarkus.vertx.http.runtime.FilterConfig.order)\n\n### Expected behavior\n\nShould show the real issue\n\n### Actual behavior\n\nShow the wrong issue\n\n### How to Reproduce?\n\nquarkus dev on:\nhttps://github.com/ia3andy/reproducer-nsm.git\n\n### Output of `uname -a` or `ver`\n\n_No response_\n\n### Output of `java -version`\n\n_No response_\n\n### Quarkus version or git rev\n\n3.17.7\n\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\n\n_No response_\n\n### Additional information\n\n_No response_","closed_by":{"login":"gsmet","id":1279749,"node_id":"MDQ6VXNlcjEyNzk3NDk=","avatar_url":"https://avatars.githubusercontent.com/u/1279749?v=4","gravatar_id":"","url":"https://api.github.com/users/gsmet","html_url":"https://github.com/gsmet","followers_url":"https://api.github.com/users/gsmet/followers","following_url":"https://api.github.com/users/gsmet/following{/other_user}","gists_url":"https://api.github.com/users/gsmet/gists{/gist_id}","starred_url":"https://api.github.com/users/gsmet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gsmet/subscriptions","organizations_url":"https://api.github.com/users/gsmet/orgs","repos_url":"https://api.github.com/users/gsmet/repos","events_url":"https://api.github.com/users/gsmet/events{/privacy}","received_events_url":"https://api.github.com/users/gsmet/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/45676/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/quarkusio/quarkus/issues/45676/timeline","performed_via_github_app":null,"state_reason":"completed"}