{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/46968","repository_url":"https://api.github.com/repos/quarkusio/quarkus","labels_url":"https://api.github.com/repos/quarkusio/quarkus/issues/46968/labels{/name}","comments_url":"https://api.github.com/repos/quarkusio/quarkus/issues/46968/comments","events_url":"https://api.github.com/repos/quarkusio/quarkus/issues/46968/events","html_url":"https://github.com/quarkusio/quarkus/issues/46968","id":2943921393,"node_id":"I_kwDOCFbutM6veKzx","number":46968,"title":"[Mandrel/GraalVM for JDK 25+14] kafka-sasl native integration test fails with MissingResourceException","user":{"login":"jerboaa","id":357222,"node_id":"MDQ6VXNlcjM1NzIyMg==","avatar_url":"https://avatars.githubusercontent.com/u/357222?v=4","gravatar_id":"","url":"https://api.github.com/users/jerboaa","html_url":"https://github.com/jerboaa","followers_url":"https://api.github.com/users/jerboaa/followers","following_url":"https://api.github.com/users/jerboaa/following{/other_user}","gists_url":"https://api.github.com/users/jerboaa/gists{/gist_id}","starred_url":"https://api.github.com/users/jerboaa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jerboaa/subscriptions","organizations_url":"https://api.github.com/users/jerboaa/orgs","repos_url":"https://api.github.com/users/jerboaa/repos","events_url":"https://api.github.com/users/jerboaa/events{/privacy}","received_events_url":"https://api.github.com/users/jerboaa/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1658790125,"node_id":"MDU6TGFiZWwxNjU4NzkwMTI1","url":"https://api.github.com/repos/quarkusio/quarkus/labels/area/kafka","name":"area/kafka","color":"0366d6","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"zakkak","id":1435395,"node_id":"MDQ6VXNlcjE0MzUzOTU=","avatar_url":"https://avatars.githubusercontent.com/u/1435395?v=4","gravatar_id":"","url":"https://api.github.com/users/zakkak","html_url":"https://github.com/zakkak","followers_url":"https://api.github.com/users/zakkak/followers","following_url":"https://api.github.com/users/zakkak/following{/other_user}","gists_url":"https://api.github.com/users/zakkak/gists{/gist_id}","starred_url":"https://api.github.com/users/zakkak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zakkak/subscriptions","organizations_url":"https://api.github.com/users/zakkak/orgs","repos_url":"https://api.github.com/users/zakkak/repos","events_url":"https://api.github.com/users/zakkak/events{/privacy}","received_events_url":"https://api.github.com/users/zakkak/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"zakkak","id":1435395,"node_id":"MDQ6VXNlcjE0MzUzOTU=","avatar_url":"https://avatars.githubusercontent.com/u/1435395?v=4","gravatar_id":"","url":"https://api.github.com/users/zakkak","html_url":"https://github.com/zakkak","followers_url":"https://api.github.com/users/zakkak/followers","following_url":"https://api.github.com/users/zakkak/following{/other_user}","gists_url":"https://api.github.com/users/zakkak/gists{/gist_id}","starred_url":"https://api.github.com/users/zakkak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zakkak/subscriptions","organizations_url":"https://api.github.com/users/zakkak/orgs","repos_url":"https://api.github.com/users/zakkak/repos","events_url":"https://api.github.com/users/zakkak/events{/privacy}","received_events_url":"https://api.github.com/users/zakkak/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/quarkusio/quarkus/milestones/392","html_url":"https://github.com/quarkusio/quarkus/milestone/392","labels_url":"https://api.github.com/repos/quarkusio/quarkus/milestones/392/labels","id":12652753,"node_id":"MI_kwDOCFbutM4AwRDR","number":392,"title":"3.21.1","description":"","creator":{"login":"gsmet","id":1279749,"node_id":"MDQ6VXNlcjEyNzk3NDk=","avatar_url":"https://avatars.githubusercontent.com/u/1279749?v=4","gravatar_id":"","url":"https://api.github.com/users/gsmet","html_url":"https://github.com/gsmet","followers_url":"https://api.github.com/users/gsmet/followers","following_url":"https://api.github.com/users/gsmet/following{/other_user}","gists_url":"https://api.github.com/users/gsmet/gists{/gist_id}","starred_url":"https://api.github.com/users/gsmet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gsmet/subscriptions","organizations_url":"https://api.github.com/users/gsmet/orgs","repos_url":"https://api.github.com/users/gsmet/repos","events_url":"https://api.github.com/users/gsmet/events{/privacy}","received_events_url":"https://api.github.com/users/gsmet/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":32,"state":"closed","created_at":"2025-04-01T17:19:26Z","updated_at":"2025-08-13T11:23:40Z","due_on":null,"closed_at":"2025-04-02T11:54:38Z"},"comments":3,"created_at":"2025-03-24T17:09:11Z","updated_at":"2025-04-01T17:30:18Z","closed_at":"2025-03-28T12:10:17Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"We see a failing native Kafka test in our CI. Specifically `SaslKafkaConsumerTest.testReception` is what is failing. It fails with:\n\n```\n__  ____  __  _____   ___  __ ____  ______ \n --/ __ \\/ / / / _ | / _ \\/ //_/ / / / __/ \n -/ /_/ / /_/ / __ |/ , _/ ,< / /_/ /\\ \\   \n--\\___\\_\\____/_/ |_/_/|_/_/|_|\\____/___/   \n2025-03-24 17:56:38,277 INFO  [io.quarkus] (main) quarkus-integration-test-kafka-sasl 999-SNAPSHOT native (powered by Quarkus 999-SNAPSHOT) started in 0.014s. Listening on: http://0.0.0.0:8081\n2025-03-24 17:56:38,278 INFO  [io.quarkus] (main) Profile prod activated. \n2025-03-24 17:56:38,278 INFO  [io.quarkus] (main) Installed features: [cdi, kafka-client, micrometer, resteasy, resteasy-jackson, smallrye-context-propagation, smallrye-health, vertx]\n2025-03-24 17:56:38,852 WARN  [org.apa.kaf.cli.NetworkClient] (kafka-producer-network-thread | sasl-test-producer) [Producer clientId=sasl-test-producer] The metadata response from the cluster reported a recoverable issue with correlation id 1 : {test-sasl-consumer=LEADER_NOT_AVAILABLE}\n2025-03-24 17:56:39,363 ERROR [io.qua.ver.htt.run.QuarkusErrorHandler] (executor-thread-1) HTTP Request to /sasl failed, error id: 3990457f-faf0-4572-8519-7f6608b00393-1: org.jboss.resteasy.spi.UnhandledException: org.apache.kafka.common.KafkaException: Failed to construct kafka consumer\n\tat org.jboss.resteasy.core.ExceptionHandler.handleException(ExceptionHandler.java:357)\n\tat org.jboss.resteasy.core.SynchronousDispatcher.writeException(SynchronousDispatcher.java:205)\n\tat org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:452)\n\tat org.jboss.resteasy.core.SynchronousDispatcher.lambda$invokePropagateNotFound$6(SynchronousDispatcher.java:275)\n\tat org.jboss.resteasy.core.SynchronousDispatcher.lambda$preprocess$0(SynchronousDispatcher.java:154)\n\tat org.jboss.resteasy.core.interception.jaxrs.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:321)\n\tat org.jboss.resteasy.core.SynchronousDispatcher.preprocess(SynchronousDispatcher.java:157)\n\tat org.jboss.resteasy.core.SynchronousDispatcher.invokePropagateNotFound(SynchronousDispatcher.java:260)\n\tat io.quarkus.resteasy.runtime.standalone.RequestDispatcher.service(RequestDispatcher.java:86)\n\tat io.quarkus.resteasy.runtime.standalone.VertxRequestHandler.dispatch(VertxRequestHandler.java:151)\n\tat io.quarkus.resteasy.runtime.standalone.VertxRequestHandler$1.run(VertxRequestHandler.java:97)\n\tat io.quarkus.vertx.core.runtime.VertxCoreRecorder$15.runWith(VertxCoreRecorder.java:638)\n\tat org.jboss.threads.EnhancedQueueExecutor$Task.doRunWith(EnhancedQueueExecutor.java:2675)\n\tat org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2654)\n\tat org.jboss.threads.EnhancedQueueExecutor.runThreadBody(EnhancedQueueExecutor.java:1627)\n\tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1594)\n\tat org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:11)\n\tat org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:11)\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n\tat java.base@25-beta/java.lang.Thread.runWith(Thread.java:1460)\n\tat java.base@25-beta/java.lang.Thread.run(Thread.java:1447)\n\tat org.graalvm.nativeimage.builder/com.oracle.svm.core.thread.PlatformThreads.threadStartRoutine(PlatformThreads.java:832)\n\tat org.graalvm.nativeimage.builder/com.oracle.svm.core.thread.PlatformThreads.threadStartRoutine(PlatformThreads.java:808)\nCaused by: org.apache.kafka.common.KafkaException: Failed to construct kafka consumer\n\tat org.apache.kafka.clients.consumer.internals.ClassicKafkaConsumer.<init>(ClassicKafkaConsumer.java:270)\n\tat org.apache.kafka.clients.consumer.internals.ConsumerDelegateCreator.create(ConsumerDelegateCreator.java:65)\n\tat org.apache.kafka.clients.consumer.KafkaConsumer.<init>(KafkaConsumer.java:600)\n\tat org.apache.kafka.clients.consumer.KafkaConsumer.<init>(KafkaConsumer.java:595)\n\tat org.apache.kafka.clients.consumer.KafkaConsumer.<init>(KafkaConsumer.java:576)\n\tat org.apache.kafka.clients.consumer.KafkaConsumer.<init>(KafkaConsumer.java:556)\n\tat io.quarkus.it.kafka.sasl.SaslKafkaEndpoint.createConsumer(SaslKafkaEndpoint.java:66)\n\tat io.quarkus.it.kafka.sasl.SaslKafkaEndpoint.create(SaslKafkaEndpoint.java:35)\n\tat io.quarkus.it.kafka.sasl.SaslKafkaEndpoint_Bean.doCreate(Unknown Source)\n\tat io.quarkus.it.kafka.sasl.SaslKafkaEndpoint_Bean.create(Unknown Source)\n\tat io.quarkus.it.kafka.sasl.SaslKafkaEndpoint_Bean.create(Unknown Source)\n\tat io.quarkus.arc.impl.AbstractSharedContext.createInstanceHandle(AbstractSharedContext.java:119)\n\tat io.quarkus.arc.impl.AbstractSharedContext$1.get(AbstractSharedContext.java:38)\n\tat io.quarkus.arc.impl.AbstractSharedContext$1.get(AbstractSharedContext.java:35)\n\tat io.quarkus.arc.impl.LazyValue.get(LazyValue.java:32)\n\tat io.quarkus.arc.impl.ComputingCache.computeIfAbsent(ComputingCache.java:69)\n\tat io.quarkus.arc.impl.ComputingCacheContextInstances.computeIfAbsent(ComputingCacheContextInstances.java:19)\n\tat io.quarkus.arc.impl.AbstractSharedContext.get(AbstractSharedContext.java:35)\n\tat io.quarkus.it.kafka.sasl.SaslKafkaEndpoint_Bean.get(Unknown Source)\n\tat io.quarkus.it.kafka.sasl.SaslKafkaEndpoint_Bean.get(Unknown Source)\n\tat io.quarkus.arc.impl.ArcContainerImpl.beanInstanceHandle(ArcContainerImpl.java:570)\n\tat io.quarkus.arc.impl.ArcContainerImpl.beanInstanceHandle(ArcContainerImpl.java:550)\n\tat io.quarkus.arc.impl.ArcContainerImpl.beanInstanceHandle(ArcContainerImpl.java:583)\n\tat io.quarkus.arc.impl.ArcContainerImpl$3.get(ArcContainerImpl.java:337)\n\tat io.quarkus.arc.impl.ArcContainerImpl$3.get(ArcContainerImpl.java:334)\n\tat io.quarkus.resteasy.common.runtime.QuarkusConstructorInjector.construct(QuarkusConstructorInjector.java:52)\n\tat org.jboss.resteasy.plugins.server.resourcefactory.POJOResourceFactory.createResource(POJOResourceFactory.java:64)\n\tat org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:349)\n\tat org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:70)\n\tat org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:429)\n\t... 20 more\nCaused by: org.apache.kafka.common.KafkaException: Failed to create new NetworkClient\n\tat org.apache.kafka.clients.ClientUtils.createNetworkClient(ClientUtils.java:255)\n\tat org.apache.kafka.clients.ClientUtils.createNetworkClient(ClientUtils.java:163)\n\tat org.apache.kafka.clients.consumer.internals.ConsumerUtils.createConsumerNetworkClient(ConsumerUtils.java:90)\n\tat org.apache.kafka.clients.consumer.internals.ClassicKafkaConsumer.<init>(ClassicKafkaConsumer.java:197)\n\t... 49 more\nCaused by: org.apache.kafka.common.KafkaException: java.util.MissingResourceException: Can't find bundle for base name sun.security.util.resources.security, locale en_US\n\tat org.apache.kafka.common.network.SaslChannelBuilder.configure(SaslChannelBuilder.java:187)\n\tat org.apache.kafka.common.network.ChannelBuilders.create(ChannelBuilders.java:193)\n\tat org.apache.kafka.common.network.ChannelBuilders.clientChannelBuilder(ChannelBuilders.java:82)\n\tat org.apache.kafka.clients.ClientUtils.createChannelBuilder(ClientUtils.java:120)\n\tat org.apache.kafka.clients.ClientUtils.createNetworkClient(ClientUtils.java:224)\n\t... 52 more\nCaused by: java.util.MissingResourceException: Can't find bundle for base name sun.security.util.resources.security, locale en_US\n\tat java.base@25-beta/java.util.ResourceBundle.throwMissingResourceException(ResourceBundle.java:2012)\n\tat java.base@25-beta/java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1664)\n\tat java.base@25-beta/java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:122)\n\tat java.base@25-beta/java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1529)\n\tat java.base@25-beta/java.util.ResourceBundle.getBundle(ResourceBundle.java:848)\n\tat java.base@25-beta/java.util.concurrent.ConcurrentHashMap.computeIfAbsent(ConcurrentHashMap.java:1724)\n\tat java.base@25-beta/sun.security.util.ResourcesMgr.getBundle(ResourcesMgr.java:54)\n\tat java.base@25-beta/sun.security.util.ResourcesMgr.getString(ResourcesMgr.java:40)\n\tat java.base@25-beta/javax.security.auth.Subject$SecureSet.add(Subject.java:1037)\n\tat java.base@25-beta/java.util.Collections$SynchronizedCollection.add(Collections.java:2332)\n\tat org.apache.kafka.common.security.plain.PlainLoginModule.initialize(PlainLoginModule.java:40)\n\tat org.apache.kafka.common.security.authenticator.SaslClientCallbackHandler.configure(SaslClientCallbackHandler.java:64)\n\tat org.apache.kafka.common.network.SaslChannelBuilder.configure(SaslChannelBuilder.java:154)\n\t... 56 more\n```\n\n**Steps to reproduce**\n1. Get a GraalVM CE build for JDK 25+14. For example download it from our CI [here](https://github.com/graalvm/mandrel/actions/runs/14029548134/artifacts/2805704416).\n2. Run the native integration test with quarkus main (revision `3ef5d91380677a3d6c367ad0272fc1942fb9a4cb`) for `kafka-sasl`.\n\n**Additional info**\n\nExample failure with GraalVM for JDK 25 community is here:\nhttps://github.com/graalvm/mandrel/actions/runs/14029548134/job/39275704990#step:12:909\n\nSeems to also reproduce with a Mandrel for JDK 25+14 local build for me (graal master revision `cceca3206c26f1b270db1a84a1a754c5e6951b48`).\n\nThe native integration test seems to work fine with `MANDREL 23.1.7-dev JDK 21.0.7-beta+4-ea`.","closed_by":{"login":"zakkak","id":1435395,"node_id":"MDQ6VXNlcjE0MzUzOTU=","avatar_url":"https://avatars.githubusercontent.com/u/1435395?v=4","gravatar_id":"","url":"https://api.github.com/users/zakkak","html_url":"https://github.com/zakkak","followers_url":"https://api.github.com/users/zakkak/followers","following_url":"https://api.github.com/users/zakkak/following{/other_user}","gists_url":"https://api.github.com/users/zakkak/gists{/gist_id}","starred_url":"https://api.github.com/users/zakkak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zakkak/subscriptions","organizations_url":"https://api.github.com/users/zakkak/orgs","repos_url":"https://api.github.com/users/zakkak/repos","events_url":"https://api.github.com/users/zakkak/events{/privacy}","received_events_url":"https://api.github.com/users/zakkak/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/46968/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/quarkusio/quarkus/issues/46968/timeline","performed_via_github_app":null,"state_reason":"completed"}