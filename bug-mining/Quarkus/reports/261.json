{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/50265","repository_url":"https://api.github.com/repos/quarkusio/quarkus","labels_url":"https://api.github.com/repos/quarkusio/quarkus/issues/50265/labels{/name}","comments_url":"https://api.github.com/repos/quarkusio/quarkus/issues/50265/comments","events_url":"https://api.github.com/repos/quarkusio/quarkus/issues/50265/events","html_url":"https://github.com/quarkusio/quarkus/issues/50265","id":3450213516,"node_id":"I_kwDOCFbutM7NphSM","number":50265,"title":"3.28.1: `java.util.zip.ZipException: duplicate entry` in Quarkus generated jar(s)","user":{"login":"snazy","id":957468,"node_id":"MDQ6VXNlcjk1NzQ2OA==","avatar_url":"https://avatars.githubusercontent.com/u/957468?v=4","gravatar_id":"","url":"https://api.github.com/users/snazy","html_url":"https://github.com/snazy","followers_url":"https://api.github.com/users/snazy/followers","following_url":"https://api.github.com/users/snazy/following{/other_user}","gists_url":"https://api.github.com/users/snazy/gists{/gist_id}","starred_url":"https://api.github.com/users/snazy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snazy/subscriptions","organizations_url":"https://api.github.com/users/snazy/orgs","repos_url":"https://api.github.com/users/snazy/repos","events_url":"https://api.github.com/users/snazy/events{/privacy}","received_events_url":"https://api.github.com/users/snazy/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":985346620,"node_id":"MDU6TGFiZWw5ODUzNDY2MjA=","url":"https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug","name":"kind/bug","color":"d73a4a","default":false,"description":"Something isn't working"},{"id":1273027849,"node_id":"MDU6TGFiZWwxMjczMDI3ODQ5","url":"https://api.github.com/repos/quarkusio/quarkus/labels/area/core","name":"area/core","color":"0366d6","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/quarkusio/quarkus/milestones/442","html_url":"https://github.com/quarkusio/quarkus/milestone/442","labels_url":"https://api.github.com/repos/quarkusio/quarkus/milestones/442/labels","id":13783927,"node_id":"MI_kwDOCFbutM4A0lN3","number":442,"title":"3.28.2","description":"","creator":{"login":"gsmet","id":1279749,"node_id":"MDQ6VXNlcjEyNzk3NDk=","avatar_url":"https://avatars.githubusercontent.com/u/1279749?v=4","gravatar_id":"","url":"https://api.github.com/users/gsmet","html_url":"https://github.com/gsmet","followers_url":"https://api.github.com/users/gsmet/followers","following_url":"https://api.github.com/users/gsmet/following{/other_user}","gists_url":"https://api.github.com/users/gsmet/gists{/gist_id}","starred_url":"https://api.github.com/users/gsmet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gsmet/subscriptions","organizations_url":"https://api.github.com/users/gsmet/orgs","repos_url":"https://api.github.com/users/gsmet/repos","events_url":"https://api.github.com/users/gsmet/events{/privacy}","received_events_url":"https://api.github.com/users/gsmet/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":18,"state":"closed","created_at":"2025-09-29T16:25:59Z","updated_at":"2025-10-29T12:18:20Z","due_on":null,"closed_at":"2025-10-01T13:37:45Z"},"comments":7,"created_at":"2025-09-24T16:59:30Z","updated_at":"2025-09-29T16:31:07Z","closed_at":"2025-09-26T07:48:51Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Describe the bug\n\nFor Quarkus 3.28.1, CI reports `j,u.z.ZipException: duplicate entry...` errors for every `quarkusBuild` Gradle task execution. 3.27.0 looks fine.\n\n[Renovate Quarkus 3.28.1 bump PR](https://github.com/apache/polaris/pull/2648). Can be reproduced locally as well.\n\nThe issue is _not_ particularly in the `quarkusBuild` task implementation, but raised in a [custom Gradle code](https://github.com/apache/polaris/blob/091fe6f6a269528d95e4d43f7aa2ef90f90cd093/build-logic/src/main/kotlin/Utilities.kt#L76-L106) to make the `quarkus-run.jar`, `generated-bytecode.jar` and `transformed-bytecode.jar` files a (bit more) reproducible by re-recreating those with a fixed file modification timestamp for all zip entries.\n\nHowever, the exception is thrown because there is a duplicate entry in at least one of the jars created by Quarkus.\n\nIn the particular case it is `duplicate entry: io/quarkus/opentelemetry/runtime/config/runtime/exporter/OtlpExporterConfig$$CMImpl.class`.\n\nReproducer: checkout the renovate-PR branch, run `./gradlew :polaris-server:quarkusBuild --stacktrace`.\n\nThe above works fine up to Quarkus 3.27.0.\n\nNoting: the `ZipException` is _not_ raised from Quarkus code, but our custom code, but the duplicate ZIP entry in the Quarkus generated jar is real.\n\nFrom `generated-bytecode.jar`:\n```\n     6018  1970-01-02 01:00   io/quarkus/opentelemetry/runtime/config/runtime/exporter/OtlpExporterConfig$$CMImpl.class\n     6018  1970-01-02 01:00   io/quarkus/opentelemetry/runtime/config/runtime/exporter/OtlpExporterConfig$$CMImpl.class\n     2775  1970-01-02 01:00   io/quarkus/opentelemetry/runtime/config/runtime/exporter/OtlpExporterConfig$KeyCert$$CMImpl.class\n     2775  1970-01-02 01:00   io/quarkus/opentelemetry/runtime/config/runtime/exporter/OtlpExporterConfig$KeyCert$$CMImpl.class\n     3579  1970-01-02 01:00   io/quarkus/opentelemetry/runtime/config/runtime/exporter/OtlpExporterConfig$ProxyConfig$$CMImpl.class\n     3579  1970-01-02 01:00   io/quarkus/opentelemetry/runtime/config/runtime/exporter/OtlpExporterConfig$ProxyConfig$$CMImpl.class\n     2565  1970-01-02 01:00   io/quarkus/opentelemetry/runtime/config/runtime/exporter/OtlpExporterConfig$TrustCert$$CMImpl.class\n     2565  1970-01-02 01:00   io/quarkus/opentelemetry/runtime/config/runtime/exporter/OtlpExporterConfig$TrustCert$$CMImpl.class\n     6026  1970-01-02 01:00   io/quarkus/opentelemetry/runtime/config/runtime/exporter/OtlpExporterLogsConfig$$CMImpl.class\n     6556  1970-01-02 01:00   io/quarkus/opentelemetry/runtime/config/runtime/exporter/OtlpExporterMetricsConfig$$CMImpl.class\n    10065  1970-01-02 01:00   io/quarkus/opentelemetry/runtime/config/runtime/exporter/OtlpExporterRuntimeConfig$$CMImpl.class\n     6030  1970-01-02 01:00   io/quarkus/opentelemetry/runtime/config/runtime/exporter/OtlpExporterTracesConfig$$CMImpl.class\n```\n\n(Noticed the hard-coded modification timestamp, which is nice to see :) )","closed_by":{"login":"gsmet","id":1279749,"node_id":"MDQ6VXNlcjEyNzk3NDk=","avatar_url":"https://avatars.githubusercontent.com/u/1279749?v=4","gravatar_id":"","url":"https://api.github.com/users/gsmet","html_url":"https://github.com/gsmet","followers_url":"https://api.github.com/users/gsmet/followers","following_url":"https://api.github.com/users/gsmet/following{/other_user}","gists_url":"https://api.github.com/users/gsmet/gists{/gist_id}","starred_url":"https://api.github.com/users/gsmet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gsmet/subscriptions","organizations_url":"https://api.github.com/users/gsmet/orgs","repos_url":"https://api.github.com/users/gsmet/repos","events_url":"https://api.github.com/users/gsmet/events{/privacy}","received_events_url":"https://api.github.com/users/gsmet/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/50265/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/quarkusio/quarkus/issues/50265/timeline","performed_via_github_app":null,"state_reason":"completed"}