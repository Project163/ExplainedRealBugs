[{"id":12624263438,"node_id":"LE_lADOCFbutM6HDh8HzwAAAALwdvkO","url":"https://api.github.com/repos/quarkusio/quarkus/issues/events/12624263438","actor":{"login":"mkouba","id":913004,"node_id":"MDQ6VXNlcjkxMzAwNA==","avatar_url":"https://avatars.githubusercontent.com/u/913004?v=4","gravatar_id":"","url":"https://api.github.com/users/mkouba","html_url":"https://github.com/mkouba","followers_url":"https://api.github.com/users/mkouba/followers","following_url":"https://api.github.com/users/mkouba/following{/other_user}","gists_url":"https://api.github.com/users/mkouba/gists{/gist_id}","starred_url":"https://api.github.com/users/mkouba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkouba/subscriptions","organizations_url":"https://api.github.com/users/mkouba/orgs","repos_url":"https://api.github.com/users/mkouba/repos","events_url":"https://api.github.com/users/mkouba/events{/privacy}","received_events_url":"https://api.github.com/users/mkouba/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-04-26T13:58:08Z","label":{"name":"kind/enhancement","color":"a2eeef"},"performed_via_github_app":null},{"id":12624263448,"node_id":"LE_lADOCFbutM6HDh8HzwAAAALwdvkY","url":"https://api.github.com/repos/quarkusio/quarkus/issues/events/12624263448","actor":{"login":"mkouba","id":913004,"node_id":"MDQ6VXNlcjkxMzAwNA==","avatar_url":"https://avatars.githubusercontent.com/u/913004?v=4","gravatar_id":"","url":"https://api.github.com/users/mkouba","html_url":"https://github.com/mkouba","followers_url":"https://api.github.com/users/mkouba/followers","following_url":"https://api.github.com/users/mkouba/following{/other_user}","gists_url":"https://api.github.com/users/mkouba/gists{/gist_id}","starred_url":"https://api.github.com/users/mkouba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkouba/subscriptions","organizations_url":"https://api.github.com/users/mkouba/orgs","repos_url":"https://api.github.com/users/mkouba/repos","events_url":"https://api.github.com/users/mkouba/events{/privacy}","received_events_url":"https://api.github.com/users/mkouba/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-04-26T13:58:08Z","label":{"name":"area/websockets","color":"0366d6"},"performed_via_github_app":null},{"id":12624263528,"node_id":"AE_lADOCFbutM6HDh8HzwAAAALwdvlo","url":"https://api.github.com/repos/quarkusio/quarkus/issues/events/12624263528","actor":{"login":"mkouba","id":913004,"node_id":"MDQ6VXNlcjkxMzAwNA==","avatar_url":"https://avatars.githubusercontent.com/u/913004?v=4","gravatar_id":"","url":"https://api.github.com/users/mkouba","html_url":"https://github.com/mkouba","followers_url":"https://api.github.com/users/mkouba/followers","following_url":"https://api.github.com/users/mkouba/following{/other_user}","gists_url":"https://api.github.com/users/mkouba/gists{/gist_id}","starred_url":"https://api.github.com/users/mkouba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkouba/subscriptions","organizations_url":"https://api.github.com/users/mkouba/orgs","repos_url":"https://api.github.com/users/mkouba/repos","events_url":"https://api.github.com/users/mkouba/events{/privacy}","received_events_url":"https://api.github.com/users/mkouba/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2024-04-26T13:58:09Z","assignee":{"login":"sberyozkin","id":467639,"node_id":"MDQ6VXNlcjQ2NzYzOQ==","avatar_url":"https://avatars.githubusercontent.com/u/467639?v=4","gravatar_id":"","url":"https://api.github.com/users/sberyozkin","html_url":"https://github.com/sberyozkin","followers_url":"https://api.github.com/users/sberyozkin/followers","following_url":"https://api.github.com/users/sberyozkin/following{/other_user}","gists_url":"https://api.github.com/users/sberyozkin/gists{/gist_id}","starred_url":"https://api.github.com/users/sberyozkin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sberyozkin/subscriptions","organizations_url":"https://api.github.com/users/sberyozkin/orgs","repos_url":"https://api.github.com/users/sberyozkin/repos","events_url":"https://api.github.com/users/sberyozkin/events{/privacy}","received_events_url":"https://api.github.com/users/sberyozkin/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":12624263560,"node_id":"AE_lADOCFbutM6HDh8HzwAAAALwdvmI","url":"https://api.github.com/repos/quarkusio/quarkus/issues/events/12624263560","actor":{"login":"mkouba","id":913004,"node_id":"MDQ6VXNlcjkxMzAwNA==","avatar_url":"https://avatars.githubusercontent.com/u/913004?v=4","gravatar_id":"","url":"https://api.github.com/users/mkouba","html_url":"https://github.com/mkouba","followers_url":"https://api.github.com/users/mkouba/followers","following_url":"https://api.github.com/users/mkouba/following{/other_user}","gists_url":"https://api.github.com/users/mkouba/gists{/gist_id}","starred_url":"https://api.github.com/users/mkouba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkouba/subscriptions","organizations_url":"https://api.github.com/users/mkouba/orgs","repos_url":"https://api.github.com/users/mkouba/repos","events_url":"https://api.github.com/users/mkouba/events{/privacy}","received_events_url":"https://api.github.com/users/mkouba/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2024-04-26T13:58:09Z","assignee":{"login":"michalvavrik","id":43821672,"node_id":"MDQ6VXNlcjQzODIxNjcy","avatar_url":"https://avatars.githubusercontent.com/u/43821672?v=4","gravatar_id":"","url":"https://api.github.com/users/michalvavrik","html_url":"https://github.com/michalvavrik","followers_url":"https://api.github.com/users/michalvavrik/followers","following_url":"https://api.github.com/users/michalvavrik/following{/other_user}","gists_url":"https://api.github.com/users/michalvavrik/gists{/gist_id}","starred_url":"https://api.github.com/users/michalvavrik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michalvavrik/subscriptions","organizations_url":"https://api.github.com/users/michalvavrik/orgs","repos_url":"https://api.github.com/users/michalvavrik/repos","events_url":"https://api.github.com/users/michalvavrik/events{/privacy}","received_events_url":"https://api.github.com/users/michalvavrik/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":12624264164,"node_id":"LE_lADOCFbutM6HDh8HzwAAAALwdvvk","url":"https://api.github.com/repos/quarkusio/quarkus/issues/events/12624264164","actor":{"login":"quarkus-bot[bot]","id":75068438,"node_id":"MDM6Qm90NzUwNjg0Mzg=","avatar_url":"https://avatars.githubusercontent.com/in/90234?v=4","gravatar_id":"","url":"https://api.github.com/users/quarkus-bot%5Bbot%5D","html_url":"https://github.com/apps/quarkus-bot","followers_url":"https://api.github.com/users/quarkus-bot%5Bbot%5D/followers","following_url":"https://api.github.com/users/quarkus-bot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/quarkus-bot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/quarkus-bot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/quarkus-bot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/quarkus-bot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/quarkus-bot%5Bbot%5D/repos","events_url":"https://api.github.com/users/quarkus-bot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/quarkus-bot%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-04-26T13:58:12Z","label":{"name":"area/security","color":"0366d6"},"performed_via_github_app":null},{"actor":{"login":"mkouba","id":913004,"node_id":"MDQ6VXNlcjkxMzAwNA==","avatar_url":"https://avatars.githubusercontent.com/u/913004?v=4","gravatar_id":"","url":"https://api.github.com/users/mkouba","html_url":"https://github.com/mkouba","followers_url":"https://api.github.com/users/mkouba/followers","following_url":"https://api.github.com/users/mkouba/following{/other_user}","gists_url":"https://api.github.com/users/mkouba/gists{/gist_id}","starred_url":"https://api.github.com/users/mkouba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkouba/subscriptions","organizations_url":"https://api.github.com/users/mkouba/orgs","repos_url":"https://api.github.com/users/mkouba/repos","events_url":"https://api.github.com/users/mkouba/events{/privacy}","received_events_url":"https://api.github.com/users/mkouba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-26T13:58:40Z","updated_at":"2024-04-26T13:58:40Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/40307","repository_url":"https://api.github.com/repos/quarkusio/quarkus","labels_url":"https://api.github.com/repos/quarkusio/quarkus/issues/40307/labels{/name}","comments_url":"https://api.github.com/repos/quarkusio/quarkus/issues/40307/comments","events_url":"https://api.github.com/repos/quarkusio/quarkus/issues/40307/events","html_url":"https://github.com/quarkusio/quarkus/issues/40307","id":2265716642,"node_id":"I_kwDOCFbutM6HDBei","number":40307,"title":"WebSocket + Role-based authentication stopped working with Quarkus 3.9.x: Security Identity is not available","user":{"login":"lyrst","id":57271116,"node_id":"MDQ6VXNlcjU3MjcxMTE2","avatar_url":"https://avatars.githubusercontent.com/u/57271116?v=4","gravatar_id":"","url":"https://api.github.com/users/lyrst","html_url":"https://github.com/lyrst","followers_url":"https://api.github.com/users/lyrst/followers","following_url":"https://api.github.com/users/lyrst/following{/other_user}","gists_url":"https://api.github.com/users/lyrst/gists{/gist_id}","starred_url":"https://api.github.com/users/lyrst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lyrst/subscriptions","organizations_url":"https://api.github.com/users/lyrst/orgs","repos_url":"https://api.github.com/users/lyrst/repos","events_url":"https://api.github.com/users/lyrst/events{/privacy}","received_events_url":"https://api.github.com/users/lyrst/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":985346620,"node_id":"MDU6TGFiZWw5ODUzNDY2MjA=","url":"https://api.github.com/repos/quarkusio/quarkus/labels/kind/bug","name":"kind/bug","color":"d73a4a","default":false,"description":"Something isn't working"},{"id":1282139374,"node_id":"MDU6TGFiZWwxMjgyMTM5Mzc0","url":"https://api.github.com/repos/quarkusio/quarkus/labels/area/security","name":"area/security","color":"0366d6","default":false,"description":""},{"id":1696394231,"node_id":"MDU6TGFiZWwxNjk2Mzk0MjMx","url":"https://api.github.com/repos/quarkusio/quarkus/labels/area/undertow-websockets","name":"area/undertow-websockets","color":"0366d6","default":false,"description":""},{"id":2748318141,"node_id":"MDU6TGFiZWwyNzQ4MzE4MTQx","url":"https://api.github.com/repos/quarkusio/quarkus/labels/area/websockets","name":"area/websockets","color":"0366d6","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/quarkusio/quarkus/milestones/328","html_url":"https://github.com/quarkusio/quarkus/milestone/328","labels_url":"https://api.github.com/repos/quarkusio/quarkus/milestones/328/labels","id":11051630,"node_id":"MI_kwDOCFbutM4AqKJu","number":328,"title":"3.8.5","description":"","creator":{"login":"gsmet","id":1279749,"node_id":"MDQ6VXNlcjEyNzk3NDk=","avatar_url":"https://avatars.githubusercontent.com/u/1279749?v=4","gravatar_id":"","url":"https://api.github.com/users/gsmet","html_url":"https://github.com/gsmet","followers_url":"https://api.github.com/users/gsmet/followers","following_url":"https://api.github.com/users/gsmet/following{/other_user}","gists_url":"https://api.github.com/users/gsmet/gists{/gist_id}","starred_url":"https://api.github.com/users/gsmet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gsmet/subscriptions","organizations_url":"https://api.github.com/users/gsmet/orgs","repos_url":"https://api.github.com/users/gsmet/repos","events_url":"https://api.github.com/users/gsmet/events{/privacy}","received_events_url":"https://api.github.com/users/gsmet/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":112,"state":"closed","created_at":"2024-05-14T13:22:35Z","updated_at":"2024-06-05T11:10:12Z","due_on":null,"closed_at":"2024-06-05T11:10:12Z"},"comments":30,"created_at":"2024-04-26T12:48:07Z","updated_at":"2024-05-22T13:27:00Z","closed_at":"2024-05-03T13:53:12Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":139914932,"node_id":"MDEwOlJlcG9zaXRvcnkxMzk5MTQ5MzI=","name":"quarkus","full_name":"quarkusio/quarkus","private":false,"owner":{"login":"quarkusio","id":47638783,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQ3NjM4Nzgz","avatar_url":"https://avatars.githubusercontent.com/u/47638783?v=4","gravatar_id":"","url":"https://api.github.com/users/quarkusio","html_url":"https://github.com/quarkusio","followers_url":"https://api.github.com/users/quarkusio/followers","following_url":"https://api.github.com/users/quarkusio/following{/other_user}","gists_url":"https://api.github.com/users/quarkusio/gists{/gist_id}","starred_url":"https://api.github.com/users/quarkusio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/quarkusio/subscriptions","organizations_url":"https://api.github.com/users/quarkusio/orgs","repos_url":"https://api.github.com/users/quarkusio/repos","events_url":"https://api.github.com/users/quarkusio/events{/privacy}","received_events_url":"https://api.github.com/users/quarkusio/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/quarkusio/quarkus","description":"Quarkus: Supersonic Subatomic Java. ","fork":false,"url":"https://api.github.com/repos/quarkusio/quarkus","forks_url":"https://api.github.com/repos/quarkusio/quarkus/forks","keys_url":"https://api.github.com/repos/quarkusio/quarkus/keys{/key_id}","collaborators_url":"https://api.github.com/repos/quarkusio/quarkus/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/quarkusio/quarkus/teams","hooks_url":"https://api.github.com/repos/quarkusio/quarkus/hooks","issue_events_url":"https://api.github.com/repos/quarkusio/quarkus/issues/events{/number}","events_url":"https://api.github.com/repos/quarkusio/quarkus/events","assignees_url":"https://api.github.com/repos/quarkusio/quarkus/assignees{/user}","branches_url":"https://api.github.com/repos/quarkusio/quarkus/branches{/branch}","tags_url":"https://api.github.com/repos/quarkusio/quarkus/tags","blobs_url":"https://api.github.com/repos/quarkusio/quarkus/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/quarkusio/quarkus/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/quarkusio/quarkus/git/refs{/sha}","trees_url":"https://api.github.com/repos/quarkusio/quarkus/git/trees{/sha}","statuses_url":"https://api.github.com/repos/quarkusio/quarkus/statuses/{sha}","languages_url":"https://api.github.com/repos/quarkusio/quarkus/languages","stargazers_url":"https://api.github.com/repos/quarkusio/quarkus/stargazers","contributors_url":"https://api.github.com/repos/quarkusio/quarkus/contributors","subscribers_url":"https://api.github.com/repos/quarkusio/quarkus/subscribers","subscription_url":"https://api.github.com/repos/quarkusio/quarkus/subscription","commits_url":"https://api.github.com/repos/quarkusio/quarkus/commits{/sha}","git_commits_url":"https://api.github.com/repos/quarkusio/quarkus/git/commits{/sha}","comments_url":"https://api.github.com/repos/quarkusio/quarkus/comments{/number}","issue_comment_url":"https://api.github.com/repos/quarkusio/quarkus/issues/comments{/number}","contents_url":"https://api.github.com/repos/quarkusio/quarkus/contents/{+path}","compare_url":"https://api.github.com/repos/quarkusio/quarkus/compare/{base}...{head}","merges_url":"https://api.github.com/repos/quarkusio/quarkus/merges","archive_url":"https://api.github.com/repos/quarkusio/quarkus/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/quarkusio/quarkus/downloads","issues_url":"https://api.github.com/repos/quarkusio/quarkus/issues{/number}","pulls_url":"https://api.github.com/repos/quarkusio/quarkus/pulls{/number}","milestones_url":"https://api.github.com/repos/quarkusio/quarkus/milestones{/number}","notifications_url":"https://api.github.com/repos/quarkusio/quarkus/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/quarkusio/quarkus/labels{/name}","releases_url":"https://api.github.com/repos/quarkusio/quarkus/releases{/id}","deployments_url":"https://api.github.com/repos/quarkusio/quarkus/deployments","created_at":"2018-07-06T00:44:20Z","updated_at":"2025-11-10T07:15:05Z","pushed_at":"2025-11-08T18:53:38Z","git_url":"git://github.com/quarkusio/quarkus.git","ssh_url":"git@github.com:quarkusio/quarkus.git","clone_url":"https://github.com/quarkusio/quarkus.git","svn_url":"https://github.com/quarkusio/quarkus","homepage":"https://quarkus.io","size":441963,"stargazers_count":15189,"watchers_count":15189,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":3001,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":2707,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["cloud-native","hacktoberfest","java","kubernetes","reactive"],"visibility":"public","forks":3001,"open_issues":2707,"watchers":15189,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Describe the bug\r\n\r\nI hava a WebSocket-endpoint that is secured with the \"RolesAllowed\"-annotation. \r\nIn order to secure the websocket endpint I followed the approach that is described here https://github.com/quarkusio/quarkus/issues/29919\r\n\r\nThe issue that the Test `testFoo1Endpoint` does not even run with a `NullPointerException`.\r\n\r\nAs soon as I switch to Quarkus 3.8.4 the tests fails with an assertion-related error.\r\n\r\n### Expected behavior\r\n\r\nThe `testFoo1Endpoint`-tests is able to run without the `NullPointerException`.\r\n\r\n### Actual behavior\r\n\r\nThe `testFoo1Endpoint`-tests is fails with a `NullPointerException`.\r\n\r\n### How to Reproduce?\r\n\r\nRun the following example code.\r\n\r\n[quarkus-sec-issue.zip](https://github.com/quarkusio/quarkus/files/15130826/quarkus-sec-issue.zip)\r\n\r\n\r\n### Output of `uname -a` or `ver`\r\n\r\nDarwin Kernel Version 23.4.0: Fri Mar 15 00:12:25 PDT 2024; root:xnu-10063.101.17~1/RELEASE_ARM64_T6030 arm64\r\n\r\n### Output of `java -version`\r\n\r\n_No response_\r\n\r\n### Quarkus version or git rev\r\n\r\n3.9.4\r\n\r\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\r\n\r\nmvn\r\n\r\n### Additional information\r\n\r\n_No response_","reactions":{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/40307/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/quarkusio/quarkus/issues/40307/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"sberyozkin","id":467639,"node_id":"MDQ6VXNlcjQ2NzYzOQ==","avatar_url":"https://avatars.githubusercontent.com/u/467639?v=4","gravatar_id":"","url":"https://api.github.com/users/sberyozkin","html_url":"https://github.com/sberyozkin","followers_url":"https://api.github.com/users/sberyozkin/followers","following_url":"https://api.github.com/users/sberyozkin/following{/other_user}","gists_url":"https://api.github.com/users/sberyozkin/gists{/gist_id}","starred_url":"https://api.github.com/users/sberyozkin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sberyozkin/subscriptions","organizations_url":"https://api.github.com/users/sberyozkin/orgs","repos_url":"https://api.github.com/users/sberyozkin/repos","events_url":"https://api.github.com/users/sberyozkin/events{/privacy}","received_events_url":"https://api.github.com/users/sberyozkin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-29T15:12:21Z","updated_at":"2024-04-29T15:12:21Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/issues/523","repository_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j","labels_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/issues/523/labels{/name}","comments_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/issues/523/comments","events_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/issues/523/events","html_url":"https://github.com/quarkiverse/quarkus-langchain4j/issues/523","id":2269187139,"node_id":"I_kwDOKsyLSM6HQQxD","number":523,"title":"Support CDI MemoryIdProvider","user":{"login":"sberyozkin","id":467639,"node_id":"MDQ6VXNlcjQ2NzYzOQ==","avatar_url":"https://avatars.githubusercontent.com/u/467639?v=4","gravatar_id":"","url":"https://api.github.com/users/sberyozkin","html_url":"https://github.com/sberyozkin","followers_url":"https://api.github.com/users/sberyozkin/followers","following_url":"https://api.github.com/users/sberyozkin/following{/other_user}","gists_url":"https://api.github.com/users/sberyozkin/gists{/gist_id}","starred_url":"https://api.github.com/users/sberyozkin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sberyozkin/subscriptions","organizations_url":"https://api.github.com/users/sberyozkin/orgs","repos_url":"https://api.github.com/users/sberyozkin/repos","events_url":"https://api.github.com/users/sberyozkin/events{/privacy}","received_events_url":"https://api.github.com/users/sberyozkin/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":22,"created_at":"2024-04-29T14:22:09Z","updated_at":"2024-05-20T14:42:59Z","closed_at":"2024-05-20T14:40:28Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":718048072,"node_id":"R_kgDOKsyLSA","name":"quarkus-langchain4j","full_name":"quarkiverse/quarkus-langchain4j","private":false,"owner":{"login":"quarkiverse","id":69191779,"node_id":"MDEyOk9yZ2FuaXphdGlvbjY5MTkxNzc5","avatar_url":"https://avatars.githubusercontent.com/u/69191779?v=4","gravatar_id":"","url":"https://api.github.com/users/quarkiverse","html_url":"https://github.com/quarkiverse","followers_url":"https://api.github.com/users/quarkiverse/followers","following_url":"https://api.github.com/users/quarkiverse/following{/other_user}","gists_url":"https://api.github.com/users/quarkiverse/gists{/gist_id}","starred_url":"https://api.github.com/users/quarkiverse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/quarkiverse/subscriptions","organizations_url":"https://api.github.com/users/quarkiverse/orgs","repos_url":"https://api.github.com/users/quarkiverse/repos","events_url":"https://api.github.com/users/quarkiverse/events{/privacy}","received_events_url":"https://api.github.com/users/quarkiverse/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/quarkiverse/quarkus-langchain4j","description":"Quarkus Langchain4j extension","fork":false,"url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j","forks_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/forks","keys_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/keys{/key_id}","collaborators_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/teams","hooks_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/hooks","issue_events_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/issues/events{/number}","events_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/events","assignees_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/assignees{/user}","branches_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/branches{/branch}","tags_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/tags","blobs_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/git/refs{/sha}","trees_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/git/trees{/sha}","statuses_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/statuses/{sha}","languages_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/languages","stargazers_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/stargazers","contributors_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/contributors","subscribers_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/subscribers","subscription_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/subscription","commits_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/commits{/sha}","git_commits_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/git/commits{/sha}","comments_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/comments{/number}","issue_comment_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/issues/comments{/number}","contents_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/contents/{+path}","compare_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/compare/{base}...{head}","merges_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/merges","archive_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/downloads","issues_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/issues{/number}","pulls_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/pulls{/number}","milestones_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/milestones{/number}","notifications_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/labels{/name}","releases_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/releases{/id}","deployments_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/deployments","created_at":"2023-11-13T09:10:27Z","updated_at":"2025-11-10T05:00:53Z","pushed_at":"2025-11-10T05:00:47Z","git_url":"git://github.com/quarkiverse/quarkus-langchain4j.git","ssh_url":"git@github.com:quarkiverse/quarkus-langchain4j.git","clone_url":"https://github.com/quarkiverse/quarkus-langchain4j.git","svn_url":"https://github.com/quarkiverse/quarkus-langchain4j","homepage":"https://docs.quarkiverse.io/quarkus-langchain4j/dev/index.html","size":18448,"stargazers_count":254,"watchers_count":254,"language":"Java","has_issues":true,"has_projects":false,"has_downloads":false,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":158,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":164,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["ai","langchain4j","llm","quarkus-extension"],"visibility":"public","forks":158,"open_issues":164,"watchers":254,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Right now, the memory id can be supported with `@MemoryId` or it is set to the connection id with the WebSockets Next integration.\r\n\r\nI'd like to be able to use the current `SecurityIdentity`  instance. Or the current JWT token's unique subject claim value.\r\n\r\nI'm not 100% sure what is the best way to do it.\r\nMy proposal is to update Quarkus LangChain4j code which checks what memory id is if no `@MemoryId` is set, but before falling back to the WS connection id.\r\nHere it will check with Arc if the correct scope `MemoryIdProvider` is registered, if yes, get it and retrieve an instance of Quarkus LangChain4j `MemoryIdentifier` interface from it and use as a chat memory id, or to keep it simple, just return String.\r\n\r\nFor example, one  demo can have a request scoped `MemoryIdProvider` registered which will have `JsonWebToken` injected and return its token subject claim value, ensuring a verified user identity subject value is used as a memory id.\r\n\r\nHow does it sound ? I'm happy to start looking at this enhancement request once it is agreed upon","reactions":{"url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/issues/523/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/quarkiverse/quarkus-langchain4j/issues/523/timeline","performed_via_github_app":null,"state_reason":"not_planned"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/comments/2090436884","html_url":"https://github.com/quarkusio/quarkus/issues/40312#issuecomment-2090436884","issue_url":"https://api.github.com/repos/quarkusio/quarkus/issues/40312","id":2090436884,"node_id":"IC_kwDOCFbutM58mYkU","user":{"login":"sberyozkin","id":467639,"node_id":"MDQ6VXNlcjQ2NzYzOQ==","avatar_url":"https://avatars.githubusercontent.com/u/467639?v=4","gravatar_id":"","url":"https://api.github.com/users/sberyozkin","html_url":"https://github.com/sberyozkin","followers_url":"https://api.github.com/users/sberyozkin/followers","following_url":"https://api.github.com/users/sberyozkin/following{/other_user}","gists_url":"https://api.github.com/users/sberyozkin/gists{/gist_id}","starred_url":"https://api.github.com/users/sberyozkin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sberyozkin/subscriptions","organizations_url":"https://api.github.com/users/sberyozkin/orgs","repos_url":"https://api.github.com/users/sberyozkin/repos","events_url":"https://api.github.com/users/sberyozkin/events{/privacy}","received_events_url":"https://api.github.com/users/sberyozkin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-02T12:56:18Z","updated_at":"2024-05-02T12:56:18Z","body":"Hi @mkouba, can you explain a little bit how one can retain the property (such as a token) which is available at the on-open step in the WS-Next, such that this property is returned with subsequent on-message steps ? \r\nIf there was some code/test showing how it can be done for some custom header, let's  say `X-WebSocket` HTTP header is available at the upgrade/onOpen time, and then it is bound to the WS channel and this header is accessible in the onMessage methods, then it would be ideal.\r\n\r\nI guess we'll have to follow a step similar to the one shown in https://github.com/quarkusio/quarkus/files/15130826/quarkus-sec-issue.zip (a reproducer for #40307)\r\n\r\nAnother question, is resolving #40307 must be done first before planning this enhancement work ?\r\n\r\nThanks Sergey","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/comments/2090436884/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sberyozkin","id":467639,"node_id":"MDQ6VXNlcjQ2NzYzOQ==","avatar_url":"https://avatars.githubusercontent.com/u/467639?v=4","gravatar_id":"","url":"https://api.github.com/users/sberyozkin","html_url":"https://github.com/sberyozkin","followers_url":"https://api.github.com/users/sberyozkin/followers","following_url":"https://api.github.com/users/sberyozkin/following{/other_user}","gists_url":"https://api.github.com/users/sberyozkin/gists{/gist_id}","starred_url":"https://api.github.com/users/sberyozkin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sberyozkin/subscriptions","organizations_url":"https://api.github.com/users/sberyozkin/orgs","repos_url":"https://api.github.com/users/sberyozkin/repos","events_url":"https://api.github.com/users/sberyozkin/events{/privacy}","received_events_url":"https://api.github.com/users/sberyozkin/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12682923728,"node_id":"MEE_lADOCFbutM6HDh8HzwAAAALz9g7Q","url":"https://api.github.com/repos/quarkusio/quarkus/issues/events/12682923728","actor":{"login":"mkouba","id":913004,"node_id":"MDQ6VXNlcjkxMzAwNA==","avatar_url":"https://avatars.githubusercontent.com/u/913004?v=4","gravatar_id":"","url":"https://api.github.com/users/mkouba","html_url":"https://github.com/mkouba","followers_url":"https://api.github.com/users/mkouba/followers","following_url":"https://api.github.com/users/mkouba/following{/other_user}","gists_url":"https://api.github.com/users/mkouba/gists{/gist_id}","starred_url":"https://api.github.com/users/mkouba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkouba/subscriptions","organizations_url":"https://api.github.com/users/mkouba/orgs","repos_url":"https://api.github.com/users/mkouba/repos","events_url":"https://api.github.com/users/mkouba/events{/privacy}","received_events_url":"https://api.github.com/users/mkouba/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-05-02T12:56:20Z","performed_via_github_app":null},{"id":12682923757,"node_id":"SE_lADOCFbutM6HDh8HzwAAAALz9g7t","url":"https://api.github.com/repos/quarkusio/quarkus/issues/events/12682923757","actor":{"login":"mkouba","id":913004,"node_id":"MDQ6VXNlcjkxMzAwNA==","avatar_url":"https://avatars.githubusercontent.com/u/913004?v=4","gravatar_id":"","url":"https://api.github.com/users/mkouba","html_url":"https://github.com/mkouba","followers_url":"https://api.github.com/users/mkouba/followers","following_url":"https://api.github.com/users/mkouba/following{/other_user}","gists_url":"https://api.github.com/users/mkouba/gists{/gist_id}","starred_url":"https://api.github.com/users/mkouba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkouba/subscriptions","organizations_url":"https://api.github.com/users/mkouba/orgs","repos_url":"https://api.github.com/users/mkouba/repos","events_url":"https://api.github.com/users/mkouba/events{/privacy}","received_events_url":"https://api.github.com/users/mkouba/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-05-02T12:56:20Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/comments/2090443273","html_url":"https://github.com/quarkusio/quarkus/issues/40312#issuecomment-2090443273","issue_url":"https://api.github.com/repos/quarkusio/quarkus/issues/40312","id":2090443273,"node_id":"IC_kwDOCFbutM58maIJ","user":{"login":"michalvavrik","id":43821672,"node_id":"MDQ6VXNlcjQzODIxNjcy","avatar_url":"https://avatars.githubusercontent.com/u/43821672?v=4","gravatar_id":"","url":"https://api.github.com/users/michalvavrik","html_url":"https://github.com/michalvavrik","followers_url":"https://api.github.com/users/michalvavrik/followers","following_url":"https://api.github.com/users/michalvavrik/following{/other_user}","gists_url":"https://api.github.com/users/michalvavrik/gists{/gist_id}","starred_url":"https://api.github.com/users/michalvavrik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michalvavrik/subscriptions","organizations_url":"https://api.github.com/users/michalvavrik/orgs","repos_url":"https://api.github.com/users/michalvavrik/repos","events_url":"https://api.github.com/users/michalvavrik/events{/privacy}","received_events_url":"https://api.github.com/users/michalvavrik/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-02T12:59:32Z","updated_at":"2024-05-02T13:00:22Z","body":"I was thinking the authentication must have HTTP request scope rather than to be session-scoped bean. Which would allow us to rely on what we have already. But that's how far I got in studying WS-next reference. Let's see what Martin thinks.\r\n\r\n> Another question, is resolving https://github.com/quarkusio/quarkus/issues/40307 must be done first before planning this enhancement work ?\r\n\r\nnope, not related","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/comments/2090443273/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"michalvavrik","id":43821672,"node_id":"MDQ6VXNlcjQzODIxNjcy","avatar_url":"https://avatars.githubusercontent.com/u/43821672?v=4","gravatar_id":"","url":"https://api.github.com/users/michalvavrik","html_url":"https://github.com/michalvavrik","followers_url":"https://api.github.com/users/michalvavrik/followers","following_url":"https://api.github.com/users/michalvavrik/following{/other_user}","gists_url":"https://api.github.com/users/michalvavrik/gists{/gist_id}","starred_url":"https://api.github.com/users/michalvavrik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michalvavrik/subscriptions","organizations_url":"https://api.github.com/users/michalvavrik/orgs","repos_url":"https://api.github.com/users/michalvavrik/repos","events_url":"https://api.github.com/users/michalvavrik/events{/privacy}","received_events_url":"https://api.github.com/users/michalvavrik/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/comments/2090458195","html_url":"https://github.com/quarkusio/quarkus/issues/40312#issuecomment-2090458195","issue_url":"https://api.github.com/repos/quarkusio/quarkus/issues/40312","id":2090458195,"node_id":"IC_kwDOCFbutM58mdxT","user":{"login":"mkouba","id":913004,"node_id":"MDQ6VXNlcjkxMzAwNA==","avatar_url":"https://avatars.githubusercontent.com/u/913004?v=4","gravatar_id":"","url":"https://api.github.com/users/mkouba","html_url":"https://github.com/mkouba","followers_url":"https://api.github.com/users/mkouba/followers","following_url":"https://api.github.com/users/mkouba/following{/other_user}","gists_url":"https://api.github.com/users/mkouba/gists{/gist_id}","starred_url":"https://api.github.com/users/mkouba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkouba/subscriptions","organizations_url":"https://api.github.com/users/mkouba/orgs","repos_url":"https://api.github.com/users/mkouba/repos","events_url":"https://api.github.com/users/mkouba/events{/privacy}","received_events_url":"https://api.github.com/users/mkouba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-02T13:07:07Z","updated_at":"2024-05-02T13:07:07Z","body":"> I was thinking the authentication must have HTTP request scope rather than to be session-scoped bean. Which would allow us to rely on what we have already. But that's how far I got in studying WS-next reference. Let's see what Martin thinks.\r\n\r\nThe problem is that for WebSockets there is only the initial handshake HTTP request and afterwards, after upgrade, when processing incoming messages there's no HTTP request available at all; e.g. we do activate the request context for an `@OnTextMessage` callback but it's not backed by an HTTP request.\r\n\r\n>> Another question, is resolving https://github.com/quarkusio/quarkus/issues/40307 must be done first before planning this enhancement work ?\r\n\r\n> nope, not related\r\n\r\nIt's not related to WebSockets at all actually ;-)","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/comments/2090458195/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mkouba","id":913004,"node_id":"MDQ6VXNlcjkxMzAwNA==","avatar_url":"https://avatars.githubusercontent.com/u/913004?v=4","gravatar_id":"","url":"https://api.github.com/users/mkouba","html_url":"https://github.com/mkouba","followers_url":"https://api.github.com/users/mkouba/followers","following_url":"https://api.github.com/users/mkouba/following{/other_user}","gists_url":"https://api.github.com/users/mkouba/gists{/gist_id}","starred_url":"https://api.github.com/users/mkouba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkouba/subscriptions","organizations_url":"https://api.github.com/users/mkouba/orgs","repos_url":"https://api.github.com/users/mkouba/repos","events_url":"https://api.github.com/users/mkouba/events{/privacy}","received_events_url":"https://api.github.com/users/mkouba/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/comments/2090466525","html_url":"https://github.com/quarkusio/quarkus/issues/40312#issuecomment-2090466525","issue_url":"https://api.github.com/repos/quarkusio/quarkus/issues/40312","id":2090466525,"node_id":"IC_kwDOCFbutM58mfzd","user":{"login":"michalvavrik","id":43821672,"node_id":"MDQ6VXNlcjQzODIxNjcy","avatar_url":"https://avatars.githubusercontent.com/u/43821672?v=4","gravatar_id":"","url":"https://api.github.com/users/michalvavrik","html_url":"https://github.com/michalvavrik","followers_url":"https://api.github.com/users/michalvavrik/followers","following_url":"https://api.github.com/users/michalvavrik/following{/other_user}","gists_url":"https://api.github.com/users/michalvavrik/gists{/gist_id}","starred_url":"https://api.github.com/users/michalvavrik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michalvavrik/subscriptions","organizations_url":"https://api.github.com/users/michalvavrik/orgs","repos_url":"https://api.github.com/users/michalvavrik/repos","events_url":"https://api.github.com/users/michalvavrik/events{/privacy}","received_events_url":"https://api.github.com/users/michalvavrik/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-02T13:11:25Z","updated_at":"2024-05-02T13:13:21Z","body":"> The problem is that for WebSockets there is only the initial handshake HTTP request and afterwards, after upgrade, when processing incoming messages there's no HTTP request available at all; e.g. we do activate the request context for an @OnTextMessage callback but it's not backed by an HTTP request.\r\n\r\nThanks. I guess I need to dig more before I make any conclusions. But AFAICT CDI request context activation, we don't really care as what I wanted to reuse is HTTP Authenticator / Authorizer and they do work with RoutingContext rather than CDI req. ctx. I mean _one connection == one authentication_. However if WS will send authN headers later, we need something smarter. Okay.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/comments/2090466525/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"michalvavrik","id":43821672,"node_id":"MDQ6VXNlcjQzODIxNjcy","avatar_url":"https://avatars.githubusercontent.com/u/43821672?v=4","gravatar_id":"","url":"https://api.github.com/users/michalvavrik","html_url":"https://github.com/michalvavrik","followers_url":"https://api.github.com/users/michalvavrik/followers","following_url":"https://api.github.com/users/michalvavrik/following{/other_user}","gists_url":"https://api.github.com/users/michalvavrik/gists{/gist_id}","starred_url":"https://api.github.com/users/michalvavrik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michalvavrik/subscriptions","organizations_url":"https://api.github.com/users/michalvavrik/orgs","repos_url":"https://api.github.com/users/michalvavrik/repos","events_url":"https://api.github.com/users/michalvavrik/events{/privacy}","received_events_url":"https://api.github.com/users/michalvavrik/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/comments/2090490178","html_url":"https://github.com/quarkusio/quarkus/issues/40312#issuecomment-2090490178","issue_url":"https://api.github.com/repos/quarkusio/quarkus/issues/40312","id":2090490178,"node_id":"IC_kwDOCFbutM58mllC","user":{"login":"mkouba","id":913004,"node_id":"MDQ6VXNlcjkxMzAwNA==","avatar_url":"https://avatars.githubusercontent.com/u/913004?v=4","gravatar_id":"","url":"https://api.github.com/users/mkouba","html_url":"https://github.com/mkouba","followers_url":"https://api.github.com/users/mkouba/followers","following_url":"https://api.github.com/users/mkouba/following{/other_user}","gists_url":"https://api.github.com/users/mkouba/gists{/gist_id}","starred_url":"https://api.github.com/users/mkouba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkouba/subscriptions","organizations_url":"https://api.github.com/users/mkouba/orgs","repos_url":"https://api.github.com/users/mkouba/repos","events_url":"https://api.github.com/users/mkouba/events{/privacy}","received_events_url":"https://api.github.com/users/mkouba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-02T13:22:55Z","updated_at":"2024-05-02T13:22:55Z","body":"> > The problem is that for WebSockets there is only the initial handshake HTTP request and afterwards, after upgrade, when processing incoming messages there's no HTTP request available at all; e.g. we do activate the request context for an @OnTextMessage callback but it's not backed by an HTTP request.\r\n> \r\n> Thanks. I guess I need to dig more. But AFAICT CDI request context activation, we don't really care as what I wanted to reuse is HTTP Authenticator / Authorizer and they do work with RoutingContext rather than CDI req. ctx. I mean _one connection == one authentication_.\r\n\r\nI guess I need to dig more as well :-)\r\n\r\n> However if WS will send authN headers later, we need something smarter. Okay.\r\n\r\nIt's not that it sends the headers later. In fact, WS itself does not send metadata along with messages. That's up to the procotol which is something we don't control.\r\n\r\nMaybe we could authenticate/authorize the initial handshake request?\r\n\r\nFYI the opening handshake is described here: https://datatracker.ietf.org/doc/html/rfc6455#section-1.3\r\n\r\nBTW this the security part of the Jakarta WS spec: https://jakarta.ee/specifications/websocket/2.1/jakarta-websocket-spec-2.1#security","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/comments/2090490178/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mkouba","id":913004,"node_id":"MDQ6VXNlcjkxMzAwNA==","avatar_url":"https://avatars.githubusercontent.com/u/913004?v=4","gravatar_id":"","url":"https://api.github.com/users/mkouba","html_url":"https://github.com/mkouba","followers_url":"https://api.github.com/users/mkouba/followers","following_url":"https://api.github.com/users/mkouba/following{/other_user}","gists_url":"https://api.github.com/users/mkouba/gists{/gist_id}","starred_url":"https://api.github.com/users/mkouba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkouba/subscriptions","organizations_url":"https://api.github.com/users/mkouba/orgs","repos_url":"https://api.github.com/users/mkouba/repos","events_url":"https://api.github.com/users/mkouba/events{/privacy}","received_events_url":"https://api.github.com/users/mkouba/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/comments/2090496687","html_url":"https://github.com/quarkusio/quarkus/issues/40312#issuecomment-2090496687","issue_url":"https://api.github.com/repos/quarkusio/quarkus/issues/40312","id":2090496687,"node_id":"IC_kwDOCFbutM58mnKv","user":{"login":"michalvavrik","id":43821672,"node_id":"MDQ6VXNlcjQzODIxNjcy","avatar_url":"https://avatars.githubusercontent.com/u/43821672?v=4","gravatar_id":"","url":"https://api.github.com/users/michalvavrik","html_url":"https://github.com/michalvavrik","followers_url":"https://api.github.com/users/michalvavrik/followers","following_url":"https://api.github.com/users/michalvavrik/following{/other_user}","gists_url":"https://api.github.com/users/michalvavrik/gists{/gist_id}","starred_url":"https://api.github.com/users/michalvavrik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michalvavrik/subscriptions","organizations_url":"https://api.github.com/users/michalvavrik/orgs","repos_url":"https://api.github.com/users/michalvavrik/repos","events_url":"https://api.github.com/users/michalvavrik/events{/privacy}","received_events_url":"https://api.github.com/users/michalvavrik/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-02T13:25:48Z","updated_at":"2024-05-02T13:25:48Z","body":"> > However if WS will send authN headers later, we need something smarter. Okay.\r\n> \r\n> It's not that it sends the headers later. In fact, WS itself does not send metadata along with messages. That's up to the procotol which is something we don't control.\r\n> \r\n> Maybe we could authenticate/authorize the initial handshake request?\r\n\r\nYes, that sounds good to me ATM (see below)\r\n\r\n> FYI the opening handshake is described here: https://datatracker.ietf.org/doc/html/rfc6455#section-1.3\r\n> \r\n> BTW this the security part of the Jakarta WS spec: https://jakarta.ee/specifications/websocket/2.1/jakarta-websocket-spec-2.1#security\r\n\r\nThank you, I'll study it.\r\n\r\n\r\nSorry @mkouba I didn't mean to steal @sberyozkin show, could you please also answer his question when the time is right for you. This was helpful though.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/comments/2090496687/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"michalvavrik","id":43821672,"node_id":"MDQ6VXNlcjQzODIxNjcy","avatar_url":"https://avatars.githubusercontent.com/u/43821672?v=4","gravatar_id":"","url":"https://api.github.com/users/michalvavrik","html_url":"https://github.com/michalvavrik","followers_url":"https://api.github.com/users/michalvavrik/followers","following_url":"https://api.github.com/users/michalvavrik/following{/other_user}","gists_url":"https://api.github.com/users/michalvavrik/gists{/gist_id}","starred_url":"https://api.github.com/users/michalvavrik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michalvavrik/subscriptions","organizations_url":"https://api.github.com/users/michalvavrik/orgs","repos_url":"https://api.github.com/users/michalvavrik/repos","events_url":"https://api.github.com/users/michalvavrik/events{/privacy}","received_events_url":"https://api.github.com/users/michalvavrik/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12683324802,"node_id":"MEE_lADOCFbutM6HDh8HzwAAAALz_C2C","url":"https://api.github.com/repos/quarkusio/quarkus/issues/events/12683324802","actor":{"login":"sberyozkin","id":467639,"node_id":"MDQ6VXNlcjQ2NzYzOQ==","avatar_url":"https://avatars.githubusercontent.com/u/467639?v=4","gravatar_id":"","url":"https://api.github.com/users/sberyozkin","html_url":"https://github.com/sberyozkin","followers_url":"https://api.github.com/users/sberyozkin/followers","following_url":"https://api.github.com/users/sberyozkin/following{/other_user}","gists_url":"https://api.github.com/users/sberyozkin/gists{/gist_id}","starred_url":"https://api.github.com/users/sberyozkin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sberyozkin/subscriptions","organizations_url":"https://api.github.com/users/sberyozkin/orgs","repos_url":"https://api.github.com/users/sberyozkin/repos","events_url":"https://api.github.com/users/sberyozkin/events{/privacy}","received_events_url":"https://api.github.com/users/sberyozkin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-05-02T13:25:49Z","performed_via_github_app":null},{"id":12683324816,"node_id":"SE_lADOCFbutM6HDh8HzwAAAALz_C2Q","url":"https://api.github.com/repos/quarkusio/quarkus/issues/events/12683324816","actor":{"login":"sberyozkin","id":467639,"node_id":"MDQ6VXNlcjQ2NzYzOQ==","avatar_url":"https://avatars.githubusercontent.com/u/467639?v=4","gravatar_id":"","url":"https://api.github.com/users/sberyozkin","html_url":"https://github.com/sberyozkin","followers_url":"https://api.github.com/users/sberyozkin/followers","following_url":"https://api.github.com/users/sberyozkin/following{/other_user}","gists_url":"https://api.github.com/users/sberyozkin/gists{/gist_id}","starred_url":"https://api.github.com/users/sberyozkin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sberyozkin/subscriptions","organizations_url":"https://api.github.com/users/sberyozkin/orgs","repos_url":"https://api.github.com/users/sberyozkin/repos","events_url":"https://api.github.com/users/sberyozkin/events{/privacy}","received_events_url":"https://api.github.com/users/sberyozkin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-05-02T13:25:49Z","performed_via_github_app":null},{"id":12683324838,"node_id":"MEE_lADOCFbutM6HDh8HzwAAAALz_C2m","url":"https://api.github.com/repos/quarkusio/quarkus/issues/events/12683324838","actor":{"login":"mkouba","id":913004,"node_id":"MDQ6VXNlcjkxMzAwNA==","avatar_url":"https://avatars.githubusercontent.com/u/913004?v=4","gravatar_id":"","url":"https://api.github.com/users/mkouba","html_url":"https://github.com/mkouba","followers_url":"https://api.github.com/users/mkouba/followers","following_url":"https://api.github.com/users/mkouba/following{/other_user}","gists_url":"https://api.github.com/users/mkouba/gists{/gist_id}","starred_url":"https://api.github.com/users/mkouba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkouba/subscriptions","organizations_url":"https://api.github.com/users/mkouba/orgs","repos_url":"https://api.github.com/users/mkouba/repos","events_url":"https://api.github.com/users/mkouba/events{/privacy}","received_events_url":"https://api.github.com/users/mkouba/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-05-02T13:25:50Z","performed_via_github_app":null},{"id":12683324854,"node_id":"SE_lADOCFbutM6HDh8HzwAAAALz_C22","url":"https://api.github.com/repos/quarkusio/quarkus/issues/events/12683324854","actor":{"login":"mkouba","id":913004,"node_id":"MDQ6VXNlcjkxMzAwNA==","avatar_url":"https://avatars.githubusercontent.com/u/913004?v=4","gravatar_id":"","url":"https://api.github.com/users/mkouba","html_url":"https://github.com/mkouba","followers_url":"https://api.github.com/users/mkouba/followers","following_url":"https://api.github.com/users/mkouba/following{/other_user}","gists_url":"https://api.github.com/users/mkouba/gists{/gist_id}","starred_url":"https://api.github.com/users/mkouba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkouba/subscriptions","organizations_url":"https://api.github.com/users/mkouba/orgs","repos_url":"https://api.github.com/users/mkouba/repos","events_url":"https://api.github.com/users/mkouba/events{/privacy}","received_events_url":"https://api.github.com/users/mkouba/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-05-02T13:25:50Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/comments/2090542682","html_url":"https://github.com/quarkusio/quarkus/issues/40312#issuecomment-2090542682","issue_url":"https://api.github.com/repos/quarkusio/quarkus/issues/40312","id":2090542682,"node_id":"IC_kwDOCFbutM58myZa","user":{"login":"mkouba","id":913004,"node_id":"MDQ6VXNlcjkxMzAwNA==","avatar_url":"https://avatars.githubusercontent.com/u/913004?v=4","gravatar_id":"","url":"https://api.github.com/users/mkouba","html_url":"https://github.com/mkouba","followers_url":"https://api.github.com/users/mkouba/followers","following_url":"https://api.github.com/users/mkouba/following{/other_user}","gists_url":"https://api.github.com/users/mkouba/gists{/gist_id}","starred_url":"https://api.github.com/users/mkouba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkouba/subscriptions","organizations_url":"https://api.github.com/users/mkouba/orgs","repos_url":"https://api.github.com/users/mkouba/repos","events_url":"https://api.github.com/users/mkouba/events{/privacy}","received_events_url":"https://api.github.com/users/mkouba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-02T13:45:45Z","updated_at":"2024-05-02T13:45:45Z","body":"> Hi @mkouba, can you explain a little bit how one can retain the property (such as a token) which is available at the on-open step in the WS-Next, such that this property is returned with subsequent on-message steps ? If there was some code/test showing how it can be done for some custom header, let's say `X-WebSocket` HTTP header is available at the upgrade/onOpen time, and then it is bound to the WS channel and this header is accessible in the onMessage methods, then it would be ideal.\r\n> \r\n\r\nI have to admit that I have no idea yet ;-). In any case, we can extract the information from the initial handshake request and store it either in a `@SessionScoped` bean or directly in the connection object.\r\n\r\n> I guess we'll have to follow a step similar to the one shown in https://github.com/quarkusio/quarkus/files/15130826/quarkus-sec-issue.zip (a reproducer for #40307)\r\n> \r\n\r\nBut this reproducer does not provide a working solution, or? \r\n\r\n> Another question, is resolving #40307 must be done first before planning this enhancement work ?\r\n> \r\n> Thanks Sergey\r\n\r\n\r\n\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/comments/2090542682/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mkouba","id":913004,"node_id":"MDQ6VXNlcjkxMzAwNA==","avatar_url":"https://avatars.githubusercontent.com/u/913004?v=4","gravatar_id":"","url":"https://api.github.com/users/mkouba","html_url":"https://github.com/mkouba","followers_url":"https://api.github.com/users/mkouba/followers","following_url":"https://api.github.com/users/mkouba/following{/other_user}","gists_url":"https://api.github.com/users/mkouba/gists{/gist_id}","starred_url":"https://api.github.com/users/mkouba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkouba/subscriptions","organizations_url":"https://api.github.com/users/mkouba/orgs","repos_url":"https://api.github.com/users/mkouba/repos","events_url":"https://api.github.com/users/mkouba/events{/privacy}","received_events_url":"https://api.github.com/users/mkouba/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12683609179,"node_id":"MEE_lADOCFbutM6HDh8HzwAAAAL0AIRb","url":"https://api.github.com/repos/quarkusio/quarkus/issues/events/12683609179","actor":{"login":"mkouba","id":913004,"node_id":"MDQ6VXNlcjkxMzAwNA==","avatar_url":"https://avatars.githubusercontent.com/u/913004?v=4","gravatar_id":"","url":"https://api.github.com/users/mkouba","html_url":"https://github.com/mkouba","followers_url":"https://api.github.com/users/mkouba/followers","following_url":"https://api.github.com/users/mkouba/following{/other_user}","gists_url":"https://api.github.com/users/mkouba/gists{/gist_id}","starred_url":"https://api.github.com/users/mkouba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkouba/subscriptions","organizations_url":"https://api.github.com/users/mkouba/orgs","repos_url":"https://api.github.com/users/mkouba/repos","events_url":"https://api.github.com/users/mkouba/events{/privacy}","received_events_url":"https://api.github.com/users/mkouba/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-05-02T13:45:46Z","performed_via_github_app":null},{"id":12683609191,"node_id":"SE_lADOCFbutM6HDh8HzwAAAAL0AIRn","url":"https://api.github.com/repos/quarkusio/quarkus/issues/events/12683609191","actor":{"login":"mkouba","id":913004,"node_id":"MDQ6VXNlcjkxMzAwNA==","avatar_url":"https://avatars.githubusercontent.com/u/913004?v=4","gravatar_id":"","url":"https://api.github.com/users/mkouba","html_url":"https://github.com/mkouba","followers_url":"https://api.github.com/users/mkouba/followers","following_url":"https://api.github.com/users/mkouba/following{/other_user}","gists_url":"https://api.github.com/users/mkouba/gists{/gist_id}","starred_url":"https://api.github.com/users/mkouba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkouba/subscriptions","organizations_url":"https://api.github.com/users/mkouba/orgs","repos_url":"https://api.github.com/users/mkouba/repos","events_url":"https://api.github.com/users/mkouba/events{/privacy}","received_events_url":"https://api.github.com/users/mkouba/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-05-02T13:45:46Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/comments/2092848259","html_url":"https://github.com/quarkusio/quarkus/issues/40312#issuecomment-2092848259","issue_url":"https://api.github.com/repos/quarkusio/quarkus/issues/40312","id":2092848259,"node_id":"IC_kwDOCFbutM58vlSD","user":{"login":"sberyozkin","id":467639,"node_id":"MDQ6VXNlcjQ2NzYzOQ==","avatar_url":"https://avatars.githubusercontent.com/u/467639?v=4","gravatar_id":"","url":"https://api.github.com/users/sberyozkin","html_url":"https://github.com/sberyozkin","followers_url":"https://api.github.com/users/sberyozkin/followers","following_url":"https://api.github.com/users/sberyozkin/following{/other_user}","gists_url":"https://api.github.com/users/sberyozkin/gists{/gist_id}","starred_url":"https://api.github.com/users/sberyozkin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sberyozkin/subscriptions","organizations_url":"https://api.github.com/users/sberyozkin/orgs","repos_url":"https://api.github.com/users/sberyozkin/repos","events_url":"https://api.github.com/users/sberyozkin/events{/privacy}","received_events_url":"https://api.github.com/users/sberyozkin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-03T11:51:57Z","updated_at":"2024-05-03T11:51:57Z","body":"Thanks @michalvavrik @mkouba, and yeah, was a good joke, Michal, that it was my show :-)\r\n\r\nThe use case which I have in mind, and is particularly relevant to the Quarkus LangChain4j Chat Bot demos, is when I authenticate to Quarkus with OIDC, and now I request a Chat Bot resource which upgrades the request to the WS Next session. \r\nAt this point, at the time of the initial handshake, Quarkus Security must've already created a Security Identity, and this is what I guess we need to retain.\r\n\r\nSo what Martin said,\r\n\r\n>In any case, we can extract the information from the initial handshake request and store it either in a @SessionScoped bean or directly in the connection object.\r\n\r\nSounds good and hopefully simple enough, IMHO this is the path forward. I'm not sure what is best though, using the session scoped bean or  the connection object as a storage. The only requirement is to have `@Inject SecurityIdentity` available from the `@Authenticated` onMessage handlers.\r\n\r\n@mkouba @michalvavrik, what do you think ? \r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/comments/2092848259/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sberyozkin","id":467639,"node_id":"MDQ6VXNlcjQ2NzYzOQ==","avatar_url":"https://avatars.githubusercontent.com/u/467639?v=4","gravatar_id":"","url":"https://api.github.com/users/sberyozkin","html_url":"https://github.com/sberyozkin","followers_url":"https://api.github.com/users/sberyozkin/followers","following_url":"https://api.github.com/users/sberyozkin/following{/other_user}","gists_url":"https://api.github.com/users/sberyozkin/gists{/gist_id}","starred_url":"https://api.github.com/users/sberyozkin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sberyozkin/subscriptions","organizations_url":"https://api.github.com/users/sberyozkin/orgs","repos_url":"https://api.github.com/users/sberyozkin/repos","events_url":"https://api.github.com/users/sberyozkin/events{/privacy}","received_events_url":"https://api.github.com/users/sberyozkin/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12695477895,"node_id":"MEE_lADOCFbutM6HDh8HzwAAAAL0tZ6H","url":"https://api.github.com/repos/quarkusio/quarkus/issues/events/12695477895","actor":{"login":"mkouba","id":913004,"node_id":"MDQ6VXNlcjkxMzAwNA==","avatar_url":"https://avatars.githubusercontent.com/u/913004?v=4","gravatar_id":"","url":"https://api.github.com/users/mkouba","html_url":"https://github.com/mkouba","followers_url":"https://api.github.com/users/mkouba/followers","following_url":"https://api.github.com/users/mkouba/following{/other_user}","gists_url":"https://api.github.com/users/mkouba/gists{/gist_id}","starred_url":"https://api.github.com/users/mkouba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkouba/subscriptions","organizations_url":"https://api.github.com/users/mkouba/orgs","repos_url":"https://api.github.com/users/mkouba/repos","events_url":"https://api.github.com/users/mkouba/events{/privacy}","received_events_url":"https://api.github.com/users/mkouba/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-05-03T11:51:58Z","performed_via_github_app":null},{"id":12695477910,"node_id":"SE_lADOCFbutM6HDh8HzwAAAAL0tZ6W","url":"https://api.github.com/repos/quarkusio/quarkus/issues/events/12695477910","actor":{"login":"mkouba","id":913004,"node_id":"MDQ6VXNlcjkxMzAwNA==","avatar_url":"https://avatars.githubusercontent.com/u/913004?v=4","gravatar_id":"","url":"https://api.github.com/users/mkouba","html_url":"https://github.com/mkouba","followers_url":"https://api.github.com/users/mkouba/followers","following_url":"https://api.github.com/users/mkouba/following{/other_user}","gists_url":"https://api.github.com/users/mkouba/gists{/gist_id}","starred_url":"https://api.github.com/users/mkouba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkouba/subscriptions","organizations_url":"https://api.github.com/users/mkouba/orgs","repos_url":"https://api.github.com/users/mkouba/repos","events_url":"https://api.github.com/users/mkouba/events{/privacy}","received_events_url":"https://api.github.com/users/mkouba/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-05-03T11:51:58Z","performed_via_github_app":null},{"id":12695477922,"node_id":"MEE_lADOCFbutM6HDh8HzwAAAAL0tZ6i","url":"https://api.github.com/repos/quarkusio/quarkus/issues/events/12695477922","actor":{"login":"michalvavrik","id":43821672,"node_id":"MDQ6VXNlcjQzODIxNjcy","avatar_url":"https://avatars.githubusercontent.com/u/43821672?v=4","gravatar_id":"","url":"https://api.github.com/users/michalvavrik","html_url":"https://github.com/michalvavrik","followers_url":"https://api.github.com/users/michalvavrik/followers","following_url":"https://api.github.com/users/michalvavrik/following{/other_user}","gists_url":"https://api.github.com/users/michalvavrik/gists{/gist_id}","starred_url":"https://api.github.com/users/michalvavrik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michalvavrik/subscriptions","organizations_url":"https://api.github.com/users/michalvavrik/orgs","repos_url":"https://api.github.com/users/michalvavrik/repos","events_url":"https://api.github.com/users/michalvavrik/events{/privacy}","received_events_url":"https://api.github.com/users/michalvavrik/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-05-03T11:51:58Z","performed_via_github_app":null},{"id":12695477927,"node_id":"SE_lADOCFbutM6HDh8HzwAAAAL0tZ6n","url":"https://api.github.com/repos/quarkusio/quarkus/issues/events/12695477927","actor":{"login":"michalvavrik","id":43821672,"node_id":"MDQ6VXNlcjQzODIxNjcy","avatar_url":"https://avatars.githubusercontent.com/u/43821672?v=4","gravatar_id":"","url":"https://api.github.com/users/michalvavrik","html_url":"https://github.com/michalvavrik","followers_url":"https://api.github.com/users/michalvavrik/followers","following_url":"https://api.github.com/users/michalvavrik/following{/other_user}","gists_url":"https://api.github.com/users/michalvavrik/gists{/gist_id}","starred_url":"https://api.github.com/users/michalvavrik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michalvavrik/subscriptions","organizations_url":"https://api.github.com/users/michalvavrik/orgs","repos_url":"https://api.github.com/users/michalvavrik/repos","events_url":"https://api.github.com/users/michalvavrik/events{/privacy}","received_events_url":"https://api.github.com/users/michalvavrik/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-05-03T11:51:58Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/comments/2092851782","html_url":"https://github.com/quarkusio/quarkus/issues/40312#issuecomment-2092851782","issue_url":"https://api.github.com/repos/quarkusio/quarkus/issues/40312","id":2092851782,"node_id":"IC_kwDOCFbutM58vmJG","user":{"login":"sberyozkin","id":467639,"node_id":"MDQ6VXNlcjQ2NzYzOQ==","avatar_url":"https://avatars.githubusercontent.com/u/467639?v=4","gravatar_id":"","url":"https://api.github.com/users/sberyozkin","html_url":"https://github.com/sberyozkin","followers_url":"https://api.github.com/users/sberyozkin/followers","following_url":"https://api.github.com/users/sberyozkin/following{/other_user}","gists_url":"https://api.github.com/users/sberyozkin/gists{/gist_id}","starred_url":"https://api.github.com/users/sberyozkin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sberyozkin/subscriptions","organizations_url":"https://api.github.com/users/sberyozkin/orgs","repos_url":"https://api.github.com/users/sberyozkin/repos","events_url":"https://api.github.com/users/sberyozkin/events{/privacy}","received_events_url":"https://api.github.com/users/sberyozkin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-03T11:54:25Z","updated_at":"2024-05-03T11:57:10Z","body":">using the session scoped bean or the connection object as a storage\r\n\r\nThe latter is probably better as it will let users avoid having to use `@SessionScoped` or is `@SessionScoped` a prerequisite for WS Next ? \r\n\r\nI've read https://quarkus.io/guides/websockets-next-reference#cdi-scopes-for-websocket-endpoints, looks like `@SessionScoped` is not required, it is implicitly managed.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/comments/2092851782/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sberyozkin","id":467639,"node_id":"MDQ6VXNlcjQ2NzYzOQ==","avatar_url":"https://avatars.githubusercontent.com/u/467639?v=4","gravatar_id":"","url":"https://api.github.com/users/sberyozkin","html_url":"https://github.com/sberyozkin","followers_url":"https://api.github.com/users/sberyozkin/followers","following_url":"https://api.github.com/users/sberyozkin/following{/other_user}","gists_url":"https://api.github.com/users/sberyozkin/gists{/gist_id}","starred_url":"https://api.github.com/users/sberyozkin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sberyozkin/subscriptions","organizations_url":"https://api.github.com/users/sberyozkin/orgs","repos_url":"https://api.github.com/users/sberyozkin/repos","events_url":"https://api.github.com/users/sberyozkin/events{/privacy}","received_events_url":"https://api.github.com/users/sberyozkin/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/comments/2092888792","html_url":"https://github.com/quarkusio/quarkus/issues/40312#issuecomment-2092888792","issue_url":"https://api.github.com/repos/quarkusio/quarkus/issues/40312","id":2092888792,"node_id":"IC_kwDOCFbutM58vvLY","user":{"login":"mkouba","id":913004,"node_id":"MDQ6VXNlcjkxMzAwNA==","avatar_url":"https://avatars.githubusercontent.com/u/913004?v=4","gravatar_id":"","url":"https://api.github.com/users/mkouba","html_url":"https://github.com/mkouba","followers_url":"https://api.github.com/users/mkouba/followers","following_url":"https://api.github.com/users/mkouba/following{/other_user}","gists_url":"https://api.github.com/users/mkouba/gists{/gist_id}","starred_url":"https://api.github.com/users/mkouba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkouba/subscriptions","organizations_url":"https://api.github.com/users/mkouba/orgs","repos_url":"https://api.github.com/users/mkouba/repos","events_url":"https://api.github.com/users/mkouba/events{/privacy}","received_events_url":"https://api.github.com/users/mkouba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-03T12:08:23Z","updated_at":"2024-05-03T12:08:23Z","body":" > using the session scoped bean or the connection object as a storage\r\n> \r\n> The latter is probably better as it will let users avoid having to use `@SessionScoped` or is `@SessionScoped` a prerequisite for WS Next ?\r\n> \r\n> I've read https://quarkus.io/guides/websockets-next-reference#cdi-scopes-for-websocket-endpoints, looks like `@SessionScoped` is not required, it is implicitly managed.\r\n\r\nEach connection has its own session context. When a server/client endpoint callback is executed this session context is activated automatically. The advantage of the latter approach is that you could access the connection _outside_ an endpoint callback invocation. Which might be helpful but not necessary.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/comments/2092888792/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mkouba","id":913004,"node_id":"MDQ6VXNlcjkxMzAwNA==","avatar_url":"https://avatars.githubusercontent.com/u/913004?v=4","gravatar_id":"","url":"https://api.github.com/users/mkouba","html_url":"https://github.com/mkouba","followers_url":"https://api.github.com/users/mkouba/followers","following_url":"https://api.github.com/users/mkouba/following{/other_user}","gists_url":"https://api.github.com/users/mkouba/gists{/gist_id}","starred_url":"https://api.github.com/users/mkouba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkouba/subscriptions","organizations_url":"https://api.github.com/users/mkouba/orgs","repos_url":"https://api.github.com/users/mkouba/repos","events_url":"https://api.github.com/users/mkouba/events{/privacy}","received_events_url":"https://api.github.com/users/mkouba/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/comments/2092923188","html_url":"https://github.com/quarkusio/quarkus/issues/40312#issuecomment-2092923188","issue_url":"https://api.github.com/repos/quarkusio/quarkus/issues/40312","id":2092923188,"node_id":"IC_kwDOCFbutM58v3k0","user":{"login":"sberyozkin","id":467639,"node_id":"MDQ6VXNlcjQ2NzYzOQ==","avatar_url":"https://avatars.githubusercontent.com/u/467639?v=4","gravatar_id":"","url":"https://api.github.com/users/sberyozkin","html_url":"https://github.com/sberyozkin","followers_url":"https://api.github.com/users/sberyozkin/followers","following_url":"https://api.github.com/users/sberyozkin/following{/other_user}","gists_url":"https://api.github.com/users/sberyozkin/gists{/gist_id}","starred_url":"https://api.github.com/users/sberyozkin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sberyozkin/subscriptions","organizations_url":"https://api.github.com/users/sberyozkin/orgs","repos_url":"https://api.github.com/users/sberyozkin/repos","events_url":"https://api.github.com/users/sberyozkin/events{/privacy}","received_events_url":"https://api.github.com/users/sberyozkin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-03T12:30:31Z","updated_at":"2024-05-03T12:31:29Z","body":"Thanks @mkouba,\r\n\r\n>The advantage of the latter approach is that you could access the connection outside an endpoint callback invocation. Which might be helpful but not necessary.\r\n\r\nInteresting, I believe with Quarkus LangChain4j, users get responses in scope of the callback. I'm not certain if retaining it in the connection object might increase the likelihood of the identity going stale.  I suppose we can start with storing it in the session scope bean, and move it to the connection if necessary or make it configurable.\r\n\r\nHow would we get the security info stored in the WS Next session scope bean though, can we add a `quarkus-security` dependency only to it for WS Next to check the availability of `SecurityIdentity` ? (Not sure what else but `SecurityIdentity` we can retain, seems simplest) ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/quarkusio/quarkus/issues/comments/2092923188/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sberyozkin","id":467639,"node_id":"MDQ6VXNlcjQ2NzYzOQ==","avatar_url":"https://avatars.githubusercontent.com/u/467639?v=4","gravatar_id":"","url":"https://api.github.com/users/sberyozkin","html_url":"https://github.com/sberyozkin","followers_url":"https://api.github.com/users/sberyozkin/followers","following_url":"https://api.github.com/users/sberyozkin/following{/other_user}","gists_url":"https://api.github.com/users/sberyozkin/gists{/gist_id}","starred_url":"https://api.github.com/users/sberyozkin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sberyozkin/subscriptions","organizations_url":"https://api.github.com/users/sberyozkin/orgs","repos_url":"https://api.github.com/users/sberyozkin/repos","events_url":"https://api.github.com/users/sberyozkin/events{/privacy}","received_events_url":"https://api.github.com/users/sberyozkin/received_events","type":"User","user_view_type":"public","site_admin":false}}]