[{"url":"https://api.github.com/repos/seanmonstar/reqwest/issues/comments/2287540326","html_url":"https://github.com/seanmonstar/reqwest/issues/2381#issuecomment-2287540326","issue_url":"https://api.github.com/repos/seanmonstar/reqwest/issues/2381","id":2287540326,"node_id":"IC_kwDOA7dkLM6IWRhm","user":{"login":"Andrey36652","id":35865938,"node_id":"MDQ6VXNlcjM1ODY1OTM4","avatar_url":"https://avatars.githubusercontent.com/u/35865938?v=4","gravatar_id":"","url":"https://api.github.com/users/Andrey36652","html_url":"https://github.com/Andrey36652","followers_url":"https://api.github.com/users/Andrey36652/followers","following_url":"https://api.github.com/users/Andrey36652/following{/other_user}","gists_url":"https://api.github.com/users/Andrey36652/gists{/gist_id}","starred_url":"https://api.github.com/users/Andrey36652/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Andrey36652/subscriptions","organizations_url":"https://api.github.com/users/Andrey36652/orgs","repos_url":"https://api.github.com/users/Andrey36652/repos","events_url":"https://api.github.com/users/Andrey36652/events{/privacy}","received_events_url":"https://api.github.com/users/Andrey36652/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-14T00:45:14Z","updated_at":"2024-08-14T00:45:14Z","body":"Seems like I've found out a reason. `async-compression` **by default** will report stream as \"Done\" as soon as GzipDecoder has finished it's work. https://github.com/Nullus157/async-compression/blob/9880aa99b264825e5c6902b2e25132e6bf2f74b9/src/tokio/bufread/generic/decoder.rs#L91\r\nBut one can change this behaviour by calling [`decoder.multiple_members(true)`](https://docs.rs/async-compression/latest/async_compression/tokio/bufread/struct.GzipDecoder.html#method.multiple_members) after constructing GzipDecoder.\r\nSo https://github.com/seanmonstar/reqwest/blob/8c7f338507e89279b15e051a00c68124e5f1e353/src/async_impl/decoder.rs#L468-L472 should be changed to\r\n```rust\r\n#[cfg(feature = \"gzip\")]\r\nDecoderType::Gzip => Poll::Ready(Ok(Inner::Gzip(Box::pin(FramedRead::new(\r\n    {\r\n        let mut d = GzipDecoder::new(StreamReader::new(_body));\r\n        d.multiple_members(true);\r\n        d\r\n    },\r\n    BytesCodec::new(),\r\n))))),\r\n```\r\nAnd now it works as expected!\r\n\r\nShould all other decoders be created with this option enabled? I think yes.\r\n\r\nShould this option be enabled only if `Transfer-Encoding: chunked` header is present or it can be used for non-chunked gzipped body as well? From my testing it works fine (for gzipped content) when:\r\n- `Transfer-Encoding` is chunked\r\n- `Content-Length` header is present and is corrent and no `Transfer-Encoding`\r\n\r\nBut response processing hangs up when neither `Transfer-Encoding` nor `Content-Length` are presented. So we could disable `multiple_members` in such case (but then connection will not be put back in pool and reused üôÅ). I'm not familiar with HTTP specification, is it legal for response to not have any of these headers?\r\n\r\nAnd I'm not sure how multiple-resource bodies should be processed. https://developer.mozilla.org/en-US/docs/Web/HTTP/Messages#body_2\r\n![image](https://github.com/user-attachments/assets/e5a02712-3872-44df-9685-f55af267818d)\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/seanmonstar/reqwest/issues/comments/2287540326/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Andrey36652","id":35865938,"node_id":"MDQ6VXNlcjM1ODY1OTM4","avatar_url":"https://avatars.githubusercontent.com/u/35865938?v=4","gravatar_id":"","url":"https://api.github.com/users/Andrey36652","html_url":"https://github.com/Andrey36652","followers_url":"https://api.github.com/users/Andrey36652/followers","following_url":"https://api.github.com/users/Andrey36652/following{/other_user}","gists_url":"https://api.github.com/users/Andrey36652/gists{/gist_id}","starred_url":"https://api.github.com/users/Andrey36652/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Andrey36652/subscriptions","organizations_url":"https://api.github.com/users/Andrey36652/orgs","repos_url":"https://api.github.com/users/Andrey36652/repos","events_url":"https://api.github.com/users/Andrey36652/events{/privacy}","received_events_url":"https://api.github.com/users/Andrey36652/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"Andrey36652","id":35865938,"node_id":"MDQ6VXNlcjM1ODY1OTM4","avatar_url":"https://avatars.githubusercontent.com/u/35865938?v=4","gravatar_id":"","url":"https://api.github.com/users/Andrey36652","html_url":"https://github.com/Andrey36652","followers_url":"https://api.github.com/users/Andrey36652/followers","following_url":"https://api.github.com/users/Andrey36652/following{/other_user}","gists_url":"https://api.github.com/users/Andrey36652/gists{/gist_id}","starred_url":"https://api.github.com/users/Andrey36652/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Andrey36652/subscriptions","organizations_url":"https://api.github.com/users/Andrey36652/orgs","repos_url":"https://api.github.com/users/Andrey36652/repos","events_url":"https://api.github.com/users/Andrey36652/events{/privacy}","received_events_url":"https://api.github.com/users/Andrey36652/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-24T23:28:35Z","updated_at":"2024-11-24T23:28:35Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/seanmonstar/reqwest/issues/2435","repository_url":"https://api.github.com/repos/seanmonstar/reqwest","labels_url":"https://api.github.com/repos/seanmonstar/reqwest/issues/2435/labels{/name}","comments_url":"https://api.github.com/repos/seanmonstar/reqwest/issues/2435/comments","events_url":"https://api.github.com/repos/seanmonstar/reqwest/issues/2435/events","html_url":"https://github.com/seanmonstar/reqwest/issues/2435","id":2550340981,"node_id":"I_kwDOA7dkLM6YAx11","number":2435,"title":"resolve tracing span sometimes lingers even after response received","user":{"login":"SorenHolstHansen","id":54755687,"node_id":"MDQ6VXNlcjU0NzU1Njg3","avatar_url":"https://avatars.githubusercontent.com/u/54755687?v=4","gravatar_id":"","url":"https://api.github.com/users/SorenHolstHansen","html_url":"https://github.com/SorenHolstHansen","followers_url":"https://api.github.com/users/SorenHolstHansen/followers","following_url":"https://api.github.com/users/SorenHolstHansen/following{/other_user}","gists_url":"https://api.github.com/users/SorenHolstHansen/gists{/gist_id}","starred_url":"https://api.github.com/users/SorenHolstHansen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SorenHolstHansen/subscriptions","organizations_url":"https://api.github.com/users/SorenHolstHansen/orgs","repos_url":"https://api.github.com/users/SorenHolstHansen/repos","events_url":"https://api.github.com/users/SorenHolstHansen/events{/privacy}","received_events_url":"https://api.github.com/users/SorenHolstHansen/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":17,"created_at":"2024-09-26T11:45:32Z","updated_at":"2024-11-24T23:28:36Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":62350380,"node_id":"MDEwOlJlcG9zaXRvcnk2MjM1MDM4MA==","name":"reqwest","full_name":"seanmonstar/reqwest","private":false,"owner":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/seanmonstar/reqwest","description":"An easy and powerful Rust HTTP Client","fork":false,"url":"https://api.github.com/repos/seanmonstar/reqwest","forks_url":"https://api.github.com/repos/seanmonstar/reqwest/forks","keys_url":"https://api.github.com/repos/seanmonstar/reqwest/keys{/key_id}","collaborators_url":"https://api.github.com/repos/seanmonstar/reqwest/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/seanmonstar/reqwest/teams","hooks_url":"https://api.github.com/repos/seanmonstar/reqwest/hooks","issue_events_url":"https://api.github.com/repos/seanmonstar/reqwest/issues/events{/number}","events_url":"https://api.github.com/repos/seanmonstar/reqwest/events","assignees_url":"https://api.github.com/repos/seanmonstar/reqwest/assignees{/user}","branches_url":"https://api.github.com/repos/seanmonstar/reqwest/branches{/branch}","tags_url":"https://api.github.com/repos/seanmonstar/reqwest/tags","blobs_url":"https://api.github.com/repos/seanmonstar/reqwest/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/seanmonstar/reqwest/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/seanmonstar/reqwest/git/refs{/sha}","trees_url":"https://api.github.com/repos/seanmonstar/reqwest/git/trees{/sha}","statuses_url":"https://api.github.com/repos/seanmonstar/reqwest/statuses/{sha}","languages_url":"https://api.github.com/repos/seanmonstar/reqwest/languages","stargazers_url":"https://api.github.com/repos/seanmonstar/reqwest/stargazers","contributors_url":"https://api.github.com/repos/seanmonstar/reqwest/contributors","subscribers_url":"https://api.github.com/repos/seanmonstar/reqwest/subscribers","subscription_url":"https://api.github.com/repos/seanmonstar/reqwest/subscription","commits_url":"https://api.github.com/repos/seanmonstar/reqwest/commits{/sha}","git_commits_url":"https://api.github.com/repos/seanmonstar/reqwest/git/commits{/sha}","comments_url":"https://api.github.com/repos/seanmonstar/reqwest/comments{/number}","issue_comment_url":"https://api.github.com/repos/seanmonstar/reqwest/issues/comments{/number}","contents_url":"https://api.github.com/repos/seanmonstar/reqwest/contents/{+path}","compare_url":"https://api.github.com/repos/seanmonstar/reqwest/compare/{base}...{head}","merges_url":"https://api.github.com/repos/seanmonstar/reqwest/merges","archive_url":"https://api.github.com/repos/seanmonstar/reqwest/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/seanmonstar/reqwest/downloads","issues_url":"https://api.github.com/repos/seanmonstar/reqwest/issues{/number}","pulls_url":"https://api.github.com/repos/seanmonstar/reqwest/pulls{/number}","milestones_url":"https://api.github.com/repos/seanmonstar/reqwest/milestones{/number}","notifications_url":"https://api.github.com/repos/seanmonstar/reqwest/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/seanmonstar/reqwest/labels{/name}","releases_url":"https://api.github.com/repos/seanmonstar/reqwest/releases{/id}","deployments_url":"https://api.github.com/repos/seanmonstar/reqwest/deployments","created_at":"2016-07-01T00:23:08Z","updated_at":"2025-11-09T16:08:54Z","pushed_at":"2025-11-04T17:45:57Z","git_url":"git://github.com/seanmonstar/reqwest.git","ssh_url":"git@github.com:seanmonstar/reqwest.git","clone_url":"https://github.com/seanmonstar/reqwest.git","svn_url":"https://github.com/seanmonstar/reqwest","homepage":"https://docs.rs/reqwest","size":2370,"stargazers_count":11139,"watchers_count":11139,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":1300,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":440,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["http","http-client","rust"],"visibility":"public","forks":1300,"open_issues":440,"watchers":11139,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"We have noticed a weird situation in our production traces for our axum server where sometimes an endpoint, even if the endpoint makes a response very quickly, that the traces say that the endpoint took a very long time. This doesn't happen all the time, but when it happens, it is always related to reqwest calls (i.e. the reqwest crate).\r\n\r\nA trace could look something like this (this is how it looks in our prod metrics platform in azure, you will see below that another platform shows the endpoint as shorter)\r\n```\r\nendpoint:     -------------\r\nsomething:    --\r\nreqwest_call:   -----------\r\nstuff_after:       --\r\nresponse:           --\r\n```\r\nthat is, the response is done quite quickly, but because the reqwest call seems to hang, the whole endpoint shows as taking a long time. Now, the reqwest calls actually all finish very quickly. You can see that the \"stuff_after\" continues shortly after, and we have done other approaches to show that they actually finish fast. So something is hanging in the reqwest client that makes this show as taking a long time.\r\n\r\nWe even added a field to the root request span (using tower tracing) that shows that the endpoint is done quickly. So from the users point of view, nothing is taking a long time, but for us, we can't trust our tracing.\r\n\r\nI made a reproducible case here: https://github.com/SorenHolstHansen/reqwest_tracing_bug\r\n\r\nTo reproduce, I started a local open telemetry platform (signoz or jaeger), started the server in the repo i linked, and then ran `seq 1 5000 | xargs -P0 -I{} curl http://127.0.0.1:8008`\r\n\r\nIn signoz, you should then be able to see cases like these:\r\n<img width=\"1228\" alt=\"Screenshot 2024-09-26 at 12 18 23\" src=\"https://github.com/user-attachments/assets/587f92ad-f059-4326-8c00-96eff7cf09ee\">\r\n\r\nYou can see in the bottom right, that the endpoint took 0 seconds, but resolve took 35 seconds.\r\n\r\nI created a [similar issue](https://github.com/tokio-rs/tracing/issues/3090) earlier in the tracing crate, which led me to believe that reqwest has long lived spans.","reactions":{"url":"https://api.github.com/repos/seanmonstar/reqwest/issues/2435/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/seanmonstar/reqwest/issues/2435/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"Andrey36652","id":35865938,"node_id":"MDQ6VXNlcjM1ODY1OTM4","avatar_url":"https://avatars.githubusercontent.com/u/35865938?v=4","gravatar_id":"","url":"https://api.github.com/users/Andrey36652","html_url":"https://github.com/Andrey36652","followers_url":"https://api.github.com/users/Andrey36652/followers","following_url":"https://api.github.com/users/Andrey36652/following{/other_user}","gists_url":"https://api.github.com/users/Andrey36652/gists{/gist_id}","starred_url":"https://api.github.com/users/Andrey36652/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Andrey36652/subscriptions","organizations_url":"https://api.github.com/users/Andrey36652/orgs","repos_url":"https://api.github.com/users/Andrey36652/repos","events_url":"https://api.github.com/users/Andrey36652/events{/privacy}","received_events_url":"https://api.github.com/users/Andrey36652/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-25T00:25:36Z","updated_at":"2024-11-25T00:25:36Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/Nullus157/async-compression/issues/315","repository_url":"https://api.github.com/repos/Nullus157/async-compression","labels_url":"https://api.github.com/repos/Nullus157/async-compression/issues/315/labels{/name}","comments_url":"https://api.github.com/repos/Nullus157/async-compression/issues/315/comments","events_url":"https://api.github.com/repos/Nullus157/async-compression/issues/315/events","html_url":"https://github.com/Nullus157/async-compression/issues/315","id":2688706516,"node_id":"I_kwDOCvmSQM6gQmfU","number":315,"title":"[Question] Should async-compression behave in a way it does?","user":{"login":"Andrey36652","id":35865938,"node_id":"MDQ6VXNlcjM1ODY1OTM4","avatar_url":"https://avatars.githubusercontent.com/u/35865938?v=4","gravatar_id":"","url":"https://api.github.com/users/Andrey36652","html_url":"https://github.com/Andrey36652","followers_url":"https://api.github.com/users/Andrey36652/followers","following_url":"https://api.github.com/users/Andrey36652/following{/other_user}","gists_url":"https://api.github.com/users/Andrey36652/gists{/gist_id}","starred_url":"https://api.github.com/users/Andrey36652/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Andrey36652/subscriptions","organizations_url":"https://api.github.com/users/Andrey36652/orgs","repos_url":"https://api.github.com/users/Andrey36652/repos","events_url":"https://api.github.com/users/Andrey36652/events{/privacy}","received_events_url":"https://api.github.com/users/Andrey36652/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2024-11-25T00:25:35Z","updated_at":"2024-12-03T16:08:36Z","closed_at":"2024-12-03T16:08:36Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":184128064,"node_id":"MDEwOlJlcG9zaXRvcnkxODQxMjgwNjQ=","name":"async-compression","full_name":"Nullus157/async-compression","private":false,"owner":{"login":"Nullus157","id":75685407,"node_id":"MDEyOk9yZ2FuaXphdGlvbjc1Njg1NDA3","avatar_url":"https://avatars.githubusercontent.com/u/75685407?v=4","gravatar_id":"","url":"https://api.github.com/users/Nullus157","html_url":"https://github.com/Nullus157","followers_url":"https://api.github.com/users/Nullus157/followers","following_url":"https://api.github.com/users/Nullus157/following{/other_user}","gists_url":"https://api.github.com/users/Nullus157/gists{/gist_id}","starred_url":"https://api.github.com/users/Nullus157/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Nullus157/subscriptions","organizations_url":"https://api.github.com/users/Nullus157/orgs","repos_url":"https://api.github.com/users/Nullus157/repos","events_url":"https://api.github.com/users/Nullus157/events{/privacy}","received_events_url":"https://api.github.com/users/Nullus157/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/Nullus157/async-compression","description":"Adaptors between compression crates and Rust's async IO types","fork":false,"url":"https://api.github.com/repos/Nullus157/async-compression","forks_url":"https://api.github.com/repos/Nullus157/async-compression/forks","keys_url":"https://api.github.com/repos/Nullus157/async-compression/keys{/key_id}","collaborators_url":"https://api.github.com/repos/Nullus157/async-compression/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/Nullus157/async-compression/teams","hooks_url":"https://api.github.com/repos/Nullus157/async-compression/hooks","issue_events_url":"https://api.github.com/repos/Nullus157/async-compression/issues/events{/number}","events_url":"https://api.github.com/repos/Nullus157/async-compression/events","assignees_url":"https://api.github.com/repos/Nullus157/async-compression/assignees{/user}","branches_url":"https://api.github.com/repos/Nullus157/async-compression/branches{/branch}","tags_url":"https://api.github.com/repos/Nullus157/async-compression/tags","blobs_url":"https://api.github.com/repos/Nullus157/async-compression/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/Nullus157/async-compression/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/Nullus157/async-compression/git/refs{/sha}","trees_url":"https://api.github.com/repos/Nullus157/async-compression/git/trees{/sha}","statuses_url":"https://api.github.com/repos/Nullus157/async-compression/statuses/{sha}","languages_url":"https://api.github.com/repos/Nullus157/async-compression/languages","stargazers_url":"https://api.github.com/repos/Nullus157/async-compression/stargazers","contributors_url":"https://api.github.com/repos/Nullus157/async-compression/contributors","subscribers_url":"https://api.github.com/repos/Nullus157/async-compression/subscribers","subscription_url":"https://api.github.com/repos/Nullus157/async-compression/subscription","commits_url":"https://api.github.com/repos/Nullus157/async-compression/commits{/sha}","git_commits_url":"https://api.github.com/repos/Nullus157/async-compression/git/commits{/sha}","comments_url":"https://api.github.com/repos/Nullus157/async-compression/comments{/number}","issue_comment_url":"https://api.github.com/repos/Nullus157/async-compression/issues/comments{/number}","contents_url":"https://api.github.com/repos/Nullus157/async-compression/contents/{+path}","compare_url":"https://api.github.com/repos/Nullus157/async-compression/compare/{base}...{head}","merges_url":"https://api.github.com/repos/Nullus157/async-compression/merges","archive_url":"https://api.github.com/repos/Nullus157/async-compression/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/Nullus157/async-compression/downloads","issues_url":"https://api.github.com/repos/Nullus157/async-compression/issues{/number}","pulls_url":"https://api.github.com/repos/Nullus157/async-compression/pulls{/number}","milestones_url":"https://api.github.com/repos/Nullus157/async-compression/milestones{/number}","notifications_url":"https://api.github.com/repos/Nullus157/async-compression/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/Nullus157/async-compression/labels{/name}","releases_url":"https://api.github.com/repos/Nullus157/async-compression/releases{/id}","deployments_url":"https://api.github.com/repos/Nullus157/async-compression/deployments","created_at":"2019-04-29T19:06:01Z","updated_at":"2025-11-09T15:38:49Z","pushed_at":"2025-11-09T15:39:34Z","git_url":"git://github.com/Nullus157/async-compression.git","ssh_url":"git@github.com:Nullus157/async-compression.git","clone_url":"https://github.com/Nullus157/async-compression.git","svn_url":"https://github.com/Nullus157/async-compression","homepage":"https://docs.rs/async-compression","size":1164,"stargazers_count":583,"watchers_count":583,"language":"Rust","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":102,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":26,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":[],"visibility":"public","forks":102,"open_issues":26,"watchers":583,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Hello, I'm trying to fix this bug https://github.com/seanmonstar/reqwest/issues/2381 in reqwest library. I have found out a reason and (preliminary) a way to fix it.\r\nBut I'm not sure if this is a bug in async-compression itself or in a way reqwest uses it.\r\nCould you take a look and clarify?","reactions":{"url":"https://api.github.com/repos/Nullus157/async-compression/issues/315/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Nullus157/async-compression/issues/315/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"Andrey36652","id":35865938,"node_id":"MDQ6VXNlcjM1ODY1OTM4","avatar_url":"https://avatars.githubusercontent.com/u/35865938?v=4","gravatar_id":"","url":"https://api.github.com/users/Andrey36652","html_url":"https://github.com/Andrey36652","followers_url":"https://api.github.com/users/Andrey36652/followers","following_url":"https://api.github.com/users/Andrey36652/following{/other_user}","gists_url":"https://api.github.com/users/Andrey36652/gists{/gist_id}","starred_url":"https://api.github.com/users/Andrey36652/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Andrey36652/subscriptions","organizations_url":"https://api.github.com/users/Andrey36652/orgs","repos_url":"https://api.github.com/users/Andrey36652/repos","events_url":"https://api.github.com/users/Andrey36652/events{/privacy}","received_events_url":"https://api.github.com/users/Andrey36652/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-27T15:56:34Z","updated_at":"2024-11-27T15:56:34Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/seanmonstar/reqwest/issues/2484","repository_url":"https://api.github.com/repos/seanmonstar/reqwest","labels_url":"https://api.github.com/repos/seanmonstar/reqwest/issues/2484/labels{/name}","comments_url":"https://api.github.com/repos/seanmonstar/reqwest/issues/2484/comments","events_url":"https://api.github.com/repos/seanmonstar/reqwest/issues/2484/events","html_url":"https://github.com/seanmonstar/reqwest/pull/2484","id":2699040110,"node_id":"PR_kwDOA7dkLM6DW3Rp","number":2484,"title":"Poll inner connection until EOF after gzip decoder is complete","user":{"login":"Andrey36652","id":35865938,"node_id":"MDQ6VXNlcjM1ODY1OTM4","avatar_url":"https://avatars.githubusercontent.com/u/35865938?v=4","gravatar_id":"","url":"https://api.github.com/users/Andrey36652","html_url":"https://github.com/Andrey36652","followers_url":"https://api.github.com/users/Andrey36652/followers","following_url":"https://api.github.com/users/Andrey36652/following{/other_user}","gists_url":"https://api.github.com/users/Andrey36652/gists{/gist_id}","starred_url":"https://api.github.com/users/Andrey36652/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Andrey36652/subscriptions","organizations_url":"https://api.github.com/users/Andrey36652/orgs","repos_url":"https://api.github.com/users/Andrey36652/repos","events_url":"https://api.github.com/users/Andrey36652/events{/privacy}","received_events_url":"https://api.github.com/users/Andrey36652/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":19,"created_at":"2024-11-27T15:56:33Z","updated_at":"2025-03-05T14:48:50Z","closed_at":"2024-12-03T16:01:58Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"repository":{"id":62350380,"node_id":"MDEwOlJlcG9zaXRvcnk2MjM1MDM4MA==","name":"reqwest","full_name":"seanmonstar/reqwest","private":false,"owner":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/seanmonstar/reqwest","description":"An easy and powerful Rust HTTP Client","fork":false,"url":"https://api.github.com/repos/seanmonstar/reqwest","forks_url":"https://api.github.com/repos/seanmonstar/reqwest/forks","keys_url":"https://api.github.com/repos/seanmonstar/reqwest/keys{/key_id}","collaborators_url":"https://api.github.com/repos/seanmonstar/reqwest/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/seanmonstar/reqwest/teams","hooks_url":"https://api.github.com/repos/seanmonstar/reqwest/hooks","issue_events_url":"https://api.github.com/repos/seanmonstar/reqwest/issues/events{/number}","events_url":"https://api.github.com/repos/seanmonstar/reqwest/events","assignees_url":"https://api.github.com/repos/seanmonstar/reqwest/assignees{/user}","branches_url":"https://api.github.com/repos/seanmonstar/reqwest/branches{/branch}","tags_url":"https://api.github.com/repos/seanmonstar/reqwest/tags","blobs_url":"https://api.github.com/repos/seanmonstar/reqwest/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/seanmonstar/reqwest/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/seanmonstar/reqwest/git/refs{/sha}","trees_url":"https://api.github.com/repos/seanmonstar/reqwest/git/trees{/sha}","statuses_url":"https://api.github.com/repos/seanmonstar/reqwest/statuses/{sha}","languages_url":"https://api.github.com/repos/seanmonstar/reqwest/languages","stargazers_url":"https://api.github.com/repos/seanmonstar/reqwest/stargazers","contributors_url":"https://api.github.com/repos/seanmonstar/reqwest/contributors","subscribers_url":"https://api.github.com/repos/seanmonstar/reqwest/subscribers","subscription_url":"https://api.github.com/repos/seanmonstar/reqwest/subscription","commits_url":"https://api.github.com/repos/seanmonstar/reqwest/commits{/sha}","git_commits_url":"https://api.github.com/repos/seanmonstar/reqwest/git/commits{/sha}","comments_url":"https://api.github.com/repos/seanmonstar/reqwest/comments{/number}","issue_comment_url":"https://api.github.com/repos/seanmonstar/reqwest/issues/comments{/number}","contents_url":"https://api.github.com/repos/seanmonstar/reqwest/contents/{+path}","compare_url":"https://api.github.com/repos/seanmonstar/reqwest/compare/{base}...{head}","merges_url":"https://api.github.com/repos/seanmonstar/reqwest/merges","archive_url":"https://api.github.com/repos/seanmonstar/reqwest/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/seanmonstar/reqwest/downloads","issues_url":"https://api.github.com/repos/seanmonstar/reqwest/issues{/number}","pulls_url":"https://api.github.com/repos/seanmonstar/reqwest/pulls{/number}","milestones_url":"https://api.github.com/repos/seanmonstar/reqwest/milestones{/number}","notifications_url":"https://api.github.com/repos/seanmonstar/reqwest/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/seanmonstar/reqwest/labels{/name}","releases_url":"https://api.github.com/repos/seanmonstar/reqwest/releases{/id}","deployments_url":"https://api.github.com/repos/seanmonstar/reqwest/deployments","created_at":"2016-07-01T00:23:08Z","updated_at":"2025-11-09T16:08:54Z","pushed_at":"2025-11-04T17:45:57Z","git_url":"git://github.com/seanmonstar/reqwest.git","ssh_url":"git@github.com:seanmonstar/reqwest.git","clone_url":"https://github.com/seanmonstar/reqwest.git","svn_url":"https://github.com/seanmonstar/reqwest","homepage":"https://docs.rs/reqwest","size":2370,"stargazers_count":11139,"watchers_count":11139,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":1300,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":440,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["http","http-client","rust"],"visibility":"public","forks":1300,"open_issues":440,"watchers":11139,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/seanmonstar/reqwest/pulls/2484","html_url":"https://github.com/seanmonstar/reqwest/pull/2484","diff_url":"https://github.com/seanmonstar/reqwest/pull/2484.diff","patch_url":"https://github.com/seanmonstar/reqwest/pull/2484.patch","merged_at":"2024-12-03T16:01:58Z"},"body":"Fix for https://github.com/seanmonstar/reqwest/issues/2381","reactions":{"url":"https://api.github.com/repos/seanmonstar/reqwest/issues/2484/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/seanmonstar/reqwest/issues/2484/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":15512295778,"node_id":"CE_lADOA7dkLM6SwxJEzwAAAAOcmtli","url":"https://api.github.com/repos/seanmonstar/reqwest/issues/events/15512295778","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"d36c0f5fd93f8190c9f39990ce4ec859c2b6d567","commit_url":"https://api.github.com/repos/seanmonstar/reqwest/commits/d36c0f5fd93f8190c9f39990ce4ec859c2b6d567","created_at":"2024-12-03T16:02:00Z","state_reason":null,"performed_via_github_app":null},{"id":15516143440,"node_id":"REFE_lADOA7dkLM6SwxJEzwAAAAOc1Y9Q","url":"https://api.github.com/repos/seanmonstar/reqwest/issues/events/15516143440","actor":{"login":"pull[bot]","id":39814207,"node_id":"MDM6Qm90Mzk4MTQyMDc=","avatar_url":"https://avatars.githubusercontent.com/in/12910?v=4","gravatar_id":"","url":"https://api.github.com/users/pull%5Bbot%5D","html_url":"https://github.com/apps/pull","followers_url":"https://api.github.com/users/pull%5Bbot%5D/followers","following_url":"https://api.github.com/users/pull%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/pull%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/pull%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pull%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/pull%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/pull%5Bbot%5D/repos","events_url":"https://api.github.com/users/pull%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/pull%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"d36c0f5fd93f8190c9f39990ce4ec859c2b6d567","commit_url":"https://api.github.com/repos/CodeWeaver13/reqwest/commits/d36c0f5fd93f8190c9f39990ce4ec859c2b6d567","created_at":"2024-12-03T21:16:06Z","performed_via_github_app":null},{"id":15816174686,"node_id":"REFE_lADOA7dkLM6SwxJEzwAAAAOut6xe","url":"https://api.github.com/repos/seanmonstar/reqwest/issues/events/15816174686","actor":{"login":"AaronDewes","id":67546953,"node_id":"MDQ6VXNlcjY3NTQ2OTUz","avatar_url":"https://avatars.githubusercontent.com/u/67546953?v=4","gravatar_id":"","url":"https://api.github.com/users/AaronDewes","html_url":"https://github.com/AaronDewes","followers_url":"https://api.github.com/users/AaronDewes/followers","following_url":"https://api.github.com/users/AaronDewes/following{/other_user}","gists_url":"https://api.github.com/users/AaronDewes/gists{/gist_id}","starred_url":"https://api.github.com/users/AaronDewes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AaronDewes/subscriptions","organizations_url":"https://api.github.com/users/AaronDewes/orgs","repos_url":"https://api.github.com/users/AaronDewes/repos","events_url":"https://api.github.com/users/AaronDewes/events{/privacy}","received_events_url":"https://api.github.com/users/AaronDewes/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"2d9ddc2b9d1efcbe38d19f77f8a31e67246fc6c8","commit_url":"https://api.github.com/repos/AaronDewes/reqwest-no-rustls/commits/2d9ddc2b9d1efcbe38d19f77f8a31e67246fc6c8","created_at":"2025-01-04T20:58:19Z","performed_via_github_app":null}]