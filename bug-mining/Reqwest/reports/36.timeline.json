[{"url":"https://api.github.com/repos/seanmonstar/reqwest/issues/comments/469536429","html_url":"https://github.com/seanmonstar/reqwest/issues/468#issuecomment-469536429","issue_url":"https://api.github.com/repos/seanmonstar/reqwest/issues/468","id":469536429,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTUzNjQyOQ==","user":{"login":"hlb8122","id":26074448,"node_id":"MDQ6VXNlcjI2MDc0NDQ4","avatar_url":"https://avatars.githubusercontent.com/u/26074448?v=4","gravatar_id":"","url":"https://api.github.com/users/hlb8122","html_url":"https://github.com/hlb8122","followers_url":"https://api.github.com/users/hlb8122/followers","following_url":"https://api.github.com/users/hlb8122/following{/other_user}","gists_url":"https://api.github.com/users/hlb8122/gists{/gist_id}","starred_url":"https://api.github.com/users/hlb8122/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hlb8122/subscriptions","organizations_url":"https://api.github.com/users/hlb8122/orgs","repos_url":"https://api.github.com/users/hlb8122/repos","events_url":"https://api.github.com/users/hlb8122/events{/privacy}","received_events_url":"https://api.github.com/users/hlb8122/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T04:49:39Z","updated_at":"2019-03-05T04:49:39Z","body":"I've just tested and indeed this is the problem for the server I was interacting with. ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/seanmonstar/reqwest/issues/comments/469536429/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hlb8122","id":26074448,"node_id":"MDQ6VXNlcjI2MDc0NDQ4","avatar_url":"https://avatars.githubusercontent.com/u/26074448?v=4","gravatar_id":"","url":"https://api.github.com/users/hlb8122","html_url":"https://github.com/hlb8122","followers_url":"https://api.github.com/users/hlb8122/followers","following_url":"https://api.github.com/users/hlb8122/following{/other_user}","gists_url":"https://api.github.com/users/hlb8122/gists{/gist_id}","starred_url":"https://api.github.com/users/hlb8122/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hlb8122/subscriptions","organizations_url":"https://api.github.com/users/hlb8122/orgs","repos_url":"https://api.github.com/users/hlb8122/repos","events_url":"https://api.github.com/users/hlb8122/events{/privacy}","received_events_url":"https://api.github.com/users/hlb8122/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"hlb8122","id":26074448,"node_id":"MDQ6VXNlcjI2MDc0NDQ4","avatar_url":"https://avatars.githubusercontent.com/u/26074448?v=4","gravatar_id":"","url":"https://api.github.com/users/hlb8122","html_url":"https://github.com/hlb8122","followers_url":"https://api.github.com/users/hlb8122/followers","following_url":"https://api.github.com/users/hlb8122/following{/other_user}","gists_url":"https://api.github.com/users/hlb8122/gists{/gist_id}","starred_url":"https://api.github.com/users/hlb8122/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hlb8122/subscriptions","organizations_url":"https://api.github.com/users/hlb8122/orgs","repos_url":"https://api.github.com/users/hlb8122/repos","events_url":"https://api.github.com/users/hlb8122/events{/privacy}","received_events_url":"https://api.github.com/users/hlb8122/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T05:03:22Z","updated_at":"2019-03-05T05:03:22Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/exonum/jsonrpc/issues/1","repository_url":"https://api.github.com/repos/exonum/jsonrpc","labels_url":"https://api.github.com/repos/exonum/jsonrpc/issues/1/labels{/name}","comments_url":"https://api.github.com/repos/exonum/jsonrpc/issues/1/comments","events_url":"https://api.github.com/repos/exonum/jsonrpc/issues/1/events","html_url":"https://github.com/exonum/jsonrpc/issues/1","id":417118800,"node_id":"MDU6SXNzdWU0MTcxMTg4MDA=","number":1,"title":"Asynchronous implementation","user":{"login":"hlb8122","id":26074448,"node_id":"MDQ6VXNlcjI2MDc0NDQ4","avatar_url":"https://avatars.githubusercontent.com/u/26074448?v=4","gravatar_id":"","url":"https://api.github.com/users/hlb8122","html_url":"https://github.com/hlb8122","followers_url":"https://api.github.com/users/hlb8122/followers","following_url":"https://api.github.com/users/hlb8122/following{/other_user}","gists_url":"https://api.github.com/users/hlb8122/gists{/gist_id}","starred_url":"https://api.github.com/users/hlb8122/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hlb8122/subscriptions","organizations_url":"https://api.github.com/users/hlb8122/orgs","repos_url":"https://api.github.com/users/hlb8122/repos","events_url":"https://api.github.com/users/hlb8122/events{/privacy}","received_events_url":"https://api.github.com/users/hlb8122/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2019-03-05T05:03:22Z","updated_at":"2020-02-09T17:29:22Z","closed_at":"2020-02-09T17:29:22Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":95761878,"node_id":"MDEwOlJlcG9zaXRvcnk5NTc2MTg3OA==","name":"jsonrpc","full_name":"exonum/jsonrpc","private":false,"owner":{"login":"exonum","id":23138442,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIzMTM4NDQy","avatar_url":"https://avatars.githubusercontent.com/u/23138442?v=4","gravatar_id":"","url":"https://api.github.com/users/exonum","html_url":"https://github.com/exonum","followers_url":"https://api.github.com/users/exonum/followers","following_url":"https://api.github.com/users/exonum/following{/other_user}","gists_url":"https://api.github.com/users/exonum/gists{/gist_id}","starred_url":"https://api.github.com/users/exonum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/exonum/subscriptions","organizations_url":"https://api.github.com/users/exonum/orgs","repos_url":"https://api.github.com/users/exonum/repos","events_url":"https://api.github.com/users/exonum/events{/privacy}","received_events_url":"https://api.github.com/users/exonum/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/exonum/jsonrpc","description":"Client implementation for the jsonrpc v1 protocol.","fork":false,"url":"https://api.github.com/repos/exonum/jsonrpc","forks_url":"https://api.github.com/repos/exonum/jsonrpc/forks","keys_url":"https://api.github.com/repos/exonum/jsonrpc/keys{/key_id}","collaborators_url":"https://api.github.com/repos/exonum/jsonrpc/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/exonum/jsonrpc/teams","hooks_url":"https://api.github.com/repos/exonum/jsonrpc/hooks","issue_events_url":"https://api.github.com/repos/exonum/jsonrpc/issues/events{/number}","events_url":"https://api.github.com/repos/exonum/jsonrpc/events","assignees_url":"https://api.github.com/repos/exonum/jsonrpc/assignees{/user}","branches_url":"https://api.github.com/repos/exonum/jsonrpc/branches{/branch}","tags_url":"https://api.github.com/repos/exonum/jsonrpc/tags","blobs_url":"https://api.github.com/repos/exonum/jsonrpc/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/exonum/jsonrpc/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/exonum/jsonrpc/git/refs{/sha}","trees_url":"https://api.github.com/repos/exonum/jsonrpc/git/trees{/sha}","statuses_url":"https://api.github.com/repos/exonum/jsonrpc/statuses/{sha}","languages_url":"https://api.github.com/repos/exonum/jsonrpc/languages","stargazers_url":"https://api.github.com/repos/exonum/jsonrpc/stargazers","contributors_url":"https://api.github.com/repos/exonum/jsonrpc/contributors","subscribers_url":"https://api.github.com/repos/exonum/jsonrpc/subscribers","subscription_url":"https://api.github.com/repos/exonum/jsonrpc/subscription","commits_url":"https://api.github.com/repos/exonum/jsonrpc/commits{/sha}","git_commits_url":"https://api.github.com/repos/exonum/jsonrpc/git/commits{/sha}","comments_url":"https://api.github.com/repos/exonum/jsonrpc/comments{/number}","issue_comment_url":"https://api.github.com/repos/exonum/jsonrpc/issues/comments{/number}","contents_url":"https://api.github.com/repos/exonum/jsonrpc/contents/{+path}","compare_url":"https://api.github.com/repos/exonum/jsonrpc/compare/{base}...{head}","merges_url":"https://api.github.com/repos/exonum/jsonrpc/merges","archive_url":"https://api.github.com/repos/exonum/jsonrpc/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/exonum/jsonrpc/downloads","issues_url":"https://api.github.com/repos/exonum/jsonrpc/issues{/number}","pulls_url":"https://api.github.com/repos/exonum/jsonrpc/pulls{/number}","milestones_url":"https://api.github.com/repos/exonum/jsonrpc/milestones{/number}","notifications_url":"https://api.github.com/repos/exonum/jsonrpc/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/exonum/jsonrpc/labels{/name}","releases_url":"https://api.github.com/repos/exonum/jsonrpc/releases{/id}","deployments_url":"https://api.github.com/repos/exonum/jsonrpc/deployments","created_at":"2017-06-29T09:31:40Z","updated_at":"2019-07-09T13:49:36Z","pushed_at":"2019-07-09T13:49:35Z","git_url":"git://github.com/exonum/jsonrpc.git","ssh_url":"git@github.com:exonum/jsonrpc.git","clone_url":"https://github.com/exonum/jsonrpc.git","svn_url":"https://github.com/exonum/jsonrpc","homepage":null,"size":14,"stargazers_count":3,"watchers_count":3,"language":"Rust","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":3,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":0,"license":{"key":"cc0-1.0","name":"Creative Commons Zero v1.0 Universal","spdx_id":"CC0-1.0","url":"https://api.github.com/licenses/cc0-1.0","node_id":"MDc6TGljZW5zZTY="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":3,"open_issues":0,"watchers":3,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Here's an asyncronous implementation of send_request if you're interested. I'll leave it to you to decide whether you'd like to introduce it and how. \r\n```rust\r\n    /// Sends a request to a async client\r\n    pub fn send_request(&self, request: &Request) -> impl Future<Item = Response, Error = Error> {\r\n        // Send request\r\n        let mut request_builder = self.client.post(&self.url);\r\n        if let Some(ref user) = self.user {\r\n            request_builder = request_builder.basic_auth(user.clone(), self.pass.clone());\r\n        }\r\n        let request_id = request.id.clone();\r\n        let reqwest_response = request_builder\r\n            .json(request)\r\n            .send()\r\n            .map_err(|e| Error::from(e));\r\n        // Parse response\r\n        let response = reqwest_response.and_then(move |mut raw_resp| {\r\n            let parsed_resp = raw_resp.json();\r\n            parsed_resp\r\n                .map_err(|e| Error::from(e))\r\n                .and_then(move |r: Response| {\r\n                    if r.id != request_id {\r\n                        return futures::future::err(Error::NonceMismatch);\r\n                    } else {\r\n                        futures::future::ok(r)\r\n                    }\r\n                })\r\n        });\r\n        response\r\n    }\r\n```\r\n\r\nYou can test it via \r\n```rust\r\n        let url: String = \"http://localhost:8332\".into();\r\n        let user = Some(\"USERNAME\".into());\r\n        let passwd = Some(\"PASSWORD\".into());\r\n\r\n        println!(\r\n            \"Send request to: {:?} user={:?}, passwd={:?}\",\r\n            url, user, passwd\r\n        );\r\n        let client = super::async_client::AsyncClient::new(url, user, passwd);\r\n\r\n        let method_name = String::from(\"getmininginfo\");\r\n        let request = client.build_request(method_name, vec![]);\r\n\r\n        let print_result = client\r\n            .send_request(&request)\r\n            .and_then(|res| res.into_result::<MiningInfo>())\r\n            .map(|mining_info| {\r\n                println!(\"mining_info: {:?}\", mining_info);\r\n            })\r\n            .map_err(|e| {\r\n                panic!(\"error: {}\", e);\r\n            });\r\n\r\n        tokio::run(print_result);\r\n```\r\nIt currently fails unfortunately, but that's due to https://github.com/seanmonstar/reqwest/issues/468. Once the fixes to reqwest are done it passes the test above.","reactions":{"url":"https://api.github.com/repos/exonum/jsonrpc/issues/1/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/exonum/jsonrpc/issues/1/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":2181880138,"node_id":"MDEyOkxhYmVsZWRFdmVudDIxODE4ODAxMzg=","url":"https://api.github.com/repos/seanmonstar/reqwest/issues/events/2181880138","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-03-05T18:47:58Z","label":{"name":"bug","color":"ee0701"},"performed_via_github_app":null},{"id":2181880146,"node_id":"MDEyOkxhYmVsZWRFdmVudDIxODE4ODAxNDY=","url":"https://api.github.com/repos/seanmonstar/reqwest/issues/events/2181880146","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-03-05T18:47:58Z","label":{"name":"easy","color":"128A0C"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/seanmonstar/reqwest/issues/comments/469810873","html_url":"https://github.com/seanmonstar/reqwest/issues/468#issuecomment-469810873","issue_url":"https://api.github.com/repos/seanmonstar/reqwest/issues/468","id":469810873,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTgxMDg3Mw==","user":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T18:48:25Z","updated_at":"2019-03-05T18:48:25Z","body":"Woops! Should be an easy fix.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/seanmonstar/reqwest/issues/comments/469810873/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2218214640,"node_id":"MDExOkNsb3NlZEV2ZW50MjIxODIxNDY0MA==","url":"https://api.github.com/repos/seanmonstar/reqwest/issues/events/2218214640","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"faaf41cdfbfae75f444001986f8a10827c658f17","commit_url":"https://api.github.com/repos/seanmonstar/reqwest/commits/faaf41cdfbfae75f444001986f8a10827c658f17","created_at":"2019-03-20T21:12:26Z","state_reason":null,"performed_via_github_app":null},{"id":13638084458,"node_id":"REFE_lADOA7dkLM4Y3KLhzwAAAAMs5Kdq","url":"https://api.github.com/repos/seanmonstar/reqwest/issues/events/13638084458","actor":{"login":"ptrsxu","id":1509894,"node_id":"MDQ6VXNlcjE1MDk4OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/1509894?v=4","gravatar_id":"","url":"https://api.github.com/users/ptrsxu","html_url":"https://github.com/ptrsxu","followers_url":"https://api.github.com/users/ptrsxu/followers","following_url":"https://api.github.com/users/ptrsxu/following{/other_user}","gists_url":"https://api.github.com/users/ptrsxu/gists{/gist_id}","starred_url":"https://api.github.com/users/ptrsxu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ptrsxu/subscriptions","organizations_url":"https://api.github.com/users/ptrsxu/orgs","repos_url":"https://api.github.com/users/ptrsxu/repos","events_url":"https://api.github.com/users/ptrsxu/events{/privacy}","received_events_url":"https://api.github.com/users/ptrsxu/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"faaf41cdfbfae75f444001986f8a10827c658f17","commit_url":"https://api.github.com/repos/ptrsxu/reqwest/commits/faaf41cdfbfae75f444001986f8a10827c658f17","created_at":"2024-07-25T01:17:57Z","performed_via_github_app":null}]