{"url":"https://api.github.com/repos/seanmonstar/reqwest/issues/2565","repository_url":"https://api.github.com/repos/seanmonstar/reqwest","labels_url":"https://api.github.com/repos/seanmonstar/reqwest/issues/2565/labels{/name}","comments_url":"https://api.github.com/repos/seanmonstar/reqwest/issues/2565/comments","events_url":"https://api.github.com/repos/seanmonstar/reqwest/issues/2565/events","html_url":"https://github.com/seanmonstar/reqwest/issues/2565","id":2870287068,"node_id":"I_kwDOA7dkLM6rFRrc","number":2565,"title":"Include the actual \"reason phrase\" provided by servers in HTTP error messages","user":{"login":"ypsah","id":13415452,"node_id":"MDQ6VXNlcjEzNDE1NDUy","avatar_url":"https://avatars.githubusercontent.com/u/13415452?v=4","gravatar_id":"","url":"https://api.github.com/users/ypsah","html_url":"https://github.com/ypsah","followers_url":"https://api.github.com/users/ypsah/followers","following_url":"https://api.github.com/users/ypsah/following{/other_user}","gists_url":"https://api.github.com/users/ypsah/gists{/gist_id}","starred_url":"https://api.github.com/users/ypsah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ypsah/subscriptions","organizations_url":"https://api.github.com/users/ypsah/orgs","repos_url":"https://api.github.com/users/ypsah/repos","events_url":"https://api.github.com/users/ypsah/events{/privacy}","received_events_url":"https://api.github.com/users/ypsah/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1283983666,"node_id":"MDU6TGFiZWwxMjgzOTgzNjY2","url":"https://api.github.com/repos/seanmonstar/reqwest/labels/E-pr-welcome","name":"E-pr-welcome","color":"c2e0c6","default":false,"description":"The feature is welcome to be added, instruction should be found in the issue."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2025-02-22T00:39:21Z","updated_at":"2025-06-14T18:50:48Z","closed_at":"2025-05-30T15:19:27Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hi, at the moment, `reqwest` displays the _recommended_ reason phrase for HTTP errors, resulting in error messages of the form:\n\n```\nHTTP status client error (403 Forbidden)\n```\n\nref: https://github.com/seanmonstar/reqwest/blob/0cf27a901b4d77c1704ec52cc66eb92bbc9fd857/src/error.rs#L214.\n\nThese recommended reason phrases (e.g. 403 -> `Forbidden`, 404 -> `Not Found`) are documented in RFC9110 and implemented by `http` [here](https://github.com/hyperium/http/blob/a463fb5995d67e12b154474ede14a093db64f006/src/status.rs#L226). However the RFC states that these are only _recommendations_:\n\n>  The reason phrases listed here are only recommendations -- they can be replaced by local equivalents or left out altogether without affecting the protocol.\n\nref: https://datatracker.ietf.org/doc/html/rfc9110#name-overview-of-status-codes\n\nAs it turns out, some servers customize reason phrases to include useful information. That's the case for example of [Sonatype Nexus Repository](https://www.sonatype.com/products/sonatype-nexus-repository), a proprietary package index which can quarantine packages that violate some kind of policy (e.g. \"package is affected by a CVE with a score > 9\"). When trying to download a quarantined package, the server will respond with a 403 HTTP error and set the HTTP reason phrase to something along the lines of: `component quarantined, more information at <url>`, where `<url>` redirects to a dashboard with instructions on how to go forward. Needless to say, this is extremely useful for end users that otherwise may think something is wrong with their local setup and struggle to find the actual root cause for the failed download.\n\nWould it be possible to include customized HTTP reason phrases in error messages in `reqwest` please? Either as a replacement or in addition to the recommended reason phrases.\n\n-----\n\nFor what it's worth, the `requests` python package does include the reason set by the server, whatever it is set to: https://github.com/psf/requests/blob/1764cc938efc3cc9720188dfa6c3852c45211aa0/src/requests/models.py#L1017.","closed_by":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/seanmonstar/reqwest/issues/2565/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/seanmonstar/reqwest/issues/2565/timeline","performed_via_github_app":null,"state_reason":"completed"}