diff --git a/src/changes/changes.xml b/src/changes/changes.xml
index f5d27d46..f5156898 100644
--- a/src/changes/changes.xml
+++ b/src/changes/changes.xml
@@ -47,6 +47,10 @@ The <action> type attribute can be add,update,fix,remove.
     <action dev="ggregory" issue="POOL-309" type="fix" due-to="jolestar, Roopam Patekar">
       Fix misspellings from "destory" to "destroy".
     </action>
+    <action dev="markt" issue="POOL-306" type="fix" due-to="Adrian Crum">
+      Ensure BaseGenericObjectPool.IdentityWrapper#equals() follows the expected
+      contract for equals(). 
+    </action>
   </release>
   <release version="2.4.2" date="2015-08-01" description=
  "This is a patch release, including bug fixes only.">
diff --git a/src/main/java/org/apache/commons/pool2/impl/BaseGenericObjectPool.java b/src/main/java/org/apache/commons/pool2/impl/BaseGenericObjectPool.java
index 6e197c92..8d5efbd5 100644
--- a/src/main/java/org/apache/commons/pool2/impl/BaseGenericObjectPool.java
+++ b/src/main/java/org/apache/commons/pool2/impl/BaseGenericObjectPool.java
@@ -1207,7 +1207,8 @@ public abstract class BaseGenericObjectPool<T> extends BaseObject {
         @Override
         @SuppressWarnings("rawtypes")
         public boolean equals(final Object other) {
-            return ((IdentityWrapper) other).instance == instance;
+            return  other instanceof IdentityWrapper &&
+                    ((IdentityWrapper) other).instance == instance;
         }
 
         /**
