diff --git a/src/java/org/apache/commons/pool2/impl/GenericKeyedObjectPool.java b/src/java/org/apache/commons/pool2/impl/GenericKeyedObjectPool.java
index f8703782..eb1a637e 100644
--- a/src/java/org/apache/commons/pool2/impl/GenericKeyedObjectPool.java
+++ b/src/java/org/apache/commons/pool2/impl/GenericKeyedObjectPool.java
@@ -1529,6 +1529,7 @@ public class GenericKeyedObjectPool<K,V> extends BaseKeyedObjectPool<K,V> implem
                 _totalInternalProcessing--;
             }
         }
+        allocate();
     }
 
     /**
diff --git a/src/java/org/apache/commons/pool2/impl/GenericObjectPool.java b/src/java/org/apache/commons/pool2/impl/GenericObjectPool.java
index a294ec2b..0494344a 100644
--- a/src/java/org/apache/commons/pool2/impl/GenericObjectPool.java
+++ b/src/java/org/apache/commons/pool2/impl/GenericObjectPool.java
@@ -1156,6 +1156,7 @@ public class GenericObjectPool<T> extends BaseObjectPool<T> implements GenericOb
                 _numInternalProcessing--;
             }
         }
+        allocate();
     }
 
     /**
diff --git a/src/test/org/apache/commons/pool2/impl/TestGenericObjectPool.java b/src/test/org/apache/commons/pool2/impl/TestGenericObjectPool.java
index a8b63ad6..20541563 100644
--- a/src/test/org/apache/commons/pool2/impl/TestGenericObjectPool.java
+++ b/src/test/org/apache/commons/pool2/impl/TestGenericObjectPool.java
@@ -1280,6 +1280,51 @@ public class TestGenericObjectPool extends TestBaseObjectPool {
 
     }
     
+    @Test
+    public void testConcurrentBorrowAndEvict() throws Exception {
+
+        pool.setMaxTotal(1);
+        pool.addObject();
+
+        for( int i=0; i<5000; i++) {
+            ConcurrentBorrowAndEvictThread one =
+                    new ConcurrentBorrowAndEvictThread(true);
+            ConcurrentBorrowAndEvictThread two =
+                    new ConcurrentBorrowAndEvictThread(false);
+
+            one.start();
+            two.start();
+            one.join();
+            two.join();
+
+            pool.returnObject(one.obj);
+            
+            if (i % 10 == 0) {
+                System.out.println(i/10);
+            } 
+        }
+    }
+
+    private class ConcurrentBorrowAndEvictThread extends Thread {
+        private boolean borrow;
+        public Object obj;
+        
+        public ConcurrentBorrowAndEvictThread(boolean borrow) {
+            this.borrow = borrow;
+        }
+
+        @Override
+        public void run() {
+            try {
+                if (borrow) {
+                    obj = pool.borrowObject();
+                } else {
+                    pool.evict();
+                }
+            } catch (Exception e) { /* Ignore */}
+        }
+    }
+
     protected GenericObjectPool<Object> pool = null;
 
     private void assertConfiguration(GenericObjectPoolConfig expected, GenericObjectPool<Object> actual) throws Exception {
