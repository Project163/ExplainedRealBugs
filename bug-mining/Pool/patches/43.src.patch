diff --git a/src/java/org/apache/commons/pool/impl/GenericKeyedObjectPool.java b/src/java/org/apache/commons/pool/impl/GenericKeyedObjectPool.java
index de67d63f..6daf1c0c 100644
--- a/src/java/org/apache/commons/pool/impl/GenericKeyedObjectPool.java
+++ b/src/java/org/apache/commons/pool/impl/GenericKeyedObjectPool.java
@@ -1211,8 +1211,10 @@ public class GenericKeyedObjectPool extends BaseKeyedObjectPool implements Keyed
                 }
                 synchronized (this) {
                     latch.getPool().decrementInternalProcessingCount();
-                    latch.reset();
-                    _allocationQueue.add(0, latch);
+                    if (!newlyCreated) {
+                        latch.reset();
+                        _allocationQueue.add(0, latch);
+                    }
                     allocate();
                 }
                 if (newlyCreated) {
diff --git a/src/java/org/apache/commons/pool/impl/GenericObjectPool.java b/src/java/org/apache/commons/pool/impl/GenericObjectPool.java
index 1d1b7c61..d36eb0f2 100644
--- a/src/java/org/apache/commons/pool/impl/GenericObjectPool.java
+++ b/src/java/org/apache/commons/pool/impl/GenericObjectPool.java
@@ -1181,8 +1181,10 @@ public class GenericObjectPool extends BaseObjectPool implements ObjectPool {
                 }
                 synchronized (this) {
                     _numInternalProcessing--;
-                    latch.reset();
-                    _allocationQueue.add(0, latch);
+                    if (!newlyCreated) {
+                        latch.reset();
+                        _allocationQueue.add(0, latch);
+                    }
                     allocate();
                 }
                 if(newlyCreated) {
diff --git a/src/test/org/apache/commons/pool/impl/TestGenericObjectPool.java b/src/test/org/apache/commons/pool/impl/TestGenericObjectPool.java
index 63b42bb4..e8226ff4 100644
--- a/src/test/org/apache/commons/pool/impl/TestGenericObjectPool.java
+++ b/src/test/org/apache/commons/pool/impl/TestGenericObjectPool.java
@@ -1458,4 +1458,51 @@ public class TestGenericObjectPool extends TestBaseObjectPool {
             }
         }
     }
+    
+    /**
+     * On first borrow, first object fails validation, second object is OK.
+     * Subsequent borrows are OK. This was POOL-152.
+     */
+    public void testBrokenFactoryShouldNotBlockPool() {
+        int maxActive = 1;
+        
+        SimpleFactory factory = new SimpleFactory();
+        factory.setMaxActive(maxActive);
+        pool.setFactory(factory);
+        pool.setMaxActive(maxActive);
+        pool.setWhenExhaustedAction(GenericObjectPool.WHEN_EXHAUSTED_BLOCK);
+        pool.setTestOnBorrow(true);
+        
+        // First borrow object will need to create a new object which will fail
+        // validation.
+        Object obj = null;
+        Exception ex = null;
+        factory.setValid(false);
+        try {
+            obj = pool.borrowObject();
+        } catch (Exception e) {
+            ex = e;
+        }
+        // Failure expected
+        assertNotNull(ex);
+        assertTrue(ex instanceof NoSuchElementException);
+        assertNull(obj);
+
+        // Configure factory to create valid objects so subsequent borrows work
+        factory.setValid(true);
+        
+        // Subsequent borrows should be OK
+        try {
+            obj = pool.borrowObject();
+        } catch (Exception e1) {
+            fail();
+        }
+        assertNotNull(obj);
+        try {
+            pool.returnObject(obj);
+        } catch (Exception e) {
+            fail();
+        }
+        
+    }
 }
