<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:16:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[POOL-192] GenericKeyedObjectPool: clear() clears the keyed pool but does not decrease the item counter</title>
                <link>https://issues.apache.org/jira/browse/POOL-192</link>
                <project id="12310488" key="POOL">Commons Pool</project>
                    <description>&lt;p&gt;If function &apos;clear(Object key)&apos; in GenericKeyedObjectPool is called onto a keyed pool, the ObjectQueue (= the keyed pool) is removed from the pool list. &lt;br/&gt;
Its items are deleteded in the function &apos;destroy()&apos; afterwards. But as the ObjectQueue is already removed, the itemcounter _totalInternalProcessing is &lt;br/&gt;
never decreased.&lt;/p&gt;

&lt;p&gt;As a result of this bug the pool exhausts even if the pool is empty.&lt;/p&gt;

&lt;p&gt;The solution is to decrease the counter _totalInternalProcessing in &apos;destroy()&apos; also if ObjectQueue in null.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12529247">POOL-192</key>
            <summary>GenericKeyedObjectPool: clear() clears the keyed pool but does not decrease the item counter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="helged">Helge Dannenberg</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Oct 2011 13:21:25 +0000</created>
                <updated>Wed, 21 Dec 2011 05:15:30 +0000</updated>
                            <resolved>Wed, 23 Nov 2011 02:10:01 +0000</resolved>
                                    <version>1.5.6</version>
                                    <fixVersion>1.5.7</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13138398" author="chpeter" created="Fri, 28 Oct 2011 14:32:27 +0000"  >&lt;p&gt;The value of &lt;cite&gt;_totalInternalProcessing&lt;/cite&gt; is increased by the number of elements in the queue in method &lt;cite&gt;clear(Object key)&lt;/cite&gt;, just before &lt;cite&gt;destroy&lt;/cite&gt; is called.&lt;/p&gt;

&lt;p&gt;As the ObjectQueue for the key was removed from the map in method &lt;cite&gt;clear&lt;/cite&gt;, the object for the key is always null in method &lt;cite&gt;destroy&lt;/cite&gt;.&lt;/p&gt;

&lt;p&gt;Therefore &lt;cite&gt;_totalInternalProcessing&lt;/cite&gt; is never decreased there which leads to an incorrect value of &lt;cite&gt;_totalInternalProcessing&lt;/cite&gt;.&lt;/p&gt;

&lt;p&gt;Suggested fix in &lt;cite&gt;destroy(Map m, KeyedPoolablabeObjectFactroy factory)&lt;/cite&gt;:&lt;/p&gt;

&lt;p&gt;&lt;cite&gt;ObjectQueue objectQueue = (ObjectQueue) _poolMap.get(key);&lt;/cite&gt;&lt;br/&gt;
&lt;cite&gt;if (objectQueue != null) {&lt;/cite&gt;&lt;br/&gt;
   ...&lt;br/&gt;
&lt;cite&gt;}&lt;/cite&gt;&lt;br/&gt;
&lt;b&gt;else {&lt;/b&gt;&lt;br/&gt;
    &lt;b&gt;_totalInternalProcessing--;&lt;/b&gt;&lt;br/&gt;
&lt;b&gt;}&lt;/b&gt;&lt;/p&gt;</comment>
                            <comment id="13149318" author="psteitz" created="Sun, 13 Nov 2011 17:31:48 +0000"  >&lt;p&gt;Thanks for reporting this.&lt;/p&gt;</comment>
                            <comment id="13155623" author="psteitz" created="Wed, 23 Nov 2011 02:10:01 +0000"  >&lt;p&gt;Fixed in r1205266.  Thanks for the patch!&lt;/p&gt;</comment>
                            <comment id="13173864" author="helged" created="Wed, 21 Dec 2011 05:15:30 +0000"  >&lt;p&gt;Vielen Dank f&#252;r Ihre E-Mail. Ich bin voraussichtlich am 09.01.2012 wieder im Hause. In dringenden F&#228;llen wenden Sie sich bitte an Dieter Frank (+49 69 696 8113) oder Christian Peter (+49 69 696 72449) Mit freundlichen Gr&#252;&#223;en, Helge Dannenberg ----- I&apos;m out of office until 09th of January 2012. In urgent cases please contact Mr Dieter Frank (+49 69 696 8113) or Mr Christian Peter (+49 69 696 72449) Best regards, Helge Dannenberg&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>215107</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 48 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zeen:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>204636</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>