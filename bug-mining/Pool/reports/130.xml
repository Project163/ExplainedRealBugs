<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:16:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[POOL-303] GenericObjectPool&apos;s borrowObject may stuck if create() always fail</title>
                <link>https://issues.apache.org/jira/browse/POOL-303</link>
                <project id="12310488" key="POOL">Commons Pool</project>
                    <description>&lt;p&gt;If GenericObjectPool&apos;s user use borrowObject() to get the object. The pool will try to pollFirst() first and if there is no idle object it will try to create it. In create()  if createCount &amp;gt; maxTotal, it will not create any object and wait on idleObjects.takeFirst() or idleObjects.pollFirst(borrowMaxWaitMillis, TimeUnit.MILLISECONDS) for other thread return an object. &lt;/p&gt;

&lt;p&gt;If there are many threads (the number is more than maxTotal) to borrowObject concurrently, there will only maxTotal threads go to create the object, the others will wait on the queue. However, if the factory has some problem that makeObject() always throw Exception, there will not be any object created so no thread will return the object that should send a signal to one waiting thread. The thread wait on idleObjects.takeFirst()  will stuck forever because it has no timeout.&lt;/p&gt;

&lt;p&gt;I think it can be fixed by adding a idleObjects.interuptTakeWaiters(); in create() before it throws the exception and let the waiting threads interrupted and retry to create.  &lt;/p&gt;

&lt;p&gt;It seems that all 2.x version affected?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12864197">POOL-303</key>
            <summary>GenericObjectPool&apos;s borrowObject may stuck if create() always fail</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="yangzhe1991">Phil Yang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Sep 2015 09:31:11 +0000</created>
                <updated>Fri, 20 Jul 2018 16:52:35 +0000</updated>
                            <resolved>Tue, 15 Mar 2016 20:18:40 +0000</resolved>
                                                    <fixVersion>2.4.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15171638" author="yangzhe1991" created="Mon, 29 Feb 2016 09:31:29 +0000"  >&lt;p&gt;Hi guys, any one can help me to review this patch? Thanks&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15175290" author="markt" created="Wed, 2 Mar 2016 08:56:40 +0000"  >&lt;p&gt;The description of the issue looks valid.&lt;/p&gt;

&lt;p&gt;The patch needs a test case that demonstrates the problem.&lt;/p&gt;</comment>
                            <comment id="15196153" author="markt" created="Tue, 15 Mar 2016 20:18:40 +0000"  >&lt;p&gt;Thanks for the report. I created a test case and, as a result, tweaked the suggested fix. I also fixed the similar issue for GKOP.&lt;/p&gt;</comment>
                            <comment id="15196646" author="yangzhe1991" created="Wed, 16 Mar 2016 02:35:09 +0000"  >&lt;p&gt;Sorry for late reply. Thanks for fix&lt;/p&gt;</comment>
                            <comment id="15197722" author="markt" created="Wed, 16 Mar 2016 17:20:39 +0000"  >&lt;p&gt;No problem. The first version caused some regressions so I had to re-work it.&lt;/p&gt;</comment>
                            <comment id="16224069" author="garydgregory" created="Sun, 29 Oct 2017 16:07:37 +0000"  >&lt;p&gt;Closing issues for release 2.4.3. Let&apos;s create a new issue if we need to adjust &lt;a href=&quot;https://issues.apache.org/jira/browse/POOL-320&quot; title=&quot;Use more efficient stack walking mechanisms for usage tracking&quot; class=&quot;issue-link&quot; data-issue-key=&quot;POOL-320&quot;&gt;&lt;del&gt;POOL-320&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13173493">POOL-347</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12755954" name="303.txt" size="1869" author="yangzhe1991" created="Tue, 15 Sep 2015 09:36:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2k6wn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>