<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:16:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[POOL-337] EvictionTimer does not remove cancelled tasks from the executor, leading to an IllegalStateException when the evictor attempts to evict</title>
                <link>https://issues.apache.org/jira/browse/POOL-337</link>
                <project id="12310488" key="POOL">Commons Pool</project>
                    <description>&lt;p&gt;EvictionTimer does not remove cancelled tasks from the executor, leading to an IllegalStateException when the evictor attempts to evict.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;EvictionTimer::schedule() adds eviction tasks to the executor, but the cancel does not remove it. This is asymmetric and leads to the following exception:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.IllegalStateException: Pool not open
	at org.apache.commons.pool2.impl.BaseGenericObjectPool.assertOpen(BaseGenericObjectPool.java:713)
	at org.apache.commons.pool2.impl.GenericObjectPool.evict(GenericObjectPool.java:721)
	at org.apache.commons.pool2.impl.BaseGenericObjectPool$Evictor.run(BaseGenericObjectPool.java:1077)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I think the cancel would need to remember the future which returned from &lt;tt&gt;executor::scheduleWithFixedDelay()&lt;/tt&gt; in &lt;tt&gt;schedule()&lt;/tt&gt; and then do something like this (see  &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12909734/12909734_EvictionTimer.java&quot; title=&quot;EvictionTimer.java attached to POOL-337&quot;&gt;EvictionTimer.java&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; compared to original  &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12909735/12909735_EvictionTimer.java.original-from-2.5.0.java&quot; title=&quot;EvictionTimer.java.original-from-2.5.0.java attached to POOL-337&quot;&gt;EvictionTimer.java.original-from-2.5.0.java&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; )&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (futures.containsKey(task)) {
    futures.remove(task).cancel(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
    executor.purge();
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13134729">POOL-337</key>
            <summary>EvictionTimer does not remove cancelled tasks from the executor, leading to an IllegalStateException when the evictor attempts to evict</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rverheij">Reinald Verheij</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Jan 2018 11:49:57 +0000</created>
                <updated>Sat, 26 May 2018 05:50:50 +0000</updated>
                            <resolved>Mon, 21 May 2018 12:14:54 +0000</resolved>
                                    <version>2.5.0</version>
                                                        <due></due>
                            <votes>1</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="16380111" author="cdeneux" created="Wed, 28 Feb 2018 10:42:11 +0000"  >&lt;p&gt;Hi Reinald Verheij,&lt;/p&gt;

&lt;p&gt;I have the same problem, consequences are memory leaks in my use-cases.&lt;/p&gt;

&lt;p&gt;Have you plan to create pull request about your patch ? Can I create one ?&lt;/p&gt;</comment>
                            <comment id="16385833" author="githubbot" created="Mon, 5 Mar 2018 09:12:23 +0000"  >&lt;p&gt;GitHub user cdeneux opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-pool/pull/4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-pool/pull/4&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/POOL-337&quot; title=&quot;EvictionTimer does not remove cancelled tasks from the executor, leading to an IllegalStateException when the evictor attempts to evict&quot; class=&quot;issue-link&quot; data-issue-key=&quot;POOL-337&quot;&gt;&lt;del&gt;POOL-337&lt;/del&gt;&lt;/a&gt;: EvictionTimer does not remove cancelled tasks&lt;/p&gt;

&lt;p&gt;    EvictionTimer does not remove cancelled tasks from the executor, and so a memory leak occurs.&lt;/p&gt;

&lt;p&gt;    Thanks to Reinald Verheij for the patch&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/petalslink/commons-pool&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/petalslink/commons-pool&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/POOL-337&quot; title=&quot;EvictionTimer does not remove cancelled tasks from the executor, leading to an IllegalStateException when the evictor attempts to evict&quot; class=&quot;issue-link&quot; data-issue-key=&quot;POOL-337&quot;&gt;&lt;del&gt;POOL-337&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-pool/pull/4.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-pool/pull/4.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #4&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit ec8b7769585bcb86a42a53a2d939c271194ebe9d&lt;br/&gt;
Author: cdeneux &amp;lt;christophe.deneux@...&amp;gt;&lt;br/&gt;
Date:   2018-02-28T17:25:06Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/POOL-337&quot; title=&quot;EvictionTimer does not remove cancelled tasks from the executor, leading to an IllegalStateException when the evictor attempts to evict&quot; class=&quot;issue-link&quot; data-issue-key=&quot;POOL-337&quot;&gt;&lt;del&gt;POOL-337&lt;/del&gt;&lt;/a&gt;: EvictionTimer does not remove cancelled tasks from the executor&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16385847" author="githubbot" created="Mon, 5 Mar 2018 09:26:10 +0000"  >&lt;p&gt;Github user coveralls commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-pool/pull/4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-pool/pull/4&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;    [!&lt;span class=&quot;error&quot;&gt;&amp;#91;Coverage Status&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://coveralls.io/builds/15805552/badge)](https://coveralls.io/builds/15805552&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://coveralls.io/builds/15805552/badge)](https://coveralls.io/builds/15805552&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;    Coverage increased (+0.06%) to 84.784% when pulling *&lt;b&gt;ec8b7769585bcb86a42a53a2d939c271194ebe9d on petalslink:&lt;a href=&quot;https://issues.apache.org/jira/browse/POOL-337&quot; title=&quot;EvictionTimer does not remove cancelled tasks from the executor, leading to an IllegalStateException when the evictor attempts to evict&quot; class=&quot;issue-link&quot; data-issue-key=&quot;POOL-337&quot;&gt;&lt;del&gt;POOL-337&lt;/del&gt;&lt;/a&gt;&lt;/b&gt;* into *&lt;b&gt;30d5db67a2cd0bf3d9a2dd7ffaa7dd247760a9bd on apache:master&lt;/b&gt;*.&lt;/p&gt;
</comment>
                            <comment id="16385848" author="githubbot" created="Mon, 5 Mar 2018 09:26:10 +0000"  >&lt;p&gt;Github user coveralls commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-pool/pull/4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-pool/pull/4&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;    [!&lt;span class=&quot;error&quot;&gt;&amp;#91;Coverage Status&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://coveralls.io/builds/15805552/badge)](https://coveralls.io/builds/15805552&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://coveralls.io/builds/15805552/badge)](https://coveralls.io/builds/15805552&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;    Coverage increased (+0.06%) to 84.784% when pulling *&lt;b&gt;ec8b7769585bcb86a42a53a2d939c271194ebe9d on petalslink:&lt;a href=&quot;https://issues.apache.org/jira/browse/POOL-337&quot; title=&quot;EvictionTimer does not remove cancelled tasks from the executor, leading to an IllegalStateException when the evictor attempts to evict&quot; class=&quot;issue-link&quot; data-issue-key=&quot;POOL-337&quot;&gt;&lt;del&gt;POOL-337&lt;/del&gt;&lt;/a&gt;&lt;/b&gt;* into *&lt;b&gt;30d5db67a2cd0bf3d9a2dd7ffaa7dd247760a9bd on apache:master&lt;/b&gt;*.&lt;/p&gt;
</comment>
                            <comment id="16389020" author="githubbot" created="Wed, 7 Mar 2018 04:42:15 +0000"  >&lt;p&gt;Github user garydgregory commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-pool/pull/4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-pool/pull/4&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hello @cdeneux !&lt;/p&gt;

&lt;p&gt;    Thank you for your PR. &lt;/p&gt;

&lt;p&gt;    Would you mind updating this PR with a unit test? It would be best if the test failed without the changes to the main file.&lt;/p&gt;

&lt;p&gt;    Thank you,&lt;br/&gt;
    Gary&lt;/p&gt;</comment>
                            <comment id="16389362" author="githubbot" created="Wed, 7 Mar 2018 10:20:45 +0000"  >&lt;p&gt;Github user cdeneux commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-pool/pull/4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-pool/pull/4&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hi @garydgregory,&lt;/p&gt;

&lt;p&gt;    I have just updated the PR with a unit test validating the correct freeing of eviction objects.&lt;/p&gt;

&lt;p&gt;    Regards,&lt;br/&gt;
    Christophe&lt;/p&gt;</comment>
                            <comment id="16420229" author="githubbot" created="Fri, 30 Mar 2018 06:59:00 +0000"  >&lt;p&gt;Github user cdeneux commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-pool/pull/4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-pool/pull/4&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hi @garydgregory,&lt;/p&gt;

&lt;p&gt;    To be able to release our product &lt;span class=&quot;error&quot;&gt;&amp;#91;Petals ESB&amp;#93;&lt;/span&gt;(&lt;a href=&quot;http://petals.ow2.org/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://petals.ow2.org/&lt;/a&gt;), we wish embed this fix. We can use the official released artefact, or our own forked artefact.&lt;br/&gt;
    To choose between both ways, can you tell me when you plan to merge this PR and when you release ? Have you everything you needed to do it ?&lt;/p&gt;

&lt;p&gt;    Regards,&lt;br/&gt;
    Christophe&lt;/p&gt;</comment>
                            <comment id="16426485" author="githubbot" created="Thu, 5 Apr 2018 05:01:36 +0000"  >&lt;p&gt;Github user garydgregory commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-pool/pull/4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-pool/pull/4&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I should be able to take a look tomorrow or the next day.&lt;/p&gt;</comment>
                            <comment id="16429211" author="garydgregory" created="Sat, 7 Apr 2018 03:01:34 +0000"  >&lt;p&gt;Hi&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=psteitz&quot; class=&quot;user-hover&quot; rel=&quot;psteitz&quot;&gt;psteitz&lt;/a&gt;/&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=phil%40steitz.com&quot; class=&quot;user-hover&quot; rel=&quot;phil@steitz.com&quot;&gt;phil@steitz.com&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;Would you care to opine of this patch?&lt;/p&gt;

&lt;p&gt;Thank you,&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                            <comment id="16431543" author="psteitz" created="Tue, 10 Apr 2018 00:17:43 +0000"  >&lt;p&gt;I am not sure I understand exactly what is causing this.&#160; Could be the problem is actually in GOP or client code.&#160; It would be great to have a unit test that makes it happen.&#160;&lt;/p&gt;</comment>
                            <comment id="16433251" author="psteitz" created="Wed, 11 Apr 2018 01:00:36 +0000"  >&lt;p&gt;Sorry, I missed the unit test in the updated PR.&#160;&#160;In my testing I did not configure a listener to get the swallowed exceptions.&#160; I think the analysis is correct and the patch should fix the issue.&#160; It might be good to consider a little refactoring that would allow the GOP to hold a reference to the task that it needs to cancel (i.e. change the type of the Evictor) so you would not need to maintain the map in the EvictionTimer.&lt;/p&gt;</comment>
                            <comment id="16481637" author="cdeneux" created="Sat, 19 May 2018 14:08:07 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=psteitz&quot; class=&quot;user-hover&quot; rel=&quot;psteitz&quot;&gt;psteitz&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Thanks for the code review.&lt;/p&gt;

&lt;p&gt;Sorry for the passed time, I worked on different subjects. Now, I have some time to work on this problem.&lt;/p&gt;

&lt;p&gt;I&apos;m trying to apply your refactoring idea but it is not clear. What do you mean by &quot;GOP&quot; ? Is it the class &apos;&lt;tt&gt;BaseGenericObjectPool&lt;/tt&gt;&apos; ? If you want that the class &apos;&lt;tt&gt;BaseGenericObjectPool&lt;/tt&gt;&apos; holds a reference on the &apos;Future&apos; associated to the eviction task, it seems to me that it is mandatory to change the API of &apos;&lt;tt&gt;EvictionTimer.schedule(task, delay, period)&lt;/tt&gt;&apos; to return the associated &apos;&lt;tt&gt;Future&lt;/tt&gt;&apos; instead of &apos;&lt;tt&gt;void&lt;/tt&gt;&apos;. Is it possible to change this API ?&lt;/p&gt;</comment>
                            <comment id="16481790" author="psteitz" created="Sat, 19 May 2018 23:15:48 +0000"  >&lt;p&gt;Let me start with a disclaimer here.&#160; I have not committed to pool in a while and I have not worked out the details of this solution.&lt;/p&gt;

&lt;p&gt;That said, you are right, I meant `BaseGenericObjectPool` and basically what you describe, changing&#160; &#160; &#160; &#160; &#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
evictor = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Evictor();
EvictionTimer.schedule(evictor, delay, delay);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;in BGOP.startEvictor to&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
evictorFuture = EvictionTimer.schedule(evictor, delay, delay);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;so GOP instances hold&#160;references to the ScheduledFutures. You are right that that requires a change to the `EvictionTimer` &lt;br/&gt;
 API but the method(s) in question are package scope, so not part of the public API, so probably OK to change in a minor release.&#160;&#160;&lt;/p&gt;

&lt;p&gt;Repeating disclaimer, I have not actually tried this or fully thought through the consequences. It would be good to get &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markt&quot; class=&quot;user-hover&quot; rel=&quot;markt&quot;&gt;markt&lt;/a&gt; to comment on this, as IIRC he designed the current setup.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16482297" author="markt" created="Mon, 21 May 2018 08:35:00 +0000"  >&lt;p&gt;Just a quick note to say I&apos;ve seen the comment above and will look at this. I should be able to do this later today.&lt;/p&gt;</comment>
                            <comment id="16482363" author="markt" created="Mon, 21 May 2018 10:15:48 +0000"  >&lt;p&gt;The proposed TestCase is very helpful. Thanks.&lt;/p&gt;

&lt;p&gt;It looks like the changes I made for &lt;a href=&quot;https://issues.apache.org/jira/browse/POOL-315&quot; title=&quot;GenericObjectPool close() does not wait for the current eviction task&quot; class=&quot;issue-link&quot; data-issue-key=&quot;POOL-315&quot;&gt;&lt;del&gt;POOL-315&lt;/del&gt;&lt;/a&gt; that replaced Timer with ScheduledThreadPoolExecutor were half-baked. There are various places where the code expects Timer/TimerTask behaviour that is simply no longer the case.&lt;/p&gt;

&lt;p&gt;I&apos;m working on cleaning this up. It is currently looking as if the fix will need to be a little broader in order to completely clean up after &lt;a href=&quot;https://issues.apache.org/jira/browse/POOL-315&quot; title=&quot;GenericObjectPool close() does not wait for the current eviction task&quot; class=&quot;issue-link&quot; data-issue-key=&quot;POOL-315&quot;&gt;&lt;del&gt;POOL-315&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16482444" author="markt" created="Mon, 21 May 2018 12:14:54 +0000"  >&lt;p&gt;Should be  fixed in master now. Thanks again for the test case.&lt;/p&gt;</comment>
                            <comment id="16482483" author="githubbot" created="Mon, 21 May 2018 13:02:41 +0000"  >&lt;p&gt;Github user markt-asf commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-pool/pull/4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-pool/pull/4&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the PR. I&apos;ve fixed this in a slightly different way after reviewing the prior changes. The tst case I used largely as-is. Thanks.&lt;/p&gt;</comment>
                            <comment id="16482484" author="githubbot" created="Mon, 21 May 2018 13:02:41 +0000"  >&lt;p&gt;Github user markt-asf closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-pool/pull/4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-pool/pull/4&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16483589" author="cdeneux" created="Tue, 22 May 2018 07:26:09 +0000"  >&lt;p&gt;Thanks a lot &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markt&quot; class=&quot;user-hover&quot; rel=&quot;markt&quot;&gt;markt&lt;/a&gt;, I arrived to similar refactoring but changing API. I didn&apos;t think to introduce the setter &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I&apos;m not be able to find the associated Snapshot Maven artifact in Maven repository &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots.&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots.&lt;/a&gt; Is it nightly/daily built ?&lt;/p&gt;</comment>
                            <comment id="16484219" author="garydgregory" created="Tue, 22 May 2018 16:13:01 +0000"  >&lt;p&gt;Hm... there mustn&apos;t be a build set up for this component...&lt;/p&gt;</comment>
                            <comment id="16484230" author="garydgregory" created="Tue, 22 May 2018 16:20:30 +0000"  >&lt;p&gt;I just deployed another 2.5.1-SNAPSHOT build:&#160;&lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/org/apache/commons/commons-pool2/2.5.1-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/org/apache/commons/commons-pool2/2.5.1-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16486820" author="cdeneux" created="Wed, 23 May 2018 07:11:26 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt; for the SNAPSHOT deployment.&lt;/p&gt;

&lt;p&gt;All is ok for me, my integration test that reveal the memory leak is passed.&lt;/p&gt;

&lt;p&gt;Now, another question &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;: when do you plan to release a new version ? FYI, I plan to release a new version of my product in July and I will wish embed this new version of Apache Commons.&lt;/p&gt;

&lt;p&gt;Thanks a lot for your help.&lt;/p&gt;</comment>
                            <comment id="16489135" author="garydgregory" created="Thu, 24 May 2018 14:48:01 +0000"  >&lt;p&gt;There is one more issue I would like to resolve before releasing: &lt;a href=&quot;https://issues.apache.org/jira/browse/POOL-338&quot; title=&quot;GenericObjectPool constructor may throw an exception under OSGi&quot; class=&quot;issue-link&quot; data-issue-key=&quot;POOL-338&quot;&gt;&lt;del&gt;POOL-338&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I have a proposed patch but I am not sure the original reporter is around for testing it. Do you have an environment to test &lt;a href=&quot;https://issues.apache.org/jira/browse/POOL-338&quot; title=&quot;GenericObjectPool constructor may throw an exception under OSGi&quot; class=&quot;issue-link&quot; data-issue-key=&quot;POOL-338&quot;&gt;&lt;del&gt;POOL-338&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="16489169" author="garydgregory" created="Thu, 24 May 2018 15:01:21 +0000"  >&lt;p&gt;If you are happy regarding this issue, please close it and any associated PRs.&lt;/p&gt;</comment>
                            <comment id="16491521" author="cdeneux" created="Sat, 26 May 2018 05:38:28 +0000"  >&lt;p&gt;Hi Gary,&lt;br/&gt;
 Sorry, I have not an environment reproducing the problem &lt;a href=&quot;https://issues.apache.org/jira/browse/POOL-338&quot; title=&quot;GenericObjectPool constructor may throw an exception under OSGi&quot; class=&quot;issue-link&quot; data-issue-key=&quot;POOL-338&quot;&gt;&lt;del&gt;POOL-338&lt;/del&gt;&lt;/a&gt;. I have several classloaders in my env but pool classes are only loaded by one. So the problem can not occur.&lt;/p&gt;</comment>
                            <comment id="16491522" author="cdeneux" created="Sat, 26 May 2018 05:46:26 +0000"  >&lt;p&gt;I&apos;m not able to close this issue (&lt;a href=&quot;https://issues.apache.org/jira/browse/POOL-337&quot; title=&quot;EvictionTimer does not remove cancelled tasks from the executor, leading to an IllegalStateException when the evictor attempts to evict&quot; class=&quot;issue-link&quot; data-issue-key=&quot;POOL-337&quot;&gt;&lt;del&gt;POOL-337&lt;/del&gt;&lt;/a&gt;). Perhaps because I&apos;m not the reporter ?&lt;/p&gt;</comment>
                            <comment id="16491525" author="rverheij" created="Sat, 26 May 2018 05:50:50 +0000"  >&lt;p&gt;Closing this issue based on the information in the above comments about the correctness of the fix.&lt;/p&gt;

&lt;p&gt;Thanks a lot everyone who helped out on this issue.&lt;/p&gt;

&lt;p&gt;Kind Regards,&lt;br/&gt;
Reinald Verheij&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13161322">DBCP-493</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12909734" name="EvictionTimer.java" size="7155" author="rverheij" created="Thu, 8 Feb 2018 06:26:06 +0000"/>
                            <attachment id="12909735" name="EvictionTimer.java.original-from-2.5.0.java" size="4914" author="rverheij" created="Thu, 8 Feb 2018 06:26:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 25 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3pj9z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>