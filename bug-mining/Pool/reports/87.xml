<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:16:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[POOL-220] PooledObject#compareTo() is not guaranteed consistent with equals</title>
                <link>https://issues.apache.org/jira/browse/POOL-220</link>
                <project id="12310488" key="POOL">Commons Pool</project>
                    <description>&lt;p&gt;PooledObject#compareTo only returns 0 if the getLastRuntime values are equal AND the identityHashCodes are equal.&lt;/p&gt;

&lt;p&gt;This will work OK for the identity comparison, but is not guaranteed to work in all other cases.&lt;/p&gt;

&lt;p&gt;It&apos;s possible for two distinct objects to have the same identityHashCode. &lt;br/&gt;
If such objects happen to have the same lastRuntime, then compareTo will return 0, but equals (which defaults to Object#equals) will return false.&lt;/p&gt;

&lt;p&gt;It&apos;s not very likely, but it is possible.&lt;/p&gt;

&lt;p&gt;A simple fix would be to define equals() to return true only in the case that the lastRuntime values and identityHashCodes are equal.&lt;/p&gt;

&lt;p&gt;Also, the Javadoc for the compareTo method ought to make clear what the ordering is intended to achieve.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12554004">POOL-220</key>
            <summary>PooledObject#compareTo() is not guaranteed consistent with equals</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 May 2012 21:11:32 +0000</created>
                <updated>Wed, 31 Dec 2014 16:24:45 +0000</updated>
                            <resolved>Sun, 17 Jun 2012 21:13:27 +0000</resolved>
                                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13269058" author="markt" created="Sat, 5 May 2012 20:57:10 +0000"  >&lt;p&gt;I went for the option of clarifying in the Javadoc that the natural ordering was inconsistent with equals(). Just relying on lastReturnTime and identityHashCode for equals() may have caused bugs elsewhere in the code base - the behaviour would certainly be unexpected.&lt;/p&gt;</comment>
                            <comment id="13269067" author="sebb@apache.org" created="Sat, 5 May 2012 21:53:35 +0000"  >&lt;p&gt;Forgot to mention that the reason I noticed the behaviour was Findbugs reporting that equals was not being overridden.&lt;/p&gt;

&lt;p&gt;This will continue to be reported, unless suppressed.&lt;/p&gt;

&lt;p&gt;I think we should at least document that the class intentionally uses Object.equals() - i.e. it has not been overlooked. Or we could implement it as such.&lt;/p&gt;</comment>
                            <comment id="13393608" author="markt" created="Sun, 17 Jun 2012 21:13:27 +0000"  >&lt;p&gt;Adding the pointless methods was less hassle than setting up a FindBugs exclusion filter and adding it to the build.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>238223</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 22 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zd5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>204432</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>