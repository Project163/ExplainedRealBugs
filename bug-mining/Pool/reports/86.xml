<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:16:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[POOL-212] GenericObjectPool allows maxIdle &lt; minIdle</title>
                <link>https://issues.apache.org/jira/browse/POOL-212</link>
                <project id="12310488" key="POOL">Commons Pool</project>
                    <description>&lt;p&gt;GenericObjectPool allows any values for minIdle and maxIdle, and performs no validation on those values.&lt;br/&gt;
It allows maxIdle to be less than minIdle, and that creates weird behavior during eviction.&lt;br/&gt;
After each eviction the Evictor thread calls ensureMinIdle() method which adds objects the pool using addObjectToPool() to make sure there at least minIdle objects in the pool.addObjectToPool() on another hand makes sure that there no more then maxIdle objects in the pool, and immediately destroys the newly created object.&lt;/p&gt;

&lt;p&gt;In my application we had minIdle configured to 100, but maxIdle wasn&apos;t configured and  used the default value which is 8, and each eviction would create and destroy a bunch of objects. &lt;/p&gt;

&lt;p&gt;This issue can be fixed by adding checks in setMinIdle and setMaxIdle, or by adding maxIdle variable to the formula used in calculateDevicit() method.&lt;/p&gt;

&lt;p&gt;We use version 1.4, but I also tested it on latest 1.6 and observed the same behavior.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12543716">POOL-212</key>
            <summary>GenericObjectPool allows maxIdle &lt; minIdle</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="serega">Sergejs Melderis</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Feb 2012 17:02:32 +0000</created>
                <updated>Thu, 12 Apr 2012 20:05:55 +0000</updated>
                            <resolved>Thu, 12 Apr 2012 20:05:55 +0000</resolved>
                                    <version>1.4</version>
                                    <fixVersion>1.5.8</fixVersion>
                    <fixVersion>1.6.1</fixVersion>
                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13252756" author="markt" created="Thu, 12 Apr 2012 19:23:56 +0000"  >&lt;p&gt;This can&apos;t be fixed in the setters since in a number of scenarios (e.g. when used with DBCP in Tomcat) there is no way to control the order in which the setters are called.&lt;/p&gt;</comment>
                            <comment id="13252765" author="markt" created="Thu, 12 Apr 2012 19:40:10 +0000"  >&lt;p&gt;Fixed for 2.x by using maxIdle in place of minIdle if minIdle &amp;gt; maxIdle.&lt;/p&gt;

&lt;p&gt;I&apos;ll look into porting this to 1.6.x and 1.5.x next.&lt;/p&gt;</comment>
                            <comment id="13252785" author="serega" created="Thu, 12 Apr 2012 19:59:33 +0000"  >&lt;p&gt;Here is what I did in my application. &lt;br/&gt;
    @Override&lt;br/&gt;
    public void setMaxIdle(int maxIdle) {&lt;br/&gt;
        int minIdle = getMinIdle();&lt;br/&gt;
        if (maxIdle &amp;lt; minIdle) &lt;/p&gt;
{
            super.setMinIdle(maxIdle);
        }
&lt;p&gt;        super.setMaxIdle(maxIdle);&lt;br/&gt;
    }&lt;/p&gt;

&lt;p&gt;    @Override&lt;br/&gt;
    public void setMinIdle(int minIdle) {&lt;br/&gt;
        int maxIdle = super.getMaxIdle();&lt;br/&gt;
        if (maxIdle &amp;lt; minIdle) &lt;/p&gt;
{
            super.setMaxIdle(minIdle);
        }
&lt;p&gt;        super.setMinIdle(minIdle);&lt;br/&gt;
    }&lt;/p&gt;


&lt;p&gt;If client intentions are correct, meaning minIdle &amp;lt;= maxIdle the order doesn&apos;t matter.But if client calls setters &lt;br/&gt;
with minIdle &amp;gt; maxIdle then, yes,  it may end up in different configuration depending on the order of calls. &lt;/p&gt;</comment>
                            <comment id="13252789" author="markt" created="Thu, 12 Apr 2012 20:05:55 +0000"  >&lt;p&gt;Fixed in all current development lines.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>228955</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zdnb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>204513</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>