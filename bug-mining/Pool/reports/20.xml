<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:16:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[POOL-122] java.util.Timer in EvictionTimer does not recover from OutOfMemoryError in Evictor</title>
                <link>https://issues.apache.org/jira/browse/POOL-122</link>
                <project id="12310488" key="POOL">Commons Pool</project>
                    <description>&lt;p&gt;GenericKeyedObjectPool.Evictor.run() catches and ignores Exceptions, but not Errors, like OOME. Consequently, when, due to load-peeks an OOME is thrown in the evictor&apos;s timer-thread it dies miserably and no eviction will happen again in any of the pools loaded within the same class-loader (because the eviction timer is a static member). Also, the creation of evicting pools will fail with IllegalStateException.&lt;/p&gt;

&lt;p&gt;Possible fixes:&lt;br/&gt;
   1. catch Throwable in GenericKeyedObjectPool.Evictor.run()&lt;br/&gt;
   2. check and eventually re-instantiate the Eviction-Timer.&lt;/p&gt;</description>
                <environment>&lt;p&gt;any&lt;/p&gt;</environment>
        <key id="12387711">POOL-122</key>
            <summary>java.util.Timer in EvictionTimer does not recover from OutOfMemoryError in Evictor</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mschu">Marcus Schulte</reporter>
                        <labels>
                    </labels>
                <created>Sat, 2 Feb 2008 16:01:01 +0000</created>
                <updated>Fri, 19 Jun 2009 16:13:56 +0000</updated>
                            <resolved>Wed, 1 Apr 2009 16:46:51 +0000</resolved>
                                    <version>1.3</version>
                    <version>1.4</version>
                                    <fixVersion>1.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12565098" author="markt" created="Sat, 2 Feb 2008 18:49:24 +0000"  >&lt;p&gt;Once there has been an OOME the only safe course of action is to shut the JVM down, assuming you have enough control left to be able to do that. Swallowing the OOME will make it impossible to detect that the system needs to shut down, so I am against any such change.&lt;/p&gt;</comment>
                            <comment id="12565099" author="mschu" created="Sat, 2 Feb 2008 18:50:31 +0000"  >&lt;p&gt;Added a patch implementing solution 1 plus unit test.&lt;/p&gt;</comment>
                            <comment id="12565100" author="mschu" created="Sat, 2 Feb 2008 19:12:10 +0000"  >&lt;p&gt;I can see your argument, but still want to put forward that&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;If you encounter an OOME in one thread you will very probably also see it in others, among them, for example, the main worker threads of the container (or your main-thread).&lt;/li&gt;
	&lt;li&gt;All containers I know log the error, if it occurs in a thread controlled by them,  and continue to work as well as they can.&lt;/li&gt;
	&lt;li&gt;The current implementation silently swallows Exception which is not that much better when it comes to error diagnostics.&lt;/li&gt;
	&lt;li&gt;Instead, one could catch Throwable and log to stderr - which is basically what the vm does anyway &amp;#8211; minus terminating the evictor-thread.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12565114" author="psteitz" created="Sat, 2 Feb 2008 20:31:43 +0000"  >&lt;p&gt;I agree with Mark that swallowing Throwable here is not a good idea, so am also -1 on the patch.&lt;/p&gt;

&lt;p&gt;Assigning fix version 1.5 and leaving open because we should log the error.&lt;/p&gt;

&lt;p&gt;Also affects 1.4, since behavior there is the same.  One more comment I have on this is that while we need to and will continue to support the Evictor, heavily loaded applications should be careful depending on it as a pseudo-garbage collector.  OOME&apos;s could indicate resource leaks and these should be investigated and addressed directly (assuming that is contributing to the problem).&lt;/p&gt;</comment>
                            <comment id="12694565" author="markt" created="Wed, 1 Apr 2009 15:00:33 +0000"  >&lt;p&gt;This has been fixed by logging the throwable (to stderr) and trying to carry on. Note that exceptions are still silently swallowed.&lt;/p&gt;</comment>
                            <comment id="12694611" author="joehni" created="Wed, 1 Apr 2009 16:39:12 +0000"  >&lt;p&gt;I am -1 for the commited solution either. There&apos;s no real difference. You may never catch a ThreadDeath. All we should do is to handle OOME instead of the Throwable and try to recover from that. Anything else is really bad.&lt;/p&gt;</comment>
                            <comment id="12694613" author="markt" created="Wed, 1 Apr 2009 16:46:51 +0000"  >&lt;p&gt;Scope reduced as requested. I&apos;m getting close to pulling the whole patch and marking this as WONTFIX as it is, in my view, a generally pointless exercise.&lt;/p&gt;</comment>
                            <comment id="12694752" author="joehni" created="Wed, 1 Apr 2009 21:19:31 +0000"  >&lt;p&gt;Well, handling OOME might be really useful. It is not of help, if you have a memory leak, but sometimes a user simply tries to process a really big document, image or something similar and the system recovers immediately from memory shortage as soon as the silly process has been stopped. Thanks for changing the implementation agian, though.&lt;/p&gt;</comment>
                            <comment id="12721856" author="psteitz" created="Fri, 19 Jun 2009 16:13:56 +0000"  >&lt;p&gt;Fixed in 1.5 release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12374612" name="fixes_POOL-122.patch" size="4146" author="mschu" created="Sat, 2 Feb 2008 18:50:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>166707</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 23 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zenr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>204677</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>