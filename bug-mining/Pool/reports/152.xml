<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:17:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[POOL-340] borrowObject is stuck, if create fails</title>
                <link>https://issues.apache.org/jira/browse/POOL-340</link>
                <project id="12310488" key="POOL">Commons Pool</project>
                    <description>&lt;p&gt;After changes in 2.4.3 there is a high chance of a scenario, in which borrowObject waits infinitely, if create fails or no one calls a create.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   java.lang.Thread.State: WAITING (parking)
        at sun.misc.Unsafe.park(Native Method)
        - parking to wait for  &amp;lt;0x0000000083cfd978&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
        at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)
        at org.apache.commons.pool2.impl.LinkedBlockingDeque.takeFirst(LinkedBlockingDeque.java:583)
        at org.apache.commons.pool2.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:442)
        at org.apache.commons.pool2.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:363)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If pool is exhausted, when borrowObject tries to get idle object, it waits for new object to be created.&lt;br/&gt;
If all objects are returned to pool invalid and destroyed, and it is impossible to create a new one, borrowObject will not return.&lt;br/&gt;
Even if afterwards it is becomes possible to crate a new object but no one creates it, borrowObject will not return either.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13153296">POOL-340</key>
            <summary>borrowObject is stuck, if create fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="struberg">Mark Struberg</assignee>
                                    <reporter username="pavelk">Pavel Kolesov</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Apr 2018 09:03:10 +0000</created>
                <updated>Sat, 27 Oct 2018 19:44:56 +0000</updated>
                            <resolved>Sat, 27 Oct 2018 19:44:56 +0000</resolved>
                                    <version>2.4</version>
                    <version>2.4.1</version>
                    <version>2.4.2</version>
                    <version>2.4.3</version>
                    <version>2.5.0</version>
                                    <fixVersion>2.6.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16442200" author="pavelk" created="Wed, 18 Apr 2018 09:49:45 +0000"  >&lt;p&gt;Tried the same scenario on 2.4.2 - the same result. We used to have 1.5.5 before, which doesn&apos;t seem to suffer from this problem.&lt;br/&gt;
The objection &quot;if factory can&apos;t create, so why borrow should return something&quot; is also checked - if pool is not exhausted and factory throws exception, borrowObject does return (the exception is propagated).&lt;/p&gt;</comment>
                            <comment id="16442961" author="garydgregory" created="Wed, 18 Apr 2018 18:07:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pavelk&quot; class=&quot;user-hover&quot; rel=&quot;pavelk&quot;&gt;pavelk&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;Thank you for your report.&lt;/p&gt;

&lt;p&gt;Can you provide a unit test that demonstrates the problem? You can provide a PR on GitHub: &lt;a href=&quot;https://github.com/apache/commons-pool&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-pool&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                            <comment id="16443116" author="psteitz" created="Wed, 18 Apr 2018 20:05:41 +0000"  >&lt;p&gt;If I understand what is being reported here, my recommendation would be don&apos;t try to fix (i.e. WONT_FIX).&#160; IIUC, what is going on is&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;thread enters borrowObject&lt;/li&gt;
	&lt;li&gt;No objects are available in the pool and the factory is &quot;down&quot;&lt;/li&gt;
	&lt;li&gt;Create fails, so thread waits on the idle instance queue&lt;/li&gt;
	&lt;li&gt;Factory comes back up&lt;/li&gt;
	&lt;li&gt;Desired behavior is that the pool figures out that the factory works again and serves the waiting thread&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I would say it is not the responsibility of the pool to monitor the factory.&#160; As a workaround, client code can monitor the factory and when it comes back up, use addObject to push new instances onto the pool to serve waiting threads.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16458398" author="pavelk" created="Mon, 30 Apr 2018 08:32:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt;, thank you for your response and sorry for the delay. I&apos;ve come up with such test (not the shortest one, unfortunately):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.concurrent.CountDownLatch;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.concurrent.TimeUnit;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.concurrent.atomic.AtomicBoolean;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.pool2.BasePooledObjectFactory;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.pool2.PooledObject;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.junit.Assert;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.junit.Ignore;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.junit.Test;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;GenericObjectPoolTest {
    
    @Test(timeout = 10_000)
    @Ignore(&lt;span class=&quot;code-quote&quot;&gt;&quot;Doesn&apos;t pass, waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; https:&lt;span class=&quot;code-comment&quot;&gt;//issues.apache.org/jira/browse/POOL-340&quot;&lt;/span&gt;)
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testBorrowObjectStuck() {
        SingleObjectFactory factory = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SingleObjectFactory();
        GenericObjectPoolConfig config = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GenericObjectPoolConfig();
        config.setMaxIdle(1);
        config.setMaxTotal(1);
        config.setBlockWhenExhausted(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
        config.setMinIdle(0);
        config.setTestOnBorrow(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
        config.setTestOnReturn(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
        config.setTestWhileIdle(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
        config.setTimeBetweenEvictionRunsMillis(-1);
        config.setMinEvictableIdleTimeMillis(-1);
        config.setSoftMinEvictableIdleTimeMillis(-1);
        
        config.setMaxWaitMillis(-1);
        GenericObjectPool&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; pool = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GenericObjectPool&amp;lt;&amp;gt;(factory, config);
        
        AtomicBoolean failed = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AtomicBoolean();
        CountDownLatch barrier = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CountDownLatch(1);
        &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; thread1 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; WinnerRunnable(pool, barrier, failed));
        thread1.start();
        
        &lt;span class=&quot;code-comment&quot;&gt;// wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; object to be created
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt;(!factory.created.get()) {
            sleepIgnoreException(5);
        }
        
        &lt;span class=&quot;code-comment&quot;&gt;// now borrow
&lt;/span&gt;        barrier.countDown();
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            pool.borrowObject();
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
            e.printStackTrace();
        }
        
        Assert.assertFalse(failed.get());
        
    }
    
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;SingleObjectFactory &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; BasePooledObjectFactory&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; {
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; AtomicBoolean created = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AtomicBoolean();
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; AtomicBoolean validated = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AtomicBoolean();
        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; create() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!created.getAndSet(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)) {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;();
            }
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Exception(&lt;span class=&quot;code-quote&quot;&gt;&quot;Already created&quot;&lt;/span&gt;);
        }

        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; PooledObject&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; wrap(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; obj) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DefaultPooledObject&amp;lt;&amp;gt;(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;());
        }

        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; validateObject(PooledObject&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; p) {
            &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; valid once
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!validated.getAndSet(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)) {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
            }
            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;invalid&quot;&lt;/span&gt;);
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
        }
    }
    
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;WinnerRunnable &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Runnable&lt;/span&gt; {
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; GenericObjectPool&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; pool;
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; AtomicBoolean failed;
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; CountDownLatch barrier;
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; WinnerRunnable(GenericObjectPool&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; pool, CountDownLatch barrier, AtomicBoolean failed) {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.pool = pool;
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.failed = failed;
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.barrier = barrier;
        }
        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void run() {
            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
                &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; obj = pool.borrowObject();
                
                &lt;span class=&quot;code-comment&quot;&gt;// wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; another thread to start borrowObject
&lt;/span&gt;                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!barrier.await(5, TimeUnit.SECONDS)) {
                    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Timeout waiting&quot;&lt;/span&gt;);
                    failed.set(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
                } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                    &lt;span class=&quot;code-comment&quot;&gt;// just to make sure, borrowObject has started waiting on queue
&lt;/span&gt;                    sleepIgnoreException(1000);
                }
                
                pool.returnObject(obj);
            } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
                failed.set(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
                e.printStackTrace();
            }
        }
    }
    
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void sleepIgnoreException(&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; millis) {
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(millis);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt;(Throwable e) {
            &lt;span class=&quot;code-comment&quot;&gt;// ignore
&lt;/span&gt;        }
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16458401" author="pavelk" created="Mon, 30 Apr 2018 08:43:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=psteitz&quot; class=&quot;user-hover&quot; rel=&quot;psteitz&quot;&gt;psteitz&lt;/a&gt;, thank you for the workaround idea. Can&apos;t really argue with your view of the problem, just adding one more thing to notice - if factory is &quot;down&quot; borrowObject can either stuck or propagate the factory&apos;s exception.&lt;/p&gt;</comment>
                            <comment id="16459125" author="psteitz" created="Mon, 30 Apr 2018 21:48:05 +0000"  >&lt;p&gt;Another workaround-ish idea is to achieve the effect of propagation of the swallowed exception on returnObject by configuring a SwallowedExceptionListener.&#160; See BaseGenericObjectPool#setSwallowedExceptionListener.&lt;/p&gt;

&lt;p&gt;Two more notes on this:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;If threads are waiting on borrow requests and there are no idle instances available and a return fails validation, the current code does try to create a new instance to &quot;replace&quot; the one failing validation.&#160; If that create fails with an exception, the failure can be picked up with a&#160;SwallowedExceptionListener.&lt;/li&gt;
	&lt;li&gt;Another workaround if you are OK with the slight additional overhead would be to set timeBetweenEvictionRunsMillis to a positive number (so the maintenance thread runs) and set minIdle to 1.&#160; Then each&#160;timeBetweenEvictionRunsMillis ms, the maintenance thread will run and it will try to create an instance if there are none idle (regardless of whether or not there are take waiters).&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="16459500" author="pavelk" created="Tue, 1 May 2018 07:24:52 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=psteitz&quot; class=&quot;user-hover&quot; rel=&quot;psteitz&quot;&gt;psteitz&lt;/a&gt;, we decided not to configure pool with &lt;tt&gt;maxWaitMillis&lt;/tt&gt;. If it doesn&apos;t work well, we&apos;ll consider one of your workarounds.&lt;/p&gt;</comment>
                            <comment id="16556212" author="jjcooper" created="Wed, 25 Jul 2018 20:04:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt;, I believe I have found one additional case that should be addressed when resolving this issue:&#160; if the pool is &lt;b&gt;closed&lt;/b&gt; by another thread, then the threads currently waiting for borrowObject() to return will remain stuck forever.&#160; Unfortunately, none of the workarounds provided by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=psteitz&quot; class=&quot;user-hover&quot; rel=&quot;psteitz&quot;&gt;psteitz&lt;/a&gt; will resolve this issue.&#160;&lt;/p&gt;</comment>
                            <comment id="16558753" author="garydgregory" created="Thu, 26 Jul 2018 18:52:25 +0000"  >&lt;p&gt;Hi&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jjcooper&quot; class=&quot;user-hover&quot; rel=&quot;jjcooper&quot;&gt;jjcooper&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;I want to make this component as reliable as possible, so anything you can contribute is greatly appreciated.&lt;/p&gt;

&lt;p&gt;IOW,&#160;we need PRs  &lt;img src=&quot;https://issues.apache.org/jira/images/icons/attach/noimage.png&quot; imagetext=&quot;/jira/images/icons/emoticons/wink.png&quot; align=&quot;absmiddle&quot; border=&quot;0&quot; /&gt; &#160;&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                            <comment id="16665714" author="struberg" created="Fri, 26 Oct 2018 22:14:21 +0000"  >&lt;p&gt;I&apos;m not quite sure I follow the unit test.&lt;br/&gt;
In SingleObjectFactory#validatePbject() you only return true once. Every subsequent validation is false.&lt;br/&gt;
And of course when returning the object to the pool will then say nay. Even if it is perfectly fine!&lt;br/&gt;
If we created the PooledObject then it is valid imo. Bc the test doesn&apos;t allow to create 2 instances anyway.&lt;br/&gt;
Returning true in validateObject lets the test pass with the latest codebase.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13173493">POOL-347</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 3 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3sp3z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>