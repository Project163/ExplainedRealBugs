<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:16:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[POOL-113] Inconsistent synch in InvalidEvictorLender, GenericKeyedObjectPool, GenericObjectPool</title>
                <link>https://issues.apache.org/jira/browse/POOL-113</link>
                <project id="12310488" key="POOL">Commons Pool</project>
                    <description>&lt;p&gt;InvalidEvictorLender does not always synchronize referant field.&lt;/p&gt;

&lt;p&gt;Patch to follow - please check that the correct synch object is used.&lt;/p&gt;

&lt;p&gt;Similar problems apply to GenericKeyedObjectPool:&lt;/p&gt;

&lt;p&gt;Inconsistent synchronization of org.apache.commons.pool.impl.GenericKeyedObjectPool._testOnBorrow; locked 66% of time&lt;br/&gt;
GenericKeyedObjectPool.java	line 913&lt;br/&gt;
Inconsistent synchronization of org.apache.commons.pool.impl.GenericKeyedObjectPool._testOnReturn; locked 66% of time&lt;br/&gt;
GenericKeyedObjectPool.java	line 1096&lt;/p&gt;

&lt;p&gt;And to GenericObjectPool:&lt;/p&gt;

&lt;p&gt;Inconsistent synchronization of org.apache.commons.pool.impl.GenericObjectPool._testOnBorrow; locked 66% of time&lt;br/&gt;
GenericObjectPool.java	line 915&lt;br/&gt;
Inconsistent synchronization of org.apache.commons.pool.impl.GenericObjectPool._testOnReturn; locked 66% of time&lt;br/&gt;
GenericObjectPool.java	line 1017&lt;/p&gt;</description>
                <environment></environment>
        <key id="12384259">POOL-113</key>
            <summary>Inconsistent synch in InvalidEvictorLender, GenericKeyedObjectPool, GenericObjectPool</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Sun, 9 Dec 2007 01:19:11 +0000</created>
                <updated>Sun, 12 Sep 2010 17:24:53 +0000</updated>
                            <resolved>Tue, 13 Apr 2010 18:34:43 +0000</resolved>
                                                    <fixVersion>1.5.5</fixVersion>
                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12550100" author="sebb@apache.org" created="Mon, 10 Dec 2007 15:16:10 +0000"  >&lt;p&gt;The easiest solution for _testOnBorrow and _testOnReturn is probably to make these volatile, in which case the get/set routines no longer need to be synchronized.&lt;/p&gt;</comment>
                            <comment id="12550298" author="psteitz" created="Tue, 11 Dec 2007 04:24:10 +0000"  >&lt;p&gt;Where did the report above come from?  Can you please rerun whatever discovered this against trunk or the 1_4_RELEASE branch to see if the synchronization changes committed to address &lt;a href=&quot;https://issues.apache.org/jira/browse/POOL-93&quot; title=&quot;Reduce contention by making borrow &amp;amp; return more independent from each other&quot; class=&quot;issue-link&quot; data-issue-key=&quot;POOL-93&quot;&gt;&lt;del&gt;POOL-93&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/POOL-108&quot; title=&quot;GenericObjectPool does per-resource work (e.g. validate) in a synchronized context&quot; class=&quot;issue-link&quot; data-issue-key=&quot;POOL-108&quot;&gt;&lt;del&gt;POOL-108&lt;/del&gt;&lt;/a&gt; also fixed this for GenericObjectPool.  If yes, we can change the fix version on this to 2.0.  &lt;/p&gt;</comment>
                            <comment id="12550393" author="sebb@apache.org" created="Tue, 11 Dec 2007 10:52:47 +0000"  >&lt;p&gt;The report was generated by Findbugs. I&apos;ve just re-run it against current trunk, and it shows the same errors (amongst others).&lt;/p&gt;

&lt;p&gt;If the class is intended for use from multiple threads, then it is vital that all fields that can be updated in one thread and read in another are synchronised on the same object. The Findbugs report shows that some fields can be accessed without synchronisation. The Java memory model only guarantees that such accesses see the most recent value if the accesses to the field are all synch on the same object (or volatile is used). Synchronisation is necessary for visibility as well as mutual exclusion.&lt;/p&gt;

&lt;p&gt;In fact in this case, the fields are mainly primitive booleans, so synch is not needed for exclusion when updating. However it is needed for visibility between threads.&lt;/p&gt;</comment>
                            <comment id="12550828" author="psteitz" created="Wed, 12 Dec 2007 04:05:03 +0000"  >&lt;p&gt;Synchronization fixes  committed for GenericObjectPool, GenericKeyedObjectPool, StackKeyedObjectPool in  trunk r603451 and 1.4 release branch  r603449.   &lt;/p&gt;</comment>
                            <comment id="12553542" author="psteitz" created="Thu, 20 Dec 2007 00:29:39 +0000"  >&lt;p&gt;The relevant classes in the 1.4 release branch have been patched address this issue.  Leaving open for 2.0&lt;/p&gt;</comment>
                            <comment id="12856541" author="sebb@apache.org" created="Tue, 13 Apr 2010 18:34:43 +0000"  >&lt;p&gt;Also fixed in 2.0 branch - see r603451 (also shown in SVN history on this issue)&lt;/p&gt;</comment>
                            <comment id="12908497" author="psteitz" created="Sun, 12 Sep 2010 17:24:53 +0000"  >&lt;p&gt;Fix version (1.5.5) has been released.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12371301" name="InvalidEvictorLender.txt" size="862" author="sebb" created="Sun, 9 Dec 2007 01:19:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>166700</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 10 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zf3j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>204748</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>