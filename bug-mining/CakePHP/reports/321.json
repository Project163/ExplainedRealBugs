{"url":"https://api.github.com/repos/cakephp/cakephp/issues/18234","repository_url":"https://api.github.com/repos/cakephp/cakephp","labels_url":"https://api.github.com/repos/cakephp/cakephp/issues/18234/labels{/name}","comments_url":"https://api.github.com/repos/cakephp/cakephp/issues/18234/comments","events_url":"https://api.github.com/repos/cakephp/cakephp/issues/18234/events","html_url":"https://github.com/cakephp/cakephp/issues/18234","id":2924365539,"node_id":"I_kwDOAAoEbs6uTkbj","number":18234,"title":"debugging breaks loop","user":{"login":"Rakasch","id":8471027,"node_id":"MDQ6VXNlcjg0NzEwMjc=","avatar_url":"https://avatars.githubusercontent.com/u/8471027?v=4","gravatar_id":"","url":"https://api.github.com/users/Rakasch","html_url":"https://github.com/Rakasch","followers_url":"https://api.github.com/users/Rakasch/followers","following_url":"https://api.github.com/users/Rakasch/following{/other_user}","gists_url":"https://api.github.com/users/Rakasch/gists{/gist_id}","starred_url":"https://api.github.com/users/Rakasch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rakasch/subscriptions","organizations_url":"https://api.github.com/users/Rakasch/orgs","repos_url":"https://api.github.com/users/Rakasch/repos","events_url":"https://api.github.com/users/Rakasch/events{/privacy}","received_events_url":"https://api.github.com/users/Rakasch/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":60504544,"node_id":"MDU6TGFiZWw2MDUwNDU0NA==","url":"https://api.github.com/repos/cakephp/cakephp/labels/defect","name":"defect","color":"e50f2c","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/cakephp/cakephp/milestones/330","html_url":"https://github.com/cakephp/cakephp/milestone/330","labels_url":"https://api.github.com/repos/cakephp/cakephp/milestones/330/labels","id":12369028,"node_id":"MI_kwDOAAoEbs4AvLyE","number":330,"title":"5.1.7","description":"Bugfixes for 5.1","creator":{"login":"markstory","id":24086,"node_id":"MDQ6VXNlcjI0MDg2","avatar_url":"https://avatars.githubusercontent.com/u/24086?v=4","gravatar_id":"","url":"https://api.github.com/users/markstory","html_url":"https://github.com/markstory","followers_url":"https://api.github.com/users/markstory/followers","following_url":"https://api.github.com/users/markstory/following{/other_user}","gists_url":"https://api.github.com/users/markstory/gists{/gist_id}","starred_url":"https://api.github.com/users/markstory/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markstory/subscriptions","organizations_url":"https://api.github.com/users/markstory/orgs","repos_url":"https://api.github.com/users/markstory/repos","events_url":"https://api.github.com/users/markstory/events{/privacy}","received_events_url":"https://api.github.com/users/markstory/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":24,"state":"closed","created_at":"2025-02-23T20:17:43Z","updated_at":"2025-03-29T17:30:50Z","due_on":"2025-03-28T07:00:00Z","closed_at":"2025-03-29T17:30:50Z"},"comments":11,"created_at":"2025-03-17T09:34:13Z","updated_at":"2025-03-17T14:52:01Z","closed_at":"2025-03-17T14:52:00Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Description\n\nAfter Upgrading from Cakephp v5.0.10 to v5.1 I have an issue with debugging query results in loops.\n(I testet with v5.1.6 and v5.1.0, both have this issue)\n\nExample Code\n```\n$query = $this->find()->all();    // or $this->find();\n$i=0;\nforeach($query as $row) {\n $i++;\n// set a breakpoint within the loop\n}\necho $i;\n```\n\nThe issue happens on Query and ResultSet Objects.\nIf you enable x-debug and set a breakpoint within the loop, the loop breaks after the first item of the loop with i=1.\nIt you disable the debugger, the loop works fine.\n\nResultSet in Cakephp 5.0.10\n![Image](https://github.com/user-attachments/assets/618da2b3-fc90-49b5-9a09-4544b6671d66)\n\nResultSet in Cakephp 5.1.x\n![Image](https://github.com/user-attachments/assets/7be223c2-c743-4520-b5dd-0d7da22489a6)\n\nI suspect it is related to the __debugInfo method within the ResultSet.\nWhen xdebug parses the ResultSet it probably gets overwritten with this items array.\n\n\nThat's a major problem.\nDebugging should never alter the behavior of the code because its purpose is to identify and fix existing issues without introducing new ones, ensuring the program runs as intended in its original context. Modifying the code during debugging risks masking errors or creating unintended side effects, leading to misleading conclusions and potentially new bugs.\n\n### CakePHP Version\n\n5.1.6\n\n### PHP Version\n\n_No response_","closed_by":{"login":"Rakasch","id":8471027,"node_id":"MDQ6VXNlcjg0NzEwMjc=","avatar_url":"https://avatars.githubusercontent.com/u/8471027?v=4","gravatar_id":"","url":"https://api.github.com/users/Rakasch","html_url":"https://github.com/Rakasch","followers_url":"https://api.github.com/users/Rakasch/followers","following_url":"https://api.github.com/users/Rakasch/following{/other_user}","gists_url":"https://api.github.com/users/Rakasch/gists{/gist_id}","starred_url":"https://api.github.com/users/Rakasch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rakasch/subscriptions","organizations_url":"https://api.github.com/users/Rakasch/orgs","repos_url":"https://api.github.com/users/Rakasch/repos","events_url":"https://api.github.com/users/Rakasch/events{/privacy}","received_events_url":"https://api.github.com/users/Rakasch/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/cakephp/cakephp/issues/18234/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/cakephp/cakephp/issues/18234/timeline","performed_via_github_app":null,"state_reason":"completed"}