{"url":"https://api.github.com/repos/cakephp/cakephp/issues/18740","repository_url":"https://api.github.com/repos/cakephp/cakephp","labels_url":"https://api.github.com/repos/cakephp/cakephp/issues/18740/labels{/name}","comments_url":"https://api.github.com/repos/cakephp/cakephp/issues/18740/comments","events_url":"https://api.github.com/repos/cakephp/cakephp/issues/18740/events","html_url":"https://github.com/cakephp/cakephp/issues/18740","id":3135764317,"node_id":"I_kwDOAAoEbs665_dd","number":18740,"title":"New plural rules break localization in some languages","user":{"login":"jiru","id":5107734,"node_id":"MDQ6VXNlcjUxMDc3MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/5107734?v=4","gravatar_id":"","url":"https://api.github.com/users/jiru","html_url":"https://github.com/jiru","followers_url":"https://api.github.com/users/jiru/followers","following_url":"https://api.github.com/users/jiru/following{/other_user}","gists_url":"https://api.github.com/users/jiru/gists{/gist_id}","starred_url":"https://api.github.com/users/jiru/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiru/subscriptions","organizations_url":"https://api.github.com/users/jiru/orgs","repos_url":"https://api.github.com/users/jiru/repos","events_url":"https://api.github.com/users/jiru/events{/privacy}","received_events_url":"https://api.github.com/users/jiru/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":60504396,"node_id":"MDU6TGFiZWw2MDUwNDM5Ng==","url":"https://api.github.com/repos/cakephp/cakephp/labels/i18n","name":"i18n","color":"FFFFFF","default":false,"description":null},{"id":60504544,"node_id":"MDU6TGFiZWw2MDUwNDU0NA==","url":"https://api.github.com/repos/cakephp/cakephp/labels/defect","name":"defect","color":"e50f2c","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/cakephp/cakephp/milestones/338","html_url":"https://github.com/cakephp/cakephp/milestone/338","labels_url":"https://api.github.com/repos/cakephp/cakephp/milestones/338/labels","id":12795061,"node_id":"MI_kwDOAAoEbs4Awzy1","number":338,"title":"4.6.2","description":"Bugfixes for 4.6.","creator":{"login":"markstory","id":24086,"node_id":"MDQ6VXNlcjI0MDg2","avatar_url":"https://avatars.githubusercontent.com/u/24086?v=4","gravatar_id":"","url":"https://api.github.com/users/markstory","html_url":"https://github.com/markstory","followers_url":"https://api.github.com/users/markstory/followers","following_url":"https://api.github.com/users/markstory/following{/other_user}","gists_url":"https://api.github.com/users/markstory/gists{/gist_id}","starred_url":"https://api.github.com/users/markstory/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markstory/subscriptions","organizations_url":"https://api.github.com/users/markstory/orgs","repos_url":"https://api.github.com/users/markstory/repos","events_url":"https://api.github.com/users/markstory/events{/privacy}","received_events_url":"https://api.github.com/users/markstory/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":7,"state":"closed","created_at":"2025-04-26T22:46:31Z","updated_at":"2025-07-27T03:46:31Z","due_on":"2025-07-28T07:00:00Z","closed_at":"2025-07-27T03:46:31Z"},"comments":5,"created_at":"2025-06-11T07:19:27Z","updated_at":"2025-06-15T04:56:12Z","closed_at":"2025-06-15T04:56:11Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Description\n\nCakePHP assumes French localization PO files use the plural rule `nplurals=2; plural=(n > 1)`. However, recently some French PO files started to use a more complex 3-plural rule.\n\nThe reason is that [Unicode CLDR](https://www.unicode.org/cldr/charts/47/supplemental/language_plural_rules.html), the main reference for plural rules, [changed the French plural rule in v38](https://cldr.unicode.org/downloads/cldr-38#h.7ahoxbsngtxp_l) (in Oct. 2020) from \"one, many\" to \"one, others, many\", adding a special case for millions: `nplurals=3; plural=(n == 0 || n == 1) ? 0 : n != 0 && n % 1000000 == 0 ? 1 : 2`. CakePHP uses the rule \"others\" (the million case) in place of \"many\" (typical plural case), which may produce incorrectly pluralized localized strings.\n\nI created a repository to reproduce the problem with a failing unit test: https://github.com/jiru/bugpluralforms\n\nThis problem came to my attention when I realized French PO files produced by https://www.transifex.com started to use the 3-plural rule. Other platforms, such as https://hosted.weblate.org, although also based on latest CLDR data, made some [manual modifications](https://github.com/WeblateOrg/language-data/blob/816b55412519b19f1b9106373e64cf9d00e2b573/README.rst#languagescsv) to keep a 2-plural rule for French.\n\nIn short, you can no longer guess the plural rule of a PO file based on the target language only.\n\nWhile the issue focuses on French, the following Latin languages all received the same plural rule update in the past years:\n- Italian, Spanish and Portuguese [updated in CLDR v40](https://cldr.unicode.org/downloads/cldr-40#h.li4o7qdpw1is_l)\n- Catalan [updated in CLDR v42](https://cldr.unicode.org/downloads/cldr-42#h.ck7cpcrqqrq0_l)\n- Sicilian [updated in CLDR v46](https://www.unicode.org/cldr/charts/46/supplemental/language_plural_rules.html#scn)\n\n### CakePHP Version\n\n3.x, 4.x, 5.x\n\n### PHP Version\n\n_No response_","closed_by":{"login":"ADmad","id":142658,"node_id":"MDQ6VXNlcjE0MjY1OA==","avatar_url":"https://avatars.githubusercontent.com/u/142658?v=4","gravatar_id":"","url":"https://api.github.com/users/ADmad","html_url":"https://github.com/ADmad","followers_url":"https://api.github.com/users/ADmad/followers","following_url":"https://api.github.com/users/ADmad/following{/other_user}","gists_url":"https://api.github.com/users/ADmad/gists{/gist_id}","starred_url":"https://api.github.com/users/ADmad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ADmad/subscriptions","organizations_url":"https://api.github.com/users/ADmad/orgs","repos_url":"https://api.github.com/users/ADmad/repos","events_url":"https://api.github.com/users/ADmad/events{/privacy}","received_events_url":"https://api.github.com/users/ADmad/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/cakephp/cakephp/issues/18740/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/cakephp/cakephp/issues/18740/timeline","performed_via_github_app":null,"state_reason":"completed"}