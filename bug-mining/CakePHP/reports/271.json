{"url":"https://api.github.com/repos/cakephp/cakephp/issues/17268","repository_url":"https://api.github.com/repos/cakephp/cakephp","labels_url":"https://api.github.com/repos/cakephp/cakephp/issues/17268/labels{/name}","comments_url":"https://api.github.com/repos/cakephp/cakephp/issues/17268/comments","events_url":"https://api.github.com/repos/cakephp/cakephp/issues/17268/events","html_url":"https://github.com/cakephp/cakephp/issues/17268","id":1891019856,"node_id":"I_kwDOAAoEbs5wtqxQ","number":17268,"title":"The `Example` alias has already been loaded. The `className` was not defined in the previous configuration data.","user":{"login":"kolorafa","id":921517,"node_id":"MDQ6VXNlcjkyMTUxNw==","avatar_url":"https://avatars.githubusercontent.com/u/921517?v=4","gravatar_id":"","url":"https://api.github.com/users/kolorafa","html_url":"https://github.com/kolorafa","followers_url":"https://api.github.com/users/kolorafa/followers","following_url":"https://api.github.com/users/kolorafa/following{/other_user}","gists_url":"https://api.github.com/users/kolorafa/gists{/gist_id}","starred_url":"https://api.github.com/users/kolorafa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kolorafa/subscriptions","organizations_url":"https://api.github.com/users/kolorafa/orgs","repos_url":"https://api.github.com/users/kolorafa/repos","events_url":"https://api.github.com/users/kolorafa/events{/privacy}","received_events_url":"https://api.github.com/users/kolorafa/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":60504544,"node_id":"MDU6TGFiZWw2MDUwNDU0NA==","url":"https://api.github.com/repos/cakephp/cakephp/labels/defect","name":"defect","color":"e50f2c","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"markstory","id":24086,"node_id":"MDQ6VXNlcjI0MDg2","avatar_url":"https://avatars.githubusercontent.com/u/24086?v=4","gravatar_id":"","url":"https://api.github.com/users/markstory","html_url":"https://github.com/markstory","followers_url":"https://api.github.com/users/markstory/followers","following_url":"https://api.github.com/users/markstory/following{/other_user}","gists_url":"https://api.github.com/users/markstory/gists{/gist_id}","starred_url":"https://api.github.com/users/markstory/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markstory/subscriptions","organizations_url":"https://api.github.com/users/markstory/orgs","repos_url":"https://api.github.com/users/markstory/repos","events_url":"https://api.github.com/users/markstory/events{/privacy}","received_events_url":"https://api.github.com/users/markstory/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"markstory","id":24086,"node_id":"MDQ6VXNlcjI0MDg2","avatar_url":"https://avatars.githubusercontent.com/u/24086?v=4","gravatar_id":"","url":"https://api.github.com/users/markstory","html_url":"https://github.com/markstory","followers_url":"https://api.github.com/users/markstory/followers","following_url":"https://api.github.com/users/markstory/following{/other_user}","gists_url":"https://api.github.com/users/markstory/gists{/gist_id}","starred_url":"https://api.github.com/users/markstory/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markstory/subscriptions","organizations_url":"https://api.github.com/users/markstory/orgs","repos_url":"https://api.github.com/users/markstory/repos","events_url":"https://api.github.com/users/markstory/events{/privacy}","received_events_url":"https://api.github.com/users/markstory/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/cakephp/cakephp/milestones/299","html_url":"https://github.com/cakephp/cakephp/milestone/299","labels_url":"https://api.github.com/repos/cakephp/cakephp/milestones/299/labels","id":9903269,"node_id":"MI_kwDOAAoEbs4Alxyl","number":299,"title":"5.0.1","description":"Bugfixes for 5.0","creator":{"login":"markstory","id":24086,"node_id":"MDQ6VXNlcjI0MDg2","avatar_url":"https://avatars.githubusercontent.com/u/24086?v=4","gravatar_id":"","url":"https://api.github.com/users/markstory","html_url":"https://github.com/markstory","followers_url":"https://api.github.com/users/markstory/followers","following_url":"https://api.github.com/users/markstory/following{/other_user}","gists_url":"https://api.github.com/users/markstory/gists{/gist_id}","starred_url":"https://api.github.com/users/markstory/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markstory/subscriptions","organizations_url":"https://api.github.com/users/markstory/orgs","repos_url":"https://api.github.com/users/markstory/repos","events_url":"https://api.github.com/users/markstory/events{/privacy}","received_events_url":"https://api.github.com/users/markstory/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":39,"state":"closed","created_at":"2023-09-10T14:44:19Z","updated_at":"2023-09-30T00:21:46Z","due_on":"2023-09-28T07:00:00Z","closed_at":"2023-09-30T00:21:46Z"},"comments":4,"created_at":"2023-09-11T18:16:02Z","updated_at":"2023-09-16T02:45:22Z","closed_at":"2023-09-16T02:45:22Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Description\r\n\r\n```\r\nThe `Second` alias has already been loaded. The `className` was not defined in the previous configuration data.\r\nCORE/src/Core/ObjectRegistry.php at line 160\r\n```\r\n\r\nIssue relate to loading custom Plugin View Helpers.\r\n\r\nHow to reproduce:\r\n1. Create 2 custom helpers inside a plugin, first plugin needs to load and use the second one using the `Plugin.Helper` style Helper dependency.\r\n2. Use use both plugins from Plugin Template without setting those plugins in Plugin View (so they will be loaded by the cake autoloader.\r\n\r\nThe issue is due miss match load logic between [HelperRegistry](https://github.com/cakephp/cakephp/blob/5.x/src/View/HelperRegistry.php#L78) and [Helper](https://github.com/cakephp/cakephp/blob/5.x/src/View/Helper.php#L108) or rather [ObjectRegistry](https://github.com/cakephp/cakephp/blob/5.x/src/Core/ObjectRegistry.php#L301)\r\n\r\n\r\nLoading the Helper directly from View goes over normalization and in turn gets a generated config of ['enabled' => false, 'className' => 'PluginName']\r\nWhile loading Helper thru Helper dependency goes thru HelperRegistry that is not setting the 'className' for plugin helpers.\r\n\r\n`Helper dependency`:\r\n\r\n```\r\nclass FirstHelper extends Helper\r\n{\r\n    /**\r\n     * Other helpers used by FormHelper\r\n     *\r\n     * @var array\r\n     */\r\n    protected array $helpers = ['PluginName.Second'];\r\n```\r\n\r\n\r\nI think the fix would be to set className while doing a fallback into plugin in [HelperRegistry](https://github.com/cakephp/cakephp/blob/5.x/src/View/HelperRegistry.php#L78) by changing it from \r\n```\r\n$this->load($plugin . '.' . $helper);\r\n```\r\nto\r\n```\r\n$this->load($helper, ['className' => $plugin . '.' . $helper]);\r\n```\r\n\r\n\r\n(Yes, I could initialize that helper in Plugin View and provide the className, but I would really like to still have the autoload function working, unless it's deprecated and could get removed in the near future)\r\n\r\n\r\nThis issue could also affect CakePHP 4.x (untested)\r\n\r\n### CakePHP Version\r\n\r\n5.0.0\r\n\r\n### PHP Version\r\n\r\n8.2","closed_by":{"login":"markstory","id":24086,"node_id":"MDQ6VXNlcjI0MDg2","avatar_url":"https://avatars.githubusercontent.com/u/24086?v=4","gravatar_id":"","url":"https://api.github.com/users/markstory","html_url":"https://github.com/markstory","followers_url":"https://api.github.com/users/markstory/followers","following_url":"https://api.github.com/users/markstory/following{/other_user}","gists_url":"https://api.github.com/users/markstory/gists{/gist_id}","starred_url":"https://api.github.com/users/markstory/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markstory/subscriptions","organizations_url":"https://api.github.com/users/markstory/orgs","repos_url":"https://api.github.com/users/markstory/repos","events_url":"https://api.github.com/users/markstory/events{/privacy}","received_events_url":"https://api.github.com/users/markstory/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/cakephp/cakephp/issues/17268/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/cakephp/cakephp/issues/17268/timeline","performed_via_github_app":null,"state_reason":"completed"}