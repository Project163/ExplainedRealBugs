{"url":"https://api.github.com/repos/cakephp/cakephp/issues/17151","repository_url":"https://api.github.com/repos/cakephp/cakephp","labels_url":"https://api.github.com/repos/cakephp/cakephp/issues/17151/labels{/name}","comments_url":"https://api.github.com/repos/cakephp/cakephp/issues/17151/comments","events_url":"https://api.github.com/repos/cakephp/cakephp/issues/17151/events","html_url":"https://github.com/cakephp/cakephp/issues/17151","id":1749350522,"node_id":"I_kwDOAAoEbs5oRPh6","number":17151,"title":"Mailer: SMTP transport without authentication not possible since 4.4.14 if the mail server offers at least one auth method","user":{"login":"thonhaus","id":5081416,"node_id":"MDQ6VXNlcjUwODE0MTY=","avatar_url":"https://avatars.githubusercontent.com/u/5081416?v=4","gravatar_id":"","url":"https://api.github.com/users/thonhaus","html_url":"https://github.com/thonhaus","followers_url":"https://api.github.com/users/thonhaus/followers","following_url":"https://api.github.com/users/thonhaus/following{/other_user}","gists_url":"https://api.github.com/users/thonhaus/gists{/gist_id}","starred_url":"https://api.github.com/users/thonhaus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thonhaus/subscriptions","organizations_url":"https://api.github.com/users/thonhaus/orgs","repos_url":"https://api.github.com/users/thonhaus/repos","events_url":"https://api.github.com/users/thonhaus/events{/privacy}","received_events_url":"https://api.github.com/users/thonhaus/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":60504544,"node_id":"MDU6TGFiZWw2MDUwNDU0NA==","url":"https://api.github.com/repos/cakephp/cakephp/labels/defect","name":"defect","color":"e50f2c","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/cakephp/cakephp/milestones/295","html_url":"https://github.com/cakephp/cakephp/milestone/295","labels_url":"https://api.github.com/repos/cakephp/cakephp/milestones/295/labels","id":9429165,"node_id":"MI_kwDOAAoEbs4Aj-Ct","number":295,"title":"4.4.15","description":"Bugfixes for 4.4","creator":{"login":"markstory","id":24086,"node_id":"MDQ6VXNlcjI0MDg2","avatar_url":"https://avatars.githubusercontent.com/u/24086?v=4","gravatar_id":"","url":"https://api.github.com/users/markstory","html_url":"https://github.com/markstory","followers_url":"https://api.github.com/users/markstory/followers","following_url":"https://api.github.com/users/markstory/following{/other_user}","gists_url":"https://api.github.com/users/markstory/gists{/gist_id}","starred_url":"https://api.github.com/users/markstory/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markstory/subscriptions","organizations_url":"https://api.github.com/users/markstory/orgs","repos_url":"https://api.github.com/users/markstory/repos","events_url":"https://api.github.com/users/markstory/events{/privacy}","received_events_url":"https://api.github.com/users/markstory/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":8,"state":"closed","created_at":"2023-05-23T02:59:04Z","updated_at":"2023-07-02T02:56:53Z","due_on":"2023-07-01T07:00:00Z","closed_at":"2023-07-02T02:56:53Z"},"comments":1,"created_at":"2023-06-09T07:58:35Z","updated_at":"2023-06-09T20:35:50Z","closed_at":"2023-06-09T20:35:50Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Description\n\nWe use a Microsoft SMTP service that supports NTLM authentication. However, it can also be used without any authentication (of course only within a highly secured network where a limited number of allowed servers can access the SMTP service).\r\n\r\nIn versions prior to 4.4.14, the SMTP transport class would only attempt authentication with the SMTP server if the \"username\" and \"password\" parameters were set. However, changes have been made to the \"_parseAuthType\" method, which extracts possible authentication methods from the EHLO server response if no authentication type is explicitly set. In our case, when the SmtpTransport class is used without specifying the \"authtype,\" \"username,\" and \"password\" parameters (indicating no authentication is desired), the \"_parseAuthType\" method extracts the offered NTLM authentication type from the EHLO server response and throws an exception stating that NTLM is an unsupported authentication type.\r\n\r\nCurrently, the \"_auth\" method simply returns if \"username\" and \"password\" are not set (indicating no authentication is desired). I suggest modifying the code to make the \"_parseAuthType\" method also return immediately if \"username\" and \"password\" are not set, as no authentication checks are necessary in that case. Another possible solution would be to introduce an additional authentication type called \"NOAUTH\", which could be a more elegant approach.\n\n### CakePHP Version\n\n4.4.14\n\n### PHP Version\n\n_No response_","closed_by":{"login":"markstory","id":24086,"node_id":"MDQ6VXNlcjI0MDg2","avatar_url":"https://avatars.githubusercontent.com/u/24086?v=4","gravatar_id":"","url":"https://api.github.com/users/markstory","html_url":"https://github.com/markstory","followers_url":"https://api.github.com/users/markstory/followers","following_url":"https://api.github.com/users/markstory/following{/other_user}","gists_url":"https://api.github.com/users/markstory/gists{/gist_id}","starred_url":"https://api.github.com/users/markstory/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markstory/subscriptions","organizations_url":"https://api.github.com/users/markstory/orgs","repos_url":"https://api.github.com/users/markstory/repos","events_url":"https://api.github.com/users/markstory/events{/privacy}","received_events_url":"https://api.github.com/users/markstory/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/cakephp/cakephp/issues/17151/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/cakephp/cakephp/issues/17151/timeline","performed_via_github_app":null,"state_reason":"completed"}