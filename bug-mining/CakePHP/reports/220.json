{"url":"https://api.github.com/repos/cakephp/cakephp/issues/16122","repository_url":"https://api.github.com/repos/cakephp/cakephp","labels_url":"https://api.github.com/repos/cakephp/cakephp/issues/16122/labels{/name}","comments_url":"https://api.github.com/repos/cakephp/cakephp/issues/16122/comments","events_url":"https://api.github.com/repos/cakephp/cakephp/issues/16122/events","html_url":"https://github.com/cakephp/cakephp/issues/16122","id":1057664244,"node_id":"I_kwDOAAoEbs4_Cqz0","number":16122,"title":"SchemaLoader fails to purge MySQL database containing Views","user":{"login":"rmarsh1ua","id":82287338,"node_id":"MDQ6VXNlcjgyMjg3MzM4","avatar_url":"https://avatars.githubusercontent.com/u/82287338?v=4","gravatar_id":"","url":"https://api.github.com/users/rmarsh1ua","html_url":"https://github.com/rmarsh1ua","followers_url":"https://api.github.com/users/rmarsh1ua/followers","following_url":"https://api.github.com/users/rmarsh1ua/following{/other_user}","gists_url":"https://api.github.com/users/rmarsh1ua/gists{/gist_id}","starred_url":"https://api.github.com/users/rmarsh1ua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rmarsh1ua/subscriptions","organizations_url":"https://api.github.com/users/rmarsh1ua/orgs","repos_url":"https://api.github.com/users/rmarsh1ua/repos","events_url":"https://api.github.com/users/rmarsh1ua/events{/privacy}","received_events_url":"https://api.github.com/users/rmarsh1ua/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":60504544,"node_id":"MDU6TGFiZWw2MDUwNDU0NA==","url":"https://api.github.com/repos/cakephp/cakephp/labels/defect","name":"defect","color":"e50f2c","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/cakephp/cakephp/milestones/270","html_url":"https://github.com/cakephp/cakephp/milestone/270","labels_url":"https://api.github.com/repos/cakephp/cakephp/milestones/270/labels","id":7498226,"node_id":"MI_kwDOAAoEbs4Acmny","number":270,"title":"4.3.4","description":"Bugfixes for 4.3","creator":{"login":"markstory","id":24086,"node_id":"MDQ6VXNlcjI0MDg2","avatar_url":"https://avatars.githubusercontent.com/u/24086?v=4","gravatar_id":"","url":"https://api.github.com/users/markstory","html_url":"https://github.com/markstory","followers_url":"https://api.github.com/users/markstory/followers","following_url":"https://api.github.com/users/markstory/following{/other_user}","gists_url":"https://api.github.com/users/markstory/gists{/gist_id}","starred_url":"https://api.github.com/users/markstory/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markstory/subscriptions","organizations_url":"https://api.github.com/users/markstory/orgs","repos_url":"https://api.github.com/users/markstory/repos","events_url":"https://api.github.com/users/markstory/events{/privacy}","received_events_url":"https://api.github.com/users/markstory/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":9,"state":"closed","created_at":"2021-12-17T16:07:54Z","updated_at":"2022-01-17T19:27:27Z","due_on":"2022-01-14T08:00:00Z","closed_at":"2022-01-17T19:27:27Z"},"comments":5,"created_at":"2021-11-18T18:23:46Z","updated_at":"2021-12-31T03:13:59Z","closed_at":"2021-12-31T03:13:58Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Description\n\n### Description\r\nWhile following [the docs](https://book.cakephp.org/4.next/en/development/testing.html#creating-test-database-schema) for setting up unit tests, it describes some example code to use the SchemaLoader class to define the app's database. Running this more than once, i.e. the database is created/schema is created, generates an error trying to drop a table that doesn't exist. The error refers to a view. \r\n\r\nIt seems like SchemaLoader is trying to drop all tables in the SHOW TABLES FROM clause regardless of whether or not it's an actual table or view. This essentially makes using SchemaLoader useless for setting up unit tests and it would be preferable if it would exclude dropping views from the database.\r\n\n\n### CakePHP Version\n\n4.3.0\n\n### PHP Version\n\n7.4.3","closed_by":{"login":"markstory","id":24086,"node_id":"MDQ6VXNlcjI0MDg2","avatar_url":"https://avatars.githubusercontent.com/u/24086?v=4","gravatar_id":"","url":"https://api.github.com/users/markstory","html_url":"https://github.com/markstory","followers_url":"https://api.github.com/users/markstory/followers","following_url":"https://api.github.com/users/markstory/following{/other_user}","gists_url":"https://api.github.com/users/markstory/gists{/gist_id}","starred_url":"https://api.github.com/users/markstory/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markstory/subscriptions","organizations_url":"https://api.github.com/users/markstory/orgs","repos_url":"https://api.github.com/users/markstory/repos","events_url":"https://api.github.com/users/markstory/events{/privacy}","received_events_url":"https://api.github.com/users/markstory/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/cakephp/cakephp/issues/16122/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/cakephp/cakephp/issues/16122/timeline","performed_via_github_app":null,"state_reason":"completed"}