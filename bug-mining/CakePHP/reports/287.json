{"url":"https://api.github.com/repos/cakephp/cakephp/issues/17382","repository_url":"https://api.github.com/repos/cakephp/cakephp","labels_url":"https://api.github.com/repos/cakephp/cakephp/issues/17382/labels{/name}","comments_url":"https://api.github.com/repos/cakephp/cakephp/issues/17382/comments","events_url":"https://api.github.com/repos/cakephp/cakephp/issues/17382/events","html_url":"https://github.com/cakephp/cakephp/issues/17382","id":1961445753,"node_id":"I_kwDOAAoEbs506Ul5","number":17382,"title":"ReconnectStrategy uses deprecated Connection::disconnect() method","user":{"login":"nook24","id":9019992,"node_id":"MDQ6VXNlcjkwMTk5OTI=","avatar_url":"https://avatars.githubusercontent.com/u/9019992?v=4","gravatar_id":"","url":"https://api.github.com/users/nook24","html_url":"https://github.com/nook24","followers_url":"https://api.github.com/users/nook24/followers","following_url":"https://api.github.com/users/nook24/following{/other_user}","gists_url":"https://api.github.com/users/nook24/gists{/gist_id}","starred_url":"https://api.github.com/users/nook24/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nook24/subscriptions","organizations_url":"https://api.github.com/users/nook24/orgs","repos_url":"https://api.github.com/users/nook24/repos","events_url":"https://api.github.com/users/nook24/events{/privacy}","received_events_url":"https://api.github.com/users/nook24/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":60504544,"node_id":"MDU6TGFiZWw2MDUwNDU0NA==","url":"https://api.github.com/repos/cakephp/cakephp/labels/defect","name":"defect","color":"e50f2c","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"markstory","id":24086,"node_id":"MDQ6VXNlcjI0MDg2","avatar_url":"https://avatars.githubusercontent.com/u/24086?v=4","gravatar_id":"","url":"https://api.github.com/users/markstory","html_url":"https://github.com/markstory","followers_url":"https://api.github.com/users/markstory/followers","following_url":"https://api.github.com/users/markstory/following{/other_user}","gists_url":"https://api.github.com/users/markstory/gists{/gist_id}","starred_url":"https://api.github.com/users/markstory/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markstory/subscriptions","organizations_url":"https://api.github.com/users/markstory/orgs","repos_url":"https://api.github.com/users/markstory/repos","events_url":"https://api.github.com/users/markstory/events{/privacy}","received_events_url":"https://api.github.com/users/markstory/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"markstory","id":24086,"node_id":"MDQ6VXNlcjI0MDg2","avatar_url":"https://avatars.githubusercontent.com/u/24086?v=4","gravatar_id":"","url":"https://api.github.com/users/markstory","html_url":"https://github.com/markstory","followers_url":"https://api.github.com/users/markstory/followers","following_url":"https://api.github.com/users/markstory/following{/other_user}","gists_url":"https://api.github.com/users/markstory/gists{/gist_id}","starred_url":"https://api.github.com/users/markstory/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markstory/subscriptions","organizations_url":"https://api.github.com/users/markstory/orgs","repos_url":"https://api.github.com/users/markstory/repos","events_url":"https://api.github.com/users/markstory/events{/privacy}","received_events_url":"https://api.github.com/users/markstory/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/cakephp/cakephp/milestones/303","html_url":"https://github.com/cakephp/cakephp/milestone/303","labels_url":"https://api.github.com/repos/cakephp/cakephp/milestones/303/labels","id":10051363,"node_id":"MI_kwDOAAoEbs4AmV8j","number":303,"title":"4.5.1","description":"Bugfixes for 4.5.0","creator":{"login":"markstory","id":24086,"node_id":"MDQ6VXNlcjI0MDg2","avatar_url":"https://avatars.githubusercontent.com/u/24086?v=4","gravatar_id":"","url":"https://api.github.com/users/markstory","html_url":"https://github.com/markstory","followers_url":"https://api.github.com/users/markstory/followers","following_url":"https://api.github.com/users/markstory/following{/other_user}","gists_url":"https://api.github.com/users/markstory/gists{/gist_id}","starred_url":"https://api.github.com/users/markstory/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markstory/subscriptions","organizations_url":"https://api.github.com/users/markstory/orgs","repos_url":"https://api.github.com/users/markstory/repos","events_url":"https://api.github.com/users/markstory/events{/privacy}","received_events_url":"https://api.github.com/users/markstory/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":18,"state":"closed","created_at":"2023-10-15T02:58:22Z","updated_at":"2023-11-15T15:24:39Z","due_on":"2023-11-11T08:00:00Z","closed_at":"2023-11-15T15:24:39Z"},"comments":0,"created_at":"2023-10-25T13:34:34Z","updated_at":"2023-10-29T14:46:46Z","closed_at":"2023-10-29T14:46:46Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Description\n\nHi all,\r\nwhile I was refactoring my manual error handling for CakePHP 4.5.0, I noticed that the `ReconnectStrategy` class of CakePHP itself is also not using the new `$connection->getDriver()->disconnect()` method.\r\n\r\nInstead it is also going to use the deprecated `Connection::disconnect()` and `Connection::connect()` methods\r\n\r\n```\r\n2023-10-25 15:29:09 notice: If you cannot use automatic connection management, use $connection->getDriver()->disconnect() instead.\r\n/opt/openitc/frontend/vendor/cakephp/cakephp/src/Database/Retry/ReconnectStrategy.php, line: 107\r\nYou can disable all deprecation warnings by setting `Error.errorLevel` to `E_ALL & ~E_USER_DEPRECATED`. Adding `vendor/cakephp/cakephp/src/Database/Retry/ReconnectStrategy.php` to `Error.ignoredDeprecationPaths` in your `config/app.php` config will mute deprecations from that file only.\r\nTrace:\r\n/opt/openitc/frontend/vendor/cakephp/cakephp/src/Core/functions.php /opt/openitc/frontend/vendor/cakephp/cakephp/src/Core/functions.php, line 300\r\n/opt/openitc/frontend/vendor/cakephp/cakephp/src/Database/Connection.php /opt/openitc/frontend/vendor/cakephp/cakephp/src/Database/Connection.php, line 355\r\nCake\\Database\\Connection->disconnect() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Database/Retry/ReconnectStrategy.php, line 107\r\nCake\\Database\\Retry\\ReconnectStrategy->reconnect() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Database/Retry/ReconnectStrategy.php, line 86\r\nCake\\Database\\Retry\\ReconnectStrategy->shouldRetry() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Core/Retry/CommandRetry.php, line 74\r\nCake\\Core\\Retry\\CommandRetry->run() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Database/Connection.php, line 449\r\nCake\\Database\\Connection->run() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Database/Query.php, line 273\r\nCake\\Database\\Query->execute() /opt/openitc/frontend/vendor/cakephp/cakephp/src/ORM/Query.php, line 1167\r\nCake\\ORM\\Query->_execute() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Datasource/QueryTrait.php, line 305\r\nCake\\ORM\\Query->_all() /opt/openitc/frontend/vendor/cakephp/cakephp/src/ORM/Query.php, line 1115\r\nCake\\ORM\\Query->all() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Datasource/QueryTrait.php, line 512\r\nCake\\ORM\\Query->first() /opt/openitc/frontend/src/Command/GearmanWorkerCommand.php, line 1680\r\nApp\\Command\\GearmanWorkerCommand->exportCallback() [internal], line ??\r\nGearmanClient->runTasks() /opt/openitc/frontend/src/Command/GearmanWorkerCommand.php, line 1349\r\nApp\\Command\\GearmanWorkerCommand->launchExport() /opt/openitc/frontend/src/Command/GearmanWorkerCommand.php, line 629\r\nApp\\Command\\GearmanWorkerCommand->runJob() [internal], line ??\r\nGearmanWorker->work() /opt/openitc/frontend/src/Command/GearmanWorkerCommand.php, line 203\r\nApp\\Command\\GearmanWorkerCommand->loop() /opt/openitc/frontend/src/Command/GearmanWorkerCommand.php, line 179\r\nApp\\Command\\GearmanWorkerCommand->daemonizing() /opt/openitc/frontend/src/Command/GearmanWorkerCommand.php, line 117\r\nApp\\Command\\GearmanWorkerCommand->execute() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Console/BaseCommand.php, line 190\r\nCake\\Console\\BaseCommand->run() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Console/CommandRunner.php, line 334\r\nCake\\Console\\CommandRunner->runCommand() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Console/CommandRunner.php, line 172\r\nCake\\Console\\CommandRunner->run() /opt/openitc/frontend/bin/cake.php, line 12\r\n[main]\r\n\r\ndeprecated: 16384 :: If you cannot use automatic connection management, use $connection->getDriver()->disconnect() instead.\r\n/opt/openitc/frontend/vendor/cakephp/cakephp/src/Database/Retry/ReconnectStrategy.php, line: 107\r\nYou can disable all deprecation warnings by setting `Error.errorLevel` to `E_ALL & ~E_USER_DEPRECATED`. Adding `vendor/cakephp/cakephp/src/Database/Retry/ReconnectStrategy.php` to `Error.ignoredDeprecationPaths` in your `config/app.php` config will mute deprecations from that file only. on line 300 of /opt/openitc/frontend/vendor/cakephp/cakephp/src/Core/functions.php\r\nStack Trace:\r\n\r\n/opt/openitc/frontend/vendor/cakephp/cakephp/src/Core/functions.php /opt/openitc/frontend/vendor/cakephp/cakephp/src/Core/functions.php, line 300\r\n/opt/openitc/frontend/vendor/cakephp/cakephp/src/Database/Connection.php /opt/openitc/frontend/vendor/cakephp/cakephp/src/Database/Connection.php, line 355\r\nCake\\Database\\Connection->disconnect() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Database/Retry/ReconnectStrategy.php, line 107\r\nCake\\Database\\Retry\\ReconnectStrategy->reconnect() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Database/Retry/ReconnectStrategy.php, line 86\r\nCake\\Database\\Retry\\ReconnectStrategy->shouldRetry() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Core/Retry/CommandRetry.php, line 74\r\nCake\\Core\\Retry\\CommandRetry->run() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Database/Connection.php, line 449\r\nCake\\Database\\Connection->run() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Database/Query.php, line 273\r\nCake\\Database\\Query->execute() /opt/openitc/frontend/vendor/cakephp/cakephp/src/ORM/Query.php, line 1167\r\nCake\\ORM\\Query->_execute() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Datasource/QueryTrait.php, line 305\r\nCake\\ORM\\Query->_all() /opt/openitc/frontend/vendor/cakephp/cakephp/src/ORM/Query.php, line 1115\r\nCake\\ORM\\Query->all() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Datasource/QueryTrait.php, line 512\r\nCake\\ORM\\Query->first() /opt/openitc/frontend/src/Command/GearmanWorkerCommand.php, line 1680\r\nApp\\Command\\GearmanWorkerCommand->exportCallback() [internal], line ??\r\nGearmanClient->runTasks() /opt/openitc/frontend/src/Command/GearmanWorkerCommand.php, line 1349\r\nApp\\Command\\GearmanWorkerCommand->launchExport() /opt/openitc/frontend/src/Command/GearmanWorkerCommand.php, line 629\r\nApp\\Command\\GearmanWorkerCommand->runJob() [internal], line ??\r\nGearmanWorker->work() /opt/openitc/frontend/src/Command/GearmanWorkerCommand.php, line 203\r\nApp\\Command\\GearmanWorkerCommand->loop() /opt/openitc/frontend/src/Command/GearmanWorkerCommand.php, line 179\r\nApp\\Command\\GearmanWorkerCommand->daemonizing() /opt/openitc/frontend/src/Command/GearmanWorkerCommand.php, line 117\r\nApp\\Command\\GearmanWorkerCommand->execute() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Console/BaseCommand.php, line 190\r\nCake\\Console\\BaseCommand->run() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Console/CommandRunner.php, line 334\r\nCake\\Console\\CommandRunner->runCommand() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Console/CommandRunner.php, line 172\r\nCake\\Console\\CommandRunner->run() /opt/openitc/frontend/bin/cake.php, line 12\r\n[main]\r\n\r\n\r\n2023-10-25 15:29:09 notice: If you cannot use automatic connection management, use $connection->getDriver()->connect() instead.\r\n/opt/openitc/frontend/vendor/cakephp/cakephp/src/Database/Retry/ReconnectStrategy.php, line: 112\r\nYou can disable all deprecation warnings by setting `Error.errorLevel` to `E_ALL & ~E_USER_DEPRECATED`. Adding `vendor/cakephp/cakephp/src/Database/Retry/ReconnectStrategy.php` to `Error.ignoredDeprecationPaths` in your `config/app.php` config will mute deprecations from that file only.\r\nTrace:\r\n/opt/openitc/frontend/vendor/cakephp/cakephp/src/Core/functions.php /opt/openitc/frontend/vendor/cakephp/cakephp/src/Core/functions.php, line 300\r\n/opt/openitc/frontend/vendor/cakephp/cakephp/src/Database/Connection.php /opt/openitc/frontend/vendor/cakephp/cakephp/src/Database/Connection.php, line 322\r\nCake\\Database\\Connection->connect() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Database/Retry/ReconnectStrategy.php, line 112\r\nCake\\Database\\Retry\\ReconnectStrategy->reconnect() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Database/Retry/ReconnectStrategy.php, line 86\r\nCake\\Database\\Retry\\ReconnectStrategy->shouldRetry() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Core/Retry/CommandRetry.php, line 74\r\nCake\\Core\\Retry\\CommandRetry->run() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Database/Connection.php, line 449\r\nCake\\Database\\Connection->run() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Database/Query.php, line 273\r\nCake\\Database\\Query->execute() /opt/openitc/frontend/vendor/cakephp/cakephp/src/ORM/Query.php, line 1167\r\nCake\\ORM\\Query->_execute() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Datasource/QueryTrait.php, line 305\r\nCake\\ORM\\Query->_all() /opt/openitc/frontend/vendor/cakephp/cakephp/src/ORM/Query.php, line 1115\r\nCake\\ORM\\Query->all() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Datasource/QueryTrait.php, line 512\r\nCake\\ORM\\Query->first() /opt/openitc/frontend/src/Command/GearmanWorkerCommand.php, line 1680\r\nApp\\Command\\GearmanWorkerCommand->exportCallback() [internal], line ??\r\nGearmanClient->runTasks() /opt/openitc/frontend/src/Command/GearmanWorkerCommand.php, line 1349\r\nApp\\Command\\GearmanWorkerCommand->launchExport() /opt/openitc/frontend/src/Command/GearmanWorkerCommand.php, line 629\r\nApp\\Command\\GearmanWorkerCommand->runJob() [internal], line ??\r\nGearmanWorker->work() /opt/openitc/frontend/src/Command/GearmanWorkerCommand.php, line 203\r\nApp\\Command\\GearmanWorkerCommand->loop() /opt/openitc/frontend/src/Command/GearmanWorkerCommand.php, line 179\r\nApp\\Command\\GearmanWorkerCommand->daemonizing() /opt/openitc/frontend/src/Command/GearmanWorkerCommand.php, line 117\r\nApp\\Command\\GearmanWorkerCommand->execute() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Console/BaseCommand.php, line 190\r\nCake\\Console\\BaseCommand->run() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Console/CommandRunner.php, line 334\r\nCake\\Console\\CommandRunner->runCommand() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Console/CommandRunner.php, line 172\r\nCake\\Console\\CommandRunner->run() /opt/openitc/frontend/bin/cake.php, line 12\r\n[main]\r\n\r\ndeprecated: 16384 :: If you cannot use automatic connection management, use $connection->getDriver()->connect() instead.\r\n/opt/openitc/frontend/vendor/cakephp/cakephp/src/Database/Retry/ReconnectStrategy.php, line: 112\r\nYou can disable all deprecation warnings by setting `Error.errorLevel` to `E_ALL & ~E_USER_DEPRECATED`. Adding `vendor/cakephp/cakephp/src/Database/Retry/ReconnectStrategy.php` to `Error.ignoredDeprecationPaths` in your `config/app.php` config will mute deprecations from that file only. on line 300 of /opt/openitc/frontend/vendor/cakephp/cakephp/src/Core/functions.php\r\nStack Trace:\r\n\r\n/opt/openitc/frontend/vendor/cakephp/cakephp/src/Core/functions.php /opt/openitc/frontend/vendor/cakephp/cakephp/src/Core/functions.php, line 300\r\n/opt/openitc/frontend/vendor/cakephp/cakephp/src/Database/Connection.php /opt/openitc/frontend/vendor/cakephp/cakephp/src/Database/Connection.php, line 322\r\nCake\\Database\\Connection->connect() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Database/Retry/ReconnectStrategy.php, line 112\r\nCake\\Database\\Retry\\ReconnectStrategy->reconnect() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Database/Retry/ReconnectStrategy.php, line 86\r\nCake\\Database\\Retry\\ReconnectStrategy->shouldRetry() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Core/Retry/CommandRetry.php, line 74\r\nCake\\Core\\Retry\\CommandRetry->run() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Database/Connection.php, line 449\r\nCake\\Database\\Connection->run() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Database/Query.php, line 273\r\nCake\\Database\\Query->execute() /opt/openitc/frontend/vendor/cakephp/cakephp/src/ORM/Query.php, line 1167\r\nCake\\ORM\\Query->_execute() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Datasource/QueryTrait.php, line 305\r\nCake\\ORM\\Query->_all() /opt/openitc/frontend/vendor/cakephp/cakephp/src/ORM/Query.php, line 1115\r\nCake\\ORM\\Query->all() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Datasource/QueryTrait.php, line 512\r\nCake\\ORM\\Query->first() /opt/openitc/frontend/src/Command/GearmanWorkerCommand.php, line 1680\r\nApp\\Command\\GearmanWorkerCommand->exportCallback() [internal], line ??\r\nGearmanClient->runTasks() /opt/openitc/frontend/src/Command/GearmanWorkerCommand.php, line 1349\r\nApp\\Command\\GearmanWorkerCommand->launchExport() /opt/openitc/frontend/src/Command/GearmanWorkerCommand.php, line 629\r\nApp\\Command\\GearmanWorkerCommand->runJob() [internal], line ??\r\nGearmanWorker->work() /opt/openitc/frontend/src/Command/GearmanWorkerCommand.php, line 203\r\nApp\\Command\\GearmanWorkerCommand->loop() /opt/openitc/frontend/src/Command/GearmanWorkerCommand.php, line 179\r\nApp\\Command\\GearmanWorkerCommand->daemonizing() /opt/openitc/frontend/src/Command/GearmanWorkerCommand.php, line 117\r\nApp\\Command\\GearmanWorkerCommand->execute() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Console/BaseCommand.php, line 190\r\nCake\\Console\\BaseCommand->run() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Console/CommandRunner.php, line 334\r\nCake\\Console\\CommandRunner->runCommand() /opt/openitc/frontend/vendor/cakephp/cakephp/src/Console/CommandRunner.php, line 172\r\nCake\\Console\\CommandRunner->run() /opt/openitc/frontend/bin/cake.php, line 12\r\n[main]\r\n```\n\n### CakePHP Version\n\n4.5.0\n\n### PHP Version\n\n8.1.2","closed_by":{"login":"markstory","id":24086,"node_id":"MDQ6VXNlcjI0MDg2","avatar_url":"https://avatars.githubusercontent.com/u/24086?v=4","gravatar_id":"","url":"https://api.github.com/users/markstory","html_url":"https://github.com/markstory","followers_url":"https://api.github.com/users/markstory/followers","following_url":"https://api.github.com/users/markstory/following{/other_user}","gists_url":"https://api.github.com/users/markstory/gists{/gist_id}","starred_url":"https://api.github.com/users/markstory/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markstory/subscriptions","organizations_url":"https://api.github.com/users/markstory/orgs","repos_url":"https://api.github.com/users/markstory/repos","events_url":"https://api.github.com/users/markstory/events{/privacy}","received_events_url":"https://api.github.com/users/markstory/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/cakephp/cakephp/issues/17382/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/cakephp/cakephp/issues/17382/timeline","performed_via_github_app":null,"state_reason":"completed"}