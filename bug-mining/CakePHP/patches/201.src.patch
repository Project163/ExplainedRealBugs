diff --git a/src/Routing/Asset.php b/src/Routing/Asset.php
index 852a1b127a..2e5e1215cc 100644
--- a/src/Routing/Asset.php
+++ b/src/Routing/Asset.php
@@ -214,13 +214,15 @@ class Asset
     protected static function encodeUrl(string $url): string
     {
         $path = parse_url($url, PHP_URL_PATH);
+        if ($path === false) {
+            $path = $url;
+        }
+
         $parts = array_map('rawurldecode', explode('/', $path));
         $parts = array_map('rawurlencode', $parts);
         $encoded = implode('/', $parts);
 
-        $url = str_replace($path, $encoded, $url);
-
-        return $url;
+        return str_replace($path, $encoded, $url);
     }
 
     /**
diff --git a/tests/TestCase/Routing/AssetTest.php b/tests/TestCase/Routing/AssetTest.php
index 97282ed483..ef475b0da2 100644
--- a/tests/TestCase/Routing/AssetTest.php
+++ b/tests/TestCase/Routing/AssetTest.php
@@ -136,6 +136,9 @@ class AssetTest extends TestCase
         // URL encoding is done
         $result = Asset::url('dir/big+tall/image', ['ext' => '.jpg']);
         $this->assertSame('/dir/big%2Btall/image.jpg', $result);
+
+        $result = Asset::url('/posts/index/adbirawwy/page:6/sort:type/');
+        $this->assertSame('/posts/index/adbirawwy/page%3A6/sort%3Atype/', $result);
     }
 
     /**
