diff --git a/src/View/Helper/TextHelper.php b/src/View/Helper/TextHelper.php
index f62acbef22..e083b73ab6 100644
--- a/src/View/Helper/TextHelper.php
+++ b/src/View/Helper/TextHelper.php
@@ -162,7 +162,7 @@ class TextHelper extends Helper
         $replace = [];
         foreach ($this->_placeholders as $hash => $url) {
             $link = $url;
-            if (!preg_match('#^[a-z]+\://#', $url)) {
+            if (!preg_match('#^[a-z]+\://#i', $url)) {
                 $url = 'http://' . $url;
             }
             $replace[$hash] = $this->Html->link($link, $url, $htmlOptions);
diff --git a/tests/TestCase/View/Helper/TextHelperTest.php b/tests/TestCase/View/Helper/TextHelperTest.php
index d5dcb1eb94..6e3cf11563 100644
--- a/tests/TestCase/View/Helper/TextHelperTest.php
+++ b/tests/TestCase/View/Helper/TextHelperTest.php
@@ -299,6 +299,10 @@ class TextHelperTest extends TestCase
                 'This is a test that includes www.wikipedia.org/wiki/Kanton_(Schweiz)#fragment',
                 'This is a test that includes <a href="http://www.wikipedia.org/wiki/Kanton_(Schweiz)#fragment">www.wikipedia.org/wiki/Kanton_(Schweiz)#fragment</a>',
             ],
+            [
+                'This is a test that includes Http://example.com/test.php?foo=bar text',
+                'This is a test that includes <a href="Http://example.com/test.php?foo=bar">Http://example.com/test.php?foo=bar</a> text',
+            ],
             [
                 'This is a test that includes http://example.com/test.php?foo=bar text',
                 'This is a test that includes <a href="http://example.com/test.php?foo=bar">http://example.com/test.php?foo=bar</a> text',
