diff --git a/src/Routing/Router.php b/src/Routing/Router.php
index 7f60ff1017..97b739c7dd 100644
--- a/src/Routing/Router.php
+++ b/src/Routing/Router.php
@@ -375,7 +375,8 @@ class Router
     public static function url(UriInterface|array|string|null $url = null, bool $full = false): string
     {
         $context = static::$_requestContext;
-        $context['_base'] ??= '';
+        // For CLI request context would be empty
+        $context['_base'] ??= Configure::read('App.base', '');
 
         if (!$url) {
             $here = static::getRequest()?->getRequestTarget() ?? '/';
diff --git a/tests/TestCase/Routing/RouterTest.php b/tests/TestCase/Routing/RouterTest.php
index 8d1b0286cc..22e06a0e63 100644
--- a/tests/TestCase/Routing/RouterTest.php
+++ b/tests/TestCase/Routing/RouterTest.php
@@ -93,8 +93,6 @@ class RouterTest extends TestCase
     {
         Configure::write('App.base', '/cakephp');
         Router::fullBaseUrl('http://example.com');
-        Router::setRequest(ServerRequestFactory::fromGlobals());
-
         $this->assertSame('http://example.com/cakephp/tasks', Router::url('/tasks', true));
     }
 
@@ -106,8 +104,6 @@ class RouterTest extends TestCase
     {
         Configure::write('App.base', '/cakephp');
         Router::fullBaseUrl('http://example.com');
-        Router::setRequest(ServerRequestFactory::fromGlobals());
-
         Router::createRouteBuilder('/')
             ->scope('/', function (RouteBuilder $routes): void {
                 $routes->get('/{controller}', ['action' => 'index']);
