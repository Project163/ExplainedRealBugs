diff --git a/src/View/Form/EntityContext.php b/src/View/Form/EntityContext.php
index 754a848a8c..9ed2829c2c 100644
--- a/src/View/Form/EntityContext.php
+++ b/src/View/Form/EntityContext.php
@@ -125,8 +125,11 @@ class EntityContext implements ContextInterface
         $table = $this->_context['table'];
         /** @var \Cake\Datasource\EntityInterface|iterable $entity */
         $entity = $this->_context['entity'];
+
+        $this->_isCollection = is_iterable($entity);
+
         if (empty($table)) {
-            if (is_iterable($entity)) {
+            if ($this->_isCollection) {
                 foreach ($entity as $e) {
                     $entity = $e;
                     break;
@@ -152,10 +155,6 @@ class EntityContext implements ContextInterface
                 'Unable to find table class for current entity.'
             );
         }
-        $this->_isCollection = (
-            is_array($entity) ||
-            $entity instanceof Traversable
-        );
 
         $alias = $this->_rootName = $table->getAlias();
         $this->_tables[$alias] = $table;
diff --git a/tests/TestCase/View/Form/EntityContextTest.php b/tests/TestCase/View/Form/EntityContextTest.php
index df10178707..692f9a8275 100644
--- a/tests/TestCase/View/Form/EntityContextTest.php
+++ b/tests/TestCase/View/Form/EntityContextTest.php
@@ -236,6 +236,8 @@ class EntityContextTest extends TestCase
 
         $result = $context->error('1.body');
         $this->assertEquals(['Not long enough'], $result);
+
+        $this->assertNull($context->val('0'));
     }
 
     /**
