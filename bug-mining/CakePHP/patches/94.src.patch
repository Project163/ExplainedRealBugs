diff --git a/src/Database/Type.php b/src/Database/Type.php
index ad566e8c22..24df3f6f13 100644
--- a/src/Database/Type.php
+++ b/src/Database/Type.php
@@ -138,6 +138,7 @@ class Type implements TypeInterface
     public static function set($name, Type $instance)
     {
         static::$_builtTypes[$name] = $instance;
+        static::$_types[$name] = get_class($instance);
     }
 
     /**
diff --git a/tests/TestCase/Database/QueryTest.php b/tests/TestCase/Database/QueryTest.php
index f6d9ade78d..c559cf3329 100644
--- a/tests/TestCase/Database/QueryTest.php
+++ b/tests/TestCase/Database/QueryTest.php
@@ -20,9 +20,11 @@ use Cake\Database\Expression\QueryExpression;
 use Cake\Database\Query;
 use Cake\Database\StatementInterface;
 use Cake\Database\Statement\StatementDecorator;
+use Cake\Database\Type;
 use Cake\Database\TypeMap;
 use Cake\Datasource\ConnectionManager;
 use Cake\TestSuite\TestCase;
+use TestApp\Database\Type\BarType;
 
 /**
  * Tests Query class
@@ -4481,16 +4483,25 @@ class QueryTest extends TestCase
      */
     public function testSelectTypeConversion()
     {
+        Type::set('custom_datetime', new BarType('custom_datetime'));
         $this->loadFixtures('Comments');
+
         $query = new Query($this->connection);
         $query
-            ->select(['id', 'comment', 'the_date' => 'created'])
+            ->select(['id', 'comment', 'the_date' => 'created', 'updated'])
             ->from('comments')
             ->limit(1)
-            ->getSelectTypeMap()->setTypes(['id' => 'integer', 'the_date' => 'datetime']);
+            ->getSelectTypeMap()
+                ->setTypes([
+                    'id' => 'integer',
+                    'the_date' => 'datetime',
+                    'updated' => 'custom_datetime'
+                ]);
+
         $result = $query->execute()->fetchAll('assoc');
         $this->assertInternalType('integer', $result[0]['id']);
         $this->assertInstanceOf('DateTime', $result[0]['the_date']);
+        $this->assertInstanceOf('DateTime', $result[0]['updated']);
     }
 
     /**
diff --git a/tests/TestCase/Database/TypeTest.php b/tests/TestCase/Database/TypeTest.php
index d88e7f56f8..6920aa9c59 100644
--- a/tests/TestCase/Database/TypeTest.php
+++ b/tests/TestCase/Database/TypeTest.php
@@ -146,6 +146,21 @@ class TypeTest extends TestCase
         $this->assertInstanceOf($fooType, $type);
     }
 
+    /**
+     * Tests new types set with set() are returned by buildAll()
+     *
+     * @return void
+     */
+    public function testSetAndBuild()
+    {
+        $types = Type::buildAll();
+        $this->assertFalse(isset($types['foo']));
+
+        Type::set('foo', new FooType());
+        $types = Type::buildAll();
+        $this->assertTrue(isset($types['foo']));
+    }
+
     /**
      * Tests overwriting type map works for building
      *
diff --git a/tests/test_app/TestApp/Database/Type/BarType.php b/tests/test_app/TestApp/Database/Type/BarType.php
index 4fd43f2046..1d34db7443 100644
--- a/tests/test_app/TestApp/Database/Type/BarType.php
+++ b/tests/test_app/TestApp/Database/Type/BarType.php
@@ -14,12 +14,12 @@
  */
 namespace TestApp\Database\Type;
 
-use Cake\Database\Type;
+use Cake\Database\Type\DateTimeType;
 
-class BarType extends Type
+class BarType extends DateTimeType
 {
     public function getBaseType()
     {
-        return 'text';
+        return 'datetimetype';
     }
 }
