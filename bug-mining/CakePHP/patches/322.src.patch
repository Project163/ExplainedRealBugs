diff --git a/src/Http/UriFactory.php b/src/Http/UriFactory.php
index 90e7ade50b..263384e13e 100644
--- a/src/Http/UriFactory.php
+++ b/src/Http/UriFactory.php
@@ -169,9 +169,9 @@ class UriFactory implements UriFactoryInterface
         }
         $webrootDir = $base . '/';
 
-        $docRoot = $server['DOCUMENT_ROOT'] ?? null;
+        $docRoot = $server['DOCUMENT_ROOT'] ?? '';
         if (
-            (!empty($base) || !str_contains($docRoot, $webroot))
+            ($base || !str_contains($docRoot, $webroot))
             && !str_contains($webrootDir, '/' . $webroot . '/')
         ) {
             $webrootDir .= $webroot . '/';
diff --git a/tests/TestCase/Http/UriFactoryTest.php b/tests/TestCase/Http/UriFactoryTest.php
index fe4ee9f537..749e9a60c8 100644
--- a/tests/TestCase/Http/UriFactoryTest.php
+++ b/tests/TestCase/Http/UriFactoryTest.php
@@ -16,6 +16,7 @@ declare(strict_types=1);
  */
 namespace Cake\Test\TestCase\Http;
 
+use Cake\Core\Configure;
 use Cake\Http\UriFactory;
 use Cake\TestSuite\TestCase;
 use Laminas\Diactoros\Uri;
@@ -32,4 +33,16 @@ class UriFactoryTest extends TestCase
 
         $this->assertInstanceOf(Uri::class, $uri);
     }
+
+    public function testMarshalUriAndBaseFromSapi()
+    {
+        Configure::write('App.baseUrl', '/index.php');
+        $result = UriFactory::marshalUriAndBaseFromSapi([]);
+
+        $this->assertInstanceOf(Uri::class, $result['uri']);
+        $this->assertSame('/index.php', $result['base']);
+        $this->assertSame('/webroot/', $result['webroot']);
+
+        Configure::delete('App.baseUrl');
+    }
 }
