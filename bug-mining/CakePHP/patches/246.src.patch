diff --git a/src/Error/ExceptionTrap.php b/src/Error/ExceptionTrap.php
index 9830c5a9e0..ecf6330818 100644
--- a/src/Error/ExceptionTrap.php
+++ b/src/Error/ExceptionTrap.php
@@ -241,6 +241,10 @@ class ExceptionTrap
         } catch (Throwable $exception) {
             $this->logInternalError($exception);
         }
+        // Use this constant as a proxy for cakephp tests.
+        if (PHP_SAPI == 'cli' && !env('FIXTURE_SCHEMA_METADATA')) {
+            exit(1);
+        }
     }
 
     /**
