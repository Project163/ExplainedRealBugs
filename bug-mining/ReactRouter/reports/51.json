{"url":"https://api.github.com/repos/remix-run/react-router/issues/6361","repository_url":"https://api.github.com/repos/remix-run/react-router","labels_url":"https://api.github.com/repos/remix-run/react-router/issues/6361/labels{/name}","comments_url":"https://api.github.com/repos/remix-run/react-router/issues/6361/comments","events_url":"https://api.github.com/repos/remix-run/react-router/issues/6361/events","html_url":"https://github.com/remix-run/react-router/issues/6361","id":365238414,"node_id":"MDU6SXNzdWUzNjUyMzg0MTQ=","number":6361,"title":"Add a warning about using different builds","user":{"login":"mjackson","id":92839,"node_id":"MDQ6VXNlcjkyODM5","avatar_url":"https://avatars.githubusercontent.com/u/92839?v=4","gravatar_id":"","url":"https://api.github.com/users/mjackson","html_url":"https://github.com/mjackson","followers_url":"https://api.github.com/users/mjackson/followers","following_url":"https://api.github.com/users/mjackson/following{/other_user}","gists_url":"https://api.github.com/users/mjackson/gists{/gist_id}","starred_url":"https://api.github.com/users/mjackson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjackson/subscriptions","organizations_url":"https://api.github.com/users/mjackson/orgs","repos_url":"https://api.github.com/users/mjackson/repos","events_url":"https://api.github.com/users/mjackson/events{/privacy}","received_events_url":"https://api.github.com/users/mjackson/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2018-09-30T16:25:02Z","updated_at":"2019-07-09T19:28:47Z","closed_at":"2019-02-22T01:24:01Z","author_association":"MEMBER","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Before 4.4, you could do this w/out problems:\r\n\r\n```js\r\nimport MemoryRouter from 'react-router-dom/MemoryRouter';\r\nimport { Link } from 'react-router-dom';\r\n\r\n<MemoryRouter>\r\n  <Link /> // Error!\r\n</MemoryRouter>\r\n```\r\n\r\nIt's not very obvious, but those two `import` statements may actually reference different builds. The first one is using our CommonJS build, and the second one may be using the ES modules or the CommonJS build, depending on how your build is setup and where you told it to find files from the `react-router-dom` package. If you're using webpack (which you probably are) then it's probably pulling from the ES modules build.\r\n\r\nIn the case where `<Link>` is coming from a different build (or any other component, e.g. `<Route>`), you will currently run into an error like this:\r\n\r\n> You should not render a \\<Link> outside a \\<Router>\r\n\r\nThis is because of the context object mismatch, which is a problem introduced by our using the new context API. Basically, each build has its own context object, and components from different builds can't be used together.\r\n\r\nFor this reason, I think it'd be nice to provide a better warning for folks who might be pulling the files from different builds accidentally, like I was doing (see 6460fe0862c40b7f726cc3d47d03cc9bbde74ff4). Maybe something like:\r\n\r\n> You are using two different builds of React Router in the same application. To fix this, please make sure you always `import` from the same build. [link to a gist or some docs page that explains the issue more thoroughly].","closed_by":{"login":"mjackson","id":92839,"node_id":"MDQ6VXNlcjkyODM5","avatar_url":"https://avatars.githubusercontent.com/u/92839?v=4","gravatar_id":"","url":"https://api.github.com/users/mjackson","html_url":"https://github.com/mjackson","followers_url":"https://api.github.com/users/mjackson/followers","following_url":"https://api.github.com/users/mjackson/following{/other_user}","gists_url":"https://api.github.com/users/mjackson/gists{/gist_id}","starred_url":"https://api.github.com/users/mjackson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjackson/subscriptions","organizations_url":"https://api.github.com/users/mjackson/orgs","repos_url":"https://api.github.com/users/mjackson/repos","events_url":"https://api.github.com/users/mjackson/events{/privacy}","received_events_url":"https://api.github.com/users/mjackson/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/remix-run/react-router/issues/6361/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/remix-run/react-router/issues/6361/timeline","performed_via_github_app":null,"state_reason":"completed"}