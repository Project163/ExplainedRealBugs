{"url":"https://api.github.com/repos/remix-run/react-router/issues/6362","repository_url":"https://api.github.com/repos/remix-run/react-router","labels_url":"https://api.github.com/repos/remix-run/react-router/issues/6362/labels{/name}","comments_url":"https://api.github.com/repos/remix-run/react-router/issues/6362/comments","events_url":"https://api.github.com/repos/remix-run/react-router/issues/6362/events","html_url":"https://github.com/remix-run/react-router/issues/6362","id":365305992,"node_id":"MDU6SXNzdWUzNjUzMDU5OTI=","number":6362,"title":"Fix <Route children>","user":{"login":"mjackson","id":92839,"node_id":"MDQ6VXNlcjkyODM5","avatar_url":"https://avatars.githubusercontent.com/u/92839?v=4","gravatar_id":"","url":"https://api.github.com/users/mjackson","html_url":"https://github.com/mjackson","followers_url":"https://api.github.com/users/mjackson/followers","following_url":"https://api.github.com/users/mjackson/following{/other_user}","gists_url":"https://api.github.com/users/mjackson/gists{/gist_id}","starred_url":"https://api.github.com/users/mjackson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjackson/subscriptions","organizations_url":"https://api.github.com/users/mjackson/orgs","repos_url":"https://api.github.com/users/mjackson/repos","events_url":"https://api.github.com/users/mjackson/events{/privacy}","received_events_url":"https://api.github.com/users/mjackson/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":100166617,"node_id":"MDU6TGFiZWwxMDAxNjY2MTc=","url":"https://api.github.com/repos/remix-run/react-router/labels/feature-request","name":"feature-request","color":"84b6eb","default":false,"description":"Used to close PRs that haven't gone through/been accepted the Proposal process yet"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":25,"created_at":"2018-10-01T04:37:06Z","updated_at":"2019-12-02T16:25:23Z","closed_at":"2019-09-17T19:10:29Z","author_association":"MEMBER","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"There was a lot of discussion in #5583 about removing the `<Route children>` prop and adding a new prop about when to render. The conversation in that issue stalled, so I'd like to resume it here, but with a completely different proposal.\r\n\r\nThe core issue is that it's not very clear what the difference is between `<Route children>` and `<Route render>`. The API doesn't really say anything about when to use one over the other.\r\n\r\nIn contrast to the proposal in #5583 (remove `children` and add a new prop about when to render) I'd like to propose that we just tweak the way `children` works and get rid of `render` (eventually). Here's why:\r\n\r\nCurrently, `<Route children>` *always* renders, **which doesn't make *any* sense**. Wanna see something crazy?\r\n\r\n```js\r\n<Route path=\"/about\" children={() => (\r\n  <About />\r\n)} />\r\n\r\n// or even\r\n\r\n<Route path=\"/about\">\r\n  <About />\r\n</Route>\r\n```\r\n\r\nYou might think these routes only render when the URL path is `/about`, but nope. **They both will render at any URL**. ðŸ™ƒ This is a huge mistake in the v4 API, and I'd be very surprised if anyone is actually using `<Route children>` like this.\r\n\r\nThe reason this API exists is because you're *supposed* to check the `match` prop to see if the `<Route>` matched before rendering anything, e.g.:\r\n\r\n```js\r\n<Route path=\"/about\" children={props => (\r\n  props.match ? <About /> : <NotFound />\r\n)} />\r\n```\r\n\r\nSo now if the URL is `/about` you'll get the `<About>` page, otherwise `<NotFound>`. That at least makes a little more sense than the previous examples, and hopefully redeems us a little. But it doesn't change the fact that the first examples are just crazy.\r\n\r\nThe vast majority of the time you want to render something only when the route matches the URL, and ignore misses. So we added the `<Route render>` and `<Route component>` APIs that will only render something when it matches. These are used much more commonly than `<Route children>` in all our docs and examples.\r\n\r\n### The Proposal\r\n\r\nIt's quite simple, really: **The default behavior of `children` should be to only render something when the route matches the URL**. We don't need any new API to `<Route>`, and we definitely don't want to get rid of the `children` prop. We just need to fix it.\r\n\r\nWhat about misses?\r\n\r\nThe majority of the time someone wants to handle a \"miss\", they actually want to render a \"not found\" page. We actually already have great support for this inside a `<Switch>`:\r\n\r\n```js\r\n<Switch>\r\n  <Route exact path=\"/\" component={Home} />\r\n  <Route path=\"/about\" component={About} />\r\n  <Route component={NotFound} />\r\n</Switch>\r\n```\r\n\r\nFor the rare use case that someone wants to render a standalone `<Route>` that does *not* match the URL, we already provide the `matchPath` function. If we want a component API, we can provide a lower-level component, call it a `<Match>`, that will just compute the match and tell you whether or not the path matched:\r\n\r\n```js\r\n<Match path=\"/about\">\r\n  {match => match ? <About /> : <NotFound />}\r\n</Match>\r\n```\r\n\r\nPros:\r\n\r\n- `<Route children>` is a lot more intuitive\r\n- Since `<Route children>` would behave the same as `<Route render>`, we can eventually remove `<Route render>` (less API is almost always a good thing)\r\n- If a `<Route>` always matches, it will be a *lot* easier to implement relative `<Route>`s and `<Link>`s (see #5127)\r\n- It should be easier (but still not super easy) to wrap a `<Route>` now with your own component, since you have one less render prop to worry about\r\n\r\nCons:\r\n\r\n- It is technically a breaking change for what I suspect is a very small percentage of our users\r\n- ??\r\n\r\n### The Plan\r\n\r\n- 4.x: Add a `<Match>` component and encourage everyone who is using `children` to render something when a `<Route>` **doesn't** match a URL (probably a very small % of users) to use a `<Match>` instead. Unfortunately, there's no easy way for us to warn users to stop using `children` for non-matches.\r\n- 5.0: Make the switch so `<Route>` only renders something when it matches. I would expect this to break very few apps, but hey, you never know. Also, keep the `render` prop around for a while to ease the upgrade.\r\n- 5.x: Deprecate the `render` prop since it's identical to `children` now and warn people to just use `children` instead.\r\n\r\nThoughts?","closed_by":{"login":"mjackson","id":92839,"node_id":"MDQ6VXNlcjkyODM5","avatar_url":"https://avatars.githubusercontent.com/u/92839?v=4","gravatar_id":"","url":"https://api.github.com/users/mjackson","html_url":"https://github.com/mjackson","followers_url":"https://api.github.com/users/mjackson/followers","following_url":"https://api.github.com/users/mjackson/following{/other_user}","gists_url":"https://api.github.com/users/mjackson/gists{/gist_id}","starred_url":"https://api.github.com/users/mjackson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjackson/subscriptions","organizations_url":"https://api.github.com/users/mjackson/orgs","repos_url":"https://api.github.com/users/mjackson/repos","events_url":"https://api.github.com/users/mjackson/events{/privacy}","received_events_url":"https://api.github.com/users/mjackson/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/remix-run/react-router/issues/6362/reactions","total_count":50,"+1":43,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":7,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/remix-run/react-router/issues/6362/timeline","performed_via_github_app":null,"state_reason":"completed"}