{"url":"https://api.github.com/repos/remix-run/react-router/issues/8086","repository_url":"https://api.github.com/repos/remix-run/react-router","labels_url":"https://api.github.com/repos/remix-run/react-router/issues/8086/labels{/name}","comments_url":"https://api.github.com/repos/remix-run/react-router/issues/8086/comments","events_url":"https://api.github.com/repos/remix-run/react-router/issues/8086/events","html_url":"https://github.com/remix-run/react-router/issues/8086","id":1011480834,"node_id":"I_kwDOAS86yM48SfkC","number":8086,"title":"Linking \"up\" using relative paths","user":{"login":"mjackson","id":92839,"node_id":"MDQ6VXNlcjkyODM5","avatar_url":"https://avatars.githubusercontent.com/u/92839?v=4","gravatar_id":"","url":"https://api.github.com/users/mjackson","html_url":"https://github.com/mjackson","followers_url":"https://api.github.com/users/mjackson/followers","following_url":"https://api.github.com/users/mjackson/following{/other_user}","gists_url":"https://api.github.com/users/mjackson/gists{/gist_id}","starred_url":"https://api.github.com/users/mjackson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjackson/subscriptions","organizations_url":"https://api.github.com/users/mjackson/orgs","repos_url":"https://api.github.com/users/mjackson/repos","events_url":"https://api.github.com/users/mjackson/events{/privacy}","received_events_url":"https://api.github.com/users/mjackson/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":100166617,"node_id":"MDU6TGFiZWwxMDAxNjY2MTc=","url":"https://api.github.com/repos/remix-run/react-router/labels/feature-request","name":"feature-request","color":"84b6eb","default":false,"description":"Used to close PRs that haven't gone through/been accepted the Proposal process yet"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2021-09-29T21:57:03Z","updated_at":"2021-10-15T19:45:00Z","closed_at":"2021-10-15T19:45:00Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"We need a reliable way to \"link up\" to parent routes from child routes.\r\n\r\n## The Problem\r\n\r\nCurrently (beta.5) `<Link to>` values that contain `..` segments operate on URL pathnames. This is fairly predictable when dealing with routes that have a finite number of URL segments, but it's a problem in splat routes where the `*` may match an an indefinite number.\r\n\r\nFor example, in the following scenario:\r\n\r\n```tsx\r\n<Routes>\r\n  <Route path=\"files\">\r\n    <Route path=\"*\" element={<Link to=\"..\" />} />\r\n  </Route>\r\n</Routes>\r\n```\r\n\r\nThe `<a href>` rendered by the `<Link>` will change depending on the URL pathname, stripping off just the last segment of the URL each time.\r\n\r\n```\r\n/files/cat.jpg                         <a href=\"/files\">\r\n/files/pics/cat.jpg                    <a href=\"/files/pics\">\r\n/files/pics/cats/cat.jpg               <a href=\"/files/pics/cats\">\r\n```\r\n\r\nSo if you want to link back to the `files` URL you have to either:\r\n\r\n- use an absolute `<Link to=\"/files/...\">` (which breaks nesting under parent `<Routes>`) or\r\n- count the number of URL segments in `params[\"*\"]` and use the same number of `..` segments in your relative `<Link to>`\r\n\r\nNeither solution seems ideal.\r\n\r\n## Proposal\r\n\r\nInstead of having leading `..` segments traverse \"up\" the URL pathname, we could have them traverse \"up one route\". So, in the scenario from up above, the anchor `href`s would now be consistent.\r\n\r\n```\r\n/files/cat.jpg                         <a href=\"/files\">\r\n/files/pics/cat.jpg                    <a href=\"/files\">\r\n/files/pics/cats/cat.jpg               <a href=\"/files\">\r\n```\r\n\r\nThe `..` segment is shorthand for \"go up one route\". Similarly, `<Link to=\"../../pics\">` would go up two routes and build on the route pathname there. This is a huge win for \"linking up\" using relative links.\r\n\r\n**This is also consistent with other relative links that do not use `..`. They resolve relative to the route pathname, not the current location.** These are a little bit easier to think about since they are \"linking down\", but the principle is the same: links resolve relative to routes.\r\n\r\nThe main trade-off here would be that `..` would no longer work like it does in a normal `<a>` element, which is going to be confusing for a lot of people.\r\n\r\nHowever, I believe this is an issue only with routes that define more than one segment like `some/:id`-style routes. So for example, if these were your routes:\r\n\r\n```tsx\r\n<Routes>\r\n  <Route path=\"inbox\">\r\n    <Route path=\"messages/:id\" element={<Link to=\"..\" />} />\r\n  </Route>\r\n</Routes>\r\n```\r\n\r\nThat `<Link>` would render `<a href=\"/inbox\">`, which may be unexpected since you already intuitively know the number of segments in the URL pathname.\r\n\r\nIn this case, if you wanted to link to a different message (sibling route) you would use `<Link to=\"../messages/123\">`. So your links would have to know something about the route path they are defined in.\r\n\r\nThis feels like the kind of thing that users would hit once or twice, learn, and then be able to adapt to it.\r\n\r\nIn addition, we already don't follow the semantics of `<a href=\"..\">` when it comes to trailing slashes, so having separate semantics for `<Link to>` is something that React Router users should already be familiar with.","closed_by":{"login":"mjackson","id":92839,"node_id":"MDQ6VXNlcjkyODM5","avatar_url":"https://avatars.githubusercontent.com/u/92839?v=4","gravatar_id":"","url":"https://api.github.com/users/mjackson","html_url":"https://github.com/mjackson","followers_url":"https://api.github.com/users/mjackson/followers","following_url":"https://api.github.com/users/mjackson/following{/other_user}","gists_url":"https://api.github.com/users/mjackson/gists{/gist_id}","starred_url":"https://api.github.com/users/mjackson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjackson/subscriptions","organizations_url":"https://api.github.com/users/mjackson/orgs","repos_url":"https://api.github.com/users/mjackson/repos","events_url":"https://api.github.com/users/mjackson/events{/privacy}","received_events_url":"https://api.github.com/users/mjackson/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/remix-run/react-router/issues/8086/reactions","total_count":5,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/remix-run/react-router/issues/8086/timeline","performed_via_github_app":null,"state_reason":"completed"}