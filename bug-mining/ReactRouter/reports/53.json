{"url":"https://api.github.com/repos/remix-run/react-router/issues/6611","repository_url":"https://api.github.com/repos/remix-run/react-router","labels_url":"https://api.github.com/repos/remix-run/react-router/issues/6611/labels{/name}","comments_url":"https://api.github.com/repos/remix-run/react-router/issues/6611/comments","events_url":"https://api.github.com/repos/remix-run/react-router/issues/6611/events","html_url":"https://github.com/remix-run/react-router/issues/6611","id":416514351,"node_id":"MDU6SXNzdWU0MTY1MTQzNTE=","number":6611,"title":"Use of `eval` in development mode violates Content-Security-Policy","user":{"login":"unindented","id":69485,"node_id":"MDQ6VXNlcjY5NDg1","avatar_url":"https://avatars.githubusercontent.com/u/69485?v=4","gravatar_id":"","url":"https://api.github.com/users/unindented","html_url":"https://github.com/unindented","followers_url":"https://api.github.com/users/unindented/followers","following_url":"https://api.github.com/users/unindented/following{/other_user}","gists_url":"https://api.github.com/users/unindented/gists{/gist_id}","starred_url":"https://api.github.com/users/unindented/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/unindented/subscriptions","organizations_url":"https://api.github.com/users/unindented/orgs","repos_url":"https://api.github.com/users/unindented/repos","events_url":"https://api.github.com/users/unindented/events{/privacy}","received_events_url":"https://api.github.com/users/unindented/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2019-03-03T13:10:03Z","updated_at":"2019-05-15T00:00:20Z","closed_at":"2019-03-09T01:14:03Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!--\r\nThank you for contributing!\r\n\r\nHave a usage question?\r\n======================\r\nThe issue tracker is meant for bug reports only. This isn't the best place for usage questions. Questions here don't have as much visibility as they do elsewhere. Before you ask a question, here are some resources to get help first:\r\n\r\n- Read the docs: https://reacttraining.com/react-router\r\n- Check out the list of frequently asked questions: https://github.com/ReactTraining/react-router/blob/master/FAQ.md\r\n- Explore examples: https://reacttraining.com/react-router/web/example/basic\r\n- Look for/ask questions on Stack Overflow: https://stackoverflow.com/questions/ask?tags=react-router\r\n- Ask in chat: https://discord.gg/0ZcbPKXt5bYaNQ46\r\n\r\nThink you found a bug?\r\n======================\r\nThe best bug report is a failing test in the repository as a pull request. Otherwise, please use the \"BUG REPORT\" template below.\r\n\r\nHave a feature request?\r\n=======================\r\nRemove the template from below and provide thoughtful commentary *and code samples* on what this feature means for your product. What will it allow you to do that you can't do today? How will it make current work-arounds straightforward? What potential bugs and edge cases does it help to avoid? etc. Please keep it product-centric.\r\n-->\r\n\r\n<!-- BUG TEMPLATE -->\r\n\r\n## Version\r\n\r\n`4.4.0-beta.7`\r\n\r\n## Test Case\r\n\r\n*CodeSandbox doesn't support adding [CSP](https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP), but it would look like this:*\r\n\r\n```html\r\n<html>\r\n<head>\r\n  <meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'none'; script-src 'self'; style-src 'self' 'unsafe-inline';\" />\r\n</head>\r\n<body>\r\n  <div id=\"root\"></div>\r\n  <script src=\"index.js\"></script>\r\n</body>\r\n</html>\r\n```\r\n\r\n## Steps to reproduce\r\n\r\nImport `react-router` in some file, launch app in development mode.\r\n\r\n## Expected Behavior\r\n\r\nThings loading fine with CSP enabled.\r\n\r\n## Actual Behavior\r\n\r\nBrowser blocks execution of `react-router.js` because it uses `eval`:\r\n\r\n<img width=\"404\" alt=\"screen shot 2019-03-03 at 4 57 22 am\" src=\"https://user-images.githubusercontent.com/69485/53695486-230a7f00-3d71-11e9-9178-00a3bcb6c355.png\">\r\n\r\n<img width=\"1439\" alt=\"screen shot 2019-03-03 at 5 06 36 am\" src=\"https://user-images.githubusercontent.com/69485/53695582-26523a80-3d72-11e9-8705-da25ad09a19f.png\">\r\n\r\nIs there a way of implementing your current logic without `eval`?","closed_by":{"login":"mjackson","id":92839,"node_id":"MDQ6VXNlcjkyODM5","avatar_url":"https://avatars.githubusercontent.com/u/92839?v=4","gravatar_id":"","url":"https://api.github.com/users/mjackson","html_url":"https://github.com/mjackson","followers_url":"https://api.github.com/users/mjackson/followers","following_url":"https://api.github.com/users/mjackson/following{/other_user}","gists_url":"https://api.github.com/users/mjackson/gists{/gist_id}","starred_url":"https://api.github.com/users/mjackson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjackson/subscriptions","organizations_url":"https://api.github.com/users/mjackson/orgs","repos_url":"https://api.github.com/users/mjackson/repos","events_url":"https://api.github.com/users/mjackson/events{/privacy}","received_events_url":"https://api.github.com/users/mjackson/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/remix-run/react-router/issues/6611/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/remix-run/react-router/issues/6611/timeline","performed_via_github_app":null,"state_reason":"completed"}