diff --git a/packages/react-router-config/.gitignore b/packages/react-router-config/.gitignore
index e1111e04b..4670323f6 100644
--- a/packages/react-router-config/.gitignore
+++ b/packages/react-router-config/.gitignore
@@ -1,4 +1,3 @@
-es/
+cjs/
+esm/
 umd/
-/*.js
-!/rollup.config.js
diff --git a/packages/react-router-config/es/matchRoutes.js b/packages/react-router-config/es/matchRoutes.js
new file mode 100644
index 000000000..a85d9cc02
--- /dev/null
+++ b/packages/react-router-config/es/matchRoutes.js
@@ -0,0 +1,7 @@
+"use strict";
+
+import warnAboutDeprecatedESMImport from "./warnAboutDeprecatedESMImport.js";
+warnAboutDeprecatedESMImport("matchRoutes");
+
+import { matchRoutes } from "../esm/react-router-config.js";
+export default matchRoutes;
diff --git a/packages/react-router-config/es/renderRoutes.js b/packages/react-router-config/es/renderRoutes.js
new file mode 100644
index 000000000..52b4d10f7
--- /dev/null
+++ b/packages/react-router-config/es/renderRoutes.js
@@ -0,0 +1,7 @@
+"use strict";
+
+import warnAboutDeprecatedESMImport from "./warnAboutDeprecatedESMImport.js";
+warnAboutDeprecatedESMImport("renderRoutes");
+
+import { renderRoutes } from "../esm/react-router-config.js";
+export default renderRoutes;
diff --git a/packages/react-router-config/es/warnAboutDeprecatedESMImport.js b/packages/react-router-config/es/warnAboutDeprecatedESMImport.js
new file mode 100644
index 000000000..c02ab981a
--- /dev/null
+++ b/packages/react-router-config/es/warnAboutDeprecatedESMImport.js
@@ -0,0 +1,35 @@
+"use strict";
+
+var printWarning = function() {};
+
+if (process.env.NODE_ENV !== "production") {
+  printWarning = function(format, subs) {
+    var index = 0;
+    var message =
+      "Warning: " +
+      (subs.length > 0
+        ? format.replace(/%s/g, function() {
+            return subs[index++];
+          })
+        : format);
+
+    if (typeof console !== "undefined") {
+      console.error(message);
+    }
+
+    try {
+      // --- Welcome to debugging React Router ---
+      // This error was thrown as a convenience so that you can use the
+      // stack trace to find the callsite that triggered this warning.
+      throw new Error(message);
+    } catch (e) {}
+  };
+}
+
+export default function(member) {
+  printWarning(
+    'Please use `import { %s } from "react-router-config"` instead of `import %s from "react-router-config/%s"`. ' +
+      "Support for the latter will be removed in the next major release.",
+    [member, member]
+  );
+}
diff --git a/packages/react-router-config/index.js b/packages/react-router-config/index.js
new file mode 100644
index 000000000..9487624bf
--- /dev/null
+++ b/packages/react-router-config/index.js
@@ -0,0 +1,7 @@
+"use strict";
+
+if (process.env.NODE_ENV === "production") {
+  module.exports = require("./cjs/react-router-config.min.js");
+} else {
+  module.exports = require("./cjs/react-router-config.js");
+}
diff --git a/packages/react-router-config/matchRoutes.js b/packages/react-router-config/matchRoutes.js
new file mode 100644
index 000000000..5a53905a3
--- /dev/null
+++ b/packages/react-router-config/matchRoutes.js
@@ -0,0 +1,3 @@
+"use strict";
+require("./warnAboutDeprecatedCJSRequire.js")("matchRoutes");
+module.exports = require("./index.js").matchRoutes;
diff --git a/packages/react-router-config/modules/.babelrc b/packages/react-router-config/modules/.babelrc
index 3e32ced0b..ed585114a 100644
--- a/packages/react-router-config/modules/.babelrc
+++ b/packages/react-router-config/modules/.babelrc
@@ -1,51 +1,17 @@
 {
+  "presets": [["env", { "loose": true, "modules": false }], "react"],
+  "plugins": [
+    "dev-expression",
+    ["transform-object-rest-spread", { "useBuiltIns": true }],
+    "transform-export-extensions"
+  ],
   "env": {
-    "build-cjs": {
-      "presets": [["env", { "loose": true }], "react"],
-      "plugins": [
-        "dev-expression",
-        ["transform-object-rest-spread", { "useBuiltIns": true }],
-        "transform-export-default",
-        [
-          "transform-imports",
-          {
-            "react-router": {
-              "transform": "react-router/${member}"
-            }
-          }
-        ]
-      ]
-    },
-    "build-esm": {
-      "presets": [["env", { "loose": true, "modules": false }], "react"],
-      "plugins": [
-        "dev-expression",
-        ["transform-object-rest-spread", { "useBuiltIns": true }],
-        "transform-export-default",
-        [
-          "transform-imports",
-          {
-            "react-router": {
-              "transform": "react-router/es/${member}"
-            }
-          }
-        ]
-      ]
-    },
     "test": {
       "presets": [["env", { "loose": true }], "react"],
       "plugins": [
         "dev-expression",
         ["transform-object-rest-spread", { "useBuiltIns": true }],
-        "transform-export-default",
-        [
-          "transform-imports",
-          {
-            "react-router": {
-              "transform": "react-router/modules/${member}"
-            }
-          }
-        ]
+        "transform-export-extensions"
       ]
     }
   }
diff --git a/packages/react-router-config/package-lock.json b/packages/react-router-config/package-lock.json
index b9f98722e..f5b2afbaa 100644
--- a/packages/react-router-config/package-lock.json
+++ b/packages/react-router-config/package-lock.json
@@ -779,9 +779,9 @@
 			"dev": true
 		},
 		"babel-plugin-syntax-export-extensions": {
-			"version": "7.0.0-alpha.20",
-			"resolved": "https://registry.npmjs.org/babel-plugin-syntax-export-extensions/-/babel-plugin-syntax-export-extensions-7.0.0-alpha.20.tgz",
-			"integrity": "sha512-HsPXvLpv0tw34GSQopFE3P299oy/fuEh8n33MLErZi/j7+5LRnD1HzqDf2QnN2SCpfj+EDf9KLSjm8Y7jqbyWQ==",
+			"version": "6.13.0",
+			"resolved": "http://registry.npmjs.org/babel-plugin-syntax-export-extensions/-/babel-plugin-syntax-export-extensions-6.13.0.tgz",
+			"integrity": "sha1-cKFITw+QiaToStRLrDU8lbmxJyE=",
 			"dev": true
 		},
 		"babel-plugin-syntax-flow": {
@@ -1064,13 +1064,14 @@
 				"babel-runtime": "^6.22.0"
 			}
 		},
-		"babel-plugin-transform-export-default": {
-			"version": "7.0.0-alpha.20",
-			"resolved": "https://registry.npmjs.org/babel-plugin-transform-export-default/-/babel-plugin-transform-export-default-7.0.0-alpha.20.tgz",
-			"integrity": "sha512-DR21YY/Lq4Qm+ULZdTLxuSY8woMvW23gejUVz88Lb+8jU3Mf2iuH05IG2+3yqjpbQEhrV/Kgp9GLoa7XLCqDrA==",
+		"babel-plugin-transform-export-extensions": {
+			"version": "6.22.0",
+			"resolved": "https://registry.npmjs.org/babel-plugin-transform-export-extensions/-/babel-plugin-transform-export-extensions-6.22.0.tgz",
+			"integrity": "sha1-U3OLR+deghhYnuqUbLvTkQm75lM=",
 			"dev": true,
 			"requires": {
-				"babel-plugin-syntax-export-extensions": "7.0.0-alpha.20"
+				"babel-plugin-syntax-export-extensions": "^6.8.0",
+				"babel-runtime": "^6.22.0"
 			}
 		},
 		"babel-plugin-transform-flow-strip-types": {
diff --git a/packages/react-router-config/package.json b/packages/react-router-config/package.json
index 69ba30c07..963e1f0ad 100644
--- a/packages/react-router-config/package.json
+++ b/packages/react-router-config/package.json
@@ -8,14 +8,16 @@
     "Ryan Florence"
   ],
   "files": [
+    "cjs",
     "es",
+    "esm",
     "index.js",
     "matchRoutes.js",
     "renderRoutes.js",
     "umd"
   ],
   "main": "index.js",
-  "module": "es/index.js",
+  "module": "esm/index.js",
   "sideEffects": false,
   "scripts": {
     "build": "node ./scripts/build.js",
@@ -34,7 +36,7 @@
     "babel-jest": "^23.0.1",
     "babel-plugin-dev-expression": "^0.2.1",
     "babel-plugin-external-helpers": "^6.22.0",
-    "babel-plugin-transform-export-default": "^7.0.0-alpha.20",
+    "babel-plugin-transform-export-extensions": "^6.22.0",
     "babel-plugin-transform-imports": "^1.5.1",
     "babel-plugin-transform-object-rest-spread": "^6.26.0",
     "babel-preset-env": "^1.7.0",
diff --git a/packages/react-router-config/renderRoutes.js b/packages/react-router-config/renderRoutes.js
new file mode 100644
index 000000000..4bb8c094a
--- /dev/null
+++ b/packages/react-router-config/renderRoutes.js
@@ -0,0 +1,3 @@
+"use strict";
+require("./warnAboutDeprecatedCJSRequire.js")("renderRoutes");
+module.exports = require("./index.js").renderRoutes;
diff --git a/packages/react-router-config/rollup.config.js b/packages/react-router-config/rollup.config.js
index f83c4b95f..82a291f10 100644
--- a/packages/react-router-config/rollup.config.js
+++ b/packages/react-router-config/rollup.config.js
@@ -6,25 +6,13 @@ import resolve from "rollup-plugin-node-resolve";
 
 const config = {
   output: {
-    format: "umd",
     name: "ReactRouterConfig",
     globals: {
       react: "React",
-      "react-router": "ReactRouter",
-      "react-router/es/Route": "ReactRouter.Route",
-      "react-router/es/Router": "ReactRouter.Router",
-      "react-router/es/Switch": "ReactRouter.Switch",
-      "react-router/es/matchPath": "ReactRouter.matchPath"
+      "react-router": "ReactRouter"
     }
   },
-  external: [
-    "react",
-    "react-router",
-    "react-router/es/Route",
-    "react-router/es/Router",
-    "react-router/es/Switch",
-    "react-router/es/matchPath"
-  ],
+  external: ["react", "react-router"],
   plugins: [
     babel({
       exclude: "node_modules/**",
@@ -32,7 +20,7 @@ const config = {
     }),
     resolve(),
     commonjs({
-      include: /node_modules/
+      include: "node_modules/**"
     }),
     replace({
       "process.env.NODE_ENV": JSON.stringify(process.env.NODE_ENV)
diff --git a/packages/react-router-config/scripts/build.js b/packages/react-router-config/scripts/build.js
index 1f8066d3d..572ac7f36 100644
--- a/packages/react-router-config/scripts/build.js
+++ b/packages/react-router-config/scripts/build.js
@@ -10,34 +10,27 @@ function exec(command, extraEnv) {
   });
 }
 
-console.log("Building CommonJS modules ...");
-console.log();
-
-exec("babel modules -d . --ignore __tests__", {
-  BABEL_ENV: "build-cjs"
+exec("rollup -c -i modules/index.js -o cjs/react-router-config.js -f cjs", {
+  NODE_ENV: "development"
 });
 
-console.log();
-console.log("Building ES modules ...");
-console.log();
+exec("rollup -c -i modules/index.js -o cjs/react-router-config.min.js -f cjs", {
+  NODE_ENV: "production"
+});
 
-exec("babel modules -d es --ignore __tests__", {
-  BABEL_ENV: "build-esm"
+exec("rollup -c -i modules/index.js -o esm/react-router-config.js -f esm", {
+  NODE_ENV: "development"
 });
 
-console.log();
-console.log("Building react-router-config.js ...");
+exec("rollup -c -i modules/index.js -o esm/react-router-config.min.js -f esm", {
+  NODE_ENV: "production"
+});
 
-exec("rollup -c -i modules/index.js -o umd/react-router-config.js", {
-  BABEL_ENV: "build-esm",
+exec("rollup -c -i modules/index.js -o umd/react-router-config.js -f umd", {
   NODE_ENV: "development"
 });
 
-console.log();
-console.log("Building react-router-config.min.js ...");
-
-exec("rollup -c -i modules/index.js -o umd/react-router-config.min.js", {
-  BABEL_ENV: "build-esm",
+exec("rollup -c -i modules/index.js -o umd/react-router-config.min.js -f umd", {
   NODE_ENV: "production"
 });
 
diff --git a/packages/react-router-config/warnAboutDeprecatedCJSRequire.js b/packages/react-router-config/warnAboutDeprecatedCJSRequire.js
new file mode 100644
index 000000000..b75c2c593
--- /dev/null
+++ b/packages/react-router-config/warnAboutDeprecatedCJSRequire.js
@@ -0,0 +1,35 @@
+"use strict";
+
+var printWarning = function() {};
+
+if (process.env.NODE_ENV !== "production") {
+  printWarning = function(format, subs) {
+    var index = 0;
+    var message =
+      "Warning: " +
+      (subs.length > 0
+        ? format.replace(/%s/g, function() {
+            return subs[index++];
+          })
+        : format);
+
+    if (typeof console !== "undefined") {
+      console.error(message);
+    }
+
+    try {
+      // --- Welcome to debugging React Router ---
+      // This error was thrown as a convenience so that you can use the
+      // stack trace to find the callsite that triggered this warning.
+      throw new Error(message);
+    } catch (e) {}
+  };
+}
+
+module.exports = function(member) {
+  printWarning(
+    'Please use `require("react-router-config").%s` instead of `require("react-router-config/%s")`. ' +
+      "Support for the latter will be removed in the next major release.",
+    [member, member]
+  );
+};
diff --git a/packages/react-router-dom/.gitignore b/packages/react-router-dom/.gitignore
index e1111e04b..4670323f6 100644
--- a/packages/react-router-dom/.gitignore
+++ b/packages/react-router-dom/.gitignore
@@ -1,4 +1,3 @@
-es/
+cjs/
+esm/
 umd/
-/*.js
-!/rollup.config.js
diff --git a/packages/react-router-dom/BrowserRouter.js b/packages/react-router-dom/BrowserRouter.js
new file mode 100644
index 000000000..841485c1c
--- /dev/null
+++ b/packages/react-router-dom/BrowserRouter.js
@@ -0,0 +1,3 @@
+"use strict";
+require("./warnAboutDeprecatedCJSRequire")("BrowserRouter");
+module.exports = require("./index.js").BrowserRouter;
diff --git a/packages/react-router-dom/HashRouter.js b/packages/react-router-dom/HashRouter.js
new file mode 100644
index 000000000..41a190751
--- /dev/null
+++ b/packages/react-router-dom/HashRouter.js
@@ -0,0 +1,3 @@
+"use strict";
+require("./warnAboutDeprecatedCJSRequire")("HashRouter");
+module.exports = require("./index.js").HashRouter;
diff --git a/packages/react-router-dom/Link.js b/packages/react-router-dom/Link.js
new file mode 100644
index 000000000..67cd635b6
--- /dev/null
+++ b/packages/react-router-dom/Link.js
@@ -0,0 +1,3 @@
+"use strict";
+require("./warnAboutDeprecatedCJSRequire")("Link");
+module.exports = require("./index.js").Link;
diff --git a/packages/react-router-dom/MemoryRouter.js b/packages/react-router-dom/MemoryRouter.js
new file mode 100644
index 000000000..79b74bbd2
--- /dev/null
+++ b/packages/react-router-dom/MemoryRouter.js
@@ -0,0 +1,3 @@
+"use strict";
+require("./warnAboutDeprecatedCJSRequire")("MemoryRouter");
+module.exports = require("./index.js").MemoryRouter;
diff --git a/packages/react-router-dom/NavLink.js b/packages/react-router-dom/NavLink.js
new file mode 100644
index 000000000..eeae44721
--- /dev/null
+++ b/packages/react-router-dom/NavLink.js
@@ -0,0 +1,3 @@
+"use strict";
+require("./warnAboutDeprecatedCJSRequire")("NavLink");
+module.exports = require("./index.js").NavLink;
diff --git a/packages/react-router-dom/Prompt.js b/packages/react-router-dom/Prompt.js
new file mode 100644
index 000000000..20f629b41
--- /dev/null
+++ b/packages/react-router-dom/Prompt.js
@@ -0,0 +1,3 @@
+"use strict";
+require("./warnAboutDeprecatedCJSRequire")("Prompt");
+module.exports = require("./index.js").Prompt;
diff --git a/packages/react-router-dom/Redirect.js b/packages/react-router-dom/Redirect.js
new file mode 100644
index 000000000..6c763abc6
--- /dev/null
+++ b/packages/react-router-dom/Redirect.js
@@ -0,0 +1,3 @@
+"use strict";
+require("./warnAboutDeprecatedCJSRequire")("Redirect");
+module.exports = require("./index.js").Redirect;
diff --git a/packages/react-router-dom/Route.js b/packages/react-router-dom/Route.js
new file mode 100644
index 000000000..0d3b1f591
--- /dev/null
+++ b/packages/react-router-dom/Route.js
@@ -0,0 +1,3 @@
+"use strict";
+require("./warnAboutDeprecatedCJSRequire")("Route");
+module.exports = require("./index.js").Route;
diff --git a/packages/react-router-dom/Router.js b/packages/react-router-dom/Router.js
new file mode 100644
index 000000000..ca27b72dd
--- /dev/null
+++ b/packages/react-router-dom/Router.js
@@ -0,0 +1,3 @@
+"use strict";
+require("./warnAboutDeprecatedCJSRequire")("Router");
+module.exports = require("./index.js").Router;
diff --git a/packages/react-router-dom/StaticRouter.js b/packages/react-router-dom/StaticRouter.js
new file mode 100644
index 000000000..6bc351343
--- /dev/null
+++ b/packages/react-router-dom/StaticRouter.js
@@ -0,0 +1,3 @@
+"use strict";
+require("./warnAboutDeprecatedCJSRequire")("StaticRouter");
+module.exports = require("./index.js").StaticRouter;
diff --git a/packages/react-router-dom/Switch.js b/packages/react-router-dom/Switch.js
new file mode 100644
index 000000000..a4b38eb2c
--- /dev/null
+++ b/packages/react-router-dom/Switch.js
@@ -0,0 +1,3 @@
+"use strict";
+require("./warnAboutDeprecatedCJSRequire")("Switch");
+module.exports = require("./index.js").Switch;
diff --git a/packages/react-router-dom/es/BrowserRouter.js b/packages/react-router-dom/es/BrowserRouter.js
new file mode 100644
index 000000000..4cd90dad2
--- /dev/null
+++ b/packages/react-router-dom/es/BrowserRouter.js
@@ -0,0 +1,7 @@
+"use strict";
+
+import warnAboutDeprecatedESMImport from "./warnAboutDeprecatedESMImport.js";
+warnAboutDeprecatedESMImport("BrowserRouter");
+
+import { BrowserRouter } from "../esm/react-router-dom.js";
+export default BrowserRouter;
diff --git a/packages/react-router-dom/es/HashRouter.js b/packages/react-router-dom/es/HashRouter.js
new file mode 100644
index 000000000..4256eb525
--- /dev/null
+++ b/packages/react-router-dom/es/HashRouter.js
@@ -0,0 +1,7 @@
+"use strict";
+
+import warnAboutDeprecatedESMImport from "./warnAboutDeprecatedESMImport.js";
+warnAboutDeprecatedESMImport("HashRouter");
+
+import { HashRouter } from "../esm/react-router-dom.js";
+export default HashRouter;
diff --git a/packages/react-router-dom/es/Link.js b/packages/react-router-dom/es/Link.js
new file mode 100644
index 000000000..1c25fe4b8
--- /dev/null
+++ b/packages/react-router-dom/es/Link.js
@@ -0,0 +1,7 @@
+"use strict";
+
+import warnAboutDeprecatedESMImport from "./warnAboutDeprecatedESMImport.js";
+warnAboutDeprecatedESMImport("Link");
+
+import { Link } from "../esm/react-router-dom.js";
+export default Link;
diff --git a/packages/react-router-dom/es/MemoryRouter.js b/packages/react-router-dom/es/MemoryRouter.js
new file mode 100644
index 000000000..b2b7ee31e
--- /dev/null
+++ b/packages/react-router-dom/es/MemoryRouter.js
@@ -0,0 +1,7 @@
+"use strict";
+
+import warnAboutDeprecatedESMImport from "./warnAboutDeprecatedESMImport.js";
+warnAboutDeprecatedESMImport("MemoryRouter");
+
+import { MemoryRouter } from "../esm/react-router-dom.js";
+export default MemoryRouter;
diff --git a/packages/react-router-dom/es/NavLink.js b/packages/react-router-dom/es/NavLink.js
new file mode 100644
index 000000000..25dba990d
--- /dev/null
+++ b/packages/react-router-dom/es/NavLink.js
@@ -0,0 +1,7 @@
+"use strict";
+
+import warnAboutDeprecatedESMImport from "./warnAboutDeprecatedESMImport.js";
+warnAboutDeprecatedESMImport("NavLink");
+
+import { NavLink } from "../esm/react-router-dom.js";
+export default NavLink;
diff --git a/packages/react-router-dom/es/Prompt.js b/packages/react-router-dom/es/Prompt.js
new file mode 100644
index 000000000..2d7ca02df
--- /dev/null
+++ b/packages/react-router-dom/es/Prompt.js
@@ -0,0 +1,7 @@
+"use strict";
+
+import warnAboutDeprecatedESMImport from "./warnAboutDeprecatedESMImport.js";
+warnAboutDeprecatedESMImport("Prompt");
+
+import { Prompt } from "../esm/react-router-dom.js";
+export default Prompt;
diff --git a/packages/react-router-dom/es/Redirect.js b/packages/react-router-dom/es/Redirect.js
new file mode 100644
index 000000000..cb011955e
--- /dev/null
+++ b/packages/react-router-dom/es/Redirect.js
@@ -0,0 +1,7 @@
+"use strict";
+
+import warnAboutDeprecatedESMImport from "./warnAboutDeprecatedESMImport.js";
+warnAboutDeprecatedESMImport("Redirect");
+
+import { Redirect } from "../esm/react-router-dom.js";
+export default Redirect;
diff --git a/packages/react-router-dom/es/Route.js b/packages/react-router-dom/es/Route.js
new file mode 100644
index 000000000..87ddc19e7
--- /dev/null
+++ b/packages/react-router-dom/es/Route.js
@@ -0,0 +1,7 @@
+"use strict";
+
+import warnAboutDeprecatedESMImport from "./warnAboutDeprecatedESMImport.js";
+warnAboutDeprecatedESMImport("Route");
+
+import { Route } from "../esm/react-router-dom.js";
+export default Route;
diff --git a/packages/react-router-dom/es/Router.js b/packages/react-router-dom/es/Router.js
new file mode 100644
index 000000000..8395047de
--- /dev/null
+++ b/packages/react-router-dom/es/Router.js
@@ -0,0 +1,7 @@
+"use strict";
+
+import warnAboutDeprecatedESMImport from "./warnAboutDeprecatedESMImport.js";
+warnAboutDeprecatedESMImport("Router");
+
+import { Router } from "../esm/react-router-dom.js";
+export default Router;
diff --git a/packages/react-router-dom/es/StaticRouter.js b/packages/react-router-dom/es/StaticRouter.js
new file mode 100644
index 000000000..8a7331588
--- /dev/null
+++ b/packages/react-router-dom/es/StaticRouter.js
@@ -0,0 +1,7 @@
+"use strict";
+
+import warnAboutDeprecatedESMImport from "./warnAboutDeprecatedESMImport.js";
+warnAboutDeprecatedESMImport("StaticRouter");
+
+import { StaticRouter } from "../esm/react-router-dom.js";
+export default StaticRouter;
diff --git a/packages/react-router-dom/es/Switch.js b/packages/react-router-dom/es/Switch.js
new file mode 100644
index 000000000..795095c83
--- /dev/null
+++ b/packages/react-router-dom/es/Switch.js
@@ -0,0 +1,7 @@
+"use strict";
+
+import warnAboutDeprecatedESMImport from "./warnAboutDeprecatedESMImport.js";
+warnAboutDeprecatedESMImport("Switch");
+
+import { Switch } from "../esm/react-router-dom.js";
+export default Switch;
diff --git a/packages/react-router-dom/es/generatePath.js b/packages/react-router-dom/es/generatePath.js
new file mode 100644
index 000000000..70e4fc67d
--- /dev/null
+++ b/packages/react-router-dom/es/generatePath.js
@@ -0,0 +1,7 @@
+"use strict";
+
+import warnAboutDeprecatedESMImport from "./warnAboutDeprecatedESMImport.js";
+warnAboutDeprecatedESMImport("generatePath");
+
+import { generatePath } from "../esm/react-router-dom.js";
+export default generatePath;
diff --git a/packages/react-router-dom/es/matchPath.js b/packages/react-router-dom/es/matchPath.js
new file mode 100644
index 000000000..df00a933e
--- /dev/null
+++ b/packages/react-router-dom/es/matchPath.js
@@ -0,0 +1,7 @@
+"use strict";
+
+import warnAboutDeprecatedESMImport from "./warnAboutDeprecatedESMImport.js";
+warnAboutDeprecatedESMImport("matchPath");
+
+import { matchPath } from "../esm/react-router-dom.js";
+export default matchPath;
diff --git a/packages/react-router-dom/es/warnAboutDeprecatedESMImport.js b/packages/react-router-dom/es/warnAboutDeprecatedESMImport.js
new file mode 100644
index 000000000..30148c866
--- /dev/null
+++ b/packages/react-router-dom/es/warnAboutDeprecatedESMImport.js
@@ -0,0 +1,35 @@
+"use strict";
+
+var printWarning = function() {};
+
+if (process.env.NODE_ENV !== "production") {
+  printWarning = function(format, subs) {
+    var index = 0;
+    var message =
+      "Warning: " +
+      (subs.length > 0
+        ? format.replace(/%s/g, function() {
+            return subs[index++];
+          })
+        : format);
+
+    if (typeof console !== "undefined") {
+      console.error(message);
+    }
+
+    try {
+      // --- Welcome to debugging React Router ---
+      // This error was thrown as a convenience so that you can use the
+      // stack trace to find the callsite that triggered this warning.
+      throw new Error(message);
+    } catch (e) {}
+  };
+}
+
+export default function(member) {
+  printWarning(
+    'Please use `import { %s } from "react-router-dom"` instead of `import %s from "react-router-dom/es/%s"`. ' +
+      "Support for the latter will be removed in the next major release.",
+    [member, member]
+  );
+}
diff --git a/packages/react-router-dom/es/withRouter.js b/packages/react-router-dom/es/withRouter.js
new file mode 100644
index 000000000..0a4e4f815
--- /dev/null
+++ b/packages/react-router-dom/es/withRouter.js
@@ -0,0 +1,7 @@
+"use strict";
+
+import warnAboutDeprecatedESMImport from "./warnAboutDeprecatedESMImport.js";
+warnAboutDeprecatedESMImport("withRouter");
+
+import { withRouter } from "../esm/react-router-dom.js";
+export default withRouter;
diff --git a/packages/react-router-dom/generatePath.js b/packages/react-router-dom/generatePath.js
new file mode 100644
index 000000000..d487dd2a8
--- /dev/null
+++ b/packages/react-router-dom/generatePath.js
@@ -0,0 +1,3 @@
+"use strict";
+require("./warnAboutDeprecatedCJSRequire")("generatePath");
+module.exports = require("./index.js").generatePath;
diff --git a/packages/react-router-dom/index.js b/packages/react-router-dom/index.js
new file mode 100644
index 000000000..92172e2ae
--- /dev/null
+++ b/packages/react-router-dom/index.js
@@ -0,0 +1,7 @@
+"use strict";
+
+if (process.env.NODE_ENV === "production") {
+  module.exports = require("./cjs/react-router-dom.min.js");
+} else {
+  module.exports = require("./cjs/react-router-dom.js");
+}
diff --git a/packages/react-router-dom/matchPath.js b/packages/react-router-dom/matchPath.js
new file mode 100644
index 000000000..6d1fe336a
--- /dev/null
+++ b/packages/react-router-dom/matchPath.js
@@ -0,0 +1,3 @@
+"use strict";
+require("./warnAboutDeprecatedCJSRequire")("matchPath");
+module.exports = require("./index.js").matchPath;
diff --git a/packages/react-router-dom/modules/.babelrc b/packages/react-router-dom/modules/.babelrc
index 265190995..1087156cc 100644
--- a/packages/react-router-dom/modules/.babelrc
+++ b/packages/react-router-dom/modules/.babelrc
@@ -1,54 +1,19 @@
 {
+  "presets": [["env", { "loose": true, "modules": false }], "react"],
+  "plugins": [
+    "dev-expression",
+    "transform-class-properties",
+    ["transform-object-rest-spread", { "useBuiltIns": true }],
+    "transform-export-extensions"
+  ],
   "env": {
-    "build-cjs": {
-      "presets": [["env", { "loose": true }], "react"],
-      "plugins": [
-        "dev-expression",
-        "transform-class-properties",
-        ["transform-object-rest-spread", { "useBuiltIns": true }],
-        "transform-export-default",
-        [
-          "transform-imports",
-          {
-            "react-router": {
-              "transform": "react-router/${member}"
-            }
-          }
-        ]
-      ]
-    },
-    "build-esm": {
-      "presets": [["env", { "loose": true, "modules": false }], "react"],
-      "plugins": [
-        "dev-expression",
-        "transform-class-properties",
-        ["transform-object-rest-spread", { "useBuiltIns": true }],
-        "transform-export-default",
-        [
-          "transform-imports",
-          {
-            "react-router": {
-              "transform": "react-router/es/${member}"
-            }
-          }
-        ]
-      ]
-    },
     "test": {
       "presets": [["env", { "loose": true }], "react"],
       "plugins": [
         "dev-expression",
         "transform-class-properties",
         ["transform-object-rest-spread", { "useBuiltIns": true }],
-        "transform-export-default",
-        [
-          "transform-imports",
-          {
-            "react-router": {
-              "transform": "react-router/modules/${member}"
-            }
-          }
-        ]
+        "transform-export-extensions"
       ]
     }
   }
diff --git a/packages/react-router-dom/modules/BrowserRouter.js b/packages/react-router-dom/modules/BrowserRouter.js
index aa299e809..4c7a12456 100644
--- a/packages/react-router-dom/modules/BrowserRouter.js
+++ b/packages/react-router-dom/modules/BrowserRouter.js
@@ -1,10 +1,9 @@
 import React from "react";
-import PropTypes from "prop-types";
+import { Router } from "react-router";
 import { createBrowserHistory as createHistory } from "history";
+import PropTypes from "prop-types";
 import warning from "warning";
 
-import Router from "./Router";
-
 /**
  * The public API for a <Router> that uses HTML5 history.
  */
diff --git a/packages/react-router-dom/modules/HashRouter.js b/packages/react-router-dom/modules/HashRouter.js
index 86b876b83..70ab901bb 100644
--- a/packages/react-router-dom/modules/HashRouter.js
+++ b/packages/react-router-dom/modules/HashRouter.js
@@ -1,10 +1,9 @@
 import React from "react";
-import PropTypes from "prop-types";
+import { Router } from "react-router";
 import { createHashHistory as createHistory } from "history";
+import PropTypes from "prop-types";
 import warning from "warning";
 
-import Router from "./Router";
-
 /**
  * The public API for a <Router> that uses window.location.hash.
  */
diff --git a/packages/react-router-dom/modules/Link.js b/packages/react-router-dom/modules/Link.js
index 38a4cc2d2..e172cf53a 100644
--- a/packages/react-router-dom/modules/Link.js
+++ b/packages/react-router-dom/modules/Link.js
@@ -1,10 +1,9 @@
 import React from "react";
-import PropTypes from "prop-types";
+import { __RouterContext as RouterContext } from "react-router";
 import { createLocation } from "history";
+import PropTypes from "prop-types";
 import invariant from "invariant";
 
-import RouterContext from "./RouterContext";
-
 function isModifiedEvent(event) {
   return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);
 }
diff --git a/packages/react-router-dom/modules/MemoryRouter.js b/packages/react-router-dom/modules/MemoryRouter.js
deleted file mode 100644
index 1a1983f2f..000000000
--- a/packages/react-router-dom/modules/MemoryRouter.js
+++ /dev/null
@@ -1,3 +0,0 @@
-// Written in this round about way for babel-transform-imports
-import { MemoryRouter } from "react-router";
-export default MemoryRouter;
diff --git a/packages/react-router-dom/modules/NavLink.js b/packages/react-router-dom/modules/NavLink.js
index 236b423a6..2b68d6e8e 100644
--- a/packages/react-router-dom/modules/NavLink.js
+++ b/packages/react-router-dom/modules/NavLink.js
@@ -1,7 +1,7 @@
 import React from "react";
+import { Route } from "react-router";
 import PropTypes from "prop-types";
 
-import Route from "./Route";
 import Link from "./Link";
 
 function joinClassnames(...classnames) {
diff --git a/packages/react-router-dom/modules/Prompt.js b/packages/react-router-dom/modules/Prompt.js
deleted file mode 100644
index a4a892973..000000000
--- a/packages/react-router-dom/modules/Prompt.js
+++ /dev/null
@@ -1,3 +0,0 @@
-// Written in this round about way for babel-transform-imports
-import { Prompt } from "react-router";
-export default Prompt;
diff --git a/packages/react-router-dom/modules/Redirect.js b/packages/react-router-dom/modules/Redirect.js
deleted file mode 100644
index 47d5b7e6c..000000000
--- a/packages/react-router-dom/modules/Redirect.js
+++ /dev/null
@@ -1,3 +0,0 @@
-// Written in this round about way for babel-transform-imports
-import { Redirect } from "react-router";
-export default Redirect;
diff --git a/packages/react-router-dom/modules/Route.js b/packages/react-router-dom/modules/Route.js
deleted file mode 100644
index e4f048300..000000000
--- a/packages/react-router-dom/modules/Route.js
+++ /dev/null
@@ -1,3 +0,0 @@
-// Written in this round about way for babel-transform-imports
-import { Route } from "react-router";
-export default Route;
diff --git a/packages/react-router-dom/modules/Router.js b/packages/react-router-dom/modules/Router.js
deleted file mode 100644
index 8c489f2b3..000000000
--- a/packages/react-router-dom/modules/Router.js
+++ /dev/null
@@ -1,3 +0,0 @@
-// Written in this round about way for babel-transform-imports
-import { Router } from "react-router";
-export default Router;
diff --git a/packages/react-router-dom/modules/RouterContext.js b/packages/react-router-dom/modules/RouterContext.js
deleted file mode 100644
index 4d1a7aba9..000000000
--- a/packages/react-router-dom/modules/RouterContext.js
+++ /dev/null
@@ -1,3 +0,0 @@
-// Written in this round about way for babel-transform-imports
-import { RouterContext } from "react-router";
-export default RouterContext;
diff --git a/packages/react-router-dom/modules/StaticRouter.js b/packages/react-router-dom/modules/StaticRouter.js
deleted file mode 100644
index c5cfe59ad..000000000
--- a/packages/react-router-dom/modules/StaticRouter.js
+++ /dev/null
@@ -1,3 +0,0 @@
-// Written in this round about way for babel-transform-imports
-import { StaticRouter } from "react-router";
-export default StaticRouter;
diff --git a/packages/react-router-dom/modules/Switch.js b/packages/react-router-dom/modules/Switch.js
deleted file mode 100644
index 8947bd6f3..000000000
--- a/packages/react-router-dom/modules/Switch.js
+++ /dev/null
@@ -1,3 +0,0 @@
-// Written in this round about way for babel-transform-imports
-import { Switch } from "react-router";
-export default Switch;
diff --git a/packages/react-router-dom/modules/__tests__/BrowserRouter-context-test.js b/packages/react-router-dom/modules/__tests__/BrowserRouter-context-test.js
index 5ccbdafcd..d8a3a6302 100644
--- a/packages/react-router-dom/modules/__tests__/BrowserRouter-context-test.js
+++ b/packages/react-router-dom/modules/__tests__/BrowserRouter-context-test.js
@@ -1,9 +1,9 @@
 import React from "react";
 import ReactDOM from "react-dom";
+import { __RouterContext as RouterContext } from "react-router";
 import PropTypes from "prop-types";
 
 import BrowserRouter from "../BrowserRouter";
-import RouterContext from "../RouterContext";
 
 describe("A <BrowserRouter>", () => {
   const node = document.createElement("div");
diff --git a/packages/react-router-dom/modules/__tests__/HashRouter-context-test.js b/packages/react-router-dom/modules/__tests__/HashRouter-context-test.js
index 84c4de0b5..c7fb3a16f 100644
--- a/packages/react-router-dom/modules/__tests__/HashRouter-context-test.js
+++ b/packages/react-router-dom/modules/__tests__/HashRouter-context-test.js
@@ -1,9 +1,9 @@
 import React from "react";
 import ReactDOM from "react-dom";
+import { __RouterContext as RouterContext } from "react-router";
 import PropTypes from "prop-types";
 
 import HashRouter from "../HashRouter";
-import RouterContext from "../RouterContext";
 
 describe("A <HashRouter>", () => {
   const node = document.createElement("div");
diff --git a/packages/react-router-dom/modules/__tests__/NavLink-test.js b/packages/react-router-dom/modules/__tests__/NavLink-test.js
index bedbfcf2f..68372f1e9 100644
--- a/packages/react-router-dom/modules/__tests__/NavLink-test.js
+++ b/packages/react-router-dom/modules/__tests__/NavLink-test.js
@@ -1,9 +1,8 @@
 import React from "react";
 import ReactDOM from "react-dom";
-import { MemoryRouter } from "react-router";
+import { MemoryRouter, withRouter } from "react-router";
 
 import NavLink from "../NavLink";
-import withRouter from "../withRouter";
 
 describe("A <NavLink>", () => {
   const node = document.createElement("div");
diff --git a/packages/react-router-dom/modules/generatePath.js b/packages/react-router-dom/modules/generatePath.js
deleted file mode 100644
index b4b3ee990..000000000
--- a/packages/react-router-dom/modules/generatePath.js
+++ /dev/null
@@ -1,3 +0,0 @@
-// Written in this round about way for babel-transform-imports
-import { generatePath } from "react-router";
-export default generatePath;
diff --git a/packages/react-router-dom/modules/index.js b/packages/react-router-dom/modules/index.js
index 789599ad0..198cfb4eb 100644
--- a/packages/react-router-dom/modules/index.js
+++ b/packages/react-router-dom/modules/index.js
@@ -1,14 +1,6 @@
+export * from "react-router";
+
 export BrowserRouter from "./BrowserRouter";
 export HashRouter from "./HashRouter";
 export Link from "./Link";
-export MemoryRouter from "./MemoryRouter";
 export NavLink from "./NavLink";
-export Prompt from "./Prompt";
-export Redirect from "./Redirect";
-export Route from "./Route";
-export Router from "./Router";
-export StaticRouter from "./StaticRouter";
-export Switch from "./Switch";
-export generatePath from "./generatePath";
-export matchPath from "./matchPath";
-export withRouter from "./withRouter";
diff --git a/packages/react-router-dom/modules/matchPath.js b/packages/react-router-dom/modules/matchPath.js
deleted file mode 100644
index 854585ea8..000000000
--- a/packages/react-router-dom/modules/matchPath.js
+++ /dev/null
@@ -1,3 +0,0 @@
-// Written in this round about way for babel-transform-imports
-import { matchPath } from "react-router";
-export default matchPath;
diff --git a/packages/react-router-dom/modules/withRouter.js b/packages/react-router-dom/modules/withRouter.js
deleted file mode 100644
index 5cf0b2f92..000000000
--- a/packages/react-router-dom/modules/withRouter.js
+++ /dev/null
@@ -1,3 +0,0 @@
-// Written in this round about way for babel-transform-imports
-import { withRouter } from "react-router";
-export default withRouter;
diff --git a/packages/react-router-dom/package-lock.json b/packages/react-router-dom/package-lock.json
index 9745e95bd..44518df2d 100644
--- a/packages/react-router-dom/package-lock.json
+++ b/packages/react-router-dom/package-lock.json
@@ -799,9 +799,9 @@
 			"dev": true
 		},
 		"babel-plugin-syntax-export-extensions": {
-			"version": "7.0.0-alpha.20",
-			"resolved": "https://registry.npmjs.org/babel-plugin-syntax-export-extensions/-/babel-plugin-syntax-export-extensions-7.0.0-alpha.20.tgz",
-			"integrity": "sha512-HsPXvLpv0tw34GSQopFE3P299oy/fuEh8n33MLErZi/j7+5LRnD1HzqDf2QnN2SCpfj+EDf9KLSjm8Y7jqbyWQ==",
+			"version": "6.13.0",
+			"resolved": "http://registry.npmjs.org/babel-plugin-syntax-export-extensions/-/babel-plugin-syntax-export-extensions-6.13.0.tgz",
+			"integrity": "sha1-cKFITw+QiaToStRLrDU8lbmxJyE=",
 			"dev": true
 		},
 		"babel-plugin-syntax-flow": {
@@ -1096,13 +1096,14 @@
 				"babel-runtime": "^6.22.0"
 			}
 		},
-		"babel-plugin-transform-export-default": {
-			"version": "7.0.0-alpha.20",
-			"resolved": "https://registry.npmjs.org/babel-plugin-transform-export-default/-/babel-plugin-transform-export-default-7.0.0-alpha.20.tgz",
-			"integrity": "sha512-DR21YY/Lq4Qm+ULZdTLxuSY8woMvW23gejUVz88Lb+8jU3Mf2iuH05IG2+3yqjpbQEhrV/Kgp9GLoa7XLCqDrA==",
+		"babel-plugin-transform-export-extensions": {
+			"version": "6.22.0",
+			"resolved": "https://registry.npmjs.org/babel-plugin-transform-export-extensions/-/babel-plugin-transform-export-extensions-6.22.0.tgz",
+			"integrity": "sha1-U3OLR+deghhYnuqUbLvTkQm75lM=",
 			"dev": true,
 			"requires": {
-				"babel-plugin-syntax-export-extensions": "7.0.0-alpha.20"
+				"babel-plugin-syntax-export-extensions": "^6.8.0",
+				"babel-runtime": "^6.22.0"
 			}
 		},
 		"babel-plugin-transform-flow-strip-types": {
@@ -1115,20 +1116,6 @@
 				"babel-runtime": "^6.22.0"
 			}
 		},
-		"babel-plugin-transform-imports": {
-			"version": "1.5.1",
-			"resolved": "https://registry.npmjs.org/babel-plugin-transform-imports/-/babel-plugin-transform-imports-1.5.1.tgz",
-			"integrity": "sha512-Jkb0tjqye8kjOD7GdcKJTGB3dC9fruQhwRFZCeYS0sZO2otyjG6SohKR8nZiSm/OvhY+Ny2ktzVE59XKgIqskA==",
-			"dev": true,
-			"requires": {
-				"babel-types": "^6.6.0",
-				"is-valid-path": "^0.1.1",
-				"lodash.camelcase": "^4.3.0",
-				"lodash.findkey": "^4.6.0",
-				"lodash.kebabcase": "^4.1.1",
-				"lodash.snakecase": "^4.1.1"
-			}
-		},
 		"babel-plugin-transform-object-rest-spread": {
 			"version": "6.26.0",
 			"resolved": "https://registry.npmjs.org/babel-plugin-transform-object-rest-spread/-/babel-plugin-transform-object-rest-spread-6.26.0.tgz",
@@ -3829,15 +3816,6 @@
 				"is-extglob": "^1.0.0"
 			}
 		},
-		"is-invalid-path": {
-			"version": "0.1.0",
-			"resolved": "https://registry.npmjs.org/is-invalid-path/-/is-invalid-path-0.1.0.tgz",
-			"integrity": "sha1-MHqFWzzxqTi0TqcNLGEQYFNxTzQ=",
-			"dev": true,
-			"requires": {
-				"is-glob": "^2.0.0"
-			}
-		},
 		"is-module": {
 			"version": "1.0.0",
 			"resolved": "https://registry.npmjs.org/is-module/-/is-module-1.0.0.tgz",
@@ -3954,15 +3932,6 @@
 			"integrity": "sha1-Sw2hRCEE0bM2NA6AeX6GXPOffXI=",
 			"dev": true
 		},
-		"is-valid-path": {
-			"version": "0.1.1",
-			"resolved": "https://registry.npmjs.org/is-valid-path/-/is-valid-path-0.1.1.tgz",
-			"integrity": "sha1-EQ+f90w39mPh7HkV60UfLbk6yd8=",
-			"dev": true,
-			"requires": {
-				"is-invalid-path": "^0.1.0"
-			}
-		},
 		"is-windows": {
 			"version": "1.0.2",
 			"resolved": "https://registry.npmjs.org/is-windows/-/is-windows-1.0.2.tgz",
@@ -5122,30 +5091,6 @@
 			"integrity": "sha512-cQKh8igo5QUhZ7lg38DYWAxMvjSAKG0A8wGSVimP07SIUEK2UO+arSRKbRZWtelMtN5V0Hkwh5ryOto/SshYIg==",
 			"dev": true
 		},
-		"lodash.camelcase": {
-			"version": "4.3.0",
-			"resolved": "https://registry.npmjs.org/lodash.camelcase/-/lodash.camelcase-4.3.0.tgz",
-			"integrity": "sha1-soqmKIorn8ZRA1x3EfZathkDMaY=",
-			"dev": true
-		},
-		"lodash.findkey": {
-			"version": "4.6.0",
-			"resolved": "https://registry.npmjs.org/lodash.findkey/-/lodash.findkey-4.6.0.tgz",
-			"integrity": "sha1-gwWOkDtRy7dZ0JzPVG3qPqOcRxg=",
-			"dev": true
-		},
-		"lodash.kebabcase": {
-			"version": "4.1.1",
-			"resolved": "https://registry.npmjs.org/lodash.kebabcase/-/lodash.kebabcase-4.1.1.tgz",
-			"integrity": "sha1-hImxyw0p/4gZXM7KRI/21swpXDY=",
-			"dev": true
-		},
-		"lodash.snakecase": {
-			"version": "4.1.1",
-			"resolved": "https://registry.npmjs.org/lodash.snakecase/-/lodash.snakecase-4.1.1.tgz",
-			"integrity": "sha1-OdcUo1NXFHg3rv1ktdy7Fr7Nj40=",
-			"dev": true
-		},
 		"lodash.sortby": {
 			"version": "4.7.0",
 			"resolved": "https://registry.npmjs.org/lodash.sortby/-/lodash.sortby-4.7.0.tgz",
@@ -6596,15 +6541,24 @@
 			}
 		},
 		"rollup": {
-			"version": "0.60.7",
-			"resolved": "https://registry.npmjs.org/rollup/-/rollup-0.60.7.tgz",
-			"integrity": "sha512-Uj5I1A2PnDgA79P+v1dsNs1IHVydNgeJdKWRfoEJJdNMmyx07TRYqUtPUINaZ/gDusncFy1SZsT3lJnBBI8CGw==",
+			"version": "0.66.6",
+			"resolved": "https://registry.npmjs.org/rollup/-/rollup-0.66.6.tgz",
+			"integrity": "sha512-J7/SWanrcb83vfIHqa8+aVVGzy457GcjA6GVZEnD0x2u4OnOd0Q1pCrEoNe8yLwM6z6LZP02zBT2uW0yh5TqOw==",
 			"dev": true,
 			"requires": {
 				"@types/estree": "0.0.39",
 				"@types/node": "*"
 			}
 		},
+		"rollup-plugin-alias": {
+			"version": "1.4.0",
+			"resolved": "https://registry.npmjs.org/rollup-plugin-alias/-/rollup-plugin-alias-1.4.0.tgz",
+			"integrity": "sha512-lB094zdi19FS+1bVarVp9kBN0Zk41PdTGoCk0z8xesKO7RGjOo18cp1hUzEqrOQ4bM9+KLD9nbnu/XUxQm9pbg==",
+			"dev": true,
+			"requires": {
+				"slash": "^1.0.0"
+			}
+		},
 		"rollup-plugin-babel": {
 			"version": "3.0.7",
 			"resolved": "https://registry.npmjs.org/rollup-plugin-babel/-/rollup-plugin-babel-3.0.7.tgz",
diff --git a/packages/react-router-dom/package.json b/packages/react-router-dom/package.json
index 2307bf3b5..56a82d060 100644
--- a/packages/react-router-dom/package.json
+++ b/packages/react-router-dom/package.json
@@ -18,10 +18,11 @@
     "Redirect.js",
     "Route.js",
     "Router.js",
-    "RouterContext.js",
     "StaticRouter.js",
     "Switch.js",
+    "cjs",
     "es",
+    "esm",
     "index.js",
     "generatePath.js",
     "matchPath.js",
@@ -29,7 +30,7 @@
     "umd"
   ],
   "main": "index.js",
-  "module": "es/index.js",
+  "module": "esm/index.js",
   "sideEffects": false,
   "scripts": {
     "build": "node ./scripts/build.js",
@@ -56,8 +57,7 @@
     "babel-plugin-dev-expression": "^0.2.1",
     "babel-plugin-external-helpers": "^6.22.0",
     "babel-plugin-transform-class-properties": "^6.24.1",
-    "babel-plugin-transform-export-default": "^7.0.0-alpha.20",
-    "babel-plugin-transform-imports": "^1.5.1",
+    "babel-plugin-transform-export-extensions": "^6.22.0",
     "babel-plugin-transform-object-rest-spread": "^6.26.0",
     "babel-preset-env": "^1.7.0",
     "babel-preset-react": "^6.5.0",
@@ -71,7 +71,8 @@
     "react": "^16.4.0",
     "react-addons-test-utils": "^15.6.2",
     "react-dom": "^16.4.0",
-    "rollup": "^0.60.0",
+    "rollup": "^0.66.6",
+    "rollup-plugin-alias": "^1.4.0",
     "rollup-plugin-babel": "^3.0.4",
     "rollup-plugin-commonjs": "^9.1.3",
     "rollup-plugin-node-resolve": "^3.3.0",
@@ -87,6 +88,9 @@
     "globals": {
       "__DEV__": true
     },
+    "moduleNameMapper": {
+      "react-router": "<rootDir>/../react-router/cjs/react-router.js"
+    },
     "setupFiles": [
       "raf/polyfill"
     ],
diff --git a/packages/react-router-dom/rollup.config.js b/packages/react-router-dom/rollup.config.js
index 55de3d431..e68b34a37 100644
--- a/packages/react-router-dom/rollup.config.js
+++ b/packages/react-router-dom/rollup.config.js
@@ -1,3 +1,4 @@
+import alias from "rollup-plugin-alias";
 import babel from "rollup-plugin-babel";
 import uglify from "rollup-plugin-uglify";
 import replace from "rollup-plugin-replace";
@@ -6,7 +7,6 @@ import resolve from "rollup-plugin-node-resolve";
 
 const config = {
   output: {
-    format: "umd",
     name: "ReactRouterDOM",
     globals: {
       react: "React"
@@ -14,13 +14,19 @@ const config = {
   },
   external: ["react"],
   plugins: [
+    alias({
+      "react-router":
+        process.env.NODE_ENV === "production"
+          ? "../react-router/esm/react-router.min.js"
+          : "../react-router/esm/react-router.js"
+    }),
     babel({
       exclude: "node_modules/**",
       plugins: ["external-helpers"]
     }),
     resolve(),
     commonjs({
-      include: /node_modules/
+      include: "node_modules/**"
     }),
     replace({
       "process.env.NODE_ENV": JSON.stringify(process.env.NODE_ENV)
diff --git a/packages/react-router-dom/scripts/build.js b/packages/react-router-dom/scripts/build.js
index e6e86fd13..188482c75 100644
--- a/packages/react-router-dom/scripts/build.js
+++ b/packages/react-router-dom/scripts/build.js
@@ -10,34 +10,27 @@ function exec(command, extraEnv) {
   });
 }
 
-console.log("Building CommonJS modules ...");
-console.log();
-
-exec("babel modules -d . --ignore __tests__", {
-  BABEL_ENV: "build-cjs"
+exec("rollup -c -i modules/index.js -o cjs/react-router-dom.js -f cjs", {
+  NODE_ENV: "development"
 });
 
-console.log();
-console.log("Building ES modules ...");
-console.log();
+exec("rollup -c -i modules/index.js -o cjs/react-router-dom.min.js -f cjs", {
+  NODE_ENV: "production"
+});
 
-exec("babel modules -d es --ignore __tests__", {
-  BABEL_ENV: "build-esm"
+exec("rollup -c -i modules/index.js -o esm/react-router-dom.js -f esm", {
+  NODE_ENV: "development"
 });
 
-console.log();
-console.log("Building react-router-dom.js ...");
+exec("rollup -c -i modules/index.js -o esm/react-router-dom.min.js -f esm", {
+  NODE_ENV: "production"
+});
 
-exec("rollup -c -i modules/index.js -o umd/react-router-dom.js", {
-  BABEL_ENV: "build-esm",
+exec("rollup -c -i modules/index.js -o umd/react-router-dom.js -f umd", {
   NODE_ENV: "development"
 });
 
-console.log();
-console.log("Building react-router-dom.min.js ...");
-
-exec("rollup -c -i modules/index.js -o umd/react-router-dom.min.js", {
-  BABEL_ENV: "build-esm",
+exec("rollup -c -i modules/index.js -o umd/react-router-dom.min.js -f umd", {
   NODE_ENV: "production"
 });
 
diff --git a/packages/react-router-dom/warnAboutDeprecatedCJSRequire.js b/packages/react-router-dom/warnAboutDeprecatedCJSRequire.js
new file mode 100644
index 000000000..5a96709dc
--- /dev/null
+++ b/packages/react-router-dom/warnAboutDeprecatedCJSRequire.js
@@ -0,0 +1,35 @@
+"use strict";
+
+var printWarning = function() {};
+
+if (process.env.NODE_ENV !== "production") {
+  printWarning = function(format, subs) {
+    var index = 0;
+    var message =
+      "Warning: " +
+      (subs.length > 0
+        ? format.replace(/%s/g, function() {
+            return subs[index++];
+          })
+        : format);
+
+    if (typeof console !== "undefined") {
+      console.error(message);
+    }
+
+    try {
+      // --- Welcome to debugging React Router ---
+      // This error was thrown as a convenience so that you can use the
+      // stack trace to find the callsite that triggered this warning.
+      throw new Error(message);
+    } catch (e) {}
+  };
+}
+
+module.exports = function(member) {
+  printWarning(
+    'Please use `require("react-router-dom").%s` instead of `require("react-router-dom/%s")`. ' +
+      "Support for the latter will be removed in the next major release.",
+    [member, member]
+  );
+};
diff --git a/packages/react-router-dom/withRouter.js b/packages/react-router-dom/withRouter.js
new file mode 100644
index 000000000..214676a48
--- /dev/null
+++ b/packages/react-router-dom/withRouter.js
@@ -0,0 +1,3 @@
+"use strict";
+require("./warnAboutDeprecatedCJSRequire")("withRouter");
+module.exports = require("./index.js").withRouter;
diff --git a/packages/react-router-native/NativeRouter.js b/packages/react-router-native/NativeRouter.js
index 927d20cd9..4f9fb674f 100644
--- a/packages/react-router-native/NativeRouter.js
+++ b/packages/react-router-native/NativeRouter.js
@@ -1,7 +1,7 @@
 import React from "react";
-import PropTypes from "prop-types";
-import MemoryRouter from "react-router/MemoryRouter";
+import { MemoryRouter } from "react-router";
 import { Alert } from "react-native";
+import PropTypes from "prop-types";
 
 /**
  * The public API for a <Router> designed for React Native. Gets
diff --git a/packages/react-router-native/experimental/StackRoute.js b/packages/react-router-native/experimental/StackRoute.js
index eb7138be1..fb134e425 100644
--- a/packages/react-router-native/experimental/StackRoute.js
+++ b/packages/react-router-native/experimental/StackRoute.js
@@ -5,9 +5,8 @@
 // Any help cleaning it up would be appreciated.
 // <3 <3 <3 - Ryan
 
-import React, { Component } from 'react'
-import PropTypes from 'prop-types'
-
+import React, { Component } from "react";
+import { Route, Redirect } from "react-router";
 import {
   Text,
   View,
@@ -17,27 +16,24 @@ import {
   Dimensions,
   Animated,
   PanResponder
-} from 'react-native'
-
-import Route from 'react-router/Route'
-import Redirect from 'react-router/Redirect'
-import Link from '../Link'
+} from "react-native";
+import PropTypes from "prop-types";
 
-const { any, node } = PropTypes
+import Link from "../Link";
 
 class StackContainer extends Component {
   static contextTypes = {
-    stack: any
-  }
+    stack: PropTypes.any
+  };
 
   static childContextTypes = {
-    stack: any
-  }
+    stack: PropTypes.any
+  };
 
   initialLocation = {
     ...this.props.location,
     pathname: this.props.match.url
-  }
+  };
 
   getChildContext() {
     return {
@@ -45,125 +41,130 @@ class StackContainer extends Component {
         ...this.context.stack,
         parentLocation: this.initialLocation
       }
-    }
+    };
   }
 
   componentWillMount() {
-    this.pushToStack('down')
+    this.pushToStack("down");
   }
 
   componentDidUpdate(prevProps) {
-    const becameActive = (
-      this.props.match.isExact === true &&
-      prevProps.match.isExact === false
-    )
+    const becameActive =
+      this.props.match.isExact === true && prevProps.match.isExact === false;
 
     if (becameActive) {
-      this.pushToStack('up')
+      this.pushToStack("up");
     }
   }
 
   pushToStack(direction) {
-    const { renderTitle, renderContent, renderChild, ...rest } = this.props
-    const { match } = rest
+    const { renderTitle, renderContent, renderChild, ...rest } = this.props;
+    const { match } = rest;
     if (match && match.isExact) {
       this.context.stack.push({
         title: renderTitle(rest),
         content: renderContent(rest),
         parentLocation: this.context.stack.parentLocation,
         direction
-      })
+      });
     }
   }
 
   render() {
-    const { renderTitle, renderContent, renderChild, ...rest } = this.props
-    const { match } = rest
-    return match.isExact ? null : renderChild ? renderChild(rest) : null
+    const { renderTitle, renderContent, renderChild, ...rest } = this.props;
+    const { match } = rest;
+    return match.isExact ? null : renderChild ? renderChild(rest) : null;
   }
 }
 
-const ANIMATION_DURATION = 300
-const CANCEL_PAN_MOVE_THRESHOLD = 0.5
-const CANCEL_PAN_VX_THRESHOLD = 0.5
-const PAN_START_MARGIN = 30
-const PARENT_TRAVEL_DISTANCE = 100
-const PARENT_FINAL_OPACITY = 0.25
-const CARD_SHADOW_RADIUS = 10
+const ANIMATION_DURATION = 300;
+const CANCEL_PAN_MOVE_THRESHOLD = 0.5;
+const CANCEL_PAN_VX_THRESHOLD = 0.5;
+const PAN_START_MARGIN = 30;
+const PARENT_TRAVEL_DISTANCE = 100;
+const PARENT_FINAL_OPACITY = 0.25;
+const CARD_SHADOW_RADIUS = 10;
 
 class AnimatedStack extends React.Component {
   static propTypes = {
-    title: any,
-    content: any,
-    backButton: any,
-    parentLocation: any,
-    location: any,
-    onPanBackGrant: any,
-    onCancelPan: any
-  }
+    title: PropTypes.any,
+    content: PropTypes.any,
+    backButton: PropTypes.any,
+    parentLocation: PropTypes.any,
+    location: PropTypes.any,
+    onPanBackGrant: PropTypes.any,
+    onCancelPan: PropTypes.any
+  };
 
   state = {
     previousProps: null,
     panning: false,
     cancelingPan: false
-  }
+  };
 
-  animation = new Animated.Value(0)
+  animation = new Animated.Value(0);
 
   panResponder = PanResponder.create({
-
     onMoveShouldSetPanResponderCapture: (e, g) => {
       return (
         this.props.parentLocation &&
         e.nativeEvent.locationX <= PAN_START_MARGIN &&
         g.dx > 0
-      )
+      );
     },
 
     onPanResponderGrant: (e, g) => {
-      this.setState({
-        startPan: true,
-        panStartLeft: g.moveX
-      }, () => {
-        this.props.onPanBackGrant()
-      })
+      this.setState(
+        {
+          startPan: true,
+          panStartLeft: g.moveX
+        },
+        () => {
+          this.props.onPanBackGrant();
+        }
+      );
     },
 
-    onPanResponderMove: Animated.event([ null, { moveX: this.animation } ]),
+    onPanResponderMove: Animated.event([null, { moveX: this.animation }]),
 
     onPanResponderRelease: (e, g) => {
-      const { panStartLeft } = this.state
-      const { width } = Dimensions.get('window')
-      const releaseRatio = g.moveX/width
-      const isCancel = g.vx < CANCEL_PAN_VX_THRESHOLD && releaseRatio < CANCEL_PAN_MOVE_THRESHOLD
+      const { panStartLeft } = this.state;
+      const { width } = Dimensions.get("window");
+      const releaseRatio = g.moveX / width;
+      const isCancel =
+        g.vx < CANCEL_PAN_VX_THRESHOLD &&
+        releaseRatio < CANCEL_PAN_MOVE_THRESHOLD;
       if (isCancel) {
-        this.animation.setValue(g.moveX - panStartLeft)
-        this.setState({
-          panning: false,
-          cancelingPan: true
-        }, () => {
-          Animated.timing(this.animation, {
-            toValue: 0,
-            duration: releaseRatio * ANIMATION_DURATION + 2000
-          }).start(({ finished }) => {
-            this.props.onCancelPan()
-          })
-        })
+        this.animation.setValue(g.moveX - panStartLeft);
+        this.setState(
+          {
+            panning: false,
+            cancelingPan: true
+          },
+          () => {
+            Animated.timing(this.animation, {
+              toValue: 0,
+              duration: releaseRatio * ANIMATION_DURATION + 2000
+            }).start(({ finished }) => {
+              this.props.onCancelPan();
+            });
+          }
+        );
       } else {
-        this.animation.setValue(g.moveX - panStartLeft)
+        this.animation.setValue(g.moveX - panStartLeft);
         this.setState({ panning: false }, () => {
           Animated.timing(this.animation, {
             toValue: width,
-            duration: (1-releaseRatio) * ANIMATION_DURATION + 2000
+            duration: (1 - releaseRatio) * ANIMATION_DURATION + 2000
           }).start(({ finished }) => {
             this.setState({
               previousProps: null
-            })
-          })
-        })
+            });
+          });
+        });
       }
     }
-  })
+  });
 
   componentWillReceiveProps(nextProps) {
     if (nextProps.location !== this.props.location) {
@@ -173,7 +174,7 @@ class AnimatedStack extends React.Component {
         this.setState({
           cancelingPan: false,
           previousProps: null
-        })
+        });
       } else if (this.state.startPan) {
         // don't do "timing" animation when we start to pan, let
         // the user slide it around
@@ -181,183 +182,198 @@ class AnimatedStack extends React.Component {
           startPan: false,
           panning: true,
           previousProps: this.props
-        })
+        });
       } else {
         // normal case, new location shows up, so we animate
-        const { width } = Dimensions.get('window')
-        this.setState({
-          previousProps: this.props
-        }, () => {
-          this.animation.setValue(0)
-          Animated.timing(this.animation, {
-            toValue: width,
-            duration: ANIMATION_DURATION
-          }).start(({ finished }) => {
-            this.setState({ previousProps: null })
-          })
-        })
+        const { width } = Dimensions.get("window");
+        this.setState(
+          {
+            previousProps: this.props
+          },
+          () => {
+            this.animation.setValue(0);
+            Animated.timing(this.animation, {
+              toValue: width,
+              duration: ANIMATION_DURATION
+            }).start(({ finished }) => {
+              this.setState({ previousProps: null });
+            });
+          }
+        );
       }
     }
   }
 
   render() {
-    const { width, height } = Dimensions.get('window')
-    const { direction } = this.props
-    const { previousProps, panDx, panning, panStartLeft } = this.state
-    const animating = !!previousProps
-    const bothProps = [ this.props ]
-    if (animating)
-      bothProps.push(previousProps)
+    const { width, height } = Dimensions.get("window");
+    const { direction } = this.props;
+    const { previousProps, panDx, panning, panStartLeft } = this.state;
+    const animating = !!previousProps;
+    const bothProps = [this.props];
+    if (animating) bothProps.push(previousProps);
 
     return (
       <View
-        pointerEvents={animating ? 'none' : 'auto'}
-        style={{ flex: 1  }}
+        pointerEvents={animating ? "none" : "auto"}
+        style={{ flex: 1 }}
         {...this.panResponder.panHandlers}
       >
-        <View style={{ zIndex: 1, backgroundColor: '#f0f0f0', borderBottomColor: '#ccc', borderBottomWidth: 1, height: 40, alignItems: 'center' }}>
+        <View
+          style={{
+            zIndex: 1,
+            backgroundColor: "#f0f0f0",
+            borderBottomColor: "#ccc",
+            borderBottomWidth: 1,
+            height: 40,
+            alignItems: "center"
+          }}
+        >
           {bothProps.map((props, index, arr) => {
-            const isParent = index === 0
-            const transitioning = arr.length > 1
+            const isParent = index === 0;
+            const transitioning = arr.length > 1;
             return (
               <Animated.View
                 key={props.location.pathname}
                 style={{
-                  opacity: (
-                    !transitioning ? (
-                      1
-                    ) : isParent ? (
-                      this.animation.interpolate({
-                        inputRange: [ 0, width ],
-                        outputRange: [ 0, 1 ]
-                      })
-                    ) : (
-                      this.animation.interpolate({
-                        inputRange: [ 0, width ],
-                        outputRange: [ 1, 0 ]
-                      })
-                    )
-                  ),
-                  flexDirection: 'row', alignItems: 'center', position: 'absolute', top: 0, left: 0, right: 0, bottom: 0
+                  opacity: !transitioning
+                    ? 1
+                    : isParent
+                      ? this.animation.interpolate({
+                          inputRange: [0, width],
+                          outputRange: [0, 1]
+                        })
+                      : this.animation.interpolate({
+                          inputRange: [0, width],
+                          outputRange: [1, 0]
+                        }),
+                  flexDirection: "row",
+                  alignItems: "center",
+                  position: "absolute",
+                  top: 0,
+                  left: 0,
+                  right: 0,
+                  bottom: 0
                 }}
               >
                 <View style={{ width: 30 }}>
-                  {props.parentLocation ? props.backButton : <Text>&nbsp;</Text>}
-                </View>
-                <View style={{ flex: 1 }}>
-                  {props.title}
+                  {props.parentLocation ? (
+                    props.backButton
+                  ) : (
+                    <Text>&nbsp;</Text>
+                  )}
                 </View>
-                <View style={{ width: 30 }}/>
+                <View style={{ flex: 1 }}>{props.title}</View>
+                <View style={{ width: 30 }} />
               </Animated.View>
-            )
+            );
           })}
         </View>
-        <View style={{ flex: 1, backgroundColor: '#ccc' }}>
+        <View style={{ flex: 1, backgroundColor: "#ccc" }}>
           {bothProps.map((props, index, arr) => {
-            const isParent = index === 0
-            const transitioning = arr.length > 1
+            const isParent = index === 0;
+            const transitioning = arr.length > 1;
             return (
-              <Animated.View key={props.location.pathname} style={{
-                transform: [{ translateX: !transitioning ? (
-                  0
-                ) : panning ? (
-                  isParent ? (
-                    this.animation.interpolate({
-                      inputRange: [ 0, width ],
-                      outputRange: [
-                        -PARENT_TRAVEL_DISTANCE - panStartLeft,
-                        -panStartLeft
-                      ]
-                    })
-                  ) : (
-                    this.animation.interpolate({
-                      inputRange: [ 0, width ],
-                      outputRange: [
-                        -panStartLeft,
-                        width-panStartLeft
-                      ]
-                    })
-                  )
-                ) : (
-                  this.animation.interpolate({
-                    inputRange: [ 0, width ],
-                    outputRange: (
-                      isParent ? (
-                        direction === 'down' ? (
-                          [ width + CARD_SHADOW_RADIUS, 0 ]
-                        ) : (
-                          [ -PARENT_TRAVEL_DISTANCE, 0 ]
-                        )
-                      ) : (
-                        direction === 'down' ? (
-                          [ 0, -PARENT_TRAVEL_DISTANCE ]
-                        ) : (
-                          [ 0, width + CARD_SHADOW_RADIUS ]
-                        )
-                      )
-                    )
-                  })
-                ) }],
-                zIndex: !transitioning ? 1 : (
-                  isParent ? (
-                    direction === 'down' ? 1 : 0
-                  ) : (
-                    direction === 'down' ? 0 : 1
-                  )
-                ),
-                position: 'absolute', width, height, top: 0,
-                shadowColor: "#000000",
-                shadowOpacity: 0.25,
-                shadowRadius: CARD_SHADOW_RADIUS,
-                opacity: panning ? (
-                  !isParent ? 1 : (
-                    this.animation.interpolate({
-                      inputRange: [ 0, width ],
-                      outputRange: [ PARENT_FINAL_OPACITY, 1 ]
-                    })
-                  )
-                ) : (
-                  !transitioning ? 1 : isParent && 'direction' === 'down' ? 1 : (
-                    this.animation.interpolate({
-                      inputRange: [ 0, width ],
-                      outputRange: (
-                        index === 1 && direction === 'down' ? (
-                          [ 1, PARENT_FINAL_OPACITY ]
-                        ) : isParent && direction === 'up' ? (
-                          [ PARENT_FINAL_OPACITY, 1 ]
-                        ) : index === 1 && direction === 'up' ? (
-                          [ 1, 1 ]
-                        ) : [1, 1]
-                      )
-                    })
-                  )
-                )
-              }}>
+              <Animated.View
+                key={props.location.pathname}
+                style={{
+                  transform: [
+                    {
+                      translateX: !transitioning
+                        ? 0
+                        : panning
+                          ? isParent
+                            ? this.animation.interpolate({
+                                inputRange: [0, width],
+                                outputRange: [
+                                  -PARENT_TRAVEL_DISTANCE - panStartLeft,
+                                  -panStartLeft
+                                ]
+                              })
+                            : this.animation.interpolate({
+                                inputRange: [0, width],
+                                outputRange: [
+                                  -panStartLeft,
+                                  width - panStartLeft
+                                ]
+                              })
+                          : this.animation.interpolate({
+                              inputRange: [0, width],
+                              outputRange: isParent
+                                ? direction === "down"
+                                  ? [width + CARD_SHADOW_RADIUS, 0]
+                                  : [-PARENT_TRAVEL_DISTANCE, 0]
+                                : direction === "down"
+                                  ? [0, -PARENT_TRAVEL_DISTANCE]
+                                  : [0, width + CARD_SHADOW_RADIUS]
+                            })
+                    }
+                  ],
+                  zIndex: !transitioning
+                    ? 1
+                    : isParent
+                      ? direction === "down"
+                        ? 1
+                        : 0
+                      : direction === "down"
+                        ? 0
+                        : 1,
+                  position: "absolute",
+                  width,
+                  height,
+                  top: 0,
+                  shadowColor: "#000000",
+                  shadowOpacity: 0.25,
+                  shadowRadius: CARD_SHADOW_RADIUS,
+                  opacity: panning
+                    ? !isParent
+                      ? 1
+                      : this.animation.interpolate({
+                          inputRange: [0, width],
+                          outputRange: [PARENT_FINAL_OPACITY, 1]
+                        })
+                    : !transitioning
+                      ? 1
+                      : isParent && "direction" === "down"
+                        ? 1
+                        : this.animation.interpolate({
+                            inputRange: [0, width],
+                            outputRange:
+                              index === 1 && direction === "down"
+                                ? [1, PARENT_FINAL_OPACITY]
+                                : isParent && direction === "up"
+                                  ? [PARENT_FINAL_OPACITY, 1]
+                                  : index === 1 && direction === "up"
+                                    ? [1, 1]
+                                    : [1, 1]
+                          })
+                }}
+              >
                 {props.content}
               </Animated.View>
-          )})}
+            );
+          })}
         </View>
       </View>
-    )
+    );
   }
 }
 
-const rootStoredLocations = {}
+const rootStoredLocations = {};
 
 class StackRootContainer extends Component {
   static childContextTypes = {
-    stack: any,
-  }
+    stack: PropTypes.any
+  };
 
   static contextTypes = {
     router: PropTypes.object
-  }
+  };
 
   static propTypes = {
     children: PropTypes.node,
     location: PropTypes.object,
     path: PropTypes.string
-  }
+  };
 
   state = {
     title: null,
@@ -365,7 +381,7 @@ class StackRootContainer extends Component {
     backLocation: null,
     backButton: null,
     direction: null
-  }
+  };
 
   getChildContext() {
     return {
@@ -381,30 +397,36 @@ class StackRootContainer extends Component {
                 <Text style={{ padding: 10 }}>&lt;</Text>
               </Link>
             ) : null
-          })
+          });
         }
       }
-    }
+    };
   }
 
   componentWillUnmount() {
-    rootStoredLocations[this.props.path] = this.props.location
+    rootStoredLocations[this.props.path] = this.props.location;
   }
 
   handlePanBack = () => {
     if (this.state.parentLocation) {
-      this.panCancelLocation = this.props.location
-      this.context.router.history.replace(this.state.parentLocation)
+      this.panCancelLocation = this.props.location;
+      this.context.router.history.replace(this.state.parentLocation);
     }
-  }
+  };
 
   handlePanCancel = () => {
-    this.context.router.history.replace(this.panCancelLocation)
-  }
+    this.context.router.history.replace(this.panCancelLocation);
+  };
 
   render() {
-    const { title, content, backButton, parentLocation, direction } = this.state
-    const { children, location } = this.props
+    const {
+      title,
+      content,
+      backButton,
+      parentLocation,
+      direction
+    } = this.state;
+    const { children, location } = this.props;
 
     return (
       <View style={{ flex: 1 }}>
@@ -420,47 +442,50 @@ class StackRootContainer extends Component {
         />
         {children}
       </View>
-    )
+    );
   }
 }
 
 class RedirectStack extends Component {
   componentWillMount() {
-    delete rootStoredLocations[this.props.path]
+    delete rootStoredLocations[this.props.path];
   }
 
   render() {
-    return <Redirect to={this.props.to}/>
+    return <Redirect to={this.props.to} />;
   }
 }
 
 class StackRoute extends Component {
   static propTypes = {
-    path: any,
-    isRoot: any,
-    renderTitle: any,
-    renderContent: any,
-    renderChild: any
-  }
+    path: PropTypes.any,
+    isRoot: PropTypes.any,
+    renderTitle: PropTypes.any,
+    renderContent: PropTypes.any,
+    renderChild: PropTypes.any
+  };
 
   render() {
-    const { isRoot, path, ...rest } = this.props
+    const { isRoot, path, ...rest } = this.props;
     return (
-      <Route path={path} render={(props) => (
-        isRoot ? (
-          rootStoredLocations[path] ? (
-            <RedirectStack path={path} to={rootStoredLocations[path]}/>
+      <Route
+        path={path}
+        render={props =>
+          isRoot ? (
+            rootStoredLocations[path] ? (
+              <RedirectStack path={path} to={rootStoredLocations[path]} />
+            ) : (
+              <StackRootContainer path={path} location={props.location}>
+                <StackContainer {...rest} {...props} />
+              </StackRootContainer>
+            )
           ) : (
-            <StackRootContainer path={path} location={props.location}>
-              <StackContainer {...rest} {...props}/>
-            </StackRootContainer>
+            <StackContainer {...rest} {...props} />
           )
-        ) : (
-          <StackContainer {...rest} {...props}/>
-        )
-      )}/>
-    )
+        }
+      />
+    );
   }
 }
 
-export default StackRoute
+export default StackRoute;
diff --git a/packages/react-router-native/experimental/TabRoutes.js b/packages/react-router-native/experimental/TabRoutes.js
index a9d9ebf51..175842c10 100644
--- a/packages/react-router-native/experimental/TabRoutes.js
+++ b/packages/react-router-native/experimental/TabRoutes.js
@@ -1,35 +1,44 @@
-import React, { Component } from 'react'
-import { View } from 'react-native'
-import Route from 'react-router/Route'
-import Link from '../Link'
+import React from "react";
+import { Route } from "react-router";
+import { View } from "react-native";
+
+import Link from "../Link";
 
 export class TabRoutes extends React.Component {
   render() {
-    const { children } = this.props
+    const { children } = this.props;
     return (
       <View style={{ flex: 1 }}>
-        <View style={{ flex: 1 }}>
-          {children}
-        </View>
-        <View style={{ flexDirection: 'row', alignItems: 'center', justifyContent: 'center', borderTopWidth: 1, borderTopColor: '#ddd', backgroundColor: 'white' }}>
-          {React.Children.map(children, (child) => (
-            <Route path={child.props.path} children={({ match }) => (
-              <Link to={child.props.path} style={{ flex: 1, padding: 20 }}>
-                {child.props.renderTab({ isActive: !!match })}
-              </Link>
-            )}/>
+        <View style={{ flex: 1 }}>{children}</View>
+        <View
+          style={{
+            flexDirection: "row",
+            alignItems: "center",
+            justifyContent: "center",
+            borderTopWidth: 1,
+            borderTopColor: "#ddd",
+            backgroundColor: "white"
+          }}
+        >
+          {React.Children.map(children, child => (
+            <Route
+              path={child.props.path}
+              children={({ match }) => (
+                <Link to={child.props.path} style={{ flex: 1, padding: 20 }}>
+                  {child.props.renderTab({ isActive: !!match })}
+                </Link>
+              )}
+            />
           ))}
         </View>
       </View>
-    )
+    );
   }
 }
 
 export class TabRoute extends React.Component {
   render() {
-    const { renderContent, path } = this.props
-    return (
-      <Route path={path} render={renderContent}/>
-    )
+    const { renderContent, path } = this.props;
+    return <Route path={path} render={renderContent} />;
   }
 }
diff --git a/packages/react-router/.gitignore b/packages/react-router/.gitignore
index 07b3fd84f..4670323f6 100644
--- a/packages/react-router/.gitignore
+++ b/packages/react-router/.gitignore
@@ -1,5 +1,3 @@
-es/
+cjs/
+esm/
 umd/
-utils/
-/*.js
-!/rollup.config.js
diff --git a/packages/react-router/MemoryRouter.js b/packages/react-router/MemoryRouter.js
new file mode 100644
index 000000000..79b74bbd2
--- /dev/null
+++ b/packages/react-router/MemoryRouter.js
@@ -0,0 +1,3 @@
+"use strict";
+require("./warnAboutDeprecatedCJSRequire")("MemoryRouter");
+module.exports = require("./index.js").MemoryRouter;
diff --git a/packages/react-router/Prompt.js b/packages/react-router/Prompt.js
new file mode 100644
index 000000000..20f629b41
--- /dev/null
+++ b/packages/react-router/Prompt.js
@@ -0,0 +1,3 @@
+"use strict";
+require("./warnAboutDeprecatedCJSRequire")("Prompt");
+module.exports = require("./index.js").Prompt;
diff --git a/packages/react-router/Redirect.js b/packages/react-router/Redirect.js
new file mode 100644
index 000000000..6c763abc6
--- /dev/null
+++ b/packages/react-router/Redirect.js
@@ -0,0 +1,3 @@
+"use strict";
+require("./warnAboutDeprecatedCJSRequire")("Redirect");
+module.exports = require("./index.js").Redirect;
diff --git a/packages/react-router/Route.js b/packages/react-router/Route.js
new file mode 100644
index 000000000..0d3b1f591
--- /dev/null
+++ b/packages/react-router/Route.js
@@ -0,0 +1,3 @@
+"use strict";
+require("./warnAboutDeprecatedCJSRequire")("Route");
+module.exports = require("./index.js").Route;
diff --git a/packages/react-router/Router.js b/packages/react-router/Router.js
new file mode 100644
index 000000000..ca27b72dd
--- /dev/null
+++ b/packages/react-router/Router.js
@@ -0,0 +1,3 @@
+"use strict";
+require("./warnAboutDeprecatedCJSRequire")("Router");
+module.exports = require("./index.js").Router;
diff --git a/packages/react-router/StaticRouter.js b/packages/react-router/StaticRouter.js
new file mode 100644
index 000000000..6bc351343
--- /dev/null
+++ b/packages/react-router/StaticRouter.js
@@ -0,0 +1,3 @@
+"use strict";
+require("./warnAboutDeprecatedCJSRequire")("StaticRouter");
+module.exports = require("./index.js").StaticRouter;
diff --git a/packages/react-router/Switch.js b/packages/react-router/Switch.js
new file mode 100644
index 000000000..a4b38eb2c
--- /dev/null
+++ b/packages/react-router/Switch.js
@@ -0,0 +1,3 @@
+"use strict";
+require("./warnAboutDeprecatedCJSRequire")("Switch");
+module.exports = require("./index.js").Switch;
diff --git a/packages/react-router/es/MemoryRouter.js b/packages/react-router/es/MemoryRouter.js
new file mode 100644
index 000000000..ed6301a38
--- /dev/null
+++ b/packages/react-router/es/MemoryRouter.js
@@ -0,0 +1,7 @@
+"use strict";
+
+import warnAboutDeprecatedESMImport from "./warnAboutDeprecatedESMImport.js";
+warnAboutDeprecatedESMImport("MemoryRouter");
+
+import { MemoryRouter } from "../esm/react-router.js";
+export default MemoryRouter;
diff --git a/packages/react-router/es/Prompt.js b/packages/react-router/es/Prompt.js
new file mode 100644
index 000000000..1cce09890
--- /dev/null
+++ b/packages/react-router/es/Prompt.js
@@ -0,0 +1,7 @@
+"use strict";
+
+import warnAboutDeprecatedESMImport from "./warnAboutDeprecatedESMImport.js";
+warnAboutDeprecatedESMImport("Prompt");
+
+import { Prompt } from "../esm/react-router.js";
+export default Prompt;
diff --git a/packages/react-router/es/Redirect.js b/packages/react-router/es/Redirect.js
new file mode 100644
index 000000000..673edd7cc
--- /dev/null
+++ b/packages/react-router/es/Redirect.js
@@ -0,0 +1,7 @@
+"use strict";
+
+import warnAboutDeprecatedESMImport from "./warnAboutDeprecatedESMImport.js";
+warnAboutDeprecatedESMImport("Redirect");
+
+import { Redirect } from "../esm/react-router.js";
+export default Redirect;
diff --git a/packages/react-router/es/Route.js b/packages/react-router/es/Route.js
new file mode 100644
index 000000000..654b266de
--- /dev/null
+++ b/packages/react-router/es/Route.js
@@ -0,0 +1,7 @@
+"use strict";
+
+import warnAboutDeprecatedESMImport from "./warnAboutDeprecatedESMImport.js";
+warnAboutDeprecatedESMImport("Route");
+
+import { Route } from "../esm/react-router.js";
+export default Route;
diff --git a/packages/react-router/es/Router.js b/packages/react-router/es/Router.js
new file mode 100644
index 000000000..0e41ea474
--- /dev/null
+++ b/packages/react-router/es/Router.js
@@ -0,0 +1,7 @@
+"use strict";
+
+import warnAboutDeprecatedESMImport from "./warnAboutDeprecatedESMImport.js";
+warnAboutDeprecatedESMImport("Router");
+
+import { Router } from "../esm/react-router.js";
+export default Router;
diff --git a/packages/react-router/es/StaticRouter.js b/packages/react-router/es/StaticRouter.js
new file mode 100644
index 000000000..051586ca6
--- /dev/null
+++ b/packages/react-router/es/StaticRouter.js
@@ -0,0 +1,7 @@
+"use strict";
+
+import warnAboutDeprecatedESMImport from "./warnAboutDeprecatedESMImport.js";
+warnAboutDeprecatedESMImport("StaticRouter");
+
+import { StaticRouter } from "../esm/react-router.js";
+export default StaticRouter;
diff --git a/packages/react-router/es/Switch.js b/packages/react-router/es/Switch.js
new file mode 100644
index 000000000..524bb9d66
--- /dev/null
+++ b/packages/react-router/es/Switch.js
@@ -0,0 +1,7 @@
+"use strict";
+
+import warnAboutDeprecatedESMImport from "./warnAboutDeprecatedESMImport.js";
+warnAboutDeprecatedESMImport("Switch");
+
+import { Switch } from "../esm/react-router.js";
+export default Switch;
diff --git a/packages/react-router/es/generatePath.js b/packages/react-router/es/generatePath.js
new file mode 100644
index 000000000..459a35f0b
--- /dev/null
+++ b/packages/react-router/es/generatePath.js
@@ -0,0 +1,7 @@
+"use strict";
+
+import warnAboutDeprecatedESMImport from "./warnAboutDeprecatedESMImport.js";
+warnAboutDeprecatedESMImport("generatePath");
+
+import { generatePath } from "../esm/react-router.js";
+export default generatePath;
diff --git a/packages/react-router/es/matchPath.js b/packages/react-router/es/matchPath.js
new file mode 100644
index 000000000..ffc941065
--- /dev/null
+++ b/packages/react-router/es/matchPath.js
@@ -0,0 +1,7 @@
+"use strict";
+
+import warnAboutDeprecatedESMImport from "./warnAboutDeprecatedESMImport.js";
+warnAboutDeprecatedESMImport("matchPath");
+
+import { matchPath } from "../esm/react-router.js";
+export default matchPath;
diff --git a/packages/react-router/es/warnAboutDeprecatedESMImport.js b/packages/react-router/es/warnAboutDeprecatedESMImport.js
new file mode 100644
index 000000000..1d725a9fb
--- /dev/null
+++ b/packages/react-router/es/warnAboutDeprecatedESMImport.js
@@ -0,0 +1,35 @@
+"use strict";
+
+var printWarning = function() {};
+
+if (process.env.NODE_ENV !== "production") {
+  printWarning = function(format, subs) {
+    var index = 0;
+    var message =
+      "Warning: " +
+      (subs.length > 0
+        ? format.replace(/%s/g, function() {
+            return subs[index++];
+          })
+        : format);
+
+    if (typeof console !== "undefined") {
+      console.error(message);
+    }
+
+    try {
+      // --- Welcome to debugging React Router ---
+      // This error was thrown as a convenience so that you can use the
+      // stack trace to find the callsite that triggered this warning.
+      throw new Error(message);
+    } catch (e) {}
+  };
+}
+
+export default function(member) {
+  printWarning(
+    'Please use `import { %s } from "react-router"` instead of `import %s from "react-router/es/%s"`. ' +
+      "Support for the latter will be removed in the next major release.",
+    [member, member]
+  );
+}
diff --git a/packages/react-router/es/withRouter.js b/packages/react-router/es/withRouter.js
new file mode 100644
index 000000000..bc7ba5ac9
--- /dev/null
+++ b/packages/react-router/es/withRouter.js
@@ -0,0 +1,7 @@
+"use strict";
+
+import warnAboutDeprecatedESMImport from "./warnAboutDeprecatedESMImport.js";
+warnAboutDeprecatedESMImport("withRouter");
+
+import { withRouter } from "../esm/react-router.js";
+export default withRouter;
diff --git a/packages/react-router/generatePath.js b/packages/react-router/generatePath.js
new file mode 100644
index 000000000..d487dd2a8
--- /dev/null
+++ b/packages/react-router/generatePath.js
@@ -0,0 +1,3 @@
+"use strict";
+require("./warnAboutDeprecatedCJSRequire")("generatePath");
+module.exports = require("./index.js").generatePath;
diff --git a/packages/react-router/index.js b/packages/react-router/index.js
new file mode 100644
index 000000000..3ebff74d1
--- /dev/null
+++ b/packages/react-router/index.js
@@ -0,0 +1,7 @@
+"use strict";
+
+if (process.env.NODE_ENV === "production") {
+  module.exports = require("./cjs/react-router.min.js");
+} else {
+  module.exports = require("./cjs/react-router.js");
+}
diff --git a/packages/react-router/matchPath.js b/packages/react-router/matchPath.js
new file mode 100644
index 000000000..6d1fe336a
--- /dev/null
+++ b/packages/react-router/matchPath.js
@@ -0,0 +1,3 @@
+"use strict";
+require("./warnAboutDeprecatedCJSRequire")("matchPath");
+module.exports = require("./index.js").matchPath;
diff --git a/packages/react-router/modules/.babelrc b/packages/react-router/modules/.babelrc
index 5f6488935..1087156cc 100644
--- a/packages/react-router/modules/.babelrc
+++ b/packages/react-router/modules/.babelrc
@@ -1,30 +1,19 @@
 {
+  "presets": [["env", { "loose": true, "modules": false }], "react"],
+  "plugins": [
+    "dev-expression",
+    "transform-class-properties",
+    ["transform-object-rest-spread", { "useBuiltIns": true }],
+    "transform-export-extensions"
+  ],
   "env": {
-    "build-cjs": {
-      "presets": [["env", { "loose": true }], "react"],
-      "plugins": [
-        "dev-expression",
-        "transform-class-properties",
-        ["transform-object-rest-spread", { "useBuiltIns": true }],
-        "transform-export-default"
-      ]
-    },
-    "build-esm": {
-      "presets": [["env", { "loose": true, "modules": false }], "react"],
-      "plugins": [
-        "dev-expression",
-        "transform-class-properties",
-        ["transform-object-rest-spread", { "useBuiltIns": true }],
-        "transform-export-default"
-      ]
-    },
     "test": {
       "presets": [["env", { "loose": true }], "react"],
       "plugins": [
         "dev-expression",
         "transform-class-properties",
         ["transform-object-rest-spread", { "useBuiltIns": true }],
-        "transform-export-default"
+        "transform-export-extensions"
       ]
     }
   }
diff --git a/packages/react-router/modules/index.js b/packages/react-router/modules/index.js
index f51187549..74fdd09c1 100644
--- a/packages/react-router/modules/index.js
+++ b/packages/react-router/modules/index.js
@@ -8,3 +8,5 @@ export Switch from "./Switch";
 export generatePath from "./generatePath";
 export matchPath from "./matchPath";
 export withRouter from "./withRouter";
+
+export { default as __RouterContext } from "./RouterContext";
diff --git a/packages/react-router/package-lock.json b/packages/react-router/package-lock.json
index 1d7c81b02..c06d62ee7 100644
--- a/packages/react-router/package-lock.json
+++ b/packages/react-router/package-lock.json
@@ -804,9 +804,9 @@
 			"dev": true
 		},
 		"babel-plugin-syntax-export-extensions": {
-			"version": "7.0.0-alpha.20",
-			"resolved": "https://registry.npmjs.org/babel-plugin-syntax-export-extensions/-/babel-plugin-syntax-export-extensions-7.0.0-alpha.20.tgz",
-			"integrity": "sha512-HsPXvLpv0tw34GSQopFE3P299oy/fuEh8n33MLErZi/j7+5LRnD1HzqDf2QnN2SCpfj+EDf9KLSjm8Y7jqbyWQ==",
+			"version": "6.13.0",
+			"resolved": "http://registry.npmjs.org/babel-plugin-syntax-export-extensions/-/babel-plugin-syntax-export-extensions-6.13.0.tgz",
+			"integrity": "sha1-cKFITw+QiaToStRLrDU8lbmxJyE=",
 			"dev": true
 		},
 		"babel-plugin-syntax-flow": {
@@ -1101,13 +1101,14 @@
 				"babel-runtime": "^6.22.0"
 			}
 		},
-		"babel-plugin-transform-export-default": {
-			"version": "7.0.0-alpha.20",
-			"resolved": "https://registry.npmjs.org/babel-plugin-transform-export-default/-/babel-plugin-transform-export-default-7.0.0-alpha.20.tgz",
-			"integrity": "sha512-DR21YY/Lq4Qm+ULZdTLxuSY8woMvW23gejUVz88Lb+8jU3Mf2iuH05IG2+3yqjpbQEhrV/Kgp9GLoa7XLCqDrA==",
+		"babel-plugin-transform-export-extensions": {
+			"version": "6.22.0",
+			"resolved": "https://registry.npmjs.org/babel-plugin-transform-export-extensions/-/babel-plugin-transform-export-extensions-6.22.0.tgz",
+			"integrity": "sha1-U3OLR+deghhYnuqUbLvTkQm75lM=",
 			"dev": true,
 			"requires": {
-				"babel-plugin-syntax-export-extensions": "7.0.0-alpha.20"
+				"babel-plugin-syntax-export-extensions": "^6.8.0",
+				"babel-runtime": "^6.22.0"
 			}
 		},
 		"babel-plugin-transform-flow-strip-types": {
diff --git a/packages/react-router/package.json b/packages/react-router/package.json
index 2abe93518..cfb78c1c9 100644
--- a/packages/react-router/package.json
+++ b/packages/react-router/package.json
@@ -14,19 +14,19 @@
     "Redirect.js",
     "Route.js",
     "Router.js",
-    "RouterContext.js",
     "StaticRouter.js",
     "Switch.js",
+    "cjs",
     "es",
+    "esm",
     "index.js",
     "generatePath.js",
     "matchPath.js",
     "withRouter.js",
-    "umd",
-    "utils"
+    "umd"
   ],
   "main": "index.js",
-  "module": "es/index.js",
+  "module": "esm/index.js",
   "sideEffects": false,
   "scripts": {
     "build": "node ./scripts/build.js",
@@ -55,7 +55,7 @@
     "babel-plugin-dev-expression": "^0.2.1",
     "babel-plugin-external-helpers": "^6.22.0",
     "babel-plugin-transform-class-properties": "^6.24.1",
-    "babel-plugin-transform-export-default": "^7.0.0-alpha.20",
+    "babel-plugin-transform-export-extensions": "^6.22.0",
     "babel-plugin-transform-object-rest-spread": "^6.26.0",
     "babel-preset-env": "^1.7.0",
     "babel-preset-react": "^6.5.0",
diff --git a/packages/react-router/rollup.config.js b/packages/react-router/rollup.config.js
index 0c95288aa..c60f2d08e 100644
--- a/packages/react-router/rollup.config.js
+++ b/packages/react-router/rollup.config.js
@@ -6,7 +6,6 @@ import resolve from "rollup-plugin-node-resolve";
 
 const config = {
   output: {
-    format: "umd",
     name: "ReactRouter",
     globals: {
       react: "React"
@@ -20,7 +19,7 @@ const config = {
     }),
     resolve(),
     commonjs({
-      include: /node_modules/
+      include: "node_modules/**"
     }),
     replace({
       "process.env.NODE_ENV": JSON.stringify(process.env.NODE_ENV)
diff --git a/packages/react-router/scripts/build.js b/packages/react-router/scripts/build.js
index f341c8f6d..3a2b9d8f9 100644
--- a/packages/react-router/scripts/build.js
+++ b/packages/react-router/scripts/build.js
@@ -10,34 +10,27 @@ function exec(command, extraEnv) {
   });
 }
 
-console.log("Building CommonJS modules ...");
-console.log();
-
-exec("babel modules -d . --ignore __tests__", {
-  BABEL_ENV: "build-cjs"
+exec("rollup -c -i modules/index.js -o cjs/react-router.js -f cjs", {
+  NODE_ENV: "development"
 });
 
-console.log();
-console.log("Building ES modules ...");
-console.log();
+exec("rollup -c -i modules/index.js -o cjs/react-router.min.js -f cjs", {
+  NODE_ENV: "production"
+});
 
-exec("babel modules -d es --ignore __tests__", {
-  BABEL_ENV: "build-esm"
+exec("rollup -c -i modules/index.js -o esm/react-router.js -f esm", {
+  NODE_ENV: "development"
 });
 
-console.log();
-console.log("Building react-router.js ...");
+exec("rollup -c -i modules/index.js -o esm/react-router.min.js -f esm", {
+  NODE_ENV: "production"
+});
 
-exec("rollup -c -i modules/index.js -o umd/react-router.js", {
-  BABEL_ENV: "build-esm",
+exec("rollup -c -i modules/index.js -o umd/react-router.js -f umd", {
   NODE_ENV: "development"
 });
 
-console.log();
-console.log("Building react-router.min.js ...");
-
-exec("rollup -c -i modules/index.js -o umd/react-router.min.js", {
-  BABEL_ENV: "build-esm",
+exec("rollup -c -i modules/index.js -o umd/react-router.min.js -f umd", {
   NODE_ENV: "production"
 });
 
diff --git a/packages/react-router/warnAboutDeprecatedCJSRequire.js b/packages/react-router/warnAboutDeprecatedCJSRequire.js
new file mode 100644
index 000000000..bc8b31d84
--- /dev/null
+++ b/packages/react-router/warnAboutDeprecatedCJSRequire.js
@@ -0,0 +1,35 @@
+"use strict";
+
+var printWarning = function() {};
+
+if (process.env.NODE_ENV !== "production") {
+  printWarning = function(format, subs) {
+    var index = 0;
+    var message =
+      "Warning: " +
+      (subs.length > 0
+        ? format.replace(/%s/g, function() {
+            return subs[index++];
+          })
+        : format);
+
+    if (typeof console !== "undefined") {
+      console.error(message);
+    }
+
+    try {
+      // --- Welcome to debugging React Router ---
+      // This error was thrown as a convenience so that you can use the
+      // stack trace to find the callsite that triggered this warning.
+      throw new Error(message);
+    } catch (e) {}
+  };
+}
+
+module.exports = function(member) {
+  printWarning(
+    'Please use `require("react-router").%s` instead of `require("react-router/%s")`. ' +
+      "Support for the latter will be removed in the next major release.",
+    [member, member]
+  );
+};
diff --git a/packages/react-router/withRouter.js b/packages/react-router/withRouter.js
new file mode 100644
index 000000000..214676a48
--- /dev/null
+++ b/packages/react-router/withRouter.js
@@ -0,0 +1,3 @@
+"use strict";
+require("./warnAboutDeprecatedCJSRequire")("withRouter");
+module.exports = require("./index.js").withRouter;
