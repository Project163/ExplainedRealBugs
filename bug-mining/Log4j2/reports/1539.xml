<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:42:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-3356] The sub module log4j-layout-template-json seems not properly configured to be deployed as a fragment host in OSGI</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-3356</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;In the &lt;a href=&quot;https://github.com/apache/logging-log4j2/blob/release-2.x/log4j-layout-template-json/pom.xml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;pom&lt;/a&gt; of the module we have:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.felix&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;maven-bundle-plugin&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;instructions&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Fragment-Host&amp;gt;&lt;/span&gt;org.apache.logging.log4j.layout.template.json&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Fragment-Host&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Export-Package&amp;gt;&lt;/span&gt;*&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Export-Package&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/instructions&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The Fragment host seems to refer to itself.&lt;/p&gt;

&lt;p&gt;When I tried to deploy this jar as a bundle with this in my startup.properties file: &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;mvn\:org.apache.logging.log4j/log4j-layout-template-json/2.17.1 = 5
mvn\:org.ops4j.pax.logging/pax-logging-log4j2-extra/1.11.13 = 6
mvn\:org.ops4j.pax.logging/pax-logging-api/1.11.13 = 8
mvn\:org.ops4j.pax.logging/pax-logging-log4j2/1.11.13 = 8
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And copying the lib in the &quot;system&quot; folder of karaf (I tried with ServiceMix 7.0.1).&lt;/p&gt;

&lt;p&gt;The bundle stays in status &quot;Installed&quot; and never resolves as the Fragment-Host refers to itself.&lt;/p&gt;

&lt;p&gt;I am not sure what values should be set in this as I am using Pax Logging, but for sure the Host does not seems correct to me (otherwise I would have created a PR).&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Tested on ServiceMix (under Docker) 7.0.1, but it should be the same in Karaf 4.x&lt;/p&gt;

&lt;p&gt;I also tried to add the original log4j2-api and log4j-core in the same config but the fragment never gets resolved.&lt;/p&gt;</environment>
        <key id="13423702">LOG4J2-3356</key>
            <summary>The sub module log4j-layout-template-json seems not properly configured to be deployed as a fragment host in OSGI</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="3" iconUrl="https://issues.apache.org/jira/images/icons/statuses/inprogress.png" description="This issue is being actively worked on at the moment by the assignee.">In Progress</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="vy">Volkan Yazici</assignee>
                                    <reporter username="ruffp">ruffp</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Jan 2022 09:26:57 +0000</created>
                <updated>Fri, 4 Mar 2022 19:34:22 +0000</updated>
                                            <version>2.17.1</version>
                                                    <component>JsonTemplateLayout</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="17480123" author="vy" created="Fri, 21 Jan 2022 15:03:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ruffp&quot; class=&quot;user-hover&quot; rel=&quot;ruffp&quot;&gt;ruffp&lt;/a&gt;,&#160;I have passed your question to other maintainers and got the impression that we currently don&apos;t posses the sufficient experience, knowledge, and/or spare-time-to-work on OSGi. I suggest you to look for an answer in Felix, Karaf, Pax Logging, etc. support channels. If you happen to find one and it points out that something needs to be fixed in Log4j, you are more than welcome to submit a PR.&lt;/p&gt;</comment>
                            <comment id="17480149" author="ralph.goers@dslextreme.com" created="Fri, 21 Jan 2022 15:56:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vy&quot; class=&quot;user-hover&quot; rel=&quot;vy&quot;&gt;vy&lt;/a&gt; What he posts above does indeed look wrong. I took a look at the Flume module and it has&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;instructions&amp;gt;
  &amp;lt;Fragment-Host&amp;gt;org.apache.logging.log4j.core&amp;lt;/Fragment-Host&amp;gt;
  &amp;lt;Bundle-SymbolicName&amp;gt;org.apache.logging.log4j.flume&amp;lt;/Bundle-SymbolicName&amp;gt;
  &amp;lt;Export-Package&amp;gt;org.apache.logging.log4j.flume.appender&amp;lt;/Export-Package&amp;gt;
&amp;lt;/instructions&amp;gt; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I suspect that Json Template Layout should be using that same Fragment-Host, the bundle name should match the actual component, and export package should specify what you actually want public instead of everything.&lt;/p&gt;</comment>
                            <comment id="17480153" author="jira-bot" created="Fri, 21 Jan 2022 16:02:10 +0000"  >&lt;p&gt;Commit 1ad6dac24b697574831090423d8a0fdc95a8d95f in logging-log4j2&apos;s branch refs/heads/release-2.x from Volkan Yazici&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=1ad6dac&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=1ad6dac&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3356&quot; title=&quot;The sub module log4j-layout-template-json seems not properly configured to be deployed as a fragment host in OSGI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3356&quot;&gt;LOG4J2-3356&lt;/a&gt; Fix maven-bundle-plugin configuration of JSON Template Layout.&lt;/p&gt;</comment>
                            <comment id="17480156" author="vy" created="Fri, 21 Jan 2022 16:08:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ruffp&quot; class=&quot;user-hover&quot; rel=&quot;ruffp&quot;&gt;ruffp&lt;/a&gt;, committed a change to the &lt;tt&gt;release-2.x&lt;/tt&gt; branch as &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgoers&quot; class=&quot;user-hover&quot; rel=&quot;rgoers&quot;&gt;rgoers&lt;/a&gt; hinted. Mind testing the most recent 2.17.2-SNAPSHOT and check if it works for you? (Apache Maven repository for SNAPSHOT versions is accessible at &lt;a href=&quot;https://repository.apache.org/snapshots/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/snapshots/&lt;/a&gt;.)&lt;/p&gt;</comment>
                            <comment id="17482677" author="vy" created="Wed, 26 Jan 2022 18:50:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ruffp&quot; class=&quot;user-hover&quot; rel=&quot;ruffp&quot;&gt;ruffp&lt;/a&gt;, any updates?&lt;/p&gt;</comment>
                            <comment id="17482681" author="jvz" created="Wed, 26 Jan 2022 18:53:15 +0000"  >&lt;p&gt;I&apos;ve fixed the other fragment host values in other modules in the release-2.x branch as well. For 2.x, this seems to be the best we can do; in 3.x, we can migrate to using the ServiceLoader pattern where we have some OSGi-specific config available in our SLF4J 1.8.x bridge (and other modules, but that one came to mind first).&lt;/p&gt;</comment>
                            <comment id="17482966" author="jira-bot" created="Thu, 27 Jan 2022 08:31:41 +0000"  >&lt;p&gt;Commit 80a619b8a7965c477bea6c9ca279a26df154c002 in logging-log4j2&apos;s branch refs/heads/master from Volkan Yazici&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=80a619b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=80a619b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3356&quot; title=&quot;The sub module log4j-layout-template-json seems not properly configured to be deployed as a fragment host in OSGI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3356&quot;&gt;LOG4J2-3356&lt;/a&gt; Fix maven-bundle-plugin configuration of JSON Template Layout.&lt;/p&gt;</comment>
                            <comment id="17483477" author="ruffp" created="Thu, 27 Jan 2022 23:57:56 +0000"  >&lt;p&gt;hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vy&quot; class=&quot;user-hover&quot; rel=&quot;vy&quot;&gt;vy&lt;/a&gt; &#160;&lt;/p&gt;

&lt;p&gt;I tried to deploy the snapshot version and the bundle now gets resolved if I also deploy the log4j-core in the startup.properties. ServiceMix is starting well.&lt;/p&gt;

&lt;p&gt;However the &quot;json&quot; file generated does not contains json document but seems to be just strings with LF. This is probably another issue (perhaps related to Jackson?)&#160;&#160;&lt;/p&gt;

&lt;p&gt;I forked and adapted a github project &lt;a href=&quot;https://github.com/ruffp/servicemix-docker&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ruffp/servicemix-docker&lt;/a&gt; with a docker-compose (which is more convenient to test IMHO).&#160;&lt;/p&gt;

&lt;p&gt;I let the deprecated JSONLayout to generate servicemix.json and the JsonTemplateLayout generates the logs in file servicemix-new.json but this is not a json.&#160;&lt;/p&gt;</comment>
                            <comment id="17484499" author="ralph.goers@dslextreme.com" created="Mon, 31 Jan 2022 04:24:13 +0000"  >&lt;p&gt;How did you configure the JsonTemplateLayout. JsonTemplateLayout does not use Jackson.&lt;/p&gt;</comment>
                            <comment id="17485511" author="ruffp" created="Tue, 1 Feb 2022 22:17:31 +0000"  >&lt;p&gt;from here: &lt;a href=&quot;https://github.com/ruffp/servicemix-docker/blob/master/volume/etc/log4j2.xml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ruffp/servicemix-docker/blob/master/volume/etc/log4j2.xml&lt;/a&gt;&#160;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
        &amp;lt;RollingFile name=&lt;span class=&quot;code-quote&quot;&gt;&quot;servicemix_json_new_appender&quot;&lt;/span&gt;
                     fileName=&lt;span class=&quot;code-quote&quot;&gt;&quot;data/log/servicemix-new.json&quot;&lt;/span&gt;
                     filePattern=&lt;span class=&quot;code-quote&quot;&gt;&quot;data/log/servicemix-new.%d{yyyy-MM-dd}-%i.json&quot;&lt;/span&gt;&amp;gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;ThresholdFilter level=&lt;span class=&quot;code-quote&quot;&gt;&quot;DEBUG&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;JsonTemplateLayout eventTemplateUri=&lt;span class=&quot;code-quote&quot;&gt;&quot;classpath:JsonLayout.json&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Policies&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;TimeBasedTriggeringPolicy interval=&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;SizeBasedTriggeringPolicy size=&lt;span class=&quot;code-quote&quot;&gt;&quot;10 MB&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Policies&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;DefaultRolloverStrategy compressionLevel=&lt;span class=&quot;code-quote&quot;&gt;&quot;5&quot;&lt;/span&gt; max=&lt;span class=&quot;code-quote&quot;&gt;&quot;10&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/RollingFile&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I also tried with EcsLayout.json. I think I do not need to add those json files in my etc folder because it seems already integrated in the jar itself (hence the classpath: prefix). Am i right?&lt;br/&gt;
I have anyway jackson as dependencies in my OSGI for other needs, that should not disturb this component. &lt;br/&gt;
If I look &lt;a href=&quot;https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-layout-template-json/2.17.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;, I would just need the log4j-core dependency in my osgi container and it should be self-sufficient.&lt;/p&gt;</comment>
                            <comment id="17485553" author="ralph.goers@dslextreme.com" created="Wed, 2 Feb 2022 02:53:50 +0000"  >&lt;p&gt;Looking at &lt;a href=&quot;https://github.com/ruffp/servicemix-docker/tree/master/smx/system&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ruffp/servicemix-docker/tree/master/smx/system&lt;/a&gt; I saw that it was missing the log4j-api jar. I added it but when I tried to start your project I get&lt;br/&gt;
&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13039591/13039591_image-2022-02-01-19-53-38-377.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;This generally means it cannot resolve the plugin so I suspect it isn&apos;t finding the log4jPlugins.dat file.&lt;/p&gt;</comment>
                            <comment id="17486168" author="jvz" created="Thu, 3 Feb 2022 00:04:43 +0000"  >&lt;p&gt;Is that a snapshot built from git or from repository.apache.org? Remember, we recently disabled the Jenkins build which publishes snapshots.&lt;/p&gt;</comment>
                            <comment id="17486169" author="jvz" created="Thu, 3 Feb 2022 00:09:25 +0000"  >&lt;p&gt;Could this be caused by an incorrect Export-Package manifest value? The pom currently only exports one package out of the three used in JTL.&lt;/p&gt;

&lt;p&gt;It would also be helpful to try that out with debug logging enabled.&lt;/p&gt;</comment>
                            <comment id="17486242" author="ralph.goers@dslextreme.com" created="Thu, 3 Feb 2022 06:26:47 +0000"  >&lt;p&gt;I enabled debug logging but I am not seeing any output. I don&apos;t know why. I can say that all the appenders are configured except the one with the JsonTemplateLayout is using the default layout. Looking at the servicemix log I see log4j-api and log4j-core as bundles but I don&apos;t see the json template layout bundle.&lt;/p&gt;</comment>
                            <comment id="17486747" author="ruffp" created="Thu, 3 Feb 2022 23:37:26 +0000"  >&lt;p&gt;I did not include log4j-api because I though it is replaced by the ops4j-logging-api instead. If I check the bundles :&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;smx@root&amp;gt;la -s | head -n 16
START LEVEL 100 , List Threshold: 0
 ID | State    | Lvl | Version               | Symbolic name
-----------------------------------------------------------------------------------------------------------
  0 | Active   |   0 | 5.6.2                 | org.apache.felix.framework
  1 | Active   |  35 | 2.12.4                | com.fasterxml.jackson.core.jackson-annotations
  2 | Active   |  35 | 2.12.4                | com.fasterxml.jackson.core.jackson-core
  3 | Active   |  35 | 2.12.4                | com.fasterxml.jackson.core.jackson-databind
  4 | Resolved |   6 | 2.17.2.SNAPSHOT       | org.apache.logging.log4j.layout.template.json
  5 | Resolved |   6 | 1.11.13               | org.ops4j.pax.logging.pax-logging-log4j2-extra
  6 | Active   |   8 | 1.11.13               | org.ops4j.pax.logging.pax-logging-api
  7 | Active   |   8 | 1.11.13               | org.ops4j.pax.logging.pax-logging-log4j2
  8 | Active   |   8 | 2.17.2.SNAPSHOT       | org.apache.logging.log4j.core
  9 | Active   |  10 | 1.8.14                | org.apache.felix.configadmin
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the ...layout.template.json is clearly installed and seems properly resolved. You can check also by hitting headers 4 (if the bundle id is 4). &lt;/p&gt;

&lt;p&gt;But I got the same error message saying the JsonTemplateLayout is an invalid element if I start the compose without the -d. I don&apos;t know what I should do for fixing this.&lt;/p&gt;
</comment>
                            <comment id="17491693" author="jira-bot" created="Sun, 13 Feb 2022 20:20:58 +0000"  >&lt;p&gt;Commit 8b6df4436376aa66e26570ae41dcbf01965e1448 in logging-log4j2&apos;s branch refs/heads/release-2.x from Volkan Yazici&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=8b6df44&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=8b6df44&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3356&quot; title=&quot;The sub module log4j-layout-template-json seems not properly configured to be deployed as a fragment host in OSGI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3356&quot;&gt;LOG4J2-3356&lt;/a&gt; JPMS-export all JsonTemplateLayout packages.&lt;/p&gt;</comment>
                            <comment id="17491694" author="vy" created="Sun, 13 Feb 2022 20:23:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ruffp&quot; class=&quot;user-hover&quot; rel=&quot;ruffp&quot;&gt;ruffp&lt;/a&gt;, I incorporated a small fix (tipped by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mattsicker&quot; class=&quot;user-hover&quot; rel=&quot;mattsicker&quot;&gt;mattsicker&lt;/a&gt;) to &lt;tt&gt;pom.xml&lt;/tt&gt; of &lt;tt&gt;JsonTemplateLayout&lt;/tt&gt;. Would you mind trying again from the most recent &lt;tt&gt;release-2.x&lt;/tt&gt; sources again, please? Note that you need to &lt;tt&gt;./mvnw clean install -DskipTests&lt;/tt&gt; yourself, i.e., don&apos;t use Apache SNAPSHOT repos.&lt;/p&gt;</comment>
                            <comment id="17501496" author="ruffp" created="Fri, 4 Mar 2022 19:34:22 +0000"  >&lt;p&gt;I managed to make the log4j2 working in OSGI but with pax-logging (master branch of my servicemix-docker github), because they seems to embed the lib `org.apache.logging.log4j.layout.template.json` in their pax.logging implementations. I removed this lib as fragment and used their latest snapshot and the logs are coming in json format.&lt;br/&gt;
However if I want to test this bug, I have an issue starting servicemix because the log4j-core seems not recognized. I created a specific branch: &lt;a href=&quot;https://github.com/ruffp/servicemix-docker/tree/test/log4j2-without-pax&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ruffp/servicemix-docker/tree/test/log4j2-without-pax&lt;/a&gt; in my project without pax-logging and trying to add only slf4j (seems max v1.7.25 is compatible) and I used the log4j jars from the build (2.17.3-SNAPSHOT). If someone can tell me what jars need to be added in the startup.properties and in which order to be able to integrate log4j2 in OSGI, I will be able to test it.&lt;/p&gt;

&lt;p&gt;Error found in logs:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ERROR StatusLogger Log4j2 could not find a logging implementation. Please add log4j-core to the classpath. Using SimpleLogger to log to the console..
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Extract of my startup.properties:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;# Bundles to be started on startup, with startlevel
mvn\:org.slf4j/slf4j-api/1.7.25 = 5
mvn\:org.apache.logging.log4j/log4j-slf4j-impl/2.17.3 = 5
mvn\:org.apache.logging.log4j/log4j-api/2.17.3 = 6
mvn\:com.fasterxml.jackson.core/jackson-annotations/2.12.4 = 6
mvn\:com.fasterxml.jackson.core/jackson-core/2.12.4 = 6
mvn\:com.fasterxml.jackson.core/jackson-databind/2.12.4 = 6
mvn\:org.apache.logging.log4j/log4j-layout-template-json/2.17.3 = 6
mvn\:org.apache.logging.log4j/log4j-core/2.17.3 = 7
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I tried to start the log4j-core in different levels but always the same error.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13039591" name="image-2022-02-01-19-53-38-377.png" size="389304" author="rgoers" created="Wed, 2 Feb 2022 02:53:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>java</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0yrh4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>