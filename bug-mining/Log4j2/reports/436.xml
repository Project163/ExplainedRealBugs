<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:33:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-924] Log4j 1.2 Bridge doesn&apos;t map level ALL correctly in Category.getEffectiveLevel()</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-924</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;If I have in my logger configs:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.hibernate&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;ALL&quot;&lt;/span&gt;/&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Using &quot;ALL&quot; as my log level for hibernate. Hibernate uses jboss-logging. Jboss-logging just recently added support for Log4j2 (see version 3.2 - &lt;a href=&quot;https://issues.jboss.org/browse/JBLOGGING-95&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://issues.jboss.org/browse/JBLOGGING-95&lt;/a&gt;). However, I&apos;m using 3.1.4 currently which ends up then using the log4j 1.2 bridge so:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;jboss-logging 3.1.4---&amp;gt;log4j 1.2 bridge---&amp;gt;log4j2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I noticed some Hibernate code failing checking the logger level such as:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (logger.isTraceEnabled() { 
    &lt;span class=&quot;code-comment&quot;&gt;// log something expensive
&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Looking into this, it checks the loggers effective level against the passed in level. So in this case the loggers effective level should be ALL which should include TRACE. However, in the log4 1.2 bridge Category.getEffectiveLevel() doesn&apos;t have a case statement for ALL so it ends up defaulting to OFF:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Level getEffectiveLevel() {
        &lt;span class=&quot;code-keyword&quot;&gt;switch&lt;/span&gt; (logger.getLevel().getStandardLevel()) {
            &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; TRACE:
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Level.TRACE;
            &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; DEBUG:
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Level.DEBUG;
            &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; INFO:
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Level.INFO;
            &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; WARN:
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Level.WARN;
            &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; ERROR:
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Level.ERROR;
            &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; FATAL:
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Level.FATAL;
            &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;:
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Level.OFF;
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here&apos;s the JBoss logging check for reference - &lt;a href=&quot;https://github.com/jboss-logging/jboss-logging/blob/master/src/main/java/org/jboss/logging/Log4jLogger.java#L36&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jboss-logging/jboss-logging/blob/master/src/main/java/org/jboss/logging/Log4jLogger.java#L36&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The first conditional will be true but the second will be false due to the issue of mapping the ALL level.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12762436">LOG4J2-924</key>
            <summary>Log4j 1.2 Bridge doesn&apos;t map level ALL correctly in Category.getEffectiveLevel()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rrupp">Ryan Rupp</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Dec 2014 00:08:06 +0000</created>
                <updated>Thu, 18 Dec 2014 14:21:27 +0000</updated>
                            <resolved>Thu, 18 Dec 2014 14:21:27 +0000</resolved>
                                    <version>2.1</version>
                                    <fixVersion>2.2</fixVersion>
                                    <component>Log4j 1.2 bridge</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14251681" author="garydgregory" created="Thu, 18 Dec 2014 14:21:27 +0000"  >&lt;p&gt;Fixed in git master. &lt;/p&gt;

&lt;p&gt;Please test. &lt;/p&gt;

&lt;p&gt;I&apos;ve deployed new SNAPSHOT jars to &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/&lt;/a&gt; (with the exception of the log4j-perf jar which fails to mvn deploy).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 48 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i23jvj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>