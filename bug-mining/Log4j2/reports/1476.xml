<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:41:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-2816] NullPointerException from AsyncLogger</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-2816</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;We&apos;ve got several times following NullPointerException (example from our stdout.log):&lt;br/&gt;
 &#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
84449.232: [purging &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;loader data graph, 0.0000003 secs]
AsyncLogger error handling event seq=1037012, value=&lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.logging.log4j.core.async.RingBufferLogEvent@2a7b2d78&apos;&lt;/span&gt;: java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
java.lang.NullPointerException
 at org.apache.logging.log4j.core.async.RingBufferLogEvent.execute(RingBufferLogEvent.java:161)
 at org.apache.logging.log4j.core.async.RingBufferLogEventHandler.onEvent(RingBufferLogEventHandler.java:46)
 at org.apache.logging.log4j.core.async.RingBufferLogEventHandler.onEvent(RingBufferLogEventHandler.java:29)
 at com.lmax.disruptor.BatchEventProcessor.processEvents(BatchEventProcessor.java:168)
 at com.lmax.disruptor.BatchEventProcessor.run(BatchEventProcessor.java:125)
 at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
AsyncLogger error handling event seq=1037022, value=&lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.logging.log4j.core.async.RingBufferLogEvent@d5d330f&apos;&lt;/span&gt;: java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
java.lang.NullPointerException
 at org.apache.logging.log4j.core.async.RingBufferLogEvent.execute(RingBufferLogEvent.java:161)
 at org.apache.logging.log4j.core.async.RingBufferLogEventHandler.onEvent(RingBufferLogEventHandler.java:46)
 at org.apache.logging.log4j.core.async.RingBufferLogEventHandler.onEvent(RingBufferLogEventHandler.java:29)
 at com.lmax.disruptor.BatchEventProcessor.processEvents(BatchEventProcessor.java:168)
 at com.lmax.disruptor.BatchEventProcessor.run(BatchEventProcessor.java:125)
 at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
84450.232: [deflating idle monitors, 0.0000624 secs]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;What is interesting this NPEs always preceeded by&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
84449.232: [purging &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;loader data graph, 0.0000003 secs] vm message
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13297641">LOG4J2-2816</key>
            <summary>NullPointerException from AsyncLogger</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vy">Volkan Yazici</assignee>
                                    <reporter username="orloden">Denis</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Apr 2020 16:22:28 +0000</created>
                <updated>Mon, 2 Jun 2025 20:33:37 +0000</updated>
                            <resolved>Fri, 23 Jul 2021 12:10:03 +0000</resolved>
                                    <version>2.13.0</version>
                                    <fixVersion>3.0.0</fixVersion>
                    <fixVersion>2.15.0</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="17081820" author="garydgregory" created="Sun, 12 Apr 2020 14:34:11 +0000"  >&lt;p&gt;May you please attach your Log4j config file? If you have small app that reproduces the issue, that would be most helpful.&lt;/p&gt;</comment>
                            <comment id="17081935" author="remkop@yahoo.com" created="Sun, 12 Apr 2020 23:27:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=orloden&quot; class=&quot;user-hover&quot; rel=&quot;orloden&quot;&gt;orloden&lt;/a&gt; Can you give more detail on what version (and vendor) of Java you are using? Also, just to confirm, you are using Log4j 2.13.0, correct?&lt;/p&gt;

&lt;p&gt;All:&lt;/p&gt;

&lt;p&gt;Some notes that may help with investigation:&lt;/p&gt;

&lt;p&gt;Looking at the source for &lt;tt&gt;RingBufferLogEvent&lt;/tt&gt; &lt;a href=&quot;http://logging.apache.org/log4j/log4j-2.12.1/log4j-core/xref/org/apache/logging/log4j/core/async/RingBufferLogEvent.html#L161&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;line 161&lt;/a&gt;, this NPE implies that the &lt;tt&gt;asyncLogger&lt;/tt&gt; field is &lt;tt&gt;null&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;This field is set by the &lt;tt&gt;RingBufferLogEvent::setValues&lt;/tt&gt; method, and nulled out after each event in the &lt;tt&gt;RingBufferLogEvent::clear&lt;/tt&gt; method. Looking at the call chain for &lt;tt&gt;setValues&lt;/tt&gt; I cannot see a chance for a &lt;tt&gt;null&lt;/tt&gt; value being passed in. However, the &lt;tt&gt;clear&lt;/tt&gt; method is called after the work is done, which would imply there is a race condition and this &lt;tt&gt;RingBufferLogEvent&lt;/tt&gt; is claimed and used by multiple threads simultaneously, which should never happen by design of the Disruptor... &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ckozak&quot; class=&quot;user-hover&quot; rel=&quot;ckozak&quot;&gt;ckozak&lt;/a&gt;, do you have any ideas?&lt;/p&gt;
</comment>
                            <comment id="17082415" author="den.orlov.1" created="Mon, 13 Apr 2020 15:35:39 +0000"  >&lt;p&gt;openjdk-1.8.0_221-89&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
./current/lib&amp;gt; ls | grep log
commons-logging-1.1.1.jar
log4j-1.2-api-2.13.0.jar
log4j-api-2.13.0.jar
log4j-core-2.13.0.jar
log4j-over-slf4j-1.7.28.jar
log4j-slf4j-impl-2.13.0.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Today we observed several additional occurances of that NPE:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
60650.670: [purging &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;loader data graph, 0.0000003 secs]
&#8230;
AsyncLogger error handling event seq=2388450, value=&lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.logging.log4j.core.async.RingBufferLogEvent@8b72333&apos;&lt;/span&gt;: java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
java.lang.NullPointerException
&#160;&#160;&#160;&#160;&#160;&#160;&#160;at org.apache.logging.log4j.core.async.RingBufferLogEvent.execute(RingBufferLogEvent.java:161)
&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.logging.log4j.core.async.RingBufferLogEventHandler.onEvent(RingBufferLogEventHandler.java:46)
&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.logging.log4j.core.async.RingBufferLogEventHandler.onEvent(RingBufferLogEventHandler.java:29)
&#160;&#160;&#160;&#160;&#160;&#160;&#160; at com.lmax.disruptor.BatchEventProcessor.processEvents(BatchEventProcessor.java:168)
&#160;&#160;&#160;&#160;&#160;&#160;&#160; at com.lmax.disruptor.BatchEventProcessor.run(BatchEventProcessor.java:125)
&#160;&#160;&#160;&#160;&#160;&#160;&#160; at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;then later&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&#160;
72728.716: [purging &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;loader data graph, 0.0000002 secs]
AsyncLogger error handling event seq=2421177, value=&lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.logging.log4j.core.async.RingBufferLogEvent@673c0db6&apos;&lt;/span&gt;: java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
java.lang.NullPointerException
AsyncLogger error handling event seq=2421186, value=&lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.logging.log4j.core.async.RingBufferLogEvent@1d677a98&apos;&lt;/span&gt;: java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
java.lang.NullPointerException
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17082432" author="den.orlov.1" created="Mon, 13 Apr 2020 15:51:39 +0000"  >&lt;p&gt;Our log4j2.component.properties:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
# All properties which can be set via &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt; Properties (will have more priority) or here
# https:&lt;span class=&quot;code-comment&quot;&gt;//logging.apache.org/log4j/2.x/manual/configuration.html -&amp;gt; &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt; Properties
&lt;/span&gt;
# Path to an XML or JSON Log4j 2 configuration file. May also contain a comma separated list of configuration file names.
# log4j.configurationFile=

# The name of the &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;that &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; the MergeStrategy &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt;.
# If not specified DefaultMergeStrategy will be used when creating a CompositeConfiguration..
# log4j.mergeFactory=

# Creates the LoggerContexts. An application can have one or more active LoggerContexts depending on the circumstances.
# See Log Separation &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; more details. Available context selector implementation classes:
# org.apache.logging.log4j.core.async .AsyncLoggerContextSelector - makes all loggers asynchronous.
# org.apache.logging.log4j.core.selector .BasicContextSelector - creates a single shared LoggerContext.
# org.apache.logging.log4j.core.selector .ClassLoaderContextSelector - separate LoggerContexts &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; each web application.
# org.apache.logging.log4j.core.selector .JndiContextSelector - use JNDI to locate each web application&apos;s LoggerContext.
# org.apache.logging.log4j.core.osgi .BundleContextSelector - separate LoggerContexts &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; each OSGi bundle.
# Default: ClassLoaderContextSelector
Log4jContextSelector=org.apache.logging.log4j.core.async.AsyncLoggerContextSelector

# Factory &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;used by LoggerConfig to create LogEvent instances. (Ignored when the AsyncLoggerContextSelector is used.)
# Log4jLogEventFactory=org.apache.logging.log4j.core.impl .DefaultLogEventFactory

# Factory &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;used by LogManager to bootstrap the logging implementation.
# The core jar provides org.apache.logging.log4j.core.impl.Log4jContextFactory.
# log4j2.loggerContextFactory=org.apache.logging.log4j.simple .SimpleLoggerContextFactory

# Fully specified &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;name of a &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;extending org.apache.logging.log4j.core.config.ConfigurationFactory.
# If specified, an instance of &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;is added to the list of configuration factories.
# log4j.configurationFactory

# Overrides the global flag &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; whether or not a shutdown hook should be used to stop a LoggerContext.
# By &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is enabled and can be disabled on a per-configuration basis.
# When running with the log4j-web module, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is automatically disabled.
# log4j.shutdownHookEnabled=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;

# Fully specified &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;name of a &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;implementing ShutdownCallbackRegistry.
# If specified, an instance of &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;is used instead of DefaultShutdownCallbackRegistry.
# The specified &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;must have a &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; constructor.
# log4j.shutdownCallbackRegistry=org.apache.logging.log4j.core.util.DefaultShutdownCallbackRegistry

# Implementation of the org.apache.logging.log4j.core.util.Clock &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; that is used &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; timestamping the log events.
# By &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.currentTimeMillis is called on every log event.
# You can also specify a fully qualified &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;name of a custom &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;that &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; the Clock &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt;.
# log4j.Clock=SystemClock

# Log level of the &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; configuration. The &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; configuration is used &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the ConfigurationFactory could
# not successfully create a configuration (e.g. no log4j2.xml file was found).
# org.apache.logging.log4j.level=ERROR

# If &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, the ThreadContext stack and map are disabled. (May be ignored &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; a custom ThreadContext map is specified.)
# Default: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
disableThreadContext=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;

# If &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, the ThreadContext stack is disabled.
# Default: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
disableThreadContextStack=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;

# If &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, the ThreadContext map is disabled. (May be ignored &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; a custom ThreadContext map is specified.)
# Default: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
disableThreadContextMap=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;

# Fully specified &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;name of a custom ThreadContextMap implementation class.
# log4j2.threadContextMap

# If &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; use a InheritableThreadLocal to implement the ThreadContext map. Otherwise, use a plain ThreadLocal.
# (May be ignored &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; a custom ThreadContext map is specified.)
# isThreadContextMapInheritable=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;

# Fully specified &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;name of a custom ContextDataInjector implementation class.
# log4j2.ContextDataInjector

# Specify &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt; to make the ThreadContext map garbage-free.
# Default: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
log4j2.garbagefree.threadContextMap=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;

# If &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, Log4j configuration objects like LoggerContexts, Appenders, Loggers, etc.
# will not be instrumented with MBeans and cannot be remotely monitored and managed.
# log4j2.disable.jmx=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;

# If &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, log4j&apos;s JMX notifications are sent from a separate background thread,
# otherwise they are sent from the caller thread. If system property log4j2.is.webapp is &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; or the
# javax.servlet.Servlet &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;is on the classpath, the &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; behaviour is to use the caller
# thread to send JMX notifications.
# Default: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
# log4j2.jmx.notify.async

# If &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, the ConsoleAppender will not &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; to use the Jansi output stream on Windows.
# Default: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
# log4j.skipJansi

# If &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, classes are only loaded with the &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;loader.
# Otherwise, an attempt is made to load classes with the current thread&apos;s context &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;loader
# before falling back to the &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;loader.
# Default: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
# log4j.ignoreTCL

# &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt; property that may be used to seed the UUID generation with an integer value.
# Default: 0
# org.apache.logging.log4j.uuidSequence

# If &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, the full ThreadContext map is included in each SimpleLogger log message.
# Default: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
# org.apache.logging.log4j.simplelog.showContextMap

# If &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, the logger name is included in each SimpleLogger log message.
# Default: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
# org.apache.logging.log4j.simplelog.showlogname

# If &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, only the last component of a logger name is included in SimpleLogger log messages.
# (E.g., &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the logger name is &lt;span class=&quot;code-quote&quot;&gt;&quot;mycompany.myproject.mycomponent&quot;&lt;/span&gt;, only &lt;span class=&quot;code-quote&quot;&gt;&quot;mycomponent&quot;&lt;/span&gt; is logged.
# Default: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
# org.apache.logging.log4j.simplelog.showShortLogname

# If &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, SimpleLogger log messages contain timestamp information.
# Default: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
# org.apache.logging.log4j.simplelog.showdatetime

# Date-time format to use. Ignored &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; org.apache.logging.log4j.simplelog.showdatetime is &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;.
# Default: &lt;span class=&quot;code-quote&quot;&gt;&quot;yyyy/MM/dd HH:mm:ss:SSS zzz&quot;&lt;/span&gt;
# org.apache.logging.log4j.simplelog.dateTimeFormat

# &lt;span class=&quot;code-quote&quot;&gt;&quot;system.err&quot;&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt;-insensitive) logs to &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err, &lt;span class=&quot;code-quote&quot;&gt;&quot;system.out&quot;&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt;-insensitive) logs to &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out,
# any other value is interpreted as a file name to save SimpleLogger messages to.
# Default: system.err
# org.apache.logging.logj.simplelog.logFile

# Default level &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SimpleLogger instances.
# Default: ERROR
# org.apache.logging.log4j.simplelog.level

# Log level &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; a the SimpleLogger instance with the specified name.
# Default: SimpleLogger &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; log level
# org.apache.logging.log4j.simplelog.&amp;lt;loggerName&amp;gt;level

# This property is used to control the initial StatusLogger level, and can be overridden in code by calling
# StatusLogger.getLogger().setLevel(someLevel). Note that the StatusLogger level is only used to determine the status
# log output level until a listener is registered. In practice, a listener is registered when a configuration is found,
# and from that point onwards, status messages are only sent to the listeners (depending on their statusLevel).
# Default: ERROR
# org.apache.logging.log4j.simplelog.StatusLogger.level

# The StatusLogger logs events that occur in the logging system to the console. During configuration,
# AbstractConfiguration registers a StatusConsoleListener with the StatusLogger that may redirect status log events
# from the &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; console output to a file. The listener also supports fine-grained filtering. This system property
# specifies the &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; status log level &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the listener to use &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the configuration does not specify a status level.
#
# Note: &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; property is used by the log4j-core implementation only after a configuration file has been found.
# Default: ERROR
# Log4jDefaultStatusLevel

# The initial &lt;span class=&quot;code-quote&quot;&gt;&quot;listenersLevel&quot;&lt;/span&gt; of the StatusLogger. If StatusLogger listeners are added, the &lt;span class=&quot;code-quote&quot;&gt;&quot;listenerLevel&quot;&lt;/span&gt; is changed
# to that of the most verbose listener. If any listeners are registered, the listenerLevel is used to quickly determine
# &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; an interested listener exists.
#
# By &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;, StatusLogger listeners are added when a configuration is found and by the JMX StatusLoggerAdmin MBean.
# For example, &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; a configuration contains &amp;lt;Configuration status=&lt;span class=&quot;code-quote&quot;&gt;&quot;trace&quot;&lt;/span&gt;&amp;gt;, a listener with statusLevel TRACE is
# registered and the StatusLogger listenerLevel is set to TRACE, resulting in verbose status messages displayed on
# the console.
#
# If no listeners are registered, the listenersLevel is not used, and the StatusLogger output level is determined by
# StatusLogger.getLogger().getLevel() (see property org.apache.logging.log4j.simplelog .StatusLogger.level).
# Default: WARN
# log4j2.StatusLogger.level

# &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of StatusLogger events that are kept in a buffer and can be retrieved with StatusLogger.getStatusData().
# Default: 200
# og4j2.status.entries

# Fully qualified name of a &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;that &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; the com.lmax.disruptor.ExceptionHandler &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt;. The &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;needs to
# have a &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; zero-argument constructor. If specified, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;will be notified when an exception occurs &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt;
# logging the messages.
# If not specified, the &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; exception handler will print a message and stack trace to the standard error output stream.
# Default: &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; handler
# AsyncLogger.ExceptionHandler

# Size (number of slots) in the RingBuffer used by the asynchronous logging subsystem. Make &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; value large enough to
# deal with bursts of activity. The minimum size is 128. The RingBuffer will be pre-allocated at first use and will
# never grow or shrink during the life of the system.
# Default: 256 * 1024
# AsyncLogger.RingBufferSize

# Valid values: Block, Timeout, Sleep, Yield.
# Block is a strategy that uses a lock and condition variable &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the I/O thread waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; log events. Block can be
# used when throughput and low-latency are not as important as CPU resource. Recommended &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; resource
# constrained/virtualised environments.
#
# Timeout is a variation of the Block strategy that will periodically wake up from the lock condition await() call.
# This ensures that &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; a notification is missed somehow the consumer thread is not stuck but will recover with a small
# latency delay (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; 10ms).
#
# Sleep is a strategy that initially spins, then uses a &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.yield(), and eventually parks &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the minimum number of
# nanos the OS and JVM will allow &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; the I/O thread is waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; log events. Sleep is a good compromise between
# performance and CPU resource. This strategy has very low impact on the application thread, in exchange &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; some
# additional latency &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; actually getting the message logged.
#
# Yield is a strategy that uses a &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.yield() &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; log events after an initially spinning. Yield is a
# good compromise between performance and CPU resource, but may use more CPU than Sleep in order to get the message
# logged to disk sooner.
#
# Default: Timeout
AsyncLogger.WaitStrategy=Sleep

# Valid values: CACHED, UNCACHED.
# By &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;, AsyncLogger caches the thread name in a ThreadLocal variable to improve performance. Specify the UNCACHED
# option &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; your application modifies the thread name at runtime (with &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.currentThread().setName()) and you want
# to see the &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; thread name reflected in the log.
#
# Note: CACHED turns mSeries logs into mess as dispatcher sets thread name to dispatchId when running task
# Default: CACHED
AsyncLogger.ThreadNameStrategy=UNCACHED

# Fully qualified name of a &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;that &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; the com.lmax.disruptor.ExceptionHandler &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt;. The &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;needs to
# have a &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; zero-argument constructor. If specified, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;will be notified when an exception occurs &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt;
# logging the messages. If not specified, the &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; exception handler will print a message and stack trace to the
# standard error output stream.
# Default: &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; handler
# AsyncLoggerConfig.ExceptionHandler

# Size (number of slots) in the RingBuffer used by the asynchronous logging subsystem. Make &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; value large enough to
# deal with bursts of activity. The minimum size is 128. The RingBuffer will be pre-allocated at first use and will
# never grow or shrink during the life of the system.
# Default: 256 * 1024
# AsyncLoggerConfig.RingBufferSize

# Valid values: Block, Timeout, Sleep, Yield.
# Block is a strategy that uses a lock and condition variable &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the I/O thread waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; log events. Block can be
# used when throughput and low-latency are not as important as CPU resource. Recommended &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; resource
# constrained/virtualised environments.
#
# Timeout is a variation of the Block strategy that will periodically wake up from the lock condition await() call.
# This ensures that &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; a notification is missed somehow the consumer thread is not stuck but will recover with a small
# latency delay (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; 10ms).
#
# Sleep is a strategy that initially spins, then uses a &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.yield(), and eventually parks &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the minimum number of
# nanos the OS and JVM will allow &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; the I/O thread is waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; log events. Sleep is a good compromise between
# performance and CPU resource. This strategy has very low impact on the application thread, in exchange &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; some
# additional latency &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; actually getting the message logged.
#
# Yield is a strategy that uses a &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.yield() &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; log events after an initially spinning. Yield is a
# good compromise between performance and CPU resource, but may use more CPU than Sleep in order to get the message
# logged to disk sooner.
#
# Default: Timeout
AsyncLoggerConfig.WaitStrategy=Sleep

# Default LoggerAdapter to use in the JUL adapter. By &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; log4j-core is available, then the class
# org.apache.logging.log4j.jul .CoreLoggerAdapter will be used. Otherwise, the ApiLogggerAdapter will be used.
# Custom implementations must provide a &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; constructor.
# Default: org.apache.logging.log4j.jul.ApiLoggerAdapter
# log4j.jul.LoggerAdapter

# If &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; (the &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;), Log4j will make sure the message is formatted in the caller thread, to ensure the value at
# the time of the call to the logger is the value that is logged.
# Default: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
# log4j.format.msg.async

# Used by Async Loggers and the AsyncAppender to maintain application throughput even when the underlying appender
# cannot keep up with the logging rate and the queue is filling up.
#
# If no value is specified (the &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;) events are never discarded. If the queue is full, the logger call blocks until
# the event can be added to the queue.
#
# Specify Discard to drop events whose level is equal or less than the threshold level (INFO by &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;) when the
# queue is full.
log4j2.AsyncQueueFullPolicy=Discard

# Used by the DiscardingAsyncQueueFullPolicy to determine which events to drop when the queue becomes full. By &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;,
# INFO, DEBUG and TRACE level events are discarded when the queue is full. This property only has effect &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; Discard is
# specified as the log4j2.AsyncQueueFullPolicy.
# Default: INFO
log4j2.DiscardThreshold=DEBUG

# Default message factory used by Loggers &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; no factory was specified.
# Default: org.apache.logging.log4j.message.ParameterizedMessageFactory or org.apache.logging.log4j.message.ReusableMessageFactory in garbage-free mode
# log4j2.messageFactory

# Default flow message factory used by Loggers.
# Default: org.apache.logging.log4j.message.DefaultFlowMessageFactory
# log4j2.flowMessageFactory

# This system property can be used to force Log4j 2 to behave as &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; it is part of a web application (when &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;) or as
# &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; it is not part of a web application (when &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;).
# Default: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; Servlet &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;on &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;path
log4j2.is.webapp=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;

# This system property can be used to &lt;span class=&quot;code-keyword&quot;&gt;switch&lt;/span&gt; off the use of threadlocals, which will partly disable Log4j&apos;s
# garbage-free behaviour: to be fully garbage-free, Log4j stores objects in ThreadLocal fields to reuse them, otherwise
# &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; objects are created &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; each log event. Note that &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; property is not effective when Log4j detects it is running
# in a web application.
# Default: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
# log4j2.enable.threadlocals

# This property can be used to force garbage-aware Layouts and Appenders to revert to the pre-2.6 behaviour where
# converting log events to text generates temporary objects like Strings and &lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt;[] arrays, and converting &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; text to
# bytes generates temporary &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] arrays. By &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; property is &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; and garbage-aware Layouts and Appenders
# that convert log events to text will convert &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; text to bytes without creating temporary objects.
# Default: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
# log4j2.enable.direct.encoders

# In GC-free mode, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; property determines the initial size of the reusable StringBuilders where the message text is
# formatted and potentially passed to background threads.
# Default: 128
log4j.initialReusableMsgSize=512

# In GC-free mode, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; property determines the maximum size of the reusable StringBuilders where the message text is
# formatted and potentially passed to background threads.
# Default: 518
log4j.maxReusableMsgSize=2048

# This property determines the maximum size of the thread-local reusable StringBuilders used to format the log event to
# text by Layouts that extend AbstractStringLayout.
# Default: 2048
log4j.layoutStringBuilder.maxSize=4096

# The org.apache.logging.log4j.util.Unbox utility manages a small thread-local ring buffer of StringBuilders. Each time
# one of the box() methods is called, the next slot in the ring buffer is used, until the ring buffer is full and the
# first slot is reused. By &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; the Unbox ring buffer has 32 slots, so user code can have up to 32 boxed primitives
# in a single logger call.
# If more slots are required, set system property log4j.unbox.ringbuffer.size to the desired ring buffer size.
# Note that the specified number will be rounded up to the nearest power of 2.
# Default: 32
# log4j.unbox.ringbuffer.size

# Prints a stacktrace to the status logger at DEBUG level when the LoggerContext is started. For debug purposes.
# Default: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
# log4j.LoggerContext.stacktrace.on.start
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17082433" author="den.orlov.1" created="Mon, 13 Apr 2020 15:52:54 +0000"  >&lt;p&gt;Our slightly obfuscated log4j2.xml&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;?&amp;gt;
&amp;lt;Configuration packages=&lt;span class=&quot;code-quote&quot;&gt;&quot;algos.util.log4j&quot;&lt;/span&gt;&amp;gt;

    &amp;lt;Appenders&amp;gt;
        &amp;lt;Console name=&lt;span class=&quot;code-quote&quot;&gt;&quot;stdout&quot;&lt;/span&gt;&amp;gt;
            &amp;lt;PatternLayout pattern=&lt;span class=&quot;code-quote&quot;&gt;&quot;%date %-5level [%-20thread] %logger{0} - %msg{nolookups}%xException%n&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;/Console&amp;gt;
        &amp;lt;!-- &lt;span class=&quot;code-quote&quot;&gt;&apos;logs.root&apos;&lt;/span&gt; sys env defined &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Colo SOR --&amp;gt;
        &amp;lt;RollingRandomAccessFile name=&lt;span class=&quot;code-quote&quot;&gt;&quot;file&quot;&lt;/span&gt;
                                 filename=&lt;span class=&quot;code-quote&quot;&gt;&quot;${sys:logs.root:-logs}/fx-engine.log&quot;&lt;/span&gt;
                                 filePattern=&lt;span class=&quot;code-quote&quot;&gt;&quot;${sys:logs.root:-logs}/fx-engine.log.%d{yyyy-MM-dd_HH}.%i&quot;&lt;/span&gt;
                                 bufferSize=&lt;span class=&quot;code-quote&quot;&gt;&quot;8192&quot;&lt;/span&gt;
                                 immediateFlush=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt;&amp;gt;
            &amp;lt;PatternLayout&amp;gt;
                &amp;lt;Pattern&amp;gt;%date %-5level [%-20thread] %logger{0} - %msg{nolookups}%xException%n&amp;lt;/Pattern&amp;gt;
            &amp;lt;/PatternLayout&amp;gt;
            &amp;lt;Policies&amp;gt;
                &amp;lt;OnStartupTriggeringPolicy/&amp;gt;
                &amp;lt;SizeBasedTriggeringPolicy size=&lt;span class=&quot;code-quote&quot;&gt;&quot;50 MB&quot;&lt;/span&gt;/&amp;gt;
                &amp;lt;TimeBasedTriggeringPolicy/&amp;gt;
            &amp;lt;/Policies&amp;gt;
            &amp;lt;!--
                    just in &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt;, we need to bear in mind &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; rollover deletion logic inside - http:&lt;span class=&quot;code-comment&quot;&gt;//logging.apache.org/log4j/2.x/manual/appenders.html#DefaultRolloverStrategy
&lt;/span&gt;                    By &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;, the max counter is seven, after files will be overwritten.
            --&amp;gt;

            &amp;lt;DefaultRolloverStrategy max=&lt;span class=&quot;code-quote&quot;&gt;&quot;65536&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;/RollingRandomAccessFile&amp;gt;

        &amp;lt;!-- &lt;span class=&quot;code-quote&quot;&gt;&apos;logs.root&apos;&lt;/span&gt; sys env defined &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Colo SOR --&amp;gt;
        &amp;lt;RollingRandomAccessFile name=&lt;span class=&quot;code-quote&quot;&gt;&quot;errorFile&quot;&lt;/span&gt;
                                 filename=&lt;span class=&quot;code-quote&quot;&gt;&quot;${sys:logs.root:-logs}/errors-fx-engine.log&quot;&lt;/span&gt;
                                 filePattern=&lt;span class=&quot;code-quote&quot;&gt;&quot;${sys:logs.root:-logs}/errors-fx-engine.log.%d{yyyy-MM-dd_HH}.%i&quot;&lt;/span&gt;
                                 immediateFlush=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;&amp;gt;
            &amp;lt;Filters&amp;gt;
                &amp;lt;ThresholdFilter level=&lt;span class=&quot;code-quote&quot;&gt;&quot;WARN&quot;&lt;/span&gt;/&amp;gt;
            &amp;lt;/Filters&amp;gt;
            &amp;lt;PatternLayout&amp;gt;
                &amp;lt;Pattern&amp;gt;%date %-5level [%-20thread] %logger{0} - %msg{nolookups}%xException%n&amp;lt;/Pattern&amp;gt;
            &amp;lt;/PatternLayout&amp;gt;
            &amp;lt;Policies&amp;gt;
                &amp;lt;OnStartupTriggeringPolicy/&amp;gt;
                &amp;lt;SizeBasedTriggeringPolicy size=&lt;span class=&quot;code-quote&quot;&gt;&quot;50 MB&quot;&lt;/span&gt;/&amp;gt;
                &amp;lt;TimeBasedTriggeringPolicy/&amp;gt;
            &amp;lt;/Policies&amp;gt;
            &amp;lt;DefaultRolloverStrategy max=&lt;span class=&quot;code-quote&quot;&gt;&quot;65536&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;/RollingRandomAccessFile&amp;gt;

        &amp;lt;!-- &lt;span class=&quot;code-quote&quot;&gt;&apos;logs.root&apos;&lt;/span&gt; sys env defined &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Colo SOR --&amp;gt;
        &amp;lt;RollingRandomAccessFile name=&lt;span class=&quot;code-quote&quot;&gt;&quot;metricsFile&quot;&lt;/span&gt;
                                 filename=&lt;span class=&quot;code-quote&quot;&gt;&quot;${sys:logs.root:-logs}/metrics/metrics.log&quot;&lt;/span&gt;
                                 filePattern=&lt;span class=&quot;code-quote&quot;&gt;&quot;${sys:logs.root:-logs}/metrics/metrics.log.%d{yyyy-MM-dd_HH}.%i&quot;&lt;/span&gt;
                                 immediateFlush=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt;&amp;gt;
            &amp;lt;PatternLayout&amp;gt;
                &amp;lt;Pattern&amp;gt;%date %-5level %logger{0} - %msg{nolookups}%xException%n&amp;lt;/Pattern&amp;gt;
            &amp;lt;/PatternLayout&amp;gt;
            &amp;lt;Policies&amp;gt;
                &amp;lt;OnStartupTriggeringPolicy/&amp;gt;
                &amp;lt;SizeBasedTriggeringPolicy size=&lt;span class=&quot;code-quote&quot;&gt;&quot;50 MB&quot;&lt;/span&gt;/&amp;gt;
                &amp;lt;TimeBasedTriggeringPolicy/&amp;gt;
            &amp;lt;/Policies&amp;gt;
            &amp;lt;DefaultRolloverStrategy max=&lt;span class=&quot;code-quote&quot;&gt;&quot;65536&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;/RollingRandomAccessFile&amp;gt;

        &amp;lt;!-- &lt;span class=&quot;code-quote&quot;&gt;&apos;logs.root&apos;&lt;/span&gt; sys env defined &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Colo SOR --&amp;gt;
        &amp;lt;RollingRandomAccessFile name=&lt;span class=&quot;code-quote&quot;&gt;&quot;fwdPointsFile&quot;&lt;/span&gt;
                                 filename=&lt;span class=&quot;code-quote&quot;&gt;&quot;${sys:logs.root:-logs}/fwd-points.log&quot;&lt;/span&gt;
                                 filePattern=&lt;span class=&quot;code-quote&quot;&gt;&quot;${sys:logs.root:-logs}/fwd-points.log.%d{yyyy-MM-dd_HH}.%i&quot;&lt;/span&gt;
                                 immediateFlush=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt;&amp;gt;
            &amp;lt;PatternLayout&amp;gt;
                &amp;lt;Pattern&amp;gt;%date %-5level %logger{0} - %msg{nolookups}%xException%n&amp;lt;/Pattern&amp;gt;
            &amp;lt;/PatternLayout&amp;gt;
            &amp;lt;Policies&amp;gt;
                &amp;lt;OnStartupTriggeringPolicy/&amp;gt;
                &amp;lt;SizeBasedTriggeringPolicy size=&lt;span class=&quot;code-quote&quot;&gt;&quot;50 MB&quot;&lt;/span&gt;/&amp;gt;
                &amp;lt;TimeBasedTriggeringPolicy/&amp;gt;
            &amp;lt;/Policies&amp;gt;
            &amp;lt;DefaultRolloverStrategy max=&lt;span class=&quot;code-quote&quot;&gt;&quot;65536&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;/RollingRandomAccessFile&amp;gt;
    &amp;lt;/Appenders&amp;gt;

    &amp;lt;Loggers&amp;gt;
        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.springframework&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;INFO&quot;&lt;/span&gt;/&amp;gt;

        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;fxoptions.common&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;INFO&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;statsserver&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;INFO&quot;&lt;/span&gt;/&amp;gt;

        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;fx.upstream&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;DEBUG&quot;&lt;/span&gt;/&amp;gt;

        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;fx.marketdata&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;DEBUG&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;fx.marketdata.komodo&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;INFO&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;fx.marketdata.filtering&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;INFO&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;marketdata.filtering&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;INFO&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;komodo.arbitrator&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;INFO&quot;&lt;/span&gt;/&amp;gt;

        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;services.ordermgmt&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;DEBUG&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;services.referencedata&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;INFO&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;services.streamconnectors &quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;DEBUG&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;services.streamconnectors&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;DEBUG&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;komodo.switcher&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;INFO&quot;&lt;/span&gt;/&amp;gt;

        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;sor&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;DEBUG&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;sor.breakdown.QuantityRounding&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;INFO&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;sor.phases.IcebergProcessor&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;INFO&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;sor.phases.PhaseHelper&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;INFO&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;sor.phases.smartstop&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;DEBUG&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;sor.Tickets&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;INFO&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;state.CrossUpstreamTicket&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;INFO&quot;&lt;/span&gt;/&amp;gt;

        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;execution.OpenMarketsSupplier&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;INFO&quot;&lt;/span&gt;/&amp;gt;

        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;circuitbreakers.ParentExecutionOvertradeCircuitBreaker&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;DEBUG&quot;&lt;/span&gt;/&amp;gt;

        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;fx.crosses&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;INFO&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;fx.crosses.referencedata&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;DEBUG&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;fx.crosses.marketdata.CrossBook&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;INFO&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;fx.crosses.marketdata.CrossBookFactory&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;INFO&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;fx.marketdata.scheduled.cross.CrossMdAdapter&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;INFO&quot;&lt;/span&gt;/&amp;gt;

        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;venues&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;DEBUG&quot;&lt;/span&gt;/&amp;gt;

        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;fx.execution.spot_equivalents&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;INFO&quot;&lt;/span&gt; additivity=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;&amp;gt;
            &amp;lt;AppenderRef ref=&lt;span class=&quot;code-quote&quot;&gt;&quot;fwdPointsFile&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;/Logger&amp;gt;
        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;fx.execution.spot_equivalents.fp.BaseForwardPointsProvider.fwdPoints&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;ALL&quot;&lt;/span&gt; additivity=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt;&amp;gt;
            &amp;lt;AppenderRef ref=&lt;span class=&quot;code-quote&quot;&gt;&quot;fwdPointsFile&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;/Logger&amp;gt;

        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;fx.execution.MigAlgoFlaggingService&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;INFO&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;fx.execution&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;TRACE&quot;&lt;/span&gt;/&amp;gt;

        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;fx.fixing&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;DEBUG&quot;&lt;/span&gt;/&amp;gt;

        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;komodo&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;INFO&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;komodo.transport.tnw.lbm.LBMContextWrapper&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;DEBUG&quot;&lt;/span&gt;/&amp;gt;

        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;metrics&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;ALL&quot;&lt;/span&gt; additivity=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt;&amp;gt;
            &amp;lt;AppenderRef ref=&lt;span class=&quot;code-quote&quot;&gt;&quot;metricsFile&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;/Logger&amp;gt;

        &amp;lt;Root level=&lt;span class=&quot;code-quote&quot;&gt;&quot;INFO&quot;&lt;/span&gt;&amp;gt;
            &amp;lt;AppenderRef ref=&lt;span class=&quot;code-quote&quot;&gt;&quot;file&quot;&lt;/span&gt;/&amp;gt;
            &amp;lt;AppenderRef ref=&lt;span class=&quot;code-quote&quot;&gt;&quot;errorFile&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;/Root&amp;gt;
    &amp;lt;/Loggers&amp;gt;
&amp;lt;/Configuration&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17082666" author="remkop@yahoo.com" created="Mon, 13 Apr 2020 21:19:06 +0000"  >&lt;p&gt;Thank you for the info, that is helpful: I cannot find any problems with the Log4j configuration.&lt;/p&gt;

&lt;p&gt;Some more version questions: what version of the LMAX Disruptor are you using, and what operating system and version?&lt;/p&gt;

&lt;p&gt;I don&apos;t have a clear &quot;smoking gun&quot; candidate that I suspect could be the cause of this.&lt;/p&gt;

&lt;p&gt;The &quot;purging class loader data graph&quot; log is emitted by &lt;a href=&quot;http://hg.openjdk.java.net/jdk8u/jdk8u-dev/hotspot/file/7384f6a12fc1/src/share/vm/runtime/safepoint.cpp#l544&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;SafepointSynchronize::do_cleanup_tasks&lt;/a&gt;, so there seems to be some correlation between a safepoint being reached - and potentially a garbage collection taking place - and this NPE. What GC algorithm are you using?&lt;/p&gt;

&lt;p&gt;Depending on what version of LMAX Disruptor you are currently on, you could try upgrading to &lt;a href=&quot;https://github.com/LMAX-Exchange/disruptor&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.4.2&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Alternatively, you can try reverting to a previous version of Log4j to see if the problem still occurs.&lt;br/&gt;
 Specifically, there was some Async Logging work done in Log4j &lt;a href=&quot;http://logging.apache.org/log4j/2.x/changes-report.html#a2.12.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2.12.0&lt;/a&gt; that touched this area of the code, you could try if the problem still occurs with a version prior to that, for example, you could try with Log4j version 2.11.2.&lt;/p&gt;</comment>
                            <comment id="17171698" author="den.orlov.1" created="Wed, 5 Aug 2020 19:05:33 +0000"  >&lt;p&gt;Sorry for such long silence. Other more urgent tasks poped up.&lt;/p&gt;

&lt;p&gt;Here is details you asked:&lt;/p&gt;

&lt;p&gt;Disruptor we use:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/current/lib# ls | grep disruptor
disruptor-3.4.2.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We observed that NPEs from AcynLogger both on Solaris:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
# cat /etc/release

                       Solaris 10 10/09 s10x_u8wos_08a X86

           Copyright 2009 Sun Microsystems, Inc.  All Rights Reserved.

                        Use is subject to license terms.

                           Assembled 16 September 2009
                  Solaris 10 1/13 (Update 11) Patchset applied.

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;stdout.log:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-XX:+AlwaysPreTouch -XX:+CMSConcurrentMTEnabled -XX:CMSInitiatingOccupancyFraction=80 -XX:+CMSScavengeBeforeRemark -XX:CompileThreshold=100 -XX:CompressedClassSpaceSize=260046848 -XX:+ExitOnOutOfMemoryError -XX:+ExplicitGCInvokesConcurrentAndUnloadsClasses -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=logs/heap.dmp -XX:InitialHeapSize=2147483648 -XX:InitialTenuringThreshold=8 -XX:+ManagementServer -XX:MaxHeapSize=2147483648 -XX:MaxMetaspaceSize=268435456 -XX:MaxNewSize=1073741824 -XX:MaxTenuringThreshold=15 -XX:MetaspaceSize=268435456 -XX:NewSize=1073741824 -XX:OldPLABSize=16 -XX:+OptimizeStringConcat -XX:+ParallelRefProcEnabled -XX:+PrintAdaptiveSizePolicy -XX:+PrintCMSInitiationStatistics -XX:PrintCMSStatistics=2 -XX:+PrintCommandLineFlags -XX:+PrintFlagsFinal -XX:+PrintGC -XX:+PrintGCApplicationConcurrentTime -XX:+PrintGCApplicationStoppedTime -XX:+PrintGCCause -XX:+PrintGCDateStamps -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintHeapAtGC -XX:+PrintHeapAtSIGBREAK -XX:+PrintJNIGCStalls -XX:+PrintPromotionFailure -XX:+PrintReferenceGC -XX:+PrintSafepointStatistics -XX:PrintSafepointStatisticsCount=5 -XX:+PrintTLAB -XX:+PrintTenuringDistribution -XX:+ScavengeBeforeFullGC -XX:SurvivorRatio=6 -XX:TargetSurvivorRatio=90 -XX:-TieredCompilation -XX:+TraceClassLoading -XX:+TraceClassUnloading -XX:+TraceSafepointCleanupTime -XX:+UnlockDiagnosticVMOptions -XX:+UseCMSInitiatingOccupancyOnly -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:+UseConcMarkSweepGC -XX:+UseLargePages -XX:+UseLargePagesInMetaspace -XX:+UseParNewGC

[Opened /export/log/data/acesp3/home/lib/jdk/openjdk-1.8.0_221-99/jre/lib/rt.jar]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And on Linux:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;gt; cat /etc/os-release
NAME=&lt;span class=&quot;code-quote&quot;&gt;&quot;SLES&quot;&lt;/span&gt;
VERSION=&lt;span class=&quot;code-quote&quot;&gt;&quot;11.4&quot;&lt;/span&gt;
VERSION_ID=&lt;span class=&quot;code-quote&quot;&gt;&quot;11.4&quot;&lt;/span&gt;
PRETTY_NAME=&lt;span class=&quot;code-quote&quot;&gt;&quot;SUSE Linux Enterprise Server 11 SP4&quot;&lt;/span&gt;
ID=&lt;span class=&quot;code-quote&quot;&gt;&quot;sles&quot;&lt;/span&gt;
ANSI_COLOR=&lt;span class=&quot;code-quote&quot;&gt;&quot;0;32&quot;&lt;/span&gt;
CPE_NAME=&lt;span class=&quot;code-quote&quot;&gt;&quot;cpe:/o:suse:sles:11:4&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Stdout fragment with JDK verison:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[Opened /home/acesp3/lib/jdk/openjdk-1.8.0_221-89/jre/lib/rt.jar]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17171702" author="den.orlov.1" created="Wed, 5 Aug 2020 19:09:57 +0000"  >&lt;p&gt;A couple of recent NPEs that I found in our logs, might be they give you some clue:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
85421.099: [purging &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;loader data graph, 0.0000004 secs]
AsyncLogger error handling event seq=2562707, value=&lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.logging.log4j.core.async.RingBufferLogEvent@8349151&apos;&lt;/span&gt;: java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
java.lang.NullPointerException
        at org.apache.logging.log4j.core.async.RingBufferLogEvent.execute(RingBufferLogEvent.java:154)
        at org.apache.logging.log4j.core.async.RingBufferLogEventHandler.onEvent(RingBufferLogEventHandler.java:46)
        at org.apache.logging.log4j.core.async.RingBufferLogEventHandler.onEvent(RingBufferLogEventHandler.java:29)
        at com.lmax.disruptor.BatchEventProcessor.processEvents(BatchEventProcessor.java:168)
        at com.lmax.disruptor.BatchEventProcessor.run(BatchEventProcessor.java:125)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
AsyncLogger error handling event seq=2562719, value=&lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.logging.log4j.core.async.RingBufferLogEvent@14ce32ee&apos;&lt;/span&gt;: java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
java.lang.NullPointerException
        at org.apache.logging.log4j.core.async.RingBufferLogEvent.execute(RingBufferLogEvent.java:154)
        at org.apache.logging.log4j.core.async.RingBufferLogEventHandler.onEvent(RingBufferLogEventHandler.java:46)
        at org.apache.logging.log4j.core.async.RingBufferLogEventHandler.onEvent(RingBufferLogEventHandler.java:29)
        at com.lmax.disruptor.BatchEventProcessor.processEvents(BatchEventProcessor.java:168)
        at com.lmax.disruptor.BatchEventProcessor.run(BatchEventProcessor.java:125)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
85422.099: [deflating idle monitors, 0.0000709 secs]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
255084.625: [purging &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;loader data graph, 0.0000004 secs]
         vmop                    [threads: total initially_running wait_to_block]    [time: spin block sync cleanup vmop] page_trap_count
255034.094: no vm operation                  [     160          0              0    ]      [     0     0     0     0     0 ]  0
255036.344: RevokeBias                       [     161          0              0    ]      [     0     0     0     0     0   ] 0
255044.359: no vm operation                  [     161          1              1    ]      [     0     0     0     0     0 ]  0
255051.359: RevokeBias                       [     161          0              0    ]      [     0     0     0     0     0   ]  0
255084.625: GenCollectForAllocation          [     161          0              0    ]      [     0     0     0     0 10    ]  0
255086.636: [deflating idle monitors, 0.0001007 secs]
255086.637: [updating inline caches, 0.0000419 secs]
255086.637: [compilation policy safepoint handler, 0.0003801 secs]
255086.637: [mark nmethods, 0.0002247 secs]
255086.637: [purging &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;loader data graph, 0.0000005 secs]
[Loaded org.slf4j.helpers.MessageFormatter from file:../lib/slf4j-api-1.7.28.jar]
[Loaded org.slf4j.helpers.FormattingTuple from file:../lib/slf4j-api-1.7.28.jar]
AsyncLogger error handling event seq=7871233, value=&lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.logging.log4j.core.async.RingBufferLogEvent@51f29583&apos;&lt;/span&gt;: java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
java.lang.NullPointerException
255091.641: [deflating idle monitors, 0.0000797 secs]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&quot;Loaded org.slf4j.helpers.MessageFormatter&quot; from last NPE report might give you some hints.&lt;/p&gt;</comment>
                            <comment id="17272498" author="jshields-squarespace" created="Tue, 26 Jan 2021 23:56:48 +0000"  >&lt;p&gt;In an application using Log4j 2.12.1 and LMAX Disruptor 3.4.2, we experience the same issue.&lt;/p&gt;

&lt;p&gt;In our case, these exceptions are actually being written to &lt;tt&gt;stderr&lt;/tt&gt; at a high rate, ~7 times a second per application instance. It makes the application output absolutely unreadable. I would consider this issue more than minor for that reason.&lt;/p&gt;

&lt;p&gt;Here is our exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
AsyncLogger error handling event seq=44735, value=&lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.logging.log4j.core.async.RingBufferLogEvent@54ddc702&apos;&lt;/span&gt;: java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
java.lang.NullPointerException
	at org.apache.logging.log4j.core.async.RingBufferLogEvent.execute(RingBufferLogEvent.java:161)
	at org.apache.logging.log4j.core.async.RingBufferLogEventHandler.onEvent(RingBufferLogEventHandler.java:45)
	at org.apache.logging.log4j.core.async.RingBufferLogEventHandler.onEvent(RingBufferLogEventHandler.java:29)
	at com.lmax.disruptor.BatchEventProcessor.processEvents(BatchEventProcessor.java:168)
	at com.lmax.disruptor.BatchEventProcessor.run(BatchEventProcessor.java:125)
	at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:834)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Line 161 in &lt;tt&gt;RingBufferLogEvent.java&lt;/tt&gt; points to &lt;tt&gt;asyncLogger&lt;/tt&gt; being &lt;tt&gt;null&lt;/tt&gt;, as previously hypothesized.&lt;/p&gt;

&lt;p&gt;We have other similar applications using the same version of Log4j and LMAX Disruptor which don&apos;t produce these exceptions. I haven&apos;t narrowed down what possible difference could be causing it for this one application.&lt;/p&gt;</comment>
                            <comment id="17272510" author="jshields-squarespace" created="Wed, 27 Jan 2021 01:52:34 +0000"  >&lt;p&gt;If &lt;tt&gt;RingBufferLogEventTranslator#translateTo&lt;/tt&gt; throws an exception for &lt;em&gt;any&lt;/em&gt; reason, it looks like Disruptor&apos;s &lt;tt&gt;RingBuffer#translateAndPublish&lt;/tt&gt; still publishes the sequence in a &lt;tt&gt;finally&lt;/tt&gt; block (&lt;a href=&quot;https://github.com/LMAX-Exchange/disruptor/blob/ca35bc40eb7f834050793137b5996a0921173e2d/src/main/java/com/lmax/disruptor/RingBuffer.java#L958-L968&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;source&lt;/a&gt;). In such a case, will the &quot;untranslated&quot; event later be consumed by &lt;tt&gt;RingBufferLogEventHandler&lt;/tt&gt;, since its sequence was still published? That would result in the exception we see here.&lt;/p&gt;

&lt;p&gt;This discussion looks related: &lt;a href=&quot;https://github.com/LMAX-Exchange/disruptor/issues/244#issuecomment-437814712&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/LMAX-Exchange/disruptor/issues/244#issuecomment-437814712&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;There the suggestion was to detect events that weren&apos;t completely translated in the &lt;tt&gt;EventHandler&lt;/tt&gt;, and ignore their data.&lt;/p&gt;

&lt;p&gt;/&lt;/p&gt;

&lt;p&gt;Also, if the translator throws any exception besides &lt;tt&gt;NullPointerException&lt;/tt&gt;, it appears as if the exception will be propagated up to &lt;tt&gt;AbstractLogger#handleLogMessageException&lt;/tt&gt; and logged as a &lt;tt&gt;WARN&lt;/tt&gt; via the &lt;tt&gt;StatusLogger&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Whereas if the translator happens to throw a &lt;tt&gt;NullPointerException&lt;/tt&gt;, then &lt;tt&gt;AsyncLoggerDisruptor&lt;/tt&gt; will catch it earlier. First in &lt;tt&gt;AsyncLoggerDisruptor#tryPublish&lt;/tt&gt;, then again in &lt;tt&gt;AsyncLoggerDisruptor#enqueueLogMessageWhenQueueFull&lt;/tt&gt;. In both cases it logs it as a &lt;tt&gt;WARN&lt;/tt&gt; via the &lt;tt&gt;StatusLogger&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;It appears that &lt;tt&gt;StatusLogger&lt;/tt&gt;&apos;s default level is &lt;tt&gt;ERROR&lt;/tt&gt;, so we may not be seeing these exceptions in our logs if they are occurring. Perhaps we should change this to &lt;tt&gt;WARN&lt;/tt&gt; in our configurations and check for exceptions from the translator.&lt;/p&gt;</comment>
                            <comment id="17273172" author="jshields-squarespace" created="Wed, 27 Jan 2021 22:13:50 +0000"  >&lt;p&gt;We were able to reproduce this bug and find the root cause (in our case). Thanks to my colleague Dan Vinegrad for helping out with the debugging effort.&lt;/p&gt;

&lt;p&gt;Hibernate is logging a message using a &lt;tt&gt;StringFormattedMessage&lt;/tt&gt;. One of the format argument objects is one of our domain classes. Our domain class&apos;s &lt;tt&gt;toString&lt;/tt&gt; method has a bug that throws an exception.&lt;/p&gt;

&lt;p&gt;Then what happens is &lt;tt&gt;RingBufferLogEventTranslator#translateTo&lt;/tt&gt; indirectly triggers that &lt;tt&gt;toString&lt;/tt&gt; method, which triggers the exception and interrupts the translator. However, as previously mentioned, Disruptor still publishes the sequence, even though all the log event fields are missing. Then, the event is picked up by &lt;tt&gt;RingBufferLogEventHandler&lt;/tt&gt;, and a NPE is thrown because the fields are missing.&lt;/p&gt;

&lt;p&gt;I created a minimal reproducible example here: &lt;a href=&quot;https://github.com/jshields-squarespace/log4j2-async-npe-example&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jshields-squarespace/log4j2-async-npe-example&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I think that Log4j needs to handle the scenario where an exception is thrown in &lt;tt&gt;translateTo&lt;/tt&gt; and the log event is published with missing data.&lt;/p&gt;</comment>
                            <comment id="17273229" author="remkop@yahoo.com" created="Thu, 28 Jan 2021 01:03:12 +0000"  >&lt;p&gt;Thank you for the analysis. &lt;br/&gt;
It makes sense. &lt;br/&gt;
Will you be able to provide a pull request?&lt;/p&gt;</comment>
                            <comment id="17274097" author="jshields-squarespace" created="Fri, 29 Jan 2021 01:40:51 +0000"  >&lt;p&gt;I need to clear the Contributor License Agreement with my employer first. After that, I could provide a pull request.&lt;/p&gt;</comment>
                            <comment id="17338120" author="jacobrshields" created="Sun, 2 May 2021 20:47:52 +0000"  >&lt;p&gt;I finally cleared the Corporate CLA with my employer.&lt;/p&gt;

&lt;p&gt;I&apos;ve put up a PR with a fix: &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/487&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/487&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17338136" author="jacobrshields" created="Sun, 2 May 2021 22:28:46 +0000"  >&lt;p&gt;The previous PR was based off of &lt;tt&gt;master&lt;/tt&gt; / 3.x.&lt;/p&gt;

&lt;p&gt;I created a new PR based off of &lt;tt&gt;release-2.x&lt;/tt&gt; / 2.x: &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/488&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/488&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17361209" author="den.orlov.1" created="Thu, 10 Jun 2021 20:22:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rpopma&quot; class=&quot;user-hover&quot; rel=&quot;rpopma&quot;&gt;rpopma&lt;/a&gt; lets merge and release that PR with fixes?&lt;/p&gt;</comment>
                            <comment id="17386190" author="jira-bot" created="Fri, 23 Jul 2021 11:54:54 +0000"  >&lt;p&gt;Commit d6a512bd367459be40f5d8897f36a5d4587c1370 in logging-log4j2&apos;s branch refs/heads/release-2.x from Volkan Yazici&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=d6a512b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=d6a512b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2816&quot; title=&quot;NullPointerException from AsyncLogger&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2816&quot;&gt;&lt;del&gt;LOG4J2-2816&lt;/del&gt;&lt;/a&gt; Handle Disruptor event translation exceptions.&lt;/p&gt;</comment>
                            <comment id="17386200" author="jira-bot" created="Fri, 23 Jul 2021 12:09:42 +0000"  >&lt;p&gt;Commit 028a4ed2d5b0bc59208896cd006bd4a4d363a17e in logging-log4j2&apos;s branch refs/heads/master from Volkan Yazici&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=028a4ed&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=028a4ed&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2816&quot; title=&quot;NullPointerException from AsyncLogger&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2816&quot;&gt;&lt;del&gt;LOG4J2-2816&lt;/del&gt;&lt;/a&gt; Handle Disruptor event translation exceptions.&lt;/p&gt;</comment>
                            <comment id="17386202" author="vy" created="Fri, 23 Jul 2021 12:10:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jacobrshields&quot; class=&quot;user-hover&quot; rel=&quot;jacobrshields&quot;&gt;jacobrshields&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=orloden&quot; class=&quot;user-hover&quot; rel=&quot;orloden&quot;&gt;orloden&lt;/a&gt;, would you mind closing the ticket if you approve the merged changes, please?&lt;/p&gt;</comment>
                            <comment id="17386606" author="jacobrshields" created="Sat, 24 Jul 2021 01:09:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vy&quot; class=&quot;user-hover&quot; rel=&quot;vy&quot;&gt;vy&lt;/a&gt; The merged changes look good to me. Thanks for merging it in!&lt;/p&gt;</comment>
                            <comment id="17955663" author="jan.vermeulen@isencia.com" created="Mon, 2 Jun 2025 12:00:11 +0000"  >&lt;p&gt;This is NOT a comment on this issue. I actually want to report a new issue on the LOG4J2 project, but the project does not appear (at least to me) in the list of projects to choose from when creating a new issue.&lt;/p&gt;

&lt;p&gt;It&apos;s about a NPE in &lt;em&gt;org.apache.logging.log4j.core.async.RingBufferLogEventHandler4.notifyCallback():&lt;/em&gt; it tries to use an instance variable &lt;em&gt;sequenceCallback&lt;/em&gt; that is not set. The version of log4j2 I&apos;m using in &lt;em&gt;v2.24.3&lt;/em&gt;, in combination with &lt;em&gt;disruptor&lt;/em&gt; &lt;em&gt;v3.4.4.202406060700&lt;/em&gt;. According to the manifest file of log4j2-core, the accepted range of versions of disruptor is from 3.4 to 4 (excluded).&lt;/p&gt;

&lt;p&gt;But it appears to me that the &lt;em&gt;RingBufferLogEventHandler4&lt;/em&gt; implementation is conceived for disruptor 4. There is a method defined to set the value of &lt;em&gt;sequenceCallback&lt;/em&gt;:&lt;br/&gt;
&lt;font color=&quot;#000000&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#3f7f5f&quot;&gt;/*&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#3f7f5f&quot;&gt; * Overrides a method from Disruptor 4.x. Do not remove.&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#3f7f5f&quot;&gt; */&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#7f0055&quot;&gt;public&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; &lt;/font&gt;&lt;font color=&quot;#7f0055&quot;&gt;void&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; setSequenceCallback(&lt;/font&gt;&lt;font color=&quot;#7f0055&quot;&gt;final&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; Sequence &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;sequenceCallback&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;) {&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#7f0055&quot;&gt;this&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;.&lt;/font&gt;&lt;font color=&quot;#0000c0&quot;&gt;sequenceCallback&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt; = &lt;/font&gt;&lt;font color=&quot;#6a3e3e&quot;&gt;sequenceCallback&lt;/font&gt;&lt;font color=&quot;#000000&quot;&gt;;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt; }&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;So I suspect this code is actually meant to work with disruptor 4. I am working in an OSGI environment, so the version range in the Manifest file is used to determine which version of disruptor to use.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Can someone look at this, or indicate me how to create a proper issue on the LOG4J project for this. As it is now, we cannot use asynchronous logging due to this NPE. I suppose it is about correcting the version range to accept disruptor 4, or not to use the &lt;em&gt;RingBufferLogEventHandler4&lt;/em&gt; if working with disruptor 3.4.x.&lt;/p&gt;</comment>
                            <comment id="17955738" author="vy" created="Mon, 2 Jun 2025 18:12:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jan.vermeulen%40isencia.com&quot; class=&quot;user-hover&quot; rel=&quot;jan.vermeulen@isencia.com&quot;&gt;jan.vermeulen@isencia.com&lt;/a&gt;, as stated in &lt;a href=&quot;https://logging.apache.org/support.html#issues&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;our Support page&lt;/a&gt;, Log4j has migrated to &lt;a href=&quot;https://github.com/apache/logging-log4j2/issues&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;GitHub Issues&lt;/a&gt;. Would you submitting the problem there, please?&lt;/p&gt;</comment>
                            <comment id="17955759" author="jan.vermeulen@isencia.com" created="Mon, 2 Jun 2025 20:33:37 +0000"  >&lt;p&gt;Thanks for the reply. I have created the issue in GitLab: &lt;a href=&quot;https://github.com/apache/logging-log4j2/issues/3706&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/issues/3706&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            23 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0di8g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>