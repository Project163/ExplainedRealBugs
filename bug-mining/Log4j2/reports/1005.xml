<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:38:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-1243] Faulty placeholder substitution in config xml</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-1243</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;I&apos;m using log4j 2.5 in a REST service.&lt;/p&gt;

&lt;p&gt;There I would like to use the placeholder substitution to allow configuration of the log location.&lt;/p&gt;

&lt;p&gt;I tried this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Properties&amp;gt;&lt;/span&gt;
&amp;lt;!-- sets the path for log4j logs:
1. check whether java system property myapp.logs is set. If not:
2. check whether the OS environment variable MYAPP_LOGS is set. If not:
3. use logs dir in the current directory
--&amp;gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;logsPath&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;${sys:mypapp.logs:-${env:MYAPP_LOGS:-logs}}&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Property&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Properties&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This seems to work quite well with the exception, if myapp.logs is set, the path ends with &quot;}&quot;. So if I set the system property &quot;-Dmyapp.logs=foobar&quot; it creates the directory &quot;foobar}&quot; and puts the logs into that. For the ENV substitution it works. It also works when NO placeholder nesting is performed. So I guess the problem has something todo with that.&lt;/p&gt;

&lt;p&gt;See: &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/logging-log4j-user/201601.mbox/%3CD91F2A5E-92AD-4A94-BA89-CCB7B5F83974%40gmail.com%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mail-archives.apache.org/mod_mbox/logging-log4j-user/201601.mbox/%3CD91F2A5E-92AD-4A94-BA89-CCB7B5F83974%40gmail.com%3E&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Veit&lt;/p&gt;</description>
                <environment>&lt;p&gt;JDK 8&lt;/p&gt;</environment>
        <key id="12927115">LOG4J2-1243</key>
            <summary>Faulty placeholder substitution in config xml</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rgoers">Ralph Goers</assignee>
                                    <reporter username="vguna">Veit Guna</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Jan 2016 22:26:30 +0000</created>
                <updated>Thu, 19 Jan 2017 12:05:28 +0000</updated>
                            <resolved>Mon, 16 Jan 2017 14:59:29 +0000</resolved>
                                    <version>2.5</version>
                                    <fixVersion>2.8</fixVersion>
                                    <component>Lookups</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15259590" author="ralph.goers@dslextreme.com" created="Wed, 27 Apr 2016 05:46:13 +0000"  >&lt;p&gt;If I am understanding this issue correctly the desire is to have a substitution where the default value can be a lookup expression with its own default value.&lt;/p&gt;</comment>
                            <comment id="15260646" author="vguna" created="Wed, 27 Apr 2016 18:14:54 +0000"  >&lt;p&gt;Exactly. But as it seems it&apos;s already implemented, right? Resolving seems to work, but the resolved value has still one of the braces at the end &quot;}&quot;. So maybe it&apos;s just a simple substring typo...&lt;/p&gt;</comment>
                            <comment id="15348373" author="vguna" created="Fri, 24 Jun 2016 14:45:23 +0000"  >&lt;p&gt;Any news on this?&lt;/p&gt;</comment>
                            <comment id="15824115" author="ralph.goers@dslextreme.com" created="Mon, 16 Jan 2017 14:59:29 +0000"  >&lt;p&gt;A fix has been committed to master. Please verify and close.&lt;/p&gt;</comment>
                            <comment id="15824196" author="dimarzio" created="Mon, 16 Jan 2017 16:00:14 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ralph.goers%40dslextreme.com&quot; class=&quot;user-hover&quot; rel=&quot;ralph.goers@dslextreme.com&quot;&gt;ralph.goers@dslextreme.com&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Sorry your fix didn&apos;t solve the problem. The problem itself was not the resolution of the default value, but wrong string replacement in the StrSubstitutor line: 989 -&amp;gt; buf.replace(startPos, endPos, varValue);&lt;/p&gt;

&lt;p&gt;I used this test setup to test it: &lt;a href=&quot;https://github.com/dimarzio/logging&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/dimarzio/logging&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If you set the property path.configured.by.provisioning to some directory the result will be directory}&lt;/p&gt;

&lt;p&gt;How I wrote in the &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1589&quot; title=&quot;Value nesting during property substitution&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1589&quot;&gt;&lt;del&gt;LOG4J2-1589&lt;/del&gt;&lt;/a&gt; if you set the enableSubstitutionInVariables to true it solves the problem.&lt;/p&gt;</comment>
                            <comment id="15825490" author="jira-bot" created="Tue, 17 Jan 2017 05:47:55 +0000"  >&lt;p&gt;Commit c29526014207b3937b70a91c6572c40b6704262d in logging-log4j2&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ralph.goers%40dslextreme.com&quot; class=&quot;user-hover&quot; rel=&quot;ralph.goers@dslextreme.com&quot;&gt;ralph.goers@dslextreme.com&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=c295260&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=c295260&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1243&quot; title=&quot;Faulty placeholder substitution in config xml&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1243&quot;&gt;&lt;del&gt;LOG4J2-1243&lt;/del&gt;&lt;/a&gt; - Enable substitution in variables&lt;/p&gt;</comment>
                            <comment id="15825493" author="ralph.goers@dslextreme.com" created="Tue, 17 Jan 2017 05:49:10 +0000"  >&lt;p&gt;OK. I modified XmlLoggerPropsTest and verified the problem you reported and verified that enabling substitution in variables fixes this problem and what you are reporting. Please verify and close.&lt;/p&gt;</comment>
                            <comment id="15825606" author="dimarzio" created="Tue, 17 Jan 2017 07:59:06 +0000"  >&lt;p&gt;Great! I&apos;ll test it but I think the job is done.&lt;/p&gt;</comment>
                            <comment id="15826782" author="jira-bot" created="Tue, 17 Jan 2017 20:53:55 +0000"  >&lt;p&gt;Commit c29526014207b3937b70a91c6572c40b6704262d in logging-log4j2&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt;and1780-remove-ExecutorService-from-LoggerContext from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ralph.goers%40dslextreme.com&quot; class=&quot;user-hover&quot; rel=&quot;ralph.goers@dslextreme.com&quot;&gt;ralph.goers@dslextreme.com&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=c295260&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=c295260&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1243&quot; title=&quot;Faulty placeholder substitution in config xml&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1243&quot;&gt;&lt;del&gt;LOG4J2-1243&lt;/del&gt;&lt;/a&gt; - Enable substitution in variables&lt;/p&gt;</comment>
                            <comment id="15829788" author="dimarzio" created="Thu, 19 Jan 2017 12:05:28 +0000"  >&lt;p&gt;The fix works perfectly. Ticket can be closed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13005449">LOG4J2-1589</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 43 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2qs13:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>