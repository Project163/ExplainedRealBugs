<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:41:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-3092] JSON Template Layout JsonWriter formattableBuffer Memory leak</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-3092</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;h1&gt;&lt;a name=&quot;JSONTemplateLayout&quot;&gt;&lt;/a&gt;JSON Template Layout&lt;/h1&gt;

&lt;p&gt;1 use&#160;recycler is&#160;queue or&#160;threadLocal&lt;/p&gt;

&lt;p&gt;2 JsonWriter formattableBuffer receive big string&lt;/p&gt;

&lt;p&gt;3 the StringBuilder inner char array&#160; expansion and length never getting smaller&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;E.g.:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; test() {
    StringBuilder sb=&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StringBuilder();
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i=0;i&amp;lt;10;i++){
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; j=0;j&amp;lt;10;j++){
            sb.append(UUID.randomUUID());
        }
        log.info(&quot;&quot;+sb+sb);
    }
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;success&quot;&lt;/span&gt;;
}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13025643/13025643_image-2021-05-19-14-35-29-165.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13025642/13025642_image-2021-05-19-14-35-55-788.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13379208">LOG4J2-3092</key>
            <summary>JSON Template Layout JsonWriter formattableBuffer Memory leak</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vy">Volkan Yazici</assignee>
                                    <reporter username="xmh51">xmh51</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 May 2021 06:36:13 +0000</created>
                <updated>Tue, 27 Jul 2021 06:44:17 +0000</updated>
                            <resolved>Fri, 4 Jun 2021 09:01:34 +0000</resolved>
                                    <version>2.14.0</version>
                    <version>2.14.1</version>
                                    <fixVersion>3.0.0</fixVersion>
                    <fixVersion>2.15.0</fixVersion>
                                    <component>JsonTemplateLayout</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17347342" author="vy" created="Wed, 19 May 2021 06:58:27 +0000"  >&lt;p&gt;Thanks for the detailed report &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xmh51&quot; class=&quot;user-hover&quot; rel=&quot;xmh51&quot;&gt;xmh51&lt;/a&gt;! I will tackle this issue in 1-2 weeks.&lt;/p&gt;</comment>
                            <comment id="17352543" author="jira-bot" created="Thu, 27 May 2021 15:02:50 +0000"  >&lt;p&gt;Commit 44df19934520c487e2dd0672e7deda7d22ff8e05 in logging-log4j2&apos;s branch refs/heads/release-2.x from Volkan Yazici&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=44df199&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=44df199&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3092&quot; title=&quot;JSON Template Layout JsonWriter formattableBuffer Memory leak&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3092&quot;&gt;&lt;del&gt;LOG4J2-3092&lt;/del&gt;&lt;/a&gt; Fix JsonWriter memory leaks due to retained excessive buffer growth.&lt;/p&gt;</comment>
                            <comment id="17352547" author="vy" created="Thu, 27 May 2021 15:06:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xmh51&quot; class=&quot;user-hover&quot; rel=&quot;xmh51&quot;&gt;xmh51&lt;/a&gt;, I have just pushed a fix to &lt;tt&gt;release-2.x&lt;/tt&gt;, it should be visible in the next 2.5.0-SNAPSHOT artifact accessible in &lt;a href=&quot;https://repository.apache.org/content/groups/public/org/apache/logging/log4j/log4j-layout-template-json/2.15.0-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;the public snapshot repository&lt;/a&gt;. Would you mind verifying the fix and closing the ticket, please? (I will port this to &lt;tt&gt;master&lt;/tt&gt; after your check.)&lt;/p&gt;</comment>
                            <comment id="17356480" author="xmh51" created="Thu, 3 Jun 2021 14:41:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vy&quot; class=&quot;user-hover&quot; rel=&quot;vy&quot;&gt;vy&lt;/a&gt;&#160;I am going to check&#160;&lt;/p&gt;</comment>
                            <comment id="17356484" author="xmh51" created="Thu, 3 Jun 2021 14:44:20 +0000"  >&lt;p&gt;&lt;em&gt;Please wait&lt;/em&gt;&#160;for&#160;&lt;em&gt;1&lt;/em&gt;&#160;or&#160;&lt;em&gt;2 days&lt;/em&gt;&lt;/p&gt;</comment>
                            <comment id="17357187" author="xmh51" created="Fri, 4 Jun 2021 08:43:44 +0000"  >&lt;p&gt;After checking, the issue&#160;&lt;em&gt;does not&lt;/em&gt;&#160;appear, thanks&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17357195" author="vy" created="Fri, 4 Jun 2021 09:01:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xmh51&quot; class=&quot;user-hover&quot; rel=&quot;xmh51&quot;&gt;xmh51&lt;/a&gt;, thanks for checking and the report, much appreciated!&lt;/p&gt;</comment>
                            <comment id="17357197" author="jira-bot" created="Fri, 4 Jun 2021 09:02:55 +0000"  >&lt;p&gt;Commit 49e022211d6d09c5459f9c0d8e8b34a18c553ef4 in logging-log4j2&apos;s branch refs/heads/master from Volkan Yazici&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=49e0222&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=49e0222&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3092&quot; title=&quot;JSON Template Layout JsonWriter formattableBuffer Memory leak&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3092&quot;&gt;&lt;del&gt;LOG4J2-3092&lt;/del&gt;&lt;/a&gt; Fix JsonWriter memory leaks due to retained excessive buffer growth.&lt;/p&gt;</comment>
                            <comment id="17358252" author="jira-bot" created="Sun, 6 Jun 2021 22:48:54 +0000"  >&lt;p&gt;Commit 49e022211d6d09c5459f9c0d8e8b34a18c553ef4 in logging-log4j2&apos;s branch refs/heads/mean-bean-machine from Volkan Yazici&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=49e0222&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=49e0222&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3092&quot; title=&quot;JSON Template Layout JsonWriter formattableBuffer Memory leak&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3092&quot;&gt;&lt;del&gt;LOG4J2-3092&lt;/del&gt;&lt;/a&gt; Fix JsonWriter memory leaks due to retained excessive buffer growth.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13391662">LOG4J2-3129</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13025643" name="image-2021-05-19-14-35-29-165.png" size="189256" author="xmh51" created="Wed, 19 May 2021 06:35:31 +0000"/>
                            <attachment id="13025642" name="image-2021-05-19-14-35-55-788.png" size="111893" author="xmh51" created="Wed, 19 May 2021 06:35:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 23 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0r5vc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>