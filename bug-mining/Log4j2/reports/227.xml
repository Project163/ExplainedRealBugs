<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:32:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-470] Resolution of ${hostName} in log4j2.xml file only works after first reference</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-470</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;I am using ${hostName} to include the hostname in the log file.  When I use it it resolves to &quot;${hostName}&quot; the first time it is referred to in the log and then the proper hostname after that.&lt;/p&gt;

&lt;p&gt;Example configuration (comment out the &quot;Properties&quot; section to duplicate):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;?&amp;gt;
&amp;lt;Configuration monitorInterval=&lt;span class=&quot;code-quote&quot;&gt;&quot;60&quot;&lt;/span&gt;	name=&lt;span class=&quot;code-quote&quot;&gt;&quot;SMSLog4JConfiguration&quot;&lt;/span&gt;&amp;gt; &amp;lt;!-- add &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; to spit out debug about configuration: &lt;span class=&quot;code-quote&quot;&gt;&apos;status=&lt;span class=&quot;code-quote&quot;&gt;&quot;debug&quot;&lt;/span&gt;&apos;&lt;/span&gt;  --&amp;gt;

	&amp;lt;!-- This seems to be a bug, but the $hostName seems to need to be referenced
	     once before it can be used.  Maybe it gets correct in a &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; log4j2 release --&amp;gt; 
	&amp;lt;Properties&amp;gt;
		&amp;lt;Property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;theHostName&quot;&lt;/span&gt;&amp;gt;${hostName}&amp;lt;/Property&amp;gt;
	&amp;lt;/Properties&amp;gt;


	&amp;lt;Appenders&amp;gt;
		&amp;lt;RollingFile name=&lt;span class=&quot;code-quote&quot;&gt;&quot;RollingFileAppender&quot;&lt;/span&gt; fileName=&lt;span class=&quot;code-quote&quot;&gt;&quot;/applicationlogs/CTMSApplicationService-${hostName}.log&quot;&lt;/span&gt;
			filePattern=&lt;span class=&quot;code-quote&quot;&gt;&quot;/applicationlogs/${hostName}-%d{MM-dd-yyyy}-%i.log&quot;&lt;/span&gt;&amp;gt;
			&amp;lt;Policies&amp;gt;
				&amp;lt;OnStartupTriggeringPolicy /&amp;gt;
				&amp;lt;TimeBasedTriggeringPolicy interval=&lt;span class=&quot;code-quote&quot;&gt;&quot;24&quot;&lt;/span&gt; modulate=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt; /&amp;gt;
			&amp;lt;/Policies&amp;gt;
			&amp;lt;PatternLayout pattern=&lt;span class=&quot;code-quote&quot;&gt;&quot;[%d{ISO8601}] [%t] %-5level %logger{6} - %msg%n&quot;&lt;/span&gt; /&amp;gt;
		&amp;lt;/RollingFile&amp;gt;
	&amp;lt;/Appenders&amp;gt;
	&amp;lt;Loggers&amp;gt;
		&amp;lt;!-- &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;includeLocation&quot;&lt;/span&gt; is &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, but I want to be clear --&amp;gt;
		&amp;lt;Root level=&lt;span class=&quot;code-quote&quot;&gt;&quot;debug&quot;&lt;/span&gt; includeLocation=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt;&amp;gt;
			&amp;lt;AppenderRef ref=&lt;span class=&quot;code-quote&quot;&gt;&quot;RollingFileAppender&quot;&lt;/span&gt; /&amp;gt;
		&amp;lt;/Root&amp;gt;
	&amp;lt;/Loggers&amp;gt;
&amp;lt;/Configuration&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Windows 7, JDK 1.7, Eclipse 4.2&lt;/p&gt;</environment>
        <key id="12685852">LOG4J2-470</key>
            <summary>Resolution of ${hostName} in log4j2.xml file only works after first reference</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Russell.Nile@nileassociates.com">Russell J. Nile</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Dec 2013 16:53:02 +0000</created>
                <updated>Sun, 12 Jan 2014 01:51:56 +0000</updated>
                            <resolved>Sun, 12 Jan 2014 01:51:56 +0000</resolved>
                                    <version>2.0-beta9</version>
                                                    <component>Configurators</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13862466" author="ralph.goers@dslextreme.com" created="Sun, 5 Jan 2014 01:35:45 +0000"  >&lt;p&gt;Can you test the latest code in trunk? I created a unit test for this and it doesn&apos;t fail.&lt;/p&gt;</comment>
                            <comment id="13864651" author="russell.nile@nileassociates.com" created="Tue, 7 Jan 2014 20:27:51 +0000"  >&lt;p&gt;Sorry for the delay in responding...&lt;/p&gt;

&lt;p&gt;I built the latest/greatest from the trunk and still see the issue on my machine.  &lt;/p&gt;

&lt;p&gt;With the dummy hostname resolution in place:&lt;br/&gt;
  CTMSApplicationService-LH7U0CNU2050GKX.log&lt;br/&gt;
Without it:&lt;br/&gt;
  CTMSApplicationService-${hostName}.log&lt;/p&gt;
</comment>
                            <comment id="13864654" author="russell.nile@nileassociates.com" created="Tue, 7 Jan 2014 20:30:42 +0000"  >&lt;p&gt;Interesting to note; when I have the dummy reference commented out the first reference will use the ${hostname} but even the RollingAppender OnStartupTriggeringPolicy uses a proper name when rolling the &lt;a href=&quot;file:&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:\&lt;/a&gt;&lt;br/&gt;
  CTMSApplicationService-LH7U0CNU2050GKX-01-07-2014-1.log&lt;/p&gt;</comment>
                            <comment id="13864684" author="russell.nile@nileassociates.com" created="Tue, 7 Jan 2014 21:00:27 +0000"  >&lt;p&gt;Something even more interesting....I don&apos;t need to reference &quot;hostName&quot;, I just need to put in an empty &amp;lt;Properties/&amp;gt; tag in there and it resolves just fine the first time through.&lt;br/&gt;
*******************************************************&lt;br/&gt;
&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;Configuration monitorInterval=&quot;60&quot;	name=&quot;SMSLog4JConfiguration&quot; status=&quot;debug&quot;&amp;gt; &amp;lt;!-- add this to spit out debug about configuration: &apos;status=&quot;debug&quot;&apos;  --&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;Properties/&amp;gt;&lt;/p&gt;

&lt;p&gt;	&amp;lt;Appenders&amp;gt;&lt;br/&gt;
		&amp;lt;RollingFile name=&quot;RollingFileAppender&quot; fileName=&quot;/applicationlogs/CTMSApplicationService-${hostName}.log&quot;&lt;br/&gt;
			filePattern=&quot;/applicationlogs/CTMSApplicationService-${hostName}-%d&lt;/p&gt;
{MM-dd-yyyy}
&lt;p&gt;-%i.log&quot;&amp;gt;&lt;br/&gt;
			&amp;lt;Policies&amp;gt;&lt;br/&gt;
				&amp;lt;OnStartupTriggeringPolicy/&amp;gt;&lt;br/&gt;
				&amp;lt;TimeBasedTriggeringPolicy interval=&quot;1&quot; modulate=&quot;true&quot; /&amp;gt;&lt;br/&gt;
			&amp;lt;/Policies&amp;gt;&lt;br/&gt;
			&amp;lt;PatternLayout pattern=&quot;[%d&lt;/p&gt;
{ISO8601}
&lt;p&gt;] &lt;span class=&quot;error&quot;&gt;&amp;#91;%t&amp;#93;&lt;/span&gt; %-5level %logger&lt;/p&gt;
{6}
&lt;p&gt; - %msg%n&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;/RollingFile&amp;gt;&lt;br/&gt;
	&amp;lt;/Appenders&amp;gt;&lt;br/&gt;
	&amp;lt;Loggers&amp;gt;&lt;br/&gt;
		&amp;lt;!-- default for &quot;includeLocation&quot; is false, but I want to be clear --&amp;gt;&lt;br/&gt;
		&amp;lt;Root level=&quot;debug&quot; includeLocation=&quot;false&quot;&amp;gt;&lt;br/&gt;
			&amp;lt;AppenderRef ref=&quot;RollingFileAppender&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;/Root&amp;gt;&lt;br/&gt;
	&amp;lt;/Loggers&amp;gt;&lt;br/&gt;
&amp;lt;/Configuration&amp;gt;&lt;br/&gt;
*******************************************************&lt;/p&gt;</comment>
                            <comment id="13868922" author="ralph.goers@dslextreme.com" created="Sun, 12 Jan 2014 01:51:56 +0000"  >&lt;p&gt;Thanks for the information. It turns out that the property was not being set until after the first configuration element so having a property or a global filter first caused it to work. I have fixed this in revision 1557479. Please verify and close.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364889</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 45 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1qw6v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365189</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>