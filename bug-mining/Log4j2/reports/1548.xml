<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:42:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-3317] After 2.17.1 upgarde, Route appenders with dynamic file writing are not working . </title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-3317</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;Hello Sir,&lt;/p&gt;

&lt;p&gt;With log4j2 2.13.3 , Route appenders with context pattern checks for dynamic file writing are working fine. After 2.17.1 the functionality is broken.&lt;/p&gt;

&lt;p&gt;I have upgraded to 2.17.1 and our java code, I am setting the ROUTINGKEY in threadcontext map. Also i set the system properties, &#160;log4j2.enableJndiLookup, log4j2.enableJndiJms, and log4j2.enableJndiContextSelector to true for all said tags after 2.17.1 upgrade.&lt;/p&gt;

&lt;p&gt;When I check output file, its not writing the logs to Route File what we specify but general RollingFile logger appenders are working fine. Please let me know if you have faced this issue or any mitigation plan? Please let me know if you want any logs and i will share those if there is any specific procedure given.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Calling the below Route from Async logging.&lt;/p&gt;

&lt;p&gt;here my example xml used the same as given in log4j2 documentaion.&lt;/p&gt;

&lt;p&gt;&amp;lt;Route key=&quot;$${ctx:ROUTINGKEY}&quot;&amp;gt;&lt;br/&gt;
&amp;lt;RollingFile name=&quot;Rolling-default&quot; fileName=&quot;logs/default.log&quot;&lt;br/&gt;
filePattern=&quot;./logs/${date:yyyy-MM}/default-%d{yyyy-MM-dd}-%i.log.gz&quot;&amp;gt;&lt;br/&gt;
&amp;lt;PatternLayout&amp;gt;&lt;br/&gt;
&amp;lt;pattern&amp;gt;%d{ISO8601} &lt;span class=&quot;error&quot;&gt;&amp;#91;%t&amp;#93;&lt;/span&gt; %p %c{3} - %m%n&amp;lt;/pattern&amp;gt;&lt;br/&gt;
&amp;lt;/PatternLayout&amp;gt;&lt;br/&gt;
&amp;lt;Policies&amp;gt;&lt;br/&gt;
&amp;lt;TimeBasedTriggeringPolicy interval=&quot;6&quot; modulate=&quot;true&quot; /&amp;gt;&lt;br/&gt;
&amp;lt;SizeBasedTriggeringPolicy size=&quot;10 MB&quot; /&amp;gt;&lt;br/&gt;
&amp;lt;/Policies&amp;gt;&lt;br/&gt;
&amp;lt;/RollingFile&amp;gt;&lt;br/&gt;
&amp;lt;/Route&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;Route&amp;gt;&lt;br/&gt;
&amp;lt;RollingFile name=&quot;Rolling-${ctx:ROUTINGKEY}&quot; fileName=&quot;logs/other-${ctx:ROUTINGKEY}.log&quot;&lt;br/&gt;
filePattern=&quot;./logs/${date:yyyy-MM}/${ctx:ROUTINGKEY}&lt;del&gt;other&lt;/del&gt;%d{yyyy-MM-dd}-%i.log.gz&quot;&amp;gt;&lt;br/&gt;
&amp;lt;PatternLayout&amp;gt;&lt;br/&gt;
&amp;lt;pattern&amp;gt;%d{ISO8601} &lt;span class=&quot;error&quot;&gt;&amp;#91;%t&amp;#93;&lt;/span&gt; %p %c{3} - %m%n&amp;lt;/pattern&amp;gt;&lt;br/&gt;
&amp;lt;/PatternLayout&amp;gt;&lt;br/&gt;
&amp;lt;Policies&amp;gt;&lt;br/&gt;
&amp;lt;TimeBasedTriggeringPolicy interval=&quot;6&quot; modulate=&quot;true&quot; /&amp;gt;&lt;br/&gt;
&amp;lt;SizeBasedTriggeringPolicy size=&quot;10 MB&quot; /&amp;gt;&lt;br/&gt;
&amp;lt;/Policies&amp;gt;&lt;br/&gt;
&amp;lt;/RollingFile&amp;gt;&lt;br/&gt;
&amp;lt;/Route&amp;gt;&lt;br/&gt;
&amp;lt;/Routes&amp;gt;&lt;br/&gt;
&amp;lt;/Routing&amp;gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>&lt;p&gt;spring boot log4j2.&lt;/p&gt;

&lt;p&gt;deployed on wildfly server.&lt;/p&gt;</environment>
        <key id="13420723">LOG4J2-3317</key>
            <summary>After 2.17.1 upgarde, Route appenders with dynamic file writing are not working . </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ckozak">Carter Kozak</assignee>
                                    <reporter username="esrimed">Srinivasa Babu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Jan 2022 05:56:47 +0000</created>
                <updated>Mon, 12 Sep 2022 19:43:00 +0000</updated>
                            <resolved>Tue, 8 Feb 2022 20:51:46 +0000</resolved>
                                                    <fixVersion>2.17.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="17469795" author="JIRAUSER283150" created="Thu, 6 Jan 2022 09:34:42 +0000"  >&lt;p&gt;Same question,witch version used before your upgrade?&lt;/p&gt;</comment>
                            <comment id="17469808" author="JIRAUSER283062" created="Thu, 6 Jan 2022 10:02:33 +0000"  >&lt;p&gt;Hello , its 2.13.3. I am sorry i didn&apos;t mention it in the statement.&lt;/p&gt;</comment>
                            <comment id="17469867" author="JIRAUSER283150" created="Thu, 6 Jan 2022 12:10:31 +0000"  >&lt;p&gt;you can back to 2.16.0 temporary&lt;/p&gt;</comment>
                            <comment id="17470503" author="JIRAUSER283062" created="Fri, 7 Jan 2022 10:19:35 +0000"  >&lt;p&gt;Hello Sir,&lt;/p&gt;

&lt;p&gt;Its working fine with 2.16.0. Hope the things will be fixed in upcoming releases. Looking forward for it.&lt;/p&gt;

&lt;p&gt;Many thanks for help.&lt;/p&gt;</comment>
                            <comment id="17477800" author="JIRAUSER283773" created="Tue, 18 Jan 2022 12:09:27 +0000"  >&lt;p&gt;We switched from the version&#160;2.11.1 to 2.17.0 and writing to separate files stopped working. Configuration log4j:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Appenders&amp;gt;&lt;/span&gt;
...
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Routing name=&lt;span class=&quot;code-quote&quot;&gt;&quot;routing&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
  &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Routes pattern=&lt;span class=&quot;code-quote&quot;&gt;&quot;$${ctx:V_PID}&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Route&amp;gt;&lt;/span&gt;
  &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;RollingFile name=&lt;span class=&quot;code-quote&quot;&gt;&quot;rolling-${ctx:V_PID}&quot;&lt;/span&gt; fileName=&lt;span class=&quot;code-quote&quot;&gt;&quot;${logPath}/task-${ctx:V_PID}.log&quot;&lt;/span&gt;
  &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;filePattern=&lt;span class=&quot;code-quote&quot;&gt;&quot;${logArchPath}/task-${ctx:V_PID}-${archFile}&quot;&lt;/span&gt; ignoreExceptions=&lt;span class=&quot;code-quote&quot;&gt;&quot;false&quot;&lt;/span&gt;&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;PatternLayout pattern=&lt;span class=&quot;code-quote&quot;&gt;&quot;${pattern}&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;SizeBasedTriggeringPolicy size=&lt;span class=&quot;code-quote&quot;&gt;&quot;10 MB&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/RollingFile&amp;gt;&lt;/span&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Route&amp;gt;&lt;/span&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Routes&amp;gt;&lt;/span&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;IdlePurgePolicy timeToLive=&lt;span class=&quot;code-quote&quot;&gt;&quot;2&quot;&lt;/span&gt; timeUnit=&lt;span class=&quot;code-quote&quot;&gt;&quot;minutes&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Routing&amp;gt;&lt;/span&gt;
...
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Appenders&amp;gt;&lt;/span&gt;

&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Loggers&amp;gt;&lt;/span&gt;
  &#160; &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;com.rou.let&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;trace&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;AppenderRef ref=&lt;span class=&quot;code-quote&quot;&gt;&quot;routing&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
&#160; &#160; &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Logger&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Loggers&amp;gt;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;In code we use Slf4J logger (org.slf4j.Logger) and org.apache.logging.log4j.ThreadContext :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ThreadContext.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;V_PID&quot;&lt;/span&gt;, pid); 
org.slf4j.Logger logger =org.slf4j.LoggerFactory.getLogger(MessageFormat.format(...));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;maven dependencies in pom.xml:&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
....
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;slf4j.version&amp;gt;&lt;/span&gt;1.7.7&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/slf4j.version&amp;gt;&lt;/span&gt; 
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;log4j2.version&amp;gt;&lt;/span&gt;2.17.0&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/log4j2.version&amp;gt;&lt;/span&gt;
...
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.slf4j&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;slf4j-api&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;${slf4j.version}&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;

&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.logging.log4j&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;log4j-slf4j-impl&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;${log4j2.version}&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;

&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.logging.log4j&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;log4j-api&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;${log4j2.version}&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;

&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.logging.log4j&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;log4j-core&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;${log4j2.version}&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We use this in our web application which is deployed on Weblogic 12.2.1.0.0&lt;/p&gt;

&lt;p&gt;What can be wrong? Why aren&apos;t separate files (task-${ctx:V_PID}.log) created in the folder {logPath}?&#160;&lt;/p&gt;

&lt;p&gt;Before library version 2.12.2 (inclusive),it&apos;s worked!&lt;/p&gt;</comment>
                            <comment id="17478198" author="ckozak" created="Tue, 18 Jan 2022 20:57:46 +0000"  >&lt;p&gt;Can you please provide the full contents of your configuration?&lt;br/&gt;
This document provides some details about the changes:&#160;&lt;a href=&quot;https://github.com/apache/logging-log4j2/blob/release-2.x/docs/2.17.0-interpolation.md&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/blob/release-2.x/docs/2.17.0-interpolation.md&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Only one level of interpolation is handled, so if you&apos;re referencing a property from within a &amp;lt;Route&amp;gt; and that property includes something like ${ctx:SomeVariable}, it will not recursively be evaluated. You may need to inline the value of the property into the route itself.&lt;br/&gt;
Without either a reproducer, or minimally a full copy of your configuration, I cannot provide concrete advice.&lt;/p&gt;</comment>
                            <comment id="17489111" author="ckozak" created="Tue, 8 Feb 2022 20:50:47 +0000"  >&lt;p&gt;This is fixed by &lt;a href=&quot;https://github.com/apache/logging-log4j2/commit/17a77f5c27bda545de4b8eda46590401313e0be8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/commit/17a77f5c27bda545de4b8eda46590401313e0be8&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17489113" author="jira-bot" created="Tue, 8 Feb 2022 20:51:27 +0000"  >&lt;p&gt;Commit 17a77f5c27bda545de4b8eda46590401313e0be8 in logging-log4j2&apos;s branch refs/heads/release-2.x from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=17a77f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=17a77f5&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3317&quot; title=&quot;After 2.17.1 upgarde, Route appenders with dynamic file writing are not working . &quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3317&quot;&gt;&lt;del&gt;LOG4J2-3317&lt;/del&gt;&lt;/a&gt;: Fix RoutingAppender backcompat and improve lookup security&lt;/p&gt;

&lt;p&gt;This change unifies our configuration-time and runtime property&lt;br/&gt;
handling logic in order to make configuration-time properties&lt;br/&gt;
safer and more obvious, while allowing RoutingAppender configurations&lt;br/&gt;
that were broken by 2.17.1 to work as expected once again.&lt;/p&gt;

&lt;p&gt;This is done using two high-level ideas:&lt;br/&gt;
1. Properties defined in the configuration are aware of lookups,&lt;br/&gt;
   so the lookup-engine may resolve properties defined in the&lt;br/&gt;
   top level logging configuraton recursively. This applies only&lt;br/&gt;
   to the property literal, not the result of lookups used within&lt;br/&gt;
   configuration properties.&lt;br/&gt;
2. No recursive evaluation of lookup results. While properties are&lt;br/&gt;
   a special case, the data returned from other sources must not&lt;br/&gt;
   itself be evaluated. This matches the restriction we introduced&lt;br/&gt;
   in 2.17.1 for runtime lookups, however it applies everywhere&lt;br/&gt;
   and shouldn&apos;t result in breaks due to property traversal being&lt;br/&gt;
   allowed.&lt;/p&gt;

&lt;p&gt;This introduces some level of risk, unlike the changes&lt;br/&gt;
in 2.17.1, this update the behavior of all lookups and is not&lt;br/&gt;
bounded to less-common runtime lookups.&lt;br/&gt;
We do not expect this to break users configurations, however&lt;br/&gt;
there are some cases in which we have intentionally changed&lt;br/&gt;
behavior:&lt;/p&gt;

&lt;p&gt;Given environment `FOO=${lower:BAR}`&lt;br/&gt;
Using `&amp;lt;File name=&quot;${env:FOO}&quot;&amp;gt;` in a configuration will result&lt;br/&gt;
in a File appender with the literal name `${lower:BAR}` where&lt;br/&gt;
it would have previously evaluated to `bar`. This resolves an&lt;br/&gt;
ambiguity problem where those setting environment variables&lt;br/&gt;
don&apos;t need to be aware of log4j2 or our lookup syntax.&lt;/p&gt;</comment>
                            <comment id="17489114" author="ckozak" created="Tue, 8 Feb 2022 20:51:46 +0000"  >&lt;p&gt;Please test using a snapshot build, and close the ticket once you&apos;re satisfied&lt;/p&gt;</comment>
                            <comment id="17489246" author="ralph.goers@dslextreme.com" created="Wed, 9 Feb 2022 05:23:01 +0000"  >&lt;p&gt;It occurs to me that my configurations use ${lower:${spring.application.name}}. Is this still going to work? If not then I will require that being allowed before a release.&lt;/p&gt;</comment>
                            <comment id="17489469" author="garydgregory" created="Wed, 9 Feb 2022 11:08:26 +0000"  >&lt;p&gt;Sounds like we better have a unit test that covers that use case, then you won&apos;t have to worry about it from commit to commit, release to release.&#160;&lt;/p&gt;</comment>
                            <comment id="17489558" author="ckozak" created="Wed, 9 Feb 2022 13:52:24 +0000"  >&lt;p&gt;Test coverage is the best option.&lt;br/&gt;
For what it&apos;s worth, I believe we do have similar types of tests, and fully expect that case to work &#8211; our restriction is upon the evaluation of results of a lookup e.g. &lt;tt&gt;${spring.application.name&lt;/tt&gt;} returning a lookup itself, not lookups that are written to evaluate upon the result of another as you have described (the difference is subtle, but in your case it&apos;s obvious that &lt;tt&gt;lower&lt;/tt&gt; is expected to be evaluated upon the result of the spring lookup, so we allow it.&lt;/p&gt;</comment>
                            <comment id="17491021" author="jira-bot" created="Fri, 11 Feb 2022 16:21:28 +0000"  >&lt;p&gt;Commit 17a77f5c27bda545de4b8eda46590401313e0be8 in logging-log4j2&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3393&quot; title=&quot;JSON template layout performance regression&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3393&quot;&gt;&lt;del&gt;LOG4J2-3393&lt;/del&gt;&lt;/a&gt; from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=17a77f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=17a77f5&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3317&quot; title=&quot;After 2.17.1 upgarde, Route appenders with dynamic file writing are not working . &quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3317&quot;&gt;&lt;del&gt;LOG4J2-3317&lt;/del&gt;&lt;/a&gt;: Fix RoutingAppender backcompat and improve lookup security&lt;/p&gt;

&lt;p&gt;This change unifies our configuration-time and runtime property&lt;br/&gt;
handling logic in order to make configuration-time properties&lt;br/&gt;
safer and more obvious, while allowing RoutingAppender configurations&lt;br/&gt;
that were broken by 2.17.1 to work as expected once again.&lt;/p&gt;

&lt;p&gt;This is done using two high-level ideas:&lt;br/&gt;
1. Properties defined in the configuration are aware of lookups,&lt;br/&gt;
   so the lookup-engine may resolve properties defined in the&lt;br/&gt;
   top level logging configuraton recursively. This applies only&lt;br/&gt;
   to the property literal, not the result of lookups used within&lt;br/&gt;
   configuration properties.&lt;br/&gt;
2. No recursive evaluation of lookup results. While properties are&lt;br/&gt;
   a special case, the data returned from other sources must not&lt;br/&gt;
   itself be evaluated. This matches the restriction we introduced&lt;br/&gt;
   in 2.17.1 for runtime lookups, however it applies everywhere&lt;br/&gt;
   and shouldn&apos;t result in breaks due to property traversal being&lt;br/&gt;
   allowed.&lt;/p&gt;

&lt;p&gt;This introduces some level of risk, unlike the changes&lt;br/&gt;
in 2.17.1, this update the behavior of all lookups and is not&lt;br/&gt;
bounded to less-common runtime lookups.&lt;br/&gt;
We do not expect this to break users configurations, however&lt;br/&gt;
there are some cases in which we have intentionally changed&lt;br/&gt;
behavior:&lt;/p&gt;

&lt;p&gt;Given environment `FOO=${lower:BAR}`&lt;br/&gt;
Using `&amp;lt;File name=&quot;${env:FOO}&quot;&amp;gt;` in a configuration will result&lt;br/&gt;
in a File appender with the literal name `${lower:BAR}` where&lt;br/&gt;
it would have previously evaluated to `bar`. This resolves an&lt;br/&gt;
ambiguity problem where those setting environment variables&lt;br/&gt;
don&apos;t need to be aware of log4j2 or our lookup syntax.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                            <outwardlinks description="fixes">
                                        <issuelink>
            <issuekey id="13418469">LOG4J2-3259</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13418459">LOG4J2-3258</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13423336">LOG4J2-3346</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13425788">LOG4J2-3382</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13423468">LOG4J2-3350</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13431526">LOG4J2-3424</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13481163">LOG4J2-3592</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 39 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0y94g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>