<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:42:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-3183] JsonTemplateLayout epoch resolver renders incorrect values</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-3183</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;JTL epoch resolver renders the same timestamp repeatedly. See the following application using &lt;tt&gt;log4j-layout-template-json&lt;/tt&gt; 2.14.1:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; InterruptedException {
    initLog4j();
    Logger logger = LogManager.getLogger();
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; 5; i++) {
        logger.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;{}&quot;&lt;/span&gt;, i);
        &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(100);
    }
}

&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; LoggerContext initLog4j() {

    &lt;span class=&quot;code-comment&quot;&gt;// Create the configuration builder.
&lt;/span&gt;    ConfigurationBuilder&amp;lt;BuiltConfiguration&amp;gt; configBuilder = ConfigurationBuilderFactory
            .newConfigurationBuilder()
            .setStatusLevel(Level.ERROR)
            .setConfigurationName(TimeDriftDemo.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getSimpleName());

    &lt;span class=&quot;code-comment&quot;&gt;// Create the configuration.
&lt;/span&gt;    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; appenderName = &lt;span class=&quot;code-quote&quot;&gt;&quot;Console&quot;&lt;/span&gt;;
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; eventTemplate = &quot;&quot; +
            &lt;span class=&quot;code-quote&quot;&gt;&quot;[{\&quot;&lt;/span&gt;$resolver\&lt;span class=&quot;code-quote&quot;&gt;&quot;:\&quot;&lt;/span&gt;timestamp\&lt;span class=&quot;code-quote&quot;&gt;&quot;,\&quot;&lt;/span&gt;epoch\&lt;span class=&quot;code-quote&quot;&gt;&quot;:{\&quot;&lt;/span&gt;unit\&lt;span class=&quot;code-quote&quot;&gt;&quot;:\&quot;&lt;/span&gt;nanos\&lt;span class=&quot;code-quote&quot;&gt;&quot;}}&quot;&lt;/span&gt; +
            &lt;span class=&quot;code-quote&quot;&gt;&quot;,{\&quot;&lt;/span&gt;$resolver\&lt;span class=&quot;code-quote&quot;&gt;&quot;:\&quot;&lt;/span&gt;timestamp\&lt;span class=&quot;code-quote&quot;&gt;&quot;,\&quot;&lt;/span&gt;pattern\&lt;span class=&quot;code-quote&quot;&gt;&quot;:{\&quot;&lt;/span&gt;format\&lt;span class=&quot;code-quote&quot;&gt;&quot;:\&quot;&lt;/span&gt;ss.SSS&lt;span class=&quot;code-quote&quot;&gt;&apos;Z&apos;&lt;/span&gt;\&lt;span class=&quot;code-quote&quot;&gt;&quot;,\&quot;&lt;/span&gt;timeZone\&lt;span class=&quot;code-quote&quot;&gt;&quot;:\&quot;&lt;/span&gt;UTC\&lt;span class=&quot;code-quote&quot;&gt;&quot;,\&quot;&lt;/span&gt;locale\&lt;span class=&quot;code-quote&quot;&gt;&quot;:\&quot;&lt;/span&gt;en_US\&lt;span class=&quot;code-quote&quot;&gt;&quot;}}&quot;&lt;/span&gt; +
            &lt;span class=&quot;code-quote&quot;&gt;&quot;]&quot;&lt;/span&gt;;
    Configuration config = configBuilder
            .add(configBuilder
                    .newAppender(appenderName, &lt;span class=&quot;code-quote&quot;&gt;&quot;Console&quot;&lt;/span&gt;)
                    .add(configBuilder
                            .newLayout(&lt;span class=&quot;code-quote&quot;&gt;&quot;JsonTemplateLayout&quot;&lt;/span&gt;)
                            .addAttribute(
                                    &lt;span class=&quot;code-quote&quot;&gt;&quot;eventTemplate&quot;&lt;/span&gt;,
                                    eventTemplate)))
            .add(configBuilder.newLogger(&lt;span class=&quot;code-quote&quot;&gt;&quot;com.vlkan&quot;&lt;/span&gt;, Level.TRACE))
            .add(configBuilder
                    .newRootLogger(Level.ERROR)
                    .add(configBuilder.newAppenderRef(appenderName)))
            .build(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);

    &lt;span class=&quot;code-comment&quot;&gt;// Initialize the configuration.
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; Configurator.initialize(config);

}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note the identical epochs in the output:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-json&quot;&gt;
[1635411617932465000,&lt;span class=&quot;code-quote&quot;&gt;&quot;17.932Z&quot;&lt;/span&gt;]
[1635411617932465000,&lt;span class=&quot;code-quote&quot;&gt;&quot;18.034Z&quot;&lt;/span&gt;]
[1635411617932465000,&lt;span class=&quot;code-quote&quot;&gt;&quot;18.134Z&quot;&lt;/span&gt;]
[1635411617932465000,&lt;span class=&quot;code-quote&quot;&gt;&quot;18.234Z&quot;&lt;/span&gt;]
[1635411617932465000,&lt;span class=&quot;code-quote&quot;&gt;&quot;18.335Z&quot;&lt;/span&gt;]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The issue was originally reported by Andrew Harris in &lt;a href=&quot;https://lists.apache.org/thread.html/re7498afa43c9cb91391b0798c1f7bbf4ea97111af1130ebeb155b824%40%3Clog4j-user.logging.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;a log4j-user post&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13408855">LOG4J2-3183</key>
            <summary>JsonTemplateLayout epoch resolver renders incorrect values</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vy">Volkan Yazici</assignee>
                                    <reporter username="vy">Volkan Yazici</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Oct 2021 09:08:03 +0000</created>
                <updated>Mon, 1 Nov 2021 20:46:19 +0000</updated>
                            <resolved>Thu, 28 Oct 2021 13:16:43 +0000</resolved>
                                    <version>2.14.0</version>
                    <version>2.14.1</version>
                                    <fixVersion>2.15.0</fixVersion>
                                    <component>JsonTemplateLayout</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17435359" author="jira-bot" created="Thu, 28 Oct 2021 11:49:19 +0000"  >&lt;p&gt;Commit 2dd7063fb6c6fe73070aded6607a2e2d53613b46 in logging-log4j2&apos;s branch refs/heads/release-2.x from Volkan Yazici&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=2dd7063&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=2dd7063&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3183&quot; title=&quot;JsonTemplateLayout epoch resolver renders incorrect values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3183&quot;&gt;&lt;del&gt;LOG4J2-3183&lt;/del&gt;&lt;/a&gt; Avoid using MutableInstant of the event as a cache key in JsonTemplateLayout.&lt;/p&gt;</comment>
                            <comment id="17435629" author="andrew.harris" created="Thu, 28 Oct 2021 18:52:08 +0000"  >&lt;p&gt;Hi there, that was me! As reported on the log4j-user list, 2dd7063f appears to resolve the issue. Thanks again, Volkan.&lt;/p&gt;</comment>
                            <comment id="17437019" author="jira-bot" created="Mon, 1 Nov 2021 20:46:19 +0000"  >&lt;p&gt;Commit f275c48e4aa423708efe07cebdbf17e4c3281b36 in logging-log4j2&apos;s branch refs/heads/master from Volkan Yazici&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=f275c48&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=f275c48&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3183&quot; title=&quot;JsonTemplateLayout epoch resolver renders incorrect values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3183&quot;&gt;&lt;del&gt;LOG4J2-3183&lt;/del&gt;&lt;/a&gt; Avoid using MutableInstant of the event as a cache key in JsonTemplateLayout.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 2 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0w8lk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>