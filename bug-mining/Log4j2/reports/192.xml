<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:31:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-380] RollingFile Appender is placing archived logs in the wrong directory</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-380</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;I&apos;m using RollingFile appender with archiving to a separate directory.&lt;br/&gt;
The archive directory pattern is yyyy-MM.&lt;br/&gt;
Up until 2013-08-30, everything worked just fine.&lt;br/&gt;
All the logs for August were placed inside directory 2013-08&lt;/p&gt;

&lt;p&gt;On 2013-09-01 00:01, log4j2 placed the log for 2013-08-31 inside directory 2013-09, instead of 2013-08&lt;/p&gt;

&lt;p&gt;-bash-4.1$ ls -l 2013-09&lt;br/&gt;
total 8&lt;br/&gt;
&lt;del&gt;rw-rw-r&lt;/del&gt;- 1 tomcat tomcat 4846 Sep  1 00:01 rws-2013-08-31.log.gz&lt;/p&gt;


&lt;p&gt;Here&apos;s the configuration I&apos;m using:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;RollingFile name=&lt;span class=&quot;code-quote&quot;&gt;&quot;RollingFile&quot;&lt;/span&gt; fileName=&lt;span class=&quot;code-quote&quot;&gt;&quot;${base}/rws.log&quot;&lt;/span&gt; filePattern=&lt;span class=&quot;code-quote&quot;&gt;&quot;${base}/$${date:yyyy-MM}/rws-%d{yyyy-MM-dd}.log.gz&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;PatternLayout&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;pattern&amp;gt;&lt;/span&gt;%d{yyyy-MM-dd HH:mm:ss.SSS}{UTC} [%t] %p %c{1} - %m%n&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/pattern&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/PatternLayout&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Policies&amp;gt;&lt;/span&gt;
     &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;TimeBasedTriggeringPolicy/&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Policies&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/RollingFile&amp;gt;&lt;/span&gt;

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;System timezone is UTC&lt;/p&gt;</environment>
        <key id="12666512">LOG4J2-380</key>
            <summary>RollingFile Appender is placing archived logs in the wrong directory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rgoers">Ralph Goers</assignee>
                                    <reporter username="harel.e">Harel E.</reporter>
                        <labels>
                    </labels>
                <created>Sun, 1 Sep 2013 23:14:13 +0000</created>
                <updated>Wed, 4 Sep 2013 02:22:35 +0000</updated>
                            <resolved>Tue, 3 Sep 2013 18:10:14 +0000</resolved>
                                    <version>2.0-beta8</version>
                                    <fixVersion>2.0-beta9</fixVersion>
                                    <component>Appenders</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13755885" author="ralph.goers@dslextreme.com" created="Mon, 2 Sep 2013 03:21:28 +0000"  >&lt;p&gt;This is because the variable ${date:} gets the current date, so ${date:yyyy-MM} is being resolved in September instead of August because that is when the rollover is occurring.  Since the Lookup has no relationship with the RollingFileAppender it really has no way of knowing the file date is for the prior month.&lt;/p&gt;

&lt;p&gt;We will have to find some way to cause the filePattern to be able to pass the %d date to the Lookup.&lt;/p&gt;</comment>
                            <comment id="13756085" author="harel.e" created="Mon, 2 Sep 2013 13:56:32 +0000"  >&lt;p&gt;If log4j is doing the right this for the filename, Does it make sense to use %d for the folder as well?  &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;For example:  ${base}/%d{yyyy-MM}/app-%d{MM-dd-yyyy}.log.gz
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

</comment>
                            <comment id="13756175" author="ralph.goers@dslextreme.com" created="Mon, 2 Sep 2013 17:01:02 +0000"  >&lt;p&gt;You do not want to use %d twice. The RollingFileAppender uses the pattern to determine the rollover frequency.&lt;/p&gt;</comment>
                            <comment id="13756850" author="ralph.goers@dslextreme.com" created="Tue, 3 Sep 2013 18:09:49 +0000"  >&lt;p&gt;Fixed in revision 1519776. When used in a filePattern ${date:} will now use the rollover timestamp instead of the current time.&lt;/p&gt;</comment>
                            <comment id="13756851" author="ralph.goers@dslextreme.com" created="Tue, 3 Sep 2013 18:10:14 +0000"  >&lt;p&gt;Please verify and close.&lt;/p&gt;</comment>
                            <comment id="13757385" author="harel.e" created="Wed, 4 Sep 2013 02:22:35 +0000"  >&lt;p&gt;Running the same use case as before, log4j2 now placed the log for 2013-08-31 (app-08-31-2013.log.gz) inside directory 2013-08&lt;br/&gt;
I also check the next day, and 2013-09-01 was placed in 2013-09.&lt;/p&gt;

&lt;p&gt;Thanks for the quick fix.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>346451</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 12 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1nqqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>346752</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>