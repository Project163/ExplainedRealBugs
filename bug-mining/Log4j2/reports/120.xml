<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:31:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-268] Berkeley (persistent) agent for FlumeAppender only works with MapMessages (and thus not slf4j)</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-268</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;If I try and use the persistent FlumeAppender with slf4j then I get a NullPointerException in FlumePersistentManager.send because there is no GUID header.&lt;/p&gt;

&lt;p&gt;(My repro here was using a copy of Flume modified to use log4j2 - while this particular repro is exotic I&apos;m confident that the general case detailed above will be very common).&lt;/p&gt;

&lt;p&gt;There is no GUID header because the FlumeEvent constructor only creates one if the message is a MapMessage.&lt;/p&gt;

&lt;p&gt;If the user is using slf4j then all messages are PersistentMessages - and thus will cause this logging to fail.&lt;/p&gt;

&lt;p&gt;The GUID is required because it&apos;s used as a key in the BerkeleyDB storage.&lt;/p&gt;

&lt;p&gt;My attempts at a simple fix ran afoul of the key lookup from the headers in FlumePersisentManager.WriterThread.run(). &lt;/p&gt;</description>
                <environment></environment>
        <key id="12649746">LOG4J2-268</key>
            <summary>Berkeley (persistent) agent for FlumeAppender only works with MapMessages (and thus not slf4j)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ejsarge">Edward Sargisson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 May 2013 17:49:04 +0000</created>
                <updated>Wed, 29 May 2013 17:40:29 +0000</updated>
                            <resolved>Wed, 29 May 2013 15:41:49 +0000</resolved>
                                                    <fixVersion>2.0-beta7</fixVersion>
                                    <component>Flume Appender</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13669348" author="ralph.goers@dslextreme.com" created="Wed, 29 May 2013 15:41:49 +0000"  >&lt;p&gt;Fixed in revision 1487518. Please verify and close.&lt;/p&gt;</comment>
                            <comment id="13669476" author="ejsarge" created="Wed, 29 May 2013 17:40:29 +0000"  >&lt;p&gt;Works for me.&lt;/p&gt;

&lt;p&gt;Thanks for the quick turnaround.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>330073</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ky1r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>330407</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>