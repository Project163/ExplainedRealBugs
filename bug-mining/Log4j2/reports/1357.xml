<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:41:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-2415] Lock contention in classloader because of missing org.slf4j.ext.EventData</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-2415</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;Recently I found one of lock contention and performance problem in our application.&lt;br/&gt;
As you can see it happens because we don&apos;t have &lt;tt&gt;org.slf4j.ext.EventData&lt;/tt&gt; class in classpath, but slf4j bridge tries to load it on every Logger creation.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Class java.lang.ClassLoader.loadClass(java.lang.String, boolean)
   Class sun.misc.Launcher$AppClassLoader.loadClass(java.lang.String, boolean)
      Class java.lang.ClassLoader.loadClass(java.lang.String)
         Class org.apache.logging.log4j.util.LoaderUtil.loadClass(java.lang.String)
            EventDataConverter org.apache.logging.slf4j.Log4jLogger.createConverter()
               void org.apache.logging.slf4j.Log4jLogger.&amp;lt;init&amp;gt;(org.apache.logging.log4j.spi.ExtendedLogger, java.lang.String)
                  Logger org.apache.logging.slf4j.Log4jLoggerFactory.newLogger(java.lang.String, org.apache.logging.log4j.spi.LoggerContext)
                     Object org.apache.logging.slf4j.Log4jLoggerFactory.newLogger(java.lang.String, org.apache.logging.log4j.spi.LoggerContext)
                        Object org.apache.logging.log4j.spi.AbstractLoggerAdapter.getLogger(java.lang.String)
                           Logger org.apache.logging.slf4j.Log4jLoggerFactory.getLogger(java.lang.String)
                              Logger org.slf4j.LoggerFactory.getLogger(java.lang.String)
                                 void com.devexperts.dxcore.api.AccountGroupsCacheImpl.&amp;lt;init&amp;gt;()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12936047/12936047_screenshot-1.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;/p&gt;
</description>
                <environment></environment>
        <key id="13179622">LOG4J2-2415</key>
            <summary>Lock contention in classloader because of missing org.slf4j.ext.EventData</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="turbanoff">Andrey Turbanov</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Aug 2018 16:13:21 +0000</created>
                <updated>Mon, 23 Dec 2019 22:21:57 +0000</updated>
                            <resolved>Mon, 23 Dec 2019 22:21:57 +0000</resolved>
                                    <version>2.11.0</version>
                                    <fixVersion>2.13.1</fixVersion>
                                    <component>SLF4J Bridge</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3000">50m</timespent>
                                <comments>
                            <comment id="16584158" author="garydgregory" created="Fri, 17 Aug 2018 16:52:11 +0000"  >&lt;p&gt;You could add slf4j-ext to your classpath and measure the difference&lt;/p&gt;</comment>
                            <comment id="16584234" author="ralph.goers@dslextreme.com" created="Fri, 17 Aug 2018 18:01:22 +0000"  >&lt;p&gt;The fix for this should be pretty easy. We just need a static initializer that checks for the class and sets a static boolean. If the result is false then we won&apos;t try to create the EventDataConverter.&lt;/p&gt;</comment>
                            <comment id="16797674" author="rberlin" created="Wed, 20 Mar 2019 23:46:58 +0000"  >&lt;p&gt;I&apos;m encountering class loader deadlock because of this issue. The latest version of slf4j removes these classes&#160;from slf4j-ext, so &lt;b&gt;adding slf4j-ext to the classpath is no longer a workaround.&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Attached is the fix (as described by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ralph.goers%40dslextreme.com&quot; class=&quot;user-hover&quot; rel=&quot;ralph.goers@dslextreme.com&quot;&gt;ralph.goers@dslextreme.com&lt;/a&gt;) which I have confirmed prevents the deadlock.&lt;/p&gt;

&lt;p&gt;This may need to be applied to all versions of the file, but truth be told, the version of&#160;Log4jLogger.java&#160;in log4j-slf4j18-impl should be rewritten to not bother classloading&#160;EventData at all, because it is not part of the 1.8 branch of slf4j.&lt;/p&gt;</comment>
                            <comment id="17002471" author="ckozak" created="Mon, 23 Dec 2019 20:35:39 +0000"  >&lt;p&gt;I&apos;ve filed &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2744&quot; title=&quot;Log4jLogger.converter can be removed from log4j-slf4j18-impl&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2744&quot;&gt;&lt;del&gt;LOG4J2-2744&lt;/del&gt;&lt;/a&gt; to track the slf4j 1.8 implementation change.&lt;/p&gt;</comment>
                            <comment id="17002510" author="jira-bot" created="Mon, 23 Dec 2019 22:11:44 +0000"  >&lt;p&gt;Commit ed893c297ec9c03e223dee9e42a31dc4b2b1eca3 in logging-log4j2&apos;s branch refs/heads/master from Turbanov Andrey&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=ed893c2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=ed893c2&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2415&quot; title=&quot;Lock contention in classloader because of missing org.slf4j.ext.EventData&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2415&quot;&gt;&lt;del&gt;LOG4J2-2415&lt;/del&gt;&lt;/a&gt; - Lock contention in classloader because of missing org.slf4j.ext.EventData (#324)&lt;/p&gt;
</comment>
                            <comment id="17002511" author="jira-bot" created="Mon, 23 Dec 2019 22:16:35 +0000"  >&lt;p&gt;Commit 932d35c94e40b7fd8c36130ab8e3c2c4c93e3e22 in logging-log4j2&apos;s branch refs/heads/release-2.x from Turbanov Andrey&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=932d35c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=932d35c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2415&quot; title=&quot;Lock contention in classloader because of missing org.slf4j.ext.EventData&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2415&quot;&gt;&lt;del&gt;LOG4J2-2415&lt;/del&gt;&lt;/a&gt; - Lock contention in classloader because of missing org.slf4j.ext.EventData (#324)&lt;/p&gt;
</comment>
                            <comment id="17002512" author="jira-bot" created="Mon, 23 Dec 2019 22:16:37 +0000"  >&lt;p&gt;Commit f01862e85de9af65f9665fb0d258200819e746c9 in logging-log4j2&apos;s branch refs/heads/release-2.x from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=f01862e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=f01862e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2415&quot; title=&quot;Lock contention in classloader because of missing org.slf4j.ext.EventData&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2415&quot;&gt;&lt;del&gt;LOG4J2-2415&lt;/del&gt;&lt;/a&gt; changelog&lt;/p&gt;</comment>
                            <comment id="17002514" author="jira-bot" created="Mon, 23 Dec 2019 22:19:59 +0000"  >&lt;p&gt;Commit a77eb9a4d7a36a54147cdbd6a12792d1ed1db4ff in logging-log4j2&apos;s branch refs/heads/master from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=a77eb9a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=a77eb9a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2415&quot; title=&quot;Lock contention in classloader because of missing org.slf4j.ext.EventData&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2415&quot;&gt;&lt;del&gt;LOG4J2-2415&lt;/del&gt;&lt;/a&gt; changelog&lt;/p&gt;</comment>
                            <comment id="17002516" author="ckozak" created="Mon, 23 Dec 2019 22:21:57 +0000"  >&lt;p&gt;Thanks for your contribution &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=turbanoff&quot; class=&quot;user-hover&quot; rel=&quot;turbanoff&quot;&gt;turbanoff&lt;/a&gt;! I&apos;ve merged the fix into both master and the release-2.x branch for the 2.13.1 release. Please verify using a snapshot release and close this ticket once you&apos;re satisfied.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12963197" name="LOG4J2-2415.patch" size="1235" author="rberlin" created="Wed, 20 Mar 2019 23:45:08 +0000"/>
                            <attachment id="12936047" name="screenshot-1.png" size="145631" author="turbanoff" created="Fri, 17 Aug 2018 16:13:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 47 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3x5uf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>