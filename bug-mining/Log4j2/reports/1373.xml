<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:41:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-2703] MapMessage#getFormattedMessage() incorrectly formats Object&apos;s</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-2703</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;The following code snippet&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#0747a6&quot;&gt;&lt;tt&gt;new MapMessage()&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; .with(&quot;key1&quot;, &quot;val1&quot;)&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; .with(&quot;key2&quot;, Collections.singletonMap(&quot;val2.1&quot;, &quot;val2.2&quot;))&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; .getFormattedMessage(new String[]{&quot;JSON&quot;});&lt;/tt&gt;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;produces&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#0747a6&quot;&gt;{&lt;tt&gt;&quot;key1&quot;:&quot;val1&quot;, &quot;key2&quot;:&quot;{val2.1=val2.2}&quot;&lt;/tt&gt;}&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;whereas&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#0747a6&quot;&gt;{&lt;tt&gt;&quot;key1&quot;:&quot;val1&quot;, &quot;key2&quot;:{&quot;val2.1&quot;:&quot;val2.2}&quot;&lt;/tt&gt;}&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;was expected.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13261290">LOG4J2-2703</key>
            <summary>MapMessage#getFormattedMessage() incorrectly formats Object&apos;s</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="vy">Volkan Yazici</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Oct 2019 11:01:10 +0000</created>
                <updated>Sun, 16 Feb 2020 19:41:49 +0000</updated>
                            <resolved>Sat, 15 Feb 2020 20:02:57 +0000</resolved>
                                                    <fixVersion>2.13.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17033081" author="ralph.goers@dslextreme.com" created="Sat, 8 Feb 2020 22:45:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vy&quot; class=&quot;user-hover&quot; rel=&quot;vy&quot;&gt;vy&lt;/a&gt;&#160;- Can you provide a fix for this?&lt;/p&gt;</comment>
                            <comment id="17033240" author="vy" created="Sun, 9 Feb 2020 15:38:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgoers&quot; class=&quot;user-hover&quot; rel=&quot;rgoers&quot;&gt;rgoers&lt;/a&gt; , yes, I can give it a try. It is actually better to fix this before merging &lt;tt&gt;JsonTemplateLayout&lt;/tt&gt;, since it includes a temporary workaround for this bug, which such a fix would render unnecessary.&lt;/p&gt;

&lt;p&gt;I will try to spend some time on it this week.&lt;/p&gt;</comment>
                            <comment id="17034382" author="vy" created="Tue, 11 Feb 2020 11:59:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgoers&quot; class=&quot;user-hover&quot; rel=&quot;rgoers&quot;&gt;rgoers&lt;/a&gt;, I need to report a sad progress update about this ticket: the default mappers in &lt;tt&gt;MapMessage&lt;/tt&gt; are broken for nested {{Object}}s, independent of the type. That is, it is broken for all XML, JSON, Java, and Java unquoted types. I doubt if I can fix all of them. I will just focus on JSON part for now.&lt;/p&gt;</comment>
                            <comment id="17034450" author="vy" created="Tue, 11 Feb 2020 13:46:11 +0000"  >&lt;p&gt;I guess the main problem emanates from the fact that &lt;tt&gt;MapMessage#data&lt;/tt&gt; is of type &lt;tt&gt;StringMap&lt;/tt&gt;, while &lt;tt&gt;with(key,val)&lt;/tt&gt; methods allow non-String entries in the values.&lt;/p&gt;</comment>
                            <comment id="17037581" author="jira-bot" created="Sat, 15 Feb 2020 19:28:06 +0000"  >&lt;p&gt;Commit 79acdd0a17e009e0e69a19c4c31d0af3ccfe4e6d in logging-log4j2&apos;s branch refs/heads/master from Volkan Yaz&#305;c&#305;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=79acdd0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=79acdd0&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2703&quot; title=&quot;MapMessage#getFormattedMessage() incorrectly formats Object&amp;#39;s&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2703&quot;&gt;&lt;del&gt;LOG4J2-2703&lt;/del&gt;&lt;/a&gt; Complex data type support for the default MapMessage JSON formatter. (#339)&lt;/p&gt;
</comment>
                            <comment id="17037584" author="jira-bot" created="Sat, 15 Feb 2020 20:00:57 +0000"  >&lt;p&gt;Commit 65565d1043033a15c57efd5bab27e0f88e595e8e in logging-log4j2&apos;s branch refs/heads/release-2.x from Volkan Yaz&#305;c&#305;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=65565d1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=65565d1&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2703&quot; title=&quot;MapMessage#getFormattedMessage() incorrectly formats Object&amp;#39;s&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2703&quot;&gt;&lt;del&gt;LOG4J2-2703&lt;/del&gt;&lt;/a&gt; Complex data type support for the default MapMessage JSON formatter. (#339)&lt;/p&gt;
</comment>
                            <comment id="17037585" author="jira-bot" created="Sat, 15 Feb 2020 20:00:59 +0000"  >&lt;p&gt;Commit 61d5c06098f16f7a39e483f0cd4bc750067bed7a in logging-log4j2&apos;s branch refs/heads/release-2.x from Ralph Goers&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=61d5c06&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=61d5c06&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2703&quot; title=&quot;MapMessage#getFormattedMessage() incorrectly formats Object&amp;#39;s&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2703&quot;&gt;&lt;del&gt;LOG4J2-2703&lt;/del&gt;&lt;/a&gt; - MapMessage.getFormattedMesssage() would incorrectly format objects.&lt;/p&gt;</comment>
                            <comment id="17037586" author="jira-bot" created="Sat, 15 Feb 2020 20:01:09 +0000"  >&lt;p&gt;Commit 5768506b55d3049e6c505a8bfa8892333beec39a in logging-log4j2&apos;s branch refs/heads/master from Ralph Goers&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=5768506&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=5768506&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2703&quot; title=&quot;MapMessage#getFormattedMessage() incorrectly formats Object&amp;#39;s&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2703&quot;&gt;&lt;del&gt;LOG4J2-2703&lt;/del&gt;&lt;/a&gt; - MapMessage.getFormattedMesssage() would incorrectly format objects.&lt;/p&gt;</comment>
                            <comment id="17037587" author="ralph.goers@dslextreme.com" created="Sat, 15 Feb 2020 20:02:57 +0000"  >&lt;p&gt;Patch applied to both release-2.x and master. Please verify and close.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 39 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z07f6g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>