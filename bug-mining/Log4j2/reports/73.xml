<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:31:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-177] ERROR StatusLogger An exception occurred processing Appender udpsocket java.lang.NullPointerException</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-177</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;This seems to be a race condition of some kind. Two threads are exiting at almost exactly the same time, and both print a message as they exit. This exception happens every 3 or 4 times the code is run, so it&apos;s easily reproducible.&lt;/p&gt;

&lt;p&gt;ERROR StatusLogger An exception occurred processing Appender udpsocket java.lang.NullPointerException&lt;br/&gt;
	at org.apache.logging.log4j.core.net.DatagramOutputStream.flush(DatagramOutputStream.java:93)&lt;br/&gt;
	at org.apache.logging.log4j.core.appender.OutputStreamManager.flush(OutputStreamManager.java:146)&lt;br/&gt;
	at org.apache.logging.log4j.core.appender.AbstractOutputStreamAppender.append(AbstractOutputStreamAppender.java:117)&lt;br/&gt;
	at org.apache.logging.log4j.core.config.AppenderControl.callAppender(AppenderControl.java:102)&lt;br/&gt;
	at org.apache.logging.log4j.core.config.LoggerConfig.callAppenders(LoggerConfig.java:335)&lt;br/&gt;
	at org.apache.logging.log4j.core.config.LoggerConfig.log(LoggerConfig.java:316)&lt;br/&gt;
	at org.apache.logging.log4j.core.config.LoggerConfig.log(LoggerConfig.java:281)&lt;br/&gt;
	at org.apache.logging.log4j.core.Logger.log(Logger.java:108)&lt;br/&gt;
	at org.apache.logging.log4j.spi.AbstractLogger.trace(AbstractLogger.java:250)&lt;br/&gt;
	at com.galmont.automation.framework.gui.handlers.RunCycleHandler$2.run(RunCycleHandler.java:128)&lt;br/&gt;
	at java.lang.Thread.run(Unknown Source)&lt;/p&gt;

&lt;p&gt;My configuration file:&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;configuration status=&quot;OFF&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;	&amp;lt;appenders&amp;gt;&lt;br/&gt;
		&amp;lt;Console name=&quot;console&quot; target=&quot;SYSTEM_OUT&quot;&amp;gt;&lt;br/&gt;
			&amp;lt;PatternLayout pattern=&quot;%d&lt;/p&gt;
{HH:mm:ss.SSS}
&lt;p&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;%t&amp;#93;&lt;/span&gt; %-5level %logger&lt;/p&gt;
{36} - %msg%n&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;/Console&amp;gt;&lt;br/&gt;
		&amp;lt;Socket name=&quot;udpsocket&quot; host=&quot;localhost&quot; port=&quot;90&quot; protocol=&quot;UDP&quot;&amp;gt;&lt;br/&gt;
			&amp;lt;PatternLayout pattern=&quot;%d{HH:mm:ss.SSS} &lt;span class=&quot;error&quot;&gt;&amp;#91;%t&amp;#93;&lt;/span&gt; %-5level %logger{36}
&lt;p&gt; - %msg%n&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;/Socket&amp;gt;&lt;br/&gt;
		&amp;lt;RollingFile name=&quot;RollingFile&quot; fileName=&quot;logs/app.log&quot; filePattern=&quot;logs/$${date:yyyy-MM}/app-%d&lt;/p&gt;
{MM-dd-yyyy}
&lt;p&gt;-%i.log.gz&quot;&amp;gt;&lt;br/&gt;
			&amp;lt;PatternLayout pattern=&quot;%d&lt;/p&gt;
{HH:mm:ss.SSS}
&lt;p&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;%t&amp;#93;&lt;/span&gt; %-5level %logger&lt;/p&gt;
{36}
&lt;p&gt; - %msg%n&quot; /&amp;gt;&lt;br/&gt;
			&amp;lt;Policies&amp;gt;&lt;br/&gt;
				&amp;lt;SizeBasedTriggeringPolicy size=&quot;20 MB&quot; /&amp;gt;&lt;br/&gt;
			&amp;lt;/Policies&amp;gt;&lt;br/&gt;
		&amp;lt;/RollingFile&amp;gt;&lt;br/&gt;
	&amp;lt;/appenders&amp;gt;&lt;/p&gt;

&lt;p&gt;	&amp;lt;loggers&amp;gt;&lt;br/&gt;
		&amp;lt;root level=&quot;trace&quot;&amp;gt;&lt;br/&gt;
			&amp;lt;appender-ref ref=&quot;console&quot; /&amp;gt;&lt;br/&gt;
			&amp;lt;appender-ref ref=&quot;udpsocket&quot; /&amp;gt;&lt;br/&gt;
			&amp;lt;appender-ref ref=&quot;RollingFile&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;/root&amp;gt;&lt;br/&gt;
	&amp;lt;/loggers&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;/configuration&amp;gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12637268">LOG4J2-177</key>
            <summary>ERROR StatusLogger An exception occurred processing Appender udpsocket java.lang.NullPointerException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rgoers">Ralph Goers</assignee>
                                    <reporter username="adaniels">Aaron Daniels</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Mar 2013 21:18:22 +0000</created>
                <updated>Tue, 26 Mar 2013 20:53:35 +0000</updated>
                            <resolved>Mon, 25 Mar 2013 00:58:34 +0000</resolved>
                                    <version>2.0-beta4</version>
                                    <fixVersion>2.0-beta5</fixVersion>
                                    <component>Appenders</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13604146" author="remkop@yahoo.com" created="Sat, 16 Mar 2013 07:30:42 +0000"  >&lt;p&gt;Looks like the SocketAppender defaults to immediateFlush=true, so the flush() method is called on every log event.&lt;br/&gt;
At the end of the flush, the data byte array is set to null.&lt;br/&gt;
If you have multiple threads logging, and the flush() method is called twice in a row, this error will occur.&lt;/p&gt;

&lt;p&gt;The fix is to add a null check to the flush() method implementation.&lt;/p&gt;

&lt;p&gt;change DatagramOutputStream.flush (line 93)&lt;br/&gt;
    if (this.ds != null &amp;amp;&amp;amp; this.address != null) {&lt;br/&gt;
to&lt;br/&gt;
    if (this.data != null &amp;amp;&amp;amp; this.ds != null &amp;amp;&amp;amp; this.address != null) {&lt;/p&gt;</comment>
                            <comment id="13612342" author="ralph.goers@dslextreme.com" created="Mon, 25 Mar 2013 00:58:34 +0000"  >&lt;p&gt;Thanks Remko! This issue was fixed in revision 1460497. Please verify and close.&lt;/p&gt;</comment>
                            <comment id="13614536" author="adaniels" created="Tue, 26 Mar 2013 20:53:35 +0000"  >&lt;p&gt;I can no longer reproduce this error in the latest code. Looks like it&apos;s fixed. Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>317760</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 35 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1itvj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>318101</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>