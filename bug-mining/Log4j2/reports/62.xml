<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:30:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-147] ThreadContextMapFilter doesn&apos;t match properly when a single keyvalue is provided</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-147</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;I was testing out a global ThreadContextMapFilter and noticed it wasn&apos;t matching properly.  I took a closer look at the code and found because it wasn&apos;t matching the value to the value on the context but rather the key.&lt;/p&gt;

&lt;p&gt;I changed it to use the value as the argument to equals and this fixed it.  Here is the diff of what I am running with.&lt;/p&gt;


&lt;p&gt;diff --git a/core/src/main/java/org/apache/logging/log4j/core/filter/ThreadContextMapFilter.java b/core/src/main/java/org/apache/logging/log4j/core/filter/ThreadContextMapFilter.java&lt;br/&gt;
index 9ad6cab..b3f3838 100644&lt;br/&gt;
&amp;#8212; a/core/src/main/java/org/apache/logging/log4j/core/filter/ThreadContextMapFi&lt;br/&gt;
+++ b/core/src/main/java/org/apache/logging/log4j/core/filter/ThreadContextMapFilter.java&lt;br/&gt;
@@ -96,7 +96,7 @@ public class ThreadContextMapFilter extends MapFilter {&lt;br/&gt;
                 }&lt;br/&gt;
             }&lt;br/&gt;
         } else &lt;/p&gt;
{
-            match = key.equals(ThreadContext.get(key));
+            match = value.equals(ThreadContext.get(key));
         }
&lt;p&gt;         return match ? onMatch : onMismatch;&lt;br/&gt;
     }&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12627242">LOG4J2-147</key>
            <summary>ThreadContextMapFilter doesn&apos;t match properly when a single keyvalue is provided</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rgoers">Ralph Goers</assignee>
                                    <reporter username="rpwburns">William Burns</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Jan 2013 20:13:14 +0000</created>
                <updated>Thu, 17 Jan 2013 03:04:09 +0000</updated>
                            <resolved>Thu, 17 Jan 2013 03:04:09 +0000</resolved>
                                    <version>2.0-beta3</version>
                                    <fixVersion>2.0-beta4</fixVersion>
                                    <component>Filters</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13555781" author="ralph.goers@dslextreme.com" created="Thu, 17 Jan 2013 03:04:09 +0000"  >&lt;p&gt;Fixed in revision 1434543. Please verify and close.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>304012</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 44 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i17hlr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>251821</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>