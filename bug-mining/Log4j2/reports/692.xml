<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:35:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-1260] TlsSyslogFrame calculates message length incorrectly</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-1260</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;TlsSyslogFrame calculates message length incorrectly.&lt;/p&gt;

&lt;p&gt;From the ML &lt;a href=&quot;https://www.mail-archive.com/log4j-user@logging.apache.org/msg15386.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.mail-archive.com/log4j-user@logging.apache.org/msg15386.html&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;---------- Forwarded message ----------&lt;br/&gt;
From: Blake Day &amp;lt;blake@chewy.com&amp;gt;&lt;br/&gt;
Date: Wed, Jan 20, 2016 at 4:58 PM&lt;br/&gt;
Subject: TlsSyslogFrame calculates message length incorrectly&lt;br/&gt;
To: Log4J Users List &amp;lt;log4j-user@logging.apache.org&amp;gt;&lt;/p&gt;


&lt;p&gt;TlsSyslogFrame appears to be miscalculating the message length.  According to RFC5425, the message length must be the octet count of the SYSLOG-MSG in the frame.  Though the variable below is aptly named messageLengthInBytes, it is assigned the value from message.length() (where message is a String) rather than the bytes.&lt;/p&gt;

&lt;p&gt;See below for relevant portions of code:&lt;/p&gt;

&lt;p&gt;private String message;&lt;br/&gt;
private int messageLengthInBytes;&lt;/p&gt;

&lt;p&gt;private void setLengthInBytes() {&lt;br/&gt;
    messageLengthInBytes = message.length();&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;@Override&lt;br/&gt;
public String toString() {&lt;br/&gt;
    final String length = Integer.toString(messageLengthInBytes);&lt;br/&gt;
    return length + Chars.SPACE + message;&lt;br/&gt;
}&lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="12933121">LOG4J2-1260</key>
            <summary>TlsSyslogFrame calculates message length incorrectly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="ggregory">Gary D. Gregory</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Jan 2016 17:58:11 +0000</created>
                <updated>Thu, 21 Jan 2016 22:43:59 +0000</updated>
                            <resolved>Thu, 21 Jan 2016 22:43:59 +0000</resolved>
                                    <version>2.5</version>
                                    <fixVersion>2.6</fixVersion>
                                    <component>Layouts</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15111534" author="garydgregory" created="Thu, 21 Jan 2016 22:43:43 +0000"  >&lt;p&gt;User (Blake) reports all is well with the fix. Closing.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 43 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2rt27:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>