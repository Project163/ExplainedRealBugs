<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:30:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-167] ClassCastException from SimpleLoggerContext to core.LoggerContext, since it implements spi.LoggerContext</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-167</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;When calling Configurator.initialize(&amp;lt;Name&amp;gt;, null, &amp;lt;File&amp;gt;) it calls LogManager.getContext(loader, false) and if no logging implementation can be found this method returns a new SimpleLoggerContext (created by the factory which in turn is created in the static part of the class). This class implements spi.LoggerContext but the Configurator tries to cast it to core.LoggerContext, which fails since SimpleLoggerContext does not extend that class.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12632573">LOG4J2-167</key>
            <summary>ClassCastException from SimpleLoggerContext to core.LoggerContext, since it implements spi.LoggerContext</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rgoers">Ralph Goers</assignee>
                                    <reporter username="schellhammer">Eric Schellhammer</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Feb 2013 12:51:13 +0000</created>
                <updated>Mon, 4 Mar 2013 11:47:57 +0000</updated>
                            <resolved>Mon, 4 Mar 2013 00:02:41 +0000</resolved>
                                    <version>2.0-beta5</version>
                                    <fixVersion>2.0-beta5</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13579287" author="ralph.goers@dslextreme.com" created="Fri, 15 Feb 2013 16:19:05 +0000"  >&lt;p&gt;How did you call Configurator.initialize in such a way that the implementation found in log4j-core couldn&apos;t be located?&lt;/p&gt;</comment>
                            <comment id="13580515" author="schellhammer" created="Mon, 18 Feb 2013 09:28:00 +0000"  >&lt;p&gt;I tried to use it as part of an Eclipse plugin project. That&apos;s probably the reason behind the configuration issues, since the same class runs smoothly as a Java application. (I even tried to set the system property &quot;log4j.configurationFile&quot;, but the static part of LogManager gets run before the system property is recognized.)&lt;/p&gt;

&lt;p&gt;On the other hand, whatever the reason for reaching the else-branch in the static part of LogManager, the problem leading to the exception is the fact that SimpleLoggerContext implements an interface named LoggerContext (spi.LoggerContext) but gets cast to a class that is also named LoggerContext (core.LoggerContext) but is incompatible.&lt;/p&gt;</comment>
                            <comment id="13591904" author="ralph.goers@dslextreme.com" created="Mon, 4 Mar 2013 00:02:41 +0000"  >&lt;p&gt;Fixed in revision 1452155. Please verify and close.&lt;br/&gt;
Configurator will no longer throw a ClassCastException. Instead, it will log an error and return null to the caller since Configurator must have a core LoggerContext, not a SimpleLoggerContext.&lt;/p&gt;</comment>
                            <comment id="13592143" author="schellhammer" created="Mon, 4 Mar 2013 11:47:57 +0000"  >&lt;p&gt;The exception is no longer thrown, and so the immediate problem is solved.&lt;br/&gt;
However, the way it is constructed now, even a valid URI parameter configLocation is effectively ignored if the default configuration fails (i.e. returns the SimpleLoggerContext). This leaves no possibility for configuration in this case, significantly reducing the features of Log4j2.&lt;/p&gt;

&lt;p&gt;Should this be stated as a new bug or continued in this issue?&lt;/p&gt;


&lt;p&gt;Btw: If I see it correctly, the SimpleLogger can never be used as a normal Logger for Log4j2, but only in the context of the StatusLogger. This may be the intended behaviour; if this is so, however, the class comment in SimpleLogger.java should be altered accordingly.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>313069</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 38 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1i0yn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>313415</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>