<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:41:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-2746] Change in shutdown behaviour between 2.12.1 and 2.13.0</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-2746</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;The attached mavenised example demonstrated the observed behaviour.&lt;/p&gt;

&lt;p&gt;In essence the following is observed:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// Shutdown Log4J2
&lt;/span&gt;LogManager.shutdown(); &lt;span class=&quot;code-comment&quot;&gt;// line 1
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// LogManager.shutdown(LogManager.getContext(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)); // line 2
&lt;/span&gt;Files.delete(logFile); &lt;span class=&quot;code-comment&quot;&gt;// line 3
&lt;/span&gt;&#160;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Using line 1; line 3 above should execute with no exceptions. For v2.12.1 this is observed. For v2.13.0; line 3 throws an exception because the logFile has a open lock still active.&lt;/p&gt;

&lt;p&gt;When line 2 is substituted for line 1. Line 3 executes with no exception for both v2.12.1 and v2.13.0&lt;/p&gt;

&lt;p&gt;I was able to determine that this behavior change was introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2716&quot; title=&quot;Add support for Kubernetes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2716&quot;&gt;&lt;del&gt;LOG4J2-2716&lt;/del&gt;&lt;/a&gt; (253ada6ff2fb6c6a0dcfee8ed432372215f2ef78).&lt;/p&gt;</description>
                <environment>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Apache Maven 3.6.2;
Java version: 11.0.5, vendor: AdoptOpenJDK;
Default locale: en_AU, platform encoding: Cp1252;
OS name: &quot;windows 10&quot;, version: &quot;10.0&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</environment>
        <key id="13276223">LOG4J2-2746</key>
            <summary>Change in shutdown behaviour between 2.12.1 and 2.13.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rgoers">Ralph Goers</assignee>
                                    <reporter username="bwalker">Brad Walker</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Dec 2019 12:22:11 +0000</created>
                <updated>Mon, 17 Feb 2020 23:47:32 +0000</updated>
                            <resolved>Mon, 17 Feb 2020 23:47:31 +0000</resolved>
                                    <version>2.13.0</version>
                                    <fixVersion>2.13.1</fixVersion>
                                    <component>API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17038085" author="ralph.goers@dslextreme.com" created="Mon, 17 Feb 2020 04:17:03 +0000"  >&lt;p&gt;Looking at the code it would appear that somehow the wrong LoggerContext is being used. This may be related to &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2773&quot; title=&quot;Configuration file loading ignored on jar-with-dependencies with java 11&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2773&quot;&gt;&lt;del&gt;LOG4J2-2773&lt;/del&gt;&lt;/a&gt; which also seems to be getting the wrong LoggerContext in Java 11.&#160; FWIW I can see it isn&apos;t working correctly on my Mac but since only Windows won&apos;t delete a file that isn&apos;t closed the test doesn&apos;t fail for me.&lt;/p&gt;</comment>
                            <comment id="17038683" author="jira-bot" created="Mon, 17 Feb 2020 23:46:13 +0000"  >&lt;p&gt;Commit 8b526a01aecc3d07fd42b330aa532ca16f25fcb7 in logging-log4j2&apos;s branch refs/heads/release-2.x from Ralph Goers&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=8b526a0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=8b526a0&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2746&quot; title=&quot;Change in shutdown behaviour between 2.12.1 and 2.13.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2746&quot;&gt;&lt;del&gt;LOG4J2-2746&lt;/del&gt;&lt;/a&gt; - ClassLoaderContextSelector was not locating the LoggerContext during shutdown.&lt;/p&gt;</comment>
                            <comment id="17038684" author="jira-bot" created="Mon, 17 Feb 2020 23:46:40 +0000"  >&lt;p&gt;Commit 84cd5d4e1460bec390f58ca01585ccb4973ab10d in logging-log4j2&apos;s branch refs/heads/master from Ralph Goers&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=84cd5d4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=84cd5d4&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2746&quot; title=&quot;Change in shutdown behaviour between 2.12.1 and 2.13.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2746&quot;&gt;&lt;del&gt;LOG4J2-2746&lt;/del&gt;&lt;/a&gt; - ClassLoaderContextSelector was not locating the LoggerContext during shutdown.&lt;/p&gt;</comment>
                            <comment id="17038685" author="ralph.goers@dslextreme.com" created="Mon, 17 Feb 2020 23:47:32 +0000"  >&lt;p&gt;Fix has been applied. Please verify and close.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12989425" name="Log4J Shutdown Example.zip" size="3694" author="bwalker" created="Tue, 24 Dec 2019 12:13:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z09yv4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>