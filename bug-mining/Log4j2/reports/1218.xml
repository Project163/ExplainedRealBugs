<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:39:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-2355] PropertiesUtil.reload() might throw NullPointerException</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-2355</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;SystemPropertiesPropertySource.forEach(..) uses Property.getProperty(..)&lt;br/&gt;
to resolve values. If that value is a non-String, the value will be&lt;br/&gt;
null. Since&#160;&lt;tt&gt;literal&lt;/tt&gt;&#160;is a ConcurrentHashMap, a put(..) with null value&lt;br/&gt;
will yield a NullPointerException.&lt;/p&gt;

&lt;p&gt;This is especially hard to debug in the case of e.g. StatusLogger,&lt;br/&gt;
which initializes PropertiesUtil as a static variable. The class is&lt;br/&gt;
unable to load, throws a NoClassDefFoundError, and hides the&lt;br/&gt;
NullPointerException.&lt;/p&gt;

&lt;p&gt;Here&apos;s what I got when I had a Property value that was a File:&lt;/p&gt;

&lt;p&gt;Caused by: java.lang.NoClassDefFoundError: Could not initialize class org.apache.logging.log4j.util.PropertiesUtil&lt;br/&gt;
at org.apache.logging.log4j.status.StatusLogger.(StatusLogger.java:78)&lt;br/&gt;
at org.apache.logging.log4j.LogManager.(LogManager.java:60)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;PR:&#160;&lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/183&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/183&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13167669">LOG4J2-2355</key>
            <summary>PropertiesUtil.reload() might throw NullPointerException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ckozak">Carter Kozak</assignee>
                                    <reporter username="monti">Henrik</reporter>
                        <labels>
                    </labels>
                <created>Fri, 22 Jun 2018 14:18:49 +0000</created>
                <updated>Mon, 25 Jun 2018 05:48:36 +0000</updated>
                            <resolved>Fri, 22 Jun 2018 15:12:56 +0000</resolved>
                                    <version>2.11.0</version>
                                    <fixVersion>2.11.1</fixVersion>
                    <fixVersion>3.0.0</fixVersion>
                                    <component>API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16520475" author="jira-bot" created="Fri, 22 Jun 2018 15:09:22 +0000"  >&lt;p&gt;Commit b0e5a134487c5b8778d3706754654d428024de88 in logging-log4j2&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=henrik242&quot; class=&quot;user-hover&quot; rel=&quot;henrik242&quot;&gt;henrik242&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=b0e5a13&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=b0e5a13&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2355&quot; title=&quot;PropertiesUtil.reload() might throw NullPointerException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2355&quot;&gt;&lt;del&gt;LOG4J2-2355&lt;/del&gt;&lt;/a&gt; Avoid NullPointerException in PropertiesUtil.reload()&lt;/p&gt;

&lt;p&gt;SystemPropertiesPropertySource.forEach(..) uses Property.getProperty(..)&lt;br/&gt;
to resolve values.  If that value is a non-String, the value will be&lt;br/&gt;
null.  Since `literal` is a ConcurrentHashMap, a put(..) with null value&lt;br/&gt;
will yield a NullPointerException.&lt;/p&gt;

&lt;p&gt;This is especially hard to debug in the case of e.g. StatusLogger,&lt;br/&gt;
which initializes PropertiesUtil as a static variable.  The class is&lt;br/&gt;
unable to load, throws a NoClassDefFoundError, and hides the&lt;br/&gt;
NullPointerException.&lt;/p&gt;

&lt;p&gt;Here&apos;s what I got when I had a Property value that was a File:&lt;/p&gt;

&lt;p&gt;Caused by: java.lang.NoClassDefFoundError: Could not initialize class org.apache.logging.log4j.util.PropertiesUtil&lt;br/&gt;
	at org.apache.logging.log4j.status.StatusLogger.&amp;lt;clinit&amp;gt;(StatusLogger.java:78)&lt;br/&gt;
	at org.apache.logging.log4j.LogManager.&amp;lt;clinit&amp;gt;(LogManager.java:60)&lt;/p&gt;</comment>
                            <comment id="16520476" author="jira-bot" created="Fri, 22 Jun 2018 15:09:23 +0000"  >&lt;p&gt;Commit 0fdf29de784d1ec60357e3809c5df0a2de6c92dc in logging-log4j2&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ckozak&quot; class=&quot;user-hover&quot; rel=&quot;ckozak&quot;&gt;ckozak&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=0fdf29d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=0fdf29d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2355&quot; title=&quot;PropertiesUtil.reload() might throw NullPointerException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2355&quot;&gt;&lt;del&gt;LOG4J2-2355&lt;/del&gt;&lt;/a&gt; Add testing and changelog entry&lt;/p&gt;

&lt;p&gt;Remvoes logging to stderr when PropertiesUtil is presented with&lt;br/&gt;
a null key or value. This may occur in normal usage when keys are&lt;br/&gt;
removed from the properties map.&lt;/p&gt;</comment>
                            <comment id="16520479" author="jira-bot" created="Fri, 22 Jun 2018 15:11:20 +0000"  >&lt;p&gt;Commit 8bd695c31ad96403669dc32695892c3061d5e75e in logging-log4j2&apos;s branch refs/heads/release-2.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=henrik242&quot; class=&quot;user-hover&quot; rel=&quot;henrik242&quot;&gt;henrik242&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=8bd695c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=8bd695c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2355&quot; title=&quot;PropertiesUtil.reload() might throw NullPointerException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2355&quot;&gt;&lt;del&gt;LOG4J2-2355&lt;/del&gt;&lt;/a&gt; Avoid NullPointerException in PropertiesUtil.reload()&lt;/p&gt;

&lt;p&gt;SystemPropertiesPropertySource.forEach(..) uses Property.getProperty(..)&lt;br/&gt;
to resolve values.  If that value is a non-String, the value will be&lt;br/&gt;
null.  Since `literal` is a ConcurrentHashMap, a put(..) with null value&lt;br/&gt;
will yield a NullPointerException.&lt;/p&gt;

&lt;p&gt;This is especially hard to debug in the case of e.g. StatusLogger,&lt;br/&gt;
which initializes PropertiesUtil as a static variable.  The class is&lt;br/&gt;
unable to load, throws a NoClassDefFoundError, and hides the&lt;br/&gt;
NullPointerException.&lt;/p&gt;

&lt;p&gt;Here&apos;s what I got when I had a Property value that was a File:&lt;/p&gt;

&lt;p&gt;Caused by: java.lang.NoClassDefFoundError: Could not initialize class org.apache.logging.log4j.util.PropertiesUtil&lt;br/&gt;
	at org.apache.logging.log4j.status.StatusLogger.&amp;lt;clinit&amp;gt;(StatusLogger.java:78)&lt;br/&gt;
	at org.apache.logging.log4j.LogManager.&amp;lt;clinit&amp;gt;(LogManager.java:60)&lt;/p&gt;</comment>
                            <comment id="16520481" author="jira-bot" created="Fri, 22 Jun 2018 15:11:21 +0000"  >&lt;p&gt;Commit 9d459d4a606c4eddbb093fbfb955daf68d099c40 in logging-log4j2&apos;s branch refs/heads/release-2.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ckozak&quot; class=&quot;user-hover&quot; rel=&quot;ckozak&quot;&gt;ckozak&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=9d459d4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=9d459d4&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2355&quot; title=&quot;PropertiesUtil.reload() might throw NullPointerException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2355&quot;&gt;&lt;del&gt;LOG4J2-2355&lt;/del&gt;&lt;/a&gt; Add testing and changelog entry&lt;/p&gt;

&lt;p&gt;Remvoes logging to stderr when PropertiesUtil is presented with&lt;br/&gt;
a null key or value. This may occur in normal usage when keys are&lt;br/&gt;
removed from the properties map.&lt;/p&gt;</comment>
                            <comment id="16520487" author="ckozak" created="Fri, 22 Jun 2018 15:13:40 +0000"  >&lt;p&gt;I&apos;ve committed this to master and the 2.x branch for the upcoming 2.11.1 release. Could you verify the fix and close this ticket?&lt;/p&gt;

&lt;p&gt;Thanks for your contribution &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=monti&quot; class=&quot;user-hover&quot; rel=&quot;monti&quot;&gt;monti&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="16520490" author="monti" created="Fri, 22 Jun 2018 15:14:28 +0000"  >&lt;p&gt;NP. Thanks for the swift merge &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16520565" author="githubbot" created="Fri, 22 Jun 2018 16:36:49 +0000"  >&lt;p&gt;Github user jvz commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/183&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/183&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Oh wow I missed the merge done elsewhere.&lt;/p&gt;</comment>
                            <comment id="16520568" author="githubbot" created="Fri, 22 Jun 2018 16:37:28 +0000"  >&lt;p&gt;Github user cakofony commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/183&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/183&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I should have commented here &amp;#8211; I&apos;ve taken care of it and added a test.&lt;/p&gt;</comment>
                            <comment id="16521869" author="githubbot" created="Mon, 25 Jun 2018 05:48:36 +0000"  >&lt;p&gt;Github user henrik242 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/183&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/183&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Merged, see &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2355&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/LOG4J2-2355&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="16521870" author="githubbot" created="Mon, 25 Jun 2018 05:48:36 +0000"  >&lt;p&gt;Github user henrik242 closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/183&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/183&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://github.com/apache/logging-log4j2/pull/183]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 21 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3v4z3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>