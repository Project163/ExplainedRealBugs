<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:39:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-2123] logger filter in composite logger not combined properly</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-2123</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;When using a composite logger with DefaultMergeStrategy, logger filters aren&apos;t combined properly. &lt;/p&gt;

&lt;p&gt;Specifically, if the &apos;parent&apos; configuration for the logger has no filter and the child configuration does, all attributes and children of the child filter are dropped from the composite configuration. &lt;/p&gt;

&lt;p&gt;For example, if my parent logger has:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &amp;lt;Loggers&amp;gt;
        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;cat1&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;debug&quot;&lt;/span&gt; additivity=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt;&amp;gt;
            &amp;lt;AppenderRef ref=&lt;span class=&quot;code-quote&quot;&gt;&quot;File&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;/Logger&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and the child logger has:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &amp;lt;Loggers&amp;gt;
        &amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;cat1&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;debug&quot;&lt;/span&gt; additivity=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt;&amp;gt;
            &amp;lt;RegexFilter regex=&lt;span class=&quot;code-quote&quot;&gt;&quot;.*TEST.*&quot;&lt;/span&gt; onMatch=&lt;span class=&quot;code-quote&quot;&gt;&quot;DENY&quot;&lt;/span&gt; onMismatch=&lt;span class=&quot;code-quote&quot;&gt;&quot;ACCEPT&quot;&lt;/span&gt; /&amp;gt;
            &amp;lt;AppenderRef ref=&lt;span class=&quot;code-quote&quot;&gt;&quot;File&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;/Logger&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;DefaultMergeStrategy creates a RegexFilter node in the composite configuration with no attributes. You end up getting a message like this when the RegexFilter is constructed:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2017-11-21 12:02:26,733 main ERROR A regular expression must be provided &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; RegexFilter
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here: &lt;a href=&quot;https://github.com/apache/logging-log4j2/blob/master/log4j-core/src/main/java/org/apache/logging/log4j/core/config/composite/DefaultMergeStrategy.java#L172-L174&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/blob/master/log4j-core/src/main/java/org/apache/logging/log4j/core/config/composite/DefaultMergeStrategy.java#L172-L174&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;A new copy of the filter node is created, but the children and attributes aren&apos;t added to the new nodes.&lt;/p&gt;

&lt;p&gt;If the parent logger config does have a filter, it looks like it works correctly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13120021">LOG4J2-2123</key>
            <summary>logger filter in composite logger not combined properly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jtolar">Jacob Tolar</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Nov 2017 18:05:09 +0000</created>
                <updated>Mon, 11 Dec 2017 20:59:29 +0000</updated>
                            <resolved>Mon, 11 Dec 2017 05:47:13 +0000</resolved>
                                                    <fixVersion>2.11.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16261210" author="githubbot" created="Tue, 21 Nov 2017 18:20:01 +0000"  >&lt;p&gt;GitHub user jacobtolar opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/135&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/135&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2123&quot; title=&quot;logger filter in composite logger not combined properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2123&quot;&gt;&lt;del&gt;LOG4J2-2123&lt;/del&gt;&lt;/a&gt; DefaultMergeStrategy did not merge filters on loggers correctly&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/jacobtolar/logging-log4j2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jacobtolar/logging-log4j2&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2123&quot; title=&quot;logger filter in composite logger not combined properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2123&quot;&gt;&lt;del&gt;LOG4J2-2123&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/135.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/135.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #135&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit ce528d47781cd173cf0b6bb7556cb8569f90de5d&lt;br/&gt;
Author: Jacob Tolar &amp;lt;jtolar@yahoo-inc.com&amp;gt;&lt;br/&gt;
Date:   2017-11-21T18:08:59Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2123&quot; title=&quot;logger filter in composite logger not combined properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2123&quot;&gt;&lt;del&gt;LOG4J2-2123&lt;/del&gt;&lt;/a&gt; DefaultMergeStrategy did not merge filters on loggers correctly&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16261223" author="jtolar" created="Tue, 21 Nov 2017 18:25:33 +0000"  >&lt;p&gt;Pull request: &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/135&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/135&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;All tests pass when I build locally. The test I updated fails without the change to DefaultMergeStrategy.&lt;/p&gt;</comment>
                            <comment id="16284046" author="jtolar" created="Fri, 8 Dec 2017 19:06:49 +0000"  >&lt;p&gt;Is anyone able to take a look at this change?&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="16284195" author="ralph.goers@dslextreme.com" created="Fri, 8 Dec 2017 20:59:19 +0000"  >&lt;p&gt;If someone doesn&apos;t beat me to it I will try to look at it this weekend.&lt;/p&gt;</comment>
                            <comment id="16285530" author="jira-bot" created="Mon, 11 Dec 2017 05:46:08 +0000"  >&lt;p&gt;Commit e937359a294971ea3c26d12bfb4c9053339ba22b in logging-log4j2&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jtolar&quot; class=&quot;user-hover&quot; rel=&quot;jtolar&quot;&gt;jtolar&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=e937359&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=e937359&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2123&quot; title=&quot;logger filter in composite logger not combined properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2123&quot;&gt;&lt;del&gt;LOG4J2-2123&lt;/del&gt;&lt;/a&gt; DefaultMergeStrategy did not merge filters on loggers correctly&lt;/p&gt;</comment>
                            <comment id="16285531" author="jira-bot" created="Mon, 11 Dec 2017 05:46:09 +0000"  >&lt;p&gt;Commit fe8387f74b609dcc3e7619f0bd4a30fb9dc4a037 in logging-log4j2&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ralphgoers&quot; class=&quot;user-hover&quot; rel=&quot;ralphgoers&quot;&gt;ralphgoers&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=fe8387f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=fe8387f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2123&quot; title=&quot;logger filter in composite logger not combined properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2123&quot;&gt;&lt;del&gt;LOG4J2-2123&lt;/del&gt;&lt;/a&gt; - DefaultMergeStrategy did not merge filters on loggers correctly&lt;/p&gt;</comment>
                            <comment id="16285533" author="ralph.goers@dslextreme.com" created="Mon, 11 Dec 2017 05:47:13 +0000"  >&lt;p&gt;Patch applied - Please verify and close.&lt;/p&gt;</comment>
                            <comment id="16285544" author="githubbot" created="Mon, 11 Dec 2017 06:00:55 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/135&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/135&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16286525" author="jtolar" created="Mon, 11 Dec 2017 20:45:53 +0000"  >&lt;p&gt;Some sample code and output here comparing before and after the patch: &lt;br/&gt;
&lt;a href=&quot;https://gist.github.com/jacobtolar/979b6f56a2cfd6eb45e996ab4e494c11#file-output-txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gist.github.com/jacobtolar/979b6f56a2cfd6eb45e996ab4e494c11#file-output-txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Looks better. Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ralph.goers%40dslextreme.com&quot; class=&quot;user-hover&quot; rel=&quot;ralph.goers@dslextreme.com&quot;&gt;ralph.goers@dslextreme.com&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="16286563" author="ralph.goers@dslextreme.com" created="Mon, 11 Dec 2017 20:59:29 +0000"  >&lt;p&gt;You are welcome. Please keep contributing!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 49 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3n2af:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>