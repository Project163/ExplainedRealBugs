<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:31:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-192] ${env:...} is not replaced in fileName</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-192</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;The variable ${env:...} is not replaced in the fileName attribute in RollingFileAppender whereas it is replaced in the attribute filePattern correctly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12640327">LOG4J2-192</key>
            <summary>${env:...} is not replaced in fileName</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rgoers">Ralph Goers</assignee>
                                    <reporter username="tomheg">Tom Hegermann</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Apr 2013 16:11:44 +0000</created>
                <updated>Sat, 11 May 2013 08:25:19 +0000</updated>
                            <resolved>Sat, 4 May 2013 06:41:25 +0000</resolved>
                                    <version>2.0-beta4</version>
                    <version>2.0-beta5</version>
                                    <fixVersion>2.0-beta6</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13625046" author="ralph.goers@dslextreme.com" created="Sun, 7 Apr 2013 23:12:39 +0000"  >&lt;p&gt;Can you provide a test that demonstrates this?  I have tests with ${fileName} where it is being replaced with a property defined in the configuration file. I would expect that if the environment variable is defined at the time the configuration file is processed that this should work.&lt;/p&gt;</comment>
                            <comment id="13636864" author="kurt.lehrke" created="Fri, 19 Apr 2013 20:45:12 +0000"  >&lt;p&gt;I have this same problem. I wanted to reference an environment variable in my FileAppender&apos;s fileName.  &lt;/p&gt;

&lt;p&gt;I&apos;ve attached two files used to reproduce the issue.  I&apos;ve used the Windows environment variable TEMP as an example.  I&apos;ve also set debug points in the EnvironmentLookup class.  It doesn&apos;t seem to hit it.  &lt;/p&gt;

&lt;p&gt;Below is the exception produced:&lt;/p&gt;

&lt;p&gt;ERROR StatusLogger FileManager (${env:TEMP}/log/activity.log) java.io.FileNotFoundException: ${env:TEMP}\log\activity.log (The filename, directory name, or volume label syntax is incorrect)&lt;br/&gt;
ERROR StatusLogger Unable to invoke method createAppender in class org.apache.logging.log4j.core.appender.FileAppender for element File java.lang.reflect.InvocationTargetException&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Unknown Source)&lt;br/&gt;
	at org.apache.logging.log4j.core.config.BaseConfiguration.createPluginObject(BaseConfiguration.java:738)&lt;br/&gt;
	at org.apache.logging.log4j.core.config.BaseConfiguration.createConfiguration(BaseConfiguration.java:504)&lt;br/&gt;
	at org.apache.logging.log4j.core.config.BaseConfiguration.createConfiguration(BaseConfiguration.java:496)&lt;br/&gt;
	at org.apache.logging.log4j.core.config.BaseConfiguration.doConfigure(BaseConfiguration.java:161)&lt;br/&gt;
	at org.apache.logging.log4j.core.config.BaseConfiguration.start(BaseConfiguration.java:119)&lt;br/&gt;
	at org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:271)&lt;br/&gt;
	at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:287)&lt;br/&gt;
	at org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:139)&lt;br/&gt;
	at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:78)&lt;br/&gt;
	at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:33)&lt;br/&gt;
	at org.apache.logging.log4j.LogManager.getLogger(LogManager.java:359)&lt;br/&gt;
	at org.apache.logging.log4j.LogManager.getLogger(LogManager.java:318)&lt;br/&gt;
	at TestEnvVar.&amp;lt;clinit&amp;gt;(TestEnvVar.java:42)&lt;br/&gt;
Caused by: java.lang.IllegalStateException: Unable to create a manager&lt;br/&gt;
	at org.apache.logging.log4j.core.appender.AbstractManager.getManager(AbstractManager.java:72)&lt;br/&gt;
	at org.apache.logging.log4j.core.appender.OutputStreamManager.getManager(OutputStreamManager.java:49)&lt;br/&gt;
	at org.apache.logging.log4j.core.appender.FileManager.getFileManager(FileManager.java:64)&lt;br/&gt;
	at org.apache.logging.log4j.core.appender.FileAppender.createAppender(FileAppender.java:130)&lt;br/&gt;
	... 17 more&lt;/p&gt;

&lt;p&gt;ERROR StatusLogger Null object returned for File in appenders&lt;br/&gt;
ERROR StatusLogger Unable to locate appender ActivityAppender for logger&lt;/p&gt;</comment>
                            <comment id="13636927" author="ralph.goers@dslextreme.com" created="Fri, 19 Apr 2013 22:04:39 +0000"  >&lt;p&gt;I looked at your example.  If you change $${env:TEMP} to ${env:TEMP} it should work properly. The filename attribute is only interpolated when the configuration file is processed.&lt;/p&gt;</comment>
                            <comment id="13637501" author="tomheg" created="Sun, 21 Apr 2013 07:53:42 +0000"  >&lt;p&gt;I also attached my log4j2.xml including the relevant lines and a screenshot which shows the created file when running the Java program.&lt;/p&gt;</comment>
                            <comment id="13638224" author="kurt.lehrke" created="Mon, 22 Apr 2013 17:55:04 +0000"  >&lt;p&gt;Ralph, &lt;/p&gt;

&lt;p&gt;I tried it again with your suggestion and I didn&apos;t have any luck.  I updated to trunk (i was on beta5), and tried it again.  This time, I do not get an exception, but the file/log isn&apos;t created.  I&apos;ve double checked the location by resolving the location myself to ensure I was looking in the right spot.  &lt;/p&gt;</comment>
                            <comment id="13638241" author="ralph.goers@dslextreme.com" created="Mon, 22 Apr 2013 18:09:25 +0000"  >&lt;p&gt;OK - I tried to create a unit test for this but I couldn&apos;t find any environment variables that are guaranteed to exist on both Windows, and unix based systems and java doesn&apos;t seem to have a setenv to set an environment variable.&lt;/p&gt;</comment>
                            <comment id="13638265" author="tomheg" created="Mon, 22 Apr 2013 18:18:06 +0000"  >&lt;p&gt;But can you reproduce the problem regardless of any unit test cases?&lt;/p&gt;</comment>
                            <comment id="13638293" author="ralph.goers@dslextreme.com" created="Mon, 22 Apr 2013 18:40:47 +0000"  >&lt;p&gt;To be honest I haven&apos;t tried. I have unit tests for ${sys:} so I&apos;m not sure what is going on going after an environment variable.&lt;/p&gt;</comment>
                            <comment id="13638310" author="tomheg" created="Mon, 22 Apr 2013 18:51:23 +0000"  >&lt;p&gt;${sys:} does work: &quot;log${sys:file.separator}info-current.log&quot; is parsed to &quot;log/info-current.log&quot; (on a Mac) but &quot;${env:LOG}${sys:file.separator}info-current.log&quot; is parsed to &quot;${env:LOG}/info-current.log&quot;.&lt;/p&gt;</comment>
                            <comment id="13649025" author="ralph.goers@dslextreme.com" created="Sat, 4 May 2013 06:41:25 +0000"  >&lt;p&gt;Fixed in revision 1479044. Please verify and close.&lt;/p&gt;</comment>
                            <comment id="13655198" author="tomheg" created="Sat, 11 May 2013 08:25:19 +0000"  >&lt;p&gt;Yes, it works. Thank you very much!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12645868">LOG4J2-236</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12579613" name="TestEnvVar.java" size="1274" author="kurt.lehrke" created="Fri, 19 Apr 2013 20:45:12 +0000"/>
                            <attachment id="12579718" name="created_file.png" size="11420" author="tomheg" created="Sun, 21 Apr 2013 07:52:24 +0000"/>
                            <attachment id="12579717" name="log4j2.xml" size="531" author="tomheg" created="Sun, 21 Apr 2013 07:50:47 +0000"/>
                            <attachment id="12579612" name="log4j2.xml" size="640" author="kurt.lehrke" created="Fri, 19 Apr 2013 20:45:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>320790</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 28 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1jckv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>321131</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>