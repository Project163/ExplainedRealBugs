<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:32:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-452] Log4j2 should not automatically start in Servlet 3.0</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-452</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;When using async servlet (async-supported=true inweb.xml), log4j2 breaks the async chain because it does not support async. All element in the chain must support async in order to use async. Using Log4j2 in web context lead to be unable to use async.&lt;/p&gt;

&lt;p&gt;Be aware that async mecanism is more complicated than just intercept the chain before and after the handling of the request (thing that could be done in sync context). When using async mecanism web container threads can be used when the start method is invoked on AsyncContext and there are no way to intercept this systematically.&lt;/p&gt;

&lt;p&gt;So  I m not sure that it&apos;s a good idea to automatically intercept request with a filter.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12679232">LOG4J2-452</key>
            <summary>Log4j2 should not automatically start in Servlet 3.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="beamerblvd">Nick Williams</assignee>
                                    <reporter username="anthonyC">Anthony Communier</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Nov 2013 15:49:10 +0000</created>
                <updated>Wed, 29 Jan 2014 06:17:54 +0000</updated>
                            <resolved>Tue, 28 Jan 2014 07:31:22 +0000</resolved>
                                    <version>2.0-beta9</version>
                                    <fixVersion>2.0-rc1</fixVersion>
                                    <component>Filters</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                                                            <aggregatetimeoriginalestimate seconds="1677600">466h</aggregatetimeoriginalestimate>
                                        <aggregatetimeremainingestimate seconds="1677600">466h</aggregatetimeremainingestimate>
                                                <comments>
                            <comment id="13822536" author="anthonyc" created="Thu, 14 Nov 2013 15:54:11 +0000"  >&lt;p&gt;I try to make a patch in order to support async in the filter. But it&apos;s not enough.&lt;/p&gt;

&lt;p&gt;I have attched an exemple of test servlet&lt;/p&gt;</comment>
                            <comment id="13868839" author="ralph.goers@dslextreme.com" created="Sat, 11 Jan 2014 17:41:17 +0000"  >&lt;p&gt;I have concerns that automatically starting Log4j 2 just due to the presence of the jar is creating problems such as these.&lt;/p&gt;</comment>
                            <comment id="13875541" author="jvz" created="Sat, 18 Jan 2014 04:29:57 +0000"  >&lt;p&gt;One of the issues to be addressed (which I&apos;m currently thinking about) is setting the proper LoggerContext object for each and every thread that may be involved in asynchronous servlets and filters. In the synchronous servlets scenario, there&apos;s only the one thread per servlet, so this is easily taken care of with ContextAnchor. This approach probably won&apos;t work well in an asynchronous context.&lt;/p&gt;</comment>
                            <comment id="13875791" author="jvz" created="Sun, 19 Jan 2014 01:26:39 +0000"  >&lt;p&gt;Here&apos;s some work on the situation. There isn&apos;t much you can do in order to set the current thread&apos;s logger context when you add arbitrary multithreaded async servlet code. Thus, such situations should get the logger context from the servlet context.&lt;/p&gt;</comment>
                            <comment id="13883845" author="beamerblvd" created="Tue, 28 Jan 2014 07:15:08 +0000"  >&lt;p&gt;Partially fixed with r1561956 in that the filter now supports async requests and the web support is exposed via a &lt;tt&gt;ServletContext&lt;/tt&gt; attribute so that asynchronous threads can set and clear the &lt;tt&gt;LoggerContext&lt;/tt&gt;. I still need to implement the context parameter that allows disabling auto-initialization.&lt;/p&gt;</comment>
                            <comment id="13883859" author="beamerblvd" created="Tue, 28 Jan 2014 07:31:23 +0000"  >&lt;p&gt;The rest of this has been fixed with r1561958, which adds a &lt;tt&gt;ServletContext&lt;/tt&gt; parameter for disabling auto-initialization. A separate commit tomorrow will provide several updates to Log4j&apos;s web app documentation.&lt;/p&gt;</comment>
                            <comment id="13885049" author="beamerblvd" created="Wed, 29 Jan 2014 06:17:54 +0000"  >&lt;p&gt;Documentation updated with r1562365.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12623841" name="0001-Add-LOGGER_CONTEXT_ATTRIBUTE-to-LoggerContext.patch" size="1110" author="mattsicker" created="Sun, 19 Jan 2014 01:26:39 +0000"/>
                            <attachment id="12623842" name="0002-Add-async-support-to-Log4jServletFilter.patch" size="33556" author="mattsicker" created="Sun, 19 Jan 2014 01:26:39 +0000"/>
                            <attachment id="12613862" name="log4-servlet-test.zip" size="1955835" author="anthonyC" created="Thu, 14 Nov 2013 15:54:11 +0000"/>
                            <attachment id="12613861" name="patch_async.diff" size="16994" author="anthonyC" created="Thu, 14 Nov 2013 15:54:11 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12691210">LOG4J2-512</subtask>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>358597</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 43 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ptfj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>358887</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>