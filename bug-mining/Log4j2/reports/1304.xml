<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:40:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-2337] Allow custom end-of-line with JsonLayout </title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-2337</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;Log4j JSONLayout with&#160;eventEol=&quot;true&quot;, prints &apos;\r&apos; at end of log.&lt;/p&gt;

&lt;p&gt;Example:- {&quot;key&quot;:&quot;value&quot;, &quot;key&quot;:&quot;value&quot;}\r&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Problem -&#160;Currently we are using Splunk for log analysis, which is not able to render Log string as JSON, due to \r getting printed. Can we avoid it getting printed?&lt;/p&gt;</description>
                <environment>&lt;p&gt;Server run on Unix environment.&lt;/p&gt;</environment>
        <key id="13157955">LOG4J2-2337</key>
            <summary>Allow custom end-of-line with JsonLayout </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="4" iconUrl="https://issues.apache.org/jira/images/icons/statuses/reopened.png" description="This issue was once resolved, but the resolution was deemed incorrect. From here issues are either marked assigned or resolved.">Reopened</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="asahare">Arvind Sahare</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 May 2018 17:29:56 +0000</created>
                <updated>Fri, 5 Jul 2019 08:41:29 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3600">1h</timespent>
                                <comments>
                            <comment id="16467738" author="garydgregory" created="Tue, 8 May 2018 17:41:16 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;Jira is not a support forum. Please ask your question on the user&apos;s mailing list:&#160;&lt;a href=&quot;https://logging.apache.org/log4j/2.x/mail-lists.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://logging.apache.org/log4j/2.x/mail-lists.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16468081" author="remkop@yahoo.com" created="Tue, 8 May 2018 22:56:56 +0000"  >&lt;p&gt;I disagree with Gary on this. &lt;br/&gt;
That said, your issue has more chance of being worked on if you make it easier for the volunteers who contribute here. You can do that by investigating where the &#8220;/r&#8221; is added and proposing a patch (or pull request) , ideally with unit tests. &lt;/p&gt;</comment>
                            <comment id="16468307" author="remkop@yahoo.com" created="Wed, 9 May 2018 04:17:57 +0000"  >&lt;p&gt;Does it actually print the string &quot;\r&quot; or the carriage return &apos;\r&apos; character?&lt;/p&gt;</comment>
                            <comment id="16468873" author="asahare" created="Wed, 9 May 2018 13:56:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=remkop%40yahoo.com&quot; class=&quot;user-hover&quot; rel=&quot;remkop@yahoo.com&quot;&gt;remkop@yahoo.com&lt;/a&gt;,&#160;It&apos;s printing it as a string i.e. &lt;br/&gt;
CR with a backslash character, Due to which its getting printed and Splunk is not able to interpret it.&lt;/p&gt;</comment>
                            <comment id="16472018" author="asahare" created="Fri, 11 May 2018 14:41:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=remkop%40yahoo.com&quot; class=&quot;user-hover&quot; rel=&quot;remkop@yahoo.com&quot;&gt;remkop@yahoo.com&lt;/a&gt;, On Creating CustomAppender with JSONLayout. &apos;eol&apos; is set to CR+LF.&lt;/p&gt;

&lt;p&gt;Can it be configurable with environment? Because it seems CR is getting missed while interpreting whereas LF system is able to interpret, which is producing log&#160;with CR getting printed as String.&lt;/p&gt;</comment>
                            <comment id="16807706" author="pferrot" created="Tue, 2 Apr 2019 12:17:20 +0000"  >&lt;p&gt;Hi - I experienced a similar issue that basically made it impossible to&#160;properly&#160;index logs produced with the JsonLayout in Splunk. In my case, it turns out it was actually journalctl producing arrays of bytes when exporting JSON when log entries contain the &apos;\r&apos; character. So log4j2 JsonLayout --&amp;gt; journalctl export as JSON --&amp;gt; Splunk would essentially not work properly.&lt;/p&gt;

&lt;p&gt;Anyway, I worked on an enhancement that allows to customise the end-of-line string. Setting it to &quot;\n&quot; fixes the problem in my case (as it should for those who face a similar issue). No more &apos;\r&apos;, so no more arrays of bytes, so me happy checking logs in Splunk &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I hope you can integrate the PRs I created (one for master and one for the 2.x branch):&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/264&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/264&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/265&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/265&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16819314" author="jira-bot" created="Tue, 16 Apr 2019 17:31:41 +0000"  >&lt;p&gt;Commit ba4c4c52673b547dbf4be079b3aab3030ed2960e in logging-log4j2&apos;s branch refs/heads/master from Patrice Ferrot&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=ba4c4c5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=ba4c4c5&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Allow custom end-of-line with JsonLayout (fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2337&quot; title=&quot;Allow custom end-of-line with JsonLayout &quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2337&quot;&gt;LOG4J2-2337&lt;/a&gt;) (#265)&lt;/p&gt;
</comment>
                            <comment id="16819321" author="garydgregory" created="Tue, 16 Apr 2019 17:34:20 +0000"  >&lt;p&gt;In git master.&lt;/p&gt;

&lt;p&gt;Waiting for conflict resolution in release-2.x&lt;/p&gt;

&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=asahare&quot; class=&quot;user-hover&quot; rel=&quot;asahare&quot;&gt;asahare&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pferrot&quot; class=&quot;user-hover&quot; rel=&quot;pferrot&quot;&gt;pferrot&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16819443" author="jira-bot" created="Tue, 16 Apr 2019 19:58:10 +0000"  >&lt;p&gt;Commit efe06ddfaf7d3b5a2659be6b9f1af4b9a5a3bc95 in logging-log4j2&apos;s branch refs/heads/master from Gary Gregory&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=efe06dd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=efe06dd&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2337&quot; title=&quot;Allow custom end-of-line with JsonLayout &quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2337&quot;&gt;LOG4J2-2337&lt;/a&gt; Allow custom end-of-line with JsonLayout.&lt;/p&gt;</comment>
                            <comment id="16824115" author="jira-bot" created="Tue, 23 Apr 2019 13:09:13 +0000"  >&lt;p&gt;Commit 303045d1602bd2bd73cf6a1e60026830369389ba in logging-log4j2&apos;s branch refs/heads/release-2.x from Patrice Ferrot&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=303045d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=303045d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2337&quot; title=&quot;Allow custom end-of-line with JsonLayout &quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2337&quot;&gt;LOG4J2-2337&lt;/a&gt; Allow custom end-of-line with JsonLayout (2.x branch) (#264)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Allow custom end-of-line with JsonLayout (fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2337&quot; title=&quot;Allow custom end-of-line with JsonLayout &quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2337&quot;&gt;LOG4J2-2337&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Added justification for JsonLayout constructor change&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16824116" author="jira-bot" created="Tue, 23 Apr 2019 13:09:14 +0000"  >&lt;p&gt;Commit 303045d1602bd2bd73cf6a1e60026830369389ba in logging-log4j2&apos;s branch refs/heads/release-2.x from Patrice Ferrot&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=303045d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=303045d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2337&quot; title=&quot;Allow custom end-of-line with JsonLayout &quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2337&quot;&gt;LOG4J2-2337&lt;/a&gt; Allow custom end-of-line with JsonLayout (2.x branch) (#264)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Allow custom end-of-line with JsonLayout (fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2337&quot; title=&quot;Allow custom end-of-line with JsonLayout &quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2337&quot;&gt;LOG4J2-2337&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Added justification for JsonLayout constructor change&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16824123" author="jira-bot" created="Tue, 23 Apr 2019 13:11:42 +0000"  >&lt;p&gt;Commit 1628072b24e0b5860a57992f3cc4ff956a1ea6e9 in logging-log4j2&apos;s branch refs/heads/release-2.x from Gary Gregory&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=1628072&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=1628072&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2337&quot; title=&quot;Allow custom end-of-line with JsonLayout &quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2337&quot;&gt;LOG4J2-2337&lt;/a&gt; Allow custom end-of-line with JsonLayout.&lt;/p&gt;</comment>
                            <comment id="16824126" author="jira-bot" created="Tue, 23 Apr 2019 13:14:09 +0000"  >&lt;p&gt;Commit 58d96d0e242eac260d5fe2317e54a6fc24332994 in logging-log4j2&apos;s branch refs/heads/master from Gary Gregory&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=58d96d0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=58d96d0&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2337&quot; title=&quot;Allow custom end-of-line with JsonLayout &quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2337&quot;&gt;LOG4J2-2337&lt;/a&gt; Allow custom end-of-line with JsonLayout.&lt;/p&gt;</comment>
                            <comment id="16879070" author="pferrot" created="Fri, 5 Jul 2019 08:41:29 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt; - shouldn&apos;t this ticket be closed since the fix&#160;was included in 2.12.0 and is mentioned in the change log (&lt;a href=&quot;https://logging.apache.org/log4j/2.x/changes-report.html#a2.12.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://logging.apache.org/log4j/2.x/changes-report.html#a2.12.0&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Cheers,&lt;br/&gt;
Patrice&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12923032" name="Screen Shot 2018-05-11 at 12.06.51.png" size="181275" author="asahare" created="Fri, 11 May 2018 14:36:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 19 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3than:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>