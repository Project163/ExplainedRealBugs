<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:32:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-554] No easy way to point to a configuration file in the WEB-INF folder</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-554</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;I am trying to put all of my configuration files under WEB-INF/config folder but there is no way (other than an explicit reference to my file system) to set the log4jConfiguration to point to that.  It also does not report any errors when it can&apos;t find the file log4jConfiguration (unless there is a URI reference error) so you are scratching your head when it does nothing.  &lt;/p&gt;</description>
                <environment>&lt;p&gt;WildFly 8.0.0, JDK 1.7.0_45, WIn7&lt;/p&gt;</environment>
        <key id="12697813">LOG4J2-554</key>
            <summary>No easy way to point to a configuration file in the WEB-INF folder</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rgoers">Ralph Goers</assignee>
                                    <reporter username="Russell.Nile@nileassociates.com">Russell J. Nile</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Feb 2014 22:21:31 +0000</created>
                <updated>Mon, 9 Jun 2014 22:54:16 +0000</updated>
                            <resolved>Mon, 9 Jun 2014 22:54:16 +0000</resolved>
                                    <version>2.0-beta9</version>
                                    <fixVersion>2.0-rc2</fixVersion>
                                    <component>Configurators</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13915855" author="remkop@yahoo.com" created="Fri, 28 Feb 2014 15:16:00 +0000"  >&lt;p&gt;I know anything you put under WEB-INF/classes is in the classpath, and jar/zip files under WEB-INF/lib are added to the classpath, but I&apos;m not aware of any similar convention for WEB-INF/config. Is this folder treated as special by the web container?&lt;/p&gt;</comment>
                            <comment id="13915918" author="x046866" created="Fri, 28 Feb 2014 15:57:20 +0000"  >&lt;p&gt;Remko,&lt;br/&gt;
There is nothing significant about the &apos;config&apos; folder (personal convention), but I am able to specify &quot;/WEB-INF/config/applicationContext.xml&quot; in the web.xml for Spring and it finds the configuration file just fine:&#160;&#160;&#160;&#160;&amp;lt;context-param&amp;gt;&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &amp;lt;param-name&amp;gt;contextConfigLocation&amp;lt;/param-name&amp;gt;&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &amp;lt;param-value&amp;gt;&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; /WEB-INF/config/applicationContext.xml&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &amp;lt;/param-value&amp;gt;&lt;br/&gt;
&#160;&#160;&#160; &amp;lt;/context-param&amp;gt;&lt;br/&gt;
it generally treats the leading &quot;/&quot; as the root of the war file.&lt;br/&gt;
My hopes was that the log4jconfiguration would work similarly:&#160;&#160;&#160;&#160;&amp;lt;context-param&amp;gt;&lt;br/&gt;
&#160;&#160;&#160; &#160;&#160;&#160; &amp;lt;param-name&amp;gt;log4jConfiguration&amp;lt;/param-name&amp;gt;&lt;br/&gt;
&#160;&#160;&#160; &#160;&#160;&#160; &amp;lt;param-value&amp;gt;/WEB-INF/config/log4j2.xml&amp;lt;/param-value&amp;gt;&lt;br/&gt;
&#160;&#160;&#160; &amp;lt;/context-param&amp;gt;&lt;br/&gt;
but it does not find the configuration file nor does it report that it can&apos;t find it....it just doesn&apos;t work.&lt;/p&gt;

&lt;p&gt;I also tried this with rc1 and the same result (although it seems to behave a bit more consistently than with beta9...I used to get notices about a bad URI).&lt;br/&gt;
NOTE: I do see this message when using rc1 that I don&apos;t remember when I used beta9...should I open another ticket for that?:&#160;&#160;&#160;&#160;10:46:20,606 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;stderr&amp;#93;&lt;/span&gt; (default task-3) ERROR StatusLogger Could not search jar file &apos;C:\dev\wildfly-8.0.0.Final\standalone\deployments\CTMSApplicationServices.war\WEB-INF\lib\log4j-core-2.0-rc1.jar\org\apache\logging\log4j\core&apos; for classes matching criteria: annotated with @Plugin file not found&lt;br/&gt;
It seems I only see this when I have the &amp;lt;param-name&amp;gt;log4jConfiguration&amp;lt;/param-name&amp;gt; in the web.xml though.&#160;&lt;br/&gt;
When I put the log4j2.xml in the classpath (/classes) everything works fine....but I like putting my configuration files all together.&lt;/p&gt;
</comment>
                            <comment id="13916099" author="remkop@yahoo.com" created="Fri, 28 Feb 2014 17:58:21 +0000"  >&lt;p&gt;&lt;tt&gt;log4jConfiguration&lt;/tt&gt; is the old log4j-1.2 system property name. Log4j2 uses a different system property name, &lt;tt&gt;log4j.configurationFile&lt;/tt&gt; to specify the config file location. &lt;/p&gt;

&lt;p&gt;Also, I think it is fine for a web container to decide that /WEB-INF means the WEB-INF  folder under the root of a war file, but I don&apos;t think you can ask log4j to look at the world that way. The root is the root of the file system, I think. &lt;/p&gt;

&lt;p&gt;About the error message, that does sound like a separate issue. &lt;/p&gt;</comment>
                            <comment id="13916182" author="x046866" created="Fri, 28 Feb 2014 18:55:20 +0000"  >&lt;p&gt;Remko,&lt;br/&gt;
It appears there is an inconsistency here; the log4j2 documentation specifies to use &apos;log4jConfiguration&apos; (see:&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;http://logging.apache.org/log4j/2.x/manual/webapp.html#ContextParams) .&#160; If I use the &apos;log4jConfiguration&apos;and point to a physical location on my file system it does work.&#160; The following in the web.xml works just fine.&lt;br/&gt;
&#160;&#160;&#160; &amp;lt;context-param&amp;gt;&lt;br/&gt;
&#160;&#160;&#160; &#160;&#160;&#160; &amp;lt;param-name&amp;gt;log4jConfiguration&amp;lt;/param-name&amp;gt;&lt;br/&gt;
&#160;&#160;&#160;&#160; &#160;&#160;&#160; &amp;lt;param-value&amp;gt;&lt;a href=&quot;file://c:/projects/SMS-CTMSApplication/CTMSApplicationServices/WebContent/WEB-INF/config/log4j2.xml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file://c:/projects/SMS-CTMSApplication/CTMSApplicationServices/WebContent/WEB-INF/config/log4j2.xml&lt;/a&gt;&amp;lt;/param-value&amp;gt;&#160;&lt;br/&gt;
&#160;&#160;&#160; &amp;lt;/context-param&amp;gt;&lt;/p&gt;

&lt;p&gt;I understand how Log4J2 can not be customized for the web space per se (although the unique web-context key word &apos;log4jConfiguration&apos; implies there is some web influence, or maybe that is just left over), but I think others will have a similar desire to do this.&#160;&lt;br/&gt;
I am going to see if there is an environment variable I can use that might help me (e.g.: ${CurrentWARDirectory})&lt;/p&gt;</comment>
                            <comment id="13916370" author="ralph.goers@dslextreme.com" created="Fri, 28 Feb 2014 20:52:56 +0000"  >&lt;p&gt;If the container you are running in exposes a system property then you can easily achieve what you want. For example, in Tomcat you could specifiy ${env:catalina.home}/webapps/CTMSApplicationServices/WEB-INF/config/log4j2.xml.&lt;/p&gt;

&lt;p&gt;That said, we could be doing getServletContext().getResourceAsStream(getServletContext().getInitParameter(&quot;log4jConfiguration&quot;)); which would allow exactly what you want.  I will take a look at the code and see if we can easily do that.&lt;/p&gt;</comment>
                            <comment id="13916392" author="x046866" created="Fri, 28 Feb 2014 21:11:20 +0000"  >&lt;p&gt;I am poking around for something like that.&#160; We are using WildFly and have a lot of jboss variables that point to the basic location....but I am looking for something a tad more elegant.&#160; In this case my application would have to know about how the appserver is going to deploy it (although it is a pretty safe assumption).&#160; It would look like this for me:&#160;&#160;&#160;&#160; ${jboss.server.base.dir}/deployments/CTMSApplicationServices.war/WEB-INF/config/log4j2.xml.&lt;br/&gt;
The use of the Servlet context may work...but then there is some web-app specific notion inside log4j...dunno if that is something you want to avoid.&lt;/p&gt;
</comment>
                            <comment id="13916413" author="ralph.goers@dslextreme.com" created="Fri, 28 Feb 2014 21:30:40 +0000"  >&lt;p&gt;We already have some webapp specific stuff. We have to to read the log4jConfiguration value from the web.xml. What we don&apos;t want is something specific to a particular container.  If you are deploying a war in JBoss trying to read from the location of the deployed war is generally a bad idea.&lt;/p&gt;</comment>
                            <comment id="13916525" author="x046866" created="Fri, 28 Feb 2014 22:47:20 +0000"  >&lt;p&gt;Good point on the web.xml.&lt;/p&gt;

&lt;p&gt;Agreed on the reading from the war location...I want this to be as &lt;br/&gt;
portable as possible and that has potential problems written all over it.&lt;/p&gt;

&lt;p&gt;If the getServletContext allows you to read from something relative to &lt;br/&gt;
the war itself, that would be dynamite.  It would serve my purpose &lt;br/&gt;
wonderfully.&lt;/p&gt;

&lt;p&gt;I didn&apos;t try *./*WEB-INF/config/log4j2.xml (use the preceding &apos;.&apos; to &lt;br/&gt;
ensure current)...think that might get me further?  I may try that.&lt;/p&gt;

</comment>
                            <comment id="14025884" author="ralph.goers@dslextreme.com" created="Mon, 9 Jun 2014 22:54:16 +0000"  >&lt;p&gt;Fix committed in revision 1601520. Configuration files may now be located as servlet context resources when running in a web application. &lt;/p&gt;

&lt;p&gt;Please verify and close.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>376287</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 24 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1sub3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>376583</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>