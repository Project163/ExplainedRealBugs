<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:34:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-1038] Incorrect documentation for layout default charset</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-1038</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-255&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/LOG4J2-255&lt;/a&gt; states that the default charset is the system default (a fact I confirmed by running local tests). &lt;a href=&quot;http://logging.apache.org/log4j/2.x/manual/layouts.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://logging.apache.org/log4j/2.x/manual/layouts.html&lt;/a&gt; incorrectly states that the default charset is UTF-8.&lt;/p&gt;

&lt;p&gt;Please update the documentation to state that the default is the system default and strongly recommend (in bold) that the user sets an explicit charset.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12834806">LOG4J2-1038</key>
            <summary>Incorrect documentation for layout default charset</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cowwoc">Gili</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Jun 2015 20:54:35 +0000</created>
                <updated>Sun, 9 Oct 2016 17:53:13 +0000</updated>
                            <resolved>Wed, 3 Jun 2015 02:48:29 +0000</resolved>
                                    <version>2.1</version>
                                    <fixVersion>2.4</fixVersion>
                                    <component>Documentation</component>
                    <component>Layouts</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14569765" author="garydgregory" created="Tue, 2 Jun 2015 21:05:41 +0000"  >&lt;p&gt;Each layout is different. The root of layouts that use a charset is &lt;tt&gt;org.apache.logging.log4j.core.layout.AbstractStringLayout&lt;/tt&gt; and the default there is UTF-8.&lt;/p&gt;

&lt;p&gt;Each layout that extends &lt;tt&gt;org.apache.logging.log4j.core.layout.AbstractStringLayout&lt;/tt&gt; can provide its own default.&lt;/p&gt;

&lt;p&gt;I&apos;ve added the following to the layouts page:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;p&amp;gt;&lt;/span&gt;
          The root class for layouts that use a Charset is &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;code&amp;gt;&lt;/span&gt;org.apache.logging.log4j.core.layout.AbstractStringLayout&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/code&amp;gt;&lt;/span&gt; 
          where the default there is UTF-8. Each layout that extends &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;code&amp;gt;&lt;/span&gt;org.apache.logging.log4j.core.layout.AbstractStringLayout&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/code&amp;gt;&lt;/span&gt; 
          can provide its own default. See each layout below.
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Which specific layout are you talking about?&lt;/p&gt;</comment>
                            <comment id="14569815" author="garydgregory" created="Tue, 2 Jun 2015 21:43:06 +0000"  >&lt;p&gt;Fixed HTML layout docs to match code: UTF-8 is the default.&lt;/p&gt;</comment>
                            <comment id="14569828" author="garydgregory" created="Tue, 2 Jun 2015 21:47:44 +0000"  >&lt;p&gt;Fixed Syslog layout docs to match code: UTF-8 is the default.&lt;/p&gt;</comment>
                            <comment id="14569830" author="garydgregory" created="Tue, 2 Jun 2015 21:50:45 +0000"  >&lt;p&gt;Fixed XML layout docs to match code: UTF-8 is the default.&lt;/p&gt;</comment>
                            <comment id="14569831" author="garydgregory" created="Tue, 2 Jun 2015 21:52:15 +0000"  >&lt;p&gt;The fixes are in Git master, not the published site. Unless you know of other errors, please verify and close.&lt;/p&gt;

&lt;p&gt;Thank you!&lt;/p&gt;</comment>
                            <comment id="14569844" author="cowwoc" created="Tue, 2 Jun 2015 22:06:04 +0000"  >&lt;p&gt;My use-case involved PatternLayout. Looking now, I see that the documentation correctly states that the system charset is used but man... that is confusing! I assume that whatever the default was, it would be consistent across all layouts.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Why is the default not UTF-8 across all layouts? This seems like a saner default.&lt;/li&gt;
	&lt;li&gt;Why doesn&apos;t log4j2 encourage users to specify an explicit charset by warning that the configured charset is unportable?&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="14569887" author="garydgregory" created="Tue, 2 Jun 2015 22:30:27 +0000"  >&lt;p&gt;Fixed pattern layout docs to match code: UTF-8 is the default.&lt;/p&gt;</comment>
                            <comment id="14569905" author="garydgregory" created="Tue, 2 Jun 2015 22:35:25 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Why is the default not UTF-8 across all layouts? This seems like a saner default.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It is for String layouts (the kind of layout that carries a Charset), see my comments and hopefully improved docs &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1038?focusedCommentId=14569765&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14569765&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/LOG4J2-1038?focusedCommentId=14569765&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14569765&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Not ALL layouts have a configurable charset. For some the charset is hard coded (to UTF-8) for the GELF layout for example.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Why doesn&apos;t log4j2 encourage users to specify an explicit charset by warning that the configured charset is unportable?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Define not portable...&lt;/p&gt;

&lt;p&gt;If you mean a charset not on the handful of required JRE charsets, that&apos;s pretty narrow!&lt;/p&gt;

&lt;p&gt;Feel free to create a JIRA with a specific feature request.&lt;/p&gt;

&lt;p&gt;Any help we can get to improve the software and the documentation is welcome! Patches welcome!&lt;/p&gt;</comment>
                            <comment id="14570051" author="cowwoc" created="Wed, 3 Jun 2015 00:28:55 +0000"  >&lt;p&gt;&amp;gt; Define not portable&lt;/p&gt;

&lt;p&gt;I meant that using the system charset leads to the same application behaving differently depending on what machine it runs on. I am expecting the same logging behavior regardless of where the code runs (same input configuration, same output format).&lt;/p&gt;</comment>
                            <comment id="14570101" author="garydgregory" created="Wed, 3 Jun 2015 01:28:26 +0000"  >&lt;p&gt;That does not sounds reasonable since the platform encoding could be UTF-8 or any encoding you set with the file.encoding system property.&lt;/p&gt;</comment>
                            <comment id="14570104" author="garydgregory" created="Wed, 3 Jun 2015 01:30:02 +0000"  >&lt;p&gt;But... let&apos;s stick to the original issue. Have all the doc issues you found been addressed now? If so, please close this ticket. Feel free to join our mailing list to discuss issues or create another ticket to request a feature.&lt;/p&gt;</comment>
                            <comment id="14570184" author="cowwoc" created="Wed, 3 Jun 2015 02:48:29 +0000"  >&lt;p&gt;Agreed. Closing the issue. Thank you for the quick turnaround time.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13010862">LOG4J2-1636</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 25 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2fjcf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>