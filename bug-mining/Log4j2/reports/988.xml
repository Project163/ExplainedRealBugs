<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:37:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-1740] Add CronTriggeringPolicy programmatically leads to NPE</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-1740</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;When i try to add a RollingFileAppender with a CronTriggeringPolicy programmatically then I get a NPE because the ScheduledExecutorService in ConfigurationScheduler is null. IMO the ScheduledExecutorService should always be created even when there are no items which needs to be scheduled.  &lt;/p&gt;

&lt;p&gt;Caused by: java.lang.NullPointerException&lt;br/&gt;
	at org.apache.logging.log4j.core.config.ConfigurationScheduler.schedule(ConfigurationScheduler.java:107) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;log4j-core-2.7.jar:2.7&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.logging.log4j.core.config.ConfigurationScheduler.scheduleWithCron(ConfigurationScheduler.java:120) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;log4j-core-2.7.jar:2.7&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.logging.log4j.core.appender.rolling.CronTriggeringPolicy.initialize(CronTriggeringPolicy.java:72) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;log4j-core-2.7.jar:2.7&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.logging.log4j.core.appender.rolling.RollingFileManager.initialize(RollingFileManager.java:104) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;log4j-core-2.7.jar:2.7&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.logging.log4j.core.appender.RollingRandomAccessFileAppender.createAppender(RollingRandomAccessFileAppender.java:218) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;log4j-core-2.7.jar:2.7&amp;#93;&lt;/span&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13028330">LOG4J2-1740</key>
            <summary>Add CronTriggeringPolicy programmatically leads to NPE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="pni">Peter Nimmervoll</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Dec 2016 08:55:17 +0000</created>
                <updated>Fri, 16 Dec 2016 16:59:56 +0000</updated>
                            <resolved>Fri, 16 Dec 2016 02:16:19 +0000</resolved>
                                    <version>2.7</version>
                                    <fixVersion>2.8</fixVersion>
                                    <component>Appenders</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15750920" author="garydgregory" created="Thu, 15 Dec 2016 09:40:00 +0000"  >&lt;p&gt;Can you please add a stack trace to your description?&lt;/p&gt;</comment>
                            <comment id="15751072" author="garydgregory" created="Thu, 15 Dec 2016 10:59:49 +0000"  >&lt;p&gt;I fixed that in commit c5222aea440023a2891c08634ec8ed2d8ca63e00 for &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1474&quot; title=&quot;CronTriggeringPolicy raise exception and fail to rollover log file when evaluateOnStartup is true.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1474&quot;&gt;&lt;del&gt;LOG4J2-1474&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Can you check our Git master?&lt;/p&gt;</comment>
                            <comment id="15751155" author="pni" created="Thu, 15 Dec 2016 11:42:47 +0000"  >&lt;p&gt;Based on the commit I&apos;m not convinced this will work because in my case the ConfigurationScheduler was &lt;br/&gt;
already startet with scheduledItems = 0 and therefore the executorService is null.&lt;br/&gt;
But I guess I can try it to be sure.&lt;/p&gt;</comment>
                            <comment id="15751284" author="pni" created="Thu, 15 Dec 2016 12:48:40 +0000"  >&lt;p&gt;Ok, I tried the current Git master and the problem still exists.&lt;/p&gt;

&lt;p&gt;Caused by: java.lang.NullPointerException&lt;br/&gt;
	at org.apache.logging.log4j.core.config.ConfigurationScheduler.schedule(ConfigurationScheduler.java:107) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;log4j-core-2.7.1-SNAPSHOT.jar:2.7.1-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.logging.log4j.core.config.ConfigurationScheduler.scheduleWithCron(ConfigurationScheduler.java:120) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;log4j-core-2.7.1-SNAPSHOT.jar:2.7.1-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.logging.log4j.core.appender.rolling.CronTriggeringPolicy.initialize(CronTriggeringPolicy.java:80) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;log4j-core-2.7.1-SNAPSHOT.jar:2.7.1-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.logging.log4j.core.appender.rolling.RollingFileManager.initialize(RollingFileManager.java:104) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;log4j-core-2.7.1-SNAPSHOT.jar:2.7.1-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.logging.log4j.core.appender.RollingRandomAccessFileAppender$Builder.build(RollingRandomAccessFileAppender.java:122) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;log4j-core-2.7.1-SNAPSHOT.jar:2.7.1-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.logging.log4j.core.appender.RollingRandomAccessFileAppender.createAppender(RollingRandomAccessFileAppender.java:313) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;log4j-core-2.7.1-SNAPSHOT.jar:2.7.1-SNAPSHOT&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="15752237" author="garydgregory" created="Thu, 15 Dec 2016 19:19:03 +0000"  >&lt;p&gt;Can you please provide your configuration file? How about a unit test patch that demonstrate the problem? &lt;/p&gt;</comment>
                            <comment id="15752791" author="garydgregory" created="Thu, 15 Dec 2016 23:07:29 +0000"  >&lt;p&gt;You should see if you can create a failing test in &lt;tt&gt;org.apache.logging.log4j.core.appender.rolling.CronTriggeringPolicyTest&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="15752989" author="garydgregory" created="Fri, 16 Dec 2016 00:38:12 +0000"  >&lt;p&gt;I do not think you &lt;em&gt;always&lt;/em&gt; want to have the start of a scheduler create a thread pool as this would be wasteful for set ups that do not need this feature. The AbstractConfiguration class always holds a sheduler for example.&lt;/p&gt;</comment>
                            <comment id="15753017" author="ralphgoers" created="Fri, 16 Dec 2016 00:50:27 +0000"  >&lt;p&gt;I agree. I would hope that we could create it dynamically if needed.&lt;/p&gt;</comment>
                            <comment id="15753178" author="garydgregory" created="Fri, 16 Dec 2016 02:16:21 +0000"  >&lt;p&gt;Ralph,&lt;/p&gt;

&lt;p&gt;Would you mind giving a look over my fix in Git master? All the tests pass.&lt;/p&gt;

&lt;p&gt;Peter,&lt;/p&gt;

&lt;p&gt;Can you test again?&lt;/p&gt;

&lt;p&gt;Thank you all,&lt;br/&gt;
Gary&lt;/p&gt;</comment>
                            <comment id="15753727" author="pni" created="Fri, 16 Dec 2016 07:39:48 +0000"  >&lt;p&gt;Tried the latest Git master and it is fixed now.&lt;/p&gt;</comment>
                            <comment id="15754671" author="ralphgoers" created="Fri, 16 Dec 2016 15:17:40 +0000"  >&lt;p&gt;Looks good to me.&lt;/p&gt;</comment>
                            <comment id="15754947" author="garydgregory" created="Fri, 16 Dec 2016 16:59:56 +0000"  >&lt;p&gt;Closing based on feedback from stakeholders.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 48 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i37mrr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>