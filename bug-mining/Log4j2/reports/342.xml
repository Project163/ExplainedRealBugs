<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:33:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-704] -Dlog4j.configurationFile no longer accepts relative paths</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-704</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;I just upgraded from beta9 to rc2 and my command line applications now fail on startup.&lt;/p&gt;

&lt;p&gt;I am passing -Dlog4j.configurationFile=conf/log4j2.xml&lt;/p&gt;

&lt;p&gt;The documentation does not state that relative paths are no longer supported but the error indicates that only absolute paths can now be used.&lt;/p&gt;

&lt;p&gt;     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; ERROR StatusLogger Unable to access conf/log4j2.xml java.lang.IllegalArgumentException: URI is not absolute&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; 	at java.net.URI.toURL(URI.java:1095)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; 	at org.apache.logging.log4j.core.config.ConfigurationFactory.getInputFromUri(ConfigurationFactory.java:265)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; 	at org.apache.logging.log4j.core.config.ConfigurationFactory$Factory.getConfiguration(ConfigurationFactory.java:382)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; 	at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:415)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; 	at org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:146)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; 	at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:75)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; 	at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:37)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; 	at org.apache.logging.log4j.LogManager.getContext(LogManager.java:268)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; 	at org.apache.logging.slf4j.Log4jLoggerFactory$PrivateManager.getContext(Log4jLoggerFactory.java:98)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; 	at org.apache.logging.slf4j.Log4jLoggerFactory.getContext(Log4jLoggerFactory.java:84)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; 	at org.apache.logging.slf4j.Log4jLoggerFactory.getLogger(Log4jLoggerFactory.java:44)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; 	at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:270)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; 	at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:281)&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Ubuntu. Oracle Java 1.7.&lt;/p&gt;</environment>
        <key id="12726139">LOG4J2-704</key>
            <summary>-Dlog4j.configurationFile no longer accepts relative paths</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rpopma">Remko Popma</assignee>
                                    <reporter username="andygrove">Andy Grove</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Jul 2014 18:03:26 +0000</created>
                <updated>Tue, 29 Jul 2014 15:48:16 +0000</updated>
                            <resolved>Tue, 29 Jul 2014 15:48:16 +0000</resolved>
                                    <version>2.0-rc2</version>
                                    <fixVersion>2.0.1</fixVersion>
                                    <component>Configurators</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14055390" author="garydgregory" created="Tue, 8 Jul 2014 19:49:27 +0000"  >&lt;p&gt;That does NOT look like a 2.0-rc2 stack trace. &lt;/p&gt;

&lt;p&gt;&lt;tt&gt;ConfigurationFactory.getInputFromURI()&lt;/tt&gt; was renamed to &lt;tt&gt;ConfigurationFactory.getInputFromUri()&lt;/tt&gt; before rc2.&lt;/p&gt;

&lt;p&gt;Verify your classpath and try again.&lt;/p&gt;</comment>
                            <comment id="14055510" author="andygrove" created="Tue, 8 Jul 2014 20:55:23 +0000"  >&lt;p&gt;You are correct. This must have been from when I tried rc1. I have now updated the stack trace with the one from rc2.&lt;/p&gt;

&lt;p&gt;Should I be able to use relative paths with -Dlog4j.configurationFile? If not then then I&apos;ll change this to a documentation bug.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="14055570" author="ralph.goers@dslextreme.com" created="Tue, 8 Jul 2014 21:31:34 +0000"  >&lt;p&gt;Is this a standalone app or in a web container?  I don&apos;t believe we disabled relative paths, per se, but I don&apos;t know that they were ever enabled either. If conf/log4j2.xml is in the classpath then it would work.&lt;/p&gt;</comment>
                            <comment id="14055658" author="remkop@yahoo.com" created="Tue, 8 Jul 2014 23:21:39 +0000"  >&lt;p&gt;This may be related to the changes I made for &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-539&quot; title=&quot;IllegalArgumentException after editing config, pressing &amp;quot;Reconfigure using XML below&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-539&quot;&gt;&lt;del&gt;LOG4J2-539&lt;/del&gt;&lt;/a&gt;. &lt;br/&gt;
(But it would be good to know if this is a web app or not).&lt;/p&gt;</comment>
                            <comment id="14058548" author="remkop@yahoo.com" created="Fri, 11 Jul 2014 08:33:33 +0000"  >&lt;p&gt;I was worried that my changes for &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-539&quot; title=&quot;IllegalArgumentException after editing config, pressing &amp;quot;Reconfigure using XML below&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-539&quot;&gt;&lt;del&gt;LOG4J2-539&lt;/del&gt;&lt;/a&gt; caused this issue but when looking closely I don&apos;t think that is the case. &lt;/p&gt;

&lt;p&gt;Also, if the file &quot;conf/log4j2.xml&quot; exists and is readable, this error should not happen. Either a file relative to the current location in the file system or (as Ralph mentioned) putting conf/log4j2.xml in the classpath should work.&lt;/p&gt;

&lt;p&gt;Do you see any other WARN or ERROR messages before this error occurs? If not, can you add system property &lt;tt&gt;-Dlog4j2.StatusLogger.level=TRACE&lt;/tt&gt; and let us know if you see any configuration-related error messages?&lt;/p&gt;</comment>
                            <comment id="14060052" author="remkop@yahoo.com" created="Sun, 13 Jul 2014 09:06:40 +0000"  >&lt;p&gt;I tried but I am unable to reproduce the issue.&lt;br/&gt;
Can you provide a small project that demonstrates the problem?&lt;/p&gt;</comment>
                            <comment id="14066474" author="remkop@yahoo.com" created="Fri, 18 Jul 2014 16:09:09 +0000"  >&lt;p&gt;Andy, have you had a chance to take another look at this?&lt;/p&gt;</comment>
                            <comment id="14074107" author="remkop@yahoo.com" created="Fri, 25 Jul 2014 05:50:03 +0000"  >&lt;p&gt;Andy, we are thinking about doing a maintenance release soon. If you have a sample project that demonstrates the issue I can try to take a look at this.&lt;/p&gt;</comment>
                            <comment id="14077351" author="seh4nc" created="Tue, 29 Jul 2014 03:38:13 +0000"  >&lt;p&gt;I stumbled across this.&lt;/p&gt;

&lt;p&gt;Of course you can specify relative paths &amp;#8211; this has always worked and still works.&lt;/p&gt;

&lt;p&gt;The problem is if the file does not exist, then the &lt;tt&gt;ConfigurationFactory.getInputFromUri&lt;/tt&gt; method falls back to a classpath search, and if that fails then it falls back to &lt;tt&gt;URI.toURL().openStream()&lt;/tt&gt; which is what emits the unhelpful error.&lt;/p&gt;

&lt;p&gt;Looks kinda tricky to untangle. For now I would simply warn users to interpret the &quot;Unable to access foo.xml // IllegalArgumentException: URI is not absolute&quot; as simply a File Not Found message.&lt;/p&gt;</comment>
                            <comment id="14077378" author="remkop@yahoo.com" created="Tue, 29 Jul 2014 04:30:27 +0000"  >&lt;p&gt;Thanks for pointing this out! I did not look at the stack trace above carefully.&lt;/p&gt;

&lt;p&gt;Now that I think about it, we could make this a little user-friendlier by checking if the URI is absolute or not before trying to convert it into a URL (which will fail if URI is relative). If we know we can&apos;t turn it into a URL anyway, we can log a FileNotFoundException: configLocation + &quot; not found in file system or in classpath&quot; and return null.&lt;/p&gt;</comment>
                            <comment id="14077858" author="remkop@yahoo.com" created="Tue, 29 Jul 2014 15:48:16 +0000"  >&lt;p&gt;If the specified configuration location could not be found,  ConfigurationFactory now reports a better error to the status logger: &quot;File not found in file system or classpath: &quot; + configLocation.&lt;/p&gt;

&lt;p&gt;Fixed in revision 1614390.&lt;br/&gt;
Please verify and close.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>404246</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 17 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1xkm7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>404286</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>