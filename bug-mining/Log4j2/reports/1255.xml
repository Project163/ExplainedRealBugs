<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:40:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-2482] BasicContextSelector cannot be used in a OSGI application</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-2482</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;Using&#160;BasicContextSelector does not work when using Log4j in an OSGI application, see discussion on the mailing list: &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/logging-log4j-user/201810.mbox/%3cAAA02DBF-18FF-4F31-9F5A-BAF4DBDBD679@dslextreme.com%3e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mail-archives.apache.org/mod_mbox/logging-log4j-user/201810.mbox/%3cAAA02DBF-18FF-4F31-9F5A-BAF4DBDBD679@dslextreme.com%3e&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Basically, the problem is that core-class&#160;BasicContextSelector is being loaded by LoaderUtil class that is living in log4j-api which cannot access classes in log4j-core.&lt;/p&gt;

&lt;p&gt;This is the error that occurs:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ERROR StatusLogger Unable to create custom ContextSelector. Falling back to &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;.
&#160;java.lang.ClassNotFoundException: org.apache.logging.log4j.core.selector.BasicContextSelector cannot be found by org.apache.logging.log4j.api_2.11.2.SNAPSHOT
at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:508)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:419)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:411)
at org.eclipse.osgi.internal.loader.ModuleClassLoader.loadClass(ModuleClassLoader.java:150)
at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:357)
at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.forName0(Native Method)
at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.forName(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.java:264)
at org.apache.logging.log4j.util.LoaderUtil.loadClass(LoaderUtil.java:168)
at org.apache.logging.log4j.util.LoaderUtil.newInstanceOf(LoaderUtil.java:207)
at org.apache.logging.log4j.util.LoaderUtil.newCheckedInstanceOf(LoaderUtil.java:228)
at org.apache.logging.log4j.util.LoaderUtil.newCheckedInstanceOfProperty(LoaderUtil.java:253)
at org.apache.logging.log4j.core.impl.Log4jContextFactory.createContextSelector(Log4jContextFactory.java:98)
at org.apache.logging.log4j.core.impl.Log4jContextFactory.&amp;lt;init&amp;gt;(Log4jContextFactory.java:59)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.newInstance(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.java:442)
at org.apache.logging.log4j.LogManager.&amp;lt;clinit&amp;gt;(LogManager.java:94)
at org.apache.logging.log4j.spi.AbstractLoggerAdapter.getContext(AbstractLoggerAdapter.java:121)
at org.apache.logging.slf4j.Log4jLoggerFactory.getContext(Log4jLoggerFactory.java:49)
at org.apache.logging.log4j.spi.AbstractLoggerAdapter.getLogger(AbstractLoggerAdapter.java:46)
at org.apache.logging.slf4j.Log4jLoggerFactory.getLogger(Log4jLoggerFactory.java:29)
at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:355)
at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:380)
at com.servoy.j2db.server.main.Activator.&amp;lt;clinit&amp;gt;(Activator.java:44)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.newInstance(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.java:442)
at org.eclipse.osgi.internal.framework.BundleContextImpl.loadBundleActivator(BundleContextImpl.java:763)
at org.eclipse.osgi.internal.framework.BundleContextImpl.start(BundleContextImpl.java:716)
at org.eclipse.osgi.internal.framework.EquinoxBundle.startWorker0(EquinoxBundle.java:1002)
at org.eclipse.osgi.internal.framework.EquinoxBundle$EquinoxModule.startWorker(EquinoxBundle.java:354)
at org.eclipse.osgi.container.Module.doStart(Module.java:581)
at org.eclipse.osgi.container.Module.start(Module.java:449)
at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:468)
at org.eclipse.osgi.internal.hooks.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:114)
at org.eclipse.osgi.internal.loader.classpath.ClasspathManager.findLocalClass(ClasspathManager.java:505)
at org.eclipse.osgi.internal.loader.ModuleClassLoader.findLocalClass(ModuleClassLoader.java:328)
at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:392)
at org.eclipse.osgi.internal.loader.sources.SingleSourcePackage.loadClass(SingleSourcePackage.java:36)
at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:466)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:419)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:411)
at org.eclipse.osgi.internal.loader.ModuleClassLoader.loadClass(ModuleClassLoader.java:150)
at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:357)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;A fix for&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-920&quot; title=&quot;ClassNotFoundException for BundleContextSelector when initialising in an OSGi environment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-920&quot;&gt;&lt;del&gt;LOG4J2-920&lt;/del&gt;&lt;/a&gt; was done with a similar issue in which a dependency from log4j-api to log4j-core was created in the manifest file.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;As discussed on the mailing list, I will file a pull request that allows&#160;BasicContextSelector to work in an OSGI setup and removes the unwanted dependency again.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13193127">LOG4J2-2482</key>
            <summary>BasicContextSelector cannot be used in a OSGI application</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rgansevles">Rob Gansevles</reporter>
                        <labels>
                    </labels>
                <created>Sun, 21 Oct 2018 19:30:27 +0000</created>
                <updated>Mon, 22 Oct 2018 20:31:53 +0000</updated>
                            <resolved>Mon, 22 Oct 2018 18:56:33 +0000</resolved>
                                    <version>2.11.1</version>
                                    <fixVersion>3.0.0</fixVersion>
                    <fixVersion>2.11.2</fixVersion>
                                    <component>API</component>
                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16658348" author="githubbot" created="Sun, 21 Oct 2018 19:39:31 +0000"  >&lt;p&gt;GitHub user rgansevles opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/222&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/222&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2482&quot; title=&quot;BasicContextSelector cannot be used in a OSGI application&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2482&quot;&gt;&lt;del&gt;LOG4J2-2482&lt;/del&gt;&lt;/a&gt; BasicContextSelector cannot be used in a OSGI application.&lt;/p&gt;

&lt;p&gt;    Removed optional dependencies from log4j-api to log4j-core, use the thread context classloader to load core classes.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/rgansevles/logging-log4j2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/rgansevles/logging-log4j2&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2482&quot; title=&quot;BasicContextSelector cannot be used in a OSGI application&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2482&quot;&gt;&lt;del&gt;LOG4J2-2482&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/222.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/222.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #222&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 7df63899709ed2d4e9d73e52b6b53c0a9571012b&lt;br/&gt;
Author: Rob Gansevles &amp;lt;rgansevles@...&amp;gt;&lt;br/&gt;
Date:   2018-10-21T19:34:26Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2482&quot; title=&quot;BasicContextSelector cannot be used in a OSGI application&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2482&quot;&gt;&lt;del&gt;LOG4J2-2482&lt;/del&gt;&lt;/a&gt; BasicContextSelector cannot be used in a OSGI application.&lt;/p&gt;

&lt;p&gt;    Removed optional dependencies from log4j-api to log4j-core, use the thread context classloader to load core classes.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16658349" author="rgansevles" created="Sun, 21 Oct 2018 19:40:28 +0000"  >&lt;p&gt;A pull-request was created: &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/222&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/222&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16659261" author="jira-bot" created="Mon, 22 Oct 2018 18:16:19 +0000"  >&lt;p&gt;Commit 2c5008bea17160f17b6c4909c7e8c51fa5aa1c12 in logging-log4j2&apos;s branch refs/heads/release-2.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgansevles&quot; class=&quot;user-hover&quot; rel=&quot;rgansevles&quot;&gt;rgansevles&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=2c5008b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=2c5008b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2482&quot; title=&quot;BasicContextSelector cannot be used in a OSGI application&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2482&quot;&gt;&lt;del&gt;LOG4J2-2482&lt;/del&gt;&lt;/a&gt; BasicContextSelector cannot be used in a OSGI application.&lt;/p&gt;</comment>
                            <comment id="16659402" author="jira-bot" created="Mon, 22 Oct 2018 18:54:15 +0000"  >&lt;p&gt;Commit a11be17918f0abf19922273bfc22d37728f6c9f2 in logging-log4j2&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgansevles&quot; class=&quot;user-hover&quot; rel=&quot;rgansevles&quot;&gt;rgansevles&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=a11be17&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=a11be17&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2482&quot; title=&quot;BasicContextSelector cannot be used in a OSGI application&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2482&quot;&gt;&lt;del&gt;LOG4J2-2482&lt;/del&gt;&lt;/a&gt; BasicContextSelector cannot be used in a OSGI application.&lt;/p&gt;</comment>
                            <comment id="16659407" author="garydgregory" created="Mon, 22 Oct 2018 18:56:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgansevles&quot; class=&quot;user-hover&quot; rel=&quot;rgansevles&quot;&gt;rgansevles&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;Committed your patch as is to branches &lt;tt&gt;master&lt;/tt&gt; and &lt;tt&gt;release-2.x&lt;/tt&gt;. Bother builds pass running &lt;tt&gt;mvn clean package&lt;/tt&gt;. Note that you must run &lt;tt&gt;package&lt;/tt&gt; for the &lt;tt&gt;log4j-osgi&lt;/tt&gt; tests to pass.&lt;/p&gt;

&lt;p&gt;Please verify and close this ticket and associated PR if the SNAPSHOT build works for you.&lt;/p&gt;

&lt;p&gt;Thank you,&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                            <comment id="16659446" author="rgansevles" created="Mon, 22 Oct 2018 19:11:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt; thanks for applying the pull request.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I have verified the merge, will close the ticket and the PR.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Rob&lt;/p&gt;</comment>
                            <comment id="16659647" author="githubbot" created="Mon, 22 Oct 2018 20:31:52 +0000"  >&lt;p&gt;Github user rgansevles closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/222&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/222&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16659648" author="githubbot" created="Mon, 22 Oct 2018 20:31:53 +0000"  >&lt;p&gt;Github user rgansevles commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/222&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/222&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Pull-request was applied&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 4 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3zgm7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>