<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:32:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-696] RegexFilter does not match multiline log messages</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-696</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;RegexFilter is constructed with a pattern, but pattern does not support multiline matches, so impossible for the filter to ever match a multiline msg.&lt;br/&gt;
Should maybe provide a multline=&quot;x attribute whichi should default to true and result in the patter being compiled as such:&lt;br/&gt;
Pattern pattern = Pattern.compile(&quot;.&lt;b&gt;line.&lt;/b&gt;&quot;, Pattern.DOTALL);&lt;/p&gt;

&lt;p&gt;See attached UnitTest illustrating failure&lt;/p&gt;</description>
                <environment></environment>
        <key id="12724694">LOG4J2-696</key>
            <summary>RegexFilter does not match multiline log messages</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="rgoers">Ralph Goers</assignee>
                                    <reporter username="phil.wray">phil wray</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Jul 2014 10:28:27 +0000</created>
                <updated>Thu, 17 Oct 2024 21:39:26 +0000</updated>
                            <resolved>Thu, 17 Oct 2024 21:39:25 +0000</resolved>
                                    <version>2.0-rc2</version>
                                                    <component>Filters</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14053631" author="garydgregory" created="Mon, 7 Jul 2014 13:08:08 +0000"  >&lt;p&gt;We might not be able to use &lt;tt&gt;org.apache.logging.log4j.core.config.plugins.util.TypeConverters.PatternConverter&lt;/tt&gt; if we want to support the int flag for &lt;tt&gt;java.util.regex.Pattern.compile(String, int)&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;It seems the solution is to change &lt;tt&gt;org.apache.logging.log4j.core.filter.RegexFilter.createFilter(Pattern, Boolean, Result, Result)&lt;/tt&gt; and either:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Add an int parameter and let user compute the flag themselves, or&lt;/li&gt;
	&lt;li&gt;Add a String parameter and allow users to say things like &quot;CASE_INSENSITIVE | MULTILINE&quot; but that means parsing such things.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Perhaps we should just start with an int flag.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="14053792" author="phil.wray" created="Mon, 7 Jul 2014 16:05:34 +0000"  >&lt;p&gt;Int flag sounds like a better option. Doubt its a common use case. The int&lt;br/&gt;
let&apos;s you use all the options and is future compatible without having to&lt;br/&gt;
maintain parsing code and mappings.&lt;/p&gt;

&lt;p&gt;Cheers,&lt;br/&gt;
Phil&lt;/p&gt;
</comment>
                            <comment id="14053841" author="garydgregory" created="Mon, 7 Jul 2014 16:49:53 +0000"  >&lt;p&gt;I committed a version that allows a String[] of Pattern compile option names to be passed in, which match the name of any int defined on the Pattern class. This should be future/past proof to allow you to use whatever is defined on your Java version.&lt;/p&gt;

&lt;p&gt;This is available in trunk.&lt;/p&gt;

&lt;p&gt;Please test it out report how that matches your needs.&lt;/p&gt;</comment>
                            <comment id="14060146" author="garydgregory" created="Sun, 13 Jul 2014 15:36:40 +0000"  >&lt;p&gt;Resolving since no additional comments have been offered. &lt;/p&gt;</comment>
                            <comment id="14060732" author="phil.wray" created="Mon, 14 Jul 2014 15:05:17 +0000"  >&lt;p&gt;thanks Gary - looks good, even got the pattern name parsing in there.&lt;/p&gt;</comment>
                            <comment id="15224241" author="ralph.goers@dslextreme.com" created="Mon, 4 Apr 2016 14:34:12 +0000"  >&lt;p&gt;It doesn&#8217;t look like the RegexFilter is ever used in any test configurations.  From the factory method I would have expected to see a PatternFlagsPlugin to convert a container element into a String. Without a plugin I&#8217;m not sure how this will work.&lt;/p&gt;</comment>
                            <comment id="15326164" author="ralph.goers@dslextreme.com" created="Sun, 12 Jun 2016 03:27:39 +0000"  >&lt;p&gt;Assigning to me since it doesn&apos;t appear Gary plans on fixing this.&lt;/p&gt;</comment>
                            <comment id="16971463" author="zendem" created="Mon, 11 Nov 2019 11:40:09 +0000"  >&lt;p&gt;Do you work on this issue?&lt;/p&gt;

&lt;p&gt;My expected result:&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#660e7a&quot;&gt;log&lt;/font&gt;.warn(&lt;font color=&quot;#008000&quot;&gt;&quot;test&lt;/font&gt;&lt;font color=&quot;#000080&quot;&gt;\n&lt;/font&gt;&lt;font color=&quot;#008000&quot;&gt;&quot;&lt;/font&gt;);&lt;/p&gt;

&lt;p&gt;&amp;lt;&lt;font color=&quot;#000080&quot;&gt;RegexFilter &lt;/font&gt;&lt;font color=&quot;#0000ff&quot;&gt;regex&lt;/font&gt;&lt;font color=&quot;#008000&quot;&gt;=&quot;.*&lt;/font&gt;&lt;font color=&quot;#008000&quot;&gt;&lt;b&gt;test.&lt;/b&gt;*&quot; &lt;/font&gt;&lt;font color=&quot;#0000ff&quot;&gt;onMatch&lt;/font&gt;&lt;font color=&quot;#008000&quot;&gt;=&quot;DENY&quot; &lt;/font&gt;&lt;font color=&quot;#0000ff&quot;&gt;onMismatch&lt;/font&gt;&lt;font color=&quot;#008000&quot;&gt;=&quot;ACCEPT&quot;&lt;/font&gt;/&amp;gt;&lt;/p&gt;

&lt;p&gt;should not log &quot;test&quot;. But it is logging test.&lt;/p&gt;

&lt;p&gt;Without the \n the RegexFilter is working.&lt;/p&gt;</comment>
                            <comment id="17037021" author="esperling" created="Fri, 14 Feb 2020 14:53:28 +0000"  >&lt;p&gt;Solved this with embedded flag in regex: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;(?s).*test.*&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; matches &quot;test\n&quot;&lt;/p&gt;</comment>
                            <comment id="17890568" author="pkarwasz" created="Thu, 17 Oct 2024 21:39:25 +0000"  >&lt;p&gt;I am closing this issue and moving it to GitHub: &lt;a href=&quot;https://github.com/apache/logging-log4j2/issues/3086&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;#3086&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12653372" name="RegexFilterTest.java" size="1040" author="phil.wray" created="Tue, 1 Jul 2014 10:29:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>402877</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 3 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1xcbr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>402938</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>