<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:32:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-409] Specifying log4jConfiguration in web.xml fails on Windows when using ${user.home}</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-409</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;When specifying the context parameter log4jConfiguration in the web.xml of a web application and using ${user.home} as part of the path, e.g.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;context-param&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;param-name&amp;gt;&lt;/span&gt;log4jConfiguration&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/param-name&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;param-value&amp;gt;&lt;/span&gt;file://${user.home}/someDirectory/log4j2.xml&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/param-value&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/context-param&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the following exception is thrown on Windows systems:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.net.URISyntaxException: Illegal character in authority at index 7: file://C:\Users\steinman/someDirectory/log4j2.xml
    at java.net.URI$Parser.fail(Unknown Source)
    at java.net.URI$Parser.parseAuthority(Unknown Source)
    at java.net.URI$Parser.parseHierarchical(Unknown Source)
    at java.net.URI$Parser.parse(Unknown Source)
    at java.net.URI.&amp;lt;init&amp;gt;(Unknown Source)
    at org.apache.logging.log4j.core.config.Configurator.initialize(Configurator.java:46)
    ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It is because of the backslashes that are not allowed in URIs.&lt;/p&gt;

&lt;p&gt;There is an example in the documentation using backslashes (&lt;a href=&quot;http://logging.apache.org/log4j/2.x/manual/webapp.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://logging.apache.org/log4j/2.x/manual/webapp.html&lt;/a&gt;) which will produce the same exception.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7, Apache Tomcat 7, Java 7&lt;/p&gt;</environment>
        <key id="12670056">LOG4J2-409</key>
            <summary>Specifying log4jConfiguration in web.xml fails on Windows when using ${user.home}</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="beamerblvd">Nick Williams</assignee>
                                    <reporter username="stoney00">Frank Steinmann</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Sep 2013 13:23:21 +0000</created>
                <updated>Tue, 28 Jan 2014 05:40:13 +0000</updated>
                            <resolved>Tue, 28 Jan 2014 05:40:13 +0000</resolved>
                                    <version>2.0-beta8</version>
                                    <fixVersion>2.0-rc1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13774598" author="beamerblvd" created="Mon, 23 Sep 2013 14:50:19 +0000"  >&lt;p&gt;Thanks for reporting this, Frank. Looks like there are two distinct but related problems here. First, the documentation should not show backslashes, because those are indeed illegal in URIs. That&apos;s an easy fix. Second, the variable substitution is resulting in an invalid URI (because of the backslashes). This is a trickier problem, because variable substitution has no idea what the semantics of a variable value are. It could be a file path, a person&apos;s name, a database connection, or someone&apos;s favorite color. We&apos;re either going to have to put some context around variable substitution so that it can intelligently replace backslashes with forward slashes, or we&apos;re going to have to deal with the problem further down the line before converting values to URIs. I&apos;m going to have to think on this one for a bit.&lt;/p&gt;</comment>
                            <comment id="13774682" author="ralph.goers@dslextreme.com" created="Mon, 23 Sep 2013 16:17:44 +0000"  >&lt;p&gt;I&apos;m not sure whether or not the backslashes have anything to do with this.&lt;/p&gt;

&lt;p&gt;Can you please try &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;file:&lt;span class=&quot;code-comment&quot;&gt;///${user.home}/someDirectory/log4j2.xml&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;. Note the extra forward slash. The syntax for a uri is &lt;span class=&quot;error&quot;&gt;&amp;#91;scheme:&amp;#93;&lt;/span&gt;[//authority]&lt;span class=&quot;error&quot;&gt;&amp;#91;path&amp;#93;&lt;/span&gt;. For an absolute path you need a leading &apos;/&apos; which makes it &quot;/C:path&quot; on Windows.&lt;/p&gt;</comment>
                            <comment id="13776042" author="stoney00" created="Tue, 24 Sep 2013 06:40:52 +0000"  >&lt;p&gt;Ralph, you are right with the leading slash. Index 7 in the error message is indeed the &apos;C&apos;. But when I add a slash, I get&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Illegal character in path at index 10: file:///C:\Users\steinman/someDirectory/log4j2.xml&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now index 10 is the first backslash.&lt;/p&gt;</comment>
                            <comment id="13829311" author="tn" created="Thu, 21 Nov 2013 20:32:52 +0000"  >&lt;p&gt;Attached a simple patch to replace all backslashes with normal slashes.&lt;/p&gt;</comment>
                            <comment id="13829550" author="garydgregory" created="Fri, 22 Nov 2013 01:29:29 +0000"  >&lt;p&gt;Thomas&apos; patch looks good. I agree that a patch should not generically fiddle with all properties, only in code that will end up as a URIs. This means there might be more than one place to change in the code...&lt;/p&gt;</comment>
                            <comment id="13883783" author="beamerblvd" created="Tue, 28 Jan 2014 05:40:13 +0000"  >&lt;p&gt;Thanks for the help identifying the problem and for the patch. Had to change URI creation in several places. Fixed with r1561945. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12615180" name="LOG4J2-409.patch" size="1577" author="tn" created="Thu, 21 Nov 2013 20:32:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>349886</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 43 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1obvr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>350184</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>