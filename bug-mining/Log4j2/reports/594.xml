<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:34:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-783] PatternLayout&apos;s default charset should not be UTF-8</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-783</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;According to log4j2&apos;s manual about PatternLayout&apos;s charset attribute, if the attribute is not specified, the default system Charset will be used.&lt;/p&gt;

&lt;p&gt;But in my environemnt (Win8 Simplified Chinese + Tomcat 7), if the attribute is not specified, the Chinese words cannot display properly in console. If I add charset=&quot;UTF-8&quot; to &amp;lt;Console&amp;gt;&apos;s &amp;lt;PatternLayout&amp;gt; element, the error still exists. But if I modify it to charset=&quot;GBK&quot;, the problem can be resolved.&lt;/p&gt;

&lt;p&gt;So I think, The default charset is UTF-8, not the default system Charset as the manual announced. I got the source file, and found it in PatternLayout&apos;s Builder inner class: &lt;/p&gt;

&lt;p&gt;private Charset charset = Charsets.UTF_8;&lt;/p&gt;

&lt;p&gt;I modify it to:&lt;/p&gt;

&lt;p&gt;private Charset charset = Charset.defaultCharset();&lt;/p&gt;

&lt;p&gt;and remove the charset attribute in XML&apos;s &amp;lt;PatternLayout&amp;gt; element, the Chinese words can display properly as expected.&lt;/p&gt;

&lt;p&gt;So, I think it may be a bug and reported it here.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</description>
                <environment>&lt;p&gt;Win8(Simplified Chinese), Tomcat 7&lt;/p&gt;</environment>
        <key id="12734722">LOG4J2-783</key>
            <summary>PatternLayout&apos;s default charset should not be UTF-8</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rpopma">Remko Popma</assignee>
                                    <reporter username="Minglei.Lee">Minglei Lee</reporter>
                        <labels>
                            <label>charset</label>
                            <label>default</label>
                    </labels>
                <created>Mon, 18 Aug 2014 09:07:06 +0000</created>
                <updated>Fri, 28 Jan 2022 19:04:24 +0000</updated>
                            <resolved>Mon, 18 Aug 2014 13:10:58 +0000</resolved>
                                    <version>2.0.1</version>
                    <version>2.0.2</version>
                                    <fixVersion>2.1</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="259200">72h</timeoriginalestimate>
                            <timeestimate seconds="259200">72h</timeestimate>
                                        <comments>
                            <comment id="14100516" author="remkop@yahoo.com" created="Mon, 18 Aug 2014 10:27:33 +0000"  >&lt;p&gt;You are right, thanks for pointing this out.&lt;br/&gt;
Looks like this is a regression for &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-255&quot; title=&quot;Multi-byte character strings are scrambled in log output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-255&quot;&gt;&lt;del&gt;LOG4J2-255&lt;/del&gt;&lt;/a&gt;. PatternLayout should use the platform default encoding, but when the builder was introduced it started to use UTF8 again. We&apos;ll fix this in the release following 2.0.2 (2.0.2 is already packaged and if no showstoppers are found will be released in a few days).&lt;/p&gt;</comment>
                            <comment id="14100611" author="remkop@yahoo.com" created="Mon, 18 Aug 2014 13:10:58 +0000"  >&lt;p&gt;Fixed in revision revision 1618597.&lt;br/&gt;
Please verify and close.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13425419">LOG4J2-3372</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13010862">LOG4J2-1636</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>412662</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 14 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1yznj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>412648</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>