<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:42:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-3281] Log4j 1.2 bridge PropertiesConfiguration.buildAppender not adding filters to custom appender</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-3281</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;When building an appender, the &lt;em&gt;parseAppenderFilters&lt;/em&gt; method correctly finds my custom filter configuration in the properties file, builds it and returns it, but the caller (&lt;em&gt;buildAppender&lt;/em&gt; method) does nothing with it resulting in the appender not having any filters added to it.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;This is related to the linked issue - &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3247&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;LOG4J2-3247&lt;/a&gt; - where the scenario is the same (properties file config):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
log4j1.compatibility=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;

log4j.appender.LOG_REQUEST_START_DB=my.appender.class
log4j.appender.LOG_REQUEST_START_DB.filter.ID=my.filter.class &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the Filter class I&apos;m working with is the following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.log4j.spi.Filter;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.log4j.spi.LoggingEvent;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MonitorFilter &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Filter {
&#160; &#160; @Override
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; decide(LoggingEvent event) {
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; requestId = (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;)event.getMDC(&lt;span class=&quot;code-quote&quot;&gt;&quot;requestId&quot;&lt;/span&gt;);
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (StringHelper.isNullOrEmpty(requestId))
&#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; DENY;&#160; &#160; &#160; &#160; 
        
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!MonitorScriptManager.getInstance().getMonitorScript().filter(event))
&#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; DENY;
&#160; &#160; &#160; &#160;&#160;
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; ACCEPT;
&#160; &#160; }
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I am using the following log4j dependencies:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &amp;lt;dependency&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;groupId&amp;gt;org.apache.logging.log4j&amp;lt;/groupId&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;artifactId&amp;gt;log4j-core&amp;lt;/artifactId&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;version&amp;gt;2.17.0&amp;lt;/version&amp;gt;
&#160; &#160; &#160; &#160; &amp;lt;/dependency&amp;gt;
&#160; &#160; &#160; &#160; &amp;lt;dependency&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;groupId&amp;gt;org.apache.logging.log4j&amp;lt;/groupId&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;artifactId&amp;gt;log4j-api&amp;lt;/artifactId&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;version&amp;gt;2.17.0&amp;lt;/version&amp;gt;
&#160; &#160; &#160; &#160; &amp;lt;/dependency&amp;gt;
&#160; &#160; &#160; &#160; &amp;lt;dependency&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;groupId&amp;gt;org.apache.logging.log4j&amp;lt;/groupId&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;artifactId&amp;gt;log4j-1.2-api&amp;lt;/artifactId&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;version&amp;gt;2.17.0&amp;lt;/version&amp;gt;
&#160; &#160; &#160; &#160; &amp;lt;/dependency&amp;gt; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13419229">LOG4J2-3281</key>
            <summary>Log4j 1.2 bridge PropertiesConfiguration.buildAppender not adding filters to custom appender</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="coredumped">F&#225;bio Constantino</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Dec 2021 13:38:43 +0000</created>
                <updated>Tue, 4 Jan 2022 22:15:28 +0000</updated>
                            <resolved>Fri, 31 Dec 2021 15:00:25 +0000</resolved>
                                    <version>2.17.1</version>
                    <version>2.17.0</version>
                                    <fixVersion>2.17.2</fixVersion>
                                    <component>Appenders</component>
                    <component>Configurators</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17464651" author="jira-bot" created="Thu, 23 Dec 2021 15:34:55 +0000"  >&lt;p&gt;Commit e17634309ec64c3781dd04952fe0e7e6a8688144 in logging-log4j2&apos;s branch refs/heads/release-2.x from Gary Gregory&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=e176343&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=e176343&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3281&quot; title=&quot;Log4j 1.2 bridge PropertiesConfiguration.buildAppender not adding filters to custom appender&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3281&quot;&gt;&lt;del&gt;LOG4J2-3281&lt;/del&gt;&lt;/a&gt; PropertiesConfiguration.buildAppender not adding filters&lt;br/&gt;
to appender.&lt;/p&gt;

&lt;p&gt;Test building filters from a 1.2 properties file.&lt;/p&gt;</comment>
                            <comment id="17464652" author="garydgregory" created="Thu, 23 Dec 2021 15:37:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=coredumped&quot; class=&quot;user-hover&quot; rel=&quot;coredumped&quot;&gt;coredumped&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;So far, things look OK based on the new test &lt;tt&gt;org.apache.log4j.config.PropertiesConfigurationTest.testFilter()&lt;/tt&gt; in the git branch &lt;tt&gt;release-2.x&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;As of now, there are no difference between 2.17.0 and 2.17.1-SNAPSHOT to account for this so we need to look for something else.&lt;/p&gt;

&lt;p&gt;How do you call Log4j? May you provide a reproducer, either as a GitHub PR or a standalone Maven project?&lt;/p&gt;</comment>
                            <comment id="17464680" author="JIRAUSER282085" created="Thu, 23 Dec 2021 16:17:40 +0000"  >&lt;p&gt;&lt;tt&gt;Log4j is being called through a&#160;org.apache.commons.logging.LogFactory.getLog(DefaultLogger.class) which then goes through slf4j-log4j12 to call java.util.logging.LogManager(name) and from there I see it calling the PropertiesConfiguration.parseAppenderFilters which is looking at my .properties file configs.&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;In my tests my appender object at line 468 (PropertiesConfiguration.buildAppender) has both headFilter and tailFilter null. Did yours produce a different outcome?&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;Not sure if I will be able to provide a reproducer. I can see if I am able to next week.&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="17464684" author="garydgregory" created="Thu, 23 Dec 2021 16:23:13 +0000"  >&lt;p&gt;&amp;gt;Did yours produce a different outcome?&lt;/p&gt;

&lt;p&gt;Yes, please see org.apache.log4j.config.PropertiesConfigurationTest.testFilter()&lt;/p&gt;</comment>
                            <comment id="17466101" author="JIRAUSER282085" created="Tue, 28 Dec 2021 12:28:01 +0000"  >&lt;p&gt;Hello again, apologies for the delay in my response but holidays got in the way.&lt;/p&gt;

&lt;p&gt;I&apos;ve reproduced your code on my side and the difference here is that in your example you are not using any custom appenders.&lt;/p&gt;

&lt;p&gt;What this means in practice is that when parsing the appenders from your properties file, in method &lt;em&gt;parseAppender&lt;/em&gt; ln416 in &lt;em&gt;PropertiesConfiguration,&lt;/em&gt;&#160;the call to&#160;&lt;em&gt;manager.parseAppender&lt;/em&gt; in ln427 is going to return the appender properly built with the filter associated to it correctly as it is using a &lt;em&gt;ConsoleAppenderBuilder&lt;/em&gt; (for the CONSOLE appender in your example properties file) and here we can see that it is using the &lt;em&gt;parseAppenderFilters&lt;/em&gt; method mentioned in the issue description, storing the return value in a variable and then using it when creating the appender (&lt;em&gt;ConsoleAppenderBuilder.parseAppender&lt;/em&gt; ln134 and ln137).&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;In my case however, since I am using a custom appender, the call to &lt;em&gt;manager.parseAppender&lt;/em&gt; in ln427 of &lt;em&gt;PropertiesConfiguration&lt;/em&gt;&#160;is going to return &lt;em&gt;null&lt;/em&gt; and as such the appender is going to be built via the call (ln429) to &lt;em&gt;PropertiesConfiguration.buildAppender&lt;/em&gt;, and in this case the filter is being parsed in ln457 where the return value is then lost.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;For testing I simply added my custom appender entry at the top of your properties file:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
log4j.appender.LOG_REQUEST_START_DB=testing.CustomAppender
log4j.appender.LOG_REQUEST_START_DB.filter.1=testing.NeutralFilterFixture
log4j.appender.LOG_REQUEST_START_DB.filter.1.onMatch=neutral
log4j.appender.LOG_REQUEST_START_DB.Target=&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out
log4j.appender.LOG_REQUEST_START_DB.layout=org.apache.log4j.PatternLayout
log4j.appender.LOG_REQUEST_START_DB.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n

log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender
log4j.appender.CONSOLE.filter.1=testing.NeutralFilterFixture
log4j.appender.CONSOLE.filter.1.onMatch=neutral
log4j.appender.CONSOLE.Target=&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out
log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout
log4j.appender.CONSOLE.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%nlog4j.appender.A1=org.apache.log4j.FileAppender

log4j.appender.A1.File=target/temp.A1
log4j.appender.A1.Append=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
log4j.appender.A1.layout=org.apache.log4j.PatternLayout
log4j.appender.A1.layout.ConversionPattern=%-5p %c{2} - %m%n
log4j.appender.A2=org.apache.log4j.FileAppender
log4j.appender.A2.File=target/temp.A2
log4j.appender.A2.Append=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
log4j.appender.A2.layout=org.apache.log4j.TTCCLayout
log4j.appender.A2.layout.DateFormat=ISO8601
log4j.logger.org.apache.log4j.xml=trace, A1
log4j.rootLogger=trace, LOG_REQUEST_START_DB, CONSOLE, A1, A2 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;and created the &lt;em&gt;CustomAppender&lt;/em&gt; class in my &lt;em&gt;testing&lt;/em&gt; package (I also placed your &lt;em&gt;NeutralFilterFixture&lt;/em&gt; class in there):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; testing;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.log4j.AppenderSkeleton;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.log4j.spi.LoggingEvent;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;CustomAppender &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; AppenderSkeleton {&#160; &#160; 

    @Override
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void close() {
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-comment&quot;&gt;// TODO Auto-generated method stub
&lt;/span&gt;&#160; &#160; }&#160; &#160; 

    @Override
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; requiresLayout() {
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-comment&quot;&gt;// TODO Auto-generated method stub
&lt;/span&gt;&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
&#160; &#160; }&#160; &#160; 

    @Override
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void append(LoggingEvent event) {
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-comment&quot;&gt;// TODO Auto-generated method stub
&lt;/span&gt;&#160; &#160; }
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17467262" author="garydgregory" created="Fri, 31 Dec 2021 14:41:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=coredumped&quot; class=&quot;user-hover&quot; rel=&quot;coredumped&quot;&gt;coredumped&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thank you for the detailed information. I can now reproduce this locally.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17467264" author="jira-bot" created="Fri, 31 Dec 2021 14:58:01 +0000"  >&lt;p&gt;Commit a1328b9caaba32652da24bf10803c5f5b59b246c in logging-log4j2&apos;s branch refs/heads/release-2.x from Gary Gregory&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=a1328b9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=a1328b9&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3281&quot; title=&quot;Log4j 1.2 bridge PropertiesConfiguration.buildAppender not adding filters to custom appender&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3281&quot;&gt;&lt;del&gt;LOG4J2-3281&lt;/del&gt;&lt;/a&gt; PropertiesConfiguration.buildAppender not adding filters&lt;br/&gt;
to custom appender.&lt;/p&gt;</comment>
                            <comment id="17467265" author="jira-bot" created="Fri, 31 Dec 2021 14:58:08 +0000"  >&lt;p&gt;Commit 188a2cc6da4c31d7e700aa11e428f13909e9c66c in logging-log4j2&apos;s branch refs/heads/release-2.x from Gary Gregory&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=188a2cc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=188a2cc&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3281&quot; title=&quot;Log4j 1.2 bridge PropertiesConfiguration.buildAppender not adding filters to custom appender&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3281&quot;&gt;&lt;del&gt;LOG4J2-3281&lt;/del&gt;&lt;/a&gt; PropertiesConfiguration.buildAppender not adding filters&lt;br/&gt;
to custom appender.&lt;/p&gt;</comment>
                            <comment id="17467267" author="garydgregory" created="Fri, 31 Dec 2021 14:59:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=coredumped&quot; class=&quot;user-hover&quot; rel=&quot;coredumped&quot;&gt;coredumped&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;I patched the &lt;tt&gt;release-2.x&lt;/tt&gt; branch, please give it a try or use a snapshot build from our snapshot Maven repository at &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/org/apache/logging/log4j&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/org/apache/logging/log4j&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17467282" author="JIRAUSER282085" created="Fri, 31 Dec 2021 16:31:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thank you! I will give it a try as soon as the snapshot is available.&lt;/p&gt;</comment>
                            <comment id="17467285" author="jira-bot" created="Fri, 31 Dec 2021 17:05:21 +0000"  >&lt;p&gt;Commit 533ad83014762af808f17124c3e7dffc628bbb0a in logging-log4j2&apos;s branch refs/heads/release-2.x from Gary Gregory&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=533ad83&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=533ad83&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3281&quot; title=&quot;Log4j 1.2 bridge PropertiesConfiguration.buildAppender not adding filters to custom appender&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3281&quot;&gt;&lt;del&gt;LOG4J2-3281&lt;/del&gt;&lt;/a&gt; PropertiesConfiguration.buildAppender not adding filters&quot;&lt;/p&gt;

&lt;p&gt;This commit breaks revapi.&lt;/p&gt;

&lt;p&gt;This reverts commit a1328b9caaba32652da24bf10803c5f5b59b246c.&lt;/p&gt;</comment>
                            <comment id="17467288" author="garydgregory" created="Fri, 31 Dec 2021 17:31:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=coredumped&quot; class=&quot;user-hover&quot; rel=&quot;coredumped&quot;&gt;coredumped&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;I just pushed snapshots to &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/org/apache/logging/log4j&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/org/apache/logging/log4j&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17467443" author="jira-bot" created="Sat, 1 Jan 2022 14:22:17 +0000"  >&lt;p&gt;Commit 3f3556d2294a2395f3f3043d41014846ecc3d524 in logging-log4j2&apos;s branch refs/heads/master from Gary Gregory&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=3f3556d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=3f3556d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3281&quot; title=&quot;Log4j 1.2 bridge PropertiesConfiguration.buildAppender not adding filters to custom appender&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3281&quot;&gt;&lt;del&gt;LOG4J2-3281&lt;/del&gt;&lt;/a&gt; PropertiesConfiguration.buildAppender not adding filters&lt;br/&gt;
to custom appender.&lt;/p&gt;

&lt;p&gt;Cherry pick and resolve from release-2.x.&lt;/p&gt;</comment>
                            <comment id="17467926" author="JIRAUSER282085" created="Mon, 3 Jan 2022 10:52:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Just tested working with the snapshot version but the problem remains. Checking the code it seems the change in your commit for the&#160;&lt;em&gt;buildAppender&lt;/em&gt; method in the&#160;&lt;em&gt;PropertiesConfiguration&lt;/em&gt; class is not present in the snapshot:&lt;/p&gt;

&lt;p&gt;(&lt;em&gt;parseAppenderFilters(props, filterPrefix, appenderName);&lt;/em&gt; -&amp;gt; &lt;em&gt;appender.addFilter(parseAppenderFilters(props, filterPrefix, appenderName));&lt;/em&gt;)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I am working with the 2.17.2-SNAPSHOT version using maven. Also checked the jar file directly by adding it to my build path - &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/org/apache/logging/log4j/log4j-1.2-api/2.17.2-SNAPSHOT/log4j-1.2-api-2.17.2-20220101.224329-20.jar&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/org/apache/logging/log4j/log4j-1.2-api/2.17.2-SNAPSHOT/log4j-1.2-api-2.17.2-20220101.224329-20.jar&lt;/a&gt; - with the same result.&lt;/p&gt;</comment>
                            <comment id="17468005" author="garydgregory" created="Mon, 3 Jan 2022 14:10:29 +0000"  >&lt;p&gt;If you use Maven to build make sure to specify &lt;tt&gt;-U&lt;/tt&gt;&#160;on the command line to force a SNAPSHOT refresh. It should be there. I am deploying another snapshot as I type just in case... Give it 10 minutes.&lt;/p&gt;</comment>
                            <comment id="17468038" author="JIRAUSER282085" created="Mon, 3 Jan 2022 14:54:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Just double checked and the version in the snapshot does not contain the fix. It looks like the code was reverted from the refs/heads/release-2.x branch and then only refs/heads/master got updated with the fix. If the snapshot is being made over the refs/heads/release-2.x branch it would explain what I&apos;m seeing on my end.&lt;/p&gt;

&lt;p&gt;Checking the history on github also shows this. In any case just to make double sure I downloaded the latest snapshot jar file with the sources and indeed the fix is not present.&lt;/p&gt;</comment>
                            <comment id="17468103" author="garydgregory" created="Mon, 3 Jan 2022 17:05:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=coredumped&quot; class=&quot;user-hover&quot; rel=&quot;coredumped&quot;&gt;coredumped&lt;/a&gt;&lt;br/&gt;
Well, crud, I am so sorry about that. I will have to take a look at applying the fix again to the release-2.x branch as I am not sure how that got mixed in a revert. It won&apos;t be until much later tonight though. &lt;/p&gt;</comment>
                            <comment id="17468606" author="jira-bot" created="Tue, 4 Jan 2022 12:22:32 +0000"  >&lt;p&gt;Commit 79d64279a022040518c3dd2f0472326af1964343 in logging-log4j2&apos;s branch refs/heads/release-2.x from Gary Gregory&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=79d6427&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=79d6427&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3281&quot; title=&quot;Log4j 1.2 bridge PropertiesConfiguration.buildAppender not adding filters to custom appender&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3281&quot;&gt;&lt;del&gt;LOG4J2-3281&lt;/del&gt;&lt;/a&gt; PropertiesConfiguration.buildAppender not adding filters&lt;br/&gt;
to custom appender.&lt;/p&gt;

&lt;p&gt;Oops, had reverted the wrong commit.&lt;/p&gt;</comment>
                            <comment id="17468607" author="garydgregory" created="Tue, 4 Jan 2022 12:25:23 +0000"  >&lt;p&gt;I had reverted the commit incorrectly while working on a different issue. Fixed in release-2.x. I am deploying again, please try again and I offer my apologies!&lt;/p&gt;</comment>
                            <comment id="17468657" author="JIRAUSER282085" created="Tue, 4 Jan 2022 14:31:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;No worries. Pulled the new snapshot and filters are now being correctly added to custom appenders &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Thank you!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12311024" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3247&quot; title=&quot;PropertiesConfiguration.parseAppenderFilters NPE when parsing properties file filters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3247&quot;&gt;&lt;strike&gt;LOG4J2-3247&lt;/strike&gt;&lt;/a&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 45 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0xzxc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>