<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:39:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-2055] ServiceConfigurationError in Tomcat when Log4j is used as the logging implementation</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-2055</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;When Log4j is used as the Tomcat logging implementation using the log4j-appserver Handler applications using Log4j will fail to start trying to load a Log4jProvider they cannot access. The following will appear in the startup log.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2017-09-23 17:29:43,223 [localhost-startStop-1] ERROR o.a.c.c.ContainerBase.addChildInternal:755 - ContainerBase.addChild: start:
org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/AuditCatalog]]
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167) ~[catalina.jar:8.5.20]
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:752) [catalina.jar:8.5.20]
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:728) [catalina.jar:8.5.20]
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:734) [catalina.jar:8.5.20]
        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:988) [catalina.jar:8.5.20]
        at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1860) [catalina.jar:8.5.20]
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:514) [?:?]
        at java.util.concurrent.FutureTask.run(FutureTask.java:264) [?:?]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167) [?:?]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641) [?:?]
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:844) [?:?]
Caused by: java.util.ServiceConfigurationError: org.apache.logging.log4j.spi.Provider: org.apache.logging.log4j.core.impl.Log4jProvider not a subtype
        at java.util.ServiceLoader.fail(ServiceLoader.java:588) ~[?:?]
        at java.util.ServiceLoader.access$200(ServiceLoader.java:390) ~[?:?]
        at java.util.ServiceLoader$LazyClassPathLookupIterator.hasNextService(ServiceLoader.java:1231) ~[?:?]
        at java.util.ServiceLoader$LazyClassPathLookupIterator.hasNext(ServiceLoader.java:1259) ~[?:?]
        at java.util.ServiceLoader$2.hasNext(ServiceLoader.java:1294) ~[?:?]
        at java.util.ServiceLoader$3.hasNext(ServiceLoader.java:1379) ~[?:?]
        at org.apache.logging.log4j.util.ProviderUtil.loadProviders(ProviderUtil.java:101) ~[log4j-api-2.9.2-SNAPSHOT.jar:2.9.2-SNAPSHOT]
        at org.apache.logging.log4j.util.ProviderUtil.&amp;lt;init&amp;gt;(ProviderUtil.java:67) ~[log4j-api-2.9.2-SNAPSHOT.jar:2.9.2-SNAPSHOT]
        at org.apache.logging.log4j.util.ProviderUtil.lazyInit(ProviderUtil.java:142) ~[log4j-api-2.9.2-SNAPSHOT.jar:2.9.2-SNAPSHOT]
        at org.apache.logging.log4j.util.ProviderUtil.hasProviders(ProviderUtil.java:126) ~[log4j-api-2.9.2-SNAPSHOT.jar:2.9.2-SNAPSHOT]
        at org.apache.logging.log4j.spi.ThreadContextMapFactory.createThreadContextMap(ThreadContextMapFactory.java:73) ~[log4j-api-2.9.2-SNAPSHOT.jar:2.9.2-SNAPSHOT]
        at org.apache.logging.log4j.ThreadContext.init(ThreadContext.java:224) ~[log4j-api-2.9.2-SNAPSHOT.jar:2.9.2-SNAPSHOT]
        at org.apache.logging.log4j.ThreadContext.&amp;lt;clinit&amp;gt;(ThreadContext.java:203) ~[log4j-api-2.9.2-SNAPSHOT.jar:2.9.2-SNAPSHOT]
        at org.apache.logging.log4j.core.impl.ContextDataInjectorFactory.createDefaultInjector(ContextDataInjectorFactory.java:83) ~[log4j-core-2.9.1.jar:2.9.1]
        at org.apache.logging.log4j.core.impl.ContextDataInjectorFactory.createInjector(ContextDataInjectorFactory.java:67) ~[log4j-core-2.9.1.jar:2.9.1]
        at org.apache.logging.log4j.core.lookup.ContextMapLookup.&amp;lt;init&amp;gt;(ContextMapLookup.java:34) ~[log4j-core-2.9.1.jar:2.9.1]
        at org.apache.logging.log4j.core.lookup.Interpolator.&amp;lt;init&amp;gt;(Interpolator.java:117) ~[log4j-core-2.9.1.jar:2.9.1]
        at org.apache.logging.log4j.web.Log4jWebInitializerImpl.&amp;lt;init&amp;gt;(Log4jWebInitializerImpl.java:63) ~[?:?]
        at org.apache.logging.log4j.web.Log4jWebInitializerImpl.initialize(Log4jWebInitializerImpl.java:86) ~[?:?]
        at org.apache.logging.log4j.web.WebLoggerContextUtils.getWebLifeCycle(WebLoggerContextUtils.java:83) ~[?:?]
        at org.apache.logging.log4j.web.Log4jServletContainerInitializer.onStartup(Log4jServletContainerInitializer.java:56) ~[?:?]
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5196) ~[catalina.jar:8.5.20]
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) ~[catalina.jar:8.5.20]
        ... 10 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13104547">LOG4J2-2055</key>
            <summary>ServiceConfigurationError in Tomcat when Log4j is used as the logging implementation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rgoers">Ralph Goers</assignee>
                                    <reporter username="rgoers">Ralph Goers</reporter>
                        <labels>
                    </labels>
                <created>Sun, 24 Sep 2017 00:38:18 +0000</created>
                <updated>Tue, 12 Dec 2017 16:41:55 +0000</updated>
                            <resolved>Sun, 24 Sep 2017 00:40:34 +0000</resolved>
                                    <version>2.9.1</version>
                                    <fixVersion>2.10.0</fixVersion>
                                    <component>API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="16178017" author="jira-bot" created="Sun, 24 Sep 2017 00:39:41 +0000"  >&lt;p&gt;Commit 74384c21c688fff51b29facbc427840a2e4700b7 in logging-log4j2&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ralph_goers%40dslextreme.com&quot; class=&quot;user-hover&quot; rel=&quot;ralph_goers@dslextreme.com&quot;&gt;ralph_goers@dslextreme.com&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=74384c2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=74384c2&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2055&quot; title=&quot;ServiceConfigurationError in Tomcat when Log4j is used as the logging implementation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2055&quot;&gt;&lt;del&gt;LOG4J2-2055&lt;/del&gt;&lt;/a&gt; - If Log4j is used as the Tomcat logging implementation startup might fail if an application also uses Log4j.&lt;/p&gt;</comment>
                            <comment id="16209292" author="dmatej" created="Wed, 18 Oct 2017 13:04:42 +0000"  >&lt;p&gt;Same in Arquillian+Payara tests:&lt;br/&gt;
2.9.1 - error&lt;br/&gt;
2.9.0 - ok&lt;/p&gt;</comment>
                            <comment id="16209368" author="ralph.goers@dslextreme.com" created="Wed, 18 Oct 2017 14:01:14 +0000"  >&lt;p&gt;I recommend you try the latest in master. &lt;/p&gt;</comment>
                            <comment id="16242022" author="cvent" created="Tue, 7 Nov 2017 13:51:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ralph.goers%40dslextreme.com&quot; class=&quot;user-hover&quot; rel=&quot;ralph.goers@dslextreme.com&quot;&gt;ralph.goers@dslextreme.com&lt;/a&gt; can you tell me when 2.10 will be released? &lt;/p&gt;</comment>
                            <comment id="16242270" author="jvz" created="Tue, 7 Nov 2017 16:06:58 +0000"  >&lt;p&gt;We&apos;re looking at probably doing a release this month. Probably over the next week or two I think, but Ralph knows more about the specifics.&lt;/p&gt;</comment>
                            <comment id="16242364" author="andrejusc" created="Tue, 7 Nov 2017 16:52:33 +0000"  >&lt;p&gt;While I&apos;m observing similar to this issue with v2.9.1 in &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2104&quot; title=&quot;LoaderUtil getClassLoaders() method and while loops&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2104&quot;&gt;&lt;del&gt;LOG4J2-2104&lt;/del&gt;&lt;/a&gt;, i.e. ServiceConfigurationError - it looks that demand for v2.10 with needed fix is high.&lt;/p&gt;</comment>
                            <comment id="16243547" author="cvent" created="Wed, 8 Nov 2017 08:52:35 +0000"  >&lt;p&gt;I know this discussion came before, but why don&apos;t you create support branches for the last release(s)? &lt;/p&gt;</comment>
                            <comment id="16287640" author="markus_heiden" created="Tue, 12 Dec 2017 14:02:59 +0000"  >&lt;p&gt;I have the same problem with log4j 2.10.0 and Tomcat 8.5.24:&lt;/p&gt;

&lt;p&gt;Caused by: java.util.ServiceConfigurationError: org.apache.logging.log4j.util.PropertySource: Provider org.apache.logging.log4j.util.EnvironmentPropertySource not a subtype&lt;br/&gt;
        at java.util.ServiceLoader.fail(ServiceLoader.java:239)&lt;br/&gt;
        at java.util.ServiceLoader.access$300(ServiceLoader.java:185)&lt;br/&gt;
        at java.util.ServiceLoader$LazyIterator.nextService(ServiceLoader.java:376)&lt;br/&gt;
        at java.util.ServiceLoader$LazyIterator.next(ServiceLoader.java:404)&lt;br/&gt;
        at java.util.ServiceLoader$1.next(ServiceLoader.java:480)&lt;br/&gt;
        at org.apache.logging.log4j.util.PropertiesUtil$Environment.&amp;lt;init&amp;gt;(PropertiesUtil.java:319)&lt;br/&gt;
        at org.apache.logging.log4j.util.PropertiesUtil$Environment.&amp;lt;init&amp;gt;(PropertiesUtil.java:310)&lt;br/&gt;
        at org.apache.logging.log4j.util.PropertiesUtil.&amp;lt;init&amp;gt;(PropertiesUtil.java:59)&lt;br/&gt;
        at org.apache.logging.log4j.core.appender.ConsoleAppender$Target.getCharset(ConsoleAppender.java:92)&lt;br/&gt;
        at org.apache.logging.log4j.core.appender.ConsoleAppender$Target$1.getDefaultCharset(ConsoleAppender.java:76)&lt;br/&gt;
        at org.apache.logging.log4j.core.appender.ConsoleAppender$Builder.build(ConsoleAppender.java:225)&lt;br/&gt;
        at org.apache.logging.log4j.core.appender.ConsoleAppender$Builder.build(ConsoleAppender.java:192)&lt;br/&gt;
        at org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.build(PluginBuilder.java:122)&lt;br/&gt;
        at org.apache.logging.log4j.core.config.AbstractConfiguration.createPluginObject(AbstractConfiguration.java:958)&lt;br/&gt;
        at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:898)&lt;br/&gt;
        at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:890)&lt;br/&gt;
        at org.apache.logging.log4j.core.config.AbstractConfiguration.doConfigure(AbstractConfiguration.java:513)&lt;br/&gt;
        at org.apache.logging.log4j.core.config.AbstractConfiguration.initialize(AbstractConfiguration.java:237)&lt;br/&gt;
        at org.apache.logging.log4j.core.config.AbstractConfiguration.start(AbstractConfiguration.java:249)&lt;br/&gt;
        at org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:545)&lt;br/&gt;
        at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:617)&lt;br/&gt;
        at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:634)&lt;br/&gt;
        at org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:229)&lt;br/&gt;
        at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:153)&lt;br/&gt;
        at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:45)&lt;br/&gt;
        at org.apache.logging.log4j.LogManager.getContext(LogManager.java:194)&lt;br/&gt;
        at org.apache.logging.log4j.spi.AbstractLoggerAdapter.getContext(AbstractLoggerAdapter.java:122)&lt;br/&gt;
        at org.apache.logging.slf4j.Log4jLoggerFactory.getContext(Log4jLoggerFactory.java:43)&lt;br/&gt;
        at org.apache.logging.log4j.spi.AbstractLoggerAdapter.getLogger(AbstractLoggerAdapter.java:46)&lt;br/&gt;
        at org.apache.logging.slf4j.Log4jLoggerFactory.getLogger(Log4jLoggerFactory.java:29)&lt;br/&gt;
        at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:358)&lt;br/&gt;
        at org.slf4j.bridge.SLF4JBridgeHandler.getSLF4JLogger(SLF4JBridgeHandler.java:202)&lt;br/&gt;
        at org.slf4j.bridge.SLF4JBridgeHandler.publish(SLF4JBridgeHandler.java:293)&lt;br/&gt;
        at java.util.logging.Logger.log(Logger.java:738)&lt;br/&gt;
        at java.util.logging.Logger.doLog(Logger.java:765)&lt;br/&gt;
        at java.util.logging.Logger.logp(Logger.java:931)&lt;br/&gt;
        at org.apache.juli.logging.DirectJDKLog.log(DirectJDKLog.java:180)&lt;br/&gt;
        at org.apache.juli.logging.DirectJDKLog.info(DirectJDKLog.java:123)&lt;br/&gt;
        at org.apache.jasper.servlet.TldScanner.scanJars(TldScanner.java:264)&lt;br/&gt;
        at org.apache.jasper.servlet.TldScanner.scan(TldScanner.java:104)&lt;br/&gt;
        at org.apache.jasper.servlet.JasperInitializer.onStartup(JasperInitializer.java:101)&lt;br/&gt;
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5196)&lt;br/&gt;
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)&lt;/p&gt;</comment>
                            <comment id="16287744" author="ralph.goers@dslextreme.com" created="Tue, 12 Dec 2017 15:28:43 +0000"  >&lt;p&gt;This stack trace is a little different in that it involves resolving the PropertySource instead of the Provider. While the fix may be the same the problem should be reproduced to see why it can&apos;t access the PropertySource it found.&lt;/p&gt;</comment>
                            <comment id="16287761" author="markus_heiden" created="Tue, 12 Dec 2017 15:36:50 +0000"  >&lt;p&gt;Should I create a new issue then and post our log4j2.xml? &lt;br/&gt;
What we are doing is to deploy the same webapp (with different configurations) multiple times in the same Tomcat.&lt;/p&gt;</comment>
                            <comment id="16287850" author="ralph.goers@dslextreme.com" created="Tue, 12 Dec 2017 16:41:55 +0000"  >&lt;p&gt;Since this issue is closed I would suggest you open a different issue for this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 49 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3kgjr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>