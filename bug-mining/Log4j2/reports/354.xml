<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:33:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-760] XMLLayout&apos;s dependence on jackson-annotations should be documented</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-760</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;Hello--first time report please bear with me.&lt;br/&gt;
Upgrading project from 2.0-rc1 to 2.0, ran into the following issue:&lt;br/&gt;
Layout&amp;lt;? extends Serializable&amp;gt; xmlLayout =  xmlLayout.createDefaultLayout();&lt;/p&gt;

&lt;p&gt;produces the following error:&lt;br/&gt;
Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/fasterxml/jackson/core/JsonProcessingException&lt;/p&gt;

&lt;p&gt;I&apos;ve included the API and Core JAR&apos;s to the project path, as previously.  For reference, I&apos;m comparing this line with the following line that runs correctly in rc1:&lt;br/&gt;
Layout&amp;lt;? extends Serializable&amp;gt; fileXMLLayout = XMLLayout.createLayout(&quot;true&quot;, &quot;true&quot;, null, null, null, null);&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows JDK 1.7.0_65&lt;/p&gt;</environment>
        <key id="12731620">LOG4J2-760</key>
            <summary>XMLLayout&apos;s dependence on jackson-annotations should be documented</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rpopma">Remko Popma</assignee>
                                    <reporter username="dalefurrow">Dale Furrow</reporter>
                        <labels>
                    </labels>
                <created>Sun, 3 Aug 2014 18:28:38 +0000</created>
                <updated>Mon, 11 Aug 2014 15:19:57 +0000</updated>
                            <resolved>Mon, 11 Aug 2014 15:19:57 +0000</resolved>
                                    <version>2.0-rc2</version>
                    <version>2.0</version>
                                    <fixVersion>2.0.2</fixVersion>
                                    <component>Layouts</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14084080" author="dalefurrow" created="Sun, 3 Aug 2014 18:34:56 +0000"  >&lt;p&gt;Screenshot from Intellij Idea IDE&lt;/p&gt;</comment>
                            <comment id="14084110" author="jvz" created="Sun, 3 Aug 2014 19:43:28 +0000"  >&lt;p&gt;The XMLLayout requires Jackson 2.x as well as the log4j-api and log4j-core JARs.&lt;/p&gt;</comment>
                            <comment id="14084121" author="dalefurrow" created="Sun, 3 Aug 2014 20:07:32 +0000"  >&lt;p&gt;Added core, databind, dataformat-xml, dataformat-yaml and module-jaxb-annotions jars...still get error message on annotations.  Checked dependencies lists--it appears to me these are the right jars.&lt;br/&gt;
(1) Should configuration be changed--different jars perhaps?  These are the files named under &quot;Dependency Management&quot;.&lt;br/&gt;
(2) If config requirements have changed since RC1, wouldn&apos;t it be a good idea to update the faq question &quot;which jars do I need&quot;?&lt;/p&gt;</comment>
                            <comment id="14084154" author="remkop@yahoo.com" created="Sun, 3 Aug 2014 23:03:22 +0000"  >&lt;p&gt;Hi Dale, &lt;/p&gt;

&lt;p&gt;For some reason the &lt;a href=&quot;http://logging.apache.org/log4j/2.x/log4j-core/dependency-management.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;log4j-core dependencies&lt;/a&gt; page mentions jackson-module-jaxb-annotations 2.4.1 but not jackson-annotations-2.4.1. &lt;/p&gt;

&lt;p&gt;Neither is explicitly included in the pom.xml for the log4j-core module. Not sure why Maven noticed the jackson-module-jaxb-annotations as a transitive dependency but not jackson-annotations.&lt;/p&gt;

&lt;p&gt;You can probably get the jar you need here:&lt;br/&gt;
&lt;a href=&quot;http://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-annotations/2.4.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-annotations/2.4.1&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14084546" author="ggregory" created="Mon, 4 Aug 2014 11:22:28 +0000"  >&lt;p&gt;I recommend you use a build tool with dependency management like maven or ivy.&lt;/p&gt;</comment>
                            <comment id="14084559" author="remkop@yahoo.com" created="Mon, 4 Aug 2014 11:40:46 +0000"  >&lt;p&gt;Gary, any idea why this jar is picked up during the log4j build, but not mentioned in our dependencies page?&lt;/p&gt;</comment>
                            <comment id="14084568" author="garydgregory" created="Mon, 4 Aug 2014 11:57:14 +0000"  >&lt;p&gt;I do not see mention of a &quot;jackson-annotations&quot; artifact ID in pom.xml files in trunk but it is brought in transitively. Maybe the maven plugin has a switch for that?&lt;/p&gt;</comment>
                            <comment id="14084640" author="dalefurrow" created="Mon, 4 Aug 2014 13:16:38 +0000"  >&lt;p&gt;Thanks All--that worked;  Remko that last jar was indeed the problem.  &lt;br/&gt;
That resolves the issue for me, but I see there is discussion about why this jar isn&apos;t on the dependency list.  &lt;br/&gt;
If I need to formally close the issue out, please let me know.  &lt;br/&gt;
I appreciate the prompt response and helpful suggestions.&lt;/p&gt;</comment>
                            <comment id="14084649" author="remkop@yahoo.com" created="Mon, 4 Aug 2014 13:34:18 +0000"  >&lt;p&gt;Glad to hear that, Dale!&lt;/p&gt;

&lt;p&gt;Perhaps the XML, JSON and YAML Layout docs should explicitly mention the jackson-annotations jar? Without Maven/Ivy users will not be able to find out what&apos;s wrong...&lt;br/&gt;
Gary, what do you think?&lt;/p&gt;</comment>
                            <comment id="14087640" author="remkop@yahoo.com" created="Wed, 6 Aug 2014 13:12:12 +0000"  >&lt;p&gt;Changed summary (was: XMLLayout NoClassDefFoundError)&lt;/p&gt;</comment>
                            <comment id="14087904" author="remkop@yahoo.com" created="Wed, 6 Aug 2014 17:04:45 +0000"  >&lt;p&gt;Should we just add an explicit dependency to jackson-annotations in log4j-core/pom.xml?&lt;/p&gt;</comment>
                            <comment id="14087980" author="garydgregory" created="Wed, 6 Aug 2014 18:16:21 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Should we just add an explicit dependency to jackson-annotations in log4j-core/pom.xml?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I do not think so. If &lt;tt&gt;jackson-annotations&lt;/tt&gt; gets dragged in transitively now, it does not mean it will in the future. That&apos;s what transitive closure is for! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14087993" author="remkop@yahoo.com" created="Wed, 6 Aug 2014 18:26:56 +0000"  >&lt;p&gt;Okay, shall we just document it on the site then?&lt;/p&gt;</comment>
                            <comment id="14087998" author="garydgregory" created="Wed, 6 Aug 2014 18:31:28 +0000"  >&lt;p&gt;Is there no way to generate this automatically from the POM? Is the Maven dependency report not good enough? I wonder how far we need to go and document this kind of stuff. It seems that one alternative would be to point users to Maven commands to print these deps out to the console.&lt;/p&gt;</comment>
                            <comment id="14088040" author="dalefurrow" created="Wed, 6 Aug 2014 18:59:22 +0000"  >&lt;p&gt;If I can chime in here-I&apos;d be fine if this section &lt;a href=&quot;http://logging.apache.org/log4j/2.x/faq.html#which_jars&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://logging.apache.org/log4j/2.x/faq.html#which_jars&lt;/a&gt; were amended to make it clear that particular functions of core require jars from POM. The project where I used rc-1 was working with the api and core jars only, as that documentation indicated. Now, that&apos;s no longer the case. If you just noted that the full functionality of the core jar requires all the dependent jars from the POM (including transitives), and then maybe a link-that would have been good enough for me.  Right now, at least to me, the documentation implies those jars are stand-alone.&lt;/p&gt;</comment>
                            <comment id="14088774" author="jvz" created="Thu, 7 Aug 2014 03:48:53 +0000"  >&lt;p&gt;The core and api jars are indeed standalone. However, log4j-core references several optional features as well that require dependencies. The XML and JSON layouts are one of those optional features that are handy for networked logging. Due to the nature of all the standard Java XML APIs, there was no real good way to handle this without introducing a dependency or reinventing the wheel with yet another XML library.&lt;/p&gt;</comment>
                            <comment id="14088875" author="remkop@yahoo.com" created="Thu, 7 Aug 2014 06:01:11 +0000"  >&lt;p&gt;Bear in mind that if users are using Maven this problem will not occur (Maven will pull in the transitive dependencies). If users can execute Maven commands they likely won&apos;t have this issue.&lt;/p&gt;

&lt;p&gt;I see these three options (there may be others, let me know if you think of any)&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Add an explicit dependency to jackson-annotations in log4j-core/pom.xml.
	&lt;ul&gt;
		&lt;li&gt;Pros: only one place to maintain, docs generated automatically.&lt;/li&gt;
		&lt;li&gt;Cons: not strictly necessary for the build and if Jackson changes in the future we need to manually update.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Document the dependency on the site (Layout manual pages and perhaps the FAQ page).
	&lt;ul&gt;
		&lt;li&gt;Pros: ?.  (Perhaps this is user-friendlier?)&lt;/li&gt;
		&lt;li&gt;Cons: multiple places to edit, if Jackson changes in the future we still need to manually update.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Leave it as it is (leave this issue unsolved).
	&lt;ul&gt;
		&lt;li&gt;Pros: nothing to edit now, no updates required if Jackson changes in the future.&lt;/li&gt;
		&lt;li&gt;Cons: Users without an automatic build system will have trouble using XML and JSON layouts.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Sounds like updating the core pom is the least work (least of all evils?), but I&apos;d be okay with updating the site docs too...&lt;/p&gt;</comment>
                            <comment id="14088882" author="garydgregory" created="Thu, 7 Aug 2014 06:15:38 +0000"  >&lt;p&gt;I am against changing the POM to deal with this issue. This is only a documentation issue for users that do not use a dependency management build tool, be it Maven, Ivy, or something else. Editing the POM opens the door to editing all POMs to list all transitive dependencies, which defeats one of the purposes behind using Maven in the first place.&lt;/p&gt;

&lt;p&gt;I do not think this is a problem that needs solving beyond automatically generating docs based on the POM. Maven already generates reports for this kind of dependencies. What we are dealing with here is a finer grain level of documentation since not all deps are required to use the core jar.&lt;/p&gt;</comment>
                            <comment id="14088909" author="remkop@yahoo.com" created="Thu, 7 Aug 2014 06:39:16 +0000"  >&lt;p&gt;Okay, so you don&apos;t want to do option 1. Fair enough, no problem.&lt;/p&gt;

&lt;p&gt;Just to be clear, I don&apos;t think that option 3 (not doing anything) is good either.&lt;/p&gt;

&lt;p&gt;If I understand you correctly you are saying there is a fourth option which is to generate more detailed dependency documentation based on our current POM. I&apos;m fine with that too. (However, if we cannot get that to work then I would just add a few lines to the site.)&lt;/p&gt;</comment>
                            <comment id="14088969" author="ralph.goers@dslextreme.com" created="Thu, 7 Aug 2014 07:40:14 +0000"  >&lt;p&gt;I would like to see a table for core that lists all the optional dependencies and what features they are required for.&lt;/p&gt;</comment>
                            <comment id="14089083" author="remkop@yahoo.com" created="Thu, 7 Aug 2014 09:47:38 +0000"  >&lt;p&gt;mvn dependency:tree gives:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;--- maven-dependency-plugin:2.1:tree (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-cli) @ log4j-core ---
org.apache.logging.log4j:log4j-core:jar:2.0.2-SNAPSHOT
+- org.apache.logging.log4j:log4j-api:jar:2.0.2-SNAPSHOT:compile
+- org.osgi:org.osgi.core:jar:4.3.1:provided
+- com.lmax:disruptor:jar:3.3.0:compile
+- com.fasterxml.jackson.core:jackson-core:jar:2.4.1.1:compile
+- com.fasterxml.jackson.core:jackson-databind:jar:2.4.1.3:compile
|  \- com.fasterxml.jackson.core:jackson-annotations:jar:2.4.0:compile
+- com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:jar:2.4.1:compile
+- com.fasterxml.jackson.dataformat:jackson-dataformat-xml:jar:2.4.1:compile
|  +- com.fasterxml.jackson.module:jackson-module-jaxb-annotations:jar:2.4.1:compile
|  \- org.codehaus.woodstox:stax2-api:jar:3.1.4:compile
+- org.codehaus.woodstox:woodstox-core-asl:jar:4.3.0:compile
|  \- javax.xml.stream:stax-api:jar:1.0-2:compile
+- org.fusesource.jansi:jansi:jar:1.11:compile
+- org.jboss.spec.javax.jms:jboss-jms-api_1.1_spec:jar:1.0.1.Final:provided
+- com.sun.mail:javax.mail:jar:1.5.0:compile
|  \- javax.activation:activation:jar:1.1:compile
+- org.eclipse.persistence:javax.persistence:jar:2.1.0:compile

+- org.apache.logging.log4j:log4j-api:test-jar:tests:2.0.2-SNAPSHOT:test
+- javax.jmdns:jmdns:jar:3.4.1:test
+- log4j:log4j:jar:1.2.17:test
+- org.slf4j:slf4j-api:jar:1.7.7:test
+- org.slf4j:slf4j-ext:jar:1.7.7:test
|  \- ch.qos.cal10n:cal10n-api:jar:0.8.1:test
+- junit:junit:jar:4.11:test
|  \- org.hamcrest:hamcrest-core:jar:1.3:test
+- org.hamcrest:hamcrest-all:jar:1.3:test
+- org.easymock:easymock:jar:3.2:test
|  +- cglib:cglib-nodep:jar:2.2.2:test
|  \- org.objenesis:objenesis:jar:1.3:test
+- org.hsqldb:hsqldb:jar:2.3.2:test
+- com.h2database:h2:jar:1.3.175:test
+- org.eclipse.persistence:org.eclipse.persistence.jpa:jar:2.5.1:test
|  +- org.eclipse.persistence:org.eclipse.persistence.asm:jar:2.5.1:test
|  +- org.eclipse.persistence:org.eclipse.persistence.antlr:jar:2.5.1:test
|  +- org.eclipse.persistence:org.eclipse.persistence.jpa.jpql:jar:2.5.1:test
|  \- org.eclipse.persistence:org.eclipse.persistence.core:jar:2.5.1:test
+- org.mockejb:mockejb:jar:0.6-beta2:test
|  +- oro:oro:jar:2.0.8:test
|  \- cglib:cglib-full:jar:2.0.2:test
+- commons-logging:commons-logging:jar:1.2:test
+- ch.qos.logback:logback-core:jar:1.0.13:test
+- ch.qos.logback:logback-classic:jar:1.0.13:test
+- org.eclipse.osgi:org.eclipse.osgi:jar:3.6.0.v20100517:test
+- org.apache.felix:org.apache.felix.framework:jar:4.2.1:test
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That may be the extend of what can be done automatically with Maven. It does not tell us what feature these dependencies are used for. That may take some manual work.&lt;/p&gt;</comment>
                            <comment id="14092273" author="remkop@yahoo.com" created="Sun, 10 Aug 2014 23:22:37 +0000"  >&lt;p&gt;How about this?&lt;/p&gt;

&lt;p&gt;We already have a manually maintained list of &lt;a href=&quot;http://logging.apache.org/log4j/2.x/log4j-core/index.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;what dependencies log4j functions require&lt;/a&gt;, and Maven already generates a &lt;a href=&quot;http://logging.apache.org/log4j/2.x/log4j-core/dependencies.html#Dependency_Tree&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Dependency Tree&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;What if we link to the Dependency Tree from the manually maintained list and from the FAQ page?&lt;/p&gt;</comment>
                            <comment id="14092399" author="garydgregory" created="Mon, 11 Aug 2014 03:39:06 +0000"  >&lt;p&gt;Good idea.&lt;/p&gt;</comment>
                            <comment id="14092875" author="remkop@yahoo.com" created="Mon, 11 Aug 2014 15:19:57 +0000"  >&lt;p&gt;Fixed in revision 1617306.&lt;br/&gt;
Please verify and close.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12659560" name="BasicScreenshot.jpg" size="162344" author="dalefurrow" created="Sun, 3 Aug 2014 18:34:56 +0000"/>
                            <attachment id="12659579" name="screenshot - with Jacson 2.4.1.jpg" size="218726" author="dalefurrow" created="Sun, 3 Aug 2014 20:07:32 +0000"/>
                            <attachment id="12659650" name="screenshot-success.jpg" size="111922" author="dalefurrow" created="Mon, 4 Aug 2014 13:16:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>409649</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 15 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1yhdr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>409644</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>