<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:41:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-3056] NameUtil.md5(String) could leak plaintext credentials</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-3056</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;&lt;tt&gt;org.apache.logging.log4j.util.NameUtil.md5(String)&lt;/tt&gt; could leak the credentials provided to it in case an exception is thrown:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; md5(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; string) {
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        ...
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Exception ex) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; string; &lt;span class=&quot;code-comment&quot;&gt;// leaks plaintext credentials
&lt;/span&gt;    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is however very likely not a security issue currently because it appears the only exception which could occur is &lt;tt&gt;NoSuchAlgorithmException&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Nonetheless I would recommend the following changes:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;b&gt;Never return the plaintext &lt;tt&gt;String&lt;/tt&gt;&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;Wrap the &lt;tt&gt;getInstance(&quot;MD5&quot;)&lt;/tt&gt; call with a &lt;tt&gt;try-catch&lt;/tt&gt; catching the &lt;tt&gt;NoSuchAlgorithmException&lt;/tt&gt;, wrapping it in an &lt;tt&gt;AssertionError&lt;/tt&gt; and throw that, since the &lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/java/security/MessageDigest.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;documentation for &lt;tt&gt;MessageDigest&lt;/tt&gt;&lt;/a&gt; guarantees that every JRE must support MD5:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
MessageDigest md5;
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
    md5 = MessageDigest.getInstance(&lt;span class=&quot;code-quote&quot;&gt;&quot;MD5&quot;&lt;/span&gt;);
} &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (NoSuchAlgorithmException e) {
    &lt;span class=&quot;code-comment&quot;&gt;// Impossible; MessageDigest documentation guarantees that MD5 is supported
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AssertionError(&lt;span class=&quot;code-quote&quot;&gt;&quot;MD5 is not supported&quot;&lt;/span&gt;, e);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Don&apos;t use &lt;tt&gt;string.getBytes()&lt;/tt&gt;, that uses the default charset of the platform. I don&apos;t know what the &apos;correct&apos; charset here would be (maybe UTF-8?), but it is very likely not the default charset.&lt;/li&gt;
	&lt;li&gt;Optional: Omit the call to &lt;tt&gt;MessageDigest.update&lt;/tt&gt; and instead only call &lt;tt&gt;digest(byte[])&lt;/tt&gt;.&lt;/li&gt;
&lt;/ul&gt;

</description>
                <environment></environment>
        <key id="13368041">LOG4J2-3056</key>
            <summary>NameUtil.md5(String) could leak plaintext credentials</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vy">Volkan Yazici</assignee>
                                    <reporter username="Marcono1234">Marcono1234</reporter>
                        <labels>
                    </labels>
                <created>Sat, 27 Mar 2021 02:00:17 +0000</created>
                <updated>Fri, 30 Apr 2021 23:01:10 +0000</updated>
                            <resolved>Fri, 9 Apr 2021 09:58:47 +0000</resolved>
                                                    <fixVersion>2.15.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17310057" author="vy" created="Sat, 27 Mar 2021 18:21:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Marcono1234&quot; class=&quot;user-hover&quot; rel=&quot;Marcono1234&quot;&gt;Marcono1234&lt;/a&gt;, I did not dive into the source code yet, but your reasoning makes sense. I will pick it up as soon as possible.&lt;/p&gt;</comment>
                            <comment id="17310077" author="ralph.goers@dslextreme.com" created="Sat, 27 Mar 2021 20:10:27 +0000"  >&lt;p&gt;I would first check to see what we are using the md5 method for. Sometimes it is just used to get a fixed size String as a way to represent the value, in which case this issue is irrelevant. If it is being used to encode something that needs to be secure we should be using a different algorithm. MD5 is not considered secure.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;The Flume Appender uses it to generate an agent name. (Not a problem).&lt;/li&gt;
	&lt;li&gt;PluginAttributeVisitor uses it when the PluginAttribute&apos;s sensitive attribute is set true. I&apos;m not sure why we don&apos;t just mask it with asterisks. It should not use md5.&lt;/li&gt;
	&lt;li&gt;PluginBuilderAttributeVisitor - same as PluginAttributeVisitor.&lt;/li&gt;
	&lt;li&gt;CouchDb - used to mask the connection password in the toString method of the provider. Should use something more secure.&lt;/li&gt;
	&lt;li&gt;MongoDb - same as CouchDb.&#160;&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="17317236" author="jira-bot" created="Thu, 8 Apr 2021 14:36:20 +0000"  >&lt;p&gt;Commit 483bd3af2e2d4938a5ecfb3bef2eb29612bb02fc in logging-log4j2&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3056&quot; title=&quot;NameUtil.md5(String) could leak plaintext credentials&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3056&quot;&gt;&lt;del&gt;LOG4J2-3056&lt;/del&gt;&lt;/a&gt; from Volkan Yazici&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=483bd3a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=483bd3a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3056&quot; title=&quot;NameUtil.md5(String) could leak plaintext credentials&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3056&quot;&gt;&lt;del&gt;LOG4J2-3056&lt;/del&gt;&lt;/a&gt; Refactored MD5 usage for sharing sensitive information.&lt;/p&gt;</comment>
                            <comment id="17317248" author="jira-bot" created="Thu, 8 Apr 2021 14:56:58 +0000"  >&lt;p&gt;Commit 80f3538cbbe08755579fac645f8883601ddff158 in logging-log4j2&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3056&quot; title=&quot;NameUtil.md5(String) could leak plaintext credentials&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3056&quot;&gt;&lt;del&gt;LOG4J2-3056&lt;/del&gt;&lt;/a&gt; from Volkan Yazici&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=80f3538&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=80f3538&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3056&quot; title=&quot;NameUtil.md5(String) could leak plaintext credentials&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3056&quot;&gt;&lt;del&gt;LOG4J2-3056&lt;/del&gt;&lt;/a&gt; Refactor MD5 usage for sharing sensitive information.&lt;/p&gt;</comment>
                            <comment id="17317735" author="jira-bot" created="Fri, 9 Apr 2021 07:19:31 +0000"  >&lt;p&gt;Commit 740e8301b2217c4c17f2638066ff3eaa691d85aa in logging-log4j2&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3056&quot; title=&quot;NameUtil.md5(String) could leak plaintext credentials&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3056&quot;&gt;&lt;del&gt;LOG4J2-3056&lt;/del&gt;&lt;/a&gt; from Volkan Yazici&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=740e830&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=740e830&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3056&quot; title=&quot;NameUtil.md5(String) could leak plaintext credentials&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3056&quot;&gt;&lt;del&gt;LOG4J2-3056&lt;/del&gt;&lt;/a&gt; Refactor MD5 usage for sharing sensitive information.&lt;/p&gt;</comment>
                            <comment id="17317746" author="jira-bot" created="Fri, 9 Apr 2021 07:44:47 +0000"  >&lt;p&gt;Commit 5361900a631b179a27daaa2c5bedbb072069cca0 in logging-log4j2&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3056&quot; title=&quot;NameUtil.md5(String) could leak plaintext credentials&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3056&quot;&gt;&lt;del&gt;LOG4J2-3056&lt;/del&gt;&lt;/a&gt; from Volkan Yazici&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=5361900&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=5361900&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3056&quot; title=&quot;NameUtil.md5(String) could leak plaintext credentials&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3056&quot;&gt;&lt;del&gt;LOG4J2-3056&lt;/del&gt;&lt;/a&gt; Incorporate review feedback.&lt;/p&gt;</comment>
                            <comment id="17317751" author="jira-bot" created="Fri, 9 Apr 2021 07:52:46 +0000"  >&lt;p&gt;Commit ae1a095819138d39a044ef2984fbb0bf1b4f0cc1 in logging-log4j2&apos;s branch refs/heads/release-2.x from Volkan Yaz&#305;c&#305;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=ae1a095&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=ae1a095&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3056&quot; title=&quot;NameUtil.md5(String) could leak plaintext credentials&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3056&quot;&gt;&lt;del&gt;LOG4J2-3056&lt;/del&gt;&lt;/a&gt; Refactor MD5 usage for sharing sensitive information (#484)&lt;/p&gt;
</comment>
                            <comment id="17317917" author="jira-bot" created="Fri, 9 Apr 2021 11:14:12 +0000"  >&lt;p&gt;Commit 6d3f268c3f29856205221bd7652a5af041328bd2 in logging-log4j2&apos;s branch refs/heads/master from Volkan Yaz&#305;c&#305;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=6d3f268&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=6d3f268&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3056&quot; title=&quot;NameUtil.md5(String) could leak plaintext credentials&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3056&quot;&gt;&lt;del&gt;LOG4J2-3056&lt;/del&gt;&lt;/a&gt; Refactor MD5 usage for sharing sensitive information (#484)&lt;/p&gt;</comment>
                            <comment id="17337678" author="jira-bot" created="Fri, 30 Apr 2021 23:01:10 +0000"  >&lt;p&gt;Commit 6d3f268c3f29856205221bd7652a5af041328bd2 in logging-log4j2&apos;s branch refs/heads/dependabot/maven/com.conversantmedia-disruptor-1.2.19 from Volkan Yaz&#305;c&#305;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=6d3f268&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=6d3f268&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3056&quot; title=&quot;NameUtil.md5(String) could leak plaintext credentials&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3056&quot;&gt;&lt;del&gt;LOG4J2-3056&lt;/del&gt;&lt;/a&gt; Refactor MD5 usage for sharing sensitive information (#484)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 28 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0p9q8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>