<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:40:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-2530] StructuredDataMessage is not logged</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-2530</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;2.9 introduced a new type &lt;tt&gt;StringMessageMap&lt;/tt&gt;. When added in commit 76aff58919dc5030367ea24c7c8ef42dca3b75cd, there were a few checks for &lt;tt&gt;instanceof&lt;/tt&gt; this new type. Consequently, old code that uses &lt;tt&gt;StructuredDataMessages&lt;/tt&gt; are processed differently. In some cases, such messages are not logged at all. To fix this, the type checks should be generalized to the root base class &#8211; &lt;tt&gt;MapMessage&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13208811">LOG4J2-2530</key>
            <summary>StructuredDataMessage is not logged</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ckozak">Carter Kozak</assignee>
                                    <reporter username="tspencer">Travis Spencer</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Jan 2019 15:32:31 +0000</created>
                <updated>Tue, 14 May 2019 03:11:21 +0000</updated>
                            <resolved>Mon, 14 Jan 2019 02:53:48 +0000</resolved>
                                    <version>2.9.0</version>
                                    <fixVersion>3.0.0</fixVersion>
                    <fixVersion>2.11.2</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="5400">1.5h</timespent>
                                <comments>
                            <comment id="16739521" author="ckozak" created="Thu, 10 Jan 2019 15:36:45 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tspencer&quot; class=&quot;user-hover&quot; rel=&quot;tspencer&quot;&gt;tspencer&lt;/a&gt;! I&apos;ve pushed a potential fix for review here: &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/249&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/249&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16739525" author="ckozak" created="Thu, 10 Jan 2019 15:39:16 +0000"  >&lt;p&gt;The MapLookup break has already been fixed by &lt;a href=&quot;https://github.com/apache/logging-log4j2/commit/82fc39a2b462781a832b7a50700a1f6d78693f74&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/commit/82fc39a2b462781a832b7a50700a1f6d78693f74&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16739551" author="tspencer" created="Thu, 10 Jan 2019 16:03:43 +0000"  >&lt;p&gt;Looks like &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2522&quot; title=&quot;Make MapMessageLookup.lookup usable with MapMessage again&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2522&quot;&gt;&lt;del&gt;LOG4J2-2522&lt;/del&gt;&lt;/a&gt; is a partial fix for this issue.&lt;/p&gt;</comment>
                            <comment id="16739555" author="tspencer" created="Thu, 10 Jan 2019 16:06:20 +0000"  >&lt;p&gt;Ha, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ckozak&quot; class=&quot;user-hover&quot; rel=&quot;ckozak&quot;&gt;ckozak&lt;/a&gt;, you&apos;re fast. Sorry for making all the extra messages/tickets/etc. I&apos;ll bow out; looks like I&apos;m just getting in the way &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16739559" author="ckozak" created="Thu, 10 Jan 2019 16:09:40 +0000"  >&lt;p&gt;Not at all, your input on my poor implementation was invaluable, I have to run for a bit, but I&apos;d really appreciate if you&apos;d like to take over!&lt;/p&gt;</comment>
                            <comment id="16739611" author="tspencer" created="Thu, 10 Jan 2019 16:58:35 +0000"  >&lt;p&gt;on it!&lt;/p&gt;</comment>
                            <comment id="16741718" author="jira-bot" created="Mon, 14 Jan 2019 02:43:25 +0000"  >&lt;p&gt;Commit c58a8761ece0af3cc69da55595323bc99fda0150 in logging-log4j2&apos;s branch refs/heads/master from Travis Spencer&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=c58a876&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=c58a876&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2530&quot; title=&quot;StructuredDataMessage is not logged&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2530&quot;&gt;&lt;del&gt;LOG4J2-2530&lt;/del&gt;&lt;/a&gt; Generalize check for MapMessage, so that StructuredDataMessage are logged as well as StringMapMessage and ohter subtypes&lt;/p&gt;</comment>
                            <comment id="16741719" author="jira-bot" created="Mon, 14 Jan 2019 02:43:26 +0000"  >&lt;p&gt;Commit 2c6d73256f579cfc2840bb6f98d7a546a0ed959b in logging-log4j2&apos;s branch refs/heads/master from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=2c6d732&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=2c6d732&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge pull request #250 from travisspencer/master&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2530&quot; title=&quot;StructuredDataMessage is not logged&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2530&quot;&gt;&lt;del&gt;LOG4J2-2530&lt;/del&gt;&lt;/a&gt; Generalize check for MapMessage&lt;/p&gt;</comment>
                            <comment id="16741723" author="jira-bot" created="Mon, 14 Jan 2019 02:49:23 +0000"  >&lt;p&gt;Commit a5d245f1dca489044c3cb7d97450e13d7e5a66cf in logging-log4j2&apos;s branch refs/heads/master from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=a5d245f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=a5d245f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Changelog for &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2530&quot; title=&quot;StructuredDataMessage is not logged&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2530&quot;&gt;&lt;del&gt;LOG4J2-2530&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16741724" author="jira-bot" created="Mon, 14 Jan 2019 02:50:51 +0000"  >&lt;p&gt;Commit 41cdb7920f81ac951318cebfadd6f0140f66b446 in logging-log4j2&apos;s branch refs/heads/release-2.x from Travis Spencer&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=41cdb79&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=41cdb79&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2530&quot; title=&quot;StructuredDataMessage is not logged&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2530&quot;&gt;&lt;del&gt;LOG4J2-2530&lt;/del&gt;&lt;/a&gt; Generalize check for MapMessage, so that StructuredDataMessage are logged as well as StringMapMessage and ohter subtypes&lt;/p&gt;</comment>
                            <comment id="16741725" author="jira-bot" created="Mon, 14 Jan 2019 02:50:53 +0000"  >&lt;p&gt;Commit 2877ea9009b2be8cde8fa85ad1521b80848cdd96 in logging-log4j2&apos;s branch refs/heads/release-2.x from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=2877ea9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=2877ea9&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Changelog for &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2530&quot; title=&quot;StructuredDataMessage is not logged&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2530&quot;&gt;&lt;del&gt;LOG4J2-2530&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16741728" author="ckozak" created="Mon, 14 Jan 2019 02:53:40 +0000"  >&lt;p&gt;Thank you for your contribution &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tspencer&quot; class=&quot;user-hover&quot; rel=&quot;tspencer&quot;&gt;tspencer&lt;/a&gt;! I have merged to master and backported to the release-2.x branch for 2.11.2.&lt;/p&gt;</comment>
                            <comment id="16741729" author="ckozak" created="Mon, 14 Jan 2019 02:54:42 +0000"  >&lt;p&gt;Closing out based on the PR conversation, the new unit tests (thanks!) are sufficient verification.&lt;/p&gt;</comment>
                            <comment id="16838967" author="ralph.goers@dslextreme.com" created="Tue, 14 May 2019 00:26:55 +0000"  >&lt;p&gt;The changes here have resulted in bug &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2564&quot; title=&quot;Error using %K in pattern : MapPatternConverter cannot contain multiple static newInstance method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2564&quot;&gt;&lt;del&gt;LOG4J2-2564&lt;/del&gt;&lt;/a&gt;. It isn&apos;t clear at all why a second newInstance method was added since it is only used in a unit test.&lt;/p&gt;</comment>
                            <comment id="16839045" author="ckozak" created="Tue, 14 May 2019 03:11:21 +0000"  >&lt;p&gt;I will take a look at &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2564&quot; title=&quot;Error using %K in pattern : MapPatternConverter cannot contain multiple static newInstance method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2564&quot;&gt;&lt;del&gt;LOG4J2-2564&lt;/del&gt;&lt;/a&gt; tomorrow.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13077901">LOG4J2-1935</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13204911">LOG4J2-2522</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12954440" name="instanceof-fix.patch" size="3918" author="tspencer" created="Thu, 10 Jan 2019 15:31:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 27 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|u00po8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>