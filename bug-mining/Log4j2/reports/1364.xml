<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:41:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-2770] NullPointerException after reconfiguring via JMX</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-2770</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;Load JMX GUI, go to Log4j Tab, select context, click &quot;Reconfigure with XML below&quot;.&lt;/p&gt;

&lt;p&gt;the new configuration is accepted and active, but then the subsequent call to LogerContextAdmin::getConfigText() throws an NPE.&lt;/p&gt;

&lt;p&gt;Looking deeper, the ConfigurationSource created in LogerContextAdmin::setConfigText(...) is created in such a way that ConfigurationSource::resetInputStream(), used by getConfigText, is unable to create a duplicate of the ConfigurationSource and instead returns null.&lt;/p&gt;

&lt;p&gt;The constructor {{ConfigurationSource(final byte[] data, final URL url, long lastModified) }} neglects to set the data member.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13283005">LOG4J2-2770</key>
            <summary>NullPointerException after reconfiguring via JMX</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bkuker1">Bill Kuker</reporter>
                        <labels>
                    </labels>
                <created>Mon, 3 Feb 2020 15:48:39 +0000</created>
                <updated>Sat, 8 Feb 2020 22:28:24 +0000</updated>
                            <resolved>Mon, 3 Feb 2020 23:58:24 +0000</resolved>
                                    <version>2.13.0</version>
                                    <fixVersion>3.0.0</fixVersion>
                    <fixVersion>2.13.1</fixVersion>
                                    <component>Core</component>
                    <component>JMX</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17029298" author="garydgregory" created="Mon, 3 Feb 2020 21:25:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bkuker1&quot; class=&quot;user-hover&quot; rel=&quot;bkuker1&quot;&gt;bkuker1&lt;/a&gt; and all:&lt;/p&gt;

&lt;p&gt;Don&apos;t we have a similar issue in &lt;tt&gt;org.apache.logging.log4j.core.config.ConfigurationSource.ConfigurationSource(Source, byte[], long)&lt;/tt&gt; in that &lt;tt&gt;source&lt;/tt&gt; is not assigned?&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                            <comment id="17029323" author="ralph.goers@dslextreme.com" created="Mon, 3 Feb 2020 21:53:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&#160;- No. The data is extracted from the Source and stored. As I recall there is some code that calls setSource to modify where the source of the configuration comes from before resetInputStream gets called, but that is the only usage of the field.&lt;/p&gt;</comment>
                            <comment id="17029373" author="jira-bot" created="Mon, 3 Feb 2020 23:42:38 +0000"  >&lt;p&gt;Commit f2d81e9f3a3900f2a0f85b906cfe772915ce1147 in logging-log4j2&apos;s branch refs/heads/release-2.x from Gary Gregory&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=f2d81e9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=f2d81e9&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2770&quot; title=&quot;NullPointerException after reconfiguring via JMX&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2770&quot;&gt;&lt;del&gt;LOG4J2-2770&lt;/del&gt;&lt;/a&gt; CronExpression.getBeforeTime() would sometimes return&lt;br/&gt;
incorrect result.&lt;/p&gt;</comment>
                            <comment id="17029374" author="garydgregory" created="Mon, 3 Feb 2020 23:43:06 +0000"  >&lt;p&gt;A fix is in git branch &lt;tt&gt;release-2.x&lt;/tt&gt;, please verify and close.&lt;/p&gt;</comment>
                            <comment id="17029375" author="ralph.goers@dslextreme.com" created="Mon, 3 Feb 2020 23:46:00 +0000"  >&lt;p&gt;What about master?&lt;/p&gt;</comment>
                            <comment id="17029377" author="jira-bot" created="Mon, 3 Feb 2020 23:48:25 +0000"  >&lt;p&gt;Commit 29f18e820b749ee368edc58a5aa73858f6413b15 in logging-log4j2&apos;s branch refs/heads/release-2.x from Gary Gregory&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=29f18e8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=29f18e8&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2770&quot; title=&quot;NullPointerException after reconfiguring via JMX&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2770&quot;&gt;&lt;del&gt;LOG4J2-2770&lt;/del&gt;&lt;/a&gt; NullPointerException after reconfiguring via JMX.&lt;/p&gt;</comment>
                            <comment id="17029380" author="jira-bot" created="Mon, 3 Feb 2020 23:58:09 +0000"  >&lt;p&gt;Commit 91f041e40c68042ffe422bff0b90d329e49c7b36 in logging-log4j2&apos;s branch refs/heads/master from Gary Gregory&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=91f041e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=91f041e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2770&quot; title=&quot;NullPointerException after reconfiguring via JMX&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2770&quot;&gt;&lt;del&gt;LOG4J2-2770&lt;/del&gt;&lt;/a&gt; NullPointerException after reconfiguring via JMX.&lt;/p&gt;</comment>
                            <comment id="17033069" author="jira-bot" created="Sat, 8 Feb 2020 22:19:34 +0000"  >&lt;p&gt;Commit 9c9c44416a7be82e3270d0d1405e0a44ad93b810 in logging-log4j2&apos;s branch refs/heads/master from Bill Kuker&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=9c9c444&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=9c9c444&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Log4j 2&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2770&quot; title=&quot;NullPointerException after reconfiguring via JMX&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2770&quot;&gt;&lt;del&gt;LOG4J2-2770&lt;/del&gt;&lt;/a&gt; Fix NPE in JMX reconfiguration (#337)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Update ConfigurationSource.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I think this needs to store the data so that resetInputStream() works.&lt;br/&gt;
The jmx function LoggerContextAdmin::getConfigText throws a NPE if you have previously called LoggerContextAdmin::setConfigText&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Do not set data if URL is provided&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Avoids changing behavior of resetInputStream in cases that currently&lt;br/&gt;
work correctly.&lt;/p&gt;</comment>
                            <comment id="17033070" author="jira-bot" created="Sat, 8 Feb 2020 22:28:01 +0000"  >&lt;p&gt;Commit 50322a666422a89d9523e69b608f6ae3fa2245a2 in logging-log4j2&apos;s branch refs/heads/release-2.x from Bill Kuker&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=50322a6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=50322a6&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Log4j 2&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2770&quot; title=&quot;NullPointerException after reconfiguring via JMX&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2770&quot;&gt;&lt;del&gt;LOG4J2-2770&lt;/del&gt;&lt;/a&gt; Fix NPE in JMX reconfiguration (#337)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Update ConfigurationSource.java&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I think this needs to store the data so that resetInputStream() works.&lt;br/&gt;
The jmx function LoggerContextAdmin::getConfigText throws a NPE if you have previously called LoggerContextAdmin::setConfigText&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Do not set data if URL is provided&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Avoids changing behavior of resetInputStream in cases that currently&lt;br/&gt;
work correctly.&lt;/p&gt;</comment>
                            <comment id="17033071" author="jira-bot" created="Sat, 8 Feb 2020 22:28:04 +0000"  >&lt;p&gt;Commit b663e7c263469ff25a699def907d33bff52be6f1 in logging-log4j2&apos;s branch refs/heads/release-2.x from Ralph Goers&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=b663e7c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=b663e7c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2770&quot; title=&quot;NullPointerException after reconfiguring via JMX&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2770&quot;&gt;&lt;del&gt;LOG4J2-2770&lt;/del&gt;&lt;/a&gt; - changes.xml&lt;/p&gt;</comment>
                            <comment id="17033072" author="jira-bot" created="Sat, 8 Feb 2020 22:28:24 +0000"  >&lt;p&gt;Commit a7cb3d43c869353284886e19852c045368a4c7aa in logging-log4j2&apos;s branch refs/heads/master from Ralph Goers&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=a7cb3d4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=a7cb3d4&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2770&quot; title=&quot;NullPointerException after reconfiguring via JMX&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2770&quot;&gt;&lt;del&gt;LOG4J2-2770&lt;/del&gt;&lt;/a&gt; - changes.xml&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12695466">LOG4J2-539</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12714430">LOG4J2-638</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 40 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0b3zc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>