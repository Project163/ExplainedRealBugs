<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:41:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-2588] Unable to reinstate old timeMillis timestamp using log4j2.clock property in JSON layout</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-2588</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;As per the changes listed in &lt;a href=&quot;https://logging.apache.org/log4j/2.0/changes-report.html#a2.11.0,&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://logging.apache.org/log4j/2.0/changes-report.html#a2.11.0,&lt;/a&gt; it seems the timestamp is now being reported as &quot;instant&quot;:{&quot;epochSecond&quot;:1555050778,&quot;nanoOfSecond&quot;:738424000} (for instance) in the JSON output.&lt;/p&gt;

&lt;p&gt;I&apos;d like to however revert back to the old timeMillis format because it&apos;s easier to parse using a log forwarder. As per the documentation found, it seems I should be able to use log4j2.clock=SystemMillisClock property to revert this behaviour. That doesn&apos;t seem to work though. I&apos;ve tried both variants of the property I could find in the docs (log4j.Clock and log4j2.clock).&lt;/p&gt;

&lt;p&gt;Am I misinterpreting the documentation? I just want an easy way to get back the timeMillis.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13227643">LOG4J2-2588</key>
            <summary>Unable to reinstate old timeMillis timestamp using log4j2.clock property in JSON layout</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rgoers">Ralph Goers</assignee>
                                    <reporter username="siwyd">Simon Wydooghe</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Apr 2019 07:56:20 +0000</created>
                <updated>Mon, 20 Apr 2020 03:59:20 +0000</updated>
                            <resolved>Sun, 19 Apr 2020 21:24:19 +0000</resolved>
                                                    <fixVersion>2.13.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17042237" author="dankirkd" created="Fri, 21 Feb 2020 23:34:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=siwyd&quot; class=&quot;user-hover&quot; rel=&quot;siwyd&quot;&gt;siwyd&lt;/a&gt; Did you ever get a resolution to your issue?&#160; We need to do the same.&lt;/p&gt;</comment>
                            <comment id="17059657" author="siwyd" created="Sun, 15 Mar 2020 13:12:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dankirkd&quot; class=&quot;user-hover&quot; rel=&quot;dankirkd&quot;&gt;dankirkd&lt;/a&gt; No, afraid not.&lt;/p&gt;</comment>
                            <comment id="17059807" author="dankirkd" created="Sun, 15 Mar 2020 20:38:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=siwyd&quot; class=&quot;user-hover&quot; rel=&quot;siwyd&quot;&gt;siwyd&lt;/a&gt; We handled the issue by defining a lookup that simply used the event date.&#160; It works for us.&lt;/p&gt;

&lt;p&gt;If you implement &lt;font color=&quot;#0747a6&quot;&gt;&lt;tt&gt;StrLookup&lt;/tt&gt;&lt;/font&gt; as a plugin defined as &lt;font color=&quot;#0747a6&quot;&gt;&lt;tt&gt;@Plugin(name = &quot;timeMillis&quot;, category = &quot;Lookup&quot;)&lt;/tt&gt;&lt;/font&gt;, and override &lt;font color=&quot;#0747a6&quot;&gt;&lt;tt&gt;String lookup(LogEvent event, String key);&lt;/tt&gt;&lt;/font&gt;, you can obtain the time from &lt;font color=&quot;#0747a6&quot;&gt;&lt;tt&gt;event.getTimeMillis()&lt;/tt&gt;&lt;/font&gt;.&lt;/p&gt;

&lt;p&gt;Then in your Log4J2 properties file you can do this: &lt;font color=&quot;#0747a6&quot;&gt;&lt;tt&gt;&amp;lt;KeyValuePair key=&quot;timeMillis&quot; value=&quot;$${timeMillis:}&quot;/&amp;gt;&lt;/tt&gt;&lt;/font&gt; to include the data in your layout.&lt;/p&gt;

&lt;p&gt;HTH&lt;/p&gt;</comment>
                            <comment id="17061174" author="ralph.goers@dslextreme.com" created="Tue, 17 Mar 2020 20:38:04 +0000"  >&lt;p&gt;FWIW, I will be adding a LogEvent Lookup for &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2807&quot; title=&quot;Create a Lookup to retrieve data from the log event.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2807&quot;&gt;&lt;del&gt;LOG4J2-2807&lt;/del&gt;&lt;/a&gt; so you wouldn&apos;t have to create your own custom lookup.&lt;/p&gt;

&lt;p&gt;However, this issue should get addressed.&lt;/p&gt;</comment>
                            <comment id="17087198" author="jira-bot" created="Sun, 19 Apr 2020 21:22:01 +0000"  >&lt;p&gt;Commit 4fea4ff5c08a31801b4f728055e09262606e7679 in logging-log4j2&apos;s branch refs/heads/master from Ralph Goers&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=4fea4ff&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=4fea4ff&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2588&quot; title=&quot;Unable to reinstate old timeMillis timestamp using log4j2.clock property in JSON layout&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2588&quot;&gt;&lt;del&gt;LOG4J2-2588&lt;/del&gt;&lt;/a&gt; - Add option to restore printing timeMillis in the JsonLayout.&lt;/p&gt;</comment>
                            <comment id="17087199" author="jira-bot" created="Sun, 19 Apr 2020 21:22:34 +0000"  >&lt;p&gt;Commit 927f2ba66e9851e5527de106497969392b7fb483 in logging-log4j2&apos;s branch refs/heads/release-2.x from Ralph Goers&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=927f2ba&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=927f2ba&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2588&quot; title=&quot;Unable to reinstate old timeMillis timestamp using log4j2.clock property in JSON layout&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2588&quot;&gt;&lt;del&gt;LOG4J2-2588&lt;/del&gt;&lt;/a&gt; - Add option to restore printing timeMillis in the JsonLayout.&lt;/p&gt;</comment>
                            <comment id="17087200" author="ralph.goers@dslextreme.com" created="Sun, 19 Apr 2020 21:24:19 +0000"  >&lt;p&gt;A new option has been added to JsonLayout. If includeTimeMillis is set to true then the timeMillis attribute will be included instead of instant. Please verify and close.&lt;/p&gt;</comment>
                            <comment id="17087283" author="jira-bot" created="Mon, 20 Apr 2020 01:05:08 +0000"  >&lt;p&gt;Commit 3c3366180577d18841538bd4fce6243e499ed994 in logging-log4j2&apos;s branch refs/heads/release-2.x from Ralph Goers&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=3c33661&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=3c33661&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2588&quot; title=&quot;Unable to reinstate old timeMillis timestamp using log4j2.clock property in JSON layout&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2588&quot;&gt;&lt;del&gt;LOG4J2-2588&lt;/del&gt;&lt;/a&gt; - Mark timeMillis as read only&lt;/p&gt;</comment>
                            <comment id="17087337" author="jira-bot" created="Mon, 20 Apr 2020 03:59:20 +0000"  >&lt;p&gt;Commit 7f74500c04f507b55d3558c86923317fdc65514c in logging-log4j2&apos;s branch refs/heads/master from Ralph Goers&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=7f74500&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=7f74500&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2588&quot; title=&quot;Unable to reinstate old timeMillis timestamp using log4j2.clock property in JSON layout&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2588&quot;&gt;&lt;del&gt;LOG4J2-2588&lt;/del&gt;&lt;/a&gt; - Mark timeMillis as read only&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 30 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z01pu8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>