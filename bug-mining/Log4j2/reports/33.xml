<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:30:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-116] RollingFileAppender archives have wrong date values</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-116</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;Suppose I have an appender configured like so:&lt;/p&gt;

&lt;p&gt;&amp;lt;RollingFile name=&quot;test&quot;&lt;br/&gt;
             fileName=&quot;logs/test&quot;&lt;br/&gt;
             filePattern=&quot;logs/test.%d&lt;/p&gt;
{yyyy-MM-dd}
&lt;p&gt;&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;PatternLayout pattern=&quot;%d&lt;/p&gt;
{yyyy-MM-dd HH:mm:ss.SSS}
&lt;p&gt; %-5level %message%n&quot;/&amp;gt;&lt;br/&gt;
  &amp;lt;TimeBasedTriggeringPolicy interval=&quot;1&quot; modulate=&quot;true&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/RollingFile&amp;gt;&lt;/p&gt;


&lt;p&gt;Supposed today is 2012-11-13, and thus tomorrow is 2012-11-14.&lt;/p&gt;

&lt;p&gt;I create several logging events today, and as expected they end up in a file named &quot;logs/test&quot;&lt;/p&gt;

&lt;p&gt;Midnight goes by, and it is now the 14th.  Some more logging events occur around 12:01 am.&lt;/p&gt;

&lt;p&gt;What I expect to see after this is:&lt;br/&gt;
logs/test&lt;br/&gt;
logs/test.2012-11-13&lt;/p&gt;

&lt;p&gt;What I actually end up seeing is:&lt;br/&gt;
logs/test&lt;br/&gt;
logs/test.2012-11-14&lt;/p&gt;

&lt;p&gt;So the archived entries of the 13th are in a file name matching the 14th.  That is quite confusing!&lt;/p&gt;


&lt;p&gt;I tested this with some other formats, and it seems that no matter what is the most specific (day, hour, minute, etc.) field, it is always higher than expected.&lt;/p&gt;

&lt;p&gt;I traced through the code, and the culprit seems to be in PatternProcessor:&lt;/p&gt;

&lt;p&gt;    protected final void formatFileName(final Object obj, final StringBuilder buf) {&lt;br/&gt;
        Object[] objects = new Object[] &lt;/p&gt;
{new Date(System.currentTimeMillis()), obj}
&lt;p&gt;;&lt;br/&gt;
        formatFileName(objects, buf);&lt;br/&gt;
    }&lt;/p&gt;


&lt;p&gt;So the Date being used for the filename is the current time when the name is computed, which is guaranteed to be within an interval that is after the one of the file contents.  If I went a copule of intervals (in this case days) without log events, then it could be stamped with a name that is several days after the contents.&lt;/p&gt;

&lt;p&gt;In the latter case, I&apos;m not sure if I&apos;d expect to see a filename with the 13th still, or maybe the 15th (assuming rollover happened during the 16th).  But in either case, I definitely don&apos;t expect to see a filename with the 16th, which is what I&apos;d get.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12615976">LOG4J2-116</key>
            <summary>RollingFileAppender archives have wrong date values</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rgoers">Ralph Goers</assignee>
                                    <reporter username="djohle">David Johle</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Nov 2012 23:05:13 +0000</created>
                <updated>Tue, 25 Nov 2014 15:00:09 +0000</updated>
                            <resolved>Mon, 19 Nov 2012 03:24:11 +0000</resolved>
                                    <version>2.0-beta2</version>
                                    <fixVersion>2.0-beta4</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13496907" author="ralph.goers@dslextreme.com" created="Wed, 14 Nov 2012 06:54:54 +0000"  >&lt;p&gt;I&apos;ve actually known about this one for a while and it bothered me to, just not enough to fix it yet. It is annoying so I do intend to fix it. &lt;/p&gt;</comment>
                            <comment id="13500002" author="ralph.goers@dslextreme.com" created="Mon, 19 Nov 2012 03:24:11 +0000"  >&lt;p&gt;Fixed in revision 1411052. Please verify and close.&lt;/p&gt;</comment>
                            <comment id="14224642" author="ngc2997" created="Tue, 25 Nov 2014 15:00:09 +0000"  >&lt;p&gt;This still seems to be an issue in 2.1, or am I getting something wrong here?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;RollingFile name=&lt;span class=&quot;code-quote&quot;&gt;&quot;ROLLING&quot;&lt;/span&gt; ... fileName=&lt;span class=&quot;code-quote&quot;&gt;&quot;test.log&quot;&lt;/span&gt; filePattern=&lt;span class=&quot;code-quote&quot;&gt;&quot;test.log.%d{yyyyMMdd-HHmm}.gz&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;PatternLayout pattern=&lt;span class=&quot;code-quote&quot;&gt;&quot;...&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;OnStartupTriggeringPolicy /&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/RollingFile&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;d expect rolled files retain their original timestamp in the pattern, i.e. a log file created originally on Nov &lt;b&gt;24&lt;/b&gt; and rolled over the following day be named something like &lt;em&gt;test.log.201411&lt;font color=&quot;blue&quot;&gt;24&lt;/font&gt;&amp;#45;....gz&lt;/em&gt; instead of &lt;em&gt;test.log.201411&lt;font color=&quot;red&quot;&gt;25&lt;/font&gt;&amp;#45;....gz&lt;/em&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>257582</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0k3dr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>115365</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>