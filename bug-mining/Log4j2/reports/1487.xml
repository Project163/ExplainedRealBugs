<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:42:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-3153] FixedDateFormat performs poorly with a PreciseClock</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-3153</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;Enabling a PreciseClock with microsecond precision (default on jdk9+) results in substantially worse performance in&#160;DatePatternConverter using a&#160;FixedDateFormat which doesn&apos;t rely on microsecond precision.&lt;br/&gt;
The cached value is invalidated every time the microsecond clock changes. This is correct when the clock uses microsecond precision, however many configurations (including the default) use only millisecond precision, so we can reuse the cached value many times longer.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13397929">LOG4J2-3153</key>
            <summary>FixedDateFormat performs poorly with a PreciseClock</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ckozak">Carter Kozak</assignee>
                                    <reporter username="ckozak">Carter Kozak</reporter>
                        <labels>
                    </labels>
                <created>Sat, 28 Aug 2021 02:57:54 +0000</created>
                <updated>Tue, 31 Aug 2021 15:24:54 +0000</updated>
                            <resolved>Mon, 30 Aug 2021 17:33:08 +0000</resolved>
                                    <version>2.14.1</version>
                                    <fixVersion>2.15.0</fixVersion>
                                    <component>Layouts</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17406098" author="ckozak" created="Sat, 28 Aug 2021 03:01:03 +0000"  >&lt;p&gt;PR here, but it&apos;s getting late and I need to re-validate when I&apos;m awake: &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/572&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/572&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17406865" author="jira-bot" created="Mon, 30 Aug 2021 17:31:41 +0000"  >&lt;p&gt;Commit 7868911351273509b7188efa19b408e3695a6448 in logging-log4j2&apos;s branch refs/heads/release-2.x from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=7868911&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=7868911&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3153&quot; title=&quot;FixedDateFormat performs poorly with a PreciseClock&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3153&quot;&gt;&lt;del&gt;LOG4J2-3153&lt;/del&gt;&lt;/a&gt;: PreciseClock doesn&apos;t impact DatePatternConverter performance&lt;/p&gt;

&lt;p&gt;Cached values are not invalidated for microsecond changes when&lt;br/&gt;
only milliseconds are needed. This is a relatively naive approach&lt;br/&gt;
which specifically targets microsecond vs millisecond precision&lt;br/&gt;
and has no additional impact on less precise date formats, however&lt;br/&gt;
FixedDateFormat has a fixed set of supported formats, all of which&lt;br/&gt;
use either 3, 6, or 9 second decimal points.&lt;/p&gt;</comment>
                            <comment id="17406866" author="jira-bot" created="Mon, 30 Aug 2021 17:32:07 +0000"  >&lt;p&gt;Commit 5078db0e90e2862d2027457f0e95ccb8dbd221fb in logging-log4j2&apos;s branch refs/heads/master from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=5078db0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=5078db0&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3153&quot; title=&quot;FixedDateFormat performs poorly with a PreciseClock&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3153&quot;&gt;&lt;del&gt;LOG4J2-3153&lt;/del&gt;&lt;/a&gt;: PreciseClock doesn&apos;t impact DatePatternConverter performance&lt;/p&gt;

&lt;p&gt;Cached values are not invalidated for microsecond changes when&lt;br/&gt;
only milliseconds are needed. This is a relatively naive approach&lt;br/&gt;
which specifically targets microsecond vs millisecond precision&lt;br/&gt;
and has no additional impact on less precise date formats, however&lt;br/&gt;
FixedDateFormat has a fixed set of supported formats, all of which&lt;br/&gt;
use either 3, 6, or 9 second decimal points.&lt;/p&gt;</comment>
                            <comment id="17406868" author="ckozak" created="Mon, 30 Aug 2021 17:33:08 +0000"  >&lt;p&gt;I&apos;ve verified this in benchmarks, it makes a substantial difference using the default date format.&lt;/p&gt;</comment>
                            <comment id="17406945" author="vy" created="Mon, 30 Aug 2021 21:10:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ckozak&quot; class=&quot;user-hover&quot; rel=&quot;ckozak&quot;&gt;ckozak&lt;/a&gt;, have you seen &lt;tt&gt;org.apache.logging.log4j.layout.template.json.util.InstantFormatter&lt;/tt&gt;, particularly its &lt;tt&gt;Formatter#isInstantMatching&lt;/tt&gt; methods used for invalidating the cache? I was thinking of making it even smarter, e.g., if the pattern only has seconds, compare &lt;tt&gt;Instants&lt;/tt&gt; by their seconds.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 11 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ud7s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>