<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:39:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-2327] java.util.ServiceConfigurationError: org.apache.logging.log4j.util.PropertySource: Provider org.apache.logging.log4j.util.EnvironmentPropertySource not a subtype</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-2327</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;java.util.ServiceConfigurationError: org.apache.logging.log4j.util.PropertySource: Provider&#160;org.apache.logging.log4j.util.EnvironmentPropertySource not a subtype&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: java.util.ServiceConfigurationError: org.apache.logging.log4j.util.PropertySource: Provider org.apache.logging.log4j.util.EnvironmentPropertySource not a subtype
 at java.util.ServiceLoader.fail(ServiceLoader.java:239)
 at java.util.ServiceLoader.access$300(ServiceLoader.java:185)
 at java.util.ServiceLoader$LazyIterator.nextService(ServiceLoader.java:376)
 at java.util.ServiceLoader$LazyIterator.next(ServiceLoader.java:404)
 at java.util.ServiceLoader$1.next(ServiceLoader.java:480)
 at org.apache.logging.log4j.util.PropertiesUtil$Environment.&amp;lt;init&amp;gt;(PropertiesUtil.java:319)
 at org.apache.logging.log4j.util.PropertiesUtil$Environment.&amp;lt;init&amp;gt;(PropertiesUtil.java:310)
 at org.apache.logging.log4j.util.PropertiesUtil.&amp;lt;init&amp;gt;(PropertiesUtil.java:59)
 at org.apache.logging.log4j.core.appender.ConsoleAppender$Target.getCharset(ConsoleAppender.java:92)
 at org.apache.logging.log4j.core.appender.ConsoleAppender$Target$1.getDefaultCharset(ConsoleAppender.java:76)
 at org.apache.logging.log4j.core.appender.ConsoleAppender$Builder.build(ConsoleAppender.java:225)
 at org.apache.logging.log4j.core.appender.ConsoleAppender$Builder.build(ConsoleAppender.java:192)
 at org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.build(PluginBuilder.java:122)
 at org.apache.logging.log4j.core.config.AbstractConfiguration.createPluginObject(AbstractConfiguration.java:958)
 at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:898)
 at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:890)
 at org.apache.logging.log4j.core.config.AbstractConfiguration.doConfigure(AbstractConfiguration.java:513)
 at org.apache.logging.log4j.core.config.AbstractConfiguration.initialize(AbstractConfiguration.java:237)
 at org.apache.logging.log4j.core.config.AbstractConfiguration.start(AbstractConfiguration.java:249)
 at org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:545)
 at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:617)
 at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:634)
 at org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:229)
 at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:153)
 at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:45)
 at org.apache.logging.log4j.LogManager.getContext(LogManager.java:194)
 at org.apache.logging.log4j.spi.AbstractLoggerAdapter.getContext(AbstractLoggerAdapter.java:122)
 at org.apache.logging.slf4j.Log4jLoggerFactory.getContext(Log4jLoggerFactory.java:43)
 at org.apache.logging.log4j.spi.AbstractLoggerAdapter.getLogger(AbstractLoggerAdapter.java:46)
 at org.apache.logging.slf4j.Log4jLoggerFactory.getLogger(Log4jLoggerFactory.java:29)
 at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:358)
 at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:383)
 at com.hsntech.hif.logging.HIFLogMessage.getLogger(HIFLogMessage.java:46)
 at com.hsntech.hif.logging.HIFLogger.&amp;lt;init&amp;gt;(HIFLogger.java:35)
 at com.hsntech.hif.webservice.HansenIntegrationWS.&amp;lt;init&amp;gt;(HansenIntegrationWS.java:69)
 at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
 at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
 at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
 at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
 at java.lang.Class.newInstance(Class.java:442)
 at org.jboss.wsf.stack.cxf.configuration.BusHolder.newInstance(BusHolder.java:313)
 at org.jboss.wsf.stack.cxf.configuration.BusHolder.configure(BusHolder.java:211)
 at org.jboss.wsf.stack.cxf.deployment.aspect.BusDeploymentAspect.startDeploymentBus(BusDeploymentAspect.java:97)
 at org.jboss.wsf.stack.cxf.deployment.aspect.BusDeploymentAspect.start(BusDeploymentAspect.java:59)
 at org.jboss.as.webservices.deployers.AspectDeploymentProcessor.deploy(AspectDeploymentProcessor.java:73)
 at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:147)
 ... 5 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13155446">LOG4J2-2327</key>
            <summary>java.util.ServiceConfigurationError: org.apache.logging.log4j.util.PropertySource: Provider org.apache.logging.log4j.util.EnvironmentPropertySource not a subtype</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="ggregory">Gary D. Gregory</reporter>
                        <labels>
                    </labels>
                <created>Thu, 26 Apr 2018 15:50:03 +0000</created>
                <updated>Wed, 27 Feb 2019 15:13:26 +0000</updated>
                            <resolved>Wed, 27 Feb 2019 15:13:26 +0000</resolved>
                                    <version>2.11.0</version>
                                    <fixVersion>3.0.0</fixVersion>
                    <fixVersion>2.11.2</fixVersion>
                                    <component>API</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16454429" author="jira-bot" created="Thu, 26 Apr 2018 15:53:37 +0000"  >&lt;p&gt;Commit 4f23d5cff3874f1c2771c34eeef31bd8ab3e5968 in logging-log4j2&apos;s branch refs/heads/release-2.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=4f23d5c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=4f23d5c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2327&quot; title=&quot;java.util.ServiceConfigurationError: org.apache.logging.log4j.util.PropertySource: Provider org.apache.logging.log4j.util.EnvironmentPropertySource not a subtype&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2327&quot;&gt;&lt;del&gt;LOG4J2-2327&lt;/del&gt;&lt;/a&gt; java.util.ServiceConfigurationError:&lt;br/&gt;
org.apache.logging.log4j.util.PropertySource: Provider&lt;br/&gt;
org.apache.logging.log4j.util.EnvironmentPropertySource not a subtype.&lt;/p&gt;</comment>
                            <comment id="16454444" author="jira-bot" created="Thu, 26 Apr 2018 15:57:58 +0000"  >&lt;p&gt;Commit 6096c863078e2a8ddd428921c1437ad77940c088 in logging-log4j2&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=6096c86&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=6096c86&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2327&quot; title=&quot;java.util.ServiceConfigurationError: org.apache.logging.log4j.util.PropertySource: Provider org.apache.logging.log4j.util.EnvironmentPropertySource not a subtype&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2327&quot;&gt;&lt;del&gt;LOG4J2-2327&lt;/del&gt;&lt;/a&gt; java.util.ServiceConfigurationError:&lt;br/&gt;
org.apache.logging.log4j.util.PropertySource: Provider&lt;br/&gt;
org.apache.logging.log4j.util.EnvironmentPropertySource not a subtype.&lt;/p&gt;</comment>
                            <comment id="16454448" author="garydgregory" created="Thu, 26 Apr 2018 15:59:18 +0000"  >&lt;p&gt;In git &lt;tt&gt;master&lt;/tt&gt; and &lt;tt&gt;release-2.x&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16454550" author="ralph.goers@dslextreme.com" created="Thu, 26 Apr 2018 17:06:39 +0000"  >&lt;p&gt;-1 to this commit.  Please revert or create a proper fix.&lt;/p&gt;

&lt;p&gt;The change completely changes what the code is supposed to do and is somewhat silly. By providing a classloader you can only hope to ever get one resource back. The point of the for loop is to search through all class loaders in the hierarchy. &lt;/p&gt;

&lt;p&gt;The code needs to be modified to match the way ProviderUtil works. Matt had suggested creating a common utility in LoaderUtil to search through the hierarchy. I have planned on doing that but haven&apos;t had time.&lt;/p&gt;</comment>
                            <comment id="16454573" author="ralph.goers@dslextreme.com" created="Thu, 26 Apr 2018 17:18:07 +0000"  >&lt;p&gt;After reverting you can close this as a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2152&quot; title=&quot;ServiceConfigurationError in Tomcat when Log4j is used as the logging implementation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2152&quot;&gt;&lt;del&gt;LOG4J2-2152&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16454677" author="jira-bot" created="Thu, 26 Apr 2018 18:38:55 +0000"  >&lt;p&gt;Commit 7cb07398149e5c2c77404251233cfcabd57925e5 in logging-log4j2&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=7cb0739&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=7cb0739&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2327&quot; title=&quot;java.util.ServiceConfigurationError: org.apache.logging.log4j.util.PropertySource: Provider org.apache.logging.log4j.util.EnvironmentPropertySource not a subtype&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2327&quot;&gt;&lt;del&gt;LOG4J2-2327&lt;/del&gt;&lt;/a&gt; java.util.ServiceConfigurationError: org.apache.logging.log4j.util.PropertySource: Provider org.apache.logging.log4j.util.EnvironmentPropertySource not a subtype.&quot;&lt;/p&gt;

&lt;p&gt;This reverts commit 6096c863078e2a8ddd428921c1437ad77940c088.&lt;/p&gt;</comment>
                            <comment id="16454680" author="jira-bot" created="Thu, 26 Apr 2018 18:40:11 +0000"  >&lt;p&gt;Commit c59170b527f59304dfcbf1d5fca5ea19b88776de in logging-log4j2&apos;s branch refs/heads/release-2.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=c59170b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=c59170b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2327&quot; title=&quot;java.util.ServiceConfigurationError: org.apache.logging.log4j.util.PropertySource: Provider org.apache.logging.log4j.util.EnvironmentPropertySource not a subtype&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2327&quot;&gt;&lt;del&gt;LOG4J2-2327&lt;/del&gt;&lt;/a&gt; java.util.ServiceConfigurationError: org.apache.logging.log4j.util.PropertySource: Provider org.apache.logging.log4j.util.EnvironmentPropertySource not a subtype.&quot;&lt;/p&gt;

&lt;p&gt;This reverts commit 4f23d5cff3874f1c2771c34eeef31bd8ab3e5968.&lt;/p&gt;</comment>
                            <comment id="16454682" author="garydgregory" created="Thu, 26 Apr 2018 18:41:11 +0000"  >&lt;p&gt;Reverted in both branches.&lt;/p&gt;

&lt;p&gt;Can you add a unit test to show the intent of the code here such that the change I reverted would break such tests?&lt;/p&gt;</comment>
                            <comment id="16454793" author="ralph.goers@dslextreme.com" created="Thu, 26 Apr 2018 20:14:49 +0000"  >&lt;p&gt;Sure, although it is a bit complicated. Basically, if the log4j jar is in the Tomcat class loader it wouldn&apos;t find the resource in your application war because it would be using the wrong class loader. So you have to search multiple class loaders.&lt;/p&gt;</comment>
                            <comment id="16454808" author="garydgregory" created="Thu, 26 Apr 2018 20:22:39 +0000"  >&lt;p&gt;In this case though, we cannot find our own class. It seems there are two cases from a user&apos;s POV: Find Log4j&apos;s class, and, find a user&apos;s custom class.&lt;/p&gt;</comment>
                            <comment id="16454849" author="ralph.goers@dslextreme.com" created="Thu, 26 Apr 2018 20:48:36 +0000"  >&lt;p&gt;I don&apos;t understand. Our class will be found through the normal class loader mechanism. If Log4j is in the Tomcat class loader it is available to the web application. But when you pass that class loader to ServiceLoader it will only find resources in the Tomcat class loader.&lt;/p&gt;</comment>
                            <comment id="16454855" author="garydgregory" created="Thu, 26 Apr 2018 20:53:37 +0000"  >&lt;p&gt;It seems to be that the error message reported (&quot;org.apache.logging.log4j.util.PropertySource: Provider org.apache.logging.log4j.util.EnvironmentPropertySource not a subtype&quot;) means that yes, we found a class, but it was in the wrong class loader so it cannot be cast to the class. How do you read the message?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16455453" author="ralph.goers@dslextreme.com" created="Thu, 26 Apr 2018 22:01:52 +0000"  >&lt;p&gt;Possibly the same. But with your fix if I have Log4j in the tomcat class loader and the Provider in the web app it will fail as you told it to only use the class loader from where Log4j came from. However, if the resource is in the web app class loader it should work because the web app class loader has the tomcat class loader as its parent, so the class should be reachable. The opposite would not be true. The problem is that ServiceLoader, by default, uses the thread context class loader and what that points to varies from one application to another, so you can never count on it working. Instead, you have to construct the search hierarchy yourself.&lt;/p&gt;</comment>
                            <comment id="16779419" author="ralph.goers@dslextreme.com" created="Wed, 27 Feb 2019 15:12:56 +0000"  >&lt;p&gt;I believe this was fixed as part of 2.11.2 under a different Jira issue.&lt;/p&gt;</comment>
                            <comment id="16779420" author="ralph.goers@dslextreme.com" created="Wed, 27 Feb 2019 15:13:26 +0000"  >&lt;p&gt;Please verify and close.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 38 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3t2bb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>