<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:36:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-1372] XMLLayout indents, but not the first child tag (&lt;Event&gt;)</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-1372</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;I am using log4j 2.5 to print the logs via XMLLayout. I have set compact=&quot;true&quot;, hence the new line and indents of sub tags work correctly. However I have noticed that the first child tag is not indented correctly. &lt;/p&gt;

&lt;p&gt;Following is such a sample where &amp;lt;Events&amp;gt; and &amp;lt;Event&amp;gt; are at the same indent level (0 indent). &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;?&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Events xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://logging.apache.org/log4j/2.0/events&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Event xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://logging.apache.org/log4j/2.0/events&quot;&lt;/span&gt; timeMillis=&lt;span class=&quot;code-quote&quot;&gt;&quot;1460974404123&quot;&lt;/span&gt; thread=&lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;INFO&quot;&lt;/span&gt; loggerName=&lt;span class=&quot;code-quote&quot;&gt;&quot;com.foo.Bar&quot;&lt;/span&gt; endOfBatch=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; loggerFqcn=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.logging.log4j.spi.AbstractLogger&quot;&lt;/span&gt; threadId=&lt;span class=&quot;code-quote&quot;&gt;&quot;11&quot;&lt;/span&gt; threadPriority=&lt;span class=&quot;code-quote&quot;&gt;&quot;5&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Message&amp;gt;&lt;/span&gt;First Msg tag must be in level 2 after correct indentation&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Message&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Event&amp;gt;&lt;/span&gt;

&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Event xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://logging.apache.org/log4j/2.0/events&quot;&lt;/span&gt; timeMillis=&lt;span class=&quot;code-quote&quot;&gt;&quot;1460974404133&quot;&lt;/span&gt; thread=&lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;INFO&quot;&lt;/span&gt; loggerName=&lt;span class=&quot;code-quote&quot;&gt;&quot;com.foo.Bar&quot;&lt;/span&gt; endOfBatch=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; loggerFqcn=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.logging.log4j.spi.AbstractLogger&quot;&lt;/span&gt; threadId=&lt;span class=&quot;code-quote&quot;&gt;&quot;11&quot;&lt;/span&gt; threadPriority=&lt;span class=&quot;code-quote&quot;&gt;&quot;5&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Message&amp;gt;&lt;/span&gt;Second Msg tag must also be in level 2 after correct indentation&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Message&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Event&amp;gt;&lt;/span&gt;

&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Events&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12960327">LOG4J2-1372</key>
            <summary>XMLLayout indents, but not the first child tag (&lt;Event&gt;)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="lkamal">Kamal Mettananda</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Apr 2016 12:42:09 +0000</created>
                <updated>Wed, 20 Apr 2016 18:32:34 +0000</updated>
                            <resolved>Wed, 20 Apr 2016 16:19:28 +0000</resolved>
                                    <version>2.5</version>
                                    <fixVersion>2.6</fixVersion>
                                    <component>Layouts</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15249895" author="lkamal" created="Wed, 20 Apr 2016 13:36:47 +0000"  >&lt;p&gt;I analysed the code, and this is related to the way the org.apache.logging.log4j.core.layout.XmlLayout writes the XML file using all the Events including a header and a footer. &lt;/p&gt;

&lt;p&gt;When &amp;lt;Event&amp;gt;s are written into a XML file; the &quot;Event&quot; object is not the root element, but an element named &amp;lt;Events&amp;gt;; created using XmlLayout#getHeader() and XmlLayout#getFooter() methods.&lt;/p&gt;

&lt;p&gt;com.fasterxml.jackson.dataformat.xml.util.DefaultXmlPrettyPrinter is used to print the Event object into an XML; hence it assumes &amp;lt;Event&amp;gt; tag as the root element, so it prints the &amp;lt;Event&amp;gt; tag without any indentation. So both &amp;lt;Events&amp;gt; and &amp;lt;Event&amp;gt; tags are having the same (zero) indentation.&lt;/p&gt;</comment>
                            <comment id="15249967" author="lkamal" created="Wed, 20 Apr 2016 14:15:38 +0000"  >&lt;p&gt;I have created a patch and attached here named &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12799757/12799757_LOG4J2-1372_01.patch&quot; title=&quot;LOG4J2-1372_01.patch attached to LOG4J2-1372&quot;&gt;LOG4J2-1372_01.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; using below command.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;git diff &amp;gt; LOG4J2-1372_01.patch
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;Here is the sample XML generated after the fix is applied.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;?&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Events xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://logging.apache.org/log4j/2.0/events&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;

  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Event xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://logging.apache.org/log4j/2.0/events&quot;&lt;/span&gt; timeMillis=&lt;span class=&quot;code-quote&quot;&gt;&quot;1460974522088&quot;&lt;/span&gt; thread=&lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;INFO&quot;&lt;/span&gt; loggerName=&lt;span class=&quot;code-quote&quot;&gt;&quot;com.foo.Bar&quot;&lt;/span&gt; endOfBatch=&lt;span class=&quot;code-quote&quot;&gt;&quot;false&quot;&lt;/span&gt; loggerFqcn=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.logging.log4j.spi.AbstractLogger&quot;&lt;/span&gt; threadId=&lt;span class=&quot;code-quote&quot;&gt;&quot;11&quot;&lt;/span&gt; threadPriority=&lt;span class=&quot;code-quote&quot;&gt;&quot;5&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Message&amp;gt;&lt;/span&gt;First Msg tag must be in level 2 after correct indentation&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Message&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Event&amp;gt;&lt;/span&gt;

  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Event xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://logging.apache.org/log4j/2.0/events&quot;&lt;/span&gt; timeMillis=&lt;span class=&quot;code-quote&quot;&gt;&quot;1460974522089&quot;&lt;/span&gt; thread=&lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;INFO&quot;&lt;/span&gt; loggerName=&lt;span class=&quot;code-quote&quot;&gt;&quot;com.foo.Bar&quot;&lt;/span&gt; endOfBatch=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; loggerFqcn=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.logging.log4j.spi.AbstractLogger&quot;&lt;/span&gt; threadId=&lt;span class=&quot;code-quote&quot;&gt;&quot;11&quot;&lt;/span&gt; threadPriority=&lt;span class=&quot;code-quote&quot;&gt;&quot;5&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Message&amp;gt;&lt;/span&gt;Second Msg tag must also be in level 2 after correct indentation&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Message&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Event&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Events&amp;gt;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Below are some information on my workspace (as I am a newbie into this project).&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;At the time of the patch creation below was the status of my local workspace.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;bash-4.1$ git status
On branch master
Your branch is up-to-date with &apos;origin/master&apos;.
Changes not staged for commit:
  (use &quot;git add &amp;lt;file&amp;gt;...&quot; to update what will be committed)
  (use &quot;git checkout -- &amp;lt;file&amp;gt;...&quot; to discard changes in working directory)

	modified:   log4j-core/src/main/java/org/apache/logging/log4j/core/layout/XmlLayout.java
	modified:   log4j-core/src/test/java/org/apache/logging/log4j/core/appender/XmlCompleteFileAppenderTest.java
	modified:   log4j-core/src/test/java/org/apache/logging/log4j/core/appender/XmlFileAppenderTest.java

no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)
bash-4.1$ 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And the last commit that was visible to me was:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;bash-4.1$ git log -1
commit 4195c7b365f0bba71f5a8aec59bf32dd90cc1f20
Author: ...
Date:   Wed Apr 20 05:06:50 2016 -0700

    LOG4J2-1363 - ...
bash-4.1$ 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15250179" author="garydgregory" created="Wed, 20 Apr 2016 16:19:28 +0000"  >&lt;p&gt;Kamal,&lt;/p&gt;

&lt;p&gt;I committed a less intrusive variant of the patch. The results are the same, in fact, I did not touch the tests patch. &lt;/p&gt;

&lt;p&gt;Also see if you can avoid the extra blank lines.&lt;/p&gt;

&lt;p&gt;Please verify and close.&lt;/p&gt;

&lt;p&gt;Thank you!&lt;br/&gt;
Gary&lt;/p&gt;</comment>
                            <comment id="15250267" author="lkamal" created="Wed, 20 Apr 2016 17:03:35 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Yes, that looks much better, thanks for the update. Sure, I will minimize the blank lines in next patches.&lt;/p&gt;

&lt;p&gt;If you could do a slight change to the Javadocs of Log4jXmlPrettyPrinter, it would be perfect (link missing due to package change - just need to add XmlLayout in front of #getHeader() &amp;amp; #getFooter()).&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Existing Javadoc:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    /**
     * When &amp;amp;lt;Event&amp;amp;gt;s are written into a XML file; the &quot;Event&quot; object is not the root element, but an element named
     * &amp;amp;lt;Events&amp;amp;gt; created using {@link #getHeader()} and {@link #getFooter()} methods.&amp;lt;br/&amp;gt;
     * ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Expected Javadoc:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    /**
     * When &amp;amp;lt;Event&amp;amp;gt;s are written into a XML file; the &quot;Event&quot; object is not the root element, but an element named
     * &amp;amp;lt;Events&amp;amp;gt; created using {@link XmlLayout#getHeader()} and {@link XmlLayout#getFooter()} methods.&amp;lt;br/&amp;gt;
     * ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="15250312" author="garydgregory" created="Wed, 20 Apr 2016 17:22:37 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lkamal&quot; class=&quot;user-hover&quot; rel=&quot;lkamal&quot;&gt;lkamal&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;Done!&lt;/p&gt;

&lt;p&gt;Thank you,&lt;br/&gt;
Gary&lt;/p&gt;</comment>
                            <comment id="15250461" author="lkamal" created="Wed, 20 Apr 2016 18:32:16 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Perfect, I am closing it.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12799757" name="LOG4J2-1372_01.patch" size="9977" author="lkamal" created="Wed, 20 Apr 2016 14:06:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 31 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2wdlj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>