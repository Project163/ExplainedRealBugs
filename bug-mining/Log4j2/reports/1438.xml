<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:41:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-2972] AsyncAppender thread gets killed with ThreadDeath exception</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-2972</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;The fix we have introduced ~1 month ago to avoid &lt;tt&gt;AsyncAppender&lt;/tt&gt; thread getting killed, &lt;a href=&quot;https://github.com/apache/logging-log4j2/commit/56436ad2176eac000d2821690e4373f097b76670#commitcomment-44892412&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;introduces another problem&lt;/a&gt;. In a nutshell, when the thread gets killed via &lt;tt&gt;Thread#stop()&lt;/tt&gt; it throws a &lt;tt&gt;ThreadDeath&lt;/tt&gt; exception which we unintentionally swallow, whereas the thread needs to be re-spawned again.&lt;/p&gt;

&lt;p&gt;This story aims to replace the custom &lt;tt&gt;Thread&lt;/tt&gt; usage with a single-threaded &lt;tt&gt;Executor&lt;/tt&gt;, which takes care of re-spawning.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13345243">LOG4J2-2972</key>
            <summary>AsyncAppender thread gets killed with ThreadDeath exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vy">Volkan Yazici</assignee>
                                    <reporter username="vy">Volkan Yazici</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Dec 2020 09:49:08 +0000</created>
                <updated>Tue, 26 Jan 2021 21:22:29 +0000</updated>
                            <resolved>Sat, 9 Jan 2021 15:02:13 +0000</resolved>
                                    <version>2.14.0</version>
                                    <fixVersion>3.0.0</fixVersion>
                    <fixVersion>2.14.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17247296" author="garydgregory" created="Thu, 10 Dec 2020 15:04:19 +0000"  >&lt;p&gt;Please see my comment in github WRT lame names.&lt;/p&gt;</comment>
                            <comment id="17255734" author="jira-bot" created="Mon, 28 Dec 2020 22:18:45 +0000"  >&lt;p&gt;Commit dc7583597953188973668b959ef6b16f97386f9e in logging-log4j2&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2972&quot; title=&quot;AsyncAppender thread gets killed with ThreadDeath exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2972&quot;&gt;&lt;del&gt;LOG4J2-2972&lt;/del&gt;&lt;/a&gt; from Volkan Yazici&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=dc75835&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=dc75835&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2972&quot; title=&quot;AsyncAppender thread gets killed with ThreadDeath exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2972&quot;&gt;&lt;del&gt;LOG4J2-2972&lt;/del&gt;&lt;/a&gt; Respawn AsyncAppender thread on failures.&lt;/p&gt;</comment>
                            <comment id="17257867" author="jira-bot" created="Sun, 3 Jan 2021 21:14:03 +0000"  >&lt;p&gt;Commit 743ef84b61fcb5ea913660609da2c9f9791ed563 in logging-log4j2&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2972&quot; title=&quot;AsyncAppender thread gets killed with ThreadDeath exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2972&quot;&gt;&lt;del&gt;LOG4J2-2972&lt;/del&gt;&lt;/a&gt; from Volkan Yazici&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=743ef84&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=743ef84&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2972&quot; title=&quot;AsyncAppender thread gets killed with ThreadDeath exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2972&quot;&gt;&lt;del&gt;LOG4J2-2972&lt;/del&gt;&lt;/a&gt; Switch from respawning to catching Throwables, as suggested by ckozak.&lt;/p&gt;</comment>
                            <comment id="17260601" author="jira-bot" created="Thu, 7 Jan 2021 16:02:23 +0000"  >&lt;p&gt;Commit 4a14b2d19fc4f4ff6673bf9e5eccc0e386760eab in logging-log4j2&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2972&quot; title=&quot;AsyncAppender thread gets killed with ThreadDeath exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2972&quot;&gt;&lt;del&gt;LOG4J2-2972&lt;/del&gt;&lt;/a&gt; from Volkan Yazici&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=4a14b2d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=4a14b2d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2972&quot; title=&quot;AsyncAppender thread gets killed with ThreadDeath exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2972&quot;&gt;&lt;del&gt;LOG4J2-2972&lt;/del&gt;&lt;/a&gt; Replace sync&apos;ed with AtomicBoolean in AsyncAppenderEventForwarder.&lt;/p&gt;</comment>
                            <comment id="17260603" author="jira-bot" created="Thu, 7 Jan 2021 16:04:26 +0000"  >&lt;p&gt;Commit 9b0a8da7343104fdc91ea22c839080daa07ca254 in logging-log4j2&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2972&quot; title=&quot;AsyncAppender thread gets killed with ThreadDeath exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2972&quot;&gt;&lt;del&gt;LOG4J2-2972&lt;/del&gt;&lt;/a&gt; from Volkan Yazici&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=9b0a8da&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=9b0a8da&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2972&quot; title=&quot;AsyncAppender thread gets killed with ThreadDeath exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2972&quot;&gt;&lt;del&gt;LOG4J2-2972&lt;/del&gt;&lt;/a&gt; Rename forwardOne() to forward() in AsyncAppenderEventForwarder.&lt;/p&gt;</comment>
                            <comment id="17261348" author="jira-bot" created="Fri, 8 Jan 2021 15:06:11 +0000"  >&lt;p&gt;Commit dceff40e8a8379c91b3ef4c67901a5450dff39c1 in logging-log4j2&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2972&quot; title=&quot;AsyncAppender thread gets killed with ThreadDeath exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2972&quot;&gt;&lt;del&gt;LOG4J2-2972&lt;/del&gt;&lt;/a&gt; from Volkan Yazici&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=dceff40&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=dceff40&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2972&quot; title=&quot;AsyncAppender thread gets killed with ThreadDeath exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2972&quot;&gt;&lt;del&gt;LOG4J2-2972&lt;/del&gt;&lt;/a&gt; Incorporate changes requested by ckozak.&lt;/p&gt;</comment>
                            <comment id="17261351" author="jira-bot" created="Fri, 8 Jan 2021 15:08:38 +0000"  >&lt;p&gt;Commit 44efbfcb01ed45b36a776cd859d749c6d1493dc2 in logging-log4j2&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2972&quot; title=&quot;AsyncAppender thread gets killed with ThreadDeath exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2972&quot;&gt;&lt;del&gt;LOG4J2-2972&lt;/del&gt;&lt;/a&gt; from Volkan Yazici&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=44efbfc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=44efbfc&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2972&quot; title=&quot;AsyncAppender thread gets killed with ThreadDeath exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2972&quot;&gt;&lt;del&gt;LOG4J2-2972&lt;/del&gt;&lt;/a&gt; Incorporate changes requested by ckozak.&lt;/p&gt;</comment>
                            <comment id="17261376" author="jira-bot" created="Fri, 8 Jan 2021 15:38:15 +0000"  >&lt;p&gt;Commit 3e9e855deea2d34174dbf5ea9c9b35f649219892 in logging-log4j2&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2972&quot; title=&quot;AsyncAppender thread gets killed with ThreadDeath exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2972&quot;&gt;&lt;del&gt;LOG4J2-2972&lt;/del&gt;&lt;/a&gt; from Volkan Yazici&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=3e9e855&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=3e9e855&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2972&quot; title=&quot;AsyncAppender thread gets killed with ThreadDeath exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2972&quot;&gt;&lt;del&gt;LOG4J2-2972&lt;/del&gt;&lt;/a&gt; Incorporate changes requested by ckozak.&lt;/p&gt;</comment>
                            <comment id="17261877" author="jira-bot" created="Sat, 9 Jan 2021 14:53:04 +0000"  >&lt;p&gt;Commit 04df54ab52a3922b1bb50a25b930bd31983eaa3a in logging-log4j2&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2972&quot; title=&quot;AsyncAppender thread gets killed with ThreadDeath exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2972&quot;&gt;&lt;del&gt;LOG4J2-2972&lt;/del&gt;&lt;/a&gt; from Volkan Yazici&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=04df54a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=04df54a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2972&quot; title=&quot;AsyncAppender thread gets killed with ThreadDeath exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2972&quot;&gt;&lt;del&gt;LOG4J2-2972&lt;/del&gt;&lt;/a&gt; During shutdown, consume all enqueued events in AsyncAppenderEventDispatcher.&lt;/p&gt;</comment>
                            <comment id="17261881" author="jira-bot" created="Sat, 9 Jan 2021 14:58:39 +0000"  >&lt;p&gt;Commit 543bf6eacf174d7b64dc97442b65583baa67ea40 in logging-log4j2&apos;s branch refs/heads/release-2.x from Volkan Yaz&#305;c&#305;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=543bf6e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=543bf6e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2972&quot; title=&quot;AsyncAppender thread gets killed with ThreadDeath exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2972&quot;&gt;&lt;del&gt;LOG4J2-2972&lt;/del&gt;&lt;/a&gt; Refactor AsyncAppender and AppenderControl for handling of Throwables. (#452)&lt;/p&gt;
</comment>
                            <comment id="17271682" author="jira-bot" created="Mon, 25 Jan 2021 21:29:30 +0000"  >&lt;p&gt;Commit 6bf68b73b322b9b52e2ff7d969133fb816f57d38 in logging-log4j2&apos;s branch refs/heads/master from Volkan Yaz&#305;c&#305;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=6bf68b7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=6bf68b7&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2972&quot; title=&quot;AsyncAppender thread gets killed with ThreadDeath exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2972&quot;&gt;&lt;del&gt;LOG4J2-2972&lt;/del&gt;&lt;/a&gt; Refactor AsyncAppender and AppenderControl for handling of Throwables. (#452)&lt;/p&gt;</comment>
                            <comment id="17272422" author="jira-bot" created="Tue, 26 Jan 2021 21:22:29 +0000"  >&lt;p&gt;Commit 57b6298f89a76810d4a7d876d4294e1fe28c1915 in logging-log4j2&apos;s branch refs/heads/master from Volkan Yaz&#305;c&#305;&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=57b6298&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=57b6298&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2972&quot; title=&quot;AsyncAppender thread gets killed with ThreadDeath exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2972&quot;&gt;&lt;del&gt;LOG4J2-2972&lt;/del&gt;&lt;/a&gt; Fix AsyncAppender builder annotation.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 42 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ldpk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>