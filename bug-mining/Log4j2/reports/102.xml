<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:31:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-219] Named logger without root logger ends up with empty Appenders map - does not log anything</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-219</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;On the log4j-user mailing list, Peter DePasquale gave this test case that demonstrates the problem:&lt;/p&gt;

&lt;p&gt;Note that the configuration has no root logger, but only contains a named logger.&lt;/p&gt;

&lt;p&gt;In a debugger I found that the LoggerConfig for &quot;logtest.LogTest&quot; ended up with an empty &quot;appenders&quot; Map&amp;lt;String, AppenderControl&amp;lt;?&amp;gt;&amp;gt;. The appenderRefs list did contain an AppenderRef object but in #callAppenders there are no AppenderControl objects to call...  &lt;/p&gt;

&lt;p&gt;(Sorry, I have been unable to find out the underlying cause yet.)&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;configuration status=&quot;warn&quot;&amp;gt;&lt;br/&gt;
	&amp;lt;appenders&amp;gt;&lt;br/&gt;
		&amp;lt;File name=&quot;tracelog&quot; fileName=&quot;trace-log.txt&quot; &lt;br/&gt;
				immediateFlush=&quot;true&quot; append=&quot;false&quot;&amp;gt;&lt;br/&gt;
			&amp;lt;PatternLayout pattern=&quot;%d&lt;/p&gt;
{HH:mm:ss.SSS}
&lt;p&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;%t&amp;#93;&lt;/span&gt; %-5level %logger&lt;/p&gt;
{36}
&lt;p&gt; - %msg%n&quot;/&amp;gt;&lt;br/&gt;
		&amp;lt;/File&amp;gt;&lt;br/&gt;
	&amp;lt;/appenders&amp;gt;&lt;/p&gt;

&lt;p&gt;	&amp;lt;loggers&amp;gt;&lt;br/&gt;
		&amp;lt;logger name=&quot;logtest.LogTest&quot; level=&quot;trace&quot;&amp;gt;&lt;br/&gt;
			&amp;lt;appender-ref ref=&quot;tracelog&quot;/&amp;gt;&lt;br/&gt;
		&amp;lt;/logger&amp;gt;&lt;br/&gt;
	&amp;lt;/loggers&amp;gt;&lt;br/&gt;
&amp;lt;/configuration&amp;gt;&lt;/p&gt;



&lt;p&gt;package logtest;&lt;br/&gt;
import org.apache.logging.log4j.LogManager;&lt;br/&gt;
import org.apache.logging.log4j.Logger;&lt;br/&gt;
import org.apache.logging.log4j.core.config.XMLConfigurationFactory;&lt;/p&gt;

&lt;p&gt;public class LogTest {&lt;br/&gt;
	public static void main(String[] args) &lt;/p&gt;
{
		System.setProperty(XMLConfigurationFactory.CONFIGURATION_FILE_PROPERTY,
				&quot;log4j2-roottest.xml&quot;);

		Logger logger = LogManager.getLogger(LogTest.class);
		logger.trace(&quot;This is a trace message&quot;);
		logger.info(&quot;This is an info message&quot;);
		logger.warn(&quot;This is a warning message&quot;);
	}
&lt;p&gt;}&lt;/p&gt;</description>
                <environment></environment>
        <key id="12644286">LOG4J2-219</key>
            <summary>Named logger without root logger ends up with empty Appenders map - does not log anything</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rpopma">Remko Popma</assignee>
                                    <reporter username="rpopma">Remko Popma</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Apr 2013 05:34:31 +0000</created>
                <updated>Sat, 4 May 2013 10:39:38 +0000</updated>
                            <resolved>Sat, 4 May 2013 10:39:38 +0000</resolved>
                                    <version>2.0-beta5</version>
                                    <fixVersion>2.0-beta6</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13641332" author="remkop@yahoo.com" created="Thu, 25 Apr 2013 02:54:15 +0000"  >&lt;p&gt;Underlying cause: BaseConfiguration will not connect appenders to Loggers if no root element is present.&lt;/p&gt;

&lt;p&gt;Instead, if no root element is present, it will create a default root element and connect it to a default Console appender.&lt;br/&gt;
A status logger warning is emitted: &quot;No Root logger was configured, using default&quot;.&lt;br/&gt;
Further processing is skipped and other configured logger elements are not considered.&lt;/p&gt;

&lt;p&gt;Logger elements will only be connected to their appenders if a root element exists.&lt;br/&gt;
(see o.a.l.l.c.c.BaseConfiguration.doConfigure() from line 199)&lt;/p&gt;

&lt;p&gt;I&apos;m not sure what to do with this.&lt;br/&gt;
The code essentially says that a root element is mandatory. &lt;br/&gt;
The documentation does not say that anywhere (or did I miss something?).&lt;br/&gt;
True, all examples have a root element, but those are just examples...&lt;/p&gt;

&lt;p&gt;Should we change the code or change the docs?&lt;/p&gt;</comment>
                            <comment id="13641491" author="ralph.goers@dslextreme.com" created="Thu, 25 Apr 2013 06:31:56 +0000"  >&lt;p&gt;That is a good question. &lt;/p&gt;

&lt;p&gt;1. Obviously the warning isn&apos;t noisy enough. &lt;br/&gt;
2. The concern I have on changing the code is that you would need to add a root logger that either a) does nothing, which seems odd or b) writes to the console, which may confuse users even more since they won&apos;t know why that is happening.&lt;/p&gt;

&lt;p&gt;I guess I&apos;m inclined to lean towards creating a root appender that writes to the console (essentially what is happening now) and then including the user&apos;s configuration, while emitting a warning and making sure the documentation is clear on this.  At the same time it would be good to know what Log4j 1.x and Logback do in this case.&lt;/p&gt;

&lt;p&gt;Ralph&lt;/p&gt;</comment>
                            <comment id="13646579" author="remkop@yahoo.com" created="Wed, 1 May 2013 13:42:15 +0000"  >&lt;p&gt;From the dev mailing list:&lt;br/&gt;
..., then to summarize my understanding for &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-219&quot; title=&quot;Named logger without root logger ends up with empty Appenders map - does not log anything&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-219&quot;&gt;&lt;del&gt;LOG4J2-219&lt;/del&gt;&lt;/a&gt; the solution would be to:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;internally create a root logger if one isn&apos;t explicitly configured (like in beta5)&lt;/li&gt;
	&lt;li&gt;this default root logger would have level ERROR  (like in beta5)&lt;/li&gt;
	&lt;li&gt;this default root logger would not have any appenders configured  (different from beta5)&lt;/li&gt;
	&lt;li&gt;named loggers in the config are picked up correctly and not ignored  (different from beta5)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13649062" author="remkop@yahoo.com" created="Sat, 4 May 2013 10:38:57 +0000"  >&lt;p&gt;I ended up creating a root appender that writes to the console (like in beta5) as Ralph suggested.&lt;br/&gt;
The only code change was to pick up and no longer ignore the named loggers in the config.&lt;/p&gt;

&lt;p&gt;Added JUnit test that demonstrates the issue and passes after the change.&lt;/p&gt;

&lt;p&gt;Doc changes were also fairly minor: in the configuration I emphasized that a root logger must exist,&lt;br/&gt;
and in the side menu I added more links to subsections in the configuration page, including a link to the Configuring Loggers section.&lt;/p&gt;</comment>
                            <comment id="13649063" author="remkop@yahoo.com" created="Sat, 4 May 2013 10:39:38 +0000"  >&lt;p&gt;Fixed in revision 1479072.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>324653</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 29 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1k0f3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>324998</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>