<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:31:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-217] PluginManager does not close streams if exceptions occur during plugin init</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-217</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;If an exception occurs during plugin initialization, &lt;br/&gt;
the currently open Log4j2Plugins.dat file is not closed, because&lt;br/&gt;
the call to inputstream.close is not in a finally block.&lt;/p&gt;

&lt;p&gt;o.a.l.l.c.c.p.PluginManager#decode(ClassLoader) line 234&lt;/p&gt;

&lt;p&gt;This may cause the issue reported by Fabian in the log4j-user mailing list:&lt;/p&gt;

&lt;p&gt;From: Fabien Sanglard &amp;lt;fsanglard &amp;lt;at&amp;gt; timeplay.com&amp;gt;&lt;br/&gt;
Subject: Issue with Tomcat auto-redeploy on Windows.&lt;br/&gt;
Newsgroups: gmane.comp.jakarta.log4j.user&lt;br/&gt;
Date: 2013-04-17 20:28:37 GMT (4 days, 13 hours and 8 minutes ago)&lt;/p&gt;

&lt;p&gt;It seems there is an issue with log4j 2 not closing the core JAR handle on Windows.&lt;br/&gt;
It prevents Tomcat from auto redeploying an app.&lt;/p&gt;

&lt;p&gt;Upon updating an hypothetical DiscoveryService.war in the &apos;webapps&apos; folder, the redeploy will fail:&lt;/p&gt;

&lt;p&gt;SEVERE: &lt;span class=&quot;error&quot;&gt;&amp;#91;C:\Program Files\apache-tomcat-7.0.39\webapps\DiscoveryService\WEB-INF\lib&amp;#93;&lt;/span&gt; could &lt;br/&gt;
not be completely deleted. The presence of the remaining files may cause problems&lt;/p&gt;

&lt;p&gt;Upon inspection it looks like:&lt;br/&gt;
C:\Program Files\apache-tomcat-7.0.39\webapps\DiscoveryService\WEB-INF\lib\log4j-core-2.0-beta4.jar&lt;/p&gt;

&lt;p&gt;Cannot be deleted :/ ! Is there anything special to do so log4j 2 close the JAR handle ?&lt;/p&gt;

&lt;p&gt;Fab&lt;/p&gt;</description>
                <environment></environment>
        <key id="12643900">LOG4J2-217</key>
            <summary>PluginManager does not close streams if exceptions occur during plugin init</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rpopma">Remko Popma</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 Apr 2013 09:41:55 +0000</created>
                <updated>Fri, 26 Apr 2013 16:44:59 +0000</updated>
                            <resolved>Fri, 26 Apr 2013 16:43:50 +0000</resolved>
                                    <version>2.0-beta4</version>
                                    <fixVersion>2.0-beta6</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13637984" author="remkop@yahoo.com" created="Mon, 22 Apr 2013 13:08:42 +0000"  >&lt;p&gt;Attached file &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-217&quot; title=&quot;PluginManager does not close streams if exceptions occur during plugin init&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-217&quot;&gt;&lt;del&gt;LOG4J2-217&lt;/del&gt;&lt;/a&gt;-close-finally.patch fixes this issue by putting in/outputstream.close() calls in finally blocks.&lt;/p&gt;</comment>
                            <comment id="13643011" author="remkop@yahoo.com" created="Fri, 26 Apr 2013 16:43:50 +0000"  >&lt;p&gt;Fixed in revision 1476286. &lt;/p&gt;</comment>
                            <comment id="13643015" author="remkop@yahoo.com" created="Fri, 26 Apr 2013 16:44:59 +0000"  >&lt;p&gt;Verified that all existing JUnit tests still work. Closing this issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12579831" name="LOG4J2-217-close-finally.patch" size="2954" author="rpopma" created="Mon, 22 Apr 2013 13:08:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>324267</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 30 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1jy1r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>324612</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>