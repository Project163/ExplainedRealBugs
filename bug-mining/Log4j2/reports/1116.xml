<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:39:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-1936] ClassNotFoundException when making all loggers asynchronous under OSGi environment</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-1936</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;Can&apos;t find AsyncLoggerContextSelector when making all Log4j loggers asynchronous on an OSGi environment.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.ClassNotFoundException: org.apache.logging.log4j.core.async.AsyncLoggerContextSelector cannot be found by org.apache.logging.log4j.api_2.8.2
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:432)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:345)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:337)
    at org.eclipse.osgi.internal.loader.ModuleClassLoader.loadClass(ModuleClassLoader.java:160)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    at org.apache.logging.log4j.util.LoaderUtil.loadClass(LoaderUtil.java:141)
    at org.apache.logging.log4j.util.LoaderUtil.newInstanceOf(LoaderUtil.java:180)
    at org.apache.logging.log4j.util.LoaderUtil.newCheckedInstanceOf(LoaderUtil.java:201)
    at org.apache.logging.log4j.util.LoaderUtil.newCheckedInstanceOfProperty(LoaderUtil.java:226)
    at org.apache.logging.log4j.core.impl.Log4jContextFactory.createContextSelector(Log4jContextFactory.java:97)
    at org.apache.logging.log4j.core.impl.Log4jContextFactory.&amp;lt;init&amp;gt;(Log4jContextFactory.java:58)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
    at java.lang.Class.newInstance(Class.java:442)
    at org.apache.logging.log4j.LogManager.&amp;lt;clinit&amp;gt;(LogManager.java:94)
    at teste.Activator.start(Activator.java:26)
    at org.eclipse.osgi.internal.framework.BundleContextImpl$3.run(BundleContextImpl.java:771)
    at org.eclipse.osgi.internal.framework.BundleContextImpl$3.run(BundleContextImpl.java:1)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.internal.framework.BundleContextImpl.startActivator(BundleContextImpl.java:764)
    at org.eclipse.osgi.internal.framework.BundleContextImpl.start(BundleContextImpl.java:721)
    at org.eclipse.osgi.internal.framework.EquinoxBundle.startWorker0(EquinoxBundle.java:936)
    at org.eclipse.osgi.internal.framework.EquinoxBundle$EquinoxModule.startWorker(EquinoxBundle.java:319)
    at org.eclipse.osgi.container.Module.doStart(Module.java:571)
    at org.eclipse.osgi.container.Module.start(Module.java:439)
    at org.eclipse.osgi.container.ModuleContainer$ContainerStartLevel.incStartLevel(ModuleContainer.java:1582)
    at org.eclipse.osgi.container.ModuleContainer$ContainerStartLevel.incStartLevel(ModuleContainer.java:1562)
    at org.eclipse.osgi.container.ModuleContainer$ContainerStartLevel.doContainerStartLevel(ModuleContainer.java:1533)
    at org.eclipse.osgi.container.ModuleContainer$ContainerStartLevel.dispatchEvent(ModuleContainer.java:1476)
    at org.eclipse.osgi.container.ModuleContainer$ContainerStartLevel.dispatchEvent(ModuleContainer.java:1)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:340)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Windows 10&lt;br/&gt;
Eclipse 4.4&lt;br/&gt;
JDK 1.8.0_102&lt;/p&gt;</environment>
        <key id="13079193">LOG4J2-1936</key>
            <summary>ClassNotFoundException when making all loggers asynchronous under OSGi environment</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hbelmiro">Helber Belmiro</reporter>
                        <labels>
                            <label>bug</label>
                    </labels>
                <created>Mon, 12 Jun 2017 11:59:25 +0000</created>
                <updated>Tue, 5 Sep 2017 19:16:52 +0000</updated>
                            <resolved>Tue, 5 Sep 2017 18:55:02 +0000</resolved>
                                    <version>2.8.2</version>
                                    <fixVersion>2.9.1</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16046654" author="jvz" created="Mon, 12 Jun 2017 14:59:58 +0000"  >&lt;p&gt;Do you get a similar error when using the normal context selector? The stack trace sounds like it wouldn&apos;t work, async or not.&lt;/p&gt;</comment>
                            <comment id="16046716" author="hbelmiro" created="Mon, 12 Jun 2017 15:56:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jvz&quot; class=&quot;user-hover&quot; rel=&quot;jvz&quot;&gt;jvz&lt;/a&gt; The error occurs only in async mode.&lt;/p&gt;</comment>
                            <comment id="16070572" author="hbelmiro" created="Fri, 30 Jun 2017 18:50:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jvz&quot; class=&quot;user-hover&quot; rel=&quot;jvz&quot;&gt;jvz&lt;/a&gt; I&apos;ve found the solution. It&apos;s necessary to change the org.apache.logging.log4j.api bundle to import the org.apache.logging.log4j.core.async package in it&apos;s MANIFEST.MF.&lt;/p&gt;

&lt;p&gt;Import-Package: org.apache.logging.log4j,org.apache.logging.log4j.mess&lt;br/&gt;
 age,org.apache.logging.log4j.simple,org.apache.logging.log4j.spi,org.&lt;br/&gt;
 apache.logging.log4j.status,org.apache.logging.log4j.util,org.osgi.fr&lt;br/&gt;
 amework;version=&quot;[1.6,2)&quot;,org.osgi.framework.wiring;version=&quot;[1.0,2)&quot;&lt;br/&gt;
 ,sun.reflect;resolution:=optional,org.apache.logging.log4j.core.osgi;&lt;br/&gt;
 resolution:=optional,org.apache.logging.log4j.core.util;resolution:=o&lt;br/&gt;
 ptional,&lt;font color=&quot;red&quot;&gt;org.apache.logging.log4j.core.async;resolution:=optional&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;It&apos;s also necessary to set the system property &quot;org.osgi.framework.system.packages.extra&quot; to &quot;sun.misc&quot;, because without it the com.lmax.disruptor bundle can&apos;t find the sun.misc package.&lt;/p&gt;</comment>
                            <comment id="16070595" author="jvz" created="Fri, 30 Jun 2017 19:11:29 +0000"  >&lt;p&gt;Thanks for figuring this out! Would you be able to provide a patch to the pom.xml for log4j-api?&lt;/p&gt;</comment>
                            <comment id="16153000" author="hbelmiro" created="Tue, 5 Sep 2017 00:51:52 +0000"  >&lt;p&gt;Proposed patch.&lt;/p&gt;</comment>
                            <comment id="16154134" author="jira-bot" created="Tue, 5 Sep 2017 18:54:28 +0000"  >&lt;p&gt;Commit d9cadbe9b4c381544f526494ed4ae64d593a8342 in logging-log4j2&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hbelmiro&quot; class=&quot;user-hover&quot; rel=&quot;hbelmiro&quot;&gt;hbelmiro&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=d9cadbe&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=d9cadbe&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1936&quot; title=&quot;ClassNotFoundException when making all loggers asynchronous under OSGi environment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1936&quot;&gt;&lt;del&gt;LOG4J2-1936&lt;/del&gt;&lt;/a&gt; ClassNotFoundException when making all loggers&lt;br/&gt;
asynchronous under OSGi environment.&lt;/p&gt;</comment>
                            <comment id="16154135" author="garydgregory" created="Tue, 5 Sep 2017 18:55:03 +0000"  >&lt;p&gt;In Git master. Please verify and close if it works in your set up. Thank you!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12885289" name="patch.diff" size="553" author="hbelmiro" created="Tue, 5 Sep 2017 00:51:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 11 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3g5xz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>