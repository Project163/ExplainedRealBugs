<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:34:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-1099] AbstractStringLayout implements Serializable, but is not Serializable</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-1099</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;&lt;tt&gt;org.apache.logging.log4j.core.layout.AbstractLayout&lt;/tt&gt; line 34 :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-comment&quot;&gt;// TODO: Charset is not serializable. Implement read/writeObject() ?
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Charset charset;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The developer has recognised that this class claims to be serializable, but is not actually serializable.&lt;/p&gt;

&lt;p&gt;This actually has wide impact due to the fact that the Logger is holding onto the Layout via the &lt;tt&gt;org.apache.logging.log4j.core.Logger.PrivateConfig#config&lt;/tt&gt; (XML in my case). Many projects, including Spring, do not use static Loggers and prefer getClass type approaches off of their abstract classes, i.e.:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Log logger = LogFactory.getLog(getClass());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 
&lt;p&gt;This actually can lead to use of spring session beans, which are serialized with the session, trying to serialize the logger also and failing due to this bug.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12857596">LOG4J2-1099</key>
            <summary>AbstractStringLayout implements Serializable, but is not Serializable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mattsicker">Matt Sicker</assignee>
                                    <reporter username="louisburton">Louis Burton</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Aug 2015 17:29:10 +0000</created>
                <updated>Mon, 12 Oct 2015 17:59:26 +0000</updated>
                            <resolved>Sun, 11 Oct 2015 23:21:46 +0000</resolved>
                                    <version>2.3</version>
                                                    <component>Layouts</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14705439" author="garydgregory" created="Thu, 20 Aug 2015 18:02:34 +0000"  >&lt;p&gt;Louis,&lt;/p&gt;

&lt;p&gt;Thank you for your report. The TODO is just something I have not gone around to implementing, obviously.&lt;/p&gt;

&lt;p&gt;I welcome patches! &lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                            <comment id="14705490" author="louisburton" created="Thu, 20 Aug 2015 18:23:06 +0000"  >&lt;p&gt;Thanks for responding Gary,&lt;/p&gt;

&lt;p&gt;We&apos;ll look to create our own Layout to workaround this issue, if we are able to create a patch to the existing class we will do.&lt;/p&gt;</comment>
                            <comment id="14952429" author="jvz" created="Sun, 11 Oct 2015 20:35:37 +0000"  >&lt;p&gt;Looks rather simple to do as the charset can be serialized via its canonical name. I&apos;m taking a look at this.&lt;/p&gt;</comment>
                            <comment id="14952458" author="jvz" created="Sun, 11 Oct 2015 22:03:42 +0000"  >&lt;p&gt;I pushed an update that addresses this problem in the latest master.&lt;/p&gt;</comment>
                            <comment id="14952474" author="garydgregory" created="Sun, 11 Oct 2015 22:41:36 +0000"  >&lt;p&gt;But what happens if that Charset is not present in the JRE that de-serializes the object?&lt;/p&gt;</comment>
                            <comment id="14952475" author="garydgregory" created="Sun, 11 Oct 2015 22:41:45 +0000"  >&lt;p&gt;Weclome back!&lt;/p&gt;</comment>
                            <comment id="14952476" author="garydgregory" created="Sun, 11 Oct 2015 22:41:46 +0000"  >&lt;p&gt;Weclome back!&lt;/p&gt;</comment>
                            <comment id="14952486" author="jvz" created="Sun, 11 Oct 2015 23:16:52 +0000"  >&lt;p&gt;Charset.forName() will throw an UnsupportedCharsetException (which is an IllegalArgumentException), thus preventing deserialization during readObject(). I don&apos;t think defaulting to UTF-8 or some other fallback would be wise, and I can&apos;t think of any other decent error handling in this situation.&lt;/p&gt;</comment>
                            <comment id="14952487" author="jvz" created="Sun, 11 Oct 2015 23:21:46 +0000"  >&lt;p&gt;Fix is in master, ready for addition to 2.4.1 RC.&lt;/p&gt;</comment>
                            <comment id="14952491" author="jvz" created="Sun, 11 Oct 2015 23:30:22 +0000"  >&lt;p&gt;I&apos;m noticing that this bug is actually more related to &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-801&quot; title=&quot;org.apache.logging.log4j.core.Logger should be serializable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-801&quot;&gt;&lt;del&gt;LOG4J2-801&lt;/del&gt;&lt;/a&gt;, so this won&apos;t really be fixed in time for 2.4.1.&lt;/p&gt;</comment>
                            <comment id="14953487" author="garydgregory" created="Mon, 12 Oct 2015 17:59:26 +0000"  >&lt;p&gt;Agreed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12736582">LOG4J2-801</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                                                <inwardlinks description="is required by">
                                        <issuelink>
            <issuekey id="12736582">LOG4J2-801</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 6 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2j62n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>