<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:40:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-2316] NullPointerException while calling Configurator.setLevel()</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-2316</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;Hi I want to report an intermittent issue in my webapplication wherein log4j throws an NPE.&lt;/p&gt;

&lt;p&gt;Here is the stack trace:&lt;/p&gt;

&lt;p&gt;java.lang.NullPointerException&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.logging.log4j.core.config.LoggerConfig.getLevel(LoggerConfig.java:268)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.logging.log4j.core.Logger$PrivateConfig.&amp;lt;init&amp;gt;(Logger.java:384)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.logging.log4j.core.Logger.updateConfiguration(Logger.java:365)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.logging.log4j.core.LoggerContext.updateLoggers(LoggerContext.java:652)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.logging.log4j.core.LoggerContext.updateLoggers(LoggerContext.java:641)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.logging.log4j.core.config.Configurator.setLevel(Configurator.java:296)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at com.netbackup.logging.util.DebugLoggerFactory.getLogger(DebugLoggerFactory.java:346)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at com.netbackup.logging.util.DebugLoggerFactory.getLogger(DebugLoggerFactory.java:359)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at com.netbackup.logging.util.WebServiceLoggerFactory.getLogger(WebServiceLoggerFactory.java:14)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at com.netbackup.common.logging.LoggerFactory.getLogger(LoggerFactory.java:34)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Log4j code where the NPE occurs: (LoggerConfig.java)&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160; /**&lt;br/&gt;
 &#160;&#160;&#160;&#160; * Returns the logging Level.&lt;br/&gt;
 &#160;&#160;&#160;&#160; *&lt;br/&gt;
 &#160;&#160;&#160;&#160; * @return the logging Level.&lt;br/&gt;
 &#160;&#160;&#160;&#160; */&lt;br/&gt;
 &#160;&#160;&#160; public Level getLevel()&lt;/p&gt;

{ &#160;&#160;&#160;&#160;&#160;&#160;&#160; return level == null ? parent.getLevel() : level; &#160;&#160;&#160; }
&lt;p&gt; //This is the line where the NPE gets thrown&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Inference is parent(LoggerConfig) itself was null. When can this situation arise?&lt;/p&gt;</description>
                <environment>&lt;p&gt;webapplication running in tomcat 8.5&lt;/p&gt;</environment>
        <key id="13152353">LOG4J2-2316</key>
            <summary>NullPointerException while calling Configurator.setLevel()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Ranjit.Dsouza">Ranjit Dsouza</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Apr 2018 17:29:09 +0000</created>
                <updated>Sun, 22 Jul 2018 16:19:11 +0000</updated>
                            <resolved>Sun, 22 Jul 2018 08:07:46 +0000</resolved>
                                    <version>2.11.0</version>
                                                    <component>Core</component>
                    <component>Web/Servlet</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16438973" author="garydgregory" created="Mon, 16 Apr 2018 04:23:29 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Ranjit.Dsouza&quot; class=&quot;user-hover&quot; rel=&quot;Ranjit.Dsouza&quot;&gt;Ranjit.Dsouza&lt;/a&gt; and thank you for your report.&lt;/p&gt;

&lt;p&gt;Is your application multi-threaded? Can you give us more details or create a test to reproduce the problem?&lt;/p&gt;

&lt;p&gt;Also, can you try with our current version 2.11.0?&lt;/p&gt;

&lt;p&gt;Thank you,&lt;br/&gt;
Gary&lt;/p&gt;</comment>
                            <comment id="16439048" author="ranjit.dsouza" created="Mon, 16 Apr 2018 06:52:04 +0000"  >&lt;p&gt;Thanks Gary for taking a look at this!&lt;/p&gt;

&lt;p&gt;On the face of it, this seems to be a timing issue (This is our assumption), wherin Configurator.setLevel() is getting called even before log4j was able to initialize properly.&lt;br/&gt;
This issue manifests ONLY during webserver(Tomcat) startup. &lt;br/&gt;
During web application initialization, all ServletContextListeners are notified of context initialization, after which all filters get initialized, by calling their respective init() methods.&lt;br/&gt;
The filer init() method is seen in the stack trace shown below, which kinda kick starts this issue. &lt;/p&gt;

&lt;p&gt;03-Apr-2018 13:03:39.854 SEVERE &lt;span class=&quot;error&quot;&gt;&amp;#91;localhost-startStop-1&amp;#93;&lt;/span&gt; org.apache.catalina.core.StandardContext.filterStart Exception starting filter. &lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.logging.log4j.core.config.LoggerConfig.getLevel(LoggerConfig.java:268)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.logging.log4j.core.Logger$PrivateConfig.&amp;lt;init&amp;gt;(Logger.java:384)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.logging.log4j.core.Logger.updateConfiguration(Logger.java:365)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.logging.log4j.core.LoggerContext.updateLoggers(LoggerContext.java:652)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.logging.log4j.core.LoggerContext.updateLoggers(LoggerContext.java:641)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.logging.log4j.core.config.Configurator.setLevel(Configurator.java:296)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at com.netbackup.logging.util.DebugLoggerFactory.getLogger(DebugLoggerFactory.java:346)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at com.netbackup.logging.util.DebugLoggerFactory.getLogger(DebugLoggerFactory.java:359)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at com.netbackup.logging.util.WebServiceLoggerFactory.getLogger(WebServiceLoggerFactory.java:14)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at com.netbackup.common.logging.LoggerFactory.getLogger(LoggerFactory.java:34)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at com.netbackup.config.FeatureToggleFilter.init(FeatureToggleFilter.java:46)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:277)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.catalina.core.ApplicationFilterConfig.&amp;lt;init&amp;gt;(ApplicationFilterConfig.java:112)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4599)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5241)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1419)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1409)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at java.util.concurrent.FutureTask.run(FutureTask.java:266)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; at java.lang.Thread.run(Thread.java:748)&lt;/p&gt;


&lt;p&gt;This is the same stack I showed earlier, more complete now. See the line &quot;FeatureToggleFilter.init&quot;&lt;br/&gt;
Also, the issue is highly non-reproducible, happens only &apos;once in a blue moon&apos; kindof situation. Therefore it is not easy to simulate this failure&lt;/p&gt;</comment>
                            <comment id="16439501" author="garydgregory" created="Mon, 16 Apr 2018 14:21:43 +0000"  >&lt;p&gt;Interesting data point: &lt;/p&gt;

&lt;p&gt;If you run, the following by itself:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Test
 &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testSetLevel() {
 Configurator.setLevel(&lt;span class=&quot;code-quote&quot;&gt;&quot;test&quot;&lt;/span&gt;, Level.DEBUG);
 }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You will &lt;em&gt;not&lt;/em&gt; get an NPE and Log4j initializes itself as you can tell from the console message:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ERROR StatusLogger No Log4j 2 configuration file found. Using default configuration (logging only errors to the console), or user programmatically provided configurations. Set system property &apos;log4j2.debug&apos; to show Log4j 2 internal initialization logging. See https://logging.apache.org/log4j/2.x/manual/configuration.html for instructions on how to configure Log4j 2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In order for you to get this NPE, there must be some competition between Log4j initializing itself and the call to &lt;tt&gt;setLevel(String, Level)&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16443445" author="garydgregory" created="Thu, 19 Apr 2018 01:39:39 +0000"  >&lt;p&gt;If we want to move this forward, lets start with:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Try the current version 2.11.0 and post your stack trace if it fails.&lt;/li&gt;
	&lt;li&gt;If the above fails, try 2.11.1-SNAPSHOT&#160;and post your stack trace if it fails.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Let&apos;s proceed from there, with a stack trace based on&#160;2.11.1-SNAPSHOT it will be easier to look at the current code.&lt;/p&gt;

&lt;p&gt;If you feel like checkout out the sources, you could try to add &lt;tt&gt;volatile&lt;/tt&gt; to &lt;tt&gt;org.apache.logging.log4j.core.config.LoggerConfig.parent&lt;/tt&gt; and see if that helps with any possible multi-threaded issue.&lt;/p&gt;</comment>
                            <comment id="16443645" author="ranjit.dsouza" created="Thu, 19 Apr 2018 07:26:00 +0000"  >&lt;p&gt;Yes, let&apos;s take this forward&lt;br/&gt;
I will use version 2.11.0 and see if there is an improvement. I will get back in case I see the issue recur again.&lt;/p&gt;

&lt;p&gt;Can you guide me on version 2.11?&lt;br/&gt;
   should we wait for the next upcoming stable version after 2.11, or is the current version 2.11 good enough? &lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Ranjit D&apos;Souza&lt;/p&gt;
</comment>
                            <comment id="16444110" author="garydgregory" created="Thu, 19 Apr 2018 14:23:05 +0000"  >&lt;p&gt;We consider version 2.11.0&#160;to be stable. The next release will likely be 2.11.1 but we do not have a schedule for this event.&lt;/p&gt;</comment>
                            <comment id="16453741" author="ranjit.dsouza" created="Thu, 26 Apr 2018 09:23:00 +0000"  >&lt;p&gt;copy pasting the code from where the exception originated: This is the function that creates a logger for a given class and returns that logger.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; DebugLogger getLogger(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; className) {
 &#160; LogManager.getLogger(className);
&#160;&#160; &lt;span class=&quot;code-comment&quot;&gt;//read a custom config file and check &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; there is an entry &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; className, &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; so &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; the corresponding level, &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;&#160;&#160; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
&lt;/span&gt; &#160; Level levelToSet = configure(className);
&#160; Configurator.setLevel(className, levelToSet);&lt;span class=&quot;code-comment&quot;&gt;//line where exception is thrown when levelToSet is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
&lt;/span&gt;&#160; &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; logger;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Question:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Do we need to call Configurator.setLevel() ? Any harm, considering that it is not part of the public API?&#160; This is especially since we are explicitly setting the root logger level earlier, so it should inherit the log level from root logger config,&lt;/li&gt;
	&lt;li&gt;Seems like this function is resilient in handling null as input, except in few cases, during which the NPE is thrown.&lt;/li&gt;
	&lt;li&gt;Any alternative in case we shouldn&apos;t use this function call?&lt;/li&gt;
	&lt;li&gt;Would it be advisable to put a null check before calling Configurator.setLevel ? This means only set the logger level if it is defined in our config, else, the logger hopefully would just inherit the level from the root logger.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Let me know your thoughts on the above points&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="16548856" author="ranjit.dsouza" created="Thu, 19 Jul 2018 06:33:44 +0000"  >&lt;p&gt;Hi Gary,&lt;/p&gt;

&lt;p&gt;The exception has been observed on log4j version 2.11.0 as well. I am pasting the stack trace here, but it is pretty much the same as the earlier one. I can assure you that log4j was initialized at least 20 seconds before this happened. So far, this error has only been seen on Linux&lt;/p&gt;

&lt;p&gt;11-Jul-2018 19:05:08.447 SEVERE &lt;span class=&quot;error&quot;&gt;&amp;#91;localhost-startStop-1&amp;#93;&lt;/span&gt; org.apache.catalina.core.StandardContext.loadOnStartup Servlet &lt;span class=&quot;error&quot;&gt;&amp;#91;dispatcher&amp;#93;&lt;/span&gt; in web application &lt;span class=&quot;error&quot;&gt;&amp;#91;/netbackup&amp;#93;&lt;/span&gt; threw load() exception&lt;br/&gt;
&#160;java.lang.NullPointerException&lt;br/&gt;
&#160;&#160; &#160;at org.apache.logging.log4j.core.config.LoggerConfig.getLevel(LoggerConfig.java:268)&lt;br/&gt;
&#160;&#160; &#160;at org.apache.logging.log4j.core.Logger$PrivateConfig.&amp;lt;init&amp;gt;(Logger.java:384)&lt;br/&gt;
&#160;&#160; &#160;at org.apache.logging.log4j.core.Logger.updateConfiguration(Logger.java:365)&lt;br/&gt;
&#160;&#160; &#160;at org.apache.logging.log4j.core.LoggerContext.updateLoggers(LoggerContext.java:654)&lt;br/&gt;
&#160;&#160; &#160;at org.apache.logging.log4j.core.LoggerContext.updateLoggers(LoggerContext.java:643)&lt;br/&gt;
&#160;&#160; &#160;at org.apache.logging.log4j.core.config.Configurator.setLevel(Configurator.java:296)&lt;br/&gt;
&#160;&#160; &#160;at com.netbackup.logging.util.DebugLoggerFactory.getLogger(DebugLoggerFactory.java:346)&lt;br/&gt;
&#160;&#160; &#160;at com.netbackup.logging.util.DebugLoggerFactory.getLogger(DebugLoggerFactory.java:359)&lt;br/&gt;
&#160;&#160; &#160;at com.netbackup.logging.util.WebServiceLoggerFactory.getLogger(WebServiceLoggerFactory.java:14)&lt;br/&gt;
&#160;&#160; &#160;at com.netbackup.common.logging.LoggerFactory.getLogger(LoggerFactory.java:34)&lt;br/&gt;
&#160;&#160; &#160;at com.netbackup.config.servers.controller.DefaultMSDPHostAccessValidator.&amp;lt;clinit&amp;gt;(DefaultMSDPHostAccessValidator.java:18)&lt;br/&gt;
&#160;&#160; &#160;at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)&lt;br/&gt;
&#160;&#160; &#160;at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)&lt;br/&gt;
&#160;&#160; &#160;at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)&lt;br/&gt;
&#160;&#160; &#160;at java.lang.reflect.Constructor.newInstance(Constructor.java:423)&lt;br/&gt;
&#160;&#160; &#160;at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:142)&lt;br/&gt;
&#160;&#160; &#160;at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:89)&lt;br/&gt;
&#160;&#160; &#160;at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1108)&lt;br/&gt;
&#160;&#160; &#160;at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1060)&lt;br/&gt;
&#160;&#160; &#160;at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:513)&lt;br/&gt;
&#160;&#160; &#160;at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483)&lt;br/&gt;
&#160;&#160; &#160;at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)&lt;br/&gt;
&#160;&#160; &#160;at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)&lt;br/&gt;
&#160;&#160; &#160;at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)&lt;br/&gt;
&#160;&#160; &#160;at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)&lt;br/&gt;
&#160;&#160; &#160;at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:759)&lt;br/&gt;
&#160;&#160; &#160;at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:866)&lt;br/&gt;
&#160;&#160; &#160;at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:542)&lt;br/&gt;
&#160;&#160; &#160;at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:668)&lt;br/&gt;
&#160;&#160; &#160;at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:540)&lt;br/&gt;
&#160;&#160; &#160;at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:494)&lt;br/&gt;
&#160;&#160; &#160;at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:136)&lt;br/&gt;
&#160;&#160; &#160;at javax.servlet.GenericServlet.init(GenericServlet.java:158)&lt;br/&gt;
&#160;&#160; &#160;at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1144)&lt;br/&gt;
&#160;&#160; &#160;at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:986)&lt;br/&gt;
&#160;&#160; &#160;at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4939)&lt;br/&gt;
&#160;&#160; &#160;at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5249)&lt;br/&gt;
&#160;&#160; &#160;at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)&lt;br/&gt;
&#160;&#160; &#160;at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1419)&lt;br/&gt;
&#160;&#160; &#160;at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1409)&lt;br/&gt;
&#160;&#160; &#160;at java.util.concurrent.FutureTask.run(FutureTask.java:266)&lt;br/&gt;
&#160;&#160; &#160;at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)&lt;br/&gt;
&#160;&#160; &#160;at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)&lt;br/&gt;
&#160;&#160; &#160;at java.lang.Thread.run(Thread.java:748)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Could this be a log4j issue?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16551742" author="garydgregory" created="Sat, 21 Jul 2018 15:42:36 +0000"  >&lt;p&gt;Question to the community:&lt;/p&gt;

&lt;p&gt;In the&#160;method &lt;tt&gt;org.apache.logging.log4j.core.config.LoggerConfig.logParent(LogEvent, LoggerConfigPredicate)&lt;/tt&gt; we check for a null parent which seems to mean that we allow for a null &lt;tt&gt;LoggerConfig&lt;/tt&gt;&#160;parent.&lt;/p&gt;

&lt;p&gt;This leads me to ask: What is the difference between a null &lt;tt&gt;LoggerConfig&lt;/tt&gt;&#160;and a &lt;tt&gt;LoggerConfig&lt;/tt&gt;&#160;for the root logger (&lt;tt&gt;&quot;&quot;&lt;/tt&gt;)?&lt;/p&gt;

&lt;p&gt;As an experiment I changed LoggerConfig setParent() in git &lt;tt&gt;release-2.x&lt;/tt&gt; to:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setParent(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; LoggerConfig parent) {
 &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.parent = Objects.requireNonNull(parent, &lt;span class=&quot;code-quote&quot;&gt;&quot;parent&quot;&lt;/span&gt;);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;A full build with &lt;tt&gt;mvn clean install&lt;/tt&gt; succeeds but that means that we don&apos;t have the kind of test that duplicates the above problem, probably.&lt;/p&gt;

&lt;p&gt;We could alternatively add a null check in &lt;tt&gt;org.apache.logging.log4j.core.config.LoggerConfig.getLevel()&lt;/tt&gt; but that would only pass the buck on the NPE to call sites of &lt;tt&gt;getLevel()&lt;/tt&gt; and not help us here.&lt;/p&gt;

&lt;p&gt;My inclination is to update LoggerConfig to not allow setParent to accept null and see what happens for &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Ranjit.Dsouza&quot; class=&quot;user-hover&quot; rel=&quot;Ranjit.Dsouza&quot;&gt;Ranjit.Dsouza&lt;/a&gt;; we should see a new NPE from where the null parent comes from...&lt;/p&gt;

&lt;p&gt;Final question then: Should LoggerConfig allow a null parent?&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="16551784" author="ralph.goers@dslextreme.com" created="Sat, 21 Jul 2018 17:25:49 +0000"  >&lt;p&gt;The parent is null when the logger config is the root logger. As such, it is completely normal for it to be null. Of course, when the parent is null the name will be &quot;&quot;.  If you don&apos;t allow a null value what would the root logger reference?&lt;/p&gt;</comment>
                            <comment id="16551934" author="jira-bot" created="Sun, 22 Jul 2018 08:06:29 +0000"  >&lt;p&gt;Commit 419944877c5161b05d6eb294cdb185e9df036fb3 in logging-log4j2&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ralph.goers%40dslextreme.com&quot; class=&quot;user-hover&quot; rel=&quot;ralph.goers@dslextreme.com&quot;&gt;ralph.goers@dslextreme.com&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=4199448&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=4199448&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2316&quot; title=&quot;NullPointerException while calling Configurator.setLevel()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2316&quot;&gt;&lt;del&gt;LOG4J2-2316&lt;/del&gt;&lt;/a&gt; - If root LoggerConfig does not have a Level return ERROR&lt;/p&gt;</comment>
                            <comment id="16551935" author="jira-bot" created="Sun, 22 Jul 2018 08:06:37 +0000"  >&lt;p&gt;Commit ab548ce56dfab2c8db9ecc97365e8f734949509a in logging-log4j2&apos;s branch refs/heads/release-2.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ralph.goers%40dslextreme.com&quot; class=&quot;user-hover&quot; rel=&quot;ralph.goers@dslextreme.com&quot;&gt;ralph.goers@dslextreme.com&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=ab548ce&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=ab548ce&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2316&quot; title=&quot;NullPointerException while calling Configurator.setLevel()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2316&quot;&gt;&lt;del&gt;LOG4J2-2316&lt;/del&gt;&lt;/a&gt; - If root LoggerConfig does not have a Level return ERROR&lt;/p&gt;</comment>
                            <comment id="16551936" author="ralph.goers@dslextreme.com" created="Sun, 22 Jul 2018 08:07:46 +0000"  >&lt;p&gt;If the root LoggerConfig does not have a level it will now return ERROR. Please verify and close.&lt;/p&gt;</comment>
                            <comment id="16552049" author="garydgregory" created="Sun, 22 Jul 2018 15:14:08 +0000"  >&lt;p&gt;Don&apos;t we use (or want to) a constant to note the default level someplace?&lt;/p&gt;</comment>
                            <comment id="16552061" author="ralph.goers@dslextreme.com" created="Sun, 22 Jul 2018 16:19:11 +0000"  >&lt;p&gt;I don&apos;t see the point. Error is clearly documented as the default, it is never going to change and we only deal with it in a couple of places.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 17 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3sjb3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>