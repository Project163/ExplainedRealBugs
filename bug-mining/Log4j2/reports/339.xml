<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:33:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-742] XInclude not working with relative path</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-742</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;When using XInclude in a log4j2 configuration, it uses the CWD of the running application instead of the location of the log4j configuration as base.&lt;br/&gt;
I.e. running the application from within eclipse, the CWD of eclipse is used as base for finding the document to be included.&lt;/p&gt;

&lt;p&gt;IMO, the problem is in XmlConfiguration:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;            &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; InputStream configStream = configSource.getInputStream();
            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
                buffer = toByteArray(configStream);
            } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
                configStream.close();
            }
            &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; InputSource source = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; InputSource(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayInputStream(buffer));
            &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Document document = newDocumentBuilder().parse(source);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;There is no way the DOMParser can know, where the base should be, because it is just parsing an InputStream and has no file location. &lt;/p&gt;

&lt;p&gt;The fix would be to add source.setSystemId(configSource.getLocation()) before parsing the document.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12729475">LOG4J2-742</key>
            <summary>XInclude not working with relative path</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="pchollet">Pascal Chollet</reporter>
                        <labels>
                    </labels>
                <created>Thu, 24 Jul 2014 15:06:12 +0000</created>
                <updated>Fri, 25 Jul 2014 13:01:57 +0000</updated>
                            <resolved>Fri, 25 Jul 2014 13:01:56 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.0.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14073307" author="ralph.goers@dslextreme.com" created="Thu, 24 Jul 2014 15:45:21 +0000"  >&lt;p&gt;Would you be able to provide a unit test and a patch for this?&lt;/p&gt;</comment>
                            <comment id="14073325" author="garydgregory" created="Thu, 24 Jul 2014 16:03:35 +0000"  >&lt;p&gt;FWIW: When I tried the suggested code change, the tests passed but there might be unforeseen side effects, and without a failing unit test there is no proof that this fixes anything.&lt;/p&gt;</comment>
                            <comment id="14074200" author="pchollet" created="Fri, 25 Jul 2014 08:28:50 +0000"  >&lt;p&gt;The tests pass, because there is no test for XInclude yet! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; There exist test resource files already (with wrong href), but they are not being used by any test.&lt;/p&gt;

&lt;p&gt;I did attach patch files for the test and the fix.&lt;/p&gt;</comment>
                            <comment id="14074363" author="garydgregory" created="Fri, 25 Jul 2014 13:01:57 +0000"  >&lt;p&gt;Thank you for the patches! Patches applies with only one minor Javadoc change to the test class.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;commit -m &quot;[LOG4J2-742] XInclude not working with relative path.&quot; C:/vcs/svn/apache/log4j2/trunk-alt/log4j-core/src/test/resources/log4j-xinclude.xml C:/vcs/svn/apache/log4j2/trunk-alt/log4j-core/src/test/java/org/apache/logging/log4j/core/config/XIncludeTest.java C:/vcs/svn/apache/log4j2/trunk-alt/src/changes/changes.xml C:/vcs/svn/apache/log4j2/trunk-alt/log4j-core/src/main/java/org/apache/logging/log4j/core/config/xml/XmlConfiguration.java
    Sending        C:/vcs/svn/apache/log4j2/trunk-alt/log4j-core/src/main/java/org/apache/logging/log4j/core/config/xml/XmlConfiguration.java
    Adding         C:/vcs/svn/apache/log4j2/trunk-alt/log4j-core/src/test/java/org/apache/logging/log4j/core/config/XIncludeTest.java
    Sending        C:/vcs/svn/apache/log4j2/trunk-alt/log4j-core/src/test/resources/log4j-xinclude.xml
    Sending        C:/vcs/svn/apache/log4j2/trunk-alt/src/changes/changes.xml
    Transmitting file data ...
    Committed revision 1613427.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12657806" name="xinclude-test.patch" size="6435" author="pchollet" created="Fri, 25 Jul 2014 09:16:55 +0000"/>
                            <attachment id="12657801" name="xinclude.patch" size="829" author="pchollet" created="Fri, 25 Jul 2014 08:31:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>407549</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 17 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1y4p3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>407563</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>