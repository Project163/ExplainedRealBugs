<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:30:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-104] LogManager initialization failed when running from Jdeveloper.</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-104</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;This issue was incorrectly opened in bugzilla as &lt;a href=&quot;https://issues.apache.org/bugzilla/show_bug.cgi?id=54053&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://issues.apache.org/bugzilla/show_bug.cgi?id=54053&lt;/a&gt; by Evgeny.&lt;/p&gt;


&lt;p&gt;Steps to Reproduce:&lt;br/&gt;
//config file presents or not - does not meter.&lt;/p&gt;

&lt;p&gt;Run / Debug simple application:&lt;/p&gt;

&lt;p&gt;import org.apache.logging.log4j.LogManager;&lt;br/&gt;
import org.apache.logging.log4j.Logger;&lt;/p&gt;

&lt;p&gt;public class test_log {&lt;br/&gt;
    public test_log() &lt;/p&gt;
{
        super();
    }

&lt;p&gt;    static Logger logger = LogManager.getLogger(test_log.class.getName());&lt;/p&gt;

&lt;p&gt;    public static void main(String[] args) &lt;/p&gt;
{
        test_log test_log = new test_log();
      
        logger.entry();

        logger.debug(&quot;test&quot;);

        logger.error(&quot;test Err&quot;);

        logger.exit();
    

    }
&lt;p&gt;...&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;Actual Results:&lt;br/&gt;
Failed with error&lt;br/&gt;
java.lang.ExceptionInInitializerError&lt;br/&gt;
	at view.test_log.&amp;lt;clinit&amp;gt;(test_log.java:13)&lt;br/&gt;
Caused by: java.lang.ClassCastException: oracle.xml.parser.v2.DTD cannot be cast to org.w3c.dom.Element&lt;br/&gt;
	at java.util.XMLUtils.load(XMLUtils.java:61)&lt;br/&gt;
	at java.util.Properties.loadFromXML(Properties.java:852)&lt;br/&gt;
	at org.apache.logging.log4j.LogManager.&amp;lt;clinit&amp;gt;(LogManager.java:77)&lt;/p&gt;

&lt;p&gt;Additional Info:&lt;br/&gt;
When xmlparserv2.jar is deleted - application run fine.&lt;br/&gt;
But - it have to be presents - when deleted, JDeveloper failed to start.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Environment:&lt;br/&gt;
JDeveloper 11.1.1.6.0 &lt;br/&gt;
logj42  (apache-log4j-2.0-beta2-bin)&lt;br/&gt;
Windows 7 64bits&lt;/p&gt;</environment>
        <key id="12613518">LOG4J2-104</key>
            <summary>LogManager initialization failed when running from Jdeveloper.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rgoers">Ralph Goers</assignee>
                                    <reporter username="rgoers">Ralph Goers</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Oct 2012 16:49:20 +0000</created>
                <updated>Sun, 28 Apr 2013 06:07:36 +0000</updated>
                            <resolved>Sat, 27 Oct 2012 18:20:58 +0000</resolved>
                                    <version>2.0-beta2</version>
                                    <fixVersion>2.0-beta3</fixVersion>
                                    <component>Configurators</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13484277" author="ralph.goers@dslextreme.com" created="Thu, 25 Oct 2012 16:57:39 +0000"  >&lt;p&gt;The reporter of this problem also has asked on Oracle&apos;s forum for a solution - &lt;a href=&quot;https://forums.oracle.com/forums/thread.jspa?messageID=10657822&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://forums.oracle.com/forums/thread.jspa?messageID=10657822&lt;/a&gt;. In addition, I see at least one other similar report - &lt;a href=&quot;https://forums.oracle.com/forums/thread.jspa?messageID=9341563&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://forums.oracle.com/forums/thread.jspa?messageID=9341563&lt;/a&gt;. A bug was also opened against the JDK - &lt;a href=&quot;http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7099658&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7099658&lt;/a&gt; - which was closed as being a bug in XMLUtils.  It appears Oracle is simply ignoring this bug.&lt;/p&gt;</comment>
                            <comment id="13484805" author="grandinj" created="Fri, 26 Oct 2012 09:10:04 +0000"  >&lt;p&gt;Ralph, from my reading of the JDK bug report, Oracle has fixed the bug in various versions of Java.&lt;br/&gt;
They appear to have fixed it in 6u29 and backported the fix to various places.&lt;/p&gt;

&lt;p&gt;Unfortunately I don&apos;t see a easy work-around, short of cut and pasting a fair chunk of code from java.util.Properties and java.util.XMLUtils into LogManager.&lt;/p&gt;</comment>
                            <comment id="13484898" author="lemlem" created="Fri, 26 Oct 2012 13:07:30 +0000"  >&lt;p&gt;Ralph, Noel &lt;br/&gt;
Thanks for your quick replay.&lt;/p&gt;

&lt;p&gt;Is it some way to skip LogManager configuration loading? If i&apos;ll configure it in the code instead of config file - file it allow me to bypass this issue?&lt;/p&gt;

&lt;p&gt;By the way - if I&apos;ll use stable (not beta) release of log4j (1.x) - will it also use same way to load configuration?&lt;br/&gt;
We just need to decide about logging framework for our new project, and this issue is look like blocker for us.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="13484929" author="ralph.goers@dslextreme.com" created="Fri, 26 Oct 2012 13:57:02 +0000"  >&lt;p&gt;I am looking at addressing this in at least two ways.  &lt;/p&gt;

&lt;p&gt;1. I&apos;m going to switch from using loadFromXML to load and convert the properties file from XML to a &quot;normal&quot; properties format. &lt;br/&gt;
2. I&apos;m planning on creating a combined jar where the api and core are merged together. There will still be some binding but it will use a (hopefully) simpler method.&lt;/p&gt;

&lt;p&gt;Log4j 1.x does not use this mechanism because there is no separation between the API and implementation.&lt;/p&gt;</comment>
                            <comment id="13485372" author="ralph.goers@dslextreme.com" created="Sat, 27 Oct 2012 07:07:51 +0000"  >&lt;p&gt;I attempted to verify the problem by running the above program in JDeveloper on both my Mac and Windows 7, but neither experienced the problem. I was running JDeveloper 11.1.2.3.0 on Windows 7 64 bit with JDK 1.6.0_24. This is going to make it difficult for me to verify that the change I&apos;m implementing actually fixes the problem.&lt;/p&gt;</comment>
                            <comment id="13485385" author="lemlem" created="Sat, 27 Oct 2012 08:29:37 +0000"  >&lt;p&gt;Ralph,&lt;br/&gt;
Do you have  xmlparserv2.jar in your classpath? It is the root of my issue.&lt;/p&gt;</comment>
                            <comment id="13485454" author="ralph.goers@dslextreme.com" created="Sat, 27 Oct 2012 15:38:34 +0000"  >&lt;p&gt;I did nothing special. My understanding was that simply trying to test under JDeveloper caused the problem. Your report says removing xmlparserv2 causes JDeveloper not to start.  Is there something else I need to do to cause the problem?&lt;/p&gt;

&lt;p&gt;FYI - I created a Maven project with the code above as the only application. I then imported the application, which was a bit frustrating as it didn&apos;t seem to accomplish much. I then had to manually add the log4j 2 jars into the classpath along with target/classes and had to make a couple of other changes so that it knew how things were laid out in the project. I then ran the application from JDeveloper and it ran fine.&lt;/p&gt;</comment>
                            <comment id="13485478" author="ralph.goers@dslextreme.com" created="Sat, 27 Oct 2012 18:20:58 +0000"  >&lt;p&gt;I was able to manually add the xmlparserv2 jar to the classpath and duplicate the error. I&apos;m still not sure why this jar is required but I have changed LogManager to use a regular properties file and verified it works even with Oracle&apos;s jar present.&lt;/p&gt;

&lt;p&gt;Please verify the fix and close this.&lt;/p&gt;</comment>
                            <comment id="13485568" author="lemlem" created="Sun, 28 Oct 2012 04:53:35 +0000"  >&lt;p&gt;Ralph,&lt;br/&gt;
Sorry, but I am new in Jira and Bugzilla. Where can I obtain the fixed version (beta-3) - I want verify it on my environment? On the log4j download page it is only beta2 available.&lt;/p&gt;

&lt;p&gt;Thank you!&lt;/p&gt;</comment>
                            <comment id="13485573" author="ralph.goers@dslextreme.com" created="Sun, 28 Oct 2012 05:25:21 +0000"  >&lt;p&gt;beta-3 has not been released yet so right now you can only test against 2.0-beta3-SNAPSHOT. You have to check it out from subversion and build it yourself or I could deploy the artifacts to the Apache snapshot repository but you would need to add that to your list of repositories.&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;http://logging.apache.org/log4j/2.x/source-repository.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://logging.apache.org/log4j/2.x/source-repository.html&lt;/a&gt; for information on how to check out the source. To build just run mvn clean install in the root directory of the checked out project.&lt;/p&gt;</comment>
                            <comment id="13485581" author="lemlem" created="Sun, 28 Oct 2012 06:47:23 +0000"  >&lt;p&gt;If its possible - i&apos;ll prefer you to build it and i&apos;ll download the artifacts. &lt;br/&gt;
Thank you&lt;/p&gt;

&lt;p&gt;By the way - do you have approximation for the final release of log4j2? &lt;/p&gt;</comment>
                            <comment id="13487574" author="lemlem" created="Wed, 31 Oct 2012 06:16:31 +0000"  >&lt;p&gt;Ralph, &lt;br/&gt;
I think I did not explain myself right - I just switched to java from dot net, so I still not so comfortable with java environment. This is the reason I prefer to download ready build - i want to verify the fix but avoid invalid builds and other issues as well as my svn invalid work errors.&lt;/p&gt;

&lt;p&gt;Thank you!&lt;/p&gt;</comment>
                            <comment id="13491315" author="lemlem" created="Tue, 6 Nov 2012 08:38:32 +0000"  >&lt;p&gt;Ralph, hello&lt;br/&gt;
I several times tried to check out via svn the sources to compile them.&lt;br/&gt;
I was not able to find snapshot  2.0-beta3-SNAPSHOT.&lt;/p&gt;

&lt;p&gt;When are you planing to release next version of log4j2? I cannot use it now in my code, it is blocking me now... I also cannot verify the fix.&lt;/p&gt;

&lt;p&gt;Thank you!&lt;/p&gt;</comment>
                            <comment id="13491550" author="ralph.goers@dslextreme.com" created="Tue, 6 Nov 2012 15:47:16 +0000"  >&lt;p&gt;I had planned to start the release yesterday but my day job got in the way.  I just deployed the snapshots so you can give it a try.&lt;/p&gt;</comment>
                            <comment id="13503484" author="lemlem" created="Sun, 25 Nov 2012 11:01:47 +0000"  >&lt;p&gt;Hi Ralph&lt;br/&gt;
I was out of office, so I was able to test the fix only now.&lt;br/&gt;
It is working as expected.&lt;/p&gt;

&lt;p&gt;Thank you!&lt;/p&gt;

&lt;p&gt;Need I change the status of this issue?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>251063</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b3wv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62746</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>