<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:43:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-3557] mule-3.3.1 with log4j-1.2-api-2.18.0 creates infinite recursion</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-3557</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;mule&apos;s class ApplicationAwareRepositorySelector has getLoggerRepository() method, and within that it eventually tries to create a RootLogger.&lt;/p&gt;

&lt;p&gt;In old log4j-1.2.16.jar&#160; this just created the RootLogger/Logger/Category hierarchy without any attempt to obtain a LoggerRepository. I disassembled the bytecode to check this.&lt;/p&gt;

&lt;p&gt;in the&#160; bridge, the c&apos;tor of Category calls LogManager.getLoggerRepository() and that method ends up recursively calling mule&apos;s ApplicationAwareRepositorySelector.getLoggerRepository()&lt;/p&gt;

&lt;p&gt;```&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.log4j.LogManager.getLoggerRepository(LogManager.java:171)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.log4j.Category.&amp;lt;init&amp;gt;(Category.java:177)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.log4j.Category.&amp;lt;init&amp;gt;(Category.java:192)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.log4j.Logger.&amp;lt;init&amp;gt;(Logger.java:57)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.log4j.spi.RootLogger.&amp;lt;init&amp;gt;(RootLogger.java:39)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.mule.module.launcher.log4j.ApplicationAwareRepositorySelector.getLoggerRepository(ApplicationAwareRepositorySelector.java:62)&lt;br/&gt;
```&lt;/p&gt;

&lt;p&gt;At this point I cannot yet tell, if this is a horrible wrong-doing of mule, or just one of a number of horrible incompatibilities between the bridge and the old real log4j.&lt;/p&gt;

&lt;p&gt;I&apos;m aware that mule-3.3.1 is helplessly out of lifetime, but that&apos;s what I thought the bridge was meant for: to help upgrading SW that &quot;cannot do log4j2.&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13472505">LOG4J2-3557</key>
            <summary>mule-3.3.1 with log4j-1.2-api-2.18.0 creates infinite recursion</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pkarwasz">Piotr Karwasz</assignee>
                                    <reporter username="avl42">Andreas Leitgeb</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Jul 2022 16:19:56 +0000</created>
                <updated>Fri, 9 Sep 2022 19:19:24 +0000</updated>
                            <resolved>Wed, 7 Sep 2022 18:22:39 +0000</resolved>
                                    <version>2.18.0</version>
                                    <fixVersion>2.19.0</fixVersion>
                                    <component>Log4j 1.2 bridge</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17572246" author="pkarwasz" created="Thu, 28 Jul 2022 06:07:57 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=avl42&quot; class=&quot;user-hover&quot; rel=&quot;avl42&quot;&gt;avl42&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;I agree with you that &lt;tt&gt;Category&lt;/tt&gt; should not use the static method &lt;tt&gt;LogManager.getLoggerRepository()&lt;/tt&gt; to find the logger repository that instantiated it. I corrected the error in the newest &lt;tt&gt;2.18.1-SNAPSHOT&lt;/tt&gt; you can find at &lt;a href=&quot;https://repository.apache.org/snapshots&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/snapshots&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;However this will &lt;b&gt;not&lt;/b&gt; fix the logic behind the &lt;a href=&quot;https://github.com/mulesoft/mule/blob/37cd988e92a0364ecf49aea09720db6023319d17/modules/launcher/src/main/java/org/mule/module/launcher/log4j/ApplicationAwareRepositorySelector.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ApplicationAwareRepositorySelector&lt;/a&gt;: in the &lt;tt&gt;log4j-1.2-api&lt;/tt&gt; bridge the &lt;tt&gt;Hierarchy&lt;/tt&gt; object is stateless and it delegates to the Log4j2 &lt;tt&gt;ContextSelector&lt;/tt&gt; the task of choosing the correct context. Therefore the task of configuring a different configuration per Mule application will fail.&lt;/p&gt;

&lt;p&gt;You should rather disable the &lt;tt&gt;ApplicationAwareRepositorySelector&lt;/tt&gt; (setting the &quot;mule.simpleLog&quot; system property according to the &lt;a href=&quot;https://github.com/mulesoft/mule/blob/37cd988e92a0364ecf49aea09720db6023319d17/modules/launcher/src/main/java/org/mule/module/launcher/MuleContainer.java#L81&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;source code&lt;/a&gt;) and use one of the configurations described in &lt;a href=&quot;https://logging.apache.org/log4j/2.x/manual/logsep.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Log4j Logging Separation&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17597897" author="JIRAUSER293141" created="Tue, 30 Aug 2022 14:13:15 +0000"  >&lt;p&gt;Thanks for caring, Piotr!&lt;/p&gt;

&lt;p&gt;In the meantime, I&apos;ve given up on ancient mule-3.3.1, anyway.&lt;/p&gt;

&lt;p&gt;I &apos;m sure this change will help someone in future, though, maybe even&lt;br/&gt;
with some entirely different combination of software than mine.&#160; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17601466" author="jira-bot" created="Wed, 7 Sep 2022 18:25:16 +0000"  >&lt;p&gt;Commit 1a395bdc74ca8ced5bdc87c8656b090626c3f471 in logging-log4j2&apos;s branch refs/heads/release-2.x from Piotr P. Karwasz&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=1a395bdc74&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=1a395bdc74&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3557&quot; title=&quot;mule-3.3.1 with log4j-1.2-api-2.18.0 creates infinite recursion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3557&quot;&gt;&lt;del&gt;LOG4J2-3557&lt;/del&gt;&lt;/a&gt; Missing release note&lt;/p&gt;</comment>
                            <comment id="17602519" author="jira-bot" created="Fri, 9 Sep 2022 19:19:24 +0000"  >&lt;p&gt;Commit 1a395bdc74ca8ced5bdc87c8656b090626c3f471 in logging-log4j2&apos;s branch refs/heads/dependabot/maven/io.fabric8-kubernetes-client-6.1.1 from Piotr P. Karwasz&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=1a395bdc74&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=1a395bdc74&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3557&quot; title=&quot;mule-3.3.1 with log4j-1.2-api-2.18.0 creates infinite recursion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3557&quot;&gt;&lt;del&gt;LOG4J2-3557&lt;/del&gt;&lt;/a&gt; Missing release note&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 9 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z170rc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>