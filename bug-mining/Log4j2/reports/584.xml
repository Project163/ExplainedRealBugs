<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:34:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-1149] PatternLayout predefined date pattern with time zone always renders default date format</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-1149</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;The date pattern&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;%d{ISO8601}{UTC}&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;is rendered as the default date format (yyyy-MM-dd HH:mm:ss,SSS) instead.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12902323">LOG4J2-1149</key>
            <summary>PatternLayout predefined date pattern with time zone always renders default date format</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rpopma">Remko Popma</assignee>
                                    <reporter username="mtnbiker987">Matt Barron</reporter>
                        <labels>
                    </labels>
                <created>Sun, 4 Oct 2015 17:24:29 +0000</created>
                <updated>Thu, 20 Sep 2018 23:49:43 +0000</updated>
                            <resolved>Sun, 4 Oct 2015 21:31:11 +0000</resolved>
                                    <version>2.4</version>
                                    <fixVersion>2.4.1</fixVersion>
                                    <component>Pattern Converters</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14942730" author="remkop@yahoo.com" created="Sun, 4 Oct 2015 17:37:03 +0000"  >&lt;p&gt;The combination of a pattern name (like DEFAULT, ISO8601, COMPACT, ABSOLUTE) with a time zone is not correctly handled. The &lt;tt&gt;FixedDateFormat.createIfSupported&lt;/tt&gt; method returns null to signal it cannot handle the time zone, but FastDateFormat cannot handle the pattern name, so DatePatternConverter falls back to the default date format.&lt;/p&gt;

&lt;p&gt;The fix is to look up the pattern name and pass on the pattern format to FastDateFormat when &lt;tt&gt;FixedDateFormat.createIfSupported&lt;/tt&gt; returned null.&lt;/p&gt;</comment>
                            <comment id="14942819" author="remkop@yahoo.com" created="Sun, 4 Oct 2015 21:31:11 +0000"  >&lt;p&gt;Fixed in master in commit 48f91374.&lt;/p&gt;

&lt;p&gt;Please verify and close.&lt;/p&gt;</comment>
                            <comment id="14943737" author="mtnbiker987" created="Mon, 5 Oct 2015 17:52:40 +0000"  >&lt;p&gt;Successfully ran test application using latest 2.4.1-SNAPSHOT...the output from PatternLayout using a predefined pattern + timezone is now displayed as expected. &lt;/p&gt;</comment>
                            <comment id="15081776" author="marcottedan" created="Mon, 4 Jan 2016 20:47:39 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=remkop%40yahoo.com&quot; class=&quot;user-hover&quot; rel=&quot;remkop@yahoo.com&quot;&gt;remkop@yahoo.com&lt;/a&gt;, happy 2016! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Sorry for popping out in this issue but I&apos;m not 100% sure it&apos;s fixed (or maybe I&apos;m wrong!)&lt;/p&gt;

&lt;p&gt;I&apos;m using 2.4.1 with this pattern: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;%d{ISO8601_BASIC}{UTC}&quot;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; but I still enter this section of the FixedDateFormat&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; FixedDateFormat createIfSupported(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;... options) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (options == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || options.length == 0 || options[0] == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FixedDateFormat(FixedFormat.DEFAULT);
        }
        &lt;span class=&quot;code-comment&quot;&gt;// THIS STATEMENT IS EVALUATED TO TRUE --&amp;gt; WITH NO TIMEZONE SUPPORT
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (options.length &amp;gt; 1) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;; &lt;span class=&quot;code-comment&quot;&gt;// time zone not supported
&lt;/span&gt;        }
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FixedFormat type = FixedFormat.lookup(options[0]);
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; type == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ? &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; : &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FixedDateFormat(type);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I should have something like:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;20160104T204256,048Z&lt;br/&gt;
But instead I have&lt;/li&gt;
	&lt;li&gt;20160104T204256,048&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;There&apos;s no &quot;Z&quot; in my format, meaning that I&apos;m using local time (based on ISO-8601 &lt;a href=&quot;https://en.wikipedia.org/wiki/ISO_8601#Times&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://en.wikipedia.org/wiki/ISO_8601#Times&lt;/a&gt;). Do you any idea what&apos;s wrong?&lt;/p&gt;</comment>
                            <comment id="15081912" author="remkop@yahoo.com" created="Mon, 4 Jan 2016 22:17:08 +0000"  >&lt;p&gt;&lt;tt&gt;FixedDateFormat#createIfSupported&lt;/tt&gt; returns &lt;tt&gt;null&lt;/tt&gt;, that is correct. If you continue following the flow of execution you will see that the caller (the &lt;tt&gt;DatePatternConverter&lt;/tt&gt; constructor) will then call &lt;tt&gt;DatePatternConverter#createFormatter&lt;/tt&gt;, where the presence of a time zone is handled with this code&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;// LOG4J2-1149: patternOption may be a name (&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; a time zone was specified)
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FixedDateFormat.FixedFormat fixedFormat = FixedDateFormat.FixedFormat.lookup(patternOption);
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; pattern = fixedFormat == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ? patternOption : fixedFormat.getPattern();

&lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the option list contains a TZ option, then set it.
&lt;/span&gt;TimeZone tz = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (options.length &amp;gt; 1 &amp;amp;&amp;amp; options[1] != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
    tz = TimeZone.getTimeZone(options[1]);
}

&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FastDateFormat tempFormat = FastDateFormat.getInstance(pattern, tz);
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PatternFormatter(tempFormat);
} &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; IllegalArgumentException e) {
    LOGGER.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Could not instantiate FastDateFormat with pattern &quot;&lt;/span&gt; + pattern, e);

    &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; to the DEFAULT format
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; createFormatter(FixedDateFormat.create(FixedFormat.DEFAULT));
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This should correctly handle time zones.&lt;/p&gt;

&lt;p&gt;It sounds like you expect the string result of rendering the date in the specified format to end in the character &quot;Z&quot;. I&apos;m not sure if it should. If you look at the %d section of the documentation for &lt;a href=&quot;http://logging.apache.org/log4j/2.x/manual/layouts.html#PatternLayout&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PatternLayout&lt;/a&gt;, you will see that the examples do not end in &quot;Z&quot;.&lt;/p&gt;</comment>
                            <comment id="15083256" author="marcottedan" created="Tue, 5 Jan 2016 15:48:03 +0000"  >&lt;p&gt;Thanks for the quick answer!&lt;/p&gt;

&lt;p&gt;If you look at Wikipedia&apos;s explanation of the ISO-8601, section &quot;UTC&quot; : &lt;a href=&quot;https://en.wikipedia.org/wiki/ISO_8601#Times&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://en.wikipedia.org/wiki/ISO_8601#Times&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;If the time is in UTC, add a Z directly after the time without a space. Z is the zone designator for the zero UTC offset. &quot;09:30 UTC&quot; is therefore represented as &quot;09:30Z&quot; or &quot;0930Z&quot;. &quot;14:45:15 UTC&quot; would be &quot;14:45:15Z&quot; or &quot;144515Z&quot;.&lt;br/&gt;
UTC time is also known as &apos;Zulu&apos; time, since &apos;Zulu&apos; is the NATO phonetic alphabet word for &apos;Z&apos;.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That&apos;s why I assumed that using something like &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;%d{ISO8601_BASIC}{UTC}&quot;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; would give me something like: &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;20160104T204256,048Z&lt;br/&gt;
or something like&lt;/li&gt;
	&lt;li&gt;20160104T204256,048+00&lt;br/&gt;
or even&lt;/li&gt;
	&lt;li&gt;20160104T204256,048+00:00&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I think it&apos;s a bug to leave it blank because it means that the date is &quot;local&quot; while we manually added the &lt;/p&gt;
{UTC}
&lt;p&gt; timezone flag.&lt;/p&gt;</comment>
                            <comment id="15084492" author="remkop@yahoo.com" created="Wed, 6 Jan 2016 01:18:37 +0000"  >&lt;p&gt;Would it make sense to raise a separate Jira for this to enhance the PatternLayout %date conversion pattern to also render a time zone designator? (We can discuss there if this should be for the ISO-8601 format only or apply in general.)&lt;/p&gt;</comment>
                            <comment id="15085631" author="marcottedan" created="Wed, 6 Jan 2016 15:07:57 +0000"  >&lt;p&gt;Doing that right away! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15085674" author="marcottedan" created="Wed, 6 Jan 2016 15:26:29 +0000"  >&lt;p&gt;Here it is!&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1246&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/LOG4J2-1246&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310060">
                    <name>Container</name>
                                                                <inwardlinks description="Is contained by">
                                        <issuelink>
            <issuekey id="12901328">LOG4J2-1140</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2mkpb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>