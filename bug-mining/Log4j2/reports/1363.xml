<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:41:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-2767] NPE in RoutingAppender without pattern</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-2767</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;When I create a RoutingAppender that only has one route and no pattern in the Routes element, I get a NPE as soon as an entry is written into the appender:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.logging.log4j.core.appender.AppenderLoggingException: An exception occurred processing Appender Routing	at org.apache.logging.log4j.core.appender.DefaultErrorHandler.error(DefaultErrorHandler.java:93)
	at org.apache.logging.log4j.core.config.AppenderControl.handleAppenderError(AppenderControl.java:165)
	at org.apache.logging.log4j.core.config.AppenderControl.tryCallAppender(AppenderControl.java:158)
	at org.apache.logging.log4j.core.config.AppenderControl.callAppender0(AppenderControl.java:129)
	at org.apache.logging.log4j.core.config.AppenderControl.callAppenderPreventRecursion(AppenderControl.java:120)
	at org.apache.logging.log4j.core.config.AppenderControl.callAppender(AppenderControl.java:84)
	at org.apache.logging.log4j.core.config.LoggerConfig.callAppenders(LoggerConfig.java:508)
	at org.apache.logging.log4j.core.config.LoggerConfig.processLogEvent(LoggerConfig.java:468)
	at org.apache.logging.log4j.core.config.LoggerConfig.log(LoggerConfig.java:451)
	at org.apache.logging.log4j.core.config.LoggerConfig.log(LoggerConfig.java:426)
	at org.apache.logging.log4j.core.config.AwaitCompletionReliabilityStrategy.log(AwaitCompletionReliabilityStrategy.java:82)
	at org.apache.logging.log4j.core.Logger.log(Logger.java:158)
	at org.apache.logging.log4j.spi.AbstractLogger.tryLogMessage(AbstractLogger.java:2135)
	at org.apache.logging.log4j.spi.AbstractLogger.logMessageTrackRecursion(AbstractLogger.java:2089)
	at org.apache.logging.log4j.spi.AbstractLogger.logMessageSafely(AbstractLogger.java:2072)
	at org.apache.logging.log4j.spi.AbstractLogger.logIfEnabled(AbstractLogger.java:1773)
	at org.apache.logging.log4j.EventLogger.logEvent(EventLogger.java:47)
	at org.apache.logging.log4j.core.appender.routing.RoutingAppenderNoPatternTest.routingTest(RoutingAppenderNoPatternTest.java:59)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.apache.logging.log4j.junit.LoggerContextRule$1.evaluate(LoggerContextRule.java:123)
	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:48)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:230)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:58)
Caused by: java.lang.NullPointerException
	at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:936)
	at org.apache.logging.log4j.core.appender.routing.RoutingAppender.getAppender(RoutingAppender.java:300)
	at org.apache.logging.log4j.core.appender.routing.RoutingAppender.getControl(RoutingAppender.java:263)
	at org.apache.logging.log4j.core.appender.routing.RoutingAppender.append(RoutingAppender.java:242)
	at org.apache.logging.log4j.core.config.AppenderControl.tryCallAppender(AppenderControl.java:156)
	... 41 more&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This happens for the following configuration:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;Routing name=&lt;span class=&quot;code-quote&quot;&gt;&quot;Routing&quot;&lt;/span&gt; ignoreExceptions=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt;&amp;gt;
  &amp;lt;Routes&amp;gt;
    &amp;lt;Route&amp;gt;
      &amp;lt;RollingFile name=&lt;span class=&quot;code-quote&quot;&gt;&quot;Routing-${sd:type}&quot;&lt;/span&gt; fileName=&lt;span class=&quot;code-quote&quot;&gt;&quot;${filename}&quot;&lt;/span&gt;
                   filePattern=&lt;span class=&quot;code-quote&quot;&gt;&quot;target/routing1/test1-${sd:type}.%i.log.gz&quot;&lt;/span&gt;
                   &amp;gt;
        &amp;lt;PatternLayout&amp;gt;
          &amp;lt;Pattern&amp;gt;%d %p %C{1.} [%t] %m%n&amp;lt;/Pattern&amp;gt;
        &amp;lt;/PatternLayout&amp;gt;
        &amp;lt;SizeBasedTriggeringPolicy size=&lt;span class=&quot;code-quote&quot;&gt;&quot;500&quot;&lt;/span&gt; /&amp;gt;
      &amp;lt;/RollingFile&amp;gt;
    &amp;lt;/Route&amp;gt;
  &amp;lt;/Routes&amp;gt;
&amp;lt;/Routing&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13281398">LOG4J2-2767</key>
            <summary>NPE in RoutingAppender without pattern</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rgoers">Ralph Goers</assignee>
                                    <reporter username="christophk">Christoph Kaser</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Jan 2020 14:39:54 +0000</created>
                <updated>Mon, 3 Feb 2020 08:10:30 +0000</updated>
                            <resolved>Mon, 3 Feb 2020 01:07:38 +0000</resolved>
                                                    <fixVersion>2.13.1</fixVersion>
                                    <component>Appenders</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17024148" author="christophk" created="Mon, 27 Jan 2020 08:18:36 +0000"  >&lt;p&gt;Digging further, it seems this use case is not supported like that. I seem to need to specify a pattern that contains all dependencies (in my case ${sd:type}) even if there is only one (default) route. Still, a better error message would have been nice, along with clearer documentation.&lt;/p&gt;</comment>
                            <comment id="17024331" author="ralph.goers@dslextreme.com" created="Mon, 27 Jan 2020 13:09:12 +0000"  >&lt;p&gt;Yes, it should not throw a NullPointerException.&lt;/p&gt;</comment>
                            <comment id="17028609" author="ralph.goers@dslextreme.com" created="Mon, 3 Feb 2020 01:03:22 +0000"  >&lt;p&gt;Actually, the documentation of the Routes element says &quot;You must specify either the pattern attribute or the Script element, but not both.&quot;.&#160; &#160;The code is checking that both are not specified but is not validating that at least one of them is.&#160;&lt;/p&gt;

&lt;p&gt;Log4j will now log a warning if the pattern or script are not present and will use the default route.&lt;/p&gt;</comment>
                            <comment id="17028610" author="jira-bot" created="Mon, 3 Feb 2020 01:07:09 +0000"  >&lt;p&gt;Commit 1cfe13abf9498c42c20cf26c2fca31d6c1fc8034 in logging-log4j2&apos;s branch refs/heads/release-2.x from Ralph Goers&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=1cfe13a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=1cfe13a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2767&quot; title=&quot;NPE in RoutingAppender without pattern&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2767&quot;&gt;&lt;del&gt;LOG4J2-2767&lt;/del&gt;&lt;/a&gt; - Warn if pattern is missing on Routes element. Use default route&lt;/p&gt;</comment>
                            <comment id="17028611" author="jira-bot" created="Mon, 3 Feb 2020 01:07:14 +0000"  >&lt;p&gt;Commit e140f165b06bf21e14718da5221fe0fa3d9fc82b in logging-log4j2&apos;s branch refs/heads/master from Ralph Goers&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=e140f16&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=e140f16&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2767&quot; title=&quot;NPE in RoutingAppender without pattern&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2767&quot;&gt;&lt;del&gt;LOG4J2-2767&lt;/del&gt;&lt;/a&gt; - Warn if pattern is missing on Routes element. Use default route&lt;/p&gt;</comment>
                            <comment id="17028612" author="ralph.goers@dslextreme.com" created="Mon, 3 Feb 2020 01:07:51 +0000"  >&lt;p&gt;Please verify and close.&lt;/p&gt;</comment>
                            <comment id="17028756" author="christophk" created="Mon, 3 Feb 2020 08:10:30 +0000"  >&lt;p&gt;This fixes my issue. Thank you very much!&lt;br/&gt;
 BTW, I had not seen the documentation on the Routes element. I was looking at the documentation on the website under Appenders.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 41 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0au28:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>