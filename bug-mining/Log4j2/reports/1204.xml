<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:39:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-2318] AsyncQueueFullMessageUtil causes unparsable message output</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-2318</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;AsyncQueueFullMessageUtil.transform modifies message format, dropping message format and parameters, and concatenates text to the formatted output.&lt;/p&gt;


&lt;p&gt;It&apos;s a fairly common workflow to write a message implementation which outputs json or some other structured data (e.g. request logs) which are parsed by another mechanism. This often uses PatternLayout with pattern &quot;%m%n&quot;. The current implementation of AsyncQueueFullMessageUtil concatenates a warning to the formatted message, which can break parsers.&lt;/p&gt;

&lt;p&gt;Proposal: Avoid modifying the message itself in favor of using StatusLogger.warn when messages may be logged out of order.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13152761">LOG4J2-2318</key>
            <summary>AsyncQueueFullMessageUtil causes unparsable message output</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ckozak">Carter Kozak</assignee>
                                    <reporter username="ckozak">Carter Kozak</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Apr 2018 16:06:14 +0000</created>
                <updated>Tue, 24 Apr 2018 13:40:07 +0000</updated>
                            <resolved>Tue, 17 Apr 2018 02:59:44 +0000</resolved>
                                    <version>2.11.0</version>
                                    <fixVersion>3.0.0</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16439711" author="githubbot" created="Mon, 16 Apr 2018 16:56:03 +0000"  >&lt;p&gt;GitHub user cakofony opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/166&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/166&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2318&quot; title=&quot;AsyncQueueFullMessageUtil causes unparsable message output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2318&quot;&gt;&lt;del&gt;LOG4J2-2318&lt;/del&gt;&lt;/a&gt;: AsyncQueueFullMessageUtil logs to StatusLogger&lt;/p&gt;

&lt;p&gt;    We no longer mutate messages when logging them out of order.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/cakofony/logging-log4j2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/cakofony/logging-log4j2&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2318&quot; title=&quot;AsyncQueueFullMessageUtil causes unparsable message output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2318&quot;&gt;&lt;del&gt;LOG4J2-2318&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/166.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/166.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #166&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 518cdc7836f6c916c1cd1e1902257692f0b03f07&lt;br/&gt;
Author: Carter Kozak &amp;lt;ckozak@...&amp;gt;&lt;br/&gt;
Date:   2018-04-16T16:06:39Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2318&quot; title=&quot;AsyncQueueFullMessageUtil causes unparsable message output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2318&quot;&gt;&lt;del&gt;LOG4J2-2318&lt;/del&gt;&lt;/a&gt;: AsyncQueueFullMessageUtil logs to StatusLogger&lt;/p&gt;

&lt;p&gt;    We no longer mutate messages when logging them out of order.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16439713" author="ckozak" created="Mon, 16 Apr 2018 16:57:03 +0000"  >&lt;p&gt;Interested in your thoughts on this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=remkop%40yahoo.com&quot; class=&quot;user-hover&quot; rel=&quot;remkop@yahoo.com&quot;&gt;remkop@yahoo.com&lt;/a&gt; when you have a moment, as you&apos;re the original author:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/166&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/166&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16440291" author="remkop@yahoo.com" created="Tue, 17 Apr 2018 02:40:37 +0000"  >&lt;p&gt;I&apos;m okay with this change. I agree this is better.&lt;/p&gt;</comment>
                            <comment id="16440304" author="jira-bot" created="Tue, 17 Apr 2018 02:58:00 +0000"  >&lt;p&gt;Commit d175b2b2ee7748bff5456a6f339556cbb3a5e275 in logging-log4j2&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ckozak&quot; class=&quot;user-hover&quot; rel=&quot;ckozak&quot;&gt;ckozak&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=d175b2b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=d175b2b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2318&quot; title=&quot;AsyncQueueFullMessageUtil causes unparsable message output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2318&quot;&gt;&lt;del&gt;LOG4J2-2318&lt;/del&gt;&lt;/a&gt;: AsyncQueueFullMessageUtil logs to StatusLogger&lt;/p&gt;

&lt;p&gt;We no longer mutate messages when logging them out of order.&lt;/p&gt;</comment>
                            <comment id="16440306" author="githubbot" created="Tue, 17 Apr 2018 02:58:19 +0000"  >&lt;p&gt;Github user cakofony commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/166&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/166&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    merged&lt;/p&gt;</comment>
                            <comment id="16440307" author="githubbot" created="Tue, 17 Apr 2018 02:58:20 +0000"  >&lt;p&gt;Github user cakofony closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/166&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/166&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16440308" author="ckozak" created="Tue, 17 Apr 2018 02:59:24 +0000"  >&lt;p&gt;Thanks as always &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=remkop%40yahoo.com&quot; class=&quot;user-hover&quot; rel=&quot;remkop@yahoo.com&quot;&gt;remkop@yahoo.com&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="16449278" author="ralph.goers@dslextreme.com" created="Tue, 24 Apr 2018 04:45:02 +0000"  >&lt;p&gt;Is this a bug fix or an enhancement? If it is a bug fix it should also be applied to the release-2.x branch.&lt;/p&gt;</comment>
                            <comment id="16449768" author="ckozak" created="Tue, 24 Apr 2018 12:42:15 +0000"  >&lt;p&gt;Apologies, I wasn&#8217;t aware of the criteria for backports. I&#8217;ll update the release-2.x branch with my recent changes today!&lt;/p&gt;</comment>
                            <comment id="16449862" author="jira-bot" created="Tue, 24 Apr 2018 13:40:07 +0000"  >&lt;p&gt;Commit e228704684b94bbb3d785f4e55753b091eed9548 in logging-log4j2&apos;s branch refs/heads/release-2.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ckozak&quot; class=&quot;user-hover&quot; rel=&quot;ckozak&quot;&gt;ckozak&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=e228704&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=e228704&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2318&quot; title=&quot;AsyncQueueFullMessageUtil causes unparsable message output&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2318&quot;&gt;&lt;del&gt;LOG4J2-2318&lt;/del&gt;&lt;/a&gt;: AsyncQueueFullMessageUtil logs to StatusLogger&lt;/p&gt;

&lt;p&gt;We no longer mutate messages when logging them out of order.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 30 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3sltr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>