<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:30:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-50] Incorrect %C output (FQCN) </title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-50</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;The fully qualified class name must be set correctly to support conversions like %C.  In some cases, %C information is incorrect.  I think this is related to AbstractLogger allowing getFQCN() to be overridden.  Log methods handled by AbstractLogger should have AbstractLogger&apos;s FQCN, not that of the subclass.&lt;/p&gt;

&lt;p&gt;Example:&lt;/p&gt;

&lt;p&gt;slf4jLogger.info(&quot;slf4jLogger test %C.&quot;); // works; SLF4JLogger overrides this method&lt;br/&gt;
slf4jLogger.info(&quot;slf4jLogger test %C.&quot;, t); // fails with &apos;?&apos;; handled by AbstractLogger&lt;br/&gt;
category2.info(&quot;category test %C&quot;); // fails with &apos;o.a.l.Category&apos;&lt;/p&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;p&gt;INFO Log4j2Testing &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; slf4jLogger test %C.&lt;br/&gt;
INFO ? &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; slf4jLogger test %C.&lt;br/&gt;
 java.lang.Throwable&lt;br/&gt;
	at Log4j2Testing.main(Log4j2Testing.java:22)&lt;br/&gt;
INFO o.a.l.Category &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; category test %C&lt;/p&gt;</description>
                <environment></environment>
        <key id="12523371">LOG4J2-50</key>
            <summary>Incorrect %C output (FQCN) </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rgoers">Ralph Goers</assignee>
                                    <reporter username="jvasileff">John Vasileff</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Sep 2011 17:55:18 +0000</created>
                <updated>Mon, 3 Oct 2011 22:07:29 +0000</updated>
                            <resolved>Tue, 27 Sep 2011 06:35:21 +0000</resolved>
                                                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13107363" author="ralph.goers@dslextreme.com" created="Sun, 18 Sep 2011 06:33:56 +0000"  >&lt;p&gt;The category problems for the SLF4J api have been corrected. This probably also corrects the problem with log4j-over-slf4j, which is what I assume you meant by category2.  However, it would be more appropriate to use the log4j12-api component of Log4j 2.0 if Log4j 2.0 is the underlying implementation.&lt;/p&gt;</comment>
                            <comment id="13107579" author="jvasileff" created="Mon, 19 Sep 2011 01:17:48 +0000"  >&lt;p&gt;Actually, in the original report I was using log4j12-api.  It was a puzzle to determine why your test passed while mine failed.  My code looked like:&lt;/p&gt;

&lt;p&gt;import org.apache.log4j.Category;&lt;/p&gt;

&lt;p&gt;private static final org.apache.logging.log4j.Logger log4j2Logger = LogManager.getLogger(Log4j2Testing.class.getName());&lt;br/&gt;
private static final Category category2 = Category.getInstance(Log4j2Testing.class);&lt;/p&gt;

&lt;p&gt;...&lt;/p&gt;

&lt;p&gt;As it turns out, the order in which the loggers were created changed the result.  See &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-51&quot; title=&quot;ClassCastException in Category logger&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-51&quot;&gt;&lt;del&gt;LOG4J2-51&lt;/del&gt;&lt;/a&gt;.  I was able to get correct results by flipping the order of the getLogger/getInstance calls.&lt;/p&gt;

&lt;p&gt;In your patch for the SLF4J API, the problems with slf4jLogger are resolved since SLF4JLogger no longer extends AbstractLogger.  But a problem remains with the getFQCN() logic.&lt;/p&gt;

&lt;p&gt;I have a patch to correct this.  It builds on the patches in &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-51&quot; title=&quot;ClassCastException in Category logger&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-51&quot;&gt;&lt;del&gt;LOG4J2-51&lt;/del&gt;&lt;/a&gt;.  Note: &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-51&quot; title=&quot;ClassCastException in Category logger&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-51&quot;&gt;&lt;del&gt;LOG4J2-51&lt;/del&gt;&lt;/a&gt; temporarily causes your new test case to fail, but the forthcoming patch fixes the root cause.&lt;/p&gt;</comment>
                            <comment id="13107581" author="jvasileff" created="Mon, 19 Sep 2011 01:19:13 +0000"  >&lt;p&gt;Comments for 0004.patch&lt;/p&gt;

&lt;p&gt;cleanup FQCN code&lt;/p&gt;

&lt;p&gt;Make sure all application facing log methods use their own FQCN.  This patch&lt;br/&gt;
resolves a unit test failure for the %C pattern when using the Category logger.&lt;/p&gt;

&lt;p&gt;The AbstractLogger method:&lt;/p&gt;

&lt;p&gt;String getFQCN()&lt;/p&gt;

&lt;p&gt;was removed.  Previously, subclasses were able to override this method which&lt;br/&gt;
caused incorrect location data when AbstractLogger log methods were called&lt;br/&gt;
directly by application code (i.e. not overridden by the subclass).&lt;/p&gt;

&lt;p&gt;Subclasses of AbstractLoggerWrapper that introduce their own log methods should call:&lt;/p&gt;

&lt;p&gt;log(Marker marker, String fqcn, Level level, Message data, Throwable t);&lt;/p&gt;

&lt;p&gt;where fqcn is Subclass.getName();&lt;/p&gt;</comment>
                            <comment id="13115259" author="ralph.goers@dslextreme.com" created="Tue, 27 Sep 2011 06:35:21 +0000"  >&lt;p&gt;Patch applied. Please verify and close.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12495003" name="0004-cleanup-FQCN-code.patch" size="40046" author="jvasileff" created="Mon, 19 Sep 2011 01:19:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>17154</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 9 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0129r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4134</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>