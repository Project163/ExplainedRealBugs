<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:41:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-2940] High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-2940</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;We&apos;re encountering an issue similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2792&quot; title=&quot;Performance issue in log4j 2.12.1 and log4j 2.13.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2792&quot;&gt;&lt;del&gt;LOG4J2-2792&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2880&quot; title=&quot;High CPU consumption using StackWalker&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2880&quot;&gt;&lt;del&gt;LOG4J2-2880&lt;/del&gt;&lt;/a&gt; but it isn&apos;t because of the use of Location, but because of the use of dynamically created loggers that we then refer to via &lt;tt&gt;org.slf4j.LoggerFactory.getLogger(method.getDeclaringClass())&lt;/tt&gt;. This attempts to get the caller class and ends up walking the stack as in the stack trace example below. This is known to be rather problematic (from the performance perspective) and even becomes worse with the time (until the JVM restart, or full GC) - &lt;a href=&quot;https://bugs.openjdk.java.net/browse/JDK-8222942&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.java.net/browse/JDK-8222942&lt;/a&gt; for example.&lt;/p&gt;

&lt;p&gt;However instead of doing it this rather expensive way, it may be possible to use an improved approach similar to what jboss-logging library developers used when working on the following issues:&lt;br/&gt;
&lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1813436&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugzilla.redhat.com/show_bug.cgi?id=1813436&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.redhat.com/browse/LOGMGR-263&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://issues.redhat.com/browse/LOGMGR-263&lt;/a&gt;&lt;br/&gt;
The related commit: &lt;a href=&quot;https://github.com/jboss-logging/jboss-logmanager/commit/fc1fc3b509df9797ff06a423878a5b113f6281f8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jboss-logging/jboss-logmanager/commit/fc1fc3b509df9797ff06a423878a5b113f6281f8&lt;/a&gt;&lt;br/&gt;
Can you check whether something useful may be brought in from that?&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;at java.lang.StackStreamFactory$AbstractStackWalker.fetchStackFrames(java.base@11.0.8/Native Method)
at java.lang.StackStreamFactory$AbstractStackWalker.fetchStackFrames(java.base@11.0.8/StackStreamFactory.java:386)
at java.lang.StackStreamFactory$AbstractStackWalker.getNextBatch(java.base@11.0.8/StackStreamFactory.java:322)
at java.lang.StackStreamFactory$AbstractStackWalker.peekFrame(java.base@11.0.8/StackStreamFactory.java:263)
at java.lang.StackStreamFactory$AbstractStackWalker.hasNext(java.base@11.0.8/StackStreamFactory.java:351)
at java.lang.StackStreamFactory$StackFrameTraverser.tryAdvance(java.base@11.0.8/StackStreamFactory.java:593)
at java.util.stream.ReferencePipeline.forEachWithCancel(java.base@11.0.8/ReferencePipeline.java:127)
at java.util.stream.AbstractPipeline.copyIntoWithCancel(java.base@11.0.8/AbstractPipeline.java:502)
at java.util.stream.AbstractPipeline.copyInto(java.base@11.0.8/AbstractPipeline.java:488)
at java.util.stream.AbstractPipeline.wrapAndCopyInto(java.base@11.0.8/AbstractPipeline.java:474)
at java.util.stream.FindOps$FindOp.evaluateSequential(java.base@11.0.8/FindOps.java:150)
at java.util.stream.AbstractPipeline.evaluate(java.base@11.0.8/AbstractPipeline.java:234)
at java.util.stream.ReferencePipeline.findFirst(java.base@11.0.8/ReferencePipeline.java:543)
at org.apache.logging.log4j.util.StackLocator.lambda$getCallerClass$6(StackLocator.java:58)
at org.apache.logging.log4j.util.StackLocator$$Lambda$1226/0x00000008414fec40.apply(Unknown Source)
at java.lang.StackStreamFactory$StackFrameTraverser.consumeFrames(java.base@11.0.8/StackStreamFactory.java:534)
at java.lang.StackStreamFactory$AbstractStackWalker.doStackWalk(java.base@11.0.8/StackStreamFactory.java:306)
at java.lang.StackStreamFactory$AbstractStackWalker.callStackWalk(java.base@11.0.8/Native Method)
at java.lang.StackStreamFactory$AbstractStackWalker.beginStackWalk(java.base@11.0.8/StackStreamFactory.java:370)
at java.lang.StackStreamFactory$AbstractStackWalker.walk(java.base@11.0.8/StackStreamFactory.java:243)
at java.lang.StackWalker.walk(java.base@11.0.8/StackWalker.java:498)
at org.apache.logging.log4j.util.StackLocator.getCallerClass(StackLocator.java:57)
at org.apache.logging.log4j.util.StackLocatorUtil.getCallerClass(StackLocatorUtil.java:67)
at org.apache.logging.slf4j.Log4jLoggerFactory.getContext(Log4jLoggerFactory.java:45)
at org.apache.logging.log4j.spi.AbstractLoggerAdapter.getLogger(AbstractLoggerAdapter.java:48)
at org.apache.logging.slf4j.Log4jLoggerFactory.getLogger(Log4jLoggerFactory.java:30)
at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:363)
at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:388)
at LoggerAspect.isLogLevelEnabled(LoggerAspect.java:91)
...&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13334503">LOG4J2-2940</key>
            <summary>High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rgoers">Ralph Goers</assignee>
                                    <reporter username="hostalp">Peter H</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Oct 2020 20:21:32 +0000</created>
                <updated>Wed, 4 Aug 2021 13:46:35 +0000</updated>
                            <resolved>Sat, 3 Apr 2021 15:16:58 +0000</resolved>
                                    <version>2.13.3</version>
                                                    <component>API</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="17210555" author="ralph.goers@dslextreme.com" created="Fri, 9 Oct 2020 01:35:19 +0000"  >&lt;p&gt;I guess I should be flattered. I wasn&apos;t aware that JBoss had copied our approach to have a LoggerContext be associated with ClassLoaders.&lt;/p&gt;

&lt;p&gt;I will certainly take a look at the JBoss code to see how it is different. I am very pleasantly surprised to see that the linked class is licensed with the Apache License so we could just copy the code if needed.&lt;/p&gt;</comment>
                            <comment id="17220507" author="ralph.goers@dslextreme.com" created="Mon, 26 Oct 2020 06:11:11 +0000"  >&lt;p&gt;Looking at the JBoss implementation I see that they are keeping track of the LoggerContext in a Map with the ClassLoader as the key. Maybe JBoss can get away with that but Log4j cannot. Instead, Log4j stores the LoggerContext in a Map where the key is the identity hashcode of the ClassLoader. This should have the same benefit with minimal extra overhead and won&apos;t run the risk of causing ClassLoader leakage.&#160;&lt;/p&gt;

&lt;p&gt;The comments for ClassLoaderContextSelector are &quot;A log context selector which chooses a log context based on the caller&apos;s classloader.&quot;, but that doesn&apos;t seem to be what it does at all.&lt;/p&gt;

&lt;p&gt;The algorithm JBoss seems to be using is:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Call the JDK specific LogContextFinder passing in the Map of previously located LogContexts and the LogContextFinder function (which just walks the ClassLoader parent chain looking for the first LogContext it finds in the ContextMap).&lt;/li&gt;
	&lt;li&gt;Walks the StackFrames until it finds one whose class is associated with a ClassLoader that can be found in the Map.&lt;/li&gt;
	&lt;li&gt;If it doesn&apos;t find one it returns the default LogContext.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;What really has me confused is I don&apos;t see any code that adds LogContext&apos;s to the contextMap other than the registerLogContext method in ClassLoaderContextSelector that IntelliJ says is never used. So it appears that all this code ever does is return the default LogContext. Without some algorithm to tell it to add a LogContext to the Map I don&apos;t see how the JBoss code can be doing what it should be doing. I also don&apos;t see any tests in the jboss-logging or jboss-logmanager projects to test this.&lt;/p&gt;

&lt;p&gt;Am I misreading the code somehow?&lt;/p&gt;

&lt;p&gt;I should contrast the algorithm that JBoss uses with the one Log4j uses:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;If the currentContext parameter is true then return the LoggerContext associated with the ContextAnchor ThreadLocal. If one is not present the default LoggerContext is returned.&lt;/li&gt;
	&lt;li&gt;If the ClassLoader was specified locate the LoggerContext associated with it, otherwise locate the caller&apos;s class (using StackLocatorUtil), get its ClassLoader and locate the LoggerContext associated with it.&lt;/li&gt;
	&lt;li&gt;To locate the LoggerContext check if the ClassLoader&apos;s identity is present as a key in the contextMap. If it is return the LoggerContext. If not recursively check its parents.&lt;/li&gt;
	&lt;li&gt;Since no LoggerContext could be located, create a new one and register it using the ClassLoader&apos;s identity as the key and return the created LoggerContext.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;After looking at the stack trace you provided I see that it isn&apos;t even in Log4j&apos;s ClassLoaderContextSelector but the SLF4J adapter&apos;s getContext method. It is trying to resolve the calling class to get its ClassLoader to pass to the above algorithm. This probably shouldn&apos;t be handled this way because it you have chosen to use a ContextSelector other than ClassLoaderContextSelect than determining the caller&apos;s ClassLoader may be a waste of time. It should probably just pass the FQCN.&lt;/p&gt;

&lt;p&gt;I should also note that I have changed the algorithm the Java 9 version of StackLocator is using. After doing further testing for &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2880&quot; title=&quot;High CPU consumption using StackWalker&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2880&quot;&gt;&lt;del&gt;LOG4J2-2880&lt;/del&gt;&lt;/a&gt; I discovered that the algorithm Log4j 2 originally used was better than what is in 2.13.3 so that will be of some help in 2.14.0.&#160; That said, I suspect if I could directly access the array of StackFrames using a for loop would be much faster than using Streams.&lt;/p&gt;</comment>
                            <comment id="17221342" author="hostalp" created="Tue, 27 Oct 2020 11:47:48 +0000"  >&lt;blockquote&gt;&lt;p&gt;... SLF4J adapter&apos;s getContext method. It is trying to resolve the calling class to get its ClassLoader to pass to the above algorithm. This probably shouldn&apos;t be handled this way because it you have chosen to use a ContextSelector other than ClassLoaderContextSelect than determining the caller&apos;s ClassLoader may be a waste of time. It should probably just pass the FQCN.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;If that&apos;s the case it may be possible to correct the SLF4J adapter&apos;s code (Log4jLoggerFactory?) to handle such cases more efficiently right there. Correct?&lt;/p&gt;</comment>
                            <comment id="17221543" author="ralph.goers@dslextreme.com" created="Tue, 27 Oct 2020 16:17:52 +0000"  >&lt;p&gt;Yes, but it won&apos;t make much difference unless you configure your app to use a different ContextSelector.&lt;/p&gt;</comment>
                            <comment id="17252025" author="ralph.goers@dslextreme.com" created="Fri, 18 Dec 2020 22:13:53 +0000"  >&lt;p&gt;We should a) investigate whether we can a) use StackWalker.getCallerClass() directly in LoggerFactory.getLogger() as that method is supposed to be much faster than walking the stack and b) check to see what the overhead of that is. We may also want to add a method to LogManager to determine if the ContextSelector requires the ClassLoader, in which case we could skip the call.&lt;/p&gt;</comment>
                            <comment id="17292341" author="ralph.goers@dslextreme.com" created="Sun, 28 Feb 2021 08:25:51 +0000"  >&lt;p&gt;Adding support for SLF4J-2.0.0 is likely going to impact how this problem gets solved so &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2975&quot; title=&quot;SLF4J fluent API fails to capture call site location due to missing LoggingEventAware implementation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2975&quot;&gt;&lt;del&gt;LOG4J2-2975&lt;/del&gt;&lt;/a&gt; should be handled first.&lt;/p&gt;</comment>
                            <comment id="17302824" author="ckozak" created="Tue, 16 Mar 2021 19:01:48 +0000"  >&lt;p&gt;I&apos;m looking into adding a method to the context-selector which tells us whether or not the classloader is required to determine the context as you proposed on the mailing list, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgoers&quot; class=&quot;user-hover&quot; rel=&quot;rgoers&quot;&gt;rgoers&lt;/a&gt;:&#160;&lt;a href=&quot;https://lists.apache.org/thread.html/r6ca27440676839d645b2f33baed207c3e5ac86f18221f7a2577fd777%40%3Clog4j-user.logging.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/r6ca27440676839d645b2f33baed207c3e5ac86f18221f7a2577fd777%40%3Clog4j-user.logging.apache.org%3E&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17302849" author="ralph.goers@dslextreme.com" created="Tue, 16 Mar 2021 19:41:51 +0000"  >&lt;p&gt;Sure. If you wouldn&apos;t mind could you do it as a PR so I can easily review it?&lt;/p&gt;</comment>
                            <comment id="17302852" author="ckozak" created="Tue, 16 Mar 2021 19:43:03 +0000"  >&lt;p&gt;Of course, I&apos;ve opened one here:&#160;&lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/475&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/475&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17307505" author="jira-bot" created="Wed, 24 Mar 2021 01:58:35 +0000"  >&lt;p&gt;Commit 79c187a3ef2dbc63dfc831d74d6854f11ef3f8f7 in logging-log4j2&apos;s branch refs/heads/master from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=79c187a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=79c187a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt;: Context selectors are aware of ClassLoader dependency&lt;/p&gt;

&lt;p&gt;This allows LoggerContext lookups to avoid searching for the calling&lt;br/&gt;
class to discover a classloader when the ContextSelector implementation&lt;br/&gt;
is declared to be agnostic to the class loader.&lt;/p&gt;

&lt;p&gt;Custom LoggerContextFactory and ContextSelector implementations&lt;br/&gt;
should be updated to override the new `isClassLoaderDependent` method.&lt;/p&gt;</comment>
                            <comment id="17307506" author="jira-bot" created="Wed, 24 Mar 2021 01:59:09 +0000"  >&lt;p&gt;Commit c217cd5b06a63e1948fdea8be8e79e6a1deaf859 in logging-log4j2&apos;s branch refs/heads/release-2.x from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=c217cd5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=c217cd5&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt;: Context selectors are aware of ClassLoader dependency&lt;/p&gt;

&lt;p&gt;This allows LoggerContext lookups to avoid searching for the calling&lt;br/&gt;
class to discover a classloader when the ContextSelector implementation&lt;br/&gt;
is declared to be agnostic to the class loader.&lt;/p&gt;

&lt;p&gt;Custom LoggerContextFactory and ContextSelector implementations&lt;br/&gt;
should be updated to override the new `isClassLoaderDependent` method.&lt;/p&gt;</comment>
                            <comment id="17308141" author="jira-bot" created="Wed, 24 Mar 2021 19:21:09 +0000"  >&lt;p&gt;Commit cefa59383c560af7ba03300601a61d82480ffd67 in logging-log4j2&apos;s branch refs/heads/release-2.x from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=cefa593&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=cefa593&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt;: Reduce StackWalker interactions accessing an slf4j logger instance&lt;/p&gt;

&lt;p&gt;Previously we walked the stack twice, once to find the&lt;br/&gt;
`org.slf4j.LoggerFactory` interaction, and a second time to&lt;br/&gt;
discover the application code which called it. Now we use a new&lt;br/&gt;
API to skip a frame at the end to find the final result in a single&lt;br/&gt;
interaction.&lt;/p&gt;</comment>
                            <comment id="17308142" author="jira-bot" created="Wed, 24 Mar 2021 19:21:14 +0000"  >&lt;p&gt;Commit d819f0a38293740137e40fbe05c03c2fb24e7fc3 in logging-log4j2&apos;s branch refs/heads/master from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=d819f0a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=d819f0a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt;: Reduce StackWalker interactions accessing an slf4j logger instance&lt;/p&gt;

&lt;p&gt;Previously we walked the stack twice, once to find the&lt;br/&gt;
`org.slf4j.LoggerFactory` interaction, and a second time to&lt;br/&gt;
discover the application code which called it. Now we use a new&lt;br/&gt;
API to skip a frame at the end to find the final result in a single&lt;br/&gt;
interaction.&lt;/p&gt;</comment>
                            <comment id="17308145" author="jira-bot" created="Wed, 24 Mar 2021 19:22:45 +0000"  >&lt;p&gt;Commit 12bd5bf77939f276cf4bfbcb867085bf0dfdd568 in logging-log4j2&apos;s branch refs/heads/release-2.x from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=12bd5bf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=12bd5bf&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt;: Implement BasicAsyncLoggerContextSelector&lt;/p&gt;

&lt;p&gt;The BasicAsyncLoggerContextSelector is equivalent to the&lt;br/&gt;
AsyncLoggerContextSelector without ClassLoader introspection&lt;br/&gt;
and associated overhead.&lt;/p&gt;</comment>
                            <comment id="17308149" author="jira-bot" created="Wed, 24 Mar 2021 19:29:09 +0000"  >&lt;p&gt;Commit 702787e1d37f9becec1751b819013e687e588bb5 in logging-log4j2&apos;s branch refs/heads/master from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=702787e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=702787e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt;: Implement BasicAsyncLoggerContextSelector&lt;/p&gt;

&lt;p&gt;The BasicAsyncLoggerContextSelector is equivalent to the&lt;br/&gt;
AsyncLoggerContextSelector without ClassLoader introspection&lt;br/&gt;
and associated overhead.&lt;/p&gt;</comment>
                            <comment id="17310303" author="jira-bot" created="Sun, 28 Mar 2021 23:10:25 +0000"  >&lt;p&gt;Commit 459d7ad8c99bd1ebff5d4b341a447f5593806c25 in logging-log4j2&apos;s branch refs/heads/master-java11 from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=459d7ad&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=459d7ad&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt;: Context selectors are aware of ClassLoader dependency&lt;/p&gt;

&lt;p&gt;This allows LoggerContext lookups to avoid searching for the calling&lt;br/&gt;
class to discover a classloader when the ContextSelector implementation&lt;br/&gt;
is declared to be agnostic to the class loader.&lt;/p&gt;

&lt;p&gt;Custom LoggerContextFactory and ContextSelector implementations&lt;br/&gt;
should be updated to override the new `isClassLoaderDependent` method.&lt;/p&gt;</comment>
                            <comment id="17310304" author="jira-bot" created="Sun, 28 Mar 2021 23:10:27 +0000"  >&lt;p&gt;Commit 07b0fad4280736566bede9b7a89bd5f384926359 in logging-log4j2&apos;s branch refs/heads/master-java11 from Ralph Goers&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=07b0fad&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=07b0fad&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt;: Reduce StackWalker interactions accessing an slf4j logger instance&lt;/p&gt;

&lt;p&gt;Previously we walked the stack twice, once to find the&lt;br/&gt;
`org.slf4j.LoggerFactory` interaction, and a second time to&lt;br/&gt;
discover the application code which called it. Now we use a new&lt;br/&gt;
API to skip a frame at the end to find the final result in a single&lt;br/&gt;
interaction.&lt;/p&gt;</comment>
                            <comment id="17310305" author="jira-bot" created="Sun, 28 Mar 2021 23:10:28 +0000"  >&lt;p&gt;Commit f42f81c5b4644cceca7cdadf472091efc0360983 in logging-log4j2&apos;s branch refs/heads/master-java11 from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=f42f81c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=f42f81c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt;: Implement BasicAsyncLoggerContextSelector&lt;/p&gt;

&lt;p&gt;The BasicAsyncLoggerContextSelector is equivalent to the&lt;br/&gt;
AsyncLoggerContextSelector without ClassLoader introspection&lt;br/&gt;
and associated overhead.&lt;/p&gt;</comment>
                            <comment id="17314188" author="jira-bot" created="Sat, 3 Apr 2021 05:14:04 +0000"  >&lt;p&gt;Commit 459d7ad8c99bd1ebff5d4b341a447f5593806c25 in logging-log4j2&apos;s branch refs/heads/master from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=459d7ad&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=459d7ad&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt;: Context selectors are aware of ClassLoader dependency&lt;/p&gt;

&lt;p&gt;This allows LoggerContext lookups to avoid searching for the calling&lt;br/&gt;
class to discover a classloader when the ContextSelector implementation&lt;br/&gt;
is declared to be agnostic to the class loader.&lt;/p&gt;

&lt;p&gt;Custom LoggerContextFactory and ContextSelector implementations&lt;br/&gt;
should be updated to override the new `isClassLoaderDependent` method.&lt;/p&gt;</comment>
                            <comment id="17314189" author="jira-bot" created="Sat, 3 Apr 2021 05:14:06 +0000"  >&lt;p&gt;Commit 07b0fad4280736566bede9b7a89bd5f384926359 in logging-log4j2&apos;s branch refs/heads/master from Ralph Goers&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=07b0fad&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=07b0fad&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt;: Reduce StackWalker interactions accessing an slf4j logger instance&lt;/p&gt;

&lt;p&gt;Previously we walked the stack twice, once to find the&lt;br/&gt;
`org.slf4j.LoggerFactory` interaction, and a second time to&lt;br/&gt;
discover the application code which called it. Now we use a new&lt;br/&gt;
API to skip a frame at the end to find the final result in a single&lt;br/&gt;
interaction.&lt;/p&gt;</comment>
                            <comment id="17314190" author="jira-bot" created="Sat, 3 Apr 2021 05:14:07 +0000"  >&lt;p&gt;Commit f42f81c5b4644cceca7cdadf472091efc0360983 in logging-log4j2&apos;s branch refs/heads/master from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=f42f81c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=f42f81c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt;: Implement BasicAsyncLoggerContextSelector&lt;/p&gt;

&lt;p&gt;The BasicAsyncLoggerContextSelector is equivalent to the&lt;br/&gt;
AsyncLoggerContextSelector without ClassLoader introspection&lt;br/&gt;
and associated overhead.&lt;/p&gt;</comment>
                            <comment id="17314191" author="jira-bot" created="Sat, 3 Apr 2021 05:14:51 +0000"  >&lt;p&gt;Commit 07b0fad4280736566bede9b7a89bd5f384926359 in logging-log4j2&apos;s branch refs/heads/dependabot/maven/org.codehaus.mojo-build-helper-maven-plugin-3.2.0 from Ralph Goers&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=07b0fad&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=07b0fad&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt;: Reduce StackWalker interactions accessing an slf4j logger instance&lt;/p&gt;

&lt;p&gt;Previously we walked the stack twice, once to find the&lt;br/&gt;
`org.slf4j.LoggerFactory` interaction, and a second time to&lt;br/&gt;
discover the application code which called it. Now we use a new&lt;br/&gt;
API to skip a frame at the end to find the final result in a single&lt;br/&gt;
interaction.&lt;/p&gt;</comment>
                            <comment id="17314192" author="jira-bot" created="Sat, 3 Apr 2021 05:14:53 +0000"  >&lt;p&gt;Commit f42f81c5b4644cceca7cdadf472091efc0360983 in logging-log4j2&apos;s branch refs/heads/dependabot/maven/org.codehaus.mojo-build-helper-maven-plugin-3.2.0 from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=f42f81c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=f42f81c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt;: Implement BasicAsyncLoggerContextSelector&lt;/p&gt;

&lt;p&gt;The BasicAsyncLoggerContextSelector is equivalent to the&lt;br/&gt;
AsyncLoggerContextSelector without ClassLoader introspection&lt;br/&gt;
and associated overhead.&lt;/p&gt;</comment>
                            <comment id="17314198" author="ralph.goers@dslextreme.com" created="Sat, 3 Apr 2021 06:28:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ckozak&quot; class=&quot;user-hover&quot; rel=&quot;ckozak&quot;&gt;ckozak&lt;/a&gt;&#160;Isn&apos;t this now resolved?&lt;/p&gt;</comment>
                            <comment id="17314231" author="jira-bot" created="Sat, 3 Apr 2021 10:45:56 +0000"  >&lt;p&gt;Commit c217cd5b06a63e1948fdea8be8e79e6a1deaf859 in logging-log4j2&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3004&quot; title=&quot;Migrate JsonTemplateLayout static resolvers to plugins&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3004&quot;&gt;&lt;del&gt;LOG4J2-3004&lt;/del&gt;&lt;/a&gt; from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=c217cd5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=c217cd5&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt;: Context selectors are aware of ClassLoader dependency&lt;/p&gt;

&lt;p&gt;This allows LoggerContext lookups to avoid searching for the calling&lt;br/&gt;
class to discover a classloader when the ContextSelector implementation&lt;br/&gt;
is declared to be agnostic to the class loader.&lt;/p&gt;

&lt;p&gt;Custom LoggerContextFactory and ContextSelector implementations&lt;br/&gt;
should be updated to override the new `isClassLoaderDependent` method.&lt;/p&gt;</comment>
                            <comment id="17314232" author="jira-bot" created="Sat, 3 Apr 2021 10:45:58 +0000"  >&lt;p&gt;Commit cefa59383c560af7ba03300601a61d82480ffd67 in logging-log4j2&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3004&quot; title=&quot;Migrate JsonTemplateLayout static resolvers to plugins&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3004&quot;&gt;&lt;del&gt;LOG4J2-3004&lt;/del&gt;&lt;/a&gt; from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=cefa593&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=cefa593&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt;: Reduce StackWalker interactions accessing an slf4j logger instance&lt;/p&gt;

&lt;p&gt;Previously we walked the stack twice, once to find the&lt;br/&gt;
`org.slf4j.LoggerFactory` interaction, and a second time to&lt;br/&gt;
discover the application code which called it. Now we use a new&lt;br/&gt;
API to skip a frame at the end to find the final result in a single&lt;br/&gt;
interaction.&lt;/p&gt;</comment>
                            <comment id="17314233" author="jira-bot" created="Sat, 3 Apr 2021 10:46:00 +0000"  >&lt;p&gt;Commit 12bd5bf77939f276cf4bfbcb867085bf0dfdd568 in logging-log4j2&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3004&quot; title=&quot;Migrate JsonTemplateLayout static resolvers to plugins&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3004&quot;&gt;&lt;del&gt;LOG4J2-3004&lt;/del&gt;&lt;/a&gt; from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=12bd5bf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=12bd5bf&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt;: Implement BasicAsyncLoggerContextSelector&lt;/p&gt;

&lt;p&gt;The BasicAsyncLoggerContextSelector is equivalent to the&lt;br/&gt;
AsyncLoggerContextSelector without ClassLoader introspection&lt;br/&gt;
and associated overhead.&lt;/p&gt;</comment>
                            <comment id="17314278" author="ckozak" created="Sat, 3 Apr 2021 15:16:58 +0000"  >&lt;p&gt;&amp;gt;&#160;Isn&apos;t this now resolved?&lt;/p&gt;

&lt;p&gt;I think we can consider it resolved &#8211; I expect that we&apos;re still spending more cycles than java 8 when the ClassLoaderContextSelector (default) and AsyncLoggerContextSelector are used, but it&apos;s half as expensive as it was prior to my changes. BasicContextSelector and the new BasicAsyncLoggerContextSelector definitely solve the problem when they&apos;re used.&lt;/p&gt;</comment>
                            <comment id="17357482" author="jira-bot" created="Fri, 4 Jun 2021 16:57:21 +0000"  >&lt;p&gt;Commit 86ce2e3dcff991a5a275383c282292ce0fb1cef6 in logging-log4j2&apos;s branch refs/heads/release-2.x from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=86ce2e3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=86ce2e3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Fix incorrect LogManager accessor used by &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The `getContext()` accessor with no args has been used as a fallback&lt;br/&gt;
for Log4jLoggerFactory slf4j implementations for a while, but it&apos;s&lt;br/&gt;
much more likely to be used now that &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt; is resolved.&lt;br/&gt;
Without the `false` argument, the first slf4j LoggerFactory.getLogger&lt;br/&gt;
call will not cause log4j to initialize itself.&lt;/p&gt;</comment>
                            <comment id="17357483" author="jira-bot" created="Fri, 4 Jun 2021 16:57:23 +0000"  >&lt;p&gt;Commit 86ce2e3dcff991a5a275383c282292ce0fb1cef6 in logging-log4j2&apos;s branch refs/heads/release-2.x from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=86ce2e3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=86ce2e3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Fix incorrect LogManager accessor used by &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The `getContext()` accessor with no args has been used as a fallback&lt;br/&gt;
for Log4jLoggerFactory slf4j implementations for a while, but it&apos;s&lt;br/&gt;
much more likely to be used now that &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt; is resolved.&lt;br/&gt;
Without the `false` argument, the first slf4j LoggerFactory.getLogger&lt;br/&gt;
call will not cause log4j to initialize itself.&lt;/p&gt;</comment>
                            <comment id="17357484" author="jira-bot" created="Fri, 4 Jun 2021 16:57:25 +0000"  >&lt;p&gt;Commit 97c89b9fa25042dec8d5d63ddcfb266c22d12d17 in logging-log4j2&apos;s branch refs/heads/master from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=97c89b9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=97c89b9&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Fix incorrect LogManager accessor used by &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The `getContext()` accessor with no args has been used as a fallback&lt;br/&gt;
for Log4jLoggerFactory slf4j implementations for a while, but it&apos;s&lt;br/&gt;
much more likely to be used now that &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt; is resolved.&lt;br/&gt;
Without the `false` argument, the first slf4j LoggerFactory.getLogger&lt;br/&gt;
call will not cause log4j to initialize itself.&lt;/p&gt;</comment>
                            <comment id="17357485" author="jira-bot" created="Fri, 4 Jun 2021 16:57:28 +0000"  >&lt;p&gt;Commit 97c89b9fa25042dec8d5d63ddcfb266c22d12d17 in logging-log4j2&apos;s branch refs/heads/master from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=97c89b9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=97c89b9&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Fix incorrect LogManager accessor used by &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The `getContext()` accessor with no args has been used as a fallback&lt;br/&gt;
for Log4jLoggerFactory slf4j implementations for a while, but it&apos;s&lt;br/&gt;
much more likely to be used now that &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt; is resolved.&lt;br/&gt;
Without the `false` argument, the first slf4j LoggerFactory.getLogger&lt;br/&gt;
call will not cause log4j to initialize itself.&lt;/p&gt;</comment>
                            <comment id="17358256" author="jira-bot" created="Sun, 6 Jun 2021 22:48:58 +0000"  >&lt;p&gt;Commit 97c89b9fa25042dec8d5d63ddcfb266c22d12d17 in logging-log4j2&apos;s branch refs/heads/mean-bean-machine from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=97c89b9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=97c89b9&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Fix incorrect LogManager accessor used by &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The `getContext()` accessor with no args has been used as a fallback&lt;br/&gt;
for Log4jLoggerFactory slf4j implementations for a while, but it&apos;s&lt;br/&gt;
much more likely to be used now that &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt; is resolved.&lt;br/&gt;
Without the `false` argument, the first slf4j LoggerFactory.getLogger&lt;br/&gt;
call will not cause log4j to initialize itself.&lt;/p&gt;</comment>
                            <comment id="17358258" author="jira-bot" created="Sun, 6 Jun 2021 22:49:00 +0000"  >&lt;p&gt;Commit 97c89b9fa25042dec8d5d63ddcfb266c22d12d17 in logging-log4j2&apos;s branch refs/heads/mean-bean-machine from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=97c89b9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=97c89b9&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Fix incorrect LogManager accessor used by &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The `getContext()` accessor with no args has been used as a fallback&lt;br/&gt;
for Log4jLoggerFactory slf4j implementations for a while, but it&apos;s&lt;br/&gt;
much more likely to be used now that &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt; is resolved.&lt;br/&gt;
Without the `false` argument, the first slf4j LoggerFactory.getLogger&lt;br/&gt;
call will not cause log4j to initialize itself.&lt;/p&gt;</comment>
                            <comment id="17358397" author="jira-bot" created="Mon, 7 Jun 2021 07:32:28 +0000"  >&lt;p&gt;Commit 86ce2e3dcff991a5a275383c282292ce0fb1cef6 in logging-log4j2&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3080&quot; title=&quot;Messages logged inconsistently when using JsonTemplateLayout.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3080&quot;&gt;&lt;del&gt;LOG4J2-3080&lt;/del&gt;&lt;/a&gt; from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=86ce2e3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=86ce2e3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Fix incorrect LogManager accessor used by &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The `getContext()` accessor with no args has been used as a fallback&lt;br/&gt;
for Log4jLoggerFactory slf4j implementations for a while, but it&apos;s&lt;br/&gt;
much more likely to be used now that &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt; is resolved.&lt;br/&gt;
Without the `false` argument, the first slf4j LoggerFactory.getLogger&lt;br/&gt;
call will not cause log4j to initialize itself.&lt;/p&gt;</comment>
                            <comment id="17358398" author="jira-bot" created="Mon, 7 Jun 2021 07:32:34 +0000"  >&lt;p&gt;Commit 86ce2e3dcff991a5a275383c282292ce0fb1cef6 in logging-log4j2&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3080&quot; title=&quot;Messages logged inconsistently when using JsonTemplateLayout.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3080&quot;&gt;&lt;del&gt;LOG4J2-3080&lt;/del&gt;&lt;/a&gt; from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=86ce2e3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=86ce2e3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Fix incorrect LogManager accessor used by &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The `getContext()` accessor with no args has been used as a fallback&lt;br/&gt;
for Log4jLoggerFactory slf4j implementations for a while, but it&apos;s&lt;br/&gt;
much more likely to be used now that &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt; is resolved.&lt;br/&gt;
Without the `false` argument, the first slf4j LoggerFactory.getLogger&lt;br/&gt;
call will not cause log4j to initialize itself.&lt;/p&gt;</comment>
                            <comment id="17393172" author="jira-bot" created="Wed, 4 Aug 2021 13:46:26 +0000"  >&lt;p&gt;Commit 59fd1f3f62e3c503c480a933ca360112be520a74 in logging-log4j2&apos;s branch refs/heads/release-2.x from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=59fd1f3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=59fd1f3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Remove unreleased+replaced StackLocator API from &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17393174" author="jira-bot" created="Wed, 4 Aug 2021 13:46:35 +0000"  >&lt;p&gt;Commit 25c7001f4609438aaca803b2b577aab565e1ccdf in logging-log4j2&apos;s branch refs/heads/master from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=25c7001&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=25c7001&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Remove unreleased+replaced StackLocator API from &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2940&quot; title=&quot;High CPU at Java 11 due to the use of StackWalker from StackLocator.getCallerClass&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2940&quot;&gt;&lt;del&gt;LOG4J2-2940&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13345505">LOG4J2-2975</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://bugzilla.redhat.com/show_bug.cgi?id=1813436]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 15 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0jjjc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>