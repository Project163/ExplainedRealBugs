<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:30:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-133] Allow custom message creation via a message factory</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-133</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;My goal here is to be able to say:&lt;/p&gt;

&lt;p&gt;Logger log = LogManager.getLogger(Foo.class, new MyMessageFactory())&lt;/p&gt;

&lt;p&gt;Where MyMessageFactory extends a MessageFactory:&lt;/p&gt;

&lt;p&gt;and overrides:&lt;/p&gt;

&lt;p&gt;    public Message newMessage(String message, Object... params) &lt;/p&gt;
{
        return new ParameterizedMessage(message, params);
    }

&lt;p&gt;as:&lt;/p&gt;

&lt;p&gt;    public Message newMessage(String message, Object... params) &lt;/p&gt;
{
        return new StringFormattedMessage(message, params);
    }

&lt;p&gt;which would let me use native Java formatting instead of {} formatting /easily/&lt;/p&gt;

&lt;p&gt;I&apos;ve attach the idea as the beginning of patch, which is missing the LogManager bits.&lt;/p&gt;

&lt;p&gt;Maybe we need a sub-interface of Message for param message, which would make me want to rename the class ParameterizedMessage to SimpleParameterizedMessage.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Apache Maven 3.0.4 (r1232337; 2012-01-17 03:44:56-0500)&lt;br/&gt;
Maven home: C:\Java\apache-maven-3.0.4\bin\..&lt;br/&gt;
Java version: 1.6.0_35, vendor: Sun Microsystems Inc.&lt;br/&gt;
Java home: C:\Program Files\Java\jdk1.6.0_35\jre&lt;br/&gt;
Default locale: en_US, platform encoding: Cp1252&lt;br/&gt;
OS name: &quot;windows 7&quot;, version: &quot;6.1&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;&lt;/p&gt;</environment>
        <key id="12619130">LOG4J2-133</key>
            <summary>Allow custom message creation via a message factory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ggregory">Gary D. Gregory</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Dec 2012 14:01:40 +0000</created>
                <updated>Mon, 10 Dec 2012 16:17:38 +0000</updated>
                            <resolved>Mon, 10 Dec 2012 16:17:38 +0000</resolved>
                                    <version>2.0-beta3</version>
                                    <fixVersion>2.0-beta4</fixVersion>
                                    <component>API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13511380" author="garydgregory" created="Thu, 6 Dec 2012 14:03:07 +0000"  >&lt;p&gt;Start of a patch for discussion.&lt;/p&gt;</comment>
                            <comment id="13511492" author="ralph.goers@dslextreme.com" created="Thu, 6 Dec 2012 16:18:04 +0000"  >&lt;p&gt;I like the concept as it makes sense that user&apos;s would want to use a particular style within the scope of a Logger.  A few comments on the patch (also posted to the mailing list).&lt;/p&gt;

&lt;p&gt;First, I expected MessageFactory to be an interface, not a class.&lt;/p&gt;

&lt;p&gt;Second, I expected to see 3 MessageFactory implementations to start that would allow the user to choose between ParameterizedMessage, StringFormatMessage and MessageFormatMessage (I have that in the works for JUL support).&lt;/p&gt;

&lt;p&gt;Third, I expected that only the methods that accept a format and a parameter would use the MessageFactory and SimpleMessage and ObjectMessage would just be left as they are. That doesn&apos;t mean I couldn&apos;t be persuaded to include them in the interface as I could see uses customizing that for their needs.&lt;/p&gt;

&lt;p&gt;Lastly, I&apos;m not sure how adding getThrowable to the Message interface is related or required for this change.  I&apos;m not necessarily opposed but I&apos;m not sure if it should be tied to this.&lt;/p&gt;</comment>
                            <comment id="13526004" author="garydgregory" created="Thu, 6 Dec 2012 23:34:33 +0000"  >&lt;p&gt;Current version of the patch. &lt;/p&gt;</comment>
                            <comment id="13526014" author="ralph.goers@dslextreme.com" created="Thu, 6 Dec 2012 23:45:34 +0000"  >&lt;p&gt;I recommend creating an AbstractMessageFactory as&lt;/p&gt;

&lt;p&gt;public abstract class AbstractMessageFactory implements MessageFactory {&lt;br/&gt;
    public Message newMessage(Object object) &lt;/p&gt;
{
         return new ObjectMessage(object);
    }

&lt;p&gt;   public Message new Message(String string) &lt;/p&gt;
{
         return new StringMessage(object):
   }

&lt;p&gt;   public abstract newMessage(String format, Object... params);&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;and then creating StringFormatMessageFactory and ObjectMessageFactory. Then change DefaultMessageFactory to extend the abstract class. You might want to rename DefaultMessageFactory to ParameterizedMessageFactory to be consistent with the other two factory classes.&lt;/p&gt;</comment>
                            <comment id="13526099" author="garydgregory" created="Fri, 7 Dec 2012 02:55:40 +0000"  >&lt;p&gt;Committed first batch of changes. Next up: Surface this in the LogManager API.&lt;/p&gt;</comment>
                            <comment id="13526821" author="garydgregory" created="Fri, 7 Dec 2012 22:11:26 +0000"  >&lt;p&gt;This is the second part of this feature: using the feature from the LogManager class.&lt;/p&gt;</comment>
                            <comment id="13526828" author="ralph.goers@dslextreme.com" created="Fri, 7 Dec 2012 22:26:42 +0000"  >&lt;p&gt;Why does SimpleLoggerContext.getLogger() ignore the MessageFactory that is passed to it?  Other than that it looks OK.&lt;/p&gt;</comment>
                            <comment id="13527673" author="garydgregory" created="Mon, 10 Dec 2012 01:06:48 +0000"  >&lt;p&gt;Fixed and committed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12559963" name="LogManagerAPI.diff" size="22700" author="ggregory" created="Fri, 7 Dec 2012 22:11:26 +0000"/>
                            <attachment id="12559766" name="log4j2-133.diff" size="34502" author="ggregory" created="Thu, 6 Dec 2012 23:34:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>296324</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 50 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i148k7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>232850</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>