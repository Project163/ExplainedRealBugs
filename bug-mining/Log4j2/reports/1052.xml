<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:38:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-1920] ScriptEngineManager is not available in Android and causes a NoClassDefFoundError</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-1920</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;Hi Team,&lt;/p&gt;

&lt;p&gt;I integrated Log4j v2.3 initially and I was getting the following crash in my application.&lt;/p&gt;

&lt;p&gt;05-25 09:49:59.099 E/AndroidRuntime(24561): FATAL EXCEPTION: main&lt;br/&gt;
05-25 09:49:59.099 E/AndroidRuntime(24561): java.lang.NoClassDefFoundError: org.apache.logging.log4j.core.lookup.JmxRuntimeInputArgumentsLookup&lt;/p&gt;

&lt;p&gt;Later on, I was checking the open tickets like &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-716&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/LOG4J2-716&lt;/a&gt; and found the issue to be the version that I am using.&lt;/p&gt;

&lt;p&gt;So, I upgraded to latest 2.8.2 version and made some modifications in the code. I see that the above JMX exception is being &quot;caught&quot; and printed in the console. So now I have bypassed that crash and landed in a new crash. I am pasting the stack trace below. Please have a look and advice.&lt;/p&gt;

&lt;p&gt;05-25 15:12:58.634 E/AndroidRuntime(27649): FATAL EXCEPTION: main&lt;br/&gt;
05-25 15:12:58.634 E/AndroidRuntime(27649): java.lang.NoClassDefFoundError: Failed resolution of: Ljavax/script/ScriptEngineManager;&lt;br/&gt;
05-25 15:12:58.634 E/AndroidRuntime(27649): 	at org.apache.logging.log4j.core.script.ScriptManager.&amp;lt;init&amp;gt;(ScriptManager.java:68)&lt;br/&gt;
05-25 15:12:58.634 E/AndroidRuntime(27649): 	at org.apache.logging.log4j.core.config.AbstractConfiguration.initialize(AbstractConfiguration.java:214)&lt;br/&gt;
05-25 15:12:58.634 E/AndroidRuntime(27649): 	at org.apache.logging.log4j.core.config.AbstractConfiguration.start(AbstractConfiguration.java:244)&lt;br/&gt;
05-25 15:12:58.634 E/AndroidRuntime(27649): 	at org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:545)&lt;br/&gt;
05-25 15:12:58.634 E/AndroidRuntime(27649): 	at org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:261)&lt;/p&gt;

&lt;p&gt;This exception occurs when I am trying LoggerContext.start(). Please advise way forward.&lt;/p&gt;

&lt;p&gt;-Ajitha Yasmin&lt;/p&gt;</description>
                <environment>&lt;p&gt;While using with Android&lt;/p&gt;</environment>
        <key id="13074532">LOG4J2-1920</key>
            <summary>ScriptEngineManager is not available in Android and causes a NoClassDefFoundError</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="Ajitha">Ajitha</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 May 2017 13:49:20 +0000</created>
                <updated>Wed, 13 Sep 2017 07:42:12 +0000</updated>
                            <resolved>Wed, 24 May 2017 19:49:21 +0000</resolved>
                                    <version>2.8.2</version>
                                    <fixVersion>2.9.0</fixVersion>
                                    <component>JMX</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="16023437" author="ralph.goers@dslextreme.com" created="Wed, 24 May 2017 18:51:19 +0000"  >&lt;p&gt;This should be easy to deal with - but it will mean Log4j won&apos;t have any script support.&lt;/p&gt;</comment>
                            <comment id="16023477" author="garydgregory" created="Wed, 24 May 2017 19:15:08 +0000"  >&lt;p&gt;I am working on a patch which will be trivial. We could allow for JavaScript by using Rhino directly or Apache Commons BSF. We could also create our own scripting API with plugins for JSR 223, direct Rhino and Commons BSF... Bleh. If scripting matters to Android devs, then we can be open to contributions.&lt;/p&gt;</comment>
                            <comment id="16023501" author="garydgregory" created="Wed, 24 May 2017 19:25:33 +0000"  >&lt;p&gt;I am changing the priority to &lt;tt&gt;Blocker&lt;/tt&gt; since this breaks Log4j completely on Android.&lt;/p&gt;</comment>
                            <comment id="16023506" author="garydgregory" created="Wed, 24 May 2017 19:26:26 +0000"  >&lt;p&gt;I would be nice to have some way to run some tests on Jenkis within some Android sandbox...&lt;/p&gt;</comment>
                            <comment id="16023538" author="jira-bot" created="Wed, 24 May 2017 19:46:32 +0000"  >&lt;p&gt;Commit 96aeca3827fbf5c0aa4b64d2b2bf7cd887325fea in logging-log4j2&apos;s branch refs/heads/master from ggregory&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=96aeca3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=96aeca3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1920&quot; title=&quot;ScriptEngineManager is not available in Android and causes a NoClassDefFoundError&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1920&quot;&gt;&lt;del&gt;LOG4J2-1920&lt;/del&gt;&lt;/a&gt;ScriptEngineManager is not available in Android and causes&lt;br/&gt;
a NoClassDefFoundError. &apos;mvn clean install&apos; builds.&lt;/p&gt;</comment>
                            <comment id="16023545" author="garydgregory" created="Wed, 24 May 2017 19:48:54 +0000"  >&lt;p&gt;Fixed in master with commit 96aeca3827fbf5c0aa4b64d2b2bf7cd887325fea&lt;/p&gt;</comment>
                            <comment id="16023546" author="garydgregory" created="Wed, 24 May 2017 19:49:21 +0000"  >&lt;p&gt;Please verify and close.&lt;/p&gt;</comment>
                            <comment id="16024181" author="ajitha" created="Thu, 25 May 2017 04:42:08 +0000"  >&lt;p&gt;When can I expect this in maven :&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-core&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-core&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="16024193" author="garydgregory" created="Thu, 25 May 2017 04:53:54 +0000"  >&lt;p&gt;That&apos;s hard to say. One of our PMC (volunteer) members would have to step up and go through our release procedures. I do not have that many extra cycles myself ATM.&lt;/p&gt;</comment>
                            <comment id="16024194" author="ralph.goers@dslextreme.com" created="Thu, 25 May 2017 04:55:03 +0000"  >&lt;p&gt;We can deploy a SNAPSHOT for you to test with. It wouldn&apos;t be available at mvnrepository though. It would be on the Apache Nexus repository. Also, I don&apos;t think we are in a state where we want to perform a release right now.&lt;/p&gt;</comment>
                            <comment id="16024200" author="ajitha" created="Thu, 25 May 2017 05:02:45 +0000"  >&lt;p&gt;Thats great. Please share a link for the snapshot. I would pull it and verify the issue.&lt;/p&gt;</comment>
                            <comment id="16024769" author="ralph.goers@dslextreme.com" created="Thu, 25 May 2017 14:05:29 +0000"  >&lt;p&gt;I have deployed SNAPSHOTs to repository.apache.org. &lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/logging/log4j/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/logging/log4j/&lt;/a&gt;. Just make sure you have the apache snapshots repo configured in your maven build and they should download automatically, The version is 2.8.3-SNAPSHOT.&lt;/p&gt;</comment>
                            <comment id="16024869" author="ajitha" created="Thu, 25 May 2017 15:33:19 +0000"  >&lt;p&gt;Thanks for the excellent and prompt support. It worked like a charm. I am able to use log4j in Android now. &lt;/p&gt;</comment>
                            <comment id="16164257" author="mounicakodela" created="Wed, 13 Sep 2017 07:42:12 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Ajitha&quot; class=&quot;user-hover&quot; rel=&quot;Ajitha&quot;&gt;Ajitha&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Did you tried using 2.9.0 in your android application. I am not able to run the application using log4j 2.9.0 to test this issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 10 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3fetj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>