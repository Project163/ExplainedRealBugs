<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:37:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-1559] NPE in Level.isInRange</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-1559</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;I got an NPE during simple test:&lt;/p&gt;

&lt;p&gt;Test class:&lt;br/&gt;
public class Test {&lt;br/&gt;
	public static void main(String[] args) &lt;/p&gt;
{
		Logger logger = LogManager.getLogger(Test.class);
		logger.info(&quot;123&quot;);
	}
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;Maven part:&lt;br/&gt;
  &amp;lt;dependencies&amp;gt;&lt;br/&gt;
  	&amp;lt;dependency&amp;gt;&lt;br/&gt;
  		&amp;lt;groupId&amp;gt;org.apache.logging.log4j&amp;lt;/groupId&amp;gt;&lt;br/&gt;
  		&amp;lt;artifactId&amp;gt;log4j-core&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
  		&amp;lt;version&amp;gt;2.6.2&amp;lt;/version&amp;gt;&lt;br/&gt;
  	&amp;lt;/dependency&amp;gt;&lt;br/&gt;
  	&amp;lt;dependency&amp;gt;&lt;br/&gt;
  		&amp;lt;groupId&amp;gt;org.apache.logging.log4j&amp;lt;/groupId&amp;gt;&lt;br/&gt;
  		&amp;lt;artifactId&amp;gt;log4j-1.2-api&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
  		&amp;lt;version&amp;gt;2.6.2&amp;lt;/version&amp;gt;&lt;br/&gt;
  	&amp;lt;/dependency&amp;gt;&lt;br/&gt;
  &amp;lt;/dependencies&amp;gt;&lt;/p&gt;

&lt;p&gt;log4j2.xml part:&lt;br/&gt;
&amp;lt;Configuration&amp;gt;&lt;br/&gt;
	&amp;lt;Appenders&amp;gt;&lt;br/&gt;
		&amp;lt;Console name=&quot;StdErr&quot; target=&quot;SYSTEM_ERR&quot;&amp;gt;&lt;br/&gt;
			&amp;lt;LevelRangeFilter minLevel=&quot;WARN&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;/Console&amp;gt;&lt;br/&gt;
	&amp;lt;/Appenders&amp;gt;&lt;/p&gt;

&lt;p&gt;	&amp;lt;Loggers&amp;gt;&lt;br/&gt;
		&amp;lt;Root level=&quot;all&quot;&amp;gt;&lt;br/&gt;
			&amp;lt;AppenderRef ref=&quot;StdErr&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;/Root&amp;gt;&lt;br/&gt;
	&amp;lt;/Loggers&amp;gt;&lt;br/&gt;
&amp;lt;/Configuration&amp;gt;&lt;/p&gt;

&lt;p&gt;The NPE is thrown in:&lt;br/&gt;
	Level.isInRange(Level, Level) line: 155	&lt;br/&gt;
	LevelRangeFilter.filter(Level) line: 80	&lt;br/&gt;
	LevelRangeFilter.filter(LogEvent) line: 85	&lt;br/&gt;
	ConsoleAppender(AbstractFilterable).isFiltered(LogEvent) line: 135	&lt;br/&gt;
	AppenderControl.isFilteredByAppender(LogEvent) line: 150	&lt;br/&gt;
	AppenderControl.callAppender0(LogEvent) line: 127	&lt;br/&gt;
	AppenderControl.callAppenderPreventRecursion(LogEvent) line: 119	&lt;br/&gt;
	AppenderControl.callAppender(LogEvent) line: 84	&lt;br/&gt;
	LoggerConfig.callAppenders(LogEvent) line: 390	&lt;br/&gt;
	LoggerConfig.processLogEvent(LogEvent) line: 375	&lt;br/&gt;
	LoggerConfig.log(LogEvent) line: 359	&lt;br/&gt;
	LoggerConfig.log(String, String, Marker, Level, Message, Throwable) line: 349	&lt;br/&gt;
	AwaitCompletionReliabilityStrategy.log(Supplier&amp;lt;LoggerConfig&amp;gt;, String, String, Marker, Level, Message, Throwable) line: 63	&lt;br/&gt;
	Logger.logMessage(String, Level, Marker, Message, Throwable) line: 146	&lt;br/&gt;
	Logger(Category).maybeLog(String, Level, Object, Throwable) line: 452	&lt;br/&gt;
	Logger(Category).info(Object) line: 262	&lt;br/&gt;
	Test.main(String[]) line: 9	&lt;/p&gt;

&lt;p&gt;According to my investigation, degradation was introduced here:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1106&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/LOG4J2-1106&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Bug is in LevelRangeFilter, here:&lt;br/&gt;
final Level actualMaxLevel = minLevel == null ? Level.ERROR : maxLevel;&lt;br/&gt;
It has to be:&lt;br/&gt;
final Level actualMaxLevel = maxLevel == null ? Level.ERROR : maxLevel;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 10, Java 1.7&lt;/p&gt;</environment>
        <key id="13002417">LOG4J2-1559</key>
            <summary>NPE in Level.isInRange</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="andreyp1986">Andrey Plotkin</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Sep 2016 17:20:21 +0000</created>
                <updated>Mon, 12 Sep 2016 00:03:46 +0000</updated>
                            <resolved>Sat, 3 Sep 2016 18:52:34 +0000</resolved>
                                    <version>2.4</version>
                    <version>2.4.1</version>
                    <version>2.5</version>
                    <version>2.6</version>
                    <version>2.6.1</version>
                    <version>2.6.2</version>
                                    <fixVersion>2.7</fixVersion>
                                    <component>Filters</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15459158" author="githubbot" created="Fri, 2 Sep 2016 17:45:20 +0000"  >&lt;p&gt;GitHub user andreyp1986 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/42&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/42&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1559&quot; title=&quot;NPE in Level.isInRange&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1559&quot;&gt;&lt;del&gt;LOG4J2-1559&lt;/del&gt;&lt;/a&gt; Check proper value in LevelRangeFilter&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/andreyp1986/logging-log4j2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/andreyp1986/logging-log4j2&lt;/a&gt; master&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/42.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/42.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #42&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit b346fabcf54ed99e9e061147e0abb885c96eeb0b&lt;br/&gt;
Author: Andrey Plotkin &amp;lt;andreyp1986@gmail.com&amp;gt;&lt;br/&gt;
Date:   2016-09-02T17:40:43Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1559&quot; title=&quot;NPE in Level.isInRange&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1559&quot;&gt;&lt;del&gt;LOG4J2-1559&lt;/del&gt;&lt;/a&gt; Check proper value in LevelRangeFilter&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15459166" author="andreyp1986" created="Fri, 2 Sep 2016 17:48:40 +0000"  >&lt;p&gt;Fixed. See pull request &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/42&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/42&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15459170" author="andreyp1986" created="Fri, 2 Sep 2016 17:49:23 +0000"  >&lt;p&gt;Patch&lt;/p&gt;</comment>
                            <comment id="15459383" author="githubbot" created="Fri, 2 Sep 2016 19:29:40 +0000"  >&lt;p&gt;Github user garydgregory commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/42&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/42&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thank you for your report.&lt;br/&gt;
    Can you also provide a unit test the demonstrates the problem? IOW, it should fail without your patch.&lt;/p&gt;</comment>
                            <comment id="15459427" author="githubbot" created="Fri, 2 Sep 2016 19:50:17 +0000"  >&lt;p&gt;Github user andreyp1986 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/42&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/42&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    NP, I&apos;ll add a test in org.apache.logging.log4j.core.filter.LevelRangeFilterTest.&lt;br/&gt;
    Is it possible to somehow edit current pull request to add unit test commit?&lt;/p&gt;</comment>
                            <comment id="15459570" author="githubbot" created="Fri, 2 Sep 2016 20:55:54 +0000"  >&lt;p&gt;Github user jvz commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/42&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/42&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    If you want to keep it in a single commit, make your changes, then do `git commit --amend` and `git push --force`. There&apos;s also a way to do that using `git rebase -i`, but I find that overkill for this sort of thing.&lt;/p&gt;</comment>
                            <comment id="15460927" author="githubbot" created="Sat, 3 Sep 2016 11:25:08 +0000"  >&lt;p&gt;Github user andreyp1986 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/42&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/42&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    BTW, LevelRangeFilter default range values are wrong now.&lt;br/&gt;
    ```&lt;br/&gt;
            final Level actualMinLevel = minLevel == null ? Level.ERROR : minLevel;&lt;br/&gt;
            final Level actualMaxLevel = minLevel == null ? Level.ERROR : maxLevel;&lt;br/&gt;
    ```&lt;br/&gt;
    According to log4j 1.2, default range is full range.&lt;br/&gt;
    &lt;a href=&quot;https://logging.apache.org/log4j/extras/apidocs/org/apache/log4j/filter/LevelRangeFilter.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://logging.apache.org/log4j/extras/apidocs/org/apache/log4j/filter/LevelRangeFilter.html&lt;/a&gt;&lt;br/&gt;
    IE, better range should be OFF-&amp;gt;ALL.&lt;/p&gt;</comment>
                            <comment id="15460956" author="githubbot" created="Sat, 3 Sep 2016 11:46:12 +0000"  >&lt;p&gt;Github user andreyp1986 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/42&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/42&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Pushed a unit test. &lt;/p&gt;</comment>
                            <comment id="15461521" author="githubbot" created="Sat, 3 Sep 2016 18:52:17 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/42&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/42&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15461522" author="garydgregory" created="Sat, 3 Sep 2016 18:52:35 +0000"  >&lt;p&gt;In Git master, Please verify and close.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12826898" name="0001-LOG4J2-1559-Check-proper-value-in-LevelRangeFilter.patch" size="1432" author="andreyp1986" created="Fri, 2 Sep 2016 17:49:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 11 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33733:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>