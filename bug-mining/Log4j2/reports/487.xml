<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:33:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-1013] Log4j2 Main Arguments Lookup by name doesn&apos;t work</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-1013</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;Accessing Main Arguments by using index based look up works : ${main:0}&lt;br/&gt;
Accessing Main Arguments by using name based look up doesn&apos;t work : ${main:--file}&lt;/p&gt;

&lt;p&gt;When trying to access by name it doesn&apos;t retrieve the argument but retrieves &quot;-file&quot;.&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Windows 7 x64 Ultimate and Java 8U31 x64. Project created using Eclipse.&lt;/p&gt;</environment>
        <key id="12829791">LOG4J2-1013</key>
            <summary>Log4j2 Main Arguments Lookup by name doesn&apos;t work</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ioan_mihaila">Ioan Mihaila</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 May 2015 06:24:58 +0000</created>
                <updated>Sat, 22 Feb 2020 21:48:09 +0000</updated>
                            <resolved>Sat, 22 Feb 2020 21:48:09 +0000</resolved>
                                    <version>2.2</version>
                                    <fixVersion>2.13.1</fixVersion>
                                    <component>API</component>
                    <component>Core</component>
                    <component>Lookups</component>
                        <due></due>
                            <votes>4</votes>
                                    <watches>12</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="14548589" author="garydgregory" created="Mon, 18 May 2015 19:20:49 +0000"  >&lt;p&gt;Crud, I see two problems here and I am surprised you got this far.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Because the main map lookup is not a Log4j plugin but instead a special slot in the map lookup plugin, it is not registered in Log4j as a plugin (obvisouly). This means Log4j does not see it when it starts up and configures a logger context. I have a fix for that which makes the main map look up a plugin.&lt;/li&gt;
	&lt;li&gt;The next problem is that Log4j uses the characters &lt;em&gt;colon&lt;/em&gt; and &lt;em&gt;minus&lt;/em&gt; are variable value delimiters when it is parsing the pattern. This is defined here &lt;tt&gt;org.apache.logging.log4j.core.lookup.StrSubstitutor.DEFAULT_VALUE_DELIMITER&lt;/tt&gt;. I wonder if it is possible to escape the &lt;em&gt;minus&lt;/em&gt; in &lt;tt&gt;--file&lt;/tt&gt;...&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="14548648" author="garydgregory" created="Mon, 18 May 2015 19:48:43 +0000"  >&lt;p&gt;I do not see &quot;-&quot; documented on the site (so far) to separate a key from a value in patterns like ${key:value}. A simple way to fix this problem would be to only allow &quot;:&quot;.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="14549521" author="remkop@yahoo.com" created="Mon, 18 May 2015 23:44:31 +0000"  >&lt;p&gt;Are we doing string substitution on the command line parameters?&lt;br/&gt;
Based on your analysis (haven&apos;t looked at the code) It looks like this is causing the issue, but do we need to do substitution?&lt;/p&gt;</comment>
                            <comment id="14549524" author="garydgregory" created="Mon, 18 May 2015 23:46:09 +0000"  >&lt;p&gt;We are not changing the command line parameters, we are using them in a lookup.&lt;/p&gt;</comment>
                            <comment id="14549769" author="garydgregory" created="Tue, 19 May 2015 04:37:00 +0000"  >&lt;p&gt;I&apos;m not sure how to solve this yet but there is something funky going on. &lt;/p&gt;

&lt;p&gt;If you run &lt;tt&gt;org.apache.logging.log4j.core.lookup.MainInputArgumentsLookupTest&lt;/tt&gt; from Eclipse (for example) with the command line &lt;tt&gt;--file foo.txt&lt;/tt&gt; you will see:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2015-05-18 21:27:03,180 [main] [foo.txt][1][-file] ERROR: this is an error message
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;tt&gt;PatternLayout&lt;/tt&gt; config is:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;%d [%t] [${main:1}][${main:-1}][${main:--file}] %-5level: %msg%n%throwable
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;tt&gt;org.apache.logging.log4j.core.lookup.StrSubstitutor.DEFAULT_VALUE_DELIMITER&lt;/tt&gt; is:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; StrMatcher DEFAULT_VALUE_DELIMITER = StrMatcher.stringMatcher(&lt;span class=&quot;code-quote&quot;&gt;&quot;:-&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If I change it to:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; StrMatcher DEFAULT_VALUE_DELIMITER = StrMatcher.stringMatcher(&lt;span class=&quot;code-quote&quot;&gt;&quot;:&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The output is no good at all:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2015-05-18 21:29:48,255 [main] [1][-1][--file] ERROR: this is an error message
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If I change it to:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; StrMatcher DEFAULT_VALUE_DELIMITER = StrMatcher.stringMatcher(&lt;span class=&quot;code-quote&quot;&gt;&quot;***&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The output is good:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2015-05-18 21:30:31,470 [main] [foo.txt][${main:-1}][foo.txt] ERROR: this is an error message
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;What seems to happen is that the proper resolving mechanics need &lt;tt&gt;&quot;main:1&quot;&lt;/tt&gt; and &lt;tt&gt;&quot;main:-&lt;del&gt;file&quot;&lt;/tt&gt; to be passed down from &lt;tt&gt;org.apache.logging.log4j.core.lookup.StrSubstitutor.substitute(LogEvent, StringBuilder, int, int, List&amp;lt;String&amp;gt;)&lt;/tt&gt; so that the lookup can then break up the &lt;tt&gt;&quot;main&quot;&lt;/tt&gt; from the &lt;tt&gt;&quot;1&quot;&lt;/tt&gt; and the &lt;tt&gt;&quot;&lt;/del&gt;-file&quot;&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;The problem is when the &lt;tt&gt;StrSubstitutor&lt;/tt&gt; itself breaks up &lt;tt&gt;&quot;main:-&lt;del&gt;file&quot;&lt;/tt&gt; since it is configured with a &lt;tt&gt;DEFAULT_VALUE_DELIMITER = StrMatcher.stringMatcher(&quot;:&lt;/del&gt;&quot;)&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;There seems to be a conflict between the &lt;tt&gt;StrSubstitutor&lt;/tt&gt; we copied from Commons Lang and our {{StrLookup}}s.&lt;/p&gt;

&lt;p&gt;Help, thoughts and fixes welcome.&lt;/p&gt;

&lt;p&gt;Thank you,&lt;br/&gt;
Gary&lt;/p&gt;</comment>
                            <comment id="14679626" author="ralph.goers@dslextreme.com" created="Mon, 10 Aug 2015 06:11:26 +0000"  >&lt;p&gt;As far as StrSubstitutor is concerned all variables are of the form ${key:&amp;#45;defaultValue}.  StrSubstituor uses Lookups to resolve the key into a value. The Interpolator is a &quot;special&quot; Lookup that subdivides the key into &quot;LookupName:key&quot;. The default value portion should be left alone and should only be used when the key cannot be resolved. The problem I believe you are having is that StrSubstitutor is seeing the &quot;:-&quot; and is removing that along with the &quot;-file&quot; to use as the default value. Changing the value to &quot;:&quot; is just going to make things worse.&lt;/p&gt;

&lt;p&gt;I don&apos;t know that we document that you can have default values for lookups, but the syntax would be ${lookup:key:&amp;#45;defaultValue}.  As you noted we could change the default value delimiter to something else that we know wouldn&apos;t cause a problem - if you know what that is. Perhaps &quot;;-&quot; would work better since that would distinguish it from the Lookup key.&lt;/p&gt;</comment>
                            <comment id="15401026" author="remkop@yahoo.com" created="Sun, 31 Jul 2016 07:41:18 +0000"  >&lt;p&gt;Is anyone going to look at this one?&lt;/p&gt;</comment>
                            <comment id="15408928" author="garydgregory" created="Fri, 5 Aug 2016 05:58:11 +0000"  >&lt;p&gt;What about using &lt;tt&gt;${lookup:key:&apos;defaultValue&apos;&lt;/tt&gt;}&lt;/p&gt;

&lt;p&gt;Or double quotes (maybe ignore escaping for now).&lt;/p&gt;</comment>
                            <comment id="15707507" author="jvz" created="Wed, 30 Nov 2016 04:33:08 +0000"  >&lt;p&gt;How about escaping the dash with a backslash?&lt;/p&gt;</comment>
                            <comment id="15718674" author="garydgregory" created="Sat, 3 Dec 2016 20:16:50 +0000"  >&lt;p&gt;What would that look like from a user&apos;s POV? This could make our code quite more complicated, maybe. Thoughts on a patch?&lt;/p&gt;</comment>
                            <comment id="15718717" author="jvz" created="Sat, 3 Dec 2016 20:47:57 +0000"  >&lt;p&gt;I can&apos;t figure out how to write a backslash on jira, but just allowing backslashes as escape characters inside the lookup would go a long way. I&apos;m not even sure if you can embed a new line or similar things using escape sequences currently, so this could also open up support for that as well.&lt;/p&gt;</comment>
                            <comment id="15719525" author="remkop@yahoo.com" created="Sun, 4 Dec 2016 07:53:50 +0000"  >&lt;p&gt;The problem is that Interpolator is applied too late in StrSubstitutor. When StrSubstitutor encounters a potential ${variable}, it first tries to split it up into ${variable:-defaultValue} parts, and only after the default value part is stripped off, we try to apply the Interpolator. &lt;/p&gt;

&lt;p&gt;In our case, our intention is for &quot;main:&amp;#45;&amp;#45;file&quot; to be the passed to the Interpolator, where the actual key &quot;&amp;#45;&amp;#45;file&quot; is to be resolved by the MainMapLookup. What actually happens is that &quot;main&quot; is taken as the variable name and passed to the Interpolator. This cannot be further resolved, and the default value &quot;&amp;#45;file&quot; is shown.&lt;/p&gt;

&lt;p&gt;Instead of eagerly assigning part of the pattern to the default value, and resolving the key later, StrSubstitutor should resolve the lookup type first, and after determining the lookup type (&quot;main:&quot;, &quot;sys:&quot;, ...), split the pattern remainder in key and default value parts.&lt;/p&gt;</comment>
                            <comment id="15720001" author="remkop@yahoo.com" created="Sun, 4 Dec 2016 14:05:18 +0000"  >&lt;p&gt;Something like the attached patch LOG4J2_1013_select_underlying_StrLookup_before_stripping_off_potential_default_values.patch&lt;/p&gt;</comment>
                            <comment id="15721179" author="jvz" created="Mon, 5 Dec 2016 04:16:34 +0000"  >&lt;p&gt;So then no need to escape characters? I like it.&lt;/p&gt;</comment>
                            <comment id="15721361" author="remkop@yahoo.com" created="Mon, 5 Dec 2016 06:18:32 +0000"  >&lt;p&gt;No escaping required. &lt;br/&gt;
The test case Gary created (MainInputArgumentsLookupTest?) it now works with the patch. Didn&apos;t have time to run regression tests. &lt;/p&gt;</comment>
                            <comment id="15739411" author="remkop@yahoo.com" created="Sun, 11 Dec 2016 09:11:45 +0000"  >&lt;p&gt;The patch (as it stands) causes these tests to fail: LoggerDateTest, PropertyTest, XmlLoggerPropsTest, ContextMapLookupTest and StrSubstitutorTest. PropertyTest fails because Property key-value pairs in the configuration are not resolved correctly, StrSubstitutorTest fails with a NPE.&lt;/p&gt;

&lt;p&gt;I still think the general approach is good, but there is obviously still some remaining work here.&lt;/p&gt;</comment>
                            <comment id="16395529" author="fdiazgon" created="Mon, 12 Mar 2018 17:13:44 +0000"  >&lt;p&gt;Hi. I would like to work on this.&lt;/p&gt;

&lt;p&gt;Just one thing. I&apos;ve been looking at the code and I still don&apos;t understand why there is a DEFAULT_VALUE_DELIMITER. I can not find in the documentation anything about a default value for properties.&#160;For example, if I run &lt;tt&gt;org.apache.logging.log4j.core.lookup.MainInputArgumentsLookupTest&lt;/tt&gt; with the command line&#160;&lt;tt&gt;--file foo.txt&lt;/tt&gt; and the following pattern layout:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
%d [%t] [${main:1}][${main:-1}][${main:--file}][${main:v:-bar}] %-5level: %msg%n%throwable
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The output is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2018-03-12 18:04:00,962 [main] [foo.txt][1][-file][bar] ERROR: &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is an error message
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;bar&amp;#93;&lt;/span&gt; is ok because I didn&apos;t provide a value in the command line. However I can not find a similar example in the documentation.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16396374" author="githubbot" created="Tue, 13 Mar 2018 01:40:17 +0000"  >&lt;p&gt;GitHub user fdiazgon opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/159&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/159&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1013&quot; title=&quot;Log4j2 Main Arguments Lookup by name doesn&amp;#39;t work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1013&quot;&gt;&lt;del&gt;LOG4J2-1013&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;Lookups&amp;#93;&lt;/span&gt; Allow variables with dashes&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;JIRA Issue&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1013&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/LOG4J2-1013&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;    Move the logic of getting the default value from the StrSubstitutor to the Interpolator&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/fdiazgon/logging-log4j2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/fdiazgon/logging-log4j2&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1013&quot; title=&quot;Log4j2 Main Arguments Lookup by name doesn&amp;#39;t work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1013&quot;&gt;&lt;del&gt;LOG4J2-1013&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/159.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/159.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #159&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit e092b278aee02fe1cdf2431d35b395fcce963190&lt;br/&gt;
Author: fdiazgon &amp;lt;fediazgon@...&amp;gt;&lt;br/&gt;
Date:   2018-03-13T01:15:27Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1013&quot; title=&quot;Log4j2 Main Arguments Lookup by name doesn&amp;#39;t work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1013&quot;&gt;&lt;del&gt;LOG4J2-1013&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;Lookups&amp;#93;&lt;/span&gt; Allow variables with dashes&lt;/p&gt;

&lt;p&gt;    Move the logic of getting the default value from the StrSubstitutor to the Interpolator&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16396377" author="fdiazgon" created="Tue, 13 Mar 2018 01:44:43 +0000"  >&lt;p&gt;See&#160;&lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/159&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/159&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Using that branch, if I run&#160;&lt;tt&gt;org.apache.logging.log4j.core.lookup.MainInputArgumentsLookupTest&lt;/tt&gt;&#160;with the command line&#160;&lt;tt&gt;--file foo.txt&lt;/tt&gt;&#160;and the following pattern layout:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
%d [%t] [${main:1}][${main:-1}][${main:--file}][${main:bad:-${main:--file}}] %-5level: %msg%n%throwable
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The output is:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2018-03-13 02:23:40,824 [main] [foo.txt][1][foo.txt][foo.txt] ERROR: &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is an error message
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Taking a look at other tests, in particular in &lt;tt&gt;StrSubstitutorTest&lt;/tt&gt;, I think the output &lt;tt&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;/tt&gt; is correct because &lt;tt&gt;main&lt;/tt&gt; is the key in that particular case.&lt;/p&gt;

&lt;p&gt;I&apos;ve included some unit tests. All test pass.&lt;/p&gt;</comment>
                            <comment id="16625273" author="githubbot" created="Sun, 23 Sep 2018 22:12:20 +0000"  >&lt;p&gt;Github user fdiazgon commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/159&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/159&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hey @garydgregory @remkop. Could anyone check the status of this PR? It seems that Travis failed with an error not related to this code.&lt;/p&gt;</comment>
                            <comment id="16625720" author="githubbot" created="Mon, 24 Sep 2018 12:07:44 +0000"  >&lt;p&gt;Github user remkop commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/159&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/159&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Can you rebase on master? This will also trigger another build. &lt;/p&gt;</comment>
                            <comment id="16626172" author="githubbot" created="Mon, 24 Sep 2018 17:49:25 +0000"  >&lt;p&gt;Github user fdiazgon commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/159&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/159&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Done. Although I think I messed a little bit with the history. &lt;/p&gt;</comment>
                            <comment id="17042725" author="ralph.goers@dslextreme.com" created="Sat, 22 Feb 2020 21:48:09 +0000"  >&lt;p&gt;This was fixed as for &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2211&quot; title=&quot;MainMapLookup ${main:--file} placeholder doesn&amp;#39;t work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2211&quot;&gt;&lt;del&gt;LOG4J2-2211&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13133023">LOG4J2-2211</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12841669" name="LOG4J2_1013_select_underlying_StrLookup_before_stripping_off_potential_default_values.patch" size="6799" author="rpopma" created="Sun, 4 Dec 2016 14:05:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 38 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2epwn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>