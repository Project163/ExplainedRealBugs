<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:38:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-1748] RollingFile appender prevents a stand alone application to terminate for as long as 60 sec</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-1748</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;This code reproduces what I think is a bug of Log4j2.&lt;br/&gt;
It&apos;s a simple loop that logs 2000 messages with two appenders:&lt;br/&gt;
a console appender and a rolling file appender that rolls the file&lt;br/&gt;
every 5Kb. This limit is intentionally low to reproduce what I think is a bug.&lt;/p&gt;

&lt;p&gt;Here&apos;s the code.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; bug;
    
    &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.logging.log4j.LogManager;
    &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.logging.log4j.Logger;
    
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Example {
    
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Logger logger = LogManager.getLogger(Example.class);
    
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; InterruptedException {
            &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i&amp;lt;2000; i++){
                logger.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;This is log message #{}.&quot;&lt;/span&gt;, i);
                &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(0);
            }
        }
    
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here&apos;s the `log4j2.xml` configuration file.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;?&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Configuration status=&lt;span class=&quot;code-quote&quot;&gt;&quot;TRACE&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Appenders&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Console name=&lt;span class=&quot;code-quote&quot;&gt;&quot;stdout&quot;&lt;/span&gt; target=&lt;span class=&quot;code-quote&quot;&gt;&quot;SYSTEM_OUT&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;PatternLayout pattern=&lt;span class=&quot;code-quote&quot;&gt;&quot;%d{yyyy-MM-dd HH:mm:ss} %p %m%n&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Console&amp;gt;&lt;/span&gt;
            &amp;lt;RollingFile name=&lt;span class=&quot;code-quote&quot;&gt;&quot;roll-by-size&quot;&lt;/span&gt;
                         fileName=&lt;span class=&quot;code-quote&quot;&gt;&quot;target/log4j2/roll-by-size/app.log&quot;&lt;/span&gt;
                         filePattern=&lt;span class=&quot;code-quote&quot;&gt;&quot;target/log4j2/roll-by-size/app.%i.log.gz&quot;&lt;/span&gt;
                         ignoreExceptions=&lt;span class=&quot;code-quote&quot;&gt;&quot;false&quot;&lt;/span&gt;
                         append=&lt;span class=&quot;code-quote&quot;&gt;&quot;false&quot;&lt;/span&gt;&amp;gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;PatternLayout&amp;gt;&lt;/span&gt;
                    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Pattern&amp;gt;&lt;/span&gt;%d{yyyy-MM-dd HH:mm:ss} %p %m%n&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Pattern&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/PatternLayout&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Policies&amp;gt;&lt;/span&gt;
                    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;OnStartupTriggeringPolicy/&amp;gt;&lt;/span&gt;
                    &amp;lt;SizeBasedTriggeringPolicy
                            size=&lt;span class=&quot;code-quote&quot;&gt;&quot;5 KB&quot;&lt;/span&gt;/&amp;gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Policies&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/RollingFile&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Appenders&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Loggers&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Logger name=&lt;span class=&quot;code-quote&quot;&gt;&quot;bug&quot;&lt;/span&gt; level=&lt;span class=&quot;code-quote&quot;&gt;&quot;TRACE&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;AppenderRef ref=&lt;span class=&quot;code-quote&quot;&gt;&quot;roll-by-size&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Logger&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Root level=&lt;span class=&quot;code-quote&quot;&gt;&quot;DEBUG&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;AppenderRef ref=&lt;span class=&quot;code-quote&quot;&gt;&quot;stdout&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Root&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Loggers&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Configuration&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;What is strange is that when the application is launched you will see this logs in the console.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    2016-12-22 22:12:36 INFO This is log message #1993.
    2016-12-22 22:12:36 INFO This is log message #1994.
    2016-12-22 22:12:36 INFO This is log message #1995.
    2016-12-22 22:12:36 INFO This is log message #1996.
    2016-12-22 22:12:36 INFO This is log message #1997.
    2016-12-22 22:12:36 INFO This is log message #1998.
    2016-12-22 22:12:36 INFO This is log message #1999.
    2016-12-22 22:13:36,380 pool-1-thread-1 DEBUG Stopping LoggerContext[name=60199c81, org.apache.logging.log4j.core.LoggerContext@4597ec68]
    2016-12-22 22:13:36,380 pool-1-thread-1 DEBUG Stopping LoggerContext[name=60199c81, org.apache.logging.log4j.core.LoggerContext@4597ec68]...
    2016-12-22 22:13:36,381 pool-1-thread-1 TRACE Unregistering 1 MBeans: [org.apache.logging.log4j2:type=60199c81]
    2016-12-22 22:13:36,381 pool-1-thread-1 TRACE Unregistering 1 MBeans: [org.apache.logging.log4j2:type=60199c81,component=StatusLogger]
    2016-12-22 22:13:36,381 pool-1-thread-1 TRACE Unregistering 1 MBeans: [org.apache.logging.log4j2:type=60199c81,component=ContextSelector]
    2016-12-22 22:13:36,381 pool-1-thread-1 TRACE Unregistering 2 MBeans: [org.apache.logging.log4j2:type=60199c81,component=Loggers,name=bug, org.apache.logging.log4j2:type=60199c81,component=Lo
    ggers,name=]
    2016-12-22 22:13:36,381 pool-1-thread-1 TRACE Unregistering 2 MBeans: [org.apache.logging.log4j2:type=60199c81,component=Appenders,name=roll-by-size, org.apache.logging.log4j2:type=60199c81,c
    omponent=Appenders,name=stdout]
    2016-12-22 22:13:36,382 pool-1-thread-1 TRACE Unregistering but no MBeans found matching &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.logging.log4j2:type=60199c81,component=AsyncAppenders,name=*&apos;&lt;/span&gt;
    2016-12-22 22:13:36,382 pool-1-thread-1 TRACE Unregistering but no MBeans found matching &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.logging.log4j2:type=60199c81,component=AsyncLoggerRingBuffer&apos;&lt;/span&gt;
    2016-12-22 22:13:36,382 pool-1-thread-1 TRACE Unregistering but no MBeans found matching &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.logging.log4j2:type=60199c81,component=Loggers,name=*,subtype=RingBuffer&apos;&lt;/span&gt;
    2016-12-22 22:13:36,382 pool-1-thread-1 TRACE Stopping XmlConfiguration[location=C:\Users\danidemi\workspace\bug-log4j2-hanging-up-before-shutdown\target\classes\log4j2.xml]...
    2016-12-22 22:13:36,382 pool-1-thread-1 TRACE XmlConfiguration notified 3 ReliabilityStrategies that config will be stopped.
    2016-12-22 22:13:36,382 pool-1-thread-1 TRACE XmlConfiguration stopping 2 LoggerConfigs.
    2016-12-22 22:13:36,382 pool-1-thread-1 TRACE XmlConfiguration stopping root LoggerConfig.
    2016-12-22 22:13:36,382 pool-1-thread-1 TRACE XmlConfiguration notifying ReliabilityStrategies that appenders will be stopped.
    2016-12-22 22:13:36,382 pool-1-thread-1 TRACE XmlConfiguration stopping remaining Appenders.
    2016-12-22 22:13:36,383 pool-1-thread-1 DEBUG Shutting down RollingFileManager target/log4j2/roll-by-size/app.log
    2016-12-22 22:13:36,383 pool-1-thread-1 DEBUG Shut down RollingFileManager target/log4j2/roll-by-size/app.log, all resources released: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
    2016-12-22 22:13:36,383 pool-1-thread-1 DEBUG Shutting down OutputStreamManager SYSTEM_OUT.&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;.&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
    2016-12-22 22:13:36,383 pool-1-thread-1 DEBUG Shut down OutputStreamManager SYSTEM_OUT.&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;.&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, all resources released: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
    2016-12-22 22:13:36,384 pool-1-thread-1 TRACE XmlConfiguration stopped 2 remaining Appenders.
    2016-12-22 22:13:36,384 pool-1-thread-1 TRACE XmlConfiguration cleaning Appenders from 3 LoggerConfigs.
    2016-12-22 22:13:36,384 pool-1-thread-1 DEBUG Stopped XmlConfiguration[location=C:\Users\danidemi\workspace\bug-log4j2-hanging-up-before-shutdown\target\classes\log4j2.xml] OK
    2016-12-22 22:13:36,385 pool-1-thread-1 DEBUG Stopped LoggerContext[name=60199c81, org.apache.logging.log4j.core.LoggerContext@4597ec68]...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;What is strange is that the last log is issued at a certain time...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    2016-12-22 22:12:36 INFO This is log message #1999.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but the shutdown of log4j2 starts _&lt;em&gt;exactly&lt;/em&gt;_ one minute after the last &quot;business&quot; log message.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    2016-12-22 22:13:36,380 pool-1-thread-1 DEBUG Stopping LoggerContext[name=60199c81, org.apache.logging.log4j.core.LoggerContext@4597ec68]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;This is the problem! The business logic terminates, but log4j2 waits for one minute before allow the app to stop!&lt;/b&gt;&lt;br/&gt;
Why that ? I would prefer the application to stop immediately as one would probably expect.&lt;/p&gt;

&lt;p&gt;I investigated a little... this 60 sec delay seems more or less independent&lt;br/&gt;
from the number of messages being logged.&lt;/p&gt;

&lt;p&gt;However, if you change the `log4j2.xml` incrementing the size from 5Kb...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Policies&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;OnStartupTriggeringPolicy/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;SizeBasedTriggeringPolicy size=&lt;span class=&quot;code-quote&quot;&gt;&quot;5 KB&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Policies&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;to 5Mb...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Policies&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;OnStartupTriggeringPolicy/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;SizeBasedTriggeringPolicy size=&lt;span class=&quot;code-quote&quot;&gt;&quot;5 MB&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Policies&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;... that makes the application to stop immediately right after the last log message.&lt;br/&gt;
5Mb is a limit big enough not to require the rolling to actually take place.&lt;br/&gt;
So I think that is the rolling itself that in some way make this delay to occur.&lt;br/&gt;
I think it&apos;s a bug but... what do you think?&lt;/p&gt;

&lt;p&gt;I&apos;ve set up a small Maven project on my GitHub that demonstrates what I tried to explain here.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/danidemi/bug-log4j2-hanging-up-before-shutdown&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/danidemi/bug-log4j2-hanging-up-before-shutdown&lt;/a&gt;&lt;/p&gt;


</description>
                <environment>&lt;p&gt;Java8, Windows&lt;/p&gt;</environment>
        <key id="13030241">LOG4J2-1748</key>
            <summary>RollingFile appender prevents a stand alone application to terminate for as long as 60 sec</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mikaelstaldal">Mikael St&#229;ldal</assignee>
                                    <reporter username="danidemi">Daniele Demichelis</reporter>
                        <labels>
                            <label>RollingFile</label>
                            <label>bug</label>
                    </labels>
                <created>Thu, 22 Dec 2016 22:03:58 +0000</created>
                <updated>Wed, 25 Jan 2017 09:42:54 +0000</updated>
                            <resolved>Wed, 18 Jan 2017 19:44:28 +0000</resolved>
                                    <version>2.7</version>
                                    <fixVersion>2.8</fixVersion>
                                    <component>Appenders</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="15771292" author="garydgregory" created="Thu, 22 Dec 2016 22:39:25 +0000"  >&lt;p&gt;I think the rollover happens on a separate thread. When log4j shutdown, it cleans up after itself and waits for threads to finish and files to be closed. You might be seeing a delay because of this.&lt;/p&gt;</comment>
                            <comment id="15771374" author="garydgregory" created="Thu, 22 Dec 2016 23:17:51 +0000"  >&lt;p&gt;You could also try to add a call to Configurator.shutdown(...) at the end of your main. I did not realize that your example started Log4j implicitly but did not shutdown anything explicitly.&lt;/p&gt;</comment>
                            <comment id="15773730" author="danidemi" created="Fri, 23 Dec 2016 21:33:11 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt;,&lt;br/&gt;
Configurator.shutdown(...) solved the problem, thx.&lt;/p&gt;

&lt;p&gt;In the other hand, I was wondering... I come from years of using log4j 1.x and slf4j/logback where an explicit shutdown has never been needed. Can this behaviour of log4j2 be so counterintuitive that it is actually a bug ? I&apos;m just exposing my thoughs. What do you think ?&lt;/p&gt;</comment>
                            <comment id="15773960" author="remkop@yahoo.com" created="Sat, 24 Dec 2016 00:35:11 +0000"  >&lt;p&gt;If Log4j delays shutdown by one minute that&apos;s not good...&lt;/p&gt;

&lt;p&gt;Given that this only happens when a rollover actually happened, I suspect it has to do with the thread that executed the rollover action, or the threadpool holding that thread. &lt;/p&gt;</comment>
                            <comment id="15776596" author="remkop@yahoo.com" created="Sun, 25 Dec 2016 14:55:17 +0000"  >&lt;p&gt;I&apos;ve tracked down the cause: Log4j creates two ThreadPoolExecutors, one daemon and one non-daemon. These executors are created with the default settings, which sets the thread keepAliveTime to one minute.&lt;/p&gt;

&lt;p&gt;In the example, the application shuts down immediately after triggering a rollover. The rollover compresses the old file in a background thread in the non-daemon executor. Because the executor keeps this thread alive for one minute, and this is a non-daemon thread, the application as a whole is kept alive for one minute.&lt;/p&gt;

&lt;p&gt;We could do the rollover in a daemon thread, but this may result in partial rollovers if the application exits before the rollover is complete. An alternative is to make the keepAliveTime for the non-daemon executor pool shorter (like 500 millis or one second or so).&lt;/p&gt;</comment>
                            <comment id="15777636" author="garydgregory" created="Mon, 26 Dec 2016 05:43:45 +0000"  >&lt;p&gt;I do not think we should change the thread pool type to daemon, that would be too dangerous. How about making the KAT configurable with possibly a short default KAT?&lt;/p&gt;</comment>
                            <comment id="15778636" author="remkop@yahoo.com" created="Mon, 26 Dec 2016 16:44:47 +0000"  >&lt;p&gt;Fixed in commit d003404.&lt;/p&gt;

&lt;p&gt;Shortened the default keep-alive time for non-daemon threads from 60 seconds to 1 second. Users can configure this with system property &lt;tt&gt;log4j.nondaemon.threads.keepAliveSeconds&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Please verify and close.&lt;/p&gt;</comment>
                            <comment id="15808189" author="mikaelstaldal" created="Sat, 7 Jan 2017 21:32:56 +0000"  >&lt;p&gt;Wait, now when we have &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1623&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/LOG4J2-1623&lt;/a&gt;, do we really need to add a new system property for this?&lt;/p&gt;</comment>
                            <comment id="15808342" author="remkop@yahoo.com" created="Sat, 7 Jan 2017 23:44:06 +0000"  >&lt;p&gt;Good point. Unfortunately, that JIRA doesn&apos;t document the name of the system property that was introduced. I would have to go and look at the code to see what that property is called in order to judge whether it makes sense for both use cases. Not sure when I&apos;ll have time for that. &lt;/p&gt;

&lt;p&gt;Conversations like this would go faster if we document more detail on our changes in JIRA. That would also be useful for users. &lt;/p&gt;</comment>
                            <comment id="15809938" author="mikaelstaldal" created="Sun, 8 Jan 2017 20:10:29 +0000"  >&lt;p&gt;I have added it to the JIRA now.&lt;/p&gt;

&lt;p&gt;Here is goes also:&lt;/p&gt;

&lt;p&gt;This is a new top-level attribute in the configuration: &quot;shutdownTimeout&quot;. (Not a system property.)&lt;/p&gt;</comment>
                            <comment id="15810213" author="remkop@yahoo.com" created="Sun, 8 Jan 2017 23:33:30 +0000"  >&lt;p&gt;Thank you for updating the JIRA. &lt;br/&gt;
The fact that this is a Configuration attribute makes things difficult since the ExecutorServices live in the LoggerContext. The LoggerContext is created only once while the Configuration may be created many times (reconfiguration). &lt;/p&gt;

&lt;p&gt;So it may not be easy to combine the two. &lt;br/&gt;
It was a good idea though. &lt;/p&gt;</comment>
                            <comment id="15810287" author="ralph.goers@dslextreme.com" created="Mon, 9 Jan 2017 00:26:56 +0000"  >&lt;p&gt;Has this been tested with the latest code in master?  I have been testing the rolling file appender all weekend and I am not noticing this.  I suspect this was fixed as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1653&quot; title=&quot;CronTriggeringPolicy uses wrong naming and produces NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1653&quot;&gt;&lt;del&gt;LOG4J2-1653&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15810301" author="remkop@yahoo.com" created="Mon, 9 Jan 2017 00:37:14 +0000"  >&lt;p&gt;You wouldn&apos;t notice because I fixed it on Dec 27th by shortening the default keep-alive time for non-daemon threads from 60 seconds to 1 second. Before that you would only notice if the application shuts down immediately after triggering a rollover.&lt;/p&gt;</comment>
                            <comment id="15811073" author="mikaelstaldal" created="Mon, 9 Jan 2017 08:43:26 +0000"  >&lt;p&gt;I don&apos;t really understand why we can&apos;t use a configuration attribute for this since you have a configuration available when reading the system property (LoggerContext.setConfiguration). And it seems like the ExecutorService is created (and thus the system property read) each time a reconfiguration happens?&lt;/p&gt;

&lt;p&gt;BTW, shouldn&apos;t the old one be shut down?&lt;/p&gt;</comment>
                            <comment id="15811075" author="mikaelstaldal" created="Mon, 9 Jan 2017 08:44:26 +0000"  >&lt;p&gt;Anyway, we could change &quot;shutdownTimeout&quot; to a system property since it is new after the 2.7 release.&lt;/p&gt;

&lt;p&gt;I put it as a configuration attribute since it is related to &quot;shutdownHook&quot; which is already there.&lt;/p&gt;</comment>
                            <comment id="15811165" author="remkop@yahoo.com" created="Mon, 9 Jan 2017 09:27:48 +0000"  >&lt;p&gt;... and another good catch! Two actually.&lt;/p&gt;

&lt;p&gt;LoggerContext.setConfiguration: I was looking at the code on my phone during the commute and I missed that. Yes, Executors are initialized during setConfiguration so they should be able to use &lt;tt&gt;config.getShutdownTimeoutMillis&lt;/tt&gt;. By the way, looks like that value is zero if users don&apos;t specify anything. Zero is not a good threadpool timeout value (it is reasonable to let Threads live for at least 1 sec in the hope it can be reused for another task).&lt;/p&gt;

&lt;p&gt;Also, it looks like the old ExecutorServices are not shut down when a reconfiguration happens.&lt;/p&gt;</comment>
                            <comment id="15811186" author="remkop@yahoo.com" created="Mon, 9 Jan 2017 09:35:51 +0000"  >&lt;p&gt;I think it&apos;s a good idea to use the &lt;tt&gt;config.getShutdownTimeoutMillis&lt;/tt&gt; for the ExecutorService also. As long as we use minimum 1 sec, that should be okay. I am just swamped with work and don&apos;t have time to make these changes.&lt;/p&gt;</comment>
                            <comment id="15814711" author="mikaelstaldal" created="Tue, 10 Jan 2017 11:26:03 +0000"  >&lt;p&gt;A simple workaround is to add System.exit(0) at the end of the main method.&lt;/p&gt;</comment>
                            <comment id="15814716" author="mikaelstaldal" created="Tue, 10 Jan 2017 11:28:58 +0000"  >&lt;p&gt;After looking more closely at this, I think it actually make sense to have this separate. It is actually idle thread timeout, not shutdown timeout. It just happen to delay shutdown in some cases (when the app doesn&apos;t to &lt;tt&gt;System.exit(int)&lt;/tt&gt;).&lt;/p&gt;</comment>
                            <comment id="15816150" author="mikaelstaldal" created="Tue, 10 Jan 2017 20:52:24 +0000"  >&lt;p&gt;I am not sure that it will be dangerous to use a daemon thread since we have a shutdown hook. According to &lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/java/lang/Runtime.html#addShutdownHook-java.lang.Thread-&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.oracle.com/javase/8/docs/api/java/lang/Runtime.html#addShutdownHook-java.lang.Thread-&lt;/a&gt; :&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Note that daemon threads will continue to run during the shutdown sequence, as will non-daemon threads if shutdown was initiated by invoking the exit method. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If there is a risk for partial rollover with daemon threads, that risk exist for non-daemon threads as well if the application exits with &lt;tt&gt;System.exit(int)&lt;/tt&gt; (which is a quite common thing to do I guess).&lt;/p&gt;

&lt;p&gt;I suggest that we use daemon threads for both pools, and only treat them differently when shutting down (as we currently do). Then Remko&apos;s fix can be reverted.&lt;/p&gt;</comment>
                            <comment id="15816208" author="mikaelstaldal" created="Tue, 10 Jan 2017 21:13:55 +0000"  >&lt;p&gt;Created a bug for the failure to shut down old ExecutorServices: &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1780&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/LOG4J2-1780&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15816488" author="remkop@yahoo.com" created="Tue, 10 Jan 2017 23:13:20 +0000"  >&lt;p&gt;I believe (I could be wrong) that the non-daemon thread was introduced to prevent the compress action from being interrupted if the application ended immediately after a rollover. &lt;/p&gt;

&lt;p&gt;True, if forcefully killed this may still happen, but it makes sense to do compression in a non-daemon thread. &lt;/p&gt;</comment>
                            <comment id="15816578" author="garydgregory" created="Tue, 10 Jan 2017 23:55:57 +0000"  >&lt;p&gt;Yep, IIRC, that is why I did it that way.&lt;/p&gt;</comment>
                            <comment id="15819147" author="mikaelstaldal" created="Wed, 11 Jan 2017 21:02:06 +0000"  >&lt;p&gt;But I think the proper way to handle this is to have our shutdown hook wait for the task to finish (with a timeout), as we currently do. Then we can safely do it with a daemon thread.&lt;/p&gt;

&lt;p&gt;A library like Log4j should not start non-daemon threads since that will disrupt shutdown of the application, as shown by this bug. Remko&apos;s solution is just a work-around for a more fundamental underlying problem.&lt;/p&gt;</comment>
                            <comment id="15819271" author="ralph.goers@dslextreme.com" created="Wed, 11 Jan 2017 21:43:12 +0000"  >&lt;p&gt;I don&apos;t know why those two ThreadPoolExecutors were added.  The ConfigurationScheduler was added to be the single place that Log4j schedules work to be executed. I plan on modifying the RollingFileManager to use the ConfigurationScheduler to perform the rollover.  The only other thing using those ExecutorServices is the configuration file Watcher. What is interesting is that the WatchManager uses the ConfigurationScheduler to periodically check for events - so naturally the check happens on a Thread owned by the ConfigurationScheduler. When a file modification is found ConfigurationFileWatcher schedules another Thread to run to perform the reconfiguration. This used to be done by creating a Thread and running it. I guess Gary decided it was better to have an ExecutorService for this. Personally, I think this is wrong.  The reconfiguration shouldn&apos;t happen in a Thread owned by the ConfigurationScheduler because that will be stopped and restarted during reconfiguration. But I see no point in creating an ExecutorService to perform just this one task as it is overkill. &lt;/p&gt;

&lt;p&gt;I don&apos;t think this problem would exist if these ExecutorServices weren&apos;t present.&lt;/p&gt;</comment>
                            <comment id="15819273" author="ralph.goers@dslextreme.com" created="Wed, 11 Jan 2017 21:43:47 +0000"  >&lt;p&gt;I don&apos;t think that is a great recommendation. We should shut down cleanly.&lt;/p&gt;</comment>
                            <comment id="15819275" author="ralph.goers@dslextreme.com" created="Wed, 11 Jan 2017 21:44:44 +0000"  >&lt;p&gt;Again, lets just get rid of these ExecutorService instances.&lt;/p&gt;</comment>
                            <comment id="15819329" author="garydgregory" created="Wed, 11 Jan 2017 22:10:28 +0000"  >&lt;p&gt;Using executor services lets us centralize thread management instead of having &quot;new Thread()...&quot; and &quot;extends Thread&quot; sprinkled here and there.&lt;/p&gt;

&lt;p&gt;Using an executor service also let&apos;s us use easily a thread factory such that we can uniformly create and use Log4j ThreadFactory and Log4jThread instances.&lt;/p&gt;

&lt;p&gt;This let&apos;s us name threads nicely and uniformly instead on relying on each call site to optionally name a thread.&lt;/p&gt;

&lt;p&gt;The current users are: the rolling file manager, the Kafka manager, and the file watcher.&lt;/p&gt;

&lt;p&gt;I do not recall if I considered using or extending the configuration scheduler for any of these use cases.&lt;/p&gt;</comment>
                            <comment id="15819341" author="ralph.goers@dslextreme.com" created="Wed, 11 Jan 2017 22:14:26 +0000"  >&lt;p&gt;We have an ExecutorService. It is called ConfigurationScheduler. RollingFileManager and KafkaManager should be using that.&lt;/p&gt;

&lt;p&gt;It is OK to create a Thread where it makes more sense than having a service.&lt;/p&gt;</comment>
                            <comment id="15819604" author="remkop@yahoo.com" created="Thu, 12 Jan 2017 00:04:30 +0000"  >&lt;p&gt;Probably best to have only one ExecutorService. &lt;br/&gt;
Naming-wise, ConfigurationScheduler suggests a narrow scope. We should consider renaming it if the role of this service is to be extended for general purpose async work. &lt;/p&gt;

&lt;p&gt;I don&apos;t object to creating ad hoc Threads, but agree with Gary that we want to name Log4j threads uniformly so we want to go through our ThreadFactory and create Log4jThreads. &lt;/p&gt;</comment>
                            <comment id="15819620" author="remkop@yahoo.com" created="Thu, 12 Jan 2017 00:11:13 +0000"  >&lt;p&gt;If rollover compression is to take place in daemon threads with the shutdown hook being aware of rollover actions that are in flight and holding off shutdown until such actions complete, then it would be nice if the shutdown hook would be able to print a message like &quot;Log4j2 shutdown hook is waiting for compress action &amp;lt;absolute path to log file &amp;gt; to complete&quot;. &lt;/p&gt;

&lt;p&gt;The current solution to use non-daemon threads for compression is a lot simpler though. &lt;/p&gt;

&lt;p&gt;To clarify, my solution to the problem this JIRA was raised for was to limit the timeout to 1 sec. We can also decide not to try reusing these threads at all and compress in an ad hoc non-daemon thread. &lt;/p&gt;</comment>
                            <comment id="15820023" author="ralph.goers@dslextreme.com" created="Thu, 12 Jan 2017 03:18:41 +0000"  >&lt;p&gt;I have no problem using the ThreadFactory to create the thread. &lt;/p&gt;

&lt;p&gt;As I pointed out in &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1780&quot; title=&quot;Eliminate the use of the ExecutorServices in the LoggerContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1780&quot;&gt;&lt;del&gt;LOG4J2-1780&lt;/del&gt;&lt;/a&gt;, the reason for the name is that the ConfigurationScheduler is &quot;owned&quot; by the Configuration, so the name makes that relationship clear. It&apos;s purpose was to handle scheduling for anything associated with a configuration (which is almost everything). The only thing it really shouldn&apos;t handle is reconfiguration.&lt;/p&gt;</comment>
                            <comment id="15820604" author="mikaelstaldal" created="Thu, 12 Jan 2017 09:47:35 +0000"  >&lt;p&gt;Yes, I agree.&lt;/p&gt;

&lt;p&gt;But while waiting for us to fix it, it can be useful to have a workaround. And it is a simpler workaround than &lt;tt&gt;Configurator.shutdown()&lt;/tt&gt; as previously suggested.&lt;/p&gt;</comment>
                            <comment id="15820630" author="mikaelstaldal" created="Thu, 12 Jan 2017 09:58:59 +0000"  >&lt;p&gt;The root cause of the problem is using non-daemon threads. If we stop doing that, this problem will go away. ConfigurationScheduler uses daemon threads, which is good.&lt;/p&gt;

&lt;p&gt;Those executor services added to LoggerContext have caused two issues already, this one and &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1780&quot; title=&quot;Eliminate the use of the ExecutorServices in the LoggerContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1780&quot;&gt;&lt;del&gt;LOG4J2-1780&lt;/del&gt;&lt;/a&gt; (a potential resource leak).&lt;/p&gt;

&lt;p&gt;If we remove them and use ConfigurationScheduler, as Ralph suggests, those two issues will go away and we will not have to fix them separately.&lt;/p&gt;</comment>
                            <comment id="15820692" author="remkop@yahoo.com" created="Thu, 12 Jan 2017 10:34:21 +0000"  >&lt;p&gt;I disagree. We&apos;ve seen problems in the past when the Async rollover actions (the compression) was done in a daemon thread. A normal (unforced) shutdown could result in corrupted compressed log files. &lt;/p&gt;

&lt;p&gt;We either have a separate non-daemon ExecutorService, or spawn ad hoc non-daemon threads, or we do something complicated where the Shutdown hook tracks all Async tasks that are in flight. &lt;br/&gt;
Spawning ad hoc non-daemon threads for the async rollover tasks  is probably simplest. &lt;/p&gt;</comment>
                            <comment id="15820759" author="mikaelstaldal" created="Thu, 12 Jan 2017 11:11:23 +0000"  >&lt;p&gt;I don&apos;t think it is that complicated to keep track of tasks in flight, just use &lt;tt&gt;ExecutorService.awaitTermination(timeout, timeUnit)&lt;/tt&gt;, as already done in &lt;tt&gt;ExecutorServices.shutdown(timeout, timeUnit)&lt;/tt&gt;. The only missing part is to apply some default timeout (such as one second) when the &lt;tt&gt;timeout&lt;/tt&gt; parameter is zero (which it will be unless explicitly set by user).&lt;/p&gt;</comment>
                            <comment id="15820805" author="mikaelstaldal" created="Thu, 12 Jan 2017 11:38:36 +0000"  >&lt;p&gt;I have a solution for this and LOG4J-1780, please review branch &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt;and1780-remove-ExecutorService-from-LoggerContext&lt;/p&gt;</comment>
                            <comment id="15826786" author="githubbot" created="Tue, 17 Jan 2017 20:54:12 +0000"  >&lt;p&gt;GitHub user mikaelstaldal opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/54&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/54&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1780&quot; title=&quot;Eliminate the use of the ExecutorServices in the LoggerContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1780&quot;&gt;&lt;del&gt;LOG4J2-1780&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Remove executor services from LoggerContext&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/apache/logging-log4j2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt;and1780-remove-ExecutorService-from-LoggerContext&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/54.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/54.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #54&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 162a5e33ace3f1b4adf0726502083d0efb1e799a&lt;br/&gt;
Author: Mikael St&#229;ldal &amp;lt;mikael.staldal@magine.com&amp;gt;&lt;br/&gt;
Date:   2017-01-12T11:14:18Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1780&quot; title=&quot;Eliminate the use of the ExecutorServices in the LoggerContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1780&quot;&gt;&lt;del&gt;LOG4J2-1780&lt;/del&gt;&lt;/a&gt; Remove ExecutorServices from LoggerContext&lt;/p&gt;

&lt;p&gt;commit 9f2b0984682f708adb0359646127043b4f1561ae&lt;br/&gt;
Author: Mikael St&#229;ldal &amp;lt;mikael.staldal@magine.com&amp;gt;&lt;br/&gt;
Date:   2017-01-12T21:36:25Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1780&quot; title=&quot;Eliminate the use of the ExecutorServices in the LoggerContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1780&quot;&gt;&lt;del&gt;LOG4J2-1780&lt;/del&gt;&lt;/a&gt; Remove non-relevant documentation&lt;/p&gt;

&lt;p&gt;commit d3e04250d2e314aa33a51247698b3ed46503afd5&lt;br/&gt;
Author: Mikael St&#229;ldal &amp;lt;mikael.staldal@magine.com&amp;gt;&lt;br/&gt;
Date:   2017-01-12T21:36:58Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1780&quot; title=&quot;Eliminate the use of the ExecutorServices in the LoggerContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1780&quot;&gt;&lt;del&gt;LOG4J2-1780&lt;/del&gt;&lt;/a&gt; Fix changelog&lt;/p&gt;

&lt;p&gt;commit bd649ed99069add1a2b46b9e8e1079803d9507ad&lt;br/&gt;
Author: Mikael St&#229;ldal &amp;lt;mikael@staldal.nu&amp;gt;&lt;br/&gt;
Date:   2017-01-15T14:51:17Z&lt;/p&gt;

&lt;p&gt;    Merge branch &apos;master&apos; into &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt;and1780-remove-ExecutorService-from-LoggerContext&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Conflicts:&lt;/li&gt;
	&lt;li&gt;log4j-core/src/main/java/org/apache/logging/log4j/core/config/ConfigurationScheduler.java&lt;/li&gt;
	&lt;li&gt;src/changes/changes.xml&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;commit 80879c7dd6c76700a575c4dfe4e42bfde205faef&lt;br/&gt;
Author: Mikael St&#229;ldal &amp;lt;mikael@staldal.nu&amp;gt;&lt;br/&gt;
Date:   2017-01-15T14:56:42Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt; fix changelog&lt;/p&gt;

&lt;p&gt;commit e21a07e353a748e3a7dbefce20bf414aa425e1c7&lt;br/&gt;
Author: Mikael St&#229;ldal &amp;lt;mikael@staldal.nu&amp;gt;&lt;br/&gt;
Date:   2017-01-15T15:13:41Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt; revert some changes&lt;/p&gt;

&lt;p&gt;commit e390ad368f5549c2415856d9176a0cf32c2ced40&lt;br/&gt;
Author: Mikael St&#229;ldal &amp;lt;mikael@staldal.nu&amp;gt;&lt;br/&gt;
Date:   2017-01-15T15:29:31Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt; revert some changes&lt;/p&gt;

&lt;p&gt;commit 4fb38c620aaf62b37642387237da2a06c58b4d8c&lt;br/&gt;
Author: Mikael St&#229;ldal &amp;lt;mikael@staldal.nu&amp;gt;&lt;br/&gt;
Date:   2017-01-15T15:32:50Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt; fix&lt;/p&gt;

&lt;p&gt;commit f6341ad505c298fcf66c9b3183873cc5f6c4e844&lt;br/&gt;
Author: Mikael St&#229;ldal &amp;lt;mikael@staldal.nu&amp;gt;&lt;br/&gt;
Date:   2017-01-15T16:14:12Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt; fix&lt;/p&gt;

&lt;p&gt;commit 527b125c31e3ce654657bf7df5a9b2fc27d8ffd4&lt;br/&gt;
Author: Mikael St&#229;ldal &amp;lt;mikael@staldal.nu&amp;gt;&lt;br/&gt;
Date:   2017-01-15T16:18:39Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt; revert some changes&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15826787" author="githubbot" created="Tue, 17 Jan 2017 20:54:41 +0000"  >&lt;p&gt;Github user mikaelstaldal closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/54&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/54&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15826799" author="githubbot" created="Tue, 17 Jan 2017 20:58:48 +0000"  >&lt;p&gt;GitHub user mikaelstaldal opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/55&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/55&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1780&quot; title=&quot;Eliminate the use of the ExecutorServices in the LoggerContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1780&quot;&gt;&lt;del&gt;LOG4J2-1780&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Remove executor service from LoggerContext.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/apache/logging-log4j2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt;and1780-remove-ExecutorService-from-LoggerContext&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/55.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/55.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #55&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 162a5e33ace3f1b4adf0726502083d0efb1e799a&lt;br/&gt;
Author: Mikael St&#229;ldal &amp;lt;mikael.staldal@magine.com&amp;gt;&lt;br/&gt;
Date:   2017-01-12T11:14:18Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1780&quot; title=&quot;Eliminate the use of the ExecutorServices in the LoggerContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1780&quot;&gt;&lt;del&gt;LOG4J2-1780&lt;/del&gt;&lt;/a&gt; Remove ExecutorServices from LoggerContext&lt;/p&gt;

&lt;p&gt;commit 9f2b0984682f708adb0359646127043b4f1561ae&lt;br/&gt;
Author: Mikael St&#229;ldal &amp;lt;mikael.staldal@magine.com&amp;gt;&lt;br/&gt;
Date:   2017-01-12T21:36:25Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1780&quot; title=&quot;Eliminate the use of the ExecutorServices in the LoggerContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1780&quot;&gt;&lt;del&gt;LOG4J2-1780&lt;/del&gt;&lt;/a&gt; Remove non-relevant documentation&lt;/p&gt;

&lt;p&gt;commit d3e04250d2e314aa33a51247698b3ed46503afd5&lt;br/&gt;
Author: Mikael St&#229;ldal &amp;lt;mikael.staldal@magine.com&amp;gt;&lt;br/&gt;
Date:   2017-01-12T21:36:58Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1780&quot; title=&quot;Eliminate the use of the ExecutorServices in the LoggerContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1780&quot;&gt;&lt;del&gt;LOG4J2-1780&lt;/del&gt;&lt;/a&gt; Fix changelog&lt;/p&gt;

&lt;p&gt;commit bd649ed99069add1a2b46b9e8e1079803d9507ad&lt;br/&gt;
Author: Mikael St&#229;ldal &amp;lt;mikael@staldal.nu&amp;gt;&lt;br/&gt;
Date:   2017-01-15T14:51:17Z&lt;/p&gt;

&lt;p&gt;    Merge branch &apos;master&apos; into &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt;and1780-remove-ExecutorService-from-LoggerContext&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Conflicts:&lt;/li&gt;
	&lt;li&gt;log4j-core/src/main/java/org/apache/logging/log4j/core/config/ConfigurationScheduler.java&lt;/li&gt;
	&lt;li&gt;src/changes/changes.xml&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;commit 80879c7dd6c76700a575c4dfe4e42bfde205faef&lt;br/&gt;
Author: Mikael St&#229;ldal &amp;lt;mikael@staldal.nu&amp;gt;&lt;br/&gt;
Date:   2017-01-15T14:56:42Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt; fix changelog&lt;/p&gt;

&lt;p&gt;commit e21a07e353a748e3a7dbefce20bf414aa425e1c7&lt;br/&gt;
Author: Mikael St&#229;ldal &amp;lt;mikael@staldal.nu&amp;gt;&lt;br/&gt;
Date:   2017-01-15T15:13:41Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt; revert some changes&lt;/p&gt;

&lt;p&gt;commit e390ad368f5549c2415856d9176a0cf32c2ced40&lt;br/&gt;
Author: Mikael St&#229;ldal &amp;lt;mikael@staldal.nu&amp;gt;&lt;br/&gt;
Date:   2017-01-15T15:29:31Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt; revert some changes&lt;/p&gt;

&lt;p&gt;commit 4fb38c620aaf62b37642387237da2a06c58b4d8c&lt;br/&gt;
Author: Mikael St&#229;ldal &amp;lt;mikael@staldal.nu&amp;gt;&lt;br/&gt;
Date:   2017-01-15T15:32:50Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt; fix&lt;/p&gt;

&lt;p&gt;commit f6341ad505c298fcf66c9b3183873cc5f6c4e844&lt;br/&gt;
Author: Mikael St&#229;ldal &amp;lt;mikael@staldal.nu&amp;gt;&lt;br/&gt;
Date:   2017-01-15T16:14:12Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt; fix&lt;/p&gt;

&lt;p&gt;commit 527b125c31e3ce654657bf7df5a9b2fc27d8ffd4&lt;br/&gt;
Author: Mikael St&#229;ldal &amp;lt;mikael@staldal.nu&amp;gt;&lt;br/&gt;
Date:   2017-01-15T16:18:39Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt; revert some changes&lt;/p&gt;

&lt;p&gt;commit 1974c8202eed10d0c971f493ca2c09a05bfc6cbb&lt;br/&gt;
Author: Mikael St&#229;ldal &amp;lt;mikael@staldal.nu&amp;gt;&lt;br/&gt;
Date:   2017-01-17T20:53:39Z&lt;/p&gt;

&lt;p&gt;    Merge branch &apos;master&apos; into &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt;and1780-remove-ExecutorService-from-LoggerContext&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Conflicts:&lt;/li&gt;
	&lt;li&gt;log4j-core/src/main/java/org/apache/logging/log4j/core/appender/rolling/RollingFileManager.java&lt;/li&gt;
	&lt;li&gt;src/changes/changes.xml&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;commit 3917b66ec79cc8fe103a6eb49badf934d6e64182&lt;br/&gt;
Author: Mikael St&#229;ldal &amp;lt;mikael@staldal.nu&amp;gt;&lt;br/&gt;
Date:   2017-01-17T20:57:26Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt; fix merge issue&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15826975" author="githubbot" created="Tue, 17 Jan 2017 22:42:30 +0000"  >&lt;p&gt;Github user jvz commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/55#discussion_r96528818&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/55#discussion_r96528818&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: log4j-core/src/main/java/org/apache/logging/log4j/core/appender/mom/kafka/KafkaManager.java &amp;#8212;&lt;br/&gt;
    @@ -73,17 +74,19 @@ public boolean releaseSub(final long timeout, final TimeUnit timeUnit) {&lt;br/&gt;
         private void closeProducer(final long timeout, final TimeUnit timeUnit) {&lt;br/&gt;
             if (producer != null) {&lt;br/&gt;
                 // This thread is a workaround for this Kafka issue: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-1660&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-1660&lt;/a&gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;final Runnable task = new Runnable() {&lt;br/&gt;
    +           final Thread closeThread = new Log4jThread(new Runnable() {&lt;br/&gt;
                     @Override&lt;br/&gt;
                     public void run() 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {                         if (producer != null) {
                             producer.close();
                         }                     }&lt;/span&gt; &lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;};&lt;br/&gt;
    +            }, &quot;KafkaManager-CloseThread&quot;);&lt;br/&gt;
    +            closeThread.setDaemon(true); // avoid blocking JVM shutdown&lt;br/&gt;
    +            closeThread.start();&lt;br/&gt;
                 try 
{
    -                getLoggerContext().submitDaemon(task).get(timeout, timeUnit);
    -            }
&lt;p&gt; catch (InterruptedException | ExecutionException | TimeoutException e) &lt;/p&gt;
{
    +                closeThread.join(timeUnit.toMillis(timeout));
    +            }
&lt;p&gt; catch (final InterruptedException ignore) {&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Shouldn&apos;t you reset the interrupt flag after catching this?&lt;/p&gt;</comment>
                            <comment id="15827671" author="githubbot" created="Wed, 18 Jan 2017 09:02:05 +0000"  >&lt;p&gt;Github user mikaelstaldal commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/55&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/55&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I like my code &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;    (testing reviewing)&lt;/p&gt;</comment>
                            <comment id="15827720" author="githubbot" created="Wed, 18 Jan 2017 09:33:14 +0000"  >&lt;p&gt;Github user mikaelstaldal commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/55#discussion_r96594353&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/55#discussion_r96594353&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: log4j-core/src/main/java/org/apache/logging/log4j/core/appender/mom/kafka/KafkaManager.java &amp;#8212;&lt;br/&gt;
    @@ -73,17 +74,19 @@ public boolean releaseSub(final long timeout, final TimeUnit timeUnit) {&lt;br/&gt;
         private void closeProducer(final long timeout, final TimeUnit timeUnit) {&lt;br/&gt;
             if (producer != null) {&lt;br/&gt;
                 // This thread is a workaround for this Kafka issue: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-1660&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-1660&lt;/a&gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;final Runnable task = new Runnable() {&lt;br/&gt;
    +           final Thread closeThread = new Log4jThread(new Runnable() {&lt;br/&gt;
                     @Override&lt;br/&gt;
                     public void run() 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {                         if (producer != null) {
                             producer.close();
                         }                     }&lt;/span&gt; &lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;};&lt;br/&gt;
    +            }, &quot;KafkaManager-CloseThread&quot;);&lt;br/&gt;
    +            closeThread.setDaemon(true); // avoid blocking JVM shutdown&lt;br/&gt;
    +            closeThread.start();&lt;br/&gt;
                 try 
{
    -                getLoggerContext().submitDaemon(task).get(timeout, timeUnit);
    -            }
&lt;p&gt; catch (InterruptedException | ExecutionException | TimeoutException e) &lt;/p&gt;
{
    +                closeThread.join(timeUnit.toMillis(timeout));
    +            }
&lt;p&gt; catch (final InterruptedException ignore) {&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Should I? Why?&lt;/p&gt;</comment>
                            <comment id="15828319" author="githubbot" created="Wed, 18 Jan 2017 16:03:41 +0000"  >&lt;p&gt;Github user jvz commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/55#discussion_r96668615&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/55#discussion_r96668615&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: log4j-core/src/main/java/org/apache/logging/log4j/core/appender/mom/kafka/KafkaManager.java &amp;#8212;&lt;br/&gt;
    @@ -73,17 +74,19 @@ public boolean releaseSub(final long timeout, final TimeUnit timeUnit) {&lt;br/&gt;
         private void closeProducer(final long timeout, final TimeUnit timeUnit) {&lt;br/&gt;
             if (producer != null) {&lt;br/&gt;
                 // This thread is a workaround for this Kafka issue: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-1660&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-1660&lt;/a&gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;final Runnable task = new Runnable() {&lt;br/&gt;
    +           final Thread closeThread = new Log4jThread(new Runnable() {&lt;br/&gt;
                     @Override&lt;br/&gt;
                     public void run() 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {                         if (producer != null) {
                             producer.close();
                         }                     }&lt;/span&gt; &lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;};&lt;br/&gt;
    +            }, &quot;KafkaManager-CloseThread&quot;);&lt;br/&gt;
    +            closeThread.setDaemon(true); // avoid blocking JVM shutdown&lt;br/&gt;
    +            closeThread.start();&lt;br/&gt;
                 try 
{
    -                getLoggerContext().submitDaemon(task).get(timeout, timeUnit);
    -            }
&lt;p&gt; catch (InterruptedException | ExecutionException | TimeoutException e) &lt;/p&gt;
{
    +                closeThread.join(timeUnit.toMillis(timeout));
    +            }
&lt;p&gt; catch (final InterruptedException ignore) {&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    The thread would have been interrupted for a reason, so it&apos;s generally good to handle the exception and reset the interrupt flag (it doesn&apos;t necessarily cause an exception to be thrown; code has to manually check a thread&apos;s interrupt status according to the javadocs).&lt;/p&gt;</comment>
                            <comment id="15828375" author="jira-bot" created="Wed, 18 Jan 2017 16:40:39 +0000"  >&lt;p&gt;Commit 571fb8df680b0db94ad1b6afed478e915b3411a3 in logging-log4j2&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt;and1780-remove-ExecutorService-from-LoggerContext from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mikaelstaldal&quot; class=&quot;user-hover&quot; rel=&quot;mikaelstaldal&quot;&gt;mikaelstaldal&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=571fb8d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=571fb8d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1780&quot; title=&quot;Eliminate the use of the ExecutorServices in the LoggerContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1780&quot;&gt;&lt;del&gt;LOG4J2-1780&lt;/del&gt;&lt;/a&gt; Restore interrupted flag on thread&lt;/p&gt;</comment>
                            <comment id="15828377" author="jira-bot" created="Wed, 18 Jan 2017 16:40:41 +0000"  >&lt;p&gt;Commit d5071900b0c72fccd8bf7e2ccee3a8164d4fdb25 in logging-log4j2&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt;and1780-remove-ExecutorService-from-LoggerContext from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mikaelstaldal&quot; class=&quot;user-hover&quot; rel=&quot;mikaelstaldal&quot;&gt;mikaelstaldal&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=d507190&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=d507190&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge remote-tracking branch &apos;origin/&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt;and1780-remove-ExecutorService-from-LoggerContext&apos; into &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt;and1780-remove-ExecutorService-from-LoggerContext&lt;/p&gt;</comment>
                            <comment id="15828378" author="jira-bot" created="Wed, 18 Jan 2017 16:40:42 +0000"  >&lt;p&gt;Commit d5071900b0c72fccd8bf7e2ccee3a8164d4fdb25 in logging-log4j2&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt;and1780-remove-ExecutorService-from-LoggerContext from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mikaelstaldal&quot; class=&quot;user-hover&quot; rel=&quot;mikaelstaldal&quot;&gt;mikaelstaldal&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=d507190&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=d507190&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge remote-tracking branch &apos;origin/&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt;and1780-remove-ExecutorService-from-LoggerContext&apos; into &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt;and1780-remove-ExecutorService-from-LoggerContext&lt;/p&gt;</comment>
                            <comment id="15828379" author="githubbot" created="Wed, 18 Jan 2017 16:41:03 +0000"  >&lt;p&gt;Github user mikaelstaldal commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/55#discussion_r96677972&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/55#discussion_r96677972&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: log4j-core/src/main/java/org/apache/logging/log4j/core/appender/mom/kafka/KafkaManager.java &amp;#8212;&lt;br/&gt;
    @@ -73,17 +74,19 @@ public boolean releaseSub(final long timeout, final TimeUnit timeUnit) {&lt;br/&gt;
         private void closeProducer(final long timeout, final TimeUnit timeUnit) {&lt;br/&gt;
             if (producer != null) {&lt;br/&gt;
                 // This thread is a workaround for this Kafka issue: &lt;a href=&quot;https://issues.apache.org/jira/browse/KAFKA-1660&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-1660&lt;/a&gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;final Runnable task = new Runnable() {&lt;br/&gt;
    +           final Thread closeThread = new Log4jThread(new Runnable() {&lt;br/&gt;
                     @Override&lt;br/&gt;
                     public void run() 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {                         if (producer != null) {
                             producer.close();
                         }                     }&lt;/span&gt; &lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;};&lt;br/&gt;
    +            }, &quot;KafkaManager-CloseThread&quot;);&lt;br/&gt;
    +            closeThread.setDaemon(true); // avoid blocking JVM shutdown&lt;br/&gt;
    +            closeThread.start();&lt;br/&gt;
                 try 
{
    -                getLoggerContext().submitDaemon(task).get(timeout, timeUnit);
    -            }
&lt;p&gt; catch (InterruptedException | ExecutionException | TimeoutException e) &lt;/p&gt;
{
    +                closeThread.join(timeUnit.toMillis(timeout));
    +            }
&lt;p&gt; catch (final InterruptedException ignore) {&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    OK.&lt;/p&gt;</comment>
                            <comment id="15828492" author="githubbot" created="Wed, 18 Jan 2017 18:12:26 +0000"  >&lt;p&gt;Github user jvz commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/55&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/55&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Did GitHub parse your comment or did you manually approve the PR?&lt;/p&gt;</comment>
                            <comment id="15828495" author="githubbot" created="Wed, 18 Jan 2017 18:15:27 +0000"  >&lt;p&gt;Github user rgoers commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/55&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/55&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I manually approved it.&lt;/p&gt;</comment>
                            <comment id="15828646" author="jira-bot" created="Wed, 18 Jan 2017 19:42:44 +0000"  >&lt;p&gt;Commit 571fb8df680b0db94ad1b6afed478e915b3411a3 in logging-log4j2&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mikaelstaldal&quot; class=&quot;user-hover&quot; rel=&quot;mikaelstaldal&quot;&gt;mikaelstaldal&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=571fb8d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=571fb8d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1780&quot; title=&quot;Eliminate the use of the ExecutorServices in the LoggerContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1780&quot;&gt;&lt;del&gt;LOG4J2-1780&lt;/del&gt;&lt;/a&gt; Restore interrupted flag on thread&lt;/p&gt;</comment>
                            <comment id="15828648" author="jira-bot" created="Wed, 18 Jan 2017 19:42:46 +0000"  >&lt;p&gt;Commit d5071900b0c72fccd8bf7e2ccee3a8164d4fdb25 in logging-log4j2&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mikaelstaldal&quot; class=&quot;user-hover&quot; rel=&quot;mikaelstaldal&quot;&gt;mikaelstaldal&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=d507190&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=d507190&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge remote-tracking branch &apos;origin/&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt;and1780-remove-ExecutorService-from-LoggerContext&apos; into &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt;and1780-remove-ExecutorService-from-LoggerContext&lt;/p&gt;</comment>
                            <comment id="15828649" author="jira-bot" created="Wed, 18 Jan 2017 19:42:47 +0000"  >&lt;p&gt;Commit d5071900b0c72fccd8bf7e2ccee3a8164d4fdb25 in logging-log4j2&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mikaelstaldal&quot; class=&quot;user-hover&quot; rel=&quot;mikaelstaldal&quot;&gt;mikaelstaldal&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=d507190&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=d507190&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge remote-tracking branch &apos;origin/&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt;and1780-remove-ExecutorService-from-LoggerContext&apos; into &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1748&quot; title=&quot;RollingFile appender prevents a stand alone application to terminate for as long as 60 sec&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1748&quot;&gt;&lt;del&gt;LOG4J2-1748&lt;/del&gt;&lt;/a&gt;and1780-remove-ExecutorService-from-LoggerContext&lt;/p&gt;</comment>
                            <comment id="15828651" author="githubbot" created="Wed, 18 Jan 2017 19:42:57 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/55&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/55&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15828657" author="mikaelstaldal" created="Wed, 18 Jan 2017 19:44:28 +0000"  >&lt;p&gt;In Git master.  Please verify (again) and close.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13008509">LOG4J2-1623</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 43 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i37yk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>