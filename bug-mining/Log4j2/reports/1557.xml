<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:42:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-3334] Configurator.setLevel adding an incomplete LoggerConfig</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-3334</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;I am trying to set the log levels for my application programatically and I was using the method: &lt;b&gt;Configurator.setLevel&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; setLevel(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; loggerName, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Level level, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Configuration config) {
    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; set;
    LoggerConfig loggerConfig = config.getLoggerConfig(loggerName);
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!loggerName.equals(loggerConfig.getName())) {
        &lt;span class=&quot;code-comment&quot;&gt;// TODO Should additivity be inherited?
&lt;/span&gt;        loggerConfig = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LoggerConfig(loggerName, level, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
        config.addLogger(loggerName, loggerConfig);
        loggerConfig.setLevel(level);
        set = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
        set = setLevel(loggerConfig, level);
    }
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; set;
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In my applicationI have the following loggers structure:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;com.myapp.service&lt;/b&gt; -&amp;gt; set on TRACE from XML config&lt;/p&gt;

&lt;p&gt;Then I have the class: com.myapp.service.common.ServiceUtils with a logger defined for it like this:&#160;&lt;tt&gt;Logger log = LogManager.getLogger(this.getClass());&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;And in this class, a bunch of log statements on &lt;b&gt;TRACE&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Then I am trying to set the log level to &lt;b&gt;INFO&lt;/b&gt; for the whole com.myapp.service.common package. To suppress the &lt;b&gt;TRACE&lt;/b&gt; logs for example.&lt;/p&gt;

&lt;p&gt;If I do this , Configurator will do the following:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;will try to fetch a LoggerConfig for the &lt;b&gt;common&lt;/b&gt; package&lt;/li&gt;
	&lt;li&gt;because there is nothing defined for that package only for the parent ... it will return the config for that package&lt;/li&gt;
	&lt;li&gt;because the names differ it will create a new LogConfig with the new logger name and level but &lt;font color=&quot;#FF0000&quot;&gt;without any appenders or appenders refs&lt;/font&gt;&lt;/li&gt;
	&lt;li&gt;then it will add this to the config and reload loggers&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;At this moment the logs from the end class are not printed anymore.&lt;/p&gt;

&lt;p&gt;Now , I again set the level for com.myapp.service.common logger , but this time to &lt;b&gt;TRACE&lt;/b&gt;. In order to re-enable the logs.&lt;/p&gt;

&lt;p&gt;Still , I can&apos;t see anything in the logs.&lt;/p&gt;

&lt;p&gt;After investigating it seems that adding the LoggerConfig without the appenders copied from parent , is causing this behaviour.&lt;/p&gt;

&lt;p&gt;If for example I change the setLevel method to also add the appender refs and appenders when creating the LoggerConfig object , everything is good and logging works as expected.&lt;/p&gt;

&lt;p&gt;&#160;Thank you&lt;/p&gt;</description>
                <environment></environment>
        <key id="13422520">LOG4J2-3334</key>
            <summary>Configurator.setLevel adding an incomplete LoggerConfig</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mlemnaru">Mircea Lemnaru</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Jan 2022 12:29:44 +0000</created>
                <updated>Sun, 20 Feb 2022 08:00:14 +0000</updated>
                                            <version>2.17.1</version>
                                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17495096" author="ralph.goers@dslextreme.com" created="Sun, 20 Feb 2022 07:48:10 +0000"  >&lt;p&gt;I have created a test for this in 2.17.2-SNAPSHOT and it works as expected. Can you please retest using the latest snapshot?&lt;/p&gt;</comment>
                            <comment id="17495097" author="jira-bot" created="Sun, 20 Feb 2022 07:49:25 +0000"  >&lt;p&gt;Commit 5e052c903bcbc29c8f4be5e7b08413c1e121312a in logging-log4j2&apos;s branch refs/heads/release-2.x from Ralph Goers&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=5e052c9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=5e052c9&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3334&quot; title=&quot;Configurator.setLevel adding an incomplete LoggerConfig&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3334&quot;&gt;LOG4J2-3334&lt;/a&gt; - Create test to try to verify the problem&lt;/p&gt;</comment>
                            <comment id="17495098" author="jira-bot" created="Sun, 20 Feb 2022 08:00:14 +0000"  >&lt;p&gt;Commit f11dc6df9ae6367d96b73aed77e6e8c84e4cb4c7 in logging-log4j2&apos;s branch refs/heads/master from Ralph Goers&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=f11dc6d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=f11dc6d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3334&quot; title=&quot;Configurator.setLevel adding an incomplete LoggerConfig&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3334&quot;&gt;LOG4J2-3334&lt;/a&gt; - Create test to try to verify the problem&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 38 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0yk6w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>