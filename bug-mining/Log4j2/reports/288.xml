<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:32:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-633] Need to check permissions when registering shutdown hooks and obtaining classloaders</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-633</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;&lt;a href=&quot;http://docs.oracle.com/javase/6/docs/api/java/lang/RuntimePermission.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.oracle.com/javase/6/docs/api/java/lang/RuntimePermission.html&lt;/a&gt; documents what operations require RuntimePermission checks. Log4j 2 doesn&apos;t check these in a lot of cases. &lt;/p&gt;

&lt;p&gt;Log4j should check the permissions but do so in a manner that doesn&apos;t significantly impact performance. For example, registering shutdown hooks is infrequent and so the overhead is minimal while calls to obtain a Classloader are done much more frequently and so the permission checks need to be minimized.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12712604">LOG4J2-633</key>
            <summary>Need to check permissions when registering shutdown hooks and obtaining classloaders</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rgoers">Ralph Goers</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 May 2014 15:39:54 +0000</created>
                <updated>Fri, 1 Dec 2023 23:43:39 +0000</updated>
                            <resolved>Fri, 1 Dec 2023 23:43:39 +0000</resolved>
                                    <version>2.0-rc1</version>
                                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13991265" author="jvz" created="Tue, 6 May 2014 22:39:00 +0000"  >&lt;p&gt;We should do permission checks in static initializers. Or better yet, we can make a sort of PermissionManager or something that does an initial check to see if PrivilegedActions are required.&lt;/p&gt;</comment>
                            <comment id="14020449" author="jvz" created="Fri, 6 Jun 2014 22:18:15 +0000"  >&lt;p&gt;Here&apos;s a list of permissions that look relevant to our code that I know of:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;getClassLoader&lt;/li&gt;
	&lt;li&gt;shutdownHooks&lt;/li&gt;
	&lt;li&gt;getStackTrace&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I&apos;ll go hunting through the other permissions to see what we might need.&lt;/p&gt;</comment>
                            <comment id="14020482" author="jvz" created="Fri, 6 Jun 2014 22:40:46 +0000"  >&lt;p&gt;Added checks for getClassLoader, getStackTrace, and suppressAccessChecks.&lt;/p&gt;</comment>
                            <comment id="15185692" author="jvz" created="Tue, 8 Mar 2016 20:14:22 +0000"  >&lt;p&gt;Looks like this should be added to DefaultShutdownCallbackRegistry which means we might need a fallback no-op registry for when we can&apos;t do anything due to permission issues.&lt;/p&gt;</comment>
                            <comment id="17792262" author="jvz" created="Fri, 1 Dec 2023 23:43:39 +0000"  >&lt;p&gt;SecurityManager is going away after Java 21, and Java 21 doesn&apos;t allow for specifying a custom SecurityManager. This issue is no longer relevant.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>390920</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1vbyf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>391155</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>