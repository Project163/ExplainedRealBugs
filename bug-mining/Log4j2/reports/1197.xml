<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:39:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-2283] ParserConfigurationException when using Log4j with oracle.xml.jaxp.JXDocumentBuilderFactory</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-2283</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;I am using Junit 4.10 and log4j 2.10 versions. When I run the junit test, I am unable to get the logs and following is the error when I turn on the log4j debugging:&lt;/p&gt;

&lt;p&gt;ERROR StatusLogger Error parsing /scratch/log4j.xml&lt;br/&gt;
 javax.xml.parsers.ParserConfigurationException&lt;br/&gt;
 at oracle.xml.jaxp.JXDocumentBuilderFactory.setFeature(JXDocumentBuilderFactory.java:374)&lt;br/&gt;
 at org.apache.logging.log4j.core.config.xml.XmlConfiguration.setFeature(XmlConfiguration.java:213)&lt;br/&gt;
 at org.apache.logging.log4j.core.config.xml.XmlConfiguration.disableDtdProcessing(XmlConfiguration.java:205)&lt;br/&gt;
 at org.apache.logging.log4j.core.config.xml.XmlConfiguration.newDocumentBuilder(XmlConfiguration.java:194)&lt;br/&gt;
 at org.apache.logging.log4j.core.config.xml.XmlConfiguration.&amp;lt;init&amp;gt;(XmlConfiguration.java:92)&lt;br/&gt;
 at org.apache.logging.log4j.core.config.xml.XmlConfigurationFactory.getConfiguration(XmlConfigurationFactory.java:46)&lt;br/&gt;
 at org.apache.logging.log4j.core.config.ConfigurationFactory.getConfiguration(ConfigurationFactory.java:239)&lt;br/&gt;
 at org.apache.logging.log4j.core.config.ConfigurationFactory$Factory.getConfiguration(ConfigurationFactory.java:369)&lt;br/&gt;
 at org.apache.logging.log4j.core.config.ConfigurationFactory.getConfiguration(ConfigurationFactory.java:260)&lt;br/&gt;
 at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:613)&lt;br/&gt;
 at org.apache.logging.log4j.core.LoggerContext.setConfigLocation(LoggerContext.java:603)&lt;br/&gt;
 at oracle.oki.service.SampleBaseTest.setUpClass(SampleBaseTest.java:113)&lt;br/&gt;
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&lt;br/&gt;
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
 at java.lang.reflect.Method.invoke(Method.java:497)&lt;br/&gt;
 at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)&lt;br/&gt;
 at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)&lt;br/&gt;
 at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)&lt;br/&gt;
 at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)&lt;br/&gt;
 at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)&lt;br/&gt;
 at org.junit.runners.ParentRunner.run(ParentRunner.java:300)&lt;br/&gt;
 at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:39)&lt;br/&gt;
 at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:422)&lt;br/&gt;
 at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:931)&lt;br/&gt;
 at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:785)&lt;/p&gt;

&lt;p&gt;Following is how I setup my logging configuration:&lt;/p&gt;

&lt;p&gt;LoggerContext context = (LoggerContext) LogManager.getContext(false);&lt;br/&gt;
 File file = new File(&quot;/scratch/log4j.xml&quot;);&lt;/p&gt;

&lt;p&gt; // this will force a reconfiguration&lt;br/&gt;
 context.setConfigLocation(file.toURI());&lt;/p&gt;

&lt;p&gt;And the log4j.xml has following contents:&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;Configuration monitorinterval=&quot;30&quot; status=&quot;info&quot; strict=&quot;true&quot;&amp;gt;&lt;br/&gt;
 &amp;lt;Properties&amp;gt;&lt;br/&gt;
 &amp;lt;Property name=&quot;filename&quot;&amp;gt;/scratch/CelsiusConverter.log&amp;lt;/Property&amp;gt;&lt;br/&gt;
 &amp;lt;/Properties&amp;gt;&lt;br/&gt;
 &amp;lt;Appenders&amp;gt;&lt;br/&gt;
 &amp;lt;Appender type=&quot;Console&quot; name=&quot;Console&quot;&amp;gt;&lt;br/&gt;
 &amp;lt;target&amp;gt;System.err&amp;lt;/target&amp;gt;&lt;br/&gt;
 &amp;lt;Layout type=&quot;PatternLayout&quot; pattern=&quot;%d %p &lt;span class=&quot;error&quot;&gt;&amp;#91;%t&amp;#93;&lt;/span&gt; %m%n&quot; /&amp;gt;&lt;br/&gt;
 &amp;lt;/Appender&amp;gt;&lt;br/&gt;
 &amp;lt;Appender type=&quot;Console&quot; name=&quot;FLOW&quot;&amp;gt;&lt;br/&gt;
 &amp;lt;target&amp;gt;System.err&amp;lt;/target&amp;gt;&lt;br/&gt;
 &amp;lt;Layout type=&quot;PatternLayout&quot; pattern=&quot;%C{1}.%M %m %ex%n&quot; /&amp;gt;&lt;br/&gt;
 &amp;lt;/Appender&amp;gt;&lt;br/&gt;
 &amp;lt;Appender type=&quot;File&quot; name=&quot;File&quot; fileName=&quot;${filename}&quot;&amp;gt;&lt;br/&gt;
 &amp;lt;Layout type=&quot;PatternLayout&quot; pattern=&quot;%d %p %C{1.} &lt;span class=&quot;error&quot;&gt;&amp;#91;%t&amp;#93;&lt;/span&gt; %m%n&quot; /&amp;gt;&lt;br/&gt;
 &amp;lt;/Appender&amp;gt;&lt;br/&gt;
 &amp;lt;/Appenders&amp;gt;&lt;br/&gt;
 &amp;lt;Loggers&amp;gt;&lt;br/&gt;
 &amp;lt;Root level=&quot;trace&quot;&amp;gt;&lt;br/&gt;
 &amp;lt;AppenderRef ref=&quot;File&quot; /&amp;gt;&lt;br/&gt;
 &amp;lt;/Root&amp;gt;&lt;br/&gt;
 &amp;lt;/Loggers&amp;gt;&lt;br/&gt;
&amp;lt;/Configuration&amp;gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13146459">LOG4J2-2283</key>
            <summary>ParserConfigurationException when using Log4j with oracle.xml.jaxp.JXDocumentBuilderFactory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="vishnupriyam">Vishnu Priya Matha</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Mar 2018 05:24:08 +0000</created>
                <updated>Fri, 27 Mar 2020 09:13:53 +0000</updated>
                            <resolved>Tue, 20 Mar 2018 22:48:33 +0000</resolved>
                                    <version>2.10.0</version>
                                    <fixVersion>2.11.1</fixVersion>
                    <fixVersion>3.0.0</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>11</watches>
                                                                                                                <comments>
                            <comment id="16405896" author="vishnupriyam" created="Tue, 20 Mar 2018 07:06:35 +0000"  >&lt;p&gt;This issue happens only when I run junit as part of&#160;Apache Ant version 1.8.1&lt;/p&gt;</comment>
                            <comment id="16406480" author="garydgregory" created="Tue, 20 Mar 2018 15:14:12 +0000"  >&lt;p&gt;Are you using an embedded version of Java in an Oracle database? That is the only place I see a class named &lt;tt&gt;JXDocumentBuilderFactory&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Can you please add a full description of your environment?&lt;/p&gt;

&lt;p&gt;Our code blows up on:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
setFeature(factory, &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//xml.org/sax/features/external-general-entities&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We could further guard our code against &lt;tt&gt;ParserConfigurationException&lt;/tt&gt; by allowing processing to continue even when we catch a &lt;tt&gt;ParserConfigurationException&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Thoughts from other devs?&lt;/p&gt;

&lt;p&gt;You could try this buy building our sources with this patch:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;diff --git a/log4j-core/src/main/java/org/apache/logging/log4j/core/config/xml/XmlConfiguration.java b/log4j-core/src/main/java/org/apache/logging/log4j/core/config/xml/XmlConfiguration.java
index 7efb6ab..07d5740 100644
--- a/log4j-core/src/main/java/org/apache/logging/log4j/core/config/xml/XmlConfiguration.java
+++ b/log4j-core/src/main/java/org/apache/logging/log4j/core/config/xml/XmlConfiguration.java
@@ -199,7 +199,7 @@
         return factory.newDocumentBuilder();
     }
 
-    private static void disableDtdProcessing(final DocumentBuilderFactory factory) throws ParserConfigurationException {
+    private static void disableDtdProcessing(final DocumentBuilderFactory factory) {
         factory.setValidating(false);
         factory.setExpandEntityReferences(false);
         setFeature(factory, &quot;http://xml.org/sax/features/external-general-entities&quot;, false);
@@ -207,12 +207,9 @@
         setFeature(factory, &quot;http://apache.org/xml/features/nonvalidating/load-external-dtd&quot;, false);
     }
     
-    private static void setFeature(final DocumentBuilderFactory factory, final String featureName, final boolean value)
-            throws ParserConfigurationException {
+    private static void setFeature(final DocumentBuilderFactory factory, final String featureName, final boolean value) {
         try {
             factory.setFeature(featureName, value);
-        } catch (ParserConfigurationException e) {
-            throw e;
         } catch (Exception | LinkageError e) {
             getStatusLogger().error(&quot;Caught {} setting feature {} to {} on DocumentBuilderFactory {}: {}&quot;,
                     e.getClass().getCanonicalName(), featureName, value, factory, e, e);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16407063" author="garydgregory" created="Tue, 20 Mar 2018 21:14:34 +0000"  >&lt;p&gt;Unless someone objects, I plan on committing this change. &lt;/p&gt;</comment>
                            <comment id="16407073" author="jvz" created="Tue, 20 Mar 2018 21:19:09 +0000"  >&lt;p&gt;If that change is to ignore errors from setting features (e.g., disable external DTD entities), then go for it. Otherwise, I&apos;m not sure what that patch is trying to do.&lt;/p&gt;</comment>
                            <comment id="16407104" author="garydgregory" created="Tue, 20 Mar 2018 21:41:39 +0000"  >&lt;p&gt;The patch avoids blowing up your whole app if the &lt;tt&gt;DocumentBuilderFactory&lt;/tt&gt; implementation your environment provides throws a &lt;tt&gt;ParserConfigurationException&lt;/tt&gt;. &lt;/p&gt;

&lt;p&gt;Whether or not that ends up messing up proper configuration of Log4j is a different story... there is no way to know. For example (convoluted perhaps): Maybe the &lt;tt&gt;DocumentBuilderFactory&lt;/tt&gt; does not support toggling a given feature but that feature is already in the state we need.&lt;/p&gt;</comment>
                            <comment id="16407105" author="jvz" created="Tue, 20 Mar 2018 21:45:26 +0000"  >&lt;p&gt;Right, I get that, but what exactly is throwing that exception? It&apos;d be nice if there was a way to detect errors regarding that and let others percolate up. If that&apos;s infeasible, your proposed patch is perfectly fine. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16407116" author="garydgregory" created="Tue, 20 Mar 2018 21:59:32 +0000"  >&lt;p&gt;Check out the stack trace in the description: It looks like Oracle implements a less than complete JAXP in its database. Specifically:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;at oracle.xml.jaxp.JXDocumentBuilderFactory.setFeature(JXDocumentBuilderFactory.java:374)
at org.apache.logging.log4j.core.config.xml.XmlConfiguration.setFeature(XmlConfiguration.java:213)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16407183" author="jira-bot" created="Tue, 20 Mar 2018 22:45:39 +0000"  >&lt;p&gt;Commit ec10b16ecada9168f2a47f28268df77c413ce603 in logging-log4j2&apos;s branch refs/heads/release-2.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=ec10b16&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=ec10b16&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2283&quot; title=&quot;ParserConfigurationException when using Log4j with oracle.xml.jaxp.JXDocumentBuilderFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2283&quot;&gt;&lt;del&gt;LOG4J2-2283&lt;/del&gt;&lt;/a&gt; ParserConfigurationException when using Log4j with&lt;br/&gt;
oracle.xml.jaxp.JXDocumentBuilderFactory.&lt;/p&gt;</comment>
                            <comment id="16407184" author="jira-bot" created="Tue, 20 Mar 2018 22:47:44 +0000"  >&lt;p&gt;Commit 80d025ba68fc12d7b4d767fb25455306878279e1 in logging-log4j2&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=80d025b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=80d025b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2283&quot; title=&quot;ParserConfigurationException when using Log4j with oracle.xml.jaxp.JXDocumentBuilderFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2283&quot;&gt;&lt;del&gt;LOG4J2-2283&lt;/del&gt;&lt;/a&gt; ParserConfigurationException when using Log4j with&lt;br/&gt;
oracle.xml.jaxp.JXDocumentBuilderFactory.&lt;/p&gt;</comment>
                            <comment id="16407185" author="garydgregory" created="Tue, 20 Mar 2018 22:48:33 +0000"  >&lt;p&gt;Fixed in 2.11.1-SNAPSHOT and 3.0.0-SNAPSHOT.&lt;/p&gt;

&lt;p&gt;Please verify and close.&lt;/p&gt;</comment>
                            <comment id="16493554" author="markus.schneider@med.ge.com" created="Tue, 29 May 2018 13:59:40 +0000"  >&lt;p&gt;Just sharing workaround until 2.11.1 is available:&lt;/p&gt;

&lt;p&gt;-Djavax.xml.parsers.DocumentBuilderFactory=com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl&lt;/p&gt;

&lt;p&gt;(From &lt;a href=&quot;https://stackoverflow.com/questions/27860361/issue-http-apache-org-xml-features-xinclude-testing-log4j-2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/questions/27860361/issue-http-apache-org-xml-features-xinclude-testing-log4j-2&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="16523904" author="notify" created="Tue, 26 Jun 2018 16:00:17 +0000"  >&lt;p&gt;I still get this error with 2.11,&#160; 2.11.1-SNAPSHOT &amp;amp;&#160;3.0.0-SNAPSHOT.&lt;/p&gt;

&lt;p&gt;The only difference now is that it catches the exception, doesn&apos;t continue to parse the log4j2.xml:&lt;/p&gt;

&lt;p&gt;ERROR StatusLogger Caught javax.xml.parsers.ParserConfigurationException setting feature &lt;a href=&quot;http://xml.org/sax/features/external-general-entities&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://xml.org/sax/features/external-general-entities&lt;/a&gt; to false on DocumentBuilderFactory oracle.xml.jaxp.JXDocumentBuilderFactory@13e73916: javax.xml.parsers.ParserConfigurationException&lt;br/&gt;
 javax.xml.parsers.ParserConfigurationException&lt;br/&gt;
 at oracle.xml.jaxp.JXDocumentBuilderFactory.setFeature(JXDocumentBuilderFactory.java:374)&lt;br/&gt;
 at org.apache.logging.log4j.core.config.xml.XmlConfiguration.setFeature(XmlConfiguration.java:212)&lt;br/&gt;
 at org.apache.logging.log4j.core.config.xml.XmlConfiguration.disableDtdProcessing(XmlConfiguration.java:205)&lt;br/&gt;
 at org.apache.logging.log4j.core.config.xml.XmlConfiguration.newDocumentBuilder(XmlConfiguration.java:194)&lt;br/&gt;
 at org.apache.logging.log4j.core.config.xml.XmlConfiguration.&amp;lt;init&amp;gt;(XmlConfiguration.java:92)&lt;br/&gt;
 at org.apache.logging.log4j.core.config.xml.XmlConfigurationFactory.getConfiguration(XmlConfigurationFactory.java:46)&lt;br/&gt;
 at org.apache.logging.log4j.core.config.ConfigurationFactory$Factory.getConfiguration(ConfigurationFactory.java:453)&lt;br/&gt;
 at org.apache.logging.log4j.core.config.ConfigurationFactory$Factory.getConfiguration(ConfigurationFactory.java:385)&lt;br/&gt;
 at org.apache.logging.log4j.core.config.ConfigurationFactory.getConfiguration(ConfigurationFactory.java:260)&lt;br/&gt;
 at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:615)&lt;br/&gt;
 at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:636)&lt;br/&gt;
 at org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:231)&lt;br/&gt;
 at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:243)&lt;br/&gt;
 at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:45)&lt;br/&gt;
 at org.apache.logging.log4j.LogManager.getContext(LogManager.java:174)&lt;br/&gt;
 at org.apache.logging.log4j.LogManager.getLogger(LogManager.java:648)&lt;br/&gt;
 at com.onespatial.networkrail.eai.log4j.Log4JLevelDEBUGTest.&amp;lt;init&amp;gt;(Log4JLevelDEBUGTest.java:19)&lt;br/&gt;
 at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)&lt;br/&gt;
 at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)&lt;br/&gt;
 at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)&lt;br/&gt;
 at java.lang.reflect.Constructor.newInstance(Constructor.java:423)&lt;br/&gt;
 at org.junit.platform.commons.util.ReflectionUtils.newInstance(ReflectionUtils.java:429)&lt;br/&gt;
 at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:60)&lt;br/&gt;
 at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.instantiateTestClass(ClassTestDescriptor.java:208)&lt;br/&gt;
 at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.instantiateAndPostProcessTestInstance(ClassTestDescriptor.java:195)&lt;br/&gt;
 at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.lambda$testInstanceProvider$0(ClassTestDescriptor.java:185)&lt;br/&gt;
 at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.lambda$testInstanceProvider$1(ClassTestDescriptor.java:189)&lt;br/&gt;
 at java.util.Optional.orElseGet(Optional.java:267)&lt;br/&gt;
 at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.lambda$testInstanceProvider$2(ClassTestDescriptor.java:188)&lt;br/&gt;
 at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:81)&lt;br/&gt;
 at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:58)&lt;br/&gt;
 at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.prepare(HierarchicalTestExecutor.java:89)&lt;br/&gt;
 at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:74)&lt;br/&gt;
 at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)&lt;br/&gt;
 at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)&lt;br/&gt;
 at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)&lt;br/&gt;
 at java.util.Iterator.forEachRemaining(Iterator.java:116)&lt;br/&gt;
 at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)&lt;br/&gt;
 at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)&lt;br/&gt;
 at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)&lt;br/&gt;
 at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)&lt;br/&gt;
 at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)&lt;br/&gt;
 at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)&lt;br/&gt;
 at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)&lt;br/&gt;
 at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)&lt;br/&gt;
 at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)&lt;br/&gt;
 at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)&lt;br/&gt;
 at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)&lt;br/&gt;
 at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:121)&lt;br/&gt;
 at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)&lt;br/&gt;
 at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)&lt;br/&gt;
 at java.util.Iterator.forEachRemaining(Iterator.java:116)&lt;br/&gt;
 at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)&lt;br/&gt;
 at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)&lt;br/&gt;
 at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)&lt;br/&gt;
 at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)&lt;br/&gt;
 at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)&lt;br/&gt;
 at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)&lt;br/&gt;
 at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)&lt;br/&gt;
 at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:121)&lt;br/&gt;
 at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)&lt;br/&gt;
 at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)&lt;br/&gt;
 at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)&lt;br/&gt;
 at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)&lt;br/&gt;
 at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)&lt;br/&gt;
 at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)&lt;br/&gt;
 at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)&lt;br/&gt;
 at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)&lt;br/&gt;
 at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:92)&lt;br/&gt;
 at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$100(JUnitPlatformTestClassProcessor.java:77)&lt;br/&gt;
 at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:73)&lt;br/&gt;
 at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61)&lt;br/&gt;
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&lt;br/&gt;
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
 at java.lang.reflect.Method.invoke(Method.java:498)&lt;br/&gt;
 at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)&lt;br/&gt;
 at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)&lt;br/&gt;
 at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)&lt;br/&gt;
 at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)&lt;br/&gt;
 at com.sun.proxy.$Proxy2.stop(Unknown Source)&lt;br/&gt;
 at org.gradle.api.internal.tasks.testing.worker.TestWorker.stop(TestWorker.java:123)&lt;br/&gt;
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&lt;br/&gt;
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
 at java.lang.reflect.Method.invoke(Method.java:498)&lt;br/&gt;
 at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)&lt;br/&gt;
 at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)&lt;br/&gt;
 at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:155)&lt;br/&gt;
 at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:137)&lt;br/&gt;
 at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)&lt;br/&gt;
 at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)&lt;br/&gt;
 at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)&lt;br/&gt;
 at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)&lt;br/&gt;
 at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)&lt;br/&gt;
 at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)&lt;br/&gt;
 at java.lang.Thread.run(Thread.java:748)&lt;/p&gt;</comment>
                            <comment id="16523953" author="garydgregory" created="Tue, 26 Jun 2018 16:38:34 +0000"  >&lt;p&gt;The code currently catches and prints that exception, then continues processing.&#160;&lt;/p&gt;

&lt;p&gt;How can you tell the XML file is not being parsed? Do you see other errors?&lt;/p&gt;</comment>
                            <comment id="16523987" author="notify" created="Tue, 26 Jun 2018 17:10:07 +0000"  >&lt;p&gt;I implemented Log4j2 2.11.0 in IntelliJ on MacOS High Sierra with JUnit to test that the various log levels are called correctly. Using a custom&#160;Appender I get the number of messages&#160;retrieved for each of the LEVELS when various logging levels are set. So&#160;six for ALL (TRACE, DEBUG. INFO, WARN, ERROR, FATAL) and two for WARN etc. All the unit tests with 2.11.0 on MacOS pass. Probably due to no version&#160;of the&#160;oracle.xml.jaxp.JXDocumentBuilderFactory being present.&lt;/p&gt;

&lt;p&gt;When the code was pulled onto the Windows&#160;PC with log4j2 2.11, which has Oracle&apos;s WebLogic 12 installed I&apos;m getting:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;Error parsing C:\Users\rogerl\IdeaProjects\xxxxx_screens_clone\screens-war\build\resources\main\log4j2.xml&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;javax.xml.parsers.ParserConfigurationException&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;And all the Unit Tests assertions fail - as the number of messages retrieved for each LEVEL is zero.&lt;/p&gt;

&lt;p&gt;I&apos;ve&#160;tried with both 2.11.1-SNAPSHOT and 3.0.0-SNAPSHOT.&lt;/p&gt;

&lt;p&gt;com.onespatial.networkrail.eai.log4j.Log4JLevelERRORTest &amp;gt; testLevelERROR() FAILED&lt;br/&gt;
 org.opentest4j.AssertionFailedError: expected: &amp;lt;2&amp;gt; but was: &amp;lt;0&amp;gt;&lt;br/&gt;
 at org.junit.jupiter.api.AssertionUtils.fail(AssertionUtils.java:56)&lt;br/&gt;
 at org.junit.jupiter.api.AssertEquals.failNotEqual(AssertEquals.java:197)&lt;br/&gt;
 at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:154)&lt;br/&gt;
 at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:149)&lt;br/&gt;
 at org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:319)&lt;br/&gt;
 at com.onespatial.networkrail.eai.log4j.Log4JLevelERRORTest.testLevelERROR(Log4JLevelERRORTest.java:40)&lt;/p&gt;

&lt;p&gt;com.onespatial.networkrail.eai.log4j.Log4JLevelFATALTest &amp;gt; testLevelFATAL() FAILED&lt;br/&gt;
 org.opentest4j.AssertionFailedError: expected: &amp;lt;1&amp;gt; but was: &amp;lt;0&amp;gt;&lt;br/&gt;
 at org.junit.jupiter.api.AssertionUtils.fail(AssertionUtils.java:56)&lt;br/&gt;
 at org.junit.jupiter.api.AssertEquals.failNotEqual(AssertEquals.java:197)&lt;br/&gt;
 at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:154)&lt;br/&gt;
 at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:149)&lt;br/&gt;
 at org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:319)&lt;br/&gt;
 at com.onespatial.networkrail.eai.log4j.Log4JLevelFATALTest.testLevelFATAL(Log4JLevelFATALTest.java:39)&lt;/p&gt;

&lt;p&gt;com.onespatial.networkrail.eai.log4j.Log4JLevelINFOTest &amp;gt; testLevelINFO() FAILED&lt;br/&gt;
 org.opentest4j.AssertionFailedError: expected: &amp;lt;4&amp;gt; but was: &amp;lt;0&amp;gt;&lt;br/&gt;
 at org.junit.jupiter.api.AssertionUtils.fail(AssertionUtils.java:56)&lt;br/&gt;
 at org.junit.jupiter.api.AssertEquals.failNotEqual(AssertEquals.java:197)&lt;br/&gt;
 at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:154)&lt;br/&gt;
 at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:149)&lt;br/&gt;
 at org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:319)&lt;br/&gt;
 at com.onespatial.networkrail.eai.log4j.Log4JLevelINFOTest.testLevelINFO(Log4JLevelINFOTest.java:40)&lt;/p&gt;

&lt;p&gt;com.onespatial.networkrail.eai.log4j.Log4JLevelTRACETest &amp;gt; testLevelTRACE() FAILED&lt;br/&gt;
 org.opentest4j.AssertionFailedError: expected: &amp;lt;6&amp;gt; but was: &amp;lt;0&amp;gt;&lt;br/&gt;
 at org.junit.jupiter.api.AssertionUtils.fail(AssertionUtils.java:56)&lt;br/&gt;
 at org.junit.jupiter.api.AssertEquals.failNotEqual(AssertEquals.java:197)&lt;br/&gt;
 at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:154)&lt;br/&gt;
 at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:149)&lt;br/&gt;
 at org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:319)&lt;br/&gt;
 at com.onespatial.networkrail.eai.log4j.Log4JLevelTRACETest.testLevelTRACE(Log4JLevelTRACETest.java:40)&lt;/p&gt;

&lt;p&gt;com.onespatial.networkrail.eai.log4j.Log4JLevelWARNTest &amp;gt; testLevelWARN() FAILED&lt;br/&gt;
 org.opentest4j.AssertionFailedError: expected: &amp;lt;3&amp;gt; but was: &amp;lt;0&amp;gt;&lt;br/&gt;
 at org.junit.jupiter.api.AssertionUtils.fail(AssertionUtils.java:56)&lt;br/&gt;
 at org.junit.jupiter.api.AssertEquals.failNotEqual(AssertEquals.java:197)&lt;br/&gt;
 at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:154)&lt;br/&gt;
 at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:149)&lt;br/&gt;
 at org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:319)&lt;br/&gt;
 at com.onespatial.networkrail.eai.log4j.Log4JLevelWARNTest.testLevelWARN(Log4JLevelWARNTest.java:39)&lt;/p&gt;

&lt;p&gt;com.onespatial.networkrail.eai.log4j.Log4JLevelALLTest &amp;gt; testLevelALL() FAILED&lt;br/&gt;
 org.opentest4j.AssertionFailedError: expected: &amp;lt;6&amp;gt; but was: &amp;lt;0&amp;gt;&lt;br/&gt;
 at org.junit.jupiter.api.AssertionUtils.fail(AssertionUtils.java:56)&lt;br/&gt;
 at org.junit.jupiter.api.AssertEquals.failNotEqual(AssertEquals.java:197)&lt;br/&gt;
 at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:154)&lt;br/&gt;
 at org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:149)&lt;br/&gt;
 at org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:319)&lt;br/&gt;
 at com.onespatial.networkrail.eai.log4j.Log4JLevelALLTest.testLevelALL(Log4JLevelALLTest.java:40)&lt;/p&gt;</comment>
                            <comment id="16524591" author="ralph.goers@dslextreme.com" created="Wed, 27 Jun 2018 05:12:56 +0000"  >&lt;p&gt;Gary, I&apos;ve seen this kind of thing before. Once the XML parser decides to throw an exception it is done. It flags itself as having had an error and refuses to do any more. Since this in an Oracle package it is highly unlikely the source is available so it is difficult for us to know what the exact problem is. In fact, all the Javadoc I can find online for this class says it doesn&apos;t even have a setFeature method, yet it is showing up in the stack trace so it obviously does. More than likely it just doesn&apos;t like the feature being set.&lt;/p&gt;

&lt;p&gt;To really handle this error we would have to throw the exception all the way back to the init method where a new DocumentBuilder would have to be constructed that does not attempt to set this feature.&lt;/p&gt;

&lt;p&gt;Given that XML processing is clearly borked here a workaround would be to convert log4j2.xml to JSON or java properties.&lt;/p&gt;</comment>
                            <comment id="16524626" author="remkop@yahoo.com" created="Wed, 27 Jun 2018 06:16:59 +0000"  >&lt;p&gt;If the Oracle factory breaks after attempts to set features that it does not support, perhaps we should avoid trying to set features on it with that type of factory:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void disableDtdProcessing(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; DocumentBuilderFactory factory) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; ParserConfigurationException {
        factory.setValidating(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
        factory.setExpandEntityReferences(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);

        &lt;span class=&quot;code-comment&quot;&gt;// LOG4J2-2283 oracle.xml.jaxp.JXDocumentBuilderFactory breaks when trying to set unsupported features
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!&lt;span class=&quot;code-quote&quot;&gt;&quot;oracle.xml.jaxp.JXDocumentBuilderFactory&quot;&lt;/span&gt;.equals(factory.getClass().getName())) {
            setFeature(factory, &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//xml.org/sax/features/external-general-entities&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
&lt;/span&gt;            setFeature(factory, &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//xml.org/sax/features/external-parameter-entities&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
&lt;/span&gt;            setFeature(factory, &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//apache.org/xml/features/nonvalidating/load-external-dtd&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
&lt;/span&gt;        }
    }
&#160;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This (oldish) &lt;a href=&quot;http://kingsfleet.blogspot.com/2011/05/jersey-issue-when-running-with-adf.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;blogpost&lt;/a&gt; confirms Ralph&apos;s hypothesis that the factory may be storing the failure to prevent the future creation of any parsers.&lt;/p&gt;</comment>
                            <comment id="16525086" author="ralph.goers@dslextreme.com" created="Wed, 27 Jun 2018 13:21:09 +0000"  >&lt;p&gt;I would rather see this disabled via a property rather than testing for a particular class. What if Oracle decides to fix this at some time? Also, if they do have a setFeature method how can we know what features they support?&lt;/p&gt;</comment>
                            <comment id="16527774" author="garydgregory" created="Fri, 29 Jun 2018 15:11:04 +0000"  >&lt;p&gt;What is the environment here? An app server? What version? Maybe this has been fixed in a later version?&lt;/p&gt;</comment>
                            <comment id="16527838" author="ralph.goers@dslextreme.com" created="Fri, 29 Jun 2018 15:42:18 +0000"  >&lt;p&gt;He mentioned Weblogic 12. That is the latest version of the server although it isn&apos;t clear if he is using the latest release.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt; It seems you have &quot;fixed&quot; a similar problem to this before. &lt;a href=&quot;https://thecattlecrew.net/2014/11/25/1334/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://thecattlecrew.net/2014/11/25/1334/&lt;/a&gt; shows a workaround.&lt;/p&gt;

&lt;p&gt;Frankly, I would just close this and recommend that the workaround be used. If you want to implement a &quot;fix&quot;, add a flag similar to what Jersey did (&lt;a href=&quot;http://kingsfleet.blogspot.com/2011/05/jersey-issue-when-running-with-adf.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://kingsfleet.blogspot.com/2011/05/jersey-issue-when-running-with-adf.html&lt;/a&gt;) like disableXmlSecurity.&lt;/p&gt;</comment>
                            <comment id="16528005" author="garydgregory" created="Fri, 29 Jun 2018 17:35:04 +0000"  >&lt;p&gt;Is &lt;a href=&quot;https://thecattlecrew.net/2014/11/25/1334/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://thecattlecrew.net/2014/11/25/1334/&lt;/a&gt; in our list of articles? (On my phone about to get on a plane...)&lt;/p&gt;</comment>
                            <comment id="17068453" author="lukas.eder" created="Fri, 27 Mar 2020 09:13:53 +0000"  >&lt;p&gt;Is it so important to set these features in all cases? I mean, sure, this is about security, but if an implementation doesn&apos;t implement the feature, it doesn&apos;t need to be turned off, I guess? How about this code, instead:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void disableDtdProcessing(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; DocumentBuilderFactory factory) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; ParserConfigurationException {
        factory.setValidating(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
        factory.setExpandEntityReferences(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);

        &lt;span class=&quot;code-comment&quot;&gt;// LOG4J2-2283 oracle.xml.jaxp.JXDocumentBuilderFactory breaks when trying to set unsupported features
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; { setFeature(factory, &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//xml.org/sax/features/external-general-entities&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;); } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (ParserConfigurationException ignore) {}
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; { setFeature(factory, &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//xml.org/sax/features/external-parameter-entities&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;); } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (ParserConfigurationException ignore) {}
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; { setFeature(factory, &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//apache.org/xml/features/nonvalidating/load-external-dtd&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;); } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (ParserConfigurationException ignore) {}
&lt;/span&gt;    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That&apos;s what we&apos;re doing in jOOX: &lt;a href=&quot;https://github.com/jOOQ/jOOX/blob/1826fb1cc0b116f0e106fa3c9a75c6ed2b1c6238/jOOX/src/main/java/org/joox/JOOX.java#L874-L895&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jOOQ/jOOX/blob/1826fb1cc0b116f0e106fa3c9a75c6ed2b1c6238/jOOX/src/main/java/org/joox/JOOX.java#L874-L895&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 33 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3rj4f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>