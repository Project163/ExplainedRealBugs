<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:42:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-3426] Log4j 1.x bridge Logger.getAppender returns a wrapped AppenderAdapter</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-3426</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;In our code, we have a custom logger and a custom multiprocess rolling FileAppender as below shown in below code snippet.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;For some processing, we need to get appender from logger, so we call Logger.getAppender() but with log4j1.x bridge it is returning AppenderWrapper unlike log4j1.x where we used to get an Appender.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;We need to typecast returned value to FileAppender but since now it AppenderWrapper, so it is throwing exception &quot;java.lang.ClassCastException: org.apache.log4j.bridge.AppenderWrapper cannot be cast to org.apache.log4j.FileAppender&quot;.&lt;/p&gt;

&lt;p&gt;To fix cast exception we are overriding getAppender in our customLogger as shown below, however we are still having some minor issues in reading property value but may be this new issue is due to some other problems. I am still trying to figure out.&lt;/p&gt;

&lt;p&gt;I am creating this Jira ticket with a hope that if there is a possibility then may be log4j1.x bridge can be modified to provide this conversion instead we override this method in our custom logger.&lt;/p&gt;

&lt;p&gt;@Override&#160; &#160; public Appender getAppender(final String name) {&#160; &#160; &#160; &#160; AppenderWrapper appenderWrapper = (AppenderWrapper) super.getAppender(name);&#160; &#160; &#160; &#160; return ((AppenderAdapter.Adapter)appenderWrapper.getAppender()).getAppender();&#160; &#160; }&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;public class CustomLogger extends Logger implements java.io.Serializable {}&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;public class CustomMultiProcessRollingAppender extends FileAppender { }&lt;/p&gt;</description>
                <environment></environment>
        <key id="13432200">LOG4J2-3426</key>
            <summary>Log4j 1.x bridge Logger.getAppender returns a wrapped AppenderAdapter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pkarwasz">Piotr Karwasz</assignee>
                                    <reporter username="PoojaTheCoder">Pooja Pandey</reporter>
                        <labels>
                    </labels>
                <created>Sun, 6 Mar 2022 02:45:14 +0000</created>
                <updated>Mon, 2 May 2022 21:11:22 +0000</updated>
                            <resolved>Mon, 2 May 2022 21:11:22 +0000</resolved>
                                    <version>2.17.2</version>
                                    <fixVersion>2.18.0</fixVersion>
                                    <component>Log4j 1.2 bridge</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17501924" author="pkarwasz" created="Sun, 6 Mar 2022 10:10:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=PoojaTheCoder&quot; class=&quot;user-hover&quot; rel=&quot;PoojaTheCoder&quot;&gt;PoojaTheCoder&lt;/a&gt;, are you using any filters on your custom appender? Or do you set the &lt;tt&gt;Threshold&lt;/tt&gt; property?&lt;/p&gt;

&lt;p&gt;Since in the Log4j 1.x bridge the &lt;tt&gt;AppenderSkeleton&lt;/tt&gt; performs no filtering (the filtering is done in the &lt;tt&gt;AppenderAdapter&lt;/tt&gt;), appending to your custom Log4j 1 appender is not equivalent to appending to the &lt;tt&gt;AppenderWrapper&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17502557" author="jira-bot" created="Mon, 7 Mar 2022 21:26:29 +0000"  >&lt;p&gt;Commit ba16485b93cde4f05e0cbb2ca564a7b6cb6d4d77 in logging-log4j2&apos;s branch refs/heads/release-2.x from Piotr P. Karwasz&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=ba16485&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=ba16485&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3426&quot; title=&quot;Log4j 1.x bridge Logger.getAppender returns a wrapped AppenderAdapter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3426&quot;&gt;&lt;del&gt;LOG4J2-3426&lt;/del&gt;&lt;/a&gt; Refactors wrapping code&lt;/p&gt;

&lt;p&gt;Refactors the wrapping logic into single `wrap` or `adapt` methods to be&lt;br/&gt;
sure we always perform the correct logic.&lt;/p&gt;</comment>
                            <comment id="17502598" author="pkarwasz" created="Mon, 7 Mar 2022 22:17:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=PoojaTheCoder&quot; class=&quot;user-hover&quot; rel=&quot;PoojaTheCoder&quot;&gt;PoojaTheCoder&lt;/a&gt;, I uploaded a snapshot for version 2.17.3-SNAPSHOT to the Apache Snapshots repository (&lt;tt&gt;&lt;a href=&quot;https://repository.apache.org/snapshots/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/snapshots/&lt;/a&gt;&lt;/tt&gt;).&lt;/p&gt;

&lt;p&gt;Please check if this solves the problem and if it does close the issue.&lt;/p&gt;</comment>
                            <comment id="17502653" author="jira-bot" created="Tue, 8 Mar 2022 00:40:43 +0000"  >&lt;p&gt;Commit ba16485b93cde4f05e0cbb2ca564a7b6cb6d4d77 in logging-log4j2&apos;s branch refs/heads/dependabot/maven/slf4jVersion-1.7.36 from Piotr P. Karwasz&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=ba16485&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=ba16485&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3426&quot; title=&quot;Log4j 1.x bridge Logger.getAppender returns a wrapped AppenderAdapter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3426&quot;&gt;&lt;del&gt;LOG4J2-3426&lt;/del&gt;&lt;/a&gt; Refactors wrapping code&lt;/p&gt;

&lt;p&gt;Refactors the wrapping logic into single `wrap` or `adapt` methods to be&lt;br/&gt;
sure we always perform the correct logic.&lt;/p&gt;</comment>
                            <comment id="17502765" author="JIRAUSER285751" created="Tue, 8 Mar 2022 07:00:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pkarwasz&quot; class=&quot;user-hover&quot; rel=&quot;pkarwasz&quot;&gt;pkarwasz&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;This fixes the issue, thank you so much. Closing the issue. Any idea when 2.17.3 would be released??&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17502766" author="JIRAUSER285751" created="Tue, 8 Mar 2022 07:01:09 +0000"  >&lt;p&gt;Issue is fixed.&lt;/p&gt;</comment>
                            <comment id="17502996" author="pkarwasz" created="Tue, 8 Mar 2022 14:39:51 +0000"  >&lt;p&gt;About the release date for 2.17.3, you should ask on the &lt;tt&gt;log4j-user&lt;/tt&gt; mailing list.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 36 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z107m8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>