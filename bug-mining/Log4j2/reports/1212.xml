<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:39:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-2301] gc-free mixed async loging loses parameter values after the first appender</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-2301</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;When gc-free logging is used with mixed synchronous/asynchronous loggers, parameter values are replaced with &quot;null&quot; after the first AsyncLoggerConfig.&lt;/p&gt;

&lt;p&gt;The message format is still present, as well as the parameter count, however all values are nulls.&lt;br/&gt;
It appears that Log4jEventWrapperHandler.onEvent invokes MutableLogEvent.clear, which nulls out the parameter array.&lt;/p&gt;

&lt;p&gt;I have constructed a failing test (which I need to clean up and deduplicate some code from the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2299&quot; title=&quot;Using &amp;quot;asyncLogger&amp;quot; with AsyncLoggerContextSelector loses some event data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2299&quot;&gt;&lt;del&gt;LOG4J2-2299&lt;/del&gt;&lt;/a&gt;):&lt;br/&gt;
&lt;a href=&quot;https://github.com/cakofony/logging-log4j2/commit/b9c03f5c6881bfe778f8e2d75d046ce6e021c4f1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/cakofony/logging-log4j2/commit/b9c03f5c6881bfe778f8e2d75d046ce6e021c4f1&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13149511">LOG4J2-2301</key>
            <summary>gc-free mixed async loging loses parameter values after the first appender</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ckozak">Carter Kozak</assignee>
                                    <reporter username="ckozak">Carter Kozak</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Apr 2018 15:34:36 +0000</created>
                <updated>Mon, 14 Jan 2019 23:02:15 +0000</updated>
                            <resolved>Tue, 1 May 2018 02:03:36 +0000</resolved>
                                    <version>2.11.0</version>
                                    <fixVersion>2.11.1</fixVersion>
                    <fixVersion>3.0.0</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16423334" author="remkop@yahoo.com" created="Tue, 3 Apr 2018 00:57:28 +0000"  >&lt;p&gt;Don&apos;t be shy about committing tests! You can add &lt;tt&gt;@Ignore(&quot;Until &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2301&quot; title=&quot;gc-free mixed async loging loses parameter values after the first appender&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2301&quot;&gt;&lt;del&gt;LOG4J2-2301&lt;/del&gt;&lt;/a&gt; is fixed&quot;)&lt;/tt&gt;&#160;so it won&apos;t prevent people&#160;from building the project. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16423340" author="ckozak" created="Tue, 3 Apr 2018 01:12:55 +0000"  >&lt;p&gt;Perfect, will do!&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Edit: Holding off just a bit for LOG4J-2299, commit for that issue provides utilities I&apos;d like to use in this test&lt;/p&gt;</comment>
                            <comment id="16432538" author="jira-bot" created="Tue, 10 Apr 2018 16:17:27 +0000"  >&lt;p&gt;Commit f93f049c13f38a149378ea47c38868611d7c64f0 in logging-log4j2&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ckozak&quot; class=&quot;user-hover&quot; rel=&quot;ckozak&quot;&gt;ckozak&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=f93f049&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=f93f049&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Add an ignored failing test for &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2301&quot; title=&quot;gc-free mixed async loging loses parameter values after the first appender&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2301&quot;&gt;&lt;del&gt;LOG4J2-2301&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16434795" author="ckozak" created="Thu, 12 Apr 2018 01:13:39 +0000"  >&lt;p&gt;Alright, I&apos;ve refactored AsyncLoggerConfig and managed to get the test passing. I&apos;d really appreciate review when you have time &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=remkop%40yahoo.com&quot; class=&quot;user-hover&quot; rel=&quot;remkop@yahoo.com&quot;&gt;remkop@yahoo.com&lt;/a&gt;!&lt;/p&gt;

&lt;p&gt;I&apos;ve pushed the change to github for ease of sharing: &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/164&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/164&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16435008" author="remkop@yahoo.com" created="Thu, 12 Apr 2018 06:37:45 +0000"  >&lt;p&gt;Hi Carter, sorry I have not been able to spend as much time as I would like on Log4j (been trying to get &lt;a href=&quot;https://issues.apache.org/jira/browse/GROOVY-8520&quot; title=&quot;Replace commons-cli with picocli in CliBuilder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;GROOVY-8520&quot;&gt;&lt;del&gt;GROOVY-8520&lt;/del&gt;&lt;/a&gt; done before the groovy 2.5 release). I really appreciate the work you&apos;ve been doing recently and I will try to take a look at PR #164 soon.&lt;/p&gt;</comment>
                            <comment id="16436635" author="ckozak" created="Fri, 13 Apr 2018 01:14:42 +0000"  >&lt;p&gt;Not a problem, I&apos;m not in a rush. Thanks!&lt;/p&gt;</comment>
                            <comment id="16440332" author="remkop@yahoo.com" created="Tue, 17 Apr 2018 03:20:50 +0000"  >&lt;p&gt;Started to look at this. Interesting idea.&lt;/p&gt;

&lt;p&gt;So the idea is&#160;basically that previously, we had a single call to, let&apos;s say &lt;tt&gt;callAppenders(LogEvent)&lt;/tt&gt; (actual method may be different), and that has now been split into two: first call the synchronous, then the async downstream components. Would it be possible to rearrange the code so that this intention becomes very clear? Something like (pseudo-code):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// before
&lt;/span&gt;callAppenders(logEvent);

&lt;span class=&quot;code-comment&quot;&gt;// after 
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// (add comment with quick summary of why we&apos;re doing &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; and link to LOG4J2-2301)
&lt;/span&gt;callAppenders(logEvent, LogPredicate.SYNCRONOUS_ONLY);
callAppenders(logEvent, LogPredicate.ASYNCRONOUS_ONLY);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Detail: Can we pass a &lt;tt&gt;LoggingPredicate.ALWAYS&lt;/tt&gt;&#160;constant instead of &lt;tt&gt;null&lt;/tt&gt; so client code can just call &lt;tt&gt;predicate.allow(LoggerConfig)&lt;/tt&gt; without needing to check for null?&#160;&lt;/p&gt;</comment>
                            <comment id="16440369" author="ckozak" created="Tue, 17 Apr 2018 04:31:48 +0000"  >&lt;p&gt;That is correct. Good call on the predicate!&lt;/p&gt;

&lt;p&gt;To clarify, the old approach could end up enqueuing N events on the AsyncLoggerConfig disruptor, where N is the number of AsyncLoggerConfig elements between the event source and root (or where additivity is disabled, or the event is filtered). This approach enqueues at most one event to the disruptor ringbuffer.&lt;/p&gt;


&lt;p&gt;I&apos;ve updated the PR with an attempt to clean up the implementation, thanks for your feedback! It&apos;s a bit tricky to split the paths apart because we have to maintain thread state as we invoke through potentially both AsyncLoggerConfig and LoggerConfig instances chained together, and only the first encountered AsyncLoggerConfig enqueues events to the ringbuffer.&lt;/p&gt;</comment>
                            <comment id="16441076" author="remkop@yahoo.com" created="Tue, 17 Apr 2018 15:57:30 +0000"  >&lt;p&gt;I like the reorganized code, it reveals the intention very well now, I think. Thank you!&lt;/p&gt;

&lt;p&gt;One thing: you mention that the new approach enqueues at most one event to the disruptor ringbuffer. What happens if the config has multiple AsyncLoggerConfig elements that are configured to have different appenders. Would each appender still receive the event if additvity is enabled?&lt;/p&gt;</comment>
                            <comment id="16441183" author="ckozak" created="Tue, 17 Apr 2018 17:03:36 +0000"  >&lt;p&gt;&amp;gt; What happens if the config has multiple AsyncLoggerConfig elements that are configured to have different appenders&lt;/p&gt;

&lt;p&gt;Great question. We check for the topmost AsyncLoggerConfig, so let&apos;s take this config for example:&lt;/p&gt;



&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;
&amp;lt;Configuration status=&quot;ERROR&quot;&amp;gt;
  &amp;lt;Appenders&amp;gt;
    &amp;lt;File name=&quot;sync-1&quot;&amp;gt;..etc..&amp;lt;/File&amp;gt;
    &amp;lt;File name=&quot;async-2&quot;&amp;gt;..etc..&amp;lt;/File&amp;gt;
    &amp;lt;File name=&quot;sync-3&quot;&amp;gt;..etc..&amp;lt;/File&amp;gt;
    &amp;lt;File name=&quot;async-4&quot;&amp;gt;..etc..&amp;lt;/File&amp;gt;
  &amp;lt;/Appenders&amp;gt;
  &amp;lt;Loggers&amp;gt;
    &amp;lt;Logger name=&quot;com.foo.Bar&quot; level=&quot;trace&quot;&amp;gt;
      &amp;lt;AppenderRef ref=&quot;sync-1&quot;/&amp;gt;
    &amp;lt;/Logger&amp;gt;
    &amp;lt;AsyncLogger name=&quot;com.foo&quot; level=&quot;trace&quot;&amp;gt;
      &amp;lt;AppenderRef ref=&quot;async-2&quot;/&amp;gt;
    &amp;lt;/AsyncLogger&amp;gt;
    &amp;lt;Logger name=&quot;com&quot; level=&quot;trace&quot;&amp;gt;
      &amp;lt;AppenderRef ref=&quot;sync-3&quot;/&amp;gt;
    &amp;lt;/Logger&amp;gt;
    &amp;lt;AsyncRoot level=&quot;info&quot;&amp;gt;
      &amp;lt;AppenderRef ref=&quot;async-4&quot;/&amp;gt;
    &amp;lt;/AsyncRoot&amp;gt;
  &amp;lt;/Loggers&amp;gt;
&amp;lt;/Configuration&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;An event logged to the &quot;com.foo.Bar&quot; logger will write the event to sync-1 (as usual, no different from non-mixed logging), then reach the &quot;com.foo&quot; parent, which is asynchronous.&lt;/p&gt;

&lt;p&gt;Since this is the first asynchronous config we encounter, it works a bit differently (the conditional on AsyncLoggerConfig:89). If the predicate tells us to log all events, and ASYNC_LOGGER_ENTERED is unset, we know we&apos;re the topmost asynchronous logger for the given event. This codepath triggers our split between synchronous and&lt;/p&gt;

&lt;p&gt;asynchronous loggers, we split LoggerConfigPredicate.ALL into a call to super.log for all synchronous configs (the &quot;com&quot; logger/appenders will execute next, in the example above, AsyncRoot will not enqueue events to the RingBuffer), after those execute we enqueue the event to the disruptor (from &quot;com.foo&quot;). The background thread receives our event, and invokes AsyncLoggerConfig.logToAsyncLoggerConfigsOnCurrentThread, which traverses parents the same way we did for synchronous loggers, but with LoggerConfigPredicate.ASYNCHRONOUS_ONLY.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I&apos;ve updated the PR with a test to illustrate that case: &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/164/commits/e630d4f5c7f5341aaebc9a12102f2dba7a638d8d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/164/commits/e630d4f5c7f5341aaebc9a12102f2dba7a638d8d&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Let me know if there&apos;s anything I&apos;ve explained poorly, I can elaborate further.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="16459149" author="ckozak" created="Mon, 30 Apr 2018 22:07:27 +0000"  >&lt;p&gt;Curious if there are outstanding thoughts or concerns with this change. I&apos;m more than happy to hold off merging if folks prefer, otherwise I&apos;ll plan to merge the change tomorrow.&lt;/p&gt;</comment>
                            <comment id="16459364" author="remkop@yahoo.com" created="Tue, 1 May 2018 01:01:34 +0000"  >&lt;p&gt;I had another look and I have no objections. Nice work!&lt;/p&gt;</comment>
                            <comment id="16459375" author="jira-bot" created="Tue, 1 May 2018 01:39:07 +0000"  >&lt;p&gt;Commit d3744807daf27638e1eb0a8f0d41bb7ff1061dde in logging-log4j2&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ckozak&quot; class=&quot;user-hover&quot; rel=&quot;ckozak&quot;&gt;ckozak&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=d374480&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=d374480&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2301&quot; title=&quot;gc-free mixed async loging loses parameter values after the first appender&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2301&quot;&gt;&lt;del&gt;LOG4J2-2301&lt;/del&gt;&lt;/a&gt; Mixed async loggers no longer forget parameter values&lt;/p&gt;

&lt;p&gt;Previously each AsyncLoggerConfig would individually enqueue an&lt;br/&gt;
event on the async delegate disruptor. In practice this caused&lt;br/&gt;
us to trade reusable message parameters away at the first&lt;br/&gt;
AsyncLoggerConfig in our path, causing the rest to get an array&lt;br/&gt;
of nulls.&lt;/p&gt;

&lt;p&gt;Now we begin by traversing the configuration and logging to all&lt;br/&gt;
synchronous loggers first, then enqueue the event to the highest&lt;br/&gt;
level asynchronous logger allowing the asynchronous loggers to be&lt;br/&gt;
traversed on the background thread.&lt;/p&gt;</comment>
                            <comment id="16459376" author="ckozak" created="Tue, 1 May 2018 01:42:31 +0000"  >&lt;p&gt;Wonderful, thanks Remko!&lt;/p&gt;</comment>
                            <comment id="16459386" author="jira-bot" created="Tue, 1 May 2018 02:02:58 +0000"  >&lt;p&gt;Commit fb453229457fb70467576002d8cb96f21143ea77 in logging-log4j2&apos;s branch refs/heads/release-2.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ckozak&quot; class=&quot;user-hover&quot; rel=&quot;ckozak&quot;&gt;ckozak&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=fb45322&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=fb45322&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Add an ignored failing test for &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2301&quot; title=&quot;gc-free mixed async loging loses parameter values after the first appender&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2301&quot;&gt;&lt;del&gt;LOG4J2-2301&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16459387" author="jira-bot" created="Tue, 1 May 2018 02:03:00 +0000"  >&lt;p&gt;Commit b34d8cc585368db51cc84e916a257d55de44e8d0 in logging-log4j2&apos;s branch refs/heads/release-2.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ckozak&quot; class=&quot;user-hover&quot; rel=&quot;ckozak&quot;&gt;ckozak&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=b34d8cc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=b34d8cc&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2301&quot; title=&quot;gc-free mixed async loging loses parameter values after the first appender&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2301&quot;&gt;&lt;del&gt;LOG4J2-2301&lt;/del&gt;&lt;/a&gt; Mixed async loggers no longer forget parameter values&lt;/p&gt;

&lt;p&gt;Previously each AsyncLoggerConfig would individually enqueue an&lt;br/&gt;
event on the async delegate disruptor. In practice this caused&lt;br/&gt;
us to trade reusable message parameters away at the first&lt;br/&gt;
AsyncLoggerConfig in our path, causing the rest to get an array&lt;br/&gt;
of nulls.&lt;/p&gt;

&lt;p&gt;Now we begin by traversing the configuration and logging to all&lt;br/&gt;
synchronous loggers first, then enqueue the event to the highest&lt;br/&gt;
level asynchronous logger allowing the asynchronous loggers to be&lt;br/&gt;
traversed on the background thread.&lt;/p&gt;</comment>
                            <comment id="16459648" author="githubbot" created="Tue, 1 May 2018 12:08:24 +0000"  >&lt;p&gt;Github user cakofony closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/164&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/164&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16742558" author="jira-bot" created="Mon, 14 Jan 2019 23:00:22 +0000"  >&lt;p&gt;Commit dae68a68d6a59468cd15ec3ed0ee42da2457a4b5 in logging-log4j2&apos;s branch refs/heads/release-2.x from mprusakov-rbc&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=dae68a6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=dae68a6&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Remove garbage creation introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2301&quot; title=&quot;gc-free mixed async loging loses parameter values after the first appender&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2301&quot;&gt;&lt;del&gt;LOG4J2-2301&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;After upgrading to 2.11.1 we have started seeing garbage being generated here:&lt;/p&gt;

&lt;p&gt;Stack Trace	TLABs	Total TLAB Size(bytes)	Pressure(%)&lt;br/&gt;
java.lang.ThreadLocal$ThreadLocalMap.set(ThreadLocal, Object) line: 481	10	3,638,864	56.192&lt;br/&gt;
   java.lang.ThreadLocal$ThreadLocalMap.access$100(ThreadLocal$ThreadLocalMap, ThreadLocal, Object) line: 298	10	3,638,864	56.192&lt;br/&gt;
      java.lang.ThreadLocal.setInitialValue() line: 184	10	3,638,864	56.192&lt;br/&gt;
         java.lang.ThreadLocal.get() line: 170	10	3,638,864	56.192&lt;br/&gt;
            org.apache.logging.log4j.core.async.AsyncLoggerConfig.log(LogEvent, LoggerConfig$LoggerConfigPredicate) line: 91	10	3,638,864	56.192&lt;/p&gt;

&lt;p&gt;The purpose of this patch is to fix this.&lt;/p&gt;</comment>
                            <comment id="16742562" author="jira-bot" created="Mon, 14 Jan 2019 23:02:15 +0000"  >&lt;p&gt;Commit c5ede52852739e866b3e4b6782065727b5fd800a in logging-log4j2&apos;s branch refs/heads/master from mprusakov-rbc&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=c5ede52&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=c5ede52&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Remove garbage creation introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2301&quot; title=&quot;gc-free mixed async loging loses parameter values after the first appender&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2301&quot;&gt;&lt;del&gt;LOG4J2-2301&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;After upgrading to 2.11.1 we have started seeing garbage being generated here:&lt;/p&gt;

&lt;p&gt;Stack Trace	TLABs	Total TLAB Size(bytes)	Pressure(%)&lt;br/&gt;
java.lang.ThreadLocal$ThreadLocalMap.set(ThreadLocal, Object) line: 481	10	3,638,864	56.192&lt;br/&gt;
   java.lang.ThreadLocal$ThreadLocalMap.access$100(ThreadLocal$ThreadLocalMap, ThreadLocal, Object) line: 298	10	3,638,864	56.192&lt;br/&gt;
      java.lang.ThreadLocal.setInitialValue() line: 184	10	3,638,864	56.192&lt;br/&gt;
         java.lang.ThreadLocal.get() line: 170	10	3,638,864	56.192&lt;br/&gt;
            org.apache.logging.log4j.core.async.AsyncLoggerConfig.log(LogEvent, LoggerConfig$LoggerConfigPredicate) line: 91	10	3,638,864	56.192&lt;/p&gt;

&lt;p&gt;The purpose of this patch is to fix this.&lt;/p&gt;</comment>
                            <comment id="16742563" author="jira-bot" created="Mon, 14 Jan 2019 23:02:15 +0000"  >&lt;p&gt;Commit b3a910d5ee43e33d6c8d330bbbde2fcde384fe51 in logging-log4j2&apos;s branch refs/heads/master from Carter Kozak&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=b3a910d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=b3a910d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge pull request #251 from mprusakov-rbc/patch-1&lt;/p&gt;

&lt;p&gt;Remove garbage creation introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-2301&quot; title=&quot;gc-free mixed async loging loses parameter values after the first appender&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-2301&quot;&gt;&lt;del&gt;LOG4J2-2301&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 44 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3s1vr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>