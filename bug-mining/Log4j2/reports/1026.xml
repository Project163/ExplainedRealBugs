<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:38:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-1799] Error determining the current charset</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-1799</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;Switching to the latest release I&apos;ve immediately got the following error:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Unable to inject fields into builder &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; plugin type &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.logging.log4j.core.appender.ConsoleAppender, element Consol
e. java.nio.charset.UnsupportedCharsetException: sun.stdout.encoding
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the PropertiesUtil I see the following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Charset getCharsetProperty(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Charset defaultValue) {
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; prop = getStringProperty(name);
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; prop == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ? defaultValue : Charset.forName(name);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Shouldn&apos;t &lt;tt&gt;prop&lt;/tt&gt; be used in &lt;tt&gt;Charset.forName(name)&lt;/tt&gt; instead of &lt;tt&gt;name&lt;/tt&gt;?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13037623">LOG4J2-1799</key>
            <summary>Error determining the current charset</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rpopma">Remko Popma</assignee>
                                    <reporter username="vlotarev">Vadim Lotarev</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Jan 2017 08:57:03 +0000</created>
                <updated>Thu, 2 Feb 2017 17:03:42 +0000</updated>
                            <resolved>Thu, 2 Feb 2017 16:50:00 +0000</resolved>
                                    <version>2.8</version>
                                    <fixVersion>2.8.1</fixVersion>
                                        <due></due>
                            <votes>4</votes>
                                    <watches>11</watches>
                                                                                                                <comments>
                            <comment id="15838028" author="jvz" created="Wed, 25 Jan 2017 16:19:17 +0000"  >&lt;p&gt;Yeah, it looks like it should use &lt;tt&gt;Charset.forName(prop)&lt;/tt&gt;. This is related to &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1636&quot; title=&quot;Console Appender does not pick up Oracle Java 8&amp;#39;s sun.stdout.encoding and sun.stderr.encoding &quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1636&quot;&gt;&lt;del&gt;LOG4J2-1636&lt;/del&gt;&lt;/a&gt; which amusingly enough is marked as fixed in the changelog, but open in JIRA.&lt;/p&gt;</comment>
                            <comment id="15845206" author="edwgiz" created="Mon, 30 Jan 2017 13:52:28 +0000"  >&lt;p&gt;This workaround should help until next release&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.getProperties().remove(&lt;span class=&quot;code-quote&quot;&gt;&quot;sun.stdout.encoding&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.getProperties().remove(&lt;span class=&quot;code-quote&quot;&gt;&quot;sun.stderr.encoding&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;must be called before of log4j initialization&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15849800" author="githubbot" created="Thu, 2 Feb 2017 11:21:15 +0000"  >&lt;p&gt;GitHub user edwgiz opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/57&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/57&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1799&quot; title=&quot;Error determining the current charset&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1799&quot;&gt;&lt;del&gt;LOG4J2-1799&lt;/del&gt;&lt;/a&gt;: Error determining the current charset&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1799&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/LOG4J2-1799&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    It would be nice to add this fix to 2.8.1 release.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/edwgiz/logging-log4j2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/edwgiz/logging-log4j2&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1799&quot; title=&quot;Error determining the current charset&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1799&quot;&gt;&lt;del&gt;LOG4J2-1799&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/57.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/57.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #57&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 84d816ffbfac090de73ff283307b473850899723&lt;br/&gt;
Author: Eduard Gizatullin &amp;lt;edwgiz@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-02-02T11:16:10Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1799&quot; title=&quot;Error determining the current charset&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1799&quot;&gt;&lt;del&gt;LOG4J2-1799&lt;/del&gt;&lt;/a&gt;: Error determining the current charset&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15849836" author="githubbot" created="Thu, 2 Feb 2017 12:01:50 +0000"  >&lt;p&gt;Github user edwgiz commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/57&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/57&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    How to restart the Travis check? There&apos;s just a log length exceeding because a lot of Maven downloads&lt;/p&gt;</comment>
                            <comment id="15850079" author="githubbot" created="Thu, 2 Feb 2017 15:58:46 +0000"  >&lt;p&gt;Github user jvz commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/57&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/57&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I don&apos;t see any way to replay it from Travis. You could try doing a `git commit --amend` and `git push --force`. That will change the commit id which should trigger a new build.&lt;/p&gt;</comment>
                            <comment id="15850155" author="jira-bot" created="Thu, 2 Feb 2017 16:46:53 +0000"  >&lt;p&gt;Commit 84d816ffbfac090de73ff283307b473850899723 in logging-log4j2&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=edwgiz&quot; class=&quot;user-hover&quot; rel=&quot;edwgiz&quot;&gt;edwgiz&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=84d816f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=84d816f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1799&quot; title=&quot;Error determining the current charset&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1799&quot;&gt;&lt;del&gt;LOG4J2-1799&lt;/del&gt;&lt;/a&gt;: Error determining the current charset&lt;/p&gt;</comment>
                            <comment id="15850156" author="jira-bot" created="Thu, 2 Feb 2017 16:46:55 +0000"  >&lt;p&gt;Commit e31731b6898a3f241c65fc613e7948284a4a42df in logging-log4j2&apos;s branch refs/heads/master from rpopma&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=e31731b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=e31731b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge branch &apos;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1799&quot; title=&quot;Error determining the current charset&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1799&quot;&gt;&lt;del&gt;LOG4J2-1799&lt;/del&gt;&lt;/a&gt;&apos; of &lt;a href=&quot;https://github.com/edwgiz/logging-log4j2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/edwgiz/logging-log4j2&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15850157" author="jira-bot" created="Thu, 2 Feb 2017 16:46:56 +0000"  >&lt;p&gt;Commit ac51b5bc451f2de2ab80fb42d1b9782c7c785d29 in logging-log4j2&apos;s branch refs/heads/master from rpopma&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=ac51b5b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=ac51b5b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1799&quot; title=&quot;Error determining the current charset&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1799&quot;&gt;&lt;del&gt;LOG4J2-1799&lt;/del&gt;&lt;/a&gt; Fixed bug in PropertiesUtil::getCharsetProperty that caused UnsupportedCharsetException for ConsoleAppender.&lt;/p&gt;

&lt;p&gt;This closes #57&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/57&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/57&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15850159" author="githubbot" created="Thu, 2 Feb 2017 16:47:20 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/57&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/57&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15850163" author="remkop@yahoo.com" created="Thu, 2 Feb 2017 16:50:00 +0000"  >&lt;p&gt;Fixed in master. Please verify and close.&lt;/p&gt;</comment>
                            <comment id="15850186" author="githubbot" created="Thu, 2 Feb 2017 17:03:42 +0000"  >&lt;p&gt;Github user edwgiz commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/logging-log4j2/pull/57&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/pull/57&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Ok, thanks a lot&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="13010862">LOG4J2-1636</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 41 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i396af:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>