<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:42:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-3458] LocalizedMessage logs misleading errors on the console</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-3458</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;I have an app where we log data that is percent encoded through a localized message factory. We get a ton of noise on the console due to logging of internal exceptions, for example:&lt;/p&gt;

&lt;p&gt;ERROR StatusLogger Unable to format msg: C:/Program%20Files/Some%20Company/Some%20Product%20Name/&lt;br/&gt;
&#160;java.util.UnknownFormatConversionException: Conversion = &apos;F&apos;&lt;br/&gt;
&#160; &#160; at java.util.Formatter$FormatSpecifier.conversion(Formatter.java:2691)&lt;br/&gt;
&#160; &#160; at java.util.Formatter$FormatSpecifier.&amp;lt;init&amp;gt;(Formatter.java:2720)&lt;br/&gt;
&#160; &#160; at java.util.Formatter.parse(Formatter.java:2560)&lt;br/&gt;
&#160; &#160; at java.util.Formatter.format(Formatter.java:2501)&lt;br/&gt;
&#160; &#160; at java.util.Formatter.format(Formatter.java:2455)&lt;br/&gt;
&#160; &#160; at java.lang.String.format(String.java:2981)&lt;br/&gt;
&#160; &#160; at org.apache.logging.log4j.message.StringFormattedMessage.formatMessage(StringFormattedMessage.java:116)&lt;br/&gt;
&#160; &#160; at org.apache.logging.log4j.message.StringFormattedMessage.getFormattedMessage(StringFormattedMessage.java:88)&lt;br/&gt;
&#160; &#160; at org.apache.logging.log4j.message.FormattedMessage.getFormattedMessage(FormattedMessage.java:178)&lt;br/&gt;
&#160; &#160; at org.apache.logging.log4j.message.LocalizedMessage.getFormattedMessage(LocalizedMessage.java:196)&lt;br/&gt;
&#160; &#160; at org.apache.logging.log4j.message.LocalizedSimpleMessageFactoryTest.testNoMatchPercentInMessage(LocalizedSimpleMessageFactoryTest.java:79)&lt;/p&gt;

&lt;p&gt;I updated this test to demonstrate: &lt;a href=&quot;https://github.com/apache/logging-log4j2/blob/release-2.x/log4j-api/src/test/java/org/apache/logging/log4j/message/LocalizedMessageFactoryTest.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/logging-log4j2/blob/release-2.x/log4j-api/src/test/java/org/apache/logging/log4j/message/LocalizedMessageFactoryTest.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In a nutshell:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#160; &#160; @Test
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testNoMatchPercentInMessage() {
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; LocalizedMessageFactory localizedMessageFactory = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LocalizedMessageFactory(ResourceBundle.getBundle(&lt;span class=&quot;code-quote&quot;&gt;&quot;MF&quot;&lt;/span&gt;, Locale.US));
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Message message = localizedMessageFactory.newMessage(&lt;span class=&quot;code-quote&quot;&gt;&quot;C:/Program%20Files/Some%20Company/Some%20Product%20Name/&quot;&lt;/span&gt;);
&#160; &#160; &#160; &#160; assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;C:/Program%20Files/Some%20Company/Some%20Product%20Name/&quot;&lt;/span&gt;, message.getFormattedMessage());
&#160; &#160; }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Options:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Don&apos;t log the exception (simple)&lt;/li&gt;
	&lt;li&gt;Log at the TRACE level instead of ERROR.&lt;/li&gt;
	&lt;li&gt;Provide a better simpler localized MessageFactory that does not perform % substitution&lt;/li&gt;
	&lt;li&gt;?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I read the Javadoc that says that using a localized MessageFactory is not preferred, but it would be a large change for our app.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13436770">LOG4J2-3458</key>
            <summary>LocalizedMessage logs misleading errors on the console</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ggregory">Gary D. Gregory</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Mar 2022 23:01:24 +0000</created>
                <updated>Mon, 2 May 2022 21:12:17 +0000</updated>
                            <resolved>Thu, 31 Mar 2022 04:37:28 +0000</resolved>
                                    <version>2.17.2</version>
                                    <fixVersion>2.18.0</fixVersion>
                                    <component>API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17514979" author="jvz" created="Wed, 30 Mar 2022 23:10:34 +0000"  >&lt;p&gt;I&apos;d say that if you&apos;re logging an exception instance where the place to go look to debug the issue is obvious, then that&apos;s unnecessary noise. In this case, you could remove the exception and only log its message, or perhaps include the exception as a follow-up trace log event.&lt;/p&gt;</comment>
                            <comment id="17514993" author="ralph.goers@dslextreme.com" created="Thu, 31 Mar 2022 00:05:39 +0000"  >&lt;p&gt;This example makes no sense to me. The value of newMessage is supposed to be a message key. Why is it a file path?&#160;&lt;/p&gt;

&lt;p&gt;That said, it seems LocalizedMessage is using FormattedMessage to determine the type of message formatting to use. I see it is using RegEx matching to do that. We should probably allow the LocalizedMessageFactory to be able to be configured with the MessageFactory to use when resolving the message rather than relying completely on the dynamic check.&lt;/p&gt;</comment>
                            <comment id="17515067" author="jira-bot" created="Thu, 31 Mar 2022 04:36:24 +0000"  >&lt;p&gt;Commit 5eaeb95760b9d4460288fde9c7af3f2cf98765ae in logging-log4j2&apos;s branch refs/heads/release-2.x from Gary Gregory&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=5eaeb95&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=5eaeb95&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3458&quot; title=&quot;LocalizedMessage logs misleading errors on the console&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3458&quot;&gt;&lt;del&gt;LOG4J2-3458&lt;/del&gt;&lt;/a&gt; LocalizedMessage logs misleading errors on the console.&lt;/p&gt;</comment>
                            <comment id="17515069" author="garydgregory" created="Thu, 31 Mar 2022 04:37:28 +0000"  >&lt;p&gt;Fixed in &lt;tt&gt;org.apache.logging.log4j.message.StringFormattedMessage.formatMessage(String, Object...)&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="17515081" author="jira-bot" created="Thu, 31 Mar 2022 05:02:39 +0000"  >&lt;p&gt;Commit 55a0147ec3cef9cd87c9f96e5ceb202eeb487249 in logging-log4j2&apos;s branch refs/heads/master from Gary Gregory&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=55a0147&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=logging-log4j2.git;h=55a0147&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-3458&quot; title=&quot;LocalizedMessage logs misleading errors on the console&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-3458&quot;&gt;&lt;del&gt;LOG4J2-3458&lt;/del&gt;&lt;/a&gt; LocalizedMessage logs misleading errors on the console.&lt;/p&gt;

&lt;p&gt;Can&apos;t cherry-pick from release-2.x.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 32 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z10zo0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>