<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:38:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-1804] Rolling file %i based rolling broken in 2.8</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-1804</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;Log files do not seem to be rolling up to the max number of files as specified in DefaultRolloverStrategy while utilizing a SizeBasedTriggeringPolicy. It is just rolling just to 1 file.&lt;/p&gt;

&lt;p&gt;Simple repro:&lt;/p&gt;

&lt;p&gt;log4j2.xml&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;?&amp;gt;
&amp;lt;Configuration status=&lt;span class=&quot;code-quote&quot;&gt;&quot;INFO&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;MyApp&quot;&lt;/span&gt;&amp;gt;
    &amp;lt;Appenders&amp;gt;
        &amp;lt;RollingFile name=&lt;span class=&quot;code-quote&quot;&gt;&quot;rolling&quot;&lt;/span&gt;
                     fileName=&lt;span class=&quot;code-quote&quot;&gt;&quot;__logs__/rolling.log&quot;&lt;/span&gt;
                     filePattern=&lt;span class=&quot;code-quote&quot;&gt;&quot;__logs__/rolling.log.%i&quot;&lt;/span&gt;
                     immediateFlush=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;&amp;gt;
            &amp;lt;PatternLayout pattern=&lt;span class=&quot;code-quote&quot;&gt;&quot;%d %5p [%t] (%c) - %m%n&quot;&lt;/span&gt;/&amp;gt;
            &amp;lt;SizeBasedTriggeringPolicy size=&lt;span class=&quot;code-quote&quot;&gt;&quot;1MB&quot;&lt;/span&gt;/&amp;gt;
            &amp;lt;DefaultRolloverStrategy max=&lt;span class=&quot;code-quote&quot;&gt;&quot;10&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;/RollingFile&amp;gt;
    &amp;lt;/Appenders&amp;gt;
    &amp;lt;Loggers&amp;gt;
        &amp;lt;Root level=&lt;span class=&quot;code-quote&quot;&gt;&quot;INFO&quot;&lt;/span&gt;&amp;gt;
            &amp;lt;AppenderRef ref=&lt;span class=&quot;code-quote&quot;&gt;&quot;rolling&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;/Root&amp;gt;
    &amp;lt;/Loggers&amp;gt;
&amp;lt;/Configuration&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;MyApp.scala:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; scala.util.Random
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.logging.log4j.LogManager

object MyApp &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; App {
  val log = LogManager.getLogger(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.getClass)

  &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; counter = 0L
  &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; bytes = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Array[&lt;span class=&quot;code-object&quot;&gt;Byte&lt;/span&gt;](1000)
  &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;) {
    Random.nextBytes(bytes)
    log.info(f&lt;span class=&quot;code-quote&quot;&gt;&quot;Log statement: $counter%08x ${bytes.mkString}&quot;&lt;/span&gt;)
    counter += 1
    &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(5)
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you run that against 2.7, things roll fine. If you run that against 2.8, you&apos;ll only see rolling.log &amp;amp; rolling.log.1 in the _&lt;em&gt;logs&lt;/em&gt;_ folder.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13039606">LOG4J2-1804</key>
            <summary>Rolling file %i based rolling broken in 2.8</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rgoers">Ralph Goers</assignee>
                                    <reporter username="bhmiller">Brendan Miller</reporter>
                        <labels>
                    </labels>
                <created>Wed, 1 Feb 2017 21:42:30 +0000</created>
                <updated>Wed, 15 Aug 2018 16:06:52 +0000</updated>
                            <resolved>Sun, 26 Feb 2017 05:34:16 +0000</resolved>
                                    <version>2.8</version>
                                    <fixVersion>2.8.1</fixVersion>
                                    <component>Appenders</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15868236" author="phymbert" created="Wed, 15 Feb 2017 17:42:19 +0000"  >&lt;p&gt;Unit test to reproduce the issue.&lt;/p&gt;</comment>
                            <comment id="15868278" author="phymbert" created="Wed, 15 Feb 2017 18:07:09 +0000"  >&lt;p&gt;Temporary solution for 2.8 by configuration is to use such &quot;-&quot; as separator inside &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;filePattern=&lt;span class=&quot;code-quote&quot;&gt;&quot;__logs__/rolling.log-%i&quot;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; instead of dot.&lt;/p&gt;</comment>
                            <comment id="15868358" author="phymbert" created="Wed, 15 Feb 2017 18:57:02 +0000"  >&lt;p&gt;Suggested patch, but I think the approach of using an arbitrary file index to generate a file pattern is wrong.&lt;br/&gt;
Maybe &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ralph.goers%40dslextreme.com&quot; class=&quot;user-hover&quot; rel=&quot;ralph.goers@dslextreme.com&quot;&gt;ralph.goers@dslextreme.com&lt;/a&gt; has a better idea ?&lt;/p&gt;</comment>
                            <comment id="15884550" author="jira-bot" created="Sun, 26 Feb 2017 05:33:24 +0000"  >&lt;p&gt;Commit 88853d4e8406bc4204669ebd295b77c778533293 in logging-log4j2&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ralph_goers%40dslextreme.com&quot; class=&quot;user-hover&quot; rel=&quot;ralph_goers@dslextreme.com&quot;&gt;ralph_goers@dslextreme.com&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=88853d4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=88853d4&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1804&quot; title=&quot;Rolling file %i based rolling broken in 2.8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1804&quot;&gt;&lt;del&gt;LOG4J2-1804&lt;/del&gt;&lt;/a&gt; - Allow %i in file pattern to be preceded with characters other than just &apos;-&apos;.&lt;/p&gt;</comment>
                            <comment id="15884551" author="ralph.goers@dslextreme.com" created="Sun, 26 Feb 2017 05:34:16 +0000"  >&lt;p&gt;A modified version of the patch and test were applied. Please verify and close.&lt;/p&gt;</comment>
                            <comment id="15897220" author="phymbert" created="Mon, 6 Mar 2017 12:53:41 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ralph.goers%40dslextreme.com&quot; class=&quot;user-hover&quot; rel=&quot;ralph.goers@dslextreme.com&quot;&gt;ralph.goers@dslextreme.com&lt;/a&gt;, it looks great for me, thank you. But I am not the original creator of this jira.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bhmiller&quot; class=&quot;user-hover&quot; rel=&quot;bhmiller&quot;&gt;bhmiller&lt;/a&gt; Please check if you are ok with this fix in 2.8.1.&lt;/p&gt;</comment>
                            <comment id="15897924" author="bhmiller" created="Mon, 6 Mar 2017 19:49:18 +0000"  >&lt;p&gt;Looks to work for me in 2.8.1. Thanks.&lt;/p&gt;</comment>
                            <comment id="15898255" author="garydgregory" created="Mon, 6 Mar 2017 22:17:20 +0000"  >&lt;p&gt;Closing as fixed in 2.8.1.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310361">
                    <name>Blocked</name>
                                                                <inwardlinks description="Blocked">
                                        <issuelink>
            <issuekey id="13085649">STORM-2617</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13045673">LOG4J2-1821</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12858043">LOG4J2-1101</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12852885" name="LOG4J2-1804.junit.and.fix.patch" size="11912" author="phymbert" created="Wed, 15 Feb 2017 18:57:02 +0000"/>
                            <attachment id="12852877" name="LOG4J2-1804.junit.patch" size="6631" author="phymbert" created="Wed, 15 Feb 2017 18:33:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 37 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39hmv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>