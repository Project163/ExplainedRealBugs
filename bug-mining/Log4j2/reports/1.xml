<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:30:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-49] double message formatting w/SLF4JLogger</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-49</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;SLF4JLogger implements LocationAwareLogger which has&lt;/p&gt;

&lt;p&gt;public void log(Marker marker, String fqcn, int level, String message, Object[] argArray, Throwable t);&lt;/p&gt;

&lt;p&gt;Callers of this method format the message in advance.  But SLF4JLogger also performs formatting.&lt;/p&gt;

&lt;p&gt;Example:&lt;/p&gt;

&lt;p&gt;slf4jLogger.info(&quot;slf4jLogger {}&quot;, &quot;is formated twice? &amp;lt;{}&amp;gt;&quot;); // works&lt;br/&gt;
slf4jXlogger.info(&quot;slf4jXLogger {}&quot;, &quot;is formated twice? &amp;lt;{}&amp;gt;&quot;); // fails&lt;/p&gt;

&lt;p&gt;log4j2Logger.info(&quot;log4j2Logger shouldn&apos;t format &amp;lt;{}&amp;gt;&quot;); // works&lt;br/&gt;
jclOverSlf4jLogger.info(&quot;jclOverSlf4jLogger shouldn&apos;t format &amp;lt;{}&amp;gt;&quot;); // fails&lt;/p&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;p&gt;INFO Log4j2Testing &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; slf4jLogger is formated twice? &amp;lt;{}&amp;gt;&lt;br/&gt;
INFO Log4j2Testing &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; slf4jXLogger is formated twice? &amp;lt;[&lt;span class=&quot;error&quot;&gt;&amp;#91;is formated twice? &amp;lt;{}&amp;gt;&amp;#93;&lt;/span&gt;, null]&amp;gt;&lt;br/&gt;
INFO Log4j2Testing &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; log4j2Logger shouldn&apos;t format &amp;lt;{}&amp;gt;&lt;br/&gt;
INFO Log4j2Testing &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; jclOverSlf4jLogger shouldn&apos;t format &amp;lt;&lt;span class=&quot;error&quot;&gt;&amp;#91;null, null&amp;#93;&lt;/span&gt;&amp;gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12523367">LOG4J2-49</key>
            <summary>double message formatting w/SLF4JLogger</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rgoers">Ralph Goers</assignee>
                                    <reporter username="jvasileff">John Vasileff</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Sep 2011 17:46:49 +0000</created>
                <updated>Wed, 11 Jul 2012 20:13:33 +0000</updated>
                            <resolved>Sun, 18 Sep 2011 03:27:43 +0000</resolved>
                                                                    <component>API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13107328" author="ralph.goers@dslextreme.com" created="Sun, 18 Sep 2011 03:27:43 +0000"  >&lt;p&gt;This really should have been opened as two separate Jira issues.&lt;/p&gt;

&lt;p&gt;You have identified two problems:&lt;br/&gt;
1. SLF4J&apos;s XLogger formats twice when one of the parameters contains &quot;{}&quot;.  I tested this with Logback (which I would consider to be the reference implementation for SLF4J) and it behaves more or less the same way. There was an issue regarding the &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot; and &amp;quot;&amp;#93;&lt;/span&gt;&quot; being inserted but after fixing the second item below the same output as Logback is logged.&lt;br/&gt;
2. SLF4J&apos;s jcl-over-sl4j is formatting incorrectly. I have corrected this. &lt;/p&gt;</comment>
                            <comment id="13107360" author="ralph.goers@dslextreme.com" created="Sun, 18 Sep 2011 06:24:51 +0000"  >&lt;p&gt;I should also point out that rather than using SLF4J&apos;s jcl-over-slf4j using log4j2-jcl would be more appropriate if the underlying implementation is Log4j 2.0.&lt;/p&gt;</comment>
                            <comment id="13411929" author="ralph.goers@dslextreme.com" created="Wed, 11 Jul 2012 20:13:33 +0000"  >&lt;p&gt;Closing since there have not been any updates to this issue since it was marked resolved.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>60290</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 19 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0129z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4135</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>