<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:32:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-703] Android: Could not find class &apos;javax.naming.InitialContext&apos;, referenced from method org.apache.logging.log4j.core.lookup.JndiLookup.lookup</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-703</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;Hi guys, i&apos;m trying to use Log4J2 in an Android (19) application and it&apos;s not working. Here is the code i have and the stacktrace i obtain when running the application.&lt;/p&gt;

&lt;p&gt;Am i missing something or is Log4J2 not working yet in an Android environment ?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;MyActivity.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.logging.log4j.LogManager;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.logging.log4j.Logger;


&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MyActivity &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Activity {

    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Logger logger = LogManager.getLogger(MyActivity.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getName());

    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void onCreate(Bundle savedInstanceState) {
        &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.onCreate(savedInstanceState);
        setContentView(R.layout.activity_my);
        logger.error(&lt;span class=&quot;code-quote&quot;&gt;&quot;TEST ############################################&quot;&lt;/span&gt;);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;07-08 10:40:23.401    1307-1307/com.intl.log4j2xtest E/dalvikvm&#65109; Could not find class &apos;javax.naming.InitialContext&apos;, referenced from method org.apache.logging.log4j.core.lookup.JndiLookup.lookup
07-08 10:40:23.441    1307-1307/com.intl.log4j2xtest E/AndroidRuntime&#65109; FATAL EXCEPTION: main
    Process: com.intl.log4j2xtest, PID: 1307
    java.lang.VerifyError: org/apache/logging/log4j/core/lookup/JndiLookup
            at org.apache.logging.log4j.core.lookup.Interpolator.&amp;lt;init&amp;gt;(Interpolator.java:75)
            at org.apache.logging.log4j.core.config.AbstractConfiguration.&amp;lt;init&amp;gt;(AbstractConfiguration.java:99)
            at org.apache.logging.log4j.core.config.NullConfiguration.&amp;lt;init&amp;gt;(NullConfiguration.java:29)
            at org.apache.logging.log4j.core.LoggerContext.&amp;lt;clinit&amp;gt;(LoggerContext.java:63)
            at org.apache.logging.log4j.core.selector.ClassLoaderContextSelector.locateContext(ClassLoaderContextSelector.java:218)
            at org.apache.logging.log4j.core.selector.ClassLoaderContextSelector.getContext(ClassLoaderContextSelector.java:144)
            at org.apache.logging.log4j.core.selector.ClassLoaderContextSelector.getContext(ClassLoaderContextSelector.java:80)
            at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:72)
            at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:37)
            at org.apache.logging.log4j.LogManager.getLogger(LogManager.java:473)
            at com.intl.log4j2xtest.MyActivity.&amp;lt;clinit&amp;gt;(MyActivity.java:16)
            at java.lang.Class.newInstanceImpl(Native Method)
            at java.lang.Class.newInstance(Class.java:1208)
            at android.app.Instrumentation.newActivity(Instrumentation.java:1061)
            at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2112)
            at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2245)
            at android.app.ActivityThread.access$800(ActivityThread.java:135)
            at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1196)
            at android.os.Handler.dispatchMessage(Handler.java:102)
            at android.os.Looper.loop(Looper.java:136)
            at android.app.ActivityThread.main(ActivityThread.java:5017)
            at java.lang.reflect.Method.invokeNative(Native Method)
            at java.lang.reflect.Method.invoke(Method.java:515)
            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:779)
            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:595)
            at dalvik.system.NativeStart.main(Native Method)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;build.gradle file :&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;apply plugin: &apos;com.android.application&apos;

android {
    compileSdkVersion 19
    buildToolsVersion &quot;19.1.0&quot;

    defaultConfig {
        applicationId &quot;com.intl.log4j2xtest&quot;
        minSdkVersion 19
        targetSdkVersion 19
        versionCode 1
        versionName &quot;1.0&quot;
    }
    buildTypes {
        release {
            runProguard false
            proguardFiles getDefaultProguardFile(&apos;proguard-android.txt&apos;), &apos;proguard-rules.pro&apos;
        }
    }
    packagingOptions {
        exclude &apos;META-INF/LICENSE&apos;
        exclude &apos;META-INF/NOTICE&apos;
    }
}

dependencies {
    compile fileTree(dir: &apos;libs&apos;, include: [&apos;*.jar&apos;])
    compile group: &apos;org.apache.logging.log4j&apos;, name: &apos;log4j-api&apos;, version: &apos;2.0-rc2&apos;
    compile group: &apos;org.apache.logging.log4j&apos;, name: &apos;log4j-core&apos;, version: &apos;2.0-rc2&apos;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Android&lt;/p&gt;</environment>
        <key id="12726045">LOG4J2-703</key>
            <summary>Android: Could not find class &apos;javax.naming.InitialContext&apos;, referenced from method org.apache.logging.log4j.core.lookup.JndiLookup.lookup</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="DaLN">Nelson MELINA</reporter>
                        <labels>
                            <label>Android</label>
                    </labels>
                <created>Tue, 8 Jul 2014 10:52:23 +0000</created>
                <updated>Wed, 5 Jul 2017 19:53:20 +0000</updated>
                            <resolved>Tue, 15 Jul 2014 16:11:56 +0000</resolved>
                                    <version>2.0-rc2</version>
                                    <fixVersion>2.0</fixVersion>
                    <fixVersion>2.0.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14055487" author="jvz" created="Tue, 8 Jul 2014 20:37:40 +0000"  >&lt;p&gt;It appears that Android does not ship with the &lt;tt&gt;javax.naming&lt;/tt&gt; package.&lt;/p&gt;</comment>
                            <comment id="14055565" author="ralph.goers@dslextreme.com" created="Tue, 8 Jul 2014 21:28:19 +0000"  >&lt;p&gt;To my knowledge no one has ever tested on Android. That said, JndiLookup should probably be in the web sub-project.&lt;/p&gt;</comment>
                            <comment id="14056024" author="daln" created="Wed, 9 Jul 2014 09:16:32 +0000"  >&lt;p&gt;Yes &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jvz&quot; class=&quot;user-hover&quot; rel=&quot;jvz&quot;&gt;jvz&lt;/a&gt; it looks like that.&lt;/p&gt;

&lt;p&gt;Should i just copy the javax.naming package in my application like this &lt;a href=&quot;https://code.google.com/p/dalvik/wiki/JavaxPackages&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://code.google.com/p/dalvik/wiki/JavaxPackages&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="14056316" author="jvz" created="Wed, 9 Jul 2014 14:59:46 +0000"  >&lt;p&gt;It&apos;s worth a shot. That&apos;s the same resource I found. There may be a process for allowing endorsed JARs for using the javax namespace. If that doesn&apos;t work, we may need to figure out a workaround. It may be possible that you&apos;ll need to package-rename the JNDI classes (not sure on which ones), and in that case, there would need to be added support for accessing JNDI through a layer of indirection.&lt;/p&gt;</comment>
                            <comment id="14056332" author="garydgregory" created="Wed, 9 Jul 2014 15:19:02 +0000"  >&lt;p&gt;Why not simply:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;### Eclipse Workspace Patch 1.0
#P log4j-core
Index: src/main/java/org/apache/logging/log4j/core/lookup/Interpolator.java
===================================================================
--- src/main/java/org/apache/logging/log4j/core/lookup/Interpolator.java	(revision 1608975)
+++ src/main/java/org/apache/logging/log4j/core/lookup/Interpolator.java	(working copy)
@@ -72,7 +72,12 @@
         // TODO: this ought to use the PluginManager
         lookups.put(&quot;sys&quot;, new SystemPropertiesLookup());
         lookups.put(&quot;env&quot;, new EnvironmentLookup());
-        lookups.put(&quot;jndi&quot;, new JndiLookup());
+        try {
+            lookups.put(&quot;jndi&quot;, new JndiLookup());
+        } catch (Exception e) {
+            // We must be on Android
+            LOGGER.warn(&quot;JNDI lookup is not available, continuing configuration without it&quot;, e);
+        }
         lookups.put(&quot;date&quot;, new DateLookup());
         lookups.put(&quot;ctx&quot;, new ContextMapLookup());
         if (Loader.isClassAvailable(&quot;javax.servlet.ServletContext&quot;)) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14056333" author="jvz" created="Wed, 9 Jul 2014 15:21:39 +0000"  >&lt;p&gt;It&apos;s a VerifyError which means it happened at class load time. Needs a layer of indirection to prevent the issue. Probably use reflection, too, to try loading the JNDI classes in that layer as well to prevent class load errors.&lt;/p&gt;</comment>
                            <comment id="14056532" author="jvz" created="Wed, 9 Jul 2014 17:59:54 +0000"  >&lt;p&gt;Due to the runtime error of constructing JndiLookup, here&apos;s something a bit more fault tolerant:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (Loader.isClassAvailable(&lt;span class=&quot;code-quote&quot;&gt;&quot;javax.naming.Context&quot;&lt;/span&gt;)) {
            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
                lookups.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;jndi&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JndiLookup());
            } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Throwable ignored) {
                LOGGER.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Log4j is running in a JVM that lacks JNDI. JNDI string lookups will not be available.&quot;&lt;/span&gt;);
            }
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I was considering loading the JndiLookup class reflectively, too, but it&apos;s not a link-time error. The error happens when the constructor is called apparently. Either way, you need to catch Throwable since VerifyError is not an Exception.&lt;/p&gt;</comment>
                            <comment id="14057086" author="garydgregory" created="Thu, 10 Jul 2014 03:22:03 +0000"  >&lt;p&gt;Committed revision 1609378.&lt;/p&gt;

&lt;p&gt;The code now guards against this failure, logs a warning and continues on its merry way. You just will not be able to do JNDI lookups if JNDI is not there, like apparently, on Android.&lt;/p&gt;

&lt;p&gt;Please test and close if it works for you.&lt;/p&gt;</comment>
                            <comment id="14057365" author="daln" created="Thu, 10 Jul 2014 10:57:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt; Where can i download the code from that revision to use it ?&lt;/p&gt;</comment>
                            <comment id="14057368" author="manyofh" created="Thu, 10 Jul 2014 11:04:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=DaLN&quot; class=&quot;user-hover&quot; rel=&quot;DaLN&quot;&gt;DaLN&lt;/a&gt; look at this page &lt;a href=&quot;http://logging.apache.org/log4j/2.x/build.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://logging.apache.org/log4j/2.x/build.html&lt;/a&gt; and &lt;a href=&quot;http://logging.apache.org/log4j/2.x/source-repository.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://logging.apache.org/log4j/2.x/source-repository.html&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14060862" author="daln" created="Mon, 14 Jul 2014 17:04:32 +0000"  >&lt;p&gt;Still had this error :&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;07-14 17:02:49.703    1418-1418/com.torointl.log4j2xtest E/dalvikvm&#65109; Could not find class &apos;javax.naming.InitialContext&apos;, referenced from method org.apache.logging.log4j.core.lookup.JndiLookup.lookup
07-14 17:02:49.703    1418-1418/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to resolve new-instance 388 (Ljavax/naming/InitialContext;) in Lorg/apache/logging/log4j/core/lookup/JndiLookup;
07-14 17:02:49.707    1418-1418/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to resolve exception class 390 (Ljavax/naming/NamingException;)
07-14 17:02:49.707    1418-1418/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find exception handler at addr 0x19
07-14 17:02:49.707    1418-1418/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY:  rejected Lorg/apache/logging/log4j/core/lookup/JndiLookup;.lookup (Lorg/apache/logging/log4j/core/LogEvent;Ljava/lang/String;)Ljava/lang/String;
07-14 17:02:49.711    1418-1418/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY:  rejecting opcode 0x0d at 0x0019
07-14 17:02:49.711    1418-1418/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY:  rejected Lorg/apache/logging/log4j/core/lookup/JndiLookup;.lookup (Lorg/apache/logging/log4j/core/LogEvent;Ljava/lang/String;)Ljava/lang/String;
07-14 17:02:49.711    1418-1418/com.torointl.log4j2xtest W/dalvikvm&#65109; Verifier rejected class Lorg/apache/logging/log4j/core/lookup/JndiLookup;
07-14 17:02:49.711    1418-1418/com.torointl.log4j2xtest W/dalvikvm&#65109; Exception Ljava/lang/VerifyError; thrown while initializing Lorg/apache/logging/log4j/core/LoggerContext;
07-14 17:02:49.711    1418-1418/com.torointl.log4j2xtest W/dalvikvm&#65109; Exception Ljava/lang/VerifyError; thrown while initializing Lcom/torointl/log4j2xtest/MyActivity;
07-14 17:02:49.715    1418-1418/com.torointl.log4j2xtest W/dalvikvm&#65109; Class init failed in newInstance call (Lcom/torointl/log4j2xtest/MyActivity;)
07-14 17:02:49.719    1418-1418/com.torointl.log4j2xtest W/dalvikvm&#65109; threadid=1: thread exiting with uncaught exception (group=0xa4d16b20)
07-14 17:02:49.747    1418-1418/com.torointl.log4j2xtest E/AndroidRuntime&#65109; FATAL EXCEPTION: main
    Process: com.torointl.log4j2xtest, PID: 1418
    java.lang.VerifyError: org/apache/logging/log4j/core/lookup/JndiLookup
            at org.apache.logging.log4j.core.lookup.Interpolator.&amp;lt;init&amp;gt;(Interpolator.java:76)
            at org.apache.logging.log4j.core.config.AbstractConfiguration.&amp;lt;init&amp;gt;(AbstractConfiguration.java:99)
            at org.apache.logging.log4j.core.config.NullConfiguration.&amp;lt;init&amp;gt;(NullConfiguration.java:29)
            at org.apache.logging.log4j.core.LoggerContext.&amp;lt;clinit&amp;gt;(LoggerContext.java:63)
            at org.apache.logging.log4j.core.selector.ClassLoaderContextSelector.locateContext(ClassLoaderContextSelector.java:218)
            at org.apache.logging.log4j.core.selector.ClassLoaderContextSelector.getContext(ClassLoaderContextSelector.java:144)
            at org.apache.logging.log4j.core.selector.ClassLoaderContextSelector.getContext(ClassLoaderContextSelector.java:80)
            at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:72)
            at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:37)
            at org.apache.logging.log4j.LogManager.getLogger(LogManager.java:473)
            at com.torointl.log4j2xtest.MyActivity.&amp;lt;clinit&amp;gt;(MyActivity.java:14)
            at java.lang.Class.newInstanceImpl(Native Method)
            at java.lang.Class.newInstance(Class.java:1208)
            at android.app.Instrumentation.newActivity(Instrumentation.java:1061)
            at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2112)
            at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2245)
            at android.app.ActivityThread.access$800(ActivityThread.java:135)
            at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1196)
            at android.os.Handler.dispatchMessage(Handler.java:102)
            at android.os.Looper.loop(Looper.java:136)
            at android.app.ActivityThread.main(ActivityThread.java:5017)
            at java.lang.reflect.Method.invokeNative(Native Method)
            at java.lang.reflect.Method.invoke(Method.java:515)
            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:779)
            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:595)
            at dalvik.system.NativeStart.main(Native Method)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;Then i tried by commenting directly this line &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; lookups.put(&quot;jndi&quot;, new JndiLookup()); &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; and got :&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;07-14 16:51:59.915    1321-1321/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/naming/Context;)
07-14 16:51:59.919    1321-1321/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to resolve interface method 920: Ljavax/naming/Context;.close ()V
07-14 16:51:59.919    1321-1321/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/naming/Context;)
07-14 16:51:59.919    1321-1321/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/naming/Context;)
07-14 16:51:59.919    1321-1321/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to resolve exception class 390 (Ljavax/naming/NamingException;)
07-14 16:51:59.919    1321-1321/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find exception handler at addr 0x4
07-14 16:51:59.923    1321-1321/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY:  rejected Lorg/apache/logging/log4j/core/util/Closer;.closeSilently (Ljavax/naming/Context;)V
07-14 16:51:59.923    1321-1321/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY:  rejecting opcode 0x0d at 0x0004
07-14 16:51:59.923    1321-1321/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY:  rejected Lorg/apache/logging/log4j/core/util/Closer;.closeSilently (Ljavax/naming/Context;)V
07-14 16:51:59.923    1321-1321/com.torointl.log4j2xtest W/dalvikvm&#65109; Verifier rejected class Lorg/apache/logging/log4j/core/util/Closer;
07-14 16:51:59.923    1321-1321/com.torointl.log4j2xtest W/dalvikvm&#65109; Exception Ljava/lang/VerifyError; thrown while initializing Lcom/torointl/log4j2xtest/MyActivity;
07-14 16:51:59.923    1321-1321/com.torointl.log4j2xtest W/dalvikvm&#65109; Class init failed in newInstance call (Lcom/torointl/log4j2xtest/MyActivity;)
07-14 16:51:59.927    1321-1321/com.torointl.log4j2xtest W/dalvikvm&#65109; threadid=1: thread exiting with uncaught exception (group=0xa4d16b20)
07-14 16:51:59.927    1321-1321/com.torointl.log4j2xtest E/AndroidRuntime&#65109; FATAL EXCEPTION: main
    Process: com.torointl.log4j2xtest, PID: 1321
    java.lang.VerifyError: org/apache/logging/log4j/core/util/Closer
            at org.apache.logging.log4j.core.config.plugins.util.PluginManager.decode(PluginManager.java:180)
            at org.apache.logging.log4j.core.config.plugins.util.PluginManager.loadPlugins(PluginManager.java:122)
            at org.apache.logging.log4j.core.config.plugins.util.PluginManager.collectPlugins(PluginManager.java:116)
            at org.apache.logging.log4j.core.config.plugins.util.PluginManager.collectPlugins(PluginManager.java:101)
            at org.apache.logging.log4j.core.pattern.PatternParser.&amp;lt;init&amp;gt;(PatternParser.java:129)
            at org.apache.logging.log4j.core.pattern.PatternParser.&amp;lt;init&amp;gt;(PatternParser.java:110)
            at org.apache.logging.log4j.core.layout.PatternLayout.createPatternParser(PatternLayout.java:209)
            at org.apache.logging.log4j.core.layout.PatternLayout.&amp;lt;init&amp;gt;(PatternLayout.java:123)
            at org.apache.logging.log4j.core.layout.PatternLayout.&amp;lt;init&amp;gt;(PatternLayout.java:54)
            at org.apache.logging.log4j.core.layout.PatternLayout$Builder.build(PatternLayout.java:368)
            at org.apache.logging.log4j.core.config.DefaultConfiguration.&amp;lt;init&amp;gt;(DefaultConfiguration.java:56)
            at org.apache.logging.log4j.core.LoggerContext.&amp;lt;init&amp;gt;(LoggerContext.java:72)
            at org.apache.logging.log4j.core.selector.ClassLoaderContextSelector.locateContext(ClassLoaderContextSelector.java:218)
            at org.apache.logging.log4j.core.selector.ClassLoaderContextSelector.getContext(ClassLoaderContextSelector.java:144)
            at org.apache.logging.log4j.core.selector.ClassLoaderContextSelector.getContext(ClassLoaderContextSelector.java:80)
            at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:72)
            at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:37)
            at org.apache.logging.log4j.LogManager.getLogger(LogManager.java:473)
            at com.torointl.log4j2xtest.MyActivity.&amp;lt;clinit&amp;gt;(MyActivity.java:14)
            at java.lang.Class.newInstanceImpl(Native Method)
            at java.lang.Class.newInstance(Class.java:1208)
            at android.app.Instrumentation.newActivity(Instrumentation.java:1061)
            at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2112)
            at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2245)
            at android.app.ActivityThread.access$800(ActivityThread.java:135)
            at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1196)
            at android.os.Handler.dispatchMessage(Handler.java:102)
            at android.os.Looper.loop(Looper.java:136)
            at android.app.ActivityThread.main(ActivityThread.java:5017)
            at java.lang.reflect.Method.invokeNative(Native Method)
            at java.lang.reflect.Method.invoke(Method.java:515)
            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:779)
            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:595)
            at dalvik.system.NativeStart.main(Native Method)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14061601" author="garydgregory" created="Tue, 15 Jul 2014 03:08:56 +0000"  >&lt;p&gt;The Closer class imports javax classes:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; javax.naming.Context;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; javax.naming.NamingException;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A solution would be to split the &lt;tt&gt;Closer&lt;/tt&gt; class into two classes &lt;tt&gt;Closer&lt;/tt&gt; and &lt;tt&gt;JndiCloser&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="14061617" author="garydgregory" created="Tue, 15 Jul 2014 03:30:14 +0000"  >&lt;p&gt;I created &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-713&quot; title=&quot;Android: java.lang.VerifyError: org/apache/logging/log4j/core/util/Closer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-713&quot;&gt;&lt;del&gt;LOG4J2-713&lt;/del&gt;&lt;/a&gt; to deal with the latest issue: &lt;tt&gt;java.lang.VerifyError: org/apache/logging/log4j/core/util/Closer&lt;/tt&gt; because this issue is done and will be in 2.0.&lt;/p&gt;

&lt;p&gt;For &lt;tt&gt;java.lang.VerifyError: org/apache/logging/log4j/core/util/Closer&lt;/tt&gt;, this fix might not be in 2.0, we do not know if the current 2.0 vote will pass.&lt;/p&gt;

&lt;p&gt;Please follow up here: &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-713&quot; title=&quot;Android: java.lang.VerifyError: org/apache/logging/log4j/core/util/Closer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-713&quot;&gt;&lt;del&gt;LOG4J2-713&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14061953" author="garydgregory" created="Tue, 15 Jul 2014 11:22:56 +0000"  >&lt;p&gt;Please try again with revision 1610654.&lt;/p&gt;

&lt;p&gt;This time, the interpolator class tries to load the JNDI look up class by name, and if it fails, logs a message and the exception. Configuration and processing should continue normally from there on.&lt;/p&gt;

&lt;p&gt;Resolve this issue if this fixes your problem.&lt;/p&gt;

&lt;p&gt;Thank you,&lt;br/&gt;
Gary&lt;/p&gt;</comment>
                            <comment id="14062123" author="jvz" created="Tue, 15 Jul 2014 14:28:27 +0000"  >&lt;p&gt;I think it would be better in the long run to make a JNDI wrapper to avoid direct references. That way, Context can implement Closeable, too!&lt;/p&gt;</comment>
                            <comment id="14062139" author="daln" created="Tue, 15 Jul 2014 14:41:17 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;
07-15 14:38:37.347    1243-1243/com.torointl.log4j2xtest E/dalvikvm&#65109; Could not find class &apos;javax.naming.InitialContext&apos;, referenced from method org.apache.logging.log4j.core.lookup.JndiLookup.lookup
07-15 14:38:37.347    1243-1243/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to resolve new-instance 389 (Ljavax/naming/InitialContext;) in Lorg/apache/logging/log4j/core/lookup/JndiLookup;
07-15 14:38:37.359    1243-1243/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to resolve exception class 391 (Ljavax/naming/NamingException;)
07-15 14:38:37.359    1243-1243/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find exception handler at addr 0x19
07-15 14:38:37.363    1243-1243/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY:  rejected Lorg/apache/logging/log4j/core/lookup/JndiLookup;.lookup (Lorg/apache/logging/log4j/core/LogEvent;Ljava/lang/String;)Ljava/lang/String;
07-15 14:38:37.363    1243-1243/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY:  rejecting opcode 0x0d at 0x0019
07-15 14:38:37.363    1243-1243/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY:  rejected Lorg/apache/logging/log4j/core/lookup/JndiLookup;.lookup (Lorg/apache/logging/log4j/core/LogEvent;Ljava/lang/String;)Ljava/lang/String;
07-15 14:38:37.367    1243-1243/com.torointl.log4j2xtest W/dalvikvm&#65109; Verifier rejected class Lorg/apache/logging/log4j/core/lookup/JndiLookup;
07-15 14:38:37.627    1243-1243/com.torointl.log4j2xtest W/dalvikvm&#65109; Exception Landroid/os/NetworkOnMainThreadException; thrown while initializing Lcom/torointl/log4j2xtest/MyActivity;
07-15 14:38:37.627    1243-1243/com.torointl.log4j2xtest W/dalvikvm&#65109; Class init failed in newInstance call (Lcom/torointl/log4j2xtest/MyActivity;)
07-15 14:38:37.627    1243-1243/com.torointl.log4j2xtest W/dalvikvm&#65109; threadid=1: thread exiting with uncaught exception (group=0xa4d72b20)
07-15 14:38:37.639    1243-1243/com.torointl.log4j2xtest E/AndroidRuntime&#65109; FATAL EXCEPTION: main
    Process: com.torointl.log4j2xtest, PID: 1243
    java.lang.ExceptionInInitializerError
            at java.lang.Class.newInstanceImpl(Native Method)
            at java.lang.Class.newInstance(Class.java:1208)
            at android.app.Instrumentation.newActivity(Instrumentation.java:1061)
            at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2112)
            at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2245)
            at android.app.ActivityThread.access$800(ActivityThread.java:135)
            at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1196)
            at android.os.Handler.dispatchMessage(Handler.java:102)
            at android.os.Looper.loop(Looper.java:136)
            at android.app.ActivityThread.main(ActivityThread.java:5017)
            at java.lang.reflect.Method.invokeNative(Native Method)
            at java.lang.reflect.Method.invoke(Method.java:515)
            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:779)
            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:595)
            at dalvik.system.NativeStart.main(Native Method)
     Caused by: android.os.NetworkOnMainThreadException
            at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1145)
            at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
            at java.net.InetAddress.getLocalHost(InetAddress.java:365)
            at org.apache.logging.log4j.core.util.NetUtils.getLocalHostname(NetUtils.java:47)
            at org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:356)
            at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:416)
            at org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:146)
            at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:75)
            at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:37)
            at org.apache.logging.log4j.LogManager.getLogger(LogManager.java:473)
            at com.torointl.log4j2xtest.MyActivity.&amp;lt;clinit&amp;gt;(MyActivity.java:14)
            at java.lang.Class.newInstanceImpl(Native Method)
            at java.lang.Class.newInstance(Class.java:1208)
            at android.app.Instrumentation.newActivity(Instrumentation.java:1061)
            at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2112)
            at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2245)
            at android.app.ActivityThread.access$800(ActivityThread.java:135)
            at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1196)
            at android.os.Handler.dispatchMessage(Handler.java:102)
            at android.os.Looper.loop(Looper.java:136)
            at android.app.ActivityThread.main(ActivityThread.java:5017)
            at java.lang.reflect.Method.invokeNative(Native Method)
            at java.lang.reflect.Method.invoke(Method.java:515)
            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:779)
            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:595)
            at dalvik.system.NativeStart.main(Native Method)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14062146" author="daln" created="Tue, 15 Jul 2014 14:45:10 +0000"  >&lt;p&gt;It looks like &quot;This exception is thrown when an application attempts to perform a networking operation on its main thread.&quot; &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14062186" author="ralph.goers@dslextreme.com" created="Tue, 15 Jul 2014 15:10:07 +0000"  >&lt;p&gt;I still don&apos;t understand why we just don&apos;t move the JNDILookup to the web sub-project. &lt;/p&gt;

&lt;p&gt;As for the new error, we are simply trying to setup the hostName property for the configuration to use.  It would seem silly to have to spawn a thread just to obtain the hostName. It would be easier to just catch the error and not set the hostName property on Android.&lt;/p&gt;

&lt;p&gt;But I am wondering how may more problems we are going to find before this ticket is closed.&lt;/p&gt;

&lt;p&gt;I suspect this also means you won&apos;t be able to use any network based Appenders, since we can&apos;t prevent logging from the main thread, unless perhaps Async Loggers work.&lt;/p&gt;</comment>
                            <comment id="14062189" author="daln" created="Tue, 15 Jul 2014 15:15:22 +0000"  >&lt;p&gt;After modifying the policy and added internet permission to the Android manifest xml file, here is the stacktrace i got.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;07-15 15:12:52.435    1603-1603/com.torointl.log4j2xtest E/dalvikvm&#65109; Could not find class &apos;javax.naming.InitialContext&apos;, referenced from method org.apache.logging.log4j.core.lookup.JndiLookup.lookup
07-15 15:12:52.435    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to resolve new-instance 396 (Ljavax/naming/InitialContext;) in Lorg/apache/logging/log4j/core/lookup/JndiLookup;
07-15 15:12:52.439    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to resolve exception class 398 (Ljavax/naming/NamingException;)
07-15 15:12:52.439    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find exception handler at addr 0x19
07-15 15:12:52.443    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY:  rejected Lorg/apache/logging/log4j/core/lookup/JndiLookup;.lookup (Lorg/apache/logging/log4j/core/LogEvent;Ljava/lang/String;)Ljava/lang/String;
07-15 15:12:52.443    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY:  rejecting opcode 0x0d at 0x0019
07-15 15:12:52.443    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY:  rejected Lorg/apache/logging/log4j/core/lookup/JndiLookup;.lookup (Lorg/apache/logging/log4j/core/LogEvent;Ljava/lang/String;)Ljava/lang/String;
07-15 15:12:52.443    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; Verifier rejected class Lorg/apache/logging/log4j/core/lookup/JndiLookup;
07-15 15:12:52.539    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.539    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/ObjectName;)
07-15 15:12:52.543    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to resolve interface method 926: Ljavax/management/MBeanServer;.registerMBean (Ljava/lang/Object;Ljavax/management/ObjectName;)Ljavax/management/ObjectInstance;
07-15 15:12:52.543    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.543    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/ObjectName;)
07-15 15:12:52.547    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.547    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/ObjectName;)
07-15 15:12:52.547    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/ObjectName;)
07-15 15:12:52.547    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.547    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/ObjectName;)
07-15 15:12:52.551    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.551    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/ObjectName;)
07-15 15:12:52.551    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.551    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/ObjectName;)
07-15 15:12:52.555    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.555    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/ObjectName;)
07-15 15:12:52.555    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.555    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/ObjectName;)
07-15 15:12:52.555    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/ObjectName;)
07-15 15:12:52.559    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.559    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/ObjectName;)
07-15 15:12:52.559    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/ObjectName;)
07-15 15:12:52.559    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.559    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/ObjectName;)
07-15 15:12:52.563    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.563    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; Unable to resolve superclass of Lorg/apache/logging/log4j/core/jmx/StatusLoggerAdmin; (391)
07-15 15:12:52.563    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; Link of class &apos;Lorg/apache/logging/log4j/core/jmx/StatusLoggerAdmin;&apos; failed
07-15 15:12:52.563    1603-1603/com.torointl.log4j2xtest E/dalvikvm&#65109; Could not find class &apos;org.apache.logging.log4j.core.jmx.StatusLoggerAdmin&apos;, referenced from method org.apache.logging.log4j.core.jmx.Server.registerStatusLogger
07-15 15:12:52.567    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to resolve new-instance 764 (Lorg/apache/logging/log4j/core/jmx/StatusLoggerAdmin;) in Lorg/apache/logging/log4j/core/jmx/Server;
07-15 15:12:52.567    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to resolve static method 456: Ljava/lang/management/ManagementFactory;.getPlatformMBeanServer ()Ljavax/management/MBeanServer;
07-15 15:12:52.571    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.571    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.571    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; Unable to resolve superclass of Lorg/apache/logging/log4j/core/jmx/LoggerContextAdmin; (391)
07-15 15:12:52.571    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; Link of class &apos;Lorg/apache/logging/log4j/core/jmx/LoggerContextAdmin;&apos; failed
07-15 15:12:52.575    1603-1603/com.torointl.log4j2xtest E/dalvikvm&#65109; Could not find class &apos;org.apache.logging.log4j.core.jmx.LoggerContextAdmin&apos;, referenced from method org.apache.logging.log4j.core.jmx.Server.reregisterMBeansAfterReconfigure
07-15 15:12:52.575    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to resolve new-instance 759 (Lorg/apache/logging/log4j/core/jmx/LoggerContextAdmin;) in Lorg/apache/logging/log4j/core/jmx/Server;
07-15 15:12:52.575    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.575    1603-1603/com.torointl.log4j2xtest E/dalvikvm&#65109; Could not find class &apos;javax.management.ObjectName&apos;, referenced from method org.apache.logging.log4j.core.jmx.Server.unregisterAllMatching
07-15 15:12:52.579    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to resolve new-instance 393 (Ljavax/management/ObjectName;) in Lorg/apache/logging/log4j/core/jmx/Server;
07-15 15:12:52.579    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.579    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.579    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.583    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.583    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.583    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.583    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.587    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.587    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.587    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.587    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.587    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.591    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.591    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.591    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to resolve static method 456: Ljava/lang/management/ManagementFactory;.getPlatformMBeanServer ()Ljavax/management/MBeanServer;
07-15 15:12:52.595    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.599    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.603    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.607    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.611    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.615    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.615    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.619    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.623    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.627    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to resolve static method 456: Ljava/lang/management/ManagementFactory;.getPlatformMBeanServer ()Ljavax/management/MBeanServer;
07-15 15:12:52.631    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.635    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.639    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.643    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.647    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.651    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.651    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.655    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.659    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.663    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.671    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; VFY: unable to find class referenced in signature (Ljavax/management/MBeanServer;)
07-15 15:12:52.675    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; Unable to resolve superclass of Lorg/apache/logging/log4j/core/jmx/StatusLoggerAdmin; (391)
07-15 15:12:52.675    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; Link of class &apos;Lorg/apache/logging/log4j/core/jmx/StatusLoggerAdmin;&apos; failed
07-15 15:12:52.683    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; Unable to resolve superclass of Lorg/apache/logging/log4j/core/jmx/LoggerContextAdmin; (391)
07-15 15:12:52.683    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; Link of class &apos;Lorg/apache/logging/log4j/core/jmx/LoggerContextAdmin;&apos; failed
07-15 15:12:52.695    1603-1603/com.torointl.log4j2xtest W/dalvikvm&#65109; threadid=1: thread exiting with uncaught exception (group=0xa4d72b20)
07-15 15:12:52.715    1603-1603/com.torointl.log4j2xtest E/AndroidRuntime&#65109; FATAL EXCEPTION: main
    Process: com.torointl.log4j2xtest, PID: 1603
    java.lang.NoClassDefFoundError: java.lang.management.ManagementFactory
            at org.apache.logging.log4j.core.jmx.Server.reregisterMBeansAfterReconfigure(Server.java:118)
            at org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:369)
            at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:416)
            at org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:146)
            at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:75)
            at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:37)
            at org.apache.logging.log4j.LogManager.getLogger(LogManager.java:473)
            at com.torointl.log4j2xtest.MyActivity.onCreate(MyActivity.java:28)
            at android.app.Activity.performCreate(Activity.java:5231)
            at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1087)
            at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2159)
            at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2245)
            at android.app.ActivityThread.access$800(ActivityThread.java:135)
            at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1196)
            at android.os.Handler.dispatchMessage(Handler.java:102)
            at android.os.Looper.loop(Looper.java:136)
            at android.app.ActivityThread.main(ActivityThread.java:5017)
            at java.lang.reflect.Method.invokeNative(Native Method)
            at java.lang.reflect.Method.invoke(Method.java:515)
            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:779)
            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:595)
            at dalvik.system.NativeStart.main(Native Method)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="14062194" author="remkop@yahoo.com" created="Tue, 15 Jul 2014 15:19:08 +0000"  >&lt;p&gt;Please set system property &lt;tt&gt;-Dlog4j2.disable.jmx=true&lt;/tt&gt; to work around this issue.&lt;/p&gt;

&lt;p&gt;(This is like whack-a-mole. Fun!)&lt;/p&gt;</comment>
                            <comment id="14062196" author="ralph.goers@dslextreme.com" created="Tue, 15 Jul 2014 15:23:42 +0000"  >&lt;p&gt;Is there a way to detect Android and disable JMX automatically?  We could also do that for JNDILookup.&lt;/p&gt;
</comment>
                            <comment id="14062204" author="daln" created="Tue, 15 Jul 2014 15:34:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=remkop%40yahoo.com&quot; class=&quot;user-hover&quot; rel=&quot;remkop@yahoo.com&quot;&gt;remkop@yahoo.com&lt;/a&gt; I am a little bit of a beginner with Android and it&apos;s environment, so i actually don&apos;t know where to add this property (i am using Android Studio and Genymotion for the emulator).&lt;/p&gt;</comment>
                            <comment id="14062211" author="remkop@yahoo.com" created="Tue, 15 Jul 2014 15:38:12 +0000"  >&lt;p&gt;Nelson, you&apos;re definitely more advanced than me, since I&apos;m just guessing about anything Android-related... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
Is it possible to call &lt;tt&gt;System.setProperty(&quot;log4j2.disable.jmx&quot;, &quot;true&quot;);&lt;/tt&gt; at the very beginning of your code, before creating any Loggers?&lt;/p&gt;

&lt;p&gt;Ralph, various people suggest &lt;a href=&quot;http://stackoverflow.com/questions/4519556/how-to-determine-if-my-app-is-running-on-android&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;inspecting some system property&lt;/a&gt; to detect the Android platform. We can try that.&lt;/p&gt;</comment>
                            <comment id="14062238" author="daln" created="Tue, 15 Jul 2014 16:09:54 +0000"  >&lt;p&gt;Ok guys, it seems it is working. I still have trouble figuring where to place log4j2.xml so that it is used as a configuration by my main goal of verifying that it could be used in an Android apk is achieved.&lt;/p&gt;

&lt;p&gt;THanks for the help.&lt;/p&gt;</comment>
                            <comment id="14062239" author="daln" created="Tue, 15 Jul 2014 16:11:01 +0000"  >&lt;p&gt;PS: Is it planned to make it &quot;automatically&quot; work on Android (with the accompanying needed documentation) ?&lt;/p&gt;</comment>
                            <comment id="14062704" author="garydgregory" created="Tue, 15 Jul 2014 21:49:55 +0000"  >&lt;p&gt;I do not think we have an Android story. We clearly need an Android section in the documentation/site to at least document what we have discovered in this ticket and what levers and knobs need to be set to run on Android. Patches welcome &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14062825" author="remkop@yahoo.com" created="Tue, 15 Jul 2014 23:07:29 +0000"  >&lt;p&gt;Nelson, I created &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-716&quot; title=&quot;Auto-disable JMX when detecting Android&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-716&quot;&gt;&lt;del&gt;LOG4J2-716&lt;/del&gt;&lt;/a&gt; to follow up on the JMX issue. &lt;/p&gt;

&lt;p&gt;If you know more about whether JMX is supported or not and perhaps give some sample code for making JMX work on Android that would be much appreciated! In that case please add comments to &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-716&quot; title=&quot;Auto-disable JMX when detecting Android&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-716&quot;&gt;&lt;del&gt;LOG4J2-716&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14063346" author="daln" created="Wed, 16 Jul 2014 10:13:39 +0000"  >&lt;p&gt;From what i&apos;ve seen JMX is not supported on Android.&lt;/p&gt;</comment>
                            <comment id="14063389" author="remkop@yahoo.com" created="Wed, 16 Jul 2014 11:17:26 +0000"  >&lt;p&gt;Thanks! Was reaching the same conclusion. So it&apos;s just a matter of detecting Android and disabling JMX then. &lt;/p&gt;</comment>
                            <comment id="14063406" author="garydgregory" created="Wed, 16 Jul 2014 11:54:09 +0000"  >&lt;p&gt;I created &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-718&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/LOG4J2-718&lt;/a&gt; to track disabling JMX on Android. Patches welcome.&lt;/p&gt;</comment>
                            <comment id="14063409" author="daln" created="Wed, 16 Jul 2014 11:59:31 +0000"  >&lt;p&gt;isn&apos;t it the same as &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-716&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/LOG4J2-716&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="14063428" author="garydgregory" created="Wed, 16 Jul 2014 12:28:07 +0000"  >&lt;p&gt;Yes it is... deleting... good catch, thank you.&lt;/p&gt;</comment>
                            <comment id="14063496" author="remkop@yahoo.com" created="Wed, 16 Jul 2014 13:43:08 +0000"  >&lt;p&gt;Nelson, I resolved both &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-716&quot; title=&quot;Auto-disable JMX when detecting Android&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-716&quot;&gt;&lt;del&gt;LOG4J2-716&lt;/del&gt;&lt;/a&gt; (auto-disable JMX) and &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-719&quot; title=&quot;Android throws NetworkOnMainThreadException during Log4j2 initialization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-719&quot;&gt;&lt;del&gt;LOG4J2-719&lt;/del&gt;&lt;/a&gt; (NetworkOnMainThreadException).&lt;br/&gt;
Could you verify that the workarounds are no longer necessary, and close both issues?&lt;/p&gt;</comment>
                            <comment id="14063499" author="daln" created="Wed, 16 Jul 2014 13:47:56 +0000"  >&lt;p&gt;i guess revision 1611007 contain both fixes ?&lt;/p&gt;

&lt;p&gt;I&apos;ll test that today.&lt;/p&gt;</comment>
                            <comment id="14063531" author="remkop@yahoo.com" created="Wed, 16 Jul 2014 14:24:31 +0000"  >&lt;p&gt;Sorry, I just made a modification to the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-716&quot; title=&quot;Auto-disable JMX when detecting Android&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-716&quot;&gt;&lt;del&gt;LOG4J2-716&lt;/del&gt;&lt;/a&gt;. Please use the latest trunk.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="12727237">LOG4J2-713</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12727650">LOG4J2-719</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                                                <inwardlinks description="is superceded by">
                                        <issuelink>
            <issuekey id="12727506">LOG4J2-716</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12655679" name="LOG4J2-703-gg.diff" size="6171" author="ggregory" created="Tue, 15 Jul 2014 03:21:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>404152</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 19 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1xk1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>404192</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>