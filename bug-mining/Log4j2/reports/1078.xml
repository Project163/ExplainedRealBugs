<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:38:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-1971] ClassCastException: org.eclipse.osgi.internal.loader.SystemBundleLoader$1 cannot be cast to java.lang.ClassLoader</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-1971</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;When I migrated log4j from log4j 1.2.17 to log4j 2.8, There is an Exception like this:&lt;/p&gt;

&lt;p&gt;java.lang.ClassCastException: org.eclipse.osgi.internal.loader.SystemBundleLoader$1 cannot be cast to java.lang.ClassLoaderat org.eclipse.osgi.internal.resolver.BundleDescriptionImpl$DescriptionWiring.getClassLoader(BundleDescriptionImpl.java:1229) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;org.eclipse.osgi.jar:?&amp;#93;&lt;/span&gt;at org.apache.logging.log4j.core.osgi.Activator.scanBundleForPlugins(Activator.java:70) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;log4j-core.jar:2.8&amp;#93;&lt;/span&gt;at org.apache.logging.log4j.core.osgi.Activator.bundleChanged(Activator.java:91) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;log4j-core.jar:2.8&amp;#93;&lt;/span&gt;at org.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent(BundleContextImpl.java:847) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;org.eclipse.osgi.jar:?&amp;#93;&lt;/span&gt;at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;org.eclipse.osgi.jar:?&amp;#93;&lt;/span&gt;at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;org.eclipse.osgi.jar:?&amp;#93;&lt;/span&gt;at org.eclipse.osgi.framework.internal.core.Framework.publishBundleEventPrivileged(Framework.java:1568) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;org.eclipse.osgi.jar:?&amp;#93;&lt;/span&gt;at org.eclipse.osgi.framework.internal.core.Framework.publishBundleEvent(Framework.java:1504) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;org.eclipse.osgi.jar:?&amp;#93;&lt;/span&gt;at org.eclipse.osgi.framework.internal.core.Framework.publishBundleEvent(Framework.java:1499) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;org.eclipse.osgi.jar:?&amp;#93;&lt;/span&gt;at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:247) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;org.eclipse.osgi.jar:?&amp;#93;&lt;/span&gt;at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:438) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;org.eclipse.osgi.jar:?&amp;#93;&lt;/span&gt;at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:1) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;org.eclipse.osgi.jar:?&amp;#93;&lt;/span&gt;at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;org.eclipse.osgi.jar:?&amp;#93;&lt;/span&gt;at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:340) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;org.eclipse.osgi.jar:?&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;I checked Activator.java in log4j-core:&lt;/p&gt;

&lt;p&gt;...&lt;br/&gt;
86 @Override&lt;br/&gt;
87 public void bundleChanged(final BundleEvent event) {&lt;br/&gt;
88 &#160;switch (event.getType()) {&lt;br/&gt;
89 &#160;&#160;// FIXME: STARTING instead of STARTED?&lt;br/&gt;
90 &#160;&#160;case BundleEvent.STARTED:&lt;br/&gt;
91 &#160;&#160;&#160;scanBundleForPlugins(event.getBundle());&lt;br/&gt;
92 &#160;&#160;break;&lt;/p&gt;

&lt;p&gt;in line 91, it called scanBundleForPlugins for every bundles. But in line 60-61, it does not scan system bundle for plugins&lt;/p&gt;

&lt;p&gt;57 private static void scanInstalledBundlesForPlugins(final BundleContext context) {&lt;br/&gt;
58   &#160;final Bundle[] bundles = context.getBundles();&lt;br/&gt;
59 &#160;  for (final Bundle bundle : bundles) {&lt;br/&gt;
60 &#160;    &#160;// &lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-920&quot; title=&quot;ClassNotFoundException for BundleContextSelector when initialising in an OSGi environment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-920&quot;&gt;&lt;del&gt;LOG4J2-920&lt;/del&gt;&lt;/a&gt;: don&apos;t scan system bundle for plugins&lt;br/&gt;
61 &#160;&#160;    if (bundle.getState() == Bundle.ACTIVE &amp;amp;&amp;amp; bundle.getBundleId() != 0) {&lt;br/&gt;
62 &#160;&#160;&#160;      // TODO: bundle state can change during this&lt;br/&gt;
63 &#160;&#160;&#160;      scanBundleForPlugins(bundle);&lt;/p&gt;

&lt;p&gt;And org.eclipse.osgi_3.8.1 &apos;s bundle ID is just 0. So it skipped bundle org.eclipse.osgi in line 61-63. but it does not in line 91&lt;/p&gt;

&lt;p&gt;If I changed line 91 to:&lt;br/&gt;
  if (event.getBundle().getState() == Bundle.ACTIVE &amp;amp;&amp;amp; event.getBundle().getBundleId() != 0)&#160;&lt;/p&gt;
{
    scanBundleForPlugins(event.getBundle());
  }

&lt;p&gt;The exception goes away.&lt;br/&gt;
So is this a bug? Or this is NOT a bug and there is a workaround for this Exception? Thanks.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13085829">LOG4J2-1971</key>
            <summary>ClassCastException: org.eclipse.osgi.internal.loader.SystemBundleLoader$1 cannot be cast to java.lang.ClassLoader</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="liwenxian2017">liwenxian2017</reporter>
                        <labels>
                    </labels>
                <created>Mon, 10 Jul 2017 02:13:40 +0000</created>
                <updated>Mon, 2 Oct 2017 08:33:31 +0000</updated>
                            <resolved>Sat, 15 Jul 2017 16:31:44 +0000</resolved>
                                    <version>2.8</version>
                                    <fixVersion>2.9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="16081177" author="garydgregory" created="Mon, 10 Jul 2017 21:24:27 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I refactored the code to make the check on both cases. Please test the latest 2.9-SNAPSHOT jars from the Apache Snapshot Maven repository: &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please update this issue with your findings.&lt;/p&gt;

&lt;p&gt;Thank you,&lt;br/&gt;
Gary&lt;/p&gt;</comment>
                            <comment id="16081181" author="jira-bot" created="Mon, 10 Jul 2017 21:26:56 +0000"  >&lt;p&gt;Commit ec81e15633c51c9e4d153fe13905849c440b474f in logging-log4j2&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=ec81e15&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=ec81e15&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1971&quot; title=&quot;ClassCastException: org.eclipse.osgi.internal.loader.SystemBundleLoader$1 cannot be cast to java.lang.ClassLoader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1971&quot;&gt;&lt;del&gt;LOG4J2-1971&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
ClassCastException:&lt;br/&gt;
org.eclipse.osgi.internal.loader.SystemBundleLoader$1 cannot be cast to&lt;br/&gt;
java.lang.ClassLoader. Attempt fix by refactoring. Also slightly better&lt;br/&gt;
logging.&lt;/p&gt;</comment>
                            <comment id="16083635" author="liwenxian2017" created="Wed, 12 Jul 2017 08:25:57 +0000"  >&lt;p&gt;I used log4j-api-2.9-20170710.220402-39.jar/log4j-core-2.9-20170710.220554-39.jar to test, but There are Exceptions like this:&lt;/p&gt;

&lt;p&gt;org.osgi.framework.BundleException: Exception in org.apache.logging.log4j.util.Activator.start() of bundle org.apache.logging.log4j.api.&lt;br/&gt;
        at org.eclipse.osgi.internal.framework.BundleContextImpl.startActivator(BundleContextImpl.java:795)&lt;br/&gt;
        at org.eclipse.osgi.internal.framework.BundleContextImpl.start(BundleContextImpl.java:724)&lt;br/&gt;
        at org.eclipse.osgi.internal.framework.EquinoxBundle.startWorker0(EquinoxBundle.java:932)&lt;br/&gt;
        at org.eclipse.osgi.internal.framework.EquinoxBundle$EquinoxModule.startWorker(EquinoxBundle.java:309)&lt;br/&gt;
        at org.eclipse.osgi.container.Module.doStart(Module.java:581)&lt;br/&gt;
        at org.eclipse.osgi.container.Module.start(Module.java:449)&lt;br/&gt;
        at org.eclipse.osgi.internal.framework.EquinoxBundle.start(EquinoxBundle.java:383)&lt;br/&gt;
        at org.eclipse.osgi.internal.framework.EquinoxBundle.start(EquinoxBundle.java:402)&lt;br/&gt;
        at org.springframework.osgi.test.AbstractOsgiTests.startBundle(AbstractOsgiTests.java:341)&lt;br/&gt;
        at org.springframework.osgi.test.AbstractOsgiTests.startup(AbstractOsgiTests.java:258)&lt;br/&gt;
        at org.springframework.osgi.test.AbstractOsgiTests.prepareTestExecution(AbstractOsgiTests.java:374)&lt;br/&gt;
        at org.springframework.osgi.test.AbstractOsgiTests.runBare(AbstractOsgiTests.java:203)&lt;br/&gt;
		...&lt;br/&gt;
Caused by: java.util.ServiceConfigurationError: org.apache.logging.log4j.spi.Provider: Provider org.apache.logging.log4j.core.impl.Log4jProvider not a subtype&lt;br/&gt;
        at java.util.ServiceLoader.fail(ServiceLoader.java:239)&lt;br/&gt;
        at java.util.ServiceLoader.access$300(ServiceLoader.java:185)&lt;br/&gt;
        at java.util.ServiceLoader$LazyIterator.nextService(ServiceLoader.java:376)&lt;br/&gt;
        at java.util.ServiceLoader$LazyIterator.next(ServiceLoader.java:404)&lt;br/&gt;
        at java.util.ServiceLoader$1.next(ServiceLoader.java:480)&lt;br/&gt;
        at org.apache.logging.log4j.util.ProviderUtil.loadProviders(ProviderUtil.java:94)&lt;br/&gt;
        at org.apache.logging.log4j.util.Activator.loadProvider(Activator.java:75)&lt;br/&gt;
        at org.apache.logging.log4j.util.Activator.loadProvider(Activator.java:66)&lt;br/&gt;
        at org.apache.logging.log4j.util.Activator.start(Activator.java:94)&lt;br/&gt;
        at org.eclipse.osgi.internal.framework.BundleContextImpl$3.run(BundleContextImpl.java:774)&lt;br/&gt;
        at org.eclipse.osgi.internal.framework.BundleContextImpl$3.run(BundleContextImpl.java:1)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
        at org.eclipse.osgi.internal.framework.BundleContextImpl.startActivator(BundleContextImpl.java:767)&lt;/p&gt;

&lt;p&gt;In 2.8.2, no this exception. Sounds Log4jProvider is a new class in 2.9. don&apos;t know why this Exception occurs. Thanks.&lt;/p&gt;</comment>
                            <comment id="16084371" author="garydgregory" created="Wed, 12 Jul 2017 17:44:20 +0000"  >&lt;p&gt;The class &lt;tt&gt;org.apache.logging.log4j.core.impl.Log4jProvider&lt;/tt&gt; has been around for a while, it is not new in 2.9-SNAPSHOTs.&lt;/p&gt;

&lt;p&gt;This error seems to say that &lt;tt&gt;org.apache.logging.log4j.core.impl.Log4jProvider&lt;/tt&gt; is not a subtype of &lt;tt&gt;org.apache.logging.log4j.spi.Provider&lt;/tt&gt;, which it is in our code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;/*
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements. See the NOTICE file distributed with
 * &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; work &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; additional information regarding copyright ownership.
 * The ASF licenses &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; file to You under the Apache license, Version 2.0
 * (the &lt;span class=&quot;code-quote&quot;&gt;&quot;License&quot;&lt;/span&gt;); you may not use &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; file except in compliance with
 * the License. You may obtain a copy of the License at
 *
 *      http:&lt;span class=&quot;code-comment&quot;&gt;//www.apache.org/licenses/LICENSE-2.0
&lt;/span&gt; *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &lt;span class=&quot;code-quote&quot;&gt;&quot;AS IS&quot;&lt;/span&gt; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the license &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the specific language governing permissions and
 * limitations under the license.
 */
&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; org.apache.logging.log4j.core.impl;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.logging.log4j.spi.Provider;

/**
 * Binding &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the Log4j API.
 */
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Log4jProvider &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Provider {
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Log4jProvider() {
        &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(10, &lt;span class=&quot;code-quote&quot;&gt;&quot;2.6.0&quot;&lt;/span&gt;, Log4jContextFactory.class);
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This smells like something is not as we expect with class loaders in OSGi, but what?&lt;/p&gt;</comment>
                            <comment id="16084426" author="ralph.goers@dslextreme.com" created="Wed, 12 Jul 2017 18:12:00 +0000"  >&lt;p&gt;Yes, Log4jProvider has been around a while. But prior to 2.9 we used a custom system for locating the provider. As of 2.9 we are now using the ServiceLoader to locate the provider. I suspect that is playing a role in the problem, but I don&apos;t know why. The implication is that log4j-api is in one classloader and log4j-core is in a second classloader.&lt;/p&gt;

&lt;p&gt;FWIW, obviously our OSGi tests don&apos;t have this problem.&lt;/p&gt;</comment>
                            <comment id="16084859" author="garydgregory" created="Wed, 12 Jul 2017 22:46:21 +0000"  >&lt;p&gt;It sounds like using OSGi and Service Loaders needs some special magic. log4j-api and log4j-core are in separate OSGi bundles. Doesn&apos;t this mean that they each have a class loader?&lt;/p&gt;</comment>
                            <comment id="16085022" author="ralph.goers@dslextreme.com" created="Thu, 13 Jul 2017 01:26:05 +0000"  >&lt;p&gt;Yes - you can read about OSGi and ServiceLoader at &lt;a href=&quot;http://blog.osgi.org/2013/02/javautilserviceloader-in-osgi.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://blog.osgi.org/2013/02/javautilserviceloader-in-osgi.html&lt;/a&gt;. We switched to use ServiceLoader because the Java 9 module system requires that to do what we are doing. Ironically, it seems to make things more difficult with OSGi. However, when I looked at the way our Activator works it looked to me like it should work fine out of the box and we wouldn&apos;t need the mechanisms discussed in the blog entry, and it does work in our unit tests.&lt;/p&gt;</comment>
                            <comment id="16085057" author="garydgregory" created="Thu, 13 Jul 2017 02:26:54 +0000"  >&lt;p&gt;When I run the Apache Karaf console, I can install log4j-api 2.9-SNAPSHOT but not start it:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2017-07-12 19:16:53,420 | ERROR | nsole user karaf | ShellUtil                        | 42 - org.apache.karaf.shell.core - 4.1.1 | Exception caught while executing command
org.apache.karaf.shell.support.MultiException: Error executing command on bundles:
        Error starting bundle 57: Not found: org.apache.logging.log4j.util.Activator
        at org.apache.karaf.shell.support.MultiException.throwIf(MultiException.java:61) ~[42:org.apache.karaf.shell.core:4.1.1]
        at org.apache.karaf.bundle.command.BundlesCommand.doExecute(BundlesCommand.java:67) [21:org.apache.karaf.bundle.core:4.1.1]
        at org.apache.karaf.bundle.command.BundlesCommand.execute(BundlesCommand.java:52) [21:org.apache.karaf.bundle.core:4.1.1]
        at org.apache.karaf.shell.impl.action.command.ActionCommand.execute(ActionCommand.java:84) [42:org.apache.karaf.shell.core:4.1.1]
        at org.apache.karaf.shell.impl.console.osgi.secured.SecuredCommand.execute(SecuredCommand.java:68) [42:org.apache.karaf.shell.core:4.1.1]
        at org.apache.karaf.shell.impl.console.osgi.secured.SecuredCommand.execute(SecuredCommand.java:86) [42:org.apache.karaf.shell.core:4.1.1]
        at org.apache.felix.gogo.runtime.Closure.executeCmd(Closure.java:560) [42:org.apache.karaf.shell.core:4.1.1]
        at org.apache.felix.gogo.runtime.Closure.executeStatement(Closure.java:486) [42:org.apache.karaf.shell.core:4.1.1]
        at org.apache.felix.gogo.runtime.Closure.execute(Closure.java:375) [42:org.apache.karaf.shell.core:4.1.1]
        at org.apache.felix.gogo.runtime.Pipe.doCall(Pipe.java:417) [42:org.apache.karaf.shell.core:4.1.1]
        at org.apache.felix.gogo.runtime.Pipe.call(Pipe.java:229) [42:org.apache.karaf.shell.core:4.1.1]
        at org.apache.felix.gogo.runtime.Pipe.call(Pipe.java:59) [42:org.apache.karaf.shell.core:4.1.1]
        at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:?]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [?:?]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [?:?]
        at java.lang.Thread.run(Thread.java:748) [?:?]
        Suppressed: java.lang.Exception: Error starting bundle 57: Not found: org.apache.logging.log4j.util.Activator
                at org.apache.karaf.bundle.command.BundlesCommand.doExecute(BundlesCommand.java:64) [21:org.apache.karaf.bundle.core:4.1.1]
                at org.apache.karaf.bundle.command.BundlesCommand.execute(BundlesCommand.java:52) [21:org.apache.karaf.bundle.core:4.1.1]
                at org.apache.karaf.shell.impl.action.command.ActionCommand.execute(ActionCommand.java:84) [42:org.apache.karaf.shell.core:4.1.1]
                at org.apache.karaf.shell.impl.console.osgi.secured.SecuredCommand.execute(SecuredCommand.java:68) [42:org.apache.karaf.shell.core:4.1.1]
                at org.apache.karaf.shell.impl.console.osgi.secured.SecuredCommand.execute(SecuredCommand.java:86) [42:org.apache.karaf.shell.core:4.1.1]
                at org.apache.felix.gogo.runtime.Closure.executeCmd(Closure.java:560) [42:org.apache.karaf.shell.core:4.1.1]
                at org.apache.felix.gogo.runtime.Closure.executeStatement(Closure.java:486) [42:org.apache.karaf.shell.core:4.1.1]
                at org.apache.felix.gogo.runtime.Closure.execute(Closure.java:375) [42:org.apache.karaf.shell.core:4.1.1]
                at org.apache.felix.gogo.runtime.Pipe.doCall(Pipe.java:417) [42:org.apache.karaf.shell.core:4.1.1]
                at org.apache.felix.gogo.runtime.Pipe.call(Pipe.java:229) [42:org.apache.karaf.shell.core:4.1.1]
                at org.apache.felix.gogo.runtime.Pipe.call(Pipe.java:59) [42:org.apache.karaf.shell.core:4.1.1]
                at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:?]
                at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [?:?]
                at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [?:?]
                at java.lang.Thread.run(Thread.java:748) [?:?]
        Caused by: org.osgi.framework.BundleException: Not found: org.apache.logging.log4j.util.Activator
                at org.apache.felix.framework.Felix.createBundleActivator(Felix.java:4493) ~[?:?]
                at org.apache.felix.framework.Felix.activateBundle(Felix.java:2219) ~[?:?]
                at org.apache.felix.framework.Felix.startBundle(Felix.java:2144) ~[?:?]
                at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:998) ~[?:?]
                at org.apache.karaf.bundle.command.Start.executeOnBundle(Start.java:38) ~[?:?]
                at org.apache.karaf.bundle.command.BundlesCommand.doExecute(BundlesCommand.java:62) ~[?:?]
                ... 14 more
        Caused by: java.lang.ClassNotFoundException: org.apache.logging.log4j.util.Activator not found by org.ops4j.pax.logging.pax-logging-api [5]
                at org.apache.felix.framework.BundleWiringImpl.findClassOrResourceByDelegation(BundleWiringImpl.java:1550) ~[?:?]
                at org.apache.felix.framework.BundleWiringImpl.access$200(BundleWiringImpl.java:79) ~[?:?]
                at org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.loadClass(BundleWiringImpl.java:1958) ~[?:?]
                at java.lang.ClassLoader.loadClass(ClassLoader.java:357) ~[?:?]
                at org.apache.felix.framework.BundleWiringImpl.getClassByDelegation(BundleWiringImpl.java:1391) ~[?:?]
                at org.apache.felix.framework.BundleWiringImpl.searchImports(BundleWiringImpl.java:1571) ~[?:?]
                at org.apache.felix.framework.BundleWiringImpl.findClassOrResourceByDelegation(BundleWiringImpl.java:1501) ~[?:?]
                at org.apache.felix.framework.BundleWiringImpl.access$200(BundleWiringImpl.java:79) ~[?:?]
                at org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.loadClass(BundleWiringImpl.java:1958) ~[?:?]
                at java.lang.ClassLoader.loadClass(ClassLoader.java:357) ~[?:?]
                at org.apache.felix.framework.BundleWiringImpl.getClassByDelegation(BundleWiringImpl.java:1391) ~[?:?]
                at org.apache.felix.framework.Felix.createBundleActivator(Felix.java:4489) ~[?:?]
                at org.apache.felix.framework.Felix.activateBundle(Felix.java:2219) ~[?:?]
                at org.apache.felix.framework.Felix.startBundle(Felix.java:2144) ~[?:?]
                at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:998) ~[?:?]
                at org.apache.karaf.bundle.command.Start.executeOnBundle(Start.java:38) ~[?:?]
                at org.apache.karaf.bundle.command.BundlesCommand.doExecute(BundlesCommand.java:62) ~[?:?]
                ... 14 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The Activator is there of course. What the?&lt;/p&gt;</comment>
                            <comment id="16085065" author="ralph.goers@dslextreme.com" created="Thu, 13 Jul 2017 02:38:19 +0000"  >&lt;p&gt;Why is pax logging in the picture?  The Activator class is in log4j-api - is it in that bundle?&lt;/p&gt;</comment>
                            <comment id="16085091" author="garydgregory" created="Thu, 13 Jul 2017 03:10:37 +0000"  >&lt;p&gt;I&apos;m not sure why Karaf is doing it that way.&lt;/p&gt;

&lt;p&gt;What is odd is that if I ask Karaf to list all the classes in the bundle, the log4j-api activator class is not there, but the core is...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;karaf@root()&amp;gt; classes 57
META-INF/versions/9/org/apache/logging/log4j/util/StackLocator.class
org/apache/logging/log4j/EventLogger.class
org/apache/logging/log4j/Level.class
org/apache/logging/log4j/LogManager.class
org/apache/logging/log4j/Logger.class
org/apache/logging/log4j/LoggingException.class
org/apache/logging/log4j/Marker.class
org/apache/logging/log4j/MarkerManager$Log4jMarker.class
org/apache/logging/log4j/MarkerManager.class
org/apache/logging/log4j/ThreadContext$1.class
org/apache/logging/log4j/ThreadContext$ContextStack.class
org/apache/logging/log4j/ThreadContext$EmptyIterator.class
org/apache/logging/log4j/ThreadContext$EmptyThreadContextStack.class
org/apache/logging/log4j/ThreadContext.class
org/apache/logging/log4j/core/osgi/Activator.class
org/apache/logging/log4j/core/osgi/BundleContextSelector.class
org/apache/logging/log4j/core/util/Assert.class
org/apache/logging/log4j/core/util/Booleans.class
org/apache/logging/log4j/core/util/Builder.class
org/apache/logging/log4j/core/util/CachedClock$1.class
org/apache/logging/log4j/core/util/CachedClock.class
org/apache/logging/log4j/core/util/Cancellable.class
org/apache/logging/log4j/core/util/Clock.class
org/apache/logging/log4j/core/util/ClockFactory.class
org/apache/logging/log4j/core/util/CloseShieldOutputStream.class
org/apache/logging/log4j/core/util/CloseShieldWriter.class
org/apache/logging/log4j/core/util/Closer.class
org/apache/logging/log4j/core/util/CoarseCachedClock$1.class
org/apache/logging/log4j/core/util/CoarseCachedClock.class
org/apache/logging/log4j/core/util/Constants.class
org/apache/logging/log4j/core/util/CronExpression$1.class
org/apache/logging/log4j/core/util/CronExpression$ValueSet.class
org/apache/logging/log4j/core/util/CronExpression.class
org/apache/logging/log4j/core/util/CyclicBuffer.class
org/apache/logging/log4j/core/util/DefaultShutdownCallbackRegistry$RegisteredCancellable.class
org/apache/logging/log4j/core/util/DefaultShutdownCallbackRegistry.class
org/apache/logging/log4j/core/util/DummyNanoClock.class
org/apache/logging/log4j/core/util/ExtensionLanguageMapping.class
org/apache/logging/log4j/core/util/FileUtils.class
org/apache/logging/log4j/core/util/FileWatcher.class
org/apache/logging/log4j/core/util/IOUtils.class
org/apache/logging/log4j/core/util/Integers.class
org/apache/logging/log4j/core/util/JndiCloser.class
org/apache/logging/log4j/core/util/JsonUtils.class
org/apache/logging/log4j/core/util/KeyValuePair$Builder.class
org/apache/logging/log4j/core/util/KeyValuePair.class
org/apache/logging/log4j/core/util/Loader.class
org/apache/logging/log4j/core/util/Log4jThread.class
org/apache/logging/log4j/core/util/NameUtil.class
org/apache/logging/log4j/core/util/NanoClock.class
org/apache/logging/log4j/core/util/NetUtils.class
org/apache/logging/log4j/core/util/NullOutputStream.class
org/apache/logging/log4j/core/util/ObjectArrayIterator.class
org/apache/logging/log4j/core/util/OptionConverter.class
org/apache/logging/log4j/core/util/Patterns.class
org/apache/logging/log4j/core/util/ReflectionUtil.class
org/apache/logging/log4j/core/util/SecretKeyProvider.class
org/apache/logging/log4j/core/util/SetUtils.class
org/apache/logging/log4j/core/util/ShutdownCallbackRegistry.class
org/apache/logging/log4j/core/util/StringBuilderWriter.class
org/apache/logging/log4j/core/util/StringEncoder.class
org/apache/logging/log4j/core/util/SystemClock.class
org/apache/logging/log4j/core/util/SystemNanoClock.class
org/apache/logging/log4j/core/util/Throwables.class
org/apache/logging/log4j/core/util/Transform.class
org/apache/logging/log4j/core/util/TypeUtil.class
org/apache/logging/log4j/core/util/UuidUtil.class
org/apache/logging/log4j/core/util/WatchManager$1.class
org/apache/logging/log4j/core/util/WatchManager$FileMonitor.class
org/apache/logging/log4j/core/util/WatchManager$WatchWorker.class
org/apache/logging/log4j/core/util/WatchManager.class
org/apache/logging/log4j/message/AbstractMessageFactory.class
org/apache/logging/log4j/message/BasicThreadInformation.class
org/apache/logging/log4j/message/ExtendedThreadInformation$1.class
org/apache/logging/log4j/message/ExtendedThreadInformation.class
org/apache/logging/log4j/message/FormattedMessage.class
org/apache/logging/log4j/message/FormattedMessageFactory.class
org/apache/logging/log4j/message/LocalizedMessage.class
org/apache/logging/log4j/message/LocalizedMessageFactory.class
org/apache/logging/log4j/message/LoggerNameAwareMessage.class
org/apache/logging/log4j/message/MapMessage$1.class
org/apache/logging/log4j/message/MapMessage$MapFormat.class
org/apache/logging/log4j/message/MapMessage.class
org/apache/logging/log4j/message/Message.class
org/apache/logging/log4j/message/MessageFactory.class
org/apache/logging/log4j/message/MessageFormatMessage.class
org/apache/logging/log4j/message/MessageFormatMessageFactory.class
org/apache/logging/log4j/message/MultiformatMessage.class
org/apache/logging/log4j/message/ObjectArrayMessage.class
org/apache/logging/log4j/message/ObjectMessage.class
org/apache/logging/log4j/message/ParameterizedMessage.class
org/apache/logging/log4j/message/ParameterizedMessageFactory.class
org/apache/logging/log4j/message/SimpleMessage.class
org/apache/logging/log4j/message/StringFormattedMessage.class
org/apache/logging/log4j/message/StringFormatterMessageFactory.class
org/apache/logging/log4j/message/StructuredDataId.class
org/apache/logging/log4j/message/StructuredDataMessage$Format.class
org/apache/logging/log4j/message/StructuredDataMessage.class
org/apache/logging/log4j/message/ThreadDumpMessage$1.class
org/apache/logging/log4j/message/ThreadDumpMessage$BasicThreadInfoFactory.class
org/apache/logging/log4j/message/ThreadDumpMessage$ExtendedThreadInfoFactory.class
org/apache/logging/log4j/message/ThreadDumpMessage$ThreadDumpMessageProxy.class
org/apache/logging/log4j/message/ThreadDumpMessage$ThreadInfoFactory.class
org/apache/logging/log4j/message/ThreadDumpMessage.class
org/apache/logging/log4j/message/ThreadInformation.class
org/apache/logging/log4j/message/TimestampMessage.class
org/apache/logging/log4j/simple/SimpleLogger.class
org/apache/logging/log4j/simple/SimpleLoggerContext.class
org/apache/logging/log4j/simple/SimpleLoggerContextFactory.class
org/apache/logging/log4j/spi/AbstractLogger.class
org/apache/logging/log4j/spi/AbstractLoggerAdapter.class
org/apache/logging/log4j/spi/DefaultThreadContextMap$1.class
org/apache/logging/log4j/spi/DefaultThreadContextMap.class
org/apache/logging/log4j/spi/DefaultThreadContextStack.class
org/apache/logging/log4j/spi/ExtendedLogger.class
org/apache/logging/log4j/spi/ExtendedLoggerWrapper.class
org/apache/logging/log4j/spi/LoggerAdapter.class
org/apache/logging/log4j/spi/LoggerContext.class
org/apache/logging/log4j/spi/LoggerContextFactory.class
org/apache/logging/log4j/spi/MutableThreadContextStack.class
org/apache/logging/log4j/spi/Provider.class
org/apache/logging/log4j/spi/StandardLevel.class
org/apache/logging/log4j/spi/ThreadContextMap.class
org/apache/logging/log4j/spi/ThreadContextStack.class
org/apache/logging/log4j/status/StatusConsoleListener.class
org/apache/logging/log4j/status/StatusData.class
org/apache/logging/log4j/status/StatusListener.class
org/apache/logging/log4j/status/StatusLogger$BoundedQueue.class
org/apache/logging/log4j/status/StatusLogger.class
org/apache/logging/log4j/util/Chars.class
org/apache/logging/log4j/util/EnglishEnums.class
org/apache/logging/log4j/util/LambdaUtil.class
org/apache/logging/log4j/util/LoaderUtil$1.class
org/apache/logging/log4j/util/LoaderUtil$ThreadContextClassLoaderGetter.class
org/apache/logging/log4j/util/LoaderUtil$UrlResource.class
org/apache/logging/log4j/util/LoaderUtil.class
org/apache/logging/log4j/util/MessageSupplier.class
org/apache/logging/log4j/util/PropertiesUtil.class
org/apache/logging/log4j/util/ProviderUtil.class
org/apache/logging/log4j/util/ReflectionUtil$PrivateSecurityManager.class
org/apache/logging/log4j/util/ReflectionUtil.class
org/apache/logging/log4j/util/StringBuilders.class
org/apache/logging/log4j/util/Strings.class
org/apache/logging/log4j/util/Supplier.class
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16085109" author="garydgregory" created="Thu, 13 Jul 2017 03:27:21 +0000"  >&lt;p&gt;I wonder if &lt;tt&gt;org.apache.logging.log4j.spi.Provider&lt;/tt&gt; should be an interface instead of class (and move the current impl to another class)?&lt;/p&gt;</comment>
                            <comment id="16085112" author="ralph.goers@dslextreme.com" created="Thu, 13 Jul 2017 03:30:16 +0000"  >&lt;p&gt;I see a few classes missing in your list from the org.apache.logging.log4j.util package, not just Activator.&lt;/p&gt;</comment>
                            <comment id="16085142" author="ralph.goers@dslextreme.com" created="Thu, 13 Jul 2017 03:46:10 +0000"  >&lt;p&gt;So the difference between 2.8.2 and 2.9 is that in 2.9 ServiceLoader loads the Provider - and that class is in the target bundle. In 2.8.2 we read the data from a file in the target bundle and the Provider was created in the API bundle, which is why we didn&apos;t get the ClassNotFound exception. &lt;/p&gt;

&lt;p&gt;But something doesn&apos;t seem right about this. We are using the ServiceLoader.load method that accepts a ClassLoader, with the OSGi doc says doesn&apos;t have the same problems as the version that doesn&apos;t.. But somehow that ClassLoader doesn&apos;t seem to have access to the log4j-api.&lt;/p&gt;</comment>
                            <comment id="16085191" author="garydgregory" created="Thu, 13 Jul 2017 05:10:54 +0000"  >&lt;p&gt;Right, you still have to feed it the right class loader.&lt;/p&gt;</comment>
                            <comment id="16085194" author="ralph.goers@dslextreme.com" created="Thu, 13 Jul 2017 05:16:33 +0000"  >&lt;p&gt;It should be the correct class loader. It is the ClassLoader for the target bundle.  I am trying to register the Provider as an OSGi service. Can you provide the details on how to test with Karaf so I can test it?&lt;/p&gt;</comment>
                            <comment id="16085201" author="garydgregory" created="Thu, 13 Jul 2017 05:22:32 +0000"  >&lt;ol&gt;
	&lt;li&gt;run: bin/karaf&lt;/li&gt;
	&lt;li&gt;type: install &amp;lt;URL to bundle like &lt;a href=&quot;file:/foo/bar.jar&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/foo/bar.jar&lt;/a&gt;&amp;gt;&lt;/li&gt;
	&lt;li&gt;You get a number back from that like 57&lt;/li&gt;
	&lt;li&gt;type: start &amp;lt;bundle # like 57&amp;gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;You can go round and round with new versions of the jar you do &quot;uninstall &amp;lt;bundle # like 57&amp;gt;&lt;/p&gt;

&lt;p&gt;You can also switch folders with &quot;cd &amp;lt;folder&amp;gt;&quot;&lt;/p&gt;</comment>
                            <comment id="16085205" author="garydgregory" created="Thu, 13 Jul 2017 05:31:36 +0000"  >&lt;p&gt;Might be of interest: &lt;a href=&quot;http://aries.apache.org/modules/spi-fly.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://aries.apache.org/modules/spi-fly.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16085764" author="jvz" created="Thu, 13 Jul 2017 14:31:34 +0000"  >&lt;p&gt;Pax logging comes by default with Karaf, so I&apos;ve never really had great success in testing log4j2 with it directly. The most minimal OSGi install you can use would be Apache Felix or Eclipse Equinox (or possibly some other one, but those are the two main ones).&lt;/p&gt;</comment>
                            <comment id="16085918" author="garydgregory" created="Thu, 13 Jul 2017 16:04:32 +0000"  >&lt;p&gt;Karaf sits atop Felix. I could not even start the Equinox console (it hangs.)&lt;/p&gt;</comment>
                            <comment id="16088650" author="ralph.goers@dslextreme.com" created="Sat, 15 Jul 2017 16:09:33 +0000"  >&lt;p&gt;Well, thats strange. The first time I tried log4j-core failed saying it had an Activator start error. I shut down karaf and restarted and the second time everything loads fine.&lt;/p&gt;</comment>
                            <comment id="16088655" author="jira-bot" created="Sat, 15 Jul 2017 16:30:17 +0000"  >&lt;p&gt;Commit 2c16e17d2a636155804c166ccff7b3d389fe03f0 in logging-log4j2&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ralph_goers%40dslextreme.com&quot; class=&quot;user-hover&quot; rel=&quot;ralph_goers@dslextreme.com&quot;&gt;ralph_goers@dslextreme.com&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=2c16e17&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=2c16e17&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1971&quot; title=&quot;ClassCastException: org.eclipse.osgi.internal.loader.SystemBundleLoader$1 cannot be cast to java.lang.ClassLoader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1971&quot;&gt;&lt;del&gt;LOG4J2-1971&lt;/del&gt;&lt;/a&gt; - Register Log4j-core as a service. Bypass tests that don&apos;t work on MacOS&lt;/p&gt;</comment>
                            <comment id="16088656" author="jira-bot" created="Sat, 15 Jul 2017 16:30:18 +0000"  >&lt;p&gt;Commit 9a08eb08f389ad9c432cbdfd4ab41246227d01db in logging-log4j2&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ralph_goers%40dslextreme.com&quot; class=&quot;user-hover&quot; rel=&quot;ralph_goers@dslextreme.com&quot;&gt;ralph_goers@dslextreme.com&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=9a08eb0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=9a08eb0&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1971&quot; title=&quot;ClassCastException: org.eclipse.osgi.internal.loader.SystemBundleLoader$1 cannot be cast to java.lang.ClassLoader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1971&quot;&gt;&lt;del&gt;LOG4J2-1971&lt;/del&gt;&lt;/a&gt; - Update changes&lt;/p&gt;</comment>
                            <comment id="16088657" author="ralph.goers@dslextreme.com" created="Sat, 15 Jul 2017 16:31:33 +0000"  >&lt;p&gt;Reopening the issue. Just to mark it resolved again. Please verify the fix.&lt;/p&gt;</comment>
                            <comment id="16089161" author="garydgregory" created="Sun, 16 Jul 2017 22:34:12 +0000"  >&lt;p&gt;This is what I get with the latest:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;karaf@root()&amp;gt; install file:///C:/vcs/git/apache/logging/logging-log4j2/log4j-api/target/log4j-api-2.9-SNAPSHOT.jar
Bundle ID: 63
karaf@root()&amp;gt; start 63
Error executing command: Error executing command on bundles:
        Error starting bundle 63: Not found: org.apache.logging.log4j.util.Activator
karaf@root()&amp;gt; log:clear
karaf@root()&amp;gt; start 63
Error executing command: Error executing command on bundles:
        Error starting bundle 63: Not found: org.apache.logging.log4j.util.Activator
karaf@root()&amp;gt; log:display
2017-07-16 15:32:40,735 | DEBUG | nsole user karaf | LoggingCommandSessionListener    | 42 - org.apache.karaf.shell.core - 4.1.1 | Command: &apos;log:clear&apos; returned &apos;null&apos;
2017-07-16 15:32:43,601 | DEBUG | nsole user karaf | LoggingCommandSessionListener    | 42 - org.apache.karaf.shell.core - 4.1.1 | Executing command: &apos;start 63&apos;
2017-07-16 15:32:43,617 | DEBUG | 2.9-SNAPSHOT.jar | api                              | 63 - org.apache.logging.log4j.api - 2.9.0.SNAPSHOT | BundleEvent STARTING - org.apache.logging.log4j.api
2017-07-16 15:32:43,617 | DEBUG | 2.9-SNAPSHOT.jar | api                              | 63 - org.apache.logging.log4j.api - 2.9.0.SNAPSHOT | BundleEvent STOPPING - org.apache.logging.log4j.api
2017-07-16 15:32:43,617 | DEBUG | 2.9-SNAPSHOT.jar | BlueprintExtender                | 12 - org.apache.aries.blueprint.core - 1.8.0 | Starting BlueprintContainer destruction process for bundle org.apache.logging.log4j.api/2.9.0.SNAPSHOT
2017-07-16 15:32:43,617 | DEBUG | 2.9-SNAPSHOT.jar | BlueprintExtender                | 12 - org.apache.aries.blueprint.core - 1.8.0 | Not a blueprint bundle or destruction of BlueprintContainer already finished for org.apache.logging.log4j.api/2.9.0.SNAPSHOT.
2017-07-16 15:32:43,617 | DEBUG | 2.9-SNAPSHOT.jar | BlueprintExtender                | 12 - org.apache.aries.blueprint.core - 1.8.0 | Starting BlueprintContainer destruction process for bundle org.apache.logging.log4j.api/2.9.0.SNAPSHOT
2017-07-16 15:32:43,617 | DEBUG | 2.9-SNAPSHOT.jar | BlueprintExtender                | 12 - org.apache.aries.blueprint.core - 1.8.0 | Not a blueprint bundle or destruction of BlueprintContainer already finished for org.apache.logging.log4j.api/2.9.0.SNAPSHOT.
2017-07-16 15:32:43,617 | DEBUG | 2.9-SNAPSHOT.jar | CommandExtender                  | 42 - org.apache.karaf.shell.core - 4.1.1 | org.apache.logging.log4j.api (63): Starting destruction process
2017-07-16 15:32:43,617 | DEBUG | 2.9-SNAPSHOT.jar | CommandExtender                  | 42 - org.apache.karaf.shell.core - 4.1.1 | org.apache.logging.log4j.api (63): Not an extended bundle or destruction of extension already finished
2017-07-16 15:32:43,617 | DEBUG | 2.9-SNAPSHOT.jar | CommandExtender                  | 42 - org.apache.karaf.shell.core - 4.1.1 | org.apache.logging.log4j.api (63): Starting destruction process
2017-07-16 15:32:43,617 | DEBUG | 2.9-SNAPSHOT.jar | CommandExtender                  | 42 - org.apache.karaf.shell.core - 4.1.1 | org.apache.logging.log4j.api (63): Not an extended bundle or destruction of extension already finished
2017-07-16 15:32:43,617 | DEBUG | 2.9-SNAPSHOT.jar | api                              | 63 - org.apache.logging.log4j.api - 2.9.0.SNAPSHOT | BundleEvent STOPPED - org.apache.logging.log4j.api
2017-07-16 15:32:43,617 | DEBUG | nsole user karaf | LoggingCommandSessionListener    | 42 - org.apache.karaf.shell.core - 4.1.1 | Command: &apos;start 63&apos; failed: org.apache.karaf.shell.support.MultiException: Error executing command on bundles:
        Error starting bundle 63: Not found: org.apache.logging.log4j.util.Activator
2017-07-16 15:32:43,617 | ERROR | nsole user karaf | ShellUtil                        | 42 - org.apache.karaf.shell.core - 4.1.1 | Exception caught while executing command
org.apache.karaf.shell.support.MultiException: Error executing command on bundles:
        Error starting bundle 63: Not found: org.apache.logging.log4j.util.Activator
        at org.apache.karaf.shell.support.MultiException.throwIf(MultiException.java:61) ~[42:org.apache.karaf.shell.core:4.1.1]
        at org.apache.karaf.bundle.command.BundlesCommand.doExecute(BundlesCommand.java:67) [21:org.apache.karaf.bundle.core:4.1.1]
        at org.apache.karaf.bundle.command.BundlesCommand.execute(BundlesCommand.java:52) [21:org.apache.karaf.bundle.core:4.1.1]
        at org.apache.karaf.shell.impl.action.command.ActionCommand.execute(ActionCommand.java:84) [42:org.apache.karaf.shell.core:4.1.1]
        at org.apache.karaf.shell.impl.console.osgi.secured.SecuredCommand.execute(SecuredCommand.java:68) [42:org.apache.karaf.shell.core:4.1.1]
        at org.apache.karaf.shell.impl.console.osgi.secured.SecuredCommand.execute(SecuredCommand.java:86) [42:org.apache.karaf.shell.core:4.1.1]
        at org.apache.felix.gogo.runtime.Closure.executeCmd(Closure.java:560) [42:org.apache.karaf.shell.core:4.1.1]
        at org.apache.felix.gogo.runtime.Closure.executeStatement(Closure.java:486) [42:org.apache.karaf.shell.core:4.1.1]
        at org.apache.felix.gogo.runtime.Closure.execute(Closure.java:375) [42:org.apache.karaf.shell.core:4.1.1]
        at org.apache.felix.gogo.runtime.Pipe.doCall(Pipe.java:417) [42:org.apache.karaf.shell.core:4.1.1]
        at org.apache.felix.gogo.runtime.Pipe.call(Pipe.java:229) [42:org.apache.karaf.shell.core:4.1.1]
        at org.apache.felix.gogo.runtime.Pipe.call(Pipe.java:59) [42:org.apache.karaf.shell.core:4.1.1]
        at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:?]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [?:?]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [?:?]
        at java.lang.Thread.run(Thread.java:748) [?:?]
        Suppressed: java.lang.Exception: Error starting bundle 63: Not found: org.apache.logging.log4j.util.Activator
                at org.apache.karaf.bundle.command.BundlesCommand.doExecute(BundlesCommand.java:64) [21:org.apache.karaf.bundle.core:4.1.1]
                at org.apache.karaf.bundle.command.BundlesCommand.execute(BundlesCommand.java:52) [21:org.apache.karaf.bundle.core:4.1.1]
                at org.apache.karaf.shell.impl.action.command.ActionCommand.execute(ActionCommand.java:84) [42:org.apache.karaf.shell.core:4.1.1]
                at org.apache.karaf.shell.impl.console.osgi.secured.SecuredCommand.execute(SecuredCommand.java:68) [42:org.apache.karaf.shell.core:4.1.1]
                at org.apache.karaf.shell.impl.console.osgi.secured.SecuredCommand.execute(SecuredCommand.java:86) [42:org.apache.karaf.shell.core:4.1.1]
                at org.apache.felix.gogo.runtime.Closure.executeCmd(Closure.java:560) [42:org.apache.karaf.shell.core:4.1.1]
                at org.apache.felix.gogo.runtime.Closure.executeStatement(Closure.java:486) [42:org.apache.karaf.shell.core:4.1.1]
                at org.apache.felix.gogo.runtime.Closure.execute(Closure.java:375) [42:org.apache.karaf.shell.core:4.1.1]
                at org.apache.felix.gogo.runtime.Pipe.doCall(Pipe.java:417) [42:org.apache.karaf.shell.core:4.1.1]
                at org.apache.felix.gogo.runtime.Pipe.call(Pipe.java:229) [42:org.apache.karaf.shell.core:4.1.1]
                at org.apache.felix.gogo.runtime.Pipe.call(Pipe.java:59) [42:org.apache.karaf.shell.core:4.1.1]
                at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:?]
                at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [?:?]
                at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [?:?]
                at java.lang.Thread.run(Thread.java:748) [?:?]
        Caused by: org.osgi.framework.BundleException: Not found: org.apache.logging.log4j.util.Activator
                at org.apache.felix.framework.Felix.createBundleActivator(Felix.java:4493) ~[?:?]
                at org.apache.felix.framework.Felix.activateBundle(Felix.java:2219) ~[?:?]
                at org.apache.felix.framework.Felix.startBundle(Felix.java:2144) ~[?:?]
                at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:998) ~[?:?]
                at org.apache.karaf.bundle.command.Start.executeOnBundle(Start.java:38) ~[?:?]
                at org.apache.karaf.bundle.command.BundlesCommand.doExecute(BundlesCommand.java:62) ~[?:?]
                ... 14 more
        Caused by: java.lang.ClassNotFoundException: org.apache.logging.log4j.util.Activator not found by org.ops4j.pax.logging.pax-logging-api [5]
                at org.apache.felix.framework.BundleWiringImpl.findClassOrResourceByDelegation(BundleWiringImpl.java:1550) ~[?:?]
                at org.apache.felix.framework.BundleWiringImpl.access$200(BundleWiringImpl.java:79) ~[?:?]
                at org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.loadClass(BundleWiringImpl.java:1958) ~[?:?]
                at java.lang.ClassLoader.loadClass(ClassLoader.java:357) ~[?:?]
                at org.apache.felix.framework.BundleWiringImpl.getClassByDelegation(BundleWiringImpl.java:1391) ~[?:?]
                at org.apache.felix.framework.BundleWiringImpl.searchImports(BundleWiringImpl.java:1571) ~[?:?]
                at org.apache.felix.framework.BundleWiringImpl.findClassOrResourceByDelegation(BundleWiringImpl.java:1501) ~[?:?]
                at org.apache.felix.framework.BundleWiringImpl.access$200(BundleWiringImpl.java:79) ~[?:?]
                at org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.loadClass(BundleWiringImpl.java:1958) ~[?:?]
                at java.lang.ClassLoader.loadClass(ClassLoader.java:357) ~[?:?]
                at org.apache.felix.framework.BundleWiringImpl.getClassByDelegation(BundleWiringImpl.java:1391) ~[?:?]
                at org.apache.felix.framework.Felix.createBundleActivator(Felix.java:4489) ~[?:?]
                at org.apache.felix.framework.Felix.activateBundle(Felix.java:2219) ~[?:?]
                at org.apache.felix.framework.Felix.startBundle(Felix.java:2144) ~[?:?]
                at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:998) ~[?:?]
                at org.apache.karaf.bundle.command.Start.executeOnBundle(Start.java:38) ~[?:?]
                at org.apache.karaf.bundle.command.BundlesCommand.doExecute(BundlesCommand.java:62) ~[?:?]
                ... 14 more
2017-07-16 15:32:48,000 | DEBUG | nsole user karaf | LoggingCommandSessionListener    | 42 - org.apache.karaf.shell.core - 4.1.1 | Executing command: &apos;log:display&apos;

karaf@root()&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;



























































































</comment>
                            <comment id="16089171" author="ralph.goers@dslextreme.com" created="Sun, 16 Jul 2017 22:48:22 +0000"  >&lt;p&gt;Well, it worked for me yesterday. Today I get &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;karaf@root()&amp;gt; install /Users/rgoers/projects/apache/logging/log4j/log4j2/current/log4j-api/target/log4j-api-2.9-SNAPSHOT.jar                                                                                                                                                                                                                                        
Bundle IDs: 
Error executing command: Error installing bundles:
	Unable to install bundle /Users/rgoers/projects/apache/logging/log4j/log4j2/current/log4j-api/target/log4j-api-2.9-SNAPSHOT.jar: org.osgi.framework.BundleException: Unable to cache bundle: /Users/rgoers/projects/apache/logging/log4j/log4j2/current/log4j-api/target/log4j-api-2.9-SNAPSHOT.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I have no idea what this means.&lt;/p&gt;

&lt;p&gt;Also, yesterday when I did it, IIRC I installed both log4j-api and log4j-core and then I started core.&lt;/p&gt;</comment>
                            <comment id="16089199" author="garydgregory" created="Mon, 17 Jul 2017 00:16:55 +0000"  >&lt;p&gt;On my setup I got that error when I did not pass the install command a URL. &lt;/p&gt;</comment>
                            <comment id="16089200" author="garydgregory" created="Mon, 17 Jul 2017 00:22:13 +0000"  >&lt;p&gt;I only tried too install and start log4j-api.&lt;/p&gt;</comment>
                            <comment id="16089201" author="ralph.goers@dslextreme.com" created="Mon, 17 Jul 2017 00:24:34 +0000"  >&lt;p&gt;You are absolutely correct. Adding the file url I get&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;karaf@root()&amp;gt; install file:&lt;span class=&quot;code-comment&quot;&gt;///Users/rgoers/projects/apache/logging/log4j/log4j2/current/log4j-api/target/log4j-api-2.9-SNAPSHOT.jar                                                                                                                                                                                                                                 
&lt;/span&gt;Bundle ID: 52
karaf@root()&amp;gt; install file:&lt;span class=&quot;code-comment&quot;&gt;///Users/rgoers/projects/apache/logging/log4j/log4j2/current/log4j-core/target/log4j-core-2.9-SNAPSHOT.jar                                                                                                                                                                                                                               
&lt;/span&gt;Bundle ID: 53
karaf@root()&amp;gt; start 53                                                                                                                                                                                                                                                                                                                                              
karaf@root()&amp;gt; start 52  
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;No errors.&lt;/p&gt;</comment>
                            <comment id="16089227" author="jvz" created="Mon, 17 Jul 2017 02:09:32 +0000"  >&lt;p&gt;It&apos;s easier to just drop the jars in the deploy directory in Karaf. It&apos;ll auto-install them.&lt;/p&gt;</comment>
                            <comment id="16089351" author="jira-bot" created="Mon, 17 Jul 2017 05:56:58 +0000"  >&lt;p&gt;Commit 2c16e17d2a636155804c166ccff7b3d389fe03f0 in logging-log4j2&apos;s branch refs/heads/Lucene5 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ralph_goers%40dslextreme.com&quot; class=&quot;user-hover&quot; rel=&quot;ralph_goers@dslextreme.com&quot;&gt;ralph_goers@dslextreme.com&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=2c16e17&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=2c16e17&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1971&quot; title=&quot;ClassCastException: org.eclipse.osgi.internal.loader.SystemBundleLoader$1 cannot be cast to java.lang.ClassLoader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1971&quot;&gt;&lt;del&gt;LOG4J2-1971&lt;/del&gt;&lt;/a&gt; - Register Log4j-core as a service. Bypass tests that don&apos;t work on MacOS&lt;/p&gt;</comment>
                            <comment id="16089352" author="jira-bot" created="Mon, 17 Jul 2017 05:57:00 +0000"  >&lt;p&gt;Commit 9a08eb08f389ad9c432cbdfd4ab41246227d01db in logging-log4j2&apos;s branch refs/heads/Lucene5 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ralph_goers%40dslextreme.com&quot; class=&quot;user-hover&quot; rel=&quot;ralph_goers@dslextreme.com&quot;&gt;ralph_goers@dslextreme.com&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=9a08eb0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=logging-log4j2.git;h=9a08eb0&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LOG4J2-1971&quot; title=&quot;ClassCastException: org.eclipse.osgi.internal.loader.SystemBundleLoader$1 cannot be cast to java.lang.ClassLoader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LOG4J2-1971&quot;&gt;&lt;del&gt;LOG4J2-1971&lt;/del&gt;&lt;/a&gt; - Update changes&lt;/p&gt;</comment>
                            <comment id="16178663" author="dahn" created="Mon, 25 Sep 2017 07:22:30 +0000"  >&lt;p&gt;People, I am getting this outside OSGi context. I try to up the log4j version in Apache CloudStack and got &lt;br/&gt;
java.util.ServiceConfigurationError: org.apache.logging.log4j.spi.Provider: Provider org.apache.logging.log4j.core.impl.Log4jProvider not a subtype&lt;br/&gt;
in a test case that &apos;seems&apos; to only load a logger in it&apos;s target and do nothing else with logging&lt;br/&gt;
I try to change the line in&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/cloudstack/blob/master/utils/src/main/java/com/cloud/utils/ssh/SshHelper.java#L42&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cloudstack/blob/master/utils/src/main/java/com/cloud/utils/ssh/SshHelper.java#L42&lt;/a&gt;&lt;br/&gt;
t use the LogManager from log4j2 instead of Logger.getLogger() and it throws the exception shown above.&lt;br/&gt;
api-2.9.1. is used for this experiment. Any pointers that could help me solve the problem, please?&lt;/p&gt;

&lt;p&gt;The target is being loaded as a PowerMock.spy(), btw. That might throw some extra weight in the mix...&lt;/p&gt;</comment>
                            <comment id="16185593" author="johno" created="Fri, 29 Sep 2017 10:00:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dahn&quot; class=&quot;user-hover&quot; rel=&quot;dahn&quot;&gt;dahn&lt;/a&gt; we recently ran into the same problem after updating to log4j 2.9.1 &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; we were able to work around it by excluding the log4j package using the PowerMockIgnore annotation &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@RunWith(PowerMockRunner.class)
@PowerMockIgnore({&lt;span class=&quot;code-quote&quot;&gt;&quot;javax.management.*&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.*&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;com.sun.*&quot;&lt;/span&gt;})
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MyTest { }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.util.ServiceConfigurationError: org.apache.logging.log4j.spi.Provider: Provider org.apache.logging.log4j.core.impl.Log4jProvider not a subtype

	at java.util.ServiceLoader.fail(ServiceLoader.java:239)
	at java.util.ServiceLoader.access$300(ServiceLoader.java:185)
	at java.util.ServiceLoader$LazyIterator.nextService(ServiceLoader.java:376)
	at java.util.ServiceLoader$LazyIterator.next(ServiceLoader.java:404)
	at java.util.ServiceLoader$1.next(ServiceLoader.java:480)
	at org.apache.logging.log4j.util.ProviderUtil.loadProviders(ProviderUtil.java:101)
	at org.apache.logging.log4j.util.ProviderUtil.&amp;lt;init&amp;gt;(ProviderUtil.java:67)
	at org.apache.logging.log4j.util.ProviderUtil.lazyInit(ProviderUtil.java:142)
	at org.apache.logging.log4j.util.ProviderUtil.hasProviders(ProviderUtil.java:126)
	at org.apache.logging.log4j.LogManager.&amp;lt;clinit&amp;gt;(LogManager.java:89)
	at AbstractDao.&amp;lt;clinit&amp;gt;(AbstractDao.java:45)
	at sun.reflect.GeneratedSerializationConstructorAccessor6.newInstance(Unknown Source)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at org.objenesis.instantiator.sun.SunReflectionFactoryInstantiator.newInstance(SunReflectionFactoryInstantiator.java:48)
	at org.objenesis.ObjenesisBase.newInstance(ObjenesisBase.java:73)
	at org.mockito.internal.creation.instance.ObjenesisInstantiator.newInstance(ObjenesisInstantiator.java:14)
	at org.powermock.api.mockito.repackaged.ClassImposterizer.createProxy(ClassImposterizer.java:144)
	at org.powermock.api.mockito.repackaged.ClassImposterizer.imposterise(ClassImposterizer.java:59)
	at org.powermock.api.mockito.internal.mockcreation.DefaultMockCreator.createMethodInvocationControl(DefaultMockCreator.java:121)
	at org.powermock.api.mockito.internal.mockcreation.DefaultMockCreator.createMock(DefaultMockCreator.java:69)
	at org.powermock.api.mockito.internal.mockcreation.DefaultMockCreator.mock(DefaultMockCreator.java:46)
	at org.powermock.api.mockito.PowerMockito.mock(PowerMockito.java:204)
	at org.powermock.api.extension.listener.AnnotationEnabler.standardInject(AnnotationEnabler.java:118)
	at org.powermock.api.extension.listener.AnnotationEnabler.beforeTestMethod(AnnotationEnabler.java:63)
	at org.powermock.tests.utils.impl.PowerMockTestNotifierImpl.notifyBeforeTestMethod(PowerMockTestNotifierImpl.java:91)
	at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.executeTest(PowerMockJUnit44RunnerDelegateImpl.java:298)
	at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTestInSuper(PowerMockJUnit47RunnerDelegateImpl.java:131)
	at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.access$100(PowerMockJUnit47RunnerDelegateImpl.java:59)
	at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner$TestExecutorStatement.evaluate(PowerMockJUnit47RunnerDelegateImpl.java:147)
	at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.evaluateStatement(PowerMockJUnit47RunnerDelegateImpl.java:107)
	at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTest(PowerMockJUnit47RunnerDelegateImpl.java:82)
	at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runBeforesThenTestThenAfters(PowerMockJUnit44RunnerDelegateImpl.java:288)
	at org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:87)
	at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:50)
	at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.invokeTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:208)
	at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.runMethods(PowerMockJUnit44RunnerDelegateImpl.java:147)
	at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$1.run(PowerMockJUnit44RunnerDelegateImpl.java:121)
	at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:34)
	at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:44)
	at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.run(PowerMockJUnit44RunnerDelegateImpl.java:123)
	at org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.run(JUnit4TestSuiteChunkerImpl.java:121)
	at org.powermock.modules.junit4.common.internal.impl.AbstractCommonPowerMockRunner.run(AbstractCommonPowerMockRunner.java:53)
	at org.powermock.modules.junit4.PowerMockRunner.run(PowerMockRunner.java:59)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)
	at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:51)
	at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)
	at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16187760" author="dahn" created="Mon, 2 Oct 2017 08:33:31 +0000"  >&lt;p&gt;thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=johno&quot; class=&quot;user-hover&quot; rel=&quot;johno&quot;&gt;johno&lt;/a&gt; this certainly helps for some of the tests. I am seeing other tests fail atm, but that is a good thing &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 7 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3has7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>