<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:35:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-937] log4j to log4j2 ThreadContext (MDC)</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-937</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;We are using slf4j and log4j2. Also a third party library using log4j via its config file, so we have added log4j to log4j2 adaptor.&lt;/p&gt;

&lt;p&gt;While using MDC or directly ThreadContext, 3.party library logs (which is using log4j) doesnt pick up &quot;context key&quot; and directed to default route.&lt;/p&gt;

&lt;p&gt;3.party library have a loggerfactory class name in its config file.&lt;br/&gt;
Loggerfactory implementation is pretty straight forward, it creates a logger from repository. (log4j)&lt;/p&gt;

&lt;p&gt;I have written another class, creates the logger from LoggerFactory (log4j2) and change 3.party properties file. Everything works fine in this case.&lt;/p&gt;

&lt;p&gt;So it seems the problem isnt about 3.party library but log4j to log4j2 adaptor.&lt;/p&gt;




</description>
                <environment>&lt;p&gt;tested on Windows XP and 7&lt;/p&gt;</environment>
        <key id="12767405">LOG4J2-937</key>
            <summary>log4j to log4j2 ThreadContext (MDC)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="rgoers">Ralph Goers</assignee>
                                    <reporter username="Ceday">CEM DAYANIK</reporter>
                        <labels>
                    </labels>
                <created>Wed, 14 Jan 2015 09:59:03 +0000</created>
                <updated>Tue, 18 Jun 2019 04:51:45 +0000</updated>
                            <resolved>Tue, 18 Jun 2019 04:51:45 +0000</resolved>
                                    <version>2.1</version>
                                                    <component>API</component>
                    <component>Core</component>
                    <component>Log4j 1.2 bridge</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14285944" author="garydgregory" created="Wed, 21 Jan 2015 17:38:04 +0000"  >&lt;p&gt;Did you remove the log4j 1 jar file from the class path?&lt;/p&gt;

&lt;p&gt;Log4j2 has a 1.2 to 2 bridge where the 1.2 API is implemented in terms of the v2 core.&lt;/p&gt;

&lt;p&gt;You&apos;ll need:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;log4j-1.2-api&lt;/li&gt;
	&lt;li&gt;log4j-api&lt;/li&gt;
	&lt;li&gt;log4j-core&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;But this means that you cannot configure using a v1 config file, you must use a v2 config file.&lt;/p&gt;</comment>
                            <comment id="14298363" author="ceday" created="Fri, 30 Jan 2015 08:29:53 +0000"  >&lt;p&gt;i think i didnt make myself clear.&lt;/p&gt;

&lt;p&gt;it uses log4j2.xml, but logs are written the wrong file (which is default route)&lt;/p&gt;

&lt;p&gt;we dont have log4v1 API jar in the classpath nor log4j.properties.&lt;/p&gt;

&lt;p&gt;And we do have log4v1 to log4j2 bridge api.&lt;/p&gt;</comment>
                            <comment id="14578042" author="garydgregory" created="Mon, 8 Jun 2015 23:21:18 +0000"  >&lt;p&gt;Can you please provide a unit test to reproduce your issue?&lt;/p&gt;</comment>
                            <comment id="15030295" author="ralph.goers@dslextreme.com" created="Fri, 27 Nov 2015 22:48:28 +0000"  >&lt;p&gt;I&apos;m just reviewing this issue and I am not sure I understand the problem description. It sounds like:&lt;br/&gt;
1. The application uses the Log4j 1 MDC.&lt;br/&gt;
2. The application has included the log4j-1.2-api jar and not include the log4j 1.x jar.&lt;br/&gt;
3. The configuration uses a Routing appender with a Route keyed off of an MDC value.&lt;br/&gt;
4. The default Route is always being used.&lt;/p&gt;

&lt;p&gt;Given this it should be possible for us to create a unit test to verify this scenario.&lt;/p&gt;</comment>
                            <comment id="15031092" author="ralph.goers@dslextreme.com" created="Sun, 29 Nov 2015 17:17:31 +0000"  >&lt;p&gt;I have created a couple of unit tests for this and it is functioning correctly. We will definitely need a unit test from you to demonstrate the error.&lt;/p&gt;</comment>
                            <comment id="15250149" author="ralph.goers@dslextreme.com" created="Wed, 20 Apr 2016 16:05:03 +0000"  >&lt;p&gt;This record has been waiting for more information for quite some time. If we don&apos;t receive it shortly this issue will be closed.&lt;/p&gt;</comment>
                            <comment id="15370194" author="remkop@yahoo.com" created="Mon, 11 Jul 2016 05:31:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Ceday&quot; class=&quot;user-hover&quot; rel=&quot;Ceday&quot;&gt;Ceday&lt;/a&gt; Is this still a problem?&lt;/p&gt;</comment>
                            <comment id="15390524" author="garydgregory" created="Sat, 23 Jul 2016 04:14:38 +0000"  >&lt;p&gt;Ping?&lt;/p&gt;</comment>
                            <comment id="16866230" author="ralph.goers@dslextreme.com" created="Tue, 18 Jun 2019 04:51:45 +0000"  >&lt;p&gt;Closing due to lack of response from reporter.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 22 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i24ctb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>