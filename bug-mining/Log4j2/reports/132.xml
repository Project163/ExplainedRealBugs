<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:31:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[LOG4J2-295] BufferOverflowException in FastFileManager when logging huge messages</title>
                <link>https://issues.apache.org/jira/browse/LOG4J2-295</link>
                <project id="12310790" key="LOG4J2">Log4j 2</project>
                    <description>&lt;p&gt;When logging messages larger than &lt;tt&gt;FastFileManager.DEFAULT_BUFFER_SIZE&lt;/tt&gt; with appenders using &lt;tt&gt;FastFileManager&lt;/tt&gt;, the logging fails internally with a &lt;tt&gt;BufferOverflowException&lt;/tt&gt; and no log output is produced by these appenders.&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;&lt;b&gt;Test case&lt;/b&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;import java.util.Arrays;

import org.apache.logging.log4j.LogManager;

public class TestBufferOverflow {

  public static void main(String[] args) {

    final String longMessage;
    {
      char[] chars = new char[384 * 1024];
      Arrays.fill(chars, &apos;x&apos;);
      longMessage = new String(chars);
    }

    LogManager.getLogger(&quot;TestBufferOverflow&quot;).info(longMessage);
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;
&lt;p&gt;&lt;b&gt;log4j2.xml&lt;/b&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;
&amp;lt;configuration&amp;gt;
  &amp;lt;appenders&amp;gt;
    &amp;lt;FastFile name=&quot;file&quot; fileName=&quot;test.log&quot; suppressExceptions=&quot;false&quot;&amp;gt;
      &amp;lt;PatternLayout&amp;gt;
        &amp;lt;pattern&amp;gt;%m%n&amp;lt;/pattern&amp;gt;
      &amp;lt;/PatternLayout&amp;gt;
    &amp;lt;/FastFile&amp;gt;
  &amp;lt;/appenders&amp;gt;
  &amp;lt;loggers&amp;gt;
    &amp;lt;root level=&quot;info&quot;&amp;gt;
      &amp;lt;appender-ref ref=&quot;file&quot; /&amp;gt;
    &amp;lt;/root&amp;gt;
  &amp;lt;/loggers&amp;gt;
&amp;lt;/configuration&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;
&lt;p&gt;&lt;b&gt;Exception thrown&lt;/b&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception in thread &quot;main&quot; org.apache.logging.log4j.core.appender.AppenderRuntimeException: An exception occurred processing Appender file
	at org.apache.logging.log4j.core.appender.DefaultErrorHandler.error(DefaultErrorHandler.java:73)
	at org.apache.logging.log4j.core.config.AppenderControl.callAppender(AppenderControl.java:104)
	at org.apache.logging.log4j.core.config.LoggerConfig.callAppenders(LoggerConfig.java:424)
	at org.apache.logging.log4j.core.config.LoggerConfig.log(LoggerConfig.java:405)
	at org.apache.logging.log4j.core.config.LoggerConfig.log(LoggerConfig.java:366)
	at org.apache.logging.log4j.core.Logger.log(Logger.java:110)
	at org.apache.logging.log4j.spi.AbstractLogger.info(AbstractLogger.java:1010)
	at TestBufferOverflow.main(TestBufferOverflow.java:16)
Caused by: java.nio.BufferOverflowException
	at java.nio.HeapByteBuffer.put(HeapByteBuffer.java:165)
	at org.apache.logging.log4j.core.appender.FastFileManager.write(FastFileManager.java:89)
	at org.apache.logging.log4j.core.appender.OutputStreamManager.write(OutputStreamManager.java:129)
	at org.apache.logging.log4j.core.appender.AbstractOutputStreamAppender.append(AbstractOutputStreamAppender.java:113)
	at org.apache.logging.log4j.core.appender.FastFileAppender.append(FastFileAppender.java:84)
	at org.apache.logging.log4j.core.config.AppenderControl.callAppender(AppenderControl.java:102)
	... 6 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12655276">LOG4J2-295</key>
            <summary>BufferOverflowException in FastFileManager when logging huge messages</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rpopma">Remko Popma</assignee>
                                    <reporter username="tom@bibbu.net">Tom Wieczorek</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Jun 2013 07:16:56 +0000</created>
                <updated>Thu, 4 Jul 2013 14:18:04 +0000</updated>
                            <resolved>Sun, 30 Jun 2013 00:42:21 +0000</resolved>
                                    <version>2.0-beta7</version>
                                    <fixVersion>2.0-beta8</fixVersion>
                                    <component>Appenders</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13695302" author="remkop@yahoo.com" created="Fri, 28 Jun 2013 07:27:30 +0000"  >&lt;p&gt;Thanks for the report! I&apos;ll take a look as soon as I can, hopefully this weekend.&lt;/p&gt;</comment>
                            <comment id="13696224" author="remkop@yahoo.com" created="Sun, 30 Jun 2013 00:42:21 +0000"  >&lt;p&gt;Fixed in revision 1498044. Please verify and close.&lt;/p&gt;</comment>
                            <comment id="13700081" author="tom@bibbu.net" created="Thu, 4 Jul 2013 14:18:04 +0000"  >&lt;p&gt;2.0-beta8-SNAPSHOT built from r1498254 works for me. Thanks for fixing!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>335553</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 20 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1lvq7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>335877</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>