diff --git a/log4j-core/src/main/java/org/apache/logging/log4j/core/config/ConfigurationFactory.java b/log4j-core/src/main/java/org/apache/logging/log4j/core/config/ConfigurationFactory.java
index 087e84c99a..3c8c44a603 100644
--- a/log4j-core/src/main/java/org/apache/logging/log4j/core/config/ConfigurationFactory.java
+++ b/log4j-core/src/main/java/org/apache/logging/log4j/core/config/ConfigurationFactory.java
@@ -388,42 +388,58 @@ public abstract class ConfigurationFactory {
         public Configuration getConfiguration(final String name, final URI configLocation) {
 
             if (configLocation == null) {
-                final String config = this.substitutor.replace(
-                    PropertiesUtil.getProperties().getStringProperty(CONFIGURATION_FILE_PROPERTY));
-                if (config != null) {
+                final String configLocationStr = this.substitutor.replace(PropertiesUtil.getProperties()
+                        .getStringProperty(CONFIGURATION_FILE_PROPERTY));
+                if (configLocationStr != null) {
                     ConfigurationSource source = null;
                     try {
-                        source = getInputFromUri(FileUtils.getCorrectedFilePathUri(config));
+                        source = getInputFromUri(FileUtils.getCorrectedFilePathUri(configLocationStr));
                     } catch (final Exception ex) {
                         // Ignore the error and try as a String.
                         LOGGER.catching(Level.DEBUG, ex);
                     }
                     if (source == null) {
                         final ClassLoader loader = LoaderUtil.getThreadContextClassLoader();
-                        source = getInputFromString(config, loader);
+                        source = getInputFromString(configLocationStr, loader);
                     }
                     if (source != null) {
-                        for (final ConfigurationFactory factory : factories) {
+                        for (final ConfigurationFactory factory : getFactories()) {
                             final String[] types = factory.getSupportedTypes();
                             if (types != null) {
                                 for (final String type : types) {
-                                    if (type.equals("*") || config.endsWith(type)) {
-                                        final Configuration c = factory.getConfiguration(source);
-                                        if (c != null) {
-                                            return c;
+                                    if (type.equals("*") || configLocationStr.endsWith(type)) {
+                                        final Configuration config = factory.getConfiguration(source);
+                                        if (config != null) {
+                                            return config;
                                         }
                                     }
                                 }
                             }
                         }
                     }
+                } else {
+                    for (final ConfigurationFactory factory : getFactories()) {
+                        final String[] types = factory.getSupportedTypes();
+                        if (types != null) {
+                            for (final String type : types) {
+                                if (type.equals("*")) {
+                                    final Configuration config = factory.getConfiguration(name, configLocation);
+                                    if (config != null) {
+                                        return config;
+                                    }
+                                }
+                            }
+                        }
+                    }
                 }
             } else {
-                for (final ConfigurationFactory factory : factories) {
+                // configLocation != null
+                final String configLocationStr = configLocation.toString();
+                for (final ConfigurationFactory factory : getFactories()) {
                     final String[] types = factory.getSupportedTypes();
                     if (types != null) {
                         for (final String type : types) {
-                            if (type.equals("*") || configLocation.toString().endsWith(type)) {
+                            if (type.equals("*") || configLocationStr.endsWith(type)) {
                                 final Configuration config = factory.getConfiguration(name, configLocation);
                                 if (config != null) {
                                     return config;
@@ -454,7 +470,7 @@ public abstract class ConfigurationFactory {
         private Configuration getConfiguration(final boolean isTest, final String name) {
             final boolean named = Strings.isNotEmpty(name);
             final ClassLoader loader = LoaderUtil.getThreadContextClassLoader();
-            for (final ConfigurationFactory factory : factories) {
+            for (final ConfigurationFactory factory : getFactories()) {
                 String configName;
                 final String prefix = isTest ? TEST_PREFIX : DEFAULT_PREFIX;
                 final String [] types = factory.getSupportedTypes();
@@ -486,7 +502,7 @@ public abstract class ConfigurationFactory {
         public Configuration getConfiguration(final ConfigurationSource source) {
             if (source != null) {
                 final String config = source.getLocation();
-                for (final ConfigurationFactory factory : factories) {
+                for (final ConfigurationFactory factory : getFactories()) {
                     final String[] types = factory.getSupportedTypes();
                     if (types != null) {
                         for (final String type : types) {
@@ -507,4 +523,8 @@ public abstract class ConfigurationFactory {
             return null;
         }
     }
+
+    static List<ConfigurationFactory> getFactories() {
+        return factories;
+    }
 }
diff --git a/src/changes/changes.xml b/src/changes/changes.xml
index 61cd93331a..8730a7e4b9 100644
--- a/src/changes/changes.xml
+++ b/src/changes/changes.xml
@@ -81,6 +81,9 @@
       <action issue="LOG4J2-982" dev="ggregory" type="fix" due-to="Mikhail Mazurskiy">
         Use System.nanoTime() to measure time intervals.
       </action>      
+      <action issue="LOG4J2-1045" dev="ggregory" type="fix" due-to="GÃ¼nter Albrecht">
+        Externalize log4j2.xml via URL resource.
+      </action>      
       <action issue="LOG4J2-890" dev="ggregory" type="update" due-to="Hassan Kalaldeh, Robert Andersson, Remko Popma">
         log4j-web-2.1 should workaround a bug in JBOSS EAP 6.2.
       </action>
