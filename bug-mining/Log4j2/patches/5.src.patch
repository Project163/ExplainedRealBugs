diff --git a/core/src/main/java/org/apache/logging/log4j/core/appender/AbstractManager.java b/core/src/main/java/org/apache/logging/log4j/core/appender/AbstractManager.java
index 71bcacfa6a..5f8d93e376 100644
--- a/core/src/main/java/org/apache/logging/log4j/core/appender/AbstractManager.java
+++ b/core/src/main/java/org/apache/logging/log4j/core/appender/AbstractManager.java
@@ -42,7 +42,7 @@ public abstract class AbstractManager {
 
     private String name;
 
-    private int count;
+    protected int count;
 
     protected AbstractManager(String name) {
         this.name = name;
diff --git a/core/src/main/java/org/apache/logging/log4j/core/appender/ConsoleAppender.java b/core/src/main/java/org/apache/logging/log4j/core/appender/ConsoleAppender.java
index e9b82b62a4..8f9d3a4fa2 100644
--- a/core/src/main/java/org/apache/logging/log4j/core/appender/ConsoleAppender.java
+++ b/core/src/main/java/org/apache/logging/log4j/core/appender/ConsoleAppender.java
@@ -87,8 +87,8 @@ public final class ConsoleAppender extends OutputStreamAppender {
     private static OutputStreamManager getManager(Target target) {
         String type = target.name();
         OutputStream os = target == Target.SYSTEM_OUT ? System.out : System.err;
-        OutputStreamManager manager = OutputStreamManager.getManager(target.name(), factory,
-            new FactoryData(os, type));
+        OutputStreamManager manager = OutputStreamManager.getManager(target.name(), new FactoryData(os, type), factory
+        );
         return manager;
     }
 
diff --git a/core/src/main/java/org/apache/logging/log4j/core/appender/FileManager.java b/core/src/main/java/org/apache/logging/log4j/core/appender/FileManager.java
index a5140308a6..5bab04b801 100644
--- a/core/src/main/java/org/apache/logging/log4j/core/appender/FileManager.java
+++ b/core/src/main/java/org/apache/logging/log4j/core/appender/FileManager.java
@@ -55,7 +55,7 @@ public class FileManager extends OutputStreamManager {
         if (locking && bufferedIO) {
             locking = false;
         }
-        return (FileManager) getManager(fileName, factory, new FactoryData(append, locking, bufferedIO));
+        return (FileManager) getManager(fileName, new FactoryData(append, locking, bufferedIO), factory);
     }
 
     protected synchronized void write(byte[] bytes, int offset, int length)  {
diff --git a/core/src/main/java/org/apache/logging/log4j/core/appender/OutputStreamManager.java b/core/src/main/java/org/apache/logging/log4j/core/appender/OutputStreamManager.java
index 8520ce3330..fab2148126 100644
--- a/core/src/main/java/org/apache/logging/log4j/core/appender/OutputStreamManager.java
+++ b/core/src/main/java/org/apache/logging/log4j/core/appender/OutputStreamManager.java
@@ -36,13 +36,14 @@ public class OutputStreamManager extends AbstractManager {
 
     /**
      * Create a Manager.
+     *
      * @param name The name of the stream to manage.
-     * @param factory The factory to use to create the Manager.
      * @param data The data to pass to the Manager.
+     * @param factory The factory to use to create the Manager.
      * @return An OutputStreamManager.
      */
-    public static OutputStreamManager getManager(String name, ManagerFactory<OutputStreamManager, Object> factory,
-                                                 Object data) {
+    public static OutputStreamManager getManager(String name, Object data,
+                                                 ManagerFactory<OutputStreamManager, Object> factory) {
         return AbstractManager.getManager(name, factory, data);
     }
 
diff --git a/core/src/main/java/org/apache/logging/log4j/core/appender/rolling/RollingFileManager.java b/core/src/main/java/org/apache/logging/log4j/core/appender/rolling/RollingFileManager.java
index 92c133688c..7b71af4c79 100644
--- a/core/src/main/java/org/apache/logging/log4j/core/appender/rolling/RollingFileManager.java
+++ b/core/src/main/java/org/apache/logging/log4j/core/appender/rolling/RollingFileManager.java
@@ -61,8 +61,8 @@ public class RollingFileManager extends FileManager {
     public static RollingFileManager getFileManager(String fileName, String pattern, boolean append,
                                                     boolean bufferedIO) {
 
-        return (RollingFileManager) getManager(fileName, factory, new FactoryData(pattern, append,
-            bufferedIO));
+        return (RollingFileManager) getManager(fileName, new FactoryData(pattern, append,
+            bufferedIO), factory);
     }
 
     protected synchronized void write(byte[] bytes, int offset, int length) {
diff --git a/core/src/main/java/org/apache/logging/log4j/core/impl/ThrowableProxy.java b/core/src/main/java/org/apache/logging/log4j/core/impl/ThrowableProxy.java
index ee447a8764..dcc4f173b7 100644
--- a/core/src/main/java/org/apache/logging/log4j/core/impl/ThrowableProxy.java
+++ b/core/src/main/java/org/apache/logging/log4j/core/impl/ThrowableProxy.java
@@ -43,10 +43,10 @@ public class ThrowableProxy extends Throwable {
     private static final org.apache.logging.log4j.Logger LOGGER = StatusLogger.getLogger();
 
     private static Method getSuppressed;
+    private static Method addSuppressed;
 
     private final Throwable throwable;
     private final ThrowableProxy cause;
-    private final ThrowableProxy[] suppressed;
     private int commonElementCount;
 
     private final StackTracePackageElement[] callerPackageData;
@@ -68,7 +68,7 @@ public class ThrowableProxy extends Throwable {
         callerPackageData = resolvePackageData(stack, map, null, throwable.getStackTrace());
         this.cause = (throwable.getCause() == null) ? null :
             new ThrowableProxy(throwable, stack, map, throwable.getCause());
-        suppressed = getSuppressed(throwable);
+        setSuppressed(throwable);
     }
 
     /**
@@ -84,7 +84,7 @@ public class ThrowableProxy extends Throwable {
         callerPackageData = resolvePackageData(stack, map, parent.getStackTrace(), cause.getStackTrace());
         this.cause = (throwable.getCause() == null) ? null :
             new ThrowableProxy(parent, stack, map, throwable.getCause());
-        suppressed = getSuppressed(throwable);
+        setSuppressed(throwable);
     }
 
 
@@ -108,22 +108,6 @@ public class ThrowableProxy extends Throwable {
         return cause;
     }
 
-    /**
-     * Added in Java 7.
-     * @param exception A Throwable that was suppressed.
-     */
-    public void addSuppressed(Throwable exception) {
-        throw new UnsupportedOperationException("Cannot add suppressed exceptions to a ThrowableProxy");
-    }
-
-    /**
-     * Added in Java 7.
-     * @return Any suppressed exceptions.
-     */
-    public Throwable[] getSuppressed() {
-        return suppressed;
-    }
-
     @Override
     public Throwable initCause(Throwable throwable) {
         throw new IllegalStateException("Cannot set the cause on a ThrowableProxy");
@@ -209,6 +193,7 @@ public class ThrowableProxy extends Throwable {
      * @return The formatted suppressed Throwables.
      */
     public String getSuppressedStackTrace() {
+        ThrowableProxy[] suppressed = getSuppressedProxies();
         if (suppressed == null || suppressed.length == 0) {
             return "";
         }
@@ -427,6 +412,8 @@ public class ThrowableProxy extends Throwable {
         for (Method method : methods) {
             if (method.getName().equals("getSuppressed")) {
                 getSuppressed = method;
+            } else if (method.getName().equals("addSuppressed")) {
+                addSuppressed = method;
             }
         }
     }
@@ -463,22 +450,29 @@ public class ThrowableProxy extends Throwable {
         }
     }
 
-    private ThrowableProxy[] getSuppressed(Throwable throwable) {
-        ThrowableProxy[] supp = null;
+    private ThrowableProxy[] getSuppressedProxies() {
         if (getSuppressed != null) {
+            try {
+                return (ThrowableProxy[]) getSuppressed.invoke(this, null);
+            } catch (Exception ex) {
+                return null;
+            }
+        }
+        return null;
+    }
+
+    private void setSuppressed(Throwable throwable) {
+        if (getSuppressed != null && addSuppressed != null) {
             try {
                 Throwable[] array = (Throwable[]) getSuppressed.invoke(throwable, null);
-                supp = new ThrowableProxy[array.length];
                 int i = 0;
                 for (Throwable t : array) {
-                    supp[i] = new ThrowableProxy(t);
-                    ++i;
+                    addSuppressed.invoke(this, new ThrowableProxy(t));
                 }
             } catch (Exception ex) {
                 //
             }
         }
-        return supp;
     }
 
     /**
diff --git a/core/src/main/java/org/apache/logging/log4j/core/net/DatagramSocketManager.java b/core/src/main/java/org/apache/logging/log4j/core/net/DatagramSocketManager.java
index c672ada8fd..1d41311cc6 100644
--- a/core/src/main/java/org/apache/logging/log4j/core/net/DatagramSocketManager.java
+++ b/core/src/main/java/org/apache/logging/log4j/core/net/DatagramSocketManager.java
@@ -51,8 +51,8 @@ public class DatagramSocketManager extends AbstractSocketManager {
         if (port <= 0) {
             throw new IllegalArgumentException("A port value is required");
         }
-        return (DatagramSocketManager) getManager("UDP:" + host + ":" + port, factory,
-            new FactoryData(host, port));
+        return (DatagramSocketManager) getManager("UDP:" + host + ":" + port, new FactoryData(host, port), factory
+        );
     }
 
     /**
diff --git a/core/src/main/java/org/apache/logging/log4j/core/net/TCPSocketManager.java b/core/src/main/java/org/apache/logging/log4j/core/net/TCPSocketManager.java
index af975d7d85..4f22a6ed45 100644
--- a/core/src/main/java/org/apache/logging/log4j/core/net/TCPSocketManager.java
+++ b/core/src/main/java/org/apache/logging/log4j/core/net/TCPSocketManager.java
@@ -85,7 +85,7 @@ public class TCPSocketManager extends AbstractSocketManager {
         if (delay == 0) {
             delay = DEFAULT_RECONNECTION_DELAY;
         }
-        return (TCPSocketManager) getManager("TCP:" + host + ":" + port, factory, new FactoryData(host, port, delay));
+        return (TCPSocketManager) getManager("TCP:" + host + ":" + port, new FactoryData(host, port, delay), factory);
     }
 
     @Override
diff --git a/flume-ng/src/main/java/org/apache/logging/log4j/flume/appender/FlumeAvroAppender.java b/flume-ng/src/main/java/org/apache/logging/log4j/flume/appender/FlumeAvroAppender.java
index 5434da70c3..a1c9f3adda 100644
--- a/flume-ng/src/main/java/org/apache/logging/log4j/flume/appender/FlumeAvroAppender.java
+++ b/flume-ng/src/main/java/org/apache/logging/log4j/flume/appender/FlumeAvroAppender.java
@@ -27,6 +27,10 @@ import org.apache.logging.log4j.core.config.plugins.PluginFactory;
 import org.apache.logging.log4j.core.layout.RFC5424Layout;
 
 import java.net.InetAddress;
+import java.net.NetworkInterface;
+import java.net.SocketException;
+import java.net.UnknownHostException;
+import java.util.Enumeration;
 
 /**
  * An Appender that uses the Avro protocol to route events to Flume.
@@ -145,7 +149,7 @@ public final class FlumeAvroAppender extends AppenderBase implements FlumeEventF
 
         String hostname;
         try {
-            hostname = InetAddress.getLocalHost().getHostName();
+            hostname = getHostName();
         } catch (Exception ex) {
             LOGGER.error("Unable to determine local hostname", ex);
             return null;
@@ -180,4 +184,29 @@ public final class FlumeAvroAppender extends AppenderBase implements FlumeEventF
         return new FlumeAvroAppender(name, filter, layout,  handleExceptions, hostname, includes,
             excludes, required, mdcPrefix, eventPrefix, compress, reconnectDelay, retries, factory, manager);
     }
+
+    private static String getHostName() throws Exception {
+        try {
+            return InetAddress.getLocalHost().getHostName();
+        } catch (Exception ex) {
+            // Could not locate host the easy way.
+        }
+
+        Enumeration<NetworkInterface> interfaces = NetworkInterface.getNetworkInterfaces();
+        while (interfaces.hasMoreElements()) {
+            NetworkInterface nic = interfaces.nextElement();
+            Enumeration<InetAddress> addresses = nic.getInetAddresses();
+            while (addresses.hasMoreElements()) {
+                InetAddress address = addresses.nextElement();
+                if (!address.isLoopbackAddress()) {
+                    String hostname = address.getHostName();
+                    if (hostname != null) {
+                        return hostname;
+                    }
+                }
+            }
+        }
+        throw new UnknownHostException("Unable to determine host name");
+
+    }
 }
diff --git a/src/changes/changes.xml b/src/changes/changes.xml
index 7acf56f2e0..69c08646cb 100644
--- a/src/changes/changes.xml
+++ b/src/changes/changes.xml
@@ -23,7 +23,10 @@
 
   <body>
     <release version="2.0-alpha2" date="TBD" description="Bug fixes and minor enhancements">
-      <action issue="LOG4J2-65" dev="rgoers">
+      <action issue="LOG4J2-64" dev="rgoers" type="fix">
+        Fix compilation problems in Java 7.
+      </action>
+      <action issue="LOG4J2-65" dev="rgoers" type="fix">
         Allow variable substitution on the configuration attributes and on the root log level.
       </action>
     </release>
