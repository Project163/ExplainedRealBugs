diff --git a/core/src/main/java/org/apache/logging/log4j/core/helpers/Charsets.java b/core/src/main/java/org/apache/logging/log4j/core/helpers/Charsets.java
index d21bfdd2cb..ea99a42626 100644
--- a/core/src/main/java/org/apache/logging/log4j/core/helpers/Charsets.java
+++ b/core/src/main/java/org/apache/logging/log4j/core/helpers/Charsets.java
@@ -24,22 +24,35 @@ import org.apache.logging.log4j.status.StatusLogger;
  * Charset utilities.
  */
 public final class Charsets {
-    
-    public static final Charset UTF_8 = Charset.forName("UTF-8");
 
-    private Charsets() {
-    }
+    /**
+     * UTF-8 Charset.
+     */
+    public static final Charset UTF_8 = Charset.forName("UTF-8");
 
     /**
-     * Returns a Charset, if possible the Charset for the specified {@code charsetName},
-     * otherwise (if the specified {@code charsetName} is {@code null} or not supported)
-     * this method returns the platform default Charset.
+     * Returns a Charset, if possible the Charset for the specified {@code charsetName}, otherwise (if the specified
+     * {@code charsetName} is {@code null} or not supported) this method returns the platform default Charset.
      *
      * @param charsetName
      *            name of the preferred charset or {@code null}
      * @return a Charset, not null.
      */
     public static Charset getSupportedCharset(final String charsetName) {
+        return getSupportedCharset(charsetName, Charset.defaultCharset());
+    }
+
+    /**
+     * Returns a Charset, if possible the Charset for the specified {@code charsetName}, otherwise (if the specified
+     * {@code charsetName} is {@code null} or not supported) this method returns the platform default Charset.
+     *
+     * @param charsetName
+     *            name of the preferred charset or {@code null}
+     * @param defaultCharset
+     *            returned if {@code charsetName} is null or is not supported.
+     * @return a Charset, never null.
+     */
+    public static Charset getSupportedCharset(final String charsetName, final Charset defaultCharset) {
         Charset charset = null;
         if (charsetName != null) {
             if (Charset.isSupported(charsetName)) {
@@ -47,13 +60,16 @@ public final class Charsets {
             }
         }
         if (charset == null) {
-            charset = Charset.defaultCharset();
+            charset = defaultCharset;
             if (charsetName != null) {
-                StatusLogger.getLogger().error("Charset " + charsetName + " is not supported for layout, using " +
-                    charset.displayName());
+                StatusLogger.getLogger().error(
+                        "Charset " + charsetName + " is not supported for layout, using " + charset.displayName());
             }
         }
         return charset;
     }
 
+    private Charsets() {
+    }
+
 }
diff --git a/core/src/main/java/org/apache/logging/log4j/core/layout/XMLLayout.java b/core/src/main/java/org/apache/logging/log4j/core/layout/XMLLayout.java
index f95dd8b767..ddd45488a7 100644
--- a/core/src/main/java/org/apache/logging/log4j/core/layout/XMLLayout.java
+++ b/core/src/main/java/org/apache/logging/log4j/core/layout/XMLLayout.java
@@ -198,9 +198,11 @@ public class XMLLayout extends AbstractStringLayout {
             return null;
         }
         final StringBuilder sbuf = new StringBuilder();
-        sbuf.append("<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n");
+        sbuf.append("<?xml version=\"1.0\" encoding=\"");
+        sbuf.append(this.getCharset().name());
+        sbuf.append("\"?>\r\n");
         sbuf.append("<log4j:eventSet xmlns:log4j=\"http://logging.apache.org/log4j/\">\r\n");
-        return sbuf.toString().getBytes(getCharset());
+        return sbuf.toString().getBytes(this.getCharset());
     }
 
 
@@ -267,11 +269,12 @@ public class XMLLayout extends AbstractStringLayout {
     }
 
     /**
-     * Create an XML Layout.
+     * Creates an XML Layout.
+     * 
      * @param locationInfo If "true" include the location information in the generated XML.
      * @param properties If "true" include the thread context in the generated XML.
      * @param complete If "true" include the XML header.
-     * @param charsetName The character set to use.
+     * @param charsetName The character set to use, if {@code null}, uses UTF-8.
      * @return An XML Layout.
      */
     @PluginFactory
@@ -279,7 +282,7 @@ public class XMLLayout extends AbstractStringLayout {
                                          @PluginAttr("properties") final String properties,
                                          @PluginAttr("complete") final String complete,
                                          @PluginAttr("charset") final String charsetName) {
-        final Charset charset = Charsets.getSupportedCharset(charsetName);
+        final Charset charset = Charsets.getSupportedCharset(charsetName, Charsets.UTF_8);
         final boolean info = locationInfo == null ? false : Boolean.valueOf(locationInfo);
         final boolean props = properties == null ? false : Boolean.valueOf(properties);
         final boolean comp = complete == null ? false : Boolean.valueOf(complete);
diff --git a/core/src/test/java/org/apache/logging/log4j/core/layout/XMLLayoutTest.java b/core/src/test/java/org/apache/logging/log4j/core/layout/XMLLayoutTest.java
index 82fe20af2b..708720bd50 100644
--- a/core/src/test/java/org/apache/logging/log4j/core/layout/XMLLayoutTest.java
+++ b/core/src/test/java/org/apache/logging/log4j/core/layout/XMLLayoutTest.java
@@ -92,7 +92,8 @@ public class XMLLayoutTest {
         final List<String> list = appender.getMessages();
 
         assertTrue("Incorrect number of lines. Require at least 50 " + list.size(), list.size() > 50);
-        assertTrue("Incorrect header", list.get(0).equals("<?xml version=\"1.0\" encoding=\"UTF-8\"?>"));
+        final String string = list.get(0);
+        assertTrue("Incorrect header: " + string, string.equals("<?xml version=\"1.0\" encoding=\"UTF-8\"?>"));
         assertTrue("Incorrect footer", list.get(list.size() - 1).equals("</log4j:eventSet>"));
         assertTrue("Incorrect body. Expected " + body + " Actual: " + list.get(8), list.get(8).equals(body));
     }
diff --git a/src/changes/changes.xml b/src/changes/changes.xml
index 3acced9194..302228ae69 100644
--- a/src/changes/changes.xml
+++ b/src/changes/changes.xml
@@ -22,6 +22,9 @@
   </properties>
   <body>
     <release version="2.0-beta7" date="2013-??-??" description="Bug fixes and enhancements">
+      <action issue="LOG4J2-257" dev="ggregory" type="fix">
+        XML layout ignores charset for the XML processing intruction's encoding attribute.
+      </action>
       <action issue="LOG4J2-255" dev="rpopma" type="fix">
         Multi-byte character strings are now assumed to be in the platform default encoding, not UTF-8.
       </action>
