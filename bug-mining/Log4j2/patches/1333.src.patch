diff --git a/log4j-core/src/main/java/org/apache/logging/log4j/core/config/plugins/util/ResolverUtil.java b/log4j-core/src/main/java/org/apache/logging/log4j/core/config/plugins/util/ResolverUtil.java
index 016efcfd37..7611ee62b8 100644
--- a/log4j-core/src/main/java/org/apache/logging/log4j/core/config/plugins/util/ResolverUtil.java
+++ b/log4j-core/src/main/java/org/apache/logging/log4j/core/config/plugins/util/ResolverUtil.java
@@ -342,13 +342,14 @@ public class ResolverUtil {
         try {
             connection = (JarURLConnection) url.openConnection();
             if (connection != null) {
-                JarFile jarFile = connection.getJarFile();
-                Enumeration<JarEntry> entries = jarFile.entries();
-                while (entries.hasMoreElements()) {
-                    JarEntry entry = entries.nextElement();
-                    final String name = entry.getName();
-                    if (!entry.isDirectory() && name.startsWith(parent) && isTestApplicable(test, name)) {
-                        addIfMatching(test, name);
+                try (JarFile jarFile = connection.getJarFile()) {
+                    Enumeration<JarEntry> entries = jarFile.entries();
+                    while (entries.hasMoreElements()) {
+                        JarEntry entry = entries.nextElement();
+                        final String name = entry.getName();
+                        if (!entry.isDirectory() && name.startsWith(parent) && isTestApplicable(test, name)) {
+                            addIfMatching(test, name);
+                        }
                     }
                 }
             } else {
