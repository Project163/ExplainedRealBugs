diff --git a/log4j-core/src/main/java/org/apache/logging/log4j/core/appender/rolling/RollingRandomAccessFileManager.java b/log4j-core/src/main/java/org/apache/logging/log4j/core/appender/rolling/RollingRandomAccessFileManager.java
index 0d60483495..e8b6cb909d 100644
--- a/log4j-core/src/main/java/org/apache/logging/log4j/core/appender/rolling/RollingRandomAccessFileManager.java
+++ b/log4j-core/src/main/java/org/apache/logging/log4j/core/appender/rolling/RollingRandomAccessFileManager.java
@@ -87,7 +87,7 @@ public class RollingRandomAccessFileManager extends RollingFileManager {
             return;
         }
         try {
-            if (randomAccessFile.length() == 0) {
+            if (randomAccessFile != null && randomAccessFile.length() == 0) {
                 // write to the file, not to the buffer: the buffer may not be empty
                 randomAccessFile.write(header, 0, header.length);
             }
diff --git a/log4j-core/src/test/resources/log4j-rolling-random-direct.xml b/log4j-core/src/test/resources/log4j-rolling-random-direct.xml
index 4be5b625ba..0d1dc18983 100644
--- a/log4j-core/src/test/resources/log4j-rolling-random-direct.xml
+++ b/log4j-core/src/test/resources/log4j-rolling-random-direct.xml
@@ -27,7 +27,7 @@
       <PatternLayout pattern="%m%n"/>
     </Console>
     <RollingRandomAccessFile name="RollingFile" filePattern="${logDir}/test1-%d{MM-dd-yy-HH-mm}-%i.log.gz">
-      <PatternLayout>
+      <PatternLayout header="This is a test">
         <Pattern>%d %p %C{1.} [%t] %m%n</Pattern>
       </PatternLayout>
       <Policies>
diff --git a/src/changes/changes.xml b/src/changes/changes.xml
index b4d658f54f..13f022fd37 100644
--- a/src/changes/changes.xml
+++ b/src/changes/changes.xml
@@ -31,6 +31,10 @@
          - "remove" - Removed
     -->
     <release version="2.11.0" date="2018-xx-xx" description="GA Release 2.11.0">
+      <action issue="LOG4J2-2247" dev="rgoers" type="fix">
+        NullPointerException would occur when header was provided to a Layout on RollingRandingAccessFileAppender
+        with DirectWriteRolloverStrategy.
+      </action>
       <action issue="LOG4J2-2250" dev="rpopma" type="update">
         The internal status logger timestamp format is now configurable with system property `log4j2.StatusLogger.DateFormat`.
       </action>
