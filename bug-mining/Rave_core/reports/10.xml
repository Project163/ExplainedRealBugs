<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:25:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[RAVE-680] Rave is not generating Foreign Keys with default JPA implementation</title>
                <link>https://issues.apache.org/jira/browse/RAVE-680</link>
                <project id="12311290" key="RAVE">Rave</project>
                    <description>&lt;p&gt;Rave is not generating any foreign keys as part of the default OpenJPA implementation.&lt;/p&gt;

&lt;p&gt;Steps:&lt;br/&gt;
1) Start up Rave using the default H2 database&lt;br/&gt;
2) Log into H2 web console &lt;a href=&quot;http://localhost:11111&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:11111&lt;/a&gt;&lt;br/&gt;
3) Execute: DELETE FROM WIDGET;  COMMIT;&lt;/p&gt;

&lt;p&gt;Step 3 should throw a foreign key constraint error because widget_id is referenced in other tables, but it allows the deletes.  I also verified in an Oracle installation that there are zero foreign key constraints in the schema.  There are primary, check, and unique constraints but no foreign key constraints.&lt;/p&gt;

&lt;p&gt;It appears that the default OpenJPA behavior&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; is to NOT create foreign keys (ugh), but this can be modified with a property:&lt;/p&gt;

&lt;p&gt;&amp;lt;property name=&quot;openjpa.jdbc.MappingDefaults&quot; value=&quot;ForeignKeyDeleteAction=restrict, JoinForeignKeyDeleteAction=restrict&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://openjpa.apache.org/faq.html#FAQ-WhyOpenJPAisnotcreatingforeignkeyconstraintsonthedatabasetables%253F&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://openjpa.apache.org/faq.html#FAQ-WhyOpenJPAisnotcreatingforeignkeyconstraintsonthedatabasetables%253F&lt;/a&gt;&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12560813">RAVE-680</key>
            <summary>Rave is not generating Foreign Keys with default JPA implementation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="carlucci">Tony Carlucci</assignee>
                                    <reporter username="carlucci">Tony Carlucci</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jun 2012 17:59:00 +0000</created>
                <updated>Tue, 7 Aug 2012 17:00:50 +0000</updated>
                            <resolved>Mon, 18 Jun 2012 21:16:46 +0000</resolved>
                                                    <fixVersion>0.13</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13393694" author="jashajoachimsthal" created="Mon, 18 Jun 2012 06:56:38 +0000"  >&lt;p&gt;Please check if you&apos;re able to delete profiles and/or widgets once the foreign keys are in place.&lt;/p&gt;

&lt;p&gt;We have a circular reference: person -&amp;gt; page -&amp;gt; region -&amp;gt; regionwidget -&amp;gt; widget -&amp;gt; person&lt;/p&gt;</comment>
                            <comment id="13395957" author="carlucci" created="Mon, 18 Jun 2012 15:25:08 +0000"  >&lt;p&gt;So far my simple smoke tests are working fine (page manipulation, widget manipulation, etc).  However I am getting errors trying to delete users as some of the data tied to a user is not getting cascaded properly (GROUP_MEMBERS for example) .  I&apos;ll update the code as necessary and make sure to run the full integration test suite before I check in this change.&lt;/p&gt;</comment>
                            <comment id="13396259" author="carlucci" created="Mon, 18 Jun 2012 21:16:46 +0000"  >&lt;p&gt;Fixed and checked in.  Some additional good news - this fix will also apply the Foreign Key constraints to an existing Rave schema as well as a new one.  I verified against an existing Oracle Rave schema that they got applied (it actually found a data issue in our USER_AUTHORITIES table).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>309112</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 22 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1e2y7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>290407</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>