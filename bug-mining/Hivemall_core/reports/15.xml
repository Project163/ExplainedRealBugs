<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:14:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVEMALL-219] NullPointerException in pLSA model</title>
                <link>https://issues.apache.org/jira/browse/HIVEMALL-219</link>
                <project id="12320630" key="HIVEMALL">Hivemall</project>
                    <description>&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I was not able to have pLSA model working on relatively small production workload (5000 docs) with number of reducers &amp;gt; 1.&lt;/p&gt;

&lt;p&gt;It worked with 1000 documents in a single reducer.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I tried Tez or map-reduce engines:&lt;/p&gt;

&lt;p&gt;hive&amp;gt; create table docres as&lt;br/&gt;
&#160;&#160;&#160; &amp;gt; with word_counts as (&lt;br/&gt;
&#160;&#160;&#160; &amp;gt;&#160;&#160; select docid, feature(word, count(word)) as f&lt;br/&gt;
&#160;&#160;&#160; &amp;gt;&#160;&#160; from docs t1 lateral view explode(tokenize(doc, true)) t2 as word&lt;br/&gt;
&#160;&#160;&#160; &amp;gt;&#160;&#160; where not is_stopword(word)&lt;br/&gt;
&#160;&#160;&#160; &amp;gt;&#160;&#160; group by docid, word&lt;br/&gt;
&#160;&#160;&#160; &amp;gt; ),&lt;br/&gt;
&#160;&#160;&#160; &amp;gt; input as (&lt;br/&gt;
&#160;&#160;&#160; &amp;gt;&#160;&#160; select docid, collect_list(f) as features&lt;br/&gt;
&#160;&#160;&#160; &amp;gt;&#160;&#160; from word_counts&lt;br/&gt;
&#160;&#160;&#160; &amp;gt;&#160;&#160; group by docid)&lt;br/&gt;
&#160;&#160;&#160; &amp;gt; select&#160; train_plsa(features, &apos;-topics 20 -iter 10 -s 500 -delta 1 -alpha 500 -eps 1&apos;) as (label, word, prob)&lt;br/&gt;
&#160;&#160;&#160; &amp;gt; from&#160; input;&lt;br/&gt;
Total jobs = 1&lt;br/&gt;
Launching Job 1 out of 1&lt;br/&gt;
Number of reduce tasks not specified. Defaulting to jobconf value of: 4&lt;br/&gt;
In order to change the average load for a reducer (in bytes):&lt;br/&gt;
&#160; set hive.exec.reducers.bytes.per.reducer=&amp;lt;number&amp;gt;&lt;br/&gt;
In order to limit the maximum number of reducers:&lt;br/&gt;
&#160; set hive.exec.reducers.max=&amp;lt;number&amp;gt;&lt;br/&gt;
In order to set a constant number of reducers:&lt;br/&gt;
&#160; set mapreduce.job.reduces=&amp;lt;number&amp;gt;&lt;/p&gt;

&lt;p&gt;Kill Command = /usr/hdp/2.6.1.10-4/hadoop/bin/hadoop job&#160; -kill job_1536748924580_2024&lt;br/&gt;
Hadoop job information for Stage-1: number of mappers: 1; number of reducers: 4&lt;br/&gt;
2018-09-17 19:05:38,300 Stage-1 map = 0%,&#160; reduce = 0%&lt;br/&gt;
2018-09-17 19:05:52,225 Stage-1 map = 35%,&#160; reduce = 0%, Cumulative CPU 10.56 sec&lt;br/&gt;
2018-09-17 19:05:55,428 Stage-1 map = 100%,&#160; reduce = 0%, Cumulative CPU 14.69 sec&lt;br/&gt;
2018-09-17 19:06:01,903 Stage-1 map = 100%,&#160; reduce = 25%, Cumulative CPU 14.69 sec&lt;br/&gt;
2018-09-17 19:06:02,963 Stage-1 map = 100%,&#160; reduce = 0%, Cumulative CPU 14.69 sec&lt;br/&gt;
2018-09-17 19:06:09,433 Stage-1 map = 100%,&#160; reduce = 17%, Cumulative CPU 25.22 sec&lt;br/&gt;
2018-09-17 19:06:12,803 Stage-1 map = 100%,&#160; reduce = 18%, Cumulative CPU 28.45 sec&lt;br/&gt;
2018-09-17 19:06:24,672 Stage-1 map = 100%,&#160; reduce = 19%, Cumulative CPU 41.58 sec&lt;br/&gt;
2018-09-17 19:06:36,482 Stage-1 map = 100%,&#160; reduce = 20%, Cumulative CPU 53.84 sec&lt;br/&gt;
2018-09-17 19:07:16,082 Stage-1 map = 100%,&#160; reduce = 100%, Cumulative CPU 14.69 sec&lt;br/&gt;
MapReduce Total cumulative CPU time: 14 seconds 690 msec&lt;br/&gt;
Ended Job = job_1536748924580_2024 with errors&lt;br/&gt;
Error during job, obtaining debugging information...&lt;br/&gt;
Examining task ID: task_1536748924580_2024_m_000000 (and more) from job job_1536748924580_2024&lt;br/&gt;
Examining task ID: task_1536748924580_2024_r_000003 (and more) from job job_1536748924580_2024&lt;br/&gt;
Examining task ID: task_1536748924580_2024_r_000001 (and more) from job job_1536748924580_2024&lt;/p&gt;

&lt;p&gt;Task with the most failures(10):&lt;/p&gt;
&lt;hr /&gt;

&lt;hr /&gt;
&lt;p&gt;Diagnostic Messages for this Task:&lt;br/&gt;
Error: java.lang.RuntimeException: Hive Runtime Error while closing operators: null&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.hadoop.hive.ql.exec.mr.ExecReducer.close(ExecReducer.java:286)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:453)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:392)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.hadoop.mapred.YarnChild$2.run(YarnChild.java:170)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; at javax.security.auth.Subject.doAs(Subject.java:422)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1866)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.hadoop.mapred.YarnChild.main(YarnChild.java:164)&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; at hivemall.topicmodel.ProbabilisticTopicModelBaseUDTF.finalizeTraining(ProbabilisticTopicModelBaseUDTF.java:277)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; at hivemall.topicmodel.ProbabilisticTopicModelBaseUDTF.close(ProbabilisticTopicModelBaseUDTF.java:270)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.hadoop.hive.ql.exec.UDTFOperator.closeOp(UDTFOperator.java:145)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.hadoop.hive.ql.exec.Operator.close(Operator.java:620)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.hadoop.hive.ql.exec.Operator.close(Operator.java:634)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.hadoop.hive.ql.exec.Operator.close(Operator.java:634)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.hadoop.hive.ql.exec.Operator.close(Operator.java:634)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.hadoop.hive.ql.exec.Operator.close(Operator.java:634)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; at org.apache.hadoop.hive.ql.exec.mr.ExecReducer.close(ExecReducer.java:278)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; ... 7 more&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;JAR :hivemall-all-0.5.0-incubating.jar&lt;/p&gt;</description>
                <environment></environment>
        <key id="13185611">HIVEMALL-219</key>
            <summary>NullPointerException in pLSA model</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="myui">Makoto Yui</assignee>
                                    <reporter username="jsocsmao">jsocsmao</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Sep 2018 19:12:56 +0000</created>
                <updated>Tue, 18 Sep 2018 10:50:00 +0000</updated>
                            <resolved>Tue, 18 Sep 2018 10:47:27 +0000</resolved>
                                    <version>0.5.0</version>
                                    <fixVersion>0.5.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16618409" author="myui" created="Tue, 18 Sep 2018 02:51:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=takuti&quot; class=&quot;user-hover&quot; rel=&quot;takuti&quot;&gt;takuti&lt;/a&gt; Could you take a look?&lt;/p&gt;</comment>
                            <comment id="16618914" author="myui" created="Tue, 18 Sep 2018 10:47:27 +0000"  >&lt;p&gt;Fixed in the trunk.&lt;/p&gt;

&lt;p&gt;This problem causes when no training data is feeded in a particular worker.&lt;/p&gt;</comment>
                            <comment id="16618917" author="myui" created="Tue, 18 Sep 2018 10:49:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jsocsmao&quot; class=&quot;user-hover&quot; rel=&quot;jsocsmao&quot;&gt;jsocsmao&lt;/a&gt; Please use the latest master.&#160; &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
# JDK 7 is required &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; packaging
export JAVA_HOME=`/usr/libexec/java_home -v 1.7`

# Java 8 is required &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; building Spark 2.2 module
export JAVA8_HOME=`/usr/libexec/java_home -v 1.8`

# Try to create artifacts
export MAVEN_OPTS=-XX:MaxPermSize=256m

# Build jars on target/
bin/build.sh
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13183560">HIVEMALL-218</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13056899">HIVEMALL-91</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 8 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3y6gn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>