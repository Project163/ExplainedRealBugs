diff --git a/vault-core/src/main/java/org/apache/jackrabbit/vault/fs/impl/io/FolderArtifactHandler.java b/vault-core/src/main/java/org/apache/jackrabbit/vault/fs/impl/io/FolderArtifactHandler.java
index 8935980e..ea75bb2d 100644
--- a/vault-core/src/main/java/org/apache/jackrabbit/vault/fs/impl/io/FolderArtifactHandler.java
+++ b/vault-core/src/main/java/org/apache/jackrabbit/vault/fs/impl/io/FolderArtifactHandler.java
@@ -92,6 +92,9 @@ public class FolderArtifactHandler extends AbstractArtifactHandler {
             }
 
             Node node = parent.getNode(dir.getRelativePath());
+            if (wspFilter.contains(node.getPath()) && !nodeType.equals(node.getPrimaryNodeType().getName())) {
+                node = modifyPrimaryType(node, info);
+            }
             NodeIterator iter = node.getNodes();
             while (iter.hasNext()) {
                 Node child = iter.nextNode();
@@ -124,4 +127,34 @@ public class FolderArtifactHandler extends AbstractArtifactHandler {
         return info;
     }
 
+    private Node modifyPrimaryType(Node node, ImportInfoImpl info) throws RepositoryException {
+        String name = node.getName();
+        Node parent = node.getParent();
+
+        // check versionable
+        ensureCheckedOut(node, info);
+
+        ChildNodeStash recovery = new ChildNodeStash(node.getSession());
+        recovery.stashChildren(node);
+        node.remove();
+        
+        // now create the new node
+        Node newNode = parent.addNode(name, nodeType);
+        info.onReplaced(newNode.getPath());
+        // move the children back
+        recovery.recoverChildren(newNode, info);
+        return newNode;
+    }
+
+    private void ensureCheckedOut(Node node, ImportInfoImpl info) throws RepositoryException {
+        boolean isCheckedOut = !node.isNodeType(JcrConstants.MIX_VERSIONABLE) || node.isCheckedOut();
+        if (!isCheckedOut) {
+            info.registerToVersion(node.getPath());
+            try {
+                node.checkout();
+            } catch (RepositoryException e) {
+                info.log.warn("error while checkout node (ignored)", e);
+            }
+        }
+    }
 }
\ No newline at end of file
diff --git a/vault-core/src/test/java/org/apache/jackrabbit/vault/packaging/integration/IntegrationTestBase.java b/vault-core/src/test/java/org/apache/jackrabbit/vault/packaging/integration/IntegrationTestBase.java
index 4d69ea4c..89ff39d2 100644
--- a/vault-core/src/test/java/org/apache/jackrabbit/vault/packaging/integration/IntegrationTestBase.java
+++ b/vault-core/src/test/java/org/apache/jackrabbit/vault/packaging/integration/IntegrationTestBase.java
@@ -36,6 +36,7 @@ import java.util.jar.JarFile;
 
 import javax.jcr.Node;
 import javax.jcr.NodeIterator;
+import javax.jcr.PathNotFoundException;
 import javax.jcr.Property;
 import javax.jcr.Repository;
 import javax.jcr.RepositoryException;
@@ -502,6 +503,12 @@ public class IntegrationTestBase  {
         }
     }
 
+    public void assertNodeHasPrimaryType(String path, String primaryType) throws PathNotFoundException, RepositoryException {
+        Node node = admin.getNode(path);
+        assertNotNull("Node at '" + path + "' must exist", node);
+        assertEquals("Node at '" + path + "' does not have the expected node type", primaryType, node.getPrimaryNodeType().getName());
+    }
+
     public void createNodes(Node parent, int maxDepth, int nodesPerFolder) throws RepositoryException {
         for (int i=0; i<nodesPerFolder; i++) {
             Node n = parent.addNode("n" + i, "nt:folder");
diff --git a/vault-core/src/test/java/org/apache/jackrabbit/vault/packaging/integration/TestFolderArtifactHandler.java b/vault-core/src/test/java/org/apache/jackrabbit/vault/packaging/integration/TestFolderArtifactHandler.java
new file mode 100644
index 00000000..63271db2
--- /dev/null
+++ b/vault-core/src/test/java/org/apache/jackrabbit/vault/packaging/integration/TestFolderArtifactHandler.java
@@ -0,0 +1,76 @@
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+package org.apache.jackrabbit.vault.packaging.integration;
+
+import static org.junit.Assert.assertEquals;
+
+import java.io.IOException;
+
+import javax.jcr.Node;
+import javax.jcr.RepositoryException;
+
+import org.apache.jackrabbit.vault.packaging.PackageException;
+import org.apache.jackrabbit.vault.packaging.VaultPackage;
+import org.junit.Test;
+
+public class TestFolderArtifactHandler extends IntegrationTestBase {
+
+    /* JCRVLT-415 */
+    @Test
+    public void testModifyingContainedNodeNonNtFolderPrimaryType() throws RepositoryException, IOException, PackageException {
+        // create node "/test/foo" with node type "nt:unstructured"
+        Node rootNode = admin.getRootNode();
+        Node testNode = rootNode.addNode("testroot", "nt:unstructured");
+        Node fooNode = testNode.addNode("foo", "nt:unstructured");
+        fooNode.setProperty("testProperty", "test");
+        try (VaultPackage vltPackage = extractVaultPackage("/test-packages/folder-without-docview-element.zip")) {
+            // make sure the primary type from "/test/foo" got overwritten!
+            assertPropertyMissing("/testroot/foo/testProperty");
+            assertNodeHasPrimaryType("/testroot/foo", "nt:folder");
+        }
+    }
+
+    @Test
+    public void testNotModifyingContainedNodeNtFolderPrimaryType() throws RepositoryException, IOException, PackageException {
+        // create node "/test/foo" with node type "nt:unstructured"
+        Node rootNode = admin.getRootNode();
+        Node testNode = rootNode.addNode("testroot", "nt:unstructured");
+        Node fooNode = testNode.addNode("foo", "nt:folder");
+        String oldId = fooNode.getIdentifier();
+        try (VaultPackage vltPackage = extractVaultPackage("/test-packages/folder-without-docview-element.zip")) {
+            assertNodeHasPrimaryType("/testroot/foo", "nt:folder");
+            assertPropertyMissing("/testroot/value");
+            assertEquals(oldId, admin.getNode("/testroot/foo").getIdentifier());
+        }
+    }
+
+    @Test
+    public void testNotModifyingIntermediateNodePrimaryType() throws RepositoryException, IOException, PackageException {
+        // create node "/test/foo" with node type "nt:unstructured"
+        Node rootNode = admin.getRootNode();
+        Node testNode = rootNode.addNode("var", "nt:unstructured");
+        //assertNodeMissing("/test2/foo");
+        Node fooNode = testNode.addNode("foo", "nt:unstructured");
+        assertNodeHasPrimaryType("/var/foo", "nt:unstructured");
+        fooNode.setProperty("testProperty", "test");
+        try (VaultPackage vltPackage = extractVaultPackage("/test-packages/folder-without-docview-element.zip")) {
+            assertNodeHasPrimaryType("/var/foo", "nt:unstructured");
+            assertProperty("/var/foo/testProperty", "test");
+        }
+    }
+}
diff --git a/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/META-INF/MANIFEST.MF b/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/META-INF/MANIFEST.MF
new file mode 100644
index 00000000..ce009370
--- /dev/null
+++ b/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/META-INF/MANIFEST.MF
@@ -0,0 +1,5 @@
+Manifest-Version: 1.0
+Content-Package-Id: my_packages:test
+Content-Package-Roots: /test
+Content-Package-Type: content
+
diff --git a/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/META-INF/vault/config.xml b/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/META-INF/vault/config.xml
new file mode 100644
index 00000000..b525f1c5
--- /dev/null
+++ b/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/META-INF/vault/config.xml
@@ -0,0 +1,93 @@
+<!--
+  Licensed to the Apache Software Foundation (ASF) under one or more
+  contributor license agreements.  See the NOTICE file distributed with
+  this work for additional information regarding copyright ownership.
+  The ASF licenses this file to You under the Apache License, Version 2.0
+  (the "License"); you may not use this file except in compliance with
+  the License.  You may obtain a copy of the License at
+
+       http://www.apache.org/licenses/LICENSE-2.0
+
+  Unless required by applicable law or agreed to in writing, software
+  distributed under the License is distributed on an "AS IS" BASIS,
+  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+  See the License for the specific language governing permissions and
+  limitations under the License.
+  -->
+<vaultfs version="1.1">
+    <!--
+        Defines the content aggregation. The order of the defined aggregates
+        is important for finding the correct aggregator.
+    -->
+    <aggregates>
+        <!--
+            Defines an aggregate that handles nt:file and nt:resource nodes.
+        -->
+        <aggregate type="file" title="File Aggregate"/>
+
+        <!--
+            Defines an aggregate that handles file/folder like nodes. It matches
+            all nt:hierarchyNode nodes that have or define a jcr:content
+            child node and excludes child nodes that are nt:hierarchyNodes.
+        -->
+        <aggregate type="filefolder" title="File/Folder Aggregate"/>
+
+        <!--
+            Defines an aggregate that handles nt:nodeType nodes and serializes
+            them into .cnd notation.
+        -->
+        <aggregate type="nodetype" title="Node Type Aggregate" />
+
+        <!--
+            Defines an aggregate that defines full coverage for certain node
+            types that cannot be covered by the default aggregator.
+        -->
+        <aggregate type="full" title="Full Coverage Aggregate">
+            <matches>
+                <include nodeType="rep:AccessControl" respectSupertype="true" />
+                <include nodeType="rep:Policy" respectSupertype="true" />
+                <include nodeType="cq:Widget" respectSupertype="true" />
+                <include nodeType="cq:EditConfig" respectSupertype="true" />
+                <include nodeType="cq:WorkflowModel" respectSupertype="true" />
+                <include nodeType="vlt:FullCoverage" respectSupertype="true" />
+                <include nodeType="mix:language" respectSupertype="true" />
+                <include nodeType="sling:OsgiConfig" respectSupertype="true" />
+            </matches>
+        </aggregate>
+
+        <!--
+            Defines an aggregate that handles nt:folder like nodes.
+        -->
+        <aggregate type="generic" title="Folder Aggregate">
+            <matches>
+                <include nodeType="nt:folder" respectSupertype="true" />
+            </matches>
+            <contains>
+                <exclude isNode="true" />
+            </contains>
+        </aggregate>
+
+        <!--
+            Defines the default aggregate
+        -->
+        <aggregate type="generic" title="Default Aggregator" isDefault="true">
+            <matches>
+                <!-- all -->
+            </matches>
+            <contains>
+                <exclude nodeType="nt:hierarchyNode" respectSupertype="true" />
+            </contains>
+        </aggregate>
+
+    </aggregates>
+
+    <!--
+      defines the input handlers
+    -->
+    <handlers>
+        <handler type="folder"/>
+        <handler type="file"/>
+        <handler type="nodetype"/>
+        <handler type="generic"/>
+    </handlers>
+</vaultfs>
diff --git a/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/META-INF/vault/definition/.content.xml b/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/META-INF/vault/definition/.content.xml
new file mode 100644
index 00000000..bfe893cd
--- /dev/null
+++ b/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/META-INF/vault/definition/.content.xml
@@ -0,0 +1,25 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<jcr:root xmlns:vlt="http://www.day.com/jcr/vault/1.0" xmlns:jcr="http://www.jcp.org/jcr/1.0" xmlns:nt="http://www.jcp.org/jcr/nt/1.0"
+    jcr:created="{Date}2020-02-24T22:42:03.705Z"
+    jcr:createdBy="admin"
+    jcr:description=""
+    jcr:lastModified="{Date}2020-02-24T22:42:03.705Z"
+    jcr:lastModifiedBy="admin"
+    jcr:primaryType="vlt:PackageDefinition"
+    buildCount="1"
+    builtWith="Adobe Experience Manager-6.5.0"
+    group="my_packages"
+    lastUnwrapped="{Date}2020-02-24T22:42:03.705Z"
+    lastUnwrappedBy="admin"
+    lastWrapped="{Date}2020-02-24T22:42:03.705Z"
+    lastWrappedBy="admin"
+    name="test"
+    version="">
+    <filter jcr:primaryType="nt:unstructured">
+        <f0
+            jcr:primaryType="nt:unstructured"
+            mode="replace"
+            root="/test"
+            rules="[]"/>
+    </filter>
+</jcr:root>
diff --git a/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/META-INF/vault/filter.xml b/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/META-INF/vault/filter.xml
new file mode 100644
index 00000000..365b0e01
--- /dev/null
+++ b/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/META-INF/vault/filter.xml
@@ -0,0 +1,5 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<workspaceFilter version="1.0">
+    <filter root="/testroot"/>
+    <filter root="/var/foo/bar"/>
+</workspaceFilter>
diff --git a/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/META-INF/vault/nodetypes.cnd b/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/META-INF/vault/nodetypes.cnd
new file mode 100644
index 00000000..b4da1883
--- /dev/null
+++ b/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/META-INF/vault/nodetypes.cnd
@@ -0,0 +1,17 @@
+<'sling'='http://sling.apache.org/jcr/sling/1.0'>
+<'nt'='http://www.jcp.org/jcr/nt/1.0'>
+<'rep'='internal'>
+
+[sling:OrderedFolder] > sling:Folder
+  orderable
+  + * (nt:base) = sling:OrderedFolder version
+
+[sling:Folder] > nt:folder
+  - * (undefined) multiple
+  - * (undefined)
+  + * (nt:base) = sling:Folder version
+
+[rep:RepoAccessControllable]
+  mixin
+  + rep:repoPolicy (rep:Policy) protected ignore
+
diff --git a/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/META-INF/vault/properties.xml b/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/META-INF/vault/properties.xml
new file mode 100644
index 00000000..3e74f568
--- /dev/null
+++ b/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/META-INF/vault/properties.xml
@@ -0,0 +1,19 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
+<properties>
+<comment>FileVault Package Properties</comment>
+<entry key="description"></entry>
+<entry key="packageType">content</entry>
+<entry key="lastWrappedBy">admin</entry>
+<entry key="packageFormatVersion">2</entry>
+<entry key="group">my_packages</entry>
+<entry key="created">2020-02-24T22:42:03.819Z</entry>
+<entry key="lastModifiedBy">admin</entry>
+<entry key="buildCount">1</entry>
+<entry key="lastWrapped">2020-02-24T22:42:03.705Z</entry>
+<entry key="version"></entry>
+<entry key="dependencies"></entry>
+<entry key="createdBy">admin</entry>
+<entry key="name">test</entry>
+<entry key="lastModified">2020-02-24T22:42:03.705Z</entry>
+</properties>
diff --git a/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/jcr_root/testroot/.content.xml b/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/jcr_root/testroot/.content.xml
new file mode 100644
index 00000000..b51ae1af
--- /dev/null
+++ b/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/jcr_root/testroot/.content.xml
@@ -0,0 +1,5 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<jcr:root xmlns:jcr="http://www.jcp.org/jcr/1.0" xmlns:nt="http://www.jcp.org/jcr/nt/1.0"
+    jcr:primaryType="nt:unstructured">
+    <foo />
+</jcr:root>
diff --git a/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/jcr_root/testroot/foo/bar/.content.xml b/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/jcr_root/testroot/foo/bar/.content.xml
new file mode 100644
index 00000000..78907058
--- /dev/null
+++ b/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/jcr_root/testroot/foo/bar/.content.xml
@@ -0,0 +1,5 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<jcr:root xmlns:jcr="http://www.jcp.org/jcr/1.0" xmlns:nt="http://www.jcp.org/jcr/nt/1.0"
+    jcr:primaryType="sling:Folder">
+    
+</jcr:root>
diff --git a/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/jcr_root/testroot/foo/bar/baz/.content.xml b/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/jcr_root/testroot/foo/bar/baz/.content.xml
new file mode 100644
index 00000000..b5746e01
--- /dev/null
+++ b/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/jcr_root/testroot/foo/bar/baz/.content.xml
@@ -0,0 +1,3 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<jcr:root xmlns:sling="http://sling.apache.org/jcr/sling/1.0" xmlns:jcr="http://www.jcp.org/jcr/1.0"
+    jcr:primaryType="sling:OrderedFolder"/>
diff --git a/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/jcr_root/var/.content.xml b/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/jcr_root/var/.content.xml
new file mode 100644
index 00000000..b51ae1af
--- /dev/null
+++ b/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/jcr_root/var/.content.xml
@@ -0,0 +1,5 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<jcr:root xmlns:jcr="http://www.jcp.org/jcr/1.0" xmlns:nt="http://www.jcp.org/jcr/nt/1.0"
+    jcr:primaryType="nt:unstructured">
+    <foo />
+</jcr:root>
diff --git a/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/jcr_root/var/foo/bar/.content.xml b/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/jcr_root/var/foo/bar/.content.xml
new file mode 100644
index 00000000..78907058
--- /dev/null
+++ b/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/jcr_root/var/foo/bar/.content.xml
@@ -0,0 +1,5 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<jcr:root xmlns:jcr="http://www.jcp.org/jcr/1.0" xmlns:nt="http://www.jcp.org/jcr/nt/1.0"
+    jcr:primaryType="sling:Folder">
+    
+</jcr:root>
diff --git a/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/jcr_root/var/foo/bar/baz/.content.xml b/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/jcr_root/var/foo/bar/baz/.content.xml
new file mode 100644
index 00000000..b5746e01
--- /dev/null
+++ b/vault-core/src/test/resources/test-packages/folder-without-docview-element.zip/jcr_root/var/foo/bar/baz/.content.xml
@@ -0,0 +1,3 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<jcr:root xmlns:sling="http://sling.apache.org/jcr/sling/1.0" xmlns:jcr="http://www.jcp.org/jcr/1.0"
+    jcr:primaryType="sling:OrderedFolder"/>
