diff --git a/vault-core/pom.xml b/vault-core/pom.xml
index 5c078845..ca9af637 100644
--- a/vault-core/pom.xml
+++ b/vault-core/pom.xml
@@ -241,7 +241,7 @@
     <!-- ====================================================================== -->
     <profiles>
         <profile>
-            <id>oak</id>
+            <id>test-oak</id>
             <build>
                 <plugins>
                     <plugin>
@@ -253,6 +253,58 @@
                 </plugins>
             </build>
         </profile>
+        <profile>
+            <id>test-jackrabbit</id>
+            <build>
+                <plugins>
+                    <plugin>
+                        <artifactId>maven-surefire-plugin</artifactId>
+                        <configuration>
+                            <argLine>-Doak=true -Xmx1024m</argLine>
+                        </configuration>
+                    </plugin>
+                </plugins>
+            </build>
+        </profile>
+        <profile>
+            <id>test-both</id>
+            <activation>
+                <activeByDefault>true</activeByDefault>
+            </activation>
+            <build>
+                <plugins>
+                    <plugin>
+                        <artifactId>maven-surefire-plugin</artifactId>
+                        <configuration>
+                            <skip>true</skip>
+                        </configuration>
+                        <executions>
+                            <execution>
+                                <id>oak</id>
+                                <goals>
+                                    <goal>test</goal>
+                                </goals>
+                                <configuration>
+                                    <argLine>-Doak=true -Xmx1024m</argLine>
+                                    <reportNameSuffix>OAK</reportNameSuffix>
+                                    <skip>false</skip>
+                                </configuration>
+                            </execution>
+                            <execution>
+                                <id>jr</id>
+                                <goals>
+                                    <goal>test</goal>
+                                </goals>
+                                <configuration>
+                                    <reportNameSuffix>JR</reportNameSuffix>
+                                    <skip>false</skip>
+                                </configuration>
+                            </execution>
+                        </executions>
+                    </plugin>
+                </plugins>
+            </build>
+        </profile>
     </profiles>
 
 </project>
diff --git a/vault-core/src/test/java/org/apache/jackrabbit/vault/packaging/impl/AdminPermissionCheckerTest.java b/vault-core/src/test/java/org/apache/jackrabbit/vault/packaging/impl/AdminPermissionCheckerTest.java
index 05cab4a5..c845b2d0 100644
--- a/vault-core/src/test/java/org/apache/jackrabbit/vault/packaging/impl/AdminPermissionCheckerTest.java
+++ b/vault-core/src/test/java/org/apache/jackrabbit/vault/packaging/impl/AdminPermissionCheckerTest.java
@@ -48,6 +48,7 @@ public class AdminPermissionCheckerTest extends IntegrationTestBase {
     @After
     public void after() throws RepositoryException {
         JackrabbitSession jackrabbitSession = (JackrabbitSession) admin;
+        jackrabbitSession.refresh(false);
         Authorizable vip = jackrabbitSession.getUserManager().getAuthorizable(TEST_USER);
         if (vip != null) {
             vip.remove();
diff --git a/vault-core/src/test/java/org/apache/jackrabbit/vault/packaging/integration/IntegrationTestBase.java b/vault-core/src/test/java/org/apache/jackrabbit/vault/packaging/integration/IntegrationTestBase.java
index 51090b88..0ed116bd 100644
--- a/vault-core/src/test/java/org/apache/jackrabbit/vault/packaging/integration/IntegrationTestBase.java
+++ b/vault-core/src/test/java/org/apache/jackrabbit/vault/packaging/integration/IntegrationTestBase.java
@@ -36,6 +36,7 @@ import java.util.jar.JarFile;
 
 import javax.jcr.Node;
 import javax.jcr.NodeIterator;
+import javax.jcr.Property;
 import javax.jcr.Repository;
 import javax.jcr.RepositoryException;
 import javax.jcr.Session;
@@ -462,6 +463,18 @@ public class IntegrationTestBase  {
         assertFalse(path + " should not exist", admin.propertyExists(path));
     }
 
+    public void assertPropertyMissingOrEmpty(String path) throws RepositoryException {
+        if (!admin.propertyExists(path)) {
+            return;
+        }
+        Property p = admin.getProperty(path);
+        if (p.isMultiple()) {
+            assertTrue(path + " should not exist or be empty", p.getValues().length == 0);
+        } else {
+            assertTrue(path + " should not exist or be empty", p.getString().length() == 0);
+        }
+    }
+
     public void createNodes(Node parent, int maxDepth, int nodesPerFolder) throws RepositoryException {
         for (int i=0; i<nodesPerFolder; i++) {
             Node n = parent.addNode("n" + i, "nt:folder");
diff --git a/vault-core/src/test/java/org/apache/jackrabbit/vault/util/RCPTest.java b/vault-core/src/test/java/org/apache/jackrabbit/vault/util/RCPTest.java
index e1e7004d..3ac32429 100644
--- a/vault-core/src/test/java/org/apache/jackrabbit/vault/util/RCPTest.java
+++ b/vault-core/src/test/java/org/apache/jackrabbit/vault/util/RCPTest.java
@@ -114,6 +114,7 @@ public class RCPTest extends IntegrationTestBase {
         admin.save();
         // removing a mixing should remove the undeclared properties
         assertPropertyMissing(SRC_TEST_NODE_PATH + "/jcr:title");
+        assertPropertyMissingOrEmpty(SRC_TEST_NODE_PATH + "/jcr:mixinTypes");
 
         rcp = new RepositoryCopier();
         rcp.setOnlyNewer(false);
@@ -121,8 +122,8 @@ public class RCPTest extends IntegrationTestBase {
         rcp.copy(admin, SRC_PATH, admin, DST_PATH, true);
 
         assertNodeExists(DST_TEST_NODE_PATH);
-        assertPropertyMissing(DST_TEST_NODE_PATH + "/jcr:mixinTypes");
         assertPropertyMissing(DST_TEST_NODE_PATH + "/jcr:title");
+        assertPropertyMissingOrEmpty(DST_TEST_NODE_PATH + "/jcr:mixinTypes");
     }
 
     @Test
@@ -209,7 +210,7 @@ public class RCPTest extends IntegrationTestBase {
         // property should still be the old value, since src is not "newer"
         assertProperty(DST_TEST_NODE_PATH + "/jcr:content/p0", "0");
         // mixin should already be gone, since file does not have a lastModified.
-        assertPropertyMissing(DST_TEST_NODE_PATH + "/jcr:mixinTypes");
+        assertPropertyMissingOrEmpty(DST_TEST_NODE_PATH + "/jcr:mixinTypes");
         assertPropertyMissing(DST_TEST_NODE_PATH + "/jcr:title");
 
         // now update last modified
