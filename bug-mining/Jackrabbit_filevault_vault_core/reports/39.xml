<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:32:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JCRVLT-94] [AccessControlHandling] Unexpected behavior of acHandling &apos;merge&apos;</title>
                <link>https://issues.apache.org/jira/browse/JCRVLT-94</link>
                <project id="12314920" key="JCRVLT">Jackrabbit FileVault</project>
                    <description>&lt;p&gt;As per the document &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;, the AccessControlHandling for &apos;merge&apos; should be merging access control provided with the package with the one in the content by replacing the access control entries of corresponding principals (i.e. package first).&lt;br/&gt;
This means if the package contains ACEs for a principal P, it should  remove all the ACEs for that principal in the content and add the ones in the package.&lt;/p&gt;

&lt;p&gt;However, I am not seeing this expected behavior. The behavior I am seeing is as follows:&lt;br/&gt;
&#8216;merge&#8217; - Merges access control in the content with the one provided with the package by adding the access control entries of principals not present in the content but not removing the ones not present in the package.&lt;/p&gt;

&lt;p&gt;So for instance ACLs &#8220;jcr:read,jcr:versionManagement,rep:write&#8221; to forms-users exists in CRX at &#8216;/content/apps/cm&#8217; &lt;span class=&quot;error&quot;&gt;&amp;#91;PFA &amp;#39;CreateInitialTestScenario.zip&amp;#39; to create these ACLs in crx&amp;#93;&lt;/span&gt;. And now if we change the ACLs for the same user/group and path to &#8220;rep:write,crx:replicate&#8221; and install our package,  a union of ACLs is seen i.e. &#8220;jcr:read,jcr:versionManagement,rep:write,crx:replicate&#8221; to forms-users at &#8216;/content/apps/cm&#8217;.&lt;br/&gt;
Please find attached package &apos;TestACHandling (2).zip&apos; containing the ACLs - &#8220;rep:write,crx:replicate&#8221; for forms-users group and path &#8216;/content/apps/cm&#8217; &lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; : &lt;a href=&quot;https://docs.adobe.com/docs/en/aem/6-0/develop/ref/javadoc/org/apache/jackrabbit/vault/fs/io/AccessControlHandling.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.adobe.com/docs/en/aem/6-0/develop/ref/javadoc/org/apache/jackrabbit/vault/fs/io/AccessControlHandling.html&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12834214">JCRVLT-94</key>
            <summary>[AccessControlHandling] Unexpected behavior of acHandling &apos;merge&apos;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tripod">Tobias Bocanegra</assignee>
                                    <reporter username="anshika">Anshika Agarwal</reporter>
                        <labels>
                    </labels>
                <created>Mon, 1 Jun 2015 11:54:16 +0000</created>
                <updated>Mon, 28 Sep 2015 16:22:53 +0000</updated>
                            <resolved>Tue, 2 Jun 2015 18:35:49 +0000</resolved>
                                    <version>3.1.18</version>
                                    <fixVersion>3.1.24</fixVersion>
                                    <component>vlt</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14567505" author="tripod" created="Mon, 1 Jun 2015 16:18:45 +0000"  >&lt;p&gt;the API docs explain it quite nice:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://jackrabbit.apache.org/filevault/apidocs/org/apache/jackrabbit/vault/fs/io/AccessControlHandling.html#MERGE&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jackrabbit.apache.org/filevault/apidocs/org/apache/jackrabbit/vault/fs/io/AccessControlHandling.html#MERGE&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Content ACL:
     everyone, deny, jcr:all
     bob, allow, jcr:read
     bob, allow, jcr:write
 
Package ACL:
     bob, deny, jcr:all
     alice, allow, jcr:read
 
Result ACL:
     everyone, deny, jcr:all
     bob, deny, jcr:all
     alice, allow, jcr:read
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;so you are saying that if bob has: allow jcr:verisonManagement, it will be added to the other permissions and not replaced? ie:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Content ACL:
     everyone, deny, jcr:all
     bob, allow, jcr:read
     bob, allow, jcr:write
 
Package ACL:
     bob, allow, jcr:versionManagement
     alice, allow, jcr:read
 
Result ACL:
     everyone, deny, jcr:all
     bob, allow, jcr:read
     bob, allow, jcr:write
     bob, allow, jcr:versionManagement
     alice, allow, jcr:read
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Can you please provide 2 test packages: 1 for creating the initial test content, and 1 that shows the erratic behavior?&lt;/p&gt;</comment>
                            <comment id="14568564" author="tripod" created="Tue, 2 Jun 2015 05:36:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anshika&quot; class=&quot;user-hover&quot; rel=&quot;anshika&quot;&gt;anshika&lt;/a&gt; can you also include a package with the initial content?&lt;/p&gt;</comment>
                            <comment id="14569497" author="tripod" created="Tue, 2 Jun 2015 17:57:03 +0000"  >&lt;p&gt;can reproduce. added test case in r1683152&lt;/p&gt;</comment>
                            <comment id="14569542" author="tripod" created="Tue, 2 Jun 2015 18:35:49 +0000"  >&lt;p&gt;fixed in r1683155&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12736747" name="CreateInitialTestScenario.zip" size="5727" author="anshika" created="Tue, 2 Jun 2015 05:41:31 +0000"/>
                            <attachment id="12736743" name="TestACHandling (2).zip" size="5725" author="anshika" created="Tue, 2 Jun 2015 05:27:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 24 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2fgbb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>