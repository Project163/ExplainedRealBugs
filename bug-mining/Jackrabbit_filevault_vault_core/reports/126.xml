<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:33:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JCRVLT-255] ImportModes act on file serialization level not on node level</title>
                <link>https://issues.apache.org/jira/browse/JCRVLT-255</link>
                <project id="12314920" key="JCRVLT">Jackrabbit FileVault</project>
                    <description>&lt;p&gt;When reading the docs at &lt;a href=&quot;http://jackrabbit.apache.org/filevault/importmode.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jackrabbit.apache.org/filevault/importmode.html&lt;/a&gt; I would assume that for &lt;tt&gt;ImportMode.MERGE&lt;/tt&gt; the merging happens on node level (i.e. indepent of the actual serialization format). Unfortunately this is not the case: If I have a serialized docview &lt;tt&gt;.content.xml&lt;/tt&gt; file covering the current node and three levels below the merging is not done if the entry node level does already exist in the repository, although not all child nodes are in the repository yet.&lt;/p&gt;

&lt;p&gt;This is due to the guard in &lt;a href=&quot;https://github.com/apache/jackrabbit-filevault/blob/8b2fedaf329b3bf4a049e41563c0bc83487406f7/vault-core/src/main/java/org/apache/jackrabbit/vault/fs/impl/io/FileArtifactHandler.java#L226&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-filevault/blob/8b2fedaf329b3bf4a049e41563c0bc83487406f7/vault-core/src/main/java/org/apache/jackrabbit/vault/fs/impl/io/FileArtifactHandler.java#L226&lt;/a&gt;. which prevents the DocViewSAXImporter from kicking in, although there are indeed subnodes in the &lt;tt&gt;.content.xml&lt;/tt&gt; which are not yet in the repository.&lt;/p&gt;

&lt;p&gt;Please either fix this behaviour of make the documentation at &lt;a href=&quot;http://jackrabbit.apache.org/filevault/importmode.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jackrabbit.apache.org/filevault/importmode.html&lt;/a&gt; clearer because it explicitly says there:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;It is important to note, that the import mode always operates on entire nodes and subtrees...&lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="13125575">JCRVLT-255</key>
            <summary>ImportModes act on file serialization level not on node level</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Dec 2017 10:00:52 +0000</created>
                <updated>Tue, 25 May 2021 05:17:46 +0000</updated>
                            <resolved>Thu, 20 May 2021 06:07:50 +0000</resolved>
                                                    <fixVersion>3.5.0</fixVersion>
                                    <component>Packaging</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="16301149" author="kwin" created="Fri, 22 Dec 2017 09:11:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tripod&quot; class=&quot;user-hover&quot; rel=&quot;tripod&quot;&gt;tripod&lt;/a&gt; Any comments?&lt;/p&gt;</comment>
                            <comment id="16353532" author="kwin" created="Tue, 6 Feb 2018 08:00:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tripod&quot; class=&quot;user-hover&quot; rel=&quot;tripod&quot;&gt;tripod&lt;/a&gt; Ping?&lt;/p&gt;</comment>
                            <comment id="16353540" author="tripod" created="Tue, 6 Feb 2018 08:06:43 +0000"  >&lt;p&gt;I agree that this is a bug and should be fixed eventually....&lt;/p&gt;</comment>
                            <comment id="16365167" author="tripod" created="Thu, 15 Feb 2018 06:12:05 +0000"  >&lt;p&gt;I looked into the issue and it seems that MERGE is only supported for generic artifacts of authorizable and policy nodes. it also supports merging of entire files.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;but not for file artifacts with content; eg: image.png.dir/.content.xml&lt;/li&gt;
	&lt;li&gt;but not for all generic artifacts&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;since this change would be a bit more complicated and need extensive test and has potentially backward compatibility implications, I decided to more this to the 3.2 release and document  the current behaviour.&lt;/p&gt;</comment>
                            <comment id="17009660" author="kwin" created="Tue, 7 Jan 2020 12:02:43 +0000"  >&lt;p&gt;I added a failing test case in &lt;a href=&quot;https://github.com/kwin/jackrabbit-filevault/tree/bugfix/JCRVLT-255-importmodes-for-docview&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/kwin/jackrabbit-filevault/tree/bugfix/JCRVLT-255-importmodes-for-docview&lt;/a&gt;. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tripod&quot; class=&quot;user-hover&quot; rel=&quot;tripod&quot;&gt;tripod&lt;/a&gt; Could  you check that the test case is correct?&lt;/p&gt;

&lt;p&gt;The wording &quot;Existing content is replaced, new content is added and none is deleted.&quot; is a bit fuzzy to me, as it doesn&apos;t explicitly mention nodes and properties. I translate this to: &quot;New properties are added, existing properties are updated, none are deleted and no existing nodes are deleted (but new child nodes are added)&quot;. Is this understanding correct?&lt;/p&gt;</comment>
                            <comment id="17010249" author="tripod" created="Wed, 8 Jan 2020 01:54:17 +0000"  >&lt;blockquote&gt;&lt;p&gt;I translate this to: &quot;New properties are added, existing properties are updated, none are deleted and no existing nodes are deleted (but new child nodes are added)&quot;. Is this understanding correct?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;yes, but since this would be a backward incompatible change, maybe we should add a &lt;tt&gt;MERGE_PROPERTIES&lt;/tt&gt; mode?&lt;/p&gt;</comment>
                            <comment id="17010396" author="kwin" created="Wed, 8 Jan 2020 06:37:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tripod&quot; class=&quot;user-hover&quot; rel=&quot;tripod&quot;&gt;tripod&lt;/a&gt; Can you help me understand the current semantics of MERGE and UPDATE then? I would like to add test cases for that as well to make sure I don&apos;t break anything.&lt;/p&gt;</comment>
                            <comment id="17010472" author="tripod" created="Wed, 8 Jan 2020 08:35:23 +0000"  >&lt;p&gt;well, it seems that&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;basically, the import mode is applied on artifcats and on policy/principal nodes.&lt;/li&gt;
	&lt;li&gt;merging docview artifacts is not supported. i.e. if you have a &lt;tt&gt;fullcoverage.xml&lt;/tt&gt; it will be ignored&lt;/li&gt;
	&lt;li&gt;merging generic artifcats (eg: dir+.content.xml), will only work on node level, i.e. MERGE and UPDATE handled the same for normal nodes, but special for policy nodes.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;it might be that the special case for docview artifacts is a leftover from older times...so maybe they could be treated like generic files and merge accordingly.&lt;/p&gt;</comment>
                            <comment id="17348079" author="kwin" created="Thu, 20 May 2021 06:07:45 +0000"  >&lt;p&gt;I introduced new import modes in &lt;a href=&quot;https://github.com/apache/jackrabbit-filevault/commit/5f3b1d363da7bcf3c285a0bdbb394254ca3e57d1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-filevault/commit/5f3b1d363da7bcf3c285a0bdbb394254ca3e57d1&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13000372">JCRVLT-124</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13276459">JCRVLT-396</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13000372">JCRVLT-124</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13138875">SLING-7501</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 25 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3o0dz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>