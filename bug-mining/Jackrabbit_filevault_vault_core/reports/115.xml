<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:33:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JCRVLT-488] PlatformNameFormat incorrectly sets repository names for nodes with double colons</title>
                <link>https://issues.apache.org/jira/browse/JCRVLT-488</link>
                <project id="12314920" key="JCRVLT">Jackrabbit FileVault</project>
                    <description>&lt;p&gt;With a node name such as &quot;:oak:mount-libs-nodetype&quot; the &lt;tt&gt;PlatformNameFormat&lt;/tt&gt; class generates a platform name of &lt;tt&gt;_%3aoak_mount-libs-nodetype&lt;/tt&gt;, which looks incorrect : &lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;leading underscore should not be there&lt;/li&gt;
	&lt;li&gt;second underscore should not be there, as it&apos;s not part of a namespace declaration&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13346676">JCRVLT-488</key>
            <summary>PlatformNameFormat incorrectly sets repository names for nodes with double colons</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Dec 2020 22:50:32 +0000</created>
                <updated>Fri, 8 Jan 2021 07:46:15 +0000</updated>
                            <resolved>Fri, 8 Jan 2021 07:46:15 +0000</resolved>
                                    <version>3.4.6</version>
                                    <fixVersion>3.4.8</fixVersion>
                                    <component>vlt</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17251381" author="rombert" created="Thu, 17 Dec 2020 22:55:51 +0000"  >&lt;p&gt;I&apos;ve added some minor cleanups + a failing test at &lt;a href=&quot;https://github.com/apache/jackrabbit-filevault/pull/112&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-filevault/pull/112&lt;/a&gt; . Unfortunately I could not create a fix.&lt;/p&gt;</comment>
                            <comment id="17251656" author="kwin" created="Fri, 18 Dec 2020 10:14:23 +0000"  >&lt;p&gt;According to &lt;a href=&quot;https://jackrabbit.apache.org/filevault/vaultfs.html#Filename_escaping&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jackrabbit.apache.org/filevault/vaultfs.html#Filename_escaping&lt;/a&gt; namespaces are escaped specially. The problem with a node name &lt;tt&gt;:oak:mount-libs-nodetype&lt;/tt&gt; is that &lt;tt&gt;:oak&lt;/tt&gt; is incorrectly detected as namespace prefix. &lt;br/&gt;
Apart from the fact that one may expect something else for the escape rule, is there an actual problem with the escaping?&lt;/p&gt;

&lt;p&gt;As long as the reverse unescaping does not have a problem with it I don&apos;t see a big issue with that.&lt;/p&gt;</comment>
                            <comment id="17254320" author="rombert" created="Wed, 23 Dec 2020 23:30:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; - the mapping and reversal are not symmetric and don&apos;t work as expected - see &lt;a href=&quot;https://github.com/apache/jackrabbit-filevault/pull/112&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-filevault/pull/112&lt;/a&gt; for a failing test .&lt;/p&gt;</comment>
                            <comment id="17254500" author="kwin" created="Thu, 24 Dec 2020 10:40:35 +0000"  >&lt;p&gt;The test does not show that it is not symmetric, but even the generated platform format &lt;tt&gt;&lt;em&gt;%3aoak_mount-libs-nodetype&lt;/tt&gt; is not correctly unescaped back to to repo format, instead it becomes &lt;tt&gt;%3aoak:mount-libs-nodetype&lt;/tt&gt; because the &lt;tt&gt;%3a&lt;/tt&gt; is not unescaped, if it occurs between the first {&lt;/em&gt;} and second &lt;tt&gt;_&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17254529" author="kwin" created="Thu, 24 Dec 2020 12:52:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; What node name is &lt;tt&gt;:oak:mount-libs-nodetype&lt;/tt&gt;?&lt;/p&gt;

&lt;p&gt;According to &lt;a href=&quot;https://docs.adobe.com/content/docs/en/spec/jcr/2.0/3_Repository_Model.html#3.2.5.2%20Qualified%20Form&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.adobe.com/content/docs/en/spec/jcr/2.0/3_Repository_Model.html#3.2.5.2%20Qualified%20Form&lt;/a&gt; neither the prefix nor the local name part is allowed to contain a colon.&lt;/p&gt;</comment>
                            <comment id="17257251" author="kwin" created="Fri, 1 Jan 2021 19:41:33 +0000"  >&lt;p&gt;IMHO &lt;tt&gt;:oak:mount-libs-nodetype&lt;/tt&gt;&#160;is a hidden node (&lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-7910&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/OAK-7910&lt;/a&gt;,&#160;&lt;a href=&quot;https://github.com/apache/jackrabbit-oak/blob/0e9e4ff42fedcead8a923059b477bb08282c448a/oak-store-spi/src/main/java/org/apache/jackrabbit/oak/spi/state/NodeStateUtils.java#L46&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-oak/blob/0e9e4ff42fedcead8a923059b477bb08282c448a/oak-store-spi/src/main/java/org/apache/jackrabbit/oak/spi/state/NodeStateUtils.java#L46&lt;/a&gt;) and not exposed by JCR API (but only the underlying Oak Node Store API). Those nodes should never end up in packages as FileVault acts primarily on top of JCR API.&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;&#160;What is your use case? How did you create the package containing those nodes in the first place?&lt;/p&gt;</comment>
                            <comment id="17259662" author="rombert" created="Wed, 6 Jan 2021 12:18:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; - I&apos;m sort of abusing the &lt;tt&gt;PlatformNameFormat&lt;/tt&gt; to read-write an on-disk structure that is based on FileVault but is not a content package. So it&apos;s not surprising that this edge case was not considered.&lt;/p&gt;

&lt;p&gt;I would be fine with either:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;properly supporting hidden nodes as well&lt;/li&gt;
	&lt;li&gt;failing fast if the node name is illegal&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;but I would obviously prefer the first option, as it would make my life simpler.&lt;/p&gt;</comment>
                            <comment id="17259783" author="kwin" created="Wed, 6 Jan 2021 15:05:00 +0000"  >&lt;p&gt;I am fine with supporting hidden node names as well. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; Can you add backwards-compatible support in your PR and enrich the javadoc accordingly?&lt;/p&gt;</comment>
                            <comment id="17260522" author="rombert" created="Thu, 7 Jan 2021 14:05:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; - I&apos;ll give it another shot. Do you think replacing leading colon characters with the char sequence is ok, given the special use case? &lt;tt&gt;:oak:mount-libs-nodetype&lt;/tt&gt; would be mapped to &lt;tt&gt;%3aoak%3amount-libs-nodetype&lt;/tt&gt;, just like in my failing test.&lt;/p&gt;</comment>
                            <comment id="17260531" author="kwin" created="Thu, 7 Jan 2021 14:17:34 +0000"  >&lt;p&gt;Doesn&apos;t the approach from  &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13018314/13018314_support-hidden-node-names.patch&quot; title=&quot;support-hidden-node-names.patch attached to JCRVLT-488&quot;&gt;support-hidden-node-names.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;  work? IMHO that should be backwards-compatible and support your use-case.&lt;/p&gt;</comment>
                            <comment id="17260535" author="rombert" created="Thu, 7 Jan 2021 14:20:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; - that works very well! Do you want to add it to &lt;a href=&quot;https://github.com/apache/jackrabbit-filevault/pull/112&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-filevault/pull/112&lt;/a&gt; ? Alternatively I can do it and move it before the commit that adds the new test.&lt;/p&gt;</comment>
                            <comment id="17260537" author="kwin" created="Thu, 7 Jan 2021 14:21:37 +0000"  >&lt;p&gt;I would appreciate if you could enhance your PR with that commit.&lt;/p&gt;</comment>
                            <comment id="17260546" author="rombert" created="Thu, 7 Jan 2021 14:31:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; - added and marked ready for review&lt;/p&gt;</comment>
                            <comment id="17261082" author="kwin" created="Fri, 8 Jan 2021 07:46:15 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/jackrabbit-filevault/commit/b254b5a90c4d45bcf388803852f798f761c0427d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-filevault/commit/b254b5a90c4d45bcf388803852f798f761c0427d&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13018314" name="support-hidden-node-names.patch" size="1757" author="kwin" created="Thu, 7 Jan 2021 14:17:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 44 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0lmjs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>