<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:32:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JCRVLT-64] Nodes that have a user parent are not installed if they are in the same .content.xml as their parent</title>
                <link>https://issues.apache.org/jira/browse/JCRVLT-64</link>
                <project id="12314920" key="JCRVLT">Jackrabbit FileVault</project>
                    <description>&lt;p&gt;An artifact for an user node that also contains another child node is not installed correctly. Only the user is installed and not the profile.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;jcr:root xmlns:sling=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//sling.apache.org/jcr/sling/1.0&quot;&lt;/span&gt; xmlns:jcr=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.jcp.org/jcr/1.0&quot;&lt;/span&gt; xmlns:nt=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.jcp.org/jcr/nt/1.0&quot;&lt;/span&gt; xmlns:rep=&lt;span class=&quot;code-quote&quot;&gt;&quot;internal&quot;&lt;/span&gt;
&lt;/span&gt;    jcr:mixinTypes=&lt;span class=&quot;code-quote&quot;&gt;&quot;[rep:AccessControllable]&quot;&lt;/span&gt;
    jcr:primaryType=&lt;span class=&quot;code-quote&quot;&gt;&quot;rep:User&quot;&lt;/span&gt;
    jcr:uuid=&lt;span class=&quot;code-quote&quot;&gt;&quot;0354d89c-28ec-399c-80d3-cb2d094cf093&quot;&lt;/span&gt;
    rep:authorizableId=&lt;span class=&quot;code-quote&quot;&gt;&quot;newuser&quot;&lt;/span&gt;
    rep:password=&lt;span class=&quot;code-quote&quot;&gt;&quot;\{SHA-256}8628e1f645c2073a-1000-9db3a1f8cddca62bbde8aae52832378c061498598ef833aaa209c1c836704db0&quot;&lt;/span&gt;
    rep:principalName=&lt;span class=&quot;code-quote&quot;&gt;&quot;newuser&quot;&lt;/span&gt;&amp;gt;
    &amp;lt;profile
        jcr:primaryType=&lt;span class=&quot;code-quote&quot;&gt;&quot;nt:unstructured&quot;&lt;/span&gt;
        sling:resourceType=&lt;span class=&quot;code-quote&quot;&gt;&quot;cq/security/components/profile&quot;&lt;/span&gt;
        givenName=&lt;span class=&quot;code-quote&quot;&gt;&quot;MM&quot;&lt;/span&gt;&amp;gt;
        &amp;lt;photos/&amp;gt;
    &amp;lt;/profile&amp;gt;
&amp;lt;/jcr:root&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12750185">JCRVLT-64</key>
            <summary>Nodes that have a user parent are not installed if they are in the same .content.xml as their parent</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tripod">Tobias Bocanegra</assignee>
                                    <reporter username="mpetria">Marius Petria</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Oct 2014 20:09:09 +0000</created>
                <updated>Wed, 25 Jul 2018 07:06:12 +0000</updated>
                            <resolved>Mon, 3 Nov 2014 20:45:16 +0000</resolved>
                                                    <fixVersion>3.1.14</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14181875" author="mpetria" created="Thu, 23 Oct 2014 20:12:26 +0000"  >&lt;p&gt;To reproduce the issue one can install newuser.zip which correctly installs the profile (because profile is serialized as a directory) and then the profile.zip which actually deletes the profile instead of updating it (because it is serialized in the same artifact as the user)&lt;/p&gt;</comment>
                            <comment id="14181885" author="mpetria" created="Thu, 23 Oct 2014 20:18:36 +0000"  >&lt;p&gt;The issue seems to be caused by the fact that user nodes are created by JcrSysViewTransformer and the DocViewSAXImporter only adds to the importInfo the user node, and it does not add the children. That leads in the end the profile to be deleted by the ImporterImpl as it is not detected to be already processed.&lt;/p&gt;
</comment>
                            <comment id="14186123" author="tripod" created="Tue, 28 Oct 2014 00:33:54 +0000"  >&lt;p&gt;btw: the filter.xml would cause deletion of all child nodes of the profile node. I don&apos;t think this is intended:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;
&amp;lt;workspaceFilter version=&quot;1.0&quot;&amp;gt;
    &amp;lt;filter root=&quot;/home/users/n/newuser/profile&quot;&amp;gt;
        &amp;lt;include pattern=&quot;/home/users/n/newuser/profile&quot;/&amp;gt;
    &amp;lt;/filter&amp;gt;
&amp;lt;/workspaceFilter&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="14186155" author="tripod" created="Tue, 28 Oct 2014 00:56:31 +0000"  >&lt;p&gt;added test case in r1634757&lt;/p&gt;</comment>
                            <comment id="14191410" author="tripod" created="Fri, 31 Oct 2014 05:48:12 +0000"  >&lt;p&gt;fixed in r1635675&lt;/p&gt;</comment>
                            <comment id="14191755" author="mpetria" created="Fri, 31 Oct 2014 12:42:16 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tripod&quot; class=&quot;user-hover&quot; rel=&quot;tripod&quot;&gt;tripod&lt;/a&gt;, thanks for fixing this.&lt;br/&gt;
I can confirm that the update works now. By looking at the fix and also testing I can say that the creation still does not work. More specifically if you install the profile.zip package directly (when no user exists), the profile is not installed. &lt;/p&gt;</comment>
                            <comment id="14192149" author="tripod" created="Fri, 31 Oct 2014 17:43:35 +0000"  >&lt;p&gt;well, if you try to install a profile of a user that does not exist yet, I don&apos;t think that it should autocreate the user. maybe in a disabled state. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anchela&quot; class=&quot;user-hover&quot; rel=&quot;anchela&quot;&gt;anchela&lt;/a&gt; what do you think?&lt;/p&gt;</comment>
                            <comment id="14194707" author="mpetria" created="Mon, 3 Nov 2014 16:39:48 +0000"  >&lt;p&gt;Note that the user is installed, even the profile is installed but gets deleted before package installation finishes.&lt;/p&gt;</comment>
                            <comment id="14194722" author="anchela" created="Mon, 3 Nov 2014 16:54:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tripod&quot; class=&quot;user-hover&quot; rel=&quot;tripod&quot;&gt;tripod&lt;/a&gt;, i would not autocreate any user/group accounts... but in the example provided by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mpetria&quot; class=&quot;user-hover&quot; rel=&quot;mpetria&quot;&gt;mpetria&lt;/a&gt; the user node and all mandatory properties are provided, aren&apos;t they?&lt;/p&gt;</comment>
                            <comment id="14194808" author="tripod" created="Mon, 3 Nov 2014 18:08:06 +0000"  >&lt;blockquote&gt;&lt;p&gt;Note that the user is installed, even the profile is installed but gets deleted before package installation finishes.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;hmm. that would be wrong.&lt;/p&gt;</comment>
                            <comment id="14194937" author="mpetria" created="Mon, 3 Nov 2014 19:24:08 +0000"  >&lt;p&gt;On the subject of whether to export the user properties when a child node is exported maybe that should be handled similarly as the general case described in &lt;a href=&quot;https://issues.apache.org/jira/browse/JCRVLT-62&quot; title=&quot;non mandatory properties of ancestor nodes should not be included or installed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JCRVLT-62&quot;&gt;JCRVLT-62&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14195058" author="tripod" created="Mon, 3 Nov 2014 20:45:16 +0000"  >&lt;p&gt;fixed in r1636436&lt;/p&gt;</comment>
                            <comment id="14195798" author="mpetria" created="Tue, 4 Nov 2014 06:46:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tripod&quot; class=&quot;user-hover&quot; rel=&quot;tripod&quot;&gt;tripod&lt;/a&gt;, the fix introduces a different behavior than in the case of regular content: a node cannot be installed if one of the ancestors (the user node) is not included in the filter. While this might be correct as the default behavior for users as it is more secure it is also less robust (a perfectly valid package is not installed). I have created &lt;a href=&quot;https://issues.apache.org/jira/browse/JCRVLT-71&quot; title=&quot;Allow creation of ancestor user nodes when they are not explicitly included in a filter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JCRVLT-71&quot;&gt;&lt;del&gt;JCRVLT-71&lt;/del&gt;&lt;/a&gt; to analyze the opportunity of an option that will allow the autocreation of users.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12676699" name="newuser.zip" size="190921" author="mpetria" created="Thu, 23 Oct 2014 20:12:26 +0000"/>
                            <attachment id="12676700" name="profile.zip" size="5665" author="mpetria" created="Thu, 23 Oct 2014 20:12:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i21ilz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>