<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:33:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JCRVLT-685] ImportMode REPLACE vs IdConflictPolicy LEGACY vs stashing</title>
                <link>https://issues.apache.org/jira/browse/JCRVLT-685</link>
                <project id="12314920" key="JCRVLT">Jackrabbit FileVault</project>
                    <description>&lt;p&gt;Consider this case:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;existing node &quot;/tmp/x&quot; in repo with UUID x1 and mixin type xm that requires a child node &quot;/tmp/x/child&quot;&lt;/li&gt;
	&lt;li&gt;package import with IdConflictPolicy.LEGACY and ImportMode REPLACE (default). Package contains /tmp/x&quot; with UUID x2 (!= x1) and does not have the mixin type xm, nor the child node required by it&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Import detects UUID present in package and on node to be updated, decides to stash it. New node is created, child nodes are moved back from stashed node, but properties are not (due to ImportMode REPLACE), thus the mixin type is not re-added. Import fails.&lt;/p&gt;

&lt;p&gt;Either we should restore the mixin type, or we should not restore the child that is only allowed by that mixin type.&lt;/p&gt;

&lt;p&gt;(This is a change in behavior introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/JCRVLT-551&quot; title=&quot;Set jcr:uuid to value from package when updating node&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JCRVLT-551&quot;&gt;&lt;del&gt;JCRVLT-551&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13524276">JCRVLT-685</key>
            <summary>ImportMode REPLACE vs IdConflictPolicy LEGACY vs stashing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="reschke">Julian Reschke</assignee>
                                    <reporter username="reschke">Julian Reschke</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Feb 2023 18:26:55 +0000</created>
                <updated>Wed, 19 Jul 2023 13:22:56 +0000</updated>
                            <resolved>Tue, 14 Feb 2023 16:19:07 +0000</resolved>
                                    <version>3.5.4</version>
                                    <fixVersion>3.7.0</fixVersion>
                                    <component>vlt</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17687831" author="reschke" created="Mon, 13 Feb 2023 09:21:37 +0000"  >&lt;p&gt;Note: the behavior not to restore properties for ImportMode == REPLACE was introduced in &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/jackrabbit-filevault/pull/159/commits/847ac6079cde864f8f51ec6b8435d0f07449de6a#diff-09802c15c5245b46b94dbbf302adfeef658cfb273119b35cfec69e40824464f3R190&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-filevault/pull/159/commits/847ac6079cde864f8f51ec6b8435d0f07449de6a#diff-09802c15c5245b46b94dbbf302adfeef658cfb273119b35cfec69e40824464f3R190&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/JCRVLT-551&quot; title=&quot;Set jcr:uuid to value from package when updating node&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JCRVLT-551&quot;&gt;&lt;del&gt;JCRVLT-551&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Removing the &quot;if&quot; statement does not cause any test failures.&lt;/p&gt;</comment>
                            <comment id="17688586" author="reschke" created="Tue, 14 Feb 2023 16:19:07 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://github.com/apache/jackrabbit-filevault/commit/0a9b076a2d85ee40276d06ccef1c106a60221de1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-filevault/commit/0a9b076a2d85ee40276d06ccef1c106a60221de1&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13395703">JCRVLT-551</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 38 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1fuwo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>