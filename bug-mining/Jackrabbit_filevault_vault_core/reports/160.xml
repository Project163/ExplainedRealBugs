<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:33:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JCRVLT-705] Unprotected properties with name jcr:created and jcr:createdBy are no longer contained in the export</title>
                <link>https://issues.apache.org/jira/browse/JCRVLT-705</link>
                <project id="12314920" key="JCRVLT">Jackrabbit FileVault</project>
                    <description>&lt;p&gt;The `jcr:created` and `jcr:createdBy` properties are not replicated on the publish with the latest version of FileVault. They are replicated properly with FileVault 3.4.0.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13533874">JCRVLT-705</key>
            <summary>Unprotected properties with name jcr:created and jcr:createdBy are no longer contained in the export</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="balasoiu">Roxana-Elena Balasoiu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 Apr 2023 16:53:13 +0000</created>
                <updated>Wed, 19 Jul 2023 13:22:57 +0000</updated>
                            <resolved>Thu, 27 Apr 2023 11:38:32 +0000</resolved>
                                    <version>3.6.0</version>
                                    <fixVersion>3.7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17715915" author="reschke" created="Mon, 24 Apr 2023 17:09:24 +0000"  >&lt;p&gt;I&apos;m sorry, but we&apos;ll need some more information here. What &lt;b&gt;exactly&lt;/b&gt; do you mean by &quot;publish&quot;? What API is being used? Any chance you can provide a unit test?&lt;/p&gt;</comment>
                            <comment id="17716171" author="kwin" created="Tue, 25 Apr 2023 08:42:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=balasoiu&quot; class=&quot;user-hover&quot; rel=&quot;balasoiu&quot;&gt;balasoiu&lt;/a&gt; Neither Replication API nor publish is a concept of Jackrabbit. Please provide a reproducer with open source means only. This is not an AEM bug tracker!&lt;/p&gt;</comment>
                            <comment id="17716770" author="JIRAUSER284589" created="Wed, 26 Apr 2023 15:15:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; Do you have any suggestions on how we can reproduce the problem?&lt;/p&gt;

&lt;p&gt;The problem is that the JCR node is not serialized correctly by FileVault. Is there any way to create a JCR node and serialize it with FileVault with open source means only?&lt;/p&gt;

&lt;p&gt;Also the node that is not serialized properly has the primary type `nt:unstructured`.&lt;/p&gt;

&lt;p&gt;Could this be related to&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-11809&quot; title=&quot;Disable &amp;quot;overwritePrimaryTypesOfFolders&amp;quot; in the distribution journal&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-11809&quot;&gt;&lt;del&gt;SLING-11809&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;

&lt;p&gt;cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tmaret&quot; class=&quot;user-hover&quot; rel=&quot;tmaret&quot;&gt;tmaret&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17716816" author="JIRAUSER284589" created="Wed, 26 Apr 2023 16:49:42 +0000"  >&lt;p&gt;I validated that the problem is related to this type: `nt:unstructured`. For other node types the serialization is done correctly.&lt;/p&gt;</comment>
                            <comment id="17716827" author="kwin" created="Wed, 26 Apr 2023 17:08:36 +0000"  >&lt;p&gt;These properties are defined as &lt;tt&gt;protected&lt;/tt&gt; and &lt;tt&gt;autocreated&lt;/tt&gt; through the mixin &lt;tt&gt;mix:created&lt;/tt&gt;. Its CND looks like this for Oak&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[mix:created]
  mixin
  - jcr:created (date) autocreated &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt;
  - jcr:createdBy (string) autocreated &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Protected/autocreated nodes cannot be set through FileVault.&lt;br/&gt;
If the node does not have that mixin, though, the properties should not be protected and therefore should be deserialized. Please provide an example of a node export containing such a property which can not be imported fully in FileVault.&lt;/p&gt;</comment>
                            <comment id="17716834" author="JIRAUSER284589" created="Wed, 26 Apr 2023 17:27:33 +0000"  >&lt;p&gt;Attached a node export that cannot be imported fully in FileVault.&lt;/p&gt;</comment>
                            <comment id="17716835" author="kwin" created="Wed, 26 Apr 2023 17:31:16 +0000"  >&lt;p&gt;Which path of that content package should contain a jcr:created? I don&apos;t see one in the export, or is the issue you report in the export and not in the import?&lt;/p&gt;</comment>
                            <comment id="17716842" author="JIRAUSER284589" created="Wed, 26 Apr 2023 17:49:03 +0000"  >&lt;p&gt;This is how the node looks like in the JCR repository:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13057691/13057691_image-2023-04-28-11-40-43-695.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;The issue seems to be happening during the creation of the package, in the export.&lt;/p&gt;</comment>
                            <comment id="17716844" author="kwin" created="Wed, 26 Apr 2023 17:56:49 +0000"  >&lt;p&gt;And which Version of FileVault included that property in the export?&lt;/p&gt;</comment>
                            <comment id="17716846" author="JIRAUSER284589" created="Wed, 26 Apr 2023 18:02:13 +0000"  >&lt;p&gt;I tested with FileVault 3.4.0 and this is how the content looked like, the 2 properties were included:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;jcr:primaryType=&lt;span class=&quot;code-quote&quot;&gt;&quot;nt:unstructured&quot;&lt;/span&gt;&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;qSAfoezTFg-1RPULVxms
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; jcr:mixinTypes=&lt;span class=&quot;code-quote&quot;&gt;&quot;[rep:AccessControllable]&quot;&lt;/span&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; jcr:primaryType=&lt;span class=&quot;code-quote&quot;&gt;&quot;nt:unstructured&quot;&lt;/span&gt;&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;rep:policy/&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;dummycollection0/&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;testdummypubliccollection/&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;dummy_public_collection
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; dam:category=&lt;span class=&quot;code-quote&quot;&gt;&quot;field-hockey&quot;&lt;/span&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; dam:season=&lt;span class=&quot;code-quote&quot;&gt;&quot;FW23&quot;&lt;/span&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; jcr:created=&lt;span class=&quot;code-quote&quot;&gt;&quot;{Date}2023-04-12T14:05:02.369Z&quot;&lt;/span&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; jcr:createdBy=&lt;span class=&quot;code-quote&quot;&gt;&quot;user&quot;&lt;/span&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; jcr:description=&quot;&quot;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; jcr:lastModified=&lt;span class=&quot;code-quote&quot;&gt;&quot;{Date}2023-04-12T14:08:01.631Z&quot;&lt;/span&gt;
  &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; jcr:mixinTypes=&lt;span class=&quot;code-quote&quot;&gt;&quot;[cq:ReplicationStatus,mix:referenceable]&quot;&lt;/span&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; jcr:primaryType=&lt;span class=&quot;code-quote&quot;&gt;&quot;nt:unstructured&quot;&lt;/span&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; jcr:title=&lt;span class=&quot;code-quote&quot;&gt;&quot;Dummy_Public_Collection&quot;&lt;/span&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; jcr:uuid=&lt;span class=&quot;code-quote&quot;&gt;&quot;52bb4882-658a-430a-9451-48b53281ac5e&quot;&lt;/span&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; sling:resourceSuperType=&lt;span class=&quot;code-quote&quot;&gt;&quot;sling/collection&quot;&lt;/span&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; sling:resourceType=&lt;span class=&quot;code-quote&quot;&gt;&quot;dam/collection&quot;&lt;/span&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;Collection&quot;&lt;/span&gt;&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;sling:members/&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;folderThumbnail/&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;/dummy_public_collection&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;/qSAfoezTFg-1RPULVxms&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;/&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17716849" author="kwin" created="Wed, 26 Apr 2023 18:08:49 +0000"  >&lt;p&gt;This is probably a regression caused by &lt;a href=&quot;https://github.com/apache/jackrabbit-filevault/commit/14dcce932be027d79274e82d11ddeec1ac0bb0d6#diff-4782da6b26eadfdd74422e0d0223431f310136da6ceb15bcaae111ea2f73ca50R120&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-filevault/commit/14dcce932be027d79274e82d11ddeec1ac0bb0d6#diff-4782da6b26eadfdd74422e0d0223431f310136da6ceb15bcaae111ea2f73ca50R120&lt;/a&gt;. Let me investigate.&lt;/p&gt;</comment>
                            <comment id="17716865" author="marett" created="Wed, 26 Apr 2023 18:51:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=balasoiu&quot; class=&quot;user-hover&quot; rel=&quot;balasoiu&quot;&gt;balasoiu&lt;/a&gt; I think it makes sense to reproduce the issue with a FV test. Perhaps &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reschke&quot; class=&quot;user-hover&quot; rel=&quot;reschke&quot;&gt;reschke&lt;/a&gt; &#160;could provide some pointers to build such test or you may look into &lt;a href=&quot;https://github.com/apache/jackrabbit-filevault/tree/master/vault-core/src/test/java/org/apache/jackrabbit/vault/packaging/integration&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-filevault/tree/master/vault-core/src/test/java/org/apache/jackrabbit/vault/packaging/integration&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;IIUC from the issue description, the issue may occur on export. The test may focus on that part and show the regression by proving it used to work with version x and no longer does with version y.&lt;/p&gt;</comment>
                            <comment id="17717137" author="kwin" created="Thu, 27 Apr 2023 11:38:32 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/jackrabbit-filevault/commit/a23193e2a82e6fd43a8f40135d41aadf9a666e33&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-filevault/commit/a23193e2a82e6fd43a8f40135d41aadf9a666e33&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="13427688">JCRVLT-605</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13057691" name="image-2023-04-28-11-40-43-695.png" size="120618" author="balasoiu" created="Fri, 28 Apr 2023 09:40:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 28 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1hhzs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>