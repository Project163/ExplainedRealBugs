<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:32:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JCRVLT-257] ZipException: invalid code lengths set</title>
                <link>https://issues.apache.org/jira/browse/JCRVLT-257</link>
                <project id="12314920" key="JCRVLT">Jackrabbit FileVault</project>
                    <description>&lt;p&gt;I&apos;m running into the following exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
...
Caused by: java.util.zip.ZipException: invalid code lengths set
        at java.util.zip.InflaterInputStream.read(InflaterInputStream.java:164)
        at java.util.zip.ZipInputStream.read(ZipInputStream.java:194)
        at org.apache.jackrabbit.vault.fs.io.ZipStreamArchive.copyToBuffer(ZipStreamArchive.java:228)
        at org.apache.jackrabbit.vault.fs.io.ZipStreamArchive.copy(ZipStreamArchive.java:215)
        at org.apache.jackrabbit.vault.fs.io.ZipStreamArchive.open(ZipStreamArchive.java:159)
        at org.apache.sling.distribution.serialization.impl.vlt.FileVaultContentSerializer.importFromStream(FileVaultContentSerializer.java:130)
        ... 112 common frames omitted
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;running Apache Sling Content Distribution on an AEM instance. It looks like the Zipfile exported by JarExporter is broken in certain cases - though I didn&apos;t find a unit test for that so far. &lt;/p&gt;

&lt;p&gt;Anyway I&apos;m quite sure that its caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/JCRVLT-163&quot; title=&quot;Avoid compressing incompressible binaries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JCRVLT-163&quot;&gt;&lt;del&gt;JCRVLT-163&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;To workaround the compression of the entire file can to be set to NO_COMPRESSION. &lt;/p&gt;</description>
                <environment>&lt;p&gt;Java(TM) SE Runtime Environment (build 1.8.0_151-b12)&lt;br/&gt;
zlib version 1.2.11&lt;/p&gt;</environment>
        <key id="13129103">JCRVLT-257</key>
            <summary>ZipException: invalid code lengths set</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="diru">Dirk Rudolph</reporter>
                        <labels>
                    </labels>
                <created>Sun, 7 Jan 2018 17:57:55 +0000</created>
                <updated>Sun, 25 Feb 2018 02:13:12 +0000</updated>
                            <resolved>Tue, 9 Jan 2018 05:24:38 +0000</resolved>
                                    <version>3.1.40</version>
                    <version>3.1.42</version>
                                    <fixVersion>3.1.44</fixVersion>
                                    <component>Packaging</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16315405" author="diru" created="Sun, 7 Jan 2018 18:02:38 +0000"  >&lt;p&gt;See the attached zip file, exported with 3.1.42, and what &lt;tt&gt;unzip&lt;/tt&gt; says about it:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Dirks-MacBook-Pro:test dirk.rudolph$ unzip -t distributionpackage.zip 
Archive:  distributionpackage.zip
    testing: META-INF/MANIFEST.MF     OK
    testing: META-INF/                OK
    testing: META-INF/vault/          OK
    testing: META-INF/vault/properties.xml   OK
    testing: META-INF/vault/config.xml   OK
    testing: META-INF/vault/filter.xml   OK
    testing: jcr_root/.content.xml    OK
    testing: jcr_root/content/        OK
    testing: jcr_root/content/.content.xml   OK
    testing: jcr_root/content/dam/    OK
    testing: jcr_root/content/dam/.content.xml   OK
    testing: jcr_root/content/dam/DSC_0106.jpg/   OK
    testing: jcr_root/content/dam/DSC_0106.jpg/_jcr_content/   OK
    testing: jcr_root/content/dam/DSC_0106.jpg/_jcr_content/renditions/   OK
    testing: jcr_root/content/dam/DSC_0106.jpg/_jcr_content/renditions/cq5dam.thumbnail.48.48.png  
  error:  invalid compressed data to inflate
    testing: jcr_root/content/dam/DSC_0106.jpg/_jcr_content/renditions/cq5dam.thumbnail.48.48.png.dir/   OK
    testing: jcr_root/content/dam/DSC_0106.jpg/_jcr_content/renditions/cq5dam.thumbnail.48.48.png.dir/.content.xml   OK
    testing: jcr_root/content/dam/DSC_0106.jpg/_jcr_content/renditions/cq5dam.thumbnail.140.100.png  
  error:  invalid compressed data to inflate
    testing: jcr_root/content/dam/DSC_0106.jpg/_jcr_content/renditions/cq5dam.thumbnail.140.100.png.dir/   OK
    testing: jcr_root/content/dam/DSC_0106.jpg/_jcr_content/renditions/cq5dam.thumbnail.140.100.png.dir/.content.xml   OK
    testing: jcr_root/content/dam/DSC_0106.jpg/_jcr_content/renditions/cq5dam.web.1280.1280.jpeg  
  error:  invalid compressed data to inflate
    testing: jcr_root/content/dam/DSC_0106.jpg/_jcr_content/renditions/cq5dam.web.1280.1280.jpeg.dir/   OK
    testing: jcr_root/content/dam/DSC_0106.jpg/_jcr_content/renditions/cq5dam.web.1280.1280.jpeg.dir/.content.xml   OK
    testing: jcr_root/content/dam/DSC_0106.jpg/_jcr_content/renditions/original   bad CRC 7aef5aa6  (should be 0ebac2d8)
    testing: jcr_root/content/dam/DSC_0106.jpg/_jcr_content/renditions/original.dir/   OK
    testing: jcr_root/content/dam/DSC_0106.jpg/_jcr_content/renditions/original.dir/.content.xml   OK
    testing: jcr_root/content/dam/DSC_0106.jpg/_jcr_content/renditions/cq5dam.thumbnail.319.319.png  
  error:  invalid compressed data to inflate
    testing: jcr_root/content/dam/DSC_0106.jpg/_jcr_content/renditions/cq5dam.thumbnail.319.319.png.dir/   OK
    testing: jcr_root/content/dam/DSC_0106.jpg/_jcr_content/renditions/cq5dam.thumbnail.319.319.png.dir/.content.xml   OK
    testing: jcr_root/content/dam/DSC_0106.jpg/.content.xml   OK
    testing: META-INF/vault/nodetypes.cnd   OK
At least one error was detected in distributionpackage.zip.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16315410" author="diru" created="Sun, 7 Jan 2018 18:17:09 +0000"  >&lt;p&gt;Building the same package with generally compression level set to NO_COMPRESSION results in a working zip file.&lt;/p&gt;</comment>
                            <comment id="16315607" author="tripod" created="Mon, 8 Jan 2018 02:47:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marett&quot; class=&quot;user-hover&quot; rel=&quot;marett&quot;&gt;marett&lt;/a&gt; could that be related to some of your changes regarding compression?&lt;/p&gt;</comment>
                            <comment id="16315796" author="diru" created="Mon, 8 Jan 2018 07:37:16 +0000"  >&lt;p&gt;Just to give some more context: Sling Content Distribution is using &lt;tt&gt;setCompressionLevel(Deflater.BEST_SPEED)&lt;/tt&gt;, and for those using Adobes CRX Package Manager, its using the default option, being NO_COMPRESSION.&lt;/p&gt;</comment>
                            <comment id="16315859" author="diru" created="Mon, 8 Jan 2018 08:24:18 +0000"  >&lt;p&gt;I created a unit test here &lt;a href=&quot;https://github.com/Buuhuu/jackrabbit-filevault/commit/ddf685b4f8ba930ecfc77286eeb1f49a4f2be25a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Buuhuu/jackrabbit-filevault/commit/ddf685b4f8ba930ecfc77286eeb1f49a4f2be25a&lt;/a&gt; failing with &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: java.util.zip.ZipException: invalid block type
	at java.util.zip.InflaterInputStream.read(InflaterInputStream.java:164)
	at java.util.zip.ZipInputStream.read(ZipInputStream.java:194)
	at org.apache.jackrabbit.vault.fs.io.ZipStreamArchive.copyToBuffer(ZipStreamArchive.java:228)
	at org.apache.jackrabbit.vault.fs.io.ZipStreamArchive.copy(ZipStreamArchive.java:215)
	at org.apache.jackrabbit.vault.fs.io.ZipStreamArchive.open(ZipStreamArchive.java:159)
	at org.apache.jackrabbit.vault.fs.io.JarExporterTest.testEntriesWithSuppressedCompression(JarExporterTest.java:63)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Not the same exception as in the description but thrown at the same place due to DataFormatException thrown by native code.&lt;/p&gt;</comment>
                            <comment id="16315875" author="kwin" created="Mon, 8 Jan 2018 08:39:59 +0000"  >&lt;p&gt;The default being &lt;tt&gt;NO_COMPRESSION&lt;/tt&gt; (0) is most probably a mistake. This is tracked in &lt;a href=&quot;https://issues.apache.org/jira/browse/JCRVLT-258&quot; title=&quot;Default compression level incorrectly set to NO_COMPRESSION (0)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JCRVLT-258&quot;&gt;&lt;del&gt;JCRVLT-258&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16315883" author="marett" created="Mon, 8 Jan 2018 08:44:34 +0000"  >&lt;blockquote&gt;&lt;p&gt;and for those using Adobes CRX Package Manager, its using the default option, being NO_COMPRESSION.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=diru&quot; class=&quot;user-hover&quot; rel=&quot;diru&quot;&gt;diru&lt;/a&gt; Does CRX Package Manager really use NO_COMPRESSION or rather &lt;tt&gt;DEFAULT_COMPRESSION&lt;/tt&gt; ?&lt;/p&gt;

&lt;p&gt;Assuming the latter, could you please test if the &lt;tt&gt;ZipException&lt;/tt&gt; is thrown in your initial setup with &lt;tt&gt;DEFAULT_COMPRESSION&lt;/tt&gt; ?&lt;/p&gt;</comment>
                            <comment id="16315886" author="marett" created="Mon, 8 Jan 2018 08:49:33 +0000"  >&lt;p&gt;Ok.. just noticed (&lt;a href=&quot;https://issues.apache.org/jira/browse/JCRVLT-258&quot; title=&quot;Default compression level incorrectly set to NO_COMPRESSION (0)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JCRVLT-258&quot;&gt;&lt;del&gt;JCRVLT-258&lt;/del&gt;&lt;/a&gt;) opened by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; (our comments crossed).&lt;/p&gt;

&lt;p&gt;So, The default for CRX Package Manager should not be &lt;tt&gt;NO_COMPRESSION&lt;/tt&gt; IMO. The default for CRX Package Manager should be reverted back to &lt;tt&gt;DEFAULT_COMPRESSION&lt;/tt&gt;. Indeed, using &lt;tt&gt;NO_COMPRESSION&lt;/tt&gt; CRX Package Manager has impact on the size (size increase) of the packages created down the line in AEM and other consumers, which is IMO not something we want.&lt;/p&gt;

&lt;p&gt;Sling SCD will still use &lt;tt&gt;BEST_SPEED&lt;/tt&gt; as default, which is what we need.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=diru&quot; class=&quot;user-hover&quot; rel=&quot;diru&quot;&gt;diru&lt;/a&gt; could you confirm whether the ZipException exception is thrown with &lt;tt&gt;DEFAULT_COMPRESSION&lt;/tt&gt; ?&lt;/p&gt;</comment>
                            <comment id="16315901" author="diru" created="Mon, 8 Jan 2018 08:59:25 +0000"  >&lt;p&gt;Its not because the new behaviour is not taken into account for that:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 * The exporter can optimize the export throughput &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; binaries, by avoiding to
 * compress incompressible binaries.
 * The optimization is enabled &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; all {@link Deflater} compression levels but
 * {@link Deflater#DEFAULT_COMPRESSION}, {@link Deflater#NO_COMPRESSION} and
 * {@link Deflater#BEST_COMPRESSION}.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16315914" author="marett" created="Mon, 8 Jan 2018 09:08:24 +0000"  >&lt;p&gt;Ok, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=diru&quot; class=&quot;user-hover&quot; rel=&quot;diru&quot;&gt;diru&lt;/a&gt;! I&apos;ll have a look at your unit test.&lt;/p&gt;</comment>
                            <comment id="16315930" author="marett" created="Mon, 8 Jan 2018 09:17:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=diru&quot; class=&quot;user-hover&quot; rel=&quot;diru&quot;&gt;diru&lt;/a&gt; I ran your unit test at &lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/Buuhuu/jackrabbit-filevault/commit/ddf685b4f8ba930ecfc77286eeb1f49a4f2be25a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Buuhuu/jackrabbit-filevault/commit/ddf685b4f8ba930ecfc77286eeb1f49a4f2be25a&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;However, the test passes successfully on my box. Could you give us more details regarding how you run the tests, and about the environment you run the test on ?&lt;/p&gt;</comment>
                            <comment id="16315940" author="diru" created="Mon, 8 Jan 2018 09:33:14 +0000"  >&lt;p&gt;Its MacOS X 10.13.2 with java 1.8.0 151-b12 and zlib 1.2.11 according to the MacOSX SDK 10.13 (assuming that the jre is using zlib). The test is failing with both intellij and mvn.&lt;/p&gt;

&lt;p&gt;(In the commit the test is @Ignore d.)&lt;/p&gt;</comment>
                            <comment id="16315949" author="diru" created="Mon, 8 Jan 2018 09:38:11 +0000"  >&lt;p&gt;This might be related: &lt;a href=&quot;https://github.com/madler/zlib/issues/305&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/madler/zlib/issues/305&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I was able to track down the problem to a potential bug in the zlib version shipped with High Sierra (1.12.11). Version 1.2.5 which is used in Sierra works find. The bug is caused by changing the compression levels for different entries.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://bugs.openjdk.java.net/browse/JDK-8184306&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.java.net/browse/JDK-8184306&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16315969" author="marett" created="Mon, 8 Jan 2018 09:47:12 +0000"  >&lt;blockquote&gt;&lt;p&gt;This might be related: &lt;a href=&quot;https://github.com/madler/zlib/issues/305&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/madler/zlib/issues/305&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Possibly, in which case, IIUC your test fails on your environment due to a zlib bug.&lt;br/&gt;
Since on my environment, the test still passes successfully, I would suggest to&lt;/p&gt;

&lt;p&gt;1. Update your environment with a version of zlib that contains the fix for &lt;a href=&quot;https://github.com/madler/zlib/issues/305&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/madler/zlib/issues/305&lt;/a&gt;&lt;br/&gt;
2. Rework the unit test until it produce the ZipException&lt;/p&gt;</comment>
                            <comment id="16316008" author="diru" created="Mon, 8 Jan 2018 10:05:21 +0000"  >&lt;p&gt;Well changing the zlib version shipped by my operation system is nothing I want to do on my personal computer, nor in production like environments. &lt;/p&gt;

&lt;p&gt;The bug in the jdk looks like being resolved with java9 only. In the meanwhile more distributions (esp. linux, windows runs with a statically linked zlib, macosx high sierra already has 1.2.11) will bring updates to 1.2.11, and users will start facing that error. The only places I know atm are Sling Content Distribution (failing) and CRX Package Manager (not failing due to DEFAULT not NO COMPRESSION). &lt;/p&gt;

&lt;p&gt;So to resolve the issue I see the following options:&lt;/p&gt;

&lt;p&gt;1) don&apos;t switch compression level, when we know we are running on an environment that is effected by JDK-8184306 (not sure how to check that)&lt;br/&gt;
2) allow turning of switching compression level by a system configuration property (kind of a feature flag)&lt;br/&gt;
3) handle that in application logic (in my case Sling SCD)&lt;/p&gt;

&lt;p&gt;Handling that in application logic sounds more like a workaround then actually resolving that issue.&lt;/p&gt;</comment>
                            <comment id="16316009" author="kwin" created="Mon, 8 Jan 2018 10:06:12 +0000"  >&lt;p&gt;I think this issue has been fixed/worked around in newer Java versions: &lt;a href=&quot;https://bugs.openjdk.java.net/browse/JDK-8189789&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.java.net/browse/JDK-8189789&lt;/a&gt;. The problem though is that neither Java 8u162 nor 7u171 nor Java 10 are released yet...&lt;/p&gt;</comment>
                            <comment id="16316040" author="diru" created="Mon, 8 Jan 2018 10:24:49 +0000"  >&lt;p&gt;Upgrading to 1.8.0 b162 didn&apos;t resolve the issue so I guess its not JDK-8189789, nor does an update to 9.0.1+11&lt;/p&gt;</comment>
                            <comment id="16316080" author="kwin" created="Mon, 8 Jan 2018 10:46:48 +0000"  >&lt;p&gt;The latest build (b03) of 8u162 is from October 2017. The fix though has been applied in Nov. 2017 (&lt;a href=&quot;http://cr.openjdk.java.net/~coffeys/webrev.8189789.jdk8u/webrev/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cr.openjdk.java.net/~coffeys/webrev.8189789.jdk8u/webrev/&lt;/a&gt; and &lt;a href=&quot;http://mail.openjdk.java.net/pipermail/core-libs-dev/2017-November/050118.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mail.openjdk.java.net/pipermail/core-libs-dev/2017-November/050118.html&lt;/a&gt;) so we have to wait for a more recent build... 8u162 is supposed to be released in Jan 2018 (&lt;a href=&quot;http://openjdk.java.net/projects/jdk8u/releases/8u162.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://openjdk.java.net/projects/jdk8u/releases/8u162.html&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="16316124" author="kwin" created="Mon, 8 Jan 2018 11:15:38 +0000"  >&lt;p&gt;The test from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=diru&quot; class=&quot;user-hover&quot; rel=&quot;diru&quot;&gt;diru&lt;/a&gt; fails on my machine with Java 8 (1.8.0_151) and 9 (9.0.1) but works with Java 10 (ea37). So most probably the fix/workaround from Oracle works.&lt;/p&gt;</comment>
                            <comment id="16316125" author="marett" created="Mon, 8 Jan 2018 11:16:12 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; for your analysis!&lt;/p&gt;

&lt;p&gt;In case the zlib fix takes a while to be included in most environments, I have opened &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7362&quot; title=&quot;Allow to configure the SCD default compression level&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7362&quot;&gt;&lt;del&gt;SLING-7362&lt;/del&gt;&lt;/a&gt; which allows to configure the default compression level for SCD.&lt;/p&gt;

&lt;p&gt;With &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7362&quot; title=&quot;Allow to configure the SCD default compression level&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7362&quot;&gt;&lt;del&gt;SLING-7362&lt;/del&gt;&lt;/a&gt;, SCD default would still BEST_SPEED, but there would be a way to configure the SCD compression to a level not trigger the &lt;a href=&quot;https://issues.apache.org/jira/browse/JCRVLT-163&quot; title=&quot;Avoid compressing incompressible binaries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JCRVLT-163&quot;&gt;&lt;del&gt;JCRVLT-163&lt;/del&gt;&lt;/a&gt; optimisation (e.g. &lt;tt&gt;DEFAULT_COMPRESSION&lt;/tt&gt;, &lt;tt&gt;NO_COMPRESSION&lt;/tt&gt; or &lt;tt&gt;BEST_COMPRESSION&lt;/tt&gt;) and thus avoid the zlib bug.&lt;/p&gt;

&lt;p&gt;The issue &lt;a href=&quot;https://issues.apache.org/jira/browse/JCRVLT-258&quot; title=&quot;Default compression level incorrectly set to NO_COMPRESSION (0)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JCRVLT-258&quot;&gt;&lt;del&gt;JCRVLT-258&lt;/del&gt;&lt;/a&gt; is a separate one and should still IMO be fixed.&lt;/p&gt;</comment>
                            <comment id="16316233" author="diru" created="Mon, 8 Jan 2018 12:40:27 +0000"  >&lt;p&gt;I discussed that further with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; and we think the check proposed in issue 305 makes sense to verify if an environment supports changing the compression level or not. I implemented that in &lt;a href=&quot;https://github.com/apache/jackrabbit-filevault/pull/20&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-filevault/pull/20&lt;/a&gt; resolving the issue for me (the scenarios written above).&lt;/p&gt;</comment>
                            <comment id="16317729" author="tripod" created="Tue, 9 Jan 2018 05:24:38 +0000"  >&lt;p&gt;Thanks for the patch, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=diru&quot; class=&quot;user-hover&quot; rel=&quot;diru&quot;&gt;diru&lt;/a&gt;. I applied the change (with small modifications) in r1820625&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13129189">JCRVLT-258</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13048792">JCRVLT-163</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13129206">SLING-7362</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12904987" name="distributionpackage.zip" size="5607751" author="diru" created="Sun, 7 Jan 2018 18:02:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 44 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3om2f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>