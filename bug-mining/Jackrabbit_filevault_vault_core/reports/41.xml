<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:32:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JCRVLT-98] Multivalued properties of users are saved as single valued properties</title>
                <link>https://issues.apache.org/jira/browse/JCRVLT-98</link>
                <project id="12314920" key="JCRVLT">Jackrabbit FileVault</project>
                    <description>&lt;p&gt;Installing a package with an user that has a multivalue property with just one value causes the type of the property to be switched from String[] to String.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12863856">JCRVLT-98</key>
            <summary>Multivalued properties of users are saved as single valued properties</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tripod">Tobias Bocanegra</assignee>
                                    <reporter username="mpetria">Marius Petria</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Sep 2015 11:58:01 +0000</created>
                <updated>Mon, 28 Sep 2015 16:22:54 +0000</updated>
                            <resolved>Fri, 25 Sep 2015 06:07:05 +0000</resolved>
                                    <version>3.1.18</version>
                                    <fixVersion>3.1.24</fixVersion>
                                    <component>Packaging</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14743417" author="mpetria" created="Mon, 14 Sep 2015 12:00:04 +0000"  >&lt;p&gt;I attached the test-mv-prop-user.zip that illustrates the error. In the package serialization the mvprop appears as an array (mvprop=&quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;first&amp;#93;&lt;/span&gt;&quot;) but the installed type is String.&lt;/p&gt;</comment>
                            <comment id="14743515" author="mpetria" created="Mon, 14 Sep 2015 13:35:24 +0000"  >&lt;p&gt;I attached also a test that fails for mv properties.&lt;/p&gt;</comment>
                            <comment id="14745297" author="mpetria" created="Tue, 15 Sep 2015 11:55:16 +0000"  >&lt;p&gt;I attached a patch that explicitly sets multiple flag for multiple valued properties in JcrSysViewTransformer. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tripod&quot; class=&quot;user-hover&quot; rel=&quot;tripod&quot;&gt;tripod&lt;/a&gt; can you please have a look at it?&lt;/p&gt;</comment>
                            <comment id="14745604" author="tripod" created="Tue, 15 Sep 2015 15:28:36 +0000"  >&lt;p&gt;thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mpetria&quot; class=&quot;user-hover&quot; rel=&quot;mpetria&quot;&gt;mpetria&lt;/a&gt;, the patch looks good.&lt;/p&gt;</comment>
                            <comment id="14900754" author="teofili" created="Mon, 21 Sep 2015 14:37:08 +0000"  >&lt;p&gt;I&apos;ve tested and I can reproduce it too with the following test and a test package having a property &lt;em&gt;mvProp = &lt;span class=&quot;error&quot;&gt;&amp;#91;foo&amp;#93;&lt;/span&gt;&lt;/em&gt; in the user&apos;s profile node:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void installUserWithSingleValuedMVProp() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {

        UserManager mgr = ((JackrabbitSession) admin).getUserManager();
        assertNull(&lt;span class=&quot;code-quote&quot;&gt;&quot;test-user-a must not exist&quot;&lt;/span&gt;, mgr.getAuthorizable(ID_TEST_USER_A));

        User u = mgr.createUser(ID_TEST_USER_A, &lt;span class=&quot;code-quote&quot;&gt;&quot;nonce&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; authPath = u.getPath();

        &lt;span class=&quot;code-comment&quot;&gt;// create test property and node
&lt;/span&gt;        u.setProperty(NAME_USER_PROPERTY, admin.getValueFactory().createValue(&lt;span class=&quot;code-quote&quot;&gt;&quot;initial&quot;&lt;/span&gt;));
        admin.getNode(u.getPath()).addNode(NAME_PROFILE_PRIVATE_NODE, NodeType.NT_UNSTRUCTURED);

        admin.save();

        JcrPackage pack = packMgr.upload(getStream(&lt;span class=&quot;code-quote&quot;&gt;&quot;testpackages/test_user_a_mv.zip&quot;&lt;/span&gt;), &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
        assertNotNull(pack);
        ImportOptions opts = getDefaultOptions();
        pack.install(opts);

        &lt;span class=&quot;code-comment&quot;&gt;// check &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; user exists
&lt;/span&gt;        User userA = (User) mgr.getAuthorizable(ID_TEST_USER_A);
        assertNotNull(ID_TEST_USER_A + &lt;span class=&quot;code-quote&quot;&gt;&quot; must exist&quot;&lt;/span&gt;, userA);

        Node profile = admin.getNode(userA.getPath() + &lt;span class=&quot;code-quote&quot;&gt;&quot;/profile&quot;&lt;/span&gt;);
        assertTrue(profile.hasProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;mvProp&quot;&lt;/span&gt;));
        assertTrue(profile.getProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;mvProp&quot;&lt;/span&gt;).isMultiple());

    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14905154" author="mpetria" created="Wed, 23 Sep 2015 20:05:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tripod&quot; class=&quot;user-hover&quot; rel=&quot;tripod&quot;&gt;tripod&lt;/a&gt; do you think you have time to apply the patch and maybe start a release? &lt;/p&gt;</comment>
                            <comment id="14907651" author="tripod" created="Fri, 25 Sep 2015 06:07:05 +0000"  >&lt;p&gt;fixed in r1705214&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12863858">SLING-5020</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12755976" name="JCRVLT-98.patch" size="5690" author="mpetria" created="Tue, 15 Sep 2015 11:55:16 +0000"/>
                            <attachment id="12755725" name="JCRVLT-98.test.patch" size="4534" author="mpetria" created="Mon, 14 Sep 2015 13:35:24 +0000"/>
                            <attachment id="12755715" name="test-mv-prop-user.zip" size="6100" author="mpetria" created="Mon, 14 Sep 2015 12:00:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 8 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2k4qn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>