<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:46:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-2188] Add/remove version label fails with restricted access on /jcr:system</title>
                <link>https://issues.apache.org/jira/browse/OAK-2188</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;Some version operations rely on visibility of /jcr:system/jcr:versionStorage. This applies to add/remove label and remove version operations. The current implementation sets a well defined property on the jcr:versionStorage node. A commit hook picks up this change, removes the property again and performs the requested operation on the version store.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12747946">OAK-2188</key>
            <summary>Add/remove version label fails with restricted access on /jcr:system</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mreutegg">Marcel Reutegger</assignee>
                                    <reporter username="mreutegg">Marcel Reutegger</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Oct 2014 08:03:19 +0000</created>
                <updated>Mon, 10 Nov 2014 05:49:37 +0000</updated>
                            <resolved>Wed, 15 Oct 2014 08:41:16 +0000</resolved>
                                    <version>1.0.7</version>
                    <version>1.1.1</version>
                                    <fixVersion>1.1.2</fixVersion>
                                    <component>core</component>
                    <component>jcr</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14170868" author="mreutegg" created="Tue, 14 Oct 2014 12:49:28 +0000"  >&lt;p&gt;As a preparation for the fix I had to change the test content to deny access to /jcr:system for the everyone principal (thanks for the pointer Angela). This also required changes in other areas. See attached patch. With the patch the tests which try to manipulate labels and try to remove versions fail. This is expected, because this first patch does not fix the problem described in this issue.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anchela&quot; class=&quot;user-hover&quot; rel=&quot;anchela&quot;&gt;anchela&lt;/a&gt;, could you please review the changes?&lt;/p&gt;

&lt;p&gt;The main problem with the existing tests was reverting changes to access control lists during the test. See AbstractEvaluationTest, where I changed &lt;tt&gt;toClear&lt;/tt&gt; into &lt;tt&gt;toRestore&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="14170938" author="anchela" created="Tue, 14 Oct 2014 13:52:19 +0000"  >&lt;p&gt;the patch looks good... the only thing that i would probably change is in AbstractEvaluationTest... i think i would omit the following assertion as it is only relevant for the versionmanagementtest.&lt;/p&gt;

&lt;p&gt;+        // but must not see version storage node&lt;br/&gt;
+        assertFalse(testSession.itemExists(&quot;/jcr:system/jcr:versionStorage&quot;));&lt;/p&gt;

</comment>
                            <comment id="14172149" author="mreutegg" created="Wed, 15 Oct 2014 08:41:16 +0000"  >&lt;p&gt;Thanks for the review. I removed the assert in AbstractEvaluationTest.&lt;/p&gt;

&lt;p&gt;Committed patch and the fix in revision &lt;a href=&quot;http://svn.apache.org/r1631971&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1631971&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14204391" author="amitjain" created="Mon, 10 Nov 2014 05:49:37 +0000"  >&lt;p&gt;Bulk close for 1.1.2&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12674765" name="OAK-2188.patch" size="12699" author="mreutegg" created="Tue, 14 Oct 2014 12:49:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2151j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>