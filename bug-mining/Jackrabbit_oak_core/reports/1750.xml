<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:53:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-6790] FacetResult class isn&apos;t exposed anymore</title>
                <link>https://issues.apache.org/jira/browse/OAK-6790</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-3847&quot; title=&quot;Provide an easy way to parse/retrieve facets&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-3847&quot;&gt;&lt;del&gt;OAK-3847&lt;/del&gt;&lt;/a&gt; exposed &lt;tt&gt;FacetResult&lt;/tt&gt; (rather &lt;tt&gt;org.apache.jackrabbit.oak.query.facet&lt;/tt&gt; package) to easily consume extracted facet data. That exported package got removed during &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-6304&quot; title=&quot;Cyclic dependency between oak.spi.query an oak.query.*&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-6304&quot;&gt;&lt;del&gt;OAK-6304&lt;/del&gt;&lt;/a&gt; (as noted in this comment [1]).&lt;/p&gt;

&lt;p&gt;We need to export that class - maybe that class makes sense as part of &lt;tt&gt;oak-query-spi&lt;/tt&gt; module - that still needs to be checked as assessed btw (ie if we can simply re-enable the removed export AND that its current place in oak-core still makes sense or not).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anchela&quot; class=&quot;user-hover&quot; rel=&quot;anchela&quot;&gt;anchela&lt;/a&gt;, would you remember what was the warning that was observed without removing this export (disclaimer: I still feel that it belongs in &lt;tt&gt;oak-query-spi&lt;/tt&gt;... I&apos;m just trying to have all data available).&lt;/p&gt;

&lt;p&gt;[1]: &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-6304?focusedCommentId=16042721&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16042721&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/OAK-6304?focusedCommentId=16042721&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16042721&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13107483">OAK-6790</key>
            <summary>FacetResult class isn&apos;t exposed anymore</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="catholicon">Vikas Saurabh</assignee>
                                    <reporter username="catholicon">Vikas Saurabh</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 Oct 2017 11:27:56 +0000</created>
                <updated>Fri, 27 Oct 2017 10:06:20 +0000</updated>
                            <resolved>Mon, 9 Oct 2017 23:20:18 +0000</resolved>
                                    <version>1.7.2</version>
                                    <fixVersion>1.7.10</fixVersion>
                    <fixVersion>1.8.0</fixVersion>
                                    <component>query</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16196475" author="catholicon" created="Mon, 9 Oct 2017 03:55:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anchela&quot; class=&quot;user-hover&quot; rel=&quot;anchela&quot;&gt;anchela&lt;/a&gt;, could you please review this issue? And, if it feels ok to move this class to &lt;tt&gt;oak-query-spi&lt;/tt&gt; under &lt;tt&gt;org.apache.jackrabbit.oak.&lt;b&gt;spi&lt;/b&gt;.query.facet&lt;/tt&gt; package?&lt;/p&gt;</comment>
                            <comment id="16196770" author="teofili" created="Mon, 9 Oct 2017 09:59:52 +0000"  >&lt;p&gt;+1 to expose it, however I think this is a not backward compatible change as &lt;tt&gt;FacetResult&lt;/tt&gt;&#160;used to be exposed from &lt;em&gt;org.apache.jackrabbit.oak.query.facet&lt;/em&gt; package.&lt;/p&gt;</comment>
                            <comment id="16196838" author="catholicon" created="Mon, 9 Oct 2017 11:39:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=teofili&quot; class=&quot;user-hover&quot; rel=&quot;teofili&quot;&gt;teofili&lt;/a&gt;, yes, I realized that the package export is breaking backward comatibility - I was assuming that we&apos;ve done this for a lot other packages and felt that it might be ok here too. I feel if we&apos;re ok to move it to a separate bundle (to me query-spi feels better home), then we might be ok with package update too.&lt;/p&gt;</comment>
                            <comment id="16196865" author="teofili" created="Mon, 9 Oct 2017 12:09:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=catholicon&quot; class=&quot;user-hover&quot; rel=&quot;catholicon&quot;&gt;catholicon&lt;/a&gt; sure, I guess this is not the only export we changed in that area.&lt;/p&gt;</comment>
                            <comment id="16197855" author="catholicon" created="Mon, 9 Oct 2017 23:20:18 +0000"  >&lt;p&gt;Re-exported the class under &lt;tt&gt;oak-query-spi&lt;/tt&gt; under &lt;tt&gt;o.a.j.o.spi.query.facet&lt;/tt&gt; on trunk at &lt;a href=&quot;https://svn.apache.org/r1811626&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1811626&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16198153" author="chetanm" created="Tue, 10 Oct 2017 04:28:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=catholicon&quot; class=&quot;user-hover&quot; rel=&quot;catholicon&quot;&gt;catholicon&lt;/a&gt; If the package is not used in multiple bundles &quot;org.apache.jackrabbit.oak.query.facet&quot; then lets keep the same package name to avoid any backward compatibility issue as this class was sort of api&lt;/p&gt;</comment>
                            <comment id="16198191" author="catholicon" created="Tue, 10 Oct 2017 05:33:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chetanm&quot; class=&quot;user-hover&quot; rel=&quot;chetanm&quot;&gt;chetanm&lt;/a&gt;, I&apos;m guessing consumer of this class would have to mark dependency on &lt;tt&gt;oak-query-spi&lt;/tt&gt; anyway. So, unless we move it back to &lt;tt&gt;oak-core&lt;/tt&gt;, I am not sure if not changing package would be helpful from backward compatibility pov.&lt;/p&gt;</comment>
                            <comment id="16198195" author="chetanm" created="Tue, 10 Oct 2017 05:35:52 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;m guessing consumer of this class would have to mark dependency on oak-query-spi anyway&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Not necessarily as his code would still compile fine with older maven dependency however his existing working app would not work post upgrade as his bundle using the older FacetResult would not resolve&lt;/p&gt;</comment>
                            <comment id="16198248" author="catholicon" created="Tue, 10 Oct 2017 06:37:46 +0000"  >&lt;p&gt;Umm. I&apos;ve always felt that bnd is what defines out backward compatibility. I think what you&apos;re saying is that with provided dependency on oak-core and deploying both oak-core and oak-query-spi in consuming setup won&apos;t feel bad about backward compatibility.&lt;/p&gt;

&lt;p&gt;Otoh, not picking up oak-query-spi on such setup would still fail to resolve the bundle.&lt;/p&gt;

&lt;p&gt;All that said, I think we have moved around quite a few packages in the refactoring exercise. So, if we&apos;re ok with a bit of backward incompatibility hit, I think the current place (bundle and package) is more fitting place.&lt;/p&gt;</comment>
                            <comment id="16198260" author="chetanm" created="Tue, 10 Oct 2017 06:46:32 +0000"  >&lt;blockquote&gt;&lt;p&gt;Otoh, not picking up oak-query-spi on such setup would still fail to resolve the bundle.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That would. But here case would be that Oak user updated to newer version of Oak based application which adds all the new bundles. However his bundle would still not resolve even with oak-uery-spi being present&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;All that said, I think we have moved around quite a few packages in the refactoring exercise. So, if we&apos;re ok with a bit of backward incompatibility hit, I think the current place (bundle and package) is more fitting place.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Most of such moves involved packages which were to be consumed by other Oak bundles hence changing them does not impact backward compatability. However this package was meant to be consumer by non Oak bundles and hence would pose problem. Note that this package was a version export &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; so something which we say is supported for backward compatability&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/jackrabbit-oak/blob/jackrabbit-oak-1.6.5/oak-core/src/main/java/org/apache/jackrabbit/oak/query/facet/package-info.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-oak/blob/jackrabbit-oak-1.6.5/oak-core/src/main/java/org/apache/jackrabbit/oak/query/facet/package-info.java&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16198330" author="catholicon" created="Tue, 10 Oct 2017 08:09:49 +0000"  >&lt;p&gt;Ok, so talked to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chetanm&quot; class=&quot;user-hover&quot; rel=&quot;chetanm&quot;&gt;chetanm&lt;/a&gt; and he pointed me to &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-6607&quot; title=&quot;Oak facet indexes seems to only work for nt:base&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-6607&quot;&gt;&lt;del&gt;OAK-6607&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-6676&quot; title=&quot;rep:facet doesn&amp;#39;t work in combination with aliases in JCR-SQL2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-6676&quot;&gt;OAK-6676&lt;/a&gt;. So, moving the class to &lt;tt&gt;o.a.j.o.query.facet&lt;/tt&gt; in &lt;a href=&quot;https://svn.apache.org/r1811647&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1811647&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16198337" author="teofili" created="Tue, 10 Oct 2017 08:22:30 +0000"  >&lt;p&gt;I think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=catholicon&quot; class=&quot;user-hover&quot; rel=&quot;catholicon&quot;&gt;catholicon&lt;/a&gt; proposal is more consistent with the overall migration effort, however &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chetanm&quot; class=&quot;user-hover&quot; rel=&quot;chetanm&quot;&gt;chetanm&lt;/a&gt; is right that this would be a breaking change anyway, regardless of which bundles are deployed or not, because consumer code would &lt;em&gt;import org.apache.jackrabbit.oak.query.facet.FacetResult&lt;/em&gt; which no bundle is exporting at the moment.&lt;/p&gt;</comment>
                            <comment id="16198339" author="teofili" created="Tue, 10 Oct 2017 08:23:12 +0000"  >&lt;p&gt;ok, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=catholicon&quot; class=&quot;user-hover&quot; rel=&quot;catholicon&quot;&gt;catholicon&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chetanm&quot; class=&quot;user-hover&quot; rel=&quot;chetanm&quot;&gt;chetanm&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16222076" author="edivad" created="Fri, 27 Oct 2017 10:06:20 +0000"  >&lt;p&gt;Bulk close for 1.7.10&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="13076874">OAK-6304</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 3 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3kyj3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>