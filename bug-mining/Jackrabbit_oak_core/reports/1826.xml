<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:54:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-8309]  SLOW_QUERY_COUNT don&apos;t get updated for each slow query.</title>
                <link>https://issues.apache.org/jira/browse/OAK-8309</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;The metrics added should show slow query count but the count is not getting updated for each query.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13232448">OAK-8309</key>
            <summary> SLOW_QUERY_COUNT don&apos;t get updated for each slow query.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thomasm">Thomas Mueller</assignee>
                                    <reporter username="tihom88">Mohit Kataria</reporter>
                        <labels>
                            <label>indexingPatch</label>
                    </labels>
                <created>Thu, 9 May 2019 11:27:07 +0000</created>
                <updated>Mon, 16 Jan 2023 01:58:48 +0000</updated>
                            <resolved>Fri, 17 May 2019 14:29:34 +0000</resolved>
                                    <version>1.12.0</version>
                                    <fixVersion>1.14.0</fixVersion>
                                    <component>indexing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16840979" author="tihom88" created="Thu, 16 May 2019 04:51:04 +0000"  >&lt;p&gt;In Oak-8148, i had used slowCount&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; to update slowquery stats. But sometimes the read count (&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;) count goes ahead of slowCount (because of hidden nodes). As a result exception gets thrown before slowCount breaches traversal threshold.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;: &lt;a href=&quot;https://github.com/apache/jackrabbit-oak/blob/f39431c09f3f23f7652ce753b77ca08ed31ce375/oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/SelectorImpl.java#L505&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-oak/blob/f39431c09f3f23f7652ce753b77ca08ed31ce375/oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/SelectorImpl.java#L505&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;: &lt;a href=&quot;https://github.com/apache/jackrabbit-oak/blob/1b380d3fb6dcb18702649f0c0a997a71315abbd4/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/Cursors.java#L348&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-oak/blob/1b380d3fb6dcb18702649f0c0a997a71315abbd4/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/Cursors.java#L348&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16840982" author="tihom88" created="Thu, 16 May 2019 04:59:22 +0000"  >&lt;p&gt;PFA patch(&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12968870/12968870_0001-OAK-8309-SLOW_QUERY_COUNT-don-t-get-updated-for-each.patch&quot; title=&quot;0001-OAK-8309-SLOW_QUERY_COUNT-don-t-get-updated-for-each.patch attached to OAK-8309&quot;&gt;0001-OAK-8309-SLOW_QUERY_COUNT-don-t-get-updated-for-each.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;) with test case, resolving this issue.&lt;/p&gt;

&lt;p&gt;CC: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thomasm&quot; class=&quot;user-hover&quot; rel=&quot;thomasm&quot;&gt;thomasm&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=catholicon&quot; class=&quot;user-hover&quot; rel=&quot;catholicon&quot;&gt;catholicon&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16841025" author="tmueller" created="Thu, 16 May 2019 06:32:53 +0000"  >&lt;p&gt;The patch looks good! It is a bit large due to formatting changes (removing trailing spaces), but other than that, I don&apos;t see any issues. I will try to commit it later today.&lt;/p&gt;</comment>
                            <comment id="16841029" author="tmueller" created="Thu, 16 May 2019 06:36:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tihom88&quot; class=&quot;user-hover&quot; rel=&quot;tihom88&quot;&gt;tihom88&lt;/a&gt; if you have time, could you remove formatting changes from the patch (just edit the patch file and remove the lines)? That would make a smaller patch. But it&apos;s not very important in my view (others might feel different).&lt;/p&gt;</comment>
                            <comment id="16842196" author="tmueller" created="Fri, 17 May 2019 14:02:34 +0000"  >&lt;p&gt;I made some changes:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Removed formatting changes&lt;/li&gt;
	&lt;li&gt;SelectorImpl: constants were not declared static.&lt;/li&gt;
	&lt;li&gt;FilterIterators: the declared thrown exception changed&lt;/li&gt;
	&lt;li&gt;RuntimeNodeTraversalException: added license header&lt;/li&gt;
	&lt;li&gt;RuntimeNodeTraversalException: added javadocs&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16842217" author="tmueller" created="Fri, 17 May 2019 14:29:00 +0000"  >&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/r1859436&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1859436&lt;/a&gt; (trunk)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tihom88&quot; class=&quot;user-hover&quot; rel=&quot;tihom88&quot;&gt;tihom88&lt;/a&gt; could you verify this matches your expectation?&lt;/p&gt;</comment>
                            <comment id="16844703" author="tihom88" created="Tue, 21 May 2019 10:21:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thomasm&quot; class=&quot;user-hover&quot; rel=&quot;thomasm&quot;&gt;thomasm&lt;/a&gt;, The changes looks fine.&#160;&#160;Thanks for merging and performing the changes I missed.&lt;/p&gt;</comment>
                            <comment id="16860836" author="edivad" created="Tue, 11 Jun 2019 10:51:27 +0000"  >&lt;p&gt;bulk close 1.14.0&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13222812">OAK-8148</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12968870" name="0001-OAK-8309-SLOW_QUERY_COUNT-don-t-get-updated-for-each.patch" size="30278" author="tihom88" created="Thu, 16 May 2019 04:59:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 22 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z02jeo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>