<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:45:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-2058] Hard-coded write concern</title>
                <link>https://issues.apache.org/jira/browse/OAK-2058</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;There are some hard-coded write concerns in MongoDocumentStore. This overrides the default write concern of the MongoDB Java driver or the dynamic write concern mechanism we built in Oak (&lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-759&quot; title=&quot;MongoMK: read from a secondary member when possible&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-759&quot;&gt;&lt;del&gt;OAK-759&lt;/del&gt;&lt;/a&gt;). The hard-coded write concerns date back to when the default was UNACKNOWLEDGED. Starting with version 2.10.0 of the Java Driver the default is now ACKNOWLEDGED (aka SAFE).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12737102">OAK-2058</key>
            <summary>Hard-coded write concern</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mreutegg">Marcel Reutegger</assignee>
                                    <reporter username="mreutegg">Marcel Reutegger</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Aug 2014 13:18:10 +0000</created>
                <updated>Tue, 13 Jan 2015 14:27:04 +0000</updated>
                            <resolved>Wed, 27 Aug 2014 14:57:14 +0000</resolved>
                                    <version>1.0</version>
                                    <fixVersion>1.0.10</fixVersion>
                    <fixVersion>1.1.0</fixVersion>
                                    <component>core</component>
                    <component>mongomk</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14112306" author="mreutegg" created="Wed, 27 Aug 2014 14:57:14 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;http://svn.apache.org/r1620905&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1620905&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14112309" author="chetanm" created="Wed, 27 Aug 2014 14:59:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mreutegg&quot; class=&quot;user-hover&quot; rel=&quot;mreutegg&quot;&gt;mreutegg&lt;/a&gt; Those hardcoded concerns are intentional and were done as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-1645&quot; title=&quot;Route find queries to Mongo secondary in MongoDocumentStore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-1645&quot;&gt;&lt;del&gt;OAK-1645&lt;/del&gt;&lt;/a&gt;. Reasoning being that we set the right concern where we deem its required. For example while reading the root revision we use the preference to Primary. For code flows where we can read from secondaries we do not explicitly specify any preference and rely on the user specifying the perference.&lt;/p&gt;

&lt;p&gt;So per default setup all code paths would use readPreference Primary. And if the user sets the readPreference to say nearest then also Oak would work fine as it would use the default where its safe to read from secondary and still read from primary for critical paths&lt;/p&gt;</comment>
                            <comment id="14112324" author="mreutegg" created="Wed, 27 Aug 2014 15:13:02 +0000"  >&lt;p&gt;That&apos;s fine for the read preference, but this issue is only about write concern. The fix does not change any read preference, it only makes sure one can set a write concern with more guarantees than SAFE. E.g. for &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-1641&quot; title=&quot;Mongo: Un-/CheckedExecutionException on replica-primary crash&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-1641&quot;&gt;&lt;del&gt;OAK-1641&lt;/del&gt;&lt;/a&gt; I&apos;d like to see how the system behaves when I use REPLICA_ACKNOWLEDGED.&lt;/p&gt;</comment>
                            <comment id="14113423" author="chetanm" created="Thu, 28 Aug 2014 06:31:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;That&apos;s fine for the read preference, but this issue is only about write concern.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Aah missed that part. Makes sense, sorry for the noise!&lt;/p&gt;</comment>
                            <comment id="14159950" author="amitjain" created="Mon, 6 Oct 2014 04:09:26 +0000"  >&lt;p&gt;Bulk close for 1.1.0&lt;/p&gt;</comment>
                            <comment id="14275239" author="mreutegg" created="Tue, 13 Jan 2015 14:27:04 +0000"  >&lt;p&gt;Merged into 1.0 branch in &lt;a href=&quot;http://svn.apache.org/r1651359&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1651359&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 44 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ze5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>