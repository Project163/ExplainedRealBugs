<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:54:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-9584] JCR methods only support qualified names but not expanded names for namespace prefix &quot;rep:&quot;.</title>
                <link>https://issues.apache.org/jira/browse/OAK-9584</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;I have a JCR Node which returns&lt;br/&gt;
&lt;tt&gt;true&lt;/tt&gt; for &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
node.hasProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;rep:authorizableId&quot;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; but &lt;br/&gt;
&lt;tt&gt;false&lt;/tt&gt; for &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
node.hasProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;{internal}authorizableId&quot;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;According to &lt;a href=&quot;https://docs.adobe.com/content/docs/en/spec/jcr/2.0/3_Repository_Model.html#3.2.6%20Use%20of%20Qualified%20and%20Expanded%20Names&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.adobe.com/content/docs/en/spec/jcr/2.0/3_Repository_Model.html#3.2.6%20Use%20of%20Qualified%20and%20Expanded%20Names&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;When a JCR name is passed as an argument to a JCR method it may be in either expanded or qualified form. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;this is a violation of the spec.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13403496">OAK-9584</key>
            <summary>JCR methods only support qualified names but not expanded names for namespace prefix &quot;rep:&quot;.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Sep 2021 10:54:00 +0000</created>
                <updated>Sun, 25 May 2025 19:39:55 +0000</updated>
                            <resolved>Mon, 5 May 2025 15:11:20 +0000</resolved>
                                    <version>1.40.0</version>
                                    <fixVersion>1.80.0</fixVersion>
                                    <component>jcr</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17420796" author="kwin" created="Mon, 27 Sep 2021 14:45:53 +0000"  >&lt;p&gt;Failing test at &lt;a href=&quot;https://github.com/apache/jackrabbit-oak/pull/376&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-oak/pull/376&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17420828" author="reschke" created="Mon, 27 Sep 2021 15:37:03 +0000"  >&lt;p&gt;The problem is that &quot;internal&quot; is not a valid namespace name.&lt;/p&gt;</comment>
                            <comment id="17420840" author="kwin" created="Mon, 27 Sep 2021 15:48:33 +0000"  >&lt;blockquote&gt;&lt;p&gt;&quot;internal&quot; is not a valid namespace name.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Why is that? When trying to resolve the prefix &quot;rep&quot; it returns that string i.e. &lt;tt&gt;session.getNamespaceURI(&quot;rep&quot;)&lt;/tt&gt; returns &lt;tt&gt;internal&lt;/tt&gt;. I added an according test case in &lt;a href=&quot;https://github.com/apache/jackrabbit-oak/pull/376/commits/31f68b03599f5357eda68af43df3954d7e663f70&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-oak/pull/376/commits/31f68b03599f5357eda68af43df3954d7e663f70&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;What is the expanded name then for &lt;tt&gt;rep:authorizableId&lt;/tt&gt;?&lt;/p&gt;</comment>
                            <comment id="17420848" author="reschke" created="Mon, 27 Sep 2021 15:57:21 +0000"  >&lt;p&gt;...it does not conform to the grammar, see &amp;lt;&lt;a href=&quot;https://docs.adobe.com/content/docs/en/spec/jcr/2.0/3_Repository_Model.html#3.2.1%20Namespaces&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.adobe.com/content/docs/en/spec/jcr/2.0/3_Repository_Model.html#3.2.1%20Namespaces&lt;/a&gt;&amp;gt;, but the whole concept of expanded names in JCR &lt;b&gt;relies&lt;/b&gt; on the namespace name containing a colon.&lt;/p&gt;
&lt;h3&gt;&lt;a name=&quot;3.2.1Namespaces&quot;&gt;&lt;/a&gt;3.2.1 Namespaces&lt;/h3&gt;

&lt;p&gt;A &lt;em&gt;JCR namespace&lt;/em&gt; is either the empty string or a Universal Resource Identifier^&lt;a href=&quot;https://docs.adobe.com/content/docs/en/spec/jcr/2.0/3_Repository_Model.html#sdfootnote2sym&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;2&lt;/a&gt;^.&lt;/p&gt;

&lt;p&gt;Namespace ::= EmptyString | Uri&lt;br/&gt;
 EmptyString ::= /* The empty string */&lt;/p&gt;

&lt;p&gt;Uri ::= /* A URI, as defined in Section 3 in &lt;a href=&quot;http://tools.ietf.org/html/rfc3986#section-3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://tools.ietf.org/html/rfc3986#section-3&lt;/a&gt; */&lt;/p&gt;

&lt;p&gt;&#160;&lt;br/&gt;
 (yes, this is an old issue)&lt;/p&gt;</comment>
                            <comment id="17420854" author="kwin" created="Mon, 27 Sep 2021 16:03:20 +0000"  >&lt;p&gt;Is the proposal from &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-74?focusedCommentId=13830098&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13830098&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/OAK-74?focusedCommentId=13830098&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13830098&lt;/a&gt; still the right way to tackle this? Obviously this has never been implemented! How can we solve this in a backwards-compatible way?&lt;/p&gt;</comment>
                            <comment id="17420858" author="reschke" created="Mon, 27 Sep 2021 16:07:01 +0000"  >&lt;p&gt;I would be reluctant to make that change at this point (unless it really replicates Jackrabbit behaviour).&lt;/p&gt;

&lt;p&gt;Another approach might be to internally alias &quot;internal:&quot; to &quot;internal&quot;.&lt;/p&gt;</comment>
                            <comment id="17421207" author="kwin" created="Tue, 28 Sep 2021 06:59:45 +0000"  >&lt;p&gt;For the time being I would propose to just document this limitation. I added &lt;a href=&quot;https://github.com/apache/jackrabbit-oak/pull/377/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-oak/pull/377/files&lt;/a&gt; for that.&lt;/p&gt;</comment>
                            <comment id="17433588" author="kwin" created="Mon, 25 Oct 2021 06:41:21 +0000"  >&lt;p&gt;I also added a failing (but ignored test) for this behaviour in &lt;a href=&quot;https://github.com/apache/jackrabbit-oak/commit/ca5367d8279ab72b8b839bc751ec4f817b4dc45f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-oak/commit/ca5367d8279ab72b8b839bc751ec4f817b4dc45f&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17433590" author="reschke" created="Mon, 25 Oct 2021 06:47:54 +0000"  >&lt;p&gt;I&apos;m not convinced that using the old-style &quot;known.issues&quot; mechanism is a good idea. In Oak, we&apos;ve used the &quot;@ignore&quot; annotation instead. Mixing both in the same code base might be confusing.&lt;/p&gt;</comment>
                            <comment id="17433592" author="kwin" created="Mon, 25 Oct 2021 06:52:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mreutegg&quot; class=&quot;user-hover&quot; rel=&quot;mreutegg&quot;&gt;mreutegg&lt;/a&gt; proposed using &quot;known.issues&quot; in &lt;a href=&quot;https://github.com/apache/jackrabbit-oak/pull/376#issuecomment-937700312&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-oak/pull/376#issuecomment-937700312&lt;/a&gt;. Also I didn&apos;t get any feedback on my question in &lt;a href=&quot;https://github.com/apache/jackrabbit-oak/pull/376#issuecomment-947387590&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-oak/pull/376#issuecomment-947387590&lt;/a&gt;. Therefore I went ahead with this solution.&lt;br/&gt;
I am also fine with just using an ignore (although that way it is harder to see at one glance which known issues are there). &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reschke&quot; class=&quot;user-hover&quot; rel=&quot;reschke&quot;&gt;reschke&lt;/a&gt; Feel free to convert the test code.&lt;/p&gt;</comment>
                            <comment id="17433699" author="mreutegg" created="Mon, 25 Oct 2021 11:28:34 +0000"  >&lt;blockquote&gt;&lt;p&gt;I didn&apos;t get any feedback on my question&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Apologies for my late reply. I was away last week. You are right, the known.issues list only applies to tests extending from AbstractJCRTest. Many tests in oak-jcr do, but ValidNamesTest does not. I like your solution, even though a simple Ignore annotation would also work.&lt;/p&gt;</comment>
                            <comment id="17609365" author="reschke" created="Mon, 26 Sep 2022 08:29:49 +0000"  >&lt;p&gt;System works as specified. The problem is the illegal namespace name.&lt;/p&gt;</comment>
                            <comment id="17947632" author="kwin" created="Sun, 27 Apr 2025 15:57:32 +0000"  >&lt;p&gt;I would like to revisit the decision to close this and &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-74&quot; title=&quot;avoid use of &amp;quot;internal&amp;quot; namespace&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-74&quot;&gt;&lt;del&gt;OAK-74&lt;/del&gt;&lt;/a&gt; as &quot;Not a bug&quot;/&quot;Won&apos;t fix&quot; in the context of &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-11397&quot; title=&quot;Provide a way to get expanded names for items&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-11397&quot;&gt;&lt;del&gt;OAK-11397&lt;/del&gt;&lt;/a&gt;. I do think that from a consumer perspective this is a bug! I think tackling it the same as in JR2 (i.e. treat &lt;tt&gt;internal&lt;/tt&gt; enclosed in curly brackets an invalid local name and detect names starting with it as expanded form using this built-in mapping) is actually the preferred handling here. Right now this inconsistency with regards to &quot;rep&quot; prefix leads to edge case issues which are hard to detect. At the same time I would propose to make the  namespace registration more strict (i.e. throw an exception for every invalid URI given to registerNamespace(...) except for &quot;internal&quot;). WDYT?&lt;/p&gt;

&lt;p&gt;This would require a change in the &lt;a href=&quot;https://github.com/apache/jackrabbit-oak/blob/4b7c14a6dd4d36d546306503c397d0a1ee627f9e/oak-core/src/main/java/org/apache/jackrabbit/oak/namepath/impl/GlobalNameMapper.java#L197&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-oak/blob/4b7c14a6dd4d36d546306503c397d0a1ee627f9e/oak-core/src/main/java/org/apache/jackrabbit/oak/namepath/impl/GlobalNameMapper.java#L197&lt;/a&gt; to also add a special case for &quot;internal&quot; (similar as to for the existing special case for the empty namespace).&lt;/p&gt;</comment>
                            <comment id="17948357" author="reschke" created="Wed, 30 Apr 2025 04:39:48 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the &lt;b&gt;default&lt;/b&gt; behavior for what namespace names can be registered we can&apos;t change (backwards compat)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the behaviors for get/has for all items should be consistent.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17949469" author="kwin" created="Mon, 5 May 2025 15:10:11 +0000"  >&lt;blockquote&gt;&lt;p&gt;the default behavior for what namespace names can be registered we can&apos;t change (backwards compat)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is tracked separately in &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-11683&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/OAK-11683&lt;/a&gt;, feel free to have a look at its linked PR.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;the behaviors for get/has for all items should be consistent.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I adjusted the title to make it clear that all JCR method taking a name are affected.&lt;/p&gt;</comment>
                            <comment id="17949470" author="kwin" created="Mon, 5 May 2025 15:11:20 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/jackrabbit-oak/commit/bb5ca5a6e011f07385ff965d3166ad8d7e636bf1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-oak/commit/bb5ca5a6e011f07385ff965d3166ad8d7e636bf1&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13619142">OAK-11738</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13616504">OAK-11683</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12552634">OAK-74</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13540042">OAK-10304</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13483037">JCRVLT-658</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            26 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0vbk0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>