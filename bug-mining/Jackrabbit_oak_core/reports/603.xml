<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:41:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-1272] Remove and create of same versionable node is seen as a change in uuid</title>
                <link>https://issues.apache.org/jira/browse/OAK-1272</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;When trying to remove and create the very same versionable node in a same JCR session it seems the &lt;em&gt;VersionEditor&lt;/em&gt; sees that as a single change on the &lt;em&gt;jcr:uuid&lt;/em&gt; property if the node is checkedin and therefore it fails in saving the &lt;em&gt;Session&lt;/em&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12683868">OAK-1272</key>
            <summary>Remove and create of same versionable node is seen as a change in uuid</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mreutegg">Marcel Reutegger</assignee>
                                    <reporter username="teofili">Tommaso Teofili</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Dec 2013 16:32:46 +0000</created>
                <updated>Mon, 13 Jan 2014 13:05:54 +0000</updated>
                            <resolved>Wed, 18 Dec 2013 14:52:37 +0000</resolved>
                                    <version>0.12</version>
                                    <fixVersion>0.14</fixVersion>
                                    <component>core</component>
                    <component>jcr</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13844399" author="teofili" created="Tue, 10 Dec 2013 16:33:54 +0000"  >&lt;p&gt;here&apos;s a sample testcase which highlights the reported (AFAIU wrong) behavior:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testRemoveAndCreateSameVersionableChildNode() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-comment&quot;&gt;// create parent
&lt;/span&gt;        Node parentNode = testRootNode.addNode(&lt;span class=&quot;code-quote&quot;&gt;&quot;parent&quot;&lt;/span&gt;);
        parentNode.setPrimaryType(&lt;span class=&quot;code-quote&quot;&gt;&quot;nt:unstructured&quot;&lt;/span&gt;);
        parentNode.setProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;sample&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-comment&quot;&gt;// crete a versionable child
&lt;/span&gt;        Node createdNode = parentNode.addNode(&lt;span class=&quot;code-quote&quot;&gt;&quot;versionablechild&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;nt:unstructured&quot;&lt;/span&gt;);
        createdNode.addMixin(JcrConstants.MIX_VERSIONABLE);
        superuser.save();

        VersionManager vm = superuser.getWorkspace().getVersionManager();
        vm.checkin(testRootNode.getPath()+&lt;span class=&quot;code-quote&quot;&gt;&quot;/parent/versionablechild&quot;&lt;/span&gt;);

        &lt;span class=&quot;code-comment&quot;&gt;// delete and create exact same node
&lt;/span&gt;        Node parent = testRootNode.getNode(&lt;span class=&quot;code-quote&quot;&gt;&quot;parent&quot;&lt;/span&gt;);

        &lt;span class=&quot;code-comment&quot;&gt;// remove children
&lt;/span&gt;        NodeIterator nodes = parent.getNodes();
        &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (nodes.hasNext()) {
            Node childNode = nodes.nextNode();
            childNode.remove();
        }
&lt;span class=&quot;code-comment&quot;&gt;//        superuser.save(); // &amp;lt;-- enabling &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; makes the test pass
&lt;/span&gt;
        &lt;span class=&quot;code-comment&quot;&gt;// create again versionable child node
&lt;/span&gt;        Node recreatedNode = parent.addNode(&lt;span class=&quot;code-quote&quot;&gt;&quot;versionablechild&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;nt:unstructured&quot;&lt;/span&gt;);
        recreatedNode.addMixin(JcrConstants.MIX_VERSIONABLE);
        superuser.save();
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13844402" author="teofili" created="Tue, 10 Dec 2013 16:36:13 +0000"  >&lt;p&gt;patch containing the testcase added to &lt;em&gt;VersionableTest&lt;/em&gt;&lt;/p&gt;</comment>
                            <comment id="13845370" author="mreutegg" created="Wed, 11 Dec 2013 13:01:11 +0000"  >&lt;p&gt;Thanks you for the test, Tommaso. I will look into it.&lt;/p&gt;</comment>
                            <comment id="13845373" author="mreutegg" created="Wed, 11 Dec 2013 13:05:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-1118&quot; title=&quot;Removing and readding mix:versionable fails if node is referenceable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-1118&quot;&gt;&lt;del&gt;OAK-1118&lt;/del&gt;&lt;/a&gt; is a related problem.&lt;/p&gt;</comment>
                            <comment id="13851783" author="mreutegg" created="Wed, 18 Dec 2013 14:52:37 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;http://svn.apache.org/r1551963&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1551963&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13869481" author="alex.parvulescu" created="Mon, 13 Jan 2014 13:05:54 +0000"  >&lt;p&gt;bulk close for the 0.14 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12675799">OAK-1118</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12618058" name="OAK-1272.test.patch" size="2518" author="teofili" created="Tue, 10 Dec 2013 16:36:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362940</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 44 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1qk9b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>363246</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>