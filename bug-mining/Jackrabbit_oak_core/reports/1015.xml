<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:45:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-2088] AsyncIndexUpdate can leave orphaned checkpoint in case of abrupt shutdown</title>
                <link>https://issues.apache.org/jira/browse/OAK-2088</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;Currently AsyncIndexUpdate creates a checkpoint with a lifetime of 3&lt;br/&gt;
years. Post index complete the checkpoint is moved to point to revision upto which indexing is done and previous checkpoint is released.&lt;/p&gt;

&lt;p&gt;Now if a system is killed when a index update is in progress particularly in run method where a new checkpoint gets created (Line 229) then that checkpoint would not be released and also would not be recorded in index metadata. Such a checkpoint would prevent GC for a long time.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://markmail.org/thread/e4jqkk2malfgjxx6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://markmail.org/thread/e4jqkk2malfgjxx6&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12740342">OAK-2088</key>
            <summary>AsyncIndexUpdate can leave orphaned checkpoint in case of abrupt shutdown</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stillalex">Alex Deparvu</assignee>
                                    <reporter username="chetanm">Chetan Mehrotra</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Sep 2014 08:32:31 +0000</created>
                <updated>Wed, 1 Oct 2014 13:03:52 +0000</updated>
                            <resolved>Fri, 19 Sep 2014 12:50:24 +0000</resolved>
                                                    <fixVersion>1.0.6</fixVersion>
                    <fixVersion>1.1.0</fixVersion>
                                    <component>core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14135362" author="alex.parvulescu" created="Tue, 16 Sep 2014 12:29:46 +0000"  >&lt;p&gt;patch to store the temp checkpoint under the async node while it is being indexed. this will allow a cleanup to take place in the case where there is an abnormal shutdown (no cleanup).&lt;br/&gt;
checkpoint management can be made even better with &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-2100&quot; title=&quot;Change NodeStore#release method to return a boolean&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-2100&quot;&gt;&lt;del&gt;OAK-2100&lt;/del&gt;&lt;/a&gt;: we can also check if the temp checkpoints have been cleared successfully.&lt;/p&gt;</comment>
                            <comment id="14135378" author="alex.parvulescu" created="Tue, 16 Sep 2014 12:43:54 +0000"  >&lt;p&gt;attaching a better version that circumvents a NPE&lt;/p&gt;</comment>
                            <comment id="14135566" author="alex.parvulescu" created="Tue, 16 Sep 2014 14:56:32 +0000"  >&lt;p&gt;better version that includes api changes from &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-2100&quot; title=&quot;Change NodeStore#release method to return a boolean&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-2100&quot;&gt;&lt;del&gt;OAK-2100&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14135578" author="alex.parvulescu" created="Tue, 16 Sep 2014 15:07:51 +0000"  >&lt;blockquote&gt;&lt;p&gt;log.debug(&quot;Unable to reelase checkpoint {}&quot;, checkpointToRelease);&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I&apos;m not exactly sure if this should be a &lt;em&gt;warning&lt;/em&gt; rather than a &lt;em&gt;debug&lt;/em&gt; seeing how important checkpoint cleanup is to the tarmk.&lt;/p&gt;</comment>
                            <comment id="14140428" author="alex.parvulescu" created="Fri, 19 Sep 2014 12:50:24 +0000"  >&lt;p&gt;fixed in trunk with rev 1625620. and merged to 1.0 with rev 1625620 and 1625639.&lt;/p&gt;</comment>
                            <comment id="14147404" author="amitjain" created="Thu, 25 Sep 2014 05:37:12 +0000"  >&lt;p&gt;Bulk close for 1.0.6&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12669077" name="OAK-2088-v2.patch" size="9750" author="stillalex" created="Tue, 16 Sep 2014 14:56:32 +0000"/>
                            <attachment id="12669045" name="OAK-2088.patch" size="9279" author="stillalex" created="Tue, 16 Sep 2014 12:43:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 8 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1zvc7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>