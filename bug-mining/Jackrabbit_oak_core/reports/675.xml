<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:42:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-1175] Security Concerns wrt Index Definitions</title>
                <link>https://issues.apache.org/jira/browse/OAK-1175</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;see &lt;a href=&quot;http://markmail.org/message/5ivmvhi7jbuo3jp6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://markmail.org/message/5ivmvhi7jbuo3jp6&lt;/a&gt; for the initial request for discussion.&lt;/p&gt;

&lt;p&gt;biggest pain points from a security perspective:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;missing protection or concept for protection in a default setup&lt;/li&gt;
	&lt;li&gt;location of the index definitions&lt;/li&gt;
	&lt;li&gt;node types of the nodes associated with index definitions and index content&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12678986">OAK-1175</key>
            <summary>Security Concerns wrt Index Definitions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="angela">Angela Schreiber</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                            <label>security</label>
                    </labels>
                <created>Wed, 13 Nov 2013 10:34:12 +0000</created>
                <updated>Thu, 27 Feb 2014 09:28:45 +0000</updated>
                            <resolved>Tue, 18 Feb 2014 16:22:16 +0000</resolved>
                                                    <fixVersion>0.17</fixVersion>
                                    <component>core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                                                            <comments>
                            <comment id="13903150" author="anchela" created="Mon, 17 Feb 2014 11:19:29 +0000"  >&lt;p&gt;we had a look at the oak query index definitions again during our internal security gathering at adobe.&lt;/p&gt;

&lt;p&gt;the overall feeling was that in fact treating the creation of query index definitions and thus query indices should be separated from regular write access. apart from proper separation of concerns we also considers this a possible attack.&lt;/p&gt;

&lt;p&gt;so, i would like to propose the following way to address this issue:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;define a separate privilege that allows for writing index definitions&lt;/li&gt;
	&lt;li&gt;enforce permissions for creation/modification/removal of index definitions based on that dedicated privileges.&lt;/li&gt;
	&lt;li&gt;read access to the index definition would be enforced by regular read-permission&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;note: so far we only create dedicated privileges for protected items. while i can live with making an exception for the query index definitions we should at least be aware that it introduces some sort of inconsistency on how we define &apos;special&apos; content that requires dedicated permissions to be enforced.&lt;/p&gt;

&lt;p&gt;as a side effect: not making the query index definitions protected would e.g. allow for creating access control content for index-definition related content, which IMO doesn&apos;t make sense if writing is controlled by a dedicated privileges.&lt;/p&gt;</comment>
                            <comment id="13903422" author="anchela" created="Mon, 17 Feb 2014 18:24:16 +0000"  >&lt;p&gt;proposed patch introducing dedicated permissions for writing the oak:index node and the index definitions defined in the subtree.&lt;/p&gt;</comment>
                            <comment id="13903426" author="anchela" created="Mon, 17 Feb 2014 18:30:16 +0000"  >&lt;p&gt;while working on the patch for introducing specific permission for writing index definition, i stumbled again over the magic behind the oak:index node.&lt;br/&gt;
IMO it would be way better from a content modeling point of view if we had some minimal structure associated with the oak:index node. currently it&apos;s just the oak:index name that does all the magic... so even a oak:index node of type nt:file needs to be treated like the root of index definitions even if cannot have direct child nodes of type oak:QueryIndexDefinition. those might be burried somewhere in the jcr:content node of that file... not sure if that will even work properly right now.&lt;/p&gt;</comment>
                            <comment id="13904060" author="anchela" created="Tue, 18 Feb 2014 14:01:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alex.parvulescu&quot; class=&quot;user-hover&quot; rel=&quot;alex.parvulescu&quot;&gt;alex.parvulescu&lt;/a&gt;, maybe you could take a quick look a the patch to see if that looks doable to you?&lt;/p&gt;</comment>
                            <comment id="13904090" author="alex.parvulescu" created="Tue, 18 Feb 2014 14:29:26 +0000"  >&lt;p&gt;+1 for the patch. adding a permission for writing the oak:index node sounds ok to me.&lt;/p&gt;

&lt;p&gt;How will this interfere with normal property index updates? So far, if I&apos;m not mistaken, updating hidden nodes (the index content itself) was not checked for permissions.&lt;/p&gt;</comment>
                            <comment id="13904098" author="anchela" created="Tue, 18 Feb 2014 14:42:22 +0000"  >&lt;p&gt;you are right... hidden content is ignored by the permission evaluation. in other words: the patch would just have an impact on creating the oak:index node and the non-hidden subtree that is expected to store index definitions.&lt;/p&gt;</comment>
                            <comment id="13904210" author="anchela" created="Tue, 18 Feb 2014 16:22:16 +0000"  >&lt;p&gt;rev. 1569408&lt;/p&gt;

&lt;p&gt;regarding content modeling: we may still pick that up later on in another issue.&lt;/p&gt;</comment>
                            <comment id="13914254" author="alex.parvulescu" created="Thu, 27 Feb 2014 09:28:45 +0000"  >&lt;p&gt;bulk close for the 0.17.1 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12629411" name="OAK-1175.patch" size="24530" author="angela" created="Mon, 17 Feb 2014 18:24:16 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12679070">OAK-1181</subtask>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>358351</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 38 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1prwv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>358641</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>