<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:43:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-1564] ClockTest on Windows fails</title>
                <link>https://issues.apache.org/jira/browse/OAK-1564</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;&lt;tt&gt;ClockTest.testClockDrift&lt;/tt&gt; fails on Windows:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;junit.framework.AssertionFailedError: unexpected drift: 26 (limit 20)
at junit.framework.Assert.fail(Assert.java:50)
at junit.framework.Assert.assertTrue(Assert.java:20)
at org.apache.jackrabbit.oak.stats.ClockTest.testClockDrift(ClockTest.java:72)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;JAVA_HOME=C:\Program Files\Java\jdk1.7.0_51&lt;br/&gt;
NUMBER_OF_PROCESSORS=2&lt;br/&gt;
OS=Windows_NT&lt;br/&gt;
PROCESSOR_ARCHITECTURE=AMD64&lt;br/&gt;
PROCESSOR_IDENTIFIER=Intel64 Family 6 Model 46 Stepping 6, GenuineIntel&lt;br/&gt;
PROCESSOR_LEVEL=6&lt;br/&gt;
PROCESSOR_REVISION=2e06&lt;/p&gt;
</environment>
        <key id="12702166">OAK-1564</key>
            <summary>ClockTest on Windows fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="reschke">Julian Reschke</assignee>
                                    <reporter username="mduerig">Michael D&#252;rig</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Mar 2014 14:51:08 +0000</created>
                <updated>Tue, 8 Apr 2014 12:47:20 +0000</updated>
                            <resolved>Thu, 27 Mar 2014 16:14:06 +0000</resolved>
                                                    <fixVersion>0.20</fixVersion>
                                    <component>core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13939313" author="jukkaz" created="Tue, 18 Mar 2014 14:55:38 +0000"  >&lt;p&gt;This is the latest trunk, after revision 1577177?&lt;/p&gt;</comment>
                            <comment id="13939317" author="mduerig" created="Tue, 18 Mar 2014 14:55:51 +0000"  >&lt;p&gt;Disabled the test at &lt;a href=&quot;http://svn.apache.org/r1578939&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1578939&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13939333" author="mduerig" created="Tue, 18 Mar 2014 15:01:52 +0000"  >&lt;p&gt;Yes this failed on a recent checkout from today. &lt;/p&gt;</comment>
                            <comment id="13940453" author="reschke" created="Wed, 19 Mar 2014 13:21:28 +0000"  >&lt;p&gt;I had similar issues like that before Jukka&apos;s fix, but not anymore &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. Tested with both JDK 6 and 7.&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Well, once with a reported drift of 20.&lt;/p&gt;</comment>
                            <comment id="13941867" author="reschke" created="Thu, 20 Mar 2014 15:55:59 +0000"  >&lt;p&gt;This patch adds a method to calculate the average granularity of System.currentTimeMillis() in 1/1000ms, invoked from main().&lt;/p&gt;

&lt;p&gt;On my desktop, it first returned 10000, but now reliably says 1000, and I don&apos;t believe I have changed anything. On my desktop, it always says ~1000.&lt;/p&gt;

&lt;p&gt;Interested parties: please test on your machines and report the results.&lt;/p&gt;</comment>
                            <comment id="13943220" author="reschke" created="Fri, 21 Mar 2014 16:38:08 +0000"  >&lt;p&gt;And the answer is over here: &lt;a href=&quot;http://randomascii.wordpress.com/2013/07/08/windows-timer-resolution-megawatts-wasted/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://randomascii.wordpress.com/2013/07/08/windows-timer-resolution-megawatts-wasted/&lt;/a&gt; - in my case, the timer resolution is 1ms when Chrome is running, and 10ms when it is not.&lt;/p&gt;

&lt;p&gt;Believe it or not: IntelliJ changes the resolution as well, so these problems will never be visible from within the IDE. Eclipse however leaves the default as is.&lt;/p&gt;</comment>
                            <comment id="13943263" author="jukkaz" created="Fri, 21 Mar 2014 17:22:58 +0000"  >&lt;p&gt;Interesting! That also explains why I&apos;ve consistently seen 1ms resolution on my laptop - I keep Chrome running all the time.&lt;/p&gt;</comment>
                            <comment id="13943967" author="reschke" created="Sat, 22 Mar 2014 08:37:54 +0000"  >&lt;p&gt;Note that on Windows, &quot;powercfg -energy&quot; can report what application changed the timer settings (needs admin privileges, and for some reason doesn&apos;t run from cygwin). SysInternals&apos; &quot;ClockRes&quot; tool can be used to report the current setting.&lt;/p&gt;</comment>
                            <comment id="13944818" author="mreutegg" created="Mon, 24 Mar 2014 08:50:45 +0000"  >&lt;p&gt;With recent changes, this test now fails quite regularly on my machine (Win7, i7-720qm, chrome running).&lt;/p&gt;

&lt;p&gt;During the maven build the unexpected drift is usually around 20ms with estimated limit of 2ms. Running it from IntelliJ fails about half of the time with unexpected drift in the area of 3-4ms.&lt;/p&gt;</comment>
                            <comment id="13944893" author="reschke" created="Mon, 24 Mar 2014 10:28:42 +0000"  >&lt;p&gt;Marcel: weird. Can you run the main() function a few times to see whether the code that tries to determine the granularity does the right thing?&lt;/p&gt;</comment>
                            <comment id="13944928" author="mreutegg" created="Mon, 24 Mar 2014 11:12:24 +0000"  >&lt;p&gt;The main method returns either 1000 or 1050.&lt;/p&gt;</comment>
                            <comment id="13944937" author="reschke" created="Mon, 24 Mar 2014 11:24:57 +0000"  >&lt;p&gt;It the drift is 20ms where 2ms is expected that indicates that the attempt to determine the granularity failed. (Race condition?)&lt;/p&gt;

&lt;p&gt;If the drift is 3-4ms where something lower was expected this indicates that indeed the Clock drift was higher than it should have been. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jukkaz&quot; class=&quot;user-hover&quot; rel=&quot;jukkaz&quot;&gt;jukkaz&lt;/a&gt; can you have another look at implementation &amp;amp; test?&lt;/p&gt;</comment>
                            <comment id="13949497" author="reschke" created="Thu, 27 Mar 2014 16:14:06 +0000"  >&lt;p&gt;(Jukka made changes wrt the test expectations)&lt;/p&gt;</comment>
                            <comment id="13962849" author="alex.parvulescu" created="Tue, 8 Apr 2014 12:47:20 +0000"  >&lt;p&gt;bulk close for the 0.20.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12635805" name="OAK-1564.diff" size="2299" author="reschke" created="Thu, 20 Mar 2014 15:55:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>380506</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 32 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1tk6v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>380787</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>