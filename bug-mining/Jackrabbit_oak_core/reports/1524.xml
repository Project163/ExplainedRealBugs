<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:51:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-4664] Disabling lease check via DocumentMK builder does not work</title>
                <link>https://issues.apache.org/jira/browse/OAK-4664</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;While writing a cluster test where multiple DocumentNodeStore instance are created the test case log exception like &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;17:20:34.852 TRACE [DocumentNodeStore lease update thread (1)] ClusterNodeInfo.java:761 renewLease - leaseEndTime: 1470829945825, leaseTime: 120000, leaseUpdateInterval: 10000
17:20:35.006 TRACE [DocumentNodeStore lease update thread (2)] ClusterNodeInfo.java:761 renewLease - leaseEndTime: 1470829945987, leaseTime: 120000, leaseUpdateInterval: 10000
17:20:35.855 TRACE [DocumentNodeStore lease update thread (1)] ClusterNodeInfo.java:761 renewLease - leaseEndTime: 1470829945825, leaseTime: 120000, leaseUpdateInterval: 10000
17:20:35.856 ERROR [DocumentNodeStore lease update thread (1)] ClusterNodeInfo.java:779 This oak instance failed to update the lease in time and can therefore no longer access this DocumentNodeStore.
17:20:35.857 WARN  [DocumentNodeStore lease update thread (1)] DocumentNodeStore.java:2590 Background operation failed: java.lang.AssertionError: This oak instance failed to update the lease in time and can therefore no longer access this DocumentNodeStore.
java.lang.AssertionError: This oak instance failed to update the lease in time and can therefore no longer access this DocumentNodeStore.
	at org.apache.jackrabbit.oak.plugins.document.ClusterNodeInfo.renewLease(ClusterNodeInfo.java:780) ~[classes/:na]
	at org.apache.jackrabbit.oak.plugins.document.DocumentNodeStore.renewClusterIdLease(DocumentNodeStore.java:1772) ~[classes/:na]
	at org.apache.jackrabbit.oak.plugins.document.DocumentNodeStore$BackgroundLeaseUpdate.execute(DocumentNodeStore.java:2643) ~[classes/:na]
	at org.apache.jackrabbit.oak.plugins.document.DocumentNodeStore$NodeStoreTask.run(DocumentNodeStore.java:2588) ~[classes/:na]
	at java.lang.Thread.run(Thread.java:745) [na:1.7.0_55]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This happens because &lt;tt&gt;instanceId&lt;/tt&gt; is same (same JVM process used for both cluster node). To enable such test we need to disable the leasecheck but doing that via DocumentMK does not work&lt;/p&gt;</description>
                <environment></environment>
        <key id="12996529">OAK-4664</key>
            <summary>Disabling lease check via DocumentMK builder does not work</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="chetanm">Chetan Mehrotra</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Aug 2016 05:24:02 +0000</created>
                <updated>Mon, 13 Sep 2021 09:48:41 +0000</updated>
                            <resolved>Wed, 17 Aug 2016 11:25:47 +0000</resolved>
                                                    <fixVersion>1.5.9</fixVersion>
                    <fixVersion>1.6.0</fixVersion>
                                    <component>documentmk</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15420897" author="egli" created="Mon, 15 Aug 2016 12:09:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chetanm&quot; class=&quot;user-hover&quot; rel=&quot;chetanm&quot;&gt;chetanm&lt;/a&gt;, attached &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12823669/12823669_OAK-4664.patch&quot; title=&quot;OAK-4664.patch attached to OAK-4664&quot;&gt;OAK-4664.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; with a suggestion to propagate &lt;tt&gt;DocumentMk.Builder.getLeaseCheck()&lt;/tt&gt; to &lt;tt&gt;ClusterNodeInfo.leaseCheckDisabled&lt;/tt&gt;. simple, minimal. wdyt?&lt;/p&gt;</comment>
                            <comment id="15424299" author="chetanm" created="Wed, 17 Aug 2016 11:09:42 +0000"  >&lt;p&gt;+1. looks fine&lt;/p&gt;</comment>
                            <comment id="15424320" author="egli" created="Wed, 17 Aug 2016 11:25:48 +0000"  >&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1756616&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;fixed in trunk&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15464591" author="edivad" created="Mon, 5 Sep 2016 09:33:21 +0000"  >&lt;p&gt;Bulk close for 1.5.9&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12823669" name="OAK-4664.patch" size="1910" author="stefanegli" created="Mon, 15 Aug 2016 12:09:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 10 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i326s7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>