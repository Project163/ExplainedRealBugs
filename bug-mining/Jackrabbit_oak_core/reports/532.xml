<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:40:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-901] Test root node type is not reported correctly</title>
                <link>https://issues.apache.org/jira/browse/OAK-901</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;The test root used in the jcr tests is created as &lt;em&gt;nt:unstructured&lt;/em&gt; but calling &lt;em&gt;testRootNode.getDefinition().getDeclaringNodeType().getName()&lt;/em&gt; will wrongfully return &lt;em&gt;rep:root&lt;/em&gt; (the node type of the repository root)&lt;/p&gt;

&lt;p&gt;This also influences the &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-900&quot; title=&quot;Run Jackrabbit Observation tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-900&quot;&gt;&lt;del&gt;OAK-900&lt;/del&gt;&lt;/a&gt; tests, namely the &lt;em&gt;ReorderTest&lt;/em&gt; which will throw an &lt;em&gt;NotExecutableException&lt;/em&gt; on account of the wrong node type.&lt;/p&gt;

&lt;p&gt;I&apos;ll shortly add a test.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12657969">OAK-901</key>
            <summary>Test root node type is not reported correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jukkaz">Jukka Zitting</assignee>
                                    <reporter username="stillalex">Alex Deparvu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Jul 2013 11:49:42 +0000</created>
                <updated>Thu, 21 Nov 2013 10:30:52 +0000</updated>
                            <resolved>Tue, 12 Nov 2013 20:52:49 +0000</resolved>
                                                    <fixVersion>0.11</fixVersion>
                                    <component>core</component>
                    <component>jcr</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13709694" author="alex.parvulescu" created="Tue, 16 Jul 2013 11:53:51 +0000"  >&lt;p&gt;Test (ignored) in with &lt;a href=&quot;http://svn.apache.org/r1503668&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1503668&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13711031" author="mduerig" created="Wed, 17 Jul 2013 12:37:41 +0000"  >&lt;p&gt;For clarification we have:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[rep:root] &amp;gt; nt:unstructured
  + jcr:system (rep:system) = rep:system mandatory IGNORE
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;What should &lt;tt&gt;getDeclaringNodeType()&lt;/tt&gt; on a child node of the root return? AFAIK Oak returns &lt;tt&gt;rep:root&lt;/tt&gt; and Jackrabbit 2 returns &lt;tt&gt;nt:unstructured&lt;/tt&gt;. Both seems correct to me and the specification seems to be silent on declaring node types under inheritance. For the sake of backward compatibility we should probably change this in Oak.&lt;/p&gt;</comment>
                            <comment id="13820019" author="anchela" created="Tue, 12 Nov 2013 11:14:26 +0000"  >&lt;p&gt;IMO it&apos;s pretty clear: the only node that has rep:root as declaring node type is /jcr:system.&lt;br/&gt;
all the other child nodes of the root are defined by the nt:unstructured super type and thus should report nt:unstructured as declaring node type.&lt;/p&gt;

&lt;p&gt;so, i suspect that this problem is not limited to the children of the root node but applies for all nodes as most probable the implementation behaves differently on how the declaring node type is determined. IMO we should fix that in general not just for that specific case.&lt;/p&gt;</comment>
                            <comment id="13820438" author="jukkaz" created="Tue, 12 Nov 2013 20:52:49 +0000"  >&lt;p&gt;Fixed in revision 1541230.&lt;/p&gt;</comment>
                            <comment id="13828789" author="alex.parvulescu" created="Thu, 21 Nov 2013 10:30:52 +0000"  >&lt;p&gt;bulk close for the 0.11 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>338163</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1mbsn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>338484</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>