<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:54:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-8101] AccessControlValidator prevents alternative authorization models to use restrictions</title>
                <link>https://issues.apache.org/jira/browse/OAK-8101</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stillalex&quot; class=&quot;user-hover&quot; rel=&quot;stillalex&quot;&gt;stillalex&lt;/a&gt;, while working on an authorization related PoC I noticed that the &lt;tt&gt;AccessControlValidator&lt;/tt&gt; present with the default implementation essentially prevents additional authorization models to make use of the default &lt;tt&gt;RestrictionProvider&lt;/tt&gt; implementation that stores restrictions in a dedicated tree of type &lt;em&gt;rep:Restrictions&lt;/em&gt;. It does so by asserting that a &lt;tt&gt;NodeState&lt;/tt&gt; with this primary type is always located below an access control entry with the format defined by the default impl before validating the restrictions.&lt;/p&gt;

&lt;p&gt;This could e.g. be fixed as follows:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if the parent &lt;tt&gt;NodeState&lt;/tt&gt; is indeed an entry as defined by the default implementation -&amp;gt; validate using implementation details&lt;/li&gt;
	&lt;li&gt;otherwise: throw &lt;tt&gt;CommitFailedException&lt;/tt&gt; if the parent &lt;tt&gt;NodeState&lt;/tt&gt; does not denotes an access control tree as defined by the (composite) &lt;tt&gt;Context&lt;/tt&gt;.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This would allow other models to make use of restrictions and validate them accordingly, while still failing the commit if an isolated restriction tree was spotted i.e. one outside of the access control context.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13218918">OAK-8101</key>
            <summary>AccessControlValidator prevents alternative authorization models to use restrictions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="angela">Angela Schreiber</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Fri, 1 Mar 2019 16:14:49 +0000</created>
                <updated>Mon, 15 Apr 2019 09:19:40 +0000</updated>
                            <resolved>Wed, 6 Mar 2019 13:12:07 +0000</resolved>
                                                    <fixVersion>1.12.0</fixVersion>
                                    <component>core</component>
                    <component>security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16781839" author="anchela" created="Fri, 1 Mar 2019 16:17:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stillalex&quot; class=&quot;user-hover&quot; rel=&quot;stillalex&quot;&gt;stillalex&lt;/a&gt;, initial patch attached (no tests need to be modified). Will additionally attach a dedicated test illustrating the issue in a composite setup.&lt;/p&gt;</comment>
                            <comment id="16785576" author="alex.parvulescu" created="Wed, 6 Mar 2019 12:29:06 +0000"  >&lt;p&gt;looks good to me.&lt;/p&gt;</comment>
                            <comment id="16785618" author="anchela" created="Wed, 6 Mar 2019 13:12:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stillalex&quot; class=&quot;user-hover&quot; rel=&quot;stillalex&quot;&gt;stillalex&lt;/a&gt;, thanks a lot for the review. i committed the fix at revision 1854921 together with a test illustrating the issue.&lt;/p&gt;</comment>
                            <comment id="16817717" author="edivad" created="Mon, 15 Apr 2019 09:19:40 +0000"  >&lt;p&gt;bulk close 1.12.0&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12960800" name="OAK-8101.patch" size="4120" author="angela" created="Fri, 1 Mar 2019 16:15:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 30 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z008jc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>